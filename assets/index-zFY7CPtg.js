(async()=>{function nB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rB(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Mw={exports:{}},dp={},$w={exports:{}},Tn={};var dC;function iB(){if(dC)return Tn;dC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function b(te){return te===null||typeof te!="object"?null:(te=h&&te[h]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function k(te,ue,de){this.props=te,this.context=ue,this.refs=E,this.updater=de||x}k.prototype.isReactComponent={},k.prototype.setState=function(te,ue){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ue,"setState")},k.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function j(){}j.prototype=k.prototype;function C(te,ue,de){this.props=te,this.context=ue,this.refs=E,this.updater=de||x}var R=C.prototype=new j;R.constructor=C,_(R,k.prototype),R.isPureReactComponent=!0;var q=Array.isArray,L=Object.prototype.hasOwnProperty,$={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function P(te,ue,de){var ye,we={},Ie=null,ze=null;if(ue!=null)for(ye in ue.ref!==void 0&&(ze=ue.ref),ue.key!==void 0&&(Ie=""+ue.key),ue)L.call(ue,ye)&&!W.hasOwnProperty(ye)&&(we[ye]=ue[ye]);var Re=arguments.length-2;if(Re===1)we.children=de;else if(1<Re){for(var De=Array(Re),Je=0;Je<Re;Je++)De[Je]=arguments[Je+2];we.children=De}if(te&&te.defaultProps)for(ye in Re=te.defaultProps,Re)we[ye]===void 0&&(we[ye]=Re[ye]);return{$$typeof:t,type:te,key:Ie,ref:ze,props:we,_owner:$.current}}function O(te,ue){return{$$typeof:t,type:te.type,key:ue,ref:te.ref,props:te.props,_owner:te._owner}}function z(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function F(te){var ue={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(de){return ue[de]})}var V=/\/+/g;function U(te,ue){return typeof te=="object"&&te!==null&&te.key!=null?F(""+te.key):ue.toString(36)}function M(te,ue,de,ye,we){var Ie=typeof te;(Ie==="undefined"||Ie==="boolean")&&(te=null);var ze=!1;if(te===null)ze=!0;else switch(Ie){case"string":case"number":ze=!0;break;case"object":switch(te.$$typeof){case t:case e:ze=!0}}if(ze)return ze=te,we=we(ze),te=ye===""?"."+U(ze,0):ye,q(we)?(de="",te!=null&&(de=te.replace(V,"$&/")+"/"),M(we,ue,de,"",function(Je){return Je})):we!=null&&(z(we)&&(we=O(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(V,"$&/")+"/")+te)),ue.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",q(te))for(var Re=0;Re<te.length;Re++){Ie=te[Re];var De=ye+U(Ie,Re);ze+=M(Ie,ue,de,De,we)}else if(De=b(te),typeof De=="function")for(te=De.call(te),Re=0;!(Ie=te.next()).done;)Ie=Ie.value,De=ye+U(Ie,Re++),ze+=M(Ie,ue,de,De,we);else if(Ie==="object")throw ue=String(te),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return ze}function X(te,ue,de){if(te==null)return te;var ye=[],we=0;return M(te,ye,"","",function(Ie){return ue.call(de,Ie,we++)}),ye}function J(te){if(te._status===-1){var ue=te._result;ue=ue(),ue.then(function(de){(te._status===0||te._status===-1)&&(te._status=1,te._result=de)},function(de){(te._status===0||te._status===-1)&&(te._status=2,te._result=de)}),te._status===-1&&(te._status=0,te._result=ue)}if(te._status===1)return te._result.default;throw te._result}var le={current:null},ie={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ie,ReactCurrentOwner:$};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Tn.Children={map:X,forEach:function(te,ue,de){X(te,function(){ue.apply(this,arguments)},de)},count:function(te){var ue=0;return X(te,function(){ue++}),ue},toArray:function(te){return X(te,function(ue){return ue})||[]},only:function(te){if(!z(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Tn.Component=k,Tn.Fragment=n,Tn.Profiler=i,Tn.PureComponent=C,Tn.StrictMode=r,Tn.Suspense=u,Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Tn.act=oe,Tn.cloneElement=function(te,ue,de){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var ye=_({},te.props),we=te.key,Ie=te.ref,ze=te._owner;if(ue!=null){if(ue.ref!==void 0&&(Ie=ue.ref,ze=$.current),ue.key!==void 0&&(we=""+ue.key),te.type&&te.type.defaultProps)var Re=te.type.defaultProps;for(De in ue)L.call(ue,De)&&!W.hasOwnProperty(De)&&(ye[De]=ue[De]===void 0&&Re!==void 0?Re[De]:ue[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){Re=Array(De);for(var Je=0;Je<De;Je++)Re[Je]=arguments[Je+2];ye.children=Re}return{$$typeof:t,type:te.type,key:we,ref:Ie,props:ye,_owner:ze}},Tn.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},Tn.createElement=P,Tn.createFactory=function(te){var ue=P.bind(null,te);return ue.type=te,ue},Tn.createRef=function(){return{current:null}},Tn.forwardRef=function(te){return{$$typeof:l,render:te}},Tn.isValidElement=z,Tn.lazy=function(te){return{$$typeof:p,_payload:{_status:-1,_result:te},_init:J}},Tn.memo=function(te,ue){return{$$typeof:f,type:te,compare:ue===void 0?null:ue}},Tn.startTransition=function(te){var ue=ie.transition;ie.transition={};try{te()}finally{ie.transition=ue}},Tn.unstable_act=oe,Tn.useCallback=function(te,ue){return le.current.useCallback(te,ue)},Tn.useContext=function(te){return le.current.useContext(te)},Tn.useDebugValue=function(){},Tn.useDeferredValue=function(te){return le.current.useDeferredValue(te)},Tn.useEffect=function(te,ue){return le.current.useEffect(te,ue)},Tn.useId=function(){return le.current.useId()},Tn.useImperativeHandle=function(te,ue,de){return le.current.useImperativeHandle(te,ue,de)},Tn.useInsertionEffect=function(te,ue){return le.current.useInsertionEffect(te,ue)},Tn.useLayoutEffect=function(te,ue){return le.current.useLayoutEffect(te,ue)},Tn.useMemo=function(te,ue){return le.current.useMemo(te,ue)},Tn.useReducer=function(te,ue,de){return le.current.useReducer(te,ue,de)},Tn.useRef=function(te){return le.current.useRef(te)},Tn.useState=function(te){return le.current.useState(te)},Tn.useSyncExternalStore=function(te,ue,de){return le.current.useSyncExternalStore(te,ue,de)},Tn.useTransition=function(){return le.current.useTransition()},Tn.version="18.3.1",Tn}var fC;function Qh(){return fC||(fC=1,$w.exports=iB()),$w.exports}var pC;function sB(){if(pC)return dp;pC=1;var t=Qh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,f){var p,h={},b=null,x=null;f!==void 0&&(b=""+f),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:l,key:b,ref:x,props:h,_owner:i.current}}return dp.Fragment=n,dp.jsx=o,dp.jsxs=o,dp}var hC;function oB(){return hC||(hC=1,Mw.exports=sB()),Mw.exports}var d=oB(),tf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xc=typeof window>"u"||"Deno"in globalThis;function eo(){}function aB(t,e){return typeof t=="function"?t(e):t}function $S(t){return typeof t=="number"&&t>=0&&t!==1/0}function R3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function vd(t,e){return typeof t=="function"?t(e):t}function Io(t,e){return typeof t=="function"?t(e):t}function mC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==uI(o,e.options))return!1}else if(!oh(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function gC(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(eu(e.options.mutationKey)!==eu(s))return!1}else if(!oh(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function uI(t,e){return(e?.queryKeyHashFn||eu)(t)}function eu(t){return JSON.stringify(t,(e,n)=>BS(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function oh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!oh(t[n],e[n])):!1}function dI(t,e){if(t===e)return t;const n=yC(t)&&yC(e);if(n||BS(t)&&BS(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let u=0;for(let f=0;f<o;f++){const p=n?f:s[f];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(l[p]=void 0,u++):(l[p]=dI(t[p],e[p]),l[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function eb(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function yC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function BS(t){if(!bC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!bC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function bC(t){return Object.prototype.toString.call(t)==="[object Object]"}function lB(t){return new Promise(e=>{setTimeout(e,t)})}function zS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?dI(t,e):e}function cB(t){return t}function uB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function dB(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var fI=Symbol();function O3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===fI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var fB=class extends tf{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Xc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},pI=new fB,pB=class extends tf{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Xc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},tb=new pB;function WS(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function hB(t){return Math.min(1e3*2**t,3e4)}function q3(t){return(t??"online")==="online"?tb.isOnline():!0}var A3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Bw(t){return t instanceof A3}function P3(t){let e=!1,n=0,r=!1,i;const s=WS(),o=E=>{r||(b(new A3(E)),t.abort?.())},l=()=>{e=!0},u=()=>{e=!1},f=()=>pI.isFocused()&&(t.networkMode==="always"||tb.isOnline())&&t.canRun(),p=()=>q3(t.networkMode)&&t.canRun(),h=E=>{r||(r=!0,t.onSuccess?.(E),i?.(),s.resolve(E))},b=E=>{r||(r=!0,t.onError?.(E),i?.(),s.reject(E))},x=()=>new Promise(E=>{i=k=>{(r||f())&&E(k)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let E;const k=n===0?t.initialPromise:void 0;try{E=k??t.fn()}catch(j){E=Promise.reject(j)}Promise.resolve(E).then(h).catch(j=>{if(r)return;const C=t.retry??(Xc?0:3),R=t.retryDelay??hB,q=typeof R=="function"?R(n,j):R,L=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,j);if(e||!L){b(j);return}n++,t.onFail?.(n,j),lB(q).then(()=>f()?void 0:x()).then(()=>{e?b(j):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function mB(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Jr=mB(),F3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$S(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Xc?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},gB=class extends F3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=yB(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=zS(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(eo).catch(eo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Io(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!R3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const l=O3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(l,u,this):l(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=l=>{Bw(l)&&l.silent||this.#o({type:"error",error:l}),Bw(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=P3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){o(u);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,u)=>{this.#o({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...D3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return Bw(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Jr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function D3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:q3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function yB(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bB=class extends tf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??uI(r,e);let s=this.get(i);return s||(s=new gB({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Jr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>mC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>mC(t,n)):e}notify(t){Jr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Jr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Jr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vB=class extends F3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||L3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=P3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Jr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function L3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xB=class extends tf{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new vB({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Tg(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Tg(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Tg(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Tg(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Jr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>gC(e,n))}findAll(t={}){return this.getAll().filter(e=>gC(t,e))}notify(t){Jr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Jr.batch(()=>Promise.all(t.map(e=>e.continue().catch(eo))))}};function Tg(t){return t.options.scope?.id}function vC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const f=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=O3(e.options,e.fetchOptions),x=async(_,E,k)=>{if(p)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const j={queryKey:e.queryKey,pageParam:E,direction:k?"backward":"forward",meta:e.options.meta};h(j);const C=await b(j),{maxPages:R}=e.options,q=k?dB:uB;return{pages:q(_.pages,C,R),pageParams:q(_.pageParams,E,R)}};if(i&&s.length){const _=i==="backward",E=_?wB:xC,k={pages:s,pageParams:o},j=E(r,k);l=await x(k,j,_)}else{const _=t??s.length;do{const E=u===0?o[0]??r.initialPageParam:xC(r,l);if(u>0&&E==null)break;l=await x(l,E),u++}while(u<_)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(f,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=f}}}function xC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function wB(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var _B=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new bB,this.#t=t.mutationCache||new xB,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=pI.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=tb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(vd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=aB(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Jr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Jr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Jr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Jr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(eo).catch(eo)}invalidateQueries(t,e={}){return Jr.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Jr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(eo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(eo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(vd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(eo).catch(eo)}fetchInfiniteQuery(t){return t.behavior=vC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(eo).catch(eo)}ensureInfiniteQueryData(t){return t.behavior=vC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(eu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{oh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(eu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{oh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=uI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===fI&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},SB=class extends tf{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=WS(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#c;#l;#u;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),wC(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return VS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return VS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Io(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!eb(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&_C(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||Io(this.options.enabled,this.#t)!==Io(n.enabled,this.#t)||vd(this.options.staleTime,this.#t)!==vd(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||Io(this.options.enabled,this.#t)!==Io(n.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return IB(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(eo)),e}#g(){this.#x();const t=vd(this.options.staleTime,this.#t);if(Xc||this.#r.isStale||!$S(t))return;const n=R3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#f=t,!(Xc||Io(this.options.enabled,this.#t)===!1||!$S(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||pI.isFocused())&&this.#h()},this.#f))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:f}=t;let p={...f},h=!1,b;if(e._optimisticResults){const W=this.hasListeners(),P=!W&&wC(t,e),O=W&&_C(t,n,e,r);(P||O)&&(p={...p,...D3(f.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:E}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#c)b=this.#l;else try{this.#c=e.select,b=e.select(p.data),b=zS(i?.data,b,e),this.#l=b,this.#a=null}catch(W){this.#a=W}else b=p.data;if(e.placeholderData!==void 0&&b===void 0&&E==="pending"){let W;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)W=i.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#a=null}catch(P){this.#a=P}W!==void 0&&(E="success",b=zS(i?.data,W,e),h=!0)}this.#a&&(x=this.#a,b=this.#l,_=Date.now(),E="error");const k=p.fetchStatus==="fetching",j=E==="pending",C=E==="error",R=j&&k,q=b!==void 0,$={status:E,fetchStatus:p.fetchStatus,isPending:j,isSuccess:E==="success",isError:C,isInitialLoading:R,isLoading:R,data:b,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!j,isLoadingError:C&&!q,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&q,isStale:hI(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const W=z=>{$.status==="error"?z.reject($.error):$.data!==void 0&&z.resolve($.data)},P=()=>{const z=this.#o=$.promise=WS();W(z)},O=this.#o;switch(O.status){case"pending":t.queryHash===n.queryHash&&W(O);break;case"fulfilled":($.status==="error"||$.data!==O.value)&&P();break;case"rejected":($.status!=="error"||$.error!==O.reason)&&P();break}}return $}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#u=this.#t),eb(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(u=>{const f=u;return this.#r[f]!==e[f]&&l.has(f)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){Jr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function EB(t,e){return Io(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wC(t,e){return EB(t,e)||t.state.data!==void 0&&VS(t,e,e.refetchOnMount)}function VS(t,e,n){if(Io(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&hI(t,e)}return!1}function _C(t,e,n,r){return(t!==e||Io(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&hI(t,n)}function hI(t,e){return Io(e.enabled,t)!==!1&&t.isStaleByTime(vd(e.staleTime,t))}function IB(t,e){return!eb(t.getCurrentResult(),e)}var NB=class extends tf{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),eb(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&eu(n.mutationKey)!==eu(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??L3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Jr.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},H=Qh();const Bn=co(H),kB=nB({__proto__:null,default:Bn},[H]);var M3=H.createContext(void 0),uv=t=>{const e=H.useContext(M3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},CB=({client:t,children:e})=>(H.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(M3.Provider,{value:t,children:e})),$3=H.createContext(!1),TB=()=>H.useContext($3);$3.Provider;function jB(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var RB=H.createContext(jB()),OB=()=>H.useContext(RB);function B3(t,e){return typeof t=="function"?t(...e):!!t}function US(){}var qB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},AB=t=>{H.useEffect(()=>{t.clearReset()},[t])},PB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&B3(n,[t.error,r]),FB=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},DB=(t,e)=>t.isLoading&&t.isFetching&&!e,LB=(t,e)=>t?.suspense&&e.isPending,SC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function MB(t,e,n){const r=uv(),i=TB(),s=OB(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",FB(o),qB(o,s),AB(s);const l=!r.getQueryCache().get(o.queryHash),[u]=H.useState(()=>new e(r,o)),f=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(h=>{const b=p?u.subscribe(Jr.batchCalls(h)):US;return u.updateResult(),b},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),H.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),LB(o,f))throw SC(o,u,s);if(PB({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw f.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!Xc&&DB(f,i)&&(l?SC(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(US).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?f:u.trackResult(f)}function nb(t,e){return MB(t,SB)}function EC(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function $B(t={},e){const n=uv().getMutationCache(),r=H.useRef(t),i=H.useRef(null);return i.current||(i.current=EC(n,t)),H.useEffect(()=>{r.current=t}),H.useSyncExternalStore(H.useCallback(s=>n.subscribe(()=>{const o=dI(i.current,EC(n,r.current));i.current!==o&&(i.current=o,Jr.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Zt(t,e){const n=uv(),[r]=H.useState(()=>new NB(n,t));H.useEffect(()=>{r.setOptions(t)},[r,t]);const i=H.useSyncExternalStore(H.useCallback(o=>r.subscribe(Jr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=H.useCallback((o,l)=>{r.mutate(o,l).catch(US)},[r]);if(i.error&&B3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const Kc="__TSR_index",IC="popstate",NC="beforeunload";function z3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:l,...u})=>{var f,p;if(l?.ignoreBlocker??!1){o();return}const b=((f=t.getBlockers)==null?void 0:f.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&b.length&&x)for(const _ of b){const E=ah(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:E,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,l,u)=>{const f=e.state[Kc];l=HS(f+1,l),s({task:()=>{t.pushState(o,l),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:l})},replace:(o,l,u)=>{const f=e.state[Kc];l=HS(f,l),s({task:()=>{t.replaceState(o,l),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:l})},go:(o,l)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Kc]!==0,createHref:o=>t.createHref(o),block:o=>{var l;if(!t.setBlockers)return()=>{};const u=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...u,o]),()=>{var f,p;const h=((f=t.getBlockers)==null?void 0:f.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(b=>b!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function HS(t,e){return e||(e={}),{...e,key:WB(),[Kc]:t}}function BB(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,l=P=>P,u=()=>ah(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let f=u(),p,h=!1,b=!1,x=!1,_=!1;const E=()=>f;let k,j;const C=()=>{k&&(W._ignoreSubscribers=!0,(k.isPush?e.history.pushState:e.history.replaceState)(k.state,"",k.href),W._ignoreSubscribers=!1,k=void 0,j=void 0,p=void 0)},R=(P,O,z)=>{const F=l(O);j||(p=f),f=ah(O,z),k={href:F,state:z,isPush:k?.isPush||P==="push"},j||(j=Promise.resolve().then(()=>C()))},q=P=>{f=u(),W.notify({type:P})},L=async()=>{if(b){b=!1;return}const P=u(),O=P.state[Kc]-f.state[Kc],z=O===1,F=O===-1,V=!z&&!F||h;h=!1;const U=V?"GO":F?"BACK":"FORWARD",M=V?{type:"GO",index:O}:{type:F?"BACK":"FORWARD"};if(x)x=!1;else{const X=s();if(typeof document<"u"&&X.length){for(const J of X)if(await J.blockerFn({currentLocation:f,nextLocation:P,action:U})){b=!0,e.history.go(1),W.notify(M);return}}}f=u(),W.notify(M)},$=P=>{if(_){_=!1;return}let O=!1;const z=s();if(typeof document<"u"&&z.length)for(const F of z){const V=F.enableBeforeUnload??!0;if(V===!0){O=!0;break}if(typeof V=="function"&&V()===!0){O=!0;break}}if(O)return P.preventDefault(),P.returnValue=""},W=z3({getLocation:E,getLength:()=>e.history.length,pushState:(P,O)=>R("push",P,O),replaceState:(P,O)=>R("replace",P,O),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>l(P),flush:C,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(NC,$,{capture:!0}),e.removeEventListener(IC,L)},onBlocked:()=>{p&&f!==p&&(f=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(NC,$,{capture:!0}),e.addEventListener(IC,L),e.history.pushState=function(...P){const O=n.apply(e.history,P);return W._ignoreSubscribers||q("PUSH"),O},e.history.replaceState=function(...P){const O=r.apply(e.history,P);return W._ignoreSubscribers||q("REPLACE"),O},W}function zB(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>HS(o,void 0));return z3({getLocation:()=>ah(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function ah(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Kc]:0}}}function WB(){return(Math.random()+1).toString(36).substring(7)}var VB="Invariant failed";function Ns(t,e){if(!t)throw new Error(VB)}const zw=H.createContext(null);function W3(){return typeof document>"u"?zw:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=zw,zw)}function Mo(t){const e=H.useContext(W3());return t?.warn,e}var Ww={exports:{}},Vw={},Uw={exports:{}},Hw={};var kC;function UB(){if(kC)return Hw;kC=1;var t=Qh();function e(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(h,b){var x=b(),_=r({inst:{value:x,getSnapshot:b}}),E=_[0].inst,k=_[1];return s(function(){E.value=x,E.getSnapshot=b,u(E)&&k({inst:E})},[h,x,b]),i(function(){return u(E)&&k({inst:E}),h(function(){u(E)&&k({inst:E})})},[h]),o(x),x}function u(h){var b=h.getSnapshot;h=h.value;try{var x=b();return!n(h,x)}catch{return!0}}function f(h,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Hw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Hw}var CC;function HB(){return CC||(CC=1,Uw.exports=UB()),Uw.exports}var TC;function KB(){if(TC)return Vw;TC=1;var t=Qh(),e=HB();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Vw.useSyncExternalStoreWithSelector=function(f,p,h,b,x){var _=s(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=l(function(){function j($){if(!C){if(C=!0,R=$,$=b($),x!==void 0&&E.hasValue){var W=E.value;if(x(W,$))return q=W}return q=$}if(W=q,r(R,$))return W;var P=b($);return x!==void 0&&x(W,P)?(R=$,W):(R=$,q=P)}var C=!1,R,q,L=h===void 0?null:h;return[function(){return j(p())},L===null?void 0:function(){return j(L())}]},[p,h,b,x]);var k=i(f,_[0],_[1]);return o(function(){E.hasValue=!0,E.value=k},[k]),u(k),k},Vw}var jC;function QB(){return jC||(jC=1,Ww.exports=KB()),Ww.exports}var V3=QB();const GB=co(V3),xd=new WeakMap,fy=new WeakMap,rb={current:[]};let Kw=!1,Vp=0;const Ip=new Set,jg=new Map;function U3(t){const e=Array.from(t).sort((n,r)=>n instanceof wd&&n.options.deps.includes(r)?1:r instanceof wd&&r.options.deps.includes(n)?-1:0);for(const n of e){if(rb.current.includes(n))continue;rb.current.push(n),n.recompute();const r=fy.get(n);if(r)for(const i of r){const s=xd.get(i);s&&U3(s)}}}function JB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function ZB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function H3(t){if(Vp>0&&!jg.has(t)&&jg.set(t,t.prevState),Ip.add(t),!(Vp>0)&&!Kw)try{for(Kw=!0;Ip.size>0;){const e=Array.from(Ip);Ip.clear();for(const n of e){const r=jg.get(n)??n.prevState;n.prevState=r,JB(n)}for(const n of e){const r=xd.get(n);r&&(rb.current.push(n),U3(r))}for(const n of e){const r=xd.get(n);if(r)for(const i of r)ZB(i)}}}finally{Kw=!1,rb.current=[],jg.clear()}}function Qw(t){Vp++;try{t()}finally{if(Vp--,Vp===0){const e=Array.from(Ip)[0];e&&H3(e)}}}class KS{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),H3(this)},this.prevState=e,this.state=e,this.options=n}}class wd{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof wd&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof wd)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof KS){let r=xd.get(n);r||(r=new Set,xd.set(n,r)),r.add(this);let i=fy.get(this);i||(i=new Set,fy.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof wd)this.unregisterFromGraph(n.options.deps);else if(n instanceof KS){const r=xd.get(n);r&&r.delete(this);const i=fy.get(this);i&&i.delete(n)}}}function YB(t,e=n=>n){return V3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,XB)}function XB(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Gw,RC;function e4(){if(RC)return Gw;RC=1;const t={},e=t.hasOwnProperty,n=(P,O)=>{for(const z in P)e.call(P,z)&&O(z,P[z])},r=(P,O)=>(O&&n(O,(z,F)=>{P[z]=F}),P),i=(P,O)=>{const z=P.length;let F=-1;for(;++F<z;)O(P[F])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,O)=>{let z=P.toString(16);return O?z:z.toUpperCase()},l=t.toString,u=Array.isArray,f=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>l.call(P)=="[object Object]",h=P=>typeof P=="string"||l.call(P)=="[object String]",b=P=>typeof P=="number"||l.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",E=P=>l.call(P)=="[object Map]",k=P=>l.call(P)=="[object Set]",j={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},C=/[\\\b\f\n\r\t]/,R=/[0-9]/,q=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,L=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,$=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,W=(P,O)=>{const z=()=>{le=J,++O.indentLevel,J=O.indent.repeat(O.indentLevel)},F={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},V=O&&O.json;V&&(F.quotes="double",F.wrap=!0),O=r(F,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const U=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",M=O.compact,X=O.lowercaseHex;let J=O.indent.repeat(O.indentLevel),le="";const ie=O.__inline1__,ne=O.__inline2__,oe=M?"":`
`;let te,ue=!0;const de=O.numbers=="binary",ye=O.numbers=="octal",we=O.numbers=="decimal",Ie=O.numbers=="hexadecimal";if(V&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(E(P))return P.size==0?"new Map()":(M||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+W(Array.from(P),O)+")");if(k(P))return P.size==0?"new Set()":"new Set("+W(Array.from(P),O)+")";if(f(P))return P.length==0?"Buffer.from([])":"Buffer.from("+W(Array.from(P),O)+")";if(u(P))return te=[],O.wrap=!0,ie&&(O.__inline1__=!1,O.__inline2__=!0),ne||z(),i(P,Re=>{ue=!1,ne&&(O.__inline2__=!1),te.push((M||ne?"":J)+W(Re,O))}),ue?"[]":ne?"["+te.join(", ")+"]":"["+oe+te.join(","+oe)+oe+(M?"":le)+"]";if(b(P)||x(P)){if(V)return JSON.stringify(Number(P));let Re;if(we)Re=String(P);else if(Ie){let De=P.toString(16);X||(De=De.toUpperCase()),Re="0x"+De}else de?Re="0b"+P.toString(2):ye&&(Re="0o"+P.toString(8));return x(P)?Re+"n":Re}else return x(P)?V?JSON.stringify(Number(P)):P+"n":p(P)?(te=[],O.wrap=!0,z(),n(P,(Re,De)=>{ue=!1,te.push((M?"":J)+W(Re,O)+":"+(M?"":" ")+W(De,O))}),ue?"{}":"{"+oe+te.join(","+oe)+oe+(M?"":le)+"}"):V?JSON.stringify(P)||"null":String(P)}const ze=O.escapeEverything?L:$;return te=P.replace(ze,(Re,De,Je,Xe,Ve,ct)=>{if(De){if(O.minimal)return De;const Rt=De.charCodeAt(0),Ut=De.charCodeAt(1);if(O.es6){const sn=(Rt-55296)*1024+Ut-56320+65536;return"\\u{"+o(sn,X)+"}"}return s(o(Rt,X))+s(o(Ut,X))}if(Je)return s(o(Je.charCodeAt(0),X));if(Re=="\0"&&!V&&!R.test(ct.charAt(Ve+1)))return"\\0";if(Xe)return Xe==U||O.escapeEverything?"\\"+Xe:Xe;if(C.test(Re))return j[Re];if(O.minimal&&!q.test(Re))return Re;const _t=o(Re.charCodeAt(0),X);return V||_t.length>2?s(_t):"\\x"+("00"+_t).slice(-2)}),U=="`"&&(te=te.replace(/\$\{/g,"\\${")),O.isScriptContext&&(te=te.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,V?"\\u003C!--":"\\x3C!--")),O.wrap&&(te=U+te+U),te};return W.version="3.0.2",Gw=W,Gw}e4();const Es="__root__";function t4(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function OC(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function n4(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const l=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],OC(l)):i[r]=OC(l)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const r4=s4(JSON.parse),i4=o4(JSON.stringify,JSON.parse);function s4(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=n4(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function o4(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=t4(r).toString();return i?`?${i}`:""}}function Up(t){return t[t.length-1]}function a4(t){return typeof t=="function"}function $c(t,e){return a4(t)?t(e):t}function py(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Ys(t,e){if(t===e)return t;const n=e,r=AC(t)&&AC(n);if(r||Dl(t)&&Dl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),l=o.length,u=r?[]:{};let f=0;for(let p=0;p<l;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,f++):(u[h]=Ys(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&f++)}return s===l&&f===s?t:u}return n}function Dl(t){if(!qC(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!qC(n)||!n.hasOwnProperty("isPrototypeOf"))}function qC(t){return Object.prototype.toString.call(t)==="[object Object]"}function AC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function PC(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function _d(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Dl(t)&&Dl(e)){const r=n?.ignoreUndefined??!0,i=PC(t,r),s=PC(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>_d(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!_d(r,e[i],n)):!1}const Np=typeof window<"u"?H.useLayoutEffect:H.useEffect;function od(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Jw(t){const e=H.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function l4(t,e,n={},r={}){const i=H.useRef(typeof IntersectionObserver=="function"),s=H.useRef(null);return H.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function c4(t){const e=H.useRef(null);return H.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function La(t){return dv(t.filter(e=>e!==void 0).join("/"))}function dv(t){return t.replace(/\/{2,}/g,"/")}function mI(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Bc(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function u4(t){return Bc(mI(t))}function ib(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function d4(t,e,n){return ib(t,n)===ib(e,n)}function f4({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=sb(t,e,i),n=sb(t,n,i);let l=Ld(e);const u=Ld(n);l.length>1&&((s=Up(l))==null?void 0:s.value)==="/"&&l.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&l.push(p):l=[p]:p.value===".."?l.pop():p.value==="."||l.push(p)}),l.length>1&&(((o=Up(l))==null?void 0:o.value)==="/"?r==="never"&&l.pop():r==="always"&&l.push({type:"pathname",value:"/"}));const f=La([t,...l.map(p=>p.value)]);return dv(f)}function Ld(t){if(!t)return[];t=dv(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Rg({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Ld(t),o={};for(const[l,u]of Object.entries(e)){const f=typeof u=="string";["*","_splat"].includes(l)?o[l]=f?encodeURI(u):u:o[l]=f?p4(u,i):u}return La(s.map(l=>{if(l.type==="wildcard"){const u=o._splat;return n?`${l.value}${u??""}`:u}if(l.type==="param"){if(r){const u=o[l.value];return`${l.value}${u??""}`}return o[l.value.substring(1)]??"undefined"}return l.value}))}function p4(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function Og(t,e,n){const r=h4(t,e,n);if(!(n.to&&!r))return r??{}}function sb(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function h4(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=sb(t,e,n.caseSensitive);const r=sb(t,`${n.to??"$"}`,n.caseSensitive),i=Ld(e),s=Ld(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const f=i[u],p=s[u],h=u>=i.length-1,b=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(La(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!f?.value)return!0;if(f){if(n.caseSensitive){if(p.value!==f.value)return!1}else if(p.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(p.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(f.value))}}if(!h&&b)return o["**"]=La(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function Gh(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function Rc(t){return!!t?.isRedirect}function Zw(t){return!!t?.isRedirect&&t.href}function gI(t){const e=t.errorComponent??fv;return d.jsx(m4,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?H.createElement(e,{error:n,reset:r}):t.children})}class m4 extends H.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function fv({error:t}){const[e,n]=H.useState(!1);return d.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[d.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),d.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),d.jsx("div",{style:{height:".25rem"}}),e?d.jsx("div",{children:d.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?d.jsx("code",{children:t.message}):null})}):null]})}function Ki(t){const e=Mo({warn:t?.router===void 0}),n=t?.router||e,r=H.useRef();return YB(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Ys(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function So(t){return!!t?.isNotFound}function g4(t){const e=Ki({select:n=>`not-found-${n.location.pathname}-${n.status}`});return d.jsx(gI,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(So(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(So(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function y4(){return d.jsx("p",{children:"Not Found"})}const kp={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Ag.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Dl(i)){const s=Ag.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>kp.encode(n));if(Dl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,kp.encode(r)]));const e=Ag.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Dl(t)){const e=Ag.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>kp.decode(e)):Dl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,kp.decode(n)])):t}},qg=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Ag=[qg("undefined",t=>t===void 0,()=>0,()=>{}),qg("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),qg("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),qg("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],K3=["component","errorComponent","pendingComponent","notFoundComponent"];function b4(t){var e;for(const n of K3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Yw(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new QS("Async validation not supported");if(n.issues)throw new QS(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function v4(t){return new x4(t)}class x4{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${u4(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?zB({initialEntries:[this.basepath||"/"]}):BB()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new KS(_4(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((l,u)=>{l.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const f=this.routesById[l.id];if(Ns(!f,`Duplicate routes found with id: ${String(l.id)}`),this.routesById[l.id]=l,!l.isRoot&&l.path){const h=Bc(l.fullPath);(!this.routesByPath[h]||l.fullPath.endsWith("/"))&&(this.routesByPath[h]=l)}const p=l.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,l)=>{var u;if(o.isRoot||!o.path)return;const f=mI(o.fullPath),p=Ld(f);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);i.push({child:o,trimmed:f,parsed:p,index:l,scores:h})}),this.flatRoutes=i.sort((o,l)=>{const u=Math.min(o.scores.length,l.scores.length);for(let f=0;f<u;f++)if(o.scores[f]!==l.scores[f])return l.scores[f]-o.scores[f];if(o.scores.length!==l.scores.length)return l.scores.length-o.scores.length;for(let f=0;f<u;f++)if(o.parsed[f].value!==l.parsed[f].value)return o.parsed[f].value>l.parsed[f].value?1:-1;return o.index-l.index}).map((o,l)=>(o.child.rank=l,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:f,hash:p,state:h})=>{const b=this.options.parseSearch(f),x=this.options.stringifySearch(b);return{pathname:u,searchStr:x,search:Ys(n?.search,b),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:Ys(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:l}=s.state;if(o&&(!l||l===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>f4({basepath:this.basepath,base:n,to:dv(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=Bc(n.pathname),o=p=>Og(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let l=r?.to!==void 0?this.routesByPath[r.to]:void 0;l?i=o(l):l=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=l||this.routesById[Es];const f=[u];for(;u.parentRoute;)u=u.parentRoute,f.unshift(u);return{matchedRoutes:f,routeParams:i,foundRoute:l}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var l,u,f,p,h,b;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(F=>Og(this.basepath,Bc(F.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,E=_?.pathname||this.latestLocation.pathname;Ns(s.from==null||_!=null,"Could not find match for from: "+s.from);const k=(l=this.state.pendingMatches)!=null&&l.length?(u=Up(this.state.pendingMatches))==null?void 0:u.search:((f=Up(x))==null?void 0:f.search)||this.latestLocation.search,j=o?.matchedRoutes.filter(F=>x.find(V=>V.routeId===F.id));let C;if(s.to)C=this.resolvePathWithBase(E,`${s.to}`);else{const F=this.routesById[(p=j?.find(V=>{const U=Rg({path:V.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return La([this.basepath,U])===E}))==null?void 0:p.id];C=this.resolvePathWithBase(E,F?.to??E)}const R={...(h=Up(x))==null?void 0:h.params};let q=(s.params??!0)===!0?R:{...R,...$c(s.params,R)};Object.keys(q).length>0&&o?.matchedRoutes.map(F=>{var V;return((V=F.options.params)==null?void 0:V.stringify)??F.options.stringifyParams}).filter(Boolean).forEach(F=>{q={...q,...F(q)}}),C=Rg({path:C,params:q??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let L=k;if(n._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let F={};o?.matchedRoutes.forEach(V=>{try{V.options.validateSearch&&(F={...F,...Yw(V.options.validateSearch,{...F,...L})??{}})}catch{}}),L=F}L=(F=>{const V=o?.matchedRoutes.reduce((X,J)=>{var le;const ie=[];if("search"in J.options)(le=J.options.search)!=null&&le.middlewares&&ie.push(...J.options.search.middlewares);else if(J.options.preSearchFilters||J.options.postSearchFilters){const ne=({search:oe,next:te})=>{let ue=oe;"preSearchFilters"in J.options&&J.options.preSearchFilters&&(ue=J.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=te(ue);return"postSearchFilters"in J.options&&J.options.postSearchFilters?J.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};ie.push(ne)}if(n._includeValidateSearch&&J.options.validateSearch){const ne=({search:oe,next:te})=>{try{const ue=te(oe);return{...ue,...Yw(J.options.validateSearch,ue)??{}}}catch{}};ie.push(ne)}return X.concat(ie)},[])??[],U=({search:X})=>s.search?s.search===!0?X:$c(s.search,X):{};V.push(U);const M=(X,J)=>{if(X>=V.length)return J;const le=V[X];return le({search:J,next:ne=>M(X+1,ne)})};return M(0,F)})(L),L=Ys(k,L);const W=this.options.stringifySearch(L),P=s.hash===!0?this.latestLocation.hash:s.hash?$c(s.hash,this.latestLocation.hash):void 0,O=P?`#${P}`:"";let z=s.state===!0?this.latestLocation.state:s.state?$c(s.state,this.latestLocation.state):{};return z=Ys(this.latestLocation.state,z),{pathname:C,search:L,searchStr:W,state:z,hash:P??"",href:`${C}${W}${O}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var l;const u=r(s);let f=o?r(o):void 0;if(!f){let b={};const x=(l=this.options.routeMasks)==null?void 0:l.find(_=>{const E=Og(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return E?(b=E,!0):!1});if(x){const{from:_,...E}=x;o={...py(n,["from"]),...E,params:b},f=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(f){const b=this.getMatchedRoutes(f,o),x=r(o,b);h.maskedLocation=x}return h};return n.mask?i(n,{...py(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=_d(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,l=this.commitLocationPromise;if(this.commitLocationPromise=od(()=>{l?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:f,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:l,...u}={})=>{if(l){const p=this.history.location.state.__TSR_index,h=ah(l,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const f=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var l;try{const u=this.latestLocation,f=this.state.resolvedLocation,p=f.href!==u.href,h=f.pathname!==u.pathname;this.cancelMatches();let b;Qw(()=>{b=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:b,cachedMatches:x.cachedMatches.filter(_=>!b.find(E=>E.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:b,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,E;Qw(()=>{this.__store.setState(k=>{const j=k.matches,C=k.pendingMatches||k.matches;return x=j.filter(R=>!C.find(q=>q.id===R.id)),_=C.filter(R=>!j.find(q=>q.id===R.id)),E=j.filter(R=>C.find(q=>q.id===R.id)),{...k,isLoading:!1,loadedAt:Date.now(),matches:C,pendingMatches:void 0,cachedMatches:[...k.cachedMatches,...x.filter(R=>R.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[E,"onStay"]].forEach(([k,j])=>{k.forEach(C=>{var R,q;(q=(R=this.looseRoutesById[C.routeId].options)[j])==null||q.call(R,C)})})})}})}catch(u){Zw(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):So(u)&&(i=u),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:i?404:f.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),l=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),f=o?"pendingMatches":l?"matches":u?"cachedMatches":"";return f&&this.__store.setState(p=>{var h;return{...p,[f]:(h=p[f])==null?void 0:h.map(b=>b.id===n?s=r(b):b)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:l})=>{let u,f=!1;const p=async()=>{f||(f=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const b=(x,_)=>{var E,k,j;if(Zw(_)&&!_.reloadDocument)throw _;if(Rc(_)||So(_)){if(o(x.id,C=>({...C,status:Rc(_)?"redirected":So(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(E=x.beforeLoadPromise)==null||E.resolve(),(k=x.loaderPromise)==null||k.resolve(),(j=x.loadPromise)==null||j.resolve(),Rc(_))throw f=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(So(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var E,k,j;try{const C=(L,$,W)=>{var P,O;const{id:z,routeId:F}=r[L],V=this.looseRoutesById[F];if($ instanceof Promise)throw $;$.routerCode=W,u=u??L,b(this.getMatch(z),$);try{(O=(P=V.options).onError)==null||O.call(P,$)}catch(U){$=U,b(this.getMatch(z),$)}o(z,U=>{var M,X;return(M=U.beforeLoadPromise)==null||M.resolve(),(X=U.loadPromise)==null||X.resolve(),{...U,error:$,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[L,{id:$,routeId:W}]of r.entries()){const P=this.getMatch($),O=(E=r[L-1])==null?void 0:E.id,z=this.looseRoutesById[W],F=z.options.pendingMs??this.options.defaultPendingMs,V=!!(s&&!this.isServer&&!h($)&&(z.options.loader||z.options.beforeLoad)&&typeof F=="number"&&F!==1/0&&(z.options.pendingComponent??this.options.defaultPendingComponent));let U=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(V&&setTimeout(()=>{try{p()}catch{}},F),await P.beforeLoadPromise,U=this.getMatch($).status!=="success"),U){try{o($,Ie=>({...Ie,loadPromise:od(()=>{var ze;(ze=Ie.loadPromise)==null||ze.resolve()}),beforeLoadPromise:od()}));const M=new AbortController;let X;V&&(X=setTimeout(()=>{try{p()}catch{}},F));const{paramsError:J,searchError:le}=this.getMatch($);J&&C(L,J,"PARSE_PARAMS"),le&&C(L,le,"VALIDATE_SEARCH");const ie=()=>O?this.getMatch(O).context:this.options.context??{};o($,Ie=>({...Ie,isFetching:"beforeLoad",fetchCount:Ie.fetchCount+1,abortController:M,pendingTimeout:X,context:{...ie(),...Ie.__routeContext}}));const{search:ne,params:oe,context:te,cause:ue}=this.getMatch($),de=h($),ye={search:ne,abortController:M,params:oe,preload:de,context:te,location:n,navigate:Ie=>this.navigate({...Ie,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ue,matches:r};let we=await ((j=(k=z.options).beforeLoad)==null?void 0:j.call(k,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch($)})),(Rc(we)||So(we))&&C(L,we,"BEFORE_LOAD"),o($,Ie=>({...Ie,__beforeLoadContext:we,context:{...ie(),...Ie.__routeContext,...we},abortController:M}))}catch(M){C(L,M,"BEFORE_LOAD")}o($,M=>{var X;return(X=M.beforeLoadPromise)==null||X.resolve(),{...M,beforeLoadPromise:void 0,isFetching:!1}})}}const R=r.slice(0,u),q=[];R.forEach(({id:L,routeId:$},W)=>{q.push((async()=>{const{loaderPromise:P}=this.getMatch(L);let O=!1,z=!1;if(P){await P;const F=this.getMatch(L);F.error&&b(F,F.error)}else{const F=q[W-1],V=this.looseRoutesById[$],U=()=>{const{params:ue,loaderDeps:de,abortController:ye,context:we,cause:Ie}=this.getMatch(L),ze=h(L);return{params:ue,deps:de,preload:!!ze,parentMatchPromise:F,abortController:ye,context:we,location:n,navigate:Re=>this.navigate({...Re,_fromLocation:n}),cause:ze?"preload":Ie,route:V}},M=Date.now()-this.getMatch(L).updatedAt,X=h(L),J=X?V.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:V.options.staleTime??this.options.defaultStaleTime??0,le=V.options.shouldReload,ie=typeof le=="function"?le(U()):le;o(L,ue=>({...ue,loaderPromise:od(),preload:!!X&&!this.state.matches.find(de=>de.id===L)}));const ne=async()=>{var ue,de,ye,we,Ie,ze,Re,De;try{const Je=async()=>{const Xe=this.getMatch(L);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(V),o(L,sn=>({...sn,isFetching:"loader"}));let Xe=await ((de=(ue=V.options).loader)==null?void 0:de.call(ue,U()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(L)})),b(this.getMatch(L),Xe),await V._lazyPromise,await Je();const Ve=(we=(ye=V.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(L),params:this.getMatch(L).params,loaderData:Xe}),ct=Ve?.meta,_t=Ve?.links,Rt=Ve?.scripts,Ut=(ze=(Ie=V.options).headers)==null?void 0:ze.call(Ie,{loaderData:Xe});o(L,sn=>({...sn,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ct,links:_t,scripts:Rt,headers:Ut}))}catch(Xe){let Ve=Xe;await Je(),b(this.getMatch(L),Xe);try{(De=(Re=V.options).onError)==null||De.call(Re,Xe)}catch(ct){Ve=ct,b(this.getMatch(L),ct)}o(L,ct=>({...ct,error:Ve,status:"error",isFetching:!1}))}await V._componentsPromise}catch(Je){o(L,Xe=>({...Xe,loaderPromise:void 0})),b(this.getMatch(L),Je)}},{status:oe,invalid:te}=this.getMatch(L);O=oe==="success"&&(te||(ie??M>J)),X&&V.options.preload===!1||(O&&!l?(z=!0,(async()=>{try{await ne();const{loaderPromise:ue,loadPromise:de}=this.getMatch(L);ue?.resolve(),de?.resolve(),o(L,ye=>({...ye,loaderPromise:void 0}))}catch(ue){Zw(ue)&&await this.navigate(ue)}})()):(oe!=="success"||O&&l)&&await ne())}if(!z){const{loaderPromise:F,loadPromise:V}=this.getMatch(L);F?.resolve(),V?.resolve()}return o(L,F=>({...F,isFetching:z?F.isFetching:!1,loaderPromise:z?F.loaderPromise:void 0,invalid:!1})),this.getMatch(L)})())}),await Promise.all(q),x()}catch(C){_(C)}})()}),await p()}catch(x){if(Rc(x)||So(x))throw So(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(K3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...s,...this.state.cachedMatches.map(l=>l.id)]);Qw(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,l]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(l,u)=>{s.has(l)?i=i.map(f=>f.id===l?u(f):f):this.updateMatch(l,u)}}),i}catch(l){if(Rc(l))return l.reloadDocument?void 0:await this.preloadRoute({...l,_fromLocation:r});console.error(l);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const l=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=Og(this.basepath,l.pathname,{...r,to:s.pathname});return!u||n.params&&!_d(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?_d(l.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??S4;return{state:{dehydratedMatches:this.state.matches.map(i=>({...py(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Ns(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,l=this.matchRoutes(this.state.location).map(u=>{const f=o.dehydratedMatches.find(p=>p.id===u.id);return Ns(f,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...f}});this.__store.setState(u=>({...u,matches:l})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[Es]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Es];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Es;)o=o.parentRoute,Ns(o);const l=s[o.id];Ns(l,"Could not find match for route: "+o.id),i(l.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??i4,parseSearch:e.parseSearch??r4,transformer:e.transformer??kp}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:Bc(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const b=i[h];if(b.children)return b.id}return Es}})(),u=i.map(h=>{var b;let x;const _=((b=h.options.params)==null?void 0:b.parse)??h.options.parseParams;if(_)try{const E=_(s);Object.assign(s,E)}catch(E){if(x=new w4(E.message,{cause:E}),n?.throwOnError)throw x;return x}}),f=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,b)=>{var x,_,E,k;const j=f[b-1],[C,R]=(()=>{const U=j?.search??e.search;try{const M=Yw(h.options.validateSearch,U)??{};return[{...U,...M},void 0]}catch(M){const X=new QS(M.message,{cause:M});if(n?.throwOnError)throw X;return[U,X]}})(),q=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:C}))??"",L=q?JSON.stringify(q):"",$=Rg({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),W=Rg({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+L,P=this.getMatch(W),O=this.state.matches.find(U=>U.routeId===h.id),z=O?"stay":"enter";let F;if(P)F={...P,cause:z,params:O?Ys(O.params,s):s,search:Ys(O?O.search:P.search,C)};else{const U=h.options.loader||h.options.beforeLoad||h.lazyFn||b4(h)?"pending":"success";F={id:W,index:b,routeId:h.id,params:O?Ys(O.params,s):s,pathname:La([this.basepath,$]),updatedAt:Date.now(),search:O?Ys(O.search,C):C,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:u[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:z,loaderDeps:O?Ys(O.loaderDeps,q):q,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:od(),fullPath:h.fullPath}}F.status==="success"&&(F.headers=(k=(E=h.options).headers)==null?void 0:k.call(E,{loaderData:F.loaderData})),n?.preload||(F.globalNotFound=l===h.id),F.searchError=R;const V=p(j);F.context={...V,...F.__routeContext,...F.__beforeLoadContext},f.push(F)}),f.forEach((h,b)=>{var x,_,E,k;const j=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const q=f[b-1],L=p(q),$={deps:h.loaderDeps,params:h.params,context:L,location:e,navigate:W=>this.navigate({...W,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:f};h.__routeContext=((_=(x=j.options).context)==null?void 0:_.call(x,$))??{},h.context={...L,...h.__routeContext,...h.__beforeLoadContext}}const R=(k=(E=j.options).head)==null?void 0:k.call(E,{matches:f,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=R?.links,h.scripts=R?.scripts,h.meta=R?.meta}),f}}class QS extends Error{}class w4 extends Error{}function _4(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function S4(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function FC(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function DC(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const pv=H.createContext(void 0),E4=H.createContext(void 0);function Ul(t){const e=H.useContext(t.from?E4:pv);return Ki({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Ns(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function ji(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function I4(t){const{select:e,...n}=t;return Ul({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function rn(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function N4(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function nc(t){const{navigate:e}=Mo();return H.useCallback(n=>e({...n}),[e])}let Q3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Es:Ns(this.parentRoute);let l=o?Es:s.path;l&&l!=="/"&&(l=mI(l));const u=s?.id||l;let f=o?Es:La([this.parentRoute.id===Es?"":this.parentRoute.id,u]);l===Es&&(l="/"),f!==Es&&(f=La(["/",f]));const p=f===Es?"/":La([this.parentRoute.fullPath,l]);this._path=l,this._id=f,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Ul({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Ul({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>N4({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>rn({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>I4({...n,from:this.id}),this.useLoaderData=n=>ji({...n,from:this.id}),this.useNavigate=()=>nc({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Ns(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function k4(t){return new Q3(t)}function C4(){return t=>j4(t)}class T4 extends Q3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function j4(t){return new T4(t)}function $t(t){return new R4(t,{silent:!0}).createRoute}class R4{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=k4(r);return i.isRoot=!1,i},this.silent=n?.silent}}function hy(t){return d.jsx(d.Fragment,{children:t.children})}function G3(t,e,n){return e.options.notFoundComponent?d.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?d.jsx(t.options.defaultNotFoundComponent,{data:n}):d.jsx(y4,{})}const J3=H.memo(function({matchId:e}){var n,r;const i=Mo(),s=Ki({select:k=>{var j;return(j=k.matches.find(C=>C.id===e))==null?void 0:j.routeId}});Ns(s);const o=i.routesById[s],l=o.options.pendingComponent??i.options.defaultPendingComponent,u=l?d.jsx(l,{}):null,f=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,b=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??l??((r=o.options.errorComponent)==null?void 0:r.preload))?H.Suspense:hy,x=f?gI:hy,_=h?g4:hy,E=Ki({select:k=>k.loadedAt});return d.jsx(pv.Provider,{value:e,children:d.jsx(b,{fallback:u,children:d.jsx(x,{getResetKey:()=>E,errorComponent:f||fv,onCatch:(k,j)=>{if(So(k))throw k;p?.(k,j)},children:d.jsx(_,{fallback:k=>{if(!h||k.routeId&&k.routeId!==s||!k.routeId&&!o.isRoot)throw k;return H.createElement(h,k)},children:d.jsx(O4,{matchId:e})})})})})}),O4=H.memo(function({matchId:e}){var n,r,i,s,o;const l=Mo(),{match:u,matchIndex:f,routeId:p}=Ki({select:_=>{const E=_.matches.findIndex(C=>C.id===e),k=_.matches[E];return{routeId:k.routeId,matchIndex:E,match:py(k,["id","status","error"])}},structuralSharing:!0}),h=l.routesById[p],b=H.useMemo(()=>{const _=h.options.component??l.options.defaultComponent;return _?d.jsx(_,{}):d.jsx(uo,{})},[h.options.component,l.options.defaultComponent]),x=(h.options.errorComponent??l.options.defaultErrorComponent)||fv;if(u.status==="notFound"){let _;return FC(u.error)?_=(((n=l.options.errorSerializer)==null?void 0:n.deserialize)??DC)(u.error.data):_=u.error,Ns(So(_)),G3(l,h,_)}if(u.status==="redirected")throw Ns(Rc(u.error)),(r=l.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(l.isServer)return d.jsx(x,{error:u.error,info:{componentStack:""}});throw FC(u.error)?(((i=l.options.errorSerializer)==null?void 0:i.deserialize)??DC)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??l.options.defaultPendingMinMs;if(_&&!((s=l.getMatch(u.id))!=null&&s.minPendingPromise)&&!l.isServer){const E=od();Promise.resolve().then(()=>{l.updateMatch(u.id,k=>({...k,minPendingPromise:E}))}),setTimeout(()=>{E.resolve(),l.updateMatch(u.id,k=>({...k,minPendingPromise:void 0}))},_)}throw(o=l.getMatch(u.id))==null?void 0:o.loadPromise}return d.jsxs(d.Fragment,{children:[b,l.AfterEachMatch?d.jsx(l.AfterEachMatch,{match:u,matchIndex:f}):null]})}),uo=H.memo(function(){const e=Mo(),n=H.useContext(pv),r=Ki({select:f=>{var p;return(p=f.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=Ki({select:f=>{const h=f.matches.find(b=>b.id===n);return Ns(h),h.globalNotFound}}),o=Ki({select:f=>{var p;const h=f.matches,b=h.findIndex(x=>x.id===n);return(p=h[b+1])==null?void 0:p.id}});if(s)return G3(e,i,void 0);if(!o)return null;const l=d.jsx(J3,{matchId:o}),u=e.options.defaultPendingComponent?d.jsx(e.options.defaultPendingComponent,{}):null;return n===Es?d.jsx(H.Suspense,{fallback:u,children:l}):l});var Xw={exports:{}},as={},e_={exports:{}},t_={};var LC;function q4(){return LC||(LC=1,function(t){function e(ie,ne){var oe=ie.length;ie.push(ne);e:for(;0<oe;){var te=oe-1>>>1,ue=ie[te];if(0<i(ue,ne))ie[te]=ne,ie[oe]=ue,oe=te;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],oe=ie.pop();if(oe!==ne){ie[0]=oe;e:for(var te=0,ue=ie.length,de=ue>>>1;te<de;){var ye=2*(te+1)-1,we=ie[ye],Ie=ye+1,ze=ie[Ie];if(0>i(we,oe))Ie<ue&&0>i(ze,we)?(ie[te]=ze,ie[Ie]=oe,te=Ie):(ie[te]=we,ie[ye]=oe,te=ye);else if(Ie<ue&&0>i(ze,oe))ie[te]=ze,ie[Ie]=oe,te=Ie;else break e}}return ne}function i(ie,ne){var oe=ie.sortIndex-ne.sortIndex;return oe!==0?oe:ie.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,b=3,x=!1,_=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ie){for(var ne=n(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=ie)r(f),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(f)}}function q(ie){if(E=!1,R(ie),!_)if(n(u)!==null)_=!0,J(L);else{var ne=n(f);ne!==null&&le(q,ne.startTime-ie)}}function L(ie,ne){_=!1,E&&(E=!1,j(P),P=-1),x=!0;var oe=b;try{for(R(ne),h=n(u);h!==null&&(!(h.expirationTime>ne)||ie&&!F());){var te=h.callback;if(typeof te=="function"){h.callback=null,b=h.priorityLevel;var ue=te(h.expirationTime<=ne);ne=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(u)&&r(u),R(ne)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(f);ye!==null&&le(q,ye.startTime-ne),de=!1}return de}finally{h=null,b=oe,x=!1}}var $=!1,W=null,P=-1,O=5,z=-1;function F(){return!(t.unstable_now()-z<O)}function V(){if(W!==null){var ie=t.unstable_now();z=ie;var ne=!0;try{ne=W(!0,ie)}finally{ne?U():($=!1,W=null)}}else $=!1}var U;if(typeof C=="function")U=function(){C(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,X=M.port2;M.port1.onmessage=V,U=function(){X.postMessage(null)}}else U=function(){k(V,0)};function J(ie){W=ie,$||($=!0,U())}function le(ie,ne){P=k(function(){ie(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,J(L))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ie){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var oe=b;b=ne;try{return ie()}finally{b=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=b;b=ie;try{return ne()}finally{b=oe}},t.unstable_scheduleCallback=function(ie,ne,oe){var te=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?te+oe:te):oe=te,ie){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=0x3fffffff;break;case 4:ue=1e4;break;default:ue=5e3}return ue=oe+ue,ie={id:p++,callback:ne,priorityLevel:ie,startTime:oe,expirationTime:ue,sortIndex:-1},oe>te?(ie.sortIndex=oe,e(f,ie),n(u)===null&&ie===n(f)&&(E?(j(P),P=-1):E=!0,le(q,oe-te))):(ie.sortIndex=ue,e(u,ie),_||x||(_=!0,J(L))),ie},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ie){var ne=b;return function(){var oe=b;b=ne;try{return ie.apply(this,arguments)}finally{b=oe}}}}(t_)),t_}var MC;function A4(){return MC||(MC=1,e_.exports=q4()),e_.exports}var $C;function P4(){if($C)return as;$C=1;var t=Qh(),e=A4();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function b(a){return u.call(h,a)?!0:u.call(p,a)?!1:f.test(a)?h[a]=!0:(p[a]=!0,!1)}function x(a,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function _(a,c,m,w){if(c===null||typeof c>"u"||x(a,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,m,w,N,A,Z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=N,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=A,this.removeEmptyString=Z}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];k[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(j,C);k[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(j,C);k[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(j,C);k[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,c,m,w){var N=k.hasOwnProperty(c)?k[c]:null;(N!==null?N.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,N,w)&&(m=null),w||N===null?b(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):N.mustUseProperty?a[N.propertyName]=m===null?N.type===3?!1:"":m:(c=N.attributeName,w=N.attributeNamespace,m===null?a.removeAttribute(c):(N=N.type,m=N===3||N===4&&m===!0?"":""+m,w?a.setAttributeNS(w,c,m):a.setAttribute(c,m))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),$=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),F=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var oe=Object.assign,te;function ue(a){if(te===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);te=c&&c[1]||""}return`
`+te+a}var de=!1;function ye(a,c){if(!a||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(a,[],c)}else{try{c.call()}catch(He){w=He}a.call(c.prototype)}else{try{throw Error()}catch(He){w=He}a()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var N=He.stack.split(`
`),A=w.stack.split(`
`),Z=N.length-1,ge=A.length-1;1<=Z&&0<=ge&&N[Z]!==A[ge];)ge--;for(;1<=Z&&0<=ge;Z--,ge--)if(N[Z]!==A[ge]){if(Z!==1||ge!==1)do if(Z--,ge--,0>ge||N[Z]!==A[ge]){var Se=`
`+N[Z].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=Z&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ue(a):""}function we(a){switch(a.tag){case 5:return ue(a.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return a=ye(a.type,!1),a;case 11:return a=ye(a.type.render,!1),a;case 1:return a=ye(a.type,!0),a;default:return""}}function Ie(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case W:return"Fragment";case $:return"Portal";case O:return"Profiler";case P:return"StrictMode";case U:return"Suspense";case M:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case F:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case V:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case X:return c=a.displayName||null,c!==null?c:Ie(a.type)||"Memo";case J:c=a._payload,a=a._init;try{return Ie(a(c))}catch{}}return null}function ze(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Re(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function De(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(a){var c=De(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var N=m.get,A=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return N.call(this)},set:function(Z){w=""+Z,A.call(this,Z)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(Z){w=""+Z},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Xe(a){a._valueTracker||(a._valueTracker=Je(a))}function Ve(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return a&&(w=De(a)?a.checked?"true":"false":a.value),a=w,a!==m?(c.setValue(a),!0):!1}function ct(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function _t(a,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function Rt(a,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Re(c.value!=null?c.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ut(a,c){c=c.checked,c!=null&&R(a,"checked",c,!1)}function sn(a,c){Ut(a,c);var m=Re(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?be(a,c.type,m):c.hasOwnProperty("defaultValue")&&be(a,c.type,Re(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function xe(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function be(a,c,m){(c!=="number"||ct(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var Ne=Array.isArray;function Ae(a,c,m,w){if(a=a.options,c){c={};for(var N=0;N<m.length;N++)c["$"+m[N]]=!0;for(m=0;m<a.length;m++)N=c.hasOwnProperty("$"+a[m].value),a[m].selected!==N&&(a[m].selected=N),N&&w&&(a[m].defaultSelected=!0)}else{for(m=""+Re(m),c=null,N=0;N<a.length;N++){if(a[N].value===m){a[N].selected=!0,w&&(a[N].defaultSelected=!0);return}c!==null||a[N].disabled||(c=a[N])}c!==null&&(c.selected=!0)}}function Ue(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(Ne(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:Re(m)}}function Me(a,c){var m=Re(c.value),w=Re(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function ut(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var bn,ar=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,N){MSApp.execUnsafeLocalFunction(function(){return a(c,m,w,N)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(bn=bn||document.createElement("div"),bn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=bn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Ln(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Di=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(a){Di.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Kr[c]=Kr[a]})});function _r(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Kr.hasOwnProperty(a)&&Kr[a]?(""+c).trim():c+"px"}function Jt(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,N=_r(m,c[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,N):a[m]=N}}var Zi=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yi(a,c){if(c){if(Zi[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Xi(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var po=null;function pa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var cc=null,$s=null,K=null;function yu(a){if(a=Jf(a)){if(typeof cc!="function")throw Error(n(280));var c=a.stateNode;c&&(c=Vm(c),cc(a.stateNode,a.type,c))}}function fn(a){$s?K?K.push(a):K=[a]:$s=a}function bu(){if($s){var a=$s,c=K;if(K=$s=null,yu(a),c)for(a=0;a<c.length;a++)yu(c[a])}}function vu(a,c){return a(c)}function xu(){}var uc=!1;function ha(a,c,m){if(uc)return a(c,m);uc=!0;try{return vu(a,c,m)}finally{uc=!1,($s!==null||K!==null)&&(xu(),bu())}}function es(a,c){var m=a.stateNode;if(m===null)return null;var w=Vm(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var dc=!1;if(l)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){dc=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{dc=!1}function Sf(a,c,m,w,N,A,Z,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var ga=!1,Bs=null,Ya=!1,zs=null,Ef={onError:function(a){ga=!0,Bs=a}};function If(a,c,m,w,N,A,Z,ge,Se){ga=!1,Bs=null,Sf.apply(Ef,arguments)}function wu(a,c,m,w,N,A,Z,ge,Se){if(If.apply(this,arguments),ga){if(ga){var He=Bs;ga=!1,Bs=null}else throw Error(n(198));Ya||(Ya=!0,zs=He)}}function Ws(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function _u(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Su(a){if(Ws(a)!==a)throw Error(n(188))}function Nf(a){var c=a.alternate;if(!c){if(c=Ws(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,w=c;;){var N=m.return;if(N===null)break;var A=N.alternate;if(A===null){if(w=N.return,w!==null){m=w;continue}break}if(N.child===A.child){for(A=N.child;A;){if(A===m)return Su(N),a;if(A===w)return Su(N),c;A=A.sibling}throw Error(n(188))}if(m.return!==w.return)m=N,w=A;else{for(var Z=!1,ge=N.child;ge;){if(ge===m){Z=!0,m=N,w=A;break}if(ge===w){Z=!0,w=N,m=A;break}ge=ge.sibling}if(!Z){for(ge=A.child;ge;){if(ge===m){Z=!0,m=A,w=N;break}if(ge===w){Z=!0,w=A,m=N;break}ge=ge.sibling}if(!Z)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function Eu(a){return a=Nf(a),a!==null?Iu(a):null}function Iu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Iu(a);if(c!==null)return c;a=a.sibling}return null}var Nu=e.unstable_scheduleCallback,fc=e.unstable_cancelCallback,ku=e.unstable_shouldYield,kf=e.unstable_requestPaint,lr=e.unstable_now,Cf=e.unstable_getCurrentPriorityLevel,pc=e.unstable_ImmediatePriority,Cu=e.unstable_UserBlockingPriority,Xa=e.unstable_NormalPriority,Tf=e.unstable_LowPriority,hc=e.unstable_IdlePriority,el=null,ts=null;function jf(a){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(el,a,void 0,(a.current.flags&128)===128)}catch{}}var xi=Math.clz32?Math.clz32:qf,Rf=Math.log,Of=Math.LN2;function qf(a){return a>>>=0,a===0?32:31-(Rf(a)/Of|0)|0}var zo=64,tl=4194304;function Li(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return a&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return a}}function nl(a,c){var m=a.pendingLanes;if(m===0)return 0;var w=0,N=a.suspendedLanes,A=a.pingedLanes,Z=m&0xfffffff;if(Z!==0){var ge=Z&~N;ge!==0?w=Li(ge):(A&=Z,A!==0&&(w=Li(A)))}else Z=m&~N,Z!==0?w=Li(Z):A!==0&&(w=Li(A));if(w===0)return 0;if(c!==0&&c!==w&&!(c&N)&&(N=w&-w,A=c&-c,N>=A||N===16&&(A&4194240)!==0))return c;if(w&4&&(w|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)m=31-xi(c),N=1<<m,w|=a[m],c&=~N;return w}function px(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function hx(a,c){for(var m=a.suspendedLanes,w=a.pingedLanes,N=a.expirationTimes,A=a.pendingLanes;0<A;){var Z=31-xi(A),ge=1<<Z,Se=N[Z];Se===-1?(!(ge&m)||ge&w)&&(N[Z]=px(ge,c)):Se<=c&&(a.expiredLanes|=ge),A&=~ge}}function Af(a){return a=a.pendingLanes&-0x40000001,a!==0?a:a&0x40000000?0x40000000:0}function Am(){var a=zo;return zo<<=1,!(zo&4194240)&&(zo=64),a}function Pf(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function mc(a,c,m){a.pendingLanes|=c,c!==0x20000000&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-xi(c),a[c]=m}function mx(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var N=31-xi(m),A=1<<N;c[N]=0,w[N]=-1,a[N]=-1,m&=~A}}function Ff(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var w=31-xi(m),N=1<<w;N&c|a[w]&c&&(a[w]|=c),m&=~N}}var Mn=0;function Pm(a){return a&=-a,1<a?4<a?a&0xfffffff?16:0x20000000:4:1}var Df,he,Lf,gc,Mf,g=!1,y=[],S=null,I=null,T=null,B=new Map,fe=new Map,me=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(a,c){switch(a){case"focusin":case"focusout":S=null;break;case"dragenter":case"dragleave":I=null;break;case"mouseover":case"mouseout":T=null;break;case"pointerover":case"pointerout":B.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(a,c,m,w,N,A){return a===null||a.nativeEvent!==A?(a={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:A,targetContainers:[N]},c!==null&&(c=Jf(c),c!==null&&he(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,N!==null&&c.indexOf(N)===-1&&c.push(N),a)}function mt(a,c,m,w,N){switch(c){case"focusin":return S=at(S,a,c,m,w,N),!0;case"dragenter":return I=at(I,a,c,m,w,N),!0;case"mouseover":return T=at(T,a,c,m,w,N),!0;case"pointerover":var A=N.pointerId;return B.set(A,at(B.get(A)||null,a,c,m,w,N)),!0;case"gotpointercapture":return A=N.pointerId,fe.set(A,at(fe.get(A)||null,a,c,m,w,N)),!0}return!1}function Be(a){var c=yc(a.target);if(c!==null){var m=Ws(c);if(m!==null){if(c=m.tag,c===13){if(c=_u(m),c!==null){a.blockedOn=c,Mf(a.priority,function(){Lf(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Oe(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=ce(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);po=w,m.target.dispatchEvent(w),po=null}else return c=Jf(m),c!==null&&he(c),a.blockedOn=m,!1;c.shift()}return!0}function et(a,c,m){Oe(a)&&m.delete(c)}function ve(){g=!1,S!==null&&Oe(S)&&(S=null),I!==null&&Oe(I)&&(I=null),T!==null&&Oe(T)&&(T=null),B.forEach(et),fe.forEach(et)}function ke(a,c){a.blockedOn===c&&(a.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ve)))}function Te(a){function c(N){return ke(N,a)}if(0<y.length){ke(y[0],a);for(var m=1;m<y.length;m++){var w=y[m];w.blockedOn===a&&(w.blockedOn=null)}}for(S!==null&&ke(S,a),I!==null&&ke(I,a),T!==null&&ke(T,a),B.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=q.ReactCurrentBatchConfig,Ge=!0;function je(a,c,m,w){var N=Mn,A=Ze.transition;Ze.transition=null;try{Mn=1,St(a,c,m,w)}finally{Mn=N,Ze.transition=A}}function Qe(a,c,m,w){var N=Mn,A=Ze.transition;Ze.transition=null;try{Mn=4,St(a,c,m,w)}finally{Mn=N,Ze.transition=A}}function St(a,c,m,w){if(Ge){var N=ce(a,c,m,w);if(N===null)Tx(a,c,w,ee,m),tt(a,w);else if(mt(N,a,c,m,w))w.stopPropagation();else if(tt(a,w),c&4&&-1<Ke.indexOf(a)){for(;N!==null;){var A=Jf(N);if(A!==null&&Df(A),A=ce(a,c,m,w),A===null&&Tx(a,c,w,ee,m),A===N)break;N=A}N!==null&&w.stopPropagation()}else Tx(a,c,w,null,m)}}var ee=null;function ce(a,c,m,w){if(ee=null,a=pa(w),a=yc(a),a!==null)if(c=Ws(a),c===null)a=null;else if(m=c.tag,m===13){if(a=_u(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return ee=a,null}function Ee(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cf()){case pc:return 1;case Cu:return 4;case Xa:case Tf:return 16;case hc:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function Q(){if(pe)return pe;var a,c=ae,m=c.length,w,N="value"in st?st.value:st.textContent,A=N.length;for(a=0;a<m&&c[a]===N[a];a++);var Z=m-a;for(w=1;w<=Z&&c[m-w]===N[A-w];w++);return pe=N.slice(a,1<w?1-w:void 0)}function re(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function se(){return!0}function Le(){return!1}function it(a){function c(m,w,N,A,Z){this._reactName=m,this._targetInst=N,this.type=w,this.nativeEvent=A,this.target=Z,this.currentTarget=null;for(var ge in a)a.hasOwnProperty(ge)&&(m=a[ge],this[ge]=m?m(A):A[ge]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?se:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),c}var Ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wt=it(Ot),Yt=oe({},Ot,{view:0,detail:0}),lt=it(Yt),_e,Pe,ot,pt=oe({},Yt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ot&&(ot&&a.type==="mousemove"?(_e=a.screenX-ot.screenX,Pe=a.screenY-ot.screenY):Pe=_e=0,ot=a),_e)},movementY:function(a){return"movementY"in a?a.movementY:Pe}}),Lt=it(pt),Xt=oe({},pt,{dataTransfer:0}),qe=it(Xt),nt=oe({},Yt,{relatedTarget:0}),dt=it(nt),It=oe({},Ot,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=it(It),zt=oe({},Ot,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),vn=it(zt),qt=oe({},Ot,{data:0}),Sr=it(qt),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=wt[a])?!!c[a]:!1}function wn(){return Nt}var Hn=oe({},Yt,{key:function(a){if(a.key){var c=We[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=re(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(a){return a.type==="keypress"?re(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?re(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),zn=it(Hn),Un=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ya=it(Un),ci=oe({},Yt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn}),gx=it(ci),yx=oe({},Ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vs=it(yx),bx=oe({},pt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Fm=it(bx),$f=[9,13,27,32],vx=l&&"CompositionEvent"in window,Bf=null;l&&"documentMode"in document&&(Bf=document.documentMode);var XM=l&&"TextEvent"in window&&!Bf,r1=l&&(!vx||Bf&&8<Bf&&11>=Bf),i1=" ",s1=!1;function o1(a,c){switch(a){case"keyup":return $f.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Tu=!1;function e$(a,c){switch(a){case"compositionend":return a1(c);case"keypress":return c.which!==32?null:(s1=!0,i1);case"textInput":return a=c.data,a===i1&&s1?null:a;default:return null}}function t$(a,c){if(Tu)return a==="compositionend"||!vx&&o1(a,c)?(a=Q(),pe=ae=st=null,Tu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return r1&&c.locale!=="ko"?null:c.data;default:return null}}var n$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!n$[a.type]:c==="textarea"}function c1(a,c,m,w){fn(w),c=Bm(c,"onChange"),0<c.length&&(m=new Wt("onChange","change",null,m,w),a.push({event:m,listeners:c}))}var zf=null,Wf=null;function r$(a){k1(a,0)}function Dm(a){var c=Au(a);if(Ve(c))return a}function i$(a,c){if(a==="change")return c}var u1=!1;if(l){var xx;if(l){var wx="oninput"in document;if(!wx){var d1=document.createElement("div");d1.setAttribute("oninput","return;"),wx=typeof d1.oninput=="function"}xx=wx}else xx=!1;u1=xx&&(!document.documentMode||9<document.documentMode)}function f1(){zf&&(zf.detachEvent("onpropertychange",p1),Wf=zf=null)}function p1(a){if(a.propertyName==="value"&&Dm(Wf)){var c=[];c1(c,Wf,a,pa(a)),ha(r$,c)}}function s$(a,c,m){a==="focusin"?(f1(),zf=c,Wf=m,zf.attachEvent("onpropertychange",p1)):a==="focusout"&&f1()}function o$(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Dm(Wf)}function a$(a,c){if(a==="click")return Dm(c)}function l$(a,c){if(a==="input"||a==="change")return Dm(c)}function c$(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ho=typeof Object.is=="function"?Object.is:c$;function Vf(a,c){if(ho(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var N=m[w];if(!u.call(c,N)||!ho(a[N],c[N]))return!1}return!0}function h1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function m1(a,c){var m=h1(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=c&&w>=c)return{node:m,offset:c-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=h1(m)}}function g1(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?g1(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function y1(){for(var a=window,c=ct();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=ct(a.document)}return c}function _x(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function u$(a){var c=y1(),m=a.focusedElem,w=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&g1(m.ownerDocument.documentElement,m)){if(w!==null&&_x(m)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var N=m.textContent.length,A=Math.min(w.start,N);w=w.end===void 0?A:Math.min(w.end,N),!a.extend&&A>w&&(N=w,w=A,A=N),N=m1(m,A);var Z=m1(m,w);N&&Z&&(a.rangeCount!==1||a.anchorNode!==N.node||a.anchorOffset!==N.offset||a.focusNode!==Z.node||a.focusOffset!==Z.offset)&&(c=c.createRange(),c.setStart(N.node,N.offset),a.removeAllRanges(),A>w?(a.addRange(c),a.extend(Z.node,Z.offset)):(c.setEnd(Z.node,Z.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var d$=l&&"documentMode"in document&&11>=document.documentMode,ju=null,Sx=null,Uf=null,Ex=!1;function b1(a,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ex||ju==null||ju!==ct(w)||(w=ju,"selectionStart"in w&&_x(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Uf&&Vf(Uf,w)||(Uf=w,w=Bm(Sx,"onSelect"),0<w.length&&(c=new Wt("onSelect","select",null,c,m),a.push({event:c,listeners:w}),c.target=ju)))}function Lm(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var Ru={animationend:Lm("Animation","AnimationEnd"),animationiteration:Lm("Animation","AnimationIteration"),animationstart:Lm("Animation","AnimationStart"),transitionend:Lm("Transition","TransitionEnd")},Ix={},v1={};l&&(v1=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function Mm(a){if(Ix[a])return Ix[a];if(!Ru[a])return a;var c=Ru[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in v1)return Ix[a]=c[m];return a}var x1=Mm("animationend"),w1=Mm("animationiteration"),_1=Mm("animationstart"),S1=Mm("transitionend"),E1=new Map,I1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(a,c){E1.set(a,c),s(c,[a])}for(var Nx=0;Nx<I1.length;Nx++){var kx=I1[Nx],f$=kx.toLowerCase(),p$=kx[0].toUpperCase()+kx.slice(1);rl(f$,"on"+p$)}rl(x1,"onAnimationEnd"),rl(w1,"onAnimationIteration"),rl(_1,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(S1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hf));function N1(a,c,m){var w=a.type||"unknown-event";a.currentTarget=m,wu(w,c,void 0,a),a.currentTarget=null}function k1(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],N=w.event;w=w.listeners;e:{var A=void 0;if(c)for(var Z=w.length-1;0<=Z;Z--){var ge=w[Z],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==A&&N.isPropagationStopped())break e;N1(N,ge,He),A=Se}else for(Z=0;Z<w.length;Z++){if(ge=w[Z],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==A&&N.isPropagationStopped())break e;N1(N,ge,He),A=Se}}}if(Ya)throw a=zs,Ya=!1,zs=null,a}function cr(a,c){var m=c[Px];m===void 0&&(m=c[Px]=new Set);var w=a+"__bubble";m.has(w)||(C1(c,a,2,!1),m.add(w))}function Cx(a,c,m){var w=0;c&&(w|=4),C1(m,a,w,c)}var $m="_reactListening"+Math.random().toString(36).slice(2);function Kf(a){if(!a[$m]){a[$m]=!0,r.forEach(function(m){m!=="selectionchange"&&(h$.has(m)||Cx(m,!1,a),Cx(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[$m]||(c[$m]=!0,Cx("selectionchange",!1,c))}}function C1(a,c,m,w){switch(Ee(c)){case 1:var N=je;break;case 4:N=Qe;break;default:N=St}m=N.bind(null,c,m,a),N=void 0,!dc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(N=!0),w?N!==void 0?a.addEventListener(c,m,{capture:!0,passive:N}):a.addEventListener(c,m,!0):N!==void 0?a.addEventListener(c,m,{passive:N}):a.addEventListener(c,m,!1)}function Tx(a,c,m,w,N){var A=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var Z=w.tag;if(Z===3||Z===4){var ge=w.stateNode.containerInfo;if(ge===N||ge.nodeType===8&&ge.parentNode===N)break;if(Z===4)for(Z=w.return;Z!==null;){var Se=Z.tag;if((Se===3||Se===4)&&(Se=Z.stateNode.containerInfo,Se===N||Se.nodeType===8&&Se.parentNode===N))return;Z=Z.return}for(;ge!==null;){if(Z=yc(ge),Z===null)return;if(Se=Z.tag,Se===5||Se===6){w=A=Z;continue e}ge=ge.parentNode}}w=w.return}ha(function(){var He=A,ht=pa(m),gt=[];e:{var ft=E1.get(a);if(ft!==void 0){var Pt=Wt,Bt=a;switch(a){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":Pt=zn;break;case"focusin":Bt="focus",Pt=dt;break;case"focusout":Bt="blur",Pt=dt;break;case"beforeblur":case"afterblur":Pt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=Lt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=qe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=gx;break;case x1:case w1:case _1:Pt=xt;break;case S1:Pt=Vs;break;case"scroll":Pt=lt;break;case"wheel":Pt=Fm;break;case"copy":case"cut":case"paste":Pt=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=ya}var Vt=(c&4)!==0,$r=!Vt&&a==="scroll",Fe=Vt?ft!==null?ft+"Capture":null:ft;Vt=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var vt=$e.stateNode;if($e.tag===5&&vt!==null&&($e=vt,Fe!==null&&(vt=es(Ce,Fe),vt!=null&&Vt.push(Qf(Ce,vt,$e)))),$r)break;Ce=Ce.return}0<Vt.length&&(ft=new Pt(ft,Bt,null,m,ht),gt.push({event:ft,listeners:Vt}))}}if(!(c&7)){e:{if(ft=a==="mouseover"||a==="pointerover",Pt=a==="mouseout"||a==="pointerout",ft&&m!==po&&(Bt=m.relatedTarget||m.fromElement)&&(yc(Bt)||Bt[ba]))break e;if((Pt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,Pt?(Bt=m.relatedTarget||m.toElement,Pt=He,Bt=Bt?yc(Bt):null,Bt!==null&&($r=Ws(Bt),Bt!==$r||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Pt=null,Bt=He),Pt!==Bt)){if(Vt=Lt,vt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(a==="pointerout"||a==="pointerover")&&(Vt=ya,vt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),$r=Pt==null?ft:Au(Pt),$e=Bt==null?ft:Au(Bt),ft=new Vt(vt,Ce+"leave",Pt,m,ht),ft.target=$r,ft.relatedTarget=$e,vt=null,yc(ht)===He&&(Vt=new Vt(Fe,Ce+"enter",Bt,m,ht),Vt.target=$e,Vt.relatedTarget=$r,vt=Vt),$r=vt,Pt&&Bt)t:{for(Vt=Pt,Fe=Bt,Ce=0,$e=Vt;$e;$e=Ou($e))Ce++;for($e=0,vt=Fe;vt;vt=Ou(vt))$e++;for(;0<Ce-$e;)Vt=Ou(Vt),Ce--;for(;0<$e-Ce;)Fe=Ou(Fe),$e--;for(;Ce--;){if(Vt===Fe||Fe!==null&&Vt===Fe.alternate)break t;Vt=Ou(Vt),Fe=Ou(Fe)}Vt=null}else Vt=null;Pt!==null&&T1(gt,ft,Pt,Vt,!1),Bt!==null&&$r!==null&&T1(gt,$r,Bt,Vt,!0)}}e:{if(ft=He?Au(He):window,Pt=ft.nodeName&&ft.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&ft.type==="file")var Ht=i$;else if(l1(ft))if(u1)Ht=l$;else{Ht=o$;var en=s$}else(Pt=ft.nodeName)&&Pt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Ht=a$);if(Ht&&(Ht=Ht(a,He))){c1(gt,Ht,m,ht);break e}en&&en(a,ft,He),a==="focusout"&&(en=ft._wrapperState)&&en.controlled&&ft.type==="number"&&be(ft,"number",ft.value)}switch(en=He?Au(He):window,a){case"focusin":(l1(en)||en.contentEditable==="true")&&(ju=en,Sx=He,Uf=null);break;case"focusout":Uf=Sx=ju=null;break;case"mousedown":Ex=!0;break;case"contextmenu":case"mouseup":case"dragend":Ex=!1,b1(gt,m,ht);break;case"selectionchange":if(d$)break;case"keydown":case"keyup":b1(gt,m,ht)}var tn;if(vx)e:{switch(a){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else Tu?o1(a,m)&&(cn="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(cn="onCompositionStart");cn&&(r1&&m.locale!=="ko"&&(Tu||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&Tu&&(tn=Q()):(st=ht,ae="value"in st?st.value:st.textContent,Tu=!0)),en=Bm(He,cn),0<en.length&&(cn=new Sr(cn,a,null,m,ht),gt.push({event:cn,listeners:en}),tn?cn.data=tn:(tn=a1(m),tn!==null&&(cn.data=tn)))),(tn=XM?e$(a,m):t$(a,m))&&(He=Bm(He,"onBeforeInput"),0<He.length&&(ht=new Sr("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=tn))}k1(gt,c)})}function Qf(a,c,m){return{instance:a,listener:c,currentTarget:m}}function Bm(a,c){for(var m=c+"Capture",w=[];a!==null;){var N=a,A=N.stateNode;N.tag===5&&A!==null&&(N=A,A=es(a,m),A!=null&&w.unshift(Qf(a,A,N)),A=es(a,c),A!=null&&w.push(Qf(a,A,N))),a=a.return}return w}function Ou(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function T1(a,c,m,w,N){for(var A=c._reactName,Z=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,N?(Se=es(m,A),Se!=null&&Z.unshift(Qf(m,Se,ge))):N||(Se=es(m,A),Se!=null&&Z.push(Qf(m,Se,ge)))),m=m.return}Z.length!==0&&a.push({event:c,listeners:Z})}var m$=/\r\n?/g,g$=/\u0000|\uFFFD/g;function j1(a){return(typeof a=="string"?a:""+a).replace(m$,`
`).replace(g$,"")}function zm(a,c,m){if(c=j1(c),j1(a)!==c&&m)throw Error(n(425))}function Wm(){}var jx=null,Rx=null;function Ox(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var qx=typeof setTimeout=="function"?setTimeout:void 0,y$=typeof clearTimeout=="function"?clearTimeout:void 0,R1=typeof Promise=="function"?Promise:void 0,b$=typeof queueMicrotask=="function"?queueMicrotask:typeof R1<"u"?function(a){return R1.resolve(null).then(a).catch(v$)}:qx;function v$(a){setTimeout(function(){throw a})}function Ax(a,c){var m=c,w=0;do{var N=m.nextSibling;if(a.removeChild(m),N&&N.nodeType===8)if(m=N.data,m==="/$"){if(w===0){a.removeChild(N),Te(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=N}while(m);Te(c)}function il(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function O1(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var qu=Math.random().toString(36).slice(2),Wo="__reactFiber$"+qu,Gf="__reactProps$"+qu,ba="__reactContainer$"+qu,Px="__reactEvents$"+qu,x$="__reactListeners$"+qu,w$="__reactHandles$"+qu;function yc(a){var c=a[Wo];if(c)return c;for(var m=a.parentNode;m;){if(c=m[ba]||m[Wo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=O1(a);a!==null;){if(m=a[Wo])return m;a=O1(a)}return c}a=m,m=a.parentNode}return null}function Jf(a){return a=a[Wo]||a[ba],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Au(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Vm(a){return a[Gf]||null}var Fx=[],Pu=-1;function sl(a){return{current:a}}function ur(a){0>Pu||(a.current=Fx[Pu],Fx[Pu]=null,Pu--)}function tr(a,c){Pu++,Fx[Pu]=a.current,a.current=c}var ol={},wi=sl(ol),ns=sl(!1),bc=ol;function Fu(a,c){var m=a.type.contextTypes;if(!m)return ol;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var N={},A;for(A in m)N[A]=c[A];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=N),N}function rs(a){return a=a.childContextTypes,a!=null}function Um(){ur(ns),ur(wi)}function q1(a,c,m){if(wi.current!==ol)throw Error(n(168));tr(wi,c),tr(ns,m)}function A1(a,c,m){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var N in w)if(!(N in c))throw Error(n(108,ze(a)||"Unknown",N));return oe({},m,w)}function Hm(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ol,bc=wi.current,tr(wi,a),tr(ns,ns.current),!0}function P1(a,c,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=A1(a,c,bc),w.__reactInternalMemoizedMergedChildContext=a,ur(ns),ur(wi),tr(wi,a)):ur(ns),tr(ns,m)}var va=null,Km=!1,Dx=!1;function F1(a){va===null?va=[a]:va.push(a)}function _$(a){Km=!0,F1(a)}function al(){if(!Dx&&va!==null){Dx=!0;var a=0,c=Mn;try{var m=va;for(Mn=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}va=null,Km=!1}catch(N){throw va!==null&&(va=va.slice(a+1)),Nu(pc,al),N}finally{Mn=c,Dx=!1}}return null}var Du=[],Lu=0,Qm=null,Gm=0,Us=[],Hs=0,vc=null,xa=1,wa="";function xc(a,c){Du[Lu++]=Gm,Du[Lu++]=Qm,Qm=a,Gm=c}function D1(a,c,m){Us[Hs++]=xa,Us[Hs++]=wa,Us[Hs++]=vc,vc=a;var w=xa;a=wa;var N=32-xi(w)-1;w&=~(1<<N),m+=1;var A=32-xi(c)+N;if(30<A){var Z=N-N%5;A=(w&(1<<Z)-1).toString(32),w>>=Z,N-=Z,xa=1<<32-xi(c)+N|m<<N|w,wa=A+a}else xa=1<<A|m<<N|w,wa=a}function Lx(a){a.return!==null&&(xc(a,1),D1(a,1,0))}function Mx(a){for(;a===Qm;)Qm=Du[--Lu],Du[Lu]=null,Gm=Du[--Lu],Du[Lu]=null;for(;a===vc;)vc=Us[--Hs],Us[Hs]=null,wa=Us[--Hs],Us[Hs]=null,xa=Us[--Hs],Us[Hs]=null}var vs=null,xs=null,hr=!1,mo=null;function L1(a,c){var m=Js(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function M1(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,vs=a,xs=il(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,vs=a,xs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=vc!==null?{id:xa,overflow:wa}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=Js(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,vs=a,xs=null,!0):!1;default:return!1}}function $x(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Bx(a){if(hr){var c=xs;if(c){var m=c;if(!M1(a,c)){if($x(a))throw Error(n(418));c=il(m.nextSibling);var w=vs;c&&M1(a,c)?L1(w,m):(a.flags=a.flags&-4097|2,hr=!1,vs=a)}}else{if($x(a))throw Error(n(418));a.flags=a.flags&-4097|2,hr=!1,vs=a}}}function $1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vs=a}function Jm(a){if(a!==vs)return!1;if(!hr)return $1(a),hr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Ox(a.type,a.memoizedProps)),c&&(c=xs)){if($x(a))throw B1(),Error(n(418));for(;c;)L1(a,c),c=il(c.nextSibling)}if($1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){xs=il(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}xs=null}}else xs=vs?il(a.stateNode.nextSibling):null;return!0}function B1(){for(var a=xs;a;)a=il(a.nextSibling)}function Mu(){xs=vs=null,hr=!1}function zx(a){mo===null?mo=[a]:mo.push(a)}var S$=q.ReactCurrentBatchConfig;function Zf(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var N=w,A=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(Z){var ge=N.refs;Z===null?delete ge[A]:ge[A]=Z},c._stringRef=A,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Zm(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function z1(a){var c=a._init;return c(a._payload)}function W1(a){function c(Fe,Ce){if(a){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!a)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function N(Fe,Ce){return Fe=ml(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function A(Fe,Ce,$e){return Fe.index=$e,a?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Z(Fe){return a&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==6?(Ce=qw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=N(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,vt){var Ht=$e.type;return Ht===W?ht(Fe,Ce,$e.props.children,vt,$e.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===J&&z1(Ht)===Ce.type)?(vt=N(Ce,$e.props),vt.ref=Zf(Fe,Ce,$e),vt.return=Fe,vt):(vt=wg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Zf(Fe,Ce,$e),vt.return=Fe,vt)}function He(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=Aw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=N(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,vt,Ht){return Ce===null||Ce.tag!==7?(Ce=Cc($e,Fe.mode,vt,Ht),Ce.return=Fe,Ce):(Ce=N(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=qw(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case L:return $e=wg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=Zf(Fe,null,Ce),$e.return=Fe,$e;case $:return Ce=Aw(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case J:var vt=Ce._init;return gt(Fe,vt(Ce._payload),$e)}if(Ne(Ce)||ne(Ce))return Ce=Cc(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;Zm(Fe,Ce)}return null}function ft(Fe,Ce,$e,vt){var Ht=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Ht!==null?null:ge(Fe,Ce,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:return $e.key===Ht?Se(Fe,Ce,$e,vt):null;case $:return $e.key===Ht?He(Fe,Ce,$e,vt):null;case J:return Ht=$e._init,ft(Fe,Ce,Ht($e._payload),vt)}if(Ne($e)||ne($e))return Ht!==null?null:ht(Fe,Ce,$e,vt,null);Zm(Fe,$e)}return null}function Pt(Fe,Ce,$e,vt,Ht){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+vt,Ht);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case L:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,Se(Ce,Fe,vt,Ht);case $:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,He(Ce,Fe,vt,Ht);case J:var en=vt._init;return Pt(Fe,Ce,$e,en(vt._payload),Ht)}if(Ne(vt)||ne(vt))return Fe=Fe.get($e)||null,ht(Ce,Fe,vt,Ht,null);Zm(Ce,vt)}return null}function Bt(Fe,Ce,$e,vt){for(var Ht=null,en=null,tn=Ce,cn=Ce=0,ai=null;tn!==null&&cn<$e.length;cn++){tn.index>cn?(ai=tn,tn=null):ai=tn.sibling;var Dn=ft(Fe,tn,$e[cn],vt);if(Dn===null){tn===null&&(tn=ai);break}a&&tn&&Dn.alternate===null&&c(Fe,tn),Ce=A(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn,tn=ai}if(cn===$e.length)return m(Fe,tn),hr&&xc(Fe,cn),Ht;if(tn===null){for(;cn<$e.length;cn++)tn=gt(Fe,$e[cn],vt),tn!==null&&(Ce=A(tn,Ce,cn),en===null?Ht=tn:en.sibling=tn,en=tn);return hr&&xc(Fe,cn),Ht}for(tn=w(Fe,tn);cn<$e.length;cn++)ai=Pt(tn,Fe,cn,$e[cn],vt),ai!==null&&(a&&ai.alternate!==null&&tn.delete(ai.key===null?cn:ai.key),Ce=A(ai,Ce,cn),en===null?Ht=ai:en.sibling=ai,en=ai);return a&&tn.forEach(function(gl){return c(Fe,gl)}),hr&&xc(Fe,cn),Ht}function Vt(Fe,Ce,$e,vt){var Ht=ne($e);if(typeof Ht!="function")throw Error(n(150));if($e=Ht.call($e),$e==null)throw Error(n(151));for(var en=Ht=null,tn=Ce,cn=Ce=0,ai=null,Dn=$e.next();tn!==null&&!Dn.done;cn++,Dn=$e.next()){tn.index>cn?(ai=tn,tn=null):ai=tn.sibling;var gl=ft(Fe,tn,Dn.value,vt);if(gl===null){tn===null&&(tn=ai);break}a&&tn&&gl.alternate===null&&c(Fe,tn),Ce=A(gl,Ce,cn),en===null?Ht=gl:en.sibling=gl,en=gl,tn=ai}if(Dn.done)return m(Fe,tn),hr&&xc(Fe,cn),Ht;if(tn===null){for(;!Dn.done;cn++,Dn=$e.next())Dn=gt(Fe,Dn.value,vt),Dn!==null&&(Ce=A(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn);return hr&&xc(Fe,cn),Ht}for(tn=w(Fe,tn);!Dn.done;cn++,Dn=$e.next())Dn=Pt(tn,Fe,cn,Dn.value,vt),Dn!==null&&(a&&Dn.alternate!==null&&tn.delete(Dn.key===null?cn:Dn.key),Ce=A(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn);return a&&tn.forEach(function(tB){return c(Fe,tB)}),hr&&xc(Fe,cn),Ht}function $r(Fe,Ce,$e,vt){if(typeof $e=="object"&&$e!==null&&$e.type===W&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:e:{for(var Ht=$e.key,en=Ce;en!==null;){if(en.key===Ht){if(Ht=$e.type,Ht===W){if(en.tag===7){m(Fe,en.sibling),Ce=N(en,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(en.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===J&&z1(Ht)===en.type){m(Fe,en.sibling),Ce=N(en,$e.props),Ce.ref=Zf(Fe,en,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,en);break}else c(Fe,en);en=en.sibling}$e.type===W?(Ce=Cc($e.props.children,Fe.mode,vt,$e.key),Ce.return=Fe,Fe=Ce):(vt=wg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Zf(Fe,Ce,$e),vt.return=Fe,Fe=vt)}return Z(Fe);case $:e:{for(en=$e.key;Ce!==null;){if(Ce.key===en)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=N(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=Aw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce}return Z(Fe);case J:return en=$e._init,$r(Fe,Ce,en($e._payload),vt)}if(Ne($e))return Bt(Fe,Ce,$e,vt);if(ne($e))return Vt(Fe,Ce,$e,vt);Zm(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=N(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=qw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce),Z(Fe)):m(Fe,Ce)}return $r}var $u=W1(!0),V1=W1(!1),Ym=sl(null),Xm=null,Bu=null,Wx=null;function Vx(){Wx=Bu=Xm=null}function Ux(a){var c=Ym.current;ur(Ym),a._currentValue=c}function Hx(a,c,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===m)break;a=a.return}}function zu(a,c){Xm=a,Wx=Bu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(is=!0),a.firstContext=null)}function Ks(a){var c=a._currentValue;if(Wx!==a)if(a={context:a,memoizedValue:c,next:null},Bu===null){if(Xm===null)throw Error(n(308));Bu=a,Xm.dependencies={lanes:0,firstContext:a}}else Bu=Bu.next=a;return c}var wc=null;function Kx(a){wc===null?wc=[a]:wc.push(a)}function U1(a,c,m,w){var N=c.interleaved;return N===null?(m.next=m,Kx(c)):(m.next=N.next,N.next=m),c.interleaved=m,_a(a,w)}function _a(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var ll=!1;function Qx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H1(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Sa(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function cl(a,c,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,qn&2){var N=w.pending;return N===null?c.next=c:(c.next=N.next,N.next=c),w.pending=c,_a(a,m)}return N=w.interleaved,N===null?(c.next=c,Kx(w)):(c.next=N.next,N.next=c),w.interleaved=c,_a(a,m)}function eg(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Ff(a,m)}}function K1(a,c){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var N=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var Z={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?N=A=Z:A=A.next=Z,m=m.next}while(m!==null);A===null?N=A=c:A=A.next=c}else N=A=c;m={baseState:w.baseState,firstBaseUpdate:N,lastBaseUpdate:A,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function tg(a,c,m,w){var N=a.updateQueue;ll=!1;var A=N.firstBaseUpdate,Z=N.lastBaseUpdate,ge=N.shared.pending;if(ge!==null){N.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Z===null?A=He:Z.next=He,Z=Se;var ht=a.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Z&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(A!==null){var gt=N.baseState;Z=0,ht=He=Se=null,ge=A;do{var ft=ge.lane,Pt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:Pt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Bt=a,Vt=ge;switch(ft=c,Pt=m,Vt.tag){case 1:if(Bt=Vt.payload,typeof Bt=="function"){gt=Bt.call(Pt,gt,ft);break e}gt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Vt.payload,ft=typeof Bt=="function"?Bt.call(Pt,gt,ft):Bt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:ll=!0}}ge.callback!==null&&ge.lane!==0&&(a.flags|=64,ft=N.effects,ft===null?N.effects=[ge]:ft.push(ge))}else Pt={eventTime:Pt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=Pt,Se=gt):ht=ht.next=Pt,Z|=ft;if(ge=ge.next,ge===null){if(ge=N.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,N.lastBaseUpdate=ft,N.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),N.baseState=Se,N.firstBaseUpdate=He,N.lastBaseUpdate=ht,c=N.shared.interleaved,c!==null){N=c;do Z|=N.lane,N=N.next;while(N!==c)}else A===null&&(N.shared.lanes=0);Ec|=Z,a.lanes=Z,a.memoizedState=gt}}function Q1(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],N=w.callback;if(N!==null){if(w.callback=null,w=m,typeof N!="function")throw Error(n(191,N));N.call(w)}}}var Yf={},Vo=sl(Yf),Xf=sl(Yf),ep=sl(Yf);function _c(a){if(a===Yf)throw Error(n(174));return a}function Gx(a,c){switch(tr(ep,c),tr(Xf,a),tr(Vo,Yf),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Gt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Gt(c,a)}ur(Vo),tr(Vo,c)}function Wu(){ur(Vo),ur(Xf),ur(ep)}function G1(a){_c(ep.current);var c=_c(Vo.current),m=Gt(c,a.type);c!==m&&(tr(Xf,a),tr(Vo,m))}function Jx(a){Xf.current===a&&(ur(Vo),ur(Xf))}var Er=sl(0);function ng(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Zx=[];function Yx(){for(var a=0;a<Zx.length;a++)Zx[a]._workInProgressVersionPrimary=null;Zx.length=0}var rg=q.ReactCurrentDispatcher,Xx=q.ReactCurrentBatchConfig,Sc=0,Ir=null,ti=null,si=null,ig=!1,tp=!1,np=0,E$=0;function _i(){throw Error(n(321))}function ew(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!ho(a[m],c[m]))return!1;return!0}function tw(a,c,m,w,N,A){if(Sc=A,Ir=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,rg.current=a===null||a.memoizedState===null?C$:T$,a=m(w,N),tp){A=0;do{if(tp=!1,np=0,25<=A)throw Error(n(301));A+=1,si=ti=null,c.updateQueue=null,rg.current=j$,a=m(w,N)}while(tp)}if(rg.current=ag,c=ti!==null&&ti.next!==null,Sc=0,si=ti=Ir=null,ig=!1,c)throw Error(n(300));return a}function nw(){var a=np!==0;return np=0,a}function Uo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Ir.memoizedState=si=a:si=si.next=a,si}function Qs(){if(ti===null){var a=Ir.alternate;a=a!==null?a.memoizedState:null}else a=ti.next;var c=si===null?Ir.memoizedState:si.next;if(c!==null)si=c,ti=a;else{if(a===null)throw Error(n(310));ti=a,a={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},si===null?Ir.memoizedState=si=a:si=si.next=a}return si}function rp(a,c){return typeof c=="function"?c(a):c}function rw(a){var c=Qs(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=ti,N=w.baseQueue,A=m.pending;if(A!==null){if(N!==null){var Z=N.next;N.next=A.next,A.next=Z}w.baseQueue=N=A,m.pending=null}if(N!==null){A=N.next,w=w.baseState;var ge=Z=null,Se=null,He=A;do{var ht=He.lane;if((Sc&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:a(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Z=w):Se=Se.next=gt,Ir.lanes|=ht,Ec|=ht}He=He.next}while(He!==null&&He!==A);Se===null?Z=w:Se.next=ge,ho(w,c.memoizedState)||(is=!0),c.memoizedState=w,c.baseState=Z,c.baseQueue=Se,m.lastRenderedState=w}if(a=m.interleaved,a!==null){N=a;do A=N.lane,Ir.lanes|=A,Ec|=A,N=N.next;while(N!==a)}else N===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function iw(a){var c=Qs(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,N=m.pending,A=c.memoizedState;if(N!==null){m.pending=null;var Z=N=N.next;do A=a(A,Z.action),Z=Z.next;while(Z!==N);ho(A,c.memoizedState)||(is=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),m.lastRenderedState=A}return[A,w]}function J1(){}function Z1(a,c){var m=Ir,w=Qs(),N=c(),A=!ho(w.memoizedState,N);if(A&&(w.memoizedState=N,is=!0),w=w.queue,sw(ek.bind(null,m,w,a),[a]),w.getSnapshot!==c||A||si!==null&&si.memoizedState.tag&1){if(m.flags|=2048,ip(9,X1.bind(null,m,w,N,c),void 0,null),oi===null)throw Error(n(349));Sc&30||Y1(m,c,N)}return N}function Y1(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=Ir.updateQueue,c===null?(c={lastEffect:null,stores:null},Ir.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function X1(a,c,m,w){c.value=m,c.getSnapshot=w,tk(c)&&nk(a)}function ek(a,c,m){return m(function(){tk(c)&&nk(a)})}function tk(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!ho(a,m)}catch{return!0}}function nk(a){var c=_a(a,1);c!==null&&vo(c,a,1,-1)}function rk(a){var c=Uo();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rp,lastRenderedState:a},c.queue=a,a=a.dispatch=k$.bind(null,Ir,a),[c.memoizedState,a]}function ip(a,c,m,w){return a={tag:a,create:c,destroy:m,deps:w,next:null},c=Ir.updateQueue,c===null?(c={lastEffect:null,stores:null},Ir.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,c.lastEffect=a)),a}function ik(){return Qs().memoizedState}function sg(a,c,m,w){var N=Uo();Ir.flags|=a,N.memoizedState=ip(1|c,m,void 0,w===void 0?null:w)}function og(a,c,m,w){var N=Qs();w=w===void 0?null:w;var A=void 0;if(ti!==null){var Z=ti.memoizedState;if(A=Z.destroy,w!==null&&ew(w,Z.deps)){N.memoizedState=ip(c,m,A,w);return}}Ir.flags|=a,N.memoizedState=ip(1|c,m,A,w)}function sk(a,c){return sg(8390656,8,a,c)}function sw(a,c){return og(2048,8,a,c)}function ok(a,c){return og(4,2,a,c)}function ak(a,c){return og(4,4,a,c)}function lk(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function ck(a,c,m){return m=m!=null?m.concat([a]):null,og(4,4,lk.bind(null,c,a),m)}function ow(){}function uk(a,c){var m=Qs();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&ew(c,w[1])?w[0]:(m.memoizedState=[a,c],a)}function dk(a,c){var m=Qs();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&ew(c,w[1])?w[0]:(a=a(),m.memoizedState=[a,c],a)}function fk(a,c,m){return Sc&21?(ho(m,c)||(m=Am(),Ir.lanes|=m,Ec|=m,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=m)}function I$(a,c){var m=Mn;Mn=m!==0&&4>m?m:4,a(!0);var w=Xx.transition;Xx.transition={};try{a(!1),c()}finally{Mn=m,Xx.transition=w}}function pk(){return Qs().memoizedState}function N$(a,c,m){var w=pl(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},hk(a))mk(c,m);else if(m=U1(a,c,m,w),m!==null){var N=$i();vo(m,a,w,N),gk(m,c,w)}}function k$(a,c,m){var w=pl(a),N={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(hk(a))mk(c,N);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var Z=c.lastRenderedState,ge=A(Z,m);if(N.hasEagerState=!0,N.eagerState=ge,ho(ge,Z)){var Se=c.interleaved;Se===null?(N.next=N,Kx(c)):(N.next=Se.next,Se.next=N),c.interleaved=N;return}}catch{}finally{}m=U1(a,c,N,w),m!==null&&(N=$i(),vo(m,a,w,N),gk(m,c,w))}}function hk(a){var c=a.alternate;return a===Ir||c!==null&&c===Ir}function mk(a,c){tp=ig=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function gk(a,c,m){if(m&4194240){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Ff(a,m)}}var ag={readContext:Ks,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},C$={readContext:Ks,useCallback:function(a,c){return Uo().memoizedState=[a,c===void 0?null:c],a},useContext:Ks,useEffect:sk,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,sg(4194308,4,lk.bind(null,c,a),m)},useLayoutEffect:function(a,c){return sg(4194308,4,a,c)},useInsertionEffect:function(a,c){return sg(4,2,a,c)},useMemo:function(a,c){var m=Uo();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var w=Uo();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=N$.bind(null,Ir,a),[w.memoizedState,a]},useRef:function(a){var c=Uo();return a={current:a},c.memoizedState=a},useState:rk,useDebugValue:ow,useDeferredValue:function(a){return Uo().memoizedState=a},useTransition:function(){var a=rk(!1),c=a[0];return a=I$.bind(null,a[1]),Uo().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var w=Ir,N=Uo();if(hr){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),oi===null)throw Error(n(349));Sc&30||Y1(w,c,m)}N.memoizedState=m;var A={value:m,getSnapshot:c};return N.queue=A,sk(ek.bind(null,w,A,a),[a]),w.flags|=2048,ip(9,X1.bind(null,w,A,m,c),void 0,null),m},useId:function(){var a=Uo(),c=oi.identifierPrefix;if(hr){var m=wa,w=xa;m=(w&~(1<<32-xi(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=np++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=E$++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},T$={readContext:Ks,useCallback:uk,useContext:Ks,useEffect:sw,useImperativeHandle:ck,useInsertionEffect:ok,useLayoutEffect:ak,useMemo:dk,useReducer:rw,useRef:ik,useState:function(){return rw(rp)},useDebugValue:ow,useDeferredValue:function(a){var c=Qs();return fk(c,ti.memoizedState,a)},useTransition:function(){var a=rw(rp)[0],c=Qs().memoizedState;return[a,c]},useMutableSource:J1,useSyncExternalStore:Z1,useId:pk,unstable_isNewReconciler:!1},j$={readContext:Ks,useCallback:uk,useContext:Ks,useEffect:sw,useImperativeHandle:ck,useInsertionEffect:ok,useLayoutEffect:ak,useMemo:dk,useReducer:iw,useRef:ik,useState:function(){return iw(rp)},useDebugValue:ow,useDeferredValue:function(a){var c=Qs();return ti===null?c.memoizedState=a:fk(c,ti.memoizedState,a)},useTransition:function(){var a=iw(rp)[0],c=Qs().memoizedState;return[a,c]},useMutableSource:J1,useSyncExternalStore:Z1,useId:pk,unstable_isNewReconciler:!1};function go(a,c){if(a&&a.defaultProps){c=oe({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function aw(a,c,m,w){c=a.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var lg={isMounted:function(a){return(a=a._reactInternals)?Ws(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var w=$i(),N=pl(a),A=Sa(w,N);A.payload=c,m!=null&&(A.callback=m),c=cl(a,A,N),c!==null&&(vo(c,a,N,w),eg(c,a,N))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var w=$i(),N=pl(a),A=Sa(w,N);A.tag=1,A.payload=c,m!=null&&(A.callback=m),c=cl(a,A,N),c!==null&&(vo(c,a,N,w),eg(c,a,N))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=$i(),w=pl(a),N=Sa(m,w);N.tag=2,c!=null&&(N.callback=c),c=cl(a,N,w),c!==null&&(vo(c,a,w,m),eg(c,a,w))}};function yk(a,c,m,w,N,A,Z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,A,Z):c.prototype&&c.prototype.isPureReactComponent?!Vf(m,w)||!Vf(N,A):!0}function bk(a,c,m){var w=!1,N=ol,A=c.contextType;return typeof A=="object"&&A!==null?A=Ks(A):(N=rs(c)?bc:wi.current,w=c.contextTypes,A=(w=w!=null)?Fu(a,N):ol),c=new c(m,A),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=lg,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=N,a.__reactInternalMemoizedMaskedChildContext=A),c}function vk(a,c,m,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==a&&lg.enqueueReplaceState(c,c.state,null)}function lw(a,c,m,w){var N=a.stateNode;N.props=m,N.state=a.memoizedState,N.refs={},Qx(a);var A=c.contextType;typeof A=="object"&&A!==null?N.context=Ks(A):(A=rs(c)?bc:wi.current,N.context=Fu(a,A)),N.state=a.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(aw(a,c,A,m),N.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(c=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),c!==N.state&&lg.enqueueReplaceState(N,N.state,null),tg(a,m,N,w),N.state=a.memoizedState),typeof N.componentDidMount=="function"&&(a.flags|=4194308)}function Vu(a,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var N=m}catch(A){N=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:c,stack:N,digest:null}}function cw(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function uw(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var R$=typeof WeakMap=="function"?WeakMap:Map;function xk(a,c,m){m=Sa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){mg||(mg=!0,Iw=w),uw(a,c)},m}function wk(a,c,m){m=Sa(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var N=c.value;m.payload=function(){return w(N)},m.callback=function(){uw(a,c)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){uw(a,c),typeof w!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var Z=c.stack;this.componentDidCatch(c.value,{componentStack:Z!==null?Z:""})}),m}function _k(a,c,m){var w=a.pingCache;if(w===null){w=a.pingCache=new R$;var N=new Set;w.set(c,N)}else N=w.get(c),N===void 0&&(N=new Set,w.set(c,N));N.has(m)||(N.add(m),a=U$.bind(null,a,c,m),c.then(a,a))}function Sk(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Ek(a,c,m,w,N){return a.mode&1?(a.flags|=65536,a.lanes=N,a):(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=Sa(-1,1),c.tag=2,cl(m,c,1))),m.lanes|=1),a)}var O$=q.ReactCurrentOwner,is=!1;function Mi(a,c,m,w){c.child=a===null?V1(c,null,m,w):$u(c,a.child,m,w)}function Ik(a,c,m,w,N){m=m.render;var A=c.ref;return zu(c,N),w=tw(a,c,m,w,A,N),m=nw(),a!==null&&!is?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~N,Ea(a,c,N)):(hr&&m&&Lx(c),c.flags|=1,Mi(a,c,w,N),c.child)}function Nk(a,c,m,w,N){if(a===null){var A=m.type;return typeof A=="function"&&!Ow(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=A,kk(a,c,A,w,N)):(a=wg(m.type,null,w,c,c.mode,N),a.ref=c.ref,a.return=c,c.child=a)}if(A=a.child,!(a.lanes&N)){var Z=A.memoizedProps;if(m=m.compare,m=m!==null?m:Vf,m(Z,w)&&a.ref===c.ref)return Ea(a,c,N)}return c.flags|=1,a=ml(A,w),a.ref=c.ref,a.return=c,c.child=a}function kk(a,c,m,w,N){if(a!==null){var A=a.memoizedProps;if(Vf(A,w)&&a.ref===c.ref)if(is=!1,c.pendingProps=w=A,(a.lanes&N)!==0)a.flags&131072&&(is=!0);else return c.lanes=a.lanes,Ea(a,c,N)}return dw(a,c,m,w,N)}function Ck(a,c,m){var w=c.pendingProps,N=w.children,A=a!==null?a.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(Hu,ws),ws|=m;else{if(!(m&0x40000000))return a=A!==null?A.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,tr(Hu,ws),ws|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=A!==null?A.baseLanes:m,tr(Hu,ws),ws|=w}else A!==null?(w=A.baseLanes|m,c.memoizedState=null):w=m,tr(Hu,ws),ws|=w;return Mi(a,c,N,m),c.child}function Tk(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function dw(a,c,m,w,N){var A=rs(m)?bc:wi.current;return A=Fu(c,A),zu(c,N),m=tw(a,c,m,w,A,N),w=nw(),a!==null&&!is?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~N,Ea(a,c,N)):(hr&&w&&Lx(c),c.flags|=1,Mi(a,c,m,N),c.child)}function jk(a,c,m,w,N){if(rs(m)){var A=!0;Hm(c)}else A=!1;if(zu(c,N),c.stateNode===null)ug(a,c),bk(c,m,w),lw(c,m,w,N),w=!0;else if(a===null){var Z=c.stateNode,ge=c.memoizedProps;Z.props=ge;var Se=Z.context,He=m.contextType;typeof He=="object"&&He!==null?He=Ks(He):(He=rs(m)?bc:wi.current,He=Fu(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Z.getSnapshotBeforeUpdate=="function";gt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&vk(c,Z,w,He),ll=!1;var ft=c.memoizedState;Z.state=ft,tg(c,w,Z,N),Se=c.memoizedState,ge!==w||ft!==Se||ns.current||ll?(typeof ht=="function"&&(aw(c,m,ht,w),Se=c.memoizedState),(ge=ll||yk(c,m,ge,w,ft,Se,He))?(gt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),Z.props=w,Z.state=Se,Z.context=He,w=ge):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{Z=c.stateNode,H1(a,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:go(c.type,ge),Z.props=He,gt=c.pendingProps,ft=Z.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=Ks(Se):(Se=rs(m)?bc:wi.current,Se=Fu(c,Se));var Pt=m.getDerivedStateFromProps;(ht=typeof Pt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&vk(c,Z,w,Se),ll=!1,ft=c.memoizedState,Z.state=ft,tg(c,w,Z,N);var Bt=c.memoizedState;ge!==gt||ft!==Bt||ns.current||ll?(typeof Pt=="function"&&(aw(c,m,Pt,w),Bt=c.memoizedState),(He=ll||yk(c,m,He,w,ft,Bt,Se)||!1)?(ht||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(w,Bt,Se),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(w,Bt,Se)),typeof Z.componentDidUpdate=="function"&&(c.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Bt),Z.props=w,Z.state=Bt,Z.context=Se,w=He):(typeof Z.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),w=!1)}return fw(a,c,m,w,A,N)}function fw(a,c,m,w,N,A){Tk(a,c);var Z=(c.flags&128)!==0;if(!w&&!Z)return N&&P1(c,m,!1),Ea(a,c,A);w=c.stateNode,O$.current=c;var ge=Z&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&Z?(c.child=$u(c,a.child,null,A),c.child=$u(c,null,ge,A)):Mi(a,c,ge,A),c.memoizedState=w.state,N&&P1(c,m,!0),c.child}function Rk(a){var c=a.stateNode;c.pendingContext?q1(a,c.pendingContext,c.pendingContext!==c.context):c.context&&q1(a,c.context,!1),Gx(a,c.containerInfo)}function Ok(a,c,m,w,N){return Mu(),zx(N),c.flags|=256,Mi(a,c,m,w),c.child}var pw={dehydrated:null,treeContext:null,retryLane:0};function hw(a){return{baseLanes:a,cachePool:null,transitions:null}}function qk(a,c,m){var w=c.pendingProps,N=Er.current,A=!1,Z=(c.flags&128)!==0,ge;if((ge=Z)||(ge=a!==null&&a.memoizedState===null?!1:(N&2)!==0),ge?(A=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(N|=1),tr(Er,N&1),a===null)return Bx(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(Z=w.children,a=w.fallback,A?(w=c.mode,A=c.child,Z={mode:"hidden",children:Z},!(w&1)&&A!==null?(A.childLanes=0,A.pendingProps=Z):A=_g(Z,w,0,null),a=Cc(a,w,m,null),A.return=c,a.return=c,A.sibling=a,c.child=A,c.child.memoizedState=hw(m),c.memoizedState=pw,a):mw(c,Z));if(N=a.memoizedState,N!==null&&(ge=N.dehydrated,ge!==null))return q$(a,c,Z,w,ge,N,m);if(A){A=w.fallback,Z=c.mode,N=a.child,ge=N.sibling;var Se={mode:"hidden",children:w.children};return!(Z&1)&&c.child!==N?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=ml(N,Se),w.subtreeFlags=N.subtreeFlags&0xe00000),ge!==null?A=ml(ge,A):(A=Cc(A,Z,m,null),A.flags|=2),A.return=c,w.return=c,w.sibling=A,c.child=w,w=A,A=c.child,Z=a.child.memoizedState,Z=Z===null?hw(m):{baseLanes:Z.baseLanes|m,cachePool:null,transitions:Z.transitions},A.memoizedState=Z,A.childLanes=a.childLanes&~m,c.memoizedState=pw,w}return A=a.child,a=A.sibling,w=ml(A,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=w,c.memoizedState=null,w}function mw(a,c){return c=_g({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function cg(a,c,m,w){return w!==null&&zx(w),$u(c,a.child,null,m),a=mw(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function q$(a,c,m,w,N,A,Z){if(m)return c.flags&256?(c.flags&=-257,w=cw(Error(n(422))),cg(a,c,Z,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(A=w.fallback,N=c.mode,w=_g({mode:"visible",children:w.children},N,0,null),A=Cc(A,N,Z,null),A.flags|=2,w.return=c,A.return=c,w.sibling=A,c.child=w,c.mode&1&&$u(c,a.child,null,Z),c.child.memoizedState=hw(Z),c.memoizedState=pw,A);if(!(c.mode&1))return cg(a,c,Z,null);if(N.data==="$!"){if(w=N.nextSibling&&N.nextSibling.dataset,w)var ge=w.dgst;return w=ge,A=Error(n(419)),w=cw(A,w,void 0),cg(a,c,Z,w)}if(ge=(Z&a.childLanes)!==0,is||ge){if(w=oi,w!==null){switch(Z&-Z){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:N=32;break;case 0x20000000:N=0x10000000;break;default:N=0}N=N&(w.suspendedLanes|Z)?0:N,N!==0&&N!==A.retryLane&&(A.retryLane=N,_a(a,N),vo(w,a,N,-1))}return Rw(),w=cw(Error(n(421))),cg(a,c,Z,w)}return N.data==="$?"?(c.flags|=128,c.child=a.child,c=H$.bind(null,a),N._reactRetry=c,null):(a=A.treeContext,xs=il(N.nextSibling),vs=c,hr=!0,mo=null,a!==null&&(Us[Hs++]=xa,Us[Hs++]=wa,Us[Hs++]=vc,xa=a.id,wa=a.overflow,vc=c),c=mw(c,w.children),c.flags|=4096,c)}function Ak(a,c,m){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),Hx(a.return,c,m)}function gw(a,c,m,w,N){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:N}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=w,A.tail=m,A.tailMode=N)}function Pk(a,c,m){var w=c.pendingProps,N=w.revealOrder,A=w.tail;if(Mi(a,c,w.children,m),w=Er.current,w&2)w=w&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ak(a,m,c);else if(a.tag===19)Ak(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(tr(Er,w),!(c.mode&1))c.memoizedState=null;else switch(N){case"forwards":for(m=c.child,N=null;m!==null;)a=m.alternate,a!==null&&ng(a)===null&&(N=m),m=m.sibling;m=N,m===null?(N=c.child,c.child=null):(N=m.sibling,m.sibling=null),gw(c,!1,N,m,A);break;case"backwards":for(m=null,N=c.child,c.child=null;N!==null;){if(a=N.alternate,a!==null&&ng(a)===null){c.child=N;break}a=N.sibling,N.sibling=m,m=N,N=a}gw(c,!0,m,null,A);break;case"together":gw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ug(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Ea(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Ec|=c.lanes,!(m&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=ml(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=ml(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function A$(a,c,m){switch(c.tag){case 3:Rk(c),Mu();break;case 5:G1(c);break;case 1:rs(c.type)&&Hm(c);break;case 4:Gx(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,N=c.memoizedProps.value;tr(Ym,w._currentValue),w._currentValue=N;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(tr(Er,Er.current&1),c.flags|=128,null):m&c.child.childLanes?qk(a,c,m):(tr(Er,Er.current&1),a=Ea(a,c,m),a!==null?a.sibling:null);tr(Er,Er.current&1);break;case 19:if(w=(m&c.childLanes)!==0,a.flags&128){if(w)return Pk(a,c,m);c.flags|=128}if(N=c.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),tr(Er,Er.current),w)break;return null;case 22:case 23:return c.lanes=0,Ck(a,c,m)}return Ea(a,c,m)}var Fk,yw,Dk,Lk;Fk=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},yw=function(){},Dk=function(a,c,m,w){var N=a.memoizedProps;if(N!==w){a=c.stateNode,_c(Vo.current);var A=null;switch(m){case"input":N=_t(a,N),w=_t(a,w),A=[];break;case"select":N=oe({},N,{value:void 0}),w=oe({},w,{value:void 0}),A=[];break;case"textarea":N=Ue(a,N),w=Ue(a,w),A=[];break;default:typeof N.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Wm)}Yi(m,w);var Z;m=null;for(He in N)if(!w.hasOwnProperty(He)&&N.hasOwnProperty(He)&&N[He]!=null)if(He==="style"){var ge=N[He];for(Z in ge)ge.hasOwnProperty(Z)&&(m||(m={}),m[Z]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?A||(A=[]):(A=A||[]).push(He,null));for(He in w){var Se=w[He];if(ge=N?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Z in ge)!ge.hasOwnProperty(Z)||Se&&Se.hasOwnProperty(Z)||(m||(m={}),m[Z]="");for(Z in Se)Se.hasOwnProperty(Z)&&ge[Z]!==Se[Z]&&(m||(m={}),m[Z]=Se[Z])}else m||(A||(A=[]),A.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(A=A||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(A=A||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&cr("scroll",a),A||ge===Se||(A=[])):(A=A||[]).push(He,Se))}m&&(A=A||[]).push("style",m);var He=A;(c.updateQueue=He)&&(c.flags|=4)}},Lk=function(a,c,m,w){m!==w&&(c.flags|=4)};function sp(a,c){if(!hr)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function Si(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(c)for(var N=a.child;N!==null;)m|=N.lanes|N.childLanes,w|=N.subtreeFlags&0xe00000,w|=N.flags&0xe00000,N.return=a,N=N.sibling;else for(N=a.child;N!==null;)m|=N.lanes|N.childLanes,w|=N.subtreeFlags,w|=N.flags,N.return=a,N=N.sibling;return a.subtreeFlags|=w,a.childLanes=m,c}function P$(a,c,m){var w=c.pendingProps;switch(Mx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(c),null;case 1:return rs(c.type)&&Um(),Si(c),null;case 3:return w=c.stateNode,Wu(),ur(ns),ur(wi),Yx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Jm(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,mo!==null&&(Cw(mo),mo=null))),yw(a,c),Si(c),null;case 5:Jx(c);var N=_c(ep.current);if(m=c.type,a!==null&&c.stateNode!=null)Dk(a,c,m,w,N),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return Si(c),null}if(a=_c(Vo.current),Jm(c)){w=c.stateNode,m=c.type;var A=c.memoizedProps;switch(w[Wo]=c,w[Gf]=A,a=(c.mode&1)!==0,m){case"dialog":cr("cancel",w),cr("close",w);break;case"iframe":case"object":case"embed":cr("load",w);break;case"video":case"audio":for(N=0;N<Hf.length;N++)cr(Hf[N],w);break;case"source":cr("error",w);break;case"img":case"image":case"link":cr("error",w),cr("load",w);break;case"details":cr("toggle",w);break;case"input":Rt(w,A),cr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!A.multiple},cr("invalid",w);break;case"textarea":rt(w,A),cr("invalid",w)}Yi(m,A),N=null;for(var Z in A)if(A.hasOwnProperty(Z)){var ge=A[Z];Z==="children"?typeof ge=="string"?w.textContent!==ge&&(A.suppressHydrationWarning!==!0&&zm(w.textContent,ge,a),N=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(A.suppressHydrationWarning!==!0&&zm(w.textContent,ge,a),N=["children",""+ge]):i.hasOwnProperty(Z)&&ge!=null&&Z==="onScroll"&&cr("scroll",w)}switch(m){case"input":Xe(w),xe(w,A,!0);break;case"textarea":Xe(w),ut(w);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(w.onclick=Wm)}w=N,c.updateQueue=w,w!==null&&(c.flags|=4)}else{Z=N.nodeType===9?N:N.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=Z.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=Z.createElement(m,{is:w.is}):(a=Z.createElement(m),m==="select"&&(Z=a,w.multiple?Z.multiple=!0:w.size&&(Z.size=w.size))):a=Z.createElementNS(a,m),a[Wo]=c,a[Gf]=w,Fk(a,c,!1,!1),c.stateNode=a;e:{switch(Z=Xi(m,w),m){case"dialog":cr("cancel",a),cr("close",a),N=w;break;case"iframe":case"object":case"embed":cr("load",a),N=w;break;case"video":case"audio":for(N=0;N<Hf.length;N++)cr(Hf[N],a);N=w;break;case"source":cr("error",a),N=w;break;case"img":case"image":case"link":cr("error",a),cr("load",a),N=w;break;case"details":cr("toggle",a),N=w;break;case"input":Rt(a,w),N=_t(a,w),cr("invalid",a);break;case"option":N=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},N=oe({},w,{value:void 0}),cr("invalid",a);break;case"textarea":rt(a,w),N=Ue(a,w),cr("invalid",a);break;default:N=w}Yi(m,N),ge=N;for(A in ge)if(ge.hasOwnProperty(A)){var Se=ge[A];A==="style"?Jt(a,Se):A==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&ar(a,Se)):A==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Ln(a,Se):typeof Se=="number"&&Ln(a,""+Se):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?Se!=null&&A==="onScroll"&&cr("scroll",a):Se!=null&&R(a,A,Se,Z))}switch(m){case"input":Xe(a),xe(a,w,!1);break;case"textarea":Xe(a),ut(a);break;case"option":w.value!=null&&a.setAttribute("value",""+Re(w.value));break;case"select":a.multiple=!!w.multiple,A=w.value,A!=null?Ae(a,!!w.multiple,A,!1):w.defaultValue!=null&&Ae(a,!!w.multiple,w.defaultValue,!0);break;default:typeof N.onClick=="function"&&(a.onclick=Wm)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Si(c),null;case 6:if(a&&c.stateNode!=null)Lk(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=_c(ep.current),_c(Vo.current),Jm(c)){if(w=c.stateNode,m=c.memoizedProps,w[Wo]=c,(A=w.nodeValue!==m)&&(a=vs,a!==null))switch(a.tag){case 3:zm(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&zm(w.nodeValue,m,(a.mode&1)!==0)}A&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Wo]=c,c.stateNode=w}return Si(c),null;case 13:if(ur(Er),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(hr&&xs!==null&&c.mode&1&&!(c.flags&128))B1(),Mu(),c.flags|=98560,A=!1;else if(A=Jm(c),w!==null&&w.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Wo]=c}else Mu(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Si(c),A=!1}else mo!==null&&(Cw(mo),mo=null),A=!0;if(!A)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(a===null||Er.current&1?ni===0&&(ni=3):Rw())),c.updateQueue!==null&&(c.flags|=4),Si(c),null);case 4:return Wu(),yw(a,c),a===null&&Kf(c.stateNode.containerInfo),Si(c),null;case 10:return Ux(c.type._context),Si(c),null;case 17:return rs(c.type)&&Um(),Si(c),null;case 19:if(ur(Er),A=c.memoizedState,A===null)return Si(c),null;if(w=(c.flags&128)!==0,Z=A.rendering,Z===null)if(w)sp(A,!1);else{if(ni!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(Z=ng(a),Z!==null){for(c.flags|=128,sp(A,!1),w=Z.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)A=m,a=w,A.flags&=0xe00002,Z=A.alternate,Z===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=Z.childLanes,A.lanes=Z.lanes,A.child=Z.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=Z.memoizedProps,A.memoizedState=Z.memoizedState,A.updateQueue=Z.updateQueue,A.type=Z.type,a=Z.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return tr(Er,Er.current&1|2),c.child}a=a.sibling}A.tail!==null&&lr()>Ku&&(c.flags|=128,w=!0,sp(A,!1),c.lanes=4194304)}else{if(!w)if(a=ng(Z),a!==null){if(c.flags|=128,w=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),sp(A,!0),A.tail===null&&A.tailMode==="hidden"&&!Z.alternate&&!hr)return Si(c),null}else 2*lr()-A.renderingStartTime>Ku&&m!==0x40000000&&(c.flags|=128,w=!0,sp(A,!1),c.lanes=4194304);A.isBackwards?(Z.sibling=c.child,c.child=Z):(m=A.last,m!==null?m.sibling=Z:c.child=Z,A.last=Z)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=lr(),c.sibling=null,m=Er.current,tr(Er,w?m&1|2:m&1),c):(Si(c),null);case 22:case 23:return jw(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?ws&0x40000000&&(Si(c),c.subtreeFlags&6&&(c.flags|=8192)):Si(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function F$(a,c){switch(Mx(c),c.tag){case 1:return rs(c.type)&&Um(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Wu(),ur(ns),ur(wi),Yx(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Jx(c),null;case 13:if(ur(Er),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Mu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ur(Er),null;case 4:return Wu(),null;case 10:return Ux(c.type._context),null;case 22:case 23:return jw(),null;case 24:return null;default:return null}}var dg=!1,Ei=!1,D$=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Uu(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Tr(a,c,w)}else m.current=null}function bw(a,c,m){try{m()}catch(w){Tr(a,c,w)}}var Mk=!1;function L$(a,c){if(jx=Ge,a=y1(),_x(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var N=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var Z=0,ge=-1,Se=-1,He=0,ht=0,gt=a,ft=null;t:for(;;){for(var Pt;gt!==m||N!==0&&gt.nodeType!==3||(ge=Z+N),gt!==A||w!==0&&gt.nodeType!==3||(Se=Z+w),gt.nodeType===3&&(Z+=gt.nodeValue.length),(Pt=gt.firstChild)!==null;)ft=gt,gt=Pt;for(;;){if(gt===a)break t;if(ft===m&&++He===N&&(ge=Z),ft===A&&++ht===w&&(Se=Z),(Pt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=Pt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(Rx={focusedElem:a,selectionRange:m},Ge=!1,Mt=c;Mt!==null;)if(c=Mt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Mt=a;else for(;Mt!==null;){c=Mt;try{var Bt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Vt=Bt.memoizedProps,$r=Bt.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Vt:go(c.type,Vt),$r);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){Tr(c,c.return,vt)}if(a=c.sibling,a!==null){a.return=c.return,Mt=a;break}Mt=c.return}return Bt=Mk,Mk=!1,Bt}function op(a,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var N=w=w.next;do{if((N.tag&a)===a){var A=N.destroy;N.destroy=void 0,A!==void 0&&bw(c,m,A)}N=N.next}while(N!==w)}}function fg(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function vw(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function $k(a){var c=a.alternate;c!==null&&(a.alternate=null,$k(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Wo],delete c[Gf],delete c[Px],delete c[x$],delete c[w$])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Bk(a){return a.tag===5||a.tag===3||a.tag===4}function zk(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Bk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function xw(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Wm));else if(w!==4&&(a=a.child,a!==null))for(xw(a,c,m),a=a.sibling;a!==null;)xw(a,c,m),a=a.sibling}function ww(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(ww(a,c,m),a=a.sibling;a!==null;)ww(a,c,m),a=a.sibling}var ui=null,yo=!1;function ul(a,c,m){for(m=m.child;m!==null;)Wk(a,c,m),m=m.sibling}function Wk(a,c,m){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(el,m)}catch{}switch(m.tag){case 5:Ei||Uu(m,c);case 6:var w=ui,N=yo;ui=null,ul(a,c,m),ui=w,yo=N,ui!==null&&(yo?(a=ui,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):ui.removeChild(m.stateNode));break;case 18:ui!==null&&(yo?(a=ui,m=m.stateNode,a.nodeType===8?Ax(a.parentNode,m):a.nodeType===1&&Ax(a,m),Te(a)):Ax(ui,m.stateNode));break;case 4:w=ui,N=yo,ui=m.stateNode.containerInfo,yo=!0,ul(a,c,m),ui=w,yo=N;break;case 0:case 11:case 14:case 15:if(!Ei&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){N=w=w.next;do{var A=N,Z=A.destroy;A=A.tag,Z!==void 0&&(A&2||A&4)&&bw(m,c,Z),N=N.next}while(N!==w)}ul(a,c,m);break;case 1:if(!Ei&&(Uu(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){Tr(m,c,ge)}ul(a,c,m);break;case 21:ul(a,c,m);break;case 22:m.mode&1?(Ei=(w=Ei)||m.memoizedState!==null,ul(a,c,m),Ei=w):ul(a,c,m);break;default:ul(a,c,m)}}function Vk(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new D$),c.forEach(function(w){var N=K$.bind(null,a,w);m.has(w)||(m.add(w),w.then(N,N))})}}function bo(a,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var N=m[w];try{var A=a,Z=c,ge=Z;e:for(;ge!==null;){switch(ge.tag){case 5:ui=ge.stateNode,yo=!1;break e;case 3:ui=ge.stateNode.containerInfo,yo=!0;break e;case 4:ui=ge.stateNode.containerInfo,yo=!0;break e}ge=ge.return}if(ui===null)throw Error(n(160));Wk(A,Z,N),ui=null,yo=!1;var Se=N.alternate;Se!==null&&(Se.return=null),N.return=null}catch(He){Tr(N,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Uk(c,a),c=c.sibling}function Uk(a,c){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(bo(c,a),Ho(a),w&4){try{op(3,a,a.return),fg(3,a)}catch(Vt){Tr(a,a.return,Vt)}try{op(5,a,a.return)}catch(Vt){Tr(a,a.return,Vt)}}break;case 1:bo(c,a),Ho(a),w&512&&m!==null&&Uu(m,m.return);break;case 5:if(bo(c,a),Ho(a),w&512&&m!==null&&Uu(m,m.return),a.flags&32){var N=a.stateNode;try{Ln(N,"")}catch(Vt){Tr(a,a.return,Vt)}}if(w&4&&(N=a.stateNode,N!=null)){var A=a.memoizedProps,Z=m!==null?m.memoizedProps:A,ge=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{ge==="input"&&A.type==="radio"&&A.name!=null&&Ut(N,A),Xi(ge,Z);var He=Xi(ge,A);for(Z=0;Z<Se.length;Z+=2){var ht=Se[Z],gt=Se[Z+1];ht==="style"?Jt(N,gt):ht==="dangerouslySetInnerHTML"?ar(N,gt):ht==="children"?Ln(N,gt):R(N,ht,gt,He)}switch(ge){case"input":sn(N,A);break;case"textarea":Me(N,A);break;case"select":var ft=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!A.multiple;var Pt=A.value;Pt!=null?Ae(N,!!A.multiple,Pt,!1):ft!==!!A.multiple&&(A.defaultValue!=null?Ae(N,!!A.multiple,A.defaultValue,!0):Ae(N,!!A.multiple,A.multiple?[]:"",!1))}N[Gf]=A}catch(Vt){Tr(a,a.return,Vt)}}break;case 6:if(bo(c,a),Ho(a),w&4){if(a.stateNode===null)throw Error(n(162));N=a.stateNode,A=a.memoizedProps;try{N.nodeValue=A}catch(Vt){Tr(a,a.return,Vt)}}break;case 3:if(bo(c,a),Ho(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(c.containerInfo)}catch(Vt){Tr(a,a.return,Vt)}break;case 4:bo(c,a),Ho(a);break;case 13:bo(c,a),Ho(a),N=a.child,N.flags&8192&&(A=N.memoizedState!==null,N.stateNode.isHidden=A,!A||N.alternate!==null&&N.alternate.memoizedState!==null||(Ew=lr())),w&4&&Vk(a);break;case 22:if(ht=m!==null&&m.memoizedState!==null,a.mode&1?(Ei=(He=Ei)||ht,bo(c,a),Ei=He):bo(c,a),Ho(a),w&8192){if(He=a.memoizedState!==null,(a.stateNode.isHidden=He)&&!ht&&a.mode&1)for(Mt=a,ht=a.child;ht!==null;){for(gt=Mt=ht;Mt!==null;){switch(ft=Mt,Pt=ft.child,ft.tag){case 0:case 11:case 14:case 15:op(4,ft,ft.return);break;case 1:Uu(ft,ft.return);var Bt=ft.stateNode;if(typeof Bt.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,Bt.props=c.memoizedProps,Bt.state=c.memoizedState,Bt.componentWillUnmount()}catch(Vt){Tr(w,m,Vt)}}break;case 5:Uu(ft,ft.return);break;case 22:if(ft.memoizedState!==null){Qk(gt);continue}}Pt!==null?(Pt.return=ft,Mt=Pt):Qk(gt)}ht=ht.sibling}e:for(ht=null,gt=a;;){if(gt.tag===5){if(ht===null){ht=gt;try{N=gt.stateNode,He?(A=N.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Z=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=_r("display",Z))}catch(Vt){Tr(a,a.return,Vt)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Vt){Tr(a,a.return,Vt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===a)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===a)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===a)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:bo(c,a),Ho(a),w&4&&Vk(a);break;case 21:break;default:bo(c,a),Ho(a)}}function Ho(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(Bk(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var N=w.stateNode;w.flags&32&&(Ln(N,""),w.flags&=-33);var A=zk(a);ww(a,A,N);break;case 3:case 4:var Z=w.stateNode.containerInfo,ge=zk(a);xw(a,ge,Z);break;default:throw Error(n(161))}}catch(Se){Tr(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function M$(a,c,m){Mt=a,Hk(a)}function Hk(a,c,m){for(var w=(a.mode&1)!==0;Mt!==null;){var N=Mt,A=N.child;if(N.tag===22&&w){var Z=N.memoizedState!==null||dg;if(!Z){var ge=N.alternate,Se=ge!==null&&ge.memoizedState!==null||Ei;ge=dg;var He=Ei;if(dg=Z,(Ei=Se)&&!He)for(Mt=N;Mt!==null;)Z=Mt,Se=Z.child,Z.tag===22&&Z.memoizedState!==null?Gk(N):Se!==null?(Se.return=Z,Mt=Se):Gk(N);for(;A!==null;)Mt=A,Hk(A),A=A.sibling;Mt=N,dg=ge,Ei=He}Kk(a)}else N.subtreeFlags&8772&&A!==null?(A.return=N,Mt=A):Kk(a)}}function Kk(a){for(;Mt!==null;){var c=Mt;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ei||fg(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ei)if(m===null)w.componentDidMount();else{var N=c.elementType===c.type?m.memoizedProps:go(c.type,m.memoizedProps);w.componentDidUpdate(N,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&Q1(c,A,w);break;case 3:var Z=c.updateQueue;if(Z!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}Q1(c,Z,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ei||c.flags&512&&vw(c)}catch(ft){Tr(c,c.return,ft)}}if(c===a){Mt=null;break}if(m=c.sibling,m!==null){m.return=c.return,Mt=m;break}Mt=c.return}}function Qk(a){for(;Mt!==null;){var c=Mt;if(c===a){Mt=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Mt=m;break}Mt=c.return}}function Gk(a){for(;Mt!==null;){var c=Mt;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{fg(4,c)}catch(Se){Tr(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var N=c.return;try{w.componentDidMount()}catch(Se){Tr(c,N,Se)}}var A=c.return;try{vw(c)}catch(Se){Tr(c,A,Se)}break;case 5:var Z=c.return;try{vw(c)}catch(Se){Tr(c,Z,Se)}}}catch(Se){Tr(c,c.return,Se)}if(c===a){Mt=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,Mt=ge;break}Mt=c.return}}var $$=Math.ceil,pg=q.ReactCurrentDispatcher,_w=q.ReactCurrentOwner,Gs=q.ReactCurrentBatchConfig,qn=0,oi=null,Qr=null,di=0,ws=0,Hu=sl(0),ni=0,ap=null,Ec=0,hg=0,Sw=0,lp=null,ss=null,Ew=0,Ku=1/0,Ia=null,mg=!1,Iw=null,dl=null,gg=!1,fl=null,yg=0,cp=0,Nw=null,bg=-1,vg=0;function $i(){return qn&6?lr():bg!==-1?bg:bg=lr()}function pl(a){return a.mode&1?qn&2&&di!==0?di&-di:S$.transition!==null?(vg===0&&(vg=Am()),vg):(a=Mn,a!==0||(a=window.event,a=a===void 0?16:Ee(a.type)),a):1}function vo(a,c,m,w){if(50<cp)throw cp=0,Nw=null,Error(n(185));mc(a,m,w),(!(qn&2)||a!==oi)&&(a===oi&&(!(qn&2)&&(hg|=m),ni===4&&hl(a,di)),os(a,w),m===1&&qn===0&&!(c.mode&1)&&(Ku=lr()+500,Km&&al()))}function os(a,c){var m=a.callbackNode;hx(a,c);var w=nl(a,a===oi?di:0);if(w===0)m!==null&&fc(m),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(m!=null&&fc(m),c===1)a.tag===0?_$(Zk.bind(null,a)):F1(Zk.bind(null,a)),b$(function(){!(qn&6)&&al()}),m=null;else{switch(Pm(w)){case 1:m=pc;break;case 4:m=Cu;break;case 16:m=Xa;break;case 0x20000000:m=hc;break;default:m=Xa}m=sC(m,Jk.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function Jk(a,c){if(bg=-1,vg=0,qn&6)throw Error(n(327));var m=a.callbackNode;if(Qu()&&a.callbackNode!==m)return null;var w=nl(a,a===oi?di:0);if(w===0)return null;if(w&30||w&a.expiredLanes||c)c=xg(a,w);else{c=w;var N=qn;qn|=2;var A=Xk();(oi!==a||di!==c)&&(Ia=null,Ku=lr()+500,Nc(a,c));do try{W$();break}catch(ge){Yk(a,ge)}while(!0);Vx(),pg.current=A,qn=N,Qr!==null?c=0:(oi=null,di=0,c=ni)}if(c!==0){if(c===2&&(N=Af(a),N!==0&&(w=N,c=kw(a,N))),c===1)throw m=ap,Nc(a,0),hl(a,w),os(a,lr()),m;if(c===6)hl(a,w);else{if(N=a.current.alternate,!(w&30)&&!B$(N)&&(c=xg(a,w),c===2&&(A=Af(a),A!==0&&(w=A,c=kw(a,A))),c===1))throw m=ap,Nc(a,0),hl(a,w),os(a,lr()),m;switch(a.finishedWork=N,a.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:kc(a,ss,Ia);break;case 3:if(hl(a,w),(w&0x7c00000)===w&&(c=Ew+500-lr(),10<c)){if(nl(a,0)!==0)break;if(N=a.suspendedLanes,(N&w)!==w){$i(),a.pingedLanes|=a.suspendedLanes&N;break}a.timeoutHandle=qx(kc.bind(null,a,ss,Ia),c);break}kc(a,ss,Ia);break;case 4:if(hl(a,w),(w&4194240)===w)break;for(c=a.eventTimes,N=-1;0<w;){var Z=31-xi(w);A=1<<Z,Z=c[Z],Z>N&&(N=Z),w&=~A}if(w=N,w=lr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*$$(w/1960))-w,10<w){a.timeoutHandle=qx(kc.bind(null,a,ss,Ia),w);break}kc(a,ss,Ia);break;case 5:kc(a,ss,Ia);break;default:throw Error(n(329))}}}return os(a,lr()),a.callbackNode===m?Jk.bind(null,a):null}function kw(a,c){var m=lp;return a.current.memoizedState.isDehydrated&&(Nc(a,c).flags|=256),a=xg(a,c),a!==2&&(c=ss,ss=m,c!==null&&Cw(c)),a}function Cw(a){ss===null?ss=a:ss.push.apply(ss,a)}function B$(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var N=m[w],A=N.getSnapshot;N=N.value;try{if(!ho(A(),N))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hl(a,c){for(c&=~Sw,c&=~hg,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-xi(c),w=1<<m;a[m]=-1,c&=~w}}function Zk(a){if(qn&6)throw Error(n(327));Qu();var c=nl(a,0);if(!(c&1))return os(a,lr()),null;var m=xg(a,c);if(a.tag!==0&&m===2){var w=Af(a);w!==0&&(c=w,m=kw(a,w))}if(m===1)throw m=ap,Nc(a,0),hl(a,c),os(a,lr()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,kc(a,ss,Ia),os(a,lr()),null}function Tw(a,c){var m=qn;qn|=1;try{return a(c)}finally{qn=m,qn===0&&(Ku=lr()+500,Km&&al())}}function Ic(a){fl!==null&&fl.tag===0&&!(qn&6)&&Qu();var c=qn;qn|=1;var m=Gs.transition,w=Mn;try{if(Gs.transition=null,Mn=1,a)return a()}finally{Mn=w,Gs.transition=m,qn=c,!(qn&6)&&al()}}function jw(){ws=Hu.current,ur(Hu)}function Nc(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,y$(m)),Qr!==null)for(m=Qr.return;m!==null;){var w=m;switch(Mx(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Um();break;case 3:Wu(),ur(ns),ur(wi),Yx();break;case 5:Jx(w);break;case 4:Wu();break;case 13:ur(Er);break;case 19:ur(Er);break;case 10:Ux(w.type._context);break;case 22:case 23:jw()}m=m.return}if(oi=a,Qr=a=ml(a.current,null),di=ws=c,ni=0,ap=null,Sw=hg=Ec=0,ss=lp=null,wc!==null){for(c=0;c<wc.length;c++)if(m=wc[c],w=m.interleaved,w!==null){m.interleaved=null;var N=w.next,A=m.pending;if(A!==null){var Z=A.next;A.next=N,w.next=Z}m.pending=w}wc=null}return a}function Yk(a,c){do{var m=Qr;try{if(Vx(),rg.current=ag,ig){for(var w=Ir.memoizedState;w!==null;){var N=w.queue;N!==null&&(N.pending=null),w=w.next}ig=!1}if(Sc=0,si=ti=Ir=null,tp=!1,np=0,_w.current=null,m===null||m.return===null){ni=1,ap=c,Qr=null;break}e:{var A=a,Z=m.return,ge=m,Se=c;if(c=di,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Pt=Sk(Z);if(Pt!==null){Pt.flags&=-257,Ek(Pt,Z,ge,A,c),Pt.mode&1&&_k(A,He,c),c=Pt,Se=He;var Bt=c.updateQueue;if(Bt===null){var Vt=new Set;Vt.add(Se),c.updateQueue=Vt}else Bt.add(Se);break e}else{if(!(c&1)){_k(A,He,c),Rw();break e}Se=Error(n(426))}}else if(hr&&ge.mode&1){var $r=Sk(Z);if($r!==null){!($r.flags&65536)&&($r.flags|=256),Ek($r,Z,ge,A,c),zx(Vu(Se,ge));break e}}A=Se=Vu(Se,ge),ni!==4&&(ni=2),lp===null?lp=[A]:lp.push(A),A=Z;do{switch(A.tag){case 3:A.flags|=65536,c&=-c,A.lanes|=c;var Fe=xk(A,Se,c);K1(A,Fe);break e;case 1:ge=Se;var Ce=A.type,$e=A.stateNode;if(!(A.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(dl===null||!dl.has($e)))){A.flags|=65536,c&=-c,A.lanes|=c;var vt=wk(A,ge,c);K1(A,vt);break e}}A=A.return}while(A!==null)}tC(m)}catch(Ht){c=Ht,Qr===m&&m!==null&&(Qr=m=m.return);continue}break}while(!0)}function Xk(){var a=pg.current;return pg.current=ag,a===null?ag:a}function Rw(){(ni===0||ni===3||ni===2)&&(ni=4),oi===null||!(Ec&0xfffffff)&&!(hg&0xfffffff)||hl(oi,di)}function xg(a,c){var m=qn;qn|=2;var w=Xk();(oi!==a||di!==c)&&(Ia=null,Nc(a,c));do try{z$();break}catch(N){Yk(a,N)}while(!0);if(Vx(),qn=m,pg.current=w,Qr!==null)throw Error(n(261));return oi=null,di=0,ni}function z$(){for(;Qr!==null;)eC(Qr)}function W$(){for(;Qr!==null&&!ku();)eC(Qr)}function eC(a){var c=iC(a.alternate,a,ws);a.memoizedProps=a.pendingProps,c===null?tC(a):Qr=c,_w.current=null}function tC(a){var c=a;do{var m=c.alternate;if(a=c.return,c.flags&32768){if(m=F$(m,c),m!==null){m.flags&=32767,Qr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ni=6,Qr=null;return}}else if(m=P$(m,c,ws),m!==null){Qr=m;return}if(c=c.sibling,c!==null){Qr=c;return}Qr=c=a}while(c!==null);ni===0&&(ni=5)}function kc(a,c,m){var w=Mn,N=Gs.transition;try{Gs.transition=null,Mn=1,V$(a,c,m,w)}finally{Gs.transition=N,Mn=w}return null}function V$(a,c,m,w){do Qu();while(fl!==null);if(qn&6)throw Error(n(327));m=a.finishedWork;var N=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var A=m.lanes|m.childLanes;if(mx(a,A),a===oi&&(Qr=oi=null,di=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||gg||(gg=!0,sC(Xa,function(){return Qu(),null})),A=(m.flags&15990)!==0,m.subtreeFlags&15990||A){A=Gs.transition,Gs.transition=null;var Z=Mn;Mn=1;var ge=qn;qn|=4,_w.current=null,L$(a,m),Uk(m,a),u$(Rx),Ge=!!jx,Rx=jx=null,a.current=m,M$(m),kf(),qn=ge,Mn=Z,Gs.transition=A}else a.current=m;if(gg&&(gg=!1,fl=a,yg=N),A=a.pendingLanes,A===0&&(dl=null),jf(m.stateNode),os(a,lr()),c!==null)for(w=a.onRecoverableError,m=0;m<c.length;m++)N=c[m],w(N.value,{componentStack:N.stack,digest:N.digest});if(mg)throw mg=!1,a=Iw,Iw=null,a;return yg&1&&a.tag!==0&&Qu(),A=a.pendingLanes,A&1?a===Nw?cp++:(cp=0,Nw=a):cp=0,al(),null}function Qu(){if(fl!==null){var a=Pm(yg),c=Gs.transition,m=Mn;try{if(Gs.transition=null,Mn=16>a?16:a,fl===null)var w=!1;else{if(a=fl,fl=null,yg=0,qn&6)throw Error(n(331));var N=qn;for(qn|=4,Mt=a.current;Mt!==null;){var A=Mt,Z=A.child;if(Mt.flags&16){var ge=A.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for(Mt=He;Mt!==null;){var ht=Mt;switch(ht.tag){case 0:case 11:case 15:op(8,ht,A)}var gt=ht.child;if(gt!==null)gt.return=ht,Mt=gt;else for(;Mt!==null;){ht=Mt;var ft=ht.sibling,Pt=ht.return;if($k(ht),ht===He){Mt=null;break}if(ft!==null){ft.return=Pt,Mt=ft;break}Mt=Pt}}}var Bt=A.alternate;if(Bt!==null){var Vt=Bt.child;if(Vt!==null){Bt.child=null;do{var $r=Vt.sibling;Vt.sibling=null,Vt=$r}while(Vt!==null)}}Mt=A}}if(A.subtreeFlags&2064&&Z!==null)Z.return=A,Mt=Z;else e:for(;Mt!==null;){if(A=Mt,A.flags&2048)switch(A.tag){case 0:case 11:case 15:op(9,A,A.return)}var Fe=A.sibling;if(Fe!==null){Fe.return=A.return,Mt=Fe;break e}Mt=A.return}}var Ce=a.current;for(Mt=Ce;Mt!==null;){Z=Mt;var $e=Z.child;if(Z.subtreeFlags&2064&&$e!==null)$e.return=Z,Mt=$e;else e:for(Z=Ce;Mt!==null;){if(ge=Mt,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:fg(9,ge)}}catch(Ht){Tr(ge,ge.return,Ht)}if(ge===Z){Mt=null;break e}var vt=ge.sibling;if(vt!==null){vt.return=ge.return,Mt=vt;break e}Mt=ge.return}}if(qn=N,al(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(el,a)}catch{}w=!0}return w}finally{Mn=m,Gs.transition=c}}return!1}function nC(a,c,m){c=Vu(m,c),c=xk(a,c,1),a=cl(a,c,1),c=$i(),a!==null&&(mc(a,1,c),os(a,c))}function Tr(a,c,m){if(a.tag===3)nC(a,a,m);else for(;c!==null;){if(c.tag===3){nC(c,a,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(dl===null||!dl.has(w))){a=Vu(m,a),a=wk(c,a,1),c=cl(c,a,1),a=$i(),c!==null&&(mc(c,1,a),os(c,a));break}}c=c.return}}function U$(a,c,m){var w=a.pingCache;w!==null&&w.delete(c),c=$i(),a.pingedLanes|=a.suspendedLanes&m,oi===a&&(di&m)===m&&(ni===4||ni===3&&(di&0x7c00000)===di&&500>lr()-Ew?Nc(a,0):Sw|=m),os(a,c)}function rC(a,c){c===0&&(a.mode&1?(c=tl,tl<<=1,!(tl&0x7c00000)&&(tl=4194304)):c=1);var m=$i();a=_a(a,c),a!==null&&(mc(a,c,m),os(a,m))}function H$(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),rC(a,m)}function K$(a,c){var m=0;switch(a.tag){case 13:var w=a.stateNode,N=a.memoizedState;N!==null&&(m=N.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),rC(a,m)}var iC;iC=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||ns.current)is=!0;else{if(!(a.lanes&m)&&!(c.flags&128))return is=!1,A$(a,c,m);is=!!(a.flags&131072)}else is=!1,hr&&c.flags&1048576&&D1(c,Gm,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;ug(a,c),a=c.pendingProps;var N=Fu(c,wi.current);zu(c,m),N=tw(null,c,w,a,N,m);var A=nw();return c.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,rs(w)?(A=!0,Hm(c)):A=!1,c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,Qx(c),N.updater=lg,c.stateNode=N,N._reactInternals=c,lw(c,w,a,m),c=fw(null,c,w,!0,A,m)):(c.tag=0,hr&&A&&Lx(c),Mi(null,c,N,m),c=c.child),c;case 16:w=c.elementType;e:{switch(ug(a,c),a=c.pendingProps,N=w._init,w=N(w._payload),c.type=w,N=c.tag=G$(w),a=go(w,a),N){case 0:c=dw(null,c,w,a,m);break e;case 1:c=jk(null,c,w,a,m);break e;case 11:c=Ik(null,c,w,a,m);break e;case 14:c=Nk(null,c,w,go(w.type,a),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,N=c.pendingProps,N=c.elementType===w?N:go(w,N),dw(a,c,w,N,m);case 1:return w=c.type,N=c.pendingProps,N=c.elementType===w?N:go(w,N),jk(a,c,w,N,m);case 3:e:{if(Rk(c),a===null)throw Error(n(387));w=c.pendingProps,A=c.memoizedState,N=A.element,H1(a,c),tg(c,w,null,m);var Z=c.memoizedState;if(w=Z.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){N=Vu(Error(n(423)),c),c=Ok(a,c,w,m,N);break e}else if(w!==N){N=Vu(Error(n(424)),c),c=Ok(a,c,w,m,N);break e}else for(xs=il(c.stateNode.containerInfo.firstChild),vs=c,hr=!0,mo=null,m=V1(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Mu(),w===N){c=Ea(a,c,m);break e}Mi(a,c,w,m)}c=c.child}return c;case 5:return G1(c),a===null&&Bx(c),w=c.type,N=c.pendingProps,A=a!==null?a.memoizedProps:null,Z=N.children,Ox(w,N)?Z=null:A!==null&&Ox(w,A)&&(c.flags|=32),Tk(a,c),Mi(a,c,Z,m),c.child;case 6:return a===null&&Bx(c),null;case 13:return qk(a,c,m);case 4:return Gx(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=$u(c,null,w,m):Mi(a,c,w,m),c.child;case 11:return w=c.type,N=c.pendingProps,N=c.elementType===w?N:go(w,N),Ik(a,c,w,N,m);case 7:return Mi(a,c,c.pendingProps,m),c.child;case 8:return Mi(a,c,c.pendingProps.children,m),c.child;case 12:return Mi(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,N=c.pendingProps,A=c.memoizedProps,Z=N.value,tr(Ym,w._currentValue),w._currentValue=Z,A!==null)if(ho(A.value,Z)){if(A.children===N.children&&!ns.current){c=Ea(a,c,m);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var ge=A.dependencies;if(ge!==null){Z=A.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(A.tag===1){Se=Sa(-1,m&-m),Se.tag=2;var He=A.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}A.lanes|=m,Se=A.alternate,Se!==null&&(Se.lanes|=m),Hx(A.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(A.tag===10)Z=A.type===c.type?null:A.child;else if(A.tag===18){if(Z=A.return,Z===null)throw Error(n(341));Z.lanes|=m,ge=Z.alternate,ge!==null&&(ge.lanes|=m),Hx(Z,m,c),Z=A.sibling}else Z=A.child;if(Z!==null)Z.return=A;else for(Z=A;Z!==null;){if(Z===c){Z=null;break}if(A=Z.sibling,A!==null){A.return=Z.return,Z=A;break}Z=Z.return}A=Z}Mi(a,c,N.children,m),c=c.child}return c;case 9:return N=c.type,w=c.pendingProps.children,zu(c,m),N=Ks(N),w=w(N),c.flags|=1,Mi(a,c,w,m),c.child;case 14:return w=c.type,N=go(w,c.pendingProps),N=go(w.type,N),Nk(a,c,w,N,m);case 15:return kk(a,c,c.type,c.pendingProps,m);case 17:return w=c.type,N=c.pendingProps,N=c.elementType===w?N:go(w,N),ug(a,c),c.tag=1,rs(w)?(a=!0,Hm(c)):a=!1,zu(c,m),bk(c,w,N),lw(c,w,N,m),fw(null,c,w,!0,a,m);case 19:return Pk(a,c,m);case 22:return Ck(a,c,m)}throw Error(n(156,c.tag))};function sC(a,c){return Nu(a,c)}function Q$(a,c,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(a,c,m,w){return new Q$(a,c,m,w)}function Ow(a){return a=a.prototype,!(!a||!a.isReactComponent)}function G$(a){if(typeof a=="function")return Ow(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===X)return 14}return 2}function ml(a,c){var m=a.alternate;return m===null?(m=Js(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&0xe00000,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function wg(a,c,m,w,N,A){var Z=2;if(w=a,typeof a=="function")Ow(a)&&(Z=1);else if(typeof a=="string")Z=5;else e:switch(a){case W:return Cc(m.children,N,A,c);case P:Z=8,N|=8;break;case O:return a=Js(12,m,c,N|2),a.elementType=O,a.lanes=A,a;case U:return a=Js(13,m,c,N),a.elementType=U,a.lanes=A,a;case M:return a=Js(19,m,c,N),a.elementType=M,a.lanes=A,a;case le:return _g(m,N,A,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:Z=10;break e;case F:Z=9;break e;case V:Z=11;break e;case X:Z=14;break e;case J:Z=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Js(Z,m,c,N),c.elementType=a,c.type=w,c.lanes=A,c}function Cc(a,c,m,w){return a=Js(7,a,w,c),a.lanes=m,a}function _g(a,c,m,w){return a=Js(22,a,w,c),a.elementType=le,a.lanes=m,a.stateNode={isHidden:!1},a}function qw(a,c,m){return a=Js(6,a,null,c),a.lanes=m,a}function Aw(a,c,m){return c=Js(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function J$(a,c,m,w,N){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pf(0),this.expirationTimes=Pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pf(0),this.identifierPrefix=w,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function Pw(a,c,m,w,N,A,Z,ge,Se){return a=new J$(a,c,m,ge,Se),c===1?(c=1,A===!0&&(c|=8)):c=0,A=Js(3,null,null,c),a.current=A,A.stateNode=a,A.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qx(A),a}function Z$(a,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:w==null?null:""+w,children:a,containerInfo:c,implementation:m}}function oC(a){if(!a)return ol;a=a._reactInternals;e:{if(Ws(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(rs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(rs(m))return A1(a,m,c)}return c}function aC(a,c,m,w,N,A,Z,ge,Se){return a=Pw(m,w,!0,a,N,A,Z,ge,Se),a.context=oC(null),m=a.current,w=$i(),N=pl(m),A=Sa(w,N),A.callback=c??null,cl(m,A,N),a.current.lanes=N,mc(a,N,w),os(a,w),a}function Sg(a,c,m,w){var N=c.current,A=$i(),Z=pl(N);return m=oC(m),c.context===null?c.context=m:c.pendingContext=m,c=Sa(A,Z),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=cl(N,c,Z),a!==null&&(vo(a,N,Z,A),eg(a,N,Z)),Z}function Eg(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function lC(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function Fw(a,c){lC(a,c),(a=a.alternate)&&lC(a,c)}var cC=typeof reportError=="function"?reportError:function(a){console.error(a)};function Dw(a){this._internalRoot=a}Ig.prototype.render=Dw.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));Sg(a,c,null,null)},Ig.prototype.unmount=Dw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Ic(function(){Sg(null,a,null,null)}),c[ba]=null}};function Ig(a){this._internalRoot=a}Ig.prototype.unstable_scheduleHydration=function(a){if(a){var c=gc();a={blockedOn:null,target:a,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,a),m===0&&Be(a)}};function Lw(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Ng(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function uC(){}function Y$(a,c,m,w,N){if(N){if(typeof w=="function"){var A=w;w=function(){var He=Eg(Z);A.call(He)}}var Z=aC(c,w,a,0,null,!1,!1,"",uC);return a._reactRootContainer=Z,a[ba]=Z.current,Kf(a.nodeType===8?a.parentNode:a),Ic(),Z}for(;N=a.lastChild;)a.removeChild(N);if(typeof w=="function"){var ge=w;w=function(){var He=Eg(Se);ge.call(He)}}var Se=Pw(a,0,!1,null,null,!1,!1,"",uC);return a._reactRootContainer=Se,a[ba]=Se.current,Kf(a.nodeType===8?a.parentNode:a),Ic(function(){Sg(c,Se,m,w)}),Se}function kg(a,c,m,w,N){var A=m._reactRootContainer;if(A){var Z=A;if(typeof N=="function"){var ge=N;N=function(){var Se=Eg(Z);ge.call(Se)}}Sg(c,Z,a,N)}else Z=Y$(m,c,a,N,w);return Eg(Z)}Df=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Li(c.pendingLanes);m!==0&&(Ff(c,m|1),os(c,lr()),!(qn&6)&&(Ku=lr()+500,al()))}break;case 13:Ic(function(){var w=_a(a,1);if(w!==null){var N=$i();vo(w,a,1,N)}}),Fw(a,1)}},he=function(a){if(a.tag===13){var c=_a(a,0x8000000);if(c!==null){var m=$i();vo(c,a,0x8000000,m)}Fw(a,0x8000000)}},Lf=function(a){if(a.tag===13){var c=pl(a),m=_a(a,c);if(m!==null){var w=$i();vo(m,a,c,w)}Fw(a,c)}},gc=function(){return Mn},Mf=function(a,c){var m=Mn;try{return Mn=a,c()}finally{Mn=m}},cc=function(a,c,m){switch(c){case"input":if(sn(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==a&&w.form===a.form){var N=Vm(w);if(!N)throw Error(n(90));Ve(w),sn(w,N)}}}break;case"textarea":Me(a,m);break;case"select":c=m.value,c!=null&&Ae(a,!!m.multiple,c,!1)}},vu=Tw,xu=Ic;var X$={usingClientEntryPoint:!1,Events:[Jf,Au,Vm,fn,bu,Tw]},up={findFiberByHostInstance:yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eB={bundleType:up.bundleType,version:up.version,rendererPackageName:up.rendererPackageName,rendererConfig:up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Eu(a),a===null?null:a.stateNode},findFiberByHostInstance:up.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{el=Cg.inject(eB),ts=Cg}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X$,as.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lw(c))throw Error(n(200));return Z$(a,c,null,m)},as.createRoot=function(a,c){if(!Lw(a))throw Error(n(299));var m=!1,w="",N=cC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(N=c.onRecoverableError)),c=Pw(a,1,!1,null,null,m,!1,w,N),a[ba]=c.current,Kf(a.nodeType===8?a.parentNode:a),new Dw(c)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Eu(c),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return Ic(a)},as.hydrate=function(a,c,m){if(!Ng(c))throw Error(n(200));return kg(null,a,c,!0,m)},as.hydrateRoot=function(a,c,m){if(!Lw(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,N=!1,A="",Z=cC;if(m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError)),c=aC(c,null,a,1,m??null,N,!1,A,Z),a[ba]=c.current,Kf(a),w)for(a=0;a<w.length;a++)m=w[a],N=m._getVersion,N=N(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,N]:c.mutableSourceEagerHydrationData.push(m,N);return new Ig(c)},as.render=function(a,c,m){if(!Ng(c))throw Error(n(200));return kg(null,a,c,!1,m)},as.unmountComponentAtNode=function(a){if(!Ng(a))throw Error(n(40));return a._reactRootContainer?(Ic(function(){kg(null,null,a,!1,function(){a._reactRootContainer=null,a[ba]=null})}),!0):!1},as.unstable_batchedUpdates=Tw,as.unstable_renderSubtreeIntoContainer=function(a,c,m,w){if(!Ng(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return kg(a,c,m,!1,w)},as.version="18.3.1-next-f1338f8080-20240426",as}var BC;function Z3(){if(BC)return Xw.exports;BC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xw.exports=P4(),Xw.exports}var Jh=Z3();const F4="Error preloading route! ";function D4(t,e){const n=Mo(),[r,i]=H.useState(!1),s=H.useRef(!1),o=c4(e),{activeProps:l=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:f,to:p,preload:h,preloadDelay:b,hashScrollIntoView:x,replace:_,startTransition:E,resetScroll:k,viewTransition:j,children:C,target:R,disabled:q,style:L,className:$,onClick:W,onFocus:P,onMouseEnter:O,onMouseLeave:z,onTouchStart:F,ignoreBlocker:V,...U}=t,{params:M,search:X,hash:J,state:le,mask:ie,reloadDocument:ne,...oe}=U,te=H.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ue=Ki({select:Ne=>Ne.location.search,structuralSharing:!0});t={from:Ul({strict:!1,select:Ne=>Ne.pathname}),...t};const ye=H.useMemo(()=>n.buildLocation(t),[n,t,ue]),we=H.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ie=b??n.options.defaultPreloadDelay??0,ze=Ki({select:Ne=>{if(f?.exact){if(!d4(Ne.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=ib(Ne.location.pathname,n.basepath).split("/");if(!ib(ye.pathname,n.basepath).split("/").every((Me,ut)=>Me===Ae[ut]))return!1}return(f?.includeSearch??!0)&&!_d(Ne.location.search,ye.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?Ne.location.hash===ye.hash:!0}}),Re=H.useCallback(()=>{n.preloadRoute(t).catch(Ne=>{console.warn(Ne),console.warn(F4)})},[t,n]),De=H.useCallback(Ne=>{Ne?.isIntersecting&&Re()},[Re]);if(l4(o,De,{rootMargin:"100px"},{disabled:!!q||we!=="viewport"}),Np(()=>{s.current||!q&&we==="render"&&(Re(),s.current=!0)},[q,Re,we]),te==="external")return{...oe,ref:o,type:te,href:p,...C&&{children:C},...R&&{target:R},...q&&{disabled:q},...L&&{style:L},...$&&{className:$},...W&&{onClick:W},...P&&{onFocus:P},...O&&{onMouseEnter:O},...z&&{onMouseLeave:z},...F&&{onTouchStart:F}};const Je=Ne=>{if(!q&&!M4(Ne)&&!Ne.defaultPrevented&&(!R||R==="_self")&&Ne.button===0){Ne.preventDefault(),Jh.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:_,resetScroll:k,hashScrollIntoView:x,startTransition:E,viewTransition:j,ignoreBlocker:V})}},Xe=Ne=>{q||we&&Re()},Ve=Xe,ct=Ne=>{if(q)return;const Ae=Ne.target||{};if(we){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,Re()},Ie)}},_t=Ne=>{if(q)return;const Ae=Ne.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},Rt=Ne=>Ae=>{var Ue;(Ue=Ae.persist)==null||Ue.call(Ae),Ne.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Ut=ze?$c(l,{})??{}:{},sn=ze?{}:$c(u,{}),xe=[$,Ut.className,sn.className].filter(Boolean).join(" "),be={...L,...Ut.style,...sn.style};return{...oe,...Ut,...sn,href:q?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:Rt([W,Je]),onFocus:Rt([P,Xe]),onMouseEnter:Rt([O,ct]),onMouseLeave:Rt([z,_t]),onTouchStart:Rt([F,Ve]),disabled:!!q,target:R,...Object.keys(be).length&&{style:be},...xe&&{className:xe},...q&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function Y3(t){return H.forwardRef(function(n,r){return d.jsx(L4,{...n,_asChild:t,ref:r})})}const L4=H.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=D4(r,e),l=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,H.createElement(n||"a",{...o,ref:s},l)});function M4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $4(){const t=Mo(),e=H.useRef({router:t,mounted:!1}),n=Ki({select:({isLoading:h})=>h}),[r,i]=H.useState(!1),s=Ki({select:h=>h.matches.some(b=>b.status==="pending"),structuralSharing:!0}),o=Jw(n),l=n||r||s,u=Jw(l),f=n||s,p=Jw(f);return t.isServer||(t.startReactTransition=h=>{i(!0),H.startTransition(()=>{h(),i(!1)})}),H.useEffect(()=>{const h=t.history.subscribe(t.load),b=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Bc(t.latestLocation.href)!==Bc(b.href)&&t.commitLocation({...b,replace:!0}),()=>{h()}},[t,t.history]),Np(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Np(()=>{if(o&&!n){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onLoad",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),Np(()=>{if(p&&!f){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[f,p,t]),Np(()=>{if(u&&!l){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;if(t.emit({type:"onResolved",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(E=>({...E,status:"idle",resolvedLocation:E.location})),typeof document<"u"&&document.querySelector){const E=t.state.location.state.__hashScrollIntoViewOptions??!0;if(E&&t.state.location.hash!==""){const k=document.getElementById(t.state.location.hash);k&&k.scrollIntoView(E)}}}},[l,u,t]),null}function B4(){const t=Mo(),e=t.options.defaultPendingComponent?d.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?hy:H.Suspense,r=d.jsxs(n,{fallback:e,children:[d.jsx($4,{}),d.jsx(z4,{})]});return t.options.InnerWrap?d.jsx(t.options.InnerWrap,{children:r}):r}function z4(){const t=Ki({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Ki({select:n=>n.loadedAt});return d.jsx(pv.Provider,{value:t,children:d.jsx(gI,{getResetKey:()=>e,errorComponent:fv,onCatch:n=>{n.message||n.toString()},children:t?d.jsx(J3,{matchId:t}):null})})}function W4(){const t=Mo();return Ki({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),H.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function V4({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=W3(),i=d.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?d.jsx(t.options.Wrap,{children:i}):i}function U4({router:t,...e}){return d.jsx(V4,{router:t,...e,children:d.jsx(B4,{})})}const H4=typeof window<"u"?H.useLayoutEffect:H.useEffect,n_="window",zC="___";let r_=new WeakSet;const K4=typeof window<"u"&&window.sessionStorage,_o=K4?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{_o.state=$c(n,_o.state),window.sessionStorage.setItem(t,JSON.stringify(_o.state))}}})():void 0,Q4=t=>t.state.key||t.href;function G4(t){const e=Mo();H4(()=>{const n=t?.getKey||Q4,{history:r}=window;r.scrollRestoration="manual";const i=l=>{if(r_.has(l.target))return;r_.add(l.target);let u="";if(l.target===document||l.target===window)u=n_;else{const f=l.target.getAttribute("data-scroll-restoration-id");f?u=`[data-scroll-restoration-id="${f}"]`:u=Z4(l.target)}_o.state.next[u]||_o.set(f=>({...f,next:{...f.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",l=>{if(l.hrefChanged){const u=n(l.fromLocation);for(const f in _o.state.next){const p=_o.state.next[f];if(f===n_)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(f){const h=document.querySelector(f);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}_o.set(h=>{const b={...h.next};return delete b[f],{...h,next:b,cached:{...h.cached,[[u,f].join(zC)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",l=>{if(l.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(l.toLocation);let f=!1;for(const p in _o.state.cached){const h=_o.state.cached[p],[b,x]=p.split(zC);if(b===u){if(x===n_)f=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}f||window.scrollTo(0,0),_o.set(p=>({...p,next:{}})),r_=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function J4(t){return G4(t),null}function Z4(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function fr(t){return Ul({...t,select:e=>t.select?t.select(e.context):e.context})}let Y4={data:""},X4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Y4,ez=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tz=/\/\*[^]*?\*\/|  +/g,WC=/\n+/g,Tl=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Tl(o,s):s+"{"+Tl(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Tl(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Tl.p?Tl.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Na={},X3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+X3(t[n]);return e}return t},nz=(t,e,n,r,i)=>{let s=X3(t),o=Na[s]||(Na[s]=(u=>{let f=0,p=11;for(;f<u.length;)p=101*p+u.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Na[o]){let u=s!==t?t:(f=>{let p,h,b=[{}];for(;p=ez.exec(f.replace(tz,""));)p[4]?b.shift():p[3]?(h=p[3].replace(WC," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][p[1]]=p[2].replace(WC," ").trim();return b[0]})(t);Na[o]=Tl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&Na.g?Na.g:null;return n&&(Na.g=Na[o]),((u,f,p,h)=>{h?f.data=f.data.replace(h,u):f.data.indexOf(u)===-1&&(f.data=p?u+f.data:f.data+u)})(Na[o],e,r,l),o},rz=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Tl(l,""):l===!1?"":l}return r+i+(o??"")},"");function hv(t){let e=this||{},n=t.call?t(e.p):t;return nz(n.unshift?n.raw?rz(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,X4(e.target),e.g,e.o,e.k)}let eA,GS,JS;hv.bind({g:1});let za=hv.bind({k:1});function iz(t,e,n,r){Tl.p=e,eA=t,GS=n,JS=r}function rc(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),u=l.className||i.className;n.p=Object.assign({theme:GS&&GS()},l),n.o=/ *go\d+/.test(u),l.className=hv.apply(n,r)+(u?" "+u:"");let f=t;return t[0]&&(f=l.as||t,delete l.as),JS&&f[0]&&JS(l),eA(f,l)}return i}}var sz=t=>typeof t=="function",ob=(t,e)=>sz(t)?t(e):t,oz=(()=>{let t=0;return()=>(++t).toString()})(),tA=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),az=20,nA=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,az)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return nA(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},my=[],gy={toasts:[],pausedAt:void 0},du=t=>{gy=nA(gy,t),my.forEach(e=>{e(gy)})},lz={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},cz=(t={})=>{let[e,n]=H.useState(gy);H.useEffect(()=>(my.push(n),()=>{let i=my.indexOf(n);i>-1&&my.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||lz[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:r}},uz=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||oz()}),Zh=t=>(e,n)=>{let r=uz(e,t,n);return du({type:2,toast:r}),r.id},Rn=(t,e)=>Zh("blank")(t,e);Rn.error=Zh("error");Rn.success=Zh("success");Rn.loading=Zh("loading");Rn.custom=Zh("custom");Rn.dismiss=t=>{du({type:3,toastId:t})};Rn.remove=t=>du({type:4,toastId:t});Rn.promise=(t,e,n)=>{let r=Rn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?ob(e.success,i):void 0;return s?Rn.success(s,{id:r,...n,...n?.success}):Rn.dismiss(r),i}).catch(i=>{let s=e.error?ob(e.error,i):void 0;s?Rn.error(s,{id:r,...n,...n?.error}):Rn.dismiss(r)}),t};var dz=(t,e)=>{du({type:1,toast:{id:t,height:e}})},fz=()=>{du({type:5,time:Date.now()})},Hp=new Map,pz=1e3,hz=(t,e=pz)=>{if(Hp.has(t))return;let n=setTimeout(()=>{Hp.delete(t),du({type:4,toastId:t})},e);Hp.set(t,n)},mz=t=>{let{toasts:e,pausedAt:n}=cz(t);H.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(u<0){l.visible&&Rn.dismiss(l.id);return}return setTimeout(()=>Rn.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=H.useCallback(()=>{n&&du({type:6,time:Date.now()})},[n]),i=H.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:f}=o||{},p=e.filter(x=>(x.position||f)===(s.position||f)&&x.height),h=p.findIndex(x=>x.id===s.id),b=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...l?[b+1]:[0,b]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return H.useEffect(()=>{e.forEach(s=>{if(s.dismissed)hz(s.id,s.removeDelay);else{let o=Hp.get(s.id);o&&(clearTimeout(o),Hp.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:dz,startPause:fz,endPause:r,calculateOffset:i}}},gz=za`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yz=za`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bz=za`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,vz=rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yz} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${bz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,xz=za`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wz=rc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${xz} 1s linear infinite;
`,_z=za`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Sz=za`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ez=rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_z} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Sz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Iz=rc("div")`
  position: absolute;
`,Nz=rc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kz=za`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Cz=rc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Tz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?H.createElement(Cz,null,e):e:n==="blank"?null:H.createElement(Nz,null,H.createElement(wz,{...r}),n!=="loading"&&H.createElement(Iz,null,n==="error"?H.createElement(vz,{...r}):H.createElement(Ez,{...r})))},jz=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Rz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Oz="0%{opacity:0;} 100%{opacity:1;}",qz="0%{opacity:1;} 100%{opacity:0;}",Az=rc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Pz=rc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Fz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=tA()?[Oz,qz]:[jz(n),Rz(n)];return{animation:e?`${za(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${za(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Dz=H.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?Fz(t.position||e||"top-center",t.visible):{opacity:0},s=H.createElement(Tz,{toast:t}),o=H.createElement(Pz,{...t.ariaProps},ob(t.message,t));return H.createElement(Az,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):H.createElement(H.Fragment,null,s,o))});iz(H.createElement);var Lz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=H.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return H.createElement("div",{ref:s,className:e,style:n},i)},Mz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:tA()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},$z=hv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Pg=16,Bz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=mz(n);return H.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Pg,left:Pg,right:Pg,bottom:Pg,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(f=>{let p=f.position||e,h=u.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),b=Mz(p,h);return H.createElement(Lz,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?$z:"",style:b},f.type==="custom"?ob(f.message,f):i?i(f):H.createElement(Dz,{toast:f,position:p}))}))},zz=Rn;class fu extends Error{}class Wz extends fu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Vz extends fu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Uz extends fu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class dd extends fu{}class rA extends fu{constructor(e){super(`Invalid unit ${e}`)}}class Ni extends fu{}class yl extends fu{constructor(){super("Zone is an abstract class")}}const jt="numeric",Ao="short",Rs="long",ab={year:jt,month:jt,day:jt},iA={year:jt,month:Ao,day:jt},Hz={year:jt,month:Ao,day:jt,weekday:Ao},sA={year:jt,month:Rs,day:jt},oA={year:jt,month:Rs,day:jt,weekday:Rs},aA={hour:jt,minute:jt},lA={hour:jt,minute:jt,second:jt},cA={hour:jt,minute:jt,second:jt,timeZoneName:Ao},uA={hour:jt,minute:jt,second:jt,timeZoneName:Rs},dA={hour:jt,minute:jt,hourCycle:"h23"},fA={hour:jt,minute:jt,second:jt,hourCycle:"h23"},pA={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:Ao},hA={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:Rs},mA={year:jt,month:jt,day:jt,hour:jt,minute:jt},gA={year:jt,month:jt,day:jt,hour:jt,minute:jt,second:jt},yA={year:jt,month:Ao,day:jt,hour:jt,minute:jt},bA={year:jt,month:Ao,day:jt,hour:jt,minute:jt,second:jt},Kz={year:jt,month:Ao,day:jt,weekday:Ao,hour:jt,minute:jt},vA={year:jt,month:Rs,day:jt,hour:jt,minute:jt,timeZoneName:Ao},xA={year:jt,month:Rs,day:jt,hour:jt,minute:jt,second:jt,timeZoneName:Ao},wA={year:jt,month:Rs,day:jt,weekday:Rs,hour:jt,minute:jt,timeZoneName:Rs},_A={year:jt,month:Rs,day:jt,weekday:Rs,hour:jt,minute:jt,second:jt,timeZoneName:Rs};class Yh{get type(){throw new yl}get name(){throw new yl}get ianaName(){return this.name}get isUniversal(){throw new yl}offsetName(e,n){throw new yl}formatOffset(e,n){throw new yl}offset(e){throw new yl}equals(e){throw new yl}get isValid(){throw new yl}}let i_=null;class mv extends Yh{static get instance(){return i_===null&&(i_=new mv),i_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return RA(e,n,r)}formatOffset(e,n){return Kp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let yy={};function Qz(t){return yy[t]||(yy[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),yy[t]}const Gz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Jz(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,l,u,f,p]=r;return[o,i,s,l,u,f,p]}function Zz(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],l=Gz[s];s==="era"?r[l]=o:hn(l)||(r[l]=parseInt(o,10))}return r}let Fg={};class Wa extends Yh{static create(e){return Fg[e]||(Fg[e]=new Wa(e)),Fg[e]}static resetCache(){Fg={},yy={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Wa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return RA(e,n,r,this.name)}formatOffset(e,n){return Kp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=Qz(this.name);let[i,s,o,l,u,f,p]=r.formatToParts?Zz(r,n):Jz(r,n);l==="BC"&&(i=-Math.abs(i)+1);const b=yv({year:i,month:s,day:o,hour:u===24?0:u,minute:f,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(b-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let VC={};function Yz(t,e={}){const n=JSON.stringify([t,e]);let r=VC[n];return r||(r=new Intl.ListFormat(t,e),VC[n]=r),r}let ZS={};function YS(t,e={}){const n=JSON.stringify([t,e]);let r=ZS[n];return r||(r=new Intl.DateTimeFormat(t,e),ZS[n]=r),r}let XS={};function Xz(t,e={}){const n=JSON.stringify([t,e]);let r=XS[n];return r||(r=new Intl.NumberFormat(t,e),XS[n]=r),r}let eE={};function eW(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=eE[i];return s||(s=new Intl.RelativeTimeFormat(t,e),eE[i]=s),s}let Cp=null;function tW(){return Cp||(Cp=new Intl.DateTimeFormat().resolvedOptions().locale,Cp)}let UC={};function nW(t){let e=UC[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,UC[t]=e}return e}function rW(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=YS(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=YS(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function iW(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function sW(t){const e=[];for(let n=1;n<=12;n++){const r=pn.utc(2009,n,1);e.push(t(r))}return e}function oW(t){const e=[];for(let n=1;n<=7;n++){const r=pn.utc(2016,11,13+n);e.push(t(r))}return e}function Dg(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function aW(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class lW{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Xz(e,l)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):wI(e,3);return Gr(n,this.padTo)}}}class cW{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Wa.create(l).valid?(i=l,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=YS(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class uW{constructor(e,n,r){this.opts={style:"long",...r},!n&&TA()&&(this.rtf=eW(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):qW(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const dW={firstDay:1,minimalDays:4,weekend:[6,7]};class Vn{static fromOpts(e){return Vn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Rr.defaultLocale,l=o||(s?"en-US":tW()),u=n||Rr.defaultNumberingSystem,f=r||Rr.defaultOutputCalendar,p=tE(i)||Rr.defaultWeekSettings;return new Vn(l,u,f,p,o)}static resetCache(){Cp=null,ZS={},XS={},eE={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Vn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,l,u]=rW(e);this.locale=o,this.numberingSystem=n||l||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=iW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=aW(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Vn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,tE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Dg(this,e,AA,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=sW(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Dg(this,e,DA,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=oW(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Dg(this,void 0,()=>LA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[pn.utc(2016,11,13,9),pn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Dg(this,e,MA,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[pn.utc(-40,1,1),pn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new lW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new cW(e,this.intl,n)}relFormatter(e={}){return new uW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Yz(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:jA()?nW(this.locale):dW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let s_=null;class Hi extends Yh{static get utcInstance(){return s_===null&&(s_=new Hi(0)),s_}static instance(e){return e===0?Hi.utcInstance:new Hi(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Hi(bv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Kp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Kp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Kp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class fW extends Yh{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function jl(t,e){if(hn(t)||t===null)return e;if(t instanceof Yh)return t;if(bW(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?mv.instance:n==="utc"||n==="gmt"?Hi.utcInstance:Hi.parseSpecifier(n)||Wa.create(t)}else return Ll(t)?Hi.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new fW(t)}const yI={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},HC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pW=yI.hanidec.replace(/[\[|\]]/g,"").split("");function hW(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(yI.hanidec)!==-1)e+=pW.indexOf(t[n]);else for(const i in HC){const[s,o]=HC[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let ad={};function mW(){ad={}}function xo({numberingSystem:t},e=""){const n=t||"latn";return ad[n]||(ad[n]={}),ad[n][e]||(ad[n][e]=new RegExp(`${yI[n]}${e}`)),ad[n][e]}let KC=()=>Date.now(),QC="system",GC=null,JC=null,ZC=null,YC=60,XC,eT=null;class Rr{static get now(){return KC}static set now(e){KC=e}static set defaultZone(e){QC=e}static get defaultZone(){return jl(QC,mv.instance)}static get defaultLocale(){return GC}static set defaultLocale(e){GC=e}static get defaultNumberingSystem(){return JC}static set defaultNumberingSystem(e){JC=e}static get defaultOutputCalendar(){return ZC}static set defaultOutputCalendar(e){ZC=e}static get defaultWeekSettings(){return eT}static set defaultWeekSettings(e){eT=tE(e)}static get twoDigitCutoffYear(){return YC}static set twoDigitCutoffYear(e){YC=e%100}static get throwOnInvalid(){return XC}static set throwOnInvalid(e){XC=e}static resetCaches(){Vn.resetCache(),Wa.resetCache(),pn.resetCache(),mW()}}class jo{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const SA=[0,31,59,90,120,151,181,212,243,273,304,334],EA=[0,31,60,91,121,152,182,213,244,274,305,335];function io(t,e){return new jo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function bI(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function IA(t,e,n){return n+(Xh(t)?EA:SA)[e-1]}function NA(t,e){const n=Xh(t)?EA:SA,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function vI(t,e){return(t-e+7)%7+1}function lb(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=IA(r,i,s),l=vI(bI(r,i,s),n);let u=Math.floor((o-l+14-e)/7),f;return u<1?(f=r-1,u=lh(f,e,n)):u>lh(r,e,n)?(f=r+1,u=1):f=r,{weekYear:f,weekNumber:u,weekday:l,...vv(t)}}function tT(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=vI(bI(r,1,e),n),l=Sd(r);let u=i*7+s-o-7+e,f;u<1?(f=r-1,u+=Sd(f)):u>l?(f=r+1,u-=Sd(r)):f=r;const{month:p,day:h}=NA(f,u);return{year:f,month:p,day:h,...vv(t)}}function o_(t){const{year:e,month:n,day:r}=t,i=IA(e,n,r);return{year:e,ordinal:i,...vv(t)}}function nT(t){const{year:e,ordinal:n}=t,{month:r,day:i}=NA(e,n);return{year:e,month:r,day:i,...vv(t)}}function rT(t,e){if(!hn(t.localWeekday)||!hn(t.localWeekNumber)||!hn(t.localWeekYear)){if(!hn(t.weekday)||!hn(t.weekNumber)||!hn(t.weekYear))throw new dd("Cannot mix locale-based week fields with ISO-based week fields");return hn(t.localWeekday)||(t.weekday=t.localWeekday),hn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),hn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function gW(t,e=4,n=1){const r=gv(t.weekYear),i=so(t.weekNumber,1,lh(t.weekYear,e,n)),s=so(t.weekday,1,7);return r?i?s?!1:io("weekday",t.weekday):io("week",t.weekNumber):io("weekYear",t.weekYear)}function yW(t){const e=gv(t.year),n=so(t.ordinal,1,Sd(t.year));return e?n?!1:io("ordinal",t.ordinal):io("year",t.year)}function kA(t){const e=gv(t.year),n=so(t.month,1,12),r=so(t.day,1,cb(t.year,t.month));return e?n?r?!1:io("day",t.day):io("month",t.month):io("year",t.year)}function CA(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=so(e,0,23)||e===24&&n===0&&r===0&&i===0,o=so(n,0,59),l=so(r,0,59),u=so(i,0,999);return s?o?l?u?!1:io("millisecond",i):io("second",r):io("minute",n):io("hour",e)}function hn(t){return typeof t>"u"}function Ll(t){return typeof t=="number"}function gv(t){return typeof t=="number"&&t%1===0}function bW(t){return typeof t=="string"}function vW(t){return Object.prototype.toString.call(t)==="[object Date]"}function TA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function jA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function xW(t){return Array.isArray(t)?t:[t]}function iT(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function wW(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Md(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tE(t){if(t==null)return null;if(typeof t!="object")throw new Ni("Week settings must be an object");if(!so(t.firstDay,1,7)||!so(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!so(e,1,7)))throw new Ni("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function so(t,e,n){return gv(t)&&t>=e&&t<=n}function _W(t,e){return t-e*Math.floor(t/e)}function Gr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Nl(t){if(!(hn(t)||t===null||t===""))return parseInt(t,10)}function Tc(t){if(!(hn(t)||t===null||t===""))return parseFloat(t)}function xI(t){if(!(hn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function wI(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Xh(t){return t%4===0&&(t%100!==0||t%400===0)}function Sd(t){return Xh(t)?366:365}function cb(t,e){const n=_W(e-1,12)+1,r=t+(e-n)/12;return n===2?Xh(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function yv(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function sT(t,e,n){return-vI(bI(t,1,e),n)+e-1}function lh(t,e=4,n=1){const r=sT(t,e,n),i=sT(t+1,e,n);return(Sd(t)-r+i)/7}function nE(t){return t>99?t:t>Rr.twoDigitCutoffYear?1900+t:2e3+t}function RA(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function bv(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function OA(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ni(`Invalid unit value ${t}`);return e}function ub(t,e){const n={};for(const r in t)if(Md(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=OA(i)}return n}function Kp(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Gr(n,2)}:${Gr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Gr(n,2)}${Gr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function vv(t){return wW(t,["hour","minute","second","millisecond"])}const SW=["January","February","March","April","May","June","July","August","September","October","November","December"],qA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EW=["J","F","M","A","M","J","J","A","S","O","N","D"];function AA(t){switch(t){case"narrow":return[...EW];case"short":return[...qA];case"long":return[...SW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const PA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],FA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],IW=["M","T","W","T","F","S","S"];function DA(t){switch(t){case"narrow":return[...IW];case"short":return[...FA];case"long":return[...PA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const LA=["AM","PM"],NW=["Before Christ","Anno Domini"],kW=["BC","AD"],CW=["B","A"];function MA(t){switch(t){case"narrow":return[...CW];case"short":return[...kW];case"long":return[...NW];default:return null}}function TW(t){return LA[t.hour<12?0:1]}function jW(t,e){return DA(e)[t.weekday-1]}function RW(t,e){return AA(e)[t.month-1]}function OW(t,e){return MA(e)[t.year<0?0:1]}function qW(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,f=i[t],p=r?u?f[1]:f[2]||f[1]:u?i[t][0]:t;return o?`${l} ${p} ago`:`in ${l} ${p}`}function oT(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const AW={D:ab,DD:iA,DDD:sA,DDDD:oA,t:aA,tt:lA,ttt:cA,tttt:uA,T:dA,TT:fA,TTT:pA,TTTT:hA,f:mA,ff:yA,fff:vA,ffff:wA,F:gA,FF:bA,FFF:xA,FFFF:_A};class Ci{static create(e,n={}){return new Ci(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||l===n?r+=l:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=l,n=l)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return AW[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Gr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>r?TW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?RW(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),f=(x,_)=>r?jW(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Ci.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?OW(e,x):s({era:x},"era"),b=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return oT(Ci.parseFormat(n),b)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>f=>{const p=r(f);return p?this.num(u.get(p),f.length):f},s=Ci.parseFormat(n),o=s.reduce((u,{literal:f,val:p})=>f?u:u.concat(p),[]),l=e.shiftTo(...o.map(r).filter(u=>u));return oT(s,i(l))}}const $A=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function nf(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function rf(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,l,u]=s(e,i);return[{...n,...o},l||r,u]},[{},null,1]).slice(0,2)}function sf(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function BA(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Nl(e[n+i]);return[r,null,n+i]}}const zA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,PW=`(?:${zA.source}?(?:\\[(${$A.source})\\])?)?`,_I=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,WA=RegExp(`${_I.source}${PW}`),SI=RegExp(`(?:T${WA.source})?`),FW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,DW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,LW=/(\d{4})-?(\d{3})/,MW=BA("weekYear","weekNumber","weekDay"),$W=BA("year","ordinal"),BW=/(\d{4})-(\d\d)-(\d\d)/,VA=RegExp(`${_I.source} ?(?:${zA.source}|(${$A.source}))?`),zW=RegExp(`(?: ${VA.source})?`);function Ed(t,e,n){const r=t[e];return hn(r)?n:Nl(r)}function WW(t,e){return[{year:Ed(t,e),month:Ed(t,e+1,1),day:Ed(t,e+2,1)},null,e+3]}function of(t,e){return[{hours:Ed(t,e,0),minutes:Ed(t,e+1,0),seconds:Ed(t,e+2,0),milliseconds:xI(t[e+3])},null,e+4]}function em(t,e){const n=!t[e]&&!t[e+1],r=bv(t[e+1],t[e+2]),i=n?null:Hi.instance(r);return[{},i,e+3]}function tm(t,e){const n=t[e]?Wa.create(t[e]):null;return[{},n,e+1]}const VW=RegExp(`^T?${_I.source}$`),UW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function HW(t){const[e,n,r,i,s,o,l,u,f]=t,p=e[0]==="-",h=u&&u[0]==="-",b=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:b(Tc(n)),months:b(Tc(r)),weeks:b(Tc(i)),days:b(Tc(s)),hours:b(Tc(o)),minutes:b(Tc(l)),seconds:b(Tc(u),u==="-0"),milliseconds:b(xI(f),h)}]}const KW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function EI(t,e,n,r,i,s,o){const l={year:e.length===2?nE(Nl(e)):Nl(e),month:qA.indexOf(n)+1,day:Nl(r),hour:Nl(i),minute:Nl(s)};return o&&(l.second=Nl(o)),t&&(l.weekday=t.length>3?PA.indexOf(t)+1:FA.indexOf(t)+1),l}const QW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function GW(t){const[,e,n,r,i,s,o,l,u,f,p,h]=t,b=EI(e,i,r,n,s,o,l);let x;return u?x=KW[u]:f?x=0:x=bv(p,h),[b,new Hi(x)]}function JW(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,YW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,XW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function aT(t){const[,e,n,r,i,s,o,l]=t;return[EI(e,i,r,n,s,o,l),Hi.utcInstance]}function e6(t){const[,e,n,r,i,s,o,l]=t;return[EI(e,l,n,r,i,s,o),Hi.utcInstance]}const t6=nf(FW,SI),n6=nf(DW,SI),r6=nf(LW,SI),i6=nf(WA),UA=rf(WW,of,em,tm),s6=rf(MW,of,em,tm),o6=rf($W,of,em,tm),a6=rf(of,em,tm);function l6(t){return sf(t,[t6,UA],[n6,s6],[r6,o6],[i6,a6])}function c6(t){return sf(JW(t),[QW,GW])}function u6(t){return sf(t,[ZW,aT],[YW,aT],[XW,e6])}function d6(t){return sf(t,[UW,HW])}const f6=rf(of);function p6(t){return sf(t,[VW,f6])}const h6=nf(BW,zW),m6=nf(VA),g6=rf(of,em,tm);function y6(t){return sf(t,[h6,UA],[m6,g6])}const lT="Invalid Duration",HA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},b6={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...HA},Zs=146097/400,Gu=146097/4800,v6={years:{quarters:4,months:12,weeks:Zs/7,days:Zs,hours:Zs*24,minutes:Zs*24*60,seconds:Zs*24*60*60,milliseconds:Zs*24*60*60*1e3},quarters:{months:3,weeks:Zs/28,days:Zs/4,hours:Zs*24/4,minutes:Zs*24*60/4,seconds:Zs*24*60*60/4,milliseconds:Zs*24*60*60*1e3/4},months:{weeks:Gu/7,days:Gu,hours:Gu*24,minutes:Gu*24*60,seconds:Gu*24*60*60,milliseconds:Gu*24*60*60*1e3},...HA},zc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],x6=zc.slice(0).reverse();function bl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new An(r)}function KA(t,e){let n=e.milliseconds??0;for(const r of x6.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function cT(t,e){const n=KA(t,e)<0?-1:1;zc.reduceRight((r,i)=>{if(hn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],l=Math.floor(s/o);e[i]+=l*n,e[r]-=l*o*n}return i},null),zc.reduce((r,i)=>{if(hn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function w6(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class An{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?v6:b6;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Vn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return An.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Ni(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new An({values:ub(e,An.normalizeUnit),loc:Vn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ll(e))return An.fromMillis(e);if(An.isDuration(e))return e;if(typeof e=="object")return An.fromObject(e);throw new Ni(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=d6(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=p6(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Ni("need to specify a reason the Duration is invalid");const r=e instanceof jo?e:new jo(e,n);if(Rr.throwOnInvalid)throw new Uz(r);return new An({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new rA(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ci.create(this.loc,r).formatDurationFromString(this,e):lT}toHuman(e={}){if(!this.isValid)return lT;const n=zc.map(r=>{const i=this.values[r];return hn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=wI(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},pn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?KA(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e),r={};for(const i of zc)(Md(n.values,i)||Md(this.values,i))&&(r[i]=n.get(i)+this.get(i));return bl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=OA(e(this.values[r],r));return bl(this,{values:n},!0)}get(e){return this[An.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...ub(e,An.normalizeUnit)};return bl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return bl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return cT(this.matrix,e),bl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=w6(this.normalize().shiftToAll().toObject());return bl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>An.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of zc)if(e.indexOf(o)>=0){s=o;let l=0;for(const f in r)l+=this.matrix[f][o]*r[f],r[f]=0;Ll(i[o])&&(l+=i[o]);const u=Math.trunc(l);n[o]=u,r[o]=(l*1e3-u*1e3)/1e3}else Ll(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return cT(this.matrix,n),bl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return bl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of zc)if(!n(this.values[r],e.values[r]))return!1;return!0}}const Ju="Invalid Interval";function _6(t,e){return!t||!t.isValid?jr.invalid("missing or invalid start"):!e||!e.isValid?jr.invalid("missing or invalid end"):e<t?jr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class jr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Ni("need to specify a reason the Interval is invalid");const r=e instanceof jo?e:new jo(e,n);if(Rr.throwOnInvalid)throw new Vz(r);return new jr({invalid:r})}static fromDateTimes(e,n){const r=fp(e),i=fp(n),s=_6(r,i);return s??new jr({start:r,end:i})}static after(e,n){const r=An.fromDurationLike(n),i=fp(e);return jr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=An.fromDurationLike(n),i=fp(e);return jr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=pn.fromISO(r,n),o=s.isValid}catch{o=!1}let l,u;try{l=pn.fromISO(i,n),u=l.isValid}catch{u=!1}if(o&&u)return jr.fromDateTimes(s,l);if(o){const f=An.fromISO(i,n);if(f.isValid)return jr.after(s,f)}else if(u){const f=An.fromISO(r,n);if(f.isValid)return jr.before(l,f)}}return jr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?jr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(fp).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,l=+o>+this.e?this.e:o;r.push(jr.fromDateTimes(i,l)),i=l,s+=1}return r}splitBy(e){const n=An.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const l=this.start.plus(n.mapUnits(u=>u*i));s=+l>+this.e?this.e:l,o.push(jr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:jr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return jr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((u,f)=>u.time-f.time);for(const u of l)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(jr.fromDateTimes(n,u.time)),n=null);return jr.merge(i)}difference(...e){return jr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Ju}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ab,n={}){return this.isValid?Ci.create(this.s.loc.clone(n),e).formatInterval(this):Ju}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ju}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ju}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ju}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Ju}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):An.invalid(this.invalidReason)}mapEndpoints(e){return jr.fromDateTimes(e(this.s),e(this.e))}}class Lg{static hasDST(e=Rr.defaultZone){const n=pn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Wa.isValidZone(e)}static normalizeZone(e){return jl(e,Rr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Vn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Vn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Vn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Vn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Vn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Vn.create(n,null,"gregory").eras(e)}static features(){return{relative:TA(),localeWeek:jA()}}}function uT(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(An.fromMillis(r).as("days"))}function S6(t,e,n){const r=[["years",(u,f)=>f.year-u.year],["quarters",(u,f)=>f.quarter-u.quarter+(f.year-u.year)*4],["months",(u,f)=>f.month-u.month+(f.year-u.year)*12],["weeks",(u,f)=>{const p=uT(u,f);return(p-p%7)/7}],["days",uT]],i={},s=t;let o,l;for(const[u,f]of r)n.indexOf(u)>=0&&(o=u,i[u]=f(t,e),l=s.plus(i),l>e?(i[u]--,t=s.plus(i),t>e&&(l=t,i[u]--,t=s.plus(i))):t=l);return[t,i,l,o]}function E6(t,e,n,r){let[i,s,o,l]=S6(t,e,n);const u=e-i,f=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);f.length===0&&(o<e&&(o=i.plus({[l]:1})),o!==i&&(s[l]=(s[l]||0)+u/(o-i)));const p=An.fromObject(s,r);return f.length>0?An.fromMillis(u,r).shiftTo(...f).plus(p):p}const I6="missing Intl.DateTimeFormat.formatToParts support";function $n(t,e=n=>n){return{regex:t,deser:([n])=>e(hW(n))}}const N6="\xa0",QA=`[ ${N6}]`,GA=new RegExp(QA,"g");function k6(t){return t.replace(/\./g,"\\.?").replace(GA,QA)}function dT(t){return t.replace(/\./g,"").replace(GA," ").toLowerCase()}function wo(t,e){return t===null?null:{regex:RegExp(t.map(k6).join("|")),deser:([n])=>t.findIndex(r=>dT(n)===dT(r))+e}}function fT(t,e){return{regex:t,deser:([,n,r])=>bv(n,r),groups:e}}function Mg(t){return{regex:t,deser:([e])=>e}}function C6(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function T6(t,e){const n=xo(e),r=xo(e,"{2}"),i=xo(e,"{3}"),s=xo(e,"{4}"),o=xo(e,"{6}"),l=xo(e,"{1,2}"),u=xo(e,"{1,3}"),f=xo(e,"{1,6}"),p=xo(e,"{1,9}"),h=xo(e,"{2,4}"),b=xo(e,"{4,6}"),x=k=>({regex:RegExp(C6(k.val)),deser:([j])=>j,literal:!0}),E=(k=>{if(t.literal)return x(k);switch(k.val){case"G":return wo(e.eras("short"),0);case"GG":return wo(e.eras("long"),0);case"y":return $n(f);case"yy":return $n(h,nE);case"yyyy":return $n(s);case"yyyyy":return $n(b);case"yyyyyy":return $n(o);case"M":return $n(l);case"MM":return $n(r);case"MMM":return wo(e.months("short",!0),1);case"MMMM":return wo(e.months("long",!0),1);case"L":return $n(l);case"LL":return $n(r);case"LLL":return wo(e.months("short",!1),1);case"LLLL":return wo(e.months("long",!1),1);case"d":return $n(l);case"dd":return $n(r);case"o":return $n(u);case"ooo":return $n(i);case"HH":return $n(r);case"H":return $n(l);case"hh":return $n(r);case"h":return $n(l);case"mm":return $n(r);case"m":return $n(l);case"q":return $n(l);case"qq":return $n(r);case"s":return $n(l);case"ss":return $n(r);case"S":return $n(u);case"SSS":return $n(i);case"u":return Mg(p);case"uu":return Mg(l);case"uuu":return $n(n);case"a":return wo(e.meridiems(),0);case"kkkk":return $n(s);case"kk":return $n(h,nE);case"W":return $n(l);case"WW":return $n(r);case"E":case"c":return $n(n);case"EEE":return wo(e.weekdays("short",!1),1);case"EEEE":return wo(e.weekdays("long",!1),1);case"ccc":return wo(e.weekdays("short",!0),1);case"cccc":return wo(e.weekdays("long",!0),1);case"Z":case"ZZ":return fT(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return fT(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return Mg(/[a-z_+-/]{1,256}?/i);case" ":return Mg(/[^\S\n\r]/);default:return x(k)}})(t)||{invalidReason:I6};return E.token=t,E}const j6={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function R6(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let l=j6[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function O6(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function q6(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(Md(n,o)){const l=n[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(i[l.token.val[0]]=l.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function A6(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return hn(t.z)||(n=Wa.create(t.z)),hn(t.Z)||(n||(n=new Hi(t.Z)),r=t.Z),hn(t.q)||(t.M=(t.q-1)*3+1),hn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),hn(t.u)||(t.S=xI(t.u)),[Object.keys(t).reduce((s,o)=>{const l=e(o);return l&&(s[l]=t[o]),s},{}),n,r]}let a_=null;function P6(){return a_||(a_=pn.fromMillis(0x16a2e5618e3)),a_}function F6(t,e){if(t.literal)return t;const n=Ci.macroTokenToFormatOpts(t.val),r=XA(n,e);return r==null||r.includes(void 0)?t:r}function JA(t,e){return Array.prototype.concat(...t.map(n=>F6(n,e)))}class ZA{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=JA(Ci.parseFormat(n),e),this.units=this.tokens.map(r=>T6(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=O6(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=q6(e,this.regex,this.handlers),[i,s,o]=r?A6(r):[null,null,void 0];if(Md(r,"a")&&Md(r,"H"))throw new dd("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function YA(t,e,n){return new ZA(t,n).explainFromTokens(e)}function D6(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=YA(t,e,n);return[r,i,s,o]}function XA(t,e){if(!t)return null;const r=Ci.create(e,t).dtFormatter(P6()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>R6(o,t,s))}const l_="Invalid DateTime",L6=864e13;function Tp(t){return new jo("unsupported zone",`the zone "${t.name}" is not supported`)}function c_(t){return t.weekData===null&&(t.weekData=lb(t.c)),t.weekData}function u_(t){return t.localWeekData===null&&(t.localWeekData=lb(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function jc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new pn({...n,...e,old:n})}function eP(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function $g(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function by(t,e,n){return eP(yv(t),e,n)}function pT(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,cb(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=An.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=yv(s);let[u,f]=eP(l,n,t.zone);return o!==0&&(u+=o,f=t.zone.offset(u)),{ts:u,o:f}}function Zu(t,e,n,r,i,s){const{setZone:o,zone:l}=n;if(t&&Object.keys(t).length!==0||e){const u=e||l,f=pn.fromObject(t,{...n,zone:u,specificOffset:s});return o?f:f.setZone(l)}else return pn.invalid(new jo("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Bg(t,e,n=!0){return t.isValid?Ci.create(Vn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function d_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Gr(t.c.year,n?6:4),e?(r+="-",r+=Gr(t.c.month),r+="-",r+=Gr(t.c.day)):(r+=Gr(t.c.month),r+=Gr(t.c.day)),r}function hT(t,e,n,r,i,s){let o=Gr(t.c.hour);return e?(o+=":",o+=Gr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Gr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Gr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Gr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Gr(Math.trunc(-t.o/60)),o+=":",o+=Gr(Math.trunc(-t.o%60))):(o+="+",o+=Gr(Math.trunc(t.o/60)),o+=":",o+=Gr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const tP={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},M6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},$6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},nP=["year","month","day","hour","minute","second","millisecond"],B6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],z6=["year","ordinal","hour","minute","second","millisecond"];function W6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new rA(t);return e}function mT(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return W6(t)}}function V6(t){return xy[t]||(vy===void 0&&(vy=Rr.now()),xy[t]=t.offset(vy)),xy[t]}function gT(t,e){const n=jl(e.zone,Rr.defaultZone);if(!n.isValid)return pn.invalid(Tp(n));const r=Vn.fromObject(e);let i,s;if(hn(t.year))i=Rr.now();else{for(const u of nP)hn(t[u])&&(t[u]=tP[u]);const o=kA(t)||CA(t);if(o)return pn.invalid(o);const l=V6(n);[i,s]=by(t,l,n)}return new pn({ts:i,zone:n,loc:r,o:s})}function yT(t,e,n){const r=hn(n.round)?!0:n.round,i=(o,l)=>(o=wI(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,l)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const l=s(o);if(Math.abs(l)>=1)return i(l,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function bT(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let vy,xy={};class pn{constructor(e){const n=e.zone||Rr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new jo("invalid input"):null)||(n.isValid?null:Tp(n));this.ts=hn(e.ts)?Rr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const l=Ll(e.o)&&!e.old?e.o:n.offset(this.ts);i=$g(this.ts,l),r=Number.isNaN(i.year)?new jo("invalid input"):null,i=r?null:i,s=r?null:l}this._zone=n,this.loc=e.loc||Vn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new pn({})}static local(){const[e,n]=bT(arguments),[r,i,s,o,l,u,f]=n;return gT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static utc(){const[e,n]=bT(arguments),[r,i,s,o,l,u,f]=n;return e.zone=Hi.utcInstance,gT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static fromJSDate(e,n={}){const r=vW(e)?e.valueOf():NaN;if(Number.isNaN(r))return pn.invalid("invalid input");const i=jl(n.zone,Rr.defaultZone);return i.isValid?new pn({ts:r,zone:i,loc:Vn.fromObject(n)}):pn.invalid(Tp(i))}static fromMillis(e,n={}){if(Ll(e))return e<-864e13||e>L6?pn.invalid("Timestamp out of range"):new pn({ts:e,zone:jl(n.zone,Rr.defaultZone),loc:Vn.fromObject(n)});throw new Ni(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ll(e))return new pn({ts:e*1e3,zone:jl(n.zone,Rr.defaultZone),loc:Vn.fromObject(n)});throw new Ni("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=jl(n.zone,Rr.defaultZone);if(!r.isValid)return pn.invalid(Tp(r));const i=Vn.fromObject(n),s=ub(e,mT),{minDaysInFirstWeek:o,startOfWeek:l}=rT(s,i),u=Rr.now(),f=hn(n.specificOffset)?r.offset(u):n.specificOffset,p=!hn(s.ordinal),h=!hn(s.year),b=!hn(s.month)||!hn(s.day),x=h||b,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new dd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new dd("Can't mix ordinal dates with month/day");const E=_||s.weekday&&!x;let k,j,C=$g(u,f);E?(k=B6,j=M6,C=lb(C,o,l)):p?(k=z6,j=$6,C=o_(C)):(k=nP,j=tP);let R=!1;for(const z of k){const F=s[z];hn(F)?R?s[z]=j[z]:s[z]=C[z]:R=!0}const q=E?gW(s,o,l):p?yW(s):kA(s),L=q||CA(s);if(L)return pn.invalid(L);const $=E?tT(s,o,l):p?nT(s):s,[W,P]=by($,f,r),O=new pn({ts:W,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==O.weekday?pn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:pn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=l6(e);return Zu(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=c6(e);return Zu(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=u6(e);return Zu(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(hn(e)||hn(n))throw new Ni("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[l,u,f,p]=D6(o,e,n);return p?pn.invalid(p):Zu(l,u,r,`format ${n}`,e,f)}static fromString(e,n,r={}){return pn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=y6(e);return Zu(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Ni("need to specify a reason the DateTime is invalid");const r=e instanceof jo?e:new jo(e,n);if(Rr.throwOnInvalid)throw new Wz(r);return new pn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=XA(e,Vn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return JA(Ci.parseFormat(e),Vn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){vy=void 0,xy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?c_(this).weekYear:NaN}get weekNumber(){return this.isValid?c_(this).weekNumber:NaN}get weekday(){return this.isValid?c_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?u_(this).weekday:NaN}get localWeekNumber(){return this.isValid?u_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?u_(this).weekYear:NaN}get ordinal(){return this.isValid?o_(this.c).ordinal:NaN}get monthShort(){return this.isValid?Lg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Lg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Lg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Lg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=yv(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),l=this.zone.offset(r-s*n);if(o===l)return[this];const u=r-o*n,f=r-l*n,p=$g(u,o),h=$g(f,l);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[jc(this,{ts:u}),jc(this,{ts:f})]:[this]}get isInLeapYear(){return Xh(this.year)}get daysInMonth(){return cb(this.year,this.month)}get daysInYear(){return this.isValid?Sd(this.year):NaN}get weeksInWeekYear(){return this.isValid?lh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?lh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Ci.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Hi.instance(e),n)}toLocal(){return this.setZone(Rr.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=jl(e,Rr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=by(o,s,e)}return jc(this,{ts:i,zone:e})}else return pn.invalid(Tp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return jc(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=ub(e,mT),{minDaysInFirstWeek:r,startOfWeek:i}=rT(n,this.loc),s=!hn(n.weekYear)||!hn(n.weekNumber)||!hn(n.weekday),o=!hn(n.ordinal),l=!hn(n.year),u=!hn(n.month)||!hn(n.day),f=l||u,p=n.weekYear||n.weekNumber;if((f||o)&&p)throw new dd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new dd("Can't mix ordinal dates with month/day");let h;s?h=tT({...lb(this.c,r,i),...n},r,i):hn(n.ordinal)?(h={...this.toObject(),...n},hn(n.day)&&(h.day=Math.min(cb(h.year,h.month),h.day))):h=nT({...o_(this.c),...n});const[b,x]=by(h,this.o,this.zone);return jc(this,{ts:b,o:x})}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return jc(this,pT(this,n))}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e).negate();return jc(this,pT(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=An.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Ci.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):l_}toLocaleString(e=ab,n={}){return this.isValid?Ci.create(this.loc.clone(n),e).formatDateTime(this):l_}toLocaleParts(e={}){return this.isValid?Ci.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=d_(this,o);return l+="T",l+=hT(this,o,n,r,i,s),l}toISODate({format:e="extended"}={}){return this.isValid?d_(this,e==="extended"):null}toISOWeekDate(){return Bg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+hT(this,o==="extended",n,e,r,s):null}toRFC2822(){return Bg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Bg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?d_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Bg(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():l_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return An.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=xW(n).map(An.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,u=o?e:this,f=E6(l,u,s,i);return o?f.negate():f}diffNow(e="milliseconds",n={}){return this.diff(pn.now(),e,n)}until(e){return this.isValid?jr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||pn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),yT(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?yT(e.base||pn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(pn.isDateTime))throw new Ni("min requires all arguments be DateTimes");return iT(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(pn.isDateTime))throw new Ni("max requires all arguments be DateTimes");return iT(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return YA(o,e,n)}static fromStringExplain(e,n,r={}){return pn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Vn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new ZA(s,e)}static fromFormatParser(e,n,r={}){if(hn(e)||hn(n))throw new Ni("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new Ni(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:l,zone:u,specificOffset:f,invalidReason:p}=n.explainFromTokens(e);return p?pn.invalid(p):Zu(l,u,r,`format ${n.format}`,e,f)}static get DATE_SHORT(){return ab}static get DATE_MED(){return iA}static get DATE_MED_WITH_WEEKDAY(){return Hz}static get DATE_FULL(){return sA}static get DATE_HUGE(){return oA}static get TIME_SIMPLE(){return aA}static get TIME_WITH_SECONDS(){return lA}static get TIME_WITH_SHORT_OFFSET(){return cA}static get TIME_WITH_LONG_OFFSET(){return uA}static get TIME_24_SIMPLE(){return dA}static get TIME_24_WITH_SECONDS(){return fA}static get TIME_24_WITH_SHORT_OFFSET(){return pA}static get TIME_24_WITH_LONG_OFFSET(){return hA}static get DATETIME_SHORT(){return mA}static get DATETIME_SHORT_WITH_SECONDS(){return gA}static get DATETIME_MED(){return yA}static get DATETIME_MED_WITH_SECONDS(){return bA}static get DATETIME_MED_WITH_WEEKDAY(){return Kz}static get DATETIME_FULL(){return vA}static get DATETIME_FULL_WITH_SECONDS(){return xA}static get DATETIME_HUGE(){return wA}static get DATETIME_HUGE_WITH_SECONDS(){return _A}}function fp(t){if(pn.isDateTime(t))return t;if(t&&t.valueOf&&Ll(t.valueOf()))return pn.fromJSDate(t);if(t&&typeof t=="object")return pn.fromObject(t);throw new Ni(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function rP(t,e){return function(){return t.apply(e,arguments)}}const{toString:U6}=Object.prototype,{getPrototypeOf:II}=Object,xv=(t=>e=>{const n=U6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$o=t=>(t=t.toLowerCase(),e=>xv(e)===t),wv=t=>e=>typeof e===t,{isArray:af}=Array,ch=wv("undefined");function H6(t){return t!==null&&!ch(t)&&t.constructor!==null&&!ch(t.constructor)&&Os(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const iP=$o("ArrayBuffer");function K6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&iP(t.buffer),e}const Q6=wv("string"),Os=wv("function"),sP=wv("number"),_v=t=>t!==null&&typeof t=="object",G6=t=>t===!0||t===!1,wy=t=>{if(xv(t)!=="object")return!1;const e=II(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},J6=$o("Date"),Z6=$o("File"),Y6=$o("Blob"),X6=$o("FileList"),eV=t=>_v(t)&&Os(t.pipe),tV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Os(t.append)&&((e=xv(t))==="formdata"||e==="object"&&Os(t.toString)&&t.toString()==="[object FormData]"))},nV=$o("URLSearchParams"),[rV,iV,sV,oV]=["ReadableStream","Request","Response","Headers"].map($o),aV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),af(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function oP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aP=t=>!ch(t)&&t!==Wc;function rE(){const{caseless:t}=aP(this)&&this||{},e={},n=(r,i)=>{const s=t&&oP(e,i)||i;wy(e[s])&&wy(r)?e[s]=rE(e[s],r):wy(r)?e[s]=rE({},r):af(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&nm(arguments[r],n);return e}const lV=(t,e,n,{allOwnKeys:r}={})=>(nm(e,(i,s)=>{n&&Os(i)?t[s]=rP(i,n):t[s]=i},{allOwnKeys:r}),t),cV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uV=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},dV=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&II(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},fV=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},pV=t=>{if(!t)return null;if(af(t))return t;let e=t.length;if(!sP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},hV=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&II(Uint8Array)),mV=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},gV=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},yV=$o("HTMLFormElement"),bV=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),vT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),vV=$o("RegExp"),lP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};nm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},xV=t=>{lP(t,(e,n)=>{if(Os(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Os(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wV=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return af(t)?r(t):r(String(t).split(e)),n},_V=()=>{},SV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,f_="abcdefghijklmnopqrstuvwxyz",xT="0123456789",cP={DIGIT:xT,ALPHA:f_,ALPHA_DIGIT:f_+f_.toUpperCase()+xT},EV=(t=16,e=cP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function IV(t){return!!(t&&Os(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const NV=t=>{const e=new Array(10),n=(r,i)=>{if(_v(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=af(r)?[]:{};return nm(r,(o,l)=>{const u=n(o,i+1);!ch(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},kV=$o("AsyncFunction"),CV=t=>t&&(_v(t)||Os(t))&&Os(t.then)&&Os(t.catch),uP=((t,e)=>t?setImmediate:e?((n,r)=>(Wc.addEventListener("message",({source:i,data:s})=>{i===Wc&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Wc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Os(Wc.postMessage)),TV=typeof queueMicrotask<"u"?queueMicrotask.bind(Wc):typeof process<"u"&&process.nextTick||uP,Ye={isArray:af,isArrayBuffer:iP,isBuffer:H6,isFormData:tV,isArrayBufferView:K6,isString:Q6,isNumber:sP,isBoolean:G6,isObject:_v,isPlainObject:wy,isReadableStream:rV,isRequest:iV,isResponse:sV,isHeaders:oV,isUndefined:ch,isDate:J6,isFile:Z6,isBlob:Y6,isRegExp:vV,isFunction:Os,isStream:eV,isURLSearchParams:nV,isTypedArray:hV,isFileList:X6,forEach:nm,merge:rE,extend:lV,trim:aV,stripBOM:cV,inherits:uV,toFlatObject:dV,kindOf:xv,kindOfTest:$o,endsWith:fV,toArray:pV,forEachEntry:mV,matchAll:gV,isHTMLForm:yV,hasOwnProperty:vT,hasOwnProp:vT,reduceDescriptors:lP,freezeMethods:xV,toObjectSet:wV,toCamelCase:bV,noop:_V,toFiniteNumber:SV,findKey:oP,global:Wc,isContextDefined:aP,ALPHABET:cP,generateString:EV,isSpecCompliantForm:IV,toJSONObject:NV,isAsyncFn:kV,isThenable:CV,setImmediate:uP,asap:TV};function _n(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(_n,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const dP=_n.prototype,fP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fP[t]={value:t}});Object.defineProperties(_n,fP);Object.defineProperty(dP,"isAxiosError",{value:!0});_n.from=(t,e,n,r,i,s)=>{const o=Object.create(dP);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),_n.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const jV=null;function iE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function pP(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function wT(t,e,n){return t?t.concat(e).map(function(i,s){return i=pP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function RV(t){return Ye.isArray(t)&&!t.some(iE)}const OV=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function Sv(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!Ye.isUndefined(k[E])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new _n("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,E,k){let j=_;if(_&&!k&&typeof _=="object"){if(Ye.endsWith(E,"{}"))E=r?E:E.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&RV(_)||(Ye.isFileList(_)||Ye.endsWith(E,"[]"))&&(j=Ye.toArray(_)))return E=pP(E),j.forEach(function(R,q){!(Ye.isUndefined(R)||R===null)&&e.append(o===!0?wT([E],q,s):o===null?E:E+"[]",f(R))}),!1}return iE(_)?!0:(e.append(wT(k,E,s),f(_)),!1)}const h=[],b=Object.assign(OV,{defaultVisitor:p,convertValue:f,isVisitable:iE});function x(_,E){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(_),Ye.forEach(_,function(j,C){(!(Ye.isUndefined(j)||j===null)&&i.call(e,j,Ye.isString(C)?C.trim():C,E,b))===!0&&x(j,E?E.concat(C):[C])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function _T(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function NI(t,e){this._pairs=[],t&&Sv(t,this,e)}const hP=NI.prototype;hP.append=function(e,n){this._pairs.push([e,n])};hP.toString=function(e){const n=e?function(r){return e.call(this,r,_T)}:_T;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function qV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mP(t,e,n){if(!e)return t;const r=n&&n.encode||qV;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new NI(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class ST{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const gP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AV=typeof URLSearchParams<"u"?URLSearchParams:NI,PV=typeof FormData<"u"?FormData:null,FV=typeof Blob<"u"?Blob:null,DV={isBrowser:!0,classes:{URLSearchParams:AV,FormData:PV,Blob:FV},protocols:["http","https","file","blob","url","data"]},kI=typeof window<"u"&&typeof document<"u",sE=typeof navigator=="object"&&navigator||void 0,LV=kI&&(!sE||["ReactNative","NativeScript","NS"].indexOf(sE.product)<0),MV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$V=kI&&window.location.href||"http://localhost",BV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kI,hasStandardBrowserEnv:LV,hasStandardBrowserWebWorkerEnv:MV,navigator:sE,origin:$V},Symbol.toStringTag,{value:"Module"})),Ti={...BV,...DV};function zV(t,e){return Sv(t,new Ti.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ti.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function WV(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VV(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function yP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=VV(i[o])),!l)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(WV(r),i,n,0)}),n}return null}function UV(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const rm={transitional:gP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(yP(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zV(e,this.formSerializer).toString();if((l=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Sv(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),UV(e)):e}],transformResponse:[function(e){const n=this.transitional||rm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?_n.from(l,_n.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ti.classes.FormData,Blob:Ti.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{rm.headers[t]={}});const HV=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KV=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&HV[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ET=Symbol("internals");function pp(t){return t&&String(t).trim().toLowerCase()}function _y(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(_y):String(t)}function QV(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const GV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function p_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function JV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ZV(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let hs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,f){const p=pp(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||f===!0||f===void 0&&i[h]!==!1)&&(i[h||u]=_y(l))}const o=(l,u)=>Ye.forEach(l,(f,p)=>s(f,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!GV(e))o(KV(e),n);else if(Ye.isHeaders(e))for(const[l,u]of e.entries())s(u,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=pp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return QV(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=pp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||p_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=pp(o),o){const l=Ye.findKey(r,o);l&&(!n||p_(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||p_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=_y(i),delete n[s];return}const l=e?JV(s):String(s).trim();l!==s&&delete n[s],n[l]=_y(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[ET]=this[ET]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=pp(o);r[l]||(ZV(i,o),r[l]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(hs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(hs);function h_(t,e){const n=this||rm,r=e||n,i=hs.from(r.headers);let s=r.data;return Ye.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function bP(t){return!!(t&&t.__CANCEL__)}function lf(t,e,n){_n.call(this,t??"canceled",_n.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(lf,_n,{__CANCEL__:!0});function vP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new _n("Request failed with status code "+n.status,[_n.ERR_BAD_REQUEST,_n.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function YV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function XV(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=r[s];o||(o=f),n[i]=u,r[i]=f;let h=s,b=0;for(;h!==i;)b+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-o<e)return;const x=p&&f-p;return x?Math.round(b*1e3/x):void 0}}function eU(t,e){let n=0,r=1e3/e,i,s;const o=(f,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,f)};return[(...f)=>{const p=Date.now(),h=p-n;h>=r?o(f,p):(i=f,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const db=(t,e,n=3)=>{let r=0;const i=XV(50,250);return eU(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-r,f=i(u),p=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&p?(l-o)/f:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},IT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},NT=t=>(...e)=>Ye.asap(()=>t(...e)),tU=Ti.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ti.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ti.origin),Ti.navigator&&/(msie|trident)/i.test(Ti.navigator.userAgent)):()=>!0,nU=Ti.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function rU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function iU(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function xP(t,e){return t&&!rU(e)?iU(t,e):e}const kT=t=>t instanceof hs?{...t}:t;function tu(t,e){e=e||{};const n={};function r(f,p,h,b){return Ye.isPlainObject(f)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:b},f,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(f,p,h,b){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f,h,b)}else return r(f,p,h,b)}function s(f,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(f,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function l(f,p,h){if(h in e)return r(f,p);if(h in t)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,p,h)=>i(kT(f),kT(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,b=h(t[p],e[p],p);Ye.isUndefined(b)&&h!==l||(n[p]=b)}),n}const wP=t=>{const e=tu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=hs.from(o),e.url=mP(xP(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(Ye.isFormData(n)){if(Ti.hasStandardBrowserEnv||Ti.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[f,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Ti.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&tU(e.url))){const f=i&&s&&nU.read(s);f&&o.set(i,f)}return e},sU=typeof XMLHttpRequest<"u",oU=sU&&function(t){return new Promise(function(n,r){const i=wP(t);let s=i.data;const o=hs.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=i,p,h,b,x,_;function E(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function j(){if(!k)return;const R=hs.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),L={data:!l||l==="text"||l==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:R,config:t,request:k};vP(function(W){n(W),E()},function(W){r(W),E()},L),k=null}"onloadend"in k?k.onloadend=j:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(j)},k.onabort=function(){k&&(r(new _n("Request aborted",_n.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new _n("Network Error",_n.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let q=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const L=i.transitional||gP;i.timeoutErrorMessage&&(q=i.timeoutErrorMessage),r(new _n(q,L.clarifyTimeoutError?_n.ETIMEDOUT:_n.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Ye.forEach(o.toJSON(),function(q,L){k.setRequestHeader(L,q)}),Ye.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),l&&l!=="json"&&(k.responseType=i.responseType),f&&([b,_]=db(f,!0),k.addEventListener("progress",b)),u&&k.upload&&([h,x]=db(u),k.upload.addEventListener("progress",h),k.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=R=>{k&&(r(!R||R.type?new lf(null,t,k):R),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const C=YV(i.url);if(C&&Ti.protocols.indexOf(C)===-1){r(new _n("Unsupported protocol "+C+":",_n.ERR_BAD_REQUEST,t));return}k.send(s||null)})},aU=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const p=f instanceof Error?f:this.reason;r.abort(p instanceof _n?p:new lf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new _n(`timeout ${e} of ms exceeded`,_n.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),t=null)};t.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(l),u}},lU=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},cU=async function*(t,e){for await(const n of uU(t))yield*lU(n,e)},uU=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},CT=(t,e,n,r)=>{const i=cU(t,e);let s=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await i.next();if(f){l(),u.close();return}let h=p.byteLength;if(n){let b=s+=h;n(b)}u.enqueue(new Uint8Array(p))}catch(f){throw l(f),f}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Ev=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_P=Ev&&typeof ReadableStream=="function",dU=Ev&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),SP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},fU=_P&&SP(()=>{let t=!1;const e=new Request(Ti.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),TT=64*1024,oE=_P&&SP(()=>Ye.isReadableStream(new Response("").body)),fb={stream:oE&&(t=>t.body)};Ev&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fb[e]&&(fb[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new _n(`Response type '${e}' is not supported`,_n.ERR_NOT_SUPPORT,r)})})})(new Response);const pU=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Ti.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await dU(t)).byteLength},hU=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??pU(e)},mU=Ev&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:f,headers:p,withCredentials:h="same-origin",fetchOptions:b}=wP(t);f=f?(f+"").toLowerCase():"text";let x=aU([i,s&&s.toAbortSignal()],o),_;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let k;try{if(u&&fU&&n!=="get"&&n!=="head"&&(k=await hU(p,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),$;if(Ye.isFormData(r)&&($=L.headers.get("content-type"))&&p.setContentType($),L.body){const[W,P]=IT(k,db(NT(u)));r=CT(L.body,TT,W,P)}}Ye.isString(h)||(h=h?"include":"omit");const j="credentials"in Request.prototype;_=new Request(e,{...b,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:j?h:void 0});let C=await fetch(_);const R=oE&&(f==="stream"||f==="response");if(oE&&(l||R&&E)){const L={};["status","statusText","headers"].forEach(O=>{L[O]=C[O]});const $=Ye.toFiniteNumber(C.headers.get("content-length")),[W,P]=l&&IT($,db(NT(l),!0))||[];C=new Response(CT(C.body,TT,W,()=>{P&&P(),E&&E()}),L)}f=f||"text";let q=await fb[Ye.findKey(fb,f)||"text"](C,t);return!R&&E&&E(),await new Promise((L,$)=>{vP(L,$,{data:q,headers:hs.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:_})})}catch(j){throw E&&E(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new _n("Network Error",_n.ERR_NETWORK,t,_),{cause:j.cause||j}):_n.from(j,j&&j.code,t,_)}}),aE={http:jV,xhr:oU,fetch:mU};Ye.forEach(aE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const jT=t=>`- ${t}`,gU=t=>Ye.isFunction(t)||t===null||t===!1,EP={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!gU(n)&&(r=aE[(o=String(n)).toLowerCase()],r===void 0))throw new _n(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(jT).join(`
`):" "+jT(s[0]):"as no adapter specified";throw new _n("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:aE};function m_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lf(null,t)}function RT(t){return m_(t),t.headers=hs.from(t.headers),t.data=h_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),EP.getAdapter(t.adapter||rm.adapter)(t).then(function(r){return m_(t),r.data=h_.call(t,t.transformResponse,r),r.headers=hs.from(r.headers),r},function(r){return bP(r)||(m_(t),r&&r.response&&(r.response.data=h_.call(t,t.transformResponse,r.response),r.response.headers=hs.from(r.response.headers))),Promise.reject(r)})}const IP="1.7.9",Iv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Iv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const OT={};Iv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+IP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new _n(i(o," has been removed"+(n?" in "+n:"")),_n.ERR_DEPRECATED);return n&&!OT[o]&&(OT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};Iv.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function yU(t,e,n){if(typeof t!="object")throw new _n("options must be an object",_n.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new _n("option "+s+" must be "+u,_n.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _n("Unknown option "+s,_n.ERR_BAD_OPTION)}}const Sy={assertOptions:yU,validators:Iv},Ko=Sy.validators;let Qc=class{constructor(e){this.defaults=e,this.interceptors={request:new ST,response:new ST}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=tu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Sy.assertOptions(r,{silentJSONParsing:Ko.transitional(Ko.boolean),forcedJSONParsing:Ko.transitional(Ko.boolean),clarifyTimeoutError:Ko.transitional(Ko.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:Sy.assertOptions(i,{encode:Ko.function,serialize:Ko.function},!0)),Sy.assertOptions(n,{baseUrl:Ko.spelling("baseURL"),withXsrfToken:Ko.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=hs.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(u=u&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,h=0,b;if(!u){const _=[RT.bind(this),void 0];for(_.unshift.apply(_,l),_.push.apply(_,f),b=_.length,p=Promise.resolve(n);h<b;)p=p.then(_[h++],_[h++]);return p}b=l.length;let x=n;for(h=0;h<b;){const _=l[h++],E=l[h++];try{x=_(x)}catch(k){E.call(this,k);break}}try{p=RT.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,b=f.length;h<b;)p=p.then(f[h++],f[h++]);return p}getUri(e){e=tu(this.defaults,e);const n=xP(e.baseURL,e.url);return mP(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){Qc.prototype[e]=function(n,r){return this.request(tu(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(tu(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Qc.prototype[e]=n(),Qc.prototype[e+"Form"]=n(!0)});let bU=class NP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new lf(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new NP(function(i){e=i}),cancel:e}}};function vU(t){return function(n){return t.apply(null,n)}}function xU(t){return Ye.isObject(t)&&t.isAxiosError===!0}const lE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lE).forEach(([t,e])=>{lE[e]=t});function kP(t){const e=new Qc(t),n=rP(Qc.prototype.request,e);return Ye.extend(n,Qc.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return kP(tu(t,i))},n}const Vr=kP(rm);Vr.Axios=Qc;Vr.CanceledError=lf;Vr.CancelToken=bU;Vr.isCancel=bP;Vr.VERSION=IP;Vr.toFormData=Sv;Vr.AxiosError=_n;Vr.Cancel=Vr.CanceledError;Vr.all=function(e){return Promise.all(e)};Vr.spread=vU;Vr.isAxiosError=xU;Vr.mergeConfig=tu;Vr.AxiosHeaders=hs;Vr.formToJSON=t=>yP(Ye.isHTMLForm(t)?new FormData(t):t);Vr.getAdapter=EP.getAdapter;Vr.HttpStatusCode=lE;Vr.default=Vr;const{Axios:_ce,AxiosError:wU,CanceledError:Sce,isCancel:Ece,CancelToken:Ice,VERSION:Nce,all:kce,Cancel:Cce,isAxiosError:Tce,spread:jce,toFormData:Rce,AxiosHeaders:Oce,HttpStatusCode:qce,formToJSON:Ace,getAdapter:Pce,mergeConfig:Fce}=Vr,CI=({error:t,schema:e,onError:n})=>{if(t instanceof wU){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var g_,qT;function _U(){if(qT)return g_;qT=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return g_=n,g_}var SU=_U();const EU=co(SU),IU=({instance:t,limit:e}={})=>EU(t||Vr,e||{maxRequests:5,perMilliseconds:100}),TI="-",NU=t=>{const e=CU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(TI);return l[0]===""&&l.length!==1&&l.shift(),CP(l,e)||kU(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},CP=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?CP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(TI);return e.validators.find(({validator:o})=>o(s))?.classGroupId},AT=/^\[(.+)\]$/,kU=t=>{if(AT.test(t)){const e=AT.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},CU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return jU(Object.entries(t.classGroups),n).forEach(([s,o])=>{cE(o,r,s,e)}),r},cE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:PT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(TU(i)){cE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{cE(o,PT(e,s),n,r)})})},PT=(t,e)=>{let n=t;return e.split(TI).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},TU=t=>t.isThemeGetter,jU=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,RU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},TP="!",OU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const u=[];let f=0,p=0,h;for(let k=0;k<l.length;k++){let j=l[k];if(f===0){if(j===i&&(r||l.slice(k,k+s)===e)){u.push(l.slice(p,k)),p=k+s;continue}if(j==="/"){h=k;continue}}j==="["?f++:j==="]"&&f--}const b=u.length===0?l:l.substring(p),x=b.startsWith(TP),_=x?b.substring(1):b,E=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:E}};return n?l=>n({className:l,parseClassName:o}):o},qU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},AU=t=>({cache:RU(t.cacheSize),parseClassName:OU(t),...NU(t)}),PU=/\s+/,FU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(PU);let l="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:x}=n(f);let _=!!x,E=r(_?b.substring(0,x):b);if(!E){if(!_){l=f+(l.length>0?" "+l:l);continue}if(E=r(b),!E){l=f+(l.length>0?" "+l:l);continue}_=!1}const k=qU(p).join(":"),j=h?k+TP:k,C=j+E;if(s.includes(C))continue;s.push(C);const R=i(E,_);for(let q=0;q<R.length;++q){const L=R[q];s.push(j+L)}l=f+(l.length>0?" "+l:l)}return l};function DU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jP(e))&&(r&&(r+=" "),r+=n);return r}const jP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jP(t[r]))&&(n&&(n+=" "),n+=e);return n};function LU(t,...e){let n,r,i,s=o;function o(u){const f=e.reduce((p,h)=>h(p),t());return n=AU(f),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const f=r(u);if(f)return f;const p=FU(u,n);return i(u,p),p}return function(){return s(DU.apply(null,arguments))}}const dr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},RP=/^\[(?:([a-z-]+):)?(.+)\]$/i,MU=/^\d+\/\d+$/,$U=new Set(["px","full","screen"]),BU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,VU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,UU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ka=t=>Id(t)||$U.has(t)||MU.test(t),vl=t=>cf(t,"length",XU),Id=t=>!!t&&!Number.isNaN(Number(t)),y_=t=>cf(t,"number",Id),hp=t=>!!t&&Number.isInteger(Number(t)),HU=t=>t.endsWith("%")&&Id(t.slice(0,-1)),En=t=>RP.test(t),xl=t=>BU.test(t),KU=new Set(["length","size","percentage"]),QU=t=>cf(t,KU,OP),GU=t=>cf(t,"position",OP),JU=new Set(["image","url"]),ZU=t=>cf(t,JU,t5),YU=t=>cf(t,"",e5),mp=()=>!0,cf=(t,e,n)=>{const r=RP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},XU=t=>zU.test(t)&&!WU.test(t),OP=()=>!1,e5=t=>VU.test(t),t5=t=>UU.test(t),n5=()=>{const t=dr("colors"),e=dr("spacing"),n=dr("blur"),r=dr("brightness"),i=dr("borderColor"),s=dr("borderRadius"),o=dr("borderSpacing"),l=dr("borderWidth"),u=dr("contrast"),f=dr("grayscale"),p=dr("hueRotate"),h=dr("invert"),b=dr("gap"),x=dr("gradientColorStops"),_=dr("gradientColorStopPositions"),E=dr("inset"),k=dr("margin"),j=dr("opacity"),C=dr("padding"),R=dr("saturate"),q=dr("scale"),L=dr("sepia"),$=dr("skew"),W=dr("space"),P=dr("translate"),O=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",En,e],V=()=>[En,e],U=()=>["",ka,vl],M=()=>["auto",Id,En],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",En],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Id,En];return{cacheSize:500,separator:":",theme:{colors:[mp],spacing:[ka,vl],blur:["none","",xl,En],brightness:te(),borderColor:[t],borderRadius:["none","","full",xl,En],borderSpacing:V(),borderWidth:U(),contrast:te(),grayscale:ne(),hueRotate:te(),invert:ne(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[HU,vl],inset:F(),margin:F(),opacity:te(),padding:V(),saturate:te(),scale:te(),sepia:ne(),skew:te(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",En]}],container:["container"],columns:[{columns:[xl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),En]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hp,En]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",En]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",hp,En]}],"grid-cols":[{"grid-cols":[mp]}],"col-start-end":[{col:["auto",{span:["full",hp,En]},En]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[mp]}],"row-start-end":[{row:["auto",{span:[hp,En]},En]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",En]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",En]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",En,e]}],"min-w":[{"min-w":[En,e,"min","max","fit"]}],"max-w":[{"max-w":[En,e,"none","full","min","max","fit","prose",{screen:[xl]},xl]}],h:[{h:[En,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[En,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xl,vl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",y_]}],"font-family":[{font:[mp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",En]}],"line-clamp":[{"line-clamp":["none",Id,y_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ka,En]}],"list-image":[{"list-image":["none",En]}],"list-style-type":[{list:["none","disc","decimal",En]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ka,vl]}],"underline-offset":[{"underline-offset":["auto",ka,En]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),GU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:J()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[ka,En]}],"outline-w":[{outline:[ka,vl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[ka,vl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xl,YU]}],"shadow-color":[{shadow:[mp]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",xl,En]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[R]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",En]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",En]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",En]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[q]}],"scale-x":[{"scale-x":[q]}],"scale-y":[{"scale-y":[q]}],rotate:[{rotate:[hp,En]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",En]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ka,vl,y_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qP=LU(n5),uE=new Proxy(()=>uE,{get:()=>uE});function xn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(l,u)=>({css:f,...p}={})=>{const h=[],b=t,x={...b?.()?.config.defaults,...i,...o,...p};h.push(b?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,E]of Object.entries(x)){const k=n[_]?.[E];k&&h.push(k)}for(const _ of r)Object.entries(_.if).every(([E,k])=>k===x[E])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(f),qP(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:uE()})}const gn=qP;var b_,FT;function AP(){return FT||(FT=1,b_=Object),b_}var v_,DT;function r5(){return DT||(DT=1,v_=Error),v_}var x_,LT;function i5(){return LT||(LT=1,x_=EvalError),x_}var w_,MT;function s5(){return MT||(MT=1,w_=RangeError),w_}var __,$T;function o5(){return $T||($T=1,__=ReferenceError),__}var S_,BT;function a5(){return BT||(BT=1,S_=SyntaxError),S_}var E_,zT;function PP(){return zT||(zT=1,E_=TypeError),E_}var I_,WT;function l5(){return WT||(WT=1,I_=URIError),I_}var N_,VT;function c5(){return VT||(VT=1,N_=Math.abs),N_}var k_,UT;function u5(){return UT||(UT=1,k_=Math.floor),k_}var C_,HT;function d5(){return HT||(HT=1,C_=Math.max),C_}var T_,KT;function f5(){return KT||(KT=1,T_=Math.min),T_}var j_,QT;function p5(){return QT||(QT=1,j_=Math.pow),j_}var R_,GT;function h5(){return GT||(GT=1,R_=Math.round),R_}var O_,JT;function m5(){return JT||(JT=1,O_=Number.isNaN||function(e){return e!==e}),O_}var q_,ZT;function g5(){if(ZT)return q_;ZT=1;var t=m5();return q_=function(n){return t(n)||n===0?n:n<0?-1:1},q_}var A_,YT;function y5(){return YT||(YT=1,A_=Object.getOwnPropertyDescriptor),A_}var P_,XT;function FP(){if(XT)return P_;XT=1;var t=y5();if(t)try{t([],"length")}catch{t=null}return P_=t,P_}var F_,ej;function b5(){if(ej)return F_;ej=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return F_=t,F_}var D_,tj;function DP(){return tj||(tj=1,D_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),D_}var L_,nj;function v5(){if(nj)return L_;nj=1;var t=typeof Symbol<"u"&&Symbol,e=DP();return L_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},L_}var M_,rj;function LP(){return rj||(rj=1,M_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),M_}var $_,ij;function MP(){if(ij)return $_;ij=1;var t=AP();return $_=t.getPrototypeOf||null,$_}var B_,sj;function x5(){if(sj)return B_;sj=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,f){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var b=0;b<f.length;b+=1)p[b+u.length]=f[b];return p},s=function(u,f){for(var p=[],h=f,b=0;h<u.length;h+=1,b+=1)p[b]=u[h];return p},o=function(l,u){for(var f="",p=0;p<l.length;p+=1)f+=l[p],p+1<l.length&&(f+=u);return f};return B_=function(u){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(t+f);for(var p=s(arguments,1),h,b=function(){if(this instanceof h){var j=f.apply(this,i(p,arguments));return Object(j)===j?j:this}return f.apply(u,i(p,arguments))},x=n(0,f.length-p.length),_=[],E=0;E<x;E++)_[E]="$"+E;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var k=function(){};k.prototype=f.prototype,h.prototype=new k,k.prototype=null}return h},B_}var z_,oj;function Nv(){if(oj)return z_;oj=1;var t=x5();return z_=Function.prototype.bind||t,z_}var W_,aj;function jI(){return aj||(aj=1,W_=Function.prototype.call),W_}var V_,lj;function $P(){return lj||(lj=1,V_=Function.prototype.apply),V_}var U_,cj;function w5(){return cj||(cj=1,U_=typeof Reflect<"u"&&Reflect&&Reflect.apply),U_}var H_,uj;function _5(){if(uj)return H_;uj=1;var t=Nv(),e=$P(),n=jI(),r=w5();return H_=r||t.call(n,e),H_}var K_,dj;function BP(){if(dj)return K_;dj=1;var t=Nv(),e=PP(),n=jI(),r=_5();return K_=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},K_}var Q_,fj;function S5(){if(fj)return Q_;fj=1;var t=BP(),e=FP(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Q_=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(l){return s(l==null?l:i(l))}:!1,Q_}var G_,pj;function E5(){if(pj)return G_;pj=1;var t=LP(),e=MP(),n=S5();return G_=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,G_}var J_,hj;function I5(){if(hj)return J_;hj=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Nv();return J_=n.call(t,e),J_}var Z_,mj;function N5(){if(mj)return Z_;mj=1;var t,e=AP(),n=r5(),r=i5(),i=s5(),s=o5(),o=a5(),l=PP(),u=l5(),f=c5(),p=u5(),h=d5(),b=f5(),x=p5(),_=h5(),E=g5(),k=Function,j=function(De){try{return k('"use strict"; return ('+De+").constructor;")()}catch{}},C=FP(),R=b5(),q=function(){throw new l},L=C?function(){try{return arguments.callee,q}catch{try{return C(arguments,"callee").get}catch{return q}}}():q,$=v5()(),W=E5(),P=MP(),O=LP(),z=$P(),F=jI(),V={},U=typeof Uint8Array>"u"||!W?t:W(Uint8Array),M={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":$&&W?W([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":k,"%GeneratorFunction%":V,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$&&W?W(W([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$||!W?t:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":C,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$||!W?t:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$&&W?W(""[Symbol.iterator]()):t,"%Symbol%":$?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":L,"%TypedArray%":U,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":z,"%Object.defineProperty%":R,"%Object.getPrototypeOf%":P,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":E,"%Reflect.getPrototypeOf%":O};if(W)try{null.error}catch(De){var X=W(W(De));M["%Error.prototype%"]=X}var J=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=j("async function () {}");else if(Je==="%GeneratorFunction%")Xe=j("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=j("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ve=De("%AsyncGeneratorFunction%");Ve&&(Xe=Ve.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ct=De("%AsyncGenerator%");ct&&W&&(Xe=W(ct.prototype))}return M[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=Nv(),ne=I5(),oe=ie.call(F,Array.prototype.concat),te=ie.call(z,Array.prototype.splice),ue=ie.call(F,String.prototype.replace),de=ie.call(F,String.prototype.slice),ye=ie.call(F,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ie=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ve=de(Je,-1);if(Xe==="%"&&Ve!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ve==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ct=[];return ue(Je,we,function(_t,Rt,Ut,sn){ct[ct.length]=Ut?ue(sn,Ie,"$1"):Rt||_t}),ct},Re=function(Je,Xe){var Ve=Je,ct;if(ne(le,Ve)&&(ct=le[Ve],Ve="%"+ct[0]+"%"),ne(M,Ve)){var _t=M[Ve];if(_t===V&&(_t=J(Ve)),typeof _t>"u"&&!Xe)throw new l("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ct,name:Ve,value:_t}}throw new o("intrinsic "+Je+" does not exist!")};return Z_=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ve=ze(Je),ct=Ve.length>0?Ve[0]:"",_t=Re("%"+ct+"%",Xe),Rt=_t.name,Ut=_t.value,sn=!1,xe=_t.alias;xe&&(ct=xe[0],te(Ve,oe([0,1],xe)));for(var be=1,Ne=!0;be<Ve.length;be+=1){var Ae=Ve[be],Ue=de(Ae,0,1),rt=de(Ae,-1);if((Ue==='"'||Ue==="'"||Ue==="`"||rt==='"'||rt==="'"||rt==="`")&&Ue!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!Ne)&&(sn=!0),ct+="."+Ae,Rt="%"+ct+"%",ne(M,Rt))Ut=M[Rt];else if(Ut!=null){if(!(Ae in Ut)){if(!Xe)throw new l("base intrinsic for "+Je+" exists, but the property is not available.");return}if(C&&be+1>=Ve.length){var Me=C(Ut,Ae);Ne=!!Me,Ne&&"get"in Me&&!("originalValue"in Me.get)?Ut=Me.get:Ut=Ut[Ae]}else Ne=ne(Ut,Ae),Ut=Ut[Ae];Ne&&!sn&&(M[Rt]=Ut)}}return Ut},Z_}var Y_,gj;function k5(){if(gj)return Y_;gj=1;var t=N5(),e=BP(),n=e([t("%String.prototype.indexOf%")]);return Y_=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},Y_}var X_,yj;function C5(){if(yj)return X_;yj=1;var t=DP();return X_=function(){return t()&&!!Symbol.toStringTag},X_}var e0,bj;function T5(){if(bj)return e0;bj=1;var t=k5(),e=t("String.prototype.valueOf"),n=function(l){try{return e(l),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=C5()();return e0=function(l){return typeof l=="string"?!0:!l||typeof l!="object"?!1:s?n(l):r(l)===i},e0}var j5=T5();const R5=co(j5),kv=t=>R5(t),O5=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const l=n.regionLowerCase?s.toLowerCase():s;if(e.includes(l))return r.push({index:o,appLocale:l}),!0;const{isAvailable:u,appLocale:f}=q5(l,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?f.toLowerCase():f}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},q5=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!Ey()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=Ey()?new Intl.Locale(t).minimize().language:t.split("-")[0],l=Ey()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===l;return u&&(r=s),u}),appLocale:r}},A5=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},Ey=()=>Intl&&"Locale"in Intl,P5=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=Ey()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:l}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${l}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},F5=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=A5(n),i=P5([...r,t],n);return O5(i,e,n)[0]||t},D5=({available:t,fallback:e})=>F5(e,t,{languageOnly:!0});var t0={exports:{}};const L5={},M5=Object.freeze(Object.defineProperty({__proto__:null,default:L5},Symbol.toStringTag,{value:"Module"})),vj=rB(M5);var xj;function $5(){return xj||(xj=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Mc:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),f=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],b=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function($){return Object.prototype.toString.call($)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function($){return typeof $=="object"&&$.buffer&&$.buffer.constructor===ArrayBuffer});var _=function($,W){return function(P){return new R(W,!0).update(P)[$]()}},E=function($){var W=_("hex",$);s&&(W=k(W,$)),W.create=function(){return new R($)},W.update=function(z){return W.create().update(z)};for(var P=0;P<b.length;++P){var O=b[P];W[O]=_(O,$)}return W},k=function($,W){var P=vj,O=vj.Buffer,z=W?"sha224":"sha256",F;O.from&&!r.JS_SHA256_NO_BUFFER_FROM?F=O.from:F=function(U){return new O(U)};var V=function(U){if(typeof U=="string")return P.createHash(z).update(U,"utf8").digest("hex");if(U==null)throw new Error(e);return U.constructor===ArrayBuffer&&(U=new Uint8Array(U)),Array.isArray(U)||ArrayBuffer.isView(U)||U.constructor===O?P.createHash(z).update(F(U)).digest("hex"):$(U)};return V},j=function($,W){return function(P,O){return new q(P,W,!0).update(O)[$]()}},C=function($){var W=j("hex",$);W.create=function(z){return new q(z,$)},W.update=function(z,F){return W.create(z).update(F)};for(var P=0;P<b.length;++P){var O=b[P];W[O]=j(O,$)}return W};function R($,W){W?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=$}R.prototype.update=function($){if(!this.finalized){var W,P=typeof $;if(P!=="string"){if(P==="object"){if($===null)throw new Error(e);if(l&&$.constructor===ArrayBuffer)$=new Uint8Array($);else if(!Array.isArray($)&&(!l||!ArrayBuffer.isView($)))throw new Error(e)}else throw new Error(e);W=!0}for(var O,z=0,F,V=$.length,U=this.blocks;z<V;){if(this.hashed&&(this.hashed=!1,U[0]=this.block,this.block=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0),W)for(F=this.start;z<V&&F<64;++z)U[F>>>2]|=$[z]<<p[F++&3];else for(F=this.start;z<V&&F<64;++z)O=$.charCodeAt(z),O<128?U[F>>>2]|=O<<p[F++&3]:O<2048?(U[F>>>2]|=(192|O>>>6)<<p[F++&3],U[F>>>2]|=(128|O&63)<<p[F++&3]):O<55296||O>=57344?(U[F>>>2]|=(224|O>>>12)<<p[F++&3],U[F>>>2]|=(128|O>>>6&63)<<p[F++&3],U[F>>>2]|=(128|O&63)<<p[F++&3]):(O=65536+((O&1023)<<10|$.charCodeAt(++z)&1023),U[F>>>2]|=(240|O>>>18)<<p[F++&3],U[F>>>2]|=(128|O>>>12&63)<<p[F++&3],U[F>>>2]|=(128|O>>>6&63)<<p[F++&3],U[F>>>2]|=(128|O&63)<<p[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=U[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var $=this.blocks,W=this.lastByteIndex;$[16]=this.block,$[W>>>2]|=f[W&3],this.block=$[16],W>=56&&(this.hashed||this.hash(),$[0]=this.block,$[16]=$[1]=$[2]=$[3]=$[4]=$[5]=$[6]=$[7]=$[8]=$[9]=$[10]=$[11]=$[12]=$[13]=$[14]=$[15]=0),$[14]=this.hBytes<<3|this.bytes>>>29,$[15]=this.bytes<<3,this.hash()}},R.prototype.hash=function(){var $=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,F=this.h5,V=this.h6,U=this.h7,M=this.blocks,X,J,le,ie,ne,oe,te,ue,de,ye,we;for(X=16;X<64;++X)ne=M[X-15],J=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=M[X-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,M[X]=M[X-16]+J+M[X-7]+le<<0;for(we=W&P,X=0;X<64;X+=4)this.first?(this.is224?(ue=300032,ne=M[0]-0x543c9a5b,U=ne-0x8f1a6c7<<0,O=ne+0x170e9b5<<0):(ue=0x2a01a605,ne=M[0]-0xc881298,U=ne-0x5ab00ac6<<0,O=ne+0x8909ae5<<0),this.first=!1):(J=($>>>2|$<<30)^($>>>13|$<<19)^($>>>22|$<<10),le=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),ue=$&W,ie=ue^$&P^we,te=z&F^~z&V,ne=U+le+te+h[X]+M[X],oe=J+ie,U=O+ne<<0,O=ne+oe<<0),J=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),le=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),de=O&$,ie=de^O&W^ue,te=U&z^~U&F,ne=V+le+te+h[X+1]+M[X+1],oe=J+ie,V=P+ne<<0,P=ne+oe<<0,J=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),ye=P&O,ie=ye^P&$^de,te=V&U^~V&z,ne=F+le+te+h[X+2]+M[X+2],oe=J+ie,F=W+ne<<0,W=ne+oe<<0,J=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),le=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),we=W&P,ie=we^W&O^ye,te=F&V^~F&U,ne=z+le+te+h[X+3]+M[X+3],oe=J+ie,z=$+ne<<0,$=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+$<<0,this.h1=this.h1+W<<0,this.h2=this.h2+P<<0,this.h3=this.h3+O<<0,this.h4=this.h4+z<<0,this.h5=this.h5+F<<0,this.h6=this.h6+V<<0,this.h7=this.h7+U<<0},R.prototype.hex=function(){this.finalize();var $=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,F=this.h5,V=this.h6,U=this.h7,M=u[$>>>28&15]+u[$>>>24&15]+u[$>>>20&15]+u[$>>>16&15]+u[$>>>12&15]+u[$>>>8&15]+u[$>>>4&15]+u[$&15]+u[W>>>28&15]+u[W>>>24&15]+u[W>>>20&15]+u[W>>>16&15]+u[W>>>12&15]+u[W>>>8&15]+u[W>>>4&15]+u[W&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[O>>>28&15]+u[O>>>24&15]+u[O>>>20&15]+u[O>>>16&15]+u[O>>>12&15]+u[O>>>8&15]+u[O>>>4&15]+u[O&15]+u[z>>>28&15]+u[z>>>24&15]+u[z>>>20&15]+u[z>>>16&15]+u[z>>>12&15]+u[z>>>8&15]+u[z>>>4&15]+u[z&15]+u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15];return this.is224||(M+=u[U>>>28&15]+u[U>>>24&15]+u[U>>>20&15]+u[U>>>16&15]+u[U>>>12&15]+u[U>>>8&15]+u[U>>>4&15]+u[U&15]),M},R.prototype.toString=R.prototype.hex,R.prototype.digest=function(){this.finalize();var $=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,F=this.h5,V=this.h6,U=this.h7,M=[$>>>24&255,$>>>16&255,$>>>8&255,$&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255];return this.is224||M.push(U>>>24&255,U>>>16&255,U>>>8&255,U&255),M},R.prototype.array=R.prototype.digest,R.prototype.arrayBuffer=function(){this.finalize();var $=new ArrayBuffer(this.is224?28:32),W=new DataView($);return W.setUint32(0,this.h0),W.setUint32(4,this.h1),W.setUint32(8,this.h2),W.setUint32(12,this.h3),W.setUint32(16,this.h4),W.setUint32(20,this.h5),W.setUint32(24,this.h6),this.is224||W.setUint32(28,this.h7),$};function q($,W,P){var O,z=typeof $;if(z==="string"){var F=[],V=$.length,U=0,M;for(O=0;O<V;++O)M=$.charCodeAt(O),M<128?F[U++]=M:M<2048?(F[U++]=192|M>>>6,F[U++]=128|M&63):M<55296||M>=57344?(F[U++]=224|M>>>12,F[U++]=128|M>>>6&63,F[U++]=128|M&63):(M=65536+((M&1023)<<10|$.charCodeAt(++O)&1023),F[U++]=240|M>>>18,F[U++]=128|M>>>12&63,F[U++]=128|M>>>6&63,F[U++]=128|M&63);$=F}else if(z==="object"){if($===null)throw new Error(e);if(l&&$.constructor===ArrayBuffer)$=new Uint8Array($);else if(!Array.isArray($)&&(!l||!ArrayBuffer.isView($)))throw new Error(e)}else throw new Error(e);$.length>64&&($=new R(W,!0).update($).array());var X=[],J=[];for(O=0;O<64;++O){var le=$[O]||0;X[O]=92^le,J[O]=54^le}R.call(this,W,P),this.update(J),this.oKeyPad=X,this.inner=!0,this.sharedMemory=P}q.prototype=new R,q.prototype.finalize=function(){if(R.prototype.finalize.call(this),this.inner){this.inner=!1;var $=this.array();R.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update($),R.prototype.finalize.call(this)}};var L=E();L.sha256=L,L.sha224=E(!0),L.sha256.hmac=C(),L.sha224.hmac=C(!0),o?t.exports=L:(r.sha256=L.sha256,r.sha224=L.sha224)})()}(t0)),t0.exports}var dE=$5();const B5=dE.sha224,zP=({index:t,key:e,fallback:n})=>t[B5(e)]?.value??t[e]?.value??n??e,z5=({index:t,key:e,fallback:n})=>zP({index:t,key:e,fallback:n}),W5=({index:t,key:e,fallback:n})=>zP({index:t,key:e,fallback:n}),ia={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>z5({index:ia.index,key:t,fallback:e}),rich:(t,e)=>W5({index:ia.index,key:t,fallback:e})};function Ml(t){return typeof t>"u"||t===void 0}function Ps(t){return typeof t=="string"}function Cv(t){return typeof t=="number"}function pb(t){return typeof t=="boolean"}function RI(t){return t===null}function V5(t){return t instanceof Date}function OI(t){return typeof t=="bigint"}function Ls(t){return typeof t=="function"}function Jo(t){return typeof t=="object"&&t!==null}function G(t){return Object.freeze(t)}function zg(t){return Va(t)?t:[t]}function Va(t){return Array.isArray(t)}function $l(t){return t}const Gn=G({is(t){return t.kind==="AlterTableNode"},create(t){return G({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return G({...t,...e})},cloneWithColumnAlteration(t,e){return G({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),br=G({is(t){return t.kind==="IdentifierNode"},create(t){return G({kind:"IdentifierNode",name:t})}}),Oa=G({is(t){return t.kind==="CreateIndexNode"},create(t){return G({kind:"CreateIndexNode",name:br.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}}),WP=G({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return G({kind:"CreateSchemaNode",schema:br.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),U5=["preserve rows","delete rows","drop"],_s=G({is(t){return t.kind==="CreateTableNode"},create(t){return G({kind:"CreateTableNode",table:t,columns:G([])})},cloneWithColumn(t,e){return G({...t,columns:G([...t.columns,e])})},cloneWithConstraint(t,e){return G({...t,constraints:t.constraints?G([...t.constraints,e]):G([e])})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWith(t,e){return G({...t,...e})}}),Hl=G({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return G({kind:"SchemableIdentifierNode",identifier:br.create(t)})},createWithSchema(t,e){return G({kind:"SchemableIdentifierNode",schema:br.create(t),identifier:br.create(e)})}}),Qp=G({is(t){return t.kind==="DropIndexNode"},create(t,e){return G({kind:"DropIndexNode",name:Hl.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),fE=G({is(t){return t.kind==="DropSchemaNode"},create(t,e){return G({kind:"DropSchemaNode",schema:br.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),pE=G({is(t){return t.kind==="DropTableNode"},create(t,e){return G({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return G({...t,...e})}}),ic=G({is(t){return t.kind==="AliasNode"},create(t,e){return G({kind:"AliasNode",node:t,alias:e})}}),Bl=G({is(t){return t.kind==="TableNode"},create(t){return G({kind:"TableNode",table:Hl.create(t)})},createWithSchema(t,e){return G({kind:"TableNode",table:Hl.createWithSchema(t,e)})}});function gs(t){return Jo(t)&&Ls(t.toOperationNode)}function H5(t){return Jo(t)&&"expressionType"in t&&gs(t)}function K5(t){return Jo(t)&&"expression"in t&&Ps(t.alias)&&gs(t)}const Ca=G({is(t){return t.kind==="SelectModifierNode"},create(t,e){return G({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return G({kind:"SelectModifierNode",rawModifier:t})}}),Kl=G({is(t){return t.kind==="AndNode"},create(t,e){return G({kind:"AndNode",left:t,right:e})}}),uf=G({is(t){return t.kind==="OrNode"},create(t,e){return G({kind:"OrNode",left:t,right:e})}}),n0=G({is(t){return t.kind==="OnNode"},create(t){return G({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return G({...t,on:e==="And"?Kl.create(t.on,n):uf.create(t.on,n)})}}),Gp=G({is(t){return t.kind==="JoinNode"},create(t,e){return G({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return G({kind:"JoinNode",joinType:t,table:e,on:n0.create(n)})},cloneWithOn(t,e){return G({...t,on:t.on?n0.cloneWithOperation(t.on,"And",e):n0.create(e)})}}),$d=G({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return G({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),Q5=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],G5=["+","-","*","/","%","^","&","|","#","<<",">>"],VP=["->","->>"],J5=[...Q5,...G5,"&&","||"],Z5=["exists","not exists"],Y5=["not","-",...Z5],X5=[...J5,...VP,...Y5,"between","between symmetric"],Ql=G({is(t){return t.kind==="OperatorNode"},create(t){return G({kind:"OperatorNode",operator:t})}});function wj(t){return Ps(t)&&VP.includes(t)}const Ur=G({is(t){return t.kind==="ColumnNode"},create(t){return G({kind:"ColumnNode",column:br.create(t)})}}),qI=G({is(t){return t.kind==="SelectAllNode"},create(){return G({kind:"SelectAllNode"})}}),Tv=G({is(t){return t.kind==="ReferenceNode"},create(t,e){return G({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return G({kind:"ReferenceNode",table:t,column:qI.create()})}});class e8{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return GP(this.#e)}}function UP(t){return Jo(t)&&gs(t)&&Ps(t.dynamicReference)}const hE=G({is(t){return t.kind==="OrderByItemNode"},create(t,e){return G({kind:"OrderByItemNode",orderBy:t,direction:e})}}),ki=G({is(t){return t.kind==="RawNode"},create(t,e){return G({kind:"RawNode",sqlFragments:G(t),parameters:G(e)})},createWithSql(t){return ki.create([t],[])},createWithChild(t){return ki.create(["",""],[t])},createWithChildren(t){return ki.create(new Array(t.length+1).fill(""),t)}});function HP(t){return t==="asc"||t==="desc"}function im(t){if(t.length===2)return[r0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>r0(n)):[r0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function r0(t,e){const n=t8(t);if(hE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return hE.create(n,KP(e))}function t8(t){if(cm(t))return pu(t);if(UP(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!HP(n))throw new Error(`Invalid order by direction: ${n}`);return hE.create(Ua(e),KP(n))}return Ua(t)}function KP(t){if(t)return t==="asc"||t==="desc"?ki.createWithSql(t):t.toOperationNode()}const hb=G({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return G({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return G({...t,traversal:e})}}),QP=G({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return G({kind:"JSONOperatorChainNode",operator:t,values:G([])})},cloneWithValue(t,e){return G({...t,values:G([...t.values,e])})}}),Jp=G({is(t){return t.kind==="JSONPathNode"},create(t){return G({kind:"JSONPathNode",inOperator:t,pathLegs:G([])})},cloneWithLeg(t,e){return G({...t,pathLegs:G([...t.pathLegs,e])})}});function GP(t){return Ps(t)?Ua(t):t.toOperationNode()}function uh(t){return Va(t)?t.map(e=>Cs(e)):[Cs(t)]}function Cs(t){return cm(t)?pu(t):GP(t)}function n8(t,e){const n=Ua(t);if(wj(e))return hb.create(n,QP.create(Ql.create(e)));const r=e.slice(0,-1);if(wj(r))return hb.create(n,Jp.create(Ql.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Ua(t){const e=".";if(!t.includes(e))return Tv.create(Ur.create(t));const n=t.split(e).map(AI);if(n.length===3)return i8(n);if(n.length===2)return s8(n);throw new Error(`invalid column reference ${t}`)}function r8(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(AI);return ic.create(Ua(n),br.create(r))}else return Ua(t)}function JP(t){return Ur.create(t)}function mb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(AI);if(!HP(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return im([n,r])[0]}else return JP(t)}function i8(t){const[e,n,r]=t;return Tv.create(Ur.create(r),Bl.createWithSchema(e,n))}function s8(t){const[e,n]=t;return Tv.create(Ur.create(n),Bl.create(e))}function AI(t){return t.trim()}const ZP=G({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return G({kind:"PrimitiveValueListNode",values:G([...t])})}}),PI=G({is(t){return t.kind==="ValueListNode"},create(t){return G({kind:"ValueListNode",values:G(t)})}}),sa=G({is(t){return t.kind==="ValueNode"},create(t){return G({kind:"ValueNode",value:t})},createImmediate(t){return G({kind:"ValueNode",value:t,immediate:!0})}});function o8(t){return Va(t)?a8(t):Zr(t)}function Zr(t){return cm(t)?pu(t):sa.create(t)}function FI(t){return Cv(t)||pb(t)||RI(t)}function DI(t){if(!FI(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return sa.createImmediate(t)}function a8(t){return t.some(cm)?PI.create(t.map(e=>Zr(e))):ZP.create(t)}const Bd=G({is(t){return t.kind==="ParensNode"},create(t){return G({kind:"ParensNode",node:t})}});function gi(t){if(t.length===3)return LI(t[0],t[1],t[2]);if(t.length===1)return Zr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function LI(t,e,n){return l8(e)&&YP(n)?$d.create(Cs(t),mE(e),sa.createImmediate(n)):$d.create(Cs(t),mE(e),o8(n))}function oa(t,e,n){return $d.create(Cs(t),mE(e),Cs(n))}function _j(t,e){return gb(Object.entries(t).filter(([,n])=>!Ml(n)).map(([n,r])=>LI(n,YP(r)?"is":"=",r)),e)}function gb(t,e,n=!0){const r=e==="and"?Kl.create:uf.create;if(t.length===0)return $d.create(sa.createImmediate(1),Ql.create("="),sa.createImmediate(e==="and"?1:0));let i=Sj(t[0]);for(let s=1;s<t.length;++s)i=r(i,Sj(t[s]));return t.length>1&&n?Bd.create(i):i}function l8(t){return t==="is"||t==="is not"}function YP(t){return RI(t)||pb(t)}function mE(t){if(Ps(t)&&X5.includes(t))return Ql.create(t);if(gs(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Sj(t){return gs(t)?t.toOperationNode():t}const Gl=G({is(t){return t.kind==="OrderByNode"},create(t){return G({kind:"OrderByNode",items:G([...t])})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),Ej=G({is(t){return t.kind==="PartitionByNode"},create(t){return G({kind:"PartitionByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),gE=G({is(t){return t.kind==="OverNode"},create(){return G({kind:"OverNode"})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithPartitionByItems(t,e){return G({...t,partitionBy:t.partitionBy?Ej.cloneWithItems(t.partitionBy,e):Ej.create(e)})}}),yb=G({is(t){return t.kind==="FromNode"},create(t){return G({kind:"FromNode",froms:G(t)})},cloneWithFroms(t,e){return G({...t,froms:G([...t.froms,...e])})}}),Ij=G({is(t){return t.kind==="GroupByNode"},create(t){return G({kind:"GroupByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),Nj=G({is(t){return t.kind==="HavingNode"},create(t){return G({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return G({...t,having:e==="And"?Kl.create(t.having,n):uf.create(t.having,n)})}}),Qn=G({is(t){return t.kind==="SelectQueryNode"},create(t){return G({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return G({kind:"SelectQueryNode",from:yb.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})},cloneWithDistinctOn(t,e){return G({...t,distinctOn:t.distinctOn?G([...t.distinctOn,...e]):G(e)})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithGroupByItems(t,e){return G({...t,groupBy:t.groupBy?Ij.cloneWithItems(t.groupBy,e):Ij.create(e)})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithOffset(t,e){return G({...t,offset:e})},cloneWithFetch(t,e){return G({...t,fetch:e})},cloneWithHaving(t,e){return G({...t,having:t.having?Nj.cloneWithOperation(t.having,"And",e):Nj.create(e)})},cloneWithSetOperations(t,e){return G({...t,setOperations:t.setOperations?G([...t.setOperations,...e]):G([...e])})},cloneWithoutSelections(t){return G({...t,selections:[]})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithoutOffset(t){return G({...t,offset:void 0})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return G({...t,groupBy:void 0})}});function Nn(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Nd{#e;constructor(e){this.#e=G(e)}on(...e){return new Nd({...this.#e,joinNode:Gp.cloneWithOn(this.#e.joinNode,gi(e))})}onRef(e,n,r){return new Nd({...this.#e,joinNode:Gp.cloneWithOn(this.#e.joinNode,oa(e,n,r))})}onTrue(){return new Nd({...this.#e,joinNode:Gp.cloneWithOn(this.#e.joinNode,ki.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}Nn(Nd,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const c8=G({is(t){return t.kind==="PartitionByItemNode"},create(t){return G({kind:"PartitionByItemNode",partitionBy:t})}});function u8(t){return uh(t).map(c8.create)}class dh{#e;constructor(e){this.#e=G(e)}orderBy(e,n){return new dh({overNode:gE.cloneWithOrderByItems(this.#e.overNode,im([e,n]))})}partitionBy(e){return new dh({overNode:gE.cloneWithPartitionByItems(this.#e.overNode,u8(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}Nn(dh,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Zp=G({is(t){return t.kind==="SelectionNode"},create(t){return G({kind:"SelectionNode",selection:t})},createSelectAll(){return G({kind:"SelectionNode",selection:qI.create()})},createSelectAllFromTable(t){return G({kind:"SelectionNode",selection:Tv.createSelectAll(t)})}});function Po(t){return Ls(t)?Po(t(ff())):Va(t)?t.map(e=>kj(e)):[kj(t)]}function kj(t){return Ps(t)?Zp.create(r8(t)):UP(t)?Zp.create(t.toOperationNode()):Zp.create(dF(t))}function aa(t){return t?Array.isArray(t)?t.map(Cj):[Cj(t)]:[Zp.createSelectAll()]}function Cj(t){if(Ps(t))return Zp.createSelectAllFromTable(zr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const d8=G({is(t){return t.kind==="ValuesNode"},create(t){return G({kind:"ValuesNode",values:G(t)})}}),f8=G({is(t){return t.kind==="DefaultInsertValueNode"},create(){return G({kind:"DefaultInsertValueNode"})}});function XP(t){const e=Ls(t)?t(ff()):t,n=Va(e)?e:G([e]);return p8(n)}function p8(t){const e=h8(t);return[G([...e.keys()].map(Ur.create)),d8.create(t.map(n=>m8(n,e)))]}function h8(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function m8(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const l=e.get(o);if(Ml(l))continue;const u=t[o];(Ml(u)||cm(u))&&(i=!0),r[l]=u}if(n.length<e.size||i){const o=f8.create();return PI.create(r.map(l=>Ml(l)?o:Zr(l)))}return ZP.create(r)}const Is=G({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return G({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return G({kind:"InsertQueryNode"})},cloneWith(t,e){return G({...t,...e})}}),kd=G({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return G({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return G({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return G({...t,from:t.from?yb.cloneWithFroms(t.from,e):yb.create(e)})},cloneWithUpdates(t,e){return G({...t,updates:t.updates?G([...t.updates,...e]):e})},cloneWithLimit(t,e){return G({...t,limit:e})}}),Tj=G({is(t){return t.kind==="UsingNode"},create(t){return G({kind:"UsingNode",tables:G(t)})},cloneWithTables(t,e){return G({...t,tables:G([...t.tables,...e])})}}),Fc=G({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return G({kind:"DeleteQueryNode",from:yb.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithUsing(t,e){return G({...t,using:t.using!==void 0?Tj.cloneWithTables(t.using,e):Tj.create(e)})}}),ds=G({is(t){return t.kind==="WhereNode"},create(t){return G({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return G({...t,where:e==="And"?Kl.create(t.where,n):uf.create(t.where,n)})}}),jj=G({is(t){return t.kind==="ReturningNode"},create(t){return G({kind:"ReturningNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),g8=G({is(t){return t.kind==="ExplainNode"},create(t,e){return G({kind:"ExplainNode",format:t,options:e})}}),sm=G({is(t){return t.kind==="WhenNode"},create(t){return G({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return G({...t,result:e})}}),fs=G({is(t){return t.kind==="MergeQueryNode"},create(t,e){return G({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return G({...t,using:e})},cloneWithWhen(t,e){return G({...t,whens:t.whens?G([...t.whens,e]):G([e])})},cloneWithThen(t,e){return G({...t,whens:t.whens?G([...t.whens.slice(0,-1),sm.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),Rj=G({is(t){return t.kind==="OutputNode"},create(t){return G({kind:"OutputNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),Dt=G({is(t){return Qn.is(t)||Is.is(t)||kd.is(t)||Fc.is(t)||fs.is(t)},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWithWhere(t,e){return G({...t,where:t.where?ds.cloneWithOperation(t.where,"And",e):ds.create(e)})},cloneWithJoin(t,e){return G({...t,joins:t.joins?G([...t.joins,e]):G([e])})},cloneWithReturning(t,e){return G({...t,returning:t.returning?jj.cloneWithSelections(t.returning,e):jj.create(e)})},cloneWithoutReturning(t){return G({...t,returning:void 0})},cloneWithoutWhere(t){return G({...t,where:void 0})},cloneWithExplain(t,e,n){return G({...t,explain:g8.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return G({...t,top:e})},cloneWithOutput(t,e){return G({...t,output:t.output?Rj.cloneWithSelections(t.output,e):Rj.create(e)})}}),eF=G({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return G({kind:"ColumnUpdateNode",column:t,value:e})}});function y8(...t){return t.length===2?[eF.create(Cs(t[0]),Zr(t[1]))]:MI(t[0])}function MI(t){const e=Ls(t)?t(ff()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>eF.create(Ur.create(n),Zr(r)))}const b8=G({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return G({kind:"OnDuplicateKeyNode",updates:t})}});class v8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class om extends Error{node;constructor(e){super("no result"),this.node=e}}function am(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Ss=G({is(t){return t.kind==="OnConflictNode"},create(){return G({kind:"OnConflictNode"})},cloneWith(t,e){return G({...t,...e})},cloneWithIndexWhere(t,e){return G({...t,indexWhere:t.indexWhere?ds.cloneWithOperation(t.indexWhere,"And",e):ds.create(e)})},cloneWithIndexOrWhere(t,e){return G({...t,indexWhere:t.indexWhere?ds.cloneWithOperation(t.indexWhere,"Or",e):ds.create(e)})},cloneWithUpdateWhere(t,e){return G({...t,updateWhere:t.updateWhere?ds.cloneWithOperation(t.updateWhere,"And",e):ds.create(e)})},cloneWithUpdateOrWhere(t,e){return G({...t,updateWhere:t.updateWhere?ds.cloneWithOperation(t.updateWhere,"Or",e):ds.create(e)})},cloneWithoutIndexWhere(t){return G({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return G({...t,updateWhere:void 0})}});class Go{#e;constructor(e){this.#e=G(e)}column(e){const n=Ur.create(e);return new Go({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,n]):G([n])})})}columns(e){const n=e.map(Ur.create);return new Go({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,...n]):G(n)})})}constraint(e){return new Go({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{constraint:br.create(e)})})}expression(e){return new Go({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Go({...this.#e,onConflictNode:Ss.cloneWithIndexWhere(this.#e.onConflictNode,gi(e))})}whereRef(e,n,r){return new Go({...this.#e,onConflictNode:Ss.cloneWithIndexWhere(this.#e.onConflictNode,oa(e,n,r))})}clearWhere(){return new Go({...this.#e,onConflictNode:Ss.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new tF({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Cd({...this.#e,onConflictNode:Ss.cloneWith(this.#e.onConflictNode,{updates:MI(e)})})}$call(e){return e(this)}}Nn(Go,"don't await OnConflictBuilder instances.");class tF{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.onConflictNode}}Nn(tF,"don't await OnConflictDoNothingBuilder instances.");class Cd{#e;constructor(e){this.#e=G(e)}where(...e){return new Cd({...this.#e,onConflictNode:Ss.cloneWithUpdateWhere(this.#e.onConflictNode,gi(e))})}whereRef(e,n,r){return new Cd({...this.#e,onConflictNode:Ss.cloneWithUpdateWhere(this.#e.onConflictNode,oa(e,n,r))})}clearWhere(){return new Cd({...this.#e,onConflictNode:Ss.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}Nn(Cd,"don't await OnConflictUpdateBuilder instances.");const x8=G({is(t){return t.kind==="TopNode"},create(t,e){return G({kind:"TopNode",expression:t,modifiers:e})}});function df(t,e){if(!Cv(t)&&!OI(t))throw new Error(`Invalid top expression: ${t}`);if(!Ml(e)&&!w8(e))throw new Error(`Invalid top modifiers: ${e}`);return x8.create(t,e)}function w8(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class mr{#e;constructor(e){this.#e=G(e)}values(e){const[n,r]=XP(e);return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{columns:G(e.map(Ur.create))})})}expression(e){return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{values:pu(e)})})}defaultValues(){return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new mr({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new mr({...this.#e,queryNode:Dt.cloneWithTop(this.#e.queryNode,df(e,n))})}onConflict(e){return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{onConflict:e(new Go({onConflictNode:Ss.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new mr({...this.#e,queryNode:Is.cloneWith(this.#e.queryNode,{onDuplicateKey:b8.create(MI(e))})})}returning(e){return new mr({...this.#e,queryNode:Dt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(){return new mr({...this.#e,queryNode:Dt.cloneWithReturning(this.#e.queryNode,aa())})}output(e){return new mr({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new mr({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,aa(e))})}clearReturning(){return new mr({...this.#e,queryNode:Dt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new mr({...this.#e})}$castTo(){return new mr(this.#e)}$narrowType(){return new mr(this.#e)}$assertType(){return new mr(this.#e)}withPlugin(e){return new mr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new v8(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new mr({...this.#e,queryNode:Dt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(mr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class _8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const $I=G({is(t){return t.kind==="LimitNode"},create(t){return G({kind:"LimitNode",limit:t})}});class Kn{#e;constructor(e){this.#e=G(e)}where(...e){return new Kn({...this.#e,queryNode:Dt.cloneWithWhere(this.#e.queryNode,gi(e))})}whereRef(e,n,r){return new Kn({...this.#e,queryNode:Dt.cloneWithWhere(this.#e.queryNode,oa(e,n,r))})}clearWhere(){return new Kn({...this.#e,queryNode:Dt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Kn({...this.#e,queryNode:Dt.cloneWithTop(this.#e.queryNode,df(e,n))})}using(e){return new Kn({...this.#e,queryNode:Fc.cloneWithUsing(this.#e.queryNode,hh(e))})}innerJoin(...e){return new Kn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("InnerJoin",e))})}leftJoin(...e){return new Kn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("LeftJoin",e))})}rightJoin(...e){return new Kn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("RightJoin",e))})}fullJoin(...e){return new Kn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("FullJoin",e))})}returning(e){return new Kn({...this.#e,queryNode:Dt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Kn({...this.#e,queryNode:Dt.cloneWithReturning(this.#e.queryNode,aa(e))})}output(e){return new Kn({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Kn({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,aa(e))})}clearReturning(){return new Kn({...this.#e,queryNode:Dt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Kn({...this.#e,queryNode:Fc.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Kn({...this.#e,queryNode:Fc.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Kn({...this.#e,queryNode:Fc.cloneWithOrderByItems(this.#e.queryNode,im([e,n]))})}limit(e){return new Kn({...this.#e,queryNode:Fc.cloneWithLimit(this.#e.queryNode,$I.create(Zr(e)))})}modifyEnd(e){return new Kn({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Kn({...this.#e})}$castTo(){return new Kn(this.#e)}$narrowType(){return new Kn(this.#e)}$assertType(){return new Kn(this.#e)}withPlugin(e){return new Kn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new _8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Kn({...this.#e,queryNode:Dt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(Kn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class S8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class Yn{#e;constructor(e){this.#e=G(e)}where(...e){return new Yn({...this.#e,queryNode:Dt.cloneWithWhere(this.#e.queryNode,gi(e))})}whereRef(e,n,r){return new Yn({...this.#e,queryNode:Dt.cloneWithWhere(this.#e.queryNode,oa(e,n,r))})}clearWhere(){return new Yn({...this.#e,queryNode:Dt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Yn({...this.#e,queryNode:Dt.cloneWithTop(this.#e.queryNode,df(e,n))})}from(e){return new Yn({...this.#e,queryNode:kd.cloneWithFromItems(this.#e.queryNode,hh(e))})}innerJoin(...e){return new Yn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("InnerJoin",e))})}leftJoin(...e){return new Yn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("LeftJoin",e))})}rightJoin(...e){return new Yn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("RightJoin",e))})}fullJoin(...e){return new Yn({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("FullJoin",e))})}limit(e){return new Yn({...this.#e,queryNode:kd.cloneWithLimit(this.#e.queryNode,$I.create(Zr(e)))})}set(...e){return new Yn({...this.#e,queryNode:kd.cloneWithUpdates(this.#e.queryNode,y8(...e))})}returning(e){return new Yn({...this.#e,queryNode:Dt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Yn({...this.#e,queryNode:Dt.cloneWithReturning(this.#e.queryNode,aa(e))})}output(e){return new Yn({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Yn({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,aa(e))})}modifyEnd(e){return new Yn({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new Yn({...this.#e,queryNode:Dt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new Yn({...this.#e})}$castTo(){return new Yn(this.#e)}$narrowType(){return new Yn(this.#e)}$assertType(){return new Yn(this.#e)}withPlugin(e){return new Yn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new S8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Yn({...this.#e,queryNode:Dt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(Yn,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Oj=G({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return G({kind:"CommonTableExpressionNameNode",table:Bl.create(t),columns:e?G(e.map(Ur.create)):void 0})}}),bb=G({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return G({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return G({...t,...e})}});class fh{#e;constructor(e){this.#e=G(e)}materialized(){return new fh({...this.#e,node:bb.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new fh({...this.#e,node:bb.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}Nn(fh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function qj(t,e){const n=e(P8()).toOperationNode();return Ls(t)?t(E8(n)).toOperationNode():bb.create(nF(t),n)}function E8(t){return e=>new fh({node:bb.create(nF(e),t)})}function nF(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return Oj.create(n,r)}else return Oj.create(t)}const Wg=G({is(t){return t.kind==="WithNode"},create(t,e){return G({kind:"WithNode",expressions:G([t]),...e})},cloneWithExpression(t,e){return G({...t,expressions:G([...t.expressions,e])})}}),Aj=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function I8(t){let e="";for(let n=0;n<t;++n)e+=N8();return e}function N8(){return Aj[~~(Math.random()*Aj.length)]}function Jn(){return new k8}class k8{#e;get queryId(){return this.#e===void 0&&(this.#e=I8(8)),this.#e}}class rF{nodeStack=[];#e=G({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),G(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&G(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:G([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const C8=G({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class T8 extends rF{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:br.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Bl.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in C8}#i(e){const n=new Set;if("name"in e&&e.name&&Hl.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#c(e.with,n),n}#o(e,n){const r=Bl.is(e)?e:ic.is(e)&&Bl.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#c(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class lm{#e;constructor(e){this.#e=new T8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const j8=G({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return G({kind:"MatchedNode",not:t,bySource:e})}});function Pj(t,e,n){return sm.create(gb([j8.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?oa(e[0],e[1],e[2]):gi(e)]:[]],"and",!1))}function Yp(t){return Ps(t)?ki.create([t],[]):gs(t)?t.toOperationNode():t}class Fj{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const Dj=new Set;function R8(t){Dj.has(t)||(Dj.add(t),console.log(t))}const O8=G([]);class iF{#e;constructor(e=O8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return q8(i,s),s})}async *stream(e,n,r){const i=new Fj,s=new Fj;this.provideConnection(async l=>(i.resolve(l),await s.promise)).catch(l=>i.reject(l));const o=await i.promise;try{for await(const l of o.streamQuery(e,n))yield await this.#t(l,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function q8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||R8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class fd extends iF{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new fd([...this.plugins,e])}withPlugins(e){return new fd([...this.plugins,...e])}withPluginAtFront(e){return new fd([e,...this.plugins])}withoutPlugins(){return new fd([])}}const jv=new fd;class A8{numChangedRows;constructor(e){this.numChangedRows=e}}class Vc{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new Vc({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Vc({...this.#e,queryNode:Dt.cloneWithTop(this.#e.queryNode,df(e,n))})}using(...e){return new Ts({...this.#e,queryNode:fs.cloneWithUsing(this.#e.queryNode,Wi("Using",e))})}output(e){return new Vc({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Vc({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,aa(e))})}}Nn(Vc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Ts{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new Ts({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Ts({...this.#e,queryNode:Dt.cloneWithTop(this.#e.queryNode,df(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new yE({...this.#e,queryNode:fs.cloneWithWhen(this.#e.queryNode,Pj({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Ts({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Ts({...this.#e,queryNode:Dt.cloneWithOutput(this.#e.queryNode,aa(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:fs.cloneWithWhen(this.#e.queryNode,Pj({isMatched:!1,bySource:r},e,n))},s=r?yE:sF;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Ts({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new A8(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}Nn(Ts,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class yE{#e;constructor(e){this.#e=G(e)}thenDelete(){return new Ts({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp("delete"))})}thenDoNothing(){return new Ts({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp("do nothing"))})}thenUpdate(e){return new Ts({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp(e(new Yn({queryId:this.#e.queryId,executor:jv,queryNode:kd.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}Nn(yE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class sF{#e;constructor(e){this.#e=G(e)}thenDoNothing(){return new Ts({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp("do nothing"))})}thenInsertValues(e){const[n,r]=XP(e);return new Ts({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp(Is.cloneWith(Is.createWithoutInto(),{columns:n,values:r})))})}}Nn(sF,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Rl{#e;constructor(e){this.#e=G(e)}selectFrom(e){return bE({queryId:Jn(),executor:this.#e.executor,queryNode:Qn.createFrom(hh(e),this.#e.withNode)})}selectNoFrom(e){return bE({queryId:Jn(),executor:this.#e.executor,queryNode:Qn.cloneWithSelections(Qn.create(this.#e.withNode),Po(e))})}insertInto(e){return new mr({queryId:Jn(),executor:this.#e.executor,queryNode:Is.create(zr(e),this.#e.withNode)})}replaceInto(e){return new mr({queryId:Jn(),executor:this.#e.executor,queryNode:Is.create(zr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Kn({queryId:Jn(),executor:this.#e.executor,queryNode:Fc.create(hh(e),this.#e.withNode)})}updateTable(e){return new Yn({queryId:Jn(),executor:this.#e.executor,queryNode:kd.create(mh(e),this.#e.withNode)})}mergeInto(e){return new Vc({queryId:Jn(),executor:this.#e.executor,queryNode:fs.create(fF(e),this.#e.withNode)})}with(e,n){const r=qj(e,n);return new Rl({...this.#e,withNode:this.#e.withNode?Wg.cloneWithExpression(this.#e.withNode,r):Wg.create(r)})}withRecursive(e,n){const r=qj(e,n);return new Rl({...this.#e,withNode:this.#e.withNode?Wg.cloneWithExpression(this.#e.withNode,r):Wg.create(r,{recursive:!0})})}withPlugin(e){return new Rl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Rl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Rl({...this.#e,executor:this.#e.executor.withPluginAtFront(new lm(e))})}}function P8(){return new Rl({executor:jv})}function F8(t,e){return new Nd({joinNode:Gp.create(t,mh(e))})}function D8(){return new dh({overNode:gE.create()})}function Wi(t,e){if(e.length===3)return M8(t,e[0],e[1],e[2]);if(e.length===2)return L8(t,e[0],e[1]);throw new Error("not implemented")}function L8(t,e,n){return n(F8(t,e)).toOperationNode()}function M8(t,e,n,r){return Gp.createWithOn(t,mh(e),oa(n,"=",r))}const $8=G({is(t){return t.kind==="OffsetNode"},create(t){return G({kind:"OffsetNode",offset:t})}}),B8=G({is(t){return t.kind==="GroupByItemNode"},create(t){return G({kind:"GroupByItemNode",groupBy:t})}});function z8(t){return t=Ls(t)?t(ff()):t,uh(t).map(B8.create)}const oF=G({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return G({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Yu(t,e,n){return Ls(e)&&(e=e(zI())),Va(e)||(e=[e]),e.map(r=>oF.create(t,pu(r),n))}class Xn{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new BI(this,e)}or(...e){return new vb(uf.create(this.#e,gi(e)))}and(...e){return new xb(Kl.create(this.#e,gi(e)))}$castTo(){return new Xn(this.#e)}$notNull(){return new Xn(this.#e)}toOperationNode(){return this.#e}}class BI{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ic.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():br.create(this.#t))}}class vb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new BI(this,e)}or(...e){return new vb(uf.create(this.#e,gi(e)))}$castTo(){return new vb(this.#e)}toOperationNode(){return Bd.create(this.#e)}}class xb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new BI(this,e)}and(...e){return new xb(Kl.create(this.#e,gi(e)))}$castTo(){return new xb(this.#e)}toOperationNode(){return Bd.create(this.#e)}}const W8={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:sa.create(t),modifier:e}}};function V8(t,e){if(!Cv(t)&&!OI(t))throw new Error(`Invalid fetch row count: ${t}`);if(!U8(e))throw new Error(`Invalid fetch modifier: ${e}`);return W8.create(t,e)}function U8(t){return t==="only"||t==="with ties"}class on{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new on({...this.#e,queryNode:Dt.cloneWithWhere(this.#e.queryNode,gi(e))})}whereRef(e,n,r){return new on({...this.#e,queryNode:Dt.cloneWithWhere(this.#e.queryNode,oa(e,n,r))})}having(...e){return new on({...this.#e,queryNode:Qn.cloneWithHaving(this.#e.queryNode,gi(e))})}havingRef(e,n,r){return new on({...this.#e,queryNode:Qn.cloneWithHaving(this.#e.queryNode,oa(e,n,r))})}select(e){return new on({...this.#e,queryNode:Qn.cloneWithSelections(this.#e.queryNode,Po(e))})}distinctOn(e){return new on({...this.#e,queryNode:Qn.cloneWithDistinctOn(this.#e.queryNode,uh(e))})}modifyFront(e){return new on({...this.#e,queryNode:Qn.cloneWithFrontModifier(this.#e.queryNode,Ca.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.createWithExpression(e.toOperationNode()))})}distinct(){return new on({...this.#e,queryNode:Qn.cloneWithFrontModifier(this.#e.queryNode,Ca.create("Distinct"))})}forUpdate(e){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForUpdate",e?zg(e).map(zr):void 0))})}forShare(e){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForShare",e?zg(e).map(zr):void 0))})}forKeyShare(e){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForKeyShare",e?zg(e).map(zr):void 0))})}forNoKeyUpdate(e){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForNoKeyUpdate",e?zg(e).map(zr):void 0))})}skipLocked(){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.create("SkipLocked"))})}noWait(){return new on({...this.#e,queryNode:Dt.cloneWithEndModifier(this.#e.queryNode,Ca.create("NoWait"))})}selectAll(e){return new on({...this.#e,queryNode:Qn.cloneWithSelections(this.#e.queryNode,aa(e))})}innerJoin(...e){return new on({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("InnerJoin",e))})}leftJoin(...e){return new on({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("LeftJoin",e))})}rightJoin(...e){return new on({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("RightJoin",e))})}fullJoin(...e){return new on({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("FullJoin",e))})}innerJoinLateral(...e){return new on({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("LateralInnerJoin",e))})}leftJoinLateral(...e){return new on({...this.#e,queryNode:Dt.cloneWithJoin(this.#e.queryNode,Wi("LateralLeftJoin",e))})}orderBy(...e){return new on({...this.#e,queryNode:Qn.cloneWithOrderByItems(this.#e.queryNode,im(e))})}groupBy(e){return new on({...this.#e,queryNode:Qn.cloneWithGroupByItems(this.#e.queryNode,z8(e))})}limit(e){return new on({...this.#e,queryNode:Qn.cloneWithLimit(this.#e.queryNode,$I.create(Zr(e)))})}offset(e){return new on({...this.#e,queryNode:Qn.cloneWithOffset(this.#e.queryNode,$8.create(Zr(e)))})}fetch(e,n="only"){return new on({...this.#e,queryNode:Qn.cloneWithFetch(this.#e.queryNode,V8(e,n))})}top(e,n){return new on({...this.#e,queryNode:Dt.cloneWithTop(this.#e.queryNode,df(e,n))})}union(e){return new on({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Yu("union",e,!1))})}unionAll(e){return new on({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Yu("union",e,!0))})}intersect(e){return new on({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Yu("intersect",e,!1))})}intersectAll(e){return new on({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Yu("intersect",e,!0))})}except(e){return new on({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Yu("except",e,!1))})}exceptAll(e){return new on({...this.#e,queryNode:Qn.cloneWithSetOperations(this.#e.queryNode,Yu("except",e,!0))})}as(e){return new aF(this,e)}clearSelect(){return new on({...this.#e,queryNode:Qn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new on({...this.#e,queryNode:Dt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new on({...this.#e,queryNode:Qn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new on({...this.#e,queryNode:Qn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new on({...this.#e,queryNode:Qn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new on({...this.#e,queryNode:Qn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new on({...this.#e})}$castTo(){return new on(this.#e)}$narrowType(){return new on(this.#e)}$assertType(){return new on(this.#e)}$asTuple(){return new Xn(this.toOperationNode())}withPlugin(e){return new on({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new on({...this.#e,queryNode:Dt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Nn(on,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function bE(t){return new on(t)}class aF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return ic.create(this.#e.toOperationNode(),br.create(this.#t))}}Nn(aF,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Ol=G({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return G({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return G({...t,distinct:!0})},cloneWithOrderBy(t,e){return G({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithFilter(t,e){return G({...t,filter:t.filter?ds.cloneWithOperation(t.filter,"And",e):ds.create(e)})},cloneWithOrFilter(t,e){return G({...t,filter:t.filter?ds.cloneWithOperation(t.filter,"Or",e):ds.create(e)})},cloneWithOver(t,e){return G({...t,over:e})}}),Lj=G({is(t){return t.kind==="FunctionNode"},create(t,e){return G({kind:"FunctionNode",func:t,arguments:e})}});class to{#e;constructor(e){this.#e=G(e)}get expressionType(){}as(e){return new H8(this,e)}distinct(){return new to({...this.#e,aggregateFunctionNode:Ol.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new to({...this.#e,aggregateFunctionNode:Ol.cloneWithOrderBy(this.#e.aggregateFunctionNode,im([e,n]))})}filterWhere(...e){return new to({...this.#e,aggregateFunctionNode:Ol.cloneWithFilter(this.#e.aggregateFunctionNode,gi(e))})}filterWhereRef(e,n,r){return new to({...this.#e,aggregateFunctionNode:Ol.cloneWithFilter(this.#e.aggregateFunctionNode,oa(e,n,r))})}over(e){const n=D8();return new to({...this.#e,aggregateFunctionNode:Ol.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new to(this.#e)}$notNull(){return new to(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}Nn(to,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class H8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ic.create(this.#e.toOperationNode(),br.create(this.#t))}}function lF(){const t=(n,r)=>new Xn(Lj.create(n,uh(r??[]))),e=(n,r)=>new to({aggregateFunctionNode:Ol.create(n,r?uh(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new to({aggregateFunctionNode:Ol.create("count",aa(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new to({aggregateFunctionNode:Ol.create("json_agg",[Ps(n)?zr(n):n.toOperationNode()])})},toJson(n){return new Xn(Lj.create("to_json",[Ps(n)?zr(n):n.toOperationNode()]))}})}const K8=G({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return G({kind:"UnaryOperationNode",operator:t,operand:e})}});function Q8(t,e){return K8.create(Ql.create(t),Cs(e))}const Yo=G({is(t){return t.kind==="CaseNode"},create(t){return G({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return G({...t,when:G(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return G({...t,when:t.when?G([...t.when.slice(0,-1),sm.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return G({...t,...e})}});class cF{#e;constructor(e){this.#e=G(e)}when(...e){return new uF({...this.#e,node:Yo.cloneWithWhen(this.#e.node,sm.create(gi(e)))})}}class uF{#e;constructor(e){this.#e=G(e)}then(e){return new G8({...this.#e,node:Yo.cloneWithThen(this.#e.node,FI(e)?DI(e):Zr(e))})}}class G8{#e;constructor(e){this.#e=G(e)}when(...e){return new uF({...this.#e,node:Yo.cloneWithWhen(this.#e.node,sm.create(gi(e)))})}else(e){return new J8({...this.#e,node:Yo.cloneWith(this.#e.node,{else:FI(e)?DI(e):Zr(e)})})}end(){return new Xn(Yo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Xn(Yo.cloneWith(this.#e.node,{isStatement:!0}))}}class J8{#e;constructor(e){this.#e=G(e)}end(){return new Xn(Yo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Xn(Yo.cloneWith(this.#e.node,{isStatement:!0}))}}const Mj=G({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return G({kind:"JSONPathLegNode",type:t,value:e})}});class vE{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return hb.is(this.#e)?new ph(hb.cloneWithTraversal(this.#e,Jp.is(this.#e.traversal)?Jp.cloneWithLeg(this.#e.traversal,Mj.create(e,n)):QP.cloneWithValue(this.#e.traversal,sa.createImmediate(n)))):new ph(Jp.cloneWithLeg(this.#e,Mj.create(e,n)))}}class ph extends vE{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new Z8(this,e)}$castTo(){return new ph(this.#e)}$notNull(){return new ph(this.#e)}toOperationNode(){return this.#e}}class Z8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ic.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():br.create(this.#t))}}const $j=G({is(t){return t.kind==="TupleNode"},create(t){return G({kind:"TupleNode",values:G(t)})}}),Y8=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],X8=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],eH=G({is(t){return t.kind==="DataTypeNode"},create(t){return G({kind:"DataTypeNode",dataType:t})}});function tH(t){return!!(Y8.includes(t)||X8.some(e=>e.test(t)))}function nu(t){if(gs(t))return t.toOperationNode();if(tH(t))return eH.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const nH=G({is(t){return t.kind==="CastNode"},create(t,e){return G({kind:"CastNode",expression:t,dataType:e})}});function zI(t=jv){function e(i,s,o){return new Xn(LI(i,s,o))}function n(i,s){return new Xn(Q8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return bE({queryId:Jn(),executor:t,queryNode:Qn.createFrom(hh(i))})},case(i){return new cF({node:Yo.create(Ml(i)?void 0:Cs(i))})},ref(i,s){return Ml(s)?new Xn(Ua(i)):new vE(n8(i,s))},jsonPath(){return new vE(Jp.create())},table(i){return new Xn(zr(i))},val(i){return new Xn(Zr(i))},refTuple(...i){return new Xn($j.create(i.map(Cs)))},tuple(...i){return new Xn($j.create(i.map(Zr)))},lit(i){return new Xn(DI(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new Xn($d.create(Cs(i),Ql.create("between"),Kl.create(Zr(s),Zr(o))))},betweenSymmetric(i,s,o){return new Xn($d.create(Cs(i),Ql.create("between symmetric"),Kl.create(Zr(s),Zr(o))))},and(i){return Va(i)?new Xn(gb(i,"and")):new Xn(_j(i,"and"))},or(i){return Va(i)?new Xn(gb(i,"or")):new Xn(_j(i,"or"))},parens(...i){const s=gi(i);return Bd.is(s)?new Xn(s):new Xn(Bd.create(s))},cast(i,s){return new Xn(nH.create(Cs(i),nu(s)))},withSchema(i){return zI(t.withPluginAtFront(new lm(i)))}});return r.fn=lF(),r.eb=r,r}function ff(t){return zI()}function pu(t){if(gs(t))return t.toOperationNode();if(Ls(t))return t(ff()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function dF(t){if(gs(t))return t.toOperationNode();if(Ls(t))return t(ff()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function cm(t){return H5(t)||K5(t)||Ls(t)}function hh(t){return Va(t)?t.map(e=>mh(e)):[mh(t)]}function mh(t){return Ps(t)?fF(t):dF(t)}function fF(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(pF);return ic.create(zr(n),br.create(r))}else return zr(t)}function zr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(pF);return Bl.createWithSchema(n,r)}else return Bl.create(t)}function pF(t){return t.trim()}const hF=G({is(t){return t.kind==="AddColumnNode"},create(t){return G({kind:"AddColumnNode",column:t})}}),gr=G({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return G({kind:"ColumnDefinitionNode",column:Ur.create(t),dataType:e})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):[e]})},cloneWith(t,e){return G({...t,...e})}}),mF=G({is(t){return t.kind==="DropColumnNode"},create(t){return G({kind:"DropColumnNode",column:Ur.create(t)})}}),gF=G({is(t){return t.kind==="RenameColumnNode"},create(t,e){return G({kind:"RenameColumnNode",column:Ur.create(t),renameTo:Ur.create(e)})}}),WI=G({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return G({kind:"CheckConstraintNode",expression:t,name:e?br.create(e):void 0})}}),rH=["no action","restrict","cascade","set null","set default"],Iy=G({is(t){return t.kind==="ReferencesNode"},create(t,e){return G({kind:"ReferencesNode",table:t,columns:G([...e])})},cloneWithOnDelete(t,e){return G({...t,onDelete:e})},cloneWithOnUpdate(t,e){return G({...t,onUpdate:e})}});function yF(t){return gs(t)?t.toOperationNode():sa.createImmediate(t)}const Vg=G({is(t){return t.kind==="GeneratedNode"},create(t){return G({kind:"GeneratedNode",...t})},createWithExpression(t){return G({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return G({...t,...e})}}),iH=G({is(t){return t.kind==="DefaultValueNode"},create(t){return G({kind:"DefaultValueNode",defaultValue:t})}});function wb(t){if(rH.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class rr{#e;constructor(e){this.#e=e}autoIncrement(){return new rr(gr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new rr(gr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new rr(gr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=Ua(e);if(!n.table||qI.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new rr(gr.cloneWith(this.#e,{references:Iy.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new rr(gr.cloneWith(this.#e,{references:Iy.cloneWithOnDelete(this.#e.references,wb(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new rr(gr.cloneWith(this.#e,{references:Iy.cloneWithOnUpdate(this.#e.references,wb(e))}))}unique(){return new rr(gr.cloneWith(this.#e,{unique:!0}))}notNull(){return new rr(gr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new rr(gr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new rr(gr.cloneWith(this.#e,{defaultTo:iH.create(yF(e))}))}check(e){return new rr(gr.cloneWith(this.#e,{check:WI.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new rr(gr.cloneWith(this.#e,{generated:Vg.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new rr(gr.cloneWith(this.#e,{generated:Vg.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new rr(gr.cloneWith(this.#e,{generated:Vg.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new rr(gr.cloneWith(this.#e,{generated:Vg.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new rr(gr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new rr(gr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new rr(gr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new rr(gr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}Nn(rr,"don't await ColumnDefinitionBuilder instances directly.");const bF=G({is(t){return t.kind==="ModifyColumnNode"},create(t){return G({kind:"ModifyColumnNode",column:t})}}),_b=G({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return G({kind:"ForeignKeyConstraintNode",columns:t,references:Iy.create(e,n),name:r?br.create(r):void 0})},cloneWith(t,e){return G({...t,...e})}});class zd{#e;constructor(e){this.#e=e}onDelete(e){return new zd(_b.cloneWith(this.#e,{onDelete:wb(e)}))}onUpdate(e){return new zd(_b.cloneWith(this.#e,{onUpdate:wb(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}Nn(zd,"don't await ForeignKeyConstraintBuilder instances directly.");const Ny=G({is(t){return t.kind==="AddConstraintNode"},create(t){return G({kind:"AddConstraintNode",constraint:t})}}),VI=G({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return G({kind:"UniqueConstraintNode",columns:G(t.map(Ur.create)),name:e?br.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return G({...t,...e})}}),ky=G({is(t){return t.kind==="DropConstraintNode"},create(t){return G({kind:"DropConstraintNode",constraintName:br.create(t)})},cloneWith(t,e){return G({...t,...e})}}),gp=G({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return G({kind:"AlterColumnNode",column:Ur.create(t),[e]:n})}});class UI{#e;constructor(e){this.#e=e}setDataType(e){return new ld(gp.create(this.#e,"dataType",nu(e)))}setDefault(e){return new ld(gp.create(this.#e,"setDefault",yF(e)))}dropDefault(){return new ld(gp.create(this.#e,"dropDefault",!0))}setNotNull(){return new ld(gp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new ld(gp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}Nn(UI,"don't await AlterColumnBuilder instances");class ld{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}Nn(ld,"don't await AlteredColumnBuilder instances");class Oc{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Oc,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class gh{#e;constructor(e){this.#e=G(e)}onDelete(e){return new gh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new gh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Gn.cloneWithTableProps(this.#e.node,{addConstraint:Ny.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(gh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Td{#e;constructor(e){this.#e=G(e)}ifExists(){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:ky.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:ky.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:ky.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Td,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const vF=G({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return G({kind:"PrimaryKeyConstraintNode",columns:G(t.map(Ur.create)),name:e?br.create(e):void 0})}}),cd=G({is(t){return t.kind==="AddIndexNode"},create(t){return G({kind:"AddIndexNode",name:br.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}});class ql{#e;constructor(e){this.#e=G(e)}unique(){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWithColumns(this.#e.node.addIndex,[mb(e)])})})}columns(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWithColumns(this.#e.node.addIndex,e.map(mb))})})}expression(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.cloneWith(this.#e.node.addIndex,{using:ki.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(ql,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class um{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new um(VI.cloneWith(this.#e,{nullsNotDistinct:!0}))}}Nn(um,"don't await UniqueConstraintNodeBuilder instances directly.");class xF{#e;constructor(e){this.#e=G(e)}renameTo(e){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{renameTo:zr(e)})})}setSchema(e){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{setSchema:br.create(e)})})}alterColumn(e,n){const r=n(new UI(e));return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,mF.create(e))})}renameColumn(e,n){return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,gF.create(e,n))})}addColumn(e,n,r=$l){const i=r(new rr(gr.create(e,nu(n))));return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,hF.create(i.toOperationNode()))})}modifyColumn(e,n,r=$l){const i=r(new rr(gr.create(e,nu(n))));return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,bF.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=$l){const i=r(new um(VI.create(n,e)));return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addConstraint:Ny.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addConstraint:Ny.create(WI.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new gh({...this.#e,constraintBuilder:new zd(_b.create(n.map(Ur.create),zr(r),i.map(Ur.create),e))})}addPrimaryKeyConstraint(e,n){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addConstraint:Ny.create(vF.create(n,e))})})}dropConstraint(e){return new Td({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropConstraint:ky.create(e)})})}addIndex(e){return new ql({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{addIndex:cd.create(e)})})}dropIndex(e){return new Oc({...this.#e,node:Gn.cloneWithTableProps(this.#e.node,{dropIndex:Qp.create(e)})})}$call(e){return e(this)}}Nn(xF,"don't await AlterTableBuilder instances");class ro{#e;constructor(e){this.#e=G(e)}alterColumn(e,n){const r=n(new UI(e));return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,mF.create(e))})}renameColumn(e,n){return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,gF.create(e,n))})}addColumn(e,n,r=$l){const i=r(new rr(gr.create(e,nu(n))));return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,hF.create(i.toOperationNode()))})}modifyColumn(e,n,r=$l){const i=r(new rr(gr.create(e,nu(n))));return new ro({...this.#e,node:Gn.cloneWithColumnAlteration(this.#e.node,bF.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(ro,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class wF extends rF{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class Xs{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Xs({...this.#e,node:Oa.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Xs({...this.#e,node:Oa.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new Xs({...this.#e,node:Oa.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new Xs({...this.#e,node:Oa.cloneWith(this.#e.node,{table:zr(e)})})}column(e){return new Xs({...this.#e,node:Oa.cloneWithColumns(this.#e.node,[mb(e)])})}columns(e){return new Xs({...this.#e,node:Oa.cloneWithColumns(this.#e.node,e.map(mb))})}expression(e){return new Xs({...this.#e,node:Oa.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new Xs({...this.#e,node:Oa.cloneWith(this.#e.node,{using:ki.createWithSql(e)})})}where(...e){const n=new wF;return new Xs({...this.#e,node:Dt.cloneWithWhere(this.#e.node,n.transformNode(gi(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Xs,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Rv{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Rv({...this.#e,node:WP.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Rv,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function sH(t){if(U5.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ls{#e;constructor(e){this.#e=G(e)}temporary(){return new ls({...this.#e,node:_s.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ls({...this.#e,node:_s.cloneWith(this.#e.node,{onCommit:sH(e)})})}ifNotExists(){return new ls({...this.#e,node:_s.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=$l){const i=r(new rr(gr.create(e,nu(n))));return new ls({...this.#e,node:_s.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ls({...this.#e,node:_s.cloneWithConstraint(this.#e.node,vF.create(n,e))})}addUniqueConstraint(e,n,r=$l){const i=r(new um(VI.create(n,e)));return new ls({...this.#e,node:_s.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new ls({...this.#e,node:_s.cloneWithConstraint(this.#e.node,WI.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=$l){const o=s(new zd(_b.create(n.map(Ur.create),zr(r),i.map(Ur.create),e)));return new ls({...this.#e,node:_s.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ls({...this.#e,node:_s.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ls({...this.#e,node:_s.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ls({...this.#e,node:_s.cloneWith(this.#e.node,{selectQuery:pu(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(ls,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class jd{#e;constructor(e){this.#e=G(e)}on(e){return new jd({...this.#e,node:Qp.cloneWith(this.#e.node,{table:zr(e)})})}ifExists(){return new jd({...this.#e,node:Qp.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new jd({...this.#e,node:Qp.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(jd,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class yh{#e;constructor(e){this.#e=G(e)}ifExists(){return new yh({...this.#e,node:fE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new yh({...this.#e,node:fE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(yh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class bh{#e;constructor(e){this.#e=G(e)}ifExists(){return new bh({...this.#e,node:pE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new bh({...this.#e,node:pE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(bh,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const kl=G({is(t){return t.kind==="CreateViewNode"},create(t){return G({kind:"CreateViewNode",name:Hl.create(t)})},cloneWith(t,e){return G({...t,...e})}});class oH{#e=new wF;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Pa{#e;constructor(e){this.#e=G(e)}temporary(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{columns:e.map(JP)})})}as(e){const n=e.withPlugin(new oH).toOperationNode();return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Pa,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Cy=G({is(t){return t.kind==="DropViewNode"},create(t){return G({kind:"DropViewNode",name:Hl.create(t)})},cloneWith(t,e){return G({...t,...e})}});class Rd{#e;constructor(e){this.#e=G(e)}materialized(){return new Rd({...this.#e,node:Cy.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Rd({...this.#e,node:Cy.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Rd({...this.#e,node:Cy.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Rd,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const _F=G({is(t){return t.kind==="CreateTypeNode"},create(t){return G({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return G({...t,enum:PI.create(e.map(n=>sa.createImmediate(n)))})}});class Ov{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Ov({...this.#e,node:_F.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(Ov,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const SF=G({is(t){return t.kind==="DropTypeNode"},create(t){return G({kind:"DropTypeNode",name:t})},cloneWith(t,e){return G({...t,...e})}});class qv{#e;constructor(e){this.#e=G(e)}ifExists(){return new qv({...this.#e,node:SF.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Nn(qv,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Bj(t){const e=".";if(t.includes(e)){const n=t.split(e).map(aH);if(n.length===2)return Hl.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Hl.create(t)}function aH(t){return t.trim()}class Xp{#e;constructor(e){this.#e=e}createTable(e){return new ls({queryId:Jn(),executor:this.#e,node:_s.create(zr(e))})}dropTable(e){return new bh({queryId:Jn(),executor:this.#e,node:pE.create(zr(e))})}createIndex(e){return new Xs({queryId:Jn(),executor:this.#e,node:Oa.create(e)})}dropIndex(e){return new jd({queryId:Jn(),executor:this.#e,node:Qp.create(e)})}createSchema(e){return new Rv({queryId:Jn(),executor:this.#e,node:WP.create(e)})}dropSchema(e){return new yh({queryId:Jn(),executor:this.#e,node:fE.create(e)})}alterTable(e){return new xF({queryId:Jn(),executor:this.#e,node:Gn.create(zr(e))})}createView(e){return new Pa({queryId:Jn(),executor:this.#e,node:kl.create(e)})}dropView(e){return new Rd({queryId:Jn(),executor:this.#e,node:Cy.create(e)})}createType(e){return new Ov({queryId:Jn(),executor:this.#e,node:_F.create(Bj(e))})}dropType(e){return new qv({queryId:Jn(),executor:this.#e,node:SF.create(Bj(e))})}withPlugin(e){return new Xp(this.#e.withPlugin(e))}withoutPlugins(){return new Xp(this.#e.withoutPlugins())}withSchema(e){return new Xp(this.#e.withPluginAtFront(new lm(e)))}}class lH{ref(e){return new e8(e)}}class cH{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Dc extends iF{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Dc(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Dc(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Dc(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Dc(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Dc(this.#e,this.#t,this.#n,[])}}function zj(){return typeof performance<"u"&&Ls(performance.now)?performance.now():Date.now()}class uH{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=zj();try{return await n.call(e,r)}catch(o){throw i=o,await this.#c(o,r,s),o}finally{i||await this.#l(r,s)}}}async #c(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#u(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(n)}))}#u(e){return zj()-e}}const dH=()=>{};class EF{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(dH);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const fH=["read uncommitted","read committed","repeatable read","serializable","snapshot"];G(["query","error"]);class pH{#e;#t;constructor(e){Ls(e)?(this.#t=e,this.#e=G({query:!0,error:!0})):(this.#t=hH,this.#e=G({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function hH(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function mH(t){return Jo(t)&&Ls(t.compile)}let HI=class jp extends Rl{#e;constructor(e){let n,r;if(gH(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),l=i.createAdapter(),u=new pH(e.log??[]),f=new uH(s,u),p=new cH(f),h=new Dc(o,l,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:f}}super(n),this.#e=G(r)}get schema(){return new Xp(this.#e.executor)}get dynamic(){return new lH}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new cF({node:Yo.create(Ml(e)?void 0:pu(e))})}get fn(){return lF()}transaction(){return new Av({...this.#e})}connection(){return new IF({...this.#e})}withPlugin(e){return new jp({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new jp({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new jp({...this.#e,executor:this.#e.executor.withPluginAtFront(new lm(e))})}withTables(){return new jp({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Jn()){const r=mH(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class pd extends HI{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new pd({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new pd({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new pd({...this.#e,executor:this.#e.executor.withPluginAtFront(new lm(e))})}withTables(){return new pd({...this.#e})}}function gH(t){return Jo(t)&&Jo(t.config)&&Jo(t.driver)&&Jo(t.executor)&&Jo(t.dialect)}class IF{#e;constructor(e){this.#e=G(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new EF(n)),i=new HI({...this.#e,executor:r});return await e(i)})}}Nn(IF,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class Av{#e;constructor(e){this.#e=G(e)}setIsolationLevel(e){return new Av({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return yH(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new EF(s)),l=new pd({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(l);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}Nn(Av,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function yH(t){if(t.isolationLevel&&!fH.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Od{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new NF(this,e)}$castTo(){return new Od({...this.#e})}$notNull(){return new Od(this.#e)}withPlugin(e){return new Od({...this.#e,plugins:this.#e.plugins!==void 0?G([...this.#e.plugins,e]):G([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():jv;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function wl(t){return new Od(t)}Nn(Od,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class NF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return ic.create(this.#e.toOperationNode(),gs(this.#t)?this.#t.toOperationNode():br.create(this.#t))}}Nn(NF,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Cr=Object.assign((t,...e)=>wl({queryId:Jn(),rawNode:ki.create(t,e?.map(Wj)??[])}),{ref(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(Ua(t))})},val(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(Zr(t))})},value(t){return this.val(t)},table(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(zr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",wl({queryId:Jn(),rawNode:ki.create(e,t.map(br.create))})},lit(t){return wl({queryId:Jn(),rawNode:ki.createWithChild(sa.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return wl({queryId:Jn(),rawNode:ki.createWithSql(t)})},join(t,e=Cr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=Wj(t[i]),i!==t.length-1&&(n[2*i+1]=r);return wl({queryId:Jn(),rawNode:ki.createWithChildren(n)})}});function Wj(t){return gs(t)?t.toOperationNode():Zr(t)}class bH{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=G({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class vH extends bH{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),G({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Bd.is(this.parentNode)&&!Is.is(this.parentNode)&&!_s.is(this.parentNode)&&!kl.is(this.parentNode)&&!oF.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Dt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!fs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!fs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Dt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Ps(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(wH[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Dt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!fs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!fs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),pb(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(xH[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Ql.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Ps(e))this.append(`'${e}'`);else if(Cv(e)||pb(e))this.append(e.toString());else if(RI(e))this.append("null");else if(V5(e))this.appendImmediateValue(e.toISOString());else if(OI(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?Vj[n.modifier]-Vj[r.modifier]:1),G(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const xH=G({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),Vj=G({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),wH=G({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class _H{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const SH=/"/g;class EH extends vH{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(SH,'""')}visitDefaultInsertValue(e){this.append("null")}}const IH="kysely_migration",NH="kysely_migration_lock";G({__noMigrations__:!0});class kH{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",IH).where("name","!=",NH));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(Cr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class CH extends _H{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const Gc={jsonObject(t){const e=Cr.join(Object.entries(t).map(([n,r])=>Cr`${n}, ${r}`));return Cr`json_object(${e})`},jsonGroupArray(t){return Cr`json_group_array(${Gc.jsonObject(t)})`}},kF={hash(t){return dE.sha224(t)},verify(t,e){return dE.sha224(t)===e}};var On;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(On||(On={}));var xE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(xE||(xE={}));const Ft=On.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fa=t=>{switch(typeof t){case"undefined":return Ft.undefined;case"string":return Ft.string;case"number":return isNaN(t)?Ft.nan:Ft.number;case"boolean":return Ft.boolean;case"function":return Ft.function;case"bigint":return Ft.bigint;case"symbol":return Ft.symbol;case"object":return Array.isArray(t)?Ft.array:t===null?Ft.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ft.promise:typeof Map<"u"&&t instanceof Map?Ft.map:typeof Set<"u"&&t instanceof Set?Ft.set:typeof Date<"u"&&t instanceof Date?Ft.date:Ft.object;default:return Ft.unknown}},yt=On.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),TH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class qs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(n(o))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return i(this),r}static assert(e){if(!(e instanceof qs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,On.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}qs.create=t=>new qs(t);const Wd=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Ft.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,On.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${On.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${On.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${On.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:On.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,On.assertNever(t)}return{message:n}};let CF=Wd;function jH(t){CF=t}function Sb(){return CF}const Eb=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=r.filter(f=>!!f).slice().reverse();for(const f of u)l=f(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},RH=[];function Tt(t,e){const n=Sb(),r=Eb({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Wd?void 0:Wd].filter(i=>!!i)});t.common.issues.push(r)}class Ri{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ln;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Ri.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return ln;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const ln=Object.freeze({status:"aborted"}),hd=t=>({status:"dirty",value:t}),Gi=t=>({status:"valid",value:t}),wE=t=>t.status==="aborted",_E=t=>t.status==="dirty",ru=t=>t.status==="valid",vh=t=>typeof Promise<"u"&&t instanceof Promise;function Ib(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function TF(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Kt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Kt||(Kt={}));var Rp,Op;class la{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Uj=(t,e)=>{if(ru(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new qs(t.common.issues);return this._error=n,this._error}}};function Sn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var u,f;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(f=p??n)!==null&&f!==void 0?f:l.defaultError}},description:i}}class kn{get description(){return this._def.description}_getType(e){return Fa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ri,ctx:{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(vh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Uj(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return ru(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>ru(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (vh(i)?i:Promise.resolve(i));return Uj(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fo({schema:this,typeName:an.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ea.create(this,this._def)}nullable(){return Xl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return Ud.create(this,this._def)}or(e){return Sh.create([this,e],this._def)}and(e){return Eh.create(this,e,this._def)}transform(e){return new Fo({...Sn(this._def),schema:this,typeName:an.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Th({...Sn(this._def),innerType:this,defaultValue:n,typeName:an.ZodDefault})}brand(){return new KI({typeName:an.ZodBranded,type:this,...Sn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jh({...Sn(this._def),innerType:this,catchValue:n,typeName:an.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return dm.create(this,e)}readonly(){return Rh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OH=/^c[^\s-]{8,}$/i,qH=/^[0-9a-z]+$/,AH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FH=/^[a-z0-9_-]{21}$/i,DH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,LH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$H="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let i0;const BH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,WH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KH=new RegExp(`^${jF}$`);function RF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function QH(t){return new RegExp(`^${RF(t)}$`)}function OF(t){let e=`${jF}T${RF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function GH(t,e){return!!((e==="v4"||!e)&&BH.test(t)||(e==="v6"||!e)&&WH.test(t))}function JH(t,e){if(!DH.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function ZH(t,e){return!!((e==="v4"||!e)&&zH.test(t)||(e==="v6"||!e)&&VH.test(t))}class Ro extends kn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ft.string){const s=this._getOrReturnCtx(e);return Tt(s,{code:yt.invalid_type,expected:Ft.string,received:s.parsedType}),ln}const r=new Ri;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Tt(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Tt(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")MH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")i0||(i0=new RegExp($H,"u")),i0.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")PH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")FH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")OH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")qH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")AH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Tt(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?OF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?KH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?QH(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?LH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?GH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?JH(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?ZH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?UH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?HH.test(e.data)||(i=this._getOrReturnCtx(e,i),Tt(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):On.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Kt.errToObj(r)})}_addCheck(e){return new Ro({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Kt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Kt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Kt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Kt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Kt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Kt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Kt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Kt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Kt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Kt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Kt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Kt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Kt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Kt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Kt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Kt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Kt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Kt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Kt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Kt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Kt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Kt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Kt.errToObj(n)})}nonempty(e){return this.min(1,Kt.errToObj(e))}trim(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ro.create=t=>{var e;return new Ro({checks:[],typeName:an.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};function YH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Jl extends kn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ft.number){const s=this._getOrReturnCtx(e);return Tt(s,{code:yt.invalid_type,expected:Ft.number,received:s.parsedType}),ln}let r;const i=new Ri;for(const s of this._def.checks)s.kind==="int"?On.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?YH(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.not_finite,message:s.message}),i.dirty()):On.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Jl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Jl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Kt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Kt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Kt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Kt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&On.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Jl.create=t=>new Jl({checks:[],typeName:an.ZodNumber,coerce:t?.coerce||!1,...Sn(t)});class Zl extends kn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ft.bigint)return this._getInvalidInput(e);let r;const i=new Ri;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Tt(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):On.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Tt(n,{code:yt.invalid_type,expected:Ft.bigint,received:n.parsedType}),ln}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Zl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Zl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zl.create=t=>{var e;return new Zl({checks:[],typeName:an.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};class xh extends kn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ft.boolean){const r=this._getOrReturnCtx(e);return Tt(r,{code:yt.invalid_type,expected:Ft.boolean,received:r.parsedType}),ln}return Gi(e.data)}}xh.create=t=>new xh({typeName:an.ZodBoolean,coerce:t?.coerce||!1,...Sn(t)});class iu extends kn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ft.date){const s=this._getOrReturnCtx(e);return Tt(s,{code:yt.invalid_type,expected:Ft.date,received:s.parsedType}),ln}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Tt(s,{code:yt.invalid_date}),ln}const r=new Ri;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Tt(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):On.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new iu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Kt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Kt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}iu.create=t=>new iu({checks:[],coerce:t?.coerce||!1,typeName:an.ZodDate,...Sn(t)});class Nb extends kn{_parse(e){if(this._getType(e)!==Ft.symbol){const r=this._getOrReturnCtx(e);return Tt(r,{code:yt.invalid_type,expected:Ft.symbol,received:r.parsedType}),ln}return Gi(e.data)}}Nb.create=t=>new Nb({typeName:an.ZodSymbol,...Sn(t)});class wh extends kn{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return Tt(r,{code:yt.invalid_type,expected:Ft.undefined,received:r.parsedType}),ln}return Gi(e.data)}}wh.create=t=>new wh({typeName:an.ZodUndefined,...Sn(t)});class _h extends kn{_parse(e){if(this._getType(e)!==Ft.null){const r=this._getOrReturnCtx(e);return Tt(r,{code:yt.invalid_type,expected:Ft.null,received:r.parsedType}),ln}return Gi(e.data)}}_h.create=t=>new _h({typeName:an.ZodNull,...Sn(t)});class Vd extends kn{constructor(){super(...arguments),this._any=!0}_parse(e){return Gi(e.data)}}Vd.create=t=>new Vd({typeName:an.ZodAny,...Sn(t)});class Jc extends kn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Gi(e.data)}}Jc.create=t=>new Jc({typeName:an.ZodUnknown,...Sn(t)});class Ha extends kn{_parse(e){const n=this._getOrReturnCtx(e);return Tt(n,{code:yt.invalid_type,expected:Ft.never,received:n.parsedType}),ln}}Ha.create=t=>new Ha({typeName:an.ZodNever,...Sn(t)});class kb extends kn{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return Tt(r,{code:yt.invalid_type,expected:Ft.void,received:r.parsedType}),ln}return Gi(e.data)}}kb.create=t=>new kb({typeName:an.ZodVoid,...Sn(t)});class qo extends kn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ft.array)return Tt(n,{code:yt.invalid_type,expected:Ft.array,received:n.parsedType}),ln;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Tt(n,{code:o?yt.too_big:yt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Tt(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Tt(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new la(n,o,n.path,l)))).then(o=>Ri.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new la(n,o,n.path,l)));return Ri.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new qo({...this._def,minLength:{value:e,message:Kt.toString(n)}})}max(e,n){return new qo({...this._def,maxLength:{value:e,message:Kt.toString(n)}})}length(e,n){return new qo({...this._def,exactLength:{value:e,message:Kt.toString(n)}})}nonempty(e){return this.min(1,e)}}qo.create=(t,e)=>new qo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:an.ZodArray,...Sn(e)});function ud(t){if(t instanceof kr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ea.create(ud(r))}return new kr({...t._def,shape:()=>e})}else return t instanceof qo?new qo({...t._def,type:ud(t.element)}):t instanceof ea?ea.create(ud(t.unwrap())):t instanceof Xl?Xl.create(ud(t.unwrap())):t instanceof ca?ca.create(t.items.map(e=>ud(e))):t}class kr extends kn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=On.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ft.object){const f=this._getOrReturnCtx(e);return Tt(f,{code:yt.invalid_type,expected:Ft.object,received:f.parsedType}),ln}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ha&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||l.push(f);const u=[];for(const f of o){const p=s[f],h=i.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new la(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Ha){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(f==="strict")l.length>0&&(Tt(i,{code:yt.unrecognized_keys,keys:l}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of l){const h=i.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new la(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of u){const h=await p.key,b=await p.value;f.push({key:h,value:b,alwaysSet:p.alwaysSet})}return f}).then(f=>Ri.mergeObjectSync(r,f)):Ri.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Kt.errToObj,new kr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Kt.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new kr({...this._def,unknownKeys:"strip"})}passthrough(){return new kr({...this._def,unknownKeys:"passthrough"})}extend(e){return new kr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:an.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new kr({...this._def,catchall:e})}pick(e){const n={};return On.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new kr({...this._def,shape:()=>n})}omit(e){const n={};return On.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new kr({...this._def,shape:()=>n})}deepPartial(){return ud(this)}partial(e){const n={};return On.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new kr({...this._def,shape:()=>n})}required(e){const n={};return On.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ea;)s=s._def.innerType;n[r]=s}}),new kr({...this._def,shape:()=>n})}keyof(){return qF(On.objectKeys(this.shape))}}kr.create=(t,e)=>new kr({shape:()=>t,unknownKeys:"strip",catchall:Ha.create(),typeName:an.ZodObject,...Sn(e)});kr.strictCreate=(t,e)=>new kr({shape:()=>t,unknownKeys:"strict",catchall:Ha.create(),typeName:an.ZodObject,...Sn(e)});kr.lazycreate=(t,e)=>new kr({shape:t,unknownKeys:"strip",catchall:Ha.create(),typeName:an.ZodObject,...Sn(e)});class Sh extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new qs(l.ctx.common.issues));return Tt(n,{code:yt.invalid_union,unionErrors:o}),ln}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const f={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(u=>new qs(u));return Tt(n,{code:yt.invalid_union,unionErrors:l}),ln}}get options(){return this._def.options}}Sh.create=(t,e)=>new Sh({options:t,typeName:an.ZodUnion,...Sn(e)});const qa=t=>t instanceof Nh?qa(t.schema):t instanceof Fo?qa(t.innerType()):t instanceof kh?[t.value]:t instanceof Yl?t.options:t instanceof Ch?On.objectValues(t.enum):t instanceof Th?qa(t._def.innerType):t instanceof wh?[void 0]:t instanceof _h?[null]:t instanceof ea?[void 0,...qa(t.unwrap())]:t instanceof Xl?[null,...qa(t.unwrap())]:t instanceof KI||t instanceof Rh?qa(t.unwrap()):t instanceof jh?qa(t._def.innerType):[];class Pv extends kn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.object)return Tt(n,{code:yt.invalid_type,expected:Ft.object,received:n.parsedType}),ln;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Tt(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ln)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=qa(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new Pv({typeName:an.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Sn(r)})}}function SE(t,e){const n=Fa(t),r=Fa(e);if(t===e)return{valid:!0,data:t};if(n===Ft.object&&r===Ft.object){const i=On.objectKeys(e),s=On.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const u=SE(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===Ft.array&&r===Ft.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],u=SE(o,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Ft.date&&r===Ft.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Eh extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(wE(s)||wE(o))return ln;const l=SE(s.value,o.value);return l.valid?((_E(s)||_E(o))&&n.dirty(),{status:n.value,value:l.data}):(Tt(r,{code:yt.invalid_intersection_types}),ln)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Eh.create=(t,e,n)=>new Eh({left:t,right:e,typeName:an.ZodIntersection,...Sn(n)});class ca extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.array)return Tt(r,{code:yt.invalid_type,expected:Ft.array,received:r.parsedType}),ln;if(r.data.length<this._def.items.length)return Tt(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ln;!this._def.rest&&r.data.length>this._def.items.length&&(Tt(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new la(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Ri.mergeArray(n,o)):Ri.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ca({...this._def,rest:e})}}ca.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ca({items:t,typeName:an.ZodTuple,rest:null,...Sn(e)})};class Ih extends kn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.object)return Tt(r,{code:yt.invalid_type,expected:Ft.object,received:r.parsedType}),ln;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new la(r,l,r.path,l)),value:o._parse(new la(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Ri.mergeObjectAsync(n,i):Ri.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof kn?new Ih({keyType:e,valueType:n,typeName:an.ZodRecord,...Sn(r)}):new Ih({keyType:Ro.create(),valueType:e,typeName:an.ZodRecord,...Sn(n)})}}class Cb extends kn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.map)return Tt(r,{code:yt.invalid_type,expected:Ft.map,received:r.parsedType}),ln;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,u],f)=>({key:i._parse(new la(r,l,r.path,[f,"key"])),value:s._parse(new la(r,u,r.path,[f,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return ln;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return ln;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}}}}Cb.create=(t,e,n)=>new Cb({valueType:e,keyType:t,typeName:an.ZodMap,...Sn(n)});class su extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.set)return Tt(r,{code:yt.invalid_type,expected:Ft.set,received:r.parsedType}),ln;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Tt(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Tt(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const f=new Set;for(const p of u){if(p.status==="aborted")return ln;p.status==="dirty"&&n.dirty(),f.add(p.value)}return{status:n.value,value:f}}const l=[...r.data.values()].map((u,f)=>s._parse(new la(r,u,r.path,f)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new su({...this._def,minSize:{value:e,message:Kt.toString(n)}})}max(e,n){return new su({...this._def,maxSize:{value:e,message:Kt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}su.create=(t,e)=>new su({valueType:t,minSize:null,maxSize:null,typeName:an.ZodSet,...Sn(e)});class qd extends kn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.function)return Tt(n,{code:yt.invalid_type,expected:Ft.function,received:n.parsedType}),ln;function r(l,u){return Eb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sb(),Wd].filter(f=>!!f),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(l,u){return Eb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sb(),Wd].filter(f=>!!f),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ud){const l=this;return Gi(async function(...u){const f=new qs([]),p=await l._def.args.parseAsync(u,s).catch(x=>{throw f.addIssue(r(u,x)),f}),h=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(h,s).catch(x=>{throw f.addIssue(i(h,x)),f})})}else{const l=this;return Gi(function(...u){const f=l._def.args.safeParse(u,s);if(!f.success)throw new qs([r(u,f.error)]);const p=Reflect.apply(o,this,f.data),h=l._def.returns.safeParse(p,s);if(!h.success)throw new qs([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new qd({...this._def,args:ca.create(e).rest(Jc.create())})}returns(e){return new qd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new qd({args:e||ca.create([]).rest(Jc.create()),returns:n||Jc.create(),typeName:an.ZodFunction,...Sn(r)})}}class Nh extends kn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Nh.create=(t,e)=>new Nh({getter:t,typeName:an.ZodLazy,...Sn(e)});class kh extends kn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Tt(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),ln}return{status:"valid",value:e.data}}get value(){return this._def.value}}kh.create=(t,e)=>new kh({value:t,typeName:an.ZodLiteral,...Sn(e)});function qF(t,e){return new Yl({values:t,typeName:an.ZodEnum,...Sn(e)})}class Yl extends kn{constructor(){super(...arguments),Rp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Tt(n,{expected:On.joinValues(r),received:n.parsedType,code:yt.invalid_type}),ln}if(Ib(this,Rp)||TF(this,Rp,new Set(this._def.values)),!Ib(this,Rp).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Tt(n,{received:n.data,code:yt.invalid_enum_value,options:r}),ln}return Gi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Yl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Yl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Rp=new WeakMap;Yl.create=qF;class Ch extends kn{constructor(){super(...arguments),Op.set(this,void 0)}_parse(e){const n=On.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ft.string&&r.parsedType!==Ft.number){const i=On.objectValues(n);return Tt(r,{expected:On.joinValues(i),received:r.parsedType,code:yt.invalid_type}),ln}if(Ib(this,Op)||TF(this,Op,new Set(On.getValidEnumValues(this._def.values))),!Ib(this,Op).has(e.data)){const i=On.objectValues(n);return Tt(r,{received:r.data,code:yt.invalid_enum_value,options:i}),ln}return Gi(e.data)}get enum(){return this._def.values}}Op=new WeakMap;Ch.create=(t,e)=>new Ch({values:t,typeName:an.ZodNativeEnum,...Sn(e)});class Ud extends kn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.promise&&n.common.async===!1)return Tt(n,{code:yt.invalid_type,expected:Ft.promise,received:n.parsedType}),ln;const r=n.parsedType===Ft.promise?n.data:Promise.resolve(n.data);return Gi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ud.create=(t,e)=>new Ud({type:t,typeName:an.ZodPromise,...Sn(e)});class Fo extends kn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===an.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Tt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return ln;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?ln:u.status==="dirty"||n.value==="dirty"?hd(u.value):u});{if(n.value==="aborted")return ln;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?ln:l.status==="dirty"||n.value==="dirty"?hd(l.value):l}}if(i.type==="refinement"){const o=l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?ln:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?ln:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ru(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ru(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);On.assertNever(i)}}Fo.create=(t,e,n)=>new Fo({schema:t,typeName:an.ZodEffects,effect:e,...Sn(n)});Fo.createWithPreprocess=(t,e,n)=>new Fo({schema:e,effect:{type:"preprocess",transform:t},typeName:an.ZodEffects,...Sn(n)});class ea extends kn{_parse(e){return this._getType(e)===Ft.undefined?Gi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ea.create=(t,e)=>new ea({innerType:t,typeName:an.ZodOptional,...Sn(e)});class Xl extends kn{_parse(e){return this._getType(e)===Ft.null?Gi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xl.create=(t,e)=>new Xl({innerType:t,typeName:an.ZodNullable,...Sn(e)});class Th extends kn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ft.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Th.create=(t,e)=>new Th({innerType:t,typeName:an.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Sn(e)});class jh extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return vh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}jh.create=(t,e)=>new jh({innerType:t,typeName:an.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Sn(e)});class Tb extends kn{_parse(e){if(this._getType(e)!==Ft.nan){const r=this._getOrReturnCtx(e);return Tt(r,{code:yt.invalid_type,expected:Ft.nan,received:r.parsedType}),ln}return{status:"valid",value:e.data}}}Tb.create=t=>new Tb({typeName:an.ZodNaN,...Sn(t)});const XH=Symbol("zod_brand");class KI extends kn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class dm extends kn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ln:s.status==="dirty"?(n.dirty(),hd(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ln:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new dm({in:e,out:n,typeName:an.ZodPipeline})}}class Rh extends kn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(ru(i)&&(i.value=Object.freeze(i.value)),i);return vh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Rh.create=(t,e)=>new Rh({innerType:t,typeName:an.ZodReadonly,...Sn(e)});function AF(t,e={},n){return t?Vd.create().superRefine((r,i)=>{var s,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,f=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...f,fatal:u})}}):Vd.create()}const e9={object:kr.lazycreate};var an;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(an||(an={}));const t9=(t,e={message:`Input not instance of ${t.name}`})=>AF(n=>n instanceof t,e),PF=Ro.create,FF=Jl.create,n9=Tb.create,r9=Zl.create,DF=xh.create,i9=iu.create,s9=Nb.create,o9=wh.create,a9=_h.create,l9=Vd.create,c9=Jc.create,u9=Ha.create,d9=kb.create,f9=qo.create,p9=kr.create,h9=kr.strictCreate,m9=Sh.create,g9=Pv.create,y9=Eh.create,b9=ca.create,v9=Ih.create,x9=Cb.create,w9=su.create,_9=qd.create,S9=Nh.create,E9=kh.create,I9=Yl.create,N9=Ch.create,k9=Ud.create,Hj=Fo.create,C9=ea.create,T9=Xl.create,j9=Fo.createWithPreprocess,R9=dm.create,O9=()=>PF().optional(),q9=()=>FF().optional(),A9=()=>DF().optional(),P9={string:t=>Ro.create({...t,coerce:!0}),number:t=>Jl.create({...t,coerce:!0}),boolean:t=>xh.create({...t,coerce:!0}),bigint:t=>Zl.create({...t,coerce:!0}),date:t=>iu.create({...t,coerce:!0})},F9=ln;var D=Object.freeze({__proto__:null,defaultErrorMap:Wd,setErrorMap:jH,getErrorMap:Sb,makeIssue:Eb,EMPTY_PATH:RH,addIssueToContext:Tt,ParseStatus:Ri,INVALID:ln,DIRTY:hd,OK:Gi,isAborted:wE,isDirty:_E,isValid:ru,isAsync:vh,get util(){return On},get objectUtil(){return xE},ZodParsedType:Ft,getParsedType:Fa,ZodType:kn,datetimeRegex:OF,ZodString:Ro,ZodNumber:Jl,ZodBigInt:Zl,ZodBoolean:xh,ZodDate:iu,ZodSymbol:Nb,ZodUndefined:wh,ZodNull:_h,ZodAny:Vd,ZodUnknown:Jc,ZodNever:Ha,ZodVoid:kb,ZodArray:qo,ZodObject:kr,ZodUnion:Sh,ZodDiscriminatedUnion:Pv,ZodIntersection:Eh,ZodTuple:ca,ZodRecord:Ih,ZodMap:Cb,ZodSet:su,ZodFunction:qd,ZodLazy:Nh,ZodLiteral:kh,ZodEnum:Yl,ZodNativeEnum:Ch,ZodPromise:Ud,ZodEffects:Fo,ZodTransformer:Fo,ZodOptional:ea,ZodNullable:Xl,ZodDefault:Th,ZodCatch:jh,ZodNaN:Tb,BRAND:XH,ZodBranded:KI,ZodPipeline:dm,ZodReadonly:Rh,custom:AF,Schema:kn,ZodSchema:kn,late:e9,get ZodFirstPartyTypeKind(){return an},coerce:P9,any:l9,array:f9,bigint:r9,boolean:DF,date:i9,discriminatedUnion:g9,effect:Hj,enum:I9,function:_9,instanceof:t9,intersection:y9,lazy:S9,literal:E9,map:x9,nan:n9,nativeEnum:N9,never:u9,null:a9,nullable:T9,number:FF,object:p9,oboolean:A9,onumber:q9,optional:C9,ostring:O9,pipeline:R9,preprocess:j9,promise:k9,record:v9,set:w9,strictObject:h9,string:PF,symbol:s9,transformer:Hj,tuple:b9,undefined:o9,union:m9,unknown:c9,void:d9,NEVER:F9,ZodIssueCode:yt,quotelessJson:TH,ZodError:qs});const D9=D.object({page:D.number().gte(0,"Page must be greater than zero"),size:D.number().gte(1,"Page size must be greater than one to get any data")}),Ai=D.object({id:D.string().min(1)}),QI=D.object({message:D.string()}),Pi=D.object({id:D.string().optional(),idIn:D.array(D.string()).optional(),fulltext:D.string().optional()}),L9=D.enum(["asc","desc"]),Qi=()=>D.union([D.boolean(),D.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),Do=()=>D.union([D.number(),D.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),No=()=>D.union([D.number().int(),D.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),mi=t=>D.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>D.array(t).parse(e)),M9=t=>D.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),EE=new Proxy(()=>EE,{get:()=>EE}),Fi=({entity:t,shape:e,filter:n,sort:r})=>{const i=EE();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:D.array(D.object({name:D.enum(r),sort:L9})),"~sort":i,"~sort-keyof":i}},_l=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),$9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:_l(1,i),start:[],end:[]};const o=Math.max(t-n,r),l=Math.min(t+n,i-r),u=o>r+2,f=l<i-(r+1);return!u&&f?{type:"end",page:t,total:e,start:[],pages:_l(1,n*2+r+2),end:_l(e-(r-1),i)}:u&&!f?{type:"start",page:t,total:e,start:_l(1,r),pages:_l(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:_l(1,r),pages:_l(o,l),end:_l(i-r+1,i)}};var Xu={},Ta={},nr={},Sl={},Kj;function LF(){if(Kj)return Sl;Kj=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.anumber=t,Sl.abytes=n,Sl.ahash=r,Sl.aexists=i,Sl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...l){if(!e(o))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(o.length))throw new Error("Uint8Array expected of length "+l+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,l=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(l&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,l){n(o);const u=l.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return Sl}var mn={},Qj;function B9(){if(Qj)return mn;Qj=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.add5L=mn.add5H=mn.add4H=mn.add4L=mn.add3H=mn.add3L=mn.rotlBL=mn.rotlBH=mn.rotlSL=mn.rotlSH=mn.rotr32L=mn.rotr32H=mn.rotrBL=mn.rotrBH=mn.rotrSL=mn.rotrSH=mn.shrSL=mn.shrSH=mn.toBig=void 0,mn.fromBig=n,mn.split=r,mn.add=j;const t=BigInt(2**32-1),e=BigInt(32);function n(O,z=!1){return z?{h:Number(O&t),l:Number(O>>e&t)}:{h:Number(O>>e&t)|0,l:Number(O&t)|0}}function r(O,z=!1){let F=new Uint32Array(O.length),V=new Uint32Array(O.length);for(let U=0;U<O.length;U++){const{h:M,l:X}=n(O[U],z);[F[U],V[U]]=[M,X]}return[F,V]}const i=(O,z)=>BigInt(O>>>0)<<e|BigInt(z>>>0);mn.toBig=i;const s=(O,z,F)=>O>>>F;mn.shrSH=s;const o=(O,z,F)=>O<<32-F|z>>>F;mn.shrSL=o;const l=(O,z,F)=>O>>>F|z<<32-F;mn.rotrSH=l;const u=(O,z,F)=>O<<32-F|z>>>F;mn.rotrSL=u;const f=(O,z,F)=>O<<64-F|z>>>F-32;mn.rotrBH=f;const p=(O,z,F)=>O>>>F-32|z<<64-F;mn.rotrBL=p;const h=(O,z)=>z;mn.rotr32H=h;const b=(O,z)=>O;mn.rotr32L=b;const x=(O,z,F)=>O<<F|z>>>32-F;mn.rotlSH=x;const _=(O,z,F)=>z<<F|O>>>32-F;mn.rotlSL=_;const E=(O,z,F)=>z<<F-32|O>>>64-F;mn.rotlBH=E;const k=(O,z,F)=>O<<F-32|z>>>64-F;mn.rotlBL=k;function j(O,z,F,V){const U=(z>>>0)+(V>>>0);return{h:O+F+(U/2**32|0)|0,l:U|0}}const C=(O,z,F)=>(O>>>0)+(z>>>0)+(F>>>0);mn.add3L=C;const R=(O,z,F,V)=>z+F+V+(O/2**32|0)|0;mn.add3H=R;const q=(O,z,F,V)=>(O>>>0)+(z>>>0)+(F>>>0)+(V>>>0);mn.add4L=q;const L=(O,z,F,V,U)=>z+F+V+U+(O/2**32|0)|0;mn.add4H=L;const $=(O,z,F,V,U)=>(O>>>0)+(z>>>0)+(F>>>0)+(V>>>0)+(U>>>0);mn.add5L=$;const W=(O,z,F,V,U,M)=>z+F+V+U+M+(O/2**32|0)|0;mn.add5H=W;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:u,rotrBH:f,rotrBL:p,rotr32H:h,rotr32L:b,rotlSH:x,rotlSL:_,rotlBH:E,rotlBL:k,add:j,add3L:C,add3H:R,add4L:q,add4H:L,add5H:W,add5L:$};return mn.default=P,mn}var s0={},yp={},Gj;function z9(){return Gj||(Gj=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.crypto=void 0,yp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),yp}var Jj;function W9(){return Jj||(Jj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=l,t.rotl=u,t.byteSwap=f,t.byteSwap32=p,t.bytesToHex=b,t.hexToBytes=E,t.asyncLoop=j,t.utf8ToBytes=C,t.toBytes=R,t.concatBytes=q,t.checkOpts=$,t.wrapConstructor=W,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=O,t.randomBytes=z;const e=z9(),n=LF();function r(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function i(F){return new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}function s(F){return new Uint32Array(F.buffer,F.byteOffset,Math.floor(F.byteLength/4))}function o(F){return new DataView(F.buffer,F.byteOffset,F.byteLength)}function l(F,V){return F<<32-V|F>>>V}function u(F,V){return F<<V|F>>>32-V>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function f(F){return F<<24&0xff000000|F<<8&0xff0000|F>>>8&65280|F>>>24&255}t.byteSwapIfBE=t.isLE?F=>F:F=>f(F);function p(F){for(let V=0;V<F.length;V++)F[V]=f(F[V])}const h=Array.from({length:256},(F,V)=>V.toString(16).padStart(2,"0"));function b(F){(0,n.abytes)(F);let V="";for(let U=0;U<F.length;U++)V+=h[F[U]];return V}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(F){if(F>=x._0&&F<=x._9)return F-x._0;if(F>=x.A&&F<=x.F)return F-(x.A-10);if(F>=x.a&&F<=x.f)return F-(x.a-10)}function E(F){if(typeof F!="string")throw new Error("hex string expected, got "+typeof F);const V=F.length,U=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const M=new Uint8Array(U);for(let X=0,J=0;X<U;X++,J+=2){const le=_(F.charCodeAt(J)),ie=_(F.charCodeAt(J+1));if(le===void 0||ie===void 0){const ne=F[J]+F[J+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+J)}M[X]=le*16+ie}return M}const k=async()=>{};t.nextTick=k;async function j(F,V,U){let M=Date.now();for(let X=0;X<F;X++){U(X);const J=Date.now()-M;J>=0&&J<V||(await (0,t.nextTick)(),M+=J)}}function C(F){if(typeof F!="string")throw new Error("utf8ToBytes expected string, got "+typeof F);return new Uint8Array(new TextEncoder().encode(F))}function R(F){return typeof F=="string"&&(F=C(F)),(0,n.abytes)(F),F}function q(...F){let V=0;for(let M=0;M<F.length;M++){const X=F[M];(0,n.abytes)(X),V+=X.length}const U=new Uint8Array(V);for(let M=0,X=0;M<F.length;M++){const J=F[M];U.set(J,X),X+=J.length}return U}class L{clone(){return this._cloneInto()}}t.Hash=L;function $(F,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(F,V)}function W(F){const V=M=>F().update(R(M)).digest(),U=F();return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=()=>F(),V}function P(F){const V=(M,X)=>F(X).update(R(M)).digest(),U=F({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=M=>F(M),V}function O(F){const V=(M,X)=>F(X).update(R(M)).digest(),U=F({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=M=>F(M),V}function z(F=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(F));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(F);throw new Error("crypto.getRandomValues must be defined")}}(s0)),s0}var Zj;function V9(){if(Zj)return nr;Zj=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.shake256=nr.shake128=nr.keccak_512=nr.keccak_384=nr.keccak_256=nr.keccak_224=nr.sha3_512=nr.sha3_384=nr.sha3_256=nr.sha3_224=nr.Keccak=void 0,nr.keccakP=k;const t=LF(),e=B9(),n=W9(),r=[],i=[],s=[],o=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(7),p=BigInt(256),h=BigInt(113);for(let q=0,L=l,$=1,W=0;q<24;q++){[$,W]=[W,(2*$+3*W)%5],r.push(2*(5*W+$)),i.push((q+1)*(q+2)/2%64);let P=o;for(let O=0;O<7;O++)L=(L<<l^(L>>f)*h)%p,L&u&&(P^=l<<(l<<BigInt(O))-l);s.push(P)}const[b,x]=(0,e.split)(s,!0),_=(q,L,$)=>$>32?(0,e.rotlBH)(q,L,$):(0,e.rotlSH)(q,L,$),E=(q,L,$)=>$>32?(0,e.rotlBL)(q,L,$):(0,e.rotlSL)(q,L,$);function k(q,L=24){const $=new Uint32Array(10);for(let W=24-L;W<24;W++){for(let z=0;z<10;z++)$[z]=q[z]^q[z+10]^q[z+20]^q[z+30]^q[z+40];for(let z=0;z<10;z+=2){const F=(z+8)%10,V=(z+2)%10,U=$[V],M=$[V+1],X=_(U,M,1)^$[F],J=E(U,M,1)^$[F+1];for(let le=0;le<50;le+=10)q[z+le]^=X,q[z+le+1]^=J}let P=q[2],O=q[3];for(let z=0;z<24;z++){const F=i[z],V=_(P,O,F),U=E(P,O,F),M=r[z];P=q[M],O=q[M+1],q[M]=V,q[M+1]=U}for(let z=0;z<50;z+=10){for(let F=0;F<10;F++)$[F]=q[z+F];for(let F=0;F<10;F++)q[z+F]^=~$[(F+2)%10]&$[(F+4)%10]}q[0]^=b[W],q[1]^=x[W]}$.fill(0)}class j extends n.Hash{constructor(L,$,W,P=!1,O=24){if(super(),this.blockLen=L,this.suffix=$,this.outputLen=W,this.enableXOF=P,this.rounds=O,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(W),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),k(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(L){(0,t.aexists)(this);const{blockLen:$,state:W}=this;L=(0,n.toBytes)(L);const P=L.length;for(let O=0;O<P;){const z=Math.min($-this.pos,P-O);for(let F=0;F<z;F++)W[this.pos++]^=L[O++];this.pos===$&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:L,suffix:$,pos:W,blockLen:P}=this;L[W]^=$,$&128&&W===P-1&&this.keccak(),L[P-1]^=128,this.keccak()}writeInto(L){(0,t.aexists)(this,!1),(0,t.abytes)(L),this.finish();const $=this.state,{blockLen:W}=this;for(let P=0,O=L.length;P<O;){this.posOut>=W&&this.keccak();const z=Math.min(W-this.posOut,O-P);L.set($.subarray(this.posOut,this.posOut+z),P),this.posOut+=z,P+=z}return L}xofInto(L){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(L)}xof(L){return(0,t.anumber)(L),this.xofInto(new Uint8Array(L))}digestInto(L){if((0,t.aoutput)(L,this),this.finished)throw new Error("digest() was already called");return this.writeInto(L),this.destroy(),L}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(L){const{blockLen:$,suffix:W,outputLen:P,rounds:O,enableXOF:z}=this;return L||(L=new j($,W,P,z,O)),L.state32.set(this.state32),L.pos=this.pos,L.posOut=this.posOut,L.finished=this.finished,L.rounds=O,L.suffix=W,L.outputLen=P,L.enableXOF=z,L.destroyed=this.destroyed,L}}nr.Keccak=j;const C=(q,L,$)=>(0,n.wrapConstructor)(()=>new j(L,q,$));nr.sha3_224=C(6,144,224/8),nr.sha3_256=C(6,136,256/8),nr.sha3_384=C(6,104,384/8),nr.sha3_512=C(6,72,512/8),nr.keccak_224=C(1,144,224/8),nr.keccak_256=C(1,136,256/8),nr.keccak_384=C(1,104,384/8),nr.keccak_512=C(1,72,512/8);const R=(q,L,$)=>(0,n.wrapXOFConstructorWithOpts)((W={})=>new j(L,q,W.dkLen===void 0?$:W.dkLen,!0));return nr.shake128=R(31,168,128/8),nr.shake256=R(31,136,256/8),nr}var Yj;function U9(){if(Yj)return Ta;Yj=1;const{sha3_512:t}=V9(),e=24,n=32,r=(_=4,E=Math.random)=>{let k="";for(;k.length<_;)k=k+Math.floor(E()*36).toString(36);return k};function i(_){let E=8n,k=0n;for(const j of _.values()){const C=BigInt(j);k=(k<<E)+C}return k}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,E)=>String.fromCharCode(E+97)),l=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof Mc<"u"?Mc:typeof window<"u"?window:{},random:E=Math.random}={})=>{const k=Object.keys(_).toString(),j=k.length?k+r(n,E):r(n,E);return s(j).substring(0,n)},f=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:E=f(Math.floor(_()*p)),length:k=e,fingerprint:j=u({random:_})}={})=>function(){const R=l(_),q=Date.now().toString(36),L=E().toString(36),$=r(k,_),W=`${q+$+L+j}`;return`${R+s(W).substring(1,k)}`},b=h(),x=(_,{minLength:E=2,maxLength:k=n}={})=>{const j=_.length,C=/^[0-9a-z]+$/;try{if(typeof _=="string"&&j>=E&&j<=k&&C.test(_))return!0}finally{}return!1};return Ta.getConstants=()=>({defaultLength:e,bigLength:n}),Ta.init=h,Ta.createId=b,Ta.bufToBigInt=i,Ta.createCounter=f,Ta.createFingerprint=u,Ta.isCuid=x,Ta}var Xj;function H9(){if(Xj)return Xu;Xj=1;const{createId:t,init:e,getConstants:n,isCuid:r}=U9();return Xu.createId=t,Xu.init=e,Xu.getConstants=n,Xu.isCuid=r,Xu}var K9=H9();const In=K9.createId;var o0,eR;function Q9(){if(eR)return o0;eR=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(C){C!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(R){try{var q=t.call(R);return i.test(q)}catch{return!1}},o=function(R){try{return s(R)?!1:(t.call(R),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",f="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",b="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),k=function(){return!1};if(typeof document=="object"){var j=document.all;l.call(j)===l.call(document.all)&&(k=function(R){if((E||!R)&&(typeof R>"u"||typeof R=="object"))try{var q=l.call(R);return(q===h||q===b||q===x||q===u)&&R("")==null}catch{}return!1})}return o0=e?function(R){if(k(R))return!0;if(!R||typeof R!="function"&&typeof R!="object")return!1;try{e(R,null,n)}catch(q){if(q!==r)return!1}return!s(R)&&o(R)}:function(R){if(k(R))return!0;if(!R||typeof R!="function"&&typeof R!="object")return!1;if(_)return o(R);if(s(R))return!1;var q=l.call(R);return q!==f&&q!==p&&!/^\[object HTML/.test(q)?!1:o(R)},o0}var G9=Q9();const J9=co(G9),Z9=t=>J9(t);var Ty={exports:{}},Y9=Ty.exports,tR;function X9(){return tR||(tR=1,function(t){(function(e,n){t.exports=n()})(Y9,function(){var e=Object.prototype.toString;function n(h,b){return h==null?!1:Object.prototype.hasOwnProperty.call(h,b)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var b in h)if(n(h,b))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function l(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var b=parseInt(h);return b.toString()===h?b:h}function f(h){h=h||{};var b=function(j){return Object.keys(b).reduce(function(C,R){return R==="create"||typeof b[R]=="function"&&(C[R]=b[R].bind(b,j)),C},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(j,C){return typeof C=="number"&&Array.isArray(j)||n(j,C)};function _(j,C){if(x(j,C))return j[C]}var E;h.includeInheritedProps?E=function(j,C){typeof C!="string"&&typeof C!="number"&&(C=String(C));var R=_(j,C);if(C==="__proto__"||C==="prototype"||C==="constructor"&&typeof R=="function")throw new Error("For security reasons, object's magic properties cannot be set");return R}:E=function(j,C){return _(j,C)};function k(j,C,R,q){if(typeof C=="number"&&(C=[C]),!C||C.length===0)return j;if(typeof C=="string")return k(j,C.split(".").map(u),R,q);var L=C[0],$=E(j,L);return C.length===1?(($===void 0||!q)&&(j[L]=R),$):($===void 0&&(typeof C[1]=="number"?j[L]=[]:j[L]={}),k(j[L],C.slice(1),R,q))}return b.has=function(j,C){if(typeof C=="number"?C=[C]:typeof C=="string"&&(C=C.split(".")),!C||C.length===0)return!!j;for(var R=0;R<C.length;R++){var q=u(C[R]);if(typeof q=="number"&&o(j)&&q<j.length||(h.includeInheritedProps?q in Object(j):n(j,q)))j=j[q];else return!1}return!0},b.ensureExists=function(j,C,R){return k(j,C,R,!0)},b.set=function(j,C,R,q){return k(j,C,R,q)},b.insert=function(j,C,R,q){var L=b.get(j,C);q=~~q,o(L)||(L=[],b.set(j,C,L)),L.splice(q,0,R)},b.empty=function(j,C){if(!r(C)&&j!=null){var R,q;if(R=b.get(j,C)){if(typeof R=="string")return b.set(j,C,"");if(l(R))return b.set(j,C,!1);if(typeof R=="number")return b.set(j,C,0);if(o(R))R.length=0;else if(s(R))for(q in R)x(R,q)&&delete R[q];else return b.set(j,C,null)}}},b.push=function(j,C){var R=b.get(j,C);o(R)||(R=[],b.set(j,C,R)),R.push.apply(R,Array.prototype.slice.call(arguments,2))},b.coalesce=function(j,C,R){for(var q,L=0,$=C.length;L<$;L++)if((q=b.get(j,C[L]))!==void 0)return q;return R},b.get=function(j,C,R){if(typeof C=="number"&&(C=[C]),!C||C.length===0)return j;if(j==null)return R;if(typeof C=="string")return b.get(j,C.split("."),R);var q=u(C[0]),L=E(j,q);return L===void 0?R:C.length===1?L:b.get(j[q],C.slice(1),R)},b.del=function(C,R){if(typeof R=="number"&&(R=[R]),C==null||r(R))return C;if(typeof R=="string")return b.del(C,R.split("."));var q=u(R[0]);if(E(C,q),!x(C,q))return C;if(R.length===1)o(C)?C.splice(q,1):delete C[q];else return b.del(C[q],R.slice(1));return C},b}var p=f();return p.create=f,p.withInheritedProps=f({includeInheritedProps:!0}),p})}(Ty)),Ty.exports}var eK=X9();const nR=co(eK);function dn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const GI=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},MF=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),tK=xn({use:MF,slot:{},variant:{},defaults:{}}),JI=({icon:t,iconProps:e,variant:n,tva:r=tK,css:i,children:s,...o})=>{const l=r({...n,css:i}).slots;return d.jsxs("div",{className:l.base(),...o,children:[kv(t)?d.jsx(nn,{icon:t,...e}):t,s]})};function Fv(){return typeof window<"u"}function sc(t){return $F(t)?(t.nodeName||"").toLowerCase():"#document"}function ms(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ua(t){var e;return(e=($F(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $F(t){return Fv()?t instanceof Node||t instanceof ms(t).Node:!1}function ir(t){return Fv()?t instanceof Element||t instanceof ms(t).Element:!1}function Yr(t){return Fv()?t instanceof HTMLElement||t instanceof ms(t).HTMLElement:!1}function IE(t){return!Fv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ms(t).ShadowRoot}function fm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=oo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function nK(t){return["table","td","th"].includes(sc(t))}function Dv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function ZI(t){const e=Lv(),n=ir(t)?oo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function rK(t){let e=Ka(t);for(;Yr(e)&&!Ma(e);){if(ZI(e))return e;if(Dv(e))return null;e=Ka(e)}return null}function Lv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ma(t){return["html","body","#document"].includes(sc(t))}function oo(t){return ms(t).getComputedStyle(t)}function Mv(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ka(t){if(sc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IE(t)&&t.host||ua(t);return IE(e)?e.host:e}function BF(t){const e=Ka(t);return Ma(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&fm(e)?e:BF(e)}function zl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=BF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ms(i);if(s){const l=NE(o);return e.concat(o,o.visualViewport||[],fm(i)?i:[],l&&n?zl(l):[])}return e.concat(i,zl(i,[],n))}function NE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ko(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function pi(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&IE(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function YI(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function zF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function WF(t){return t.mozInputSource===0&&t.isTrusted?!0:kE()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function XI(t){return sK()?!1:!kE()&&t.width===0&&t.height===0||kE()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function VF(){return/apple/i.test(navigator.vendor)}function kE(){const t=/android/i;return t.test(YI())||t.test(zF())}function iK(){return YI().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function sK(){return zF().includes("jsdom/")}function Oh(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function oK(t){return"nativeEvent"in t}function aK(t){return t.matches("html,body")}function hi(t){return t?.ownerDocument||document}function a0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Al(t){return"composedPath"in t?t.composedPath()[0]:t.target}const lK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function eN(t){return Yr(t)&&t.matches(lK)}function Bi(t){t.preventDefault(),t.stopPropagation()}function UF(t){return t?t.getAttribute("role")==="combobox"&&eN(t):!1}const Hd=Math.min,ks=Math.max,jb=Math.round,md=Math.floor,ta=t=>({x:t,y:t}),cK={left:"right",right:"left",bottom:"top",top:"bottom"},uK={start:"end",end:"start"};function rR(t,e,n){return ks(t,Hd(e,n))}function pm(t,e){return typeof t=="function"?t(e):t}function ec(t){return t.split("-")[0]}function hm(t){return t.split("-")[1]}function HF(t){return t==="x"?"y":"x"}function KF(t){return t==="y"?"height":"width"}function ou(t){return["top","bottom"].includes(ec(t))?"y":"x"}function QF(t){return HF(ou(t))}function dK(t,e,n){n===void 0&&(n=!1);const r=hm(t),i=QF(t),s=KF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Rb(o)),[o,Rb(o)]}function fK(t){const e=Rb(t);return[CE(t),e,CE(e)]}function CE(t){return t.replace(/start|end/g,e=>uK[e])}function pK(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function hK(t,e,n,r){const i=hm(t);let s=pK(ec(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(CE)))),s}function Rb(t){return t.replace(/left|right|bottom|top/g,e=>cK[e])}function mK(t){return{top:0,right:0,bottom:0,left:0,...t}}function gK(t){return typeof t!="number"?mK(t):{top:t,right:t,bottom:t,left:t}}function Ob(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var yK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],qb=yK.join(","),GF=typeof Element>"u",Kd=GF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ab=!GF&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Pb=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},bK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},vK=function(e,n,r){if(Pb(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(qb));return n&&Kd.call(e,qb)&&i.unshift(e),i=i.filter(r),i},xK=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Pb(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,f=t(u,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:o,candidates:f})}else{var p=Kd.call(o,qb);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!Pb(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&b){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},JF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ZF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||bK(e))&&!JF(e)?0:e.tabIndex},wK=function(e,n){var r=ZF(e);return r<0&&n&&!JF(e)?0:r},_K=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},YF=function(e){return e.tagName==="INPUT"},SK=function(e){return YF(e)&&e.type==="hidden"},EK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},IK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},NK=function(e){if(!e.name)return!0;var n=e.form||Ab(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=IK(i,e.form);return!s||s===e},kK=function(e){return YF(e)&&e.type==="radio"},CK=function(e){return kK(e)&&!NK(e)},TK=function(e){var n,r=e&&Ab(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,l,u;for(s=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var f,p,h;r=Ab(i),i=(f=r)===null||f===void 0?void 0:f.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},iR=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},jK=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Kd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Kd.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,f=Ab(e);if(u&&!u.shadowRoot&&i(u)===!0)return iR(e);e.assignedSlot?e=e.assignedSlot:!u&&f!==e.ownerDocument?e=f.host:e=u}e=l}if(TK(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return iR(e);return!1},RK=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Kd.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},OK=function(e,n){return!(n.disabled||Pb(n)||SK(n)||jK(n,e)||EK(n)||RK(n))},TE=function(e,n){return!(CK(n)||ZF(n)<0||!OK(e,n))},qK=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},AK=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=wK(l,o),f=o?t(i.candidates):l;u===0?o?n.push.apply(n,f):n.push(l):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:f})}),r.sort(_K).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},$v=function(e,n){n=n||{};var r;return n.getShadowRoot?r=xK([e],n.includeContainer,{filter:TE.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:qK}):r=vK(e,n.includeContainer,TE.bind(null,n)),AK(r)},PK=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Kd.call(e,qb)===!1?!1:TE(n,e)};function sR(t,e,n){let{reference:r,floating:i}=t;const s=ou(e),o=QF(e),l=KF(o),u=ec(e),f=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(hm(e)){case"start":x[o]-=b*(n&&f?-1:1);break;case"end":x[o]+=b*(n&&f?-1:1);break}return x}const FK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=sR(f,r,u),b=r,x={},_=0;for(let E=0;E<l.length;E++){const{name:k,fn:j}=l[E],{x:C,y:R,data:q,reset:L}=await j({x:p,y:h,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:f,platform:o,elements:{reference:t,floating:e}});p=C??p,h=R??h,x={...x,[k]:{...x[k],...q}},L&&_<=50&&(_++,typeof L=="object"&&(L.placement&&(b=L.placement),L.rects&&(f=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):L.rects),{x:p,y:h}=sR(f,b,u)),E=-1)}return{x:p,y:h,placement:b,strategy:i,middlewareData:x}};async function tN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:b=!1,padding:x=0}=pm(e,t),_=gK(x),k=l[b?h==="floating"?"reference":"floating":h],j=Ob(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:f,rootBoundary:p,strategy:u})),C=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,R=await (s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),q=await (s.isElement==null?void 0:s.isElement(R))?await (s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},L=Ob(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:R,strategy:u}):C);return{top:(j.top-L.top+_.top)/q.y,bottom:(L.bottom-j.bottom+_.bottom)/q.y,left:(j.left-L.left+_.left)/q.x,right:(L.right-j.right+_.right)/q.x}}const DK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:f}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...k}=pm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const j=ec(i),C=ou(l),R=ec(l)===l,q=await (u.isRTL==null?void 0:u.isRTL(f.floating)),L=b||(R||!E?[Rb(l)]:fK(l)),$=_!=="none";!b&&$&&L.push(...hK(l,E,_,q));const W=[l,...L],P=await tN(e,k),O=[];let z=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&O.push(P[j]),h){const M=dK(i,o,q);O.push(P[M[0]],P[M[1]])}if(z=[...z,{placement:i,overflows:O}],!O.every(M=>M<=0)){var F,V;const M=(((F=s.flip)==null?void 0:F.index)||0)+1,X=W[M];if(X)return{data:{index:M,overflows:z},reset:{placement:X}};let J=(V=z.filter(le=>le.overflows[0]<=0).sort((le,ie)=>le.overflows[1]-ie.overflows[1])[0])==null?void 0:V.placement;if(!J)switch(x){case"bestFit":{var U;const le=(U=z.filter(ie=>{if($){const ne=ou(ie.placement);return ne===C||ne==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((ie,ne)=>ie[1]-ne[1])[0])==null?void 0:U[0];le&&(J=le);break}case"initialPlacement":J=l;break}if(i!==J)return{reset:{placement:J}}}return{}}}};async function LK(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=ec(n),l=hm(n),u=ou(n)==="y",f=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=pm(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(x=l==="end"?_*-1:_),u?{x:x*p,y:b*f}:{x:b*f,y:x*p}}const MK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await LK(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},$K=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:k=>{let{x:j,y:C}=k;return{x:j,y:C}}},...u}=pm(t,e),f={x:n,y:r},p=await tN(e,u),h=ou(ec(i)),b=HF(h);let x=f[b],_=f[h];if(s){const k=b==="y"?"top":"left",j=b==="y"?"bottom":"right",C=x+p[k],R=x-p[j];x=rR(C,x,R)}if(o){const k=h==="y"?"top":"left",j=h==="y"?"bottom":"right",C=_+p[k],R=_-p[j];_=rR(C,_,R)}const E=l.fn({...e,[b]:x,[h]:_});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:s,[h]:o}}}}}},BK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...f}=pm(t,e),p=await tN(e,f),h=ec(i),b=hm(i),x=ou(i)==="y",{width:_,height:E}=s.floating;let k,j;h==="top"||h==="bottom"?(k=h,j=b===(await (o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=h,k=b==="end"?"top":"bottom");const C=E-p.top-p.bottom,R=_-p.left-p.right,q=Hd(E-p[k],C),L=Hd(_-p[j],R),$=!e.middlewareData.shift;let W=q,P=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=C),$&&!b){const z=ks(p.left,0),F=ks(p.right,0),V=ks(p.top,0),U=ks(p.bottom,0);x?P=_-2*(z!==0||F!==0?z+F:ks(p.left,p.right)):W=E-2*(V!==0||U!==0?V+U:ks(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:W});const O=await o.getDimensions(l.floating);return _!==O.width||E!==O.height?{reset:{rects:!0}}:{}}}};function XF(t){const e=oo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Yr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=jb(n)!==s||jb(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function nN(t){return ir(t)?t:t.contextElement}function Ad(t){const e=nN(t);if(!Yr(e))return ta(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=XF(e);let o=(s?jb(n.width):n.width)/r,l=(s?jb(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const zK=ta(0);function eD(t){const e=ms(t);return!Lv()||!e.visualViewport?zK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function WK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ms(t)?!1:e}function au(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=nN(t);let o=ta(1);e&&(r?ir(r)&&(o=Ad(r)):o=Ad(t));const l=WK(s,n,r)?eD(s):ta(0);let u=(i.left+l.x)/o.x,f=(i.top+l.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const b=ms(s),x=r&&ir(r)?ms(r):r;let _=b,E=NE(_);for(;E&&r&&x!==_;){const k=Ad(E),j=E.getBoundingClientRect(),C=oo(E),R=j.left+(E.clientLeft+parseFloat(C.paddingLeft))*k.x,q=j.top+(E.clientTop+parseFloat(C.paddingTop))*k.y;u*=k.x,f*=k.y,p*=k.x,h*=k.y,u+=R,f+=q,_=ms(E),E=NE(_)}}return Ob({width:p,height:h,x:u,y:f})}function rN(t,e){const n=Mv(t).scrollLeft;return e?e.left+n:au(ua(t)).left+n}function tD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:rN(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function VK(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ua(r),l=e?Dv(e.floating):!1;if(r===o||l&&s)return n;let u={scrollLeft:0,scrollTop:0},f=ta(1);const p=ta(0),h=Yr(r);if((h||!h&&!s)&&((sc(r)!=="body"||fm(o))&&(u=Mv(r)),Yr(r))){const x=au(r);f=Ad(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const b=o&&!h&&!s?tD(o,u,!0):ta(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+p.x+b.x,y:n.y*f.y-u.scrollTop*f.y+p.y+b.y}}function UK(t){return Array.from(t.getClientRects())}function HK(t){const e=ua(t),n=Mv(t),r=t.ownerDocument.body,i=ks(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ks(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+rN(t);const l=-n.scrollTop;return oo(r).direction==="rtl"&&(o+=ks(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function KK(t,e){const n=ms(t),r=ua(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const f=Lv();(!f||f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:l,y:u}}function QK(t,e){const n=au(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Yr(t)?Ad(t):ta(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,u=i*s.x,f=r*s.y;return{width:o,height:l,x:u,y:f}}function oR(t,e,n){let r;if(e==="viewport")r=KK(t,n);else if(e==="document")r=HK(ua(t));else if(ir(e))r=QK(e,n);else{const i=eD(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ob(r)}function nD(t,e){const n=Ka(t);return n===e||!ir(n)||Ma(n)?!1:oo(n).position==="fixed"||nD(n,e)}function GK(t,e){const n=e.get(t);if(n)return n;let r=zl(t,[],!1).filter(l=>ir(l)&&sc(l)!=="body"),i=null;const s=oo(t).position==="fixed";let o=s?Ka(t):t;for(;ir(o)&&!Ma(o);){const l=oo(o),u=ZI(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||fm(o)&&!u&&nD(t,o))?r=r.filter(p=>p!==o):i=l,o=Ka(o)}return e.set(t,r),r}function JK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Dv(e)?[]:GK(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((f,p)=>{const h=oR(e,p,i);return f.top=ks(h.top,f.top),f.right=Hd(h.right,f.right),f.bottom=Hd(h.bottom,f.bottom),f.left=ks(h.left,f.left),f},oR(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ZK(t){const{width:e,height:n}=XF(t);return{width:e,height:n}}function YK(t,e,n){const r=Yr(e),i=ua(e),s=n==="fixed",o=au(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=ta(0);if(r||!r&&!s)if((sc(e)!=="body"||fm(i))&&(l=Mv(e)),r){const b=au(e,!0,s,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else i&&(u.x=rN(i));const f=i&&!r&&!s?tD(i,l):ta(0),p=o.left+l.scrollLeft-u.x-f.x,h=o.top+l.scrollTop-u.y-f.y;return{x:p,y:h,width:o.width,height:o.height}}function l0(t){return oo(t).position==="static"}function aR(t,e){if(!Yr(t)||oo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ua(t)===n&&(n=n.ownerDocument.body),n}function rD(t,e){const n=ms(t);if(Dv(t))return n;if(!Yr(t)){let i=Ka(t);for(;i&&!Ma(i);){if(ir(i)&&!l0(i))return i;i=Ka(i)}return n}let r=aR(t,e);for(;r&&nK(r)&&l0(r);)r=aR(r,e);return r&&Ma(r)&&l0(r)&&!ZI(r)?n:r||rK(t)||n}const XK=async function(t){const e=this.getOffsetParent||rD,n=this.getDimensions,r=await n(t.floating);return{reference:YK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function e7(t){return oo(t).direction==="rtl"}const t7={convertOffsetParentRelativeRectToViewportRelativeRect:VK,getDocumentElement:ua,getClippingRect:JK,getOffsetParent:rD,getElementRects:XK,getClientRects:UK,getDimensions:ZK,getScale:Ad,isElement:ir,isRTL:e7};function iD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function n7(t,e){let n=null,r;const i=ua(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const f=t.getBoundingClientRect(),{left:p,top:h,width:b,height:x}=f;if(l||e(),!b||!x)return;const _=md(h),E=md(i.clientWidth-(p+b)),k=md(i.clientHeight-(h+x)),j=md(p),R={rootMargin:-_+"px "+-E+"px "+-k+"px "+-j+"px",threshold:ks(0,Hd(1,u))||1};let q=!0;function L($){const W=$[0].intersectionRatio;if(W!==u){if(!q)return o();W?o(!1,W):r=setTimeout(()=>{o(!1,1e-7)},1e3)}W===1&&!iD(f,t.getBoundingClientRect())&&o(),q=!1}try{n=new IntersectionObserver(L,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(L,R)}n.observe(t)}return o(!0),s}function sD(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=nN(t),p=i||s?[...f?zl(f):[],...zl(e)]:[];p.forEach(j=>{i&&j.addEventListener("scroll",n,{passive:!0}),s&&j.addEventListener("resize",n)});const h=f&&l?n7(f,n):null;let b=-1,x=null;o&&(x=new ResizeObserver(j=>{let[C]=j;C&&C.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(e)})),n()}),f&&!u&&x.observe(f),x.observe(e));let _,E=u?au(t):null;u&&k();function k(){const j=au(t);E&&!iD(E,j)&&n(),E=j,_=requestAnimationFrame(k)}return n(),()=>{var j;p.forEach(C=>{i&&C.removeEventListener("scroll",n),s&&C.removeEventListener("resize",n)}),h?.(),(j=x)==null||j.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const r7=MK,i7=$K,s7=DK,o7=BK,a7=(t,e,n)=>{const r=new Map,i={platform:t7,...n},s={...i.platform,_c:r};return FK(t,e,{...i,platform:s})};var jy=typeof document<"u"?H.useLayoutEffect:H.useEffect;function Fb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Fb(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Fb(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function oD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function lR(t,e){const n=oD(t);return Math.round(e*n)/n}function c0(t){const e=H.useRef(t);return jy(()=>{e.current=t}),e}function l7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:f}=t,[p,h]=H.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,x]=H.useState(r);Fb(b,r)||x(r);const[_,E]=H.useState(null),[k,j]=H.useState(null),C=H.useCallback(ie=>{ie!==$.current&&($.current=ie,E(ie))},[]),R=H.useCallback(ie=>{ie!==W.current&&(W.current=ie,j(ie))},[]),q=s||_,L=o||k,$=H.useRef(null),W=H.useRef(null),P=H.useRef(p),O=u!=null,z=c0(u),F=c0(i),V=c0(f),U=H.useCallback(()=>{if(!$.current||!W.current)return;const ie={placement:e,strategy:n,middleware:b};F.current&&(ie.platform=F.current),a7($.current,W.current,ie).then(ne=>{const oe={...ne,isPositioned:V.current!==!1};M.current&&!Fb(P.current,oe)&&(P.current=oe,Jh.flushSync(()=>{h(oe)}))})},[b,e,n,F,V]);jy(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(ie=>({...ie,isPositioned:!1})))},[f]);const M=H.useRef(!1);jy(()=>(M.current=!0,()=>{M.current=!1}),[]),jy(()=>{if(q&&($.current=q),L&&(W.current=L),q&&L){if(z.current)return z.current(q,L,U);U()}},[q,L,U,z,O]);const X=H.useMemo(()=>({reference:$,floating:W,setReference:C,setFloating:R}),[C,R]),J=H.useMemo(()=>({reference:q,floating:L}),[q,L]),le=H.useMemo(()=>{const ie={position:n,left:0,top:0};if(!J.floating)return ie;const ne=lR(J.floating,p.x),oe=lR(J.floating,p.y);return l?{...ie,transform:"translate("+ne+"px, "+oe+"px)",...oD(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,l,J.floating,p.x,p.y]);return H.useMemo(()=>({...p,update:U,refs:X,elements:J,floatingStyles:le}),[p,U,X,J,le])}const aD=(t,e)=>({...r7(t),options:[t,e]}),c7=(t,e)=>({...i7(t),options:[t,e]}),lD=(t,e)=>({...s7(t),options:[t,e]}),u7=(t,e)=>({...o7(t),options:[t,e]});function cR(t){return H.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const cD={...kB},d7=cD.useInsertionEffect,f7=d7||(t=>t());function Vi(t){const e=H.useRef(()=>{});return f7(()=>{e.current=t}),H.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const iN="ArrowUp",mm="ArrowDown",Wl="ArrowLeft",Vl="ArrowRight";function Ug(t,e,n){return Math.floor(t/e)!==n}function eh(t,e){return e<0||e>=t.current.length}function u0(t,e){return Ii(t,{disabledIndices:e})}function uR(t,e){return Ii(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function Ii(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let l=n;do l+=r?-s:s;while(l>=0&&l<=o.length-1&&Ry(o,l,i));return l}function p7(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:l,minIndex:u,maxIndex:f,prevIndex:p,stopEvent:h=!1}=e,b=p;if(n.key===iN){if(h&&Bi(n),p===-1)b=f;else if(b=Ii(t,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),i&&(p-o<u||b<0)){const x=p%o,_=f%o,E=f-(_-x);_===x?b=f:b=_>x?E:E-o}eh(t,b)&&(b=p)}if(n.key===mm&&(h&&Bi(n),p===-1?b=u:(b=Ii(t,{startingIndex:p,amount:o,disabledIndices:l}),i&&p+o>f&&(b=Ii(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),eh(t,b)&&(b=p)),r==="both"){const x=md(p/o);n.key===(s?Wl:Vl)&&(h&&Bi(n),p%o!==o-1?(b=Ii(t,{startingIndex:p,disabledIndices:l}),i&&Ug(b,o,x)&&(b=Ii(t,{startingIndex:p-p%o-1,disabledIndices:l}))):i&&(b=Ii(t,{startingIndex:p-p%o-1,disabledIndices:l})),Ug(b,o,x)&&(b=p)),n.key===(s?Vl:Wl)&&(h&&Bi(n),p%o!==0?(b=Ii(t,{startingIndex:p,decrement:!0,disabledIndices:l}),i&&Ug(b,o,x)&&(b=Ii(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):i&&(b=Ii(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),Ug(b,o,x)&&(b=p));const _=md(f/o)===x;eh(t,b)&&(i&&_?b=n.key===(s?Vl:Wl)?f:Ii(t,{startingIndex:p-p%o-1,disabledIndices:l}):b=p)}return b}function h7(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:l,height:u}=s,f=!1;for(n&&(i=0);!f;){const p=[];for(let h=0;h<l;h++)for(let b=0;b<u;b++)p.push(i+h+b*e);i%e+l<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),f=!0):i++}}),[...r]}function m7(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function g7(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function Ry(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var yr=typeof document<"u"?H.useLayoutEffect:H.useEffect;let dR=!1,y7=0;const fR=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+y7++;function b7(){const[t,e]=H.useState(()=>dR?fR():void 0);return yr(()=>{t==null&&e(fR())},[]),H.useEffect(()=>{dR=!0},[]),t}const v7=cD.useId,sN=v7||b7;function uD(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const dD=H.createContext(null),fD=H.createContext(null),gm=()=>{var t;return((t=H.useContext(dD))==null?void 0:t.id)||null},pf=()=>H.useContext(fD);function x7(t){const e=sN(),n=pf(),i=gm();return yr(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function w7(t){const{children:e,id:n}=t,r=gm();return d.jsx(dD.Provider,{value:H.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function _7(t){const{children:e}=t,n=H.useRef([]),r=H.useCallback(o=>{n.current=[...n.current,o]},[]),i=H.useCallback(o=>{n.current=n.current.filter(l=>l!==o)},[]),s=H.useState(()=>uD())[0];return d.jsx(fD.Provider,{value:H.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function lu(t){return"data-floating-ui-"+t}function Ui(t){const e=H.useRef(t);return yr(()=>{e.current=t}),e}const pR=lu("safe-polygon");function d0(t,e,n){return n&&!Oh(n)?0:typeof t=="number"?t:t?.[e]}function S7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:l=!0,delay:u=0,handleClose:f=null,mouseOnly:p=!1,restMs:h=0,move:b=!0}=e,x=pf(),_=gm(),E=Ui(f),k=Ui(u),j=Ui(n),C=H.useRef(),R=H.useRef(-1),q=H.useRef(),L=H.useRef(-1),$=H.useRef(!0),W=H.useRef(!1),P=H.useRef(()=>{}),O=H.useRef(!1),z=H.useCallback(()=>{var le;const ie=(le=i.current.openEvent)==null?void 0:le.type;return ie?.includes("mouse")&&ie!=="mousedown"},[i]);H.useEffect(()=>{if(!l)return;function le(ie){let{open:ne}=ie;ne||(clearTimeout(R.current),clearTimeout(L.current),$.current=!0,O.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[l,s]),H.useEffect(()=>{if(!l||!E.current||!n)return;function le(ne){z()&&r(!1,ne,"hover")}const ie=hi(o.floating).documentElement;return ie.addEventListener("mouseleave",le),()=>{ie.removeEventListener("mouseleave",le)}},[o.floating,n,r,l,E,z]);const F=H.useCallback(function(le,ie,ne){ie===void 0&&(ie=!0),ne===void 0&&(ne="hover");const oe=d0(k.current,"close",C.current);oe&&!q.current?(clearTimeout(R.current),R.current=window.setTimeout(()=>r(!1,le,ne),oe)):ie&&(clearTimeout(R.current),r(!1,le,ne))},[k,r]),V=Vi(()=>{P.current(),q.current=void 0}),U=Vi(()=>{if(W.current){const le=hi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(pR),W.current=!1}}),M=Vi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);H.useEffect(()=>{if(!l)return;function le(te){if(clearTimeout(R.current),$.current=!1,p&&!Oh(C.current)||h>0&&!d0(k.current,"open"))return;const ue=d0(k.current,"open",C.current);ue?R.current=window.setTimeout(()=>{j.current||r(!0,te,"hover")},ue):n||r(!0,te,"hover")}function ie(te){if(M())return;P.current();const ue=hi(o.floating);if(clearTimeout(L.current),O.current=!1,E.current&&i.current.floatingContext){n||clearTimeout(R.current),q.current=E.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){U(),V(),M()||F(te,!0,"safe-polygon")}});const ye=q.current;ue.addEventListener("mousemove",ye),P.current=()=>{ue.removeEventListener("mousemove",ye)};return}(C.current==="touch"?!pi(o.floating,te.relatedTarget):!0)&&F(te)}function ne(te){M()||i.current.floatingContext&&(E.current==null||E.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){U(),V(),M()||F(te)}})(te))}if(ir(o.domReference)){var oe;const te=o.domReference;return n&&te.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),b&&te.addEventListener("mousemove",le,{once:!0}),te.addEventListener("mouseenter",le),te.addEventListener("mouseleave",ie),()=>{var ue;n&&te.removeEventListener("mouseleave",ne),(ue=o.floating)==null||ue.removeEventListener("mouseleave",ne),b&&te.removeEventListener("mousemove",le),te.removeEventListener("mouseenter",le),te.removeEventListener("mouseleave",ie)}}},[o,l,t,p,h,b,F,V,U,r,n,j,x,k,E,i,M]),yr(()=>{var le;if(l&&n&&(le=E.current)!=null&&le.__options.blockPointerEvents&&z()){W.current=!0;const ne=o.floating;if(ir(o.domReference)&&ne){var ie;const oe=hi(o.floating).body;oe.setAttribute(pR,"");const te=o.domReference,ue=x==null||(ie=x.nodesRef.current.find(de=>de.id===_))==null||(ie=ie.context)==null?void 0:ie.elements.floating;return ue&&(ue.style.pointerEvents=""),oe.style.pointerEvents="none",te.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",te.style.pointerEvents="",ne.style.pointerEvents=""}}}},[l,n,_,o,x,E,z]),yr(()=>{n||(C.current=void 0,O.current=!1,V(),U())},[n,V,U]),H.useEffect(()=>()=>{V(),clearTimeout(R.current),clearTimeout(L.current),U()},[l,o.domReference,V,U]);const X=H.useMemo(()=>{function le(ie){C.current=ie.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(ie){const{nativeEvent:ne}=ie;function oe(){!$.current&&!j.current&&r(!0,ne,"hover")}p&&!Oh(C.current)||n||h===0||O.current&&ie.movementX**2+ie.movementY**2<2||(clearTimeout(L.current),C.current==="touch"?oe():(O.current=!0,L.current=window.setTimeout(oe,h)))}}},[p,r,n,j,h]),J=H.useMemo(()=>({onMouseEnter(){clearTimeout(R.current)},onMouseLeave(le){M()||F(le.nativeEvent,!1)}}),[F,M]);return H.useMemo(()=>l?{reference:X,floating:J}:{},[l,X,J])}let hR=0;function qc(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(hR);const s=()=>t?.focus({preventScroll:n});i?s():hR=requestAnimationFrame(s)}function mR(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Pd(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var l;return i.parentId===o.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}function E7(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Pd(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let ed=new WeakMap,Hg=new WeakSet,Kg={},f0=0;const I7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,pD=t=>t&&(t.host||pD(t.parentNode)),N7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=pD(n);return t.contains(r)?r:null}).filter(n=>n!=null);function k7(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=N7(e,t),l=new Set,u=new Set(o),f=[];Kg[i]||(Kg[i]=new WeakMap);const p=Kg[i];o.forEach(h),b(e),l.clear();function h(x){!x||l.has(x)||(l.add(x),x.parentNode&&h(x.parentNode))}function b(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(sc(_)!=="script")if(l.has(_))b(_);else{const E=s?_.getAttribute(s):null,k=E!==null&&E!=="false",j=ed.get(_)||0,C=s?j+1:j,R=(p.get(_)||0)+1;ed.set(_,C),p.set(_,R),f.push(_),C===1&&k&&Hg.add(_),R===1&&_.setAttribute(i,""),!k&&s&&_.setAttribute(s,"true")}})}return f0++,()=>{f.forEach(x=>{const _=ed.get(x)||0,E=s?_-1:_,k=(p.get(x)||0)-1;ed.set(x,E),p.set(x,k),E||(!Hg.has(x)&&s&&x.removeAttribute(s),Hg.delete(x)),k||x.removeAttribute(i)}),f0--,f0||(ed=new WeakMap,ed=new WeakMap,Hg=new WeakSet,Kg={})}}function gR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=hi(t[0]).body;return k7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const Bv=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function hD(t,e){const n=$v(t,Bv());e==="prev"&&n.reverse();const r=n.indexOf(ko(hi(t)));return n.slice(r+1)[0]}function mD(){return hD(document.body,"next")}function gD(){return hD(document.body,"prev")}function th(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!pi(n,r)}function C7(t){$v(t,Bv()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function yR(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const zv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let T7;function bR(t){t.key==="Tab"&&(t.target,clearTimeout(T7))}const Db=H.forwardRef(function(e,n){const[r,i]=H.useState();yr(()=>(VF()&&i("button"),document.addEventListener("keydown",bR),()=>{document.removeEventListener("keydown",bR)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[lu("focus-guard")]:"",style:zv};return d.jsx("span",{...e,...s})}),yD=H.createContext(null),vR=lu("portal");function j7(t){t===void 0&&(t={});const{id:e,root:n}=t,r=sN(),i=bD(),[s,o]=H.useState(null),l=H.useRef(null);return yr(()=>()=>{s?.remove(),queueMicrotask(()=>{l.current=null})},[s]),yr(()=>{if(!r||l.current)return;const u=e?document.getElementById(e):null;if(!u)return;const f=document.createElement("div");f.id=r,f.setAttribute(vR,""),u.appendChild(f),l.current=f,o(f)},[e,r]),yr(()=>{if(n===null||!r||l.current)return;let u=n||i?.portalNode;u&&!ir(u)&&(u=u.current),u=u||document.body;let f=null;e&&(f=document.createElement("div"),f.id=e,u.appendChild(f));const p=document.createElement("div");p.id=r,p.setAttribute(vR,""),u=f||u,u.appendChild(p),l.current=p,o(p)},[e,n,r,i]),s}function oN(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=j7({id:n,root:r}),[o,l]=H.useState(null),u=H.useRef(null),f=H.useRef(null),p=H.useRef(null),h=H.useRef(null),b=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return H.useEffect(()=>{if(!s||!i||b)return;function E(k){s&&th(k)&&(k.type==="focusin"?yR:C7)(s)}return s.addEventListener("focusin",E,!0),s.addEventListener("focusout",E,!0),()=>{s.removeEventListener("focusin",E,!0),s.removeEventListener("focusout",E,!0)}},[s,i,b]),H.useEffect(()=>{s&&(x||yR(s))},[x,s]),d.jsxs(yD.Provider,{value:H.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:f,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:l}),[i,s]),children:[_&&s&&d.jsx(Db,{"data-type":"outside",ref:u,onFocus:E=>{if(th(E,s)){var k;(k=p.current)==null||k.focus()}else{const j=gD()||o?.domReference;j?.focus()}}}),_&&s&&d.jsx("span",{"aria-owns":s.id,style:zv}),s&&Jh.createPortal(e,s),_&&s&&d.jsx(Db,{"data-type":"outside",ref:f,onFocus:E=>{if(th(E,s)){var k;(k=h.current)==null||k.focus()}else{const j=mD()||o?.domReference;j?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,E.nativeEvent,"focus-out")}}})]})}const bD=()=>H.useContext(yD),jE="data-floating-ui-focusable";function RE(t){return t?t.hasAttribute(jE)?t:t.querySelector("["+jE+"]")||t:null}const R7=20;let Ac=[];function p0(t){Ac=Ac.filter(e=>e.isConnected),t&&sc(t)!=="body"&&(Ac.push(t),Ac.length>R7&&(Ac=Ac.slice(-20)))}function xR(){return Ac.slice().reverse().find(t=>t.isConnected)}function O7(t){const e=Bv();return PK(t,e)?t:$v(t,e)[0]||t}const q7=H.forwardRef(function(e,n){return d.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:zv})});function vD(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:u=!1,modal:f=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:b=!1}=t,{open:x,onOpenChange:_,events:E,dataRef:k,elements:{domReference:j,floating:C}}=e,R=Vi(()=>{var De;return(De=k.current.floatingContext)==null?void 0:De.nodeId}),q=typeof o=="number"&&o<0,L=UF(j)&&q,$=I7(),W=$?s:!0,P=!W||$&&b,O=Ui(i),z=Ui(o),F=Ui(l),V=pf(),U=bD(),M=H.useRef(null),X=H.useRef(null),J=H.useRef(!1),le=H.useRef(!1),ie=H.useRef(-1),ne=U!=null,oe=RE(C),te=Vi(function(De){return De===void 0&&(De=oe),De?$v(De,Bv()):[]}),ue=Vi(De=>{const Je=te(De);return O.current.map(Xe=>j&&Xe==="reference"?j:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});H.useEffect(()=>{if(r||!f)return;function De(Xe){if(Xe.key==="Tab"){pi(oe,ko(hi(oe)))&&te().length===0&&!L&&Bi(Xe);const Ve=ue(),ct=Al(Xe);O.current[0]==="reference"&&ct===j&&(Bi(Xe),Xe.shiftKey?qc(Ve[Ve.length-1]):qc(Ve[1])),O.current[1]==="floating"&&ct===oe&&Xe.shiftKey&&(Bi(Xe),qc(Ve[0]))}}const Je=hi(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,j,oe,f,O,L,te,ue]),H.useEffect(()=>{if(r||!C)return;function De(Je){const Xe=Al(Je),ct=te().indexOf(Xe);ct!==-1&&(ie.current=ct)}return C.addEventListener("focusin",De),()=>{C.removeEventListener("focusin",De)}},[r,C,te]),H.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ve=Xe.relatedTarget;queueMicrotask(()=>{const ct=R(),_t=!(pi(j,Ve)||pi(C,Ve)||pi(Ve,C)||pi(U?.portalNode,Ve)||Ve!=null&&Ve.hasAttribute(lu("focus-guard"))||V&&(Pd(V.nodesRef.current,ct).find(Rt=>{var Ut,sn;return pi((Ut=Rt.context)==null?void 0:Ut.elements.floating,Ve)||pi((sn=Rt.context)==null?void 0:sn.elements.domReference,Ve)})||mR(V.nodesRef.current,ct).find(Rt=>{var Ut,sn,xe;return[(Ut=Rt.context)==null?void 0:Ut.elements.floating,RE((sn=Rt.context)==null?void 0:sn.elements.floating)].includes(Ve)||((xe=Rt.context)==null?void 0:xe.elements.domReference)===Ve})));if(u&&_t&&ko(hi(oe))===hi(oe).body){Yr(oe)&&oe.focus();const Rt=ie.current,Ut=te(),sn=Ut[Rt]||Ut[Ut.length-1]||oe;Yr(sn)&&sn.focus()}(L||!f)&&Ve&&_t&&!le.current&&Ve!==xR()&&(J.current=!0,_(!1,Xe,"focus-out"))})}if(C&&Yr(j))return j.addEventListener("focusout",Je),j.addEventListener("pointerdown",De),C.addEventListener("focusout",Je),()=>{j.removeEventListener("focusout",Je),j.removeEventListener("pointerdown",De),C.removeEventListener("focusout",Je)}},[r,j,C,oe,f,V,U,_,h,u,te,L,R]);const de=H.useRef(null),ye=H.useRef(null),we=cR([de,U?.beforeInsideRef]),Ie=cR([ye,U?.afterInsideRef]);H.useEffect(()=>{var De;if(r||!C)return;const Je=Array.from((U==null||(De=U.portalNode)==null?void 0:De.querySelectorAll("["+lu("portal")+"]"))||[]),Xe=V&&!f?mR(V?.nodesRef.current,R()).map(_t=>{var Rt;return(Rt=_t.context)==null?void 0:Rt.elements.floating}):[],Ve=[C,...Je,...Xe,M.current,X.current,de.current,ye.current,U?.beforeOutsideRef.current,U?.afterOutsideRef.current,O.current.includes("reference")||L?j:null].filter(_t=>_t!=null),ct=f||L?gR(Ve,!P,P):gR(Ve);return()=>{ct()}},[r,j,C,f,O,U,L,W,P,V,R]),yr(()=>{if(r||!Yr(oe))return;const De=hi(oe),Je=ko(De);queueMicrotask(()=>{const Xe=ue(oe),Ve=z.current,ct=(typeof Ve=="number"?Xe[Ve]:Ve.current)||oe,_t=pi(oe,Je);!q&&!_t&&x&&qc(ct,{preventScroll:ct===oe})})},[r,x,oe,q,ue,z]),yr(()=>{if(r||!oe)return;let De=!1;const Je=hi(oe),Xe=ko(Je);let ct=k.current.openEvent;p0(Xe);function _t(sn){let{open:xe,reason:be,event:Ne,nested:Ae}=sn;xe&&(ct=Ne),be==="escape-key"&&j&&p0(j),["hover","safe-polygon"].includes(be)&&Ne.type==="mouseleave"&&(J.current=!0),be==="outside-press"&&(Ae?(J.current=!1,De=!0):J.current=!(WF(Ne)||XI(Ne)))}E.on("openchange",_t);const Rt=Je.createElement("span");Rt.setAttribute("tabindex","-1"),Rt.setAttribute("aria-hidden","true"),Object.assign(Rt.style,zv),ne&&j&&j.insertAdjacentElement("afterend",Rt);function Ut(){return typeof F.current=="boolean"?xR()||Rt:F.current.current||Rt}return()=>{E.off("openchange",_t);const sn=ko(Je),xe=pi(C,sn)||V&&Pd(V.nodesRef.current,R()).some(Ae=>{var Ue;return pi((Ue=Ae.context)==null?void 0:Ue.elements.floating,sn)});(xe||ct&&["click","mousedown"].includes(ct.type))&&j&&p0(j);const Ne=Ut();queueMicrotask(()=>{const Ae=O7(Ne);F.current&&!J.current&&Yr(Ae)&&(!(Ae!==sn&&sn!==Je.body)||xe)&&Ae.focus({preventScroll:De}),Rt.remove()})}},[r,C,oe,F,k,E,V,ne,j,R]),H.useEffect(()=>{queueMicrotask(()=>{J.current=!1})},[r]),yr(()=>{if(!r&&U)return U.setFocusManagerState({modal:f,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:j}),()=>{U.setFocusManagerState(null)}},[r,U,f,x,_,h,j]),yr(()=>{if(r||!oe||typeof MutationObserver!="function"||q)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ve=te(),ct=ko(hi(C)),_t=Ve.indexOf(ct);_t!==-1&&(ie.current=_t),O.current.includes("floating")||ct!==j&&Ve.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,C,oe,j,O,te,q]);function ze(De){return r||!p||!f?null:d.jsx(q7,{ref:De==="start"?M:X,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const Re=!r&&W&&(f?!L:!0)&&(ne||f);return d.jsxs(d.Fragment,{children:[Re&&d.jsx(Db,{"data-type":"inside",ref:we,onFocus:De=>{if(f){const Xe=ue();qc(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(J.current=!1,th(De,U.portalNode)){const Xe=mD()||j;Xe?.focus()}else{var Je;(Je=U.beforeOutsideRef.current)==null||Je.focus()}}}),!L&&ze("start"),n,ze("end"),Re&&d.jsx(Db,{"data-type":"inside",ref:Ie,onFocus:De=>{if(f)qc(ue()[0]);else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(h&&(J.current=!0),th(De,U.portalNode)){const Xe=gD()||j;Xe?.focus()}else{var Je;(Je=U.afterOutsideRef.current)==null||Je.focus()}}})]})}let Qg=0;function A7(){const t=/iP(hone|ad|od)|iOS/.test(YI()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var l,u;const f=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(f))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let wR=()=>{};const P7=H.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return yr(()=>{if(r)return Qg++,Qg===1&&(wR=A7()),()=>{Qg--,Qg===0&&wR()}},[r]),d.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function _R(t){return Yr(t.target)&&t.target.tagName==="BUTTON"}function SR(t){return eN(t)}function aN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:l="click",toggle:u=!0,ignoreMouse:f=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,b=H.useRef(),x=H.useRef(!1),_=H.useMemo(()=>({onPointerDown(E){b.current=E.pointerType},onMouseDown(E){const k=b.current;E.button===0&&l!=="click"&&(Oh(k,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const k=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}Oh(k,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){b.current=void 0,!(E.defaultPrevented||!p||_R(E))&&(E.key===" "&&!SR(s)&&(E.preventDefault(),x.current=!0),E.key==="Enter"&&r(!(n&&u),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!p||_R(E)||SR(s)||E.key===" "&&x.current&&(x.current=!1,r(!(n&&u),E.nativeEvent,"click"))}}),[i,s,l,f,p,r,n,h,u]);return H.useMemo(()=>o?{reference:_}:{},[o,_])}const F7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},D7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ER=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function lN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:f="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:b=!1,bubbles:x,capture:_}=e,E=pf(),k=Vi(typeof u=="function"?u:()=>!1),j=typeof u=="function"?k:u,C=H.useRef(!1),R=H.useRef(!1),{escapeKey:q,outsidePress:L}=ER(x),{escapeKey:$,outsidePress:W}=ER(_),P=H.useRef(!1),O=Vi(X=>{var J;if(!n||!o||!l||X.key!=="Escape"||P.current)return;const le=(J=s.current.floatingContext)==null?void 0:J.nodeId,ie=E?Pd(E.nodesRef.current,le):[];if(!q&&(X.stopPropagation(),ie.length>0)){let ne=!0;if(ie.forEach(oe=>{var te;if((te=oe.context)!=null&&te.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,oK(X)?X.nativeEvent:X,"escape-key")}),z=Vi(X=>{var J;const le=()=>{var ie;O(X),(ie=Al(X))==null||ie.removeEventListener("keydown",le)};(J=Al(X))==null||J.addEventListener("keydown",le)}),F=Vi(X=>{var J;const le=C.current;C.current=!1;const ie=R.current;if(R.current=!1,f==="click"&&ie||le||typeof j=="function"&&!j(X))return;const ne=Al(X),oe="["+lu("inert")+"]",te=hi(i.floating).querySelectorAll(oe);let ue=ir(ne)?ne:null;for(;ue&&!Ma(ue);){const Ie=Ka(ue);if(Ma(Ie)||!ir(Ie))break;ue=Ie}if(te.length&&ir(ne)&&!aK(ne)&&!pi(ne,i.floating)&&Array.from(te).every(Ie=>!pi(ue,Ie)))return;if(Yr(ne)&&M){const Ie=Ma(ne),ze=oo(ne),Re=/auto|scroll/,De=Ie||Re.test(ze.overflowX),Je=Ie||Re.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ve=Je&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ct=ze.direction==="rtl",_t=Ve&&(ct?X.offsetX<=ne.offsetWidth-ne.clientWidth:X.offsetX>ne.clientWidth),Rt=Xe&&X.offsetY>ne.clientHeight;if(_t||Rt)return}const de=(J=s.current.floatingContext)==null?void 0:J.nodeId,ye=E&&Pd(E.nodesRef.current,de).some(Ie=>{var ze;return a0(X,(ze=Ie.context)==null?void 0:ze.elements.floating)});if(a0(X,i.floating)||a0(X,i.domReference)||ye)return;const we=E?Pd(E.nodesRef.current,de):[];if(we.length>0){let Ie=!0;if(we.forEach(ze=>{var Re;if((Re=ze.context)!=null&&Re.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ie=!1;return}}),!Ie)return}r(!1,X,"outside-press")}),V=Vi(X=>{var J;const le=()=>{var ie;F(X),(ie=Al(X))==null||ie.removeEventListener(f,le)};(J=Al(X))==null||J.addEventListener(f,le)});H.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=q,s.current.__outsidePressBubbles=L;let X=-1;function J(te){r(!1,te,"ancestor-scroll")}function le(){window.clearTimeout(X),P.current=!0}function ie(){X=window.setTimeout(()=>{P.current=!1},Lv()?5:0)}const ne=hi(i.floating);l&&(ne.addEventListener("keydown",$?z:O,$),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",ie)),j&&ne.addEventListener(f,W?V:F,W);let oe=[];return b&&(ir(i.domReference)&&(oe=zl(i.domReference)),ir(i.floating)&&(oe=oe.concat(zl(i.floating))),!ir(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat(zl(i.reference.contextElement)))),oe=oe.filter(te=>{var ue;return te!==((ue=ne.defaultView)==null?void 0:ue.visualViewport)}),oe.forEach(te=>{te.addEventListener("scroll",J,{passive:!0})}),()=>{l&&(ne.removeEventListener("keydown",$?z:O,$),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",ie)),j&&ne.removeEventListener(f,W?V:F,W),oe.forEach(te=>{te.removeEventListener("scroll",J)}),window.clearTimeout(X)}},[s,i,l,j,f,n,r,b,o,q,L,O,$,z,F,W,V]),H.useEffect(()=>{C.current=!1},[j,f]);const U=H.useMemo(()=>({onKeyDown:O,...p&&{[F7[h]]:X=>{r(!1,X.nativeEvent,"reference-press")},...h!=="click"&&{onClick(X){r(!1,X.nativeEvent,"reference-press")}}}}),[O,r,p,h]),M=H.useMemo(()=>({onKeyDown:O,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[D7[f]]:()=>{C.current=!0}}),[O,f]);return H.useMemo(()=>o?{reference:U,floating:M}:{},[o,U,M])}function L7(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=sN(),s=H.useRef({}),[o]=H.useState(()=>uD()),l=gm()!=null,[u,f]=H.useState(r.reference),p=Vi((x,_,E)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:E,nested:l}),n?.(x,_,E)}),h=H.useMemo(()=>({setPositionReference:f}),[]),b=H.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return H.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:b,events:o,floatingId:i,refs:h}),[e,p,b,o,i,h])}function cN(t){t===void 0&&(t={});const{nodeId:e}=t,n=L7({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=H.useState(null),[l,u]=H.useState(null),p=i?.domReference||s,h=H.useRef(null),b=pf();yr(()=>{p&&(h.current=p)},[p]);const x=l7({...t,elements:{...i,...l&&{reference:l}}}),_=H.useCallback(R=>{const q=ir(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;u(q),x.refs.setReference(q)},[x.refs]),E=H.useCallback(R=>{(ir(R)||R===null)&&(h.current=R,o(R)),(ir(x.refs.reference.current)||x.refs.reference.current===null||R!==null&&!ir(R))&&x.refs.setReference(R)},[x.refs]),k=H.useMemo(()=>({...x.refs,setReference:E,setPositionReference:_,domReference:h}),[x.refs,E,_]),j=H.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),C=H.useMemo(()=>({...x,...r,refs:k,elements:j,nodeId:e}),[x,k,j,e,r]);return yr(()=>{r.dataRef.current.floatingContext=C;const R=b?.nodesRef.current.find(q=>q.id===e);R&&(R.context=C)}),H.useMemo(()=>({...x,context:C,refs:k,elements:j}),[x,k,j,C])}function M7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:l=!0,visibleOnly:u=!0}=e,f=H.useRef(!1),p=H.useRef(),h=H.useRef(!0);H.useEffect(()=>{if(!l)return;const x=ms(o.domReference);function _(){!n&&Yr(o.domReference)&&o.domReference===ko(hi(o.domReference))&&(f.current=!0)}function E(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",E,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",E,!0)}},[o.domReference,n,l]),H.useEffect(()=>{if(!l)return;function x(_){let{reason:E}=_;(E==="reference-press"||E==="escape-key")&&(f.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,l]),H.useEffect(()=>()=>{clearTimeout(p.current)},[]);const b=H.useMemo(()=>({onPointerDown(x){XI(x.nativeEvent)||(h.current=!1)},onMouseLeave(){f.current=!1},onFocus(x){if(f.current)return;const _=Al(x.nativeEvent);if(u&&ir(_))try{if(VF()&&iK())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!eN(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){f.current=!1;const _=x.relatedTarget,E=x.nativeEvent,k=ir(_)&&_.hasAttribute(lu("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var j;const C=ko(o.domReference?o.domReference.ownerDocument:document);!_&&C===o.domReference||pi((j=s.current.floatingContext)==null?void 0:j.refs.floating.current,C)||pi(o.domReference,C)||k||r(!1,E,"focus")})}}),[s,o.domReference,r,u]);return H.useMemo(()=>l?{reference:b}:{},[l,b])}const IR="active",NR="selected";function h0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[IR]:o,[NR]:l,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[jE]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(u=>{let[f,p]=u;if(!(i&&[IR,NR].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof p=="function"){var h;(h=r.get(f))==null||h.push(p),o[f]=function(){for(var b,x=arguments.length,_=new Array(x),E=0;E<x;E++)_[E]=arguments[E];return(b=r.get(f))==null?void 0:b.map(k=>k(..._)).find(k=>k!==void 0)}}}else o[f]=p}),o),{})}}function uN(t){t===void 0&&(t=[]);const e=t.map(l=>l?.reference),n=t.map(l=>l?.floating),r=t.map(l=>l?.item),i=H.useCallback(l=>h0(l,t,"reference"),e),s=H.useCallback(l=>h0(l,t,"floating"),n),o=H.useCallback(l=>h0(l,t,"item"),r);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Wv(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function kR(t,e){return Wv(e,t===iN||t===mm,t===Wl||t===Vl)}function m0(t,e,n){return Wv(e,t===mm,n?t===Wl:t===Vl)||t==="Enter"||t===" "||t===""}function $7(t,e,n){return Wv(e,n?t===Wl:t===Vl,t===mm)}function CR(t,e,n){return Wv(e,n?t===Vl:t===Wl,t===iN)}function B7(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:f=null,allowEscape:p=!1,loop:h=!1,nested:b=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:E="auto",focusItemOnHover:k=!0,openOnArrowKeyDown:j=!0,disabledIndices:C=void 0,orientation:R="vertical",cols:q=1,scrollItemIntoView:L=!0,virtualItemRef:$,itemSizes:W,dense:P=!1}=e,O=RE(i.floating),z=Ui(O),F=gm(),V=pf(),U=Vi(()=>{l(J.current===-1?null:J.current)}),M=UF(i.domReference),X=H.useRef(E),J=H.useRef(f??-1),le=H.useRef(null),ie=H.useRef(!0),ne=H.useRef(U),oe=H.useRef(!!i.floating),te=H.useRef(n),ue=H.useRef(!1),de=H.useRef(!1),ye=Ui(C),we=Ui(n),Ie=Ui(L),ze=Ui(f),[Re,De]=H.useState(),[Je,Xe]=H.useState(),Ve=Vi(()=>{function be(Ue){_?(De(Ue.id),V?.events.emit("virtualfocus",Ue),$&&($.current=Ue)):qc(Ue,{sync:ue.current,preventScroll:!0})}const Ne=s.current[J.current];Ne&&be(Ne),(ue.current?Ue=>Ue():requestAnimationFrame)(()=>{const Ue=s.current[J.current]||Ne;if(!Ue)return;Ne||be(Ue);const rt=Ie.current;rt&&_t&&(de.current||!ie.current)&&(Ue.scrollIntoView==null||Ue.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});yr(()=>{u&&(n&&i.floating?X.current&&f!=null&&(de.current=!0,J.current=f,U()):oe.current&&(J.current=-1,ne.current()))},[u,n,i.floating,f,U]),yr(()=>{if(u&&n&&i.floating)if(o==null){if(ue.current=!1,ze.current!=null)return;if(oe.current&&(J.current=-1,Ve()),(!te.current||!oe.current)&&X.current&&(le.current!=null||X.current===!0&&le.current==null)){let be=0;const Ne=()=>{s.current[0]==null?(be<2&&(be?requestAnimationFrame:queueMicrotask)(Ne),be++):(J.current=le.current==null||m0(le.current,R,x)||b?u0(s,ye.current):uR(s,ye.current),le.current=null,U())};Ne()}}else eh(s,o)||(J.current=o,Ve(),de.current=!1)},[u,n,i.floating,o,ze,b,s,R,x,U,Ve,ye]),yr(()=>{var be;if(!u||i.floating||!V||_||!oe.current)return;const Ne=V.nodesRef.current,Ae=(be=Ne.find(Me=>Me.id===F))==null||(be=be.context)==null?void 0:be.elements.floating,Ue=ko(hi(i.floating)),rt=Ne.some(Me=>Me.context&&pi(Me.context.elements.floating,Ue));Ae&&!rt&&ie.current&&Ae.focus({preventScroll:!0})},[u,i.floating,V,F,_]),yr(()=>{if(!u||!V||!_||F)return;function be(Ne){Xe(Ne.id),$&&($.current=Ne)}return V.events.on("virtualfocus",be),()=>{V.events.off("virtualfocus",be)}},[u,V,_,F,$]),yr(()=>{ne.current=U,te.current=n,oe.current=!!i.floating}),yr(()=>{n||(le.current=null)},[n]);const ct=o!=null,_t=H.useMemo(()=>{function be(Ae){if(!n)return;const Ue=s.current.indexOf(Ae);Ue!==-1&&J.current!==Ue&&(J.current=Ue,U())}return{onFocus(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,be(Ue)},onClick:Ae=>{let{currentTarget:Ue}=Ae;return Ue.focus({preventScroll:!0})},...k&&{onMouseMove(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,de.current=!1,be(Ue)},onPointerLeave(Ae){let{pointerType:Ue}=Ae;if(!(!ie.current||Ue==="touch")&&(ue.current=!0,J.current=-1,U(),!_)){var rt;(rt=z.current)==null||rt.focus({preventScroll:!0})}}}}},[n,z,k,s,U,_]),Rt=Vi(be=>{if(ie.current=!1,ue.current=!0,be.which===229||!we.current&&be.currentTarget===z.current)return;if(b&&CR(be.key,R,x)){Bi(be),r(!1,be.nativeEvent,"list-navigation"),Yr(i.domReference)&&(_?V?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ne=J.current,Ae=u0(s,C),Ue=uR(s,C);if(M||(be.key==="Home"&&(Bi(be),J.current=Ae,U()),be.key==="End"&&(Bi(be),J.current=Ue,U())),q>1){const rt=W||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=h7(rt,q,P),ut=Me.findIndex(bn=>bn!=null&&!Ry(s.current,bn,C)),Qt=Me.reduce((bn,ar,Ln)=>ar!=null&&!Ry(s.current,ar,C)?Ln:bn,-1),Gt=Me[p7({current:Me.map(bn=>bn!=null?s.current[bn]:null)},{event:be,orientation:R,loop:h,rtl:x,cols:q,disabledIndices:g7([...C||s.current.map((bn,ar)=>Ry(s.current,ar)?ar:void 0),void 0],Me),minIndex:ut,maxIndex:Qt,prevIndex:m7(J.current>Ue?Ae:J.current,rt,Me,q,be.key===mm?"bl":be.key===(x?Wl:Vl)?"tr":"tl"),stopEvent:!0})];if(Gt!=null&&(J.current=Gt,U()),R==="both")return}if(kR(be.key,R)){if(Bi(be),n&&!_&&ko(be.currentTarget.ownerDocument)===be.currentTarget){J.current=m0(be.key,R,x)?Ae:Ue,U();return}m0(be.key,R,x)?h?J.current=Ne>=Ue?p&&Ne!==s.current.length?-1:Ae:Ii(s,{startingIndex:Ne,disabledIndices:C}):J.current=Math.min(Ue,Ii(s,{startingIndex:Ne,disabledIndices:C})):h?J.current=Ne<=Ae?p&&Ne!==-1?s.current.length:Ue:Ii(s,{startingIndex:Ne,decrement:!0,disabledIndices:C}):J.current=Math.max(Ae,Ii(s,{startingIndex:Ne,decrement:!0,disabledIndices:C})),eh(s,J.current)&&(J.current=-1),U()}}),Ut=H.useMemo(()=>_&&n&&ct&&{"aria-activedescendant":Je||Re},[_,n,ct,Je,Re]),sn=H.useMemo(()=>({"aria-orientation":R==="both"?void 0:R,...M?{}:Ut,onKeyDown:Rt,onPointerMove(){ie.current=!0}}),[Ut,Rt,R,M]),xe=H.useMemo(()=>{function be(Ae){E==="auto"&&WF(Ae.nativeEvent)&&(X.current=!0)}function Ne(Ae){X.current=E,E==="auto"&&XI(Ae.nativeEvent)&&(X.current=!0)}return{...Ut,onKeyDown(Ae){ie.current=!1;const Ue=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ue||rt,ut=$7(Ae.key,R,x),Qt=CR(Ae.key,R,x),Gt=kR(Ae.key,R),bn=(b?ut:Gt)||Ae.key==="Enter"||Ae.key.trim()==="";if(_&&n){const Di=V?.nodesRef.current.find(Jt=>Jt.parentId==null),_r=V&&Di?E7(V.nodesRef.current,Di.id):null;if(Me&&_r&&$){const Jt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ut||Qt){var ar,Ln;const Zi=((ar=_r.context)==null?void 0:ar.elements.domReference)===Ae.currentTarget,Yi=Qt&&!Zi?(Ln=_r.context)==null?void 0:Ln.elements.domReference:ut?s.current.find(Xi=>Xi?.id===Re):null;Yi&&(Bi(Ae),Yi.dispatchEvent(Jt),Xe(void 0))}if((Gt||rt)&&_r.context&&_r.context.open&&_r.parentId&&Ae.currentTarget!==_r.context.elements.domReference){var Kr;Bi(Ae),(Kr=_r.context.elements.domReference)==null||Kr.dispatchEvent(Jt);return}}return Rt(Ae)}if(!(!n&&!j&&Ue)){if(bn&&(le.current=b&&Gt?null:Ae.key),b){ut&&(Bi(Ae),n?(J.current=u0(s,ye.current),U()):r(!0,Ae.nativeEvent,"list-navigation"));return}Gt&&(f!=null&&(J.current=f),Bi(Ae),!n&&j?r(!0,Ae.nativeEvent,"list-navigation"):Rt(Ae),n&&U())}},onFocus(){n&&!_&&(J.current=-1,U())},onPointerDown:Ne,onPointerEnter:Ne,onMouseDown:be,onClick:be}},[Re,Ut,Rt,ye,E,s,b,U,r,n,j,R,x,f,V,_,$]);return H.useMemo(()=>u?{reference:xe,floating:sn,item:_t}:{},[u,xe,sn,_t])}const TR=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function td(t,e){return typeof t=="function"?t(e):t}function z7(t,e){const[n,r]=H.useState(t);return t&&!n&&r(!0),H.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function W7(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[l,u]=H.useState("unmounted"),f=z7(n,o);return!f&&l==="close"&&u("unmounted"),yr(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:f,status:l}}function dN(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,l=t.placement,u=l.split("-")[0],f=H.useMemo(()=>({side:u,placement:l}),[u,l]),p=typeof o=="number",h=(p?o:o.open)||0,b=(p?o:o.close)||0,[x,_]=H.useState(()=>({...td(s,f),...td(n,f)})),{isMounted:E,status:k}=W7(t,{duration:o}),j=Ui(n),C=Ui(r),R=Ui(i),q=Ui(s);return yr(()=>{const L=td(j.current,f),$=td(R.current,f),W=td(q.current,f),P=td(C.current,f)||Object.keys(L).reduce((O,z)=>(O[z]="",O),{});if(k==="initial"&&_(O=>({transitionProperty:O.transitionProperty,...W,...L})),k==="open"&&_({transitionProperty:Object.keys(P).map(TR).join(","),transitionDuration:h+"ms",...W,...P}),k==="close"){const O=$||L;_({transitionProperty:Object.keys(O).map(TR).join(","),transitionDuration:b+"ms",...W,...O})}},[b,R,j,C,q,h,k,f]),{isMounted:E,styles:x}}const V7=H.createContext({close(){}}),U7=xn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),H7=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:l=U7,css:u,children:f})=>{const[p,h]=H.useState(!1),{refs:b,floatingStyles:x,context:_}=cN({open:p,onOpenChange:h,placement:"top",whileElementsMounted:sD,middleware:[aD(10),lD({fallbackAxisSideDirection:"start"}),c7()],...s}),{getReferenceProps:E,getFloatingProps:k}=uN([S7(_,{enabled:e==="hover",delay:i}),aN(_,{enabled:e==="click"}),M7(_),lN(_)]),{isMounted:j,styles:C}=dN(_),R=l({mounted:j,...o,css:u}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",ref:b.setReference,...E(),disabled:n,className:R.target(),children:t}),d.jsx(oN,{children:d.jsx("div",{ref:b.setFloating,style:{...x,...C},className:R.portal(),...k(),onClick:r?()=>{h(!1)}:void 0,children:d.jsx(V7.Provider,{value:{close(){h(!1)}},children:f})})})]})},xD="icon-[system-uicons--menu-hamburger]",wD=xn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),nn=({icon:t,variant:e,tva:n=wD,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?d.jsx("div",{className:s.base({css:[t]}),...i}):null},K7=xn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),sr=({icon:t=xD,iconProps:e,children:n,variant:r,tva:i=K7,css:s,...o})=>{const l=i({...r,css:s}).slots;return d.jsx(_7,{children:d.jsx(H7,{action:"click",target:d.jsx(nn,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:d.jsx("div",{className:l.base(),children:n})})})},_D="icon-[svg-spinners--90-ring-with-bg]",Q7=xn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),ym=({iconEnabled:t,iconDisabled:e,iconLoading:n=_D,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:l=Q7,css:u,children:f,...p})=>{const h=l({disabled:r,loading:i,...o,css:u}).slots;return d.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?d.jsx(nn,{icon:i?n:e??t}):d.jsx(nn,{icon:i?n:t}),f]})},fN="icon-[iconamoon--close-light]",Vv=H.createContext(void 0),G7=xn({slot:{base:["bg-slate-400/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),hf=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:l,tva:u=G7,children:f})=>{const[p,h]=H.useState(i),b=x7(),{refs:x,context:_}=cN({nodeId:b,open:p,onOpenChange:h}),E=aN(_),k=lN(_,{outsidePress:s}),{getReferenceProps:j,getFloatingProps:C}=uN([E,k]),{isMounted:R,styles:q}=dN(_),L=u({disabled:r,...o,css:l}).slots;return d.jsxs(Vv.Provider,{value:{close(){h(!1)}},children:[d.jsx("div",{ref:x.setReference,...j({disabled:r}),className:L.target(),children:t}),d.jsx(w7,{id:b,children:R&&d.jsx(d.Fragment,{children:d.jsx(oN,{children:d.jsx(P7,{lockScroll:!0,style:q,className:L.base(),children:d.jsx(vD,{context:_,children:d.jsxs("div",{ref:x.setFloating,...C(),className:L.modal(),children:[d.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[d.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(kv(e)?d.jsx(nn,{icon:e,variant:{size:"xl"}}):e),n&&d.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),d.jsx(ym,{iconEnabled:fN,onClick:()=>h(!1)})]}),Z9(f)?d.jsx(f,{close:()=>h(!1)}):f]})})})})})})]})},J7=xn({use:MF,slot:{},variant:{},defaults:{}}),Cn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=J7,css:l,...u})=>{const f=o({...s,disabled:r,css:l}).slots;return i?null:d.jsxs("div",{className:f.base(),children:[kv(t)?d.jsx(nn,{icon:t,...e}):t,d.jsx(hf,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},Z7=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),As=({variant:t,tva:e=Z7,css:n,...r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),...r})},OE="icon-[material-symbols-light--check-small]",Y7="icon-[material-symbols-light--close-small]",X7="icon-[material-symbols-light--check-indeterminate-small]",eQ=xn({use:wD,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),Uv=({value:t,checkIcon:e=OE,unCheckIcon:n=Y7,undefinedIcon:r=X7,tva:i=eQ,...s})=>t==null?d.jsx(nn,{icon:r,tva:i,...s}):d.jsx(nn,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),tQ=xn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),SD=({value:t,onChange:e,variant:n,tva:r=tQ,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx("div",{className:o.base(),children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:l=>{e(l.target.checked)},...s}),d.jsx("div",{className:o.switch()})]})})},nQ=xn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),yn=({iconEnabled:t,iconDisabled:e,iconLoading:n=_D,iconProps:r,loading:i,variant:s,tva:o=nQ,css:l,children:u,...f})=>{const p=o({disabled:f.disabled,...s,css:l}).slots;return d.jsxs("button",{type:"button",className:p.base({disabled:f.disabled}),...f,children:[f.disabled?d.jsx(nn,{icon:i===!0?n:e,variant:{size:"xl"},...r}):d.jsx(nn,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},pN=H.createContext({inline:!1}),rQ=xn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),iQ=({inline:t,label:e,value:n,variant:r,tva:i=rQ,css:s})=>{const o=H.useContext(pN),l=t??o?.inline,u=i({inline:l,...r,css:s}).slots;return d.jsxs("div",{className:u.base(),children:[e?d.jsx("div",{className:u.label(),children:e}):null,d.jsx("div",{className:u.value(),children:n})]})},sQ=xn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),ED=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=sQ,css:o,inline:l=!1})=>{const u=s({inline:l,...i,css:o}).slots;return d.jsx(pN.Provider,{value:{inline:l},children:d.jsx("div",{className:u.base(),children:t.filter(({id:f})=>!e.includes(f)).map(({id:f,render:p,...h})=>d.jsx(iQ,{value:d.jsx(p,{entity:r}),...n,...h},f))})})},oQ=xn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),jR="icon-[tabler--dots]",aQ=xn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),lQ=xn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),g0=({pages:t,page:e,onPage:n,variant:r,tva:i=lQ,css:s})=>{const o=i({...r,css:s}).slots;return d.jsx("nav",{className:o.base(),children:d.jsx("ul",{className:o.list(),children:t.map((l,u)=>d.jsx("li",{className:o.page({current:e===l-1}),onClick:()=>n(l-1),children:l},`page-${l}-${u}`))})})},cQ=xn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),hN=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:l,onChange:u,value:f,variant:p,tva:h=cQ,css:b})=>{const[x,_]=H.useState(!1),[E,k]=H.useState(null),[j,C]=H.useState(t.findIndex(ne=>ne.id===n));H.useEffect(()=>{C(t.findIndex(ne=>ne.id===f))},[f]);const{refs:R,floatingStyles:q,context:L}=cN({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:sD,middleware:[aD(5),lD({padding:10}),u7({apply({rects:ne,elements:oe,availableHeight:te}){Object.assign(oe.floating.style,{maxHeight:`${te}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),$=H.useRef([]),W=H.useRef(!1),P=aN(L,{event:"mousedown"}),O=lN(L),z=B7(L,{listRef:$,activeIndex:E,selectedIndex:j,onNavigate:k,loop:!0}),{getReferenceProps:F,getFloatingProps:V,getItemProps:U}=uN([O,z,P]),{isMounted:M,styles:X}=dN(L),J=ne=>{C(ne),_(!1);const oe=t[ne];oe&&o?.(oe),l?.(oe),u?.(oe?.id)},le=j===null?void 0:t[j],ie=h({disabled:s,...p,css:b}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:R.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:F(),className:ie.base(),children:d.jsxs("div",{className:ie.input(),children:[e?d.jsx(nn,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?d.jsx(r,{entity:le}):i||ia.rich("Select item"),d.jsx(nn,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),M&&d.jsx(oN,{children:d.jsx(vD,{context:L,modal:!1,children:d.jsx("div",{ref:R.setFloating,style:{...q,...X},className:ie.popup(),...V(),children:t.map((ne,oe)=>d.jsxs("div",{ref:te=>{$.current[oe]=te},role:"option",tabIndex:oe===E?0:-1,"aria-selected":oe===j&&oe===E,className:ie.item({selected:oe===j,active:oe===E}),...U({onClick(){J(oe)},onKeyDown(te){te.key==="Enter"&&(te.preventDefault(),J(oe)),te.key===" "&&!W.current&&(te.preventDefault(),J(oe))}}),children:[d.jsx(r,{entity:ne}),oe===j&&d.jsx(nn,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},uQ=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>d.jsx(hN,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),RR=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=aQ,css:l})=>{const u=H.useMemo(()=>$9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[u.total>1?d.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(g0,{page:t.page,pages:u.start,onPage:r}),d.jsx(nn,{icon:jR})]}),d.jsx(g0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(nn,{icon:jR}),d.jsx(g0,{page:t.page,pages:u.end,onPage:r})]})]}):null,d.jsxs("div",{className:f.sums(),children:[d.jsx("div",{children:n}),d.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&d.jsxs(d.Fragment,{children:[d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-semibold",children:e.where})]})]}),d.jsx(uQ,{size:t.size,onSize:i})]})},OR="function",gd="64e10b34-2bf7-4616-9668-f99de5aa046e",dQ="get",fQ="has",pQ="set",{isArray:Oy}=Array;let{SharedArrayBuffer:Lb,window:hQ}=globalThis,{notify:ID,wait:ND,waitAsync:Mb}=Atomics,kD=null;Mb||(Mb=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new Lb(4)}catch{Lb=ArrayBuffer;const e=new WeakMap;if(hQ){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[gd];if(!Oy(o)){s.stopImmediatePropagation();const{id:l,sb:u}=o;n.get(l)(u)}};kD=function(s,...o){const l=s?.[gd];if(Oy(l)){const[u,f]=l;e.set(f,u),this.addEventListener("message",i)}return r.call(this,s,...o)},Mb=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let l=0;l<o.length;l++)s[l]=o[l];return"ok"})})}else{const n=(r,i)=>({[gd]:{id:r,sb:i}});ID=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[gd];if(Oy(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:qE,Map:qR,Uint16Array:AE}=globalThis,{BYTES_PER_ELEMENT:AR}=qE,{BYTES_PER_ELEMENT:mQ}=AE,gQ=(t,e,n)=>{for(;ND(t,0,0,e)==="timed-out";)n()},PE=new WeakSet,y0=new WeakMap,yQ={value:{then:t=>t()}};let bQ=0;const mN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!y0.has(t)){const s=kD||t.postMessage,o=(b,...x)=>s.call(t,{[gd]:x},{transfer:b}),l=typeof i===OR?i:i?.handler,u=i?.delay||42,f=new TextDecoder("utf-16"),p=(b,x)=>b?Mb(x,0):(l?gQ(x,u,l):ND(x,0),yQ);let h=!1;y0.set(t,new Proxy(new qR,{[fQ]:(b,x)=>typeof x=="string"&&!x.startsWith("_"),[dQ]:(b,x)=>x==="then"?null:(..._)=>{const E=bQ++;let k=new qE(new Lb(AR*2)),j=[];PE.has(_.at(-1)||j)&&PE.delete(j=_.pop()),o(j,E,k,x,r?_.map(r):_);const C=t!==globalThis;let R=0;return h&&C&&(R=setTimeout(console.warn,1e3,` - Possible deadlock if proxy.${x}(...args) is awaited`)),p(C,k).value.then(()=>{clearTimeout(R);const q=k[1];if(!q)return;const L=mQ*q;return k=new qE(new Lb(L+L%AR)),o([],E,k),p(C,k).value.then(()=>e(f.decode(new AE(k.buffer).slice(0,q))))})},[pQ](b,x,_){const E=typeof _;if(E!==OR)throw new Error(`Unable to assign ${x} as ${E}`);if(!b.size){const k=new qR;t.addEventListener("message",async j=>{const C=j.data?.[gd];if(Oy(C)){j.stopImmediatePropagation();const[R,q,...L]=C;let $;if(L.length){const[W,P]=L;if(b.has(W)){h=!0;try{const O=await b.get(W)(...P);if(O!==void 0){const z=n(r?r(O):O);k.set(R,z),q[1]=z.length}}catch(O){$=O}finally{h=!1}}else $=new Error(`Unsupported action: ${W}`);q[0]=1}else{const W=k.get(R);k.delete(R);for(let P=new AE(q.buffer),O=0;O<W.length;O++)P[O]=W.charCodeAt(O)}if(ID(q,0),$)throw $}})}return!!b.set(x,_)}}))}return y0.get(t)};mN.transfer=(...t)=>(PE.add(t),t);var gN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,y)=>{i=g,s=y}),l=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const f=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,f.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",b="";function x(g){return r.locateFile?r.locateFile(g,b):b+g}var _,E;(l||u)&&(u?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(E=g=>{var y=new XMLHttpRequest;return y.open("GET",g,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),_=g=>fetch(g,{credentials:"same-origin"}).then(y=>y.ok?y.arrayBuffer():Promise.reject(new Error(y.status+" : "+y.url))));var k=r.print||console.log.bind(console),j=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var C=r.wasmBinary,R,q=!1,L,$,W,P,O,z;function F(){var g=R.buffer;r.HEAP8=L=new Int8Array(g),r.HEAP16=W=new Int16Array(g),r.HEAPU8=$=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=O=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=z=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)R=r.wasmMemory;else{var V=r.INITIAL_MEMORY||0x1000000;R=new WebAssembly.Memory({initial:V/65536,maximum:32768})}F();var U=[],M=[],X=[];function J(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(U)}function le(){!r.noFSInit&&!K.initialized&&K.init(),K.ignorePermissions=!1,xe(M)}function ie(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)te(r.postRun.shift());xe(X)}function ne(g){U.unshift(g)}function oe(g){M.unshift(g)}function te(g){X.unshift(g)}var ue=0,de=null;function ye(g){return g}function we(g){ue++,r.monitorRunDependencies?.(ue)}function Ie(g){if(ue--,r.monitorRunDependencies?.(ue),ue==0&&de){var y=de;de=null,y()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",j(g),q=!0,g+=". Build with -sASSERTIONS for more info.";var y=new WebAssembly.RuntimeError(g);throw s(y),y}var Re="data:application/octet-stream;base64,",De=g=>g.startsWith(Re);function Je(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ve(g){if(g==Xe&&C)return new Uint8Array(C);if(E)return E(g);throw"both async and sync fetching of the wasm failed"}function ct(g){return C?Promise.resolve().then(()=>Ve(g)):_(g).then(y=>new Uint8Array(y),()=>Ve(g))}function _t(g,y,S){return ct(g).then(I=>WebAssembly.instantiate(I,y)).then(S,I=>{j(`failed to asynchronously prepare wasm: ${I}`),ze(I)})}function Rt(g,y,S,I){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(T=>{var B=WebAssembly.instantiateStreaming(T,S);return B.then(I,function(fe){return j(`wasm streaming compile failed: ${fe}`),j("falling back to ArrayBuffer instantiation"),_t(y,S,I)})}):_t(y,S,I)}function Ut(){return{env:Df,wasi_snapshot_preview1:Df}}function sn(){var g=Ut();function y(I,T){return he=I.exports,oe(he.__wasm_call_ctors),Ie(),he}we();function S(I){y(I.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,y)}catch(I){j(`Module.instantiateWasm callback failed with error: ${I}`),s(I)}return Xe||(Xe=Je()),Rt(C,Xe,g,S).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var be={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(g).slice(1)},normalizeArray:(g,y)=>{for(var S=0,I=g.length-1;I>=0;I--){var T=g[I];T==="."?g.splice(I,1):T===".."?(g.splice(I,1),S++):S&&(g.splice(I,1),S--)}if(y)for(;S;S--)g.unshift("..");return g},normalize:g=>{var y=be.isAbs(g),S=g.substr(-1)==="/";return g=be.normalizeArray(g.split("/").filter(I=>!!I),!y).join("/"),!g&&!y&&(g="."),g&&S&&(g+="/"),(y?"/":"")+g},dirname:g=>{var y=be.splitPath(g),S=y[0],I=y[1];return!S&&!I?".":(I&&(I=I.substr(0,I.length-1)),S+I)},basename:g=>{if(g==="/")return"/";g=be.normalize(g),g=g.replace(/\/$/,"");var y=g.lastIndexOf("/");return y===-1?g:g.substr(y+1)},join:(...g)=>be.normalize(g.join("/")),join2:(g,y)=>be.normalize(g+"/"+y)},Ne=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=Ne())(g),Ue={resolve:(...g)=>{for(var y="",S=!1,I=g.length-1;I>=-1&&!S;I--){var T=I>=0?g[I]:K.cwd();if(typeof T!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!T)return"";y=T+"/"+y,S=be.isAbs(T)}return y=be.normalizeArray(y.split("/").filter(B=>!!B),!S).join("/"),(S?"/":"")+y||"."},relative:(g,y)=>{g=Ue.resolve(g).substr(1),y=Ue.resolve(y).substr(1);function S(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var I=S(g.split("/")),T=S(y.split("/")),B=Math.min(I.length,T.length),fe=B,me=0;me<B;me++)if(I[me]!==T[me]){fe=me;break}for(var Ke=[],me=fe;me<I.length;me++)Ke.push("..");return Ke=Ke.concat(T.slice(fe)),Ke.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,y,S)=>{for(var I=y+S,T=y;g[T]&&!(T>=I);)++T;if(T-y>16&&g.buffer&&rt)return rt.decode(g.subarray(y,T));for(var B="";y<T;){var fe=g[y++];if(!(fe&128)){B+=String.fromCharCode(fe);continue}var me=g[y++]&63;if((fe&224)==192){B+=String.fromCharCode((fe&31)<<6|me);continue}var Ke=g[y++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Ke:fe=(fe&7)<<18|me<<12|Ke<<6|g[y++]&63,fe<65536)B+=String.fromCharCode(fe);else{var tt=fe-65536;B+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return B},ut=[],Qt=g=>{for(var y=0,S=0;S<g.length;++S){var I=g.charCodeAt(S);I<=127?y++:I<=2047?y+=2:I>=55296&&I<=57343?(y+=4,++S):y+=3}return y},Gt=(g,y,S,I)=>{if(!(I>0))return 0;for(var T=S,B=S+I-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Ke=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Ke&1023}if(me<=127){if(S>=B)break;y[S++]=me}else if(me<=2047){if(S+1>=B)break;y[S++]=192|me>>6,y[S++]=128|me&63}else if(me<=65535){if(S+2>=B)break;y[S++]=224|me>>12,y[S++]=128|me>>6&63,y[S++]=128|me&63}else{if(S+3>=B)break;y[S++]=240|me>>18,y[S++]=128|me>>12&63,y[S++]=128|me>>6&63,y[S++]=128|me&63}}return y[S]=0,S-T};function bn(g,y,S){var I=Qt(g)+1,T=new Array(I),B=Gt(g,T,0,T.length);return T.length=B,T}var ar=()=>{if(!ut.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ut=bn(g)}return ut.shift()},Ln={ttys:[],init(){},shutdown(){},register(g,y){Ln.ttys[g]={input:[],output:[],ops:y},K.registerDevice(g,Ln.stream_ops)},stream_ops:{open(g){var y=Ln.ttys[g.node.rdev];if(!y)throw new K.ErrnoError(43);g.tty=y,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,y,S,I,T){if(!g.tty||!g.tty.ops.get_char)throw new K.ErrnoError(60);for(var B=0,fe=0;fe<I;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new K.ErrnoError(29)}if(me===void 0&&B===0)throw new K.ErrnoError(6);if(me==null)break;B++,y[S+fe]=me}return B&&(g.node.timestamp=Date.now()),B},write(g,y,S,I,T){if(!g.tty||!g.tty.ops.put_char)throw new K.ErrnoError(60);try{for(var B=0;B<I;B++)g.tty.ops.put_char(g.tty,y[S+B])}catch{throw new K.ErrnoError(29)}return I&&(g.node.timestamp=Date.now()),B}},default_tty_ops:{get_char(g){return ar()},put_char(g,y){y===null||y===10?(k(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(k(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,y,S){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,y){y===null||y===10?(j(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(j(Me(g.output,0)),g.output=[])}}},Kr=(g,y)=>($.fill(0,g,g+y),g),Di=(g,y)=>Math.ceil(g/y)*y,_r=g=>{g=Di(g,65536);var y=Lf(65536,g);return y?Kr(y,g):0},Jt={ops_table:null,mount(g){return Jt.createNode(null,"/",16895,0)},createNode(g,y,S,I){if(K.isBlkdev(S)||K.isFIFO(S))throw new K.ErrnoError(63);Jt.ops_table||={dir:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,lookup:Jt.node_ops.lookup,mknod:Jt.node_ops.mknod,rename:Jt.node_ops.rename,unlink:Jt.node_ops.unlink,rmdir:Jt.node_ops.rmdir,readdir:Jt.node_ops.readdir,symlink:Jt.node_ops.symlink},stream:{llseek:Jt.stream_ops.llseek}},file:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:{llseek:Jt.stream_ops.llseek,read:Jt.stream_ops.read,write:Jt.stream_ops.write,allocate:Jt.stream_ops.allocate,mmap:Jt.stream_ops.mmap,msync:Jt.stream_ops.msync}},link:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,readlink:Jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:K.chrdev_stream_ops}};var T=K.createNode(g,y,S,I);return K.isDir(T.mode)?(T.node_ops=Jt.ops_table.dir.node,T.stream_ops=Jt.ops_table.dir.stream,T.contents={}):K.isFile(T.mode)?(T.node_ops=Jt.ops_table.file.node,T.stream_ops=Jt.ops_table.file.stream,T.usedBytes=0,T.contents=null):K.isLink(T.mode)?(T.node_ops=Jt.ops_table.link.node,T.stream_ops=Jt.ops_table.link.stream):K.isChrdev(T.mode)&&(T.node_ops=Jt.ops_table.chrdev.node,T.stream_ops=Jt.ops_table.chrdev.stream),T.timestamp=Date.now(),g&&(g.contents[y]=T,g.timestamp=T.timestamp),T},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,y){var S=g.contents?g.contents.length:0;if(!(S>=y)){var I=1024*1024;y=Math.max(y,S*(S<I?2:1.125)>>>0),S!=0&&(y=Math.max(y,256));var T=g.contents;g.contents=new Uint8Array(y),g.usedBytes>0&&g.contents.set(T.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,y){if(g.usedBytes!=y)if(y==0)g.contents=null,g.usedBytes=0;else{var S=g.contents;g.contents=new Uint8Array(y),S&&g.contents.set(S.subarray(0,Math.min(y,g.usedBytes))),g.usedBytes=y}},node_ops:{getattr(g){var y={};return y.dev=K.isChrdev(g.mode)?g.id:1,y.ino=g.id,y.mode=g.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=g.rdev,K.isDir(g.mode)?y.size=4096:K.isFile(g.mode)?y.size=g.usedBytes:K.isLink(g.mode)?y.size=g.link.length:y.size=0,y.atime=new Date(g.timestamp),y.mtime=new Date(g.timestamp),y.ctime=new Date(g.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr(g,y){y.mode!==void 0&&(g.mode=y.mode),y.timestamp!==void 0&&(g.timestamp=y.timestamp),y.size!==void 0&&Jt.resizeFileStorage(g,y.size)},lookup(g,y){throw K.genericErrors[44]},mknod(g,y,S,I){return Jt.createNode(g,y,S,I)},rename(g,y,S){if(K.isDir(g.mode)){var I;try{I=K.lookupNode(y,S)}catch{}if(I)for(var T in I.contents)throw new K.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=S,y.contents[S]=g,y.timestamp=g.parent.timestamp},unlink(g,y){delete g.contents[y],g.timestamp=Date.now()},rmdir(g,y){var S=K.lookupNode(g,y);for(var I in S.contents)throw new K.ErrnoError(55);delete g.contents[y],g.timestamp=Date.now()},readdir(g){var y=[".",".."];for(var S of Object.keys(g.contents))y.push(S);return y},symlink(g,y,S){var I=Jt.createNode(g,y,41471,0);return I.link=S,I},readlink(g){if(!K.isLink(g.mode))throw new K.ErrnoError(28);return g.link}},stream_ops:{read(g,y,S,I,T){var B=g.node.contents;if(T>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-T,I);if(fe>8&&B.subarray)y.set(B.subarray(T,T+fe),S);else for(var me=0;me<fe;me++)y[S+me]=B[T+me];return fe},write(g,y,S,I,T,B){if(y.buffer===L.buffer&&(B=!1),!I)return 0;var fe=g.node;if(fe.timestamp=Date.now(),y.subarray&&(!fe.contents||fe.contents.subarray)){if(B)return fe.contents=y.subarray(S,S+I),fe.usedBytes=I,I;if(fe.usedBytes===0&&T===0)return fe.contents=y.slice(S,S+I),fe.usedBytes=I,I;if(T+I<=fe.usedBytes)return fe.contents.set(y.subarray(S,S+I),T),I}if(Jt.expandFileStorage(fe,T+I),fe.contents.subarray&&y.subarray)fe.contents.set(y.subarray(S,S+I),T);else for(var me=0;me<I;me++)fe.contents[T+me]=y[S+me];return fe.usedBytes=Math.max(fe.usedBytes,T+I),I},llseek(g,y,S){var I=y;if(S===1?I+=g.position:S===2&&K.isFile(g.node.mode)&&(I+=g.node.usedBytes),I<0)throw new K.ErrnoError(28);return I},allocate(g,y,S){Jt.expandFileStorage(g.node,y+S),g.node.usedBytes=Math.max(g.node.usedBytes,y+S)},mmap(g,y,S,I,T){if(!K.isFile(g.node.mode))throw new K.ErrnoError(43);var B,fe,me=g.node.contents;if(!(T&2)&&me&&me.buffer===L.buffer)fe=!1,B=me.byteOffset;else{if(fe=!0,B=_r(y),!B)throw new K.ErrnoError(48);me&&((S>0||S+y<me.length)&&(me.subarray?me=me.subarray(S,S+y):me=Array.prototype.slice.call(me,S,S+y)),L.set(me,B))}return{ptr:B,allocated:fe}},msync(g,y,S,I,T){return Jt.stream_ops.write(g,y,0,I,S,!1),0}}},Zi=(g,y,S,I)=>{var T=`al ${g}`;_(g).then(B=>{y(new Uint8Array(B)),T&&Ie()},B=>{if(S)S();else throw`Loading data file "${g}" failed.`}),T&&we()},Yi=(g,y,S,I,T,B)=>{K.createDataFile(g,y,S,I,T,B)},Xi=r.preloadPlugins||[],po=(g,y,S,I)=>{typeof Browser<"u"&&Browser.init();var T=!1;return Xi.forEach(B=>{T||B.canHandle(y)&&(B.handle(g,y,S,I),T=!0)}),T},pa=(g,y,S,I,T,B,fe,me,Ke,tt)=>{var at=y?Ue.resolve(be.join2(g,y)):g;function mt(Be){function Oe(et){tt?.(),me||Yi(g,y,et,I,T,Ke),B?.(),Ie()}po(Be,at,Oe,()=>{fe?.(),Ie()})||Oe(Be)}we(),typeof S=="string"?Zi(S,mt,fe):mt(S)},cc=g=>{var y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},S=y[g];if(typeof S>"u")throw new Error(`Unknown file open mode: ${g}`);return S},$s=(g,y)=>{var S=0;return g&&(S|=365),y&&(S|=146),S},K={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,y,S,I){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=K.nextInode++,this.name=y,this.mode=S,this.node_ops={},this.stream_ops={},this.rdev=I,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return K.isDir(this.mode)}get isDevice(){return K.isChrdev(this.mode)}},lookupPath(g,y={}){if(g=Ue.resolve(g),!g)return{path:"",node:null};var S={follow_mount:!0,recurse_count:0};if(y=Object.assign(S,y),y.recurse_count>8)throw new K.ErrnoError(32);for(var I=g.split("/").filter(mt=>!!mt),T=K.root,B="/",fe=0;fe<I.length;fe++){var me=fe===I.length-1;if(me&&y.parent)break;if(T=K.lookupNode(T,I[fe]),B=be.join2(B,I[fe]),K.isMountpoint(T)&&(!me||me&&y.follow_mount)&&(T=T.mounted.root),!me||y.follow)for(var Ke=0;K.isLink(T.mode);){var tt=K.readlink(B);B=Ue.resolve(be.dirname(B),tt);var at=K.lookupPath(B,{recurse_count:y.recurse_count+1});if(T=at.node,Ke++>40)throw new K.ErrnoError(32)}}return{path:B,node:T}},getPath(g){for(var y;;){if(K.isRoot(g)){var S=g.mount.mountpoint;return y?S[S.length-1]!=="/"?`${S}/${y}`:S+y:S}y=y?`${g.name}/${y}`:g.name,g=g.parent}},hashName(g,y){for(var S=0,I=0;I<y.length;I++)S=(S<<5)-S+y.charCodeAt(I)|0;return(g+S>>>0)%K.nameTable.length},hashAddNode(g){var y=K.hashName(g.parent.id,g.name);g.name_next=K.nameTable[y],K.nameTable[y]=g},hashRemoveNode(g){var y=K.hashName(g.parent.id,g.name);if(K.nameTable[y]===g)K.nameTable[y]=g.name_next;else for(var S=K.nameTable[y];S;){if(S.name_next===g){S.name_next=g.name_next;break}S=S.name_next}},lookupNode(g,y){var S=K.mayLookup(g);if(S)throw new K.ErrnoError(S);for(var I=K.hashName(g.id,y),T=K.nameTable[I];T;T=T.name_next){var B=T.name;if(T.parent.id===g.id&&B===y)return T}return K.lookup(g,y)},createNode(g,y,S,I){var T=new K.FSNode(g,y,S,I);return K.hashAddNode(T),T},destroyNode(g){K.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var y=["r","w","rw"][g&3];return g&512&&(y+="w"),y},nodePermissions(g,y){return K.ignorePermissions?0:y.includes("r")&&!(g.mode&292)||y.includes("w")&&!(g.mode&146)||y.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!K.isDir(g.mode))return 54;var y=K.nodePermissions(g,"x");return y||(g.node_ops.lookup?0:2)},mayCreate(g,y){try{var S=K.lookupNode(g,y);return 20}catch{}return K.nodePermissions(g,"wx")},mayDelete(g,y,S){var I;try{I=K.lookupNode(g,y)}catch(B){return B.errno}var T=K.nodePermissions(g,"wx");if(T)return T;if(S){if(!K.isDir(I.mode))return 54;if(K.isRoot(I)||K.getPath(I)===K.cwd())return 10}else if(K.isDir(I.mode))return 31;return 0},mayOpen(g,y){return g?K.isLink(g.mode)?32:K.isDir(g.mode)&&(K.flagsToPermissionString(y)!=="r"||y&512)?31:K.nodePermissions(g,K.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=K.MAX_OPEN_FDS;g++)if(!K.streams[g])return g;throw new K.ErrnoError(33)},getStreamChecked(g){var y=K.getStream(g);if(!y)throw new K.ErrnoError(8);return y},getStream:g=>K.streams[g],createStream(g,y=-1){return g=Object.assign(new K.FSStream,g),y==-1&&(y=K.nextfd()),g.fd=y,K.streams[y]=g,g},closeStream(g){K.streams[g]=null},dupStream(g,y=-1){var S=K.createStream(g,y);return S.stream_ops?.dup?.(S),S},chrdev_stream_ops:{open(g){var y=K.getDevice(g.node.rdev);g.stream_ops=y.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new K.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,y)=>g<<8|y,registerDevice(g,y){K.devices[g]={stream_ops:y}},getDevice:g=>K.devices[g],getMounts(g){for(var y=[],S=[g];S.length;){var I=S.pop();y.push(I),S.push(...I.mounts)}return y},syncfs(g,y){typeof g=="function"&&(y=g,g=!1),K.syncFSRequests++,K.syncFSRequests>1&&j(`warning: ${K.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var S=K.getMounts(K.root.mount),I=0;function T(fe){return K.syncFSRequests--,y(fe)}function B(fe){if(fe)return B.errored?void 0:(B.errored=!0,T(fe));++I>=S.length&&T(null)}S.forEach(fe=>{if(!fe.type.syncfs)return B(null);fe.type.syncfs(fe,g,B)})},mount(g,y,S){var I=S==="/",T=!S,B;if(I&&K.root)throw new K.ErrnoError(10);if(!I&&!T){var fe=K.lookupPath(S,{follow_mount:!1});if(S=fe.path,B=fe.node,K.isMountpoint(B))throw new K.ErrnoError(10);if(!K.isDir(B.mode))throw new K.ErrnoError(54)}var me={type:g,opts:y,mountpoint:S,mounts:[]},Ke=g.mount(me);return Ke.mount=me,me.root=Ke,I?K.root=Ke:B&&(B.mounted=me,B.mount&&B.mount.mounts.push(me)),Ke},unmount(g){var y=K.lookupPath(g,{follow_mount:!1});if(!K.isMountpoint(y.node))throw new K.ErrnoError(28);var S=y.node,I=S.mounted,T=K.getMounts(I);Object.keys(K.nameTable).forEach(fe=>{for(var me=K.nameTable[fe];me;){var Ke=me.name_next;T.includes(me.mount)&&K.destroyNode(me),me=Ke}}),S.mounted=null;var B=S.mount.mounts.indexOf(I);S.mount.mounts.splice(B,1)},lookup(g,y){return g.node_ops.lookup(g,y)},mknod(g,y,S){var I=K.lookupPath(g,{parent:!0}),T=I.node,B=be.basename(g);if(!B||B==="."||B==="..")throw new K.ErrnoError(28);var fe=K.mayCreate(T,B);if(fe)throw new K.ErrnoError(fe);if(!T.node_ops.mknod)throw new K.ErrnoError(63);return T.node_ops.mknod(T,B,y,S)},create(g,y){return y=y!==void 0?y:438,y&=4095,y|=32768,K.mknod(g,y,0)},mkdir(g,y){return y=y!==void 0?y:511,y&=1023,y|=16384,K.mknod(g,y,0)},mkdirTree(g,y){for(var S=g.split("/"),I="",T=0;T<S.length;++T)if(S[T]){I+="/"+S[T];try{K.mkdir(I,y)}catch(B){if(B.errno!=20)throw B}}},mkdev(g,y,S){return typeof S>"u"&&(S=y,y=438),y|=8192,K.mknod(g,y,S)},symlink(g,y){if(!Ue.resolve(g))throw new K.ErrnoError(44);var S=K.lookupPath(y,{parent:!0}),I=S.node;if(!I)throw new K.ErrnoError(44);var T=be.basename(y),B=K.mayCreate(I,T);if(B)throw new K.ErrnoError(B);if(!I.node_ops.symlink)throw new K.ErrnoError(63);return I.node_ops.symlink(I,T,g)},rename(g,y){var S=be.dirname(g),I=be.dirname(y),T=be.basename(g),B=be.basename(y),fe,me,Ke;if(fe=K.lookupPath(g,{parent:!0}),me=fe.node,fe=K.lookupPath(y,{parent:!0}),Ke=fe.node,!me||!Ke)throw new K.ErrnoError(44);if(me.mount!==Ke.mount)throw new K.ErrnoError(75);var tt=K.lookupNode(me,T),at=Ue.relative(g,I);if(at.charAt(0)!==".")throw new K.ErrnoError(28);if(at=Ue.relative(y,S),at.charAt(0)!==".")throw new K.ErrnoError(55);var mt;try{mt=K.lookupNode(Ke,B)}catch{}if(tt!==mt){var Be=K.isDir(tt.mode),Oe=K.mayDelete(me,T,Be);if(Oe)throw new K.ErrnoError(Oe);if(Oe=mt?K.mayDelete(Ke,B,Be):K.mayCreate(Ke,B),Oe)throw new K.ErrnoError(Oe);if(!me.node_ops.rename)throw new K.ErrnoError(63);if(K.isMountpoint(tt)||mt&&K.isMountpoint(mt))throw new K.ErrnoError(10);if(Ke!==me&&(Oe=K.nodePermissions(me,"w"),Oe))throw new K.ErrnoError(Oe);K.hashRemoveNode(tt);try{me.node_ops.rename(tt,Ke,B),tt.parent=Ke}catch(et){throw et}finally{K.hashAddNode(tt)}}},rmdir(g){var y=K.lookupPath(g,{parent:!0}),S=y.node,I=be.basename(g),T=K.lookupNode(S,I),B=K.mayDelete(S,I,!0);if(B)throw new K.ErrnoError(B);if(!S.node_ops.rmdir)throw new K.ErrnoError(63);if(K.isMountpoint(T))throw new K.ErrnoError(10);S.node_ops.rmdir(S,I),K.destroyNode(T)},readdir(g){var y=K.lookupPath(g,{follow:!0}),S=y.node;if(!S.node_ops.readdir)throw new K.ErrnoError(54);return S.node_ops.readdir(S)},unlink(g){var y=K.lookupPath(g,{parent:!0}),S=y.node;if(!S)throw new K.ErrnoError(44);var I=be.basename(g),T=K.lookupNode(S,I),B=K.mayDelete(S,I,!1);if(B)throw new K.ErrnoError(B);if(!S.node_ops.unlink)throw new K.ErrnoError(63);if(K.isMountpoint(T))throw new K.ErrnoError(10);S.node_ops.unlink(S,I),K.destroyNode(T)},readlink(g){var y=K.lookupPath(g),S=y.node;if(!S)throw new K.ErrnoError(44);if(!S.node_ops.readlink)throw new K.ErrnoError(28);return Ue.resolve(K.getPath(S.parent),S.node_ops.readlink(S))},stat(g,y){var S=K.lookupPath(g,{follow:!y}),I=S.node;if(!I)throw new K.ErrnoError(44);if(!I.node_ops.getattr)throw new K.ErrnoError(63);return I.node_ops.getattr(I)},lstat(g){return K.stat(g,!0)},chmod(g,y,S){var I;if(typeof g=="string"){var T=K.lookupPath(g,{follow:!S});I=T.node}else I=g;if(!I.node_ops.setattr)throw new K.ErrnoError(63);I.node_ops.setattr(I,{mode:y&4095|I.mode&-4096,timestamp:Date.now()})},lchmod(g,y){K.chmod(g,y,!0)},fchmod(g,y){var S=K.getStreamChecked(g);K.chmod(S.node,y)},chown(g,y,S,I){var T;if(typeof g=="string"){var B=K.lookupPath(g,{follow:!I});T=B.node}else T=g;if(!T.node_ops.setattr)throw new K.ErrnoError(63);T.node_ops.setattr(T,{timestamp:Date.now()})},lchown(g,y,S){K.chown(g,y,S,!0)},fchown(g,y,S){var I=K.getStreamChecked(g);K.chown(I.node,y,S)},truncate(g,y){if(y<0)throw new K.ErrnoError(28);var S;if(typeof g=="string"){var I=K.lookupPath(g,{follow:!0});S=I.node}else S=g;if(!S.node_ops.setattr)throw new K.ErrnoError(63);if(K.isDir(S.mode))throw new K.ErrnoError(31);if(!K.isFile(S.mode))throw new K.ErrnoError(28);var T=K.nodePermissions(S,"w");if(T)throw new K.ErrnoError(T);S.node_ops.setattr(S,{size:y,timestamp:Date.now()})},ftruncate(g,y){var S=K.getStreamChecked(g);if(!(S.flags&2097155))throw new K.ErrnoError(28);K.truncate(S.node,y)},utime(g,y,S){var I=K.lookupPath(g,{follow:!0}),T=I.node;T.node_ops.setattr(T,{timestamp:Math.max(y,S)})},open(g,y,S){if(g==="")throw new K.ErrnoError(44);y=typeof y=="string"?cc(y):y,y&64?(S=typeof S>"u"?438:S,S=S&4095|32768):S=0;var I;if(typeof g=="object")I=g;else{g=be.normalize(g);try{var T=K.lookupPath(g,{follow:!(y&131072)});I=T.node}catch{}}var B=!1;if(y&64)if(I){if(y&128)throw new K.ErrnoError(20)}else I=K.mknod(g,S,0),B=!0;if(!I)throw new K.ErrnoError(44);if(K.isChrdev(I.mode)&&(y&=-513),y&65536&&!K.isDir(I.mode))throw new K.ErrnoError(54);if(!B){var fe=K.mayOpen(I,y);if(fe)throw new K.ErrnoError(fe)}y&512&&!B&&K.truncate(I,0),y&=-131713;var me=K.createStream({node:I,path:K.getPath(I),flags:y,seekable:!0,position:0,stream_ops:I.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(y&1)&&(K.readFiles||(K.readFiles={}),g in K.readFiles||(K.readFiles[g]=1)),me},close(g){if(K.isClosed(g))throw new K.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(y){throw y}finally{K.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,y,S){if(K.isClosed(g))throw new K.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new K.ErrnoError(70);if(S!=0&&S!=1&&S!=2)throw new K.ErrnoError(28);return g.position=g.stream_ops.llseek(g,y,S),g.ungotten=[],g.position},read(g,y,S,I,T){if(I<0||T<0)throw new K.ErrnoError(28);if(K.isClosed(g))throw new K.ErrnoError(8);if((g.flags&2097155)===1)throw new K.ErrnoError(8);if(K.isDir(g.node.mode))throw new K.ErrnoError(31);if(!g.stream_ops.read)throw new K.ErrnoError(28);var B=typeof T<"u";if(!B)T=g.position;else if(!g.seekable)throw new K.ErrnoError(70);var fe=g.stream_ops.read(g,y,S,I,T);return B||(g.position+=fe),fe},write(g,y,S,I,T,B){if(I<0||T<0)throw new K.ErrnoError(28);if(K.isClosed(g))throw new K.ErrnoError(8);if(!(g.flags&2097155))throw new K.ErrnoError(8);if(K.isDir(g.node.mode))throw new K.ErrnoError(31);if(!g.stream_ops.write)throw new K.ErrnoError(28);g.seekable&&g.flags&1024&&K.llseek(g,0,2);var fe=typeof T<"u";if(!fe)T=g.position;else if(!g.seekable)throw new K.ErrnoError(70);var me=g.stream_ops.write(g,y,S,I,T,B);return fe||(g.position+=me),me},allocate(g,y,S){if(K.isClosed(g))throw new K.ErrnoError(8);if(y<0||S<=0)throw new K.ErrnoError(28);if(!(g.flags&2097155))throw new K.ErrnoError(8);if(!K.isFile(g.node.mode)&&!K.isDir(g.node.mode))throw new K.ErrnoError(43);if(!g.stream_ops.allocate)throw new K.ErrnoError(138);g.stream_ops.allocate(g,y,S)},mmap(g,y,S,I,T){if(I&2&&!(T&2)&&(g.flags&2097155)!==2)throw new K.ErrnoError(2);if((g.flags&2097155)===1)throw new K.ErrnoError(2);if(!g.stream_ops.mmap)throw new K.ErrnoError(43);if(!y)throw new K.ErrnoError(28);return g.stream_ops.mmap(g,y,S,I,T)},msync(g,y,S,I,T){return g.stream_ops.msync?g.stream_ops.msync(g,y,S,I,T):0},ioctl(g,y,S){if(!g.stream_ops.ioctl)throw new K.ErrnoError(59);return g.stream_ops.ioctl(g,y,S)},readFile(g,y={}){if(y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error(`Invalid encoding type "${y.encoding}"`);var S,I=K.open(g,y.flags),T=K.stat(g),B=T.size,fe=new Uint8Array(B);return K.read(I,fe,0,B,0),y.encoding==="utf8"?S=Me(fe,0):y.encoding==="binary"&&(S=fe),K.close(I),S},writeFile(g,y,S={}){S.flags=S.flags||577;var I=K.open(g,S.flags,S.mode);if(typeof y=="string"){var T=new Uint8Array(Qt(y)+1),B=Gt(y,T,0,T.length);K.write(I,T,0,B,void 0,S.canOwn)}else if(ArrayBuffer.isView(y))K.write(I,y,0,y.byteLength,void 0,S.canOwn);else throw new Error("Unsupported data type");K.close(I)},cwd:()=>K.currentPath,chdir(g){var y=K.lookupPath(g,{follow:!0});if(y.node===null)throw new K.ErrnoError(44);if(!K.isDir(y.node.mode))throw new K.ErrnoError(54);var S=K.nodePermissions(y.node,"x");if(S)throw new K.ErrnoError(S);K.currentPath=y.path},createDefaultDirectories(){K.mkdir("/tmp"),K.mkdir("/home"),K.mkdir("/home/web_user")},createDefaultDevices(){K.mkdir("/dev"),K.registerDevice(K.makedev(1,3),{read:()=>0,write:(I,T,B,fe,me)=>fe}),K.mkdev("/dev/null",K.makedev(1,3)),Ln.register(K.makedev(5,0),Ln.default_tty_ops),Ln.register(K.makedev(6,0),Ln.default_tty1_ops),K.mkdev("/dev/tty",K.makedev(5,0)),K.mkdev("/dev/tty1",K.makedev(6,0));var g=new Uint8Array(1024),y=0,S=()=>(y===0&&(y=Ae(g).byteLength),g[--y]);K.createDevice("/dev","random",S),K.createDevice("/dev","urandom",S),K.mkdir("/dev/shm"),K.mkdir("/dev/shm/tmp")},createSpecialDirectories(){K.mkdir("/proc");var g=K.mkdir("/proc/self");K.mkdir("/proc/self/fd"),K.mount({mount(){var y=K.createNode(g,"fd",16895,73);return y.node_ops={lookup(S,I){var T=+I,B=K.getStreamChecked(T),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>B.path}};return fe.parent=fe,fe}},y}},{},"/proc/self/fd")},createStandardStreams(g,y,S){g?K.createDevice("/dev","stdin",g):K.symlink("/dev/tty","/dev/stdin"),y?K.createDevice("/dev","stdout",null,y):K.symlink("/dev/tty","/dev/stdout"),S?K.createDevice("/dev","stderr",null,S):K.symlink("/dev/tty1","/dev/stderr"),K.open("/dev/stdin",0),K.open("/dev/stdout",1),K.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{K.genericErrors[g]=new K.ErrnoError(g),K.genericErrors[g].stack="<generic error, no stack>"}),K.nameTable=new Array(4096),K.mount(Jt,{},"/"),K.createDefaultDirectories(),K.createDefaultDevices(),K.createSpecialDirectories(),K.filesystems={MEMFS:Jt}},init(g,y,S){K.initialized=!0,g??=r.stdin,y??=r.stdout,S??=r.stderr,K.createStandardStreams(g,y,S)},quit(){K.initialized=!1;for(var g=0;g<K.streams.length;g++){var y=K.streams[g];y&&K.close(y)}},findObject(g,y){var S=K.analyzePath(g,y);return S.exists?S.object:null},analyzePath(g,y){try{var S=K.lookupPath(g,{follow:!y});g=S.path}catch{}var I={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var S=K.lookupPath(g,{parent:!0});I.parentExists=!0,I.parentPath=S.path,I.parentObject=S.node,I.name=be.basename(g),S=K.lookupPath(g,{follow:!y}),I.exists=!0,I.path=S.path,I.object=S.node,I.name=S.node.name,I.isRoot=S.path==="/"}catch(T){I.error=T.errno}return I},createPath(g,y,S,I){g=typeof g=="string"?g:K.getPath(g);for(var T=y.split("/").reverse();T.length;){var B=T.pop();if(B){var fe=be.join2(g,B);try{K.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,y,S,I,T){var B=be.join2(typeof g=="string"?g:K.getPath(g),y),fe=$s(I,T);return K.create(B,fe)},createDataFile(g,y,S,I,T,B){var fe=y;g&&(g=typeof g=="string"?g:K.getPath(g),fe=y?be.join2(g,y):g);var me=$s(I,T),Ke=K.create(fe,me);if(S){if(typeof S=="string"){for(var tt=new Array(S.length),at=0,mt=S.length;at<mt;++at)tt[at]=S.charCodeAt(at);S=tt}K.chmod(Ke,me|146);var Be=K.open(Ke,577);K.write(Be,S,0,S.length,0,B),K.close(Be),K.chmod(Ke,me)}},createDevice(g,y,S,I){var T=be.join2(typeof g=="string"?g:K.getPath(g),y),B=$s(!!S,!!I);K.createDevice.major||(K.createDevice.major=64);var fe=K.makedev(K.createDevice.major++,0);return K.registerDevice(fe,{open(me){me.seekable=!1},close(me){I?.buffer?.length&&I(10)},read(me,Ke,tt,at,mt){for(var Be=0,Oe=0;Oe<at;Oe++){var et;try{et=S()}catch{throw new K.ErrnoError(29)}if(et===void 0&&Be===0)throw new K.ErrnoError(6);if(et==null)break;Be++,Ke[tt+Oe]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Ke,tt,at,mt){for(var Be=0;Be<at;Be++)try{I(Ke[tt+Be])}catch{throw new K.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),K.mkdev(T,B,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=E(g.url),g.usedBytes=g.contents.length}catch{throw new K.ErrnoError(29)}},createLazyFile(g,y,S,I,T){class B{constructor(){this.lengthKnown=!1,this.chunks=[]}get(Oe){if(!(Oe>this.length-1||Oe<0)){var et=Oe%this.chunkSize,ve=Oe/this.chunkSize|0;return this.getter(ve)[et]}}setDataGetter(Oe){this.getter=Oe}cacheLength(){var Oe=new XMLHttpRequest;if(Oe.open("HEAD",S,!1),Oe.send(null),!(Oe.status>=200&&Oe.status<300||Oe.status===304))throw new Error("Couldn't load "+S+". Status: "+Oe.status);var et=Number(Oe.getResponseHeader("Content-length")),ve,ke=(ve=Oe.getResponseHeader("Accept-Ranges"))&&ve==="bytes",Te=(ve=Oe.getResponseHeader("Content-Encoding"))&&ve==="gzip",Ze=1024*1024;ke||(Ze=et);var Ge=(Qe,St)=>{if(Qe>St)throw new Error("invalid range ("+Qe+", "+St+") or no bytes requested!");if(St>et-1)throw new Error("only "+et+" bytes available! programmer error!");var ee=new XMLHttpRequest;if(ee.open("GET",S,!1),et!==Ze&&ee.setRequestHeader("Range","bytes="+Qe+"-"+St),ee.responseType="arraybuffer",ee.overrideMimeType&&ee.overrideMimeType("text/plain; charset=x-user-defined"),ee.send(null),!(ee.status>=200&&ee.status<300||ee.status===304))throw new Error("Couldn't load "+S+". Status: "+ee.status);return ee.response!==void 0?new Uint8Array(ee.response||[]):bn(ee.responseText||"")},je=this;je.setDataGetter(Qe=>{var St=Qe*Ze,ee=(Qe+1)*Ze-1;if(ee=Math.min(ee,et-1),typeof je.chunks[Qe]>"u"&&(je.chunks[Qe]=Ge(St,ee)),typeof je.chunks[Qe]>"u")throw new Error("doXHR failed!");return je.chunks[Qe]}),(Te||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,k("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new B,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:S};var Ke=K.createFile(g,y,me,I,T);me.contents?Ke.contents=me.contents:me.url&&(Ke.contents=null,Ke.url=me.url),Object.defineProperties(Ke,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Ke.stream_ops);at.forEach(Be=>{var Oe=Ke.stream_ops[Be];tt[Be]=(...et)=>(K.forceLoadFile(Ke),Oe(...et))});function mt(Be,Oe,et,ve,ke){var Te=Be.node.contents;if(ke>=Te.length)return 0;var Ze=Math.min(Te.length-ke,ve);if(Te.slice)for(var Ge=0;Ge<Ze;Ge++)Oe[et+Ge]=Te[ke+Ge];else for(var Ge=0;Ge<Ze;Ge++)Oe[et+Ge]=Te.get(ke+Ge);return Ze}return tt.read=(Be,Oe,et,ve,ke)=>(K.forceLoadFile(Ke),mt(Be,Oe,et,ve,ke)),tt.mmap=(Be,Oe,et,ve,ke)=>{K.forceLoadFile(Ke);var Te=_r(Oe);if(!Te)throw new K.ErrnoError(48);return mt(Be,L,Te,Oe,et),{ptr:Te,allocated:!0}},Ke.stream_ops=tt,Ke}},yu=(g,y)=>g?Me($,g,y):"",fn={DEFAULT_POLLMASK:5,calculateAt(g,y,S){if(be.isAbs(y))return y;var I;if(g===-100)I=K.cwd();else{var T=fn.getStreamFromFD(g);I=T.path}if(y.length==0){if(!S)throw new K.ErrnoError(44);return I}return be.join2(I,y)},doStat(g,y,S){var I=g(y);P[S>>2]=I.dev,P[S+4>>2]=I.mode,O[S+8>>2]=I.nlink,P[S+12>>2]=I.uid,P[S+16>>2]=I.gid,P[S+20>>2]=I.rdev,z[S+24>>3]=BigInt(I.size),P[S+32>>2]=4096,P[S+36>>2]=I.blocks;var T=I.atime.getTime(),B=I.mtime.getTime(),fe=I.ctime.getTime();return z[S+40>>3]=BigInt(Math.floor(T/1e3)),O[S+48>>2]=T%1e3*1e3*1e3,z[S+56>>3]=BigInt(Math.floor(B/1e3)),O[S+64>>2]=B%1e3*1e3*1e3,z[S+72>>3]=BigInt(Math.floor(fe/1e3)),O[S+80>>2]=fe%1e3*1e3*1e3,z[S+88>>3]=BigInt(I.ino),0},doMsync(g,y,S,I,T){if(!K.isFile(y.node.mode))throw new K.ErrnoError(43);if(I&2)return 0;var B=$.slice(g,g+S);K.msync(y,B,T,S,I)},getStreamFromFD(g){var y=K.getStreamChecked(g);return y},varargs:void 0,getStr(g){var y=yu(g);return y}};function bu(g,y){try{return g=fn.getStr(g),K.chmod(g,y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function vu(g,y,S,I){try{if(y=fn.getStr(y),y=fn.calculateAt(g,y),S&-8)return-28;var T=K.lookupPath(y,{follow:!0}),B=T.node;if(!B)return-44;var fe="";return S&4&&(fe+="r"),S&2&&(fe+="w"),S&1&&(fe+="x"),fe&&K.nodePermissions(B,fe)?-2:0}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function xu(g,y){try{return K.fchmod(g,y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function uc(g,y,S){try{return K.fchown(g,y,S),0}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}function ha(){var g=P[+fn.varargs>>2];return fn.varargs+=4,g}var es=ha;function dc(g,y,S){fn.varargs=S;try{var I=fn.getStreamFromFD(g);switch(y){case 0:{var T=ha();if(T<0)return-28;for(;K.streams[T];)T++;var B;return B=K.dupStream(I,T),B.fd}case 1:case 2:return 0;case 3:return I.flags;case 4:{var T=ha();return I.flags|=T,0}case 12:{var T=es(),fe=0;return W[T+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function ma(g,y){try{var S=fn.getStreamFromFD(g);return fn.doStat(K.stat,S.path,y)}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}var Sf=0x20000000000000,ga=-0x20000000000000,Bs=g=>g<ga||g>Sf?NaN:Number(g);function Ya(g,y){y=Bs(y);try{return isNaN(y)?61:(K.ftruncate(g,y),0)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var zs=(g,y,S)=>Gt(g,$,y,S);function Ef(g,y){try{if(y===0)return-28;var S=K.cwd(),I=Qt(S)+1;return y<I?-68:(zs(S,g,y),I)}catch(T){if(typeof K>"u"||T.name!=="ErrnoError")throw T;return-T.errno}}function If(g,y,S){fn.varargs=S;try{var I=fn.getStreamFromFD(g);switch(y){case 21509:return I.tty?0:-59;case 21505:{if(!I.tty)return-59;if(I.tty.ops.ioctl_tcgets){var T=I.tty.ops.ioctl_tcgets(I),B=es();P[B>>2]=T.c_iflag||0,P[B+4>>2]=T.c_oflag||0,P[B+8>>2]=T.c_cflag||0,P[B+12>>2]=T.c_lflag||0;for(var fe=0;fe<32;fe++)L[B+fe+17]=T.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return I.tty?0:-59;case 21506:case 21507:case 21508:{if(!I.tty)return-59;if(I.tty.ops.ioctl_tcsets){for(var B=es(),me=P[B>>2],Ke=P[B+4>>2],tt=P[B+8>>2],at=P[B+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(L[B+fe+17]);return I.tty.ops.ioctl_tcsets(I.tty,y,{c_iflag:me,c_oflag:Ke,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!I.tty)return-59;var B=es();return P[B>>2]=0,0}case 21520:return I.tty?-28:-59;case 21531:{var B=es();return K.ioctl(I,y,B)}case 21523:{if(!I.tty)return-59;if(I.tty.ops.ioctl_tiocgwinsz){var Be=I.tty.ops.ioctl_tiocgwinsz(I.tty),B=es();W[B>>1]=Be[0],W[B+2>>1]=Be[1]}return 0}case 21524:return I.tty?0:-59;case 21515:return I.tty?0:-59;default:return-28}}catch(Oe){if(typeof K>"u"||Oe.name!=="ErrnoError")throw Oe;return-Oe.errno}}function wu(g,y){try{return g=fn.getStr(g),fn.doStat(K.lstat,g,y)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Ws(g,y,S){try{return y=fn.getStr(y),y=fn.calculateAt(g,y),y=be.normalize(y),y[y.length-1]==="/"&&(y=y.substr(0,y.length-1)),K.mkdir(y,S,0),0}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}function _u(g,y,S,I){try{y=fn.getStr(y);var T=I&256,B=I&4096;return I=I&-6401,y=fn.calculateAt(g,y,B),fn.doStat(T?K.lstat:K.stat,y,S)}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function Su(g,y,S,I){fn.varargs=I;try{y=fn.getStr(y),y=fn.calculateAt(g,y);var T=I?ha():0;return K.open(y,S,T).fd}catch(B){if(typeof K>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function Nf(g,y,S,I){try{if(y=fn.getStr(y),y=fn.calculateAt(g,y),I<=0)return-28;var T=K.readlink(y),B=Math.min(I,Qt(T)),fe=L[S+B];return zs(T,S,I+1),L[S+B]=fe,B}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Eu(g){try{return g=fn.getStr(g),K.rmdir(g),0}catch(y){if(typeof K>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function Iu(g,y){try{return g=fn.getStr(g),fn.doStat(K.stat,g,y)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Nu(g,y,S){try{return y=fn.getStr(y),y=fn.calculateAt(g,y),S===0?K.unlink(y):S===512?K.rmdir(y):ze("Invalid flags passed to unlinkat"),0}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}var fc=g=>O[g>>2]+P[g+4>>2]*0x100000000;function ku(g,y,S,I){try{y=fn.getStr(y),y=fn.calculateAt(g,y,!0);var T=Date.now(),B,fe;if(!S)B=T,fe=T;else{var me=fc(S),Ke=P[S+8>>2];Ke==0x3fffffff?B=T:Ke==0x3ffffffe?B=-1:B=me*1e3+Ke/(1e3*1e3),S+=16,me=fc(S),Ke=P[S+8>>2],Ke==0x3fffffff?fe=T:Ke==0x3ffffffe?fe=-1:fe=me*1e3+Ke/(1e3*1e3)}return(fe!=-1||B!=-1)&&K.utime(y,B,fe),0}catch(tt){if(typeof K>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var kf=1,lr=()=>kf,Cf=g=>g%4===0&&(g%100!==0||g%400===0),pc=[0,31,60,91,121,152,182,213,244,274,305,335],Cu=[0,31,59,90,120,151,181,212,243,273,304,334],Xa=g=>{var y=Cf(g.getFullYear()),S=y?pc:Cu,I=S[g.getMonth()]+g.getDate()-1;return I};function Tf(g,y){g=Bs(g);var S=new Date(g*1e3);P[y>>2]=S.getSeconds(),P[y+4>>2]=S.getMinutes(),P[y+8>>2]=S.getHours(),P[y+12>>2]=S.getDate(),P[y+16>>2]=S.getMonth(),P[y+20>>2]=S.getFullYear()-1900,P[y+24>>2]=S.getDay();var I=Xa(S)|0;P[y+28>>2]=I,P[y+36>>2]=-(S.getTimezoneOffset()*60);var T=new Date(S.getFullYear(),0,1),B=new Date(S.getFullYear(),6,1).getTimezoneOffset(),fe=T.getTimezoneOffset(),me=(B!=fe&&S.getTimezoneOffset()==Math.min(fe,B))|0;P[y+32>>2]=me}function hc(g,y,S,I,T,B,fe){T=Bs(T);try{if(isNaN(T))return 61;var me=fn.getStreamFromFD(I),Ke=K.mmap(me,g,T,y,S),tt=Ke.ptr;return P[B>>2]=Ke.allocated,O[fe>>2]=tt,0}catch(at){if(typeof K>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function el(g,y,S,I,T,B){B=Bs(B);try{var fe=fn.getStreamFromFD(T);S&2&&fn.doMsync(g,fe,y,I,B)}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var ts=(g,y,S,I)=>{var T=new Date().getFullYear(),B=new Date(T,0,1),fe=new Date(T,6,1),me=B.getTimezoneOffset(),Ke=fe.getTimezoneOffset(),tt=Math.max(me,Ke);O[g>>2]=tt*60,P[y>>2]=+(me!=Ke);var at=Oe=>{var et=Oe>=0?"-":"+",ve=Math.abs(Oe),ke=String(Math.floor(ve/60)).padStart(2,"0"),Te=String(ve%60).padStart(2,"0");return`UTC${et}${ke}${Te}`},mt=at(me),Be=at(Ke);Ke<me?(zs(mt,S,17),zs(Be,I,17)):(zs(mt,I,17),zs(Be,S,17))},jf=()=>Date.now(),xi;xi=()=>performance.now();var Rf=()=>0x80000000,Of=g=>{var y=R.buffer,S=(g-y.byteLength+65535)/65536;try{return R.grow(S),F(),1}catch{}},qf=g=>{var y=$.length;g>>>=0;var S=Rf();if(g>S)return!1;for(var I=1;I<=4;I*=2){var T=y*(1+.2/I);T=Math.min(T,g+0x6000000);var B=Math.min(S,Di(Math.max(g,T),65536)),fe=Of(B);if(fe)return!0}return!1},zo={},tl=()=>h||"./this.program",Li=()=>{if(!Li.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:tl()};for(var S in zo)zo[S]===void 0?delete y[S]:y[S]=zo[S];var I=[];for(var S in y)I.push(`${S}=${y[S]}`);Li.strings=I}return Li.strings},nl=(g,y)=>{for(var S=0;S<g.length;++S)L[y++]=g.charCodeAt(S);L[y]=0},px=(g,y)=>{var S=0;return Li().forEach((I,T)=>{var B=y+S;O[g+T*4>>2]=B,nl(I,B),S+=I.length+1}),0},hx=(g,y)=>{var S=Li();O[g>>2]=S.length;var I=0;return S.forEach(T=>I+=T.length+1),O[y>>2]=I,0};function Af(g){try{var y=fn.getStreamFromFD(g);return K.close(y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return S.errno}}function Am(g,y){try{var S=0,I=0,T=0,B=fn.getStreamFromFD(g),fe=B.tty?2:K.isDir(B.mode)?3:K.isLink(B.mode)?7:4;return L[y]=fe,W[y+2>>1]=T,z[y+8>>3]=BigInt(S),z[y+16>>3]=BigInt(I),0}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var Pf=(g,y,S,I)=>{for(var T=0,B=0;B<S;B++){var fe=O[y>>2],me=O[y+4>>2];y+=8;var Ke=K.read(g,L,fe,me,I);if(Ke<0)return-1;if(T+=Ke,Ke<me)break}return T};function mc(g,y,S,I){try{var T=fn.getStreamFromFD(g),B=Pf(T,y,S);return O[I>>2]=B,0}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function mx(g,y,S,I){y=Bs(y);try{if(isNaN(y))return 61;var T=fn.getStreamFromFD(g);return K.llseek(T,y,S),z[I>>3]=BigInt(T.position),T.getdents&&y===0&&S===0&&(T.getdents=null),0}catch(B){if(typeof K>"u"||B.name!=="ErrnoError")throw B;return B.errno}}function Ff(g){try{var y=fn.getStreamFromFD(g);return y.stream_ops?.fsync?y.stream_ops.fsync(y):0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return S.errno}}var Mn=(g,y,S,I)=>{for(var T=0,B=0;B<S;B++){var fe=O[y>>2],me=O[y+4>>2];y+=8;var Ke=K.write(g,L,fe,me,I);if(Ke<0)return-1;if(T+=Ke,Ke<me)break}return T};function Pm(g,y,S,I){try{var T=fn.getStreamFromFD(g),B=Mn(T,y,S);return O[I>>2]=B,0}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}K.createPreloadedFile=pa,K.staticInit();var Df={__syscall_chmod:bu,__syscall_faccessat:vu,__syscall_fchmod:xu,__syscall_fchown32:uc,__syscall_fcntl64:dc,__syscall_fstat64:ma,__syscall_ftruncate64:Ya,__syscall_getcwd:Ef,__syscall_ioctl:If,__syscall_lstat64:wu,__syscall_mkdirat:Ws,__syscall_newfstatat:_u,__syscall_openat:Su,__syscall_readlinkat:Nf,__syscall_rmdir:Eu,__syscall_stat64:Iu,__syscall_unlinkat:Nu,__syscall_utimensat:ku,_emscripten_get_now_is_monotonic:lr,_localtime_js:Tf,_mmap_js:hc,_munmap_js:el,_tzset_js:ts,emscripten_date_now:jf,emscripten_get_now:xi,emscripten_resize_heap:qf,environ_get:px,environ_sizes_get:hx,fd_close:Af,fd_fdstat_get:Am,fd_read:mc,fd_seek:mx,fd_sync:Ff,fd_write:Pm,memory:R},he=sn();r._sqlite3_status64=(g,y,S,I)=>(r._sqlite3_status64=he.sqlite3_status64)(g,y,S,I),r._sqlite3_status=(g,y,S,I)=>(r._sqlite3_status=he.sqlite3_status)(g,y,S,I),r._sqlite3_db_status=(g,y,S,I,T)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,y,S,I,T),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,y)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,y),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,y)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,y),r._sqlite3_realloc64=(g,y)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,y),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,y)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,y),r._sqlite3_stricmp=(g,y)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,y),r._sqlite3_strnicmp=(g,y,S)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,y,S),r._sqlite3_uri_parameter=(g,y)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,y),r._sqlite3_uri_boolean=(g,y,S)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,y,S),r._sqlite3_serialize=(g,y,S,I)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,y,S,I),r._sqlite3_prepare_v2=(g,y,S,I,T)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,y,S,I,T),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,y)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,y),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,y,S,I,T)=>(r._sqlite3_exec=he.sqlite3_exec)(g,y,S,I,T),r._sqlite3_column_int=(g,y)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,y),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,y,S,I)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,y,S,I),r._sqlite3_column_name=(g,y)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,y),r._sqlite3_column_text=(g,y)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,y),r._sqlite3_column_type=(g,y)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,y),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,y,S,I,T,B)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,y,S,I,T,B),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,y)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,y),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,y,S,I)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,y,S,I),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,y)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,y),r._sqlite3_result_error=(g,y,S)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,y,S),r._sqlite3_result_int=(g,y)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,y),r._sqlite3_result_int64=(g,y)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,y),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,y,S,I)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,y,S,I),r._sqlite3_result_subtype=(g,y)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,y),r._sqlite3_result_text=(g,y,S,I)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,y,S,I),r._sqlite3_result_zeroblob=(g,y)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,y),r._sqlite3_result_zeroblob64=(g,y)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,y),r._sqlite3_result_error_code=(g,y)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,y),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,y)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,y),r._sqlite3_vtab_in_next=(g,y)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,y),r._sqlite3_aggregate_context=(g,y)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,y),r._sqlite3_get_auxdata=(g,y)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,y),r._sqlite3_set_auxdata=(g,y,S,I)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,y,S,I),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,y)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,y),r._sqlite3_column_bytes=(g,y)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,y),r._sqlite3_column_double=(g,y)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,y),r._sqlite3_column_value=(g,y)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,y),r._sqlite3_column_decltype=(g,y)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,y),r._sqlite3_bind_blob=(g,y,S,I,T)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,y,S,I,T),r._sqlite3_bind_double=(g,y,S)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,y,S),r._sqlite3_bind_int=(g,y,S)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,y,S),r._sqlite3_bind_int64=(g,y,S)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,y,S),r._sqlite3_bind_null=(g,y)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,y),r._sqlite3_bind_pointer=(g,y,S,I,T)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,y,S,I,T),r._sqlite3_bind_text=(g,y,S,I,T)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,y,S,I,T),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,y)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,y),r._sqlite3_bind_parameter_index=(g,y)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,y),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,y)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,y),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,y,S)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,y,S),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,y,S)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,y,S),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,y,S)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,y,S),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,y,S)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,y,S),r._sqlite3_strglob=(g,y)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,y),r._sqlite3_strlike=(g,y,S)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,y,S),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,y,S,I,T,B)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,y,S,I,T,B),r._sqlite3_create_module=(g,y,S,I)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,y,S,I),r._sqlite3_create_module_v2=(g,y,S,I,T)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,y,S,I,T),r._sqlite3_drop_modules=(g,y)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,y),r._sqlite3_declare_vtab=(g,y)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,y),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,y)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,y),r._sqlite3_vtab_in=(g,y,S)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,y,S),r._sqlite3_vtab_rhs_value=(g,y,S)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,y,S),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,y,S)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,y,S),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,y)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,y),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,y)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,y),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,y)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,y),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,y,S)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,y,S),r._sqlite3_progress_handler=(g,y,S,I)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,y,S,I),r._sqlite3_busy_timeout=(g,y)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,y),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,y,S,I,T,B,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,y,S,I,T,B,fe,me),r._sqlite3_create_function_v2=(g,y,S,I,T,B,fe,me,Ke)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,y,S,I,T,B,fe,me,Ke),r._sqlite3_create_window_function=(g,y,S,I,T,B,fe,me,Ke,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,y,S,I,T,B,fe,me,Ke,tt),r._sqlite3_overload_function=(g,y,S)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,y,S),r._sqlite3_trace_v2=(g,y,S,I)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,y,S,I),r._sqlite3_commit_hook=(g,y,S)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,y,S),r._sqlite3_update_hook=(g,y,S)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,y,S),r._sqlite3_rollback_hook=(g,y,S)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,y,S),r._sqlite3_preupdate_hook=(g,y,S)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,y,S),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,y,S)=>(r._sqlite3_limit=he.sqlite3_limit)(g,y,S),r._sqlite3_open=(g,y)=>(r._sqlite3_open=he.sqlite3_open)(g,y),r._sqlite3_open_v2=(g,y,S,I)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,y,S,I),r._sqlite3_create_collation=(g,y,S,I,T)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,y,S,I,T),r._sqlite3_create_collation_v2=(g,y,S,I,T,B)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,y,S,I,T,B),r._sqlite3_collation_needed=(g,y,S)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,y,S),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,y,S,I,T,B,fe,me,Ke)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,y,S,I,T,B,fe,me,Ke),r._sqlite3_extended_result_codes=(g,y)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,y),r._sqlite3_uri_key=(g,y)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,y),r._sqlite3_uri_int64=(g,y,S)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,y,S),r._sqlite3_db_name=(g,y)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,y),r._sqlite3_db_filename=(g,y)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,y),r._sqlite3_db_readonly=(g,y)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,y),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,y,S,I)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,y,S,I),r._sqlite3session_attach=(g,y)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,y),r._sqlite3session_create=(g,y,S)=>(r._sqlite3session_create=he.sqlite3session_create)(g,y,S),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,y,S)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,y,S),r._sqlite3session_changeset=(g,y,S)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,y,S),r._sqlite3session_changeset_strm=(g,y,S)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,y,S),r._sqlite3session_patchset_strm=(g,y,S)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,y,S),r._sqlite3session_patchset=(g,y,S)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,y,S),r._sqlite3session_enable=(g,y)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,y),r._sqlite3session_indirect=(g,y)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,y),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,y,S)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,y,S),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,y,S)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,y,S),r._sqlite3changeset_start_v2=(g,y,S,I)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,y,S,I),r._sqlite3changeset_start_strm=(g,y,S)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,y,S),r._sqlite3changeset_start_v2_strm=(g,y,S,I)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,y,S,I),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,y,S,I,T)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,y,S,I,T),r._sqlite3changeset_pk=(g,y,S)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,y,S),r._sqlite3changeset_old=(g,y,S)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,y,S),r._sqlite3changeset_new=(g,y,S)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,y,S),r._sqlite3changeset_conflict=(g,y,S)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,y,S),r._sqlite3changeset_fk_conflicts=(g,y)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,y),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,y,S,I)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,y,S,I),r._sqlite3changeset_invert_strm=(g,y,S,I)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,y,S,I),r._sqlite3changeset_apply_v2=(g,y,S,I,T,B,fe,me,Ke)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,y,S,I,T,B,fe,me,Ke),r._sqlite3changeset_apply=(g,y,S,I,T,B)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,y,S,I,T,B),r._sqlite3changeset_apply_v2_strm=(g,y,S,I,T,B,fe,me,Ke)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,y,S,I,T,B,fe,me,Ke),r._sqlite3changeset_apply_strm=(g,y,S,I,T,B)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,y,S,I,T,B),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,y,S)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,y,S),r._sqlite3changegroup_output=(g,y,S)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,y,S),r._sqlite3changegroup_add_strm=(g,y,S)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,y,S),r._sqlite3changegroup_output_strm=(g,y,S)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,y,S),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,y,S,I,T,B)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,y,S,I,T,B),r._sqlite3changeset_concat_strm=(g,y,S,I,T,B)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,y,S,I,T,B),r._sqlite3session_config=(g,y)=>(r._sqlite3session_config=he.sqlite3session_config)(g,y),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,y,S)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,y,S),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,y)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,y),r._sqlite3__wasm_db_vfs=(g,y)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,y),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,y)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,y),r._sqlite3__wasm_db_serialize=(g,y,S,I,T)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,y,S,I,T),r._sqlite3__wasm_vfs_create_file=(g,y,S,I)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,y,S,I),r._sqlite3__wasm_posix_create_file=(g,y,S)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,y,S),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,y)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,y),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,y,S)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,y,S),r._sqlite3__wasm_db_config_ip=(g,y,S,I)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,y,S,I),r._sqlite3__wasm_db_config_pii=(g,y,S,I,T)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,y,S,I,T),r._sqlite3__wasm_db_config_s=(g,y,S)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,y,S),r._sqlite3__wasm_config_i=(g,y)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,y),r._sqlite3__wasm_config_ii=(g,y,S)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,y,S),r._sqlite3__wasm_config_j=(g,y)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,y),r._sqlite3__wasm_qfmt_token=(g,y)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,y),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,y)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,y),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,y)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,y),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,y)=>(r._realloc=he.realloc)(g,y);var Lf=(g,y)=>(Lf=he.emscripten_builtin_memalign)(g,y);r.wasmMemory=R;var gc;de=function g(){gc||Mf(),gc||(de=g)};function Mf(){if(ue>0||(J(),ue>0))return;function g(){gc||(gc=!0,r.calledRun=!0,!q&&(le(),i(r),r.onRuntimeInitialized?.(),ie()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Mf(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function y(S=globalThis.sqlite3ApiConfig||y.defaultConfig){if(y.sqlite3)return(y.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),y.sqlite3;const I=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},S||{});Object.assign(I,{allocExportName:I.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:I.useStdAlloc?"free":"sqlite3_free",reallocExportName:I.useStdAlloc?"realloc":"sqlite3_realloc"},I),["exports","memory","wasmfsOpfsDir"].forEach(Q=>{typeof I[Q]=="function"&&(I[Q]=I[Q]())}),delete globalThis.sqlite3ApiConfig,delete y.defaultConfig;const T=Object.create(null),B=Object.create(null),fe=Q=>T.sqlite3_js_rc_str&&T.sqlite3_js_rc_str(Q)||"Unknown result code #"+Q,me=Q=>typeof Q=="number"&&Q===(Q|0);class Ke extends Error{constructor(...re){let se;if(re.length)if(me(re[0]))if(se=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(se);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=se||T.SQLITE_ERROR,this.name="SQLite3Error"}}Ke.toss=(...Q)=>{throw new Ke(...Q)};const tt=Ke.toss;I.wasmfsOpfsDir&&!/^\/[^/]+$/.test(I.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=Q=>typeof Q!="bigint"&&Q===(Q|0)&&Q<=0x7fffffff&&Q>=-0x80000000,mt=function Q(re){return Q._max||(Q._max=BigInt("0x7fffffffffffffff"),Q._min=~Q._max),re>=Q._min&&re<=Q._max},Be=Q=>Q>=-2147483647n-1n&&Q<=2147483647n,Oe=function Q(re){return Q._min||(Q._min=Number.MIN_SAFE_INTEGER,Q._max=Number.MAX_SAFE_INTEGER),re>=Q._min&&re<=Q._max},et=Q=>Q&&Q.constructor&&at(Q.constructor.BYTES_PER_ELEMENT)?Q:!1,ve=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ke=Q=>Q.buffer instanceof ve,Te=(Q,re,se)=>ke(Q)?Q.slice(re,se):Q.subarray(re,se),Ze=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Ge=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),je=Q=>Ze(Q)||tt("Value is not of a supported TypedArray type."),Qe=new TextDecoder("utf-8"),St=function(Q,re,se){return Qe.decode(Te(Q,re,se))},ee=function(Q){return Ge(Q)?St(Q instanceof ArrayBuffer?new Uint8Array(Q):Q):Array.isArray(Q)?Q.join(""):(B.isPtr(Q)&&(Q=B.cstrToJs(Q)),Q)};class ce extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=T.SQLITE_NOMEM,this.name="WasmAllocError"}}ce.toss=(...Q)=>{throw new ce(...Q)},Object.assign(T,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(Q,re,se,Le,it,Ot,Wt,Yt,lt)=>{},sqlite3_create_function:(Q,re,se,Le,it,Ot,Wt,Yt)=>{},sqlite3_create_window_function:(Q,re,se,Le,it,Ot,Wt,Yt,lt,_e)=>{},sqlite3_prepare_v3:(Q,re,se,Le,it,Ot)=>{},sqlite3_prepare_v2:(Q,re,se,Le,it)=>{},sqlite3_exec:(Q,re,se,Le,it)=>{},sqlite3_randomness:(Q,re)=>{}});const Ee={affirmBindableTypedArray:je,flexibleString:ee,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Oe,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Ge,isTypedArray:et,typedArrayToString:St,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:ke,toss:function(...Q){throw new Error(Q.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re="SQLite format 3";re.length>Q.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let se=0;se<re.length;++se)re.charCodeAt(se)!==Q[se]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re=Q.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(Q)}};Object.assign(B,{ptrSizeof:I.wasmPtrSizeof||4,ptrIR:I.wasmPtrIR||"i32",bigIntEnabled:!!I.bigIntEnabled,exports:I.exports||tt("Missing API config.exports (WASM module exports)."),memory:I.memory||I.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),B.allocFromTypedArray=function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),je(Q);const re=B.alloc(Q.byteLength||1);return B.heapForSize(Q.constructor).set(Q.byteLength?Q:[0],re),re};{const Q=I.allocExportName,re=I.deallocExportName,se=I.reallocExportName;for(const Le of[Q,re,se])B.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");B.alloc=function Le(it){return Le.impl(it)||ce.toss("Failed to allocate",it," bytes.")},B.alloc.impl=B.exports[Q],B.realloc=function Le(it,Ot){const Wt=Le.impl(it,Ot);return Ot?Wt||ce.toss("Failed to reallocate",Ot," bytes."):0},B.realloc.impl=B.exports[se],B.dealloc=B.exports[re]}B.compileOptionUsed=function Q(re){if(arguments.length){if(Array.isArray(re)){const se={};return re.forEach(Le=>{se[Le]=T.sqlite3_compileoption_used(Le)}),se}else if(typeof re=="object")return Object.keys(re).forEach(se=>{re[se]=T.sqlite3_compileoption_used(se)}),re}else{if(Q._result)return Q._result;Q._opt||(Q._rx=/^([^=]+)=(.+)/,Q._rxInt=/^-?\d+$/,Q._opt=function(Wt,Yt){const lt=Q._rx.exec(Wt);Yt[0]=lt?lt[1]:Wt,Yt[1]=lt?Q._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const se={},Le=[0,0];let it=0,Ot;for(;Ot=T.sqlite3_compileoption_get(it++);)Q._opt(Ot,Le),se[Le[0]]=Le[1];return Q._result=se}return typeof re=="string"?!!T.sqlite3_compileoption_used(re):!1},B.pstack=Object.assign(Object.create(null),{restore:B.exports.sqlite3__wasm_pstack_restore,alloc:function(Q){return typeof Q=="string"&&!(Q=B.sizeofIR(Q))&&ce.toss("Invalid value for pstack.alloc(",arguments[0],")"),B.exports.sqlite3__wasm_pstack_alloc(Q)||ce.toss("Could not allocate",Q,"bytes from the pstack.")},allocChunks:function(Q,re){typeof re=="string"&&!(re=B.sizeofIR(re))&&ce.toss("Invalid size value for allocChunks(",arguments[1],")");const se=B.pstack.alloc(Q*re),Le=[];let it=0,Ot=0;for(;it<Q;++it,Ot+=re)Le.push(se+Ot);return Le},allocPtr:(Q=1,re=!0)=>Q===1?B.pstack.alloc(re?8:B.ptrSizeof):B.pstack.allocChunks(Q,re?8:B.ptrSizeof),call:function(Q){const re=B.pstack.pointer;try{return Q(pe)}finally{B.pstack.restore(re)}}}),Object.defineProperties(B.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_remaining}}),T.sqlite3_randomness=(...Q)=>{if(Q.length===1&&Ee.isTypedArray(Q[0])&&Q[0].BYTES_PER_ELEMENT===1){const re=Q[0];if(re.byteLength===0)return B.exports.sqlite3_randomness(0,0),re;const se=B.pstack.pointer;try{let Le=re.byteLength,it=0;const Ot=B.exports.sqlite3_randomness,Wt=B.heap8u(),Yt=Le<512?Le:512,lt=B.pstack.alloc(Yt);do{const _e=Le>Yt?Yt:Le;Ot(_e,lt),re.set(Te(Wt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{B.pstack.restore(se)}return re}B.exports.sqlite3_randomness(...Q)};let st;if(T.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const Q=I.wasmfsOpfsDir;if(!Q||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return Q&&B.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],Q)===0?st=Q:st=""}catch{return st=""}},T.sqlite3_wasmfs_filename_is_persistent=function(Q){const re=T.sqlite3_wasmfs_opfs_dir();return re&&Q?Q.startsWith(re+"/"):!1},T.sqlite3_js_db_uses_vfs=function(Q,re,se=0){try{const Le=T.sqlite3_vfs_find(re);return Le?Q?Le===T.sqlite3_js_db_vfs(Q,se)?Le:!1:Le===T.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},T.sqlite3_js_vfs_list=function(){const Q=[];let re=T.sqlite3_vfs_find(0);for(;re;){const se=new T.sqlite3_vfs(re);Q.push(B.cstrToJs(se.$zName)),re=se.$pNext,se.dispose()}return Q},T.sqlite3_js_db_export=function(Q,re=0){Q=B.xWrap.testConvertArg("sqlite3*",Q),Q||tt("Invalid sqlite3* argument."),B.bigIntEnabled||tt("BigInt64 support is not enabled.");const se=B.scopedAllocPush();let Le;try{const it=B.scopedAlloc(8+B.ptrSizeof),Ot=it+8,Wt=re?B.isPtr(re)?re:B.scopedAllocCString(""+re):0;let Yt=B.exports.sqlite3__wasm_db_serialize(Q,Wt,Ot,it,0);Yt&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(Yt)),Le=B.peekPtr(Ot);const lt=B.peek(it,"i64");return Yt=lt?B.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,Yt}finally{Le&&B.exports.sqlite3_free(Le),B.scopedAllocPop(se)}},T.sqlite3_js_db_vfs=(Q,re=0)=>Ee.sqlite3__wasm_db_vfs(Q,re),T.sqlite3_js_aggregate_context=(Q,re)=>T.sqlite3_aggregate_context(Q,re)||(re?ce.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),T.sqlite3_js_posix_create_file=function(Q,re,se){let Le;re&&B.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=B.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(se)||se<0)&&(se=re.byteLength)):Ke.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(se)||se<0)&&Ke.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(Q,Le,se);it&&Ke.toss("Creation of file failed with sqlite3 result code",T.sqlite3_js_rc_str(it))}finally{B.dealloc(Le)}},T.sqlite3_js_vfs_create_file=function(Q,re,se,Le){I.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;se?(B.isPtr(se)?it=se:se instanceof ArrayBuffer&&(se=new Uint8Array(se)),se instanceof Uint8Array?(it=B.allocFromTypedArray(se),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=se.byteLength)):Ke.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&(B.dealloc(it),Ke.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Ot=Ee.sqlite3__wasm_vfs_create_file(Q,re,it,Le);Ot&&Ke.toss("Creation of file failed with sqlite3 result code",T.sqlite3_js_rc_str(Ot))}finally{B.dealloc(it)}},T.sqlite3_js_sql_to_string=Q=>{if(typeof Q=="string")return Q;const re=ee(v);return re===v?void 0:re},Ee.isUIThread()){const Q=function(re){const se=Object.create(null);return se.prefix="kvvfs-"+re,se.stores=[],(re==="session"||re==="")&&se.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&se.stores.push(globalThis.localStorage),se};T.sqlite3_js_kvvfs_clear=function(re=""){let se=0;const Le=Q(re);return Le.stores.forEach(it=>{const Ot=[];let Wt;for(Wt=0;Wt<it.length;++Wt){const Yt=it.key(Wt);Yt.startsWith(Le.prefix)&&Ot.push(Yt)}Ot.forEach(Yt=>it.removeItem(Yt)),se+=Ot.length}),se},T.sqlite3_js_kvvfs_size=function(re=""){let se=0;const Le=Q(re);return Le.stores.forEach(it=>{let Ot;for(Ot=0;Ot<it.length;++Ot){const Wt=it.key(Ot);Wt.startsWith(Le.prefix)&&(se+=Wt.length,se+=it.getItem(Wt).length)}}),se*2}}T.sqlite3_db_config=function(Q,re,...se){switch(this.s||(this.s=B.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=B.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=B.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case T.SQLITE_DBCONFIG_ENABLE_FKEY:case T.SQLITE_DBCONFIG_ENABLE_TRIGGER:case T.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case T.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case T.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case T.SQLITE_DBCONFIG_ENABLE_QPSG:case T.SQLITE_DBCONFIG_TRIGGER_EQP:case T.SQLITE_DBCONFIG_RESET_DATABASE:case T.SQLITE_DBCONFIG_DEFENSIVE:case T.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case T.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case T.SQLITE_DBCONFIG_DQS_DML:case T.SQLITE_DBCONFIG_DQS_DDL:case T.SQLITE_DBCONFIG_ENABLE_VIEW:case T.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case T.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case T.SQLITE_DBCONFIG_STMT_SCANSTATUS:case T.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(Q,re,se[0],se[1]||0);case T.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(Q,re,se[0],se[1],se[2]);case T.SQLITE_DBCONFIG_MAINDBNAME:return this.s(Q,re,se[0]);default:return T.SQLITE_MISUSE}}.bind(Object.create(null)),T.sqlite3_value_to_js=function(Q,re=!0){let se;const Le=T.sqlite3_value_type(Q);switch(Le){case T.SQLITE_INTEGER:B.bigIntEnabled?(se=T.sqlite3_value_int64(Q),Ee.bigIntFitsDouble(se)&&(se=Number(se))):se=T.sqlite3_value_double(Q);break;case T.SQLITE_FLOAT:se=T.sqlite3_value_double(Q);break;case T.SQLITE_TEXT:se=T.sqlite3_value_text(Q);break;case T.SQLITE_BLOB:{const it=T.sqlite3_value_bytes(Q),Ot=T.sqlite3_value_blob(Q);it&&!Ot&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),se=it?B.heap8u().slice(Ot,Ot+Number(it)):null;break}case T.SQLITE_NULL:se=null;break;default:re&&tt(T.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),se=void 0}return se},T.sqlite3_values_to_js=function(Q,re,se=!0){let Le;const it=[];for(Le=0;Le<Q;++Le)it.push(T.sqlite3_value_to_js(B.peekPtr(re+B.ptrSizeof*Le),se));return it},T.sqlite3_result_error_js=function(Q,re){re instanceof ce?T.sqlite3_result_error_nomem(Q):T.sqlite3_result_error(Q,""+re,-1)},T.sqlite3_result_js=function(Q,re){if(re instanceof Error){T.sqlite3_result_error_js(Q,re);return}try{switch(typeof re){case"undefined":break;case"boolean":T.sqlite3_result_int(Q,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?T.sqlite3_result_int(Q,Number(re)):Ee.bigIntFitsDouble(re)?T.sqlite3_result_double(Q,Number(re)):B.bigIntEnabled?Ee.bigIntFits64(re)?T.sqlite3_result_int64(Q,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let se;Ee.isInt32(re)?se=T.sqlite3_result_int:B.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?se=T.sqlite3_result_int64:se=T.sqlite3_result_double,se(Q,re);break}case"string":{const[se,Le]=B.allocCString(re,!0);T.sqlite3_result_text(Q,se,Le,T.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){T.sqlite3_result_null(Q);break}else if(Ee.isBindableTypedArray(re)){const se=B.allocFromTypedArray(re);T.sqlite3_result_blob(Q,se,re.byteLength,T.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(se){T.sqlite3_result_error_js(Q,se)}},T.sqlite3_column_js=function(Q,re,se=!0){const Le=T.sqlite3_column_value(Q,re);return Le===0?void 0:T.sqlite3_value_to_js(Le,se)};const ae=function(Q,re,se){se=T[se],this.ptr?B.pokePtr(this.ptr,0):this.ptr=B.allocPtr();const Le=se(Q,re,this.ptr);if(Le)return Ke.toss(Le,arguments[2]+"() failed with code "+Le);const it=B.peekPtr(this.ptr);return it?T.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));T.sqlite3_preupdate_new_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_new"),T.sqlite3_preupdate_old_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_old"),T.sqlite3changeset_new_js=(Q,re)=>ae(Q,re,"sqlite3changeset_new"),T.sqlite3changeset_old_js=(Q,re)=>ae(Q,re,"sqlite3changeset_old");const pe={WasmAllocError:ce,SQLite3Error:Ke,capi:T,util:Ee,wasm:B,config:I,version:Object.create(null),client:void 0,asyncPostInit:async function Q(){if(Q.isReady instanceof Promise)return Q.isReady;let re=y.initializersAsync;delete y.initializersAsync;const se=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=Ot=>{throw I.error("an async sqlite3 initializer failed:",Ot),Ot};if(!re||!re.length)return Q.isReady=se().catch(Le);re=re.map(Ot=>Ot instanceof Function?async Wt=>Ot(pe):Ot),re.push(se);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return Q.isReady=it.catch(Le)},scriptInfo:void 0};try{y.initializers.forEach(Q=>{Q(pe)})}catch(Q){throw console.error("sqlite3 bootstrap initializer threw:",Q),Q}return delete y.initializers,y.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(y){y.bigIntEnabled===void 0&&(y.bigIntEnabled=!!globalThis.BigInt64Array);const S=(...ee)=>{throw new Error(ee.join(" "))};y.exports||Object.defineProperty(y,"exports",{enumerable:!0,configurable:!0,get:()=>y.instance&&y.instance.exports});const I=y.pointerIR||"i32",T=y.ptrSizeof=I==="i32"?4:I==="i64"?8:S("Unhandled ptrSizeof:",I),B=Object.create(null);B.heapSize=0,B.memory=null,B.freeFuncIndexes=[],B.scopedAlloc=[],B.utf8Decoder=new TextDecoder,B.utf8Encoder=new TextEncoder("utf-8"),y.sizeofIR=ee=>{switch(ee){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return T;default:return(""+ee).endsWith("*")?T:void 0}};const fe=function(){if(!B.memory)B.memory=y.memory instanceof WebAssembly.Memory?y.memory:y.exports.memory;else if(B.heapSize===B.memory.buffer.byteLength)return B;const ee=B.memory.buffer;return B.HEAP8=new Int8Array(ee),B.HEAP8U=new Uint8Array(ee),B.HEAP16=new Int16Array(ee),B.HEAP16U=new Uint16Array(ee),B.HEAP32=new Int32Array(ee),B.HEAP32U=new Uint32Array(ee),y.bigIntEnabled&&(B.HEAP64=new BigInt64Array(ee),B.HEAP64U=new BigUint64Array(ee)),B.HEAP32F=new Float32Array(ee),B.HEAP64F=new Float64Array(ee),B.heapSize=ee.byteLength,B};y.heap8=()=>fe().HEAP8,y.heap8u=()=>fe().HEAP8U,y.heap16=()=>fe().HEAP16,y.heap16u=()=>fe().HEAP16U,y.heap32=()=>fe().HEAP32,y.heap32u=()=>fe().HEAP32U,y.heapForSize=function(ee,ce=!0){const Ee=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe();switch(ee){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ce?Ee.HEAP8U:Ee.HEAP8;case 16:return ce?Ee.HEAP16U:Ee.HEAP16;case 32:return ce?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ce?Ee.HEAP64U:Ee.HEAP64;break;default:if(y.bigIntEnabled){if(ee===globalThis.BigUint64Array)return Ee.HEAP64U;if(ee===globalThis.BigInt64Array)return Ee.HEAP64;break}}S("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},y.functionTable=function(){return y.exports.__indirect_function_table},y.functionEntry=function(ee){const ce=y.functionTable();return ee<ce.length?ce.get(ee):void 0},y.jsFuncToWasm=function ee(ce,Ee){if(ee._||(ee._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,Q,re){re<128?pe[Q](re):pe[Q](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const Q=ee._.rxJSig.exec(pe);return Q?Q[2]:pe.substr(1)},letterType:pe=>ee._.sigTypes[pe]||S("Invalid signature letter:",pe),pushSigType:(pe,Q)=>pe.push(ee._.typeCodes[ee._.letterType(Q)])}),typeof ce=="string"){const pe=Ee;Ee=ce,ce=pe}const st=ee._.sigParams(Ee),ae=[1,96];ee._.uleb128Encode(ae,"push",st.length);for(const pe of st)ee._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),ee._.pushSigType(ae,Ee[0])),ee._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ce}}).exports.f};const me=function(ce,Ee,st){if(st&&!B.scopedAlloc.length&&S("No scopedAllocPush() scope is active."),typeof ce=="string"){const re=Ee;Ee=ce,ce=re}(typeof Ee!="string"||!(ce instanceof Function))&&S("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=y.functionTable(),pe=ae.length;let Q;for(;B.freeFuncIndexes.length&&(Q=B.freeFuncIndexes.pop(),ae.get(Q));){Q=null;continue}Q||(Q=pe,ae.grow(1));try{return ae.set(Q,ce),st&&B.scopedAlloc[B.scopedAlloc.length-1].push(Q),Q}catch(re){if(!(re instanceof TypeError))throw Q===pe&&B.freeFuncIndexes.push(pe),re}try{const re=y.jsFuncToWasm(ce,Ee);ae.set(Q,re),st&&B.scopedAlloc[B.scopedAlloc.length-1].push(Q)}catch(re){throw Q===pe&&B.freeFuncIndexes.push(pe),re}return Q};y.installFunction=(ee,ce)=>me(ee,ce,!1),y.scopedInstallFunction=(ee,ce)=>me(ee,ce,!0),y.uninstallFunction=function(ee){if(!ee&&ee!==0)return;const ce=B.freeFuncIndexes,Ee=y.functionTable();ce.push(ee);const st=Ee.get(ee);return Ee.set(ee,null),st},y.peek=function(ce,Ee="i8"){Ee.endsWith("*")&&(Ee=I);const st=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe(),ae=Array.isArray(ce)?[]:void 0;let pe;do{switch(ae&&(ce=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ce>>0];break;case"i16":pe=st.HEAP16[ce>>1];break;case"i32":pe=st.HEAP32[ce>>2];break;case"float":case"f32":pe=st.HEAP32F[ce>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ce>>3]);break;case"i64":if(y.bigIntEnabled){pe=BigInt(st.HEAP64[ce>>3]);break}default:S("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},y.poke=function(ee,ce,Ee="i8"){Ee.endsWith("*")&&(Ee=I);const st=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe();for(const ae of Array.isArray(ee)?ee:[ee])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ce;continue;case"i16":st.HEAP16[ae>>1]=ce;continue;case"i32":st.HEAP32[ae>>2]=ce;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ce;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ce;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ce);continue}default:S("Invalid type for poke(): "+Ee)}return this},y.peekPtr=(...ee)=>y.peek(ee.length===1?ee[0]:ee,I),y.pokePtr=(ee,ce=0)=>y.poke(ee,ce,I),y.peek8=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i8"),y.poke8=(ee,ce)=>y.poke(ee,ce,"i8"),y.peek16=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i16"),y.poke16=(ee,ce)=>y.poke(ee,ce,"i16"),y.peek32=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i32"),y.poke32=(ee,ce)=>y.poke(ee,ce,"i32"),y.peek64=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i64"),y.poke64=(ee,ce)=>y.poke(ee,ce,"i64"),y.peek32f=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"f32"),y.poke32f=(ee,ce)=>y.poke(ee,ce,"f32"),y.peek64f=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"f64"),y.poke64f=(ee,ce)=>y.poke(ee,ce,"f64"),y.getMemValue=y.peek,y.getPtrValue=y.peekPtr,y.setMemValue=y.poke,y.setPtrValue=y.pokePtr,y.isPtr32=ee=>typeof ee=="number"&&ee===(ee|0)&&ee>=0,y.isPtr=y.isPtr32,y.cstrlen=function(ee){if(!ee||!y.isPtr(ee))return null;const ce=fe().HEAP8U;let Ee=ee;for(;ce[Ee]!==0;++Ee);return Ee-ee};const Ke=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(ee,ce,Ee){return B.utf8Decoder.decode(ee.buffer instanceof Ke?ee.slice(ce,Ee):ee.subarray(ce,Ee))};y.cstrToJs=function(ee){const ce=y.cstrlen(ee);return ce?tt(fe().HEAP8U,ee,ee+ce):ce===null?ce:""},y.jstrlen=function(ee){if(typeof ee!="string")return null;const ce=ee.length;let Ee=0;for(let st=0;st<ce;++st){let ae=ee.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|ee.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},y.jstrcpy=function(ee,ce,Ee=0,st=-1,ae=!0){if((!ce||!(ce instanceof Int8Array)&&!(ce instanceof Uint8Array))&&S("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ce.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,Q=ee.length;const re=Ee,se=Ee+st-(ae?1:0);for(;pe<Q&&Ee<se;++pe){let Le=ee.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|ee.charCodeAt(++pe)&1023),Le<=127){if(Ee>=se)break;ce[Ee++]=Le}else if(Le<=2047){if(Ee+1>=se)break;ce[Ee++]=192|Le>>6,ce[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=se)break;ce[Ee++]=224|Le>>12,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}else{if(Ee+3>=se)break;ce[Ee++]=240|Le>>18,ce[Ee++]=128|Le>>12&63,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}}return ae&&(ce[Ee++]=0),Ee-re},y.cstrncpy=function(ee,ce,Ee){if((!ee||!ce)&&S("cstrncpy() does not accept NULL strings."),Ee<0)Ee=y.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=y.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ce+ae]);++ae)st[ee+ae]=pe;return ae<Ee&&(st[ee+ae++]=0),ae},y.jstrToUintArray=(ee,ce=!1)=>B.utf8Encoder.encode(ce?ee+"\0":ee);const at=(ee,ce)=>{(!(ee.alloc instanceof Function)||!(ee.dealloc instanceof Function))&&S("Object is missing alloc() and/or dealloc() function(s)","required by",ce+"().")},mt=function(ee,ce,Ee,st){if(at(y,st),typeof ee!="string")return null;{const ae=B.utf8Encoder.encode(ee),pe=Ee(ae.length+1),Q=fe().HEAP8U;return Q.set(ae,pe),Q[pe+ae.length]=0,ce?[pe,ae.length]:pe}};y.allocCString=(ee,ce=!1)=>mt(ee,ce,y.alloc,"allocCString()"),y.scopedAllocPush=function(){at(y,"scopedAllocPush");const ee=[];return B.scopedAlloc.push(ee),ee},y.scopedAllocPop=function(ee){at(y,"scopedAllocPop");const ce=arguments.length?B.scopedAlloc.indexOf(ee):B.scopedAlloc.length-1;ce<0&&S("Invalid state object for scopedAllocPop()."),arguments.length===0&&(ee=B.scopedAlloc[ce]),B.scopedAlloc.splice(ce,1);for(let Ee;Ee=ee.pop();)y.functionEntry(Ee)?y.uninstallFunction(Ee):y.dealloc(Ee)},y.scopedAlloc=function(ee){B.scopedAlloc.length||S("No scopedAllocPush() scope is active.");const ce=y.alloc(ee);return B.scopedAlloc[B.scopedAlloc.length-1].push(ce),ce},Object.defineProperty(y.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>B.scopedAlloc.length,set:()=>S("The 'active' property is read-only.")}),y.scopedAllocCString=(ee,ce=!1)=>mt(ee,ce,y.scopedAlloc,"scopedAllocCString()");const Be=function(ee,ce){const Ee=y[ee?"scopedAlloc":"alloc"]((ce.length+1)*y.ptrSizeof);let st=0;return ce.forEach(ae=>{y.pokePtr(Ee+y.ptrSizeof*st++,y[ee?"scopedAllocCString":"allocCString"](""+ae))}),y.pokePtr(Ee+y.ptrSizeof*st,0),Ee};y.scopedAllocMainArgv=ee=>Be(!0,ee),y.allocMainArgv=ee=>Be(!1,ee),y.cArgvToJs=(ee,ce)=>{const Ee=[];for(let st=0;st<ee;++st){const ae=y.peekPtr(ce+y.ptrSizeof*st);Ee.push(ae?y.cstrToJs(ae):null)}return Ee},y.scopedAllocCall=function(ee){y.scopedAllocPush();try{return ee()}finally{y.scopedAllocPop()}};const Oe=function(ee,ce,Ee){at(y,Ee);const st=ce?"i64":I;let ae=y[Ee](ee*(ce?8:T));if(y.poke(ae,0,st),ee===1)return ae;const pe=[ae];for(let Q=1;Q<ee;++Q)ae+=ce?8:T,pe[Q]=ae,y.poke(ae,0,st);return pe};y.allocPtr=(ee=1,ce=!0)=>Oe(ee,ce,"alloc"),y.scopedAllocPtr=(ee=1,ce=!0)=>Oe(ee,ce,"scopedAlloc"),y.xGet=function(ee){return y.exports[ee]||S("Cannot find exported symbol:",ee)};const et=(ee,ce)=>S(ee+"() requires",ce,"argument(s).");y.xCall=function(ee,...ce){const Ee=ee instanceof Function?ee:y.xGet(ee);return Ee instanceof Function||S("Exported symbol",ee,"is not a function."),Ee.length!==ce.length&&et(Ee===ee?Ee.name:ee,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ce)},B.xWrap=Object.create(null),B.xWrap.convert=Object.create(null),B.xWrap.convert.arg=new Map,B.xWrap.convert.result=new Map;const ve=B.xWrap.convert.arg,ke=B.xWrap.convert.result;y.bigIntEnabled&&ve.set("i64",ee=>BigInt(ee));const Te=I==="i32"?ee=>ee|0:ee=>BigInt(ee)|BigInt(0);ve.set("i32",Te).set("i16",ee=>(ee|0)&65535).set("i8",ee=>(ee|0)&255).set("f32",ee=>Number(ee).valueOf()).set("float",ve.get("f32")).set("f64",ve.get("f32")).set("double",ve.get("f64")).set("int",ve.get("i32")).set("null",ee=>ee).set(null,ve.get("null")).set("**",Te).set("*",Te),ke.set("*",Te).set("pointer",Te).set("number",ee=>Number(ee)).set("void",ee=>{}).set("null",ee=>ee).set(null,ke.get("null"));{const ee=["i8","i16","i32","int","f32","float","f64","double"];y.bigIntEnabled&&ee.push("i64");const ce=ve.get(I);for(const Ee of ee)ve.set(Ee+"*",ce),ke.set(Ee+"*",ce),ke.set(Ee,ve.get(Ee)||S("Missing arg converter:",Ee))}const Ze=function(ee){return typeof ee=="string"?y.scopedAllocCString(ee):ee?Te(ee):null};ve.set("string",Ze).set("utf8",Ze).set("pointer",Ze),ke.set("string",ee=>y.cstrToJs(ee)).set("utf8",ke.get("string")).set("string:dealloc",ee=>{try{return ee?y.cstrToJs(ee):null}finally{y.dealloc(ee)}}).set("utf8:dealloc",ke.get("string:dealloc")).set("json",ee=>JSON.parse(y.cstrToJs(ee))).set("json:dealloc",ee=>{try{return ee?JSON.parse(y.cstrToJs(ee)):null}finally{y.dealloc(ee)}});const Ge=class{constructor(ee){this.name=ee.name||"unnamed adapter"}convertArg(ee,ce,Ee){S("AbstractArgAdapter must be subclassed.")}};ve.FuncPtrAdapter=class Aa extends Ge{constructor(ce){super(ce),ve.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ce),this.name=ce.name||"unnamed",this.signature=ce.signature,ce.contextKey instanceof Function&&(this.contextKey=ce.contextKey,ce.bindScope||(ce.bindScope="context")),this.bindScope=ce.bindScope||S("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Aa.bindScopes.indexOf(ce.bindScope)<0&&S("Invalid options.bindScope ("+ce.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Aa.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ce.callProxy instanceof Function?ce.callProxy:void 0}contextKey(ce,Ee){return this}contextMap(ce){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ce);return st===void 0&&Ee.set(ce,st=[]),st}convertArg(ce,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ce)return ae[1];if(ce instanceof Function){this.callProxy&&(ce=this.callProxy(ce));const pe=me(ce,this.signature,this.isTransient);if(Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ce),ae){if(ae[1]){Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{B.scopedAlloc[B.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ce,ae[1]=pe}return pe}else if(y.isPtr(ce)||ce===null||ce===void 0){if(ae&&ae[1]&&ae[1]!==ce){Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{B.scopedAlloc[B.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ce|0}return ce||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ve.FuncPtrAdapter.warnOnUse=!1,ve.FuncPtrAdapter.debugFuncInstall=!1,ve.FuncPtrAdapter.debugOut=console.debug.bind(console),ve.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const je=ee=>ve.get(ee)||S("Argument adapter not found:",ee),Qe=ee=>ke.get(ee)||S("Result adapter not found:",ee);B.xWrap.convertArg=(ee,...ce)=>je(ee)(...ce),B.xWrap.convertArgNoCheck=(ee,...ce)=>ve.get(ee)(...ce),B.xWrap.convertResult=(ee,ce)=>ee===null?ce:ee?Qe(ee)(ce):void 0,B.xWrap.convertResultNoCheck=(ee,ce)=>ee===null?ce:ee?ke.get(ee)(ce):void 0,y.xWrap=function(ee,ce,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),y.isPtr(ee)&&(ee=y.functionEntry(ee)||S("Function pointer not found in WASM function table."));const st=ee instanceof Function,ae=st?ee:y.xGet(ee);if(st&&(ee=ae.name||"unnamed function"),Ee.length!==ae.length&&et(ee,ae.length),ce===null&&ae.length===0)return ae;ce!=null&&Qe(ce);for(const Q of Ee)Q instanceof Ge?ve.set(Q,(...re)=>Q.convertArg(...re)):je(Q);const pe=B.xWrap;return ae.length===0?(...Q)=>Q.length?et(ee,ae.length):pe.convertResult(ce,ae.call(null)):function(...Q){Q.length!==ae.length&&et(ee,ae.length);const re=y.scopedAllocPush();try{let se=0;for(;se<Q.length;++se)Q[se]=pe.convertArgNoCheck(Ee[se],Q[se],Q,se);return pe.convertResultNoCheck(ce,ae.apply(null,Q))}finally{y.scopedAllocPop(re)}}};const St=function(ee,ce,Ee,st,ae,pe){if(typeof Ee=="string"){if(ce===1)return pe.get(Ee);if(ce===2){if(st)st instanceof Function||S(ae,"requires a function argument.");else return delete pe.get(Ee),ee;return pe.set(Ee,st),ee}}S("Invalid arguments to",ae)};return y.xWrap.resultAdapter=function ee(ce,Ee){return St(ee,arguments.length,ce,Ee,"resultAdapter()",ke)},y.xWrap.argAdapter=function ee(ce,Ee){return St(ee,arguments.length,ce,Ee,"argAdapter()",ve)},y.xWrap.FuncPtrAdapter=ve.FuncPtrAdapter,y.xCallWrapped=function(ee,ce,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),y.xWrap(ee,ce,Ee||[]).apply(null,st||[])},y.xWrap.testConvertArg=B.xWrap.convertArg,y.xWrap.testConvertResult=B.xWrap.convertResult,y},globalThis.WhWasmUtilInstaller.yawl=function(y){const S=()=>fetch(y.uri,{credentials:"same-origin"}),I=this,T=function(fe){if(y.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Ke=y.wasmUtilTarget;if(Ke.module=fe.module,Ke.instance=fe.instance,Ke.instance.exports.memory||(Ke.memory=y.imports&&y.imports.env&&y.imports.env.memory||me("Missing 'memory' object!")),!Ke.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Ke.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Ke.dealloc=function(at){tt.free(at)}}I(Ke)}return y.onload&&y.onload(fe,y),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(S(),y.imports||{}).then(T)}:function(){return S().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,y.imports||{})).then(T)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function y(S){const I=(...We)=>{throw new Error(We.join(" "))};!(S.heap instanceof WebAssembly.Memory)&&!(S.heap instanceof Function)&&I("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){S[We]instanceof Function||I("Config option '"+We+"' must be a function.")});const T=y,B=S.heap instanceof Function?S.heap:()=>new Uint8Array(S.heap.buffer),fe=S.alloc,me=S.dealloc,Ke=S.log||console.log.bind(console),tt=S.memberPrefix||"",at=S.memberSuffix||"",mt=S.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!S.bigIntEnabled,Be=globalThis.BigInt,Oe=globalThis.BigInt64Array,et=S.ptrSizeof||4,ve=S.ptrIR||"i32";T.debugFlags||(T.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const bt=function wt(Nt){return arguments.length===0?wt.__flags:(Nt<0?(delete wt.__flags.getter,delete wt.__flags.setter,delete wt.__flags.alloc,delete wt.__flags.dealloc):(wt.__flags.getter=(1&Nt)!==0,wt.__flags.setter=(2&Nt)!==0,wt.__flags.alloc=(4&Nt)!==0,wt.__flags.dealloc=(8&Nt)!==0),wt._flags)};return Object.defineProperty(bt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||bt(0),bt},T.debugFlags=T.__makeDebugFlags());const ke=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Ze=We=>We==="P",Ge=We=>Te(We)?"p":We[0],je=function(We){switch(Ge(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ve;case"j":return"i64";case"f":return"float";case"d":return"double"}I("Unhandled signature IR:",We)},Qe=Oe?()=>!0:()=>I("BigInt64Array is not available."),St=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Qe()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Qe()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}I("Unhandled DataView getter for signature:",We)},ee=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Qe()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Qe()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}I("Unhandled DataView setter for signature:",We)},ce=function(We){switch(Ge(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Qe()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Qe()&&Be}break}I("Unhandled DataView set wrapper for signature:",We)},Ee=(We,bt)=>We+"::"+bt,st=function(We,bt){return()=>I(Ee(We,bt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",Q=function(We,bt,wt){if(wt||(wt=ae.get(bt)),wt){if(ae.delete(bt),Array.isArray(bt.ondispose)){let Nt;for(;Nt=bt.ondispose.shift();)try{Nt instanceof Function?Nt.call(bt):Nt instanceof zt?Nt.dispose():typeof Nt=="number"&&me(Nt)}catch(wn){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",wn)}}else if(bt.ondispose instanceof Function)try{bt.ondispose()}catch(Nt){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",Nt)}delete bt.ondispose,We.debugFlags.__flags.dealloc&&Ke("debug.dealloc:",bt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),bt[pe]||me(wt)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),se=function(We,bt,wt){let Nt=!wt;wt?Object.defineProperty(bt,pe,re(wt)):(wt=fe(We.structInfo.sizeof),wt||I("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Ke("debug.alloc:",Nt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),Nt&&B().fill(0,wt,wt+We.structInfo.sizeof),ae.set(bt,wt)}catch(wn){throw Q(We,bt,wt),wn}},Le=function(){const We=this.pointer;return We?new Uint8Array(B().slice(We,We+this.structInfo.sizeof)):null},Ot=re(We=>tt+We+at),Wt=function(We,bt,wt=!0){let Nt=We.members[bt];if(!Nt&&(tt||at)){for(const wn of Object.values(We.members))if(wn.key===bt){Nt=wn;break}!Nt&&wt&&I(Ee(We.name,bt),"is not a mapped struct member.")}return Nt},Yt=function We(bt,wt,Nt=!1){We._||(We._=Hn=>Hn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const wn=Wt(bt.structInfo,wt,!0);return Nt?We._(wn.signature):wn.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>I("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const bt of Object.keys(this.structInfo.members))We.push(this.memberKey(bt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Lt=function(We,bt,wt){return Pe.decode(We.buffer instanceof pt?We.slice(bt,wt):We.subarray(bt,wt))},Xt=function(We,bt,wt=!1){const Nt=Wt(We.structInfo,bt,wt);return Nt&&Nt.signature.length===1&&Nt.signature[0]==="s"?Nt:!1},qe=function(We){We.signature!=="s"&&I("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(bt,wt){const Nt=Wt(bt.structInfo,wt,!0);qe(Nt);const wn=bt[Nt.key];if(!wn)return null;let Hn=wn;const zn=B();for(;zn[Hn]!==0;++Hn);return wn===Hn?"":Lt(zn,wn,Hn)},dt=function(We,...bt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...bt)},It=function(We){const bt=ot.encode(We),wt=fe(bt.length+1);wt||I("Allocation error while duplicating string:",We);const Nt=B();return Nt.set(bt,wt),Nt[wt+bt.length]=0,wt},xt=function(We,bt,wt){const Nt=Wt(We.structInfo,bt,!0);qe(Nt);const wn=It(wt);return We[Nt.key]=wn,dt(We,wn),We},zt=function(bt,wt){arguments[2]!==re&&I("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(bt),structInfo:re(wt)})};zt.prototype=Object.create(null,{dispose:re(function(){Q(this.constructor,this)}),lookupMember:re(function(We,bt=!0){return Wt(this.structInfo,We,bt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,bt=!0){return Xt(this,We,bt)}),memberKey:Ot,memberKeys:_e,memberSignature:re(function(We,bt=!1){return Yt(this,We,bt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,bt){return xt(this,We,bt)})}),Object.assign(zt.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(zt,{allocCString:re(It),isA:re(We=>We instanceof zt),hasExternalPointer:re(We=>We instanceof zt&&!!We[pe]),memberKey:Ot});const vn=We=>Number.isFinite(We)||We instanceof(Be||Number),qt=function We(bt,wt,Nt){if(!We._){We._={getters:{},setters:{},sw:{}};const ci=["i","c","C","p","P","s","f","d","v()"];mt&&ci.push("j"),ci.forEach(function(Vs){We._.getters[Vs]=St(Vs),We._.setters[Vs]=ee(Vs),We._.sw[Vs]=ce(Vs)});const gx=/^[ipPsjfdcC]$/,yx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Vs,bx,Fm,$f){Object.prototype.hasOwnProperty.call(Vs,Fm)&&I(Vs.structName,"already has a property named",Fm+"."),gx.test($f)||yx.test($f)||I("Malformed signature for",Ee(Vs.structName,bx)+":",$f)}}const wn=bt.memberKey(wt);We.sigCheck(bt.prototype,wt,wn,Nt.signature),Nt.key=wn,Nt.name=wt;const Hn=Ge(Nt.signature),zn=Ee(bt.prototype.structName,wn),Un=bt.prototype.debugFlags.__flags,ya=Object.create(null);ya.configurable=!1,ya.enumerable=!1,ya.get=function(){Un.getter&&Ke("debug.getter:",We._.getters[Hn],"for",je(Hn),zn,"@",this.pointer,"+",Nt.offset,"sz",Nt.sizeof);let ci=new DataView(B().buffer,this.pointer+Nt.offset,Nt.sizeof)[We._.getters[Hn]](0,ke);return Un.getter&&Ke("debug.getter:",zn,"result =",ci),ci},Nt.readOnly?ya.set=st(bt.prototype.structName,wn):ya.set=function(ci){if(Un.setter&&Ke("debug.setter:",We._.setters[Hn],"for",je(Hn),zn,"@",this.pointer,"+",Nt.offset,"sz",Nt.sizeof,ci),this.pointer||I("Cannot set struct property on disposed instance."),ci===null)ci=0;else for(;!vn(ci);){if(Ze(Nt.signature)&&ci instanceof zt){ci=ci.pointer||0,Un.setter&&Ke("debug.setter:",zn,"resolved to",ci);break}I("Invalid value for pointer-type",zn+".")}new DataView(B().buffer,this.pointer+Nt.offset,Nt.sizeof)[We._.setters[Hn]](0,We._.sw[Hn](ci),ke)},Object.defineProperty(bt.prototype,wn,ya)},Sr=function We(bt,wt){arguments.length===1?(wt=bt,bt=wt.name):wt.name||(wt.name=bt),bt||I("Struct name is required.");let Nt=!1;Object.keys(wt.members).forEach(zn=>{const Un=wt.members[zn];Un.sizeof?Un.sizeof===1?Un.signature==="c"||Un.signature==="C"||I("Unexpected sizeof==1 member",Ee(wt.name,zn),"with signature",Un.signature):(Un.sizeof%4!==0&&(console.warn("Invalid struct member description =",Un,"from",wt),I(bt,"member",zn,"sizeof is not aligned. sizeof="+Un.sizeof)),Un.offset%4!==0&&(console.warn("Invalid struct member description =",Un,"from",wt),I(bt,"member",zn,"offset is not aligned. offset="+Un.offset))):I(bt,"member",zn,"is missing sizeof."),(!Nt||Nt.offset<Un.offset)&&(Nt=Un)}),Nt?wt.sizeof<Nt.offset+Nt.sizeof&&I("Invalid struct config:",bt,"max member offset ("+Nt.offset+") ","extends past end of struct (sizeof="+wt.sizeof+")."):I("No member property descriptions found.");const wn=re(T.__makeDebugFlags(We.debugFlags)),Hn=function zn(Un){this instanceof zn?arguments.length?((Un!==(Un|0)||Un<=0)&&I("Invalid pointer value for",bt,"constructor."),se(zn,this,Un)):se(zn,this):I("The",bt,"constructor may only be called via 'new'.")};return Object.defineProperties(Hn,{debugFlags:wn,isA:re(zn=>zn instanceof Hn),memberKey:Ot,memberKeys:_e,methodInfoForKey:re(function(zn){}),structInfo:re(wt),structName:re(bt)}),Hn.prototype=new zt(bt,wt,re),Object.defineProperties(Hn.prototype,{debugFlags:wn,constructor:re(Hn)}),Object.keys(wt.members).forEach(zn=>qt(Hn,zn,wt.members[zn])),Hn};return Sr.StructType=zt,Sr.config=S,Sr.allocCString=It,Sr.debugFlags||(Sr.debugFlags=T.__makeDebugFlags(T.debugFlags)),Sr},globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ve)=>{throw new Error(ve.join(" "))};y.SQLite3Error.toss;const I=y.capi,T=y.wasm,B=y.util;if(globalThis.WhWasmUtilInstaller(T),delete globalThis.WhWasmUtilInstaller,T.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new T.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ve=>{let ke;return(Te,Ze,Ge,je)=>{try{const Qe=T.cArgvToJs(Ze,Ge);return ke||(ke=T.cArgvToJs(Ze,je)),ve(Qe,ke)|0}catch(Qe){return Qe.resultCode||I.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new T.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ve,ke)=>ve[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new T.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],T.exports.sqlite3_progress_handler&&T.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new T.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ve,ke)=>ve[0]}),"*"]]),T.exports.sqlite3_stmt_explain&&T.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),T.exports.sqlite3_set_authorizer&&T.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ve,ke)=>ve[0],callProxy:ve=>(ke,Te,Ze,Ge,je,Qe)=>{try{return Ze=Ze&&T.cstrToJs(Ze),Ge=Ge&&T.cstrToJs(Ge),je=je&&T.cstrToJs(je),Qe=Qe&&T.cstrToJs(Qe),ve(ke,Te,Ze,Ge,je,Qe)||0}catch(St){return St.resultCode||I.SQLITE_ERROR}}}),"*"]]),T.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Ge,je)=>{ve(ke,Te,T.cstrToJs(Ze),T.cstrToJs(Ge),je)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],T.bigIntEnabled&&T.exports.sqlite3_declare_vtab&&T.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),T.bigIntEnabled&&T.exports.sqlite3_preupdate_hook&&T.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,Te,Ze,Ge,je,Qe,St)=>{ve(ke,Te,Ze,T.cstrToJs(Ge),T.cstrToJs(je),Qe,St)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),T.bigIntEnabled&&T.exports.sqlite3changegroup_add&&T.exports.sqlite3session_create&&T.exports.sqlite3_preupdate_hook){const ve={signature:"i(ps)",callProxy:ke=>(Te,Ze)=>{try{return ke(Te,T.cstrToJs(Ze))|0}catch(Ge){return Ge.resultCode||I.SQLITE_ERROR}}};T.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new T.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new T.xWrap.FuncPtrAdapter({name:"xFilter",...ve,contextKey:(ke,Te)=>ke[0]}),"*"]])}T.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],y.StructBinder=globalThis.Jaccwabyt({heap:T.heap8u,alloc:T.alloc,dealloc:T.dealloc,bigIntEnabled:T.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ve=T.xWrap.argAdapter("string");T.xWrap.argAdapter("string:flexible",je=>ve(B.flexibleString(je))),T.xWrap.argAdapter("string:static",function(je){return T.isPtr(je)?je:(je=""+je,this[je]||(this[je]=T.allocCString(je)))}.bind(Object.create(null)));const ke=T.xWrap.argAdapter("*"),Te=function(){};T.xWrap.argAdapter("sqlite3_filename",ke)("sqlite3_context*",ke)("sqlite3_value*",ke)("void*",ke)("sqlite3_changegroup*",ke)("sqlite3_changeset_iter*",ke)("sqlite3_session*",ke)("sqlite3_stmt*",je=>ke(je instanceof(y?.oo1?.Stmt||Te)?je.pointer:je))("sqlite3*",je=>ke(je instanceof(y?.oo1?.DB||Te)?je.pointer:je))("sqlite3_vfs*",je=>typeof je=="string"?I.sqlite3_vfs_find(je)||y.SQLite3Error.toss(I.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",je):ke(je instanceof(I.sqlite3_vfs||Te)?je.pointer:je)),T.exports.sqlite3_declare_vtab&&T.xWrap.argAdapter("sqlite3_index_info*",je=>ke(je instanceof(I.sqlite3_index_info||Te)?je.pointer:je))("sqlite3_module*",je=>ke(je instanceof(I.sqlite3_module||Te)?je.pointer:je));const Ze=T.xWrap.resultAdapter("*");T.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),T.exports.sqlite3_step.length===0&&(T.xWrap.doArgcCheck=!1,y.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const je of T.bindingSignatures)I[je[0]]=T.xWrap.apply(null,je);for(const je of T.bindingSignatures.wasmInternal)B[je[0]]=T.xWrap.apply(null,je);const Ge=function(je){return()=>S(je+"() is unavailable due to lack","of BigInt support in this build.")};for(const je of T.bindingSignatures.int64)I[je[0]]=T.bigIntEnabled?T.xWrap.apply(null,je):Ge(je[0]);if(delete T.bindingSignatures,T.exports.sqlite3__wasm_db_error){const je=T.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");B.sqlite3__wasm_db_error=function(Qe,St,ee){return St instanceof y.WasmAllocError?(St=I.SQLITE_NOMEM,ee=0):St instanceof Error&&(ee=ee||""+St,St=St.resultCode||I.SQLITE_ERROR),Qe?je(Qe,St,ee):St}}else B.sqlite3__wasm_db_error=function(je,Qe,St){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Qe}}{const ve=T.xCall("sqlite3__wasm_enum_json");ve||S("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),T.ctype=JSON.parse(T.cstrToJs(ve));const ke=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];T.bigIntEnabled&&ke.push("serialize","session","vtab");for(const Ge of ke)for(const je of Object.entries(T.ctype[Ge]))I[je[0]]=je[1];T.functionEntry(I.SQLITE_WASM_DEALLOC)||S("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+I.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Ge of["resultCodes"])for(const je of Object.entries(T.ctype[Ge]))Te[je[1]]=je[0];I.sqlite3_js_rc_str=Ge=>Te[Ge];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!B.isUIThread(),sqlite3_index_info:!T.bigIntEnabled,sqlite3_index_constraint:!T.bigIntEnabled,sqlite3_index_orderby:!T.bigIntEnabled,sqlite3_index_constraint_usage:!T.bigIntEnabled});for(const Ge of T.ctype.structs)Ze[Ge.name]||(I[Ge.name]=y.StructBinder(Ge));if(I.sqlite3_index_info){for(const Ge of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])I.sqlite3_index_info[Ge]=I[Ge],delete I[Ge];I.sqlite3_vtab_config=T.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(ve,ke,Te)=>B.sqlite3__wasm_db_error(ve,I.SQLITE_MISUSE,ke+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=ve=>B.sqlite3__wasm_db_error(ve,I.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Ke=ve=>T.xWrap.argAdapter("sqlite3*")(ve),tt=ve=>T.isPtr(ve)?T.cstrToJs(ve):ve,at=function(ve,ke){ve=Ke(ve);let Te=this.dbMap.get(ve);if(ke)!Te&&ke>0&&this.dbMap.set(ve,Te=Object.create(null));else return this.dbMap.delete(ve),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(ve,ke){const Te=at(ve,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(ke).toLowerCase())},at._addUDF=function(ve,ke,Te,Ze){ke=tt(ke).toLowerCase();let Ge=Ze.get(ke);Ge||Ze.set(ke,Ge=new Set),Ge.add(Te<0?-1:Te)},at.addFunction=function(ve,ke,Te){const Ze=at(ve,1);Ze.udf||(Ze.udf=new Map),this._addUDF(ve,ke,Te,Ze.udf)},T.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(ve,ke,Te){const Ze=at(ve,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(ve,ke,Te,Ze.wudf)}),at.cleanup=function(ve){ve=Ke(ve);const ke=[ve];for(const Ge of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const je=T.exports[Ge];if(je){ke.length=je.length;try{I[Ge](...ke)}catch(Qe){y.config.warn("close-time call of",Ge+"(",ke,") threw:",Qe)}}}const Te=at(ve,0);if(!Te)return;if(Te.collation){for(const Ge of Te.collation)try{I.sqlite3_create_collation_v2(ve,Ge,I.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Ge=Ze?Te.wudf:Te.udf;if(!Ge)continue;const je=Ze?I.sqlite3_create_window_function:I.sqlite3_create_function_v2;for(const Qe of Ge){const St=Qe[0],ee=Qe[1],ce=[ve,St,0,I.SQLITE_UTF8,0,0,0,0,0];Ze&&ce.push(0);for(const Ee of ee)try{ce[2]=Ee,je.apply(null,ce)}catch{}ee.clear()}Ge.clear()}delete Te.udf,delete Te.wudf};{const ve=T.xWrap("sqlite3_close_v2","int","sqlite3*");I.sqlite3_close_v2=function(ke){if(arguments.length!==1)return fe(ke,"sqlite3_close_v2",1);if(ke)try{at.cleanup(ke)}catch{}return ve(ke)}}if(I.sqlite3session_create){const ve=T.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);I.sqlite3session_delete=function(ke){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);ke&&I.sqlite3session_table_filter(ke,0,0),ve(ke)}}{const ve=(Te,Ze)=>"argv["+Ze+"]:"+Te[0]+":"+T.cstrToJs(Te[1]).toLowerCase(),ke=T.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new T.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ve}),new T.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ve})]);I.sqlite3_create_collation_v2=function(Te,Ze,Ge,je,Qe,St){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Ge&15))Ge|=I.SQLITE_UTF8;else if(I.SQLITE_UTF8!==(Ge&15))return me(Te);try{const ee=ke(Te,Ze,Ge,je,Qe,St);return ee===0&&Qe instanceof Function&&at.addCollation(Te,Ze),ee}catch(ee){return B.sqlite3__wasm_db_error(Te,ee)}},I.sqlite3_create_collation=(Te,Ze,Ge,je,Qe)=>arguments.length===5?I.sqlite3_create_collation_v2(Te,Ze,Ge,je,Qe,0):fe(Te,"sqlite3_create_collation",5)}{const ve=function(Ge,je){return Ge[0]+":"+(Ge[2]<0?-1:Ge[2])+":"+je+":"+T.cstrToJs(Ge[1]).toLowerCase()},ke=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(je,Qe,St)=>{try{Ge(je,...I.sqlite3_values_to_js(Qe,St))}catch(ee){I.sqlite3_result_error_js(je,ee)}}},xFinalAndValue:{signature:"v(p)",contextKey:ve,callProxy:Ge=>je=>{try{I.sqlite3_result_js(je,Ge(je))}catch(Qe){I.sqlite3_result_error_js(je,Qe)}}},xFunc:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(je,Qe,St)=>{try{I.sqlite3_result_js(je,Ge(je,...I.sqlite3_values_to_js(Qe,St)))}catch(ee){I.sqlite3_result_error_js(je,ee)}}},xDestroy:{signature:"v(p)",contextKey:ve,callProxy:Ge=>je=>{try{Ge(je)}catch(Qe){console.error("UDF xDestroy method threw:",Qe)}}}}),Te=T.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new T.xWrap.FuncPtrAdapter({name:"xFunc",...ke.xFunc}),new T.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new T.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new T.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]),Ze=T.exports.sqlite3_create_window_function?T.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new T.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new T.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new T.xWrap.FuncPtrAdapter({name:"xValue",...ke.xFinalAndValue}),new T.xWrap.FuncPtrAdapter({name:"xInverse",...ke.xInverseAndStep}),new T.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]):void 0;I.sqlite3_create_function_v2=function Ge(je,Qe,St,ee,ce,Ee,st,ae,pe){if(Ge.length!==arguments.length)return fe(je,"sqlite3_create_function_v2",Ge.length);if(!(ee&15))ee|=I.SQLITE_UTF8;else if(I.SQLITE_UTF8!==(ee&15))return me(je);try{const Q=Te(je,Qe,St,ee,ce,Ee,st,ae,pe);return Q===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(je,Qe,St),Q}catch(Q){return console.error("sqlite3_create_function_v2() setup threw:",Q),B.sqlite3__wasm_db_error(je,Q,"Creation of UDF threw: "+Q)}},I.sqlite3_create_function=function Ge(je,Qe,St,ee,ce,Ee,st,ae){return Ge.length===arguments.length?I.sqlite3_create_function_v2(je,Qe,St,ee,ce,Ee,st,ae,0):fe(je,"sqlite3_create_function",Ge.length)},Ze?I.sqlite3_create_window_function=function Ge(je,Qe,St,ee,ce,Ee,st,ae,pe,Q){if(Ge.length!==arguments.length)return fe(je,"sqlite3_create_window_function",Ge.length);if(!(ee&15))ee|=I.SQLITE_UTF8;else if(I.SQLITE_UTF8!==(ee&15))return me(je);try{const re=Ze(je,Qe,St,ee,ce,Ee,st,ae,pe,Q);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||Q instanceof Function)&&at.addWindowFunc(je,Qe,St),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),B.sqlite3__wasm_db_error(je,re,"Creation of UDF threw: "+re)}}:delete I.sqlite3_create_window_function,I.sqlite3_create_function_v2.udfSetResult=I.sqlite3_create_function.udfSetResult=I.sqlite3_result_js,I.sqlite3_create_window_function&&(I.sqlite3_create_window_function.udfSetResult=I.sqlite3_result_js),I.sqlite3_create_function_v2.udfConvertArgs=I.sqlite3_create_function.udfConvertArgs=I.sqlite3_values_to_js,I.sqlite3_create_window_function&&(I.sqlite3_create_window_function.udfConvertArgs=I.sqlite3_values_to_js),I.sqlite3_create_function_v2.udfSetError=I.sqlite3_create_function.udfSetError=I.sqlite3_result_error_js,I.sqlite3_create_window_function&&(I.sqlite3_create_window_function.udfSetError=I.sqlite3_result_error_js)}{const ve=(Te,Ze)=>(typeof Te=="string"?Ze=-1:B.isSQLableTypedArray(Te)?(Ze=Te.byteLength,Te=B.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Ze=-1),[Te,Ze]),ke={basic:T.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:T.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};I.sqlite3_prepare_v3=function Te(Ze,Ge,je,Qe,St,ee){if(Te.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",Te.length);const[ce,Ee]=ve(Ge,je);switch(typeof ce){case"string":return ke.basic(Ze,ce,Ee,Qe,St,null);case"number":return ke.full(Ze,ce,Ee,Qe,St,ee);default:return B.sqlite3__wasm_db_error(Ze,I.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},I.sqlite3_prepare_v2=function Te(Ze,Ge,je,Qe,St){return Te.length===arguments.length?I.sqlite3_prepare_v3(Ze,Ge,je,0,Qe,St):fe(Ze,"sqlite3_prepare_v2",Te.length)}}{const ve=T.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),ke=T.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);I.sqlite3_bind_text=function Te(Ze,Ge,je,Qe,St){if(Te.length!==arguments.length)return fe(I.sqlite3_db_handle(Ze),"sqlite3_bind_text",Te.length);if(T.isPtr(je)||je===null)return ve(Ze,Ge,je,Qe,St);je instanceof ArrayBuffer?je=new Uint8Array(je):Array.isArray(pMem)&&(je=pMem.join(""));let ee,ce;try{if(B.isSQLableTypedArray(je))ee=T.allocFromTypedArray(je),ce=je.byteLength;else if(typeof je=="string")[ee,ce]=T.allocCString(je);else return B.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),I.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ve(Ze,Ge,ee,ce,I.SQLITE_WASM_DEALLOC)}catch(Ee){return T.dealloc(ee),B.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),Ee)}},I.sqlite3_bind_blob=function Te(Ze,Ge,je,Qe,St){if(Te.length!==arguments.length)return fe(I.sqlite3_db_handle(Ze),"sqlite3_bind_blob",Te.length);if(T.isPtr(je)||je===null)return ke(Ze,Ge,je,Qe,St);je instanceof ArrayBuffer?je=new Uint8Array(je):Array.isArray(je)&&(je=je.join(""));let ee,ce;try{if(B.isBindableTypedArray(je))ee=T.allocFromTypedArray(je),ce=Qe>=0?Qe:je.byteLength;else if(typeof je=="string")[ee,ce]=T.allocCString(je);else return B.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),I.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return ke(Ze,Ge,ee,ce,I.SQLITE_WASM_DEALLOC)}catch(Ee){return T.dealloc(ee),B.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),Ee)}}}I.sqlite3_config=function(ve,...ke){if(arguments.length<2)return I.SQLITE_MISUSE;switch(ve){case I.SQLITE_CONFIG_COVERING_INDEX_SCAN:case I.SQLITE_CONFIG_MEMSTATUS:case I.SQLITE_CONFIG_SMALL_MALLOC:case I.SQLITE_CONFIG_SORTERREF_SIZE:case I.SQLITE_CONFIG_STMTJRNL_SPILL:case I.SQLITE_CONFIG_URI:return T.exports.sqlite3__wasm_config_i(ve,ke[0]);case I.SQLITE_CONFIG_LOOKASIDE:return T.exports.sqlite3__wasm_config_ii(ve,ke[0],ke[1]);case I.SQLITE_CONFIG_MEMDB_MAXSIZE:return T.exports.sqlite3__wasm_config_j(ve,ke[0]);case I.SQLITE_CONFIG_GETMALLOC:case I.SQLITE_CONFIG_GETMUTEX:case I.SQLITE_CONFIG_GETPCACHE2:case I.SQLITE_CONFIG_GETPCACHE:case I.SQLITE_CONFIG_HEAP:case I.SQLITE_CONFIG_LOG:case I.SQLITE_CONFIG_MALLOC:case I.SQLITE_CONFIG_MMAP_SIZE:case I.SQLITE_CONFIG_MULTITHREAD:case I.SQLITE_CONFIG_MUTEX:case I.SQLITE_CONFIG_PAGECACHE:case I.SQLITE_CONFIG_PCACHE2:case I.SQLITE_CONFIG_PCACHE:case I.SQLITE_CONFIG_PCACHE_HDRSZ:case I.SQLITE_CONFIG_PMASZ:case I.SQLITE_CONFIG_SERIALIZED:case I.SQLITE_CONFIG_SINGLETHREAD:case I.SQLITE_CONFIG_SQLLOG:case I.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return I.SQLITE_NOTFOUND}};{const ve=new Set;I.sqlite3_auto_extension=function(ke){if(ke instanceof Function)ke=T.installFunction("i(ppp)",ke);else if(arguments.length!==1||!T.isPtr(ke))return I.SQLITE_MISUSE;const Te=T.exports.sqlite3_auto_extension(ke);return ke!==arguments[0]&&(Te===0?ve.add(ke):T.uninstallFunction(ke)),Te},I.sqlite3_cancel_auto_extension=function(ke){return!ke||arguments.length!==1||!T.isPtr(ke)?0:T.exports.sqlite3_cancel_auto_extension(ke)},I.sqlite3_reset_auto_extension=function(){T.exports.sqlite3_reset_auto_extension();for(const ke of ve)T.uninstallFunction(ke);ve.clear()}}const mt=I.sqlite3_vfs_find("kvvfs");if(mt)if(B.isUIThread()){const ve=new I.sqlite3_kvvfs_methods(T.exports.sqlite3__wasm_kvvfs_methods());delete I.sqlite3_kvvfs_methods;const ke=T.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=T.pstack,Ze=je=>T.peek(je)===115?sessionStorage:localStorage,Ge={xRead:(je,Qe,St,ee)=>{const ce=Te.pointer,Ee=T.scopedAllocPush();try{const st=ke(je,Qe);if(!st)return-3;const ae=T.cstrToJs(st),pe=Ze(je).getItem(ae);if(!pe)return-1;const Q=pe.length;if(ee<=0)return Q;if(ee===1)return T.poke(St,0),Q;const re=T.scopedAllocCString(pe);return ee>Q+1&&(ee=Q+1),T.heap8u().copyWithin(St,re,re+ee-1),T.poke(St+ee-1,0),ee-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ce),T.scopedAllocPop(Ee)}},xWrite:(je,Qe,St)=>{const ee=Te.pointer;try{const ce=ke(je,Qe);if(!ce)return 1;const Ee=T.cstrToJs(ce);return Ze(je).setItem(Ee,T.cstrToJs(St)),0}catch(ce){return console.error("kvstorageWrite()",ce),I.SQLITE_IOERR}finally{Te.restore(ee)}},xDelete:(je,Qe)=>{const St=Te.pointer;try{const ee=ke(je,Qe);return ee?(Ze(je).removeItem(T.cstrToJs(ee)),0):1}catch(ee){return console.error("kvstorageDelete()",ee),I.SQLITE_IOERR}finally{Te.restore(St)}}};for(const je of Object.keys(Ge))ve[ve.memberKey(je)]=T.installFunction(ve.memberSignature(je),Ge[je])}else I.sqlite3_vfs_unregister(mt);T.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=y.StructBinder,Oe=function ve(ke,Te,Ze,Ge=ve.installMethodArgcCheck){if(ke instanceof Be.StructType?!(Ze instanceof Function)&&!T.isPtr(Ze)&&S("Usage errror: expecting a Function or WASM pointer to one."):S("Usage error: target object is-not-a StructType."),arguments.length===1)return(ee,ce)=>ve(ke,ee,ce,Ge);ve.argcProxy||(ve.argcProxy=function(ee,ce,Ee,st){return function(...ae){return Ee.length!==arguments.length&&S("Argument mismatch for",ee.structInfo.name+"::"+ce+": Native signature is:",st),Ee.apply(this,ae)}},ve.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((ee,ce)=>{if(typeof ee=="number")try{T.uninstallFunction(ee)}catch{}}),delete this.ondispose.__removeFuncList)});const je=ke.memberSignature(Te);je.length<2&&S("Member",Te,"does not have a function pointer signature:",je);const Qe=ke.memberKey(Te),St=Ge&&!T.isPtr(Ze)?ve.argcProxy(ke,Qe,Ze,je):Ze;if(T.isPtr(St))St&&!T.functionEntry(St)&&S("Pointer",St,"is not a WASM function table entry."),ke[Qe]=St;else{const ee=T.installFunction(St,ke.memberSignature(Te,!0));ke[Qe]=ee,(!ke.ondispose||!ke.ondispose.__removeFuncList)&&(ke.addOnDispose("ondispose.__removeFuncList handler",ve.removeFuncList),ke.ondispose.__removeFuncList=[]),ke.ondispose.__removeFuncList.push(Qe,ee)}return(ee,ce)=>ve(ke,ee,ce,Ge)};Oe.installMethodArgcCheck=!1;const et=function(ve,ke,Te=Oe.installMethodArgcCheck){const Ze=new Map;for(const Ge of Object.keys(ke)){const je=ke[Ge],Qe=Ze.get(je);if(Qe){const St=ve.memberKey(Ge);ve[St]=ve[ve.memberKey(Qe)]}else Oe(ve,Ge,je,Te),Ze.set(je,Ge)}return ve};Be.StructType.prototype.installMethod=function(ke,Te,Ze=Oe.installMethodArgcCheck){return arguments.length<3&&ke&&typeof ke=="object"?et(this,...arguments):Oe(this,...arguments)},Be.StructType.prototype.installMethods=function(ve,ke=Oe.installMethodArgcCheck){return et(this,ve,ke)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){y.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ae)=>{throw new y.SQLite3Error(...ae)},I=y.capi,T=y.wasm,B=y.util,fe=new WeakMap,me=new WeakMap,Ke=(ae,pe,Q)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:Q},tt=function(ae,pe){return pe&&(ae instanceof Oe&&(ae=ae.pointer),S(pe,"sqlite3 result code",pe+":",ae?I.sqlite3_errmsg(ae):I.sqlite3_errstr(pe))),arguments[0]},at=T.installFunction("i(ippp)",function(ae,pe,Q,re){I.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",T.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>S("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const Q=ae.normalizeArgs(...pe);let re=Q.filename,se=Q.vfs,Le=Q.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||se&&typeof se!="string"&&typeof se!="number")&&(y.config.error("Invalid DB ctor args",Q,arguments),S("Invalid arguments for DB constructor."));let it=typeof re=="number"?T.cstrToJs(re):re;const Ot=ae._name2vfs[it];Ot&&(se=Ot.vfs,re=it=Ot.filename(it));let Wt,Yt=0;Le.indexOf("c")>=0&&(Yt|=I.SQLITE_OPEN_CREATE|I.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(Yt|=I.SQLITE_OPEN_READWRITE),Yt===0&&(Yt|=I.SQLITE_OPEN_READONLY),Yt|=I.SQLITE_OPEN_EXRESCODE;const lt=T.pstack.pointer;try{const _e=T.pstack.allocPtr();let Pe=I.sqlite3_open_v2(re,_e,Yt,se||0);Wt=T.peekPtr(_e),tt(Wt,Pe),I.sqlite3_extended_result_codes(Wt,1),Le.indexOf("t")>=0&&I.sqlite3_trace_v2(Wt,I.SQLITE_TRACE_STMT,at,Wt)}catch(_e){throw Wt&&I.sqlite3_close_v2(Wt),_e}finally{T.pstack.restore(lt)}this.filename=it,fe.set(this,Wt),me.set(this,Object.create(null));try{const _e=I.sqlite3_js_db_vfs(Wt)||S("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,y):tt(Wt,I.sqlite3_exec(Wt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||S("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",Q=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=Q),re};const Oe=function(...ae){Be.apply(this,ae)};Oe.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,T.bigIntEnabled&&(et.bigint=et.number);const ve=function(){et!==arguments[2]&&S(I.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=I.sqlite3_bind_parameter_count(this.pointer)},ke=function(ae){return ae.pointer||S("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&S("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const Q=Object.create(null);switch(Q.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||B.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?Q.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(Q.opt=pe[0],Q.sql=Q.opt.sql);break;case 2:Q.sql=pe[0],Q.opt=pe[1];break;default:S("Invalid argument count for exec().")}Q.sql=B.flexibleString(Q.sql),typeof Q.sql!="string"&&S("Missing SQL argument or unsupported SQL value type.");const re=Q.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),Q.returnVal=()=>re.saveSql;break;case void 0:case"this":Q.returnVal=()=>ae;break;default:S("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":Q.cbArg=(se,Le)=>{Le.columnNames||(Le.columnNames=se.getColumnNames([]));const it=se.get([]),Ot=Object.create(null);for(const Wt in Le.columnNames)Ot[Le.columnNames[Wt]]=it[Wt];return Ot};break;case"array":Q.cbArg=se=>se.get([]);break;case"stmt":Array.isArray(re.resultRows)&&S("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),Q.cbArg=se=>se;break;default:if(B.isInt32(re.rowMode)){Q.cbArg=se=>se.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const se=re.rowMode.substr(1);Q.cbArg=Le=>{const it=Le.get(Object.create(null))[se];return it===void 0?S(I.SQLITE_NOTFOUND,"exec(): unknown result column:",se):it};break}S("Invalid rowMode:",re.rowMode)}return Q},Ge=(ae,pe,Q,...re)=>{const se=ae.prepare(pe);try{const Le=se.bind(Q).step()?se.get(...re):void 0;return se.reset(),Le}finally{se.finalize()}},je=(ae,pe,Q,re)=>ae.exec({sql:pe,bind:Q,rowMode:re,returnValue:"resultRows"});Oe.checkRc=(ae,pe)=>tt(ae,pe),Oe.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return ke(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,Q)=>{if(Q&&Q.pointer)try{Q.finalize()}catch{}}),fe.delete(this),me.delete(this),I.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const Q=ke(this).pointer;return ae?pe?I.sqlite3_total_changes64(Q):I.sqlite3_total_changes(Q):pe?I.sqlite3_changes64(Q):I.sqlite3_changes(Q)},dbFilename:function(ae="main"){return I.sqlite3_db_filename(ke(this).pointer,ae)},dbName:function(ae=0){return I.sqlite3_db_name(ke(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const Q=I.sqlite3_js_db_vfs(ke(this).pointer,ae);if(Q){const re=new I.sqlite3_vfs(Q);try{pe=T.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){ke(this);const pe=T.pstack.pointer;let Q,re;try{Q=T.pstack.alloc(8),Oe.checkRc(this,I.sqlite3_prepare_v2(this.pointer,ae,-1,Q,null)),re=T.peekPtr(Q)}finally{T.pstack.restore(pe)}re||S("Cannot prepare empty SQL.");const se=new ve(this,re,et);return me.get(this)[re]=se,se},exec:function(){ke(this);const ae=Ze(this,arguments);if(!ae.sql)return S("exec() requires an SQL string.");const pe=ae.opt,Q=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let se,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const Ot=T.scopedAllocPush(),Wt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const Yt=B.isSQLableTypedArray(ae.sql);let lt=Yt?ae.sql.byteLength:T.jstrlen(ae.sql);const _e=T.scopedAlloc(2*T.ptrSizeof+(lt+1)),Pe=_e+T.ptrSizeof;let ot=Pe+T.ptrSizeof;const pt=ot+lt;for(Yt?T.heap8().set(ae.sql,ot):T.jstrcpy(ae.sql,T.heap8(),ot,lt,!1),T.poke(ot+lt,0);ot&&T.peek(ot,"i8");){T.pokePtr([_e,Pe],0),Oe.checkRc(this,I.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Lt=T.peekPtr(_e);if(ot=T.peekPtr(Pe),lt=pt-ot,!!Lt){if(Wt&&Wt.push(I.sqlite3_sql(Lt).trim()),se=new ve(this,Lt,et),Le&&se.parameterCount&&(se.bind(Le),Le=null),it&&se.columnCount){let Xt=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const qe=Object.create(null);for(;se.step();se._lockedByExec=!1){Xt++===0&&se.getColumnNames(qe.columnNames=pe.columnNames||[]),se._lockedByExec=!0;const nt=ae.cbArg(se,qe);if(re&&re.push(nt),Q&&Q.call(pe,nt,se)===!1)break}se._lockedByExec=!1}Xt===0&&se.getColumnNames(pe.columnNames)}else se.step();se.reset().finalize(),se=null}}}finally{T.scopedAllocPop(Ot),se&&(delete se._lockedByExec,se.finalize())}return ae.returnVal()},createFunction:function(pe,Q,re){const se=qe=>qe instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,Q=re.xFunc||0;break;case 2:se(Q)||(re=Q,Q=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&S("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const Ot=re.xValue||0,Wt=re.xInverse||0;let Yt;se(Q)?(Yt=!1,(se(Le)||se(it))&&S("Ambiguous arguments: scalar or aggregate?"),Le=it=null):se(Le)?(se(it)||S("Missing xFinal() callback for aggregate or window UDF."),Q=null):se(it)?S("Missing xStep() callback for aggregate or window UDF."):S("Missing function-type properties."),Yt===!1?(se(Ot)||se(Wt))&&S("xValue and xInverse are not permitted for non-window UDFs."):se(Ot)?(se(Wt)||S("xInverse must be provided if xValue is."),Yt=!0):se(Wt)&&S("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!B.isInt32(lt))&&S("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!se(_e)&&S("xDestroy property must be a function.");let Pe=0;Ke(re,"deterministic")&&(Pe|=I.SQLITE_DETERMINISTIC),Ke(re,"directOnly")&&(Pe|=I.SQLITE_DIRECTONLY),Ke(re,"innocuous")&&(Pe|=I.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=Q||Le,pt=Ke(re,"arity"),Lt=typeof pt=="number"?pt:ot.length?ot.length-1:0;let Xt;return Yt?Xt=I.sqlite3_create_window_function(this.pointer,pe,Lt,I.SQLITE_UTF8|Pe,lt||0,Le,it,Ot,Wt,_e):Xt=I.sqlite3_create_function_v2(this.pointer,pe,Lt,I.SQLITE_UTF8|Pe,lt||0,Q,Le,it,_e),Oe.checkRc(this,Xt),this},selectValue:function(ae,pe,Q){return Ge(this,ae,pe,0,Q)},selectValues:function(ae,pe,Q){const re=this.prepare(ae),se=[];try{for(re.bind(pe);re.step();)se.push(re.get(0,Q));re.reset()}finally{re.finalize()}return se},selectArray:function(ae,pe){return Ge(this,ae,pe,[])},selectObject:function(ae,pe){return Ge(this,ae,pe,{})},selectArrays:function(ae,pe){return je(this,ae,pe,"array")},selectObjects:function(ae,pe){return je(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&S(I.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),ke(this).exec(pe);try{const Q=ae(this);return this.exec("COMMIT"),Q}catch(Q){throw this.exec("ROLLBACK"),Q}},savepoint:function(ae){ke(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Qe=function(ae){return ae.pointer||S("Stmt has been closed."),ae},St=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(T.bigIntEnabled)return pe;default:return B.isBindableTypedArray(ae)?et.blob:void 0}},ee=function(ae){return St(ae)||S("Unsupported bind() argument type:",typeof ae)},ce=function(ae,pe){const Q=typeof pe=="number"?pe:I.sqlite3_bind_parameter_index(ae.pointer,pe);return Q===0||!B.isInt32(Q)?S("Invalid bind() parameter name: "+pe):(Q<1||Q>ae.parameterCount)&&S("Bind index",pe,"is out of range."),Q},Ee=function(ae,pe){return ae._lockedByExec&&S("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,Q,re,se){Ee(Qe(pe),"bind()"),ae._||(ae._tooBigInt=it=>S("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,Ot,Wt,Yt){const[lt,_e]=T.allocCString(Wt,!0);return(Yt?I.sqlite3_bind_blob:I.sqlite3_bind_text)(it.pointer,Ot,lt,_e,I.SQLITE_WASM_DEALLOC)}}),ee(se),Q=ce(pe,Q);let Le=0;switch(se==null?et.null:re){case et.null:Le=I.sqlite3_bind_null(pe.pointer,Q);break;case et.string:Le=ae._.string(pe,Q,se,!1);break;case et.number:{let it;B.isInt32(se)?it=I.sqlite3_bind_int:typeof se=="bigint"?B.bigIntFits64(se)?T.bigIntEnabled?it=I.sqlite3_bind_int64:B.bigIntFitsDouble(se)?(se=Number(se),it=I.sqlite3_bind_double):ae._tooBigInt(se):ae._tooBigInt(se):(se=Number(se),T.bigIntEnabled&&Number.isInteger(se)?it=I.sqlite3_bind_int64:it=I.sqlite3_bind_double),Le=it(pe.pointer,Q,se);break}case et.boolean:Le=I.sqlite3_bind_int(pe.pointer,Q,se?1:0);break;case et.blob:{if(typeof se=="string"){Le=ae._.string(pe,Q,se,!0);break}else se instanceof ArrayBuffer?se=new Uint8Array(se):B.isBindableTypedArray(se)||S("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=T.alloc(se.byteLength||1);T.heap8().set(se.byteLength?se:[0],it),Le=I.sqlite3_bind_blob(pe.pointer,Q,it,se.byteLength,I.SQLITE_WASM_DEALLOC);break}default:y.config.warn("Unsupported bind() argument type:",se),S("Unsupported bind() argument type: "+typeof se)}return Le&&Oe.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};ve.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=I.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Qe(this),"clearBindings()"),I.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=I.sqlite3_reset(Qe(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Qe(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:S("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||S("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&S("When binding an array, an index argument is not permitted."),pe.forEach((Q,re)=>st(this,re+1,ee(Q),Q)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!B.isBindableTypedArray(pe)?(arguments.length!==1&&S("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(Q=>st(this,Q,ee(pe[Q]),pe[Q])),this):st(this,ae,ee(pe),pe)))},bindAsBlob:function(ae,pe){Qe(this),arguments.length===1&&(pe=ae,ae=1);const Q=ee(pe);return et.string!==Q&&et.blob!==Q&&et.null!==Q&&S("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=I.sqlite3_step(Qe(this).pointer);switch(ae){case I.SQLITE_DONE:return this._mayGet=!1;case I.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,y.config.warn("sqlite3_step() rc=",ae,I.sqlite3_js_rc_str(ae),"SQL =",I.sqlite3_sql(this.pointer)),Oe.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Qe(this)._mayGet||S("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let Q=0;const re=this.columnCount;for(;Q<re;)ae[Q]=this.get(Q++);return ae}else if(ae&&typeof ae=="object"){let Q=0;const re=this.columnCount;for(;Q<re;)ae[I.sqlite3_column_name(this.pointer,Q)]=this.get(Q++);return ae}switch(Te(this,ae),pe===void 0?I.sqlite3_column_type(this.pointer,ae):pe){case I.SQLITE_NULL:return null;case I.SQLITE_INTEGER:if(T.bigIntEnabled){const Q=I.sqlite3_column_int64(this.pointer,ae);return Q>=Number.MIN_SAFE_INTEGER&&Q<=Number.MAX_SAFE_INTEGER?Number(Q).valueOf():Q}else{const Q=I.sqlite3_column_double(this.pointer,ae);return(Q>Number.MAX_SAFE_INTEGER||Q<Number.MIN_SAFE_INTEGER)&&S("Integer is out of range for JS integer range: "+Q),B.isInt32(Q)?Q|0:Q}case I.SQLITE_FLOAT:return I.sqlite3_column_double(this.pointer,ae);case I.SQLITE_TEXT:return I.sqlite3_column_text(this.pointer,ae);case I.SQLITE_BLOB:{const Q=I.sqlite3_column_bytes(this.pointer,ae),re=I.sqlite3_column_blob(this.pointer,ae),se=new Uint8Array(Q);return Q&&se.set(T.heap8u().slice(re,re+Q),0),Q&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(se.buffer),se}default:S("Don't know how to translate","type of result column #"+ae+".")}S("Not reached.")},getInt:function(ae){return this.get(ae,I.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,I.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,I.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,I.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,I.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return I.sqlite3_column_name(Te(Qe(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Qe(this),0);const pe=this.columnCount;for(let Q=0;Q<pe;++Q)ae.push(I.sqlite3_column_name(this.pointer,Q));return ae},getParamIndex:function(ae){return Qe(this).parameterCount?I.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Qe(this).parameterCount?I.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return I.sqlite3_stmt_busy(Qe(this))!==0},isReadOnly:function(){return I.sqlite3_stmt_readonly(Qe(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>S("The pointer property is read-only.")};Object.defineProperty(ve.prototype,"pointer",ae),Object.defineProperty(Oe.prototype,"pointer",ae)}if(Object.defineProperty(ve.prototype,"columnCount",{enumerable:!1,get:function(){return I.sqlite3_column_count(this.pointer)},set:()=>S("The columnCount property is read-only.")}),y.oo1={DB:Oe,Stmt:ve},B.isUIThread()){y.oo1.JsStorageDb=function(pe="session"){const Q=Be.normalizeArgs(...arguments);pe=Q.filename,pe!=="session"&&pe!=="local"&&S("JsStorageDb db name must be one of 'session' or 'local'."),Q.vfs="kvvfs",Be.call(this,Q)};const ae=y.oo1.JsStorageDb;ae.prototype=Object.create(Oe.prototype),ae.clearStorage=I.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(ke(this).filename)},ae.storageSize=I.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(ke(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util;y.initWorker1API=function(){const I=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||I("initWorker1API() must be run from a Worker thread.");const T=this.sqlite3||I("Missing this.sqlite3 object."),B=T.oo1.DB,fe=function(Be){let Oe=me.idMap.get(Be);return Oe||(Oe="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Oe),Oe)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Oe=new B(Be);return this.dbs[fe(Oe)]=Oe,this.dbList.indexOf(Oe)<0&&this.dbList.push(Oe),Oe},close:function(Be,Oe){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,ve=S.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const ke=this.dbList.indexOf(Be);ke>=0&&this.dbList.splice(ke,1),Oe&&et&&ve&&S.sqlite3__wasm_vfs_unlink(ve,et)}},post:function(Be,Oe){Oe&&Oe.length?(globalThis.postMessage(Be,Array.from(Oe)),Oe.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Oe=!0){return this.dbs[Be]||(Oe?I("Unknown (or closed) DB ID:",Be):void 0)}},Ke=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:I("DB is not opened.")},tt=function(Be,Oe=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Oe?Ke(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Oe=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&I("Throwing because of simulateError flag.");const ve=Object.create(null);Oe.vfs=et.vfs,Oe.filename=et.filename||"";const ke=me.open(Oe);return ve.filename=ke.filename,ve.persistent=!!T.capi.sqlite3_js_db_uses_vfs(ke.pointer,"opfs"),ve.dbId=fe(ke),ve.vfs=ke.dbVfsName(),ve},close:function(Be){const Oe=tt(Be,!1),et={filename:Oe&&Oe.filename};if(Oe){const ve=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Oe,ve)}return et},exec:function(Be){const Oe=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Oe.rowMode==="stmt"?I("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Oe.sql||I("'exec' requires input SQL.");const et=tt(Be);(Oe.callback||Array.isArray(Oe.resultRows))&&(et._blobXfer=me.xfer);const ve=Oe.callback;let ke=0;const Te=!!Oe.columnNames;typeof ve=="string"&&(Te||(Oe.columnNames=[]),Oe.callback=function(Ze,Ge){me.post({type:ve,columnNames:Oe.columnNames,rowNumber:++ke,row:Ze},me.xfer)});try{const Ze=Oe.countChanges?et.changes(!0,Oe.countChanges===64):void 0;et.exec(Oe),Ze!==void 0&&(Oe.changeCount=et.changes(!0,Oe.countChanges===64)-Ze),Oe.callback instanceof Function&&(Oe.callback=ve,me.post({type:ve,columnNames:Oe.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Oe.callback&&(Oe.callback=ve)}return Oe},"config-get":function(){const Be=Object.create(null),Oe=T.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Oe,et)&&(Be[et]=Oe[et])}),Be.version=T.version,Be.vfsList=T.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Oe=tt(Be),et={byteArray:T.capi.sqlite3_js_db_export(Oe.pointer),filename:Oe.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){I("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Oe,et=Be.dbId,ve=Be.type;const ke=performance.now();try{mt.hasOwnProperty(ve)&&mt[ve]instanceof Function?Oe=await mt[ve](Be):I("Unknown db worker message type:",Be.type)}catch(Te){ve="error",Oe={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(Oe.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=Oe.dbId||at()),me.post({type:ve,dbId:et,messageId:Be.messageId,workerReceivedTime:ke,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Oe},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:y})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.wasm,I=y.capi,T=y.util.toss3,B=Object.create(null);y.vfs=B,I.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof y.capi.sqlite3_vfs||T("Expecting a sqlite3_vfs-type argument.");const me=I.sqlite3_vfs_register(this,fe?1:0);return me&&T("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==I.sqlite3_vfs_find(this.$zName)&&T("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},B.installVfs=function(fe){let me=0;const Ke=["io","vfs"];for(const tt of Ke){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=S.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||T("Misuse: installVfs() options object requires at least","one of:",Ke),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){if(!y.wasm.exports.sqlite3_declare_vtab)return;const S=y.wasm,I=y.capi,T=y.util.toss3,B=Object.create(null);y.vtab=B;const fe=I.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;S.isPtr(mt)||y.SQLite3Error.toss("Invalid argument to",tt+"()");let Oe=this.get(mt);return Be&&this.delete(mt),Oe}.bind(new Map)},Ke=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Oe=mt();return S.pokePtr(Be,Oe.pointer),Oe},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Oe=mt(Be,!0);Oe&&Oe.dispose()}})};B.xVtab=Ke("xVtab",I.sqlite3_vtab),B.xCursor=Ke("xCursor",I.sqlite3_vtab_cursor),B.xIndexInfo=tt=>new I.sqlite3_index_info(tt),B.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Oe;return mt instanceof y.WasmAllocError?Oe=I.SQLITE_NOMEM:arguments.length>2?Oe=Be:mt instanceof y.SQLite3Error&&(Oe=mt.resultCode),Oe||I.SQLITE_ERROR},B.xError.errorReporter=console.error.bind(console),B.xRowid=(tt,at)=>S.poke(tt,at,"i64"),B.setupModule=function(tt){let at=!1;const mt=this instanceof I.sqlite3_module?this:tt.struct||(at=new I.sqlite3_module);try{const Be=tt.methods||T("Missing 'methods' object.");for(const Oe of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Oe[0],ve=Oe[1];Be[et]===!0?Be[et]=Be[ve]:Be[ve]===!0&&(Be[ve]=Be[et])}if(tt.catchExceptions){const Oe=function(ke,Te){return["xConnect","xCreate"].indexOf(ke)>=0?function(Ze,Ge,je,Qe,St,ee){try{return Te(...arguments)||0}catch(ce){return ce instanceof y.WasmAllocError||(S.dealloc(S.peekPtr(ee)),S.pokePtr(ee,S.allocCString(ce.message))),B.xError(ke,ce)}}:function(...Ze){try{return Te(...Ze)||0}catch(Ge){return B.xError(ke,Ge)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ve=Object.create(null);for(const ke of et){const Te=Be[ke];if(Te instanceof Function)ke==="xConnect"&&Be.xCreate===Te?ve[ke]=Be.xCreate:ke==="xCreate"&&Be.xConnect===Te?ve[ke]=Be.xConnect:ve[ke]=Oe(ke,Te);else continue}mt.installMethods(ve,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Oe;typeof tt.iVersion=="number"?Oe=tt.iVersion:mt.$xShadowName?Oe=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Oe=2:Oe=1,mt.$iVersion=Oe}}catch(Be){throw at&&at.dispose(),Be}return mt},I.sqlite3_module.prototype.setupModule=function(tt){return B.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=function I(T){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!T||typeof T!="object")&&(T=Object.create(null));const B=new URL(globalThis.location.href).searchParams;return B.has("opfs-disable")?Promise.resolve(y):(T.verbose===void 0&&(T.verbose=B.has("opfs-verbose")?+B.get("opfs-verbose")||2:1),T.sanityChecks===void 0&&(T.sanityChecks=B.has("opfs-sanity-check")),T.proxyUri===void 0&&(T.proxyUri=I.defaultProxyUri),typeof T.proxyUri=="function"&&(T.proxyUri=T.proxyUri()),new Promise(function(me,Ke){const tt=[y.config.error,y.config.warn,y.config.log],at=(qe,...nt)=>{T.verbose>qe&&tt[qe]("OPFS syncer:",...nt)},mt=(...qe)=>at(2,...qe),Be=(...qe)=>at(1,...qe),Oe=(...qe)=>at(0,...qe),et=y.util.toss,ve=y.capi,ke=y.util,Te=y.wasm,Ze=ve.sqlite3_vfs,Ge=ve.sqlite3_file,je=ve.sqlite3_io_methods,Qe=Object.create(null),St=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Qe.metrics={dump:function(){let qe,nt=0,dt=0,It=0;for(qe in se.opIds){const xt=Le[qe];nt+=xt.count,dt+=xt.time,It+=xt.wait,xt.avgTime=xt.count&&xt.time?xt.time/xt.count:0,xt.avgWait=xt.count&&xt.wait?xt.wait/xt.count:0}y.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+It+" ms of waiting on the async side)"),y.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let qe;const nt=It=>It.count=It.time=It.wait=0;for(qe in se.opIds)nt(Le[qe]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const ee=new je,ce=new Ze().addOnDispose(()=>ee.dispose());let Ee;const st=qe=>(Ee=!0,ce.dispose(),Ke(qe)),ae=()=>(Ee=!1,me(y)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(qe){Oe("Error initializing OPFS asyncer:",qe),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const Q=ve.sqlite3_vfs_find(null),re=Q?new Ze(Q):null;ee.$iVersion=1,ce.$iVersion=2,ce.$szOsFile=ve.sqlite3_file.structInfo.sizeof,ce.$mxPathname=1024,ce.$zName=Te.allocCString("opfs"),ce.$xDlOpen=ce.$xDlError=ce.$xDlSym=ce.$xDlClose=null,ce.addOnDispose("$zName",ce.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const se=Object.create(null);se.verbose=T.verbose,se.littleEndian=(()=>{const qe=new ArrayBuffer(2);return new DataView(qe).setInt16(0,256,!0),new Int16Array(qe)[0]===256})(),se.asyncIdleWaitTime=150,se.asyncS11nExceptions=1,se.fileBufferSize=1024*64,se.sabS11nOffset=se.fileBufferSize,se.sabS11nSize=ce.$mxPathname*2,se.sabIO=new SharedArrayBuffer(se.fileBufferSize+se.sabS11nSize),se.opIds=Object.create(null);const Le=Object.create(null);{let qe=0;se.opIds.whichOp=qe++,se.opIds.rc=qe++,se.opIds.xAccess=qe++,se.opIds.xClose=qe++,se.opIds.xDelete=qe++,se.opIds.xDeleteNoWait=qe++,se.opIds.xFileSize=qe++,se.opIds.xLock=qe++,se.opIds.xOpen=qe++,se.opIds.xRead=qe++,se.opIds.xSleep=qe++,se.opIds.xSync=qe++,se.opIds.xTruncate=qe++,se.opIds.xUnlock=qe++,se.opIds.xWrite=qe++,se.opIds.mkdir=qe++,se.opIds["opfs-async-metrics"]=qe++,se.opIds["opfs-async-shutdown"]=qe++,se.opIds.retry=qe++,se.sabOP=new SharedArrayBuffer(qe*4),Qe.metrics.reset()}se.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(qe=>{(se.sq3Codes[qe]=ve[qe])===void 0&&et("Maintenance required: not found:",qe)}),se.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(qe,...nt)=>{const dt=se.opIds[qe]||et("Invalid op ID:",qe);se.s11n.serialize(...nt),Atomics.store(se.sabOPView,se.opIds.rc,-1),Atomics.store(se.sabOPView,se.opIds.whichOp,dt),Atomics.notify(se.sabOPView,se.opIds.whichOp);const It=performance.now();for(;Atomics.wait(se.sabOPView,se.opIds.rc,-1)!=="not-equal";);const xt=Atomics.load(se.sabOPView,se.opIds.rc);if(Le[qe].wait+=performance.now()-It,xt&&se.asyncS11nExceptions){const zt=se.s11n.deserialize();zt&&Oe(qe+"() async error:",...zt)}return xt};Qe.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const Ot=()=>{if(se.s11n)return se.s11n;const qe=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),It=new DataView(se.sabIO,se.sabS11nOffset,se.sabS11nSize);se.s11n=Object.create(null);const xt=Object.create(null);xt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},xt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},xt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},xt.string={id:4};const zt=qt=>xt[typeof qt]||et("Maintenance required: this value type cannot be serialized.",qt),vn=qt=>{switch(qt){case xt.number.id:return xt.number;case xt.bigint.id:return xt.bigint;case xt.boolean.id:return xt.boolean;case xt.string.id:return xt.string;default:et("Invalid type ID:",qt)}};return se.s11n.deserialize=function(qt=!1){++Le.s11n.deserialize.count;const Sr=performance.now(),We=dt[0],bt=We?[]:null;if(We){const wt=[];let Nt=1,wn,Hn,zn;for(wn=0;wn<We;++wn,++Nt)wt.push(vn(dt[Nt]));for(wn=0;wn<We;++wn){const Un=wt[wn];Un.getter?(zn=It[Un.getter](Nt,se.littleEndian),Nt+=Un.size):(Hn=It.getInt32(Nt,se.littleEndian),Nt+=4,zn=qe.decode(dt.slice(Nt,Nt+Hn)),Nt+=Hn),bt.push(zn)}}return qt&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Sr,bt},se.s11n.serialize=function(...qt){const Sr=performance.now();if(++Le.s11n.serialize.count,qt.length){const We=[];let bt=0,wt=1;for(dt[0]=qt.length&255;bt<qt.length;++bt,++wt)We.push(zt(qt[bt])),dt[wt]=We[bt].id;for(bt=0;bt<qt.length;++bt){const Nt=We[bt];if(Nt.setter)It[Nt.setter](wt,qt[bt],se.littleEndian),wt+=Nt.size;else{const wn=nt.encode(qt[bt]);It.setInt32(wt,wn.byteLength,se.littleEndian),wt+=4,dt.set(wn,wt),wt+=wn.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Sr},se.s11n},Wt=function qe(nt=16){qe._chars||(qe._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",qe._n=qe._chars.length);const dt=[];let It=0;for(;It<nt;++It){const xt=Math.random()*(qe._n*64)%qe._n|0;dt[It]=qe._chars[xt]}return dt.join("")},Yt=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=qe=>{lt.start=performance.now(),lt.op=qe,++Le[qe].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(qe,nt){return Te.poke(nt,0,"i32"),0},xClose:function(qe){_e("xClose");let nt=0;const dt=Yt[qe];return dt&&(delete Yt[qe],nt=it("xClose",qe),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(qe){return ve.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(qe,nt,dt){return ve.SQLITE_NOTFOUND},xFileSize:function(qe,nt){_e("xFileSize");let dt=it("xFileSize",qe);if(dt==0)try{const It=se.s11n.deserialize()[0];Te.poke(nt,It,"i64")}catch(It){Oe("Unexpected error reading xFileSize() result:",It),dt=se.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(qe,nt){_e("xLock");const dt=Yt[qe];let It=0;return dt.lockType?dt.lockType=nt:(It=it("xLock",qe,nt),It===0&&(dt.lockType=nt)),Pe(),It},xRead:function(qe,nt,dt,It){_e("xRead");const xt=Yt[qe];let zt;try{zt=it("xRead",qe,dt,Number(It)),(zt===0||ve.SQLITE_IOERR_SHORT_READ===zt)&&Te.heap8u().set(xt.sabView.subarray(0,dt),nt)}catch(vn){Oe("xRead(",arguments,") failed:",vn,xt),zt=ve.SQLITE_IOERR_READ}return Pe(),zt},xSync:function(qe,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",qe,nt);return Pe(),dt},xTruncate:function(qe,nt){_e("xTruncate");const dt=it("xTruncate",qe,Number(nt));return Pe(),dt},xUnlock:function(qe,nt){_e("xUnlock");const dt=Yt[qe];let It=0;return ve.SQLITE_LOCK_NONE===nt&&dt.lockType&&(It=it("xUnlock",qe,nt)),It===0&&(dt.lockType=nt),Pe(),It},xWrite:function(qe,nt,dt,It){_e("xWrite");const xt=Yt[qe];let zt;try{xt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),zt=it("xWrite",qe,dt,Number(It))}catch(vn){Oe("xWrite(",arguments,") failed:",vn,xt),zt=ve.SQLITE_IOERR_WRITE}return Pe(),zt}},pt={xAccess:function(qe,nt,dt,It){_e("xAccess");const xt=it("xAccess",Te.cstrToJs(nt));return Te.poke(It,xt?0:1,"i32"),Pe(),0},xCurrentTime:function(qe,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(qe,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(qe,nt,dt){_e("xDelete");const It=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),It},xFullPathname:function(qe,nt,dt,It){return Te.cstrncpy(It,nt,dt)<dt?0:ve.SQLITE_CANTOPEN},xGetLastError:function(qe,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,It,xt,zt){_e("xOpen");let vn=0;dt===0?dt=Wt():Te.isPtr(dt)&&(ve.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(vn|=se.opfsFlags.OPFS_UNLOCK_ASAP),ve.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(vn|=se.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const qt=Object.create(null);qt.fid=It,qt.filename=dt,qt.sab=new SharedArrayBuffer(se.fileBufferSize),qt.flags=xt,qt.readOnly=!(y.SQLITE_OPEN_CREATE&xt)&&!!(xt&ve.SQLITE_OPEN_READONLY);const Sr=it("xOpen",It,dt,xt,vn);return Sr||(qt.readOnly&&Te.poke(zt,ve.SQLITE_OPEN_READONLY,"i32"),Yt[It]=qt,qt.sabView=se.sabFileBufView,qt.sq3File=new Ge(It),qt.sq3File.$pMethods=ee.pointer,qt.lockType=ve.SQLITE_LOCK_NONE),Pe(),Sr}};re&&(ce.$xRandomness=re.$xRandomness,ce.$xSleep=re.$xSleep),ce.$xRandomness||(pt.xRandomness=function(qe,nt,dt){const It=Te.heap8u();let xt=0;for(;xt<nt;++xt)It[dt+xt]=Math.random()*255e3&255;return xt}),ce.$xSleep||(pt.xSleep=function(qe,nt){return Atomics.wait(se.sabOPView,se.opIds.xSleep,0,nt),0}),Qe.getResolvedPath=function(qe,nt){const dt=new URL(qe,"file://irrelevant").pathname;return nt?dt.split("/").filter(It=>!!It):dt},Qe.getDirForFilename=async function(nt,dt=!1){const It=Qe.getResolvedPath(nt,!0),xt=It.pop();let zt=Qe.rootDirectory;for(const vn of It)vn&&(zt=await zt.getDirectoryHandle(vn,{create:!!dt}));return[zt,xt]},Qe.mkdir=async function(qe){try{return await Qe.getDirForFilename(qe+"/filepart",!0),!0}catch{return!1}},Qe.entryExists=async function(qe){try{const[nt,dt]=await Qe.getDirForFilename(qe);return await nt.getFileHandle(dt),!0}catch{return!1}},Qe.randomFilename=Wt,Qe.treeList=async function(){const qe=async function dt(It,xt){xt.name=It.name,xt.dirs=[],xt.files=[];for await(const zt of It.values())if(zt.kind==="directory"){const vn=Object.create(null);xt.dirs.push(vn),await dt(zt,vn)}else xt.files.push(zt.name)},nt=Object.create(null);return await qe(Qe.rootDirectory,nt),nt},Qe.rmfr=async function(){const qe=Qe.rootDirectory,nt={recurse:!0};for await(const dt of qe.values())qe.removeEntry(dt.name,nt)},Qe.unlink=async function(qe,nt=!1,dt=!1){try{const[It,xt]=await Qe.getDirForFilename(qe,!1);return await It.removeEntry(xt,{recursive:nt}),!0}catch(It){if(dt)throw new Error("unlink(",arguments[0],") failed: "+It.message,{cause:It});return!1}},Qe.traverse=async function(qe){const nt={recursive:!0,directory:Qe.rootDirectory};typeof qe=="function"&&(qe={callback:qe}),qe=Object.assign(nt,qe||{}),async function It(xt,zt){for await(const vn of xt.values()){if(qe.callback(vn,xt,zt)===!1)return!1;if(qe.recursive&&vn.kind==="directory"&&await It(vn,zt+1)===!1)break}}(qe.directory,0)};const Lt=async function(qe,nt){const[dt,It]=await Qe.getDirForFilename(qe,!0);let zt=await (await dt.getFileHandle(It,{create:!0})).createSyncAccessHandle(),vn=0,qt,Sr=!1;try{for(zt.truncate(0);(qt=await nt())!==void 0;)qt instanceof ArrayBuffer&&(qt=new Uint8Array(qt)),vn===0&&qt.byteLength>=15&&(ke.affirmDbHeader(qt),Sr=!0),zt.write(qt,{at:vn}),vn+=qt.byteLength;if((vn<512||vn%512!==0)&&et("Input size",vn,"is not correct for an SQLite database."),!Sr){const We=new Uint8Array(20);zt.read(We,{at:0}),ke.affirmDbHeader(We)}return zt.write(new Uint8Array([1,1]),{at:18}),vn}catch(We){throw await zt.close(),zt=void 0,await dt.removeEntry(It).catch(()=>{}),We}finally{zt&&await zt.close()}};if(Qe.importDb=async function(qe,nt){if(nt instanceof Function)return Lt(qe,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),ke.affirmIsDb(nt);const dt=nt.byteLength,[It,xt]=await Qe.getDirForFilename(qe,!0);let zt,vn=0;try{return zt=await (await It.getFileHandle(xt,{create:!0})).createSyncAccessHandle(),zt.truncate(0),vn=zt.write(nt,{at:0}),vn!=dt&&et("Expected to write "+dt+" bytes but wrote "+vn+"."),zt.write(new Uint8Array([1,1]),{at:18}),vn}catch(qt){throw zt&&(await zt.close(),zt=void 0),await It.removeEntry(xt).catch(()=>{}),qt}finally{zt&&await zt.close()}},y.oo1){const qe=function(...nt){const dt=y.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ce.$zName,y.oo1.DB.dbCtorHelper.call(this,dt)};qe.prototype=Object.create(y.oo1.DB.prototype),y.oo1.OpfsDb=qe,qe.importDb=Qe.importDb,y.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ce.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const Xt=function(){const qe=Te.scopedAllocPush(),nt=new Ge;try{const dt=nt.pointer,It=ve.SQLITE_OPEN_CREATE|ve.SQLITE_OPEN_READWRITE|ve.SQLITE_OPEN_MAIN_DB,xt=Te.scopedAlloc(8),zt="/sanity/check/file"+Wt(8),vn=Te.scopedAllocCString(zt);let qt;if(se.s11n.serialize("This is \xe4 string."),qt=se.s11n.deserialize(),mt("deserialize() says:",qt),qt[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ce.pointer,vn,0,xt),qt=Te.peek(xt,"i32"),mt("xAccess(",zt,") exists ?=",qt),qt=pt.xOpen(ce.pointer,vn,dt,It,xt),mt("open rc =",qt,"state.sabOPView[xOpen] =",se.sabOPView[se.opIds.xOpen]),qt!==0){Oe("open failed with code",qt);return}pt.xAccess(ce.pointer,vn,0,xt),qt=Te.peek(xt,"i32"),qt||et("xAccess() failed to detect file."),qt=ot.xSync(nt.pointer,0),qt&&et("sync failed w/ rc",qt),qt=ot.xTruncate(nt.pointer,1024),qt&&et("truncate failed w/ rc",qt),Te.poke(xt,0,"i64"),qt=ot.xFileSize(nt.pointer,xt),qt&&et("xFileSize failed w/ rc",qt),mt("xFileSize says:",Te.peek(xt,"i64")),qt=ot.xWrite(nt.pointer,vn,10,1),qt&&et("xWrite() failed!");const Sr=Te.scopedAlloc(16);qt=ot.xRead(nt.pointer,Sr,6,2),Te.poke(Sr+6,0);let We=Te.cstrToJs(Sr);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ce.pointer,2e3),mt("waking up from xSleep()")),qt=ot.xClose(dt),mt("xClose rc =",qt,"sabOPView =",se.sabOPView),mt("Deleting file:",zt),pt.xDelete(ce.pointer,vn,4660),pt.xAccess(ce.pointer,vn,0,xt),qt=Te.peek(xt,"i32"),qt&&et("Expecting 0 from xAccess(",zt,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(qe)}};pe.onmessage=function({data:qe}){switch(qe.type){case"opfs-unavailable":st(new Error(qe.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:se});break;case"opfs-async-inited":{if(Ee===!0)break;try{y.vfs.installVfs({io:{struct:ee,methods:ot},vfs:{struct:ce,methods:pt}}),se.sabOPView=new Int32Array(se.sabOP),se.sabFileBufView=new Uint8Array(se.sabIO,0,se.fileBufferSize),se.sabS11nView=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),Ot(),T.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),Xt()),St()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,y.opfs=Qe,Qe.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ce),ae()}).catch(st):ae()}catch(nt){Oe(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(qe);Oe(nt),st(new Error(nt));break}}}}))};S.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async I=>{try{let T=S.defaultProxyUri;return I.scriptInfo.sqlite3Dir&&(S.defaultProxyUri=I.scriptInfo.sqlite3Dir+T),S().catch(B=>{I.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",B.message)})}catch(T){return I.config.error("installOpfsVfs() exception:",T),Promise.reject(T)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util.toss,I=y.util.toss3,T=Object.create(null),B=y.capi,fe=y.util,me=y.wasm,Ke=4096,tt=512,at=4,mt=8,Be=tt+at,Oe=tt,et=Be,ve=Ke,ke=B.SQLITE_OPEN_MAIN_DB|B.SQLITE_OPEN_MAIN_JOURNAL|B.SQLITE_OPEN_SUPER_JOURNAL|B.SQLITE_OPEN_WAL,Te=".opaque",Ze=()=>Math.random().toString(36).slice(2),Ge=new TextDecoder,je=new TextEncoder,Qe=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),St=[y.config.error,y.config.warn,y.config.log];y.config.log;const ee=y.config.warn;y.config.error;const ce=new Map,Ee=lt=>ce.get(lt),st=(lt,_e)=>{_e?ce.set(lt,_e):ce.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),Q=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&B.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,B.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return B.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return B.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-ve;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Lt=pt.getOFileForS3File(lt);pt.log(`xRead ${Lt.path} ${Pe} @ ${ot}`);try{const Xt=Lt.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Xt<Pe?(me.heap8u().fill(0,_e+Xt,_e+Pe),B.SQLITE_IOERR_SHORT_READ):0}catch(Xt){return pt.storeErr(Xt,B.SQLITE_IOERR)}},xSectorSize:function(lt){return Ke},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,B.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(ve+Number(_e)),0}catch(pt){return Pe.storeErr(pt,B.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Lt=pt.getOFileForS3File(lt);pt.log(`xWrite ${Lt.path} ${Pe} ${ot}`);try{const Xt=Lt.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Pe===Xt?0:S("Unknown write() failure.")}catch(Xt){return pt.storeErr(Xt,B.SQLITE_IOERR)}}},se=new B.sqlite3_io_methods;se.$iVersion=1,y.vfs.installVfs({io:{struct:se,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Lt=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Lt)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),B.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:B.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Lt=me.scopedAllocPush();try{const[Xt,qe]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,Xt,_e),qe>_e&&me.poke8(Pe+_e-1,0)}catch{return B.SQLITE_NOMEM}finally{me.scopedAllocPop(Lt)}}return pt?pt.sqlite3Rc||B.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Lt){const Xt=Ee(_e);try{Xt.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const qe=Pe&&me.peek8(Pe)?Xt.getPath(Pe):Ze();let nt=Xt.getSAHForPath(qe);!nt&&pt&B.SQLITE_OPEN_CREATE&&(Xt.getFileCount()<Xt.getCapacity()?(nt=Xt.nextAvailableSAH(),Xt.setAssociatedPath(nt,qe,pt)):S("SAH pool is full. Cannot create file",qe)),nt||S("file not found:",qe);const dt={path:qe,flags:pt,sah:nt};Xt.mapS3FileToOFile(ot,dt),dt.lockType=B.SQLITE_LOCK_NONE;const It=new B.sqlite3_file(ot);return It.$pMethods=se.pointer,It.dispose(),me.poke32(Lt,pt),0}catch(qe){return Xt.storeErr(qe),B.SQLITE_CANTOPEN}}},it=function(lt){y.capi.sqlite3_vfs_find(lt)&&I("VFS name is already registered:",lt);const _e=new B.sqlite3_vfs,Pe=B.sqlite3_vfs_find(null),ot=Pe?new B.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=B.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Lt,Xt){const qe=me.heap8u();let nt=0;for(;nt<Lt;++nt)qe[Xt+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Lt)=>0),y.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class Ot{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#c;#l;#u;constructor(_e=Object.create(null)){this.#u=_e.verbosity??Qe.verbosity,this.vfsName=_e.name||Qe.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#c=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Qe.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Qe.initialCapacity)})}#d(_e,...Pe){this.#u>_e&&St[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Lt=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Lt,ot),this.setAssociatedPath(Lt,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Lt=await pt.createSyncAccessHandle();if(this.#r.set(Lt,ot),_e)Lt.truncate(ve),this.setAssociatedPath(Lt,"",0);else{const Xt=this.getAssociatedPath(Lt);Xt?this.#i.set(Xt,Lt):this.#s.add(Lt)}}catch(Lt){throw this.storeErr(Lt),this.releaseAccessHandles(),Lt}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#c.getUint32(Oe);if(this.#a[0]&&(Pe&B.SQLITE_OPEN_DELETEONCLOSE||!(Pe&ke)))return ee(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Lt,Xt)=>Lt===pt[Xt])){const Lt=this.#a.findIndex(Xt=>Xt===0);return Lt===0&&_e.truncate(ve),Lt?Ge.decode(this.#a.subarray(0,Lt)):""}else return ee("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=je.encodeInto(Pe,this.#a);tt<=pt.written+1&&S("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#c.setUint32(Oe,ot);const Lt=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Lt,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(ve),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||B.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),Q(_e,this)):(this.#o.delete(_e),Q(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;B.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete T[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){y.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||S("File not found:",_e),ot=Pe.getSize()-ve,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Lt=Pe.read(pt,{at:ve});Lt!=ot&&S("Expected to read "+ot+" bytes but read "+Lt+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to.");ot.truncate(0);let pt=0,Lt,Xt=!1;try{for(;(Lt=await Pe())!==void 0;)Lt instanceof ArrayBuffer&&(Lt=new Uint8Array(Lt)),pt===0&&Lt.byteLength>=15&&(fe.affirmDbHeader(Lt),Xt=!0),ot.write(Lt,{at:ve+pt}),pt+=Lt.byteLength;if((pt<512||pt%512!==0)&&S("Input size",pt,"is not correct for an SQLite database."),!Xt){const qe=new Uint8Array(20);ot.read(qe,{at:0}),fe.affirmDbHeader(qe)}ot.write(new Uint8Array([1,1]),{at:ve+18})}catch(qe){throw this.setAssociatedPath(ot,"",0),qe}return this.setAssociatedPath(ot,_e,B.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&S("Byte array size is invalid for an SQLite db.");const Lt="SQLite format 3";for(let qe=0;qe<Lt.length;++qe)Lt.charCodeAt(qe)!==Pe[qe]&&S("Input does not contain an SQLite database header.");const Xt=ot.write(Pe,{at:ve});return Xt!=pt?(this.setAssociatedPath(ot,"",0),S("Expected to write "+pt+" bytes but wrote "+Xt+".")):(ot.write(new Uint8Array([1,1]),{at:ve+18}),this.setAssociatedPath(ot,_e,B.SQLITE_OPEN_MAIN_DB)),Xt}}class Wt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const Yt=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&S("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};y.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Qe,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(T[_e])try{return await T[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete T[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?T[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):T[_e]=Yt().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new Ot(lt);return Pe.isReady.then(async()=>{const ot=new Wt(Pe);if(y.oo1){const pt=y.oo1,Lt=Pe.getVfs(),Xt=function(...qe){const nt=pt.DB.dbCtorHelper.normalizeArgs(...qe);nt.vfs=Lt.$zName,pt.DB.dbCtorHelper.call(this,nt)};Xt.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=Xt}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>T[_e]=Promise.reject(Pe))}}),typeof g<"u"){const y=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=y;let S;try{S=globalThis.sqlite3ApiBootstrap()}catch(I){throw console.error("sqlite3ApiBootstrap() error:",I),I}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=S}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const vQ=function(){const t=gN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();gN=vQ;const xQ=gN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let f,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let b=n[h.messageId];if(!b){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(b=n[h.type],b&&b.onrow){b.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":b.reject(h);return;case"open":f||(f=h.dbId);break;case"close":h.dbId===f&&(f=void 0);break}try{b.resolve(h)}catch(x){b.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=f),h.messageId=l(h),h.departureTime=performance.now();const b=Object.create(null);b.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",b.onrow=h.args.callback,h.args.callback=x,n[x]=b):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(E,k){b.resolve=E,b.reject=k,n[h.messageId]=b,s("Posting",h.type,"message to Worker dbId="+(f||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function PR(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function b0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function CD(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function FE(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const l=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(l);let f=0;return s.forEach(p=>{u.set(p,f),f+=p.length}),u}}else return n}class wQ{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:PR()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:PR()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,l=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await xQ()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,l),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,l),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=b0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let l of r.statements){const u=b0(o,l);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)b0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],f=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:f,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let l;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?l=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:l=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:l}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const l=await FE(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,l)}else{const l=await FE(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(l);this.pointers.push(u);const f=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,l.byteLength,l.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(f),this.execInitStatements()}}catch(l){this.emitMessage({type:"error",error:l,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:l,tempFileNames:u}=CD(this.config.databasePath),f=await o(),p=[l,...u];this.destroy(),await Promise.all(p.map(async h=>f.removeEntry(h).catch(b=>{if(!(b instanceof DOMException&&b.name==="NotFoundError"))throw b})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:mN(globalThis);this.proxy=n,this.init("initial")}}function $b(t,...e){return{sql:t.join("?"),params:e}}function _Q(t){return!t.some(e=>!Array.isArray(e))}function v0(t,e){let n;return _Q(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function SQ(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function EQ(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function IQ(t){if(typeof t=="function"&&(t=t($b)),SQ(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!EQ(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function x0(){return crypto.randomUUID()}function FR(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=$b(t,...e),n}async function Gg(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class NQ{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const l=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(l.type){case"success":case"data":case"buffer":case"info":case"error":if(l.queryKey&&u.has(l.queryKey)){const[p,h]=u.get(l.queryKey);l.type==="error"?h(l.error):p(l),u.delete(l.queryKey)}else if(l.type==="error")throw l.error;break;case"callback":const f=this.userCallbacks.get(l.name);f&&f(...l.args??[]);break;case"event":this.config.onConnect?.(l.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Gg("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const l=x0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:l},[o.database]);break;default:this.processor.postMessage({...o,queryKey:l});break}return new Promise((u,f)=>{this.queriesInProgress.set(l,[u,f])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l,u="all",f)=>{const p=await this.createQuery({type:"query",transactionKey:f,sql:o,params:l,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return l.type==="data"&&l.data.forEach((f,p)=>{u[p]=f}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...l)=>{const u=FR(o,l),{rows:f,columns:p}=await this.exec(u.sql,u.params,"all");return v0(f,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=o($b);return(await this.execBatch(l)).map(({rows:f,columns:p})=>v0(f,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=x0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const l=async h=>{const b=IQ(h),{rows:x,columns:_}=await this.exec(b.sql,b.params,"all",o);return v0(x,_)};return{query:l,sql:async(h,...b)=>{const x=FR(h,b);return await l(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Gg("exclusive",!1,this.config,async()=>{let l;this.bypassMutationLock=!0;try{l=await this.beginTransaction();const u=await o({sql:l.sql,query:l.query});return await l.commit(),u}catch(u){throw await l?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,l)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=l),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=l)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,l;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const f=CD(this.config.databasePath),{directories:p,getDirectoryHandle:h}=f;o=f.fileName;const b=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${b}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();l=await (await (await _.getFileHandle(b)).getFile()).arrayBuffer(),await _.removeEntry(b)}else{const f=await this.createQuery({type:"export"});if(f.type==="buffer")o="database.sqlite3",l=f.buffer;else throw new Error("The database failed to export.")}return new File([l],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await Gg("exclusive",!1,this.config,async()=>{try{const u=await FE(o);await this.createQuery({type:"import",database:u}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Gg("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=x0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=mN(this.processor)):(this.processor=new wQ(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.($b)??[]}})}}class kQ extends NQ{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new CH,createDriver:()=>new CQ(this),createIntrospector:e=>new kH(e),createQueryCompiler:()=>new EH}})}}class CQ{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new TQ(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class TQ{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const jQ=({database:t,bootstrap:e})=>{const{dialect:n}=new kQ({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new HI({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},yi=xn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),RQ="icon-[material-symbols--error-outline]",OQ=xn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),li=({error:t,variant:e,tva:n=OQ,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?d.jsxs("div",{className:i.base(),children:[d.jsx(nn,{icon:RQ}),d.jsx("span",{children:ia.rich(t.message)})]}):null},qQ=xn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),un=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:l=qQ,css:u})=>{const f=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:"flex flex-row justify-between",children:[t?d.jsx("label",{htmlFor:i,children:t}):null,d.jsx(li,{variant:{compact:!0},error:r.errors[i]})]}),e?d.jsx("div",{className:"text-sm italic",children:e}):null,d.jsx("div",{className:f.input(),children:s})]})},Ji=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{GI({error:i,errors:[CI({error:i,schema:QI,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function AQ(t,e,n,r={leading:!1}){const[i,s]=H.useState(t),[o,l]=H.useState(t),u=H.useRef(null),f=H.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);H.useEffect(()=>p,[]),H.useEffect(()=>{e(i)},[i]),H.useEffect(()=>{l(t),s(t)},[t]);const h=H.useCallback(b=>{l(b),p(),f.current&&r.leading?s(b):u.current=window.setTimeout(()=>{f.current=!0,s(b)},n),f.current=!1},[r.leading]);return[o,h]}const PQ=xn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),TD=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=PQ,css:s})=>{const o=i({...r,css:s}).slots,[l,u]=AQ(t,f=>{e(f||"")},500);return d.jsxs("div",{className:o.base(),children:[d.jsx("div",{className:o.search(),children:d.jsx(nn,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),d.jsx("input",{value:l||"",className:o.input(),type:"text",placeholder:n||ia.text("Fulltext (placeholder)"),onChange:f=>{u(f.target.value)}}),t&&d.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:d.jsx(nn,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},ao="icon-[pajamas--go-back]",Bb="icon-[line-md--confirm-circle]",jD="icon-[mage--edit]",FQ="icon-[arcticons--nothing-x]",DQ="icon-[tabler--filter-plus]",DR="icon-[tabler--filter-minus]",Hv="icon-[ph--list-dashes-thin]",LQ="icon-[svg-spinners--3-dots-scale]",yN="icon-[material-symbols-light--logout-sharp]",MQ="icon-[fluent--shape-intersect-20-regular]",Kv="icon-[fluent--checkbox-unchecked-20-regular]",Qv="icon-[fluent--checkbox-checked-20-regular]",qh="icon-[teenyicons--tag-outline]",ii="icon-[ph--trash]",$Q="icon-[clarity--upload-cloud-line]",bN="icon-[ph--user]",BQ=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Pn=t=>{const e=uv(),n=Mo();return async()=>{await BQ({keys:t,queryClient:e}),await n.invalidate()}};var w0={exports:{}},_0,LR;function zQ(){if(LR)return _0;LR=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _0=t,_0}var S0,MR;function WQ(){if(MR)return S0;MR=1;var t=zQ();function e(){}function n(){}return n.resetWarningCache=e,S0=function(){function r(o,l,u,f,p,h){if(h!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},S0}var $R;function VQ(){return $R||($R=1,w0.exports=WQ()()),w0.exports}var UQ=VQ();const Zn=co(UQ);function hu(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{f(r.next(p))}catch(h){o(h)}}function u(p){try{f(r.throw(p))}catch(h){o(h)}}function f(p){p.done?s(p.value):i(p.value).then(l,u)}f((r=r.apply(t,e||[])).next())})}const HQ=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Qd(t,e,n){const r=KQ(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&BR(r,"path",s),BR(r,"relativePath",s),r}function KQ(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=HQ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function BR(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const QQ=[".DS_Store","Thumbs.db"];function GQ(t){return hu(this,void 0,void 0,function*(){return zb(t)&&JQ(t.dataTransfer)?eG(t.dataTransfer,t.type):ZQ(t)?YQ(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?XQ(t):[]})}function JQ(t){return zb(t)}function ZQ(t){return zb(t)&&zb(t.target)}function zb(t){return typeof t=="object"&&t!==null}function YQ(t){return DE(t.target.files).map(e=>Qd(e))}function XQ(t){return hu(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Qd(n))})}function eG(t,e){return hu(this,void 0,void 0,function*(){if(t.items){const n=DE(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(tG));return zR(RD(r))}return zR(DE(t.files).map(n=>Qd(n)))})}function zR(t){return t.filter(e=>QQ.indexOf(e.name)===-1)}function DE(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function tG(t){if(typeof t.webkitGetAsEntry!="function")return WR(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?OD(e):WR(t,e)}function RD(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?RD(n):[n]],[])}function WR(t,e){return hu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Qd(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Qd(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function nG(t){return hu(this,void 0,void 0,function*(){return t.isDirectory?OD(t):rG(t)})}function OD(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>hu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(nG));i.push(l),s()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}s()})}function rG(t){return hu(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Qd(r,t.fullPath);e(i)},r=>{n(r)})})})}var Jg={},VR;function iG(){return VR||(VR=1,Jg.__esModule=!0,Jg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0}),Jg}var sG=iG();const E0=co(sG);function UR(t){return lG(t)||aG(t)||AD(t)||oG()}function oG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lG(t){if(Array.isArray(t))return LE(t)}function HR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(n),!0).forEach(function(r){qD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ah(t,e){return dG(t)||uG(t,e)||AD(t,e)||cG()}function cG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AD(t,e){if(t){if(typeof t=="string")return LE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LE(t,e)}}function LE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function dG(t){if(Array.isArray(t))return t}var fG=typeof E0=="function"?E0:E0.default,PD="file-invalid-type",FD="file-too-large",DD="file-too-small",LD="too-many-files",pG={FileInvalidType:PD,FileTooLarge:FD,FileTooSmall:DD,TooManyFiles:LD},hG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:PD,message:"File type must be ".concat(r)}},QR=function(e){return{code:FD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},GR=function(e){return{code:DD,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},mG={code:LD,message:"Too many files"};function MD(t,e){var n=t.type==="application/x-moz-file"||fG(t,e);return[n,n?null:hG(e)]}function $D(t,e,n){if(Lc(t.size))if(Lc(e)&&Lc(n)){if(t.size>n)return[!1,QR(n)];if(t.size<e)return[!1,GR(e)]}else{if(Lc(e)&&t.size<e)return[!1,GR(e)];if(Lc(n)&&t.size>n)return[!1,QR(n)]}return[!0,null]}function Lc(t){return t!=null}function gG(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,l=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var f=MD(u,n),p=Ah(f,1),h=p[0],b=$D(u,r,i),x=Ah(b,1),_=x[0],E=l?l(u):null;return h&&_&&!E})}function Wb(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Zg(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function JR(t){t.preventDefault()}function yG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function bG(t){return t.indexOf("Edge/")!==-1}function vG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return yG(t)||bG(t)}function Qo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(l){return!Wb(r)&&l&&l.apply(void 0,[r].concat(s)),Wb(r)})}}function xG(){return"showOpenFilePicker"in window}function wG(t){if(Lc(t)){var e=Object.entries(t).filter(function(n){var r=Ah(n,2),i=r[0],s=r[1],o=!0;return BD(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(zD))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Ah(r,2),s=i[0],o=i[1];return KR(KR({},n),{},qD({},s,o))},{});return[{description:"Files",accept:e}]}return t}function _G(t){if(Lc(t))return Object.entries(t).reduce(function(e,n){var r=Ah(n,2),i=r[0],s=r[1];return[].concat(UR(e),[i],UR(s))},[]).filter(function(e){return BD(e)||zD(e)}).join(",")}function SG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function EG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function BD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function zD(t){return/^.*\.[\w]+$/.test(t)}var IG=["children"],NG=["open"],kG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],CG=["refKey","onChange","onClick"];function TG(t){return OG(t)||RG(t)||WD(t)||jG()}function jG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OG(t){if(Array.isArray(t))return ME(t)}function I0(t,e){return PG(t)||AG(t,e)||WD(t,e)||qG()}function qG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WD(t,e){if(t){if(typeof t=="string")return ME(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ME(t,e)}}function ME(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function PG(t){if(Array.isArray(t))return t}function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(n),!0).forEach(function(r){$E(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vb(t,e){if(t==null)return{};var n=FG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Gv=H.forwardRef(function(t,e){var n=t.children,r=Vb(t,IG),i=UD(r),s=i.open,o=Vb(i,NG);return H.useImperativeHandle(e,function(){return{open:s}},[s]),Bn.createElement(H.Fragment,null,n(Nr(Nr({},o),{},{open:s})))});Gv.displayName="Dropzone";var VD={disabled:!1,getFilesFromEvent:GQ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Gv.defaultProps=VD;Gv.propTypes={children:Zn.func,accept:Zn.objectOf(Zn.arrayOf(Zn.string)),multiple:Zn.bool,preventDropOnDocument:Zn.bool,noClick:Zn.bool,noKeyboard:Zn.bool,noDrag:Zn.bool,noDragEventsBubbling:Zn.bool,minSize:Zn.number,maxSize:Zn.number,maxFiles:Zn.number,disabled:Zn.bool,getFilesFromEvent:Zn.func,onFileDialogCancel:Zn.func,onFileDialogOpen:Zn.func,useFsAccessApi:Zn.bool,autoFocus:Zn.bool,onDragEnter:Zn.func,onDragLeave:Zn.func,onDragOver:Zn.func,onDrop:Zn.func,onDropAccepted:Zn.func,onDropRejected:Zn.func,onError:Zn.func,validator:Zn.func};var BE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function UD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Nr(Nr({},VD),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,f=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,b=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,E=e.onFileDialogCancel,k=e.onFileDialogOpen,j=e.useFsAccessApi,C=e.autoFocus,R=e.preventDropOnDocument,q=e.noClick,L=e.noKeyboard,$=e.noDrag,W=e.noDragEventsBubbling,P=e.onError,O=e.validator,z=H.useMemo(function(){return _G(n)},[n]),F=H.useMemo(function(){return wG(n)},[n]),V=H.useMemo(function(){return typeof k=="function"?k:YR},[k]),U=H.useMemo(function(){return typeof E=="function"?E:YR},[E]),M=H.useRef(null),X=H.useRef(null),J=H.useReducer(DG,BE),le=I0(J,2),ie=le[0],ne=le[1],oe=ie.isFocused,te=ie.isFileDialogActive,ue=H.useRef(typeof window<"u"&&window.isSecureContext&&j&&xG()),de=function(){!ue.current&&te&&setTimeout(function(){if(X.current){var ut=X.current.files;ut.length||(ne({type:"closeDialog"}),U())}},300)};H.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[X,te,U,ue]);var ye=H.useRef([]),we=function(ut){M.current&&M.current.contains(ut.target)||(ut.preventDefault(),ye.current=[])};H.useEffect(function(){return R&&(document.addEventListener("dragover",JR,!1),document.addEventListener("drop",we,!1)),function(){R&&(document.removeEventListener("dragover",JR),document.removeEventListener("drop",we))}},[M,R]),H.useEffect(function(){return!r&&C&&M.current&&M.current.focus(),function(){}},[M,C,r]);var Ie=H.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[].concat(TG(ye.current),[Me.target]),Zg(Me)&&Promise.resolve(i(Me)).then(function(ut){if(!(Wb(Me)&&!W)){var Qt=ut.length,Gt=Qt>0&&gG({files:ut,accept:z,minSize:o,maxSize:s,multiple:l,maxFiles:u,validator:O}),bn=Qt>0&&!Gt;ne({isDragAccept:Gt,isDragReject:bn,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Me)}}).catch(function(ut){return Ie(ut)})},[i,f,Ie,W,z,o,s,l,u,O]),Re=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ut=Zg(Me);if(ut&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ut&&h&&h(Me),!1},[h,W]),De=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ut=ye.current.filter(function(Gt){return M.current&&M.current.contains(Gt)}),Qt=ut.indexOf(Me.target);Qt!==-1&&ut.splice(Qt,1),ye.current=ut,!(ut.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Zg(Me)&&p&&p(Me))},[M,p,W]),Je=H.useCallback(function(Me,ut){var Qt=[],Gt=[];Me.forEach(function(bn){var ar=MD(bn,z),Ln=I0(ar,2),Kr=Ln[0],Di=Ln[1],_r=$D(bn,o,s),Jt=I0(_r,2),Zi=Jt[0],Yi=Jt[1],Xi=O?O(bn):null;if(Kr&&Zi&&!Xi)Qt.push(bn);else{var po=[Di,Yi];Xi&&(po=po.concat(Xi)),Gt.push({file:bn,errors:po.filter(function(pa){return pa})})}}),(!l&&Qt.length>1||l&&u>=1&&Qt.length>u)&&(Qt.forEach(function(bn){Gt.push({file:bn,errors:[mG]})}),Qt.splice(0)),ne({acceptedFiles:Qt,fileRejections:Gt,isDragReject:Gt.length>0,type:"setFiles"}),b&&b(Qt,Gt,ut),Gt.length>0&&_&&_(Gt,ut),Qt.length>0&&x&&x(Qt,ut)},[ne,l,z,o,s,u,b,x,_,O]),Xe=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[],Zg(Me)&&Promise.resolve(i(Me)).then(function(ut){Wb(Me)&&!W||Je(ut,Me)}).catch(function(ut){return Ie(ut)}),ne({type:"reset"})},[i,Je,Ie,W]),Ve=H.useCallback(function(){if(ue.current){ne({type:"openDialog"}),V();var Me={multiple:l,types:F};window.showOpenFilePicker(Me).then(function(ut){return i(ut)}).then(function(ut){Je(ut,null),ne({type:"closeDialog"})}).catch(function(ut){SG(ut)?(U(ut),ne({type:"closeDialog"})):EG(ut)?(ue.current=!1,X.current?(X.current.value=null,X.current.click()):Ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ie(ut)});return}X.current&&(ne({type:"openDialog"}),V(),X.current.value=null,X.current.click())},[ne,V,U,j,Je,Ie,F,l]),ct=H.useCallback(function(Me){!M.current||!M.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ve())},[M,Ve]),_t=H.useCallback(function(){ne({type:"focus"})},[]),Rt=H.useCallback(function(){ne({type:"blur"})},[]),Ut=H.useCallback(function(){q||(vG()?setTimeout(Ve,0):Ve())},[q,Ve]),sn=function(ut){return r?null:ut},xe=function(ut){return L?null:sn(ut)},be=function(ut){return $?null:sn(ut)},Ne=function(ut){W&&ut.stopPropagation()},Ae=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.role,bn=Me.onKeyDown,ar=Me.onFocus,Ln=Me.onBlur,Kr=Me.onClick,Di=Me.onDragEnter,_r=Me.onDragOver,Jt=Me.onDragLeave,Zi=Me.onDrop,Yi=Vb(Me,kG);return Nr(Nr($E({onKeyDown:xe(Qo(bn,ct)),onFocus:xe(Qo(ar,_t)),onBlur:xe(Qo(Ln,Rt)),onClick:sn(Qo(Kr,Ut)),onDragEnter:be(Qo(Di,ze)),onDragOver:be(Qo(_r,Re)),onDragLeave:be(Qo(Jt,De)),onDrop:be(Qo(Zi,Xe)),role:typeof Gt=="string"&&Gt!==""?Gt:"presentation"},Qt,M),!r&&!L?{tabIndex:0}:{}),Yi)}},[M,ct,_t,Rt,Ut,ze,Re,De,Xe,L,$,r]),Ue=H.useCallback(function(Me){Me.stopPropagation()},[]),rt=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.onChange,bn=Me.onClick,ar=Vb(Me,CG),Ln=$E({accept:z,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:sn(Qo(Gt,Xe)),onClick:sn(Qo(bn,Ue)),tabIndex:-1},Qt,X);return Nr(Nr({},Ln),ar)}},[X,n,l,Xe,r]);return Nr(Nr({},ie),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:M,inputRef:X,open:sn(Ve)})}function DG(t,e){switch(e.type){case"focus":return Nr(Nr({},t),{},{isFocused:!0});case"blur":return Nr(Nr({},t),{},{isFocused:!1});case"openDialog":return Nr(Nr({},BE),{},{isFileDialogActive:!0});case"closeDialog":return Nr(Nr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Nr(Nr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Nr(Nr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Nr({},BE);default:return t}}function YR(){}const LG=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:pG,default:Gv,useDropzone:UD},Symbol.toStringTag,{value:"Module"})),MG=xn({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:$G}=LG,BG=({id:t,accept:e,text:n,variant:r,tva:i=MG,css:s,...o})=>{const{getRootProps:l,getInputProps:u,isDragActive:f,isDragReject:p}=$G({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:f,rejected:p,...r,css:s}).slots;return d.jsx("div",{...l(),className:h.base(),children:d.jsxs("label",{htmlFor:t,className:h.label(),children:[d.jsxs("div",{className:h.zone(),children:[d.jsx(nn,{icon:$Q,variant:{size:"4xl"}}),d.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||ia.rich("Drag 'n' drop a file here")}),n?.message?d.jsx("p",{className:"text-xs",children:n.message}):null]}),d.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},zG=xn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),HD=({logo:t,menu:e,actions:n,variant:r,tva:i=zG,css:s,children:o})=>{const l=i({...r,css:s}).slots;return d.jsxs("div",{className:l.base(),children:[d.jsx(Bz,{position:"top-right"}),d.jsxs("div",{className:l.header(),children:[d.jsx("div",{children:t}),d.jsx("div",{className:"grow",children:e}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),d.jsx("div",{className:l.content(),children:o??d.jsx(uo,{})})]})},WG=xn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),VG=H.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=WG,css:i,children:s,...o},l)=>{const u=r({...n,css:i}).slots;return d.jsxs("a",{...o,ref:l,className:u.base(),children:[t&&d.jsx(nn,{icon:t,...e}),s]})}),UG=Y3(VG),At=t=>d.jsx(UG,{preload:"intent",...t}),HG=xn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),KG=({show:t=!0,variant:e,tva:n=HG,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?d.jsx("div",{className:i.base(),children:d.jsx(nn,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var qy={exports:{}},QG=qy.exports,XR;function GG(){return XR||(XR=1,function(t,e){(function(n,r){t.exports=r()})(QG,()=>(()=>{var n={d:(_,E)=>{for(var k in E)n.o(E,k)&&!n.o(_,k)&&Object.defineProperty(_,k,{enumerable:!0,get:E[k]})},o:(_,E)=>Object.prototype.hasOwnProperty.call(_,E)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,l;const u=()=>{if(!o){o=!0;try{l=h.storage||localStorage,l.getItem("")}catch{l=(()=>{const _={getItem:k=>E[k]||null,setItem:(k,j)=>{E[k]=j},removeItem:k=>{E[k]=void 0},clear:()=>{E={__proto__:_}}};let E={__proto__:_};return E})()}b()}},f="\0",p=(_,E,k=!0)=>k?[...JSON.stringify(_)].map(j=>String.fromCharCode(j.charCodeAt(0)+E)).join(""):JSON.parse([..._].map(j=>String.fromCharCode(j.charCodeAt(0)-E)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,E)=>p(_,E,!1),secret:75,storage:void 0};Object.seal(h);const b=(_=!1)=>{u();for(const E of Object.keys(l)){const k=l.getItem(E);let j;try{j=JSON.parse(k||"")}catch{continue}s(j)&&f in j&&(Date.now()>j.ttl||_)&&l.removeItem(E)}},x={config:h,set:(_,E,k={})=>{u();const j={...h,...k,encrypt:k.encrypt!==!1&&(k.encrypt||h.encrypt),ttl:k.ttl===null?null:k.ttl||h.ttl};try{const C=j.ttl&&!isNaN(j.ttl)&&j.ttl>0;let R=C?{[f]:E,ttl:Date.now()+1e3*j.ttl}:E;j.encrypt&&(C?R[f]=(j.encrypter||i)(R[f],j.secret):R=(j.encrypter||i)(R,j.secret)),l.setItem(_,JSON.stringify(R))}catch{return!1}},get:(_,E={})=>{u();const k=l.getItem(_),j={...h,...E,encrypt:E.encrypt!==!1&&(E.encrypt||h.encrypt),ttl:E.ttl===null?null:E.ttl||h.ttl};let C,R;try{C=JSON.parse(k||""),R=s(C)&&f in C,(j.decrypt||j.encrypt)&&(R?C[f]=(j.decrypter||i)(C[f],j.secret):C=(j.decrypter||i)(C,j.secret))}catch{}return R?Date.now()>C.ttl?(l.removeItem(_),null):C[f]:C!==void 0?C:k},flush:b,clear:()=>{u(),l.clear()},remove:_=>{u(),l.removeItem(_)}};return r.default})())}(qy)),qy.exports}var JG=GG();const ZG=co(JG),mf=ZG,YG=xn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),mu=({variant:t,tva:e=YG,css:n,children:r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),children:r})},KD=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),XG=H.forwardRef(({icon:t=null,variant:e,tva:n=KD,css:r,children:i,...s},o)=>{const l=n({...e,css:r}).slots;return d.jsxs("a",{...s,className:l.base(),ref:o,children:[kv(t)?d.jsx(nn,{icon:t}):t,i]})}),eJ=Y3(XG),er=({match:t=[],variant:e,tva:n=KD,css:r,...i})=>{const s=W4(),o=t.some(l=>!!s(l));return d.jsx(eJ,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},tJ=xn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),tc=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=tJ,css:l})=>{const u=i?n.slice(0,i):n,f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[n.length?null:e,u.map(p=>d.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&d.jsx(hf,{textTitle:t,target:d.jsx(ym,{iconEnabled:xD}),outside:!0,children:d.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>d.jsx(r,{entity:p},`items-${p.id}`))})})]})},nJ=xn({slot:{base:[]},variant:{},defaults:{}}),Y=({label:t,fallback:e,variant:n,tva:r=nJ,css:i})=>{const s=r({...n,css:i}).slots;return d.jsx("div",{className:s.base(),children:ia.rich(t,e)})},QD=xn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),rJ=xn({use:QD,slot:{},variant:{},defaults:{}}),GD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=rJ,css:x})=>{const _=b({...h,css:x}).slots,[E,k]=H.useState(0),[j,C]=H.useState(15),[R,q]=H.useState(f||[]),[L,$]=H.useState(void 0),W=nb({queryKey:[l,"PopupMultiSelect","data",{fulltext:L,page:E,size:j}],async queryFn(){return u({filter:{fulltext:L},cursor:{page:E,size:j}})}}),P=nb({queryKey:[l,"PopupMultiSelect","selected",{value:f}],async queryFn(){return u({filter:{idIn:f}})},enabled:!!f});return d.jsx(hf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[d.jsx(nn,{icon:P.data?.data?.length?Qv:Kv}),P.data&&P.data.data.length?d.jsx(s,{entities:P.data.data}):n||d.jsx(Y,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:j},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(Y,{label:"Total count of items (label)"}),onPage(O){k(O)},onSize(O){C(O),k(0)}},fulltext:{value:L,set(O){$(O),k(0)}},table:{data:W.data?.data??[],selection:{type:"multi",value:R,set(O){q(O)}}}})}),d.jsx(Vv.Consumer,{children:O=>d.jsxs("div",{className:_.footer(),children:[d.jsx(yn,{iconEnabled:ao,iconDisabled:ao,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:d.jsx(Y,{label:"Close (label)"})}),d.jsx(yn,{iconEnabled:Bb,iconDisabled:Bb,disabled:!R.length&&!o,onClick:()=>{p(R),O?.close()},children:d.jsx(Y,{label:"Confirm selection (label)"})})]})})]})})},JD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=QD,css:x})=>{const _=b({...h,css:x}).slots,[E,k]=H.useState(0),[j,C]=H.useState(15),[R,q]=H.useState(f?[f]:[]),[L,$]=H.useState(void 0),W=nb({queryKey:[l,"PopupSelect","data",{fulltext:L,page:E,size:j}],async queryFn(){return u({filter:{fulltext:L},cursor:{page:E,size:j}})}}),P=nb({queryKey:[l,"PopupSelect","selected",{value:f}],async queryFn(){return u({filter:{id:f||void 0}})},enabled:!!f});return d.jsx(hf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[d.jsx(nn,{icon:P.data?.data?.[0]?Qv:Kv}),P.data?.data?.[0]?d.jsx(s,{entity:P.data?.data?.[0]}):n||d.jsx(Y,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:j},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(Y,{label:"Total count of items (label)"}),onPage(O){k(O)},onSize(O){C(O),k(0)}},fulltext:{value:L,set(O){$(O),k(0)}},table:{data:W.data?.data??[],selection:{type:"single",value:R,set(O){q(O)}}}})}),d.jsx(Vv.Consumer,{children:O=>d.jsxs("div",{className:_.footer(),children:[d.jsx(yn,{iconEnabled:ao,iconDisabled:ao,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:d.jsx(Y,{label:"Close (label)"})}),d.jsx(yn,{iconEnabled:Bb,iconDisabled:Bb,disabled:!R.length&&!o,onClick:()=>{p(R?.[0]),O?.close()},children:d.jsx(Y,{label:"Confirm selection (label)"})})]})})]})})},iJ=xn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),gf=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=iJ,css:l})=>{const u=o({...s,css:l}).slots;return d.jsx(pN.Provider,{value:{inline:!0},children:d.jsx("div",{className:u.base(),children:d.jsxs("div",{className:u.container(),children:[d.jsx("div",{className:u.title(),children:d.jsx(e,{entity:t})}),d.jsx("div",{className:u.links(),children:d.jsx(n,{entity:t})}),d.jsx("div",{className:u.actions(),children:d.jsx(r,{entity:t})}),d.jsx("div",{className:u.extra(),children:d.jsx(i,{entity:t})})]})})})},sJ=xn({slot:{base:["w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),yf=({value:t,variant:e,tva:n=sJ,css:r})=>{const i=n({...e,css:r}).slots;return d.jsx("div",{className:i.base(),children:d.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},oJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},aJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},qr=t=>({onPage:oJ(t),onSize:aJ(t)}),Ar=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Pr=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},ys=t=>e=>{t({search(n){return{...n,selection:e}}})},ei=t=>({loading:d.jsx(Y,{label:`${t} - Loading (label)`}),success:d.jsx(Y,{label:`${t} - Success (label)`}),error:d.jsx(Y,{label:`${t} - Error (label)`})}),lJ=xn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),bs=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=lJ,css:l})=>{const u=o({...s,css:l}).slots,f=H.useContext(Vv),p=Zt({async mutationFn(){return zz.promise(n(),ei(e))},async onSuccess(){await i?.(),f?.close()}});return d.jsxs("div",{className:u.base(),children:[d.jsx("div",{className:u.content(),children:t}),d.jsxs("div",{className:u.footer(),children:[d.jsx(yn,{variant:{variant:"subtle",size:"sm"},iconEnabled:ao,onClick:()=>{f?.close(),r?.()},children:d.jsx(Y,{label:"Cancel (button)"})}),d.jsx(yn,{variant:{variant:"danger",size:"md"},iconEnabled:ii,onClick:()=>{p.mutate()},children:d.jsx(Y,{label:"Delete (button)"})})]})]})},cJ=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),da=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),Or=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=l=>{let u=l;return s&&(u=l.limit(s.size).offset(s.page*s.size)),u};return D.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},or=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await Or({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await cJ({select:t,where:i,filter:r,query:e})}),pr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},Yg=(t,e)=>D.custom().pipe(t.catch(e)),Fr=({filter:t},{size:e=30}={size:30})=>D.object({filter:Yg(t.optional(),void 0),cursor:Yg(D9,{page:0,size:e}).default({page:0,size:e}),sort:Yg(D.any().optional(),[]).default([]),selection:Yg(D.array(D.string()),[]).default([])}),uJ=xn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),ZD=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=uJ,css:o,children:l})=>{const u=s({...i,css:o}).slots;return d.jsxs("div",{className:u.base(),children:[n?d.jsx(nn,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,d.jsx("div",{className:u.title(),children:t}),d.jsx("div",{className:u.message(),children:e}),d.jsx("div",{className:u.body(),children:l})]})},vN=xn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),dJ=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=vN,css:o})=>{const l=e.def.render,u=s({...i,css:o}).slots;return d.jsx("td",{className:u.td(),children:d.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[d.jsx(l,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?d.jsx(nn,{icon:DQ,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},fJ=({table:t,row:e,action:n,variant:r,tva:i=vN,css:s})=>{const o=i({...r,css:s}).slots,l=n?.table,u=n?.row;return d.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[l||u||t.selection.enabled?d.jsx("td",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(nn,{icon:t.selection.isSelected(e)?Qv:Kv,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?d.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(f=>d.jsx(dJ,{table:t,cell:f,variant:r,tva:i,css:s},`${e.id}-${f.column.id}`)),d.jsx("td",{})]})},Dr=({table:t,fulltext:e,cursor:n,empty:r=()=>d.jsx(ZD,{icon:FQ,textTitle:d.jsx(Y,{label:"Nothing here"}),textMessage:d.jsx(Y,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=vN,css:l})=>{const u=o({...s,css:l}).slots,f=i?.table,p=i?.row;return d.jsxs("div",{className:u.base(),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?d.jsx(TD,{value:e.value,onFulltext:e.set}):null}),d.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[d.jsx(RR,{...n}),t.filter.is()&&d.jsx(ym,{iconEnabled:DR,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),d.jsx("div",{className:"relative overflow-x-auto",children:d.jsxs("table",{className:u.table(),children:[d.jsx("thead",{className:u.thead(),children:d.jsxs("tr",{children:[f||p||t.selection.enabled?d.jsx("th",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(nn,{icon:t.selection.isAll()?Qv:t.selection.isAny()?MQ:Kv,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,f?d.jsx(f,{table:t}):null]})}):null,t.visible.map(h=>{const b=h.def.header||(()=>null);return d.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(b,{table:t}),d.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&d.jsx(nn,{icon:DR,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),d.jsx("th",{})]})}),t.isEmpty?null:d.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>d.jsx(fJ,{row:h,table:t,action:i,variant:s,tva:o,css:l},h.id))})]})}),t.isEmpty?d.jsx(r,{}):null,d.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[d.jsx("div",{}),d.jsx(RR,{...n})]})]})},fi=[];for(let t=0;t<256;++t)fi.push((t+256).toString(16).slice(1));function pJ(t,e=0){return(fi[t[e+0]]+fi[t[e+1]]+fi[t[e+2]]+fi[t[e+3]]+"-"+fi[t[e+4]]+fi[t[e+5]]+"-"+fi[t[e+6]]+fi[t[e+7]]+"-"+fi[t[e+8]]+fi[t[e+9]]+"-"+fi[t[e+10]]+fi[t[e+11]]+fi[t[e+12]]+fi[t[e+13]]+fi[t[e+14]]+fi[t[e+15]]).toLowerCase()}let N0;const hJ=new Uint8Array(16);function mJ(){if(!N0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");N0=crypto.getRandomValues.bind(crypto)}return N0(hJ)}const gJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eO={randomUUID:gJ};function tO(t,e,n){if(eO.randomUUID&&!t)return eO.randomUUID();t=t||{};const r=t.random??t.rng?.()??mJ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pJ(r)}const Lr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:l})=>{const u={...s?.value||{}},f=nR(u),p=new Set(o?.value),h=t.map(x=>({id:tO(),def:x,filter:x.filter?{is(){return x.filter?f.get(x.filter.path)!==void 0:!1},reset(){x.filter&&f.set(x.filter.path,void 0),s?.set({...u})},shallow(_,E){x.filter&&f.set(_,E),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),b=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const E=e.indexOf(x.def.name),k=e.indexOf(_.def.name);return(E===-1?1/0:E)-(k===-1?1/0:k)});return{columns:h,visible:b,rows:i?.map(x=>({id:tO(),data:x,cells:b.map(_=>({column:_,data:x,value:nR(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){f.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:l}},Mr=()=>t=>t,YD=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return d.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>d.jsx(As,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||d.jsx(Y,{label:"No tags (label)"})})},yJ=xn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),bf=({icon:t,title:e,subtitle:n,variant:r,tva:i=yJ,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return d.jsxs("div",{className:o.base(),children:[d.jsxs("div",{className:o.title(),children:[t?d.jsx(nn,{icon:t}):null,e]}),n?d.jsx("div",{className:o.subtitle(),children:n}):null]})};var Xg={},nO;function bJ(){if(nO)return Xg;nO=1;var t=Z3();return Xg.createRoot=t.createRoot,Xg.hydrateRoot=t.hydrateRoot,Xg}var vJ=bJ();const xJ=co(vJ),xN=C4()({component:()=>d.jsxs(d.Fragment,{children:[d.jsx(J4,{}),d.jsx(uo,{})]})}),wJ="modulepreload",_J=function(t){return"/"+t},rO={},iO=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=_J(u),u in rO)return;rO[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":wJ,f||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),f)return new Promise((b,x)=>{h.addEventListener("load",b),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},SJ=$t("/$locale")({component:uo,loader:async({params:{locale:t}})=>{try{ia.push((await EJ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function EJ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return iO(()=>import("./cs-CxfBw9K1.js"),[]);case"../translation/en":case"../translation/en.yaml":return iO(()=>import("./en-wtZ2YyjQ.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const XD="cs",IJ=[XD,"en"],NJ=$t("/")({loader:async()=>{throw Gh({to:"/$locale",params:{locale:D5({available:IJ,fallback:XD})}})}}),kJ=$t("/$locale/")({component:()=>{const{locale:t}=rn({from:"/$locale"});return d.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:d.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[d.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),d.jsx("ul",{children:d.jsx("li",{children:d.jsx(At,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:kt,bootstrap:CJ}=jQ({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute(),await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("color","varchar(128)",r=>r.notNull().defaultTo("slate")).addColumn("minWidth","integer",r=>r.notNull()).addColumn("maxWidth","integer",r=>r.notNull()).addColumn("minHeight","integer",r=>r.notNull()).addColumn("maxHeight","integer",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).execute(),await t.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute(),await t.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(Cr`CURRENT_TIMESTAMP`).notNull()).execute(),await t.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","integer",r=>r.notNull()).addColumn("y","integer",r=>r.notNull()).addColumn("width","integer",r=>r.notNull()).addColumn("height","integer",r=>r.notNull()).execute(),await t.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute(),await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Region] blueprintId-regionId",["blueprintId","regionId"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute(),await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Waypoint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Waypoint] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Waypoint] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).execute(),await t.schema.createTable("Building_Waypoint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Waypoint] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("waypointId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Waypoint] waypointId",["waypointId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Waypoint] buildingId-waypointId",["buildingId","waypointId"]).execute(),await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Waypoint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Supply").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Supply] buildingId-resourceId",["buildingId","resourceId"]).execute(),await t.schema.createTable("Demand").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("priority","integer",r=>r.notNull().defaultTo(0)).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addUniqueConstraint("[Demand] buildingId-resourceId",["buildingId","resourceId"]).execute()}}}),TJ=$t("/$locale/apps/derivean")({loader:CJ}),e2="icon-[proicons--game]",jJ=xn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),t2=({variant:t,tva:e=jJ,css:n})=>{const r=e({...t,css:n}).slots;return d.jsx("div",{className:r.base(),children:"DeRivean"})},lo="icon-[fluent--building-shop-20-regular]",Ub="icon-[oui--vis-map-region]",vr="icon-[hugeicons--resources-add]",RJ=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsxs(mu,{...t,children:[d.jsx(er,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:d.jsx(Y,{label:"Editor (menu)"})}),d.jsx(er,{icon:lo,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:d.jsx(Y,{label:"Blueprint list (menu)"})}),d.jsx(er,{icon:Ub,to:"/$locale/apps/derivean/root/region/list",params:{locale:e},children:d.jsx(Y,{label:"Region list (menu)"})}),d.jsx(er,{icon:vr,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(Y,{label:"Resource list (menu)"})}),d.jsx(er,{icon:bN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:d.jsx(Y,{label:"User list (menu)"})}),d.jsx(er,{icon:qh,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:d.jsx(Y,{label:"Tag list (menu)"})})]})},bm=D.object({id:D.string(),name:D.string(),login:D.string()}),OJ=$t("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return bm.parse(mf.get("session"))}catch{throw Gh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=rn({from:"/$locale"}),{session:e}=ji({from:"/$locale/apps/derivean/root"});return d.jsx(HD,{logo:d.jsx(At,{to:"/$locale/apps/derivean/root",params:{locale:t},children:d.jsx(t2,{})}),menu:d.jsx(RJ,{}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(At,{icon:e2,to:"/$locale/apps/derivean/game",params:{locale:t}}),d.jsx(At,{icon:yN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}}),qJ=$t("/$locale/apps/derivean/map")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return bm.parse(mf.get("session"))}catch{throw Gh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}}}),AJ=$t("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return bm.parse(mf.get("session"))}catch{throw Gh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=rn({from:"/$locale"}),{session:e}=ji({from:"/$locale/apps/derivean/game"}),n=$B({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return d.jsx(HD,{logo:d.jsx(At,{to:"/$locale/apps/derivean/game",params:{locale:t},children:d.jsx(t2,{})}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(At,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),d.jsx(At,{icon:yN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:n.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:d.jsx(uo,{})})}});var Ay={exports:{}},PJ=Ay.exports,sO;function FJ(){return sO||(sO=1,function(t,e){(function(n,r){r()})(PJ,function(){function n(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,p,h){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){u(b.response,p,h)},b.onerror=function(){console.error("could not download file")},b.send()}function i(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Mc=="object"&&Mc.global===Mc?Mc:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(f,p,h){var b=o.URL||o.webkitURL,x=document.createElement("a");p=p||f.name||"download",x.download=p,x.rel="noopener",typeof f=="string"?(x.href=f,x.origin===location.origin?s(x):i(x.href)?r(f,p,h):s(x,x.target="_blank")):(x.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,h){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,h),p);else if(i(f))r(f,p,h);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){s(b)})}}:function(f,p,h,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return r(f,p,h);var x=f.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||x&&_||l)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var R=k.result;R=E?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=R:location=R,b=null},k.readAsDataURL(f)}else{var j=o.URL||o.webkitURL,C=j.createObjectURL(f);b?b.location=C:location.href=C,b=null,setTimeout(function(){j.revokeObjectURL(C)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(Ay)),Ay.exports}var DJ=FJ();const LJ=co(DJ),k0=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Region","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],MJ=$t("/$locale/apps/derivean/root/")({component(){const t=Zt({mutationKey:["export"],async mutationFn(){return Rn.promise((async()=>{const e=[];await kt.transaction().execute(async n=>{for await(const r of k0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),LJ.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),ei("Export game files"))}});return d.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[d.jsx(BG,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await Cr`PRAGMA foreign_keys = OFF`.execute(kt),await Rn.promise(kt.transaction().execute(async i=>{for await(const{source:s}of r){const o=k0.find(l=>l===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const l=k0.find(u=>u===s);if(l)for await(const u of Object.values(o))await i.insertInto(l).values(u).execute()}}),ei("Import game files")),await Cr`PRAGMA foreign_keys = ON`.execute(kt)}}),d.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:d.jsx(yn,{iconEnabled:e2,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:d.jsx(Y,{label:"Export game files (label)"})})}),d.jsx("h2",{children:"TODO"}),d.jsxs("ul",{className:"flex flex-col gap-2",children:[d.jsxs("li",{children:[d.jsx("h2",{children:"Supply/Demand"}),d.jsx("p",{children:"Each building may set supply resources"}),d.jsx("p",{children:"Each building may set demanded resources"}),d.jsx("p",{children:"The point is to automatically distribute resources between between buildings, so it's enough to mark resource as a supply, so others in the chain may take it."}),d.jsx("p",{children:"Automate construction - when confirmed (plan == false), generate demand orders."})]}),d.jsxs("li",{children:[d.jsx("p",{children:"Rework roads: there will be waypoint (as a resource distribution node). Building may be connected only to waypoints, so minimum of 1 waypoint between two buildings is required."}),d.jsx("p",{children:"Resource distribution weight will be done on Road size."}),d.jsx("p",{children:"Subscribe (or demand) resources from the waypoint. There could be a list of subscribed buildings per resource, so priority could be simply changed."})]}),d.jsx("li",{children:"Fix Cycles as it's not bound to the Map."}),d.jsxs("li",{children:[d.jsx("p",{children:"Idea of lands; define lands in root, their size boundaries (will be randomized), available resources (may be randomized)."}),d.jsx("p",{children:"Here may be time for citizens, like geologist who will investigate a land to find, what's in there."}),d.jsx("p",{children:"Generate land into a map (so there will be Land as definition and Land as an instance)."}),d.jsx("p",{children:"For start, list all lands + zoom to land."})]}),d.jsx("li",{children:"Fetch production on building from production next to prod* ids on the building."}),d.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),d.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),d.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),d.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),d.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),d.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),d.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),d.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),d.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),d.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),d.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var vm=t=>t.type==="checkbox",Uc=t=>t instanceof Date,zi=t=>t==null;const n2=t=>typeof t=="object";var Wr=t=>!zi(t)&&!Array.isArray(t)&&n2(t)&&!Uc(t),r2=t=>Wr(t)&&t.target?vm(t.target)?t.target.checked:t.target.value:t,$J=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,i2=(t,e)=>t.has($J(e)),BJ=t=>{const e=t.constructor&&t.constructor.prototype;return Wr(e)&&e.hasOwnProperty("isPrototypeOf")},wN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cs(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(wN&&(t instanceof Blob||r))&&(n||Wr(t)))if(e=n?[]:{},!n&&!BJ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=cs(t[i]));else return t;return e}var Jv=t=>Array.isArray(t)?t.filter(Boolean):[],Br=t=>t===void 0,Et=(t,e,n)=>{if(!e||!Wr(t))return n;const r=Jv(e.split(/[,[\].]+?/)).reduce((i,s)=>zi(i)?i:i[s],t);return Br(r)||r===t?Br(t[e])?n:t[e]:r},no=t=>typeof t=="boolean",_N=t=>/^\w*$/.test(t),s2=t=>Jv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Wn=(t,e,n)=>{let r=-1;const i=_N(e)?[e]:s2(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let u=n;if(r!==o){const f=t[l];u=Wr(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}return t};const Hb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Co={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ja={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zJ=Bn.createContext(null),SN=()=>Bn.useContext(zJ);var o2=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Co.all&&(e._proxyFormState[o]=!r||Co.all),n&&(n[o]=!0),t[o]}});return i},us=t=>Wr(t)&&!Object.keys(t).length,a2=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return us(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Co.all))},nh=t=>Array.isArray(t)?t:[t],l2=(t,e,n)=>!t||!e||t===e||nh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function EN(t){const e=Bn.useRef(t);e.current=t,Bn.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function WJ(t){const e=SN(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,l]=Bn.useState(n._formState),u=Bn.useRef(!0),f=Bn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Bn.useRef(i);return p.current=i,EN({disabled:r,next:h=>u.current&&l2(p.current,h.name,s)&&a2(h,f.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),Bn.useEffect(()=>(u.current=!0,f.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),Bn.useMemo(()=>o2(o,n,f.current,!1),[o,n])}var Xo=t=>typeof t=="string",c2=(t,e,n,r,i)=>Xo(t)?(r&&e.watch.add(t),Et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Et(n,s))):(r&&(e.watchAll=!0),n);function VJ(t){const e=SN(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,l=Bn.useRef(r);l.current=r,EN({disabled:s,subject:n._subjects.values,next:p=>{l2(l.current,p.name,o)&&f(cs(c2(l.current,n._names,p.values||n._formValues,!1,i)))}});const[u,f]=Bn.useState(n._getWatch(r,i));return Bn.useEffect(()=>n._removeUnmounted()),u}function UJ(t){const e=SN(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=i2(i._names.array,n),l=VJ({control:i,name:n,defaultValue:Et(i._formValues,n,Et(i._defaultValues,n,t.defaultValue)),exact:!0}),u=WJ({control:i,name:n,exact:!0}),f=Bn.useRef(i.register(n,{...t.rules,value:l,...no(t.disabled)?{disabled:t.disabled}:{}})),p=Bn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(u.validatingFields,n)},error:{enumerable:!0,get:()=>Et(u.errors,n)}}),[u,n]),h=Bn.useMemo(()=>({name:n,value:l,...no(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:b=>f.current.onChange({target:{value:r2(b),name:n},type:Hb.CHANGE}),onBlur:()=>f.current.onBlur({target:{value:Et(i._formValues,n),name:n},type:Hb.BLUR}),ref:b=>{const x=Et(i._fields,n);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})}}),[n,i._formValues,r,u.disabled,l,i._fields]);return Bn.useEffect(()=>{const b=i._options.shouldUnregister||s,x=(_,E)=>{const k=Et(i._fields,_);k&&k._f&&(k._f.mount=E)};if(x(n,!0),b){const _=cs(Et(i._options.defaultValues,n));Wn(i._defaultValues,n,_),Br(Et(i._formValues,n))&&Wn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?b&&!i._state.action:b)?i.unregister(n):x(n,!1)}},[n,i,o,s]),Bn.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),Bn.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const Oi=t=>t.render(UJ(t));var u2=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},oO=t=>({isOnSubmit:!t||t===Co.onSubmit,isOnBlur:t===Co.onBlur,isOnChange:t===Co.onChange,isOnAll:t===Co.all,isOnTouch:t===Co.onTouched}),aO=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const rh=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Et(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(rh(l,e))break}else if(Wr(l)&&rh(l,e))break}}};var HJ=(t,e,n)=>{const r=nh(Et(t,n));return Wn(r,"root",e[n]),Wn(t,n,r),t},IN=t=>t.type==="file",Zo=t=>typeof t=="function",Kb=t=>{if(!wN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Py=t=>Xo(t),NN=t=>t.type==="radio",Qb=t=>t instanceof RegExp;const lO={value:!1,isValid:!1},cO={value:!0,isValid:!0};var d2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Br(t[0].attributes.value)?Br(t[0].value)||t[0].value===""?cO:{value:t[0].value,isValid:!0}:cO:lO}return lO};const uO={isValid:!1,value:null};var f2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,uO):uO;function dO(t,e,n="validate"){if(Py(t)||Array.isArray(t)&&t.every(Py)||no(t)&&!t)return{type:n,message:Py(t)?t:"",ref:e}}var nd=t=>Wr(t)&&!Qb(t)?t:{value:t,message:""},fO=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:u,maxLength:f,minLength:p,min:h,max:b,pattern:x,validate:_,name:E,valueAsNumber:k,mount:j}=t._f,C=Et(n,E);if(!j||e.has(E))return{};const R=l?l[0]:o,q=V=>{i&&R.reportValidity&&(R.setCustomValidity(no(V)?"":V||""),R.reportValidity())},L={},$=NN(o),W=vm(o),P=$||W,O=(k||IN(o))&&Br(o.value)&&Br(C)||Kb(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,z=u2.bind(null,E,r,L),F=(V,U,M,X=ja.maxLength,J=ja.minLength)=>{const le=V?U:M;L[E]={type:V?X:J,message:le,ref:o,...z(V?X:J,le)}};if(s?!Array.isArray(C)||!C.length:u&&(!P&&(O||zi(C))||no(C)&&!C||W&&!d2(l).isValid||$&&!f2(l).isValid)){const{value:V,message:U}=Py(u)?{value:!!u,message:u}:nd(u);if(V&&(L[E]={type:ja.required,message:U,ref:R,...z(ja.required,U)},!r))return q(U),L}if(!O&&(!zi(h)||!zi(b))){let V,U;const M=nd(b),X=nd(h);if(!zi(C)&&!isNaN(C)){const J=o.valueAsNumber||C&&+C;zi(M.value)||(V=J>M.value),zi(X.value)||(U=J<X.value)}else{const J=o.valueAsDate||new Date(C),le=oe=>new Date(new Date().toDateString()+" "+oe),ie=o.type=="time",ne=o.type=="week";Xo(M.value)&&C&&(V=ie?le(C)>le(M.value):ne?C>M.value:J>new Date(M.value)),Xo(X.value)&&C&&(U=ie?le(C)<le(X.value):ne?C<X.value:J<new Date(X.value))}if((V||U)&&(F(!!V,M.message,X.message,ja.max,ja.min),!r))return q(L[E].message),L}if((f||p)&&!O&&(Xo(C)||s&&Array.isArray(C))){const V=nd(f),U=nd(p),M=!zi(V.value)&&C.length>+V.value,X=!zi(U.value)&&C.length<+U.value;if((M||X)&&(F(M,V.message,U.message),!r))return q(L[E].message),L}if(x&&!O&&Xo(C)){const{value:V,message:U}=nd(x);if(Qb(V)&&!C.match(V)&&(L[E]={type:ja.pattern,message:U,ref:o,...z(ja.pattern,U)},!r))return q(U),L}if(_){if(Zo(_)){const V=await _(C,n),U=dO(V,R);if(U&&(L[E]={...U,...z(ja.validate,U.message)},!r))return q(U.message),L}else if(Wr(_)){let V={};for(const U in _){if(!us(V)&&!r)break;const M=dO(await _[U](C,n),R,U);M&&(V={...M,...z(U,M.message)},q(M.message),r&&(L[E]=V))}if(!us(V)&&(L[E]={ref:R,...V},!r))return L}}return q(!0),L};function KJ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Br(t)?r++:t[e[r++]];return t}function QJ(t){for(const e in t)if(t.hasOwnProperty(e)&&!Br(t[e]))return!1;return!0}function ri(t,e){const n=Array.isArray(e)?e:_N(e)?[e]:s2(e),r=n.length===1?t:KJ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Wr(r)&&us(r)||Array.isArray(r)&&QJ(r))&&ri(t,n.slice(0,-1)),t}var C0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},zE=t=>zi(t)||!n2(t);function Pl(t,e){if(zE(t)||zE(e))return t===e;if(Uc(t)&&Uc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Uc(s)&&Uc(o)||Wr(s)&&Wr(o)||Array.isArray(s)&&Array.isArray(o)?!Pl(s,o):s!==o)return!1}}return!0}var p2=t=>t.type==="select-multiple",GJ=t=>NN(t)||vm(t),T0=t=>Kb(t)&&t.isConnected,h2=t=>{for(const e in t)if(Zo(t[e]))return!0;return!1};function Gb(t,e={}){const n=Array.isArray(t);if(Wr(t)||n)for(const r in t)Array.isArray(t[r])||Wr(t[r])&&!h2(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Gb(t[r],e[r])):zi(t[r])||(e[r]=!0);return e}function m2(t,e,n){const r=Array.isArray(t);if(Wr(t)||r)for(const i in t)Array.isArray(t[i])||Wr(t[i])&&!h2(t[i])?Br(e)||zE(n[i])?n[i]=Array.isArray(t[i])?Gb(t[i],[]):{...Gb(t[i])}:m2(t[i],zi(e)?{}:e[i],n[i]):n[i]=!Pl(t[i],e[i]);return n}var bp=(t,e)=>m2(t,e,Gb(e)),g2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Br(t)?t:e?t===""?NaN:t&&+t:n&&Xo(t)?new Date(t):r?r(t):t;function j0(t){const e=t.ref;return IN(e)?e.files:NN(e)?f2(t.refs).value:p2(e)?[...e.selectedOptions].map(({value:n})=>n):vm(e)?d2(t.refs).value:g2(Br(e.value)?t.ref.value:e.value,t)}var JJ=(t,e,n,r)=>{const i={};for(const s of t){const o=Et(e,s);o&&Wn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},vp=t=>Br(t)?t:Qb(t)?t.source:Wr(t)?Qb(t.value)?t.value.source:t.value:t;const pO="AsyncFunction";var ZJ=t=>!!t&&!!t.validate&&!!(Zo(t.validate)&&t.validate.constructor.name===pO||Wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===pO)),YJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function hO(t,e,n){const r=Et(t,n);if(r||_N(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Et(e,s),l=Et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var XJ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,eZ=(t,e)=>!Jv(Et(t,e)).length&&ri(t,e);const tZ={mode:Co.onSubmit,reValidateMode:Co.onChange,shouldFocusError:!0};function nZ(t={}){let e={...tZ,...t},n={submitCount:0,isDirty:!1,isLoading:Zo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Wr(e.defaultValues)||Wr(e.values)?cs(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:cs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:C0(),array:C0(),state:C0()},b=oO(e.mode),x=oO(e.reValidateMode),_=e.criteriaMode===Co.all,E=xe=>be=>{clearTimeout(f),f=setTimeout(xe,be)},k=async xe=>{if(!e.disabled&&(p.isValid||xe)){const be=e.resolver?us((await P()).errors):await z(r,!0);be!==n.isValid&&h.state.next({isValid:be})}},j=(xe,be)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(l.mount)).forEach(Ne=>{Ne&&(be?Wn(n.validatingFields,Ne,be):ri(n.validatingFields,Ne))}),h.state.next({validatingFields:n.validatingFields,isValidating:!us(n.validatingFields)}))},C=(xe,be=[],Ne,Ae,Ue=!0,rt=!0)=>{if(Ae&&Ne&&!e.disabled){if(o.action=!0,rt&&Array.isArray(Et(r,xe))){const Me=Ne(Et(r,xe),Ae.argA,Ae.argB);Ue&&Wn(r,xe,Me)}if(rt&&Array.isArray(Et(n.errors,xe))){const Me=Ne(Et(n.errors,xe),Ae.argA,Ae.argB);Ue&&Wn(n.errors,xe,Me),eZ(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(Et(n.touchedFields,xe))){const Me=Ne(Et(n.touchedFields,xe),Ae.argA,Ae.argB);Ue&&Wn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=bp(i,s)),h.state.next({name:xe,isDirty:V(xe,be),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Wn(s,xe,be)},R=(xe,be)=>{Wn(n.errors,xe,be),h.state.next({errors:n.errors})},q=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},L=(xe,be,Ne,Ae)=>{const Ue=Et(r,xe);if(Ue){const rt=Et(s,xe,Br(Ne)?Et(i,xe):Ne);Br(rt)||Ae&&Ae.defaultChecked||be?Wn(s,xe,be?rt:j0(Ue._f)):X(xe,rt),o.mount&&k()}},$=(xe,be,Ne,Ae,Ue)=>{let rt=!1,Me=!1;const ut={name:xe};if(!e.disabled){const Qt=!!(Et(r,xe)&&Et(r,xe)._f&&Et(r,xe)._f.disabled);if(!Ne||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ut.isDirty=V(),rt=Me!==ut.isDirty);const Gt=Qt||Pl(Et(i,xe),be);Me=!!(!Qt&&Et(n.dirtyFields,xe)),Gt||Qt?ri(n.dirtyFields,xe):Wn(n.dirtyFields,xe,!0),ut.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Gt}if(Ne){const Gt=Et(n.touchedFields,xe);Gt||(Wn(n.touchedFields,xe,Ne),ut.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Gt!==Ne)}rt&&Ue&&h.state.next(ut)}return rt?ut:{}},W=(xe,be,Ne,Ae)=>{const Ue=Et(n.errors,xe),rt=p.isValid&&no(be)&&n.isValid!==be;if(e.delayError&&Ne?(u=E(()=>R(xe,Ne)),u(e.delayError)):(clearTimeout(f),u=null,Ne?Wn(n.errors,xe,Ne):ri(n.errors,xe)),(Ne?!Pl(Ue,Ne):Ue)||!us(Ae)||rt){const Me={...Ae,...rt&&no(be)?{isValid:be}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{j(xe,!0);const be=await e.resolver(s,e.context,JJ(xe||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return j(xe),be},O=async xe=>{const{errors:be}=await P(xe);if(xe)for(const Ne of xe){const Ae=Et(be,Ne);Ae?Wn(n.errors,Ne,Ae):ri(n.errors,Ne)}else n.errors=be;return be},z=async(xe,be,Ne={valid:!0})=>{for(const Ae in xe){const Ue=xe[Ae];if(Ue){const{_f:rt,...Me}=Ue;if(rt){const ut=l.array.has(rt.name),Qt=Ue._f&&ZJ(Ue._f);Qt&&p.validatingFields&&j([Ae],!0);const Gt=await fO(Ue,l.disabled,s,_,e.shouldUseNativeValidation&&!be,ut);if(Qt&&p.validatingFields&&j([Ae]),Gt[rt.name]&&(Ne.valid=!1,be))break;!be&&(Et(Gt,rt.name)?ut?HJ(n.errors,Gt,rt.name):Wn(n.errors,rt.name,Gt[rt.name]):ri(n.errors,rt.name))}!us(Me)&&await z(Me,be,Ne)}}return Ne.valid},F=()=>{for(const xe of l.unMount){const be=Et(r,xe);be&&(be._f.refs?be._f.refs.every(Ne=>!T0(Ne)):!T0(be._f.ref))&&Ie(xe)}l.unMount=new Set},V=(xe,be)=>!e.disabled&&(xe&&be&&Wn(s,xe,be),!Pl(te(),i)),U=(xe,be,Ne)=>c2(xe,l,{...o.mount?s:Br(be)?i:Xo(xe)?{[xe]:be}:be},Ne,be),M=xe=>Jv(Et(o.mount?s:i,xe,e.shouldUnregister?Et(i,xe,[]):[])),X=(xe,be,Ne={})=>{const Ae=Et(r,xe);let Ue=be;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&Wn(s,xe,g2(be,rt)),Ue=Kb(rt.ref)&&zi(be)?"":be,p2(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ue.includes(Me.value)):rt.refs?vm(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ue)?!!Ue.find(ut=>ut===Me.value):Ue===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ue):rt.refs.forEach(Me=>Me.checked=Me.value===Ue):IN(rt.ref)?rt.ref.value="":(rt.ref.value=Ue,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(Ne.shouldDirty||Ne.shouldTouch)&&$(xe,Ue,Ne.shouldTouch,Ne.shouldDirty,!0),Ne.shouldValidate&&oe(xe)},J=(xe,be,Ne)=>{for(const Ae in be){const Ue=be[Ae],rt=`${xe}.${Ae}`,Me=Et(r,rt);(l.array.has(xe)||Wr(Ue)||Me&&!Me._f)&&!Uc(Ue)?J(rt,Ue,Ne):X(rt,Ue,Ne)}},le=(xe,be,Ne={})=>{const Ae=Et(r,xe),Ue=l.array.has(xe),rt=cs(be);Wn(s,xe,rt),Ue?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&Ne.shouldDirty&&h.state.next({name:xe,dirtyFields:bp(i,s),isDirty:V(xe,rt)})):Ae&&!Ae._f&&!zi(rt)?J(xe,rt,Ne):X(xe,rt,Ne),aO(xe,l)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},ie=async xe=>{o.mount=!0;const be=xe.target;let Ne=be.name,Ae=!0;const Ue=Et(r,Ne),rt=()=>be.type?j0(Ue._f):r2(xe),Me=ut=>{Ae=Number.isNaN(ut)||Uc(ut)&&isNaN(ut.getTime())||Pl(ut,Et(s,Ne,ut))};if(Ue){let ut,Qt;const Gt=rt(),bn=xe.type===Hb.BLUR||xe.type===Hb.FOCUS_OUT,ar=!YJ(Ue._f)&&!e.resolver&&!Et(n.errors,Ne)&&!Ue._f.deps||XJ(bn,Et(n.touchedFields,Ne),n.isSubmitted,x,b),Ln=aO(Ne,l,bn);Wn(s,Ne,Gt),bn?(Ue._f.onBlur&&Ue._f.onBlur(xe),u&&u(0)):Ue._f.onChange&&Ue._f.onChange(xe);const Kr=$(Ne,Gt,bn,!1),Di=!us(Kr)||Ln;if(!bn&&h.values.next({name:Ne,type:xe.type,values:{...s}}),ar)return p.isValid&&(e.mode==="onBlur"&&bn?k():bn||k()),Di&&h.state.next({name:Ne,...Ln?{}:Kr});if(!bn&&Ln&&h.state.next({...n}),e.resolver){const{errors:_r}=await P([Ne]);if(Me(Gt),Ae){const Jt=hO(n.errors,r,Ne),Zi=hO(_r,r,Jt.name||Ne);ut=Zi.error,Ne=Zi.name,Qt=us(_r)}}else j([Ne],!0),ut=(await fO(Ue,l.disabled,s,_,e.shouldUseNativeValidation))[Ne],j([Ne]),Me(Gt),Ae&&(ut?Qt=!1:p.isValid&&(Qt=await z(r,!0)));Ae&&(Ue._f.deps&&oe(Ue._f.deps),W(Ne,Qt,ut,Kr))}},ne=(xe,be)=>{if(Et(n.errors,be)&&xe.focus)return xe.focus(),1},oe=async(xe,be={})=>{let Ne,Ae;const Ue=nh(xe);if(e.resolver){const rt=await O(Br(xe)?xe:Ue);Ne=us(rt),Ae=xe?!Ue.some(Me=>Et(rt,Me)):Ne}else xe?(Ae=(await Promise.all(Ue.map(async rt=>{const Me=Et(r,rt);return await z(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&k()):Ae=Ne=await z(r);return h.state.next({...!Xo(xe)||p.isValid&&Ne!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Ne}:{},errors:n.errors}),be.shouldFocus&&!Ae&&rh(r,ne,xe?Ue:l.mount),Ae},te=xe=>{const be={...o.mount?s:i};return Br(xe)?be:Xo(xe)?Et(be,xe):xe.map(Ne=>Et(be,Ne))},ue=(xe,be)=>({invalid:!!Et((be||n).errors,xe),isDirty:!!Et((be||n).dirtyFields,xe),error:Et((be||n).errors,xe),isValidating:!!Et(n.validatingFields,xe),isTouched:!!Et((be||n).touchedFields,xe)}),de=xe=>{xe&&nh(xe).forEach(be=>ri(n.errors,be)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,be,Ne)=>{const Ae=(Et(r,xe,{_f:{}})._f||{}).ref,Ue=Et(n.errors,xe)||{},{ref:rt,message:Me,type:ut,...Qt}=Ue;Wn(n.errors,xe,{...Qt,...be,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),Ne&&Ne.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},we=(xe,be)=>Zo(xe)?h.values.subscribe({next:Ne=>xe(U(void 0,be),Ne)}):U(xe,be,!0),Ie=(xe,be={})=>{for(const Ne of xe?nh(xe):l.mount)l.mount.delete(Ne),l.array.delete(Ne),be.keepValue||(ri(r,Ne),ri(s,Ne)),!be.keepError&&ri(n.errors,Ne),!be.keepDirty&&ri(n.dirtyFields,Ne),!be.keepTouched&&ri(n.touchedFields,Ne),!be.keepIsValidating&&ri(n.validatingFields,Ne),!e.shouldUnregister&&!be.keepDefaultValue&&ri(i,Ne);h.values.next({values:{...s}}),h.state.next({...n,...be.keepDirty?{isDirty:V()}:{}}),!be.keepIsValid&&k()},ze=({disabled:xe,name:be,field:Ne,fields:Ae})=>{(no(xe)&&o.mount||xe||l.disabled.has(be))&&(xe?l.disabled.add(be):l.disabled.delete(be),$(be,j0(Ne?Ne._f:Et(Ae,be)._f),!1,!1,!0))},Re=(xe,be={})=>{let Ne=Et(r,xe);const Ae=no(be.disabled)||no(e.disabled);return Wn(r,xe,{...Ne||{},_f:{...Ne&&Ne._f?Ne._f:{ref:{name:xe}},name:xe,mount:!0,...be}}),l.mount.add(xe),Ne?ze({field:Ne,disabled:no(be.disabled)?be.disabled:e.disabled,name:xe}):L(xe,!0,be.value),{...Ae?{disabled:be.disabled||e.disabled}:{},...e.progressive?{required:!!be.required,min:vp(be.min),max:vp(be.max),minLength:vp(be.minLength),maxLength:vp(be.maxLength),pattern:vp(be.pattern)}:{},name:xe,onChange:ie,onBlur:ie,ref:Ue=>{if(Ue){Re(xe,be),Ne=Et(r,xe);const rt=Br(Ue.value)&&Ue.querySelectorAll&&Ue.querySelectorAll("input,select,textarea")[0]||Ue,Me=GJ(rt),ut=Ne._f.refs||[];if(Me?ut.find(Qt=>Qt===rt):rt===Ne._f.ref)return;Wn(r,xe,{_f:{...Ne._f,...Me?{refs:[...ut.filter(T0),rt,...Array.isArray(Et(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),L(xe,!1,void 0,rt)}else Ne=Et(r,xe,{}),Ne._f&&(Ne._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(i2(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},De=()=>e.shouldFocusError&&rh(r,ne,l.mount),Je=xe=>{no(xe)&&(h.state.next({disabled:xe}),rh(r,(be,Ne)=>{const Ae=Et(r,Ne);Ae&&(be.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ue=>{Ue.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,be)=>async Ne=>{let Ae;Ne&&(Ne.preventDefault&&Ne.preventDefault(),Ne.persist&&Ne.persist());let Ue=cs(s);if(l.disabled.size)for(const rt of l.disabled)Wn(Ue,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ue=Me}else await z(r);if(ri(n.errors,"root"),us(n.errors)){h.state.next({errors:{}});try{await xe(Ue,Ne)}catch(rt){Ae=rt}}else be&&await be({...n.errors},Ne),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:us(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ve=(xe,be={})=>{Et(r,xe)&&(Br(be.defaultValue)?le(xe,cs(Et(i,xe))):(le(xe,be.defaultValue),Wn(i,xe,cs(be.defaultValue))),be.keepTouched||ri(n.touchedFields,xe),be.keepDirty||(ri(n.dirtyFields,xe),n.isDirty=be.defaultValue?V(xe,cs(Et(i,xe))):V()),be.keepError||(ri(n.errors,xe),p.isValid&&k()),h.state.next({...n}))},ct=(xe,be={})=>{const Ne=xe?cs(xe):i,Ae=cs(Ne),Ue=us(xe),rt=Ue?i:Ae;if(be.keepDefaultValues||(i=Ne),!be.keepValues){if(be.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(bp(i,s))]);for(const ut of Array.from(Me))Et(n.dirtyFields,ut)?Wn(rt,ut,Et(s,ut)):le(ut,Et(rt,ut))}else{if(wN&&Br(xe))for(const Me of l.mount){const ut=Et(r,Me);if(ut&&ut._f){const Qt=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(Kb(Qt)){const Gt=Qt.closest("form");if(Gt){Gt.reset();break}}}}r={}}s=e.shouldUnregister?be.keepDefaultValues?cs(i):{}:cs(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}l={mount:be.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?n.submitCount:0,isDirty:Ue?!1:be.keepDirty?n.isDirty:!!(be.keepDefaultValues&&!Pl(xe,i)),isSubmitted:be.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ue?{}:be.keepDirtyValues?be.keepDefaultValues&&s?bp(i,s):n.dirtyFields:be.keepDefaultValues&&xe?bp(i,xe):be.keepDirty?n.dirtyFields:{},touchedFields:be.keepTouched?n.touchedFields:{},errors:be.keepErrors?n.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_t=(xe,be)=>ct(Zo(xe)?xe(s):xe,be);return{control:{register:Re,unregister:Ie,getFieldState:ue,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:U,_getDirty:V,_updateValid:k,_removeUnmounted:F,_updateFieldArray:C,_updateDisabledField:ze,_getFieldArray:M,_reset:ct,_resetDefaultValues:()=>Zo(e.defaultValues)&&e.defaultValues().then(xe=>{_t(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:q,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:Re,handleSubmit:Xe,watch:we,setValue:le,getValues:te,reset:_t,resetField:Ve,clearErrors:de,unregister:Ie,setError:ye,setFocus:(xe,be={})=>{const Ne=Et(r,xe),Ae=Ne&&Ne._f;if(Ae){const Ue=Ae.refs?Ae.refs[0]:Ae.ref;Ue.focus&&(Ue.focus(),be.shouldSelect&&Zo(Ue.select)&&Ue.select())}},getFieldState:ue}}function bi(t={}){const e=Bn.useRef(void 0),n=Bn.useRef(void 0),[r,i]=Bn.useState({isDirty:!1,isValidating:!1,isLoading:Zo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Zo(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...nZ(t),formState:r});const s=e.current.control;return s._options=t,EN({subject:s._subjects.state,next:o=>{a2(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Bn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Bn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Bn.useEffect(()=>{t.values&&!Pl(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Bn.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Bn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Bn.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=o2(r,s),e.current}const mO=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},y2=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?mO(r.ref,n,t):r.refs&&r.refs.forEach(i=>mO(i,n,t))}},rZ=(t,e)=>{e.shouldUseNativeValidation&&y2(t,e);const n={};for(const r in t){const i=Et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(iZ(e.names||Object.keys(t),r)){const o=Object.assign({},Et(n,r));Wn(o,"root",s),Wn(n,r,o)}else Wn(n,r,s)}return n},iZ=(t,e)=>t.some(n=>n.startsWith(e+"."));var sZ=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,f=u&&u[r.code];n[o]=u2(o,e,n,i,f?[].concat(f,r.message):r.message)}t.shift()}return n},vi=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return s.shouldUseNativeValidation&&y2({},s),{errors:{},values:n.raw?r:f}})}catch(f){return l(f)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l?.errors)}(o))return{values:{},errors:rZ(sZ(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Jb="icon-[cil--arrow-right]",b2="icon-[et--map]",oZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({name:D.string().min(1),cycles:D.number().int(),sort:D.number().int(),limit:D.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),aZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintId:D.string().min(1),conflictId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),lZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintId:D.string().min(1),dependencyId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),cZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintId:D.string().min(1),inventoryId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),uZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number(),cycles:D.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),dZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintProductionId:D.string().min(1),blueprintId:D.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),fZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintProductionId:D.string().min(1),resourceId:D.string().min(1),amount:D.number(),passive:Qi()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),pZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintProductionId:D.string().min(1),resourceId:D.string().min(1),amount:D.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),hZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number(),passive:Qi()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),mZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({userId:D.string().min(1),blueprintId:D.string().min(1),constructionId:D.string().nullish(),landId:D.string().min(1),productionId:D.string().nullish(),recurringProductionId:D.string().nullish(),x:D.number(),y:D.number(),valid:Qi()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","landId","productionId","recurringProductionId","x","y","valid"]}),gZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({resourceId:D.string().min(1),amount:D.number(),limit:D.number(),type:D.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),yZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({userId:D.string().min(1),name:D.string().min(1)})),shape:t,filter:e,sort:["id","userId","name"]}),bZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({name:D.string().min(1),color:D.string().min(1),minWidth:D.number().int(),maxWidth:D.number().int(),minHeight:D.number().int(),maxHeight:D.number().int(),probability:D.number().int(),limit:D.number().int()})),shape:t,filter:e,sort:["id","name","color","minWidth","maxWidth","minHeight","maxHeight","probability","limit"]}),vZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({name:D.string().min(1),transport:D.number()})),shape:t,filter:e,sort:["id","name","transport"]}),xZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({code:D.string().min(1),label:D.string().min(1),group:D.string().nullish(),sort:D.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),wZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(D.object({name:D.string().min(1),login:D.string().min(1),password:D.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),_Z=yZ({shape:D.object({name:D.string().min(1)}),filter:Pi});function SZ(t){return Math.random()<t/100}function EZ(t=20480,e=32){const n=()=>Math.floor(Math.random()*(t/e))*e;return{x:n(),y:n()}}async function IZ(t,e,n,r){return!!await t.selectFrom("Land as l").where("l.mapId","=",e).where(s=>s.not(s.or([s("l.x",">=",n.x+r.width),s(Cr`l.x + l.width`,"<=",n.x),s("l.y",">=",n.y+r.height),s(Cr`l.y + l.height`,"<=",n.y)]))).select("id").executeTakeFirst()}const NZ=async({tx:t,userId:e,name:n,size:r={world:24,land:384*2}})=>{const i=await t.insertInto("Map").values({id:In(),userId:e,name:n}).returning("id").executeTakeFirstOrThrow(),s=await t.selectFrom("Region").selectAll().execute();for await(const{id:o,probability:l,limit:u,minWidth:f,maxWidth:p,minHeight:h,maxHeight:b}of s)for(let x=0;x<u;x++){if(!SZ(l))continue;let _=0;const E=6;for(;_<E;){const C=EZ(2048*r.world,2048);if(!await IZ(t,i.id,C,{width:2048,height:2048})){await t.insertInto("Land").values({id:In(),height:2048,width:2048,regionId:o,mapId:i.id,...C}).execute();break}_++}}return i},kZ=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(_Z.shape),defaultValues:{name:"",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"name",label:d.jsx(Y,{label:"Map name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:b2,type:"submit",children:d.jsx(Y,{label:"Create map (submit)"})})})]})},v2=$t("/$locale/apps/derivean/game/")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,map:await t.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>Or({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:D.object({id:D.string().min(1),name:D.string().min(1)})}))}})}},component(){const{user:t,map:e}=v2.useLoaderData(),{tva:n}=fr({from:"__root__"}),r=n().slots,i=Pn([["GameMap"]]),{locale:s}=rn({from:"/$locale"}),o=nc(),l=Zt({async mutationFn({id:u}){return kt.transaction().execute(async f=>f.deleteFrom("Map").where("id","=",u).where("userId","=",t.id).execute())},async onSuccess(){await i()}});return d.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[d.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:d.jsx(Y,{label:"Map list (label)"})}),e.length>0?e.map(u=>d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsx(At,{icon:Jb,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id},children:u.name}),d.jsx("div",{children:d.jsx(yn,{iconEnabled:ii,variant:{variant:"danger"},loading:l.isPending,onClick:()=>{l.mutate({id:u.id})}})})]},u.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(Y,{label:"There are no maps (label)"})}),d.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:d.jsx(Y,{label:"New map (label)"})}),d.jsx("div",{children:d.jsx(kZ,{mutation:Zt({async mutationFn(u){return Rn.promise(kt.transaction().execute(f=>NZ({tx:f,userId:t.id,...u})),ei("Map generator"))},async onSuccess(u){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id}}),await i()}})})})]})}});var R0,gO;function kN(){if(gO)return R0;gO=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var b=arguments,x=this;return p.forEach(function(_){b.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var b=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(b),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(b),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var b=h;b!==void 0;b=this.parent(b))if(b===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var b of this.successors(p))x.add(b);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var b=this;Object.entries(this._nodes).forEach(function([E,k]){p(E)&&h.setNode(E,k)}),Object.values(this._edgeObjs).forEach(function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,b.edge(E))});var x={};function _(E){var k=b.parent(E);return k===void 0||h.hasNode(k)?(x[E]=k,k):k in x?x[k]:_(k)}return this._isCompound&&h.nodes().forEach(E=>h.setParent(E,_(E))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var b=this,x=arguments;return p.reduce(function(_,E){return x.length>1?b.setEdge(_,E,h):b.setEdge(_,E),E}),this}setEdge(){var p,h,b,x,_=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(p=E.v,h=E.w,b=E.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=E,h=arguments[1],b=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,b!==void 0&&(b=""+b);var k=o(this._isDirected,p,h,b);if(Object.hasOwn(this._edgeLabels,k))return _&&(this._edgeLabels[k]=x),this;if(b!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[k]=_?x:this._defaultEdgeLabelFn(p,h,b);var j=l(this._isDirected,p,h,b);return p=j.v,h=j.w,Object.freeze(j),this._edgeObjs[k]=j,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][k]=j,this._out[p][k]=j,this._edgeCount++,this}edge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var b=this._in[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var b=this._out[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var b=this.inEdges(p,h);if(b)return b.concat(this.outEdges(p,h))}}function i(f,p){f[p]?f[p]++:f[p]=1}function s(f,p){--f[p]||delete f[p]}function o(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}return x+n+_+n+(b===void 0?t:b)}function l(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}var k={v:x,w:_};return b&&(k.name=b),k}function u(f,p){return o(f,p.v,p.w,p.name)}return R0=r,R0}var O0,yO;function CZ(){return yO||(yO=1,O0="2.2.4"),O0}var q0,bO;function TZ(){return bO||(bO=1,q0={Graph:kN(),version:CZ()}),q0}var A0,vO;function jZ(){if(vO)return A0;vO=1;var t=kN();A0={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var l=s.node(o),u=s.parent(o),f={v:o};return l!==void 0&&(f.value=l),u!==void 0&&(f.parent=u),f})}function r(s){return s.edges().map(function(o){var l=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),l!==void 0&&(u.value=l),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),s.edges.forEach(function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return A0}var P0,xO;function RZ(){if(xO)return P0;xO=1,P0=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return P0}var F0,wO;function x2(){if(wO)return F0;wO=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r}}return F0=t,F0}var D0,_O;function w2(){if(_O)return D0;_O=1;var t=x2();D0=n;var e=()=>1;function n(i,s,o,l){return r(i,String(s),o||e,l||function(u){return i.outEdges(u)})}function r(i,s,o,l){var u={},f=new t,p,h,b=function(x){var _=x.v!==p?x.v:x.w,E=u[_],k=o(x),j=h.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+k);j<E.distance&&(E.distance=j,E.predecessor=p,f.decrease(_,j))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},f.add(x,_)});f.size()>0&&(p=f.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(b);return u}return D0}var L0,SO;function OZ(){if(SO)return L0;SO=1;var t=w2();L0=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return L0}var M0,EO;function _2(){if(EO)return M0;EO=1,M0=t;function t(e){var n=0,r=[],i={},s=[];function o(l){var u=i[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),e.successors(l).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var f=[],p;do p=r.pop(),i[p].onStack=!1,f.push(p);while(l!==p);s.push(f)}}return e.nodes().forEach(function(l){Object.hasOwn(i,l)||o(l)}),s}return M0}var $0,IO;function qZ(){if(IO)return $0;IO=1;var t=_2();$0=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return $0}var B0,NO;function AZ(){if(NO)return B0;NO=1,B0=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},l=r.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(f){u!==f&&(o[u][f]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(f){var p=f.v===u?f.w:f.v,h=i(f);o[u][p]={distance:h,predecessor:u}})}),l.forEach(function(u){var f=o[u];l.forEach(function(p){var h=o[p];l.forEach(function(b){var x=h[u],_=f[b],E=h[b],k=x.distance+_.distance;k<E.distance&&(E.distance=k,E.predecessor=_.predecessor)})})}),o}return B0}var z0,kO;function S2(){if(kO)return z0;kO=1;function t(n){var r={},i={},s=[];function o(l){if(Object.hasOwn(i,l))throw new e;Object.hasOwn(r,l)||(i[l]=!0,r[l]=!0,n.predecessors(l).forEach(o),delete i[l],s.push(l))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return z0=t,t.CycleException=e,z0}var W0,CO;function PZ(){if(CO)return W0;CO=1;var t=S2();W0=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return W0}var V0,TO;function E2(){if(TO)return V0;TO=1,V0=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var l=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,f=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,l,p,f)}),f}function e(i,s,o,l){for(var u=[[i,!1]];u.length>0;){var f=u.pop();f[1]?l.push(f[0]):Object.hasOwn(o,f[0])||(o[f[0]]=!0,u.push([f[0],!0]),r(s(f[0]),p=>u.push([p,!1])))}}function n(i,s,o,l){for(var u=[i];u.length>0;){var f=u.pop();Object.hasOwn(o,f)||(o[f]=!0,l.push(f),r(s(f),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return V0}var U0,jO;function FZ(){if(jO)return U0;jO=1;var t=E2();U0=e;function e(n,r){return t(n,r,"post")}return U0}var H0,RO;function DZ(){if(RO)return H0;RO=1;var t=E2();H0=e;function e(n,r){return t(n,r,"pre")}return H0}var K0,OO;function LZ(){if(OO)return K0;OO=1;var t=kN(),e=x2();K0=n;function n(r,i){var s=new t,o={},l=new e,u;function f(h){var b=h.v===u?h.w:h.v,x=l.priority(b);if(x!==void 0){var _=i(h);_<x&&(o[b]=u,l.decrease(b,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(r.nodes()[0],0);for(var p=!1;l.size()>0;){if(u=l.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(f)}return s}return K0}var Q0,qO;function MZ(){return qO||(qO=1,Q0={components:RZ(),dijkstra:w2(),dijkstraAll:OZ(),findCycles:qZ(),floydWarshall:AZ(),isAcyclic:PZ(),postorder:FZ(),preorder:DZ(),prim:LZ(),tarjan:_2(),topsort:S2()}),Q0}var G0,AO;function Lo(){if(AO)return G0;AO=1;var t=TZ();return G0={Graph:t.Graph,json:jZ(),alg:MZ(),version:t.version},G0}var J0,PO;function $Z(){if(PO)return J0;PO=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return J0=t,J0}var Z0,FO;function BZ(){if(FO)return Z0;FO=1;let t=Lo().Graph,e=$Z();Z0=r;let n=()=>1;function r(f,p){if(f.nodeCount()<=1)return[];let h=o(f,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>f.outEdges(x.v,x.w))}function i(f,p,h){let b=[],x=p[p.length-1],_=p[0],E;for(;f.nodeCount();){for(;E=_.dequeue();)s(f,p,h,E);for(;E=x.dequeue();)s(f,p,h,E);if(f.nodeCount()){for(let k=p.length-2;k>0;--k)if(E=p[k].dequeue(),E){b=b.concat(s(f,p,h,E,!0));break}}}return b}function s(f,p,h,b,x){let _=x?[]:void 0;return f.inEdges(b.v).forEach(E=>{let k=f.edge(E),j=f.node(E.v);x&&_.push({v:E.v,w:E.w}),j.out-=k,l(p,h,j)}),f.outEdges(b.v).forEach(E=>{let k=f.edge(E),j=E.w,C=f.node(j);C.in-=k,l(p,h,C)}),f.removeNode(b.v),_}function o(f,p){let h=new t,b=0,x=0;f.nodes().forEach(k=>{h.setNode(k,{v:k,in:0,out:0})}),f.edges().forEach(k=>{let j=h.edge(k.v,k.w)||0,C=p(k),R=j+C;h.setEdge(k.v,k.w,R),x=Math.max(x,h.node(k.v).out+=C),b=Math.max(b,h.node(k.w).in+=C)});let _=u(x+b+3).map(()=>new e),E=b+1;return h.nodes().forEach(k=>{l(_,E,h.node(k))}),{graph:h,buckets:_,zeroIdx:E}}function l(f,p,h){h.out?h.in?f[h.out-h.in+p].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}function u(f){const p=[];for(let h=0;h<f;h++)p.push(h);return p}return Z0}var Y0,DO;function Xr(){if(DO)return Y0;DO=1;let t=Lo().Graph;Y0={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:o,mapValues:$,maxRank:_,normalizeRanks:u,notime:j,partition:E,pick:L,predecessorWeights:s,range:q,removeEmptyRanks:f,simplify:n,successorWeights:i,time:k,uniqueId:R,zipObject:W};function e(P,O,z,F){let V;do V=R(F);while(P.hasNode(V));return z.dummy=O,P.setNode(V,z),V}function n(P){let O=new t().setGraph(P.graph());return P.nodes().forEach(z=>O.setNode(z,P.node(z))),P.edges().forEach(z=>{let F=O.edge(z.v,z.w)||{weight:0,minlen:1},V=P.edge(z);O.setEdge(z.v,z.w,{weight:F.weight+V.weight,minlen:Math.max(F.minlen,V.minlen)})}),O}function r(P){let O=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(z=>{P.children(z).length||O.setNode(z,P.node(z))}),P.edges().forEach(z=>{O.setEdge(z,P.edge(z))}),O}function i(P){let O=P.nodes().map(z=>{let F={};return P.outEdges(z).forEach(V=>{F[V.w]=(F[V.w]||0)+P.edge(V).weight}),F});return W(P.nodes(),O)}function s(P){let O=P.nodes().map(z=>{let F={};return P.inEdges(z).forEach(V=>{F[V.v]=(F[V.v]||0)+P.edge(V).weight}),F});return W(P.nodes(),O)}function o(P,O){let z=P.x,F=P.y,V=O.x-z,U=O.y-F,M=P.width/2,X=P.height/2;if(!V&&!U)throw new Error("Not possible to find intersection inside of the rectangle");let J,le;return Math.abs(U)*M>Math.abs(V)*X?(U<0&&(X=-X),J=X*V/U,le=X):(V<0&&(M=-M),J=M,le=M*U/V),{x:z+J,y:F+le}}function l(P){let O=q(_(P)+1).map(()=>[]);return P.nodes().forEach(z=>{let F=P.node(z),V=F.rank;V!==void 0&&(O[V][F.order]=z)}),O}function u(P){let O=P.nodes().map(F=>{let V=P.node(F).rank;return V===void 0?Number.MAX_VALUE:V}),z=x(Math.min,O);P.nodes().forEach(F=>{let V=P.node(F);Object.hasOwn(V,"rank")&&(V.rank-=z)})}function f(P){let O=P.nodes().map(M=>P.node(M).rank),z=x(Math.min,O),F=[];P.nodes().forEach(M=>{let X=P.node(M).rank-z;F[X]||(F[X]=[]),F[X].push(M)});let V=0,U=P.graph().nodeRankFactor;Array.from(F).forEach((M,X)=>{M===void 0&&X%U!==0?--V:M!==void 0&&V&&M.forEach(J=>P.node(J).rank+=V)})}function p(P,O,z,F){let V={width:0,height:0};return arguments.length>=4&&(V.rank=z,V.order=F),e(P,"border",V,O)}function h(P,O=b){const z=[];for(let F=0;F<P.length;F+=O){const V=P.slice(F,F+O);z.push(V)}return z}const b=65535;function x(P,O){if(O.length>b){const z=h(O);return P.apply(null,z.map(F=>P.apply(null,F)))}else return P.apply(null,O)}function _(P){const z=P.nodes().map(F=>{let V=P.node(F).rank;return V===void 0?Number.MIN_VALUE:V});return x(Math.max,z)}function E(P,O){let z={lhs:[],rhs:[]};return P.forEach(F=>{O(F)?z.lhs.push(F):z.rhs.push(F)}),z}function k(P,O){let z=Date.now();try{return O()}finally{console.log(P+" time: "+(Date.now()-z)+"ms")}}function j(P,O){return O()}let C=0;function R(P){var O=++C;return toString(P)+O}function q(P,O,z=1){O==null&&(O=P,P=0);let F=U=>U<O;z<0&&(F=U=>O<U);const V=[];for(let U=P;F(U);U+=z)V.push(U);return V}function L(P,O){const z={};for(const F of O)P[F]!==void 0&&(z[F]=P[F]);return z}function $(P,O){let z=O;return typeof O=="string"&&(z=F=>F[O]),Object.entries(P).reduce((F,[V,U])=>(F[V]=z(U,V),F),{})}function W(P,O){return P.reduce((z,F,V)=>(z[F]=O[V],z),{})}return Y0}var X0,LO;function zZ(){if(LO)return X0;LO=1;let t=BZ(),e=Xr().uniqueId;X0={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,l(s)):r(s)).forEach(u=>{let f=s.edge(u);s.removeEdge(u),f.forwardName=u.name,f.reversed=!0,s.setEdge(u.w,u.v,f,e("rev"))});function l(u){return f=>u.edge(f).weight}}function r(s){let o=[],l={},u={};function f(p){Object.hasOwn(u,p)||(u[p]=!0,l[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(l,h.w)?o.push(h):f(h.w)}),delete l[p])}return s.nodes().forEach(f),o}function i(s){s.edges().forEach(o=>{let l=s.edge(o);if(l.reversed){s.removeEdge(o);let u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return X0}var eS,MO;function WZ(){if(MO)return eS;MO=1;let t=Xr();eS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,l=i.node(o).rank,u=s.w,f=i.node(u).rank,p=s.name,h=i.edge(s),b=h.labelRank;if(f===l+1)return;i.removeEdge(s);let x,_,E;for(E=0,++l;l<f;++E,++l)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},x=t.addDummyNode(i,"edge",_,"_d"),l===b&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),E===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),l=o.edgeLabel,u;for(i.setEdge(o.edgeObj,l);o.dummy;)u=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=i.node(s)})}return eS}var tS,$O;function Zb(){if($O)return tS;$O=1;const{applyWithChunking:t}=Xr();tS={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(Object.hasOwn(i,o))return l.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var f=t(Math.min,u);return f===Number.POSITIVE_INFINITY&&(f=0),l.rank=f}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return tS}var nS,BO;function I2(){if(BO)return nS;BO=1;var t=Lo().Graph,e=Zb().slack;nS=n;function n(o){var l=new t({directed:!1}),u=o.nodes()[0],f=o.nodeCount();l.setNode(u,{});for(var p,h;r(l,o)<f;)p=i(l,o),h=l.hasNode(p.v)?e(o,p):-e(o,p),s(l,o,h);return l}function r(o,l){function u(f){l.nodeEdges(f).forEach(p=>{var h=p.v,b=f===h?p.w:h;!o.hasNode(b)&&!e(l,p)&&(o.setNode(b,{}),o.setEdge(f,b,{}),u(b))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,l){return l.edges().reduce((f,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(l,p)),h<f[0]?[h,p]:f},[Number.POSITIVE_INFINITY,null])[1]}function s(o,l,u){o.nodes().forEach(f=>l.node(f).rank+=u)}return nS}var rS,zO;function VZ(){if(zO)return rS;zO=1;var t=I2(),e=Zb().slack,n=Zb().longestPath,r=Lo().alg.preorder,i=Lo().alg.postorder,s=Xr().simplify;rS=o,o.initLowLimValues=p,o.initCutValues=l,o.calcCutValue=f,o.leaveEdge=b,o.enterEdge=x,o.exchangeEdges=_;function o(C){C=s(C),n(C);var R=t(C);p(R),l(R,C);for(var q,L;q=b(R);)L=x(R,C,q),_(R,C,q,L)}function l(C,R){var q=i(C,C.nodes());q=q.slice(0,q.length-1),q.forEach(L=>u(C,R,L))}function u(C,R,q){var L=C.node(q),$=L.parent;C.edge(q,$).cutvalue=f(C,R,q)}function f(C,R,q){var L=C.node(q),$=L.parent,W=!0,P=R.edge(q,$),O=0;return P||(W=!1,P=R.edge($,q)),O=P.weight,R.nodeEdges(q).forEach(z=>{var F=z.v===q,V=F?z.w:z.v;if(V!==$){var U=F===W,M=R.edge(z).weight;if(O+=U?M:-M,k(C,q,V)){var X=C.edge(q,V).cutvalue;O+=U?-X:X}}}),O}function p(C,R){arguments.length<2&&(R=C.nodes()[0]),h(C,{},1,R)}function h(C,R,q,L,$){var W=q,P=C.node(L);return R[L]=!0,C.neighbors(L).forEach(O=>{Object.hasOwn(R,O)||(q=h(C,R,q,O,L))}),P.low=W,P.lim=q++,$?P.parent=$:delete P.parent,q}function b(C){return C.edges().find(R=>C.edge(R).cutvalue<0)}function x(C,R,q){var L=q.v,$=q.w;R.hasEdge(L,$)||(L=q.w,$=q.v);var W=C.node(L),P=C.node($),O=W,z=!1;W.lim>P.lim&&(O=P,z=!0);var F=R.edges().filter(V=>z===j(C,C.node(V.v),O)&&z!==j(C,C.node(V.w),O));return F.reduce((V,U)=>e(R,U)<e(R,V)?U:V)}function _(C,R,q,L){var $=q.v,W=q.w;C.removeEdge($,W),C.setEdge(L.v,L.w,{}),p(C),l(C,R),E(C,R)}function E(C,R){var q=C.nodes().find($=>!R.node($).parent),L=r(C,q);L=L.slice(1),L.forEach($=>{var W=C.node($).parent,P=R.edge($,W),O=!1;P||(P=R.edge(W,$),O=!0),R.node($).rank=R.node(W).rank+(O?P.minlen:-P.minlen)})}function k(C,R,q){return C.hasEdge(R,q)}function j(C,R,q){return q.low<=R.lim&&R.lim<=q.lim}return rS}var iS,WO;function UZ(){if(WO)return iS;WO=1;var t=Zb(),e=t.longestPath,n=I2(),r=VZ();iS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return iS}var sS,VO;function HZ(){if(VO)return sS;VO=1,sS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),l=o.edgeObj,u=e(r,i,l.v,l.w),f=u.path,p=u.lca,h=0,b=f[h],x=!0;for(;s!==l.w;){if(o=r.node(s),x){for(;(b=f[h])!==p&&r.node(b).maxRank<o.rank;)h++;b===p&&(x=!1)}if(!x){for(;h<f.length-1&&r.node(b=f[h+1]).minRank<=o.rank;)h++;b=f[h]}r.setParent(s,b),s=r.successors(s)[0]}})}function e(r,i,s,o){let l=[],u=[],f=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,b;h=s;do h=r.parent(h),l.push(h);while(h&&(i[h].low>f||p>i[h].lim));for(b=h,h=o;(h=r.parent(h))!==b;)u.push(h);return{path:l.concat(u.reverse()),lca:b}}function n(r){let i={},s=0;function o(l){let u=s;r.children(l).forEach(o),i[l]={low:u,lim:s++}}return r.children().forEach(o),i}return sS}var oS,UO;function KZ(){if(UO)return oS;UO=1;let t=Xr();oS={run:e,cleanup:s};function e(o){let l=t.addDummyNode(o,"root",{},"_root"),u=r(o),f=Object.values(u),p=t.applyWithChunking(Math.max,f)-1,h=2*p+1;o.graph().nestingRoot=l,o.edges().forEach(x=>o.edge(x).minlen*=h);let b=i(o)+1;o.children().forEach(x=>n(o,l,h,b,p,u,x)),o.graph().nodeRankFactor=h}function n(o,l,u,f,p,h,b){let x=o.children(b);if(!x.length){b!==l&&o.setEdge(l,b,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),E=t.addBorderNode(o,"_bb"),k=o.node(b);o.setParent(_,b),k.borderTop=_,o.setParent(E,b),k.borderBottom=E,x.forEach(j=>{n(o,l,u,f,p,h,j);let C=o.node(j),R=C.borderTop?C.borderTop:j,q=C.borderBottom?C.borderBottom:j,L=C.borderTop?f:2*f,$=R!==q?1:p-h[b]+1;o.setEdge(_,R,{weight:L,minlen:$,nestingEdge:!0}),o.setEdge(q,E,{weight:L,minlen:$,nestingEdge:!0})}),o.parent(b)||o.setEdge(l,_,{weight:0,minlen:p+h[b]})}function r(o){var l={};function u(f,p){var h=o.children(f);h&&h.length&&h.forEach(b=>u(b,p+1)),l[f]=p}return o.children().forEach(f=>u(f,1)),l}function i(o){return o.edges().reduce((l,u)=>l+o.edge(u).weight,0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,o.edges().forEach(u=>{var f=o.edge(u);f.nestingEdge&&o.removeEdge(u)})}return oS}var aS,HO;function QZ(){if(HO)return aS;HO=1;let t=Xr();aS=e;function e(r){function i(s){let o=r.children(s),l=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let u=l.minRank,f=l.maxRank+1;u<f;++u)n(r,"borderLeft","_bl",s,l,u),n(r,"borderRight","_br",s,l,u)}}r.children().forEach(i)}function n(r,i,s,o,l,u){let f={width:0,height:0,rank:u,borderType:i},p=l[i][u-1],h=t.addDummyNode(r,"border",f,s);l[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return aS}var lS,KO;function GZ(){if(KO)return lS;KO=1,lS={adjust:t,undo:e};function t(u){let f=u.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(u)}function e(u){let f=u.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&i(u),(f==="lr"||f==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(f=>r(u.node(f))),u.edges().forEach(f=>r(u.edge(f)))}function r(u){let f=u.width;u.width=u.height,u.height=f}function i(u){u.nodes().forEach(f=>s(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(f=>l(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(l),Object.hasOwn(p,"x")&&l(p)})}function l(u){let f=u.x;u.x=u.y,u.y=f}return lS}var cS,QO;function JZ(){if(QO)return cS;QO=1;let t=Xr();cS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),l=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);l[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),l}return cS}var uS,GO;function ZZ(){if(GO)return uS;GO=1;let t=Xr().zipObject;uS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((b,x)=>x)),l=i.flatMap(b=>r.outEdges(b).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let f=2*u-1;u-=1;let p=new Array(f).fill(0),h=0;return l.forEach(b=>{let x=b.pos+u;p[x]+=b.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=b.weight;h+=b.weight*_}),h}return uS}var dS,JO;function YZ(){if(JO)return dS;JO=1,dS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,l)=>{let u=e.edge(l),f=e.node(l.v);return{sum:o.sum+u.weight*f.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return dS}var fS,ZO;function XZ(){if(ZO)return fS;ZO=1;let t=Xr();fS=e;function e(i,s){let o={};i.forEach((u,f)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let f=o[u.v],p=o[u.w];f!==void 0&&p!==void 0&&(p.indegree++,f.out.push(o[u.w]))});let l=Object.values(o).filter(u=>!u.indegree);return n(l)}function n(i){let s=[];function o(u){return f=>{f.merged||(f.barycenter===void 0||u.barycenter===void 0||f.barycenter>=u.barycenter)&&r(u,f)}}function l(u){return f=>{f.in.push(u),--f.indegree===0&&i.push(f)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(l(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return fS}var pS,YO;function eY(){if(YO)return pS;YO=1;let t=Xr();pS=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),l=o.lhs,u=o.rhs.sort((_,E)=>E.i-_.i),f=[],p=0,h=0,b=0;l.sort(r(!!s)),b=n(f,u,b),l.forEach(_=>{b+=_.vs.length,f.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,b=n(f,u,b)});let x={vs:f.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let l;for(;s.length&&(l=s[s.length-1]).i<=o;)s.pop(),i.push(l.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return pS}var hS,XO;function tY(){if(XO)return hS;XO=1;let t=YZ(),e=XZ(),n=eY();hS=r;function r(o,l,u,f){let p=o.children(l),h=o.node(l),b=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};b&&(p=p.filter(C=>C!==b&&C!==x));let E=t(o,p);E.forEach(C=>{if(o.children(C.v).length){let R=r(o,C.v,u,f);_[C.v]=R,Object.hasOwn(R,"barycenter")&&s(C,R)}});let k=e(E,u);i(k,_);let j=n(k,f);if(b&&(j.vs=[b,j.vs,x].flat(!0),o.predecessors(b).length)){let C=o.node(o.predecessors(b)[0]),R=o.node(o.predecessors(x)[0]);Object.hasOwn(j,"barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+C.order+R.order)/(j.weight+2),j.weight+=2}return j}function i(o,l){o.forEach(u=>{u.vs=u.vs.flatMap(f=>l[f]?l[f].vs:f)})}function s(o,l){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight):(o.barycenter=l.barycenter,o.weight=l.weight)}return hS}var mS,eq;function nY(){if(eq)return mS;eq=1;let t=Lo().Graph,e=Xr();mS=n;function n(i,s,o){let l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(f=>i.node(f));return i.nodes().forEach(f=>{let p=i.node(f),h=i.parent(f);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(f),u.setParent(f,h||l),i[o](f).forEach(b=>{let x=b.v===f?b.w:b.v,_=u.edge(x,f),E=_!==void 0?_.weight:0;u.setEdge(x,f,{weight:i.edge(b).weight+E})}),Object.hasOwn(p,"minRank")&&u.setNode(f,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return mS}var gS,tq;function rY(){if(tq)return gS;tq=1,gS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let l=e.parent(o),u,f;for(;l;){if(u=e.parent(l),u?(f=i[u],i[u]=l):(f=s,s=l),f&&f!==l){n.setEdge(f,l);return}l=u}})}return gS}var yS,nq;function iY(){if(nq)return yS;nq=1;let t=JZ(),e=ZZ(),n=tY(),r=nY(),i=rY(),s=Lo().Graph,o=Xr();yS=l;function l(h,b){if(b&&typeof b.customOrder=="function"){b.customOrder(h,l);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),E=u(h,o.range(x-1,-1,-1),"outEdges"),k=t(h);if(p(h,k),b&&b.disableOptimalOrderHeuristic)return;let j=Number.POSITIVE_INFINITY,C;for(let R=0,q=0;q<4;++R,++q){f(R%2?_:E,R%4>=2),k=o.buildLayerMatrix(h);let L=e(h,k);L<j&&(q=0,C=Object.assign({},k),j=L)}p(h,C)}function u(h,b,x){return b.map(function(_){return r(h,_,x)})}function f(h,b){let x=new s;h.forEach(function(_){let E=_.graph().root,k=n(_,E,x,b);k.vs.forEach((j,C)=>_.node(j).order=C),i(_,x,k.vs)})}function p(h,b){Object.values(b).forEach(x=>x.forEach((_,E)=>h.node(_).order=E))}return yS}var bS,rq;function sY(){if(rq)return bS;rq=1;let t=Lo().Graph,e=Xr();bS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:b};function n(k,j){let C={};function R(q,L){let $=0,W=0,P=q.length,O=L[L.length-1];return L.forEach((z,F)=>{let V=i(k,z),U=V?k.node(V).order:P;(V||z===O)&&(L.slice(W,F+1).forEach(M=>{k.predecessors(M).forEach(X=>{let J=k.node(X),le=J.order;(le<$||U<le)&&!(J.dummy&&k.node(M).dummy)&&s(C,X,M)})}),W=F+1,$=U)}),L}return j.length&&j.reduce(R),C}function r(k,j){let C={};function R(L,$,W,P,O){let z;e.range($,W).forEach(F=>{z=L[F],k.node(z).dummy&&k.predecessors(z).forEach(V=>{let U=k.node(V);U.dummy&&(U.order<P||U.order>O)&&s(C,V,z)})})}function q(L,$){let W=-1,P,O=0;return $.forEach((z,F)=>{if(k.node(z).dummy==="border"){let V=k.predecessors(z);V.length&&(P=k.node(V[0]).order,R($,O,F,W,P),O=F,W=P)}R($,O,$.length,P,L.length)}),$}return j.length&&j.reduce(q),C}function i(k,j){if(k.node(j).dummy)return k.predecessors(j).find(C=>k.node(C).dummy)}function s(k,j,C){if(j>C){let q=j;j=C,C=q}let R=k[j];R||(k[j]=R={}),R[C]=!0}function o(k,j,C){if(j>C){let R=j;j=C,C=R}return!!k[j]&&Object.hasOwn(k[j],C)}function l(k,j,C,R){let q={},L={},$={};return j.forEach(W=>{W.forEach((P,O)=>{q[P]=P,L[P]=P,$[P]=O})}),j.forEach(W=>{let P=-1;W.forEach(O=>{let z=R(O);if(z.length){z=z.sort((V,U)=>$[V]-$[U]);let F=(z.length-1)/2;for(let V=Math.floor(F),U=Math.ceil(F);V<=U;++V){let M=z[V];L[O]===O&&P<$[M]&&!o(C,O,M)&&(L[M]=O,L[O]=q[O]=q[M],P=$[M])}}})}),{root:q,align:L}}function u(k,j,C,R,q){let L={},$=f(k,j,C,q),W=q?"borderLeft":"borderRight";function P(F,V){let U=$.nodes(),M=U.pop(),X={};for(;M;)X[M]?F(M):(X[M]=!0,U.push(M),U=U.concat(V(M))),M=U.pop()}function O(F){L[F]=$.inEdges(F).reduce((V,U)=>Math.max(V,L[U.v]+$.edge(U)),0)}function z(F){let V=$.outEdges(F).reduce((M,X)=>Math.min(M,L[X.w]-$.edge(X)),Number.POSITIVE_INFINITY),U=k.node(F);V!==Number.POSITIVE_INFINITY&&U.borderType!==W&&(L[F]=Math.max(L[F],V))}return P(O,$.predecessors.bind($)),P(z,$.successors.bind($)),Object.keys(R).forEach(F=>L[F]=L[C[F]]),L}function f(k,j,C,R){let q=new t,L=k.graph(),$=_(L.nodesep,L.edgesep,R);return j.forEach(W=>{let P;W.forEach(O=>{let z=C[O];if(q.setNode(z),P){var F=C[P],V=q.edge(F,z);q.setEdge(F,z,Math.max($(k,O,P),V||0))}P=O})}),q}function p(k,j){return Object.values(j).reduce((C,R)=>{let q=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY;Object.entries(R).forEach(([W,P])=>{let O=E(k,W)/2;q=Math.max(P+O,q),L=Math.min(P-O,L)});const $=q-L;return $<C[0]&&(C=[$,R]),C},[Number.POSITIVE_INFINITY,null])[1]}function h(k,j){let C=Object.values(j),R=e.applyWithChunking(Math.min,C),q=e.applyWithChunking(Math.max,C);["u","d"].forEach(L=>{["l","r"].forEach($=>{let W=L+$,P=k[W];if(P===j)return;let O=Object.values(P),z=R-e.applyWithChunking(Math.min,O);$!=="l"&&(z=q-e.applyWithChunking(Math.max,O)),z&&(k[W]=e.mapValues(P,F=>F+z))})})}function b(k,j){return e.mapValues(k.ul,(C,R)=>{if(j)return k[j.toLowerCase()][R];{let q=Object.values(k).map(L=>L[R]).sort((L,$)=>L-$);return(q[1]+q[2])/2}})}function x(k){let j=e.buildLayerMatrix(k),C=Object.assign(n(k,j),r(k,j)),R={},q;["u","d"].forEach($=>{q=$==="u"?j:Object.values(j).reverse(),["l","r"].forEach(W=>{W==="r"&&(q=q.map(F=>Object.values(F).reverse()));let P=($==="u"?k.predecessors:k.successors).bind(k),O=l(k,q,C,P),z=u(k,q,O.root,O.align,W==="r");W==="r"&&(z=e.mapValues(z,F=>-F)),R[$+W]=z})});let L=p(k,R);return h(R,L),b(R,k.graph().align)}function _(k,j,C){return(R,q,L)=>{let $=R.node(q),W=R.node(L),P=0,O;if(P+=$.width/2,Object.hasOwn($,"labelpos"))switch($.labelpos.toLowerCase()){case"l":O=-$.width/2;break;case"r":O=$.width/2;break}if(O&&(P+=C?O:-O),O=0,P+=($.dummy?j:k)/2,P+=(W.dummy?j:k)/2,P+=W.width/2,Object.hasOwn(W,"labelpos"))switch(W.labelpos.toLowerCase()){case"l":O=W.width/2;break;case"r":O=-W.width/2;break}return O&&(P+=C?O:-O),O=0,P}}function E(k,j){return k.node(j).width}return bS}var vS,iq;function oY(){if(iq)return vS;iq=1;let t=Xr(),e=sY().positionX;vS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,l=0;s.forEach(u=>{const f=u.reduce((p,h)=>{const b=i.node(h).height;return p>b?p:b},0);u.forEach(p=>i.node(p).y=l+f/2),l+=f+o})}return vS}var xS,sq;function aY(){if(sq)return xS;sq=1;let t=zZ(),e=WZ(),n=UZ(),r=Xr().normalizeRanks,i=HZ(),s=Xr().removeEmptyRanks,o=KZ(),l=QZ(),u=GZ(),f=iY(),p=oY(),h=Xr(),b=Lo().Graph;xS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ie=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ie,we,ye)),we("  updateInputGraph",()=>E(de,Ie))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>O(de)),ye("    removeSelfEdges",()=>ie(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>z(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>F(de)),ye("    removeEdgeLabelProxies",()=>V(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>l(de)),ye("    order",()=>f(de,we)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>X(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>U(de)),ye("    assignNodeIntersects",()=>M(de)),ye("    reversePoints",()=>J(de)),ye("    acyclic.undo",()=>t.undo(de))}function E(de,ye){de.nodes().forEach(we=>{let Ie=de.node(we),ze=ye.node(we);Ie&&(Ie.x=ze.x,Ie.y=ze.y,Ie.rank=ze.rank,ye.children(we).length&&(Ie.width=ze.width,Ie.height=ze.height))}),de.edges().forEach(we=>{let Ie=de.edge(we),ze=ye.edge(we);Ie.points=ze.points,Object.hasOwn(ze,"x")&&(Ie.x=ze.x,Ie.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let k=["nodesep","edgesep","ranksep","marginx","marginy"],j={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},C=["acyclicer","ranker","rankdir","align"],R=["width","height"],q={width:0,height:0},L=["minlen","weight","width","height","labeloffset"],$={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},W=["labelpos"];function P(de){let ye=new b({multigraph:!0,compound:!0}),we=ue(de.graph());return ye.setGraph(Object.assign({},j,te(we,k),h.pick(we,C))),de.nodes().forEach(Ie=>{let ze=ue(de.node(Ie));const Re=te(ze,R);Object.keys(q).forEach(De=>{Re[De]===void 0&&(Re[De]=q[De])}),ye.setNode(Ie,Re),ye.setParent(Ie,de.parent(Ie))}),de.edges().forEach(Ie=>{let ze=ue(de.edge(Ie));ye.setEdge(Ie,Object.assign({},$,te(ze,L),h.pick(ze,W)))}),ye}function O(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ie=de.edge(we);Ie.minlen*=2,Ie.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ie.width+=Ie.labeloffset:Ie.height+=Ie.labeloffset)})}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ie=de.node(ye.v),Re={rank:(de.node(ye.w).rank-Ie.rank)/2+Ie.rank,e:ye};h.addDummyNode(de,"edge-proxy",Re,"_ep")}})}function F(de){let ye=0;de.nodes().forEach(we=>{let Ie=de.node(we);Ie.borderTop&&(Ie.minRank=de.node(Ie.borderTop).rank,Ie.maxRank=de.node(Ie.borderBottom).rank,ye=Math.max(ye,Ie.maxRank))}),de.graph().maxRank=ye}function V(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function U(de){let ye=Number.POSITIVE_INFINITY,we=0,Ie=Number.POSITIVE_INFINITY,ze=0,Re=de.graph(),De=Re.marginx||0,Je=Re.marginy||0;function Xe(Ve){let ct=Ve.x,_t=Ve.y,Rt=Ve.width,Ut=Ve.height;ye=Math.min(ye,ct-Rt/2),we=Math.max(we,ct+Rt/2),Ie=Math.min(Ie,_t-Ut/2),ze=Math.max(ze,_t+Ut/2)}de.nodes().forEach(Ve=>Xe(de.node(Ve))),de.edges().forEach(Ve=>{let ct=de.edge(Ve);Object.hasOwn(ct,"x")&&Xe(ct)}),ye-=De,Ie-=Je,de.nodes().forEach(Ve=>{let ct=de.node(Ve);ct.x-=ye,ct.y-=Ie}),de.edges().forEach(Ve=>{let ct=de.edge(Ve);ct.points.forEach(_t=>{_t.x-=ye,_t.y-=Ie}),Object.hasOwn(ct,"x")&&(ct.x-=ye),Object.hasOwn(ct,"y")&&(ct.y-=Ie)}),Re.width=we-ye+De,Re.height=ze-Ie+Je}function M(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ie=de.node(ye.v),ze=de.node(ye.w),Re,De;we.points?(Re=we.points[0],De=we.points[we.points.length-1]):(we.points=[],Re=ze,De=Ie),we.points.unshift(h.intersectRect(Ie,Re)),we.points.push(h.intersectRect(ze,De))})}function X(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function J(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ie=de.node(we.borderTop),ze=de.node(we.borderBottom),Re=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-Re.x),we.height=Math.abs(ze.y-Ie.y),we.x=Re.x+we.width/2,we.y=Ie.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function ie(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ie=0;we.forEach((ze,Re)=>{var De=de.node(ze);De.order=Re+Ie,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:Re+ ++Ie,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ie=de.node(we.e.v),ze=Ie.x+Ie.width/2,Re=Ie.y,De=we.x-ze,Je=Ie.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:Re-Je},{x:ze+5*De/6,y:Re-Je},{x:ze+De,y:Re},{x:ze+5*De/6,y:Re+Je},{x:ze+2*De/3,y:Re+Je}],we.label.x=we.x,we.label.y=we.y}})}function te(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ue(de){var ye={};return de&&Object.entries(de).forEach(([we,Ie])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ie}),ye}return xS}var wS,oq;function lY(){if(oq)return wS;oq=1;let t=Xr(),e=Lo().Graph;wS={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,l)=>{let u="layer"+l;s.setNode(u,{rank:"same"}),o.reduce((f,p)=>(s.setEdge(f,p,{style:"invis"}),p))}),s}return wS}var _S,aq;function cY(){return aq||(aq=1,_S="1.1.4"),_S}var SS,lq;function uY(){return lq||(lq=1,SS={graphlib:Lo(),layout:aY(),debug:lY(),util:{time:Xr().time,notime:Xr().notime},version:cY()}),SS}var dY=uY();const N2=co(dY);function Hr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Hr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var fY={value:()=>{}};function Zv(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fy(n)}function Fy(t){this._=t}function pY(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fy.prototype=Zv.prototype={constructor:Fy,on:function(t,e){var n=this._,r=pY(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=hY(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=cq(n[i],t.name,e);else if(e==null)for(i in n)n[i]=cq(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fy(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function hY(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function cq(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=fY,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var WE="http://www.w3.org/1999/xhtml";const uq={svg:"http://www.w3.org/2000/svg",xhtml:WE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yv(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),uq.hasOwnProperty(e)?{space:uq[e],local:t}:t}function mY(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===WE&&e.documentElement.namespaceURI===WE?e.createElement(t):e.createElementNS(n,t)}}function gY(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function k2(t){var e=Yv(t);return(e.local?gY:mY)(e)}function yY(){}function CN(t){return t==null?yY:function(){return this.querySelector(t)}}function bY(t){typeof t!="function"&&(t=CN(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,f,p=0;p<o;++p)(u=s[p])&&(f=t.call(u,u.__data__,p,s))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f);return new Fs(r,this._parents)}function vY(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function xY(){return[]}function C2(t){return t==null?xY:function(){return this.querySelectorAll(t)}}function wY(t){return function(){return vY(t.apply(this,arguments))}}function _Y(t){typeof t=="function"?t=wY(t):t=C2(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&(r.push(t.call(u,u.__data__,f,o)),i.push(u));return new Fs(r,i)}function T2(t){return function(){return this.matches(t)}}function j2(t){return function(e){return e.matches(t)}}var SY=Array.prototype.find;function EY(t){return function(){return SY.call(this.children,t)}}function IY(){return this.firstElementChild}function NY(t){return this.select(t==null?IY:EY(typeof t=="function"?t:j2(t)))}var kY=Array.prototype.filter;function CY(){return Array.from(this.children)}function TY(t){return function(){return kY.call(this.children,t)}}function jY(t){return this.selectAll(t==null?CY:TY(typeof t=="function"?t:j2(t)))}function RY(t){typeof t!="function"&&(t=T2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Fs(r,this._parents)}function R2(t){return new Array(t.length)}function OY(){return new Fs(this._enter||this._groups.map(R2),this._parents)}function Yb(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Yb.prototype={constructor:Yb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qY(t){return function(){return t}}function AY(t,e,n,r,i,s){for(var o=0,l,u=e.length,f=s.length;o<f;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Yb(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function PY(t,e,n,r,i,s,o){var l,u,f=new Map,p=e.length,h=s.length,b=new Array(p),x;for(l=0;l<p;++l)(u=e[l])&&(b[l]=x=o.call(u,u.__data__,l,e)+"",f.has(x)?i[l]=u:f.set(x,u));for(l=0;l<h;++l)x=o.call(t,s[l],l,s)+"",(u=f.get(x))?(r[l]=u,u.__data__=s[l],f.delete(x)):n[l]=new Yb(t,s[l]);for(l=0;l<p;++l)(u=e[l])&&f.get(b[l])===u&&(i[l]=u)}function FY(t){return t.__data__}function DY(t,e){if(!arguments.length)return Array.from(this,FY);var n=e?PY:AY,r=this._parents,i=this._groups;typeof t!="function"&&(t=qY(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),f=0;f<s;++f){var p=r[f],h=i[f],b=h.length,x=LY(t.call(p,p&&p.__data__,f,r)),_=x.length,E=l[f]=new Array(_),k=o[f]=new Array(_),j=u[f]=new Array(b);n(p,h,E,k,j,x,e);for(var C=0,R=0,q,L;C<_;++C)if(q=E[C]){for(C>=R&&(R=C+1);!(L=k[R])&&++R<_;);q._next=L||null}}return o=new Fs(o,r),o._enter=l,o._exit=u,o}function LY(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function MY(){return new Fs(this._exit||this._groups.map(R2),this._parents)}function $Y(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function BY(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var f=n[u],p=r[u],h=f.length,b=l[u]=new Array(h),x,_=0;_<h;++_)(x=f[_]||p[_])&&(b[_]=x);for(;u<i;++u)l[u]=n[u];return new Fs(l,this._parents)}function zY(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function WY(t){t||(t=VY);function e(h,b){return h&&b?t(h.__data__,b.__data__):!h-!b}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),f,p=0;p<l;++p)(f=o[p])&&(u[p]=f);u.sort(e)}return new Fs(i,this._parents).order()}function VY(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function UY(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function HY(){return Array.from(this)}function KY(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function QY(){let t=0;for(const e of this)++t;return t}function GY(){return!this.node()}function JY(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function ZY(t){return function(){this.removeAttribute(t)}}function YY(t){return function(){this.removeAttributeNS(t.space,t.local)}}function XY(t,e){return function(){this.setAttribute(t,e)}}function eX(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function tX(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function nX(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function rX(t,e){var n=Yv(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?YY:ZY:typeof e=="function"?n.local?nX:tX:n.local?eX:XY)(n,e))}function O2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function iX(t){return function(){this.style.removeProperty(t)}}function sX(t,e,n){return function(){this.style.setProperty(t,e,n)}}function oX(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function aX(t,e,n){return arguments.length>1?this.each((e==null?iX:typeof e=="function"?oX:sX)(t,e,n??"")):Gd(this.node(),t)}function Gd(t,e){return t.style.getPropertyValue(e)||O2(t).getComputedStyle(t,null).getPropertyValue(e)}function lX(t){return function(){delete this[t]}}function cX(t,e){return function(){this[t]=e}}function uX(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function dX(t,e){return arguments.length>1?this.each((e==null?lX:typeof e=="function"?uX:cX)(t,e)):this.node()[t]}function q2(t){return t.trim().split(/^|\s+/)}function TN(t){return t.classList||new A2(t)}function A2(t){this._node=t,this._names=q2(t.getAttribute("class")||"")}A2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function P2(t,e){for(var n=TN(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function F2(t,e){for(var n=TN(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function fX(t){return function(){P2(this,t)}}function pX(t){return function(){F2(this,t)}}function hX(t,e){return function(){(e.apply(this,arguments)?P2:F2)(this,t)}}function mX(t,e){var n=q2(t+"");if(arguments.length<2){for(var r=TN(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?hX:e?fX:pX)(n,e))}function gX(){this.textContent=""}function yX(t){return function(){this.textContent=t}}function bX(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function vX(t){return arguments.length?this.each(t==null?gX:(typeof t=="function"?bX:yX)(t)):this.node().textContent}function xX(){this.innerHTML=""}function wX(t){return function(){this.innerHTML=t}}function _X(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function SX(t){return arguments.length?this.each(t==null?xX:(typeof t=="function"?_X:wX)(t)):this.node().innerHTML}function EX(){this.nextSibling&&this.parentNode.appendChild(this)}function IX(){return this.each(EX)}function NX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kX(){return this.each(NX)}function CX(t){var e=typeof t=="function"?t:k2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function TX(){return null}function jX(t,e){var n=typeof t=="function"?t:k2(t),r=e==null?TX:typeof e=="function"?e:CN(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function RX(){var t=this.parentNode;t&&t.removeChild(this)}function OX(){return this.each(RX)}function qX(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function AX(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function PX(t){return this.select(t?AX:qX)}function FX(t){return arguments.length?this.property("__data__",t):this.node().__data__}function DX(t){return function(e){t.call(this,e,this.__data__)}}function LX(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function MX(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function $X(t,e,n){return function(){var r=this.__on,i,s=DX(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function BX(t,e,n){var r=LX(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,p;u<f;++u)for(i=0,p=l[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?$X:MX,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function D2(t,e,n){var r=O2(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zX(t,e){return function(){return D2(this,t,e)}}function WX(t,e){return function(){return D2(this,t,e.apply(this,arguments))}}function VX(t,e){return this.each((typeof e=="function"?WX:zX)(t,e))}function*UX(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var L2=[null];function Fs(t,e){this._groups=t,this._parents=e}function xm(){return new Fs([[document.documentElement]],L2)}function HX(){return this}Fs.prototype=xm.prototype={constructor:Fs,select:bY,selectAll:_Y,selectChild:NY,selectChildren:jY,filter:RY,data:DY,enter:OY,exit:MY,join:$Y,merge:BY,selection:HX,order:zY,sort:WY,call:UY,nodes:HY,node:KY,size:QY,empty:GY,each:JY,attr:rX,style:aX,property:dX,classed:mX,text:vX,html:SX,raise:IX,lower:kX,append:CX,insert:jX,remove:OX,clone:PX,datum:FX,on:BX,dispatch:VX,[Symbol.iterator]:UX};function js(t){return typeof t=="string"?new Fs([[document.querySelector(t)]],[document.documentElement]):new Fs([[t]],L2)}function KX(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Eo(t,e){if(t=KX(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const QX={passive:!1},Ph={capture:!0,passive:!1};function ES(t){t.stopImmediatePropagation()}function Fd(t){t.preventDefault(),t.stopImmediatePropagation()}function M2(t){var e=t.document.documentElement,n=js(t).on("dragstart.drag",Fd,Ph);"onselectstart"in e?n.on("selectstart.drag",Fd,Ph):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function $2(t,e){var n=t.document.documentElement,r=js(t).on("dragstart.drag",null);e&&(r.on("click.drag",Fd,Ph),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ey=t=>()=>t;function VE(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}VE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function GX(t){return!t.ctrlKey&&!t.button}function JX(){return this.parentNode}function ZX(t,e){return e??{x:t.x,y:t.y}}function YX(){return navigator.maxTouchPoints||"ontouchstart"in this}function B2(){var t=GX,e=JX,n=ZX,r=YX,i={},s=Zv("start","drag","end"),o=0,l,u,f,p,h=0;function b(q){q.on("mousedown.drag",x).filter(r).on("touchstart.drag",k).on("touchmove.drag",j,QX).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(q,L){if(!(p||!t.call(this,q,L))){var $=R(this,e.call(this,q,L),q,L,"mouse");$&&(js(q.view).on("mousemove.drag",_,Ph).on("mouseup.drag",E,Ph),M2(q.view),ES(q),f=!1,l=q.clientX,u=q.clientY,$("start",q))}}function _(q){if(Fd(q),!f){var L=q.clientX-l,$=q.clientY-u;f=L*L+$*$>h}i.mouse("drag",q)}function E(q){js(q.view).on("mousemove.drag mouseup.drag",null),$2(q.view,f),Fd(q),i.mouse("end",q)}function k(q,L){if(t.call(this,q,L)){var $=q.changedTouches,W=e.call(this,q,L),P=$.length,O,z;for(O=0;O<P;++O)(z=R(this,W,q,L,$[O].identifier,$[O]))&&(ES(q),z("start",q,$[O]))}}function j(q){var L=q.changedTouches,$=L.length,W,P;for(W=0;W<$;++W)(P=i[L[W].identifier])&&(Fd(q),P("drag",q,L[W]))}function C(q){var L=q.changedTouches,$=L.length,W,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),W=0;W<$;++W)(P=i[L[W].identifier])&&(ES(q),P("end",q,L[W]))}function R(q,L,$,W,P,O){var z=s.copy(),F=Eo(O||$,L),V,U,M;if((M=n.call(q,new VE("beforestart",{sourceEvent:$,target:b,identifier:P,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:z}),W))!=null)return V=M.x-F[0]||0,U=M.y-F[1]||0,function X(J,le,ie){var ne=F,oe;switch(J){case"start":i[P]=X,oe=o++;break;case"end":delete i[P],--o;case"drag":F=Eo(ie||le,L),oe=o;break}z.call(J,q,new VE(J,{sourceEvent:le,subject:M,target:b,identifier:P,active:oe,x:F[0]+V,y:F[1]+U,dx:F[0]-ne[0],dy:F[1]-ne[1],dispatch:z}),W)}}return b.filter=function(q){return arguments.length?(t=typeof q=="function"?q:ey(!!q),b):t},b.container=function(q){return arguments.length?(e=typeof q=="function"?q:ey(q),b):e},b.subject=function(q){return arguments.length?(n=typeof q=="function"?q:ey(q),b):n},b.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:ey(!!q),b):r},b.on=function(){var q=s.on.apply(s,arguments);return q===s?b:q},b.clickDistance=function(q){return arguments.length?(h=(q=+q)*q,b):Math.sqrt(h)},b}function jN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function z2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wm(){}var Fh=.7,Xb=1/Fh,Dd="\\s*([+-]?\\d+)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XX=/^#([0-9a-f]{3,8})$/,eee=new RegExp(`^rgb\\(${Dd},${Dd},${Dd}\\)$`),tee=new RegExp(`^rgb\\(${na},${na},${na}\\)$`),nee=new RegExp(`^rgba\\(${Dd},${Dd},${Dd},${Dh}\\)$`),ree=new RegExp(`^rgba\\(${na},${na},${na},${Dh}\\)$`),iee=new RegExp(`^hsl\\(${Dh},${na},${na}\\)$`),see=new RegExp(`^hsla\\(${Dh},${na},${na},${Dh}\\)$`),dq={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};jN(wm,Lh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fq,formatHex:fq,formatHex8:oee,formatHsl:aee,formatRgb:pq,toString:pq});function fq(){return this.rgb().formatHex()}function oee(){return this.rgb().formatHex8()}function aee(){return W2(this).formatHsl()}function pq(){return this.rgb().formatRgb()}function Lh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=XX.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?hq(e):n===3?new ps(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ty(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ty(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eee.exec(t))?new ps(e[1],e[2],e[3],1):(e=tee.exec(t))?new ps(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nee.exec(t))?ty(e[1],e[2],e[3],e[4]):(e=ree.exec(t))?ty(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iee.exec(t))?yq(e[1],e[2]/100,e[3]/100,1):(e=see.exec(t))?yq(e[1],e[2]/100,e[3]/100,e[4]):dq.hasOwnProperty(t)?hq(dq[t]):t==="transparent"?new ps(NaN,NaN,NaN,0):null}function hq(t){return new ps(t>>16&255,t>>8&255,t&255,1)}function ty(t,e,n,r){return r<=0&&(t=e=n=NaN),new ps(t,e,n,r)}function lee(t){return t instanceof wm||(t=Lh(t)),t?(t=t.rgb(),new ps(t.r,t.g,t.b,t.opacity)):new ps}function UE(t,e,n,r){return arguments.length===1?lee(t):new ps(t,e,n,r??1)}function ps(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}jN(ps,UE,z2(wm,{brighter(t){return t=t==null?Xb:Math.pow(Xb,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Fh:Math.pow(Fh,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ps(Zc(this.r),Zc(this.g),Zc(this.b),ev(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mq,formatHex:mq,formatHex8:cee,formatRgb:gq,toString:gq}));function mq(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}`}function cee(){return`#${Hc(this.r)}${Hc(this.g)}${Hc(this.b)}${Hc((isNaN(this.opacity)?1:this.opacity)*255)}`}function gq(){const t=ev(this.opacity);return`${t===1?"rgb(":"rgba("}${Zc(this.r)}, ${Zc(this.g)}, ${Zc(this.b)}${t===1?")":`, ${t})`}`}function ev(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hc(t){return t=Zc(t),(t<16?"0":"")+t.toString(16)}function yq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new To(t,e,n,r)}function W2(t){if(t instanceof To)return new To(t.h,t.s,t.l,t.opacity);if(t instanceof wm||(t=Lh(t)),!t)return new To;if(t instanceof To)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new To(o,l,u,t.opacity)}function uee(t,e,n,r){return arguments.length===1?W2(t):new To(t,e,n,r??1)}function To(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jN(To,uee,z2(wm,{brighter(t){return t=t==null?Xb:Math.pow(Xb,t),new To(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Fh:Math.pow(Fh,t),new To(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ps(IS(t>=240?t-240:t+120,i,r),IS(t,i,r),IS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new To(bq(this.h),ny(this.s),ny(this.l),ev(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ev(this.opacity);return`${t===1?"hsl(":"hsla("}${bq(this.h)}, ${ny(this.s)*100}%, ${ny(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bq(t){return t=(t||0)%360,t<0?t+360:t}function ny(t){return Math.max(0,Math.min(1,t||0))}function IS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const V2=t=>()=>t;function dee(t,e){return function(n){return t+n*e}}function fee(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pee(t){return(t=+t)==1?U2:function(e,n){return n-e?fee(e,n,t):V2(isNaN(e)?n:e)}}function U2(t,e){var n=e-t;return n?dee(t,n):V2(isNaN(t)?e:t)}const vq=function t(e){var n=pee(e);function r(i,s){var o=n((i=UE(i)).r,(s=UE(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),f=U2(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=t,r}(1);function Cl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var HE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,NS=new RegExp(HE.source,"g");function hee(t){return function(){return t}}function mee(t){return function(e){return t(e)+""}}function gee(t,e){var n=HE.lastIndex=NS.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=HE.exec(t))&&(i=NS.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Cl(r,i)})),n=NS.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?mee(u[0].x):hee(e):(e=u.length,function(f){for(var p=0,h;p<e;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}var xq=180/Math.PI,KE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function H2(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*xq,skewX:Math.atan(u)*xq,scaleX:o,scaleY:l}}var ry;function yee(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?KE:H2(e.a,e.b,e.c,e.d,e.e,e.f)}function bee(t){return t==null||(ry||(ry=document.createElementNS("http://www.w3.org/2000/svg","g")),ry.setAttribute("transform",t),!(t=ry.transform.baseVal.consolidate()))?KE:(t=t.matrix,H2(t.a,t.b,t.c,t.d,t.e,t.f))}function K2(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push("translate(",null,e,null,n);_.push({i:E-4,x:Cl(f,h)},{i:E-2,x:Cl(p,b)})}else(h||b)&&x.push("translate("+h+e+b+n)}function o(f,p,h,b){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),b.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Cl(f,p)})):p&&h.push(i(h)+"rotate("+p+r)}function l(f,p,h,b){f!==p?b.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Cl(f,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push(i(x)+"scale(",null,",",null,")");_.push({i:E-4,x:Cl(f,h)},{i:E-2,x:Cl(p,b)})}else(h!==1||b!==1)&&x.push(i(x)+"scale("+h+","+b+")")}return function(f,p){var h=[],b=[];return f=t(f),p=t(p),s(f.translateX,f.translateY,p.translateX,p.translateY,h,b),o(f.rotate,p.rotate,h,b),l(f.skewX,p.skewX,h,b),u(f.scaleX,f.scaleY,p.scaleX,p.scaleY,h,b),f=p=null,function(x){for(var _=-1,E=b.length,k;++_<E;)h[(k=b[_]).i]=k.x(x);return h.join("")}}}var vee=K2(yee,"px, ","px)","deg)"),xee=K2(bee,", ",")",")"),wee=1e-12;function wq(t){return((t=Math.exp(t))+1/t)/2}function _ee(t){return((t=Math.exp(t))-1/t)/2}function See(t){return((t=Math.exp(2*t))-1)/(t+1)}const Eee=function t(e,n,r){function i(s,o){var l=s[0],u=s[1],f=s[2],p=o[0],h=o[1],b=o[2],x=p-l,_=h-u,E=x*x+_*_,k,j;if(E<wee)j=Math.log(b/f)/e,k=function(W){return[l+W*x,u+W*_,f*Math.exp(e*W*j)]};else{var C=Math.sqrt(E),R=(b*b-f*f+r*E)/(2*f*n*C),q=(b*b-f*f-r*E)/(2*b*n*C),L=Math.log(Math.sqrt(R*R+1)-R),$=Math.log(Math.sqrt(q*q+1)-q);j=($-L)/e,k=function(W){var P=W*j,O=wq(L),z=f/(n*C)*(O*See(e*P+L)-_ee(L));return[l+z*x,u+z*_,f*O/wq(e*P+L)]}}return k.duration=j*1e3*e/Math.SQRT2,k}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4);var Jd=0,qp=0,xp=0,Q2=1e3,tv,Ap,nv=0,cu=0,Xv=0,Mh=typeof performance=="object"&&performance.now?performance:Date,G2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function RN(){return cu||(G2(Iee),cu=Mh.now()+Xv)}function Iee(){cu=0}function rv(){this._call=this._time=this._next=null}rv.prototype=J2.prototype={constructor:rv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?RN():+n)+(e==null?0:+e),!this._next&&Ap!==this&&(Ap?Ap._next=this:tv=this,Ap=this),this._call=t,this._time=n,QE()},stop:function(){this._call&&(this._call=null,this._time=1/0,QE())}};function J2(t,e,n){var r=new rv;return r.restart(t,e,n),r}function Nee(){RN(),++Jd;for(var t=tv,e;t;)(e=cu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Jd}function _q(){cu=(nv=Mh.now())+Xv,Jd=qp=0;try{Nee()}finally{Jd=0,Cee(),cu=0}}function kee(){var t=Mh.now(),e=t-nv;e>Q2&&(Xv-=e,nv=t)}function Cee(){for(var t,e=tv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:tv=n);Ap=t,QE(r)}function QE(t){if(!Jd){qp&&(qp=clearTimeout(qp));var e=t-cu;e>24?(t<1/0&&(qp=setTimeout(_q,t-Mh.now()-Xv)),xp&&(xp=clearInterval(xp))):(xp||(nv=Mh.now(),xp=setInterval(kee,Q2)),Jd=1,G2(_q))}}function Sq(t,e,n){var r=new rv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Tee=Zv("start","end","cancel","interrupt"),jee=[],Z2=0,Eq=1,GE=2,Dy=3,Iq=4,JE=5,Ly=6;function ex(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ree(t,n,{name:e,index:r,group:i,on:Tee,tween:jee,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Z2})}function ON(t,e){var n=Bo(t,e);if(n.state>Z2)throw new Error("too late; already scheduled");return n}function fa(t,e){var n=Bo(t,e);if(n.state>Dy)throw new Error("too late; already running");return n}function Bo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ree(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=J2(s,0,n.time);function s(f){n.state=Eq,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var p,h,b,x;if(n.state!==Eq)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===Dy)return Sq(o);x.state===Iq?(x.state=Ly,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=Ly,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(Sq(function(){n.state===Dy&&(n.state=Iq,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=GE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===GE){for(n.state=Dy,i=new Array(b=n.tween.length),p=0,h=-1;p<b;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function l(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=JE,1),h=-1,b=i.length;++h<b;)i[h].call(t,p);n.state===JE&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Ly,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function My(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>GE&&r.state<JE,r.state=Ly,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Oee(t){return this.each(function(){My(this,t)})}function qee(t,e){var n,r;return function(){var i=fa(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Aee(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=fa(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,f=i.length;u<f;++u)if(i[u].name===e){i[u]=l;break}u===f&&i.push(l)}s.tween=i}}function Pee(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Bo(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?qee:Aee)(n,t,e))}function qN(t,e,n){var r=t._id;return t.each(function(){var i=fa(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Bo(i,r).value[e]}}function Y2(t,e){var n;return(typeof e=="number"?Cl:e instanceof Lh?vq:(n=Lh(e))?(e=n,vq):gee)(t,e)}function Fee(t){return function(){this.removeAttribute(t)}}function Dee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lee(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Mee(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function $ee(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function Bee(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function zee(t,e){var n=Yv(t),r=n==="transform"?xee:Y2;return this.attrTween(t,typeof e=="function"?(n.local?Bee:$ee)(n,r,qN(this,"attr."+t,e)):e==null?(n.local?Dee:Fee)(n):(n.local?Mee:Lee)(n,r,e))}function Wee(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Vee(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Uee(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Vee(t,s)),n}return i._value=e,i}function Hee(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Wee(t,s)),n}return i._value=e,i}function Kee(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Yv(t);return this.tween(n,(r.local?Uee:Hee)(r,e))}function Qee(t,e){return function(){ON(this,t).delay=+e.apply(this,arguments)}}function Gee(t,e){return e=+e,function(){ON(this,t).delay=e}}function Jee(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qee:Gee)(e,t)):Bo(this.node(),e).delay}function Zee(t,e){return function(){fa(this,t).duration=+e.apply(this,arguments)}}function Yee(t,e){return e=+e,function(){fa(this,t).duration=e}}function Xee(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zee:Yee)(e,t)):Bo(this.node(),e).duration}function ete(t,e){if(typeof e!="function")throw new Error;return function(){fa(this,t).ease=e}}function tte(t){var e=this._id;return arguments.length?this.each(ete(e,t)):Bo(this.node(),e).ease}function nte(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fa(this,t).ease=n}}function rte(t){if(typeof t!="function")throw new Error;return this.each(nte(this._id,t))}function ite(t){typeof t!="function"&&(t=T2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Qa(r,this._parents,this._name,this._id)}function ste(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],f=n[l],p=u.length,h=o[l]=new Array(p),b,x=0;x<p;++x)(b=u[x]||f[x])&&(h[x]=b);for(;l<r;++l)o[l]=e[l];return new Qa(o,this._parents,this._name,this._id)}function ote(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ate(t,e,n){var r,i,s=ote(e)?ON:fa;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function lte(t,e){var n=this._id;return arguments.length<2?Bo(this.node(),n).on.on(t):this.each(ate(n,t,e))}function cte(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ute(){return this.on("end.remove",cte(this._id))}function dte(t){var e=this._name,n=this._id;typeof t!="function"&&(t=CN(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,f=s[o]=new Array(u),p,h,b=0;b<u;++b)(p=l[b])&&(h=t.call(p,p.__data__,b,l))&&("__data__"in p&&(h.__data__=p.__data__),f[b]=h,ex(f[b],e,n,b,f,Bo(p,n)));return new Qa(s,this._parents,e,n)}function fte(t){var e=this._name,n=this._id;typeof t!="function"&&(t=C2(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],f=u.length,p,h=0;h<f;++h)if(p=u[h]){for(var b=t.call(p,p.__data__,h,u),x,_=Bo(p,n),E=0,k=b.length;E<k;++E)(x=b[E])&&ex(x,e,n,E,b,_);s.push(b),o.push(p)}return new Qa(s,o,e,n)}var pte=xm.prototype.constructor;function hte(){return new pte(this._groups,this._parents)}function mte(t,e){var n,r,i;return function(){var s=Gd(this,t),o=(this.style.removeProperty(t),Gd(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function X2(t){return function(){this.style.removeProperty(t)}}function gte(t,e,n){var r,i=n+"",s;return function(){var o=Gd(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function yte(t,e,n){var r,i,s;return function(){var o=Gd(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Gd(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function bte(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=fa(this,t),f=u.on,p=u.value[s]==null?l||(l=X2(e)):void 0;(f!==n||i!==p)&&(r=(n=f).copy()).on(o,i=p),u.on=r}}function vte(t,e,n){var r=(t+="")=="transform"?vee:Y2;return e==null?this.styleTween(t,mte(t,r)).on("end.style."+t,X2(t)):typeof e=="function"?this.styleTween(t,yte(t,r,qN(this,"style."+t,e))).each(bte(this._id,t)):this.styleTween(t,gte(t,r,e),n).on("end.style."+t,null)}function xte(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function wte(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&xte(t,o,n)),r}return s._value=e,s}function _te(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,wte(t,e,n??""))}function Ste(t){return function(){this.textContent=t}}function Ete(t){return function(){var e=t(this);this.textContent=e??""}}function Ite(t){return this.tween("text",typeof t=="function"?Ete(qN(this,"text",t)):Ste(t==null?"":t+""))}function Nte(t){return function(e){this.textContent=t.call(this,e)}}function kte(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Nte(i)),e}return r._value=t,r}function Cte(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,kte(t))}function Tte(){for(var t=this._name,e=this._id,n=eL(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)if(u=o[f]){var p=Bo(u,e);ex(u,t,n,f,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Qa(r,this._parents,t,n)}function jte(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var f=fa(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),f.on=e}),i===0&&s()})}var Rte=0;function Qa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function eL(){return++Rte}var Ra=xm.prototype;Qa.prototype={constructor:Qa,select:dte,selectAll:fte,selectChild:Ra.selectChild,selectChildren:Ra.selectChildren,filter:ite,merge:ste,selection:hte,transition:Tte,call:Ra.call,nodes:Ra.nodes,node:Ra.node,size:Ra.size,empty:Ra.empty,each:Ra.each,on:lte,attr:zee,attrTween:Kee,style:vte,styleTween:_te,text:Ite,textTween:Cte,remove:ute,tween:Pee,delay:Jee,duration:Xee,ease:tte,easeVarying:rte,end:jte,[Symbol.iterator]:Ra[Symbol.iterator]};function Ote(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qte={time:null,delay:0,duration:250,ease:Ote};function Ate(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Pte(t){var e,n;t instanceof Qa?(e=t._id,t=t._name):(e=eL(),(n=qte).time=RN(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&ex(u,t,e,f,o,n||Ate(u,e));return new Qa(r,this._parents,t,e)}xm.prototype.interrupt=Oee;xm.prototype.transition=Pte;const iy=t=>()=>t;function Fte(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Da(t,e,n){this.k=t,this.x=e,this.y=n}Da.prototype={constructor:Da,scale:function(t){return t===1?this:new Da(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Da(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tx=new Da(1,0,0);tL.prototype=Da.prototype;function tL(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tx;return t.__zoom}function kS(t){t.stopImmediatePropagation()}function wp(t){t.preventDefault(),t.stopImmediatePropagation()}function Dte(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Lte(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Nq(){return this.__zoom||tx}function Mte(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function $te(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bte(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function nL(){var t=Dte,e=Lte,n=Bte,r=Mte,i=$te,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Eee,f=Zv("start","zoom","end"),p,h,b,x=500,_=150,E=0,k=10;function j(M){M.property("__zoom",Nq).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(M,X,J,le){var ie=M.selection?M.selection():M;ie.property("__zoom",Nq),M!==ie?L(M,X,J,le):ie.interrupt().each(function(){$(this,arguments).event(le).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},j.scaleBy=function(M,X,J,le){j.scaleTo(M,function(){var ie=this.__zoom.k,ne=typeof X=="function"?X.apply(this,arguments):X;return ie*ne},J,le)},j.scaleTo=function(M,X,J,le){j.transform(M,function(){var ie=e.apply(this,arguments),ne=this.__zoom,oe=J==null?q(ie):typeof J=="function"?J.apply(this,arguments):J,te=ne.invert(oe),ue=typeof X=="function"?X.apply(this,arguments):X;return n(R(C(ne,ue),oe,te),ie,o)},J,le)},j.translateBy=function(M,X,J,le){j.transform(M,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof J=="function"?J.apply(this,arguments):J),e.apply(this,arguments),o)},null,le)},j.translateTo=function(M,X,J,le,ie){j.transform(M,function(){var ne=e.apply(this,arguments),oe=this.__zoom,te=le==null?q(ne):typeof le=="function"?le.apply(this,arguments):le;return n(tx.translate(te[0],te[1]).scale(oe.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof J=="function"?-J.apply(this,arguments):-J),ne,o)},le,ie)};function C(M,X){return X=Math.max(s[0],Math.min(s[1],X)),X===M.k?M:new Da(X,M.x,M.y)}function R(M,X,J){var le=X[0]-J[0]*M.k,ie=X[1]-J[1]*M.k;return le===M.x&&ie===M.y?M:new Da(M.k,le,ie)}function q(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function L(M,X,J,le){M.on("start.zoom",function(){$(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(le).end()}).tween("zoom",function(){var ie=this,ne=arguments,oe=$(ie,ne).event(le),te=e.apply(ie,ne),ue=J==null?q(te):typeof J=="function"?J.apply(ie,ne):J,de=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),ye=ie.__zoom,we=typeof X=="function"?X.apply(ie,ne):X,Ie=u(ye.invert(ue).concat(de/ye.k),we.invert(ue).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var Re=Ie(ze),De=de/Re[2];ze=new Da(De,ue[0]-Re[0]*De,ue[1]-Re[1]*De)}oe.zoom(null,ze)}})}function $(M,X,J){return!J&&M.__zooming||new W(M,X)}function W(M,X){this.that=M,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(M,X),this.taps=0}W.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,X){return this.mouse&&M!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var X=js(this.that).datum();f.call(M,this.that,new Fte(M,{sourceEvent:this.sourceEvent,target:j,type:M,transform:this.that.__zoom,dispatch:f}),X)}};function P(M,...X){if(!t.apply(this,arguments))return;var J=$(this,X).event(M),le=this.__zoom,ie=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=Eo(M);if(J.wheel)(J.mouse[0][0]!==ne[0]||J.mouse[0][1]!==ne[1])&&(J.mouse[1]=le.invert(J.mouse[0]=ne)),clearTimeout(J.wheel);else{if(le.k===ie)return;J.mouse=[ne,le.invert(ne)],My(this),J.start()}wp(M),J.wheel=setTimeout(oe,_),J.zoom("mouse",n(R(C(le,ie),J.mouse[0],J.mouse[1]),J.extent,o));function oe(){J.wheel=null,J.end()}}function O(M,...X){if(b||!t.apply(this,arguments))return;var J=M.currentTarget,le=$(this,X,!0).event(M),ie=js(M.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),ne=Eo(M,J),oe=M.clientX,te=M.clientY;M2(M.view),kS(M),le.mouse=[ne,this.__zoom.invert(ne)],My(this),le.start();function ue(ye){if(wp(ye),!le.moved){var we=ye.clientX-oe,Ie=ye.clientY-te;le.moved=we*we+Ie*Ie>E}le.event(ye).zoom("mouse",n(R(le.that.__zoom,le.mouse[0]=Eo(ye,J),le.mouse[1]),le.extent,o))}function de(ye){ie.on("mousemove.zoom mouseup.zoom",null),$2(ye.view,le.moved),wp(ye),le.event(ye).end()}}function z(M,...X){if(t.apply(this,arguments)){var J=this.__zoom,le=Eo(M.changedTouches?M.changedTouches[0]:M,this),ie=J.invert(le),ne=J.k*(M.shiftKey?.5:2),oe=n(R(C(J,ne),le,ie),e.apply(this,X),o);wp(M),l>0?js(this).transition().duration(l).call(L,oe,le,M):js(this).call(j.transform,oe,le,M)}}function F(M,...X){if(t.apply(this,arguments)){var J=M.touches,le=J.length,ie=$(this,X,M.changedTouches.length===le).event(M),ne,oe,te,ue;for(kS(M),oe=0;oe<le;++oe)te=J[oe],ue=Eo(te,this),ue=[ue,this.__zoom.invert(ue),te.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==ue[2]&&(ie.touch1=ue,ie.taps=0):(ie.touch0=ue,ne=!0,ie.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(ie.taps<2&&(h=ue[0],p=setTimeout(function(){p=null},x)),My(this),ie.start())}}function V(M,...X){if(this.__zooming){var J=$(this,X).event(M),le=M.changedTouches,ie=le.length,ne,oe,te,ue;for(wp(M),ne=0;ne<ie;++ne)oe=le[ne],te=Eo(oe,this),J.touch0&&J.touch0[2]===oe.identifier?J.touch0[0]=te:J.touch1&&J.touch1[2]===oe.identifier&&(J.touch1[0]=te);if(oe=J.that.__zoom,J.touch1){var de=J.touch0[0],ye=J.touch0[1],we=J.touch1[0],Ie=J.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,Re=(Re=Ie[0]-ye[0])*Re+(Re=Ie[1]-ye[1])*Re;oe=C(oe,Math.sqrt(ze/Re)),te=[(de[0]+we[0])/2,(de[1]+we[1])/2],ue=[(ye[0]+Ie[0])/2,(ye[1]+Ie[1])/2]}else if(J.touch0)te=J.touch0[0],ue=J.touch0[1];else return;J.zoom("touch",n(R(oe,te,ue),J.extent,o))}}function U(M,...X){if(this.__zooming){var J=$(this,X).event(M),le=M.changedTouches,ie=le.length,ne,oe;for(kS(M),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),ne=0;ne<ie;++ne)oe=le[ne],J.touch0&&J.touch0[2]===oe.identifier?delete J.touch0:J.touch1&&J.touch1[2]===oe.identifier&&delete J.touch1;if(J.touch1&&!J.touch0&&(J.touch0=J.touch1,delete J.touch1),J.touch0)J.touch0[1]=this.__zoom.invert(J.touch0[0]);else if(J.end(),J.taps===2&&(oe=Eo(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<k)){var te=js(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return j.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:iy(+M),j):r},j.filter=function(M){return arguments.length?(t=typeof M=="function"?M:iy(!!M),j):t},j.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:iy(!!M),j):i},j.extent=function(M){return arguments.length?(e=typeof M=="function"?M:iy([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),j):e},j.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],j):[s[0],s[1]]},j.translateExtent=function(M){return arguments.length?(o[0][0]=+M[0][0],o[1][0]=+M[1][0],o[0][1]=+M[0][1],o[1][1]=+M[1][1],j):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},j.constrain=function(M){return arguments.length?(n=M,j):n},j.duration=function(M){return arguments.length?(l=+M,j):l},j.interpolate=function(M){return arguments.length?(u=M,j):u},j.on=function(){var M=f.on.apply(f,arguments);return M===f?j:M},j.clickDistance=function(M){return arguments.length?(E=(M=+M)*M,j):Math.sqrt(E)},j.tapDistance=function(M){return arguments.length?(k=+M,j):k},j}const Ga={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},$h=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],rL=["Enter"," ","Escape"];var Zd;(function(t){t.Strict="strict",t.Loose="loose"})(Zd||(Zd={}));var Yc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Yc||(Yc={}));var Bh;(function(t){t.Partial="partial",t.Full="full"})(Bh||(Bh={}));const iL={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Fl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Fl||(Fl={}));var iv;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(iv||(iv={}));var Ct;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ct||(Ct={}));const kq={[Ct.Left]:Ct.Right,[Ct.Right]:Ct.Left,[Ct.Top]:Ct.Bottom,[Ct.Bottom]:Ct.Top};function sL(t){return t===null?null:t?"valid":"invalid"}const oL=t=>"id"in t&&"source"in t&&"target"in t,zte=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),AN=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),_m=(t,e=[0,0])=>{const{width:n,height:r}=Ja(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},Wte=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):AN(i)?i:e.nodeLookup.get(i.id));const l=o?sv(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return nx(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rx(n)},vf=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=sv(r);n=nx(n,i)}}),rx(n)},aL=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Sm(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const f of t.values()){const{measured:p,selectable:h=!0,hidden:b=!1}=f;if(o&&!h||b)continue;const x=p.width??f.width??f.initialWidth??null,_=p.height??f.height??f.initialHeight??null,E=zh(l,Xd(f)),k=(x??0)*(_??0),j=s&&E>0;(!f.internals.handleBounds||j||E>=k||f.dragging)&&u.push(f)}return u},Vte=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function ZE(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function YE({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const l=vf(t),u=PN(l,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function lL({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:f}=l?l.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Ga.error005());else{const x=l.measured.width,_=l.measured.height;x&&_&&(h=[[u,f],[u+x,f+_]])}else l&&ef(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+f],[o.extent[1][0]+u,o.extent[1][1]+f]]);const b=ef(h)?uu(e,h,o.measured):e;return{position:{x:b.x-u+o.measured.width*p[0],y:b.y-f+o.measured.height*p[1]},positionAbsolute:b}}async function Ute({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(b=>b.id)),o=[];for(const b of n){if(b.deletable===!1)continue;const x=s.has(b.id),_=!x&&b.parentId&&o.find(E=>E.id===b.parentId);(x||_)&&o.push(b)}const l=new Set(e.map(b=>b.id)),u=r.filter(b=>b.deletable!==!1),p=Vte(o,u);for(const b of u)l.has(b.id)&&!p.find(_=>_.id===b.id)&&p.push(b);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const Yd=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),uu=(t={x:0,y:0},e,n)=>({x:Yd(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Yd(t.y,e[0][1],e[1][1]-(n?.height??0))});function cL(t,e,n){const{width:r,height:i}=Ja(n),{x:s,y:o}=n.internals.positionAbsolute;return uu(t,[[s,o],[s+r,o+i]],e)}const Cq=(t,e,n)=>t<e?Yd(Math.abs(t-e),1,e)/e:t>n?-Yd(Math.abs(t-n),1,e)/e:0,uL=(t,e,n=15,r=40)=>{const i=Cq(t.x,r,e.width-r)*n,s=Cq(t.y,r,e.height-r)*n;return[i,s]},nx=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),XE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),rx=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Xd=(t,e=[0,0])=>{const{x:n,y:r}=AN(t)?t.internals.positionAbsolute:_m(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},sv=(t,e=[0,0])=>{const{x:n,y:r}=AN(t)?t.internals.positionAbsolute:_m(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},dL=(t,e)=>rx(nx(XE(t),XE(e))),zh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},Tq=t=>Oo(t.width)&&Oo(t.height)&&Oo(t.x)&&Oo(t.y),Oo=t=>!isNaN(t)&&isFinite(t),Hte=(t,e)=>{},ix=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Sm=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?ix(l,o):l},fL=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),PN=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),l=n/(t.height*(1+s)),u=Math.min(o,l),f=Yd(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,b=e/2-p*f,x=n/2-h*f;return{x:b,y:x,zoom:f}},ov=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ef(t){return t!==void 0&&t!=="parent"}function Ja(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function pL(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function hL(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function jq(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function ih(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=$a(t),l=Sm({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:f}=n?ix(l,e):l;return{xSnapped:u,ySnapped:f,...l}}const sx=t=>({width:t.offsetWidth,height:t.offsetHeight}),mL=t=>t?.getRootNode?.()||window?.document,Kte=["INPUT","SELECT","TEXTAREA"];function eI(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:Kte.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const gL=t=>"clientX"in t,$a=(t,e)=>{const n=gL(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},Rq=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...sx(o)}})};function yL({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,f=e*.125+s*.375+l*.375+r*.125,p=Math.abs(u-t),h=Math.abs(f-e);return[u,f,p,h]}function sy(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Oq({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Ct.Left:return[e-sy(e-r,s),n];case Ct.Right:return[e+sy(r-e,s),n];case Ct.Top:return[e,n-sy(n-i,s)];case Ct.Bottom:return[e,n+sy(i-n,s)]}}function FN({sourceX:t,sourceY:e,sourcePosition:n=Ct.Bottom,targetX:r,targetY:i,targetPosition:s=Ct.Top,curvature:o=.25}){const[l,u]=Oq({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[f,p]=Oq({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,b,x,_]=yL({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:p});return[`M${t},${e} C${l},${u} ${f},${p} ${r},${i}`,h,b,x,_]}function bL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function Qte({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function Gte({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=nx(sv(t),sv(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return zh(o,rx(s))>0}const Jte=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,Zte=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Yte=(t,e)=>{if(!t.source||!t.target)return e;let n;return oL(t)?n={...t}:n={...t,id:Jte(t)},Zte(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function vL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=bL({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const qq={[Ct.Left]:{x:-1,y:0},[Ct.Right]:{x:1,y:0},[Ct.Top]:{x:0,y:-1},[Ct.Bottom]:{x:0,y:1}},Xte=({source:t,sourcePosition:e=Ct.Bottom,target:n})=>e===Ct.Left||e===Ct.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Aq=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function ene({source:t,sourcePosition:e=Ct.Bottom,target:n,targetPosition:r=Ct.Top,center:i,offset:s}){const o=qq[e],l=qq[r],u={x:t.x+o.x*s,y:t.y+o.y*s},f={x:n.x+l.x*s,y:n.y+l.y*s},p=Xte({source:u,sourcePosition:e,target:f}),h=p.x!==0?"x":"y",b=p[h];let x=[],_,E;const k={x:0,y:0},j={x:0,y:0},[C,R,q,L]=bL({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){_=i.x??C,E=i.y??R;const W=[{x:_,y:u.y},{x:_,y:f.y}],P=[{x:u.x,y:E},{x:f.x,y:E}];o[h]===b?x=h==="x"?W:P:x=h==="x"?P:W}else{const W=[{x:u.x,y:f.y}],P=[{x:f.x,y:u.y}];if(h==="x"?x=o.x===b?P:W:x=o.y===b?W:P,e===r){const U=Math.abs(t[h]-n[h]);if(U<=s){const M=Math.min(s-1,s-U);o[h]===b?k[h]=(u[h]>t[h]?-1:1)*M:j[h]=(f[h]>n[h]?-1:1)*M}}if(e!==r){const U=h==="x"?"y":"x",M=o[h]===l[U],X=u[U]>f[U],J=u[U]<f[U];(o[h]===1&&(!M&&X||M&&J)||o[h]!==1&&(!M&&J||M&&X))&&(x=h==="x"?W:P)}const O={x:u.x+k.x,y:u.y+k.y},z={x:f.x+j.x,y:f.y+j.y},F=Math.max(Math.abs(O.x-x[0].x),Math.abs(z.x-x[0].x)),V=Math.max(Math.abs(O.y-x[0].y),Math.abs(z.y-x[0].y));F>=V?(_=(O.x+z.x)/2,E=x[0].y):(_=x[0].x,E=(O.y+z.y)/2)}return[[t,{x:u.x+k.x,y:u.y+k.y},...x,{x:f.x+j.x,y:f.y+j.y},n],_,E,q,L]}function tne(t,e,n,r){const i=Math.min(Aq(t,e)/2,Aq(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function tI({sourceX:t,sourceY:e,sourcePosition:n=Ct.Bottom,targetX:r,targetY:i,targetPosition:s=Ct.Top,borderRadius:o=5,centerX:l,centerY:u,offset:f=20}){const[p,h,b,x,_]=ene({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:f});return[p.reduce((k,j,C)=>{let R="";return C>0&&C<p.length-1?R=tne(p[C-1],j,p[C+1],o):R=`${C===0?"M":"L"}${j.x} ${j.y}`,k+=R,k},""),h,b,x,_]}function Pq(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function nne(t){const{sourceNode:e,targetNode:n}=t;if(!Pq(e)||!Pq(n))return null;const r=e.internals.handleBounds||Fq(e.handles),i=n.internals.handleBounds||Fq(n.handles),s=Dq(r?.source??[],t.sourceHandle),o=Dq(t.connectionMode===Zd.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Ga.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Ct.Bottom,u=o?.position||Ct.Top,f=Wh(e,s,l),p=Wh(n,o,u);return{sourceX:f.x,sourceY:f.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function Fq(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Wh(t,e,n=Ct.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Ja(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Ct.Top:return{x:i+o/2,y:s};case Ct.Right:return{x:i+o,y:s+l/2};case Ct.Bottom:return{x:i+o/2,y:s+l};case Ct.Left:return{x:i,y:s+l/2}}}function Dq(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function nI(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function rne(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const f=nI(u,e);s.has(f)||(o.push({id:f,color:u.color||n,...u}),s.add(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}function ine(t,e,n,r,i){let s=.5;i==="start"?s=0:i==="end"&&(s=1);let o=[(t.x+t.width*s)*e.zoom+e.x,t.y*e.zoom+e.y-r],l=[-100*s,-100];switch(n){case Ct.Right:o=[(t.x+t.width)*e.zoom+e.x+r,(t.y+t.height*s)*e.zoom+e.y],l=[0,-100*s];break;case Ct.Bottom:o[1]=(t.y+t.height)*e.zoom+e.y+r,l[1]=0;break;case Ct.Left:o=[t.x*e.zoom+e.x-r,(t.y+t.height*s)*e.zoom+e.y],l=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${l[0]}%, ${l[1]}%)`}const DN={nodeOrigin:[0,0],nodeExtent:$h,elevateNodesOnSelect:!0,defaults:{}},sne={...DN,checkEquality:!0};function LN(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function one(t,e,n){const r=LN(DN,n);for(const i of t.values())if(i.parentId)MN(i,t,e,r);else{const s=_m(i,r.nodeOrigin),o=ef(i.extent)?i.extent:r.nodeExtent,l=uu(s,o,Ja(i));i.internals.positionAbsolute=l}}function rI(t,e,n,r){const i=LN(sne,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const l of t){let u=s.get(l.id);if(i.checkEquality&&l===u?.internals.userNode)e.set(l.id,u);else{const f=_m(l,i.nodeOrigin),p=ef(l.extent)?l.extent:i.nodeExtent,h=uu(f,p,Ja(l));u={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:l.measured?u?.internals.handleBounds:void 0,z:xL(l,o),userNode:l}},e.set(l.id,u)}l.parentId&&MN(u,e,n,r)}}function ane(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function MN(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=LN(DN,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}ane(t,n);const f=i?1e3:0,{x:p,y:h,z:b}=lne(t,u,s,o,f),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:b}})}function xL(t,e){return(Oo(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function lne(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=Ja(t),u=_m(t,n),f=ef(t.extent)?uu(u,t.extent,l):u;let p=uu({x:s+f.x,y:o+f.y},r,l);t.extent==="parent"&&(p=cL(p,l,e));const h=xL(t,i),b=e.internals.z??0;return{x:p.x,y:p.y,z:b>h?b:h}}function $N(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Xd(l),f=dL(u,o.rect);s.set(o.parentId,{expandedRect:f,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const f=l.internals.positionAbsolute,p=Ja(l),h=l.origin??r,b=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,x=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),E=Math.max(p.height,Math.round(o.height)),k=(_-p.width)*h[0],j=(E-p.height)*h[1];(b>0||x>0||k||j)&&(i.push({id:u,type:"position",position:{x:l.position.x-b+k,y:l.position.y-x+j}}),n.get(u)?.forEach(C=>{t.some(R=>R.id===C.id)||i.push({id:C.id,type:"position",position:{x:C.position.x+b,y:C.position.y+x}})})),(p.width<o.width||p.height<o.height||b||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?h[0]*b-k:0),height:E+(x?h[1]*x-j:0)}})}),i}function cne(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=[];for(const b of t.values()){const x=e.get(b.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),l=!0;continue}const _=sx(b.nodeElement),E=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(E||!x.internals.handleBounds||b.force))){const j=b.nodeElement.getBoundingClientRect(),C=ef(x.extent)?x.extent:s;let{positionAbsolute:R}=x.internals;x.parentId&&x.extent==="parent"?R=cL(R,_,e.get(x.parentId)):C&&(R=uu(R,C,_));const q={...x,measured:_,internals:{...x.internals,positionAbsolute:R,handleBounds:{source:Rq("source",b.nodeElement,j,p,x.id),target:Rq("target",b.nodeElement,j,p,x.id)}}};e.set(x.id,q),x.parentId&&MN(q,e,n,{nodeOrigin:i}),l=!0,E&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:Xd(q,i)}))}}if(h.length>0){const b=$N(h,e,n,i);u.push(...b)}return{changes:u,updatedInternals:l}}async function une({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function Lq(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,e))}}function wL(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},f=`${i}-${o}--${s}-${l}`,p=`${s}-${l}--${i}-${o}`;Lq("source",u,p,t,i,o),Lq("target",u,f,t,s,l),e.set(r.id,r)}}function _L(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:_L(n,e):!1}function Mq(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function dne(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!_L(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function CS({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function fne({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,f={x:0,y:0},p=null,h=!1,b=null,x=!1;function _({noDragClassName:k,handleSelector:j,domNode:C,isSelectable:R,nodeId:q,nodeClickDistance:L=0}){b=js(C);function $({x:z,y:F},V){const{nodeLookup:U,nodeExtent:M,snapGrid:X,snapToGrid:J,nodeOrigin:le,onNodeDrag:ie,onSelectionDrag:ne,onError:oe,updateNodePositions:te}=e();s={x:z,y:F};let ue=!1,de={x:0,y:0,x2:0,y2:0};if(l.size>1&&M){const ye=vf(l);de=XE(ye)}for(const[ye,we]of l){if(!U.has(ye))continue;let Ie={x:z-we.distance.x,y:F-we.distance.y};J&&(Ie=ix(Ie,X));let ze=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];if(l.size>1&&M&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+M[0][0],Ve=Je.x+we.measured.width-de.x2+M[1][0],ct=Je.y-de.y+M[0][1],_t=Je.y+we.measured.height-de.y2+M[1][1];ze=[[Xe,ct],[Ve,_t]]}const{position:Re,positionAbsolute:De}=lL({nodeId:ye,nextPosition:Ie,nodeLookup:U,nodeExtent:ze,nodeOrigin:le,onError:oe});ue=ue||we.position.x!==Re.x||we.position.y!==Re.y,we.position=Re,we.internals.positionAbsolute=De}if(ue&&(te(l,!0),V&&(r||ie||!q&&ne))){const[ye,we]=CS({nodeId:q,dragItems:l,nodeLookup:U});r?.(V,l,ye,we),ie?.(V,ye,we),q||ne?.(V,we)}}async function W(){if(!p)return;const{transform:z,panBy:F,autoPanSpeed:V}=e(),[U,M]=uL(f,p,V);(U!==0||M!==0)&&(s.x=(s.x??0)-U/z[2],s.y=(s.y??0)-M/z[2],await F({x:U,y:M})&&$(s,null)),o=requestAnimationFrame(W)}function P(z){const{nodeLookup:F,multiSelectionActive:V,nodesDraggable:U,transform:M,snapGrid:X,snapToGrid:J,selectNodesOnDrag:le,onNodeDragStart:ie,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!R)&&!V&&q&&(F.get(q)?.selected||oe()),R&&le&&q&&t?.(q);const te=ih(z.sourceEvent,{transform:M,snapGrid:X,snapToGrid:J,containerBounds:p});if(s=te,l=dne(F,U,te,q),l.size>0&&(n||ie||!q&&ne)){const[ue,de]=CS({nodeId:q,dragItems:l,nodeLookup:F});n?.(z.sourceEvent,l,ue,de),ie?.(z.sourceEvent,ue,de),q||ne?.(z.sourceEvent,de)}}const O=B2().clickDistance(L).on("start",z=>{const{domNode:F,nodeDragThreshold:V,transform:U,snapGrid:M,snapToGrid:X}=e();p=F?.getBoundingClientRect()||null,x=!1,V===0&&P(z),s=ih(z.sourceEvent,{transform:U,snapGrid:M,snapToGrid:X,containerBounds:p}),f=$a(z.sourceEvent,p)}).on("drag",z=>{const{autoPanOnNodeDrag:F,transform:V,snapGrid:U,snapToGrid:M,nodeDragThreshold:X,nodeLookup:J}=e(),le=ih(z.sourceEvent,{transform:V,snapGrid:U,snapToGrid:M,containerBounds:p});if((z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||q&&!J.has(q))&&(x=!0),!x){if(!u&&F&&h&&(u=!0,W()),!h){const ie=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(ie*ie+ne*ne)>X&&P(z)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&l&&h&&(f=$a(z.sourceEvent,p),$(le,z.sourceEvent))}}).on("end",z=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:V,onNodeDragStop:U,onSelectionDragStop:M}=e();if(V(l,!1),i||U||!q&&M){const[X,J]=CS({nodeId:q,dragItems:l,nodeLookup:F,dragging:!1});i?.(z.sourceEvent,l,X,J),U?.(z.sourceEvent,X,J),q||M?.(z.sourceEvent,J)}}}).filter(z=>{const F=z.target;return!z.button&&(!k||!Mq(F,`.${k}`,C))&&(!j||Mq(F,j,C))});b.call(O)}function E(){b?.on(".drag",null)}return{update:_,destroy:E}}function pne(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())zh(i,Xd(s))>0&&r.push(s);return r}const hne=250;function mne(t,e,n,r){let i=[],s=1/0;const o=pne(t,n,e+hne);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:p,y:h}=Wh(l,f,f.position,!0),b=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));b>e||(b<s?(i=[{...f,x:p,y:h}],s=b):b===s&&i.push({...f,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function SL(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(f=>f.id===n):l?.[0])??null;return u&&s?{...u,...Wh(o,u,u.position,!0)}:u}function EL(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function gne(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const IL=()=>!0;function yne(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:f,autoPanOnConnect:p,flowId:h,panBy:b,cancelConnection:x,onConnectStart:_,onConnect:E,onConnectEnd:k,isValidConnection:j=IL,onReconnectEnd:C,updateConnection:R,getTransform:q,getFromHandle:L,autoPanSpeed:$}){const W=mL(t.target);let P=0,O;const{x:z,y:F}=$a(t),V=W?.elementFromPoint(z,F),U=EL(s,V),M=l?.getBoundingClientRect();if(!M||!U)return;const X=SL(i,U,r,u,e);if(!X)return;let J=$a(t,M),le=!1,ie=null,ne=!1,oe=null;function te(){if(!p||!M)return;const[De,Je]=uL(J,M,$);b({x:De,y:Je}),P=requestAnimationFrame(te)}const ue={...X,nodeId:i,type:U,position:X.position},de=u.get(i),we={inProgress:!0,isValid:null,from:Wh(de,ue,Ct.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:de,to:J,toHandle:null,toPosition:kq[ue.position],toNode:null};R(we);let Ie=we;_?.(t,{nodeId:i,handleId:r,handleType:U});function ze(De){if(!L()||!ue){Re(De);return}const Je=q();J=$a(De,M),O=mne(Sm(J,Je,!1,[1,1]),n,u,ue),le||(te(),le=!0);const Xe=NL(De,{handle:O,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:j,doc:W,lib:f,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,ie=Xe.connection,ne=gne(!!O,Xe.isValid);const Ve={...Ie,isValid:ne,to:O&&ne?fL({x:O.x,y:O.y},Je):J,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:kq[ue.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};ne&&O&&Ie.toHandle&&Ve.toHandle&&Ie.toHandle.type===Ve.toHandle.type&&Ie.toHandle.nodeId===Ve.toHandle.nodeId&&Ie.toHandle.id===Ve.toHandle.id&&Ie.to.x===Ve.to.x&&Ie.to.y===Ve.to.y||(R(Ve),Ie=Ve)}function Re(De){(O||oe)&&ie&&ne&&E?.(ie);const{inProgress:Je,...Xe}=Ie,Ve={...Xe,toPosition:Ie.toHandle?Ie.toPosition:null};k?.(De,Ve),s&&C?.(De,Ve),x(),cancelAnimationFrame(P),le=!1,ne=!1,ie=null,oe=null,W.removeEventListener("mousemove",ze),W.removeEventListener("mouseup",Re),W.removeEventListener("touchmove",ze),W.removeEventListener("touchend",Re)}W.addEventListener("mousemove",ze),W.addEventListener("mouseup",Re),W.addEventListener("touchmove",ze),W.addEventListener("touchend",Re)}function NL(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:f=IL,nodeLookup:p}){const h=s==="target",b=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=$a(t),E=o.elementFromPoint(x,_),k=E?.classList.contains(`${l}-flow__handle`)?E:b,j={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const C=EL(void 0,k),R=k.getAttribute("data-nodeid"),q=k.getAttribute("data-handleid"),L=k.classList.contains("connectable"),$=k.classList.contains("connectableend");if(!R||!C)return j;const W={source:h?R:r,sourceHandle:h?q:i,target:h?r:R,targetHandle:h?i:q};j.connection=W;const O=L&&$&&(n===Zd.Strict?h&&C==="source"||!h&&C==="target":R!==r||q!==i);j.isValid=O&&f(W),j.toHandle=SL(R,C,q,p,n,!1)}return j}const iI={onPointerDown:yne,isValid:NL};function bne({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=js(t);function s({translateExtent:l,width:u,height:f,zoomStep:p=10,pannable:h=!0,zoomable:b=!0,inversePan:x=!1}){const _=R=>{const q=n();if(R.sourceEvent.type!=="wheel"||!e)return;const L=-R.sourceEvent.deltaY*(R.sourceEvent.deltaMode===1?.05:R.sourceEvent.deltaMode?1:.002)*p,$=q[2]*Math.pow(2,L);e.scaleTo($)};let E=[0,0];const k=R=>{(R.sourceEvent.type==="mousedown"||R.sourceEvent.type==="touchstart")&&(E=[R.sourceEvent.clientX??R.sourceEvent.touches[0].clientX,R.sourceEvent.clientY??R.sourceEvent.touches[0].clientY])},j=R=>{const q=n();if(R.sourceEvent.type!=="mousemove"&&R.sourceEvent.type!=="touchmove"||!e)return;const L=[R.sourceEvent.clientX??R.sourceEvent.touches[0].clientX,R.sourceEvent.clientY??R.sourceEvent.touches[0].clientY],$=[L[0]-E[0],L[1]-E[1]];E=L;const W=r()*Math.max(q[2],Math.log(q[2]))*(x?-1:1),P={x:q[0]-$[0]*W,y:q[1]-$[1]*W},O=[[0,0],[u,f]];e.setViewportConstrained({x:P.x,y:P.y,zoom:q[2]},O,l)},C=nL().on("start",k).on("zoom",h?j:null).on("zoom.wheel",b?_:null);i.call(C,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Eo}}const vne=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ox=t=>({x:t.x,y:t.y,zoom:t.k}),TS=({x:t,y:e,zoom:n})=>tx.translate(t,e).scale(n),yd=(t,e)=>t.target.closest(`.${e}`),kL=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),jS=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},CL=t=>{const e=t.ctrlKey&&ov()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function xne({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:f}){return p=>{if(yd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const k=Eo(p),j=CL(p),C=h*Math.pow(2,j);r.scaleTo(n,C,k,p);return}const b=p.deltaMode===1?20:1;let x=i===Yc.Vertical?0:p.deltaX*b,_=i===Yc.Horizontal?0:p.deltaY*b;!ov()&&p.shiftKey&&i!==Yc.Vertical&&(x=p.deltaY*b,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const E=ox(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(p,E)),t.isPanScrolling&&(u?.(p,E),t.panScrollTimeout=setTimeout(()=>{f?.(p,E),t.isPanScrolling=!1},150))}}function wne({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||yd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function _ne({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=ox(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Sne({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&kL(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,ox(s.transform))}}function Ene({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&kL(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&vne(t.prevViewport,o.transform))){const l=ox(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Ine({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:f}){return p=>{const h=t||e,b=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(yd(p,`${f}-flow__node`)||yd(p,`${f}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||yd(p,l)&&p.type==="wheel"||yd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!b&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Nne({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:f}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),b=nL().clickDistance(!Oo(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=js(t).call(b);R({x:s.x,y:s.y,zoom:Yd(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),E=x.on("dblclick.zoom");b.wheelDelta(CL);function k(V,U){return x?new Promise(M=>{b?.transform(jS(x,U?.duration,()=>M(!0)),V)}):Promise.resolve(!1)}function j({noWheelClassName:V,noPanClassName:U,onPaneContextMenu:M,userSelectionActive:X,panOnScroll:J,panOnDrag:le,panOnScrollMode:ie,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:te,zoomOnScroll:ue,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ie}){X&&!p.isZoomingOrPanning&&C();const Re=J&&!ye&&!X?xne({zoomPanValues:p,noWheelClassName:V,d3Selection:x,d3Zoom:b,panOnScrollMode:ie,panOnScrollSpeed:ne,zoomOnPinch:te,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):wne({noWheelClassName:V,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",Re,{passive:!1}),!X){const Je=_ne({zoomPanValues:p,onDraggingChange:f,onPanZoomStart:l});b.on("start",Je);const Xe=Sne({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!M,onPanZoom:o,onTransformChange:Ie});b.on("zoom",Xe);const Ve=Ene({zoomPanValues:p,panOnDrag:le,panOnScroll:J,onPaneContextMenu:M,onPanZoomEnd:u,onDraggingChange:f});b.on("end",Ve)}const De=Ine({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ue,panOnScroll:J,zoomOnDoubleClick:de,zoomOnPinch:te,userSelectionActive:X,noPanClassName:U,noWheelClassName:V,lib:we});b.filter(De),de?x.on("dblclick.zoom",E):x.on("dblclick.zoom",null)}function C(){b.on("zoom",null)}async function R(V,U,M){const X=TS(V),J=b?.constrain()(X,U,M);return J&&await k(J),new Promise(le=>le(J))}async function q(V,U){const M=TS(V);return await k(M,U),new Promise(X=>X(M))}function L(V){if(x){const U=TS(V),M=x.property("__zoom");(M.k!==V.zoom||M.x!==V.x||M.y!==V.y)&&b?.transform(x,U,null,{sync:!0})}}function $(){const V=x?tL(x.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function W(V,U){return x?new Promise(M=>{b?.scaleTo(jS(x,U?.duration,()=>M(!0)),V)}):Promise.resolve(!1)}function P(V,U){return x?new Promise(M=>{b?.scaleBy(jS(x,U?.duration,()=>M(!0)),V)}):Promise.resolve(!1)}function O(V){b?.scaleExtent(V)}function z(V){b?.translateExtent(V)}function F(V){const U=!Oo(V)||V<0?0:V;b?.clickDistance(U)}return{update:j,destroy:C,setViewport:q,setViewportConstrained:R,getViewport:$,scaleTo:W,scaleBy:P,setScaleExtent:O,setTranslateExtent:z,syncViewport:L,setClickDistance:F}}var sh;(function(t){t.Line="line",t.Handle="handle"})(sh||(sh={}));function kne({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Cne(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function El(t,e){return Math.max(0,e-t)}function Il(t,e){return Math.max(0,t-e)}function oy(t,e,n){return Math.max(0,e-t,t-n)}function $q(t,e){return t?!e:e}function Tne(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:f}=e;const{isHorizontal:p,isVertical:h}=e,b=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:E,maxWidth:k,minHeight:j,maxHeight:C}=r,{x:R,y:q,width:L,height:$,aspectRatio:W}=t;let P=Math.floor(p?x-t.pointerX:0),O=Math.floor(h?_-t.pointerY:0);const z=L+(u?-P:P),F=$+(f?-O:O),V=-s[0]*L,U=-s[1]*$;let M=oy(z,E,k),X=oy(F,j,C);if(o){let ie=0,ne=0;u&&P<0?ie=El(R+P+V,o[0][0]):!u&&P>0&&(ie=Il(R+z+V,o[1][0])),f&&O<0?ne=El(q+O+U,o[0][1]):!f&&O>0&&(ne=Il(q+F+U,o[1][1])),M=Math.max(M,ie),X=Math.max(X,ne)}if(l){let ie=0,ne=0;u&&P>0?ie=Il(R+P,l[0][0]):!u&&P<0&&(ie=El(R+z,l[1][0])),f&&O>0?ne=Il(q+O,l[0][1]):!f&&O<0&&(ne=El(q+F,l[1][1])),M=Math.max(M,ie),X=Math.max(X,ne)}if(i){if(p){const ie=oy(z/W,j,C)*W;if(M=Math.max(M,ie),o){let ne=0;!u&&!f||u&&!f&&b?ne=Il(q+U+z/W,o[1][1])*W:ne=El(q+U+(u?P:-P)/W,o[0][1])*W,M=Math.max(M,ne)}if(l){let ne=0;!u&&!f||u&&!f&&b?ne=El(q+z/W,l[1][1])*W:ne=Il(q+(u?P:-P)/W,l[0][1])*W,M=Math.max(M,ne)}}if(h){const ie=oy(F*W,E,k)/W;if(X=Math.max(X,ie),o){let ne=0;!u&&!f||f&&!u&&b?ne=Il(R+F*W+V,o[1][0])/W:ne=El(R+(f?O:-O)*W+V,o[0][0])/W,X=Math.max(X,ne)}if(l){let ne=0;!u&&!f||f&&!u&&b?ne=El(R+F*W,l[1][0])/W:ne=Il(R+(f?O:-O)*W,l[0][0])/W,X=Math.max(X,ne)}}}O=O+(O<0?X:-X),P=P+(P<0?M:-M),i&&(b?z>F*W?O=($q(u,f)?-P:P)/W:P=($q(u,f)?-O:O)*W:p?(O=P/W,f=u):(P=O*W,u=f));const J=u?R+P:R,le=f?q+O:q;return{width:L+(u?-P:P),height:$+(f?-O:O),x:s[0]*P*(u?-1:1)+J,y:s[1]*O*(f?-1:1)+le}}const TL={width:0,height:0,x:0,y:0},jne={...TL,pointerX:0,pointerY:0,aspectRatio:1};function Rne(t){return[[0,0],[t.measured.width,t.measured.height]]}function One(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function qne({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=js(t);function o({controlPosition:u,boundaries:f,keepAspectRatio:p,onResizeStart:h,onResize:b,onResizeEnd:x,shouldResize:_}){let E={...TL},k={...jne};const j=Cne(u);let C,R=null,q=[],L,$,W;const P=B2().on("start",O=>{const{nodeLookup:z,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:M,paneDomNode:X}=n();if(C=z.get(e),!C)return;R=X?.getBoundingClientRect()??null;const{xSnapped:J,ySnapped:le}=ih(O.sourceEvent,{transform:F,snapGrid:V,snapToGrid:U,containerBounds:R});E={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},k={...E,pointerX:J,pointerY:le,aspectRatio:E.width/E.height},L=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(L=z.get(C.parentId),$=L&&C.extent==="parent"?Rne(L):void 0),q=[],W=void 0;for(const[ie,ne]of z)if(ne.parentId===e&&(q.push({id:ie,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=One(ne,C,ne.origin??M);W?W=[[Math.min(oe[0][0],W[0][0]),Math.min(oe[0][1],W[0][1])],[Math.max(oe[1][0],W[1][0]),Math.max(oe[1][1],W[1][1])]]:W=oe}h?.(O,{...E})}).on("drag",O=>{const{transform:z,snapGrid:F,snapToGrid:V,nodeOrigin:U}=n(),M=ih(O.sourceEvent,{transform:z,snapGrid:F,snapToGrid:V,containerBounds:R}),X=[];if(!C)return;const{x:J,y:le,width:ie,height:ne}=E,oe={},te=C.origin??U,{width:ue,height:de,x:ye,y:we}=Tne(k,j,M,f,p,te,$,W),Ie=ue!==ie,ze=de!==ne,Re=ye!==J&&Ie,De=we!==le&&ze;if(!Re&&!De&&!Ie&&!ze)return;if((Re||De||te[0]===1||te[1]===1)&&(oe.x=Re?ye:E.x,oe.y=De?we:E.y,E.x=oe.x,E.y=oe.y,q.length>0)){const ct=ye-J,_t=we-le;for(const Rt of q)Rt.position={x:Rt.position.x-ct+te[0]*(ue-ie),y:Rt.position.y-_t+te[1]*(de-ne)},X.push(Rt)}if((Ie||ze)&&(oe.width=Ie?ue:E.width,oe.height=ze?de:E.height,E.width=oe.width,E.height=oe.height),L&&C.expandParent){const ct=te[0]*(oe.width??0);oe.x&&oe.x<ct&&(E.x=ct,k.x=k.x-(oe.x-ct));const _t=te[1]*(oe.height??0);oe.y&&oe.y<_t&&(E.y=_t,k.y=k.y-(oe.y-_t))}const Je=kne({width:E.width,prevWidth:ie,height:E.height,prevHeight:ne,affectsX:j.affectsX,affectsY:j.affectsY}),Xe={...E,direction:Je};_?.(O,Xe)!==!1&&(b?.(O,Xe),r(oe,X))}).on("end",O=>{x?.(O,{...E}),i?.()});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Bq=t=>{let e;const n=new Set,r=(p,h)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const x=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},f=e=t(r,i,u);return u},Ane=t=>t?Bq(t):Bq,{useDebugValue:Pne}=Bn,{useSyncExternalStoreWithSelector:Fne}=GB,Dne=t=>t;function jL(t,e=Dne,n){const r=Fne(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Pne(r),r}const zq=(t,e)=>{const n=Ane(t),r=(i,s=e)=>jL(n,i,s);return Object.assign(r,n),r},Lne=(t,e)=>t?zq(t,e):zq;function xr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const ax=H.createContext(null),Mne=ax.Provider,RL=Ga.error001();function jn(t,e){const n=H.useContext(ax);if(n===null)throw new Error(RL);return jL(n,t,e)}function wr(){const t=H.useContext(ax);if(t===null)throw new Error(RL);return H.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Wq={display:"none"},$ne={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},OL="react-flow__node-desc",qL="react-flow__edge-desc",Bne="react-flow__aria-live",zne=t=>t.ariaLiveMessage;function Wne({rfId:t}){const e=jn(zne);return d.jsx("div",{id:`${Bne}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:$ne,children:e})}function Vne({rfId:t,disableKeyboardA11y:e}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:`${OL}-${t}`,style:Wq,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),d.jsx("div",{id:`${qL}-${t}`,style:Wq,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&d.jsx(Wne,{rfId:t})]})}const Une=t=>t.userSelectionActive?"none":"all",BN=H.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=jn(Une),l=`${t}`.split("-");return d.jsx("div",{className:Hr(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function Hne({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:d.jsx(BN,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kne=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},ay=t=>t.id;function Qne(t,e){return xr(t.selectedNodes.map(ay),e.selectedNodes.map(ay))&&xr(t.selectedEdges.map(ay),e.selectedEdges.map(ay))}function Gne({onSelectionChange:t}){const e=wr(),{selectedNodes:n,selectedEdges:r}=jn(Kne,Qne);return H.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Jne=t=>!!t.onSelectionChangeHandlers;function Zne({onSelectionChange:t}){const e=jn(Jne);return t||e?d.jsx(Gne,{onSelectionChange:t}):null}const AL=[0,0],Yne={x:0,y:0,zoom:1},Xne=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Vq=[...Xne,"rfId"],ere=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),Uq={translateExtent:$h,nodeOrigin:AL,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function tre(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:f}=jn(ere,xr),p=wr();H.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=Uq,l()}),[]);const h=H.useRef(Uq);return H.useEffect(()=>{for(const b of Vq){const x=t[b],_=h.current[b];x!==_&&(typeof t[b]>"u"||(b==="nodes"?e(x):b==="edges"?n(x):b==="minZoom"?r(x):b==="maxZoom"?i(x):b==="translateExtent"?s(x):b==="nodeExtent"?o(x):b==="paneClickDistance"?f(x):b==="fitView"?p.setState({fitViewOnInit:x}):b==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[b]:x})))}h.current=t},Vq.map(b=>t[b])),null}function Hq(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function nre(t){const[e,n]=H.useState(t==="system"?null:t);return H.useEffect(()=>{if(t!=="system"){n(t);return}const r=Hq(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:Hq()?.matches?"dark":"light"}const Kq=typeof document<"u"?document:null;function Vh(t=null,e={target:Kq,actInsideInputWithModifier:!0}){const[n,r]=H.useState(!1),i=H.useRef(!1),s=H.useRef(new Set([])),[o,l]=H.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=f.reduce((h,b)=>h.concat(...b),[]);return[f,p]}return[[],[]]},[t]);return H.useEffect(()=>{const u=e?.target||Kq;if(t!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&eI(b))return!1;const _=Gq(b.code,l);s.current.add(b[_]),Qq(o,s.current,!1)&&(b.preventDefault(),r(!0))},p=b=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&eI(b))return!1;const _=Gq(b.code,l);Qq(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[_]),b.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function Qq(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Gq(t,e){return e.includes(t)?"code":"key"}const rre=()=>{const t=wr();return H.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const l=ZE(n,e),{width:u,height:f}=sx(o);return YE({nodes:l,width:u,height:f,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:l}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,f=i/2-e*u,p=s/2-n*u;return l?(await l.setViewport({x:f,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=PN(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:l}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-l};return Sm(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=fL(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function PL(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)ire(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function ire(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function zN(t,e){return PL(t,e)}function FL(t,e){return PL(t,e)}function Pc(t,e){return{id:t,type:"select",selected:e}}function bd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Pc(s.id,o)))}return r}function Jq({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Zq(t){return{id:t.id,type:"remove"}}const Yq=t=>zte(t),sre=t=>oL(t);function DL(t){return H.forwardRef(t)}const ore=typeof window<"u"?H.useLayoutEffect:H.useEffect;function Xq(t){const[e,n]=H.useState(BigInt(0)),[r]=H.useState(()=>are(()=>n(i=>i+BigInt(1))));return ore(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function are(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const LL=H.createContext(null);function lre({children:t}){const e=wr(),n=H.useCallback(l=>{const{nodes:u=[],setNodes:f,hasDefaultNodes:p,onNodesChange:h,nodeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(Jq({items:x,lookup:b}))},[]),r=Xq(n),i=H.useCallback(l=>{const{edges:u=[],setEdges:f,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(Jq({items:x,lookup:b}))},[]),s=Xq(i),o=H.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return d.jsx(LL.Provider,{value:o,children:t})}function cre(){const t=H.useContext(LL);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const ure=t=>!!t.panZoom;function xf(){const t=rre(),e=wr(),n=cre(),r=jn(ure),i=H.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},l=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState(),_=Yq(h)?h:b.get(h.id),E=_.parentId?hL(_.position,_.measured,_.parentId,b,x):_.position,k={..._,position:E,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return Xd(k)},f=(h,b,x={replace:!1})=>{o(_=>_.map(E=>{if(E.id===h){const k=typeof b=="function"?b(E):b;return x.replace&&Yq(k)?k:{...E,...k}}return E}))},p=(h,b,x={replace:!1})=>{l(_=>_.map(E=>{if(E.id===h){const k=typeof b=="function"?b(E):b;return x.replace&&sre(k)?k:{...E,...k}}return E}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(b=>({...b}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:l,addNodes:h=>{const b=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...b])},addEdges:h=>{const b=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...b])},toObject:()=>{const{nodes:h=[],edges:b=[],transform:x}=e.getState(),[_,E,k]=x;return{nodes:h.map(j=>({...j})),edges:b.map(j=>({...j})),viewport:{x:_,y:E,zoom:k}}},deleteElements:async({nodes:h=[],edges:b=[]})=>{const{nodes:x,edges:_,onNodesDelete:E,onEdgesDelete:k,triggerNodeChanges:j,triggerEdgeChanges:C,onDelete:R,onBeforeDelete:q}=e.getState(),{nodes:L,edges:$}=await Ute({nodesToRemove:h,edgesToRemove:b,nodes:x,edges:_,onBeforeDelete:q}),W=$.length>0,P=L.length>0;if(W){const O=$.map(Zq);k?.($),C(O)}if(P){const O=L.map(Zq);E?.(L),j(O)}return(P||W)&&R?.({nodes:L,edges:$}),{deletedNodes:L,deletedEdges:$}},getIntersectingNodes:(h,b=!0,x)=>{const _=Tq(h),E=_?h:u(h),k=x!==void 0;return E?(x||e.getState().nodes).filter(j=>{const C=e.getState().nodeLookup.get(j.id);if(C&&!_&&(j.id===h.id||!C.internals.positionAbsolute))return!1;const R=Xd(k?j:C),q=zh(R,E);return b&&q>0||q>=E.width*E.height}):[]},isNodeIntersecting:(h,b,x=!0)=>{const E=Tq(h)?h:u(h);if(!E)return!1;const k=zh(E,b);return x&&k>0||k>=E.width*E.height},updateNode:f,updateNodeData:(h,b,x={replace:!1})=>{f(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},updateEdge:p,updateEdgeData:(h,b,x={replace:!1})=>{p(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},getNodesBounds:h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState();return Wte(h,{nodeLookup:b,nodeOrigin:x})},getHandleConnections:({type:h,id:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?b?`-${h}-${b}`:`-${h}`:""}`)?.values()??[])}},[]);return H.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const e3=t=>t.selected,dre={actInsideInputWithModifier:!1},fre=typeof window<"u"?window:void 0;function pre({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=wr(),{deleteElements:r}=xf(),i=Vh(t,dre),s=Vh(e,{target:fre});H.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(e3),edges:o.filter(e3)}),n.setState({nodesSelectionActive:!1})}},[i]),H.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function hre(t){const e=wr();H.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=sx(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Ga.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const lx={position:"absolute",width:"100%",height:"100%",top:0,left:0},mre=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function gre({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Yc.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:f,minZoom:p,maxZoom:h,zoomActivationKeyCode:b,preventScrolling:x=!0,children:_,noWheelClassName:E,noPanClassName:k,onViewportChange:j,isControlledViewport:C,paneClickDistance:R}){const q=wr(),L=H.useRef(null),{userSelectionActive:$,lib:W}=jn(mre,xr),P=Vh(b),O=H.useRef();hre(L);const z=H.useCallback(F=>{j?.({x:F[0],y:F[1],zoom:F[2]}),C||q.setState({transform:F})},[j,C]);return H.useEffect(()=>{if(L.current){O.current=Nne({domNode:L.current,minZoom:p,maxZoom:h,translateExtent:f,viewport:u,paneClickDistance:R,onDraggingChange:M=>q.setState({paneDragging:M}),onPanZoomStart:(M,X)=>{const{onViewportChangeStart:J,onMoveStart:le}=q.getState();le?.(M,X),J?.(X)},onPanZoom:(M,X)=>{const{onViewportChange:J,onMove:le}=q.getState();le?.(M,X),J?.(X)},onPanZoomEnd:(M,X)=>{const{onViewportChangeEnd:J,onMoveEnd:le}=q.getState();le?.(M,X),J?.(X)}});const{x:F,y:V,zoom:U}=O.current.getViewport();return q.setState({panZoom:O.current,transform:[F,V,U],domNode:L.current.closest(".react-flow")}),()=>{O.current?.destroy()}}},[]),H.useEffect(()=>{O.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:k,userSelectionActive:$,noWheelClassName:E,lib:W,onTransformChange:z})},[t,e,n,r,i,s,o,l,P,x,k,$,E,W,z]),d.jsx("div",{className:"react-flow__renderer",ref:L,style:lx,children:_})}const yre=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function bre(){const{userSelectionActive:t,userSelectionRect:e}=jn(yre,xr);return t&&e?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const RS=(t,e)=>n=>{n.target===e.current&&t?.(n)},vre=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function xre({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Bh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:b,children:x}){const _=wr(),{userSelectionActive:E,elementsSelectable:k,dragging:j}=jn(vre,xr),C=k&&(t||E),R=H.useRef(null),q=H.useRef(),L=H.useRef(new Set),$=H.useRef(new Set),W=H.useRef(!1),P=H.useRef(!1),O=J=>{if(W.current){W.current=!1;return}l?.(J),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},z=J=>{if(Array.isArray(r)&&r?.includes(2)){J.preventDefault();return}u?.(J)},F=f?J=>f(J):void 0,V=J=>{const{resetSelectedElements:le,domNode:ie}=_.getState();if(q.current=ie?.getBoundingClientRect(),!k||!t||J.button!==0||J.target!==R.current||!q.current)return;J.target?.setPointerCapture?.(J.pointerId),P.current=!0,W.current=!1;const{x:ne,y:oe}=$a(J.nativeEvent,q.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(J)},U=J=>{const{userSelectionRect:le,transform:ie,nodeLookup:ne,edgeLookup:oe,connectionLookup:te,triggerNodeChanges:ue,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!q.current||!le)return;W.current=!0;const{x:we,y:Ie}=$a(J.nativeEvent,q.current),{startX:ze,startY:Re}=le,De={startX:ze,startY:Re,x:we<ze?we:ze,y:Ie<Re?Ie:Re,width:Math.abs(we-ze),height:Math.abs(Ie-Re)},Je=L.current,Xe=$.current;L.current=new Set(aL(ne,De,ie,n===Bh.Partial,!0).map(ct=>ct.id)),$.current=new Set;const Ve=ye?.selectable??!0;for(const ct of L.current){const _t=te.get(ct);if(_t)for(const{edgeId:Rt}of _t.values()){const Ut=oe.get(Rt);Ut&&(Ut.selectable??Ve)&&$.current.add(Rt)}}if(!jq(Je,L.current)){const ct=bd(ne,L.current,!0);ue(ct)}if(!jq(Xe,$.current)){const ct=bd(oe,$.current);de(ct)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},M=J=>{if(J.button!==0||!P.current)return;J.target?.releasePointerCapture?.(J.pointerId);const{userSelectionRect:le}=_.getState();!E&&le&&J.target===R.current&&O?.(J),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:L.current.size>0}),o?.(J),(e||i)&&(W.current=!1),P.current=!1},X=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:Hr(["react-flow__pane",{draggable:X,dragging:j,selection:t}]),onClick:C?void 0:RS(O,R),onContextMenu:RS(z,R),onWheel:RS(F,R),onPointerEnter:C?void 0:p,onPointerDown:C?V:h,onPointerMove:C?U:h,onPointerUp:C?M:void 0,onPointerLeave:b,ref:R,style:lx,children:[x,d.jsx(bre,{})]})}function sI({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),f=l.get(t);if(!f){u?.("012",Ga.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function ML({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=wr(),[u,f]=H.useState(!1),p=H.useRef();return H.useEffect(()=>{p.current=fne({getStoreItems:()=>l.getState(),onNodeMouseDown:h=>{sI({id:h,store:l,nodeRef:t})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),H.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const wre=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function $L(){const t=wr();return H.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:f,nodeOrigin:p}=t.getState(),h=new Map,b=wre(o),x=i?s[0]:5,_=i?s[1]:5,E=n.direction.x*x*n.factor,k=n.direction.y*_*n.factor;for(const[,j]of f){if(!b(j))continue;let C={x:j.internals.positionAbsolute.x+E,y:j.internals.positionAbsolute.y+k};i&&(C=ix(C,s));const{position:R,positionAbsolute:q}=lL({nodeId:j.id,nextPosition:C,nodeLookup:f,nodeExtent:r,nodeOrigin:p,onError:l});j.position=R,j.internals.positionAbsolute=q,h.set(j.id,j)}u(h)},[])}const WN=H.createContext(null),_re=WN.Provider;WN.Consumer;const VN=()=>H.useContext(WN),Sre=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Ere=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:f}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Zd.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,valid:p&&f}};function Ire({type:t="source",position:e=Ct.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:f,onMouseDown:p,onTouchStart:h,...b},x){const _=o||null,E=t==="target",k=wr(),j=VN(),{connectOnClick:C,noPanClassName:R,rfId:q}=jn(Sre,xr),{connectingFrom:L,connectingTo:$,clickConnecting:W,isPossibleEndHandle:P,connectionInProcess:O,valid:z}=jn(Ere(j,_,t),xr);j||k.getState().onError?.("010",Ga.error010());const F=M=>{const{defaultEdgeOptions:X,onConnect:J,hasDefaultEdges:le}=k.getState(),ie={...X,...M};if(le){const{edges:ne,setEdges:oe}=k.getState();oe(Yte(ie,ne))}J?.(ie),l?.(ie)},V=M=>{if(!j)return;const X=gL(M.nativeEvent);if(i&&(X&&M.button===0||!X)){const J=k.getState();iI.onPointerDown(M.nativeEvent,{autoPanOnConnect:J.autoPanOnConnect,connectionMode:J.connectionMode,connectionRadius:J.connectionRadius,domNode:J.domNode,nodeLookup:J.nodeLookup,lib:J.lib,isTarget:E,handleId:_,nodeId:j,flowId:J.rfId,panBy:J.panBy,cancelConnection:J.cancelConnection,onConnectStart:J.onConnectStart,onConnectEnd:J.onConnectEnd,updateConnection:J.updateConnection,onConnect:F,isValidConnection:n||J.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:J.autoPanSpeed})}X?p?.(M):h?.(M)},U=M=>{const{onClickConnectStart:X,onClickConnectEnd:J,connectionClickStartHandle:le,connectionMode:ie,isValidConnection:ne,lib:oe,rfId:te,nodeLookup:ue,connection:de}=k.getState();if(!j||!le&&!i)return;if(!le){X?.(M.nativeEvent,{nodeId:j,handleId:_,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:j,type:t,id:_}});return}const ye=mL(M.target),we=n||ne,{connection:Ie,isValid:ze}=iI.isValid(M.nativeEvent,{handle:{nodeId:j,id:_,type:t},connectionMode:ie,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:te,doc:ye,lib:oe,nodeLookup:ue});ze&&Ie&&F(Ie);const Re=structuredClone(de);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,J?.(M,Re),k.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":_,"data-nodeid":j,"data-handlepos":e,"data-id":`${q}-${j}-${_}-${t}`,className:Hr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",R,f,{source:!E,target:E,connectable:r,connectablestart:i,connectableend:s,clickconnecting:W,connectingfrom:L,connectingto:$,valid:z,connectionindicator:r&&(!O||P)&&(O?s:i)}]),onMouseDown:V,onTouchStart:V,onClick:C?U:void 0,ref:x,...b,children:u})}const qi=H.memo(DL(Ire));function Nre({data:t,isConnectable:e,sourcePosition:n=Ct.Bottom}){return d.jsxs(d.Fragment,{children:[t?.label,d.jsx(qi,{type:"source",position:n,isConnectable:e})]})}function kre({data:t,isConnectable:e,targetPosition:n=Ct.Top,sourcePosition:r=Ct.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(qi,{type:"target",position:n,isConnectable:e}),t?.label,d.jsx(qi,{type:"source",position:r,isConnectable:e})]})}function Cre(){return null}function Tre({data:t,isConnectable:e,targetPosition:n=Ct.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(qi,{type:"target",position:n,isConnectable:e}),t?.label]})}const av={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},t3={input:Nre,default:kre,output:Tre,group:Cre};function jre(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const Rre=t=>{const{width:e,height:n,x:r,y:i}=vf(t.nodeLookup,{filter:s=>!!s.selected});return{width:Oo(e)?e:null,height:Oo(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Ore({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=wr(),{width:i,height:s,transformString:o,userSelectionActive:l}=jn(Rre,xr),u=$L(),f=H.useRef(null);if(H.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),ML({nodeRef:f}),l||!i||!s)return null;const p=t?b=>{const x=r.getState().nodes.filter(_=>_.selected);t(b,x)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(av,b.key)&&(b.preventDefault(),u({direction:av[b.key],factor:b.shiftKey?4:1}))};return d.jsx("div",{className:Hr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:d.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const n3=typeof window<"u"?window:void 0,qre=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function BL({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:E,zoomActivationKeyCode:k,elementsSelectable:j,zoomOnScroll:C,zoomOnPinch:R,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:$,zoomOnDoubleClick:W,panOnDrag:P,defaultViewport:O,translateExtent:z,minZoom:F,maxZoom:V,preventScrolling:U,onSelectionContextMenu:M,noWheelClassName:X,noPanClassName:J,disableKeyboardA11y:le,onViewportChange:ie,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:te}=jn(qre),ue=Vh(f,{target:n3}),de=Vh(E,{target:n3}),ye=de||P,we=de||q,Ie=p&&ye!==!0,ze=ue||te||Ie;return pre({deleteKeyCode:u,multiSelectionKeyCode:_}),d.jsx(gre,{onPaneContextMenu:s,elementsSelectable:j,zoomOnScroll:C,zoomOnPinch:R,panOnScroll:we,panOnScrollSpeed:L,panOnScrollMode:$,zoomOnDoubleClick:W,panOnDrag:!ue&&ye,defaultViewport:O,translateExtent:z,minZoom:F,maxZoom:V,zoomActivationKeyCode:k,preventScrolling:U,noWheelClassName:X,noPanClassName:J,onViewportChange:ie,isControlledViewport:ne,paneClickDistance:l,children:d.jsxs(xre,{onSelectionStart:b,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ue,selectionOnDrag:Ie,children:[t,oe&&d.jsx(Ore,{onSelectionContextMenu:M,noPanClassName:J,disableKeyboardA11y:le})]})})}BL.displayName="FlowRenderer";const Are=H.memo(BL),Pre=t=>e=>t?aL(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Fre(t){return jn(H.useCallback(Pre(t),[t]),xr)}const Dre=t=>t.updateNodeInternals;function Lre(){const t=jn(Dre),[e]=H.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return H.useEffect(()=>()=>{e?.disconnect()},[e]),e}function Mre({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=wr(),s=H.useRef(null),o=H.useRef(null),l=H.useRef(t.sourcePosition),u=H.useRef(t.targetPosition),f=H.useRef(e),p=n&&!!t.internals.handleBounds;return H.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),H.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),H.useEffect(()=>{if(s.current){const h=f.current!==e,b=l.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||b||x)&&(f.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function $re({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:f,nodesFocusable:p,resizeObserver:h,noDragClassName:b,noPanClassName:x,disableKeyboardA11y:_,rfId:E,nodeTypes:k,nodeExtent:j,nodeClickDistance:C,onError:R}){const{node:q,internals:L,isParent:$}=jn(Re=>{const De=Re.nodeLookup.get(t),Je=Re.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},xr);let W=q.type||"default",P=k?.[W]||t3[W];P===void 0&&(R?.("003",Ga.error003(W)),W="default",P=t3.default);const O=!!(q.draggable||l&&typeof q.draggable>"u"),z=!!(q.selectable||u&&typeof q.selectable>"u"),F=!!(q.connectable||f&&typeof q.connectable>"u"),V=!!(q.focusable||p&&typeof q.focusable>"u"),U=wr(),M=pL(q),X=Mre({node:q,nodeType:W,hasDimensions:M,resizeObserver:h}),J=ML({nodeRef:X,disabled:q.hidden||!O,noDragClassName:b,handleSelector:q.dragHandle,nodeId:t,isSelectable:z,nodeClickDistance:C}),le=$L();if(q.hidden)return null;const ie=Ja(q),ne=jre(q),oe=z||O||e||n||r||i,te=n?Re=>n(Re,{...L.userNode}):void 0,ue=r?Re=>r(Re,{...L.userNode}):void 0,de=i?Re=>i(Re,{...L.userNode}):void 0,ye=s?Re=>s(Re,{...L.userNode}):void 0,we=o?Re=>o(Re,{...L.userNode}):void 0,Ie=Re=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=U.getState();z&&(!De||!O||Je>0)&&sI({id:t,store:U,nodeRef:X}),e&&e(Re,{...L.userNode})},ze=Re=>{if(!(eI(Re.nativeEvent)||_))if(rL.includes(Re.key)&&z){const De=Re.key==="Escape";sI({id:t,store:U,unselect:De,nodeRef:X})}else O&&q.selected&&Object.prototype.hasOwnProperty.call(av,Re.key)&&(Re.preventDefault(),U.setState({ariaLiveMessage:`Moved selected node ${Re.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~L.positionAbsolute.x}, y: ${~~L.positionAbsolute.y}`}),le({direction:av[Re.key],factor:Re.shiftKey?4:1}))};return d.jsx("div",{className:Hr(["react-flow__node",`react-flow__node-${W}`,{[x]:O},q.className,{selected:q.selected,selectable:z,parent:$,draggable:O,dragging:J}]),ref:X,style:{zIndex:L.z,transform:`translate(${L.positionAbsolute.x}px,${L.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:M?"visible":"hidden",...q.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:te,onMouseMove:ue,onMouseLeave:de,onContextMenu:ye,onClick:Ie,onDoubleClick:we,onKeyDown:V?ze:void 0,tabIndex:V?0:void 0,role:V?"button":void 0,"aria-describedby":_?void 0:`${OL}-${E}`,"aria-label":q.ariaLabel,children:d.jsx(_re,{value:t,children:d.jsx(P,{id:t,data:q.data,type:W,positionAbsoluteX:L.positionAbsolute.x,positionAbsoluteY:L.positionAbsolute.y,selected:q.selected??!1,selectable:z,draggable:O,deletable:q.deletable??!0,isConnectable:F,sourcePosition:q.sourcePosition,targetPosition:q.targetPosition,dragging:J,dragHandle:q.dragHandle,zIndex:L.z,parentId:q.parentId,...ie})})})}const Bre=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function zL(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=jn(Bre,xr),o=Fre(t.onlyRenderVisibleElements),l=Lre();return d.jsx("div",{className:"react-flow__nodes",style:lx,children:o.map(u=>d.jsx($re,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}zL.displayName="NodeRenderer";const zre=H.memo(zL);function Wre(t){return jn(H.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Gte({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),xr)}const Vre=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ure=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),r3={[iv.Arrow]:Vre,[iv.ArrowClosed]:Ure};function Hre(t){const e=wr();return H.useMemo(()=>Object.prototype.hasOwnProperty.call(r3,t)?r3[t]:(e.getState().onError?.("009",Ga.error009(t)),null),[t])}const Kre=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Hre(e);return u?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:d.jsx(u,{color:n,strokeWidth:o})}):null},WL=({defaultColor:t,rfId:e})=>{const n=jn(s=>s.edges),r=jn(s=>s.defaultEdgeOptions),i=H.useMemo(()=>rne(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?d.jsx("svg",{className:"react-flow__marker",children:d.jsx("defs",{children:i.map(s=>d.jsx(Kre,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};WL.displayName="MarkerDefinitions";var Qre=H.memo(WL);function VL({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:f,...p}){const[h,b]=H.useState({x:1,y:0,width:0,height:0}),x=Hr(["react-flow__edge-textwrapper",f]),_=H.useRef(null);return H.useEffect(()=>{if(_.current){const E=_.current.getBBox();b({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:d.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&d.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}VL.displayName="EdgeText";const Gre=H.memo(VL);function Em({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:f=20,...p}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...p,d:t,fill:"none",className:Hr(["react-flow__edge-path",p.className])}),f&&d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&Oo(e)&&Oo(n)?d.jsx(Gre,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function i3({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Ct.Left||t===Ct.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function Im({sourceX:t,sourceY:e,sourcePosition:n=Ct.Bottom,targetX:r,targetY:i,targetPosition:s=Ct.Top}){const[o,l]=i3({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,f]=i3({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,b,x]=yL({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${t},${e} C${o},${l} ${u},${f} ${r},${i}`,p,h,b,x]}function UL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ct.Bottom,targetPosition:l=Ct.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:k,interactionWidth:j})=>{const[C,R,q]=Im({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),L=t.isInternal?void 0:e;return d.jsx(Em,{id:L,path:C,labelX:R,labelY:q,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:k,interactionWidth:j})})}const Jre=UL({isInternal:!1}),HL=UL({isInternal:!0});Jre.displayName="SimpleBezierEdge";HL.displayName="SimpleBezierEdgeInternal";function KL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,sourcePosition:x=Ct.Bottom,targetPosition:_=Ct.Top,markerEnd:E,markerStart:k,pathOptions:j,interactionWidth:C})=>{const[R,q,L]=tI({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:j?.borderRadius,offset:j?.offset}),$=t.isInternal?void 0:e;return d.jsx(Em,{id:$,path:R,labelX:q,labelY:L,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:E,markerStart:k,interactionWidth:C})})}const QL=KL({isInternal:!1}),GL=KL({isInternal:!0});QL.displayName="SmoothStepEdge";GL.displayName="SmoothStepEdgeInternal";function JL(t){return H.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return d.jsx(QL,{...n,id:r,pathOptions:H.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Zre=JL({isInternal:!1}),ZL=JL({isInternal:!0});Zre.displayName="StepEdge";ZL.displayName="StepEdgeInternal";function YL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})=>{const[k,j,C]=vL({sourceX:n,sourceY:r,targetX:i,targetY:s}),R=t.isInternal?void 0:e;return d.jsx(Em,{id:R,path:k,labelX:j,labelY:C,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})})}const Yre=YL({isInternal:!1}),XL=YL({isInternal:!0});Yre.displayName="StraightEdge";XL.displayName="StraightEdgeInternal";function eM(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ct.Bottom,targetPosition:l=Ct.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:k,pathOptions:j,interactionWidth:C})=>{const[R,q,L]=FN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:j?.curvature}),$=t.isInternal?void 0:e;return d.jsx(Em,{id:$,path:R,labelX:q,labelY:L,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:k,interactionWidth:C})})}const Xre=eM({isInternal:!1}),tM=eM({isInternal:!0});Xre.displayName="BezierEdge";tM.displayName="BezierEdgeInternal";const s3={default:tM,straight:XL,step:ZL,smoothstep:GL,simplebezier:HL},o3={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},eie=(t,e,n)=>n===Ct.Left?t-e:n===Ct.Right?t+e:t,tie=(t,e,n)=>n===Ct.Top?t-e:n===Ct.Bottom?t+e:t,a3="react-flow__edgeupdater";function l3({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Hr([a3,`${a3}-${l}`]),cx:eie(e,r,t),cy:tie(n,r,t),r,stroke:"transparent",fill:"transparent"})}function nie({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,setReconnecting:b,setUpdateHover:x}){const _=wr(),E=(q,L)=>{if(q.button!==0)return;const{autoPanOnConnect:$,domNode:W,isValidConnection:P,connectionMode:O,connectionRadius:z,lib:F,onConnectStart:V,onConnectEnd:U,cancelConnection:M,nodeLookup:X,rfId:J,panBy:le,updateConnection:ie}=_.getState(),ne=L.type==="target";b(!0),p?.(q,n,L.type);const oe=(ue,de)=>{b(!1),h?.(ue,n,L.type,de)},te=ue=>f?.(n,ue);iI.onPointerDown(q.nativeEvent,{autoPanOnConnect:$,connectionMode:O,connectionRadius:z,domNode:W,handleId:L.id,nodeId:L.nodeId,nodeLookup:X,isTarget:ne,edgeUpdaterType:L.type,lib:F,flowId:J,cancelConnection:M,panBy:le,isValidConnection:P,onConnect:te,onConnectStart:V,onConnectEnd:U,onReconnectEnd:oe,updateConnection:ie,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},k=q=>E(q,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),j=q=>E(q,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>x(!0),R=()=>x(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(l3,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:k,onMouseEnter:C,onMouseOut:R,type:"source"}),(t===!0||t==="target")&&d.jsx(l3,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:j,onMouseEnter:C,onMouseOut:R,type:"target"})]})}function rie({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,rfId:_,edgeTypes:E,noPanClassName:k,onError:j,disableKeyboardA11y:C}){let R=jn(Ve=>Ve.edgeLookup.get(t));const q=jn(Ve=>Ve.defaultEdgeOptions);R=q?{...q,...R}:R;let L=R.type||"default",$=E?.[L]||s3[L];$===void 0&&(j?.("011",Ga.error011(L)),L="default",$=s3.default);const W=!!(R.focusable||e&&typeof R.focusable>"u"),P=typeof h<"u"&&(R.reconnectable||n&&typeof R.reconnectable>"u"),O=!!(R.selectable||r&&typeof R.selectable>"u"),z=H.useRef(null),[F,V]=H.useState(!1),[U,M]=H.useState(!1),X=wr(),{zIndex:J,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue}=jn(H.useCallback(Ve=>{const ct=Ve.nodeLookup.get(R.source),_t=Ve.nodeLookup.get(R.target);if(!ct||!_t)return{zIndex:R.zIndex,...o3};const Rt=nne({id:t,sourceNode:ct,targetNode:_t,sourceHandle:R.sourceHandle||null,targetHandle:R.targetHandle||null,connectionMode:Ve.connectionMode,onError:j});return{zIndex:Qte({selected:R.selected,zIndex:R.zIndex,sourceNode:ct,targetNode:_t,elevateOnSelect:Ve.elevateEdgesOnSelect}),...Rt||o3}},[R.source,R.target,R.sourceHandle,R.targetHandle,R.selected,R.zIndex]),xr),de=H.useMemo(()=>R.markerStart?`url('#${nI(R.markerStart,_)}')`:void 0,[R.markerStart,_]),ye=H.useMemo(()=>R.markerEnd?`url('#${nI(R.markerEnd,_)}')`:void 0,[R.markerEnd,_]);if(R.hidden||le===null||ie===null||ne===null||oe===null)return null;const we=Ve=>{const{addSelectedEdges:ct,unselectNodesAndEdges:_t,multiSelectionActive:Rt}=X.getState();O&&(X.setState({nodesSelectionActive:!1}),R.selected&&Rt?(_t({nodes:[],edges:[R]}),z.current?.blur()):ct([t])),i&&i(Ve,R)},Ie=s?Ve=>{s(Ve,{...R})}:void 0,ze=o?Ve=>{o(Ve,{...R})}:void 0,Re=l?Ve=>{l(Ve,{...R})}:void 0,De=u?Ve=>{u(Ve,{...R})}:void 0,Je=f?Ve=>{f(Ve,{...R})}:void 0,Xe=Ve=>{if(!C&&rL.includes(Ve.key)&&O){const{unselectNodesAndEdges:ct,addSelectedEdges:_t}=X.getState();Ve.key==="Escape"?(z.current?.blur(),ct({edges:[R]})):_t([t])}};return d.jsx("svg",{style:{zIndex:J},children:d.jsxs("g",{className:Hr(["react-flow__edge",`react-flow__edge-${L}`,R.className,k,{selected:R.selected,animated:R.animated,inactive:!O&&!i,updating:F,selectable:O}]),onClick:we,onDoubleClick:Ie,onContextMenu:ze,onMouseEnter:Re,onMouseMove:De,onMouseLeave:Je,onKeyDown:W?Xe:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":R.ariaLabel===null?void 0:R.ariaLabel||`Edge from ${R.source} to ${R.target}`,"aria-describedby":W?`${qL}-${_}`:void 0,ref:z,children:[!U&&d.jsx($,{id:t,source:R.source,target:R.target,type:R.type,selected:R.selected,animated:R.animated,selectable:O,deletable:R.deletable??!0,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue,data:R.data,style:R.style,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth}),P&&d.jsx(nie,{edge:R,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue,setUpdateHover:V,setReconnecting:M})]})})}const iie=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function nM({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:E}){const{edgesFocusable:k,edgesReconnectable:j,elementsSelectable:C,onError:R}=jn(iie,xr),q=Wre(e);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(Qre,{defaultColor:t,rfId:n}),q.map(L=>d.jsx(rie,{id:L,edgesFocusable:k,edgesReconnectable:j,elementsSelectable:C,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,onClick:p,reconnectRadius:h,onDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:R,edgeTypes:r,disableKeyboardA11y:E},L))]})}nM.displayName="EdgeRenderer";const sie=H.memo(nM),oie=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function aie({children:t}){const e=jn(oie);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function lie(t){const e=xf(),n=H.useRef(!1);H.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const cie=t=>t.panZoom?.syncViewport;function uie(t){const e=jn(cie),n=wr();return H.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function die(t){return t.connection.inProgress?{...t.connection,to:Sm(t.connection.to,t.transform)}:{...t.connection}}function fie(t){return die}function UN(t){const e=fie();return jn(e,xr)}const pie=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function hie({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=jn(pie,xr);return!(s&&i&&u)?null:d.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Hr(["react-flow__connection",sL(l)]),children:d.jsx(rM,{style:e,type:n,CustomComponent:r,isValid:l})})})}const rM=({style:t,type:e=Fl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:f,toNode:p,toHandle:h,toPosition:b}=UN();if(!i)return;if(n)return d.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:u,toPosition:b,connectionStatus:sL(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:f.x,targetY:f.y,targetPosition:b};switch(e){case Fl.Bezier:[x]=FN(_);break;case Fl.SimpleBezier:[x]=Im(_);break;case Fl.Step:[x]=tI({..._,borderRadius:0});break;case Fl.SmoothStep:[x]=tI(_);break;default:[x]=vL(_)}return d.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};rM.displayName="ConnectionLine";const mie={};function c3(t=mie){H.useRef(t),wr(),H.useEffect(()=>{},[t])}function gie(){wr(),H.useRef(!1),H.useEffect(()=>{},[])}function iM({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:b,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:E,connectionLineComponent:k,connectionLineContainerStyle:j,selectionKeyCode:C,selectionOnDrag:R,selectionMode:q,multiSelectionKeyCode:L,panActivationKeyCode:$,zoomActivationKeyCode:W,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:z,defaultViewport:F,translateExtent:V,minZoom:U,maxZoom:M,preventScrolling:X,defaultMarkerColor:J,zoomOnScroll:le,zoomOnPinch:ie,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,zoomOnDoubleClick:ue,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneScroll:Re,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Rt,reconnectRadius:Ut,onReconnect:sn,onReconnectStart:xe,onReconnectEnd:be,noDragClassName:Ne,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut,viewport:Qt,onViewportChange:Gt}){return c3(t),c3(e),gie(),lie(n),uie(Qt),d.jsx(Are,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:Re,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:C,selectionOnDrag:R,selectionMode:q,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:L,panActivationKeyCode:$,zoomActivationKeyCode:W,elementsSelectable:z,zoomOnScroll:le,zoomOnPinch:ie,zoomOnDoubleClick:ue,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,panOnDrag:de,defaultViewport:F,translateExtent:V,minZoom:U,maxZoom:M,onSelectionContextMenu:h,preventScrolling:X,noDragClassName:Ne,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,onViewportChange:Gt,isControlledViewport:!!Qt,children:d.jsxs(aie,{children:[d.jsx(sie,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:sn,onReconnectStart:xe,onReconnectEnd:be,onlyRenderVisibleElements:O,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Rt,reconnectRadius:Ut,defaultMarkerColor:J,noPanClassName:Ue,disableKeyboardA11y:rt,rfId:ut}),d.jsx(hie,{style:E,type:_,component:k,containerStyle:j}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(zre,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:O,noPanClassName:Ue,noDragClassName:Ne,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}iM.displayName="GraphView";const yie=H.memo(iM),u3=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=>{const f=new Map,p=new Map,h=new Map,b=new Map,x=r??e??[],_=n??t??[],E=l??[0,0],k=u??$h;wL(h,b,x),rI(_,f,p,{nodeOrigin:E,nodeExtent:k,elevateNodesOnSelect:!1});let j=[0,0,1];if(o&&i&&s){const C=vf(f,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:R,y:q,zoom:L}=PN(C,i,s,.5,2,.1);j=[R,q,L]}return{rfId:"1",width:0,height:0,transform:j,nodes:_,nodeLookup:f,parentLookup:p,edges:x,edgeLookup:b,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:$h,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Zd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...iL},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Hte,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},bie=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=>Lne((f,p)=>({...u3({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:E}=p();rI(h,b,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:E,checkEquality:!0}),f({nodes:h})},setEdges:h=>{const{connectionLookup:b,edgeLookup:x}=p();wL(b,x,h),f({edges:h})},setDefaultNodesAndEdges:(h,b)=>{if(h){const{setNodes:x}=p();x(h),f({hasDefaultNodes:!0})}if(b){const{setEdges:x}=p();x(b),f({hasDefaultEdges:!0})}},updateNodeInternals:(h,b={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:E,fitViewOnInit:k,fitViewDone:j,fitViewOnInitOptions:C,domNode:R,nodeOrigin:q,nodeExtent:L,debug:$,fitViewSync:W}=p(),{changes:P,updatedInternals:O}=cne(h,_,E,R,q,L);if(O){if(one(_,E,{nodeOrigin:q,nodeExtent:L}),b.triggerFitView){let z=j;!j&&k&&(z=W({...C,nodes:C?.nodes})),f({fitViewDone:z})}else f({});P?.length>0&&($&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,b=!1)=>{const x=[],_=[];for(const[E,k]of h){const j=!!(k?.expandParent&&k?.parentId&&k?.position),C={id:E,type:"position",position:j?{x:Math.max(0,k.position.x),y:Math.max(0,k.position.y)}:k.position,dragging:b};j&&x.push({id:E,parentId:k.parentId,rect:{...k.internals.positionAbsolute,width:k.measured.width,height:k.measured.height}}),_.push(C)}if(x.length>0){const{nodeLookup:E,parentLookup:k,nodeOrigin:j}=p(),C=$N(x,E,k,j);_.push(...C)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:b,setNodes:x,nodes:_,hasDefaultNodes:E,debug:k}=p();if(h?.length){if(E){const j=zN(h,_);x(j)}k&&console.log("React Flow: trigger node changes",h),b?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:b,setEdges:x,edges:_,hasDefaultEdges:E,debug:k}=p();if(h?.length){if(E){const j=FL(h,_);x(j)}k&&console.log("React Flow: trigger edge changes",h),b?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:k}=p();if(b){const j=h.map(C=>Pc(C,!0));E(j);return}E(bd(_,new Set([...h]),!0)),k(bd(x))},addSelectedEdges:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:k}=p();if(b){const j=h.map(C=>Pc(C,!0));k(j);return}k(bd(x,new Set([...h]))),E(bd(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:b}={})=>{const{edges:x,nodes:_,nodeLookup:E,triggerNodeChanges:k,triggerEdgeChanges:j}=p(),C=h||_,R=b||x,q=C.map($=>{const W=E.get($.id);return W&&(W.selected=!1),Pc($.id,!1)}),L=R.map($=>Pc($.id,!1));k(q),j(L)},setMinZoom:h=>{const{panZoom:b,maxZoom:x}=p();b?.setScaleExtent([h,x]),f({minZoom:h})},setMaxZoom:h=>{const{panZoom:b,minZoom:x}=p();b?.setScaleExtent([x,h]),f({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),f({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),E=b.reduce((j,C)=>C.selected?[...j,Pc(C.id,!1)]:j,[]),k=h.reduce((j,C)=>C.selected?[...j,Pc(C.id,!1)]:j,[]);x(E),_(k)},setNodeExtent:h=>{const{nodes:b,nodeLookup:x,parentLookup:_,nodeOrigin:E,elevateNodesOnSelect:k,nodeExtent:j}=p();h[0][0]===j[0][0]&&h[0][1]===j[0][1]&&h[1][0]===j[1][0]&&h[1][1]===j[1][1]||(rI(b,x,_,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:k,checkEquality:!1}),f({nodeExtent:h}))},panBy:h=>{const{transform:b,width:x,height:_,panZoom:E,translateExtent:k}=p();return une({delta:h,panZoom:E,transform:b,translateExtent:k,width:x,height:_})},fitView:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:k,nodeLookup:j}=p();if(!b)return Promise.resolve(!1);const C=ZE(j,h);return YE({nodes:C,width:x,height:_,panZoom:b,minZoom:E,maxZoom:k},h)},fitViewSync:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:k,nodeLookup:j}=p();if(!b)return!1;const C=ZE(j,h);return YE({nodes:C,width:x,height:_,panZoom:b,minZoom:E,maxZoom:k},h),C.size>0},cancelConnection:()=>{f({connection:{...iL}})},updateConnection:h=>{f({connection:h})},reset:()=>f({...u3()})}),Object.is);function sM({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:f}){const[p]=H.useState(()=>bie({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return d.jsx(Mne,{value:p,children:d.jsx(lre,{children:f})})}function vie({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:f}){return H.useContext(ax)?d.jsx(d.Fragment,{children:t}):d.jsx(sM,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:f,children:t})}const xie={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function wie({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:f,onMove:p,onMoveStart:h,onMoveEnd:b,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:k,onClickConnectEnd:j,onNodeMouseEnter:C,onNodeMouseMove:R,onNodeMouseLeave:q,onNodeContextMenu:L,onNodeDoubleClick:$,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:O,onNodesDelete:z,onEdgesDelete:F,onDelete:V,onSelectionChange:U,onSelectionDragStart:M,onSelectionDrag:X,onSelectionDragStop:J,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:te,connectionLineType:ue=Fl.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ie="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:Re=!1,selectionMode:De=Bh.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=ov()?"Meta":"Control",zoomActivationKeyCode:Ve=ov()?"Meta":"Control",snapToGrid:ct,snapGrid:_t,onlyRenderVisibleElements:Rt=!1,selectNodesOnDrag:Ut,nodesDraggable:sn,nodesConnectable:xe,nodesFocusable:be,nodeOrigin:Ne=AL,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt=!0,defaultViewport:Me=Yne,minZoom:ut=.5,maxZoom:Qt=2,translateExtent:Gt=$h,preventScrolling:bn=!0,nodeExtent:ar,defaultMarkerColor:Ln="#b1b1b7",zoomOnScroll:Kr=!0,zoomOnPinch:Di=!0,panOnScroll:_r=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Zi=Yc.Free,zoomOnDoubleClick:Yi=!0,panOnDrag:Xi=!0,onPaneClick:po,onPaneMouseEnter:pa,onPaneMouseMove:cc,onPaneMouseLeave:$s,onPaneScroll:K,onPaneContextMenu:yu,paneClickDistance:fn=0,nodeClickDistance:bu=0,children:vu,onReconnect:xu,onReconnectStart:uc,onReconnectEnd:ha,onEdgeContextMenu:es,onEdgeDoubleClick:dc,onEdgeMouseEnter:ma,onEdgeMouseMove:Sf,onEdgeMouseLeave:ga,reconnectRadius:Bs=10,onNodesChange:Ya,onEdgesChange:zs,noDragClassName:Ef="nodrag",noWheelClassName:If="nowheel",noPanClassName:wu="nopan",fitView:Ws,fitViewOptions:_u,connectOnClick:Su,attributionPosition:Nf,proOptions:Eu,defaultEdgeOptions:Iu,elevateNodesOnSelect:Nu,elevateEdgesOnSelect:fc,disableKeyboardA11y:ku=!1,autoPanOnConnect:kf,autoPanOnNodeDrag:lr,autoPanSpeed:Cf,connectionRadius:pc,isValidConnection:Cu,onError:Xa,style:Tf,id:hc,nodeDragThreshold:el,viewport:ts,onViewportChange:jf,width:xi,height:Rf,colorMode:Of="light",debug:qf,...zo},tl){const Li=hc||"1",nl=nre(Of);return d.jsx("div",{"data-testid":"rf__wrapper",...zo,style:{...Tf,...xie},ref:tl,className:Hr(["react-flow",i,nl]),id:hc,children:d.jsxs(vie,{nodes:t,edges:e,width:xi,height:Rf,fitView:Ws,nodeOrigin:Ne,nodeExtent:ar,children:[d.jsx(yie,{onInit:f,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:C,onNodeMouseMove:R,onNodeMouseLeave:q,onNodeContextMenu:L,onNodeDoubleClick:$,nodeTypes:s,edgeTypes:o,connectionLineType:ue,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:Re,selectionMode:De,deleteKeyCode:Ie,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:Rt,defaultViewport:Me,translateExtent:Gt,minZoom:ut,maxZoom:Qt,preventScrolling:bn,zoomOnScroll:Kr,zoomOnPinch:Di,zoomOnDoubleClick:Yi,panOnScroll:_r,panOnScrollSpeed:Jt,panOnScrollMode:Zi,panOnDrag:Xi,onPaneClick:po,onPaneMouseEnter:pa,onPaneMouseMove:cc,onPaneMouseLeave:$s,onPaneScroll:K,onPaneContextMenu:yu,paneClickDistance:fn,nodeClickDistance:bu,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onReconnect:xu,onReconnectStart:uc,onReconnectEnd:ha,onEdgeContextMenu:es,onEdgeDoubleClick:dc,onEdgeMouseEnter:ma,onEdgeMouseMove:Sf,onEdgeMouseLeave:ga,reconnectRadius:Bs,defaultMarkerColor:Ln,noDragClassName:Ef,noWheelClassName:If,noPanClassName:wu,rfId:Li,disableKeyboardA11y:ku,nodeExtent:ar,viewport:ts,onViewportChange:jf}),d.jsx(tre,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:k,onClickConnectEnd:j,nodesDraggable:sn,nodesConnectable:xe,nodesFocusable:be,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt,elevateNodesOnSelect:Nu,elevateEdgesOnSelect:fc,minZoom:ut,maxZoom:Qt,nodeExtent:ar,onNodesChange:Ya,onEdgesChange:zs,snapToGrid:ct,snapGrid:_t,connectionMode:te,translateExtent:Gt,connectOnClick:Su,defaultEdgeOptions:Iu,fitView:Ws,fitViewOptions:_u,onNodesDelete:z,onEdgesDelete:F,onDelete:V,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:O,onSelectionDrag:X,onSelectionDragStart:M,onSelectionDragStop:J,onMove:p,onMoveStart:h,onMoveEnd:b,noPanClassName:wu,nodeOrigin:Ne,rfId:Li,autoPanOnConnect:kf,autoPanOnNodeDrag:lr,autoPanSpeed:Cf,onError:Xa,connectionRadius:pc,isValidConnection:Cu,selectNodesOnDrag:Ut,nodeDragThreshold:el,onBeforeDelete:oe,paneClickDistance:fn,debug:qf}),d.jsx(Zne,{onSelectionChange:U}),vu,d.jsx(Hne,{proOptions:Eu,position:Nf}),d.jsx(Vne,{rfId:Li,disableKeyboardA11y:ku})]})})}var oM=DL(wie);const _ie=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Sie({children:t}){const e=jn(_ie);return e?Jh.createPortal(t,e):null}function Eie(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>zN(i,s)),[]);return[e,n,r]}function Iie(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>FL(i,s)),[]);return[e,n,r]}function lv(t){return jn(H.useCallback(n=>n.nodeLookup.get(t),[t]),xr)}function Nie({dimensions:t,lineWidth:e,variant:n,className:r}){return d.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Hr(["react-flow__background-pattern",n,r])})}function kie({radius:t,className:e}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Hr(["react-flow__background-pattern","dots",e])})}var ra;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ra||(ra={}));const Cie={[ra.Dots]:1,[ra.Lines]:1,[ra.Cross]:6},Tie=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function aM({id:t,variant:e=ra.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:f,patternClassName:p}){const h=H.useRef(null),{transform:b,patternId:x}=jn(Tie,xr),_=r||Cie[e],E=e===ra.Dots,k=e===ra.Cross,j=Array.isArray(n)?n:[n,n],C=[j[0]*b[2]||1,j[1]*b[2]||1],R=_*b[2],q=Array.isArray(s)?s:[s,s],L=k?[R,R]:C,$=[q[0]*b[2]||1+L[0]/2,q[1]*b[2]||1+L[1]/2],W=`${x}${t||""}`;return d.jsxs("svg",{className:Hr(["react-flow__background",f]),style:{...u,...lx,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:W,x:b[0]%C[0],y:b[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${$[0]},-${$[1]})`,children:E?d.jsx(kie,{radius:R/2,className:p}):d.jsx(Nie,{dimensions:L,lineWidth:i,variant:e,className:p})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}aM.displayName="Background";const lM=H.memo(aM);function jie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Rie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Oie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function qie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Aie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ly({children:t,className:e,...n}){return d.jsx("button",{type:"button",className:Hr(["react-flow__controls-button",e]),...n,children:t})}const Pie=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function cM({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:f,children:p,position:h="bottom-left",orientation:b="vertical","aria-label":x="React Flow controls"}){const _=wr(),{isInteractive:E,minZoomReached:k,maxZoomReached:j}=jn(Pie,xr),{zoomIn:C,zoomOut:R,fitView:q}=xf(),L=()=>{C(),s?.()},$=()=>{R(),o?.()},W=()=>{q(i),l?.()},P=()=>{_.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),u?.(!E)},O=b==="horizontal"?"horizontal":"vertical";return d.jsxs(BN,{className:Hr(["react-flow__controls",O,f]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&d.jsxs(d.Fragment,{children:[d.jsx(ly,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:j,children:d.jsx(jie,{})}),d.jsx(ly,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k,children:d.jsx(Rie,{})})]}),n&&d.jsx(ly,{className:"react-flow__controls-fitview",onClick:W,title:"fit view","aria-label":"fit view",children:d.jsx(Oie,{})}),r&&d.jsx(ly,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?d.jsx(Aie,{}):d.jsx(qie,{})}),p]})}cM.displayName="Controls";const uM=H.memo(cM);function Fie({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:f,borderRadius:p,shapeRendering:h,selected:b,onClick:x}){const{background:_,backgroundColor:E}=s||{},k=o||_||E;return d.jsx("rect",{className:Hr(["react-flow__minimap-node",{selected:b},f]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:k,stroke:l,strokeWidth:u},shapeRendering:h,onClick:x?j=>x(j,t):void 0})}const Die=H.memo(Fie),Lie=t=>t.nodes.map(e=>e.id),OS=t=>t instanceof Function?t:()=>t;function Mie({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Die,onClick:o}){const l=jn(Lie,xr),u=OS(e),f=OS(t),p=OS(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:l.map(b=>d.jsx(Bie,{id:b,nodeColorFunc:u,nodeStrokeColorFunc:f,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},b))})}function $ie({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:f,x:p,y:h,width:b,height:x}=jn(_=>{const E=_.nodeLookup.get(t),{x:k,y:j}=E.internals.positionAbsolute,{width:C,height:R}=Ja(E);return{node:E,x:k,y:j,width:C,height:R}},xr);return!f||f.hidden||!pL(f)?null:d.jsx(l,{x:p,y:h,width:b,height:x,style:f.style,selected:!!f.selected,className:r(f),color:e(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:u,id:f.id})}const Bie=H.memo($ie);var zie=H.memo(Mie);const Wie=200,Vie=150,Uie=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?dL(vf(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},Hie="react-flow__minimap-desc";function dM({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:f,maskStrokeColor:p,maskStrokeWidth:h,position:b="bottom-right",onClick:x,onNodeClick:_,pannable:E=!1,zoomable:k=!1,ariaLabel:j="React Flow mini map",inversePan:C,zoomStep:R=10,offsetScale:q=5}){const L=wr(),$=H.useRef(null),{boundingRect:W,viewBB:P,rfId:O,panZoom:z,translateExtent:F,flowWidth:V,flowHeight:U}=jn(Uie,xr),M=t?.width??Wie,X=t?.height??Vie,J=W.width/M,le=W.height/X,ie=Math.max(J,le),ne=ie*M,oe=ie*X,te=q*ie,ue=W.x-(ne-W.width)/2-te,de=W.y-(oe-W.height)/2-te,ye=ne+te*2,we=oe+te*2,Ie=`${Hie}-${O}`,ze=H.useRef(0),Re=H.useRef();ze.current=ie,H.useEffect(()=>{if($.current&&z)return Re.current=bne({domNode:$.current,panZoom:z,getTransform:()=>L.getState().transform,getViewScale:()=>ze.current}),()=>{Re.current?.destroy()}},[z]),H.useEffect(()=>{Re.current?.update({translateExtent:F,width:V,height:U,inversePan:C,pannable:E,zoomStep:R,zoomable:k})},[E,k,C,R,F,V,U]);const De=x?Xe=>{const[Ve,ct]=Re.current?.pointer(Xe)||[0,0];x(Xe,{x:Ve,y:ct})}:void 0,Je=_?H.useCallback((Xe,Ve)=>{const ct=L.getState().nodeLookup.get(Ve);_(Xe,ct)},[]):void 0;return d.jsx(BN,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*ie:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Hr(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:M,height:X,viewBox:`${ue} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ie,ref:$,onClick:De,children:[j&&d.jsx("title",{id:Ie,children:j}),d.jsx(zie,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-te},${de-te}h${ye+te*2}v${we+te*2}h${-ye-te*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}dM.displayName="MiniMap";const fM=H.memo(dM);function Kie({nodeId:t,position:e,variant:n=sh.Handle,className:r,style:i={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:b,onResizeStart:x,onResize:_,onResizeEnd:E}){const k=VN(),j=typeof t=="string"?t:k,C=wr(),R=H.useRef(null),q=n===sh.Line?"right":"bottom-right",L=e??q,$=H.useRef(null);H.useEffect(()=>{if(!(!R.current||!j))return $.current||($.current=qne({domNode:R.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:z,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:M,domNode:X}=C.getState();return{nodeLookup:z,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:M,paneDomNode:X}},onChange:(z,F)=>{const{triggerNodeChanges:V,nodeLookup:U,parentLookup:M,nodeOrigin:X}=C.getState(),J=[],le={x:z.x,y:z.y},ie=U.get(j);if(ie&&ie.expandParent&&ie.parentId){const ne=ie.origin??X,oe=z.width??ie.measured.width,te=z.height??ie.measured.height,ue={id:ie.id,parentId:ie.parentId,rect:{width:oe,height:te,...hL({x:z.x??ie.position.x,y:z.y??ie.position.y},{width:oe,height:te},ie.parentId,U,ne)}},de=$N([ue],U,M,X);J.push(...de),le.x=z.x?Math.max(ne[0]*oe,z.x):void 0,le.y=z.y?Math.max(ne[1]*te,z.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:j,type:"position",position:{...le}};J.push(ne)}if(z.width!==void 0&&z.height!==void 0){const ne={id:j,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:z.width,height:z.height}};J.push(ne)}for(const ne of F){const oe={...ne,type:"position"};J.push(oe)}V(J)},onEnd:()=>{const z={id:j,type:"dimensions",resizing:!1};C.getState().triggerNodeChanges([z])}})),$.current.update({controlPosition:L,boundaries:{minWidth:l,minHeight:u,maxWidth:f,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:E,shouldResize:b}),()=>{$.current?.destroy()}},[L,l,u,f,p,h,x,_,E,b]);const W=L.split("-"),P=n===sh.Line?"borderColor":"backgroundColor",O=o?{...i,[P]:o}:i;return d.jsx("div",{className:Hr(["react-flow__resize-control","nodrag",...W,n,r]),ref:R,style:O,children:s})}H.memo(Kie);const Qie=t=>t.domNode?.querySelector(".react-flow__renderer");function Gie({children:t}){const e=jn(Qie);return e?Jh.createPortal(t,e):null}const Jie=(t,e)=>t?.internals.positionAbsolute.x!==e?.internals.positionAbsolute.x||t?.internals.positionAbsolute.y!==e?.internals.positionAbsolute.y||t?.measured.width!==e?.measured.width||t?.measured.height!==e?.measured.height||t?.selected!==e?.selected||t?.internals.z!==e?.internals.z,Zie=(t,e)=>{if(t.size!==e.size)return!1;for(const[n,r]of t)if(Jie(r,e.get(n)))return!1;return!0},Yie=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2],selectedNodesCount:t.nodes.filter(e=>e.selected).length});function HN({nodeId:t,children:e,className:n,style:r,isVisible:i,position:s=Ct.Top,offset:o=10,align:l="center",...u}){const f=VN(),p=H.useCallback(L=>(Array.isArray(t)?t:[t||f||""]).reduce((P,O)=>{const z=L.nodeLookup.get(O);return z&&P.set(z.id,z),P},new Map),[t,f]),h=jn(p,Zie),{x:b,y:x,zoom:_,selectedNodesCount:E}=jn(Yie,xr);if(!(typeof i=="boolean"?i:h.size===1&&h.values().next().value.selected&&E===1)||!h.size)return null;const j=vf(h),C=Array.from(h.values()),R=Math.max(...C.map(L=>L.internals.z+1)),q={position:"absolute",transform:ine(j,{x:b,y:x,zoom:_},s,o,l),zIndex:R,...r};return d.jsx(Gie,{children:d.jsx("div",{style:q,className:Hr(["react-flow__node-toolbar",n]),...u,"data-id":C.reduce((L,$)=>`${L}${$.id} `,"").trim(),children:e})})}const Fn="icon-[solar--home-outline]",Xie=["bg-blue-200","bg-blue-400","bg-blue-600","bg-green-200","bg-green-400","bg-green-600","bg-green-600","bg-orange-200","bg-orange-400","bg-orange-600","bg-slate-200","bg-slate-400","bg-slate-600","bg-gray-200","bg-gray-400","bg-gray-600","bg-purple-200","bg-purple-400","bg-purple-600","bg-purple-800"],KN=bZ({shape:D.object({name:D.string().min(1),color:D.string().min(1),minWidth:No(),maxWidth:No(),minHeight:No(),maxHeight:No(),probability:No(),limit:No()}),filter:Pi}),d3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(KN.shape),defaultValues:{name:"",color:"slate",minWidth:1,maxWidth:4,minHeight:1,maxHeight:4,limit:32,probability:100,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"name",label:d.jsx(Y,{label:"Region name (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[d.jsx(un,{formState:s.formState,name:"minWidth",label:d.jsx(Y,{label:"Region min width (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minWidth")})}),d.jsx(un,{formState:s.formState,name:"maxWidth",label:d.jsx(Y,{label:"Region max width (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxWidth")})})]}),d.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[d.jsx(un,{formState:s.formState,name:"minHeight",label:d.jsx(Y,{label:"Region min height (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minHeight")})}),d.jsx(un,{formState:s.formState,name:"maxHeight",label:d.jsx(Y,{label:"Region max height (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxHeight")})})]}),d.jsx(un,{formState:s.formState,name:"probability",label:d.jsx(Y,{label:"Region spawn probability (label)"}),hint:d.jsx(Y,{label:"Region spawn probability (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:.5,max:100,step:.5,...s.register("probability")})}),d.jsx(un,{formState:s.formState,name:"limit",label:d.jsx(Y,{label:"Region limit (label)"}),hint:d.jsx(Y,{label:"Region limit (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("limit")})}),d.jsx(un,{formState:s.formState,name:"color",label:d.jsx(Y,{label:"Color (label)"}),children:d.jsx(Oi,{control:s.control,name:"color",render:({field:{ref:l,...u}})=>d.jsx(hN,{items:Xie.map(f=>({id:f,color:f})),render:({entity:f})=>d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:gn("w-4","h-4",f.color)}),f.color]}),...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:b2,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},_p=Mr(),ese=[_p({name:"name",header(){return d.jsx(Y,{label:"Region name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),_p({name:"width",header(){return d.jsx(Y,{label:"Region width (label)"})},render({data:t}){return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:dn({number:t.minWidth})}),d.jsx("div",{children:d.jsx(nn,{icon:Jb,variant:{size:"xs"}})}),d.jsx("div",{children:dn({number:t.maxWidth})})]})},size:16}),_p({name:"height",header(){return d.jsx(Y,{label:"Region height (label)"})},render({data:t}){return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:dn({number:t.minHeight})}),d.jsx("div",{children:d.jsx(nn,{icon:Jb,variant:{size:"xs"}})}),d.jsx("div",{children:dn({number:t.maxHeight})})]})},size:12}),_p({name:"probability",header(){return d.jsx(Y,{label:"Region probability (label)"})},render({value:t}){return d.jsxs(As,{children:[dn({number:t}),"%"]})},size:14}),_p({name:"limit",header(){return d.jsx(Y,{label:"Region limit (label)"})},render({value:t}){return dn({number:t})},size:18})],pM=({table:t,...e})=>{const n=Pn([["Region"]]);return d.jsx(Dr,{table:Lr({...t,columns:ese}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create region (menu)"}),textTitle:d.jsx(Y,{label:"Create region (modal)"}),icon:Ub,children:({close:r})=>d.jsx(d3,{mutation:Zt({async mutationFn(i){return kt.transaction().execute(async s=>s.insertInto("Region").values({id:In(),...i}).execute())},async onSuccess(){await n(),r()}})})})})},row({data:r}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit region (modal)"}),icon:Ub,children:({close:i})=>d.jsx(d3,{defaultValues:r,mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.updateTable("Region").set(s).where("id","=",r.id).execute())},async onSuccess(){await n(),i()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:d.jsx(Y,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:n})})]})}},...e})},tse=t=>d.jsx(GD,{icon:Ub,table:pM,textTitle:d.jsx(Y,{label:"Select regions (title)"}),render:({entities:e})=>d.jsx(tc,{items:e,css:{base:["flex","flex-row","gap-2"]},render:({entity:n})=>d.jsx("div",{className:gn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:n.name})}),queryKey:"Region",query:async({filter:e,cursor:n})=>kt.transaction().execute(async r=>or({select:r.selectFrom("Region as r").selectAll(),output:KN.entity,query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("r.id","=",s.id)),s?.idIn&&(o=o.where("r.id","in",s.idIn)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("r.id","like",l),u("r.name","like",l)]))}return o},filter:e,cursor:n})),...t}),QN=oZ({shape:D.object({name:D.string().min(1),cycles:No(),sort:No(),limit:No(),regionIds:D.array(D.string()).optional()}),filter:Pi.merge(D.object({name:D.string().optional()}))}),cv=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(QN.shape),defaultValues:{cycles:1,sort:0,limit:1,regionIds:[],...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"name",label:d.jsx(Y,{label:"Building name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx(un,{formState:s.formState,name:"cycles",label:d.jsx(Y,{label:"Construction cycles (label)"}),hint:d.jsx(Y,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),d.jsx(un,{formState:s.formState,name:"limit",label:d.jsx(Y,{label:"Building limit (label)"}),hint:d.jsx(Y,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),d.jsx(un,{formState:s.formState,name:"sort",label:d.jsx(Y,{label:"Blueprint sort (label)"}),hint:d.jsx(Y,{label:"Sort blueprints by this number (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),d.jsx(un,{formState:s.formState,name:"regionIds",label:d.jsx(Y,{label:"Regions (label)"}),children:d.jsx(Oi,{control:s.control,name:"regionIds",render:({field:{ref:l,...u}})=>d.jsx(tse,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Fn,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},Ds="icon-[fluent-mdl2--production-floor-management]",nse=({id:t,data:e,isConnectable:n})=>{const{locale:r}=rn({from:"/$locale"}),i=nc();return d.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[d.jsx(qi,{type:"target",position:Ct.Left,className:"w-4 h-4"}),d.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[d.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),d.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(At,{icon:vr,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),d.jsx(At,{icon:Ds,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),d.jsx(At,{icon:jD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),d.jsx("div",{children:d.jsx(hf,{target:d.jsx(ym,{iconEnabled:ii,css:{base:["text-red-500"]}}),outside:!0,textTitle:d.jsx(Y,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Pn([["Editor"]]);return d.jsx(bs,{callback:async()=>kt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:d.jsx(Y,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),d.jsx(qi,{type:"source",position:Ct.Right,isConnectable:n,className:"w-4 h-4"})]})},rse=({nodeId:t})=>{const{fitView:e}=xf();return H.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},ise=({data:t,zoomTo:e})=>{const n=Pn([]),r=Zt({async mutationFn({blueprintId:i,dependencyId:s}){return kt.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:In(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return d.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:d.jsx("div",{style:{width:"95vw",height:"85vh"},children:d.jsxs(oM,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:H.useMemo(()=>({blueprint(i){return d.jsx(nse,{...i})}}),[]),edgeTypes:H.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:l,targetY:u,sourcePosition:f,targetPosition:p,style:h={},markerEnd:b}){const{setEdges:x}=xf(),[_,E,k]=FN({sourceX:s,sourceY:o,sourcePosition:f,targetX:l,targetY:u,targetPosition:p}),j=Pn([]),C=Zt({async mutationFn({id:R}){return kt.transaction().execute(async q=>{await q.deleteFrom("Blueprint_Dependency").where("id","=",R).execute()})},async onSuccess(){x(R=>R.filter(q=>q.id!==i)),await j()}});return d.jsxs(d.Fragment,{children:[d.jsx(Em,{path:_,markerEnd:b,style:h}),d.jsx(Sie,{children:d.jsx("div",{className:gn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${E}px,${k}px)`},children:d.jsx(nn,{icon:C.isPending?LQ:fN,onClick:()=>{C.mutate({id:i})}})})})]})}}),[]),children:[d.jsx(rse,{nodeId:e}),d.jsx(uM,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:d.jsx(hf,{target:d.jsx(ym,{className:"react-flow__controls-button",iconEnabled:Fn}),outside:!1,textTitle:d.jsx(Y,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Pn([["Editor"]]),{locale:o}=rn({from:"/$locale"}),l=nc();return d.jsx(cv,{mutation:Zt({async mutationFn(u){return Rn.promise(kt.transaction().execute(f=>f.insertInto("Blueprint").values({id:In(),...u}).returningAll().executeTakeFirstOrThrow()),ei("Create blueprint"))},async onSuccess(u){await s(),l({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),d.jsx(fM,{}),d.jsx(lM,{variant:ra.Dots,gap:12,size:1})]})})})},sse=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),N2.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),oI=$t("/$locale/apps/derivean/root/editor")({validateSearch:pr(D.object({zoomTo:D.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return sse({graph:new N2.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=oI.useLoaderData(),{zoomTo:e}=oI.useSearch();return d.jsx(ise,{data:t,zoomTo:e})}}),ose=()=>Zt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return kt.transaction().execute(async r=>bm.parse(await r.insertInto("User").values({id:In(),name:e,login:t,password:kF.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),ase=D.object({name:D.string().min(1),login:D.string().min(1),password1:D.string().min(1),password2:D.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),lse=({onSuccess:t})=>{const e=ose(),n=bi({resolver:vi(ase)}),r=yi({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return d.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{GI({error:s,errors:[CI({error:s,schema:QI,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[d.jsx(li,{variant:{highlight:!0},error:n.formState.errors.root}),d.jsx(un,{formState:n.formState,name:"name",label:d.jsx(Y,{label:"Name (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),d.jsx(un,{formState:n.formState,name:"login",label:d.jsx(Y,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),d.jsx(un,{formState:n.formState,name:"password1",label:d.jsx(Y,{label:"Password 1 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),d.jsx(un,{formState:n.formState,name:"password2",label:d.jsx(Y,{label:"Password 2 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),d.jsx(yn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:d.jsx(Y,{label:"Register (submit)"})})]})},cse=$t("/$locale/apps/derivean/public/register")({component:()=>{const t=nc();return d.jsx("div",{className:gn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(lse,{onSuccess:async e=>{mf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),use=$t("/$locale/apps/derivean/public/logout")({pendingComponent(){return d.jsx("div",{className:gn(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsx(ZD,{icon:yN,textTitle:d.jsx(Y,{label:"Logout (label)"}),textMessage:d.jsx(Y,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:t}}){throw mf.remove("session"),Gh({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),dse=()=>Zt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return kt.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",kF.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),fse=D.object({login:D.string().min(1),password:D.string().min(1)}),pse=({onSuccess:t})=>{const{locale:e}=rn({from:"/$locale"}),n=dse(),r=bi({resolver:vi(fse)}),i=yi({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return d.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{GI({error:o,errors:[CI({error:o,schema:QI,onError:({data:l})=>{r.setError("root",{message:l.message})}})],onError:l=>{r.setError("root",{message:l.message})}})}}).catch(()=>{})),children:[d.jsx(li,{variant:{highlight:!0},error:r.formState.errors.root}),d.jsx(un,{formState:r.formState,name:"login",label:d.jsx(Y,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),d.jsx(un,{formState:r.formState,name:"password",label:d.jsx(Y,{label:"Password (label)"}),children:d.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),d.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[d.jsx(At,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:d.jsx(Y,{label:"Register (link)"})}),d.jsx(yn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:d.jsx(Y,{label:"Login (submit)"})})]})]})},hse=$t("/$locale/apps/derivean/public/login")({component:()=>{const t=nc();return d.jsx("div",{className:gn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(pse,{onSuccess:async e=>{mf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),mse=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").select(["b.id as buildingId","c.id","b.blueprintId","c.cycle","bl.cycles",i=>i.case().when(i.not(i.exists(i.selectFrom("Blueprint_Requirement as br").select(i.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(s=>s.not(s.exists(s.selectFrom("Inventory as i").select(s.lit(1).as("one")).where("i.id","in",s.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(i.lit(!0)).else(i.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("l.mapId","=",n).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();for await(const{id:i,cycle:s,cycles:o,buildingId:l,blueprintId:u}of r){if(await t.deleteFrom("Route").where("toId","=",l).execute(),s>=o){await t.deleteFrom("Construction").where("id","=",i).execute(),await t.deleteFrom("Demand").where("buildingId","=",l).execute();const f=await t.selectFrom("Blueprint_Production as bp").select(["bp.resourceId"]).where("bp.blueprintId","=",u).execute();for await(const{resourceId:p}of f)try{await t.insertInto("Supply").values({id:In(),buildingId:l,resourceId:p}).execute()}catch{}continue}await t.updateTable("Construction").set("cycle",s+1).where("id","=",i).execute()}},f3=async({tx:t,userId:e,buildingId:n,blueprintProductionId:r})=>{const i=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",r).executeTakeFirstOrThrow(),s=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",r).execute();for await(const{resourceId:o,amount:l,passive:u}of s){const f=await t.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi","bi.inventoryId","i.id").select(["i.id","i.amount"]).where("bi.buildingId","=",n).where("i.resourceId","=",o).where("i.type","=","storage").executeTakeFirstOrThrow();if(f.amount<l){await t.insertInto("Demand").values({id:In(),amount:l-f.amount,buildingId:n,priority:10,resourceId:o,type:"storage"}).execute();continue}u||await t.updateTable("Inventory").set({amount:f.amount-l}).where("id","=",f.id).execute()}await t.insertInto("Production").values({id:In(),buildingId:n,blueprintProductionId:r,userId:e,cycle:0,cycles:i.cycles}).execute()},gse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","p.cycle","p.cycles","bp.resourceId","p.blueprintProductionId","r.name","bp.amount"]).where("userId","=",e).execute();for await(const{id:s,buildingId:o,resourceId:l,cycle:u,cycles:f,amount:p}of n){if(u<f){await t.updateTable("Production").set("cycle",u+1).where("id","=",s).execute();continue}const h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(h&&(!(h.limit>0)||h.amount+p<=h.limit)){await t.updateTable("Inventory").set({amount:h.amount+p}).where("id","=",h.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}const b=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(b&&(!(b.limit>0)||b.amount+p<=b.limit)){await t.updateTable("Inventory").set({amount:b.amount+p}).where("id","=",b.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}}const r=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();for await(const{buildingId:s,productionId:o}of r)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await f3({tx:t,blueprintProductionId:o,buildingId:s,userId:e}),await t.updateTable("Building").set({productionId:null}).where("id","=",s).execute()}catch{}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();for await(const{buildingId:s,recurringProductionId:o}of i)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await f3({tx:t,blueprintProductionId:o,buildingId:s,userId:e})}catch{}},yse=async({tx:t,userId:e,mapId:n})=>{const r=await t.selectFrom("Demand as d").innerJoin("Building as b","b.id","d.buildingId").innerJoin("Land as l","l.id","b.landId").select(["d.id","d.amount","d.resourceId","d.buildingId","d.type"]).where("b.userId","=",e).where("l.mapId","=",n).orderBy("d.priority","desc").execute();for await(const i of r){const s=await t.selectFrom("Supply as s").selectAll().where("s.resourceId","=",i.resourceId).where("s.buildingId","in",t.withRecursive("ConnectedWaypoints",o=>o.selectFrom("Building_Waypoint as bw").where("bw.buildingId","=",i.buildingId).select(["bw.waypointId"]).unionAll(o.selectFrom("Route as r").innerJoin("ConnectedWaypoints as cw","cw.waypointId","r.fromId").select(["r.toId as waypointId"]))).selectFrom("ConnectedWaypoints as cw").innerJoin("Building_Waypoint as bw","bw.waypointId","cw.waypointId").innerJoin("Building as b","b.id","bw.buildingId").innerJoin("Land as l","l.id","b.landId").where("b.id","!=",i.buildingId).where("l.mapId","=",n).select(["b.id as buildingId"]).distinct()).execute();for await(const o of s){const l=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o.buildingId)).where("i.resourceId","=",o.resourceId).where("i.type","=","storage").orderBy("i.amount","desc").executeTakeFirst(),u=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i.buildingId)).where("i.resourceId","=",o.resourceId).where("i.type","=",i.type).orderBy("i.amount","asc").executeTakeFirst();if(!l||!u){console.log("Source or target is not compatible");continue}const f=Math.max(0,Math.min(Math.min(l.amount,i.amount),u.limit-u.amount));f>0&&(await t.updateTable("Demand").set({amount:i.amount-f}).where("id","=",i.id).execute(),await t.updateTable("Inventory").set({amount:l.amount-f}).where("id","=",l.id).execute(),await t.updateTable("Inventory").set({amount:u.amount+f}).where("id","=",u.id).execute())}}await t.deleteFrom("Demand").where("amount","<=",0).execute()},hM=async({tx:t,userId:e,mapId:n})=>{try{await t.insertInto("Cycle").values({id:In(),stamp:pn.now().toUTC().toSQLTime(),userId:e,mapId:n}).execute(),await yse({tx:t,userId:e,mapId:n}),await mse({tx:t,userId:e,mapId:n}),await gse({tx:t,userId:e})}catch(r){throw console.error(r),r}},bse=({userId:t,mapId:e,...n})=>{const r=Pn([["GameMap"]]),[i,s]=H.useState(!1),o=Zt({mutationKey:["useCycleMutation"],async mutationFn({userId:l}){return kt.transaction().execute(async u=>hM({tx:u,userId:l,mapId:e}))},async onSuccess(){await r()}});return H.useEffect(()=>{if(i&&!o.isPending){const l=setInterval(()=>{o.mutate({userId:t})},1e3);return()=>clearInterval(l)}},[i]),d.jsx(yn,{iconEnabled:i?"icon-[fluent--pause-24-regular]":"icon-[hugeicons--play]",onClick:()=>{s(l=>!l)},loading:o.isPending,...n})},Uh="icon-[gala--clock]",vse=({userId:t,mapId:e,cycle:n,...r})=>{const i=Pn([["Cycle"],["GameMap"]]),s=Zt({mutationKey:["useCycleMutation"],async mutationFn({userId:o}){return kt.transaction().execute(async l=>hM({tx:l,userId:o,mapId:e}))},async onSuccess(){await i()}});return d.jsxs(yn,{iconEnabled:Uh,iconDisabled:Uh,onClick:()=>{s.mutate({userId:t})},loading:s.isPending,...r,children:[d.jsx(Y,{css:{base:["font-bold"]},label:"New cycle (label)"}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{className:"font-light text-sm",children:dn({number:n})}),d.jsx(nn,{icon:"icon-[solar--arrow-right-linear]"}),d.jsx("div",{className:"font-bold",children:dn({number:n+1})})]})]})},xse=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=Im({sourceX:t,sourceY:e,targetX:n,targetY:r});return d.jsx("g",{children:d.jsx("path",{style:i,fill:"none",d:s})})};function p3(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Ct.Left:s>=r+n.measured.width-1?Ct.Right:o<=i+1?Ct.Top:o>=n.y+n.measured.height-1?Ct.Bottom:Ct.Top}function h3(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,l=r/2,u=i.x+o,f=i.y+l,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,b=(p-u)/(2*o)-(h-f)/(2*l),x=(p-u)/(2*o)+(h-f)/(2*l),_=1/(Math.abs(b)+Math.abs(x)||1),E=_*b,k=_*x,j=o*(E+k)+u,C=l*(-E+k)+f;return{x:j,y:C}}function mM(t,e){const n=h3(t,e),r=h3(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:p3(t,n),targetPos:p3(e,r)}}const wse=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=lv(e),o=lv(n);if(!s||!o)return null;const{sx:l,sy:u,tx:f,ty:p}=mM(s,o),[h]=Im({sourceX:l,sourceY:u,targetX:f,targetY:p});return d.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},_se=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=lv(e),o=lv(n);if(!s||!o)return null;const{sx:l,sy:u,tx:f,ty:p}=mM(s,o),[h]=Im({sourceX:l,sourceY:u,targetX:f,targetY:p});return d.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},GN="icon-[lucide--land-plot]",Sse=()=>{const{locale:t,mapId:e}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-xs",children:[d.jsx(At,{to:"/$locale/apps/derivean/game",params:{locale:t},children:d.jsx(yn,{iconEnabled:ao,variant:{variant:"subtle"}})}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:t,mapId:e},children:d.jsx(yn,{iconEnabled:lo,variant:{variant:"subtle"}})}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:t,mapId:e},children:d.jsx(yn,{iconEnabled:GN,variant:{variant:"subtle"}})})]})},Ese=()=>{const t=Pn([["GameMap"]]);return Zt({async mutationFn({id:e,x:n,y:r}){return kt.transaction().execute(async i=>{await i.updateTable("Building").set({x:n,y:r}).where("id","=",e).execute()})},async onSuccess(){await t()}})},Ise=()=>{const t=Pn([["GameMap"]]);return Zt({async mutationFn({buildingId:e,waypointId:n}){return kt.transaction().execute(async r=>r.insertInto("Building_Waypoint").values({id:In(),buildingId:e,waypointId:n}).execute())},async onSuccess(){await t()}})},Nse=()=>{const t=Pn([["GameMap"]]);return Zt({async mutationFn({userId:e,fromId:n,toId:r}){return kt.transaction().execute(async i=>i.insertInto("Route").values({id:In(),fromId:n,toId:r,userId:e}).execute())},async onSuccess(){await t()}})},kse=()=>{const t=Pn([["GameMap"]]);return Zt({async mutationFn({userId:e,mapId:n,x:r,y:i}){return kt.transaction().execute(async s=>s.insertInto("Waypoint").values({id:In(),userId:e,mapId:n,x:r,y:i}).returning("id").executeTakeFirstOrThrow())},async onSuccess(){await t()}})},Cse=()=>Zt({async mutationFn({id:t,x:e,y:n}){return kt.transaction().execute(async r=>r.updateTable("Waypoint").set({x:e,y:n}).where("id","=",t).execute())}}),JN=["flex","flex-row","gap-2","items-center","p-4","bg-white","rounded-md","border","shadow-md","border-slate-300"],Ba="icon-[mingcute--inventory-line]",aI="icon-[tabler--basket]",gM="icon-[oui--refresh]",cx="icon-[hugeicons--package-sent]",Tse=({id:t,data:e})=>{const{mapId:n,locale:r}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(d.Fragment,{children:[d.jsx(HN,{className:gn(JN),children:d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx(At,{icon:lo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name}),d.jsxs("div",{className:"flex flex-row gap-1 items-end",children:[d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(yn,{iconEnabled:Ba,variant:{variant:"subtle",size:"sm"}})}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(yn,{iconEnabled:Ds,variant:{variant:"subtle",size:"sm"}})}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(yn,{iconEnabled:cx,variant:{variant:"subtle",size:"sm"}})})]})]})}),d.jsxs("div",{className:gn(["flex","flex-col","gap-1","w-full","h-full","justify-between","items-start"]),children:[d.jsx("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:d.jsx(At,{icon:lo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name})}),d.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[d.jsx("div",{children:e.productionName?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[d.jsx(nn,{icon:aI,variant:{size:"xs"}}),d.jsx("div",{children:e.productionName})]}):e.recurringProductionName?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[d.jsx(nn,{icon:gM,variant:{size:"xs"}}),d.jsx("div",{children:e.recurringProductionName})]}):null}),e.production?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400 font-bold",children:[d.jsx(nn,{icon:Jb}),d.jsx("div",{children:e.production.name})]}):null]}),e.production?d.jsx(yf,{value:100*e.production.cycle/e.production.cycles}):null,d.jsx(qi,{className:"hidden",position:Ct.Right,type:"source",isConnectable:!1}),d.jsx(qi,{className:"hidden",position:Ct.Left,type:"target",isConnectable:!1})]})]})},jse="icon-[gis--route-end]",Rse=({id:t,data:e})=>{const n=UN(),r=n.inProgress&&n.fromNode.id!==t;return d.jsxs("div",{className:"flex flex-row gap-2 w-full h-full items-center justify-center ",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center text-xl",children:[d.jsx(nn,{icon:jse,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&d.jsx(qi,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ct.Right,type:"source"}),(!n.inProgress||r)&&d.jsx(qi,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ct.Left,type:"target",isConnectableStart:!1})]})]})},Ose=({data:t})=>{const e=Pn([["GameMap"]]),n=Zt({async mutationFn({constructionId:r}){return kt.transaction().execute(async i=>{i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute();const s=await i.selectFrom("Building as b").innerJoin("Blueprint_Requirement as br","br.blueprintId","b.blueprintId").select(["b.id as buildingId","br.amount","br.resourceId"]).where("b.constructionId","=",r).execute();for await(const{amount:o,buildingId:l,resourceId:u}of s)await i.insertInto("Demand").values({id:In(),amount:o,buildingId:l,resourceId:u,priority:0,type:"construction"}).execute()})},async onSuccess(){await e()}});return d.jsxs("div",{className:"flex flex-row gap-2 items-start justify-between w-full h-full",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(nn,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name})]}),d.jsx(yn,{iconEnabled:OE,iconDisabled:OE,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},Hh="icon-[emojione-monotone--construction]",qse=({data:t})=>{const{mapId:e,locale:n}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(d.Fragment,{children:[d.jsx(HN,{position:Ct.Top,className:gn(JN),children:d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:n,mapId:e,landId:t.id},children:d.jsx(yn,{iconEnabled:Hh,variant:{variant:"subtle"},children:d.jsx(Y,{label:"Construction (label)"})})})}),d.jsx("div",{children:d.jsx("div",{className:"text-9xl font-bold font-slate-800",children:t.name})})]})},Ase=({data:t})=>{const{mapId:e,locale:n}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsx(At,{icon:Hh,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements",params:{locale:n,mapId:e,buildingId:t.id},css:{base:["font-bold"]},children:t.name})}),d.jsx(yf,{value:100*t.cycle/t.cycles}),d.jsx(qi,{className:"hidden",position:Ct.Right,type:"source",isConnectable:!1}),d.jsx(qi,{className:"hidden",position:Ct.Left,type:"target",isConnectable:!1})]})},yM="icon-[lets-icons--pin-alt-light]",Pse=()=>d.jsxs(d.Fragment,{children:[d.jsx(HN,{className:gn(JN),children:d.jsx("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:"waypoint toolbar"})}),d.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[d.jsx(nn,{icon:yM,css:{base:["text-amber-600"]},variant:{size:"5xl"}}),d.jsx(qi,{className:"hidden",position:Ct.Right,type:"source",isConnectable:!1}),d.jsx(qi,{className:"hidden",position:Ct.Left,type:"target",isConnectable:!1})]})]}),Fse=({id:t})=>{const e=UN(),n=e.inProgress&&e.fromNode.id!==t;return d.jsxs("div",{className:"w-full h-full flex items-center justify-center ",children:[d.jsx(nn,{icon:yM,css:{base:["text-amber-600"]},variant:{size:"5xl"}}),d.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!e.inProgress&&d.jsx(qi,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ct.Right,type:"source"}),(!e.inProgress||n)&&d.jsx(qi,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ct.Left,type:"target",isConnectableStart:!1})]})]})},Dse={stroke:"#DD44AA",strokeWidth:3},Lse={land:qse,construction:Ose,queue:Ase,building:Tse,"building-route":Rse,waypoint:Pse,"waypoint-route":Fse},Mse={route:_se,"building-waypoint":wse},$se=({userId:t,cycle:e,defaultNodes:n,defaultEdges:r,zoomToId:i,routing:s})=>{const o=Pn([["GameMap"]]),{mapId:l}=rn({from:"/$locale/apps/derivean/map/$mapId"}),u=nc(),[f,p]=Eie(n),[h,b]=Iie(r),{getIntersectingNodes:x,fitView:_,getNode:E,getNodes:k,screenToFlowPosition:j}=xf();H.useEffect(()=>{p(n)},[n]),H.useEffect(()=>{b(r)},[r]),H.useEffect(()=>{i&&setTimeout(()=>{_({nodes:[{id:i}],duration:750})},250)},[_,i]);const C=Ese(),R=Zt({async mutationFn(){return kt.transaction().execute(async U=>{const M=k().filter(X=>x(X).filter(J=>J.type!=="land").length>0).map(X=>X.id);await U.updateTable("Building").where("id","in",U.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").where("l.mapId","=",l).select("b.id")).set({valid:!0}).execute(),await U.updateTable("Building").set({valid:!1}).where("id","in",M).execute()})},async onSuccess(){await o()}}),q=kse(),L=Cse(),$=Nse(),W=Ise(),P=H.useCallback(U=>{p(M=>zN(U,M))},[p]),O=H.useCallback((U,M)=>{p(X=>X.map(J=>J.id===M.id?{...J,selected:!1}:J))},[]),z=H.useCallback((U,M)=>{switch(M.type){case"construction":case"queue":case"building":C.mutate({id:M.id,x:M.position.x,y:M.position.y},{onSuccess(){R.mutate()}});break;case"waypoint":L.mutate({id:M.id,x:M.position.x,y:M.position.y});break}},[x,C]),F=H.useCallback(U=>{const M=E(U.source),X=E(U.target);if(!(!M||!X))switch(`${M.type}:${X.type}`){case"building-route:waypoint-route":W.mutate({buildingId:M.id,waypointId:X.id});break;case"waypoint-route:building-route":W.mutate({buildingId:X.id,waypointId:M.id});break;case"waypoint-route:waypoint-route":$.mutate({userId:t,fromId:M.id,toId:X.id});break;default:console.warn(`Unknown connection: ${M.type}:${X.type}`);break}},[$]),V=H.useCallback((U,M)=>{if(!M.isValid&&M.fromNode){const{clientX:X,clientY:J}="changedTouches"in U?U.changedTouches[0]:U,le=j({x:X-32,y:J-32}),ie=M.fromNode.id,{type:ne}=M.fromNode;q.mutate({userId:t,mapId:l,...le},{async onSuccess({id:oe}){switch(ne){case"building-route":W.mutate({buildingId:ie,waypointId:oe});break;case"waypoint-route":$.mutate({userId:t,fromId:ie,toId:oe});break}}})}},[j,q,$]);return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-row",children:[d.jsxs(oM,{nodes:f,edges:h,onNodesChange:P,onNodeDragStart:O,onNodeDragStop:z,onConnect:F,onConnectEnd:V,className:"grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:Lse,edgeTypes:Mse,connectionLineComponent:xse,connectionLineStyle:Dse,maxZoom:2,minZoom:.1,onDoubleClick:H.useCallback(()=>{u({search:{routing:!s}})},[u,s]),zoomOnDoubleClick:!1,children:[d.jsx(vse,{userId:t,mapId:l,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-16"]},onDoubleClick:U=>{U.preventDefault(),U.stopPropagation()}}),d.jsx(bse,{userId:t,mapId:l,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),d.jsx(uM,{orientation:"horizontal",showZoom:!1,showFitView:!1}),d.jsx(fM,{zoomable:!0,draggable:!0,pannable:!0,maskColor:"rgba(0,0,0,0.2)"}),d.jsx(lM,{variant:ra.Lines,className:"bg-slate-50",gap:32,size:1}),d.jsx(Sse,{})]}),d.jsx(uo,{})]})})},Bse=({cycle:t,userId:e,nodes:n,edges:r,zoomToId:i,routing:s})=>d.jsx(sM,{children:d.jsx($se,{userId:e,cycle:t,defaultNodes:n,defaultEdges:r,zoomToId:i,routing:s})}),qS=384,AS=128,cy=["p-2","bg-white","rounded-lg","border-[4px]","border-slate-300"],lI=$t("/$locale/apps/derivean/map/$mapId")({validateSearch:pr(D.object({zoomToId:D.string().optional(),routing:D.boolean().optional()})),loaderDeps:({search:{routing:t}})=>({routing:t}),async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r},deps:{routing:i}}){const s=await n();return{user:s,land:await t.ensureQueryData({queryKey:["GameMap",r,"land","list"],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","r.color","l.x","l.y","l.width","l.height"]).where("l.mapId","=",r).orderBy("r.name"),output:D.object({id:D.string().min(1),name:D.string().min(1),color:D.string().min(1),x:D.number().int(),y:D.number().int(),width:D.number().int(),height:D.number().int()})})).map(u=>({id:u.id,position:{x:u.x,y:u.y},width:u.width,height:u.height,selectable:!0,draggable:!1,data:u,type:"land",className:gn(cy,[u.color,"border-slate-600","opacity-25"]),zIndex:-1})))}}),construction:await t.ensureQueryData({queryKey:["GameMap",r,"construction"],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.constructionId","bl.name","bg.x","bg.y","bg.valid"]).where("c.plan","=",!0).where("l.mapId","=",r).where("bg.userId","=",s.id),output:D.object({id:D.string().min(1),blueprintId:D.string().min(1),landId:D.string().min(1),constructionId:D.string().min(1),name:D.string().min(1),x:D.number(),y:D.number(),valid:Qi()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:"construction",width:qS,height:AS,selectable:!1,className:gn(cy,[u.valid?["border-green-500"]:["border-red-500"]]),extent:"parent",parentId:u.landId})))}}),queue:await t.ensureQueryData({queryKey:["GameMap",r,"queue",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bl.name","bg.x","bg.y","bg.valid","c.cycles","c.cycle"]).where("c.plan","=",!1).where("l.mapId","=",r).where("bg.userId","=",s.id),output:D.object({id:D.string().min(1),blueprintId:D.string().min(1),landId:D.string().min(1),name:D.string().min(1),x:D.number(),y:D.number(),cycles:D.number().int().nonnegative(),cycle:D.number().int().nonnegative(),valid:Qi()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"building-route":"queue",width:qS,height:AS,selectable:!1,className:gn(cy,["border-amber-400","bg-amber-50"],u.valid?void 0:["border-red-500"]),extent:"parent",parentId:u.landId})))}}),building:await t.ensureQueryData({queryKey:["GameMap",r,"building",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.productionId","bg.recurringProductionId","bg.valid","bg.userId",u=>u.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),u=>u.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),u=>u.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(f=>Gc.jsonObject({id:f.ref("p.id"),name:f.ref("r.name"),cycle:f.ref("p.cycle"),cycles:f.ref("p.cycles")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("l.mapId","=",r).where("bg.userId","=",s.id),output:D.object({id:D.string().min(1),blueprintId:D.string().min(1),landId:D.string().min(1),userId:D.string().min(1),name:D.string().min(1),productionId:D.string().nullish(),recurringProductionId:D.string().nullish(),productionName:D.string().nullish(),recurringProductionName:D.string().nullish(),production:M9(D.object({id:D.string().min(1),name:D.string().min(1),cycle:D.number().int().nonnegative(),cycles:D.number().int().nonnegative()})).nullish(),x:D.number(),y:D.number(),valid:Qi()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"building-route":"building",width:qS,height:AS,className:gn(cy,u.valid?void 0:["border-red-500"]),extent:"parent",parentId:u.landId})))}}),waypoint:await t.ensureQueryData({queryKey:["GameMap",r,"waypoint","list",{routing:i}],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Waypoint as wp").select(["wp.id","wp.x","wp.y"]).where("wp.mapId","=",r),output:D.object({id:D.string().min(1),x:D.number(),y:D.number()})})).map(u=>({id:u.id,data:u,position:{x:u.x,y:u.y},type:i?"waypoint-route":"waypoint",width:64,height:64,selectable:!0,className:gn(["rounded-md","bg-sky-100","border","border-sky-400","p-2"])})))}}),route:await t.ensureQueryData({queryKey:["GameMap",r,"route","list"],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Route as r").select(["r.id","r.fromId","r.toId"]).where("r.userId","=",s.id),output:D.object({id:D.string().min(1),fromId:D.string().min(1),toId:D.string().min(1)})})).map(u=>({id:u.id,source:u.fromId,target:u.toId,type:"route",style:{stroke:"#b1b1b7",strokeWidth:5}})))}}),buildingWaypoint:await t.ensureQueryData({queryKey:["GameMap",r,"buildingWaypoint","list"],async queryFn(){return e.transaction().execute(async o=>(await Or({select:o.selectFrom("Building_Waypoint as bw").select(["bw.id","bw.buildingId","bw.waypointId"]).leftJoin("Building as b","b.id","bw.buildingId").leftJoin("Land as l","l.id","b.landId").where("b.userId","=",s.id).where("l.mapId","=",r),output:D.object({id:D.string().min(1),buildingId:D.string().min(1),waypointId:D.string().min(1)})})).map(u=>({id:u.id,source:u.buildingId,target:u.waypointId,type:"building-waypoint",style:{stroke:"#b1b1b7",strokeWidth:2,pointerEvents:"all"}})))}}),cycle:await t.ensureQueryData({queryKey:["GameMap",r,"cycle"],async queryFn(){return e.transaction().execute(async o=>(await o.selectFrom("Cycle as c").select(l=>l.fn.count("c.id").as("count")).where("c.userId","=",s.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,land:e,construction:n,queue:r,building:i,waypoint:s,route:o,buildingWaypoint:l,cycle:u}=lI.useLoaderData(),{zoomToId:f,routing:p}=lI.useSearch(),h=H.useMemo(()=>[...e,...n,...r,...i,...s],[n,r,i,s,e]),b=H.useMemo(()=>[...o,...l],[o,l]);return d.jsx(Bse,{userId:t.id,cycle:u,nodes:h,edges:b,zoomToId:f,routing:p})}}),bM=$t("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=bM.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let l=`z.never({message: '${i}'})`;switch(o){case"integer":{l="z.number().int()";break}case"float4":{l="z.number()";break}case"datetime":{l="z.string()";break}case"boolean":{l="withBoolSchema()";break}}return o.startsWith("varchar")&&(l=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${l}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return d.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),m3=Mr(),zse=[m3({name:"name",header(){return d.jsx(Y,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),m3({name:"login",header(){return d.jsx(Y,{label:"User login (label)"})},render({value:t}){return t},size:14})],Wse=({table:t,...e})=>{const n=Pn([["GameMap"],["Management"],["User_Inventory"]]),r=Zt({async mutationFn({userId:i}){return kt.transaction().execute(async s=>{await s.deleteFrom("Building").where("userId","=",i).execute(),await s.deleteFrom("Production").where("userId","=",i).execute(),await s.deleteFrom("Construction").where("userId","=",i).execute(),await s.deleteFrom("Cycle").where("userId","=",i).execute()})},async onSuccess(){await n()}});return d.jsx(Dr,{table:Lr({...t,columns:zse}),action:{row({data:i}){return d.jsx(sr,{children:d.jsx(JI,{icon:ii,onClick:()=>{r.mutateAsync({userId:i.id})},children:d.jsx(Y,{label:"Reset game (menu)"})})})}},...e})},Vse=wZ({shape:D.object({name:D.string().min(1),login:D.string().min(1),password:D.string().min(1)}),filter:Pi.merge(D.object({login:D.string().optional(),password:D.string().optional()}))}),$y=$t("/$locale/apps/derivean/root/user/list")({validateSearch:pr(Fr(Vse)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>or({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:D.object({id:D.string().min(1),name:D.string().min(1),login:D.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=$y.useLoaderData(),{filter:n,cursor:r,selection:i}=$y.useSearch(),s=$y.useNavigate(),{tva:o}=fr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Wse,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of users (label)"}),...qr(s)}})})}}),Use=({entity:t,...e})=>{const{locale:n}=rn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(er,{icon:bN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"View detail (menu)"})}),d.jsx(er,{icon:lo,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Building list (menu)"})})]})},Hse=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(bf,{icon:bN,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(At,{icon:Hv,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:d.jsx(Y,{label:"User list (label)"})})}),...t})},vM=$t("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await da({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:D.object({id:D.string().min(1),name:D.string().min(1)})})}))},component(){const{tva:t}=fr({from:"__root__"}),{entity:e}=vM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Hse,{entity:e}),d.jsx(Use,{entity:e}),d.jsx(uo,{})]})}}),Nm=xZ({shape:D.object({code:D.string().min(1),label:D.string().min(1),group:D.string().nullish(),sort:No()}),filter:Pi.merge(D.object({code:D.string().optional(),group:D.string().optional()}))}),g3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Nm.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"code",label:d.jsx(Y,{label:"Tag code (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),d.jsx(un,{formState:s.formState,name:"label",label:d.jsx(Y,{label:"Tag label (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),d.jsx(un,{formState:s.formState,name:"group",label:d.jsx(Y,{label:"Tag group (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),d.jsx(un,{formState:s.formState,name:"sort",label:d.jsx(Y,{label:"Tag sort (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:qh,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},PS=Mr(),Kse=[PS({name:"label",header(){return d.jsx(Y,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),PS({name:"code",header(){return d.jsx(Y,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),PS({name:"group",header(){return d.jsx(Y,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],xM=({group:t,table:e,...n})=>{const r=Pn([["Tag"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:Kse}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create tag (menu)"}),textTitle:d.jsx(Y,{label:"Create tag (modal)"}),icon:qh,children:d.jsx(g3,{defaultValues:{group:t},mutation:Zt({async mutationFn(i){return Rn.promise(kt.transaction().execute(s=>s.insertInto("Tag").values({id:In(),...i}).returningAll().executeTakeFirstOrThrow()),ei("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit tag (modal)"}),icon:qh,children:d.jsx(g3,{defaultValues:{group:t,...i},mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Edit tag"))},async onSuccess(){await r()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>{await kt.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:d.jsx(Y,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},By=$t("/$locale/apps/derivean/root/tag/list")({validateSearch:pr(Fr(Nm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>or({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:D.object({id:D.string().min(1),code:D.string().min(1),label:D.string().min(1),group:D.string().nullish(),sort:D.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=By.useLoaderData(),{filter:n,cursor:r,selection:i}=By.useSearch(),s=By.useNavigate(),{tva:o}=fr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(xM,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of items"}),...qr(s)}})})}}),Qse=({group:t,...e})=>d.jsx(GD,{icon:qh,table:n=>d.jsx(xM,{group:t,...n}),render:({entities:n})=>d.jsx(YD,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>kt.transaction().execute(async i=>or({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:Nm.entity,query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("t.id","=",o.id)),o?.idIn&&(l=l.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("t.code","like",u),f("t.group","like",u),f("t.label","like",u),f("t.id","like",u)]))}return l},filter:n,cursor:r})),...e}),wM=vZ({shape:D.object({name:D.string().min(1),transport:Do(),tagIds:D.array(D.string()).optional()}),filter:Pi.merge(D.object({name:D.string().optional()}))}),y3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=yi,css:s})=>{const o=bi({resolver:vi(wM.shape),defaultValues:{transport:1,...n}}),l=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return d.jsxs("form",{className:l.base(),onSubmit:Ji({form:o,mutation:e}),children:[d.jsx(li,{variant:{highlight:!0},error:o.formState.errors.root}),d.jsx(un,{formState:o.formState,name:"name",label:d.jsx(Y,{label:"Resource name (label)"}),children:d.jsx("input",{type:"text",className:l.input(),...o.register("name")})}),d.jsx(un,{formState:o.formState,name:"transport",label:d.jsx(Y,{label:"Resource transport (label)"}),hint:d.jsx(Y,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:l.input(),min:.5,step:.5,...o.register("transport")})}),d.jsx(un,{formState:o.formState,name:"tagIds",label:d.jsx(Y,{label:"Resource tags (label)"}),children:d.jsx(Oi,{control:o.control,name:"tagIds",render:({field:{ref:u,...f}})=>d.jsx(Qse,{group:t,textTitle:d.jsx(Y,{label:"Select resource tags (title)"}),textSelect:d.jsx(Y,{label:"Select resource tags (label)"}),allowEmpty:!0,...f})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:vr,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},rd=Mr(),Gse=[rd({name:"name",header(){return d.jsx(Y,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),rd({name:"transport",header(){return d.jsx(Y,{label:"Resource transport (label)"})},render({value:t}){return dn({number:t})},size:12}),rd({name:"countProduction",header(){return d.jsx(Y,{label:"Resource production count (label)"})},render({value:t}){return d.jsx(As,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:dn({number:t})})},size:12}),rd({name:"countRequirement",header(){return d.jsx(Y,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return d.jsx(As,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:dn({number:e})})},size:12}),rd({name:"countProductionRequirement",header(){return d.jsx(Y,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return d.jsx(As,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:dn({number:e})})},size:18}),rd({name:"tags",header(){return d.jsx(Y,{label:"Resource tags (label)"})},render({value:t}){return d.jsx(YD,{tags:t})},size:32})],_M=({group:t,table:e,...n})=>{const r=Pn([["Resource"],["Resource_Tag"]]);return d.jsx(Dr,{table:Lr({...e,columns:Gse}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create resource (menu)"}),textTitle:d.jsx(Y,{label:"Create resource (modal)"}),icon:vr,children:({close:i})=>d.jsx(y3,{group:t,mutation:Zt({async mutationFn({name:s,transport:o,tagIds:l=[]}){return kt.transaction().execute(async u=>{const f=await u.insertInto("Resource").values({id:In(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return l.length&&await u.insertInto("Resource_Tag").values(l.map(p=>({id:In(),resourceId:f.id,tagId:p}))).execute(),f})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit resource (modal)"}),icon:vr,children:({close:s})=>d.jsx(y3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Zt({async mutationFn({tagIds:o,...l}){return Rn.promise(kt.transaction().execute(async u=>{const f=await u.updateTable("Resource").set(l).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",f.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:In(),resourceId:f.id,tagId:p}))).execute(),f}),ei("Update resource"))},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},zy=$t("/$locale/apps/derivean/root/resource/list")({validateSearch:pr(Fr(wM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>or({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>Cr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),transport:Do(),countRequirement:D.number().nonnegative(),countProduction:D.number().nonnegative(),countProductionRequirement:D.number().nonnegative(),tags:mi(Nm.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=zy.useLoaderData(),{filter:n,cursor:r,selection:i}=zy.useSearch(),s=zy.useNavigate(),{tva:o}=fr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(_M,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of items"}),...qr(s)}})})}}),Jse=({entity:t,...e})=>{const{locale:n}=rn({from:"/$locale"});return d.jsx(mu,{...e,children:d.jsx(er,{icon:vr,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"View detail (menu)"})})})},Zse=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(bf,{icon:vr,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(At,{icon:Hv,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(Y,{label:"Resource list (label)"})})}),...t})},SM=$t("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await da({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:D.object({id:D.string().min(1),name:D.string().min(1)})})}))}})},component:()=>{const{tva:t}=fr({from:"__root__"}),{entity:e}=SM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Zse,{entity:e}),d.jsx(Jse,{entity:e}),d.jsx(uo,{})]})}}),Wy=$t("/$locale/apps/derivean/root/region/list")({validateSearch:pr(Fr(KN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Region","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>or({select:i.selectFrom("Region as r").select(["r.id","r.name","r.color","r.minWidth","r.maxWidth","r.minHeight","r.maxHeight","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u)]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),color:D.string().min(1),minWidth:D.number().int().min(0),maxWidth:D.number().int().min(0),minHeight:D.number().int().min(0),maxHeight:D.number().int().min(0),probability:D.number().int().min(0),limit:D.number().int().min(0)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Wy.useLoaderData(),{filter:n,cursor:r,selection:i}=Wy.useSearch(),s=Wy.useNavigate(),{tva:o}=fr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(pM,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of items"}),...qr(s)}})})}}),Yse=xn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),EM=({dependencies:t,variant:e,tva:n=Yse,css:r,...i})=>{const s=n({...e,css:r}).slots;return d.jsx(tc,{items:t,render:({entity:o})=>d.jsx("div",{className:s.item(),children:d.jsx("div",{children:o.name})}),...i})};var uy={},b3;function Xse(){if(b3)return uy;b3=1;function t(r,i,s,o){var l=new Set;return function(u){if(!l.has(u)){var f=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var b=h[h.length-1],x=b.processed,_=b.node;if(x)h.pop(),p.pop(),f.delete(_),l.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(l.has(_)){h.pop();continue}else if(f.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}f.add(_),p.push(_);for(var E=r.get(_),k=E.length-1;k>=0;k--)h.push({node:E[k],processed:!1});b.processed=!0}}}}}var e=uy.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var l=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(f){l(f)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(f){return i.incomingEdges.get(f).length===0}).forEach(function(f){u(f)}),this.circular&&o.filter(function(f){return s.indexOf(f)===-1}).forEach(function(f){u(f)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=uy.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),uy}var IM=Xse();const km=async({tx:t})=>{const e=new IM.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},Kh=async({tx:t})=>{const e=km({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},NM=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:In(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:In(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:In(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:In(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},eoe=xn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),ux=({requirements:t,diff:e,variant:n,tva:r=eoe,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx(tc,{items:t,render:({entity:l})=>{const u=e?.find(p=>p.resourceId===l.resourceId),f=u?.amount?u.amount-l.amount:-l.amount;return d.jsxs("div",{className:o.item({css:!e||f>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:l.passive}),children:[d.jsx("div",{children:l.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",dn({number:l.amount})]}),e?f>=0?d.jsx(nn,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):d.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[d.jsx(nn,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",dn({number:f}),")"]}):null]})},...s})},Sp=Mr(),toe=[Sp({name:"name",header(){return d.jsx(Y,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(At,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),Sp({name:"dependencies",header(){return d.jsx(Y,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?d.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[d.jsx(EM,{textTitle:d.jsx(Y,{label:"Blueprint dependencies (title)"}),dependencies:t}),d.jsx("div",{className:"border-b border-slate-200"})]}):d.jsx(Y,{label:"No dependencies (label)"})},size:32}),Sp({name:"requirements",header(){return d.jsx(Y,{label:"Required resources (label)"})},render({value:t}){return d.jsx(ux,{textTitle:d.jsx(Y,{label:"Blueprint requirements (title)"}),textEmpty:d.jsx(Y,{label:"No requirements (label)"}),requirements:t})},size:32}),Sp({name:"cycles",header(){return d.jsx(Y,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(nn,{icon:Uh}),dn({number:t})]})},size:8}),Sp({name:"limit",header(){return d.jsx(Y,{label:"Building limit (label)"})},render({value:t}){return dn({number:t})},size:8})],kM=({dependencies:t,table:e,...n})=>{const r=Pn([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=Zt({async mutationFn(){return kt.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:l}of o)await NM({tx:s,blueprintId:l})})},async onSuccess(){await r()},onError(s){console.error(s)}});return d.jsx(Dr,{table:Lr({...e,columns:toe,context:{dependencies:t}}),action:{table(){return d.jsxs(sr,{children:[d.jsx(JI,{icon:Ba,onClick:()=>{Rn.promise(i.mutateAsync(),ei("Fill inventories"))},children:d.jsx(Y,{label:"Fill inventories (label)"})}),d.jsx(Cn,{label:d.jsx(Y,{label:"Create blueprint (menu)"}),textTitle:d.jsx(Y,{label:"Create blueprint (modal)"}),icon:Fn,children:({close:s})=>d.jsx(cv,{mutation:Zt({async mutationFn({regionIds:o,...l}){kt.transaction().execute(async u=>{const f=await u.insertInto("Blueprint").values({id:In(),...l}).returningAll().executeTakeFirstOrThrow();return o?.length&&await u.insertInto("Blueprint_Region").values(o.map(p=>({id:In(),blueprintId:f.id,regionId:p}))).execute(),await Kh({tx:u}),f})},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit blueprint (modal)"}),icon:Fn,children:({close:o})=>d.jsx(cv,{defaultValues:{...s,regionIds:s.regions.map(l=>l.id)},mutation:Zt({async mutationFn({regionIds:l,...u}){return Rn.promise(kt.transaction().execute(async f=>{const p=await f.updateTable("Blueprint").set(u).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await f.deleteFrom("Blueprint_Region").where("blueprintId","=",p.id).execute(),l?.length&&await f.insertInto("Blueprint_Region").values(l.map(h=>({id:In(),blueprintId:p.id,regionId:h}))).execute(),await Kh({tx:f}),p}),ei("Update blueprint"))},async onSuccess(){await r(),o()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:d.jsx(Y,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},oc=lZ({shape:D.object({dependencyId:D.string().min(1)}),filter:Pi.merge(D.object({blueprintId:D.string().optional(),dependencyId:D.string().optional()}))}),wf=hZ({shape:D.object({resourceId:D.string().min(1),amount:Do(),passive:D.boolean()}),filter:Pi.merge(D.object({blueprintId:D.string().optional(),resourceId:D.string().optional()}))}),Vy=$t("/$locale/apps/derivean/root/blueprint/list")({validateSearch:pr(Fr(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(l=>Gc.jsonGroupArray({id:l.ref("r.id"),name:l.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("br.id")},
                                                'amount', ${l.ref("br.amount")},
                                                'passive', ${l.ref("br.passive")},
                                                'resourceId', ${l.ref("br.resourceId")},
                                                'blueprintId', ${l.ref("br.blueprintId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(l=>Cr`json_group_array(json_object(
                                                        'id', ${l.ref("bd.id")},
                                                        'dependencyId', ${l.ref("bd.dependencyId")},
                                                        'blueprintId', ${l.ref("bd.blueprintId")},
                                                        'name', ${l.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bl.id","=",l.id)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",f),p("bl.name","like",f)]))}return u},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative(),sort:D.number().nonnegative(),limit:D.number().nonnegative(),regions:mi(D.object({id:D.string().min(1),name:D.string().min(1)})),requirements:mi(wf.entity.merge(D.object({name:D.string().min(1)}))),dependencies:mi(oc.entity.merge(D.object({name:D.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>km({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=Vy.useLoaderData(),{filter:r,cursor:i,selection:s}=Vy.useSearch(),o=Vy.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(kM,{dependencies:n,table:{data:t,filter:{value:r,set:Ar(o)},selection:{type:"multi",value:s,set:ys(o)}},fulltext:{value:r?.fulltext,set:Pr(o)},cursor:{count:e,cursor:i,textTotal:d.jsx(Y,{label:"Number of blueprints"}),...qr(o)}})})}}),noe=({entity:t,...e})=>{const{locale:n}=rn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(er,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"View detail (menu)"})}),d.jsx(er,{icon:lo,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Blueprint dependencies (menu)"})}),d.jsx(er,{icon:vr,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Required resources (menu)"})}),d.jsx(er,{icon:Ds,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Resource production (menu)"})}),d.jsx(er,{icon:Ba,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Blueprint inventory (menu)"})}),d.jsx(er,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Blueprint conflicts (menu)"})}),d.jsx(er,{icon:jD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Edit (menu)"})})]})},roe=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(bf,{icon:Fn,title:n.name}),actions:({entity:n})=>d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:Hv,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:d.jsx(Y,{label:"Blueprint list (label)"})}),d.jsx(At,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:d.jsx(Y,{label:"Editor (label)"})})]}),...t})},CM=$t("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>da({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(o=>Gc.jsonGroupArray({id:o.ref("r.id"),name:o.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>Gc.jsonGroupArray({id:o.ref("br.id"),amount:o.ref("br.amount"),passive:o.ref("br.passive"),resourceId:o.ref("br.resourceId"),blueprintId:o.ref("br.blueprintId"),name:o.ref("r.name")}).as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>Gc.jsonGroupArray({id:o.ref("bd.id"),dependencyId:o.ref("bd.dependencyId"),blueprintId:o.ref("bd.blueprintId"),name:o.ref("bl2.name")}).as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative(),sort:D.number().nonnegative(),regions:mi(D.object({id:D.string().min(1),name:D.string().min(1)})),requirements:mi(wf.entity.merge(D.object({name:D.string().min(1)}))),dependencies:mi(oc.entity.merge(D.object({name:D.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>km({tx:i}))}},component(){const{tva:t}=fr({from:"__root__"}),{entity:e}=CM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(roe,{entity:e}),d.jsx(noe,{entity:e}),d.jsx(uo,{})]})}}),ioe=$t("/$locale/apps/derivean/map/$mapId/view")({}),v3=Mr(),soe=[v3({name:"name",header(){return d.jsx(Y,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(At,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),v3({name:"cycles",header(){return d.jsx(Y,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(nn,{icon:Uh}),dn({number:t})]})},size:8})],ooe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:soe}),...e}),Uy=$t("/$locale/apps/derivean/game/blueprint/list")({validateSearch:pr(Fr(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async l=>or({select:l.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",l.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:f}){let p=u;if(f?.id&&(p=p.where("bl.id","=",f.id)),f?.fulltext){const h=`%${f.fulltext}%`.toLowerCase();p=p.where(b=>b.or([b("bl.id","like",h),b("bl.name","like",h)]))}return p},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=Uy.useLoaderData(),{filter:n,cursor:r}=Uy.useSearch(),i=Uy.useNavigate(),{tva:s}=fr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(ooe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of blueprints"}),...qr(i)}})})}}),aoe=({entity:t,...e})=>{const{locale:n}=rn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(er,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"View detail (menu)"})}),d.jsx(er,{icon:lo,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Blueprint dependencies (menu)"})}),d.jsx(er,{icon:vr,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Required resources (menu)"})}),d.jsx(er,{icon:Ds,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Resource production (menu)"})}),d.jsx(er,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Blueprint conflicts (menu)"})})]})},loe=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(bf,{icon:Fn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(At,{icon:Hv,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:d.jsx(Y,{label:"Blueprint list (label)"})})}),...t})},TM=$t("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>da({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>km({tx:i}))}},component(){const{tva:t}=fr({from:"__root__"}),{entity:e}=TM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(loe,{entity:e}),d.jsx(aoe,{entity:e}),d.jsx(uo,{})]})}}),coe=$t("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),uoe=$t("/$locale/apps/derivean/root/resource/$id/view")({component(){return d.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}}),doe=$t("/$locale/apps/derivean/root/region/$id/view")({component(){return"view"}}),ZN="icon-[carbon--document-requirements]",foe=({entity:t,...e})=>{const{locale:n}=rn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(er,{icon:ZN,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Production requirements (menu)"})}),d.jsx(er,{icon:vr,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Production resource requirements (menu)"})}),d.jsx(er,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Production resource dependencies (menu)"})})]})},poe=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(bf,{icon:Ds,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(Y,{label:"Building base detail (label)"})})}),...t})},jM=$t("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await da({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:D.object({id:D.string().min(1),resource:D.string().min(1),blueprint:D.string().min(1),blueprintId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().int().nonnegative()})})}))}})},component(){const{entity:t}=jM.useLoaderData(),{tva:e}=fr({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(poe,{entity:t}),d.jsx(foe,{entity:t}),d.jsx(uo,{})]})}}),hoe=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return d.jsxs("div",{className:gn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?d.jsx(nn,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):d.jsx(nn,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>d.jsx(As,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},In())):d.jsx(Y,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof IM.DepGraphCycleError?d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center"]),children:[d.jsx(nn,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>d.jsx(As,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},In()))]}):"kaboom"}},moe=({dependencies:t,...e})=>d.jsx(ED,{items:[{id:"name",label:d.jsx(Y,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:d.jsx(Y,{label:"Construction cycles (label)"}),render({entity:n}){return dn({number:n.cycles})}},{id:"regions",label:d.jsx(Y,{label:"Regions (label)"}),render({entity:n}){return d.jsx(tc,{items:n.regions,css:{base:["flex","flex-row","gap-2"]},textEmpty:d.jsx(Y,{label:"No regions (label)"}),render:({entity:r})=>d.jsx("div",{className:gn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:r.name})})}},{id:"requirements",label:d.jsx(Y,{label:"Required resources (label)"}),render({entity:n}){return d.jsx(ux,{requirements:n.requirements,textEmpty:d.jsx(Y,{label:"No requirements (label)"})})}},{id:"dependencies",label:d.jsx(Y,{label:"Blueprint dependencies (label)"}),render({entity:n}){return d.jsx(EM,{dependencies:n.dependencies,textEmpty:d.jsx(Y,{label:"No dependencies (label)"})})}},{id:"deps",label:d.jsx(Y,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return d.jsx(hoe,{graph:t,blueprintId:n.id})}}],...e}),RM=$t("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>km({tx:e}))}},component(){const{dependencies:t}=RM.useLoaderData(),{entity:e}=ji({from:"/$locale/apps/derivean/root/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(moe,{dependencies:t,entity:e})})}}),Cm=({group:t,...e})=>d.jsx(JD,{icon:vr,textTitle:d.jsx(Y,{label:"Select resource (title)"}),textSelect:d.jsx(Y,{label:"Select resource (label)"}),table:n=>d.jsx(_M,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>kt.transaction().execute(async i=>or({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>Cr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:D.object({id:D.string().min(1),name:D.string().min(1),transport:Do(),tags:mi(Nm.entity),countRequirement:D.number().nonnegative(),countProduction:D.number().nonnegative(),countProductionRequirement:D.number().nonnegative()}),filter:n,cursor:r})),...e}),x3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(wf.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"resourceId",label:d.jsx(Y,{label:"Requirement (label)"}),children:d.jsx(Oi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{allowEmpty:!0,...u})})}),d.jsx(un,{formState:s.formState,name:"amount",label:d.jsx(Y,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(un,{formState:s.formState,name:"passive",label:d.jsx(Y,{label:"Passive requirement (label)"}),hint:d.jsx(Y,{label:"Passive requirement (hint)"}),children:d.jsx(Oi,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(SD,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:vr,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},FS=Mr(),goe=[FS({name:"name",header(){return d.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),FS({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:10}),FS({name:"passive",header(){return d.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],yoe=({blueprintId:t,table:e,...n})=>{const r=Pn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:goe}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create requirement item (menu)"}),textTitle:d.jsx(Y,{label:"Create requirement item (modal)"}),icon:vr,children:d.jsx(x3,{mutation:Zt({async mutationFn(i){return kt.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:In(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit requirement item (modal)"}),icon:vr,children:d.jsx(x3,{defaultValues:i,mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Pp=$t("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:pr(Fr(wf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Pp.useLoaderData(),{filter:n,cursor:r,selection:i}=Pp.useSearch(),{id:s}=Pp.useParams(),o=Pp.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(yoe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of requirements (label)"}),...qr(o)}})})}}),YN=uZ({shape:D.object({resourceId:D.string().min(1),amount:Do(),cycles:No()}),filter:Pi.merge(D.object({blueprintId:D.string().optional(),resourceId:D.string().optional()}))}),w3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(YN.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"resourceId",label:d.jsx(Y,{label:"Resource name (label)"}),children:d.jsx(Oi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{textTitle:d.jsx(Y,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(un,{formState:s.formState,name:"amount",label:d.jsx(Y,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(un,{formState:s.formState,name:"cycles",label:d.jsx(Y,{label:"Production cycles (label)"}),hint:d.jsx(Y,{label:"Production cycles (hint)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Ds,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},Tm=t=>d.jsx(JD,{icon:Fn,textTitle:d.jsx(Y,{label:"Select blueprint (title)"}),table:({table:e,...n})=>d.jsx(kM,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>kt.transaction().execute(async r=>or({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(s=>Gc.jsonGroupArray({id:s.ref("r.id"),name:s.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","b.id").as("regions"),i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>Cr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>Cr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",l),u("b.name","like",l)]))}return o},output:D.object({id:D.string().min(1),name:D.string().min(1),cycles:D.number().nonnegative(),sort:D.number().nonnegative(),limit:D.number().nonnegative(),regions:mi(D.object({id:D.string().min(1),name:D.string().min(1)})),requirements:mi(wf.entity.merge(D.object({name:D.string().min(1)}))),dependencies:mi(oc.entity.merge(D.object({name:D.string().min(1)})))}),filter:e,cursor:n})),...t}),boe=D.object({blueprintId:D.string().min(1)}),voe=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(boe),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"blueprintId",label:d.jsx(Y,{label:"Target blueprint (label)"}),children:d.jsx(Oi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Tm,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Fn,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},id=Mr(),xoe=[id({name:"name",header(){return d.jsx(Y,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Ds,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),id({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:8}),id({name:"cycles",header(){return d.jsx(Y,{label:"Production cycles (label)"})},render({value:t}){return dn({number:t})},size:8}),id({name:"requirements",header(){return d.jsx(Y,{label:"Required resources (label)"})},render({value:t}){return d.jsx(ux,{textTitle:d.jsx(Y,{label:"Resource requirements (title)"}),textEmpty:d.jsx(Y,{label:"No requirements (label)"}),requirements:t})},size:32}),id({name:"resources",header(){return d.jsx(Y,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(tc,{items:t,render:({entity:e})=>d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",dn({number:e.amount})]})]})})},size:32}),id({name:"dependencies",header(){return d.jsx(Y,{label:"Required production dependencies (label)"})},render({value:t}){return d.jsx(tc,{items:t,render:({entity:e})=>d.jsx("div",{className:gn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:d.jsx("div",{children:e.name})})})},size:32})],woe=({blueprintId:t,table:e,...n})=>{const r=Pn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:xoe}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create blueprint production (menu)"}),textTitle:d.jsx(Y,{label:"Create blueprint production (modal)"}),icon:Ds,children:({close:i})=>d.jsx(w3,{mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:In(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit blueprint production (modal)"}),icon:Ds,children:d.jsx(w3,{defaultValues:i,mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(Cn,{label:d.jsx(Y,{label:"Move production to (menu)"}),textTitle:d.jsx(Y,{label:"Move production to (modal)"}),icon:vr,children:({close:s})=>d.jsx(voe,{mutation:Zt({async mutationFn(o){return kt.transaction().execute(async l=>{await l.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},jm=dZ({shape:D.object({blueprintId:D.string().min(1)}),filter:Pi}),Rm=fZ({shape:D.object({resourceId:D.string().min(1),amount:Do(),passive:D.boolean()}),filter:Pi.merge(D.object({blueprintProductionId:D.string().optional(),resourceId:D.string().optional()}))}),Om=pZ({shape:D.object({resourceId:D.string().min(1),amount:Do()}),filter:Pi.merge(D.object({resourceId:D.string().optional()}))}),Fp=$t("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:pr(Fr(YN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().nonnegative(),requirements:mi(Rm.entity.merge(D.object({name:D.string().min(1)}))),resources:mi(Om.entity.merge(D.object({name:D.string().min(1)}))),dependencies:mi(jm.entity.merge(D.object({name:D.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Fp.useLoaderData(),{filter:n,cursor:r,selection:i}=Fp.useSearch(),{id:s}=Fp.useParams(),o=Fp.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(woe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of productions (label)"}),...qr(o)}})})}}),_oe=({label:t,...e})=>d.jsx(Y,{label:`Inventory type - ${t}`,...e}),Soe=gZ({shape:D.object({resourceId:D.string().min(1),amount:Do(),limit:Do(),type:D.enum(["storage","construction"])}),filter:Pi.merge(D.object({resourceId:D.string().optional(),type:D.enum(["storage","construction"]).optional()}))}),_3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Soe.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"resourceId",label:d.jsx(Y,{label:"Resource name (label)"}),children:d.jsx(Oi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{textTitle:d.jsx(Y,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(un,{formState:s.formState,name:"type",label:d.jsx(Y,{label:"Inventory type (label)"}),children:d.jsx(Oi,{control:s.control,name:"type",render:({field:{ref:l,...u}})=>d.jsx(hN,{items:[{id:"storage",value:ia.text("Inventory type - storage")},{id:"construction",value:ia.text("Inventory type - construction")}],render:({entity:f})=>f.value,...u})})}),d.jsx(un,{formState:s.formState,name:"amount",label:d.jsx(Y,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(un,{formState:s.formState,name:"limit",label:d.jsx(Y,{label:"Inventory limit (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Ba,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},dy=Mr(),Eoe=[dy({name:"name",header(){return d.jsx(Y,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),dy({name:"type",header(){return d.jsx(Y,{label:"Inventory type (label)"})},render({value:t}){return d.jsx(_oe,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),dy({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:12}),dy({name:"limit",header(){return d.jsx(Y,{label:"Inventory limit (label)"})},render({value:t,data:e}){return d.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[d.jsx("div",{children:dn({number:t})}),d.jsx(yf,{value:100*e.amount/e.limit})]})},size:14})],Ioe=({blueprintId:t,table:e,...n})=>{const r=Pn([["Blueprint_Inventory"]]),i=Zt({async mutationFn(){return kt.transaction().execute(async s=>NM({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return d.jsx(Dr,{table:Lr({...e,columns:Eoe}),action:{table(){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Create inventory item (menu)"}),textTitle:d.jsx(Y,{label:"Create inventory item (modal)"}),icon:Ba,children:d.jsx(_3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:In(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:In(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),ei("Create inventory item"))},async onSuccess(){await r()}})})}),d.jsx(JI,{icon:Ba,onClick:()=>{i.mutate()},children:d.jsx(Y,{label:"Fill inventory (label)"})})]})},row({data:s}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit inventory item (modal)"}),icon:Ba,children:d.jsx(_3,{defaultValues:s,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),ei("Update inventory item"))},async onSuccess(){await r()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:d.jsx(Y,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},Noe=cZ({shape:D.object({blueprintId:D.string().min(1),inventoryId:D.string().min(1)}),filter:Pi.merge(D.object({blueprintId:D.string().optional(),inventoryId:D.string().optional()}))}),Dp=$t("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:pr(Fr(Noe)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>or({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bi.id","=",l.id)),l?.idIn&&(u=u.where("bi.id","in",l.idIn)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${f}%`),p("r.id","like",`%${f}%`),p("r.name","like",`%${f}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",f),h("t.label","like",f),h("t.group","like",f)])))]))}return u},output:D.object({id:D.string().min(1),name:D.string().min(1),type:D.enum(["storage","construction"]),resourceId:D.string().min(1),blueprintId:D.string().min(1),inventoryId:D.string().min(1),amount:D.number().nonnegative(),limit:D.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Dp.useLoaderData(),{filter:n,cursor:r,selection:i}=Dp.useSearch(),{id:s}=Dp.useParams(),o=Dp.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Ioe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of items"}),...qr(o)}})})}}),OM=$t("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=ji({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=OM.useNavigate(),n=Pn([["Blueprint"]]);return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(cv,{defaultValues:t,mutation:Zt({async mutationFn(r){return Rn.promise(kt.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),S3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(oc.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"dependencyId",label:d.jsx(Y,{label:"Blueprint dependency (label)"}),children:d.jsx(Oi,{control:s.control,name:"dependencyId",render:({field:{ref:l,...u}})=>d.jsx(Tm,{textTitle:d.jsx(Y,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Fn,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},koe=Mr(),Coe=[koe({name:"name",header(){return d.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Toe=({blueprintId:t,table:e,...n})=>{const r=Pn([["Blueprint_Dependency"],["Blueprint"]]);return d.jsx(Dr,{table:Lr({...e,columns:Coe}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create blueprint dependency (menu)"}),textTitle:d.jsx(Y,{label:"Create blueprint dependency (modal)"}),icon:Fn,children:({close:i})=>d.jsx(S3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Dependency").values({id:In(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Kh({tx:o}),l}),ei("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit blueprint dependency (modal)"}),icon:Fn,children:({close:s})=>d.jsx(S3,{defaultValues:i,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},Lp=$t("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:pr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),dependencyId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Lp.useLoaderData(),{filter:n,cursor:r,selection:i}=Lp.useSearch(),{id:s}=Lp.useParams(),o=Lp.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Toe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of requirements (label)"}),...qr(o)}})})}}),joe=aZ({shape:D.object({conflictId:D.string().min(1)}),filter:Pi}),E3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(joe.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"conflictId",label:d.jsx(Y,{label:"Blueprint conflict (label)"}),hint:d.jsx(Y,{label:"Blueprint conflict (hint)"}),children:d.jsx(Oi,{control:s.control,name:"conflictId",render:({field:{ref:l,...u}})=>d.jsx(Tm,{textTitle:d.jsx(Y,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Fn,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},Roe=Mr(),Ooe=[Roe({name:"name",header(){return d.jsx(Y,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],qoe=({blueprintId:t,table:e,...n})=>{const r=Pn([["Blueprint_Conflict"],["Blueprint"]]);return d.jsx(Dr,{table:Lr({...e,columns:Ooe}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create blueprint conflict (menu)"}),textTitle:d.jsx(Y,{label:"Create blueprint conflict (modal)"}),icon:Fn,children:({close:i})=>d.jsx(E3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Conflict").values({id:In(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Kh({tx:o}),l}),ei("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit blueprint conflict (modal)"}),icon:Fn,children:({close:s})=>d.jsx(E3,{defaultValues:i,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},Mp=$t("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:pr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),conflictId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Mp.useLoaderData(),{filter:n,cursor:r,selection:i}=Mp.useSearch(),{id:s}=Mp.useParams(),o=Mp.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(qoe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of conflicts (label)"}),...qr(o)}})})}}),Aoe=({land:t})=>{const{mapId:e,locale:n}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx("div",{className:gn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:n,mapId:e},search:{zoomToId:t.id},children:t.name}),d.jsxs("div",{className:"flex flex-col items-end text-xs",children:[d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{className:"font-bold",children:dn({number:t.x})}),d.jsx("div",{children:":"}),d.jsx("div",{className:"font-bold",children:dn({number:t.y})})]}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{className:"font-bold",children:dn({number:t.width})}),d.jsx("div",{children:"x"}),d.jsx("div",{className:"font-bold",children:dn({number:t.height})})]})]})]})})},Poe=xn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),fo=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=Poe,css:s,children:o})=>{const{mapId:l,locale:u}=rn({from:"/$locale/apps/derivean/map/$mapId"}),f=i({...r,css:s}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:f.title(),children:[d.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(nn,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?d.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:u,mapId:l},children:d.jsx(yn,{iconEnabled:fN,variant:{variant:"subtle"}})})]}),d.jsx("div",{className:f.content(),children:o})]})},Foe=({land:t,...e})=>d.jsx(fo,{icon:GN,textTitle:d.jsx(Y,{label:"Land list (label)"}),...e,children:t.map(n=>d.jsx(Aoe,{land:n},n.id))}),qM=$t("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land","list"],async queryFn(){return e.transaction().execute(async r=>Or({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.x","l.y","l.width","l.height"]).where("l.mapId","=",n).orderBy("r.name").orderBy("l.width","desc").orderBy("l.height","desc"),output:D.object({id:D.string().min(1),name:D.string().min(1),mapId:D.string().min(1),x:D.number(),y:D.number(),width:D.number(),height:D.number()})}))}})}},component(){const{land:t}=qM.useLoaderData();return d.jsx(Foe,{land:t})}}),Doe=$t("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,landId:r}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>da({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:D.object({id:D.string().min(1),name:D.string().min(1),mapId:D.string().min(1)})}))}})}}}),Loe=({building:t})=>{const{mapId:e,locale:n}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx("div",{className:gn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(At,{icon:lo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),d.jsx(At,{icon:GN,to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:n,mapId:e},search:{zoomToId:t.landId},children:t.land})]})})},Moe=({building:t,...e})=>d.jsx(fo,{icon:lo,textTitle:d.jsx(Y,{label:"Building list (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(Loe,{building:n},n.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(Y,{label:"No buildings yet. (label)"})})}),AM=$t("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building","list"],async queryFn(){return e.transaction().execute(async r=>Or({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",n).orderBy("bl.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),landId:D.string().min(1),land:D.string().min(1)})}))}})}},component(){const{building:t}=AM.useLoaderData();return d.jsx(Moe,{building:t})}}),$oe=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>da({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","r.name as land","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:D.object({id:D.string().min(1),name:D.string().min(1),land:D.string().min(1),productionId:D.string().nullish(),recurringProductionId:D.string().nullish()})}))}}),related:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"related"],async queryFn(){return e.transaction().execute(async i=>Or({select:i.withRecursive("ConnectedWaypoints",s=>s.selectFrom("Building_Waypoint as bw").where("bw.buildingId","=",r).select(["bw.waypointId"]).unionAll(s.selectFrom("Route as r").innerJoin("ConnectedWaypoints as cw","cw.waypointId","r.fromId").select(["r.toId as waypointId"]))).selectFrom("ConnectedWaypoints as cw").innerJoin("Building_Waypoint as bw","bw.waypointId","cw.waypointId").innerJoin("Building as b","b.id","bw.buildingId").innerJoin("Land as l","l.id","b.landId").where("b.id","!=",r).where("l.mapId","=",n).select(["b.id as buildingId"]).distinct(),output:D.object({buildingId:D.string().min(1)})}))}})}}}),Boe=$t("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"fetch"],async queryFn(){return e.transaction().execute(async r=>da({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:D.object({id:D.string().min(1),name:D.string().min(1)})}))}})}}}),zoe=({entity:t,...e})=>{const{locale:n}=rn({from:"/$locale"});return d.jsxs(mu,{...e,children:[d.jsx(er,{icon:ZN,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Production requirements (menu)"})}),d.jsx(er,{icon:vr,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Production resource requirements (menu)"})}),d.jsx(er,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(Y,{label:"Production resource dependencies (menu)"})})]})},Woe=t=>{const{locale:e}=rn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(bf,{icon:Ds,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(Y,{label:"Building base detail (label)"})})}),...t})},PM=$t("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await da({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:D.object({id:D.string().min(1),resource:D.string().min(1),blueprint:D.string().min(1),blueprintId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().int().nonnegative()})})}))}})},component(){const{entity:t}=PM.useLoaderData(),{tva:e}=fr({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Woe,{entity:t}),d.jsx(zoe,{entity:t}),d.jsx(uo,{})]})}}),Voe=t=>d.jsx(ED,{items:[{id:"name",label:d.jsx(Y,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:d.jsx(Y,{label:"Construction cycles (label)"}),render({entity:e}){return dn({number:e.cycles})}}],...t}),Uoe=$t("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=ji({from:"/$locale/apps/derivean/game/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(Voe,{entity:t})})}}),DS=Mr(),Hoe=[DS({name:"name",header(){return d.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),DS({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:10}),DS({name:"passive",header(){return d.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],Koe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Hoe}),...e}),Hy=$t("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:pr(Fr(wf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Hy.useLoaderData(),{filter:n,cursor:r}=Hy.useSearch(),i=Hy.useNavigate(),{tva:s}=fr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Koe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of requirements (label)"}),...qr(i)}})})}}),sd=Mr(),Qoe=[sd({name:"name",header(){return d.jsx(Y,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Ds,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),sd({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:8}),sd({name:"cycles",header(){return d.jsx(Y,{label:"Production cycles (label)"})},render({value:t}){return dn({number:t})},size:8}),sd({name:"requirements",header(){return d.jsx(Y,{label:"Required resources (label)"})},render({value:t}){return d.jsx(ux,{textTitle:d.jsx(Y,{label:"Resource requirements (title)"}),textEmpty:d.jsx(Y,{label:"No requirements (label)"}),requirements:t})},size:32}),sd({name:"resources",header(){return d.jsx(Y,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(tc,{items:t,render:({entity:e})=>d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",dn({number:e.amount})]})]})})},size:32}),sd({name:"dependencies",header(){return d.jsx(Y,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=rn({from:"/$locale"});return d.jsx(tc,{items:t,render:({entity:n})=>d.jsx("div",{className:gn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:d.jsx(At,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],Goe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Qoe}),...e}),Ky=$t("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:pr(Fr(YN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>Cr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().nonnegative(),requirements:mi(Rm.entity.merge(D.object({name:D.string().min(1)}))),resources:mi(Om.entity.merge(D.object({name:D.string().min(1)}))),dependencies:mi(jm.entity.merge(D.object({name:D.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ky.useLoaderData(),{filter:n,cursor:r}=Ky.useSearch(),i=Ky.useNavigate(),{tva:s}=fr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Goe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of productions (label)"}),...qr(i)}})})}}),Joe=Mr(),Zoe=[Joe({name:"name",header(){return d.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Yoe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Zoe}),...e}),Qy=$t("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:pr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),dependencyId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Qy.useLoaderData(),{filter:n,cursor:r}=Qy.useSearch(),i=Qy.useNavigate(),{tva:s}=fr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Yoe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of dependencies (label)"}),...qr(i)}})})}}),Xoe=Mr(),eae=[Xoe({name:"name",header(){return d.jsx(Y,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],tae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:eae}),...e}),Gy=$t("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:pr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1),conflictId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Gy.useLoaderData(),{filter:n,cursor:r}=Gy.useSearch(),i=Gy.useNavigate(),{tva:s}=fr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(tae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of conflicts (label)"}),...qr(i)}})})}}),FM=mZ({shape:D.object({blueprintId:D.string().min(1),constructionId:D.string().optional(),productionId:D.string().optional(),recurringProductionId:D.string().optional(),x:Do(),y:Do()}),filter:Pi.merge(D.object({userId:D.string().optional(),blueprintId:D.string().optional(),name:D.string().optional()}))}),nae=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(FM.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"blueprintId",label:d.jsx(Y,{label:"Select blueprint (label)"}),children:d.jsx(Oi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Tm,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:lo,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},rae=Mr(),iae=[rae({name:"name",header(){return d.jsx(Y,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],sae=({table:t,...e})=>{const n=Pn([["Building"]]);return d.jsx(Dr,{table:Lr({...t,columns:iae}),action:{row({data:r}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit building (modal)"}),icon:lo,children:d.jsx(nae,{defaultValues:r,mutation:Zt({async mutationFn(i){return Rn.promise(kt.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),ei("Edit building"))},async onSuccess(){await n()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:d.jsx(Y,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:n})})]})}},...e})},Jy=$t("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:pr(Fr(FM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>or({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Jy.useLoaderData(),{filter:n,cursor:r,selection:i}=Jy.useSearch(),s=Jy.useNavigate(),{tva:o}=fr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(sae,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:ys(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of buildings (label)"}),...qr(s)}})})}}),I3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Om.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"resourceId",label:d.jsx(Y,{label:"Requirement (label)"}),children:d.jsx(Oi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{allowEmpty:!0,...u})})}),d.jsx(un,{formState:s.formState,name:"amount",label:d.jsx(Y,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:vr,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},N3=Mr(),oae=[N3({name:"name",header(){return d.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),N3({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:10})],aae=({blueprintProductionId:t,table:e,...n})=>{const r=Pn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:oae}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create production resource requirement (menu)"}),textTitle:d.jsx(Y,{label:"Create production resource requirement (modal)"}),icon:vr,children:({close:i})=>d.jsx(I3,{mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:In(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit production resource requirement (modal)"}),icon:vr,children:({close:s})=>d.jsx(I3,{defaultValues:i,mutation:Zt({async mutationFn(o){return kt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},$p=$t("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:pr(Fr(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=$p.useLoaderData(),{filter:n,cursor:r,selection:i}=$p.useSearch(),{id:s}=$p.useParams(),o=$p.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(aae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of production resource requirements (label)"}),...qr(o)}})})}}),k3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(Rm.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"resourceId",label:d.jsx(Y,{label:"Requirement (label)"}),children:d.jsx(Oi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{allowEmpty:!0,...u})})}),d.jsx(un,{formState:s.formState,name:"amount",label:d.jsx(Y,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(un,{formState:s.formState,name:"passive",label:d.jsx(Y,{label:"Passive requirement (label)"}),hint:d.jsx(Y,{label:"Passive requirement (hint)"}),children:d.jsx(Oi,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(SD,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:vr,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},LS=Mr(),lae=[LS({name:"name",header(){return d.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),LS({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:10}),LS({name:"passive",header(){return d.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],cae=({blueprintProductionId:t,table:e,...n})=>{const r=Pn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:lae}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create production requirement (menu)"}),textTitle:d.jsx(Y,{label:"Create production requirement (modal)"}),icon:vr,children:({close:i})=>d.jsx(k3,{mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:In(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit production requirement (modal)"}),icon:vr,children:({close:s})=>d.jsx(k3,{defaultValues:i,mutation:Zt({async mutationFn(o){return kt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},Bp=$t("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:pr(Fr(Rm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bp.useLoaderData(),{filter:n,cursor:r,selection:i}=Bp.useSearch(),{id:s}=Bp.useParams(),o=Bp.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(cae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of production requirements (label)"}),...qr(o)}})})}}),C3=({mutation:t,defaultValues:e,variant:n,tva:r=yi,css:i})=>{const s=bi({resolver:vi(jm.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(li,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(un,{formState:s.formState,name:"blueprintId",label:d.jsx(Y,{label:"Blueprint dependency (label)"}),children:d.jsx(Oi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Tm,{textTitle:d.jsx(Y,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(yn,{iconEnabled:Fn,type:"submit",children:d.jsx(Y,{label:"Save (submit)"})})})]})},uae=Mr(),dae=[uae({name:"name",header(){return d.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],fae=({blueprintProductionId:t,table:e,...n})=>{const r=Pn([["Blueprint_Production_Dependency"],["Blueprint"]]);return d.jsx(Dr,{table:Lr({...e,columns:dae}),action:{table(){return d.jsx(sr,{children:d.jsx(Cn,{label:d.jsx(Y,{label:"Create blueprint production dependency (menu)"}),textTitle:d.jsx(Y,{label:"Create blueprint production dependency (modal)"}),icon:Fn,children:({close:i})=>d.jsx(C3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Production_Dependency").values({id:In(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await Kh({tx:o}),l}),ei("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(sr,{children:[d.jsx(Cn,{label:d.jsx(Y,{label:"Edit (menu)"}),textTitle:d.jsx(Y,{label:"Edit blueprint production dependency (modal)"}),icon:Fn,children:({close:s})=>d.jsx(C3,{defaultValues:i,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(Cn,{icon:ii,label:d.jsx(Y,{label:"Delete (menu)"}),textTitle:d.jsx(Y,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(bs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(Y,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},zp=$t("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:pr(Fr(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zp.useLoaderData(),{filter:n,cursor:r,selection:i}=zp.useSearch(),{id:s}=zp.useParams(),o=zp.useNavigate(),{tva:l}=fr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(fae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:ys(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of dependencies (label)"}),...qr(o)}})})}}),pae=xn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),hae=async({userId:t,blueprintId:e,landId:n,x:r,y:i,plan:s,valid:o})=>kt.transaction().execute(async l=>{const u=await l.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),f=await l.insertInto("Building").values({id:In(),userId:t,blueprintId:e,landId:n,constructionId:(await l.insertInto("Construction").values({id:In(),userId:t,cycle:0,cycles:u.cycles,plan:s}).returning("id").executeTakeFirstOrThrow()).id,x:r,y:i,valid:o}).returningAll().executeTakeFirstOrThrow(),p=await l.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",l.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:h,limit:b,resourceId:x,type:_}of p)await l.insertInto("Building_Inventory").values({id:In(),buildingId:f.id,inventoryId:(await l.insertInto("Inventory").values({id:In(),amount:h,limit:b,resourceId:x,type:_}).returning("id").executeTakeFirstOrThrow()).id}).execute();return f}),XN=({cycles:t})=>d.jsxs("div",{className:gn(["flex","flex-row","items-center","gap-2"]),children:[d.jsx(nn,{css:{base:["text-slate-400"]},icon:Uh}),d.jsx("div",{className:"font-bold text-md",children:dn({number:t})})]}),mae=({blueprint:t,land:e,userId:n,variant:r,tva:i=pae,css:s})=>{const{mapId:o,locale:l}=rn({from:"/$locale/apps/derivean/map/$mapId"}),u=nc(),f=Pn([["GameMap"]]),p=Zt({async mutationFn({blueprintId:b,landId:x}){const _=await hae({userId:n,blueprintId:b,landId:x,x:0,y:0,plan:!0,valid:!1});u({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:l,mapId:o,landId:e.id},search:{zoomToId:_.id}})},async onSuccess(){await f()},onError(b){console.error(b)}}),h=i({...r,css:s}).slots;return d.jsx("div",{className:h.base(),children:d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsxs(As,{children:["x",t.count]}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:{locale:l,mapId:o,blueprintId:t.id},css:{base:["font-bold"]},children:t.name})]}),d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(XN,{cycles:t.cycles}),d.jsx(yn,{iconEnabled:Hh,iconDisabled:Hh,loading:p.isPending,onClick:()=>{p.mutate({blueprintId:t.id,landId:e.id})}})]})]})})},gae=({userId:t,land:e,blueprints:n,...r})=>d.jsx(fo,{icon:Hh,textTitle:d.jsx(Y,{label:"Construction (label)"}),textSubTitle:e.name,...r,children:n.length>0?n.map(i=>d.jsx(mae,{blueprint:i,userId:t,land:e},i.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(Y,{label:"There are no available blueprints (label)"})})}),DM=$t("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,landId:i}}){const s=await n();return{user:s,blueprints:await t.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>Or({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",l=>l.selectFrom("Building as bg").select(u=>u.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),l=>l.case().when(l.not(l.exists(l.selectFrom("Blueprint_Dependency as bd").select(l.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(u.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(l.lit(!0)).else(l.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).where("bl.id","in",o.selectFrom("Blueprint_Region as br").innerJoin("Land as l","l.regionId","br.regionId").select("br.blueprintId").where("l.id","=",i)).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),count:D.number().int().nonnegative(),cycles:D.number().int().nonnegative(),sort:D.number().int().nonnegative(),withAvailableBuildings:Qi()})}))}})}},component(){const{user:t,blueprints:e}=DM.useLoaderData(),{land:n}=ji({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return d.jsx(gae,{userId:t.id,land:n,blueprints:e})}}),e1="icon-[hugeicons--package-receive]",cI="icon-[heroicons--queue-list]",Ep=["p-4","border","border-slate-300","w-full","justify-start"],yae=({building:t})=>{const{mapId:e,locale:n}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(fo,{icon:lo,textTitle:t.name,textSubTitle:t.land,children:[d.jsx(At,{icon:Ds,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Ep},children:d.jsx(Y,{label:"Building production (label)"})}),d.jsx(At,{icon:cI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Ep},children:d.jsx(Y,{label:"Production queue (label)"})}),d.jsx(At,{icon:Ba,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Ep},children:d.jsx(Y,{label:"Building inventory (label)"})}),d.jsx(At,{icon:cx,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Ep},children:d.jsx(Y,{label:"Supply list (label)"})}),d.jsx(At,{icon:e1,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Ep},children:d.jsx(Y,{label:"Demand list (label)"})})]})},bae=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"});return d.jsx(yae,{building:t})}}),vae=({supply:t})=>{const e=Pn([["GameMap"]]),n=Zt({async mutationFn({supplyId:r}){return kt.transaction().execute(async i=>i.deleteFrom("Supply").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsx("div",{className:"flex flex-row gap-2 items-center",children:t.name}),d.jsx(yn,{iconEnabled:ii,loading:n.isPending,onClick:()=>{n.mutate({supplyId:t.id})},variant:{variant:"danger"}})]})},xae=({building:t,supply:e,...n})=>{const{mapId:r,locale:i}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(fo,{icon:cx,textTitle:d.jsx(Y,{label:"Supply of (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:ao,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(vae,{supply:s},s.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(Y,{label:"This building does not supply anything. (label)"})})})},LM=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/supply")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{supply:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"supply","list"],queryFn:async()=>e.transaction().execute(async i=>Or({select:i.selectFrom("Supply as s").innerJoin("Resource as r","r.id","s.resourceId").select(["s.id","r.name"]).where("s.buildingId","=",r).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1)})}))})}},component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{supply:e}=LM.useLoaderData();return d.jsx(xae,{building:t,supply:e})}}),MM="icon-[hugeicons--package]",wae=({inventory:t})=>{const e=Pn([["GameMap"]]),n=Zt({async mutationFn({buildingId:r,resourceId:i,supplyId:s}){return kt.transaction().execute(async o=>s?o.deleteFrom("Supply").where("id","=",s).execute():o.insertInto("Supply").values({id:In(),buildingId:r,resourceId:i}).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:gn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.limit>0&&t.amount>=t.limit?["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(yn,{iconEnabled:t.supplyId?cx:MM,loading:n.isPending,onClick:()=>{n.mutate({buildingId:t.buildingId,resourceId:t.resourceId,supplyId:t.supplyId})},variant:{variant:"subtle"}}),d.jsx("div",{className:"font-bold",children:t.name})]}),dn({number:t.amount})," /"," ",dn({number:t.limit})]}),t.limit>0?d.jsx(yf,{variant:{size:"md"},value:100*t.amount/t.limit,css:{progress:t.amount>=t.limit?["bg-amber-500"]:void 0}}):null]})},_ae=({inventory:t,fulltextProps:e,...n})=>d.jsxs(fo,{icon:Ba,textTitle:d.jsx(Y,{label:"Inventory (label)"}),...n,children:[d.jsx(TD,{...e}),d.jsx("div",{children:d.jsx(Y,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),t.length>0?t.map(r=>d.jsx(wae,{inventory:r},r.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(Y,{label:"No inventory storage. (label)"})})]}),Wp=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:pr(D.object({fulltext:D.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{mapId:r,buildingId:i}}){return{inventory:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"inventory","storage",{fulltext:n}],async queryFn(){return e.transaction().execute(async s=>Or({select:s.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi",o=>o.on("bi.buildingId","=",i).onRef("bi.inventoryId","=","i.id")).innerJoin("Resource as r","r.id","i.resourceId").leftJoin("Supply as s",o=>o.onRef("s.resourceId","=","i.resourceId").on("s.buildingId","=",i)).select(["i.id","i.amount","i.limit","r.name","bi.buildingId","i.resourceId","s.id as supplyId"]).where("i.type","in",["storage"]).orderBy("r.name"),query({select:o,where:l}){let u=o;if(l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("r.name","like",f)]))}return u},output:D.object({id:D.string().min(1),buildingId:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),limit:D.number().nonnegative(),name:D.string().min(1),supplyId:D.string().nullish()}),filter:{fulltext:n}}))}})}},component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=Wp.useSearch(),{mapId:n,locale:r}=Wp.useParams(),i=Wp.useNavigate(),{inventory:s}=Wp.useLoaderData();return d.jsx(_ae,{inventory:s,textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:ao,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t.id}}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(o){i({search:{fulltext:o}})}}})}}),Sae=({demand:t})=>{const e=Pn([["GameMap"]]),n=Zt({async mutationFn({demandId:r}){return kt.transaction().execute(async i=>i.deleteFrom("Demand").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:t.name}),d.jsxs(As,{children:["x",t.amount]})]}),d.jsx(yn,{iconEnabled:ii,loading:n.isPending,onClick:()=>{n.mutate({demandId:t.id})},variant:{variant:"danger"}})]})},Eae=({building:t,demand:e,...n})=>{const{mapId:r,locale:i}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(fo,{icon:e1,textTitle:d.jsx(Y,{label:"Demand (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:ao,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(Sae,{demand:s},s.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(Y,{label:"This building does not demand anything. (label)"})})})},$M=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/demand")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{demand:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"demand","list"],queryFn:async()=>e.transaction().execute(async i=>Or({select:i.selectFrom("Demand as d").innerJoin("Resource as r","r.id","d.resourceId").select(["d.id","r.name","d.amount"]).where("d.buildingId","=",r).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number()})}))})}},component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{demand:e}=$M.useLoaderData();return d.jsx(Eae,{building:t,demand:e})}}),BM=({requirement:t})=>{const e=(t.available||0)>=t.amount;return d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[d.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?d.jsxs(As,{children:["x",dn({number:t.amount})]}):d.jsxs(As,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[d.jsx("div",{className:"font-bold",children:dn({number:t.available})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-light",children:dn({number:t.amount})})]})]})},Iae=({blueprint:t,requirement:e,...n})=>d.jsx(fo,{icon:vr,textTitle:d.jsx(Y,{label:"Building requirements (label)"}),textSubTitle:t.name,...n,children:e.length>0?e.map(r=>d.jsx(BM,{requirement:r},r.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(Y,{label:"There are no requirements. (label)"})})}),zM=$t("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"requirements"],async queryFn(){return e.transaction().execute(async r=>Or({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),passive:Qi()})}))}})}},component(){const{blueprint:t}=ji({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=zM.useLoaderData();return d.jsx(Iae,{blueprint:t,requirement:e})}}),T3=Mr(),Nae=[T3({name:"name",header(){return d.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),T3({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:10})],kae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Nae}),...e}),Zy=$t("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:pr(Fr(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Zy.useLoaderData(),{filter:n,cursor:r}=Zy.useSearch(),i=Zy.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(kae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of production resource requirements (label)"}),...qr(i)}})})}}),MS=Mr(),Cae=[MS({name:"name",header(){return d.jsx(Y,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),MS({name:"amount",header(){return d.jsx(Y,{label:"Amount (label)"})},render({value:t}){return dn({number:t})},size:10}),MS({name:"passive",header(){return d.jsx(Y,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],Tae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Cae}),...e}),Yy=$t("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:pr(Fr(Rm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Yy.useLoaderData(),{filter:n,cursor:r}=Yy.useSearch(),i=Yy.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(Tae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of production requirements (label)"}),...qr(i)}})})}}),jae=Mr(),Rae=[jae({name:"name",header(){return d.jsx(Y,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=rn({from:"/$locale"});return d.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Oae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Rae}),...e}),Xy=$t("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:pr(Fr(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>or({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:D.object({id:D.string().min(1),name:D.string().min(1),blueprintId:D.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Xy.useLoaderData(),{filter:n,cursor:r}=Xy.useSearch(),i=Xy.useNavigate(),{tva:s}=fr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Oae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(Y,{label:"Number of dependencies (label)"}),...qr(i)}})})}}),qae=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return d.jsxs("div",{className:gn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsxs(As,{children:["x",dn({number:t.amount})]})}),d.jsx(XN,{cycles:t.cycles})]}),d.jsx(yf,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},Aae=({building:t,queue:e,inventory:n,...r})=>{const{mapId:i,locale:s}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(fo,{icon:cI,textTitle:d.jsx(Y,{label:"Production queue (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:ao,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id}}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(o=>d.jsx(qae,{queue:o,inventory:n},o.id)):d.jsxs("div",{className:gn(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[d.jsx(Y,{label:"Production queue is empty. (label)"}),d.jsx(At,{icon:cI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},children:d.jsx(Y,{label:"Plan queue (label)"})})]})})},WM=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{queue:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>Or({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:D.object({id:D.string().min(1),name:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),cycle:D.number().int().nonnegative(),cycles:D.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>Or({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.name","like",u)]))}return l},output:D.object({id:D.string().min(1),resourceId:D.string().min(1),amount:D.number().nonnegative(),limit:D.number().nonnegative(),name:D.string().min(1)})}))}})}},component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:n}=WM.useLoaderData();return d.jsx(Aae,{building:t,queue:e,inventory:n})}}),Pae=({building:t,production:e})=>{const{mapId:n,locale:r}=rn({from:"/$locale/apps/derivean/map/$mapId"}),i=Pn([["GameMap"]]),s=Zt({async mutationFn({blueprintProductionId:f,buildingId:p}){return kt.transaction().execute(async h=>h.updateTable("Building").set({productionId:f}).where("id","=",p).execute())},async onSuccess(){await i()}}),o=Zt({async mutationFn({buildingId:f}){return kt.transaction().execute(async p=>p.updateTable("Building").set({productionId:null}).where("id","=",f).execute())},async onSuccess(){await i()}}),l=Zt({async mutationFn({blueprintProductionId:f,buildingId:p}){return kt.transaction().execute(async h=>h.updateTable("Building").set({recurringProductionId:f}).where("id","=",p).execute())},async onSuccess(){await i()}}),u=Zt({async mutationFn({buildingId:f}){return kt.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:null}).where("id","=",f).execute())},async onSuccess(){await i()}});return d.jsxs("div",{className:gn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",e.withAvailableResources?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?d.jsx(yn,{iconEnabled:aI,loading:o.isPending,onClick:()=>{o.mutate({buildingId:t.id})}}):d.jsx(yn,{iconEnabled:"icon-[solar--play-outline]",loading:s.isPending,onClick:()=>{s.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?d.jsx(yn,{iconEnabled:aI,loading:u.isPending,onClick:()=>{u.mutate({buildingId:t.id})}}):d.jsx(yn,{iconEnabled:gM,loading:l.isPending,onClick:()=>{l.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),d.jsxs(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:{locale:r,mapId:n,buildingId:t.id,productionId:e.id},children:[e.name,d.jsxs(As,{children:["x",dn({number:e.amount})]})]})]}),d.jsx(XN,{cycles:e.cycles})]})},Fae=({building:t,production:e,...n})=>{const{mapId:r,locale:i}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(fo,{icon:Ds,textTitle:d.jsx(Y,{label:"Building production (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:ao,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(Pae,{building:t,production:s},s.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(Y,{label:"This building does not produce anything. (label)"})})})},VM=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){const s=await n();return{production:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>Or({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",l=>l.case().when(l.not(l.exists(l.selectFrom("Blueprint_Production_Requirement as bpr").select(l.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select(u.lit(1).as("one")).where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(l.lit(!0)).else(l.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(l=>l.not(l.exists(l.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(l=>l.not(l.exists(l.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),cycles:D.number().int().nonnegative(),withAvailableResources:Qi()})}))}})}},component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=VM.useLoaderData();return d.jsx(Fae,{building:t,production:e})}}),Dae=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{production:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>da({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:D.object({id:D.string().min(1),amount:D.number().nonnegative(),name:D.string().min(1)})}))}})}}}),Lae=({requirement:t})=>{const e=t.available||0;return d.jsxs("div",{className:gn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.supply?d.jsx(nn,{icon:e1}):d.jsx(nn,{icon:MM}),d.jsx("div",{className:"font-bold",children:t.name})]}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{children:dn({number:e})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-bold",children:dn({number:t.amount})})]})]}),d.jsx(yf,{value:100*e/t.amount})]})},Mae=({requirement:t,...e})=>d.jsx(fo,{icon:ZN,textTitle:d.jsx(Y,{label:"Construction requirements (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(Lae,{requirement:n},n.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(Y,{label:"There are no construction requirements (label)"})})}),UM=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"construction","requirement"],async queryFn(){return e.transaction().execute(async i=>Or({select:i.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",s=>s.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",r)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",s=>s.selectFrom("Supply as s").select(o=>o.fn.count("s.id").as("supply")).whereRef("s.resourceId","=","br.resourceId").where("s.buildingId","in",i.withRecursive("ConnectedWaypoints",o=>o.selectFrom("Building_Waypoint as bw").where("bw.buildingId","=",r).select(["bw.waypointId"]).unionAll(o.selectFrom("Route as r").innerJoin("ConnectedWaypoints as cw","cw.waypointId","r.fromId").select(["r.toId as waypointId"]))).selectFrom("ConnectedWaypoints as cw").innerJoin("Building_Waypoint as bw","bw.waypointId","cw.waypointId").innerJoin("Building as b","b.id","bw.buildingId").innerJoin("Land as l","l.id","b.landId").where("b.id","!=",r).where("l.mapId","=",n).select(["b.id as buildingId"]).distinct()).as("supply"),s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),available:D.number().nonnegative().nullish(),supply:D.number().nonnegative(),passive:Qi()})}))}})}},component(){const{requirement:t}=UM.useLoaderData();return d.jsx(Mae,{requirement:t})}}),$ae=({building:t,production:e,requirement:n,...r})=>{const{mapId:i,locale:s}=rn({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(fo,{icon:vr,textTitle:d.jsx(Y,{label:"Production requirements (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(At,{icon:ao,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id}}),d.jsx(At,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),d.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(o=>d.jsx(BM,{requirement:o},o.id)):d.jsx("div",{className:gn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(Y,{label:"There are no requirements. (label)"})})})},HM=$t("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>Or({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:D.object({id:D.string().min(1),name:D.string().min(1),amount:D.number().nonnegative(),available:D.number().nonnegative().nullish(),passive:Qi()})}))}})}},component(){const{building:t}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=ji({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:n}=HM.useLoaderData();return d.jsx($ae,{building:t,production:e,requirement:n})}}),t1=SJ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>xN}),Bae=NJ.update({id:"/",path:"/",getParentRoute:()=>xN}),zae=kJ.update({id:"/",path:"/",getParentRoute:()=>t1}),ac=TJ.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>t1}),Ms=OJ.update({id:"/root",path:"/root",getParentRoute:()=>ac}),KM=qJ.update({id:"/map",path:"/map",getParentRoute:()=>ac}),qm=AJ.update({id:"/game",path:"/game",getParentRoute:()=>ac}),Wae=MJ.update({id:"/",path:"/",getParentRoute:()=>Ms}),Vae=v2.update({id:"/",path:"/",getParentRoute:()=>qm}),Uae=oI.update({id:"/editor",path:"/editor",getParentRoute:()=>Ms}),Hae=cse.update({id:"/public/register",path:"/public/register",getParentRoute:()=>ac}),Kae=use.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>ac}),Qae=hse.update({id:"/public/login",path:"/public/login",getParentRoute:()=>ac}),gu=lI.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>KM}),Gae=bM.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>ac}),Jae=$y.update({id:"/user/list",path:"/user/list",getParentRoute:()=>Ms}),n1=vM.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>Ms}),Zae=By.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>Ms}),Yae=zy.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>Ms}),QM=SM.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>Ms}),Xae=Wy.update({id:"/region/list",path:"/region/list",getParentRoute:()=>Ms}),ele=Vy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Ms}),lc=CM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Ms}),tle=ioe.update({id:"/view",path:"/view",getParentRoute:()=>gu}),nle=Uy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>qm}),_f=TM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>qm}),rle=coe.update({id:"/view",path:"/view",getParentRoute:()=>n1}),ile=uoe.update({id:"/view",path:"/view",getParentRoute:()=>QM}),sle=doe.update({id:"/region/$id/view",path:"/region/$id/view",getParentRoute:()=>Ms}),dx=jM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Ms}),ole=RM.update({id:"/view",path:"/view",getParentRoute:()=>lc}),ale=Pp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>lc}),lle=Fp.update({id:"/production",path:"/production",getParentRoute:()=>lc}),cle=Dp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>lc}),ule=OM.update({id:"/edit",path:"/edit",getParentRoute:()=>lc}),dle=Lp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>lc}),fle=Mp.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>lc}),ple=qM.update({id:"/land/list",path:"/land/list",getParentRoute:()=>gu}),GM=Doe.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>gu}),hle=AM.update({id:"/building/list",path:"/building/list",getParentRoute:()=>gu}),Za=$oe.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>gu}),JM=Boe.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>gu}),fx=PM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>qm}),mle=Uoe.update({id:"/view",path:"/view",getParentRoute:()=>_f}),gle=Hy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>_f}),yle=Ky.update({id:"/production",path:"/production",getParentRoute:()=>_f}),ble=Qy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>_f}),vle=Gy.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>_f}),xle=Jy.update({id:"/building/list",path:"/building/list",getParentRoute:()=>n1}),wle=$p.update({id:"/resources",path:"/resources",getParentRoute:()=>dx}),_le=Bp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>dx}),Sle=zp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>dx}),Ele=DM.update({id:"/construction",path:"/construction",getParentRoute:()=>GM}),Ile=bae.update({id:"/view",path:"/view",getParentRoute:()=>Za}),Nle=LM.update({id:"/supply",path:"/supply",getParentRoute:()=>Za}),kle=Wp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Za}),Cle=$M.update({id:"/demand",path:"/demand",getParentRoute:()=>Za}),Tle=zM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>JM}),jle=Zy.update({id:"/resources",path:"/resources",getParentRoute:()=>fx}),Rle=Yy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>fx}),Ole=Xy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>fx}),qle=WM.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Za}),Ale=VM.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Za}),ZM=Dae.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Za}),Ple=UM.update({id:"/construction/requirements",path:"/construction/requirements",getParentRoute:()=>Za}),Fle=HM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ZM}),Dle={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:vle,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:ble,LocaleAppsDeriveanGameBlueprintIdProductionRoute:yle,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:gle,LocaleAppsDeriveanGameBlueprintIdViewRoute:mle},Lle=_f._addFileChildren(Dle),Mle={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:Ole,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:Rle,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:jle},$le=fx._addFileChildren(Mle),Ble={LocaleAppsDeriveanGameIndexRoute:Vae,LocaleAppsDeriveanGameBlueprintIdRoute:Lle,LocaleAppsDeriveanGameBlueprintListRoute:nle,LocaleAppsDeriveanGameBlueprintProductionIdRoute:$le},zle=qm._addFileChildren(Ble),Wle={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:Tle},Vle=JM._addFileChildren(Wle),Ule={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:Fle},Hle=ZM._addFileChildren(Ule),Kle={LocaleAppsDeriveanMapMapIdBuildingBuildingIdDemandRoute:Cle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:kle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdSupplyRoute:Nle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:Ile,LocaleAppsDeriveanMapMapIdBuildingBuildingIdConstructionRequirementsRoute:Ple,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:Hle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:Ale,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:qle},Qle=Za._addFileChildren(Kle),Gle={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:Ele},Jle=GM._addFileChildren(Gle),Zle={LocaleAppsDeriveanMapMapIdViewRoute:tle,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:Vle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:Qle,LocaleAppsDeriveanMapMapIdBuildingListRoute:hle,LocaleAppsDeriveanMapMapIdLandLandIdRoute:Jle,LocaleAppsDeriveanMapMapIdLandListRoute:ple},Yle=gu._addFileChildren(Zle),Xle={LocaleAppsDeriveanMapMapIdRoute:Yle},ece=KM._addFileChildren(Xle),tce={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:fle,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:dle,LocaleAppsDeriveanRootBlueprintIdEditRoute:ule,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:cle,LocaleAppsDeriveanRootBlueprintIdProductionRoute:lle,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:ale,LocaleAppsDeriveanRootBlueprintIdViewRoute:ole},nce=lc._addFileChildren(tce),rce={LocaleAppsDeriveanRootResourceIdViewRoute:ile},ice=QM._addFileChildren(rce),sce={LocaleAppsDeriveanRootUserIdViewRoute:rle,LocaleAppsDeriveanRootUserIdBuildingListRoute:xle},oce=n1._addFileChildren(sce),ace={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:Sle,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:_le,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:wle},lce=dx._addFileChildren(ace),cce={LocaleAppsDeriveanRootEditorRoute:Uae,LocaleAppsDeriveanRootIndexRoute:Wae,LocaleAppsDeriveanRootBlueprintIdRoute:nce,LocaleAppsDeriveanRootBlueprintListRoute:ele,LocaleAppsDeriveanRootRegionListRoute:Xae,LocaleAppsDeriveanRootResourceIdRoute:ice,LocaleAppsDeriveanRootResourceListRoute:Yae,LocaleAppsDeriveanRootTagListRoute:Zae,LocaleAppsDeriveanRootUserIdRoute:oce,LocaleAppsDeriveanRootUserListRoute:Jae,LocaleAppsDeriveanRootBlueprintProductionIdRoute:lce,LocaleAppsDeriveanRootRegionIdViewRoute:sle},uce=Ms._addFileChildren(cce),dce={LocaleAppsDeriveanGameRoute:zle,LocaleAppsDeriveanMapRoute:ece,LocaleAppsDeriveanRootRoute:uce,LocaleAppsDeriveanDbSchemaRoute:Gae,LocaleAppsDeriveanPublicLoginRoute:Qae,LocaleAppsDeriveanPublicLogoutRoute:Kae,LocaleAppsDeriveanPublicRegisterRoute:Hae},fce=ac._addFileChildren(dce),pce={LocaleIndexRoute:zae,LocaleAppsDeriveanRoute:fce},hce=t1._addFileChildren(pce),mce={IndexRoute:Bae,LocaleRoute:hce},gce=xN._addFileChildren(mce)._addFileTypes(),YM=new _B({defaultOptions:{queries:{placeholderData:cB}}}),yce=v4({routeTree:gce,context:{queryClient:YM,tva:oQ,async session(){return bm.parse(null)},kysely:kt},defaultPendingComponent:KG,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),j3=document.getElementById("app");IU({limit:{maxRequests:10,perMilliseconds:100}});j3.innerHTML||xJ.createRoot(j3).render(d.jsx(CB,{client:YM,children:d.jsx(U4,{router:yce})}))})();