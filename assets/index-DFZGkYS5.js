(async()=>{function nB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rB(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var $w={exports:{}},pp={},Bw={exports:{}},Cn={};var aC;function iB(){if(aC)return Cn;aC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function b(te){return te===null||typeof te!="object"?null:(te=h&&te[h]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function N(te,ue,de){this.props=te,this.context=ue,this.refs=E,this.updater=de||x}N.prototype.isReactComponent={},N.prototype.setState=function(te,ue){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,ue,"setState")},N.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function j(){}j.prototype=N.prototype;function C(te,ue,de){this.props=te,this.context=ue,this.refs=E,this.updater=de||x}var R=C.prototype=new j;R.constructor=C,_(R,N.prototype),R.isPureReactComponent=!0;var q=Array.isArray,L=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function P(te,ue,de){var ye,we={},Ie=null,ze=null;if(ue!=null)for(ye in ue.ref!==void 0&&(ze=ue.ref),ue.key!==void 0&&(Ie=""+ue.key),ue)L.call(ue,ye)&&!W.hasOwnProperty(ye)&&(we[ye]=ue[ye]);var Re=arguments.length-2;if(Re===1)we.children=de;else if(1<Re){for(var De=Array(Re),Je=0;Je<Re;Je++)De[Je]=arguments[Je+2];we.children=De}if(te&&te.defaultProps)for(ye in Re=te.defaultProps,Re)we[ye]===void 0&&(we[ye]=Re[ye]);return{$$typeof:t,type:te,key:Ie,ref:ze,props:we,_owner:M.current}}function O(te,ue){return{$$typeof:t,type:te.type,key:ue,ref:te.ref,props:te.props,_owner:te._owner}}function z(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function D(te){var ue={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(de){return ue[de]})}var V=/\/+/g;function U(te,ue){return typeof te=="object"&&te!==null&&te.key!=null?D(""+te.key):ue.toString(36)}function B(te,ue,de,ye,we){var Ie=typeof te;(Ie==="undefined"||Ie==="boolean")&&(te=null);var ze=!1;if(te===null)ze=!0;else switch(Ie){case"string":case"number":ze=!0;break;case"object":switch(te.$$typeof){case t:case e:ze=!0}}if(ze)return ze=te,we=we(ze),te=ye===""?"."+U(ze,0):ye,q(we)?(de="",te!=null&&(de=te.replace(V,"$&/")+"/"),B(we,ue,de,"",function(Je){return Je})):we!=null&&(z(we)&&(we=O(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(V,"$&/")+"/")+te)),ue.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",q(te))for(var Re=0;Re<te.length;Re++){Ie=te[Re];var De=ye+U(Ie,Re);ze+=B(Ie,ue,de,De,we)}else if(De=b(te),typeof De=="function")for(te=De.call(te),Re=0;!(Ie=te.next()).done;)Ie=Ie.value,De=ye+U(Ie,Re++),ze+=B(Ie,ue,de,De,we);else if(Ie==="object")throw ue=String(te),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return ze}function G(te,ue,de){if(te==null)return te;var ye=[],we=0;return B(te,ye,"","",function(Ie){return ue.call(de,Ie,we++)}),ye}function Z(te){if(te._status===-1){var ue=te._result;ue=ue(),ue.then(function(de){(te._status===0||te._status===-1)&&(te._status=1,te._result=de)},function(de){(te._status===0||te._status===-1)&&(te._status=2,te._result=de)}),te._status===-1&&(te._status=0,te._result=ue)}if(te._status===1)return te._result.default;throw te._result}var le={current:null},ie={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ie,ReactCurrentOwner:M};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Cn.Children={map:G,forEach:function(te,ue,de){G(te,function(){ue.apply(this,arguments)},de)},count:function(te){var ue=0;return G(te,function(){ue++}),ue},toArray:function(te){return G(te,function(ue){return ue})||[]},only:function(te){if(!z(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Cn.Component=N,Cn.Fragment=n,Cn.Profiler=i,Cn.PureComponent=C,Cn.StrictMode=r,Cn.Suspense=u,Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Cn.act=oe,Cn.cloneElement=function(te,ue,de){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var ye=_({},te.props),we=te.key,Ie=te.ref,ze=te._owner;if(ue!=null){if(ue.ref!==void 0&&(Ie=ue.ref,ze=M.current),ue.key!==void 0&&(we=""+ue.key),te.type&&te.type.defaultProps)var Re=te.type.defaultProps;for(De in ue)L.call(ue,De)&&!W.hasOwnProperty(De)&&(ye[De]=ue[De]===void 0&&Re!==void 0?Re[De]:ue[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){Re=Array(De);for(var Je=0;Je<De;Je++)Re[Je]=arguments[Je+2];ye.children=Re}return{$$typeof:t,type:te.type,key:we,ref:Ie,props:ye,_owner:ze}},Cn.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:s,_context:te},te.Consumer=te},Cn.createElement=P,Cn.createFactory=function(te){var ue=P.bind(null,te);return ue.type=te,ue},Cn.createRef=function(){return{current:null}},Cn.forwardRef=function(te){return{$$typeof:l,render:te}},Cn.isValidElement=z,Cn.lazy=function(te){return{$$typeof:p,_payload:{_status:-1,_result:te},_init:Z}},Cn.memo=function(te,ue){return{$$typeof:f,type:te,compare:ue===void 0?null:ue}},Cn.startTransition=function(te){var ue=ie.transition;ie.transition={};try{te()}finally{ie.transition=ue}},Cn.unstable_act=oe,Cn.useCallback=function(te,ue){return le.current.useCallback(te,ue)},Cn.useContext=function(te){return le.current.useContext(te)},Cn.useDebugValue=function(){},Cn.useDeferredValue=function(te){return le.current.useDeferredValue(te)},Cn.useEffect=function(te,ue){return le.current.useEffect(te,ue)},Cn.useId=function(){return le.current.useId()},Cn.useImperativeHandle=function(te,ue,de){return le.current.useImperativeHandle(te,ue,de)},Cn.useInsertionEffect=function(te,ue){return le.current.useInsertionEffect(te,ue)},Cn.useLayoutEffect=function(te,ue){return le.current.useLayoutEffect(te,ue)},Cn.useMemo=function(te,ue){return le.current.useMemo(te,ue)},Cn.useReducer=function(te,ue,de){return le.current.useReducer(te,ue,de)},Cn.useRef=function(te){return le.current.useRef(te)},Cn.useState=function(te){return le.current.useState(te)},Cn.useSyncExternalStore=function(te,ue,de){return le.current.useSyncExternalStore(te,ue,de)},Cn.useTransition=function(){return le.current.useTransition()},Cn.version="18.3.1",Cn}var lC;function Yh(){return lC||(lC=1,Bw.exports=iB()),Bw.exports}var cC;function sB(){if(cC)return pp;cC=1;var t=Yh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,f){var p,h={},b=null,x=null;f!==void 0&&(b=""+f),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:l,key:b,ref:x,props:h,_owner:i.current}}return pp.Fragment=n,pp.jsx=o,pp.jsxs=o,pp}var uC;function oB(){return uC||(uC=1,$w.exports=sB()),$w.exports}var d=oB(),rf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eu=typeof window>"u"||"Deno"in globalThis;function no(){}function aB(t,e){return typeof t=="function"?t(e):t}function MS(t){return typeof t=="number"&&t>=0&&t!==1/0}function j3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function wd(t,e){return typeof t=="function"?t(e):t}function Io(t,e){return typeof t=="function"?t(e):t}function dC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==cI(o,e.options))return!1}else if(!uh(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function fC(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(tu(e.options.mutationKey)!==tu(s))return!1}else if(!uh(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function cI(t,e){return(e?.queryKeyHashFn||tu)(t)}function tu(t){return JSON.stringify(t,(e,n)=>$S(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function uh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!uh(t[n],e[n])):!1}function uI(t,e){if(t===e)return t;const n=pC(t)&&pC(e);if(n||$S(t)&&$S(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let u=0;for(let f=0;f<o;f++){const p=n?f:s[f];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(l[p]=void 0,u++):(l[p]=uI(t[p],e[p]),l[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function nb(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function pC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $S(t){if(!hC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hC(t){return Object.prototype.toString.call(t)==="[object Object]"}function lB(t){return new Promise(e=>{setTimeout(e,t)})}function BS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?uI(t,e):e}function cB(t){return t}function uB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function dB(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var dI=Symbol();function T3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===dI?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var fB=class extends rf{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!eu&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},fI=new fB,pB=class extends rf{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!eu&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},rb=new pB;function zS(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function hB(t){return Math.min(1e3*2**t,3e4)}function R3(t){return(t??"online")==="online"?rb.isOnline():!0}var O3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function zw(t){return t instanceof O3}function q3(t){let e=!1,n=0,r=!1,i;const s=zS(),o=E=>{r||(b(new O3(E)),t.abort?.())},l=()=>{e=!0},u=()=>{e=!1},f=()=>fI.isFocused()&&(t.networkMode==="always"||rb.isOnline())&&t.canRun(),p=()=>R3(t.networkMode)&&t.canRun(),h=E=>{r||(r=!0,t.onSuccess?.(E),i?.(),s.resolve(E))},b=E=>{r||(r=!0,t.onError?.(E),i?.(),s.reject(E))},x=()=>new Promise(E=>{i=N=>{(r||f())&&E(N)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let E;const N=n===0?t.initialPromise:void 0;try{E=N??t.fn()}catch(j){E=Promise.reject(j)}Promise.resolve(E).then(h).catch(j=>{if(r)return;const C=t.retry??(eu?0:3),R=t.retryDelay??hB,q=typeof R=="function"?R(n,j):R,L=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,j);if(e||!L){b(j);return}n++,t.onFail?.(n,j),lB(q).then(()=>f()?void 0:x()).then(()=>{e?b(j):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function mB(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Jr=mB(),A3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MS(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(eu?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},gB=class extends A3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=yB(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=BS(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(no).catch(no):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Io(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dI||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!j3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const l=T3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(l,u,this):l(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=l=>{zw(l)&&l.silent||this.#o({type:"error",error:l}),zw(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=q3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){o(u);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,u)=>{this.#o({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...P3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return zw(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Jr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function P3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:R3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function yB(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bB=class extends rf{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??cI(r,e);let s=this.get(i);return s||(s=new gB({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Jr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>dC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>dC(t,n)):e}notify(t){Jr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Jr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Jr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vB=class extends A3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||F3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=q3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Jr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function F3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xB=class extends rf{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new vB({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Og(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Og(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Og(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Og(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Jr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>fC(e,n))}findAll(t={}){return this.getAll().filter(e=>fC(t,e))}notify(t){Jr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Jr.batch(()=>Promise.all(t.map(e=>e.continue().catch(no))))}};function Og(t){return t.options.scope?.id}function mC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const f=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=T3(e.options,e.fetchOptions),x=async(_,E,N)=>{if(p)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const j={queryKey:e.queryKey,pageParam:E,direction:N?"backward":"forward",meta:e.options.meta};h(j);const C=await b(j),{maxPages:R}=e.options,q=N?dB:uB;return{pages:q(_.pages,C,R),pageParams:q(_.pageParams,E,R)}};if(i&&s.length){const _=i==="backward",E=_?wB:gC,N={pages:s,pageParams:o},j=E(r,N);l=await x(N,j,_)}else{const _=t??s.length;do{const E=u===0?o[0]??r.initialPageParam:gC(r,l);if(u>0&&E==null)break;l=await x(l,E),u++}while(u<_)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(f,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=f}}}function gC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function wB(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var _B=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new bB,this.#t=t.mutationCache||new xB,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=fI.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=rb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(wd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=aB(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Jr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Jr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Jr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Jr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(no).catch(no)}invalidateQueries(t,e={}){return Jr.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Jr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(no)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(no)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(wd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(no).catch(no)}fetchInfiniteQuery(t){return t.behavior=mC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(no).catch(no)}ensureInfiniteQueryData(t){return t.behavior=mC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(tu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{uh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(tu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{uh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=cI(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===dI&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},SB=class extends rf{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=zS(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#c;#l;#u;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),yC(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return WS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return WS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Io(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!nb(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&bC(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||Io(this.options.enabled,this.#t)!==Io(n.enabled,this.#t)||wd(this.options.staleTime,this.#t)!==wd(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||Io(this.options.enabled,this.#t)!==Io(n.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return IB(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(no)),e}#g(){this.#x();const t=wd(this.options.staleTime,this.#t);if(eu||this.#r.isStale||!MS(t))return;const n=j3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#f=t,!(eu||Io(this.options.enabled,this.#t)===!1||!MS(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||fI.isFocused())&&this.#h()},this.#f))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:f}=t;let p={...f},h=!1,b;if(e._optimisticResults){const W=this.hasListeners(),P=!W&&yC(t,e),O=W&&bC(t,n,e,r);(P||O)&&(p={...p,...P3(f.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:E}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#c)b=this.#l;else try{this.#c=e.select,b=e.select(p.data),b=BS(i?.data,b,e),this.#l=b,this.#a=null}catch(W){this.#a=W}else b=p.data;if(e.placeholderData!==void 0&&b===void 0&&E==="pending"){let W;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)W=i.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#a=null}catch(P){this.#a=P}W!==void 0&&(E="success",b=BS(i?.data,W,e),h=!0)}this.#a&&(x=this.#a,b=this.#l,_=Date.now(),E="error");const N=p.fetchStatus==="fetching",j=E==="pending",C=E==="error",R=j&&N,q=b!==void 0,M={status:E,fetchStatus:p.fetchStatus,isPending:j,isSuccess:E==="success",isError:C,isInitialLoading:R,isLoading:R,data:b,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:N,isRefetching:N&&!j,isLoadingError:C&&!q,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:C&&q,isStale:pI(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const W=z=>{M.status==="error"?z.reject(M.error):M.data!==void 0&&z.resolve(M.data)},P=()=>{const z=this.#o=M.promise=zS();W(z)},O=this.#o;switch(O.status){case"pending":t.queryHash===n.queryHash&&W(O);break;case"fulfilled":(M.status==="error"||M.data!==O.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==O.reason)&&P();break}}return M}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#u=this.#t),nb(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(u=>{const f=u;return this.#r[f]!==e[f]&&l.has(f)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){Jr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function EB(t,e){return Io(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function yC(t,e){return EB(t,e)||t.state.data!==void 0&&WS(t,e,e.refetchOnMount)}function WS(t,e,n){if(Io(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&pI(t,e)}return!1}function bC(t,e,n,r){return(t!==e||Io(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&pI(t,n)}function pI(t,e){return Io(e.enabled,t)!==!1&&t.isStaleByTime(wd(e.staleTime,t))}function IB(t,e){return!nb(t.getCurrentResult(),e)}var NB=class extends rf{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),nb(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&tu(n.mutationKey)!==tu(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??F3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Jr.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},H=Yh();const Bn=uo(H),kB=nB({__proto__:null,default:Bn},[H]);var D3=H.createContext(void 0),uv=t=>{const e=H.useContext(D3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},CB=({client:t,children:e})=>(H.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(D3.Provider,{value:t,children:e})),L3=H.createContext(!1),jB=()=>H.useContext(L3);L3.Provider;function TB(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var RB=H.createContext(TB()),OB=()=>H.useContext(RB);function M3(t,e){return typeof t=="function"?t(...e):!!t}function VS(){}var qB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},AB=t=>{H.useEffect(()=>{t.clearReset()},[t])},PB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&M3(n,[t.error,r]),FB=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},DB=(t,e)=>t.isLoading&&t.isFetching&&!e,LB=(t,e)=>t?.suspense&&e.isPending,vC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function MB(t,e,n){const r=uv(),i=jB(),s=OB(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",FB(o),qB(o,s),AB(s);const l=!r.getQueryCache().get(o.queryHash),[u]=H.useState(()=>new e(r,o)),f=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(H.useSyncExternalStore(H.useCallback(h=>{const b=p?u.subscribe(Jr.batchCalls(h)):VS;return u.updateResult(),b},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),H.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),LB(o,f))throw vC(o,u,s);if(PB({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw f.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!eu&&DB(f,i)&&(l?vC(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(VS).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?f:u.trackResult(f)}function ib(t,e){return MB(t,SB)}function xC(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function $B(t={},e){const n=uv().getMutationCache(),r=H.useRef(t),i=H.useRef(null);return i.current||(i.current=xC(n,t)),H.useEffect(()=>{r.current=t}),H.useSyncExternalStore(H.useCallback(s=>n.subscribe(()=>{const o=uI(i.current,xC(n,r.current));i.current!==o&&(i.current=o,Jr.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Zt(t,e){const n=uv(),[r]=H.useState(()=>new NB(n,t));H.useEffect(()=>{r.setOptions(t)},[r,t]);const i=H.useSyncExternalStore(H.useCallback(o=>r.subscribe(Jr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=H.useCallback((o,l)=>{r.mutate(o,l).catch(VS)},[r]);if(i.error&&M3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const Qc="__TSR_index",wC="popstate",_C="beforeunload";function $3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:l,...u})=>{var f,p;if(l?.ignoreBlocker??!1){o();return}const b=((f=t.getBlockers)==null?void 0:f.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&b.length&&x)for(const _ of b){const E=dh(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:E,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,l,u)=>{const f=e.state[Qc];l=US(f+1,l),s({task:()=>{t.pushState(o,l),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:l})},replace:(o,l,u)=>{const f=e.state[Qc];l=US(f,l),s({task:()=>{t.replaceState(o,l),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:l})},go:(o,l)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Qc]!==0,createHref:o=>t.createHref(o),block:o=>{var l;if(!t.setBlockers)return()=>{};const u=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...u,o]),()=>{var f,p;const h=((f=t.getBlockers)==null?void 0:f.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(b=>b!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function US(t,e){return e||(e={}),{...e,key:WB(),[Qc]:t}}function BB(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,l=P=>P,u=()=>dh(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let f=u(),p,h=!1,b=!1,x=!1,_=!1;const E=()=>f;let N,j;const C=()=>{N&&(W._ignoreSubscribers=!0,(N.isPush?e.history.pushState:e.history.replaceState)(N.state,"",N.href),W._ignoreSubscribers=!1,N=void 0,j=void 0,p=void 0)},R=(P,O,z)=>{const D=l(O);j||(p=f),f=dh(O,z),N={href:D,state:z,isPush:N?.isPush||P==="push"},j||(j=Promise.resolve().then(()=>C()))},q=P=>{f=u(),W.notify({type:P})},L=async()=>{if(b){b=!1;return}const P=u(),O=P.state[Qc]-f.state[Qc],z=O===1,D=O===-1,V=!z&&!D||h;h=!1;const U=V?"GO":D?"BACK":"FORWARD",B=V?{type:"GO",index:O}:{type:D?"BACK":"FORWARD"};if(x)x=!1;else{const G=s();if(typeof document<"u"&&G.length){for(const Z of G)if(await Z.blockerFn({currentLocation:f,nextLocation:P,action:U})){b=!0,e.history.go(1),W.notify(B);return}}}f=u(),W.notify(B)},M=P=>{if(_){_=!1;return}let O=!1;const z=s();if(typeof document<"u"&&z.length)for(const D of z){const V=D.enableBeforeUnload??!0;if(V===!0){O=!0;break}if(typeof V=="function"&&V()===!0){O=!0;break}}if(O)return P.preventDefault(),P.returnValue=""},W=$3({getLocation:E,getLength:()=>e.history.length,pushState:(P,O)=>R("push",P,O),replaceState:(P,O)=>R("replace",P,O),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>l(P),flush:C,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(_C,M,{capture:!0}),e.removeEventListener(wC,L)},onBlocked:()=>{p&&f!==p&&(f=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(_C,M,{capture:!0}),e.addEventListener(wC,L),e.history.pushState=function(...P){const O=n.apply(e.history,P);return W._ignoreSubscribers||q("PUSH"),O},e.history.replaceState=function(...P){const O=r.apply(e.history,P);return W._ignoreSubscribers||q("REPLACE"),O},W}function zB(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>US(o,void 0));return $3({getLocation:()=>dh(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function dh(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Qc]:0}}}function WB(){return(Math.random()+1).toString(36).substring(7)}var VB="Invariant failed";function Cs(t,e){if(!t)throw new Error(VB)}const Ww=H.createContext(null);function B3(){return typeof document>"u"?Ww:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ww,Ww)}function Lo(t){const e=H.useContext(B3());return t?.warn,e}var Vw={exports:{}},Uw={},Hw={exports:{}},Kw={};var SC;function UB(){if(SC)return Kw;SC=1;var t=Yh();function e(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(h,b){var x=b(),_=r({inst:{value:x,getSnapshot:b}}),E=_[0].inst,N=_[1];return s(function(){E.value=x,E.getSnapshot=b,u(E)&&N({inst:E})},[h,x,b]),i(function(){return u(E)&&N({inst:E}),h(function(){u(E)&&N({inst:E})})},[h]),o(x),x}function u(h){var b=h.getSnapshot;h=h.value;try{var x=b();return!n(h,x)}catch{return!0}}function f(h,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Kw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Kw}var EC;function HB(){return EC||(EC=1,Hw.exports=UB()),Hw.exports}var IC;function KB(){if(IC)return Uw;IC=1;var t=Yh(),e=HB();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Uw.useSyncExternalStoreWithSelector=function(f,p,h,b,x){var _=s(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=l(function(){function j(M){if(!C){if(C=!0,R=M,M=b(M),x!==void 0&&E.hasValue){var W=E.value;if(x(W,M))return q=W}return q=M}if(W=q,r(R,M))return W;var P=b(M);return x!==void 0&&x(W,P)?(R=M,W):(R=M,q=P)}var C=!1,R,q,L=h===void 0?null:h;return[function(){return j(p())},L===null?void 0:function(){return j(L())}]},[p,h,b,x]);var N=i(f,_[0],_[1]);return o(function(){E.hasValue=!0,E.value=N},[N]),u(N),N},Uw}var NC;function QB(){return NC||(NC=1,Vw.exports=KB()),Vw.exports}var z3=QB();const GB=uo(z3),_d=new WeakMap,hy=new WeakMap,sb={current:[]};let Qw=!1,Qp=0;const jp=new Set,qg=new Map;function W3(t){const e=Array.from(t).sort((n,r)=>n instanceof Sd&&n.options.deps.includes(r)?1:r instanceof Sd&&r.options.deps.includes(n)?-1:0);for(const n of e){if(sb.current.includes(n))continue;sb.current.push(n),n.recompute();const r=hy.get(n);if(r)for(const i of r){const s=_d.get(i);s&&W3(s)}}}function JB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function ZB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function V3(t){if(Qp>0&&!qg.has(t)&&qg.set(t,t.prevState),jp.add(t),!(Qp>0)&&!Qw)try{for(Qw=!0;jp.size>0;){const e=Array.from(jp);jp.clear();for(const n of e){const r=qg.get(n)??n.prevState;n.prevState=r,JB(n)}for(const n of e){const r=_d.get(n);r&&(sb.current.push(n),W3(r))}for(const n of e){const r=_d.get(n);if(r)for(const i of r)ZB(i)}}}finally{Qw=!1,sb.current=[],qg.clear()}}function Gw(t){Qp++;try{t()}finally{if(Qp--,Qp===0){const e=Array.from(jp)[0];e&&V3(e)}}}class HS{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),V3(this)},this.prevState=e,this.state=e,this.options=n}}class Sd{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof Sd&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof Sd)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof HS){let r=_d.get(n);r||(r=new Set,_d.set(n,r)),r.add(this);let i=hy.get(this);i||(i=new Set,hy.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof Sd)this.unregisterFromGraph(n.options.deps);else if(n instanceof HS){const r=_d.get(n);r&&r.delete(this);const i=hy.get(this);i&&i.delete(n)}}}function YB(t,e=n=>n){return z3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,XB)}function XB(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Jw,kC;function e4(){if(kC)return Jw;kC=1;const t={},e=t.hasOwnProperty,n=(P,O)=>{for(const z in P)e.call(P,z)&&O(z,P[z])},r=(P,O)=>(O&&n(O,(z,D)=>{P[z]=D}),P),i=(P,O)=>{const z=P.length;let D=-1;for(;++D<z;)O(P[D])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,O)=>{let z=P.toString(16);return O?z:z.toUpperCase()},l=t.toString,u=Array.isArray,f=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>l.call(P)=="[object Object]",h=P=>typeof P=="string"||l.call(P)=="[object String]",b=P=>typeof P=="number"||l.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",E=P=>l.call(P)=="[object Map]",N=P=>l.call(P)=="[object Set]",j={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},C=/[\\\b\f\n\r\t]/,R=/[0-9]/,q=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,L=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,M=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,W=(P,O)=>{const z=()=>{le=Z,++O.indentLevel,Z=O.indent.repeat(O.indentLevel)},D={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},V=O&&O.json;V&&(D.quotes="double",D.wrap=!0),O=r(D,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const U=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",B=O.compact,G=O.lowercaseHex;let Z=O.indent.repeat(O.indentLevel),le="";const ie=O.__inline1__,ne=O.__inline2__,oe=B?"":`
`;let te,ue=!0;const de=O.numbers=="binary",ye=O.numbers=="octal",we=O.numbers=="decimal",Ie=O.numbers=="hexadecimal";if(V&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(E(P))return P.size==0?"new Map()":(B||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+W(Array.from(P),O)+")");if(N(P))return P.size==0?"new Set()":"new Set("+W(Array.from(P),O)+")";if(f(P))return P.length==0?"Buffer.from([])":"Buffer.from("+W(Array.from(P),O)+")";if(u(P))return te=[],O.wrap=!0,ie&&(O.__inline1__=!1,O.__inline2__=!0),ne||z(),i(P,Re=>{ue=!1,ne&&(O.__inline2__=!1),te.push((B||ne?"":Z)+W(Re,O))}),ue?"[]":ne?"["+te.join(", ")+"]":"["+oe+te.join(","+oe)+oe+(B?"":le)+"]";if(b(P)||x(P)){if(V)return JSON.stringify(Number(P));let Re;if(we)Re=String(P);else if(Ie){let De=P.toString(16);G||(De=De.toUpperCase()),Re="0x"+De}else de?Re="0b"+P.toString(2):ye&&(Re="0o"+P.toString(8));return x(P)?Re+"n":Re}else return x(P)?V?JSON.stringify(Number(P)):P+"n":p(P)?(te=[],O.wrap=!0,z(),n(P,(Re,De)=>{ue=!1,te.push((B?"":Z)+W(Re,O)+":"+(B?"":" ")+W(De,O))}),ue?"{}":"{"+oe+te.join(","+oe)+oe+(B?"":le)+"}"):V?JSON.stringify(P)||"null":String(P)}const ze=O.escapeEverything?L:M;return te=P.replace(ze,(Re,De,Je,Xe,Ve,ct)=>{if(De){if(O.minimal)return De;const Rt=De.charCodeAt(0),Ut=De.charCodeAt(1);if(O.es6){const an=(Rt-55296)*1024+Ut-56320+65536;return"\\u{"+o(an,G)+"}"}return s(o(Rt,G))+s(o(Ut,G))}if(Je)return s(o(Je.charCodeAt(0),G));if(Re=="\0"&&!V&&!R.test(ct.charAt(Ve+1)))return"\\0";if(Xe)return Xe==U||O.escapeEverything?"\\"+Xe:Xe;if(C.test(Re))return j[Re];if(O.minimal&&!q.test(Re))return Re;const _t=o(Re.charCodeAt(0),G);return V||_t.length>2?s(_t):"\\x"+("00"+_t).slice(-2)}),U=="`"&&(te=te.replace(/\$\{/g,"\\${")),O.isScriptContext&&(te=te.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,V?"\\u003C!--":"\\x3C!--")),O.wrap&&(te=U+te+U),te};return W.version="3.0.2",Jw=W,Jw}e4();const Ns="__root__";function t4(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function CC(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function n4(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const l=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],CC(l)):i[r]=CC(l)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const r4=s4(JSON.parse),i4=o4(JSON.stringify,JSON.parse);function s4(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=n4(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function o4(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=t4(r).toString();return i?`?${i}`:""}}function Gp(t){return t[t.length-1]}function a4(t){return typeof t=="function"}function Bc(t,e){return a4(t)?t(e):t}function my(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function eo(t,e){if(t===e)return t;const n=e,r=TC(t)&&TC(n);if(r||Dl(t)&&Dl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),l=o.length,u=r?[]:{};let f=0;for(let p=0;p<l;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,f++):(u[h]=eo(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&f++)}return s===l&&f===s?t:u}return n}function Dl(t){if(!jC(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!jC(n)||!n.hasOwnProperty("isPrototypeOf"))}function jC(t){return Object.prototype.toString.call(t)==="[object Object]"}function TC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function RC(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function Ed(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Dl(t)&&Dl(e)){const r=n?.ignoreUndefined??!0,i=RC(t,r),s=RC(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>Ed(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!Ed(r,e[i],n)):!1}const Tp=typeof window<"u"?H.useLayoutEffect:H.useEffect;function ld(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Zw(t){const e=H.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function l4(t,e,n={},r={}){const i=H.useRef(typeof IntersectionObserver=="function"),s=H.useRef(null);return H.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function c4(t){const e=H.useRef(null);return H.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function La(t){return dv(t.filter(e=>e!==void 0).join("/"))}function dv(t){return t.replace(/\/{2,}/g,"/")}function hI(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function zc(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function u4(t){return zc(hI(t))}function ob(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function d4(t,e,n){return ob(t,n)===ob(e,n)}function f4({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=ab(t,e,i),n=ab(t,n,i);let l=$d(e);const u=$d(n);l.length>1&&((s=Gp(l))==null?void 0:s.value)==="/"&&l.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&l.push(p):l=[p]:p.value===".."?l.pop():p.value==="."||l.push(p)}),l.length>1&&(((o=Gp(l))==null?void 0:o.value)==="/"?r==="never"&&l.pop():r==="always"&&l.push({type:"pathname",value:"/"}));const f=La([t,...l.map(p=>p.value)]);return dv(f)}function $d(t){if(!t)return[];t=dv(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Ag({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=$d(t),o={};for(const[l,u]of Object.entries(e)){const f=typeof u=="string";["*","_splat"].includes(l)?o[l]=f?encodeURI(u):u:o[l]=f?p4(u,i):u}return La(s.map(l=>{if(l.type==="wildcard"){const u=o._splat;return n?`${l.value}${u??""}`:u}if(l.type==="param"){if(r){const u=o[l.value];return`${l.value}${u??""}`}return o[l.value.substring(1)]??"undefined"}return l.value}))}function p4(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function Pg(t,e,n){const r=h4(t,e,n);if(!(n.to&&!r))return r??{}}function ab(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function h4(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=ab(t,e,n.caseSensitive);const r=ab(t,`${n.to??"$"}`,n.caseSensitive),i=$d(e),s=$d(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const f=i[u],p=s[u],h=u>=i.length-1,b=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(La(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!f?.value)return!0;if(f){if(n.caseSensitive){if(p.value!==f.value)return!1}else if(p.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(p.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(f.value))}}if(!h&&b)return o["**"]=La(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function Xh(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function Oc(t){return!!t?.isRedirect}function Yw(t){return!!t?.isRedirect&&t.href}function mI(t){const e=t.errorComponent??fv;return d.jsx(m4,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?H.createElement(e,{error:n,reset:r}):t.children})}class m4 extends H.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function fv({error:t}){const[e,n]=H.useState(!1);return d.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[d.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),d.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),d.jsx("div",{style:{height:".25rem"}}),e?d.jsx("div",{children:d.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?d.jsx("code",{children:t.message}):null})}):null]})}function Ki(t){const e=Lo({warn:t?.router===void 0}),n=t?.router||e,r=H.useRef();return YB(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=eo(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function So(t){return!!t?.isNotFound}function g4(t){const e=Ki({select:n=>`not-found-${n.location.pathname}-${n.status}`});return d.jsx(mI,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(So(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(So(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function y4(){return d.jsx("p",{children:"Not Found"})}const Rp={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Dg.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Dl(i)){const s=Dg.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Rp.encode(n));if(Dl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Rp.encode(r)]));const e=Dg.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Dl(t)){const e=Dg.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Rp.decode(e)):Dl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Rp.decode(n)])):t}},Fg=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Dg=[Fg("undefined",t=>t===void 0,()=>0,()=>{}),Fg("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),Fg("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),Fg("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],U3=["component","errorComponent","pendingComponent","notFoundComponent"];function b4(t){var e;for(const n of U3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Xw(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new KS("Async validation not supported");if(n.issues)throw new KS(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function v4(t){return new x4(t)}class x4{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${u4(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?zB({initialEntries:[this.basepath||"/"]}):BB()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new HS(_4(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((l,u)=>{l.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const f=this.routesById[l.id];if(Cs(!f,`Duplicate routes found with id: ${String(l.id)}`),this.routesById[l.id]=l,!l.isRoot&&l.path){const h=zc(l.fullPath);(!this.routesByPath[h]||l.fullPath.endsWith("/"))&&(this.routesByPath[h]=l)}const p=l.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,l)=>{var u;if(o.isRoot||!o.path)return;const f=hI(o.fullPath),p=$d(f);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);i.push({child:o,trimmed:f,parsed:p,index:l,scores:h})}),this.flatRoutes=i.sort((o,l)=>{const u=Math.min(o.scores.length,l.scores.length);for(let f=0;f<u;f++)if(o.scores[f]!==l.scores[f])return l.scores[f]-o.scores[f];if(o.scores.length!==l.scores.length)return l.scores.length-o.scores.length;for(let f=0;f<u;f++)if(o.parsed[f].value!==l.parsed[f].value)return o.parsed[f].value>l.parsed[f].value?1:-1;return o.index-l.index}).map((o,l)=>(o.child.rank=l,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:f,hash:p,state:h})=>{const b=this.options.parseSearch(f),x=this.options.stringifySearch(b);return{pathname:u,searchStr:x,search:eo(n?.search,b),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:eo(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:l}=s.state;if(o&&(!l||l===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>f4({basepath:this.basepath,base:n,to:dv(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=zc(n.pathname),o=p=>Pg(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let l=r?.to!==void 0?this.routesByPath[r.to]:void 0;l?i=o(l):l=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=l||this.routesById[Ns];const f=[u];for(;u.parentRoute;)u=u.parentRoute,f.unshift(u);return{matchedRoutes:f,routeParams:i,foundRoute:l}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var l,u,f,p,h,b;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(D=>Pg(this.basepath,zc(D.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,E=_?.pathname||this.latestLocation.pathname;Cs(s.from==null||_!=null,"Could not find match for from: "+s.from);const N=(l=this.state.pendingMatches)!=null&&l.length?(u=Gp(this.state.pendingMatches))==null?void 0:u.search:((f=Gp(x))==null?void 0:f.search)||this.latestLocation.search,j=o?.matchedRoutes.filter(D=>x.find(V=>V.routeId===D.id));let C;if(s.to)C=this.resolvePathWithBase(E,`${s.to}`);else{const D=this.routesById[(p=j?.find(V=>{const U=Ag({path:V.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return La([this.basepath,U])===E}))==null?void 0:p.id];C=this.resolvePathWithBase(E,D?.to??E)}const R={...(h=Gp(x))==null?void 0:h.params};let q=(s.params??!0)===!0?R:{...R,...Bc(s.params,R)};Object.keys(q).length>0&&o?.matchedRoutes.map(D=>{var V;return((V=D.options.params)==null?void 0:V.stringify)??D.options.stringifyParams}).filter(Boolean).forEach(D=>{q={...q,...D(q)}}),C=Ag({path:C,params:q??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let L=N;if(n._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let D={};o?.matchedRoutes.forEach(V=>{try{V.options.validateSearch&&(D={...D,...Xw(V.options.validateSearch,{...D,...L})??{}})}catch{}}),L=D}L=(D=>{const V=o?.matchedRoutes.reduce((G,Z)=>{var le;const ie=[];if("search"in Z.options)(le=Z.options.search)!=null&&le.middlewares&&ie.push(...Z.options.search.middlewares);else if(Z.options.preSearchFilters||Z.options.postSearchFilters){const ne=({search:oe,next:te})=>{let ue=oe;"preSearchFilters"in Z.options&&Z.options.preSearchFilters&&(ue=Z.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=te(ue);return"postSearchFilters"in Z.options&&Z.options.postSearchFilters?Z.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};ie.push(ne)}if(n._includeValidateSearch&&Z.options.validateSearch){const ne=({search:oe,next:te})=>{try{const ue=te(oe);return{...ue,...Xw(Z.options.validateSearch,ue)??{}}}catch{}};ie.push(ne)}return G.concat(ie)},[])??[],U=({search:G})=>s.search?s.search===!0?G:Bc(s.search,G):{};V.push(U);const B=(G,Z)=>{if(G>=V.length)return Z;const le=V[G];return le({search:Z,next:ne=>B(G+1,ne)})};return B(0,D)})(L),L=eo(N,L);const W=this.options.stringifySearch(L),P=s.hash===!0?this.latestLocation.hash:s.hash?Bc(s.hash,this.latestLocation.hash):void 0,O=P?`#${P}`:"";let z=s.state===!0?this.latestLocation.state:s.state?Bc(s.state,this.latestLocation.state):{};return z=eo(this.latestLocation.state,z),{pathname:C,search:L,searchStr:W,state:z,hash:P??"",href:`${C}${W}${O}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var l;const u=r(s);let f=o?r(o):void 0;if(!f){let b={};const x=(l=this.options.routeMasks)==null?void 0:l.find(_=>{const E=Pg(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return E?(b=E,!0):!1});if(x){const{from:_,...E}=x;o={...my(n,["from"]),...E,params:b},f=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(f){const b=this.getMatchedRoutes(f,o),x=r(o,b);h.maskedLocation=x}return h};return n.mask?i(n,{...my(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=Ed(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,l=this.commitLocationPromise;if(this.commitLocationPromise=ld(()=>{l?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:f,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:l,...u}={})=>{if(l){const p=this.history.location.state.__TSR_index,h=dh(l,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const f=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var l;try{const u=this.latestLocation,f=this.state.resolvedLocation,p=f.href!==u.href,h=f.pathname!==u.pathname;this.cancelMatches();let b;Gw(()=>{b=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:b,cachedMatches:x.cachedMatches.filter(_=>!b.find(E=>E.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:b,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,E;Gw(()=>{this.__store.setState(N=>{const j=N.matches,C=N.pendingMatches||N.matches;return x=j.filter(R=>!C.find(q=>q.id===R.id)),_=C.filter(R=>!j.find(q=>q.id===R.id)),E=j.filter(R=>C.find(q=>q.id===R.id)),{...N,isLoading:!1,loadedAt:Date.now(),matches:C,pendingMatches:void 0,cachedMatches:[...N.cachedMatches,...x.filter(R=>R.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[E,"onStay"]].forEach(([N,j])=>{N.forEach(C=>{var R,q;(q=(R=this.looseRoutesById[C.routeId].options)[j])==null||q.call(R,C)})})})}})}catch(u){Yw(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):So(u)&&(i=u),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:i?404:f.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),l=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),f=o?"pendingMatches":l?"matches":u?"cachedMatches":"";return f&&this.__store.setState(p=>{var h;return{...p,[f]:(h=p[f])==null?void 0:h.map(b=>b.id===n?s=r(b):b)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:l})=>{let u,f=!1;const p=async()=>{f||(f=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const b=(x,_)=>{var E,N,j;if(Yw(_)&&!_.reloadDocument)throw _;if(Oc(_)||So(_)){if(o(x.id,C=>({...C,status:Oc(_)?"redirected":So(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(E=x.beforeLoadPromise)==null||E.resolve(),(N=x.loaderPromise)==null||N.resolve(),(j=x.loadPromise)==null||j.resolve(),Oc(_))throw f=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(So(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var E,N,j;try{const C=(L,M,W)=>{var P,O;const{id:z,routeId:D}=r[L],V=this.looseRoutesById[D];if(M instanceof Promise)throw M;M.routerCode=W,u=u??L,b(this.getMatch(z),M);try{(O=(P=V.options).onError)==null||O.call(P,M)}catch(U){M=U,b(this.getMatch(z),M)}o(z,U=>{var B,G;return(B=U.beforeLoadPromise)==null||B.resolve(),(G=U.loadPromise)==null||G.resolve(),{...U,error:M,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[L,{id:M,routeId:W}]of r.entries()){const P=this.getMatch(M),O=(E=r[L-1])==null?void 0:E.id,z=this.looseRoutesById[W],D=z.options.pendingMs??this.options.defaultPendingMs,V=!!(s&&!this.isServer&&!h(M)&&(z.options.loader||z.options.beforeLoad)&&typeof D=="number"&&D!==1/0&&(z.options.pendingComponent??this.options.defaultPendingComponent));let U=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(V&&setTimeout(()=>{try{p()}catch{}},D),await P.beforeLoadPromise,U=this.getMatch(M).status!=="success"),U){try{o(M,Ie=>({...Ie,loadPromise:ld(()=>{var ze;(ze=Ie.loadPromise)==null||ze.resolve()}),beforeLoadPromise:ld()}));const B=new AbortController;let G;V&&(G=setTimeout(()=>{try{p()}catch{}},D));const{paramsError:Z,searchError:le}=this.getMatch(M);Z&&C(L,Z,"PARSE_PARAMS"),le&&C(L,le,"VALIDATE_SEARCH");const ie=()=>O?this.getMatch(O).context:this.options.context??{};o(M,Ie=>({...Ie,isFetching:"beforeLoad",fetchCount:Ie.fetchCount+1,abortController:B,pendingTimeout:G,context:{...ie(),...Ie.__routeContext}}));const{search:ne,params:oe,context:te,cause:ue}=this.getMatch(M),de=h(M),ye={search:ne,abortController:B,params:oe,preload:de,context:te,location:n,navigate:Ie=>this.navigate({...Ie,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ue,matches:r};let we=await ((j=(N=z.options).beforeLoad)==null?void 0:j.call(N,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch(M)})),(Oc(we)||So(we))&&C(L,we,"BEFORE_LOAD"),o(M,Ie=>({...Ie,__beforeLoadContext:we,context:{...ie(),...Ie.__routeContext,...we},abortController:B}))}catch(B){C(L,B,"BEFORE_LOAD")}o(M,B=>{var G;return(G=B.beforeLoadPromise)==null||G.resolve(),{...B,beforeLoadPromise:void 0,isFetching:!1}})}}const R=r.slice(0,u),q=[];R.forEach(({id:L,routeId:M},W)=>{q.push((async()=>{const{loaderPromise:P}=this.getMatch(L);let O=!1,z=!1;if(P){await P;const D=this.getMatch(L);D.error&&b(D,D.error)}else{const D=q[W-1],V=this.looseRoutesById[M],U=()=>{const{params:ue,loaderDeps:de,abortController:ye,context:we,cause:Ie}=this.getMatch(L),ze=h(L);return{params:ue,deps:de,preload:!!ze,parentMatchPromise:D,abortController:ye,context:we,location:n,navigate:Re=>this.navigate({...Re,_fromLocation:n}),cause:ze?"preload":Ie,route:V}},B=Date.now()-this.getMatch(L).updatedAt,G=h(L),Z=G?V.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:V.options.staleTime??this.options.defaultStaleTime??0,le=V.options.shouldReload,ie=typeof le=="function"?le(U()):le;o(L,ue=>({...ue,loaderPromise:ld(),preload:!!G&&!this.state.matches.find(de=>de.id===L)}));const ne=async()=>{var ue,de,ye,we,Ie,ze,Re,De;try{const Je=async()=>{const Xe=this.getMatch(L);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(V),o(L,an=>({...an,isFetching:"loader"}));let Xe=await ((de=(ue=V.options).loader)==null?void 0:de.call(ue,U()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(L)})),b(this.getMatch(L),Xe),await V._lazyPromise,await Je();const Ve=(we=(ye=V.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(L),params:this.getMatch(L).params,loaderData:Xe}),ct=Ve?.meta,_t=Ve?.links,Rt=Ve?.scripts,Ut=(ze=(Ie=V.options).headers)==null?void 0:ze.call(Ie,{loaderData:Xe});o(L,an=>({...an,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ct,links:_t,scripts:Rt,headers:Ut}))}catch(Xe){let Ve=Xe;await Je(),b(this.getMatch(L),Xe);try{(De=(Re=V.options).onError)==null||De.call(Re,Xe)}catch(ct){Ve=ct,b(this.getMatch(L),ct)}o(L,ct=>({...ct,error:Ve,status:"error",isFetching:!1}))}await V._componentsPromise}catch(Je){o(L,Xe=>({...Xe,loaderPromise:void 0})),b(this.getMatch(L),Je)}},{status:oe,invalid:te}=this.getMatch(L);O=oe==="success"&&(te||(ie??B>Z)),G&&V.options.preload===!1||(O&&!l?(z=!0,(async()=>{try{await ne();const{loaderPromise:ue,loadPromise:de}=this.getMatch(L);ue?.resolve(),de?.resolve(),o(L,ye=>({...ye,loaderPromise:void 0}))}catch(ue){Yw(ue)&&await this.navigate(ue)}})()):(oe!=="success"||O&&l)&&await ne())}if(!z){const{loaderPromise:D,loadPromise:V}=this.getMatch(L);D?.resolve(),V?.resolve()}return o(L,D=>({...D,isFetching:z?D.isFetching:!1,loaderPromise:z?D.loaderPromise:void 0,invalid:!1})),this.getMatch(L)})())}),await Promise.all(q),x()}catch(C){_(C)}})()}),await p()}catch(x){if(Oc(x)||So(x))throw So(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(U3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...s,...this.state.cachedMatches.map(l=>l.id)]);Gw(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,l]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(l,u)=>{s.has(l)?i=i.map(f=>f.id===l?u(f):f):this.updateMatch(l,u)}}),i}catch(l){if(Oc(l))return l.reloadDocument?void 0:await this.preloadRoute({...l,_fromLocation:r});console.error(l);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const l=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=Pg(this.basepath,l.pathname,{...r,to:s.pathname});return!u||n.params&&!Ed(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?Ed(l.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??S4;return{state:{dehydratedMatches:this.state.matches.map(i=>({...my(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Cs(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,l=this.matchRoutes(this.state.location).map(u=>{const f=o.dehydratedMatches.find(p=>p.id===u.id);return Cs(f,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...f}});this.__store.setState(u=>({...u,matches:l})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[Ns]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Ns];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Ns;)o=o.parentRoute,Cs(o);const l=s[o.id];Cs(l,"Could not find match for route: "+o.id),i(l.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??i4,parseSearch:e.parseSearch??r4,transformer:e.transformer??Rp}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:zc(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const b=i[h];if(b.children)return b.id}return Ns}})(),u=i.map(h=>{var b;let x;const _=((b=h.options.params)==null?void 0:b.parse)??h.options.parseParams;if(_)try{const E=_(s);Object.assign(s,E)}catch(E){if(x=new w4(E.message,{cause:E}),n?.throwOnError)throw x;return x}}),f=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,b)=>{var x,_,E,N;const j=f[b-1],[C,R]=(()=>{const U=j?.search??e.search;try{const B=Xw(h.options.validateSearch,U)??{};return[{...U,...B},void 0]}catch(B){const G=new KS(B.message,{cause:B});if(n?.throwOnError)throw G;return[U,G]}})(),q=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:C}))??"",L=q?JSON.stringify(q):"",M=Ag({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),W=Ag({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+L,P=this.getMatch(W),O=this.state.matches.find(U=>U.routeId===h.id),z=O?"stay":"enter";let D;if(P)D={...P,cause:z,params:O?eo(O.params,s):s,search:eo(O?O.search:P.search,C)};else{const U=h.options.loader||h.options.beforeLoad||h.lazyFn||b4(h)?"pending":"success";D={id:W,index:b,routeId:h.id,params:O?eo(O.params,s):s,pathname:La([this.basepath,M]),updatedAt:Date.now(),search:O?eo(O.search,C):C,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:u[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:z,loaderDeps:O?eo(O.loaderDeps,q):q,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:ld(),fullPath:h.fullPath}}D.status==="success"&&(D.headers=(N=(E=h.options).headers)==null?void 0:N.call(E,{loaderData:D.loaderData})),n?.preload||(D.globalNotFound=l===h.id),D.searchError=R;const V=p(j);D.context={...V,...D.__routeContext,...D.__beforeLoadContext},f.push(D)}),f.forEach((h,b)=>{var x,_,E,N;const j=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const q=f[b-1],L=p(q),M={deps:h.loaderDeps,params:h.params,context:L,location:e,navigate:W=>this.navigate({...W,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:f};h.__routeContext=((_=(x=j.options).context)==null?void 0:_.call(x,M))??{},h.context={...L,...h.__routeContext,...h.__beforeLoadContext}}const R=(N=(E=j.options).head)==null?void 0:N.call(E,{matches:f,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=R?.links,h.scripts=R?.scripts,h.meta=R?.meta}),f}}class KS extends Error{}class w4 extends Error{}function _4(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function S4(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function OC(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function qC(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const pv=H.createContext(void 0),E4=H.createContext(void 0);function Ul(t){const e=H.useContext(t.from?E4:pv);return Ki({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Cs(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function li(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function I4(t){const{select:e,...n}=t;return Ul({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function en(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function N4(t){return Ul({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function nc(t){const{navigate:e}=Lo();return H.useCallback(n=>e({...n}),[e])}let H3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Ns:Cs(this.parentRoute);let l=o?Ns:s.path;l&&l!=="/"&&(l=hI(l));const u=s?.id||l;let f=o?Ns:La([this.parentRoute.id===Ns?"":this.parentRoute.id,u]);l===Ns&&(l="/"),f!==Ns&&(f=La(["/",f]));const p=f===Ns?"/":La([this.parentRoute.fullPath,l]);this._path=l,this._id=f,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Ul({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Ul({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>N4({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>en({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>I4({...n,from:this.id}),this.useLoaderData=n=>li({...n,from:this.id}),this.useNavigate=()=>nc({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Cs(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function k4(t){return new H3(t)}function C4(){return t=>T4(t)}class j4 extends H3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function T4(t){return new j4(t)}function Dt(t){return new R4(t,{silent:!0}).createRoute}class R4{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=k4(r);return i.isRoot=!1,i},this.silent=n?.silent}}function gy(t){return d.jsx(d.Fragment,{children:t.children})}function K3(t,e,n){return e.options.notFoundComponent?d.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?d.jsx(t.options.defaultNotFoundComponent,{data:n}):d.jsx(y4,{})}const Q3=H.memo(function({matchId:e}){var n,r;const i=Lo(),s=Ki({select:N=>{var j;return(j=N.matches.find(C=>C.id===e))==null?void 0:j.routeId}});Cs(s);const o=i.routesById[s],l=o.options.pendingComponent??i.options.defaultPendingComponent,u=l?d.jsx(l,{}):null,f=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,b=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??l??((r=o.options.errorComponent)==null?void 0:r.preload))?H.Suspense:gy,x=f?mI:gy,_=h?g4:gy,E=Ki({select:N=>N.loadedAt});return d.jsx(pv.Provider,{value:e,children:d.jsx(b,{fallback:u,children:d.jsx(x,{getResetKey:()=>E,errorComponent:f||fv,onCatch:(N,j)=>{if(So(N))throw N;p?.(N,j)},children:d.jsx(_,{fallback:N=>{if(!h||N.routeId&&N.routeId!==s||!N.routeId&&!o.isRoot)throw N;return H.createElement(h,N)},children:d.jsx(O4,{matchId:e})})})})})}),O4=H.memo(function({matchId:e}){var n,r,i,s,o;const l=Lo(),{match:u,matchIndex:f,routeId:p}=Ki({select:_=>{const E=_.matches.findIndex(C=>C.id===e),N=_.matches[E];return{routeId:N.routeId,matchIndex:E,match:my(N,["id","status","error"])}},structuralSharing:!0}),h=l.routesById[p],b=H.useMemo(()=>{const _=h.options.component??l.options.defaultComponent;return _?d.jsx(_,{}):d.jsx(fo,{})},[h.options.component,l.options.defaultComponent]),x=(h.options.errorComponent??l.options.defaultErrorComponent)||fv;if(u.status==="notFound"){let _;return OC(u.error)?_=(((n=l.options.errorSerializer)==null?void 0:n.deserialize)??qC)(u.error.data):_=u.error,Cs(So(_)),K3(l,h,_)}if(u.status==="redirected")throw Cs(Oc(u.error)),(r=l.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(l.isServer)return d.jsx(x,{error:u.error,info:{componentStack:""}});throw OC(u.error)?(((i=l.options.errorSerializer)==null?void 0:i.deserialize)??qC)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??l.options.defaultPendingMinMs;if(_&&!((s=l.getMatch(u.id))!=null&&s.minPendingPromise)&&!l.isServer){const E=ld();Promise.resolve().then(()=>{l.updateMatch(u.id,N=>({...N,minPendingPromise:E}))}),setTimeout(()=>{E.resolve(),l.updateMatch(u.id,N=>({...N,minPendingPromise:void 0}))},_)}throw(o=l.getMatch(u.id))==null?void 0:o.loadPromise}return d.jsxs(d.Fragment,{children:[b,l.AfterEachMatch?d.jsx(l.AfterEachMatch,{match:u,matchIndex:f}):null]})}),fo=H.memo(function(){const e=Lo(),n=H.useContext(pv),r=Ki({select:f=>{var p;return(p=f.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=Ki({select:f=>{const h=f.matches.find(b=>b.id===n);return Cs(h),h.globalNotFound}}),o=Ki({select:f=>{var p;const h=f.matches,b=h.findIndex(x=>x.id===n);return(p=h[b+1])==null?void 0:p.id}});if(s)return K3(e,i,void 0);if(!o)return null;const l=d.jsx(Q3,{matchId:o}),u=e.options.defaultPendingComponent?d.jsx(e.options.defaultPendingComponent,{}):null;return n===Ns?d.jsx(H.Suspense,{fallback:u,children:l}):l});var e_={exports:{}},as={},t_={exports:{}},n_={};var AC;function q4(){return AC||(AC=1,function(t){function e(ie,ne){var oe=ie.length;ie.push(ne);e:for(;0<oe;){var te=oe-1>>>1,ue=ie[te];if(0<i(ue,ne))ie[te]=ne,ie[oe]=ue,oe=te;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],oe=ie.pop();if(oe!==ne){ie[0]=oe;e:for(var te=0,ue=ie.length,de=ue>>>1;te<de;){var ye=2*(te+1)-1,we=ie[ye],Ie=ye+1,ze=ie[Ie];if(0>i(we,oe))Ie<ue&&0>i(ze,we)?(ie[te]=ze,ie[Ie]=oe,te=Ie):(ie[te]=we,ie[ye]=oe,te=ye);else if(Ie<ue&&0>i(ze,oe))ie[te]=ze,ie[Ie]=oe,te=Ie;else break e}}return ne}function i(ie,ne){var oe=ie.sortIndex-ne.sortIndex;return oe!==0?oe:ie.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,b=3,x=!1,_=!1,E=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ie){for(var ne=n(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=ie)r(f),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(f)}}function q(ie){if(E=!1,R(ie),!_)if(n(u)!==null)_=!0,Z(L);else{var ne=n(f);ne!==null&&le(q,ne.startTime-ie)}}function L(ie,ne){_=!1,E&&(E=!1,j(P),P=-1),x=!0;var oe=b;try{for(R(ne),h=n(u);h!==null&&(!(h.expirationTime>ne)||ie&&!D());){var te=h.callback;if(typeof te=="function"){h.callback=null,b=h.priorityLevel;var ue=te(h.expirationTime<=ne);ne=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(u)&&r(u),R(ne)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(f);ye!==null&&le(q,ye.startTime-ne),de=!1}return de}finally{h=null,b=oe,x=!1}}var M=!1,W=null,P=-1,O=5,z=-1;function D(){return!(t.unstable_now()-z<O)}function V(){if(W!==null){var ie=t.unstable_now();z=ie;var ne=!0;try{ne=W(!0,ie)}finally{ne?U():(M=!1,W=null)}}else M=!1}var U;if(typeof C=="function")U=function(){C(V)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=V,U=function(){G.postMessage(null)}}else U=function(){N(V,0)};function Z(ie){W=ie,M||(M=!0,U())}function le(ie,ne){P=N(function(){ie(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,Z(L))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ie){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var oe=b;b=ne;try{return ie()}finally{b=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var oe=b;b=ie;try{return ne()}finally{b=oe}},t.unstable_scheduleCallback=function(ie,ne,oe){var te=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?te+oe:te):oe=te,ie){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=0x3fffffff;break;case 4:ue=1e4;break;default:ue=5e3}return ue=oe+ue,ie={id:p++,callback:ne,priorityLevel:ie,startTime:oe,expirationTime:ue,sortIndex:-1},oe>te?(ie.sortIndex=oe,e(f,ie),n(u)===null&&ie===n(f)&&(E?(j(P),P=-1):E=!0,le(q,oe-te))):(ie.sortIndex=ue,e(u,ie),_||x||(_=!0,Z(L))),ie},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(ie){var ne=b;return function(){var oe=b;b=ne;try{return ie.apply(this,arguments)}finally{b=oe}}}}(n_)),n_}var PC;function A4(){return PC||(PC=1,t_.exports=q4()),t_.exports}var FC;function P4(){if(FC)return as;FC=1;var t=Yh(),e=A4();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function b(a){return u.call(h,a)?!0:u.call(p,a)?!1:f.test(a)?h[a]=!0:(p[a]=!0,!1)}function x(a,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function _(a,c,m,w){if(c===null||typeof c>"u"||x(a,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,m,w,k,A,Y){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=A,this.removeEmptyString=Y}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){N[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];N[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){N[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){N[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){N[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){N[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){N[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){N[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){N[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(j,C);N[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(j,C);N[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(j,C);N[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){N[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),N.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){N[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,c,m,w){var k=N.hasOwnProperty(c)?N[c]:null;(k!==null?k.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,k,w)&&(m=null),w||k===null?b(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):k.mustUseProperty?a[k.propertyName]=m===null?k.type===3?!1:"":m:(c=k.attributeName,w=k.attributeNamespace,m===null?a.removeAttribute(c):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,w?a.setAttributeNS(w,c,m):a.setAttribute(c,m))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var oe=Object.assign,te;function ue(a){if(te===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);te=c&&c[1]||""}return`
`+te+a}var de=!1;function ye(a,c){if(!a||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(a,[],c)}else{try{c.call()}catch(He){w=He}a.call(c.prototype)}else{try{throw Error()}catch(He){w=He}a()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var k=He.stack.split(`
`),A=w.stack.split(`
`),Y=k.length-1,ge=A.length-1;1<=Y&&0<=ge&&k[Y]!==A[ge];)ge--;for(;1<=Y&&0<=ge;Y--,ge--)if(k[Y]!==A[ge]){if(Y!==1||ge!==1)do if(Y--,ge--,0>ge||k[Y]!==A[ge]){var Se=`
`+k[Y].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=Y&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ue(a):""}function we(a){switch(a.tag){case 5:return ue(a.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return a=ye(a.type,!1),a;case 11:return a=ye(a.type.render,!1),a;case 1:return a=ye(a.type,!0),a;default:return""}}function Ie(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case W:return"Fragment";case M:return"Portal";case O:return"Profiler";case P:return"StrictMode";case U:return"Suspense";case B:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case D:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case V:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case G:return c=a.displayName||null,c!==null?c:Ie(a.type)||"Memo";case Z:c=a._payload,a=a._init;try{return Ie(a(c))}catch{}}return null}function ze(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Re(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function De(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(a){var c=De(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,A=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return k.call(this)},set:function(Y){w=""+Y,A.call(this,Y)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(Y){w=""+Y},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Xe(a){a._valueTracker||(a._valueTracker=Je(a))}function Ve(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return a&&(w=De(a)?a.checked?"true":"false":a.value),a=w,a!==m?(c.setValue(a),!0):!1}function ct(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function _t(a,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function Rt(a,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Re(c.value!=null?c.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ut(a,c){c=c.checked,c!=null&&R(a,"checked",c,!1)}function an(a,c){Ut(a,c);var m=Re(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?be(a,c.type,m):c.hasOwnProperty("defaultValue")&&be(a,c.type,Re(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function xe(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function be(a,c,m){(c!=="number"||ct(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var Ne=Array.isArray;function Ae(a,c,m,w){if(a=a.options,c){c={};for(var k=0;k<m.length;k++)c["$"+m[k]]=!0;for(m=0;m<a.length;m++)k=c.hasOwnProperty("$"+a[m].value),a[m].selected!==k&&(a[m].selected=k),k&&w&&(a[m].defaultSelected=!0)}else{for(m=""+Re(m),c=null,k=0;k<a.length;k++){if(a[k].value===m){a[k].selected=!0,w&&(a[k].defaultSelected=!0);return}c!==null||a[k].disabled||(c=a[k])}c!==null&&(c.selected=!0)}}function Ue(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(Ne(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:Re(m)}}function Me(a,c){var m=Re(c.value),w=Re(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function ut(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var bn,lr=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,k){MSApp.execUnsafeLocalFunction(function(){return a(c,m,w,k)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(bn=bn||document.createElement("div"),bn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=bn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Ln(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Di=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(a){Di.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Kr[c]=Kr[a]})});function _r(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Kr.hasOwnProperty(a)&&Kr[a]?(""+c).trim():c+"px"}function Jt(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,k=_r(m,c[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,k):a[m]=k}}var Zi=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yi(a,c){if(c){if(Zi[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Xi(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var po=null;function pa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var uc=null,zs=null,K=null;function bu(a){if(a=Yf(a)){if(typeof uc!="function")throw Error(n(280));var c=a.stateNode;c&&(c=Km(c),uc(a.stateNode,a.type,c))}}function hn(a){zs?K?K.push(a):K=[a]:zs=a}function vu(){if(zs){var a=zs,c=K;if(K=zs=null,bu(a),c)for(a=0;a<c.length;a++)bu(c[a])}}function xu(a,c){return a(c)}function wu(){}var dc=!1;function ha(a,c,m){if(dc)return a(c,m);dc=!0;try{return xu(a,c,m)}finally{dc=!1,(zs!==null||K!==null)&&(wu(),vu())}}function es(a,c){var m=a.stateNode;if(m===null)return null;var w=Km(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var fc=!1;if(l)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){fc=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{fc=!1}function If(a,c,m,w,k,A,Y,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var ga=!1,Ws=null,Ya=!1,Vs=null,Nf={onError:function(a){ga=!0,Ws=a}};function kf(a,c,m,w,k,A,Y,ge,Se){ga=!1,Ws=null,If.apply(Nf,arguments)}function _u(a,c,m,w,k,A,Y,ge,Se){if(kf.apply(this,arguments),ga){if(ga){var He=Ws;ga=!1,Ws=null}else throw Error(n(198));Ya||(Ya=!0,Vs=He)}}function Us(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function Su(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Eu(a){if(Us(a)!==a)throw Error(n(188))}function Cf(a){var c=a.alternate;if(!c){if(c=Us(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,w=c;;){var k=m.return;if(k===null)break;var A=k.alternate;if(A===null){if(w=k.return,w!==null){m=w;continue}break}if(k.child===A.child){for(A=k.child;A;){if(A===m)return Eu(k),a;if(A===w)return Eu(k),c;A=A.sibling}throw Error(n(188))}if(m.return!==w.return)m=k,w=A;else{for(var Y=!1,ge=k.child;ge;){if(ge===m){Y=!0,m=k,w=A;break}if(ge===w){Y=!0,w=k,m=A;break}ge=ge.sibling}if(!Y){for(ge=A.child;ge;){if(ge===m){Y=!0,m=A,w=k;break}if(ge===w){Y=!0,w=A,m=k;break}ge=ge.sibling}if(!Y)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function Iu(a){return a=Cf(a),a!==null?Nu(a):null}function Nu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Nu(a);if(c!==null)return c;a=a.sibling}return null}var ku=e.unstable_scheduleCallback,pc=e.unstable_cancelCallback,Cu=e.unstable_shouldYield,jf=e.unstable_requestPaint,cr=e.unstable_now,Tf=e.unstable_getCurrentPriorityLevel,hc=e.unstable_ImmediatePriority,ju=e.unstable_UserBlockingPriority,Xa=e.unstable_NormalPriority,Rf=e.unstable_LowPriority,mc=e.unstable_IdlePriority,el=null,ts=null;function Of(a){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(el,a,void 0,(a.current.flags&128)===128)}catch{}}var _i=Math.clz32?Math.clz32:Pf,qf=Math.log,Af=Math.LN2;function Pf(a){return a>>>=0,a===0?32:31-(qf(a)/Af|0)|0}var Wo=64,tl=4194304;function Li(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return a&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return a}}function nl(a,c){var m=a.pendingLanes;if(m===0)return 0;var w=0,k=a.suspendedLanes,A=a.pingedLanes,Y=m&0xfffffff;if(Y!==0){var ge=Y&~k;ge!==0?w=Li(ge):(A&=Y,A!==0&&(w=Li(A)))}else Y=m&~k,Y!==0?w=Li(Y):A!==0&&(w=Li(A));if(w===0)return 0;if(c!==0&&c!==w&&!(c&k)&&(k=w&-w,A=c&-c,k>=A||k===16&&(A&4194240)!==0))return c;if(w&4&&(w|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)m=31-_i(c),k=1<<m,w|=a[m],c&=~k;return w}function hx(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function mx(a,c){for(var m=a.suspendedLanes,w=a.pingedLanes,k=a.expirationTimes,A=a.pendingLanes;0<A;){var Y=31-_i(A),ge=1<<Y,Se=k[Y];Se===-1?(!(ge&m)||ge&w)&&(k[Y]=hx(ge,c)):Se<=c&&(a.expiredLanes|=ge),A&=~ge}}function Ff(a){return a=a.pendingLanes&-0x40000001,a!==0?a:a&0x40000000?0x40000000:0}function Dm(){var a=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),a}function Df(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function gc(a,c,m){a.pendingLanes|=c,c!==0x20000000&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-_i(c),a[c]=m}function gx(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var k=31-_i(m),A=1<<k;c[k]=0,w[k]=-1,a[k]=-1,m&=~A}}function Lf(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var w=31-_i(m),k=1<<w;k&c|a[w]&c&&(a[w]|=c),m&=~k}}var Mn=0;function Lm(a){return a&=-a,1<a?4<a?a&0xfffffff?16:0x20000000:4:1}var Mf,he,$f,yc,Bf,g=!1,y=[],S=null,I=null,T=null,$=new Map,fe=new Map,me=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(a,c){switch(a){case"focusin":case"focusout":S=null;break;case"dragenter":case"dragleave":I=null;break;case"mouseover":case"mouseout":T=null;break;case"pointerover":case"pointerout":$.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(a,c,m,w,k,A){return a===null||a.nativeEvent!==A?(a={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:A,targetContainers:[k]},c!==null&&(c=Yf(c),c!==null&&he(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),a)}function mt(a,c,m,w,k){switch(c){case"focusin":return S=at(S,a,c,m,w,k),!0;case"dragenter":return I=at(I,a,c,m,w,k),!0;case"mouseover":return T=at(T,a,c,m,w,k),!0;case"pointerover":var A=k.pointerId;return $.set(A,at($.get(A)||null,a,c,m,w,k)),!0;case"gotpointercapture":return A=k.pointerId,fe.set(A,at(fe.get(A)||null,a,c,m,w,k)),!0}return!1}function Be(a){var c=bc(a.target);if(c!==null){var m=Us(c);if(m!==null){if(c=m.tag,c===13){if(c=Su(m),c!==null){a.blockedOn=c,Bf(a.priority,function(){$f(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Oe(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=ce(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);po=w,m.target.dispatchEvent(w),po=null}else return c=Yf(m),c!==null&&he(c),a.blockedOn=m,!1;c.shift()}return!0}function et(a,c,m){Oe(a)&&m.delete(c)}function ve(){g=!1,S!==null&&Oe(S)&&(S=null),I!==null&&Oe(I)&&(I=null),T!==null&&Oe(T)&&(T=null),$.forEach(et),fe.forEach(et)}function ke(a,c){a.blockedOn===c&&(a.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ve)))}function je(a){function c(k){return ke(k,a)}if(0<y.length){ke(y[0],a);for(var m=1;m<y.length;m++){var w=y[m];w.blockedOn===a&&(w.blockedOn=null)}}for(S!==null&&ke(S,a),I!==null&&ke(I,a),T!==null&&ke(T,a),$.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=q.ReactCurrentBatchConfig,Ge=!0;function Te(a,c,m,w){var k=Mn,A=Ze.transition;Ze.transition=null;try{Mn=1,St(a,c,m,w)}finally{Mn=k,Ze.transition=A}}function Qe(a,c,m,w){var k=Mn,A=Ze.transition;Ze.transition=null;try{Mn=4,St(a,c,m,w)}finally{Mn=k,Ze.transition=A}}function St(a,c,m,w){if(Ge){var k=ce(a,c,m,w);if(k===null)Tx(a,c,w,ee,m),tt(a,w);else if(mt(k,a,c,m,w))w.stopPropagation();else if(tt(a,w),c&4&&-1<Ke.indexOf(a)){for(;k!==null;){var A=Yf(k);if(A!==null&&Mf(A),A=ce(a,c,m,w),A===null&&Tx(a,c,w,ee,m),A===k)break;k=A}k!==null&&w.stopPropagation()}else Tx(a,c,w,null,m)}}var ee=null;function ce(a,c,m,w){if(ee=null,a=pa(w),a=bc(a),a!==null)if(c=Us(a),c===null)a=null;else if(m=c.tag,m===13){if(a=Su(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return ee=a,null}function Ee(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tf()){case hc:return 1;case ju:return 4;case Xa:case Rf:return 16;case mc:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function Q(){if(pe)return pe;var a,c=ae,m=c.length,w,k="value"in st?st.value:st.textContent,A=k.length;for(a=0;a<m&&c[a]===k[a];a++);var Y=m-a;for(w=1;w<=Y&&c[m-w]===k[A-w];w++);return pe=k.slice(a,1<w?1-w:void 0)}function re(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function se(){return!0}function Le(){return!1}function it(a){function c(m,w,k,A,Y){this._reactName=m,this._targetInst=k,this.type=w,this.nativeEvent=A,this.target=Y,this.currentTarget=null;for(var ge in a)a.hasOwnProperty(ge)&&(m=a[ge],this[ge]=m?m(A):A[ge]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?se:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){},isPersistent:se}),c}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wt=it(qt),Xt=oe({},qt,{view:0,detail:0}),lt=it(Xt),_e,Pe,ot,pt=oe({},Xt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ot&&(ot&&a.type==="mousemove"?(_e=a.screenX-ot.screenX,Pe=a.screenY-ot.screenY):Pe=_e=0,ot=a),_e)},movementY:function(a){return"movementY"in a?a.movementY:Pe}}),Mt=it(pt),tn=oe({},pt,{dataTransfer:0}),qe=it(tn),nt=oe({},Xt,{relatedTarget:0}),dt=it(nt),It=oe({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=it(It),zt=oe({},qt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),vn=it(zt),At=oe({},qt,{data:0}),Sr=it(At),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=wt[a])?!!c[a]:!1}function wn(){return Nt}var Kn=oe({},Xt,{key:function(a){if(a.key){var c=We[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=re(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(a){return a.type==="keypress"?re(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?re(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Wn=it(Kn),Hn=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ya=it(Hn),ui=oe({},Xt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn}),yx=it(ui),bx=oe({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hs=it(bx),vx=oe({},pt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Mm=it(vx),zf=[9,13,27,32],xx=l&&"CompositionEvent"in window,Wf=null;l&&"documentMode"in document&&(Wf=document.documentMode);var XM=l&&"TextEvent"in window&&!Wf,XN=l&&(!xx||Wf&&8<Wf&&11>=Wf),e1=" ",t1=!1;function n1(a,c){switch(a){case"keyup":return zf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Tu=!1;function e$(a,c){switch(a){case"compositionend":return r1(c);case"keypress":return c.which!==32?null:(t1=!0,e1);case"textInput":return a=c.data,a===e1&&t1?null:a;default:return null}}function t$(a,c){if(Tu)return a==="compositionend"||!xx&&n1(a,c)?(a=Q(),pe=ae=st=null,Tu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return XN&&c.locale!=="ko"?null:c.data;default:return null}}var n$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!n$[a.type]:c==="textarea"}function s1(a,c,m,w){hn(w),c=Vm(c,"onChange"),0<c.length&&(m=new Wt("onChange","change",null,m,w),a.push({event:m,listeners:c}))}var Vf=null,Uf=null;function r$(a){S1(a,0)}function $m(a){var c=Pu(a);if(Ve(c))return a}function i$(a,c){if(a==="change")return c}var o1=!1;if(l){var wx;if(l){var _x="oninput"in document;if(!_x){var a1=document.createElement("div");a1.setAttribute("oninput","return;"),_x=typeof a1.oninput=="function"}wx=_x}else wx=!1;o1=wx&&(!document.documentMode||9<document.documentMode)}function l1(){Vf&&(Vf.detachEvent("onpropertychange",c1),Uf=Vf=null)}function c1(a){if(a.propertyName==="value"&&$m(Uf)){var c=[];s1(c,Uf,a,pa(a)),ha(r$,c)}}function s$(a,c,m){a==="focusin"?(l1(),Vf=c,Uf=m,Vf.attachEvent("onpropertychange",c1)):a==="focusout"&&l1()}function o$(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $m(Uf)}function a$(a,c){if(a==="click")return $m(c)}function l$(a,c){if(a==="input"||a==="change")return $m(c)}function c$(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ho=typeof Object.is=="function"?Object.is:c$;function Hf(a,c){if(ho(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var k=m[w];if(!u.call(c,k)||!ho(a[k],c[k]))return!1}return!0}function u1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function d1(a,c){var m=u1(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=c&&w>=c)return{node:m,offset:c-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=u1(m)}}function f1(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?f1(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function p1(){for(var a=window,c=ct();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=ct(a.document)}return c}function Sx(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function u$(a){var c=p1(),m=a.focusedElem,w=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&f1(m.ownerDocument.documentElement,m)){if(w!==null&&Sx(m)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var k=m.textContent.length,A=Math.min(w.start,k);w=w.end===void 0?A:Math.min(w.end,k),!a.extend&&A>w&&(k=w,w=A,A=k),k=d1(m,A);var Y=d1(m,w);k&&Y&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==Y.node||a.focusOffset!==Y.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),a.removeAllRanges(),A>w?(a.addRange(c),a.extend(Y.node,Y.offset)):(c.setEnd(Y.node,Y.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var d$=l&&"documentMode"in document&&11>=document.documentMode,Ru=null,Ex=null,Kf=null,Ix=!1;function h1(a,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ix||Ru==null||Ru!==ct(w)||(w=Ru,"selectionStart"in w&&Sx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Kf&&Hf(Kf,w)||(Kf=w,w=Vm(Ex,"onSelect"),0<w.length&&(c=new Wt("onSelect","select",null,c,m),a.push({event:c,listeners:w}),c.target=Ru)))}function Bm(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var Ou={animationend:Bm("Animation","AnimationEnd"),animationiteration:Bm("Animation","AnimationIteration"),animationstart:Bm("Animation","AnimationStart"),transitionend:Bm("Transition","TransitionEnd")},Nx={},m1={};l&&(m1=document.createElement("div").style,"AnimationEvent"in window||(delete Ou.animationend.animation,delete Ou.animationiteration.animation,delete Ou.animationstart.animation),"TransitionEvent"in window||delete Ou.transitionend.transition);function zm(a){if(Nx[a])return Nx[a];if(!Ou[a])return a;var c=Ou[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in m1)return Nx[a]=c[m];return a}var g1=zm("animationend"),y1=zm("animationiteration"),b1=zm("animationstart"),v1=zm("transitionend"),x1=new Map,w1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(a,c){x1.set(a,c),s(c,[a])}for(var kx=0;kx<w1.length;kx++){var Cx=w1[kx],f$=Cx.toLowerCase(),p$=Cx[0].toUpperCase()+Cx.slice(1);rl(f$,"on"+p$)}rl(g1,"onAnimationEnd"),rl(y1,"onAnimationIteration"),rl(b1,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(v1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qf));function _1(a,c,m){var w=a.type||"unknown-event";a.currentTarget=m,_u(w,c,void 0,a),a.currentTarget=null}function S1(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],k=w.event;w=w.listeners;e:{var A=void 0;if(c)for(var Y=w.length-1;0<=Y;Y--){var ge=w[Y],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==A&&k.isPropagationStopped())break e;_1(k,ge,He),A=Se}else for(Y=0;Y<w.length;Y++){if(ge=w[Y],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==A&&k.isPropagationStopped())break e;_1(k,ge,He),A=Se}}}if(Ya)throw a=Vs,Ya=!1,Vs=null,a}function ur(a,c){var m=c[Fx];m===void 0&&(m=c[Fx]=new Set);var w=a+"__bubble";m.has(w)||(E1(c,a,2,!1),m.add(w))}function jx(a,c,m){var w=0;c&&(w|=4),E1(m,a,w,c)}var Wm="_reactListening"+Math.random().toString(36).slice(2);function Gf(a){if(!a[Wm]){a[Wm]=!0,r.forEach(function(m){m!=="selectionchange"&&(h$.has(m)||jx(m,!1,a),jx(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Wm]||(c[Wm]=!0,jx("selectionchange",!1,c))}}function E1(a,c,m,w){switch(Ee(c)){case 1:var k=Te;break;case 4:k=Qe;break;default:k=St}m=k.bind(null,c,m,a),k=void 0,!fc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),w?k!==void 0?a.addEventListener(c,m,{capture:!0,passive:k}):a.addEventListener(c,m,!0):k!==void 0?a.addEventListener(c,m,{passive:k}):a.addEventListener(c,m,!1)}function Tx(a,c,m,w,k){var A=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var Y=w.tag;if(Y===3||Y===4){var ge=w.stateNode.containerInfo;if(ge===k||ge.nodeType===8&&ge.parentNode===k)break;if(Y===4)for(Y=w.return;Y!==null;){var Se=Y.tag;if((Se===3||Se===4)&&(Se=Y.stateNode.containerInfo,Se===k||Se.nodeType===8&&Se.parentNode===k))return;Y=Y.return}for(;ge!==null;){if(Y=bc(ge),Y===null)return;if(Se=Y.tag,Se===5||Se===6){w=A=Y;continue e}ge=ge.parentNode}}w=w.return}ha(function(){var He=A,ht=pa(m),gt=[];e:{var ft=x1.get(a);if(ft!==void 0){var Pt=Wt,Bt=a;switch(a){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":Pt=Wn;break;case"focusin":Bt="focus",Pt=dt;break;case"focusout":Bt="blur",Pt=dt;break;case"beforeblur":case"afterblur":Pt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=Mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=qe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=yx;break;case g1:case y1:case b1:Pt=xt;break;case v1:Pt=Hs;break;case"scroll":Pt=lt;break;case"wheel":Pt=Mm;break;case"copy":case"cut":case"paste":Pt=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=ya}var Vt=(c&4)!==0,$r=!Vt&&a==="scroll",Fe=Vt?ft!==null?ft+"Capture":null:ft;Vt=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var vt=$e.stateNode;if($e.tag===5&&vt!==null&&($e=vt,Fe!==null&&(vt=es(Ce,Fe),vt!=null&&Vt.push(Jf(Ce,vt,$e)))),$r)break;Ce=Ce.return}0<Vt.length&&(ft=new Pt(ft,Bt,null,m,ht),gt.push({event:ft,listeners:Vt}))}}if(!(c&7)){e:{if(ft=a==="mouseover"||a==="pointerover",Pt=a==="mouseout"||a==="pointerout",ft&&m!==po&&(Bt=m.relatedTarget||m.fromElement)&&(bc(Bt)||Bt[ba]))break e;if((Pt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,Pt?(Bt=m.relatedTarget||m.toElement,Pt=He,Bt=Bt?bc(Bt):null,Bt!==null&&($r=Us(Bt),Bt!==$r||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(Pt=null,Bt=He),Pt!==Bt)){if(Vt=Mt,vt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(a==="pointerout"||a==="pointerover")&&(Vt=ya,vt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),$r=Pt==null?ft:Pu(Pt),$e=Bt==null?ft:Pu(Bt),ft=new Vt(vt,Ce+"leave",Pt,m,ht),ft.target=$r,ft.relatedTarget=$e,vt=null,bc(ht)===He&&(Vt=new Vt(Fe,Ce+"enter",Bt,m,ht),Vt.target=$e,Vt.relatedTarget=$r,vt=Vt),$r=vt,Pt&&Bt)t:{for(Vt=Pt,Fe=Bt,Ce=0,$e=Vt;$e;$e=qu($e))Ce++;for($e=0,vt=Fe;vt;vt=qu(vt))$e++;for(;0<Ce-$e;)Vt=qu(Vt),Ce--;for(;0<$e-Ce;)Fe=qu(Fe),$e--;for(;Ce--;){if(Vt===Fe||Fe!==null&&Vt===Fe.alternate)break t;Vt=qu(Vt),Fe=qu(Fe)}Vt=null}else Vt=null;Pt!==null&&I1(gt,ft,Pt,Vt,!1),Bt!==null&&$r!==null&&I1(gt,$r,Bt,Vt,!0)}}e:{if(ft=He?Pu(He):window,Pt=ft.nodeName&&ft.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&ft.type==="file")var Ht=i$;else if(i1(ft))if(o1)Ht=l$;else{Ht=o$;var nn=s$}else(Pt=ft.nodeName)&&Pt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Ht=a$);if(Ht&&(Ht=Ht(a,He))){s1(gt,Ht,m,ht);break e}nn&&nn(a,ft,He),a==="focusout"&&(nn=ft._wrapperState)&&nn.controlled&&ft.type==="number"&&be(ft,"number",ft.value)}switch(nn=He?Pu(He):window,a){case"focusin":(i1(nn)||nn.contentEditable==="true")&&(Ru=nn,Ex=He,Kf=null);break;case"focusout":Kf=Ex=Ru=null;break;case"mousedown":Ix=!0;break;case"contextmenu":case"mouseup":case"dragend":Ix=!1,h1(gt,m,ht);break;case"selectionchange":if(d$)break;case"keydown":case"keyup":h1(gt,m,ht)}var rn;if(xx)e:{switch(a){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else Tu?n1(a,m)&&(fn="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(fn="onCompositionStart");fn&&(XN&&m.locale!=="ko"&&(Tu||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&Tu&&(rn=Q()):(st=ht,ae="value"in st?st.value:st.textContent,Tu=!0)),nn=Vm(He,fn),0<nn.length&&(fn=new Sr(fn,a,null,m,ht),gt.push({event:fn,listeners:nn}),rn?fn.data=rn:(rn=r1(m),rn!==null&&(fn.data=rn)))),(rn=XM?e$(a,m):t$(a,m))&&(He=Vm(He,"onBeforeInput"),0<He.length&&(ht=new Sr("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=rn))}S1(gt,c)})}function Jf(a,c,m){return{instance:a,listener:c,currentTarget:m}}function Vm(a,c){for(var m=c+"Capture",w=[];a!==null;){var k=a,A=k.stateNode;k.tag===5&&A!==null&&(k=A,A=es(a,m),A!=null&&w.unshift(Jf(a,A,k)),A=es(a,c),A!=null&&w.push(Jf(a,A,k))),a=a.return}return w}function qu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function I1(a,c,m,w,k){for(var A=c._reactName,Y=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,k?(Se=es(m,A),Se!=null&&Y.unshift(Jf(m,Se,ge))):k||(Se=es(m,A),Se!=null&&Y.push(Jf(m,Se,ge)))),m=m.return}Y.length!==0&&a.push({event:c,listeners:Y})}var m$=/\r\n?/g,g$=/\u0000|\uFFFD/g;function N1(a){return(typeof a=="string"?a:""+a).replace(m$,`
`).replace(g$,"")}function Um(a,c,m){if(c=N1(c),N1(a)!==c&&m)throw Error(n(425))}function Hm(){}var Rx=null,Ox=null;function qx(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ax=typeof setTimeout=="function"?setTimeout:void 0,y$=typeof clearTimeout=="function"?clearTimeout:void 0,k1=typeof Promise=="function"?Promise:void 0,b$=typeof queueMicrotask=="function"?queueMicrotask:typeof k1<"u"?function(a){return k1.resolve(null).then(a).catch(v$)}:Ax;function v$(a){setTimeout(function(){throw a})}function Px(a,c){var m=c,w=0;do{var k=m.nextSibling;if(a.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(w===0){a.removeChild(k),je(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=k}while(m);je(c)}function il(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function C1(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var Au=Math.random().toString(36).slice(2),Vo="__reactFiber$"+Au,Zf="__reactProps$"+Au,ba="__reactContainer$"+Au,Fx="__reactEvents$"+Au,x$="__reactListeners$"+Au,w$="__reactHandles$"+Au;function bc(a){var c=a[Vo];if(c)return c;for(var m=a.parentNode;m;){if(c=m[ba]||m[Vo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=C1(a);a!==null;){if(m=a[Vo])return m;a=C1(a)}return c}a=m,m=a.parentNode}return null}function Yf(a){return a=a[Vo]||a[ba],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Pu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Km(a){return a[Zf]||null}var Dx=[],Fu=-1;function sl(a){return{current:a}}function dr(a){0>Fu||(a.current=Dx[Fu],Dx[Fu]=null,Fu--)}function nr(a,c){Fu++,Dx[Fu]=a.current,a.current=c}var ol={},Si=sl(ol),ns=sl(!1),vc=ol;function Du(a,c){var m=a.type.contextTypes;if(!m)return ol;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var k={},A;for(A in m)k[A]=c[A];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=k),k}function rs(a){return a=a.childContextTypes,a!=null}function Qm(){dr(ns),dr(Si)}function j1(a,c,m){if(Si.current!==ol)throw Error(n(168));nr(Si,c),nr(ns,m)}function T1(a,c,m){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var k in w)if(!(k in c))throw Error(n(108,ze(a)||"Unknown",k));return oe({},m,w)}function Gm(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ol,vc=Si.current,nr(Si,a),nr(ns,ns.current),!0}function R1(a,c,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=T1(a,c,vc),w.__reactInternalMemoizedMergedChildContext=a,dr(ns),dr(Si),nr(Si,a)):dr(ns),nr(ns,m)}var va=null,Jm=!1,Lx=!1;function O1(a){va===null?va=[a]:va.push(a)}function _$(a){Jm=!0,O1(a)}function al(){if(!Lx&&va!==null){Lx=!0;var a=0,c=Mn;try{var m=va;for(Mn=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}va=null,Jm=!1}catch(k){throw va!==null&&(va=va.slice(a+1)),ku(hc,al),k}finally{Mn=c,Lx=!1}}return null}var Lu=[],Mu=0,Zm=null,Ym=0,Ks=[],Qs=0,xc=null,xa=1,wa="";function wc(a,c){Lu[Mu++]=Ym,Lu[Mu++]=Zm,Zm=a,Ym=c}function q1(a,c,m){Ks[Qs++]=xa,Ks[Qs++]=wa,Ks[Qs++]=xc,xc=a;var w=xa;a=wa;var k=32-_i(w)-1;w&=~(1<<k),m+=1;var A=32-_i(c)+k;if(30<A){var Y=k-k%5;A=(w&(1<<Y)-1).toString(32),w>>=Y,k-=Y,xa=1<<32-_i(c)+k|m<<k|w,wa=A+a}else xa=1<<A|m<<k|w,wa=a}function Mx(a){a.return!==null&&(wc(a,1),q1(a,1,0))}function $x(a){for(;a===Zm;)Zm=Lu[--Mu],Lu[Mu]=null,Ym=Lu[--Mu],Lu[Mu]=null;for(;a===xc;)xc=Ks[--Qs],Ks[Qs]=null,wa=Ks[--Qs],Ks[Qs]=null,xa=Ks[--Qs],Ks[Qs]=null}var ws=null,_s=null,mr=!1,mo=null;function A1(a,c){var m=Ys(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function P1(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,ws=a,_s=il(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,ws=a,_s=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=xc!==null?{id:xa,overflow:wa}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=Ys(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,ws=a,_s=null,!0):!1;default:return!1}}function Bx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function zx(a){if(mr){var c=_s;if(c){var m=c;if(!P1(a,c)){if(Bx(a))throw Error(n(418));c=il(m.nextSibling);var w=ws;c&&P1(a,c)?A1(w,m):(a.flags=a.flags&-4097|2,mr=!1,ws=a)}}else{if(Bx(a))throw Error(n(418));a.flags=a.flags&-4097|2,mr=!1,ws=a}}}function F1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;ws=a}function Xm(a){if(a!==ws)return!1;if(!mr)return F1(a),mr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!qx(a.type,a.memoizedProps)),c&&(c=_s)){if(Bx(a))throw D1(),Error(n(418));for(;c;)A1(a,c),c=il(c.nextSibling)}if(F1(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){_s=il(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}_s=null}}else _s=ws?il(a.stateNode.nextSibling):null;return!0}function D1(){for(var a=_s;a;)a=il(a.nextSibling)}function $u(){_s=ws=null,mr=!1}function Wx(a){mo===null?mo=[a]:mo.push(a)}var S$=q.ReactCurrentBatchConfig;function Xf(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var k=w,A=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===A?c.ref:(c=function(Y){var ge=k.refs;Y===null?delete ge[A]:ge[A]=Y},c._stringRef=A,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function eg(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function L1(a){var c=a._init;return c(a._payload)}function M1(a){function c(Fe,Ce){if(a){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!a)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function k(Fe,Ce){return Fe=ml(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function A(Fe,Ce,$e){return Fe.index=$e,a?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Y(Fe){return a&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==6?(Ce=Aw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,vt){var Ht=$e.type;return Ht===W?ht(Fe,Ce,$e.props.children,vt,$e.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Z&&L1(Ht)===Ce.type)?(vt=k(Ce,$e.props),vt.ref=Xf(Fe,Ce,$e),vt.return=Fe,vt):(vt=Eg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Xf(Fe,Ce,$e),vt.return=Fe,vt)}function He(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=Pw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,vt,Ht){return Ce===null||Ce.tag!==7?(Ce=jc($e,Fe.mode,vt,Ht),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Aw(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case L:return $e=Eg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=Xf(Fe,null,Ce),$e.return=Fe,$e;case M:return Ce=Pw(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case Z:var vt=Ce._init;return gt(Fe,vt(Ce._payload),$e)}if(Ne(Ce)||ne(Ce))return Ce=jc(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;eg(Fe,Ce)}return null}function ft(Fe,Ce,$e,vt){var Ht=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Ht!==null?null:ge(Fe,Ce,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:return $e.key===Ht?Se(Fe,Ce,$e,vt):null;case M:return $e.key===Ht?He(Fe,Ce,$e,vt):null;case Z:return Ht=$e._init,ft(Fe,Ce,Ht($e._payload),vt)}if(Ne($e)||ne($e))return Ht!==null?null:ht(Fe,Ce,$e,vt,null);eg(Fe,$e)}return null}function Pt(Fe,Ce,$e,vt,Ht){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+vt,Ht);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case L:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,Se(Ce,Fe,vt,Ht);case M:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,He(Ce,Fe,vt,Ht);case Z:var nn=vt._init;return Pt(Fe,Ce,$e,nn(vt._payload),Ht)}if(Ne(vt)||ne(vt))return Fe=Fe.get($e)||null,ht(Ce,Fe,vt,Ht,null);eg(Ce,vt)}return null}function Bt(Fe,Ce,$e,vt){for(var Ht=null,nn=null,rn=Ce,fn=Ce=0,ai=null;rn!==null&&fn<$e.length;fn++){rn.index>fn?(ai=rn,rn=null):ai=rn.sibling;var Fn=ft(Fe,rn,$e[fn],vt);if(Fn===null){rn===null&&(rn=ai);break}a&&rn&&Fn.alternate===null&&c(Fe,rn),Ce=A(Fn,Ce,fn),nn===null?Ht=Fn:nn.sibling=Fn,nn=Fn,rn=ai}if(fn===$e.length)return m(Fe,rn),mr&&wc(Fe,fn),Ht;if(rn===null){for(;fn<$e.length;fn++)rn=gt(Fe,$e[fn],vt),rn!==null&&(Ce=A(rn,Ce,fn),nn===null?Ht=rn:nn.sibling=rn,nn=rn);return mr&&wc(Fe,fn),Ht}for(rn=w(Fe,rn);fn<$e.length;fn++)ai=Pt(rn,Fe,fn,$e[fn],vt),ai!==null&&(a&&ai.alternate!==null&&rn.delete(ai.key===null?fn:ai.key),Ce=A(ai,Ce,fn),nn===null?Ht=ai:nn.sibling=ai,nn=ai);return a&&rn.forEach(function(gl){return c(Fe,gl)}),mr&&wc(Fe,fn),Ht}function Vt(Fe,Ce,$e,vt){var Ht=ne($e);if(typeof Ht!="function")throw Error(n(150));if($e=Ht.call($e),$e==null)throw Error(n(151));for(var nn=Ht=null,rn=Ce,fn=Ce=0,ai=null,Fn=$e.next();rn!==null&&!Fn.done;fn++,Fn=$e.next()){rn.index>fn?(ai=rn,rn=null):ai=rn.sibling;var gl=ft(Fe,rn,Fn.value,vt);if(gl===null){rn===null&&(rn=ai);break}a&&rn&&gl.alternate===null&&c(Fe,rn),Ce=A(gl,Ce,fn),nn===null?Ht=gl:nn.sibling=gl,nn=gl,rn=ai}if(Fn.done)return m(Fe,rn),mr&&wc(Fe,fn),Ht;if(rn===null){for(;!Fn.done;fn++,Fn=$e.next())Fn=gt(Fe,Fn.value,vt),Fn!==null&&(Ce=A(Fn,Ce,fn),nn===null?Ht=Fn:nn.sibling=Fn,nn=Fn);return mr&&wc(Fe,fn),Ht}for(rn=w(Fe,rn);!Fn.done;fn++,Fn=$e.next())Fn=Pt(rn,Fe,fn,Fn.value,vt),Fn!==null&&(a&&Fn.alternate!==null&&rn.delete(Fn.key===null?fn:Fn.key),Ce=A(Fn,Ce,fn),nn===null?Ht=Fn:nn.sibling=Fn,nn=Fn);return a&&rn.forEach(function(tB){return c(Fe,tB)}),mr&&wc(Fe,fn),Ht}function $r(Fe,Ce,$e,vt){if(typeof $e=="object"&&$e!==null&&$e.type===W&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case L:e:{for(var Ht=$e.key,nn=Ce;nn!==null;){if(nn.key===Ht){if(Ht=$e.type,Ht===W){if(nn.tag===7){m(Fe,nn.sibling),Ce=k(nn,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(nn.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Z&&L1(Ht)===nn.type){m(Fe,nn.sibling),Ce=k(nn,$e.props),Ce.ref=Xf(Fe,nn,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,nn);break}else c(Fe,nn);nn=nn.sibling}$e.type===W?(Ce=jc($e.props.children,Fe.mode,vt,$e.key),Ce.return=Fe,Fe=Ce):(vt=Eg($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Xf(Fe,Ce,$e),vt.return=Fe,Fe=vt)}return Y(Fe);case M:e:{for(nn=$e.key;Ce!==null;){if(Ce.key===nn)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=k(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=Pw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce}return Y(Fe);case Z:return nn=$e._init,$r(Fe,Ce,nn($e._payload),vt)}if(Ne($e))return Bt(Fe,Ce,$e,vt);if(ne($e))return Vt(Fe,Ce,$e,vt);eg(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=k(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=Aw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce),Y(Fe)):m(Fe,Ce)}return $r}var Bu=M1(!0),$1=M1(!1),tg=sl(null),ng=null,zu=null,Vx=null;function Ux(){Vx=zu=ng=null}function Hx(a){var c=tg.current;dr(tg),a._currentValue=c}function Kx(a,c,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===m)break;a=a.return}}function Wu(a,c){ng=a,Vx=zu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(is=!0),a.firstContext=null)}function Gs(a){var c=a._currentValue;if(Vx!==a)if(a={context:a,memoizedValue:c,next:null},zu===null){if(ng===null)throw Error(n(308));zu=a,ng.dependencies={lanes:0,firstContext:a}}else zu=zu.next=a;return c}var _c=null;function Qx(a){_c===null?_c=[a]:_c.push(a)}function B1(a,c,m,w){var k=c.interleaved;return k===null?(m.next=m,Qx(c)):(m.next=k.next,k.next=m),c.interleaved=m,_a(a,w)}function _a(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var ll=!1;function Gx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z1(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Sa(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function cl(a,c,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,qn&2){var k=w.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),w.pending=c,_a(a,m)}return k=w.interleaved,k===null?(c.next=c,Qx(w)):(c.next=k.next,k.next=c),w.interleaved=c,_a(a,m)}function rg(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Lf(a,m)}}function W1(a,c){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var k=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var Y={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?k=A=Y:A=A.next=Y,m=m.next}while(m!==null);A===null?k=A=c:A=A.next=c}else k=A=c;m={baseState:w.baseState,firstBaseUpdate:k,lastBaseUpdate:A,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function ig(a,c,m,w){var k=a.updateQueue;ll=!1;var A=k.firstBaseUpdate,Y=k.lastBaseUpdate,ge=k.shared.pending;if(ge!==null){k.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Y===null?A=He:Y.next=He,Y=Se;var ht=a.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Y&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(A!==null){var gt=k.baseState;Y=0,ht=He=Se=null,ge=A;do{var ft=ge.lane,Pt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:Pt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Bt=a,Vt=ge;switch(ft=c,Pt=m,Vt.tag){case 1:if(Bt=Vt.payload,typeof Bt=="function"){gt=Bt.call(Pt,gt,ft);break e}gt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Vt.payload,ft=typeof Bt=="function"?Bt.call(Pt,gt,ft):Bt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:ll=!0}}ge.callback!==null&&ge.lane!==0&&(a.flags|=64,ft=k.effects,ft===null?k.effects=[ge]:ft.push(ge))}else Pt={eventTime:Pt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=Pt,Se=gt):ht=ht.next=Pt,Y|=ft;if(ge=ge.next,ge===null){if(ge=k.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,k.lastBaseUpdate=ft,k.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),k.baseState=Se,k.firstBaseUpdate=He,k.lastBaseUpdate=ht,c=k.shared.interleaved,c!==null){k=c;do Y|=k.lane,k=k.next;while(k!==c)}else A===null&&(k.shared.lanes=0);Ic|=Y,a.lanes=Y,a.memoizedState=gt}}function V1(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],k=w.callback;if(k!==null){if(w.callback=null,w=m,typeof k!="function")throw Error(n(191,k));k.call(w)}}}var ep={},Uo=sl(ep),tp=sl(ep),np=sl(ep);function Sc(a){if(a===ep)throw Error(n(174));return a}function Jx(a,c){switch(nr(np,c),nr(tp,a),nr(Uo,ep),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Gt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Gt(c,a)}dr(Uo),nr(Uo,c)}function Vu(){dr(Uo),dr(tp),dr(np)}function U1(a){Sc(np.current);var c=Sc(Uo.current),m=Gt(c,a.type);c!==m&&(nr(tp,a),nr(Uo,m))}function Zx(a){tp.current===a&&(dr(Uo),dr(tp))}var Er=sl(0);function sg(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Yx=[];function Xx(){for(var a=0;a<Yx.length;a++)Yx[a]._workInProgressVersionPrimary=null;Yx.length=0}var og=q.ReactCurrentDispatcher,ew=q.ReactCurrentBatchConfig,Ec=0,Ir=null,ni=null,si=null,ag=!1,rp=!1,ip=0,E$=0;function Ei(){throw Error(n(321))}function tw(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!ho(a[m],c[m]))return!1;return!0}function nw(a,c,m,w,k,A){if(Ec=A,Ir=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,og.current=a===null||a.memoizedState===null?C$:j$,a=m(w,k),rp){A=0;do{if(rp=!1,ip=0,25<=A)throw Error(n(301));A+=1,si=ni=null,c.updateQueue=null,og.current=T$,a=m(w,k)}while(rp)}if(og.current=ug,c=ni!==null&&ni.next!==null,Ec=0,si=ni=Ir=null,ag=!1,c)throw Error(n(300));return a}function rw(){var a=ip!==0;return ip=0,a}function Ho(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Ir.memoizedState=si=a:si=si.next=a,si}function Js(){if(ni===null){var a=Ir.alternate;a=a!==null?a.memoizedState:null}else a=ni.next;var c=si===null?Ir.memoizedState:si.next;if(c!==null)si=c,ni=a;else{if(a===null)throw Error(n(310));ni=a,a={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},si===null?Ir.memoizedState=si=a:si=si.next=a}return si}function sp(a,c){return typeof c=="function"?c(a):c}function iw(a){var c=Js(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=ni,k=w.baseQueue,A=m.pending;if(A!==null){if(k!==null){var Y=k.next;k.next=A.next,A.next=Y}w.baseQueue=k=A,m.pending=null}if(k!==null){A=k.next,w=w.baseState;var ge=Y=null,Se=null,He=A;do{var ht=He.lane;if((Ec&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:a(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Y=w):Se=Se.next=gt,Ir.lanes|=ht,Ic|=ht}He=He.next}while(He!==null&&He!==A);Se===null?Y=w:Se.next=ge,ho(w,c.memoizedState)||(is=!0),c.memoizedState=w,c.baseState=Y,c.baseQueue=Se,m.lastRenderedState=w}if(a=m.interleaved,a!==null){k=a;do A=k.lane,Ir.lanes|=A,Ic|=A,k=k.next;while(k!==a)}else k===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function sw(a){var c=Js(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,k=m.pending,A=c.memoizedState;if(k!==null){m.pending=null;var Y=k=k.next;do A=a(A,Y.action),Y=Y.next;while(Y!==k);ho(A,c.memoizedState)||(is=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),m.lastRenderedState=A}return[A,w]}function H1(){}function K1(a,c){var m=Ir,w=Js(),k=c(),A=!ho(w.memoizedState,k);if(A&&(w.memoizedState=k,is=!0),w=w.queue,ow(J1.bind(null,m,w,a),[a]),w.getSnapshot!==c||A||si!==null&&si.memoizedState.tag&1){if(m.flags|=2048,op(9,G1.bind(null,m,w,k,c),void 0,null),oi===null)throw Error(n(349));Ec&30||Q1(m,c,k)}return k}function Q1(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=Ir.updateQueue,c===null?(c={lastEffect:null,stores:null},Ir.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function G1(a,c,m,w){c.value=m,c.getSnapshot=w,Z1(c)&&Y1(a)}function J1(a,c,m){return m(function(){Z1(c)&&Y1(a)})}function Z1(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!ho(a,m)}catch{return!0}}function Y1(a){var c=_a(a,1);c!==null&&vo(c,a,1,-1)}function X1(a){var c=Ho();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:a},c.queue=a,a=a.dispatch=k$.bind(null,Ir,a),[c.memoizedState,a]}function op(a,c,m,w){return a={tag:a,create:c,destroy:m,deps:w,next:null},c=Ir.updateQueue,c===null?(c={lastEffect:null,stores:null},Ir.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,c.lastEffect=a)),a}function ek(){return Js().memoizedState}function lg(a,c,m,w){var k=Ho();Ir.flags|=a,k.memoizedState=op(1|c,m,void 0,w===void 0?null:w)}function cg(a,c,m,w){var k=Js();w=w===void 0?null:w;var A=void 0;if(ni!==null){var Y=ni.memoizedState;if(A=Y.destroy,w!==null&&tw(w,Y.deps)){k.memoizedState=op(c,m,A,w);return}}Ir.flags|=a,k.memoizedState=op(1|c,m,A,w)}function tk(a,c){return lg(8390656,8,a,c)}function ow(a,c){return cg(2048,8,a,c)}function nk(a,c){return cg(4,2,a,c)}function rk(a,c){return cg(4,4,a,c)}function ik(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function sk(a,c,m){return m=m!=null?m.concat([a]):null,cg(4,4,ik.bind(null,c,a),m)}function aw(){}function ok(a,c){var m=Js();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&tw(c,w[1])?w[0]:(m.memoizedState=[a,c],a)}function ak(a,c){var m=Js();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&tw(c,w[1])?w[0]:(a=a(),m.memoizedState=[a,c],a)}function lk(a,c,m){return Ec&21?(ho(m,c)||(m=Dm(),Ir.lanes|=m,Ic|=m,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=m)}function I$(a,c){var m=Mn;Mn=m!==0&&4>m?m:4,a(!0);var w=ew.transition;ew.transition={};try{a(!1),c()}finally{Mn=m,ew.transition=w}}function ck(){return Js().memoizedState}function N$(a,c,m){var w=pl(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},uk(a))dk(c,m);else if(m=B1(a,c,m,w),m!==null){var k=$i();vo(m,a,w,k),fk(m,c,w)}}function k$(a,c,m){var w=pl(a),k={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(uk(a))dk(c,k);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var Y=c.lastRenderedState,ge=A(Y,m);if(k.hasEagerState=!0,k.eagerState=ge,ho(ge,Y)){var Se=c.interleaved;Se===null?(k.next=k,Qx(c)):(k.next=Se.next,Se.next=k),c.interleaved=k;return}}catch{}finally{}m=B1(a,c,k,w),m!==null&&(k=$i(),vo(m,a,w,k),fk(m,c,w))}}function uk(a){var c=a.alternate;return a===Ir||c!==null&&c===Ir}function dk(a,c){rp=ag=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function fk(a,c,m){if(m&4194240){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Lf(a,m)}}var ug={readContext:Gs,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},C$={readContext:Gs,useCallback:function(a,c){return Ho().memoizedState=[a,c===void 0?null:c],a},useContext:Gs,useEffect:tk,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,lg(4194308,4,ik.bind(null,c,a),m)},useLayoutEffect:function(a,c){return lg(4194308,4,a,c)},useInsertionEffect:function(a,c){return lg(4,2,a,c)},useMemo:function(a,c){var m=Ho();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var w=Ho();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=N$.bind(null,Ir,a),[w.memoizedState,a]},useRef:function(a){var c=Ho();return a={current:a},c.memoizedState=a},useState:X1,useDebugValue:aw,useDeferredValue:function(a){return Ho().memoizedState=a},useTransition:function(){var a=X1(!1),c=a[0];return a=I$.bind(null,a[1]),Ho().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var w=Ir,k=Ho();if(mr){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),oi===null)throw Error(n(349));Ec&30||Q1(w,c,m)}k.memoizedState=m;var A={value:m,getSnapshot:c};return k.queue=A,tk(J1.bind(null,w,A,a),[a]),w.flags|=2048,op(9,G1.bind(null,w,A,m,c),void 0,null),m},useId:function(){var a=Ho(),c=oi.identifierPrefix;if(mr){var m=wa,w=xa;m=(w&~(1<<32-_i(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=ip++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=E$++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},j$={readContext:Gs,useCallback:ok,useContext:Gs,useEffect:ow,useImperativeHandle:sk,useInsertionEffect:nk,useLayoutEffect:rk,useMemo:ak,useReducer:iw,useRef:ek,useState:function(){return iw(sp)},useDebugValue:aw,useDeferredValue:function(a){var c=Js();return lk(c,ni.memoizedState,a)},useTransition:function(){var a=iw(sp)[0],c=Js().memoizedState;return[a,c]},useMutableSource:H1,useSyncExternalStore:K1,useId:ck,unstable_isNewReconciler:!1},T$={readContext:Gs,useCallback:ok,useContext:Gs,useEffect:ow,useImperativeHandle:sk,useInsertionEffect:nk,useLayoutEffect:rk,useMemo:ak,useReducer:sw,useRef:ek,useState:function(){return sw(sp)},useDebugValue:aw,useDeferredValue:function(a){var c=Js();return ni===null?c.memoizedState=a:lk(c,ni.memoizedState,a)},useTransition:function(){var a=sw(sp)[0],c=Js().memoizedState;return[a,c]},useMutableSource:H1,useSyncExternalStore:K1,useId:ck,unstable_isNewReconciler:!1};function go(a,c){if(a&&a.defaultProps){c=oe({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function lw(a,c,m,w){c=a.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var dg={isMounted:function(a){return(a=a._reactInternals)?Us(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var w=$i(),k=pl(a),A=Sa(w,k);A.payload=c,m!=null&&(A.callback=m),c=cl(a,A,k),c!==null&&(vo(c,a,k,w),rg(c,a,k))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var w=$i(),k=pl(a),A=Sa(w,k);A.tag=1,A.payload=c,m!=null&&(A.callback=m),c=cl(a,A,k),c!==null&&(vo(c,a,k,w),rg(c,a,k))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=$i(),w=pl(a),k=Sa(m,w);k.tag=2,c!=null&&(k.callback=c),c=cl(a,k,w),c!==null&&(vo(c,a,w,m),rg(c,a,w))}};function pk(a,c,m,w,k,A,Y){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,A,Y):c.prototype&&c.prototype.isPureReactComponent?!Hf(m,w)||!Hf(k,A):!0}function hk(a,c,m){var w=!1,k=ol,A=c.contextType;return typeof A=="object"&&A!==null?A=Gs(A):(k=rs(c)?vc:Si.current,w=c.contextTypes,A=(w=w!=null)?Du(a,k):ol),c=new c(m,A),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=dg,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=A),c}function mk(a,c,m,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==a&&dg.enqueueReplaceState(c,c.state,null)}function cw(a,c,m,w){var k=a.stateNode;k.props=m,k.state=a.memoizedState,k.refs={},Gx(a);var A=c.contextType;typeof A=="object"&&A!==null?k.context=Gs(A):(A=rs(c)?vc:Si.current,k.context=Du(a,A)),k.state=a.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(lw(a,c,A,m),k.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&dg.enqueueReplaceState(k,k.state,null),ig(a,m,k,w),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function Uu(a,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var k=m}catch(A){k=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:c,stack:k,digest:null}}function uw(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function dw(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var R$=typeof WeakMap=="function"?WeakMap:Map;function gk(a,c,m){m=Sa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){bg||(bg=!0,Nw=w),dw(a,c)},m}function yk(a,c,m){m=Sa(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var k=c.value;m.payload=function(){return w(k)},m.callback=function(){dw(a,c)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){dw(a,c),typeof w!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var Y=c.stack;this.componentDidCatch(c.value,{componentStack:Y!==null?Y:""})}),m}function bk(a,c,m){var w=a.pingCache;if(w===null){w=a.pingCache=new R$;var k=new Set;w.set(c,k)}else k=w.get(c),k===void 0&&(k=new Set,w.set(c,k));k.has(m)||(k.add(m),a=U$.bind(null,a,c,m),c.then(a,a))}function vk(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function xk(a,c,m,w,k){return a.mode&1?(a.flags|=65536,a.lanes=k,a):(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=Sa(-1,1),c.tag=2,cl(m,c,1))),m.lanes|=1),a)}var O$=q.ReactCurrentOwner,is=!1;function Mi(a,c,m,w){c.child=a===null?$1(c,null,m,w):Bu(c,a.child,m,w)}function wk(a,c,m,w,k){m=m.render;var A=c.ref;return Wu(c,k),w=nw(a,c,m,w,A,k),m=rw(),a!==null&&!is?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,Ea(a,c,k)):(mr&&m&&Mx(c),c.flags|=1,Mi(a,c,w,k),c.child)}function _k(a,c,m,w,k){if(a===null){var A=m.type;return typeof A=="function"&&!qw(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=A,Sk(a,c,A,w,k)):(a=Eg(m.type,null,w,c,c.mode,k),a.ref=c.ref,a.return=c,c.child=a)}if(A=a.child,!(a.lanes&k)){var Y=A.memoizedProps;if(m=m.compare,m=m!==null?m:Hf,m(Y,w)&&a.ref===c.ref)return Ea(a,c,k)}return c.flags|=1,a=ml(A,w),a.ref=c.ref,a.return=c,c.child=a}function Sk(a,c,m,w,k){if(a!==null){var A=a.memoizedProps;if(Hf(A,w)&&a.ref===c.ref)if(is=!1,c.pendingProps=w=A,(a.lanes&k)!==0)a.flags&131072&&(is=!0);else return c.lanes=a.lanes,Ea(a,c,k)}return fw(a,c,m,w,k)}function Ek(a,c,m){var w=c.pendingProps,k=w.children,A=a!==null?a.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Ku,Ss),Ss|=m;else{if(!(m&0x40000000))return a=A!==null?A.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,nr(Ku,Ss),Ss|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=A!==null?A.baseLanes:m,nr(Ku,Ss),Ss|=w}else A!==null?(w=A.baseLanes|m,c.memoizedState=null):w=m,nr(Ku,Ss),Ss|=w;return Mi(a,c,k,m),c.child}function Ik(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function fw(a,c,m,w,k){var A=rs(m)?vc:Si.current;return A=Du(c,A),Wu(c,k),m=nw(a,c,m,w,A,k),w=rw(),a!==null&&!is?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,Ea(a,c,k)):(mr&&w&&Mx(c),c.flags|=1,Mi(a,c,m,k),c.child)}function Nk(a,c,m,w,k){if(rs(m)){var A=!0;Gm(c)}else A=!1;if(Wu(c,k),c.stateNode===null)pg(a,c),hk(c,m,w),cw(c,m,w,k),w=!0;else if(a===null){var Y=c.stateNode,ge=c.memoizedProps;Y.props=ge;var Se=Y.context,He=m.contextType;typeof He=="object"&&He!==null?He=Gs(He):(He=rs(m)?vc:Si.current,He=Du(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Y.getSnapshotBeforeUpdate=="function";gt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&mk(c,Y,w,He),ll=!1;var ft=c.memoizedState;Y.state=ft,ig(c,w,Y,k),Se=c.memoizedState,ge!==w||ft!==Se||ns.current||ll?(typeof ht=="function"&&(lw(c,m,ht,w),Se=c.memoizedState),(ge=ll||pk(c,m,ge,w,ft,Se,He))?(gt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),Y.props=w,Y.state=Se,Y.context=He,w=ge):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{Y=c.stateNode,z1(a,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:go(c.type,ge),Y.props=He,gt=c.pendingProps,ft=Y.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=Gs(Se):(Se=rs(m)?vc:Si.current,Se=Du(c,Se));var Pt=m.getDerivedStateFromProps;(ht=typeof Pt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&mk(c,Y,w,Se),ll=!1,ft=c.memoizedState,Y.state=ft,ig(c,w,Y,k);var Bt=c.memoizedState;ge!==gt||ft!==Bt||ns.current||ll?(typeof Pt=="function"&&(lw(c,m,Pt,w),Bt=c.memoizedState),(He=ll||pk(c,m,He,w,ft,Bt,Se)||!1)?(ht||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(w,Bt,Se),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(w,Bt,Se)),typeof Y.componentDidUpdate=="function"&&(c.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Bt),Y.props=w,Y.state=Bt,Y.context=Se,w=He):(typeof Y.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),w=!1)}return pw(a,c,m,w,A,k)}function pw(a,c,m,w,k,A){Ik(a,c);var Y=(c.flags&128)!==0;if(!w&&!Y)return k&&R1(c,m,!1),Ea(a,c,A);w=c.stateNode,O$.current=c;var ge=Y&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&Y?(c.child=Bu(c,a.child,null,A),c.child=Bu(c,null,ge,A)):Mi(a,c,ge,A),c.memoizedState=w.state,k&&R1(c,m,!0),c.child}function kk(a){var c=a.stateNode;c.pendingContext?j1(a,c.pendingContext,c.pendingContext!==c.context):c.context&&j1(a,c.context,!1),Jx(a,c.containerInfo)}function Ck(a,c,m,w,k){return $u(),Wx(k),c.flags|=256,Mi(a,c,m,w),c.child}var hw={dehydrated:null,treeContext:null,retryLane:0};function mw(a){return{baseLanes:a,cachePool:null,transitions:null}}function jk(a,c,m){var w=c.pendingProps,k=Er.current,A=!1,Y=(c.flags&128)!==0,ge;if((ge=Y)||(ge=a!==null&&a.memoizedState===null?!1:(k&2)!==0),ge?(A=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),nr(Er,k&1),a===null)return zx(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(Y=w.children,a=w.fallback,A?(w=c.mode,A=c.child,Y={mode:"hidden",children:Y},!(w&1)&&A!==null?(A.childLanes=0,A.pendingProps=Y):A=Ig(Y,w,0,null),a=jc(a,w,m,null),A.return=c,a.return=c,A.sibling=a,c.child=A,c.child.memoizedState=mw(m),c.memoizedState=hw,a):gw(c,Y));if(k=a.memoizedState,k!==null&&(ge=k.dehydrated,ge!==null))return q$(a,c,Y,w,ge,k,m);if(A){A=w.fallback,Y=c.mode,k=a.child,ge=k.sibling;var Se={mode:"hidden",children:w.children};return!(Y&1)&&c.child!==k?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=ml(k,Se),w.subtreeFlags=k.subtreeFlags&0xe00000),ge!==null?A=ml(ge,A):(A=jc(A,Y,m,null),A.flags|=2),A.return=c,w.return=c,w.sibling=A,c.child=w,w=A,A=c.child,Y=a.child.memoizedState,Y=Y===null?mw(m):{baseLanes:Y.baseLanes|m,cachePool:null,transitions:Y.transitions},A.memoizedState=Y,A.childLanes=a.childLanes&~m,c.memoizedState=hw,w}return A=a.child,a=A.sibling,w=ml(A,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=w,c.memoizedState=null,w}function gw(a,c){return c=Ig({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function fg(a,c,m,w){return w!==null&&Wx(w),Bu(c,a.child,null,m),a=gw(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function q$(a,c,m,w,k,A,Y){if(m)return c.flags&256?(c.flags&=-257,w=uw(Error(n(422))),fg(a,c,Y,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(A=w.fallback,k=c.mode,w=Ig({mode:"visible",children:w.children},k,0,null),A=jc(A,k,Y,null),A.flags|=2,w.return=c,A.return=c,w.sibling=A,c.child=w,c.mode&1&&Bu(c,a.child,null,Y),c.child.memoizedState=mw(Y),c.memoizedState=hw,A);if(!(c.mode&1))return fg(a,c,Y,null);if(k.data==="$!"){if(w=k.nextSibling&&k.nextSibling.dataset,w)var ge=w.dgst;return w=ge,A=Error(n(419)),w=uw(A,w,void 0),fg(a,c,Y,w)}if(ge=(Y&a.childLanes)!==0,is||ge){if(w=oi,w!==null){switch(Y&-Y){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:k=32;break;case 0x20000000:k=0x10000000;break;default:k=0}k=k&(w.suspendedLanes|Y)?0:k,k!==0&&k!==A.retryLane&&(A.retryLane=k,_a(a,k),vo(w,a,k,-1))}return Ow(),w=uw(Error(n(421))),fg(a,c,Y,w)}return k.data==="$?"?(c.flags|=128,c.child=a.child,c=H$.bind(null,a),k._reactRetry=c,null):(a=A.treeContext,_s=il(k.nextSibling),ws=c,mr=!0,mo=null,a!==null&&(Ks[Qs++]=xa,Ks[Qs++]=wa,Ks[Qs++]=xc,xa=a.id,wa=a.overflow,xc=c),c=gw(c,w.children),c.flags|=4096,c)}function Tk(a,c,m){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),Kx(a.return,c,m)}function yw(a,c,m,w,k){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:k}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=w,A.tail=m,A.tailMode=k)}function Rk(a,c,m){var w=c.pendingProps,k=w.revealOrder,A=w.tail;if(Mi(a,c,w.children,m),w=Er.current,w&2)w=w&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Tk(a,m,c);else if(a.tag===19)Tk(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(nr(Er,w),!(c.mode&1))c.memoizedState=null;else switch(k){case"forwards":for(m=c.child,k=null;m!==null;)a=m.alternate,a!==null&&sg(a)===null&&(k=m),m=m.sibling;m=k,m===null?(k=c.child,c.child=null):(k=m.sibling,m.sibling=null),yw(c,!1,k,m,A);break;case"backwards":for(m=null,k=c.child,c.child=null;k!==null;){if(a=k.alternate,a!==null&&sg(a)===null){c.child=k;break}a=k.sibling,k.sibling=m,m=k,k=a}yw(c,!0,m,null,A);break;case"together":yw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function pg(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Ea(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Ic|=c.lanes,!(m&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=ml(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=ml(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function A$(a,c,m){switch(c.tag){case 3:kk(c),$u();break;case 5:U1(c);break;case 1:rs(c.type)&&Gm(c);break;case 4:Jx(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,k=c.memoizedProps.value;nr(tg,w._currentValue),w._currentValue=k;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(nr(Er,Er.current&1),c.flags|=128,null):m&c.child.childLanes?jk(a,c,m):(nr(Er,Er.current&1),a=Ea(a,c,m),a!==null?a.sibling:null);nr(Er,Er.current&1);break;case 19:if(w=(m&c.childLanes)!==0,a.flags&128){if(w)return Rk(a,c,m);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),nr(Er,Er.current),w)break;return null;case 22:case 23:return c.lanes=0,Ek(a,c,m)}return Ea(a,c,m)}var Ok,bw,qk,Ak;Ok=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},bw=function(){},qk=function(a,c,m,w){var k=a.memoizedProps;if(k!==w){a=c.stateNode,Sc(Uo.current);var A=null;switch(m){case"input":k=_t(a,k),w=_t(a,w),A=[];break;case"select":k=oe({},k,{value:void 0}),w=oe({},w,{value:void 0}),A=[];break;case"textarea":k=Ue(a,k),w=Ue(a,w),A=[];break;default:typeof k.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Hm)}Yi(m,w);var Y;m=null;for(He in k)if(!w.hasOwnProperty(He)&&k.hasOwnProperty(He)&&k[He]!=null)if(He==="style"){var ge=k[He];for(Y in ge)ge.hasOwnProperty(Y)&&(m||(m={}),m[Y]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?A||(A=[]):(A=A||[]).push(He,null));for(He in w){var Se=w[He];if(ge=k?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Y in ge)!ge.hasOwnProperty(Y)||Se&&Se.hasOwnProperty(Y)||(m||(m={}),m[Y]="");for(Y in Se)Se.hasOwnProperty(Y)&&ge[Y]!==Se[Y]&&(m||(m={}),m[Y]=Se[Y])}else m||(A||(A=[]),A.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(A=A||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(A=A||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&ur("scroll",a),A||ge===Se||(A=[])):(A=A||[]).push(He,Se))}m&&(A=A||[]).push("style",m);var He=A;(c.updateQueue=He)&&(c.flags|=4)}},Ak=function(a,c,m,w){m!==w&&(c.flags|=4)};function ap(a,c){if(!mr)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function Ii(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(c)for(var k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags&0xe00000,w|=k.flags&0xe00000,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags,w|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=w,a.childLanes=m,c}function P$(a,c,m){var w=c.pendingProps;switch($x(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(c),null;case 1:return rs(c.type)&&Qm(),Ii(c),null;case 3:return w=c.stateNode,Vu(),dr(ns),dr(Si),Xx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Xm(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,mo!==null&&(jw(mo),mo=null))),bw(a,c),Ii(c),null;case 5:Zx(c);var k=Sc(np.current);if(m=c.type,a!==null&&c.stateNode!=null)qk(a,c,m,w,k),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return Ii(c),null}if(a=Sc(Uo.current),Xm(c)){w=c.stateNode,m=c.type;var A=c.memoizedProps;switch(w[Vo]=c,w[Zf]=A,a=(c.mode&1)!==0,m){case"dialog":ur("cancel",w),ur("close",w);break;case"iframe":case"object":case"embed":ur("load",w);break;case"video":case"audio":for(k=0;k<Qf.length;k++)ur(Qf[k],w);break;case"source":ur("error",w);break;case"img":case"image":case"link":ur("error",w),ur("load",w);break;case"details":ur("toggle",w);break;case"input":Rt(w,A),ur("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!A.multiple},ur("invalid",w);break;case"textarea":rt(w,A),ur("invalid",w)}Yi(m,A),k=null;for(var Y in A)if(A.hasOwnProperty(Y)){var ge=A[Y];Y==="children"?typeof ge=="string"?w.textContent!==ge&&(A.suppressHydrationWarning!==!0&&Um(w.textContent,ge,a),k=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(A.suppressHydrationWarning!==!0&&Um(w.textContent,ge,a),k=["children",""+ge]):i.hasOwnProperty(Y)&&ge!=null&&Y==="onScroll"&&ur("scroll",w)}switch(m){case"input":Xe(w),xe(w,A,!0);break;case"textarea":Xe(w),ut(w);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(w.onclick=Hm)}w=k,c.updateQueue=w,w!==null&&(c.flags|=4)}else{Y=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=Y.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=Y.createElement(m,{is:w.is}):(a=Y.createElement(m),m==="select"&&(Y=a,w.multiple?Y.multiple=!0:w.size&&(Y.size=w.size))):a=Y.createElementNS(a,m),a[Vo]=c,a[Zf]=w,Ok(a,c,!1,!1),c.stateNode=a;e:{switch(Y=Xi(m,w),m){case"dialog":ur("cancel",a),ur("close",a),k=w;break;case"iframe":case"object":case"embed":ur("load",a),k=w;break;case"video":case"audio":for(k=0;k<Qf.length;k++)ur(Qf[k],a);k=w;break;case"source":ur("error",a),k=w;break;case"img":case"image":case"link":ur("error",a),ur("load",a),k=w;break;case"details":ur("toggle",a),k=w;break;case"input":Rt(a,w),k=_t(a,w),ur("invalid",a);break;case"option":k=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},k=oe({},w,{value:void 0}),ur("invalid",a);break;case"textarea":rt(a,w),k=Ue(a,w),ur("invalid",a);break;default:k=w}Yi(m,k),ge=k;for(A in ge)if(ge.hasOwnProperty(A)){var Se=ge[A];A==="style"?Jt(a,Se):A==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&lr(a,Se)):A==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Ln(a,Se):typeof Se=="number"&&Ln(a,""+Se):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?Se!=null&&A==="onScroll"&&ur("scroll",a):Se!=null&&R(a,A,Se,Y))}switch(m){case"input":Xe(a),xe(a,w,!1);break;case"textarea":Xe(a),ut(a);break;case"option":w.value!=null&&a.setAttribute("value",""+Re(w.value));break;case"select":a.multiple=!!w.multiple,A=w.value,A!=null?Ae(a,!!w.multiple,A,!1):w.defaultValue!=null&&Ae(a,!!w.multiple,w.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Hm)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ii(c),null;case 6:if(a&&c.stateNode!=null)Ak(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=Sc(np.current),Sc(Uo.current),Xm(c)){if(w=c.stateNode,m=c.memoizedProps,w[Vo]=c,(A=w.nodeValue!==m)&&(a=ws,a!==null))switch(a.tag){case 3:Um(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Um(w.nodeValue,m,(a.mode&1)!==0)}A&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Vo]=c,c.stateNode=w}return Ii(c),null;case 13:if(dr(Er),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(mr&&_s!==null&&c.mode&1&&!(c.flags&128))D1(),$u(),c.flags|=98560,A=!1;else if(A=Xm(c),w!==null&&w.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Vo]=c}else $u(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Ii(c),A=!1}else mo!==null&&(jw(mo),mo=null),A=!0;if(!A)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(a===null||Er.current&1?ri===0&&(ri=3):Ow())),c.updateQueue!==null&&(c.flags|=4),Ii(c),null);case 4:return Vu(),bw(a,c),a===null&&Gf(c.stateNode.containerInfo),Ii(c),null;case 10:return Hx(c.type._context),Ii(c),null;case 17:return rs(c.type)&&Qm(),Ii(c),null;case 19:if(dr(Er),A=c.memoizedState,A===null)return Ii(c),null;if(w=(c.flags&128)!==0,Y=A.rendering,Y===null)if(w)ap(A,!1);else{if(ri!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(Y=sg(a),Y!==null){for(c.flags|=128,ap(A,!1),w=Y.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)A=m,a=w,A.flags&=0xe00002,Y=A.alternate,Y===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=Y.childLanes,A.lanes=Y.lanes,A.child=Y.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=Y.memoizedProps,A.memoizedState=Y.memoizedState,A.updateQueue=Y.updateQueue,A.type=Y.type,a=Y.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return nr(Er,Er.current&1|2),c.child}a=a.sibling}A.tail!==null&&cr()>Qu&&(c.flags|=128,w=!0,ap(A,!1),c.lanes=4194304)}else{if(!w)if(a=sg(Y),a!==null){if(c.flags|=128,w=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),ap(A,!0),A.tail===null&&A.tailMode==="hidden"&&!Y.alternate&&!mr)return Ii(c),null}else 2*cr()-A.renderingStartTime>Qu&&m!==0x40000000&&(c.flags|=128,w=!0,ap(A,!1),c.lanes=4194304);A.isBackwards?(Y.sibling=c.child,c.child=Y):(m=A.last,m!==null?m.sibling=Y:c.child=Y,A.last=Y)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=cr(),c.sibling=null,m=Er.current,nr(Er,w?m&1|2:m&1),c):(Ii(c),null);case 22:case 23:return Rw(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?Ss&0x40000000&&(Ii(c),c.subtreeFlags&6&&(c.flags|=8192)):Ii(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function F$(a,c){switch($x(c),c.tag){case 1:return rs(c.type)&&Qm(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Vu(),dr(ns),dr(Si),Xx(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Zx(c),null;case 13:if(dr(Er),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));$u()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return dr(Er),null;case 4:return Vu(),null;case 10:return Hx(c.type._context),null;case 22:case 23:return Rw(),null;case 24:return null;default:return null}}var hg=!1,Ni=!1,D$=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Hu(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Tr(a,c,w)}else m.current=null}function vw(a,c,m){try{m()}catch(w){Tr(a,c,w)}}var Pk=!1;function L$(a,c){if(Rx=Ge,a=p1(),Sx(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var k=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var Y=0,ge=-1,Se=-1,He=0,ht=0,gt=a,ft=null;t:for(;;){for(var Pt;gt!==m||k!==0&&gt.nodeType!==3||(ge=Y+k),gt!==A||w!==0&&gt.nodeType!==3||(Se=Y+w),gt.nodeType===3&&(Y+=gt.nodeValue.length),(Pt=gt.firstChild)!==null;)ft=gt,gt=Pt;for(;;){if(gt===a)break t;if(ft===m&&++He===k&&(ge=Y),ft===A&&++ht===w&&(Se=Y),(Pt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=Pt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(Ox={focusedElem:a,selectionRange:m},Ge=!1,$t=c;$t!==null;)if(c=$t,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,$t=a;else for(;$t!==null;){c=$t;try{var Bt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Vt=Bt.memoizedProps,$r=Bt.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Vt:go(c.type,Vt),$r);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){Tr(c,c.return,vt)}if(a=c.sibling,a!==null){a.return=c.return,$t=a;break}$t=c.return}return Bt=Pk,Pk=!1,Bt}function lp(a,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var k=w=w.next;do{if((k.tag&a)===a){var A=k.destroy;k.destroy=void 0,A!==void 0&&vw(c,m,A)}k=k.next}while(k!==w)}}function mg(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function xw(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function Fk(a){var c=a.alternate;c!==null&&(a.alternate=null,Fk(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Vo],delete c[Zf],delete c[Fx],delete c[x$],delete c[w$])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Dk(a){return a.tag===5||a.tag===3||a.tag===4}function Lk(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Dk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ww(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Hm));else if(w!==4&&(a=a.child,a!==null))for(ww(a,c,m),a=a.sibling;a!==null;)ww(a,c,m),a=a.sibling}function _w(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(_w(a,c,m),a=a.sibling;a!==null;)_w(a,c,m),a=a.sibling}var di=null,yo=!1;function ul(a,c,m){for(m=m.child;m!==null;)Mk(a,c,m),m=m.sibling}function Mk(a,c,m){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(el,m)}catch{}switch(m.tag){case 5:Ni||Hu(m,c);case 6:var w=di,k=yo;di=null,ul(a,c,m),di=w,yo=k,di!==null&&(yo?(a=di,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):di.removeChild(m.stateNode));break;case 18:di!==null&&(yo?(a=di,m=m.stateNode,a.nodeType===8?Px(a.parentNode,m):a.nodeType===1&&Px(a,m),je(a)):Px(di,m.stateNode));break;case 4:w=di,k=yo,di=m.stateNode.containerInfo,yo=!0,ul(a,c,m),di=w,yo=k;break;case 0:case 11:case 14:case 15:if(!Ni&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){k=w=w.next;do{var A=k,Y=A.destroy;A=A.tag,Y!==void 0&&(A&2||A&4)&&vw(m,c,Y),k=k.next}while(k!==w)}ul(a,c,m);break;case 1:if(!Ni&&(Hu(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){Tr(m,c,ge)}ul(a,c,m);break;case 21:ul(a,c,m);break;case 22:m.mode&1?(Ni=(w=Ni)||m.memoizedState!==null,ul(a,c,m),Ni=w):ul(a,c,m);break;default:ul(a,c,m)}}function $k(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new D$),c.forEach(function(w){var k=K$.bind(null,a,w);m.has(w)||(m.add(w),w.then(k,k))})}}function bo(a,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var k=m[w];try{var A=a,Y=c,ge=Y;e:for(;ge!==null;){switch(ge.tag){case 5:di=ge.stateNode,yo=!1;break e;case 3:di=ge.stateNode.containerInfo,yo=!0;break e;case 4:di=ge.stateNode.containerInfo,yo=!0;break e}ge=ge.return}if(di===null)throw Error(n(160));Mk(A,Y,k),di=null,yo=!1;var Se=k.alternate;Se!==null&&(Se.return=null),k.return=null}catch(He){Tr(k,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Bk(c,a),c=c.sibling}function Bk(a,c){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(bo(c,a),Ko(a),w&4){try{lp(3,a,a.return),mg(3,a)}catch(Vt){Tr(a,a.return,Vt)}try{lp(5,a,a.return)}catch(Vt){Tr(a,a.return,Vt)}}break;case 1:bo(c,a),Ko(a),w&512&&m!==null&&Hu(m,m.return);break;case 5:if(bo(c,a),Ko(a),w&512&&m!==null&&Hu(m,m.return),a.flags&32){var k=a.stateNode;try{Ln(k,"")}catch(Vt){Tr(a,a.return,Vt)}}if(w&4&&(k=a.stateNode,k!=null)){var A=a.memoizedProps,Y=m!==null?m.memoizedProps:A,ge=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{ge==="input"&&A.type==="radio"&&A.name!=null&&Ut(k,A),Xi(ge,Y);var He=Xi(ge,A);for(Y=0;Y<Se.length;Y+=2){var ht=Se[Y],gt=Se[Y+1];ht==="style"?Jt(k,gt):ht==="dangerouslySetInnerHTML"?lr(k,gt):ht==="children"?Ln(k,gt):R(k,ht,gt,He)}switch(ge){case"input":an(k,A);break;case"textarea":Me(k,A);break;case"select":var ft=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!A.multiple;var Pt=A.value;Pt!=null?Ae(k,!!A.multiple,Pt,!1):ft!==!!A.multiple&&(A.defaultValue!=null?Ae(k,!!A.multiple,A.defaultValue,!0):Ae(k,!!A.multiple,A.multiple?[]:"",!1))}k[Zf]=A}catch(Vt){Tr(a,a.return,Vt)}}break;case 6:if(bo(c,a),Ko(a),w&4){if(a.stateNode===null)throw Error(n(162));k=a.stateNode,A=a.memoizedProps;try{k.nodeValue=A}catch(Vt){Tr(a,a.return,Vt)}}break;case 3:if(bo(c,a),Ko(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{je(c.containerInfo)}catch(Vt){Tr(a,a.return,Vt)}break;case 4:bo(c,a),Ko(a);break;case 13:bo(c,a),Ko(a),k=a.child,k.flags&8192&&(A=k.memoizedState!==null,k.stateNode.isHidden=A,!A||k.alternate!==null&&k.alternate.memoizedState!==null||(Iw=cr())),w&4&&$k(a);break;case 22:if(ht=m!==null&&m.memoizedState!==null,a.mode&1?(Ni=(He=Ni)||ht,bo(c,a),Ni=He):bo(c,a),Ko(a),w&8192){if(He=a.memoizedState!==null,(a.stateNode.isHidden=He)&&!ht&&a.mode&1)for($t=a,ht=a.child;ht!==null;){for(gt=$t=ht;$t!==null;){switch(ft=$t,Pt=ft.child,ft.tag){case 0:case 11:case 14:case 15:lp(4,ft,ft.return);break;case 1:Hu(ft,ft.return);var Bt=ft.stateNode;if(typeof Bt.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,Bt.props=c.memoizedProps,Bt.state=c.memoizedState,Bt.componentWillUnmount()}catch(Vt){Tr(w,m,Vt)}}break;case 5:Hu(ft,ft.return);break;case 22:if(ft.memoizedState!==null){Vk(gt);continue}}Pt!==null?(Pt.return=ft,$t=Pt):Vk(gt)}ht=ht.sibling}e:for(ht=null,gt=a;;){if(gt.tag===5){if(ht===null){ht=gt;try{k=gt.stateNode,He?(A=k.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Y=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=_r("display",Y))}catch(Vt){Tr(a,a.return,Vt)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Vt){Tr(a,a.return,Vt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===a)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===a)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===a)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:bo(c,a),Ko(a),w&4&&$k(a);break;case 21:break;default:bo(c,a),Ko(a)}}function Ko(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(Dk(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var k=w.stateNode;w.flags&32&&(Ln(k,""),w.flags&=-33);var A=Lk(a);_w(a,A,k);break;case 3:case 4:var Y=w.stateNode.containerInfo,ge=Lk(a);ww(a,ge,Y);break;default:throw Error(n(161))}}catch(Se){Tr(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function M$(a,c,m){$t=a,zk(a)}function zk(a,c,m){for(var w=(a.mode&1)!==0;$t!==null;){var k=$t,A=k.child;if(k.tag===22&&w){var Y=k.memoizedState!==null||hg;if(!Y){var ge=k.alternate,Se=ge!==null&&ge.memoizedState!==null||Ni;ge=hg;var He=Ni;if(hg=Y,(Ni=Se)&&!He)for($t=k;$t!==null;)Y=$t,Se=Y.child,Y.tag===22&&Y.memoizedState!==null?Uk(k):Se!==null?(Se.return=Y,$t=Se):Uk(k);for(;A!==null;)$t=A,zk(A),A=A.sibling;$t=k,hg=ge,Ni=He}Wk(a)}else k.subtreeFlags&8772&&A!==null?(A.return=k,$t=A):Wk(a)}}function Wk(a){for(;$t!==null;){var c=$t;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ni||mg(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Ni)if(m===null)w.componentDidMount();else{var k=c.elementType===c.type?m.memoizedProps:go(c.type,m.memoizedProps);w.componentDidUpdate(k,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var A=c.updateQueue;A!==null&&V1(c,A,w);break;case 3:var Y=c.updateQueue;if(Y!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}V1(c,Y,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&je(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ni||c.flags&512&&xw(c)}catch(ft){Tr(c,c.return,ft)}}if(c===a){$t=null;break}if(m=c.sibling,m!==null){m.return=c.return,$t=m;break}$t=c.return}}function Vk(a){for(;$t!==null;){var c=$t;if(c===a){$t=null;break}var m=c.sibling;if(m!==null){m.return=c.return,$t=m;break}$t=c.return}}function Uk(a){for(;$t!==null;){var c=$t;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{mg(4,c)}catch(Se){Tr(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var k=c.return;try{w.componentDidMount()}catch(Se){Tr(c,k,Se)}}var A=c.return;try{xw(c)}catch(Se){Tr(c,A,Se)}break;case 5:var Y=c.return;try{xw(c)}catch(Se){Tr(c,Y,Se)}}}catch(Se){Tr(c,c.return,Se)}if(c===a){$t=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,$t=ge;break}$t=c.return}}var $$=Math.ceil,gg=q.ReactCurrentDispatcher,Sw=q.ReactCurrentOwner,Zs=q.ReactCurrentBatchConfig,qn=0,oi=null,Qr=null,fi=0,Ss=0,Ku=sl(0),ri=0,cp=null,Ic=0,yg=0,Ew=0,up=null,ss=null,Iw=0,Qu=1/0,Ia=null,bg=!1,Nw=null,dl=null,vg=!1,fl=null,xg=0,dp=0,kw=null,wg=-1,_g=0;function $i(){return qn&6?cr():wg!==-1?wg:wg=cr()}function pl(a){return a.mode&1?qn&2&&fi!==0?fi&-fi:S$.transition!==null?(_g===0&&(_g=Dm()),_g):(a=Mn,a!==0||(a=window.event,a=a===void 0?16:Ee(a.type)),a):1}function vo(a,c,m,w){if(50<dp)throw dp=0,kw=null,Error(n(185));gc(a,m,w),(!(qn&2)||a!==oi)&&(a===oi&&(!(qn&2)&&(yg|=m),ri===4&&hl(a,fi)),os(a,w),m===1&&qn===0&&!(c.mode&1)&&(Qu=cr()+500,Jm&&al()))}function os(a,c){var m=a.callbackNode;mx(a,c);var w=nl(a,a===oi?fi:0);if(w===0)m!==null&&pc(m),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(m!=null&&pc(m),c===1)a.tag===0?_$(Kk.bind(null,a)):O1(Kk.bind(null,a)),b$(function(){!(qn&6)&&al()}),m=null;else{switch(Lm(w)){case 1:m=hc;break;case 4:m=ju;break;case 16:m=Xa;break;case 0x20000000:m=mc;break;default:m=Xa}m=tC(m,Hk.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function Hk(a,c){if(wg=-1,_g=0,qn&6)throw Error(n(327));var m=a.callbackNode;if(Gu()&&a.callbackNode!==m)return null;var w=nl(a,a===oi?fi:0);if(w===0)return null;if(w&30||w&a.expiredLanes||c)c=Sg(a,w);else{c=w;var k=qn;qn|=2;var A=Gk();(oi!==a||fi!==c)&&(Ia=null,Qu=cr()+500,kc(a,c));do try{W$();break}catch(ge){Qk(a,ge)}while(!0);Ux(),gg.current=A,qn=k,Qr!==null?c=0:(oi=null,fi=0,c=ri)}if(c!==0){if(c===2&&(k=Ff(a),k!==0&&(w=k,c=Cw(a,k))),c===1)throw m=cp,kc(a,0),hl(a,w),os(a,cr()),m;if(c===6)hl(a,w);else{if(k=a.current.alternate,!(w&30)&&!B$(k)&&(c=Sg(a,w),c===2&&(A=Ff(a),A!==0&&(w=A,c=Cw(a,A))),c===1))throw m=cp,kc(a,0),hl(a,w),os(a,cr()),m;switch(a.finishedWork=k,a.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:Cc(a,ss,Ia);break;case 3:if(hl(a,w),(w&0x7c00000)===w&&(c=Iw+500-cr(),10<c)){if(nl(a,0)!==0)break;if(k=a.suspendedLanes,(k&w)!==w){$i(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=Ax(Cc.bind(null,a,ss,Ia),c);break}Cc(a,ss,Ia);break;case 4:if(hl(a,w),(w&4194240)===w)break;for(c=a.eventTimes,k=-1;0<w;){var Y=31-_i(w);A=1<<Y,Y=c[Y],Y>k&&(k=Y),w&=~A}if(w=k,w=cr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*$$(w/1960))-w,10<w){a.timeoutHandle=Ax(Cc.bind(null,a,ss,Ia),w);break}Cc(a,ss,Ia);break;case 5:Cc(a,ss,Ia);break;default:throw Error(n(329))}}}return os(a,cr()),a.callbackNode===m?Hk.bind(null,a):null}function Cw(a,c){var m=up;return a.current.memoizedState.isDehydrated&&(kc(a,c).flags|=256),a=Sg(a,c),a!==2&&(c=ss,ss=m,c!==null&&jw(c)),a}function jw(a){ss===null?ss=a:ss.push.apply(ss,a)}function B$(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var k=m[w],A=k.getSnapshot;k=k.value;try{if(!ho(A(),k))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function hl(a,c){for(c&=~Ew,c&=~yg,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-_i(c),w=1<<m;a[m]=-1,c&=~w}}function Kk(a){if(qn&6)throw Error(n(327));Gu();var c=nl(a,0);if(!(c&1))return os(a,cr()),null;var m=Sg(a,c);if(a.tag!==0&&m===2){var w=Ff(a);w!==0&&(c=w,m=Cw(a,w))}if(m===1)throw m=cp,kc(a,0),hl(a,c),os(a,cr()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Cc(a,ss,Ia),os(a,cr()),null}function Tw(a,c){var m=qn;qn|=1;try{return a(c)}finally{qn=m,qn===0&&(Qu=cr()+500,Jm&&al())}}function Nc(a){fl!==null&&fl.tag===0&&!(qn&6)&&Gu();var c=qn;qn|=1;var m=Zs.transition,w=Mn;try{if(Zs.transition=null,Mn=1,a)return a()}finally{Mn=w,Zs.transition=m,qn=c,!(qn&6)&&al()}}function Rw(){Ss=Ku.current,dr(Ku)}function kc(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,y$(m)),Qr!==null)for(m=Qr.return;m!==null;){var w=m;switch($x(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Qm();break;case 3:Vu(),dr(ns),dr(Si),Xx();break;case 5:Zx(w);break;case 4:Vu();break;case 13:dr(Er);break;case 19:dr(Er);break;case 10:Hx(w.type._context);break;case 22:case 23:Rw()}m=m.return}if(oi=a,Qr=a=ml(a.current,null),fi=Ss=c,ri=0,cp=null,Ew=yg=Ic=0,ss=up=null,_c!==null){for(c=0;c<_c.length;c++)if(m=_c[c],w=m.interleaved,w!==null){m.interleaved=null;var k=w.next,A=m.pending;if(A!==null){var Y=A.next;A.next=k,w.next=Y}m.pending=w}_c=null}return a}function Qk(a,c){do{var m=Qr;try{if(Ux(),og.current=ug,ag){for(var w=Ir.memoizedState;w!==null;){var k=w.queue;k!==null&&(k.pending=null),w=w.next}ag=!1}if(Ec=0,si=ni=Ir=null,rp=!1,ip=0,Sw.current=null,m===null||m.return===null){ri=1,cp=c,Qr=null;break}e:{var A=a,Y=m.return,ge=m,Se=c;if(c=fi,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var Pt=vk(Y);if(Pt!==null){Pt.flags&=-257,xk(Pt,Y,ge,A,c),Pt.mode&1&&bk(A,He,c),c=Pt,Se=He;var Bt=c.updateQueue;if(Bt===null){var Vt=new Set;Vt.add(Se),c.updateQueue=Vt}else Bt.add(Se);break e}else{if(!(c&1)){bk(A,He,c),Ow();break e}Se=Error(n(426))}}else if(mr&&ge.mode&1){var $r=vk(Y);if($r!==null){!($r.flags&65536)&&($r.flags|=256),xk($r,Y,ge,A,c),Wx(Uu(Se,ge));break e}}A=Se=Uu(Se,ge),ri!==4&&(ri=2),up===null?up=[A]:up.push(A),A=Y;do{switch(A.tag){case 3:A.flags|=65536,c&=-c,A.lanes|=c;var Fe=gk(A,Se,c);W1(A,Fe);break e;case 1:ge=Se;var Ce=A.type,$e=A.stateNode;if(!(A.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(dl===null||!dl.has($e)))){A.flags|=65536,c&=-c,A.lanes|=c;var vt=yk(A,ge,c);W1(A,vt);break e}}A=A.return}while(A!==null)}Zk(m)}catch(Ht){c=Ht,Qr===m&&m!==null&&(Qr=m=m.return);continue}break}while(!0)}function Gk(){var a=gg.current;return gg.current=ug,a===null?ug:a}function Ow(){(ri===0||ri===3||ri===2)&&(ri=4),oi===null||!(Ic&0xfffffff)&&!(yg&0xfffffff)||hl(oi,fi)}function Sg(a,c){var m=qn;qn|=2;var w=Gk();(oi!==a||fi!==c)&&(Ia=null,kc(a,c));do try{z$();break}catch(k){Qk(a,k)}while(!0);if(Ux(),qn=m,gg.current=w,Qr!==null)throw Error(n(261));return oi=null,fi=0,ri}function z$(){for(;Qr!==null;)Jk(Qr)}function W$(){for(;Qr!==null&&!Cu();)Jk(Qr)}function Jk(a){var c=eC(a.alternate,a,Ss);a.memoizedProps=a.pendingProps,c===null?Zk(a):Qr=c,Sw.current=null}function Zk(a){var c=a;do{var m=c.alternate;if(a=c.return,c.flags&32768){if(m=F$(m,c),m!==null){m.flags&=32767,Qr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ri=6,Qr=null;return}}else if(m=P$(m,c,Ss),m!==null){Qr=m;return}if(c=c.sibling,c!==null){Qr=c;return}Qr=c=a}while(c!==null);ri===0&&(ri=5)}function Cc(a,c,m){var w=Mn,k=Zs.transition;try{Zs.transition=null,Mn=1,V$(a,c,m,w)}finally{Zs.transition=k,Mn=w}return null}function V$(a,c,m,w){do Gu();while(fl!==null);if(qn&6)throw Error(n(327));m=a.finishedWork;var k=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var A=m.lanes|m.childLanes;if(gx(a,A),a===oi&&(Qr=oi=null,fi=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||vg||(vg=!0,tC(Xa,function(){return Gu(),null})),A=(m.flags&15990)!==0,m.subtreeFlags&15990||A){A=Zs.transition,Zs.transition=null;var Y=Mn;Mn=1;var ge=qn;qn|=4,Sw.current=null,L$(a,m),Bk(m,a),u$(Ox),Ge=!!Rx,Ox=Rx=null,a.current=m,M$(m),jf(),qn=ge,Mn=Y,Zs.transition=A}else a.current=m;if(vg&&(vg=!1,fl=a,xg=k),A=a.pendingLanes,A===0&&(dl=null),Of(m.stateNode),os(a,cr()),c!==null)for(w=a.onRecoverableError,m=0;m<c.length;m++)k=c[m],w(k.value,{componentStack:k.stack,digest:k.digest});if(bg)throw bg=!1,a=Nw,Nw=null,a;return xg&1&&a.tag!==0&&Gu(),A=a.pendingLanes,A&1?a===kw?dp++:(dp=0,kw=a):dp=0,al(),null}function Gu(){if(fl!==null){var a=Lm(xg),c=Zs.transition,m=Mn;try{if(Zs.transition=null,Mn=16>a?16:a,fl===null)var w=!1;else{if(a=fl,fl=null,xg=0,qn&6)throw Error(n(331));var k=qn;for(qn|=4,$t=a.current;$t!==null;){var A=$t,Y=A.child;if($t.flags&16){var ge=A.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for($t=He;$t!==null;){var ht=$t;switch(ht.tag){case 0:case 11:case 15:lp(8,ht,A)}var gt=ht.child;if(gt!==null)gt.return=ht,$t=gt;else for(;$t!==null;){ht=$t;var ft=ht.sibling,Pt=ht.return;if(Fk(ht),ht===He){$t=null;break}if(ft!==null){ft.return=Pt,$t=ft;break}$t=Pt}}}var Bt=A.alternate;if(Bt!==null){var Vt=Bt.child;if(Vt!==null){Bt.child=null;do{var $r=Vt.sibling;Vt.sibling=null,Vt=$r}while(Vt!==null)}}$t=A}}if(A.subtreeFlags&2064&&Y!==null)Y.return=A,$t=Y;else e:for(;$t!==null;){if(A=$t,A.flags&2048)switch(A.tag){case 0:case 11:case 15:lp(9,A,A.return)}var Fe=A.sibling;if(Fe!==null){Fe.return=A.return,$t=Fe;break e}$t=A.return}}var Ce=a.current;for($t=Ce;$t!==null;){Y=$t;var $e=Y.child;if(Y.subtreeFlags&2064&&$e!==null)$e.return=Y,$t=$e;else e:for(Y=Ce;$t!==null;){if(ge=$t,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:mg(9,ge)}}catch(Ht){Tr(ge,ge.return,Ht)}if(ge===Y){$t=null;break e}var vt=ge.sibling;if(vt!==null){vt.return=ge.return,$t=vt;break e}$t=ge.return}}if(qn=k,al(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(el,a)}catch{}w=!0}return w}finally{Mn=m,Zs.transition=c}}return!1}function Yk(a,c,m){c=Uu(m,c),c=gk(a,c,1),a=cl(a,c,1),c=$i(),a!==null&&(gc(a,1,c),os(a,c))}function Tr(a,c,m){if(a.tag===3)Yk(a,a,m);else for(;c!==null;){if(c.tag===3){Yk(c,a,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(dl===null||!dl.has(w))){a=Uu(m,a),a=yk(c,a,1),c=cl(c,a,1),a=$i(),c!==null&&(gc(c,1,a),os(c,a));break}}c=c.return}}function U$(a,c,m){var w=a.pingCache;w!==null&&w.delete(c),c=$i(),a.pingedLanes|=a.suspendedLanes&m,oi===a&&(fi&m)===m&&(ri===4||ri===3&&(fi&0x7c00000)===fi&&500>cr()-Iw?kc(a,0):Ew|=m),os(a,c)}function Xk(a,c){c===0&&(a.mode&1?(c=tl,tl<<=1,!(tl&0x7c00000)&&(tl=4194304)):c=1);var m=$i();a=_a(a,c),a!==null&&(gc(a,c,m),os(a,m))}function H$(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),Xk(a,m)}function K$(a,c){var m=0;switch(a.tag){case 13:var w=a.stateNode,k=a.memoizedState;k!==null&&(m=k.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),Xk(a,m)}var eC;eC=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||ns.current)is=!0;else{if(!(a.lanes&m)&&!(c.flags&128))return is=!1,A$(a,c,m);is=!!(a.flags&131072)}else is=!1,mr&&c.flags&1048576&&q1(c,Ym,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;pg(a,c),a=c.pendingProps;var k=Du(c,Si.current);Wu(c,m),k=nw(null,c,w,a,k,m);var A=rw();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,rs(w)?(A=!0,Gm(c)):A=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Gx(c),k.updater=dg,c.stateNode=k,k._reactInternals=c,cw(c,w,a,m),c=pw(null,c,w,!0,A,m)):(c.tag=0,mr&&A&&Mx(c),Mi(null,c,k,m),c=c.child),c;case 16:w=c.elementType;e:{switch(pg(a,c),a=c.pendingProps,k=w._init,w=k(w._payload),c.type=w,k=c.tag=G$(w),a=go(w,a),k){case 0:c=fw(null,c,w,a,m);break e;case 1:c=Nk(null,c,w,a,m);break e;case 11:c=wk(null,c,w,a,m);break e;case 14:c=_k(null,c,w,go(w.type,a),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),fw(a,c,w,k,m);case 1:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),Nk(a,c,w,k,m);case 3:e:{if(kk(c),a===null)throw Error(n(387));w=c.pendingProps,A=c.memoizedState,k=A.element,z1(a,c),ig(c,w,null,m);var Y=c.memoizedState;if(w=Y.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){k=Uu(Error(n(423)),c),c=Ck(a,c,w,m,k);break e}else if(w!==k){k=Uu(Error(n(424)),c),c=Ck(a,c,w,m,k);break e}else for(_s=il(c.stateNode.containerInfo.firstChild),ws=c,mr=!0,mo=null,m=$1(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if($u(),w===k){c=Ea(a,c,m);break e}Mi(a,c,w,m)}c=c.child}return c;case 5:return U1(c),a===null&&zx(c),w=c.type,k=c.pendingProps,A=a!==null?a.memoizedProps:null,Y=k.children,qx(w,k)?Y=null:A!==null&&qx(w,A)&&(c.flags|=32),Ik(a,c),Mi(a,c,Y,m),c.child;case 6:return a===null&&zx(c),null;case 13:return jk(a,c,m);case 4:return Jx(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=Bu(c,null,w,m):Mi(a,c,w,m),c.child;case 11:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),wk(a,c,w,k,m);case 7:return Mi(a,c,c.pendingProps,m),c.child;case 8:return Mi(a,c,c.pendingProps.children,m),c.child;case 12:return Mi(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,k=c.pendingProps,A=c.memoizedProps,Y=k.value,nr(tg,w._currentValue),w._currentValue=Y,A!==null)if(ho(A.value,Y)){if(A.children===k.children&&!ns.current){c=Ea(a,c,m);break e}}else for(A=c.child,A!==null&&(A.return=c);A!==null;){var ge=A.dependencies;if(ge!==null){Y=A.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(A.tag===1){Se=Sa(-1,m&-m),Se.tag=2;var He=A.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}A.lanes|=m,Se=A.alternate,Se!==null&&(Se.lanes|=m),Kx(A.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(A.tag===10)Y=A.type===c.type?null:A.child;else if(A.tag===18){if(Y=A.return,Y===null)throw Error(n(341));Y.lanes|=m,ge=Y.alternate,ge!==null&&(ge.lanes|=m),Kx(Y,m,c),Y=A.sibling}else Y=A.child;if(Y!==null)Y.return=A;else for(Y=A;Y!==null;){if(Y===c){Y=null;break}if(A=Y.sibling,A!==null){A.return=Y.return,Y=A;break}Y=Y.return}A=Y}Mi(a,c,k.children,m),c=c.child}return c;case 9:return k=c.type,w=c.pendingProps.children,Wu(c,m),k=Gs(k),w=w(k),c.flags|=1,Mi(a,c,w,m),c.child;case 14:return w=c.type,k=go(w,c.pendingProps),k=go(w.type,k),_k(a,c,w,k,m);case 15:return Sk(a,c,c.type,c.pendingProps,m);case 17:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:go(w,k),pg(a,c),c.tag=1,rs(w)?(a=!0,Gm(c)):a=!1,Wu(c,m),hk(c,w,k),cw(c,w,k,m),pw(null,c,w,!0,a,m);case 19:return Rk(a,c,m);case 22:return Ek(a,c,m)}throw Error(n(156,c.tag))};function tC(a,c){return ku(a,c)}function Q$(a,c,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(a,c,m,w){return new Q$(a,c,m,w)}function qw(a){return a=a.prototype,!(!a||!a.isReactComponent)}function G$(a){if(typeof a=="function")return qw(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===G)return 14}return 2}function ml(a,c){var m=a.alternate;return m===null?(m=Ys(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&0xe00000,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function Eg(a,c,m,w,k,A){var Y=2;if(w=a,typeof a=="function")qw(a)&&(Y=1);else if(typeof a=="string")Y=5;else e:switch(a){case W:return jc(m.children,k,A,c);case P:Y=8,k|=8;break;case O:return a=Ys(12,m,c,k|2),a.elementType=O,a.lanes=A,a;case U:return a=Ys(13,m,c,k),a.elementType=U,a.lanes=A,a;case B:return a=Ys(19,m,c,k),a.elementType=B,a.lanes=A,a;case le:return Ig(m,k,A,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:Y=10;break e;case D:Y=9;break e;case V:Y=11;break e;case G:Y=14;break e;case Z:Y=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Ys(Y,m,c,k),c.elementType=a,c.type=w,c.lanes=A,c}function jc(a,c,m,w){return a=Ys(7,a,w,c),a.lanes=m,a}function Ig(a,c,m,w){return a=Ys(22,a,w,c),a.elementType=le,a.lanes=m,a.stateNode={isHidden:!1},a}function Aw(a,c,m){return a=Ys(6,a,null,c),a.lanes=m,a}function Pw(a,c,m){return c=Ys(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function J$(a,c,m,w,k){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Df(0),this.expirationTimes=Df(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Df(0),this.identifierPrefix=w,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Fw(a,c,m,w,k,A,Y,ge,Se){return a=new J$(a,c,m,ge,Se),c===1?(c=1,A===!0&&(c|=8)):c=0,A=Ys(3,null,null,c),a.current=A,A.stateNode=a,A.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gx(A),a}function Z$(a,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:w==null?null:""+w,children:a,containerInfo:c,implementation:m}}function nC(a){if(!a)return ol;a=a._reactInternals;e:{if(Us(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(rs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(rs(m))return T1(a,m,c)}return c}function rC(a,c,m,w,k,A,Y,ge,Se){return a=Fw(m,w,!0,a,k,A,Y,ge,Se),a.context=nC(null),m=a.current,w=$i(),k=pl(m),A=Sa(w,k),A.callback=c??null,cl(m,A,k),a.current.lanes=k,gc(a,k,w),os(a,w),a}function Ng(a,c,m,w){var k=c.current,A=$i(),Y=pl(k);return m=nC(m),c.context===null?c.context=m:c.pendingContext=m,c=Sa(A,Y),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=cl(k,c,Y),a!==null&&(vo(a,k,Y,A),rg(a,k,Y)),Y}function kg(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function iC(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function Dw(a,c){iC(a,c),(a=a.alternate)&&iC(a,c)}var sC=typeof reportError=="function"?reportError:function(a){console.error(a)};function Lw(a){this._internalRoot=a}Cg.prototype.render=Lw.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));Ng(a,c,null,null)},Cg.prototype.unmount=Lw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Nc(function(){Ng(null,a,null,null)}),c[ba]=null}};function Cg(a){this._internalRoot=a}Cg.prototype.unstable_scheduleHydration=function(a){if(a){var c=yc();a={blockedOn:null,target:a,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,a),m===0&&Be(a)}};function Mw(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function jg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function oC(){}function Y$(a,c,m,w,k){if(k){if(typeof w=="function"){var A=w;w=function(){var He=kg(Y);A.call(He)}}var Y=rC(c,w,a,0,null,!1,!1,"",oC);return a._reactRootContainer=Y,a[ba]=Y.current,Gf(a.nodeType===8?a.parentNode:a),Nc(),Y}for(;k=a.lastChild;)a.removeChild(k);if(typeof w=="function"){var ge=w;w=function(){var He=kg(Se);ge.call(He)}}var Se=Fw(a,0,!1,null,null,!1,!1,"",oC);return a._reactRootContainer=Se,a[ba]=Se.current,Gf(a.nodeType===8?a.parentNode:a),Nc(function(){Ng(c,Se,m,w)}),Se}function Tg(a,c,m,w,k){var A=m._reactRootContainer;if(A){var Y=A;if(typeof k=="function"){var ge=k;k=function(){var Se=kg(Y);ge.call(Se)}}Ng(c,Y,a,k)}else Y=Y$(m,c,a,k,w);return kg(Y)}Mf=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Li(c.pendingLanes);m!==0&&(Lf(c,m|1),os(c,cr()),!(qn&6)&&(Qu=cr()+500,al()))}break;case 13:Nc(function(){var w=_a(a,1);if(w!==null){var k=$i();vo(w,a,1,k)}}),Dw(a,1)}},he=function(a){if(a.tag===13){var c=_a(a,0x8000000);if(c!==null){var m=$i();vo(c,a,0x8000000,m)}Dw(a,0x8000000)}},$f=function(a){if(a.tag===13){var c=pl(a),m=_a(a,c);if(m!==null){var w=$i();vo(m,a,c,w)}Dw(a,c)}},yc=function(){return Mn},Bf=function(a,c){var m=Mn;try{return Mn=a,c()}finally{Mn=m}},uc=function(a,c,m){switch(c){case"input":if(an(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==a&&w.form===a.form){var k=Km(w);if(!k)throw Error(n(90));Ve(w),an(w,k)}}}break;case"textarea":Me(a,m);break;case"select":c=m.value,c!=null&&Ae(a,!!m.multiple,c,!1)}},xu=Tw,wu=Nc;var X$={usingClientEntryPoint:!1,Events:[Yf,Pu,Km,hn,vu,Tw]},fp={findFiberByHostInstance:bc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eB={bundleType:fp.bundleType,version:fp.version,rendererPackageName:fp.rendererPackageName,rendererConfig:fp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Iu(a),a===null?null:a.stateNode},findFiberByHostInstance:fp.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{el=Rg.inject(eB),ts=Rg}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X$,as.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mw(c))throw Error(n(200));return Z$(a,c,null,m)},as.createRoot=function(a,c){if(!Mw(a))throw Error(n(299));var m=!1,w="",k=sC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Fw(a,1,!1,null,null,m,!1,w,k),a[ba]=c.current,Gf(a.nodeType===8?a.parentNode:a),new Lw(c)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Iu(c),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return Nc(a)},as.hydrate=function(a,c,m){if(!jg(c))throw Error(n(200));return Tg(null,a,c,!0,m)},as.hydrateRoot=function(a,c,m){if(!Mw(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,k=!1,A="",Y=sC;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(Y=m.onRecoverableError)),c=rC(c,null,a,1,m??null,k,!1,A,Y),a[ba]=c.current,Gf(a),w)for(a=0;a<w.length;a++)m=w[a],k=m._getVersion,k=k(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,k]:c.mutableSourceEagerHydrationData.push(m,k);return new Cg(c)},as.render=function(a,c,m){if(!jg(c))throw Error(n(200));return Tg(null,a,c,!1,m)},as.unmountComponentAtNode=function(a){if(!jg(a))throw Error(n(40));return a._reactRootContainer?(Nc(function(){Tg(null,null,a,!1,function(){a._reactRootContainer=null,a[ba]=null})}),!0):!1},as.unstable_batchedUpdates=Tw,as.unstable_renderSubtreeIntoContainer=function(a,c,m,w){if(!jg(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Tg(a,c,m,!1,w)},as.version="18.3.1-next-f1338f8080-20240426",as}var DC;function G3(){if(DC)return e_.exports;DC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),e_.exports=P4(),e_.exports}var em=G3();const F4="Error preloading route! ";function D4(t,e){const n=Lo(),[r,i]=H.useState(!1),s=H.useRef(!1),o=c4(e),{activeProps:l=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:f,to:p,preload:h,preloadDelay:b,hashScrollIntoView:x,replace:_,startTransition:E,resetScroll:N,viewTransition:j,children:C,target:R,disabled:q,style:L,className:M,onClick:W,onFocus:P,onMouseEnter:O,onMouseLeave:z,onTouchStart:D,ignoreBlocker:V,...U}=t,{params:B,search:G,hash:Z,state:le,mask:ie,reloadDocument:ne,...oe}=U,te=H.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ue=Ki({select:Ne=>Ne.location.search,structuralSharing:!0});t={from:Ul({strict:!1,select:Ne=>Ne.pathname}),...t};const ye=H.useMemo(()=>n.buildLocation(t),[n,t,ue]),we=H.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ie=b??n.options.defaultPreloadDelay??0,ze=Ki({select:Ne=>{if(f?.exact){if(!d4(Ne.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=ob(Ne.location.pathname,n.basepath).split("/");if(!ob(ye.pathname,n.basepath).split("/").every((Me,ut)=>Me===Ae[ut]))return!1}return(f?.includeSearch??!0)&&!Ed(Ne.location.search,ye.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?Ne.location.hash===ye.hash:!0}}),Re=H.useCallback(()=>{n.preloadRoute(t).catch(Ne=>{console.warn(Ne),console.warn(F4)})},[t,n]),De=H.useCallback(Ne=>{Ne?.isIntersecting&&Re()},[Re]);if(l4(o,De,{rootMargin:"100px"},{disabled:!!q||we!=="viewport"}),Tp(()=>{s.current||!q&&we==="render"&&(Re(),s.current=!0)},[q,Re,we]),te==="external")return{...oe,ref:o,type:te,href:p,...C&&{children:C},...R&&{target:R},...q&&{disabled:q},...L&&{style:L},...M&&{className:M},...W&&{onClick:W},...P&&{onFocus:P},...O&&{onMouseEnter:O},...z&&{onMouseLeave:z},...D&&{onTouchStart:D}};const Je=Ne=>{if(!q&&!M4(Ne)&&!Ne.defaultPrevented&&(!R||R==="_self")&&Ne.button===0){Ne.preventDefault(),em.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:_,resetScroll:N,hashScrollIntoView:x,startTransition:E,viewTransition:j,ignoreBlocker:V})}},Xe=Ne=>{q||we&&Re()},Ve=Xe,ct=Ne=>{if(q)return;const Ae=Ne.target||{};if(we){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,Re()},Ie)}},_t=Ne=>{if(q)return;const Ae=Ne.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},Rt=Ne=>Ae=>{var Ue;(Ue=Ae.persist)==null||Ue.call(Ae),Ne.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Ut=ze?Bc(l,{})??{}:{},an=ze?{}:Bc(u,{}),xe=[M,Ut.className,an.className].filter(Boolean).join(" "),be={...L,...Ut.style,...an.style};return{...oe,...Ut,...an,href:q?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:Rt([W,Je]),onFocus:Rt([P,Xe]),onMouseEnter:Rt([O,ct]),onMouseLeave:Rt([z,_t]),onTouchStart:Rt([D,Ve]),disabled:!!q,target:R,...Object.keys(be).length&&{style:be},...xe&&{className:xe},...q&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function J3(t){return H.forwardRef(function(n,r){return d.jsx(L4,{...n,_asChild:t,ref:r})})}const L4=H.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=D4(r,e),l=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,H.createElement(n||"a",{...o,ref:s},l)});function M4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $4(){const t=Lo(),e=H.useRef({router:t,mounted:!1}),n=Ki({select:({isLoading:h})=>h}),[r,i]=H.useState(!1),s=Ki({select:h=>h.matches.some(b=>b.status==="pending"),structuralSharing:!0}),o=Zw(n),l=n||r||s,u=Zw(l),f=n||s,p=Zw(f);return t.isServer||(t.startReactTransition=h=>{i(!0),H.startTransition(()=>{h(),i(!1)})}),H.useEffect(()=>{const h=t.history.subscribe(t.load),b=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return zc(t.latestLocation.href)!==zc(b.href)&&t.commitLocation({...b,replace:!0}),()=>{h()}},[t,t.history]),Tp(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Tp(()=>{if(o&&!n){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onLoad",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),Tp(()=>{if(p&&!f){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[f,p,t]),Tp(()=>{if(u&&!l){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;if(t.emit({type:"onResolved",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(E=>({...E,status:"idle",resolvedLocation:E.location})),typeof document<"u"&&document.querySelector){const E=t.state.location.state.__hashScrollIntoViewOptions??!0;if(E&&t.state.location.hash!==""){const N=document.getElementById(t.state.location.hash);N&&N.scrollIntoView(E)}}}},[l,u,t]),null}function B4(){const t=Lo(),e=t.options.defaultPendingComponent?d.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?gy:H.Suspense,r=d.jsxs(n,{fallback:e,children:[d.jsx($4,{}),d.jsx(z4,{})]});return t.options.InnerWrap?d.jsx(t.options.InnerWrap,{children:r}):r}function z4(){const t=Ki({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Ki({select:n=>n.loadedAt});return d.jsx(pv.Provider,{value:t,children:d.jsx(mI,{getResetKey:()=>e,errorComponent:fv,onCatch:n=>{n.message||n.toString()},children:t?d.jsx(Q3,{matchId:t}):null})})}function W4(){const t=Lo();return Ki({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),H.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function V4({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=B3(),i=d.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?d.jsx(t.options.Wrap,{children:i}):i}function U4({router:t,...e}){return d.jsx(V4,{router:t,...e,children:d.jsx(B4,{})})}const H4=typeof window<"u"?H.useLayoutEffect:H.useEffect,r_="window",LC="___";let i_=new WeakSet;const K4=typeof window<"u"&&window.sessionStorage,_o=K4?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{_o.state=Bc(n,_o.state),window.sessionStorage.setItem(t,JSON.stringify(_o.state))}}})():void 0,Q4=t=>t.state.key||t.href;function G4(t){const e=Lo();H4(()=>{const n=t?.getKey||Q4,{history:r}=window;r.scrollRestoration="manual";const i=l=>{if(i_.has(l.target))return;i_.add(l.target);let u="";if(l.target===document||l.target===window)u=r_;else{const f=l.target.getAttribute("data-scroll-restoration-id");f?u=`[data-scroll-restoration-id="${f}"]`:u=Z4(l.target)}_o.state.next[u]||_o.set(f=>({...f,next:{...f.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",l=>{if(l.hrefChanged){const u=n(l.fromLocation);for(const f in _o.state.next){const p=_o.state.next[f];if(f===r_)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(f){const h=document.querySelector(f);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}_o.set(h=>{const b={...h.next};return delete b[f],{...h,next:b,cached:{...h.cached,[[u,f].join(LC)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",l=>{if(l.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(l.toLocation);let f=!1;for(const p in _o.state.cached){const h=_o.state.cached[p],[b,x]=p.split(LC);if(b===u){if(x===r_)f=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}f||window.scrollTo(0,0),_o.set(p=>({...p,next:{}})),i_=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function J4(t){return G4(t),null}function Z4(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function pr(t){return Ul({...t,select:e=>t.select?t.select(e.context):e.context})}let Y4={data:""},X4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Y4,ez=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tz=/\/\*[^]*?\*\/|  +/g,MC=/\n+/g,jl=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?jl(o,s):s+"{"+jl(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=jl(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=jl.p?jl.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Na={},Z3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Z3(t[n]);return e}return t},nz=(t,e,n,r,i)=>{let s=Z3(t),o=Na[s]||(Na[s]=(u=>{let f=0,p=11;for(;f<u.length;)p=101*p+u.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Na[o]){let u=s!==t?t:(f=>{let p,h,b=[{}];for(;p=ez.exec(f.replace(tz,""));)p[4]?b.shift():p[3]?(h=p[3].replace(MC," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][p[1]]=p[2].replace(MC," ").trim();return b[0]})(t);Na[o]=jl(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&Na.g?Na.g:null;return n&&(Na.g=Na[o]),((u,f,p,h)=>{h?f.data=f.data.replace(h,u):f.data.indexOf(u)===-1&&(f.data=p?u+f.data:f.data+u)})(Na[o],e,r,l),o},rz=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":jl(l,""):l===!1?"":l}return r+i+(o??"")},"");function hv(t){let e=this||{},n=t.call?t(e.p):t;return nz(n.unshift?n.raw?rz(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,X4(e.target),e.g,e.o,e.k)}let Y3,QS,GS;hv.bind({g:1});let za=hv.bind({k:1});function iz(t,e,n,r){jl.p=e,Y3=t,QS=n,GS=r}function rc(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),u=l.className||i.className;n.p=Object.assign({theme:QS&&QS()},l),n.o=/ *go\d+/.test(u),l.className=hv.apply(n,r)+(u?" "+u:"");let f=t;return t[0]&&(f=l.as||t,delete l.as),GS&&f[0]&&GS(l),Y3(f,l)}return i}}var sz=t=>typeof t=="function",lb=(t,e)=>sz(t)?t(e):t,oz=(()=>{let t=0;return()=>(++t).toString()})(),X3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),az=20,eA=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,az)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return eA(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},yy=[],by={toasts:[],pausedAt:void 0},pu=t=>{by=eA(by,t),yy.forEach(e=>{e(by)})},lz={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},cz=(t={})=>{let[e,n]=H.useState(by);H.useEffect(()=>(yy.push(n),()=>{let i=yy.indexOf(n);i>-1&&yy.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||lz[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:r}},uz=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||oz()}),tm=t=>(e,n)=>{let r=uz(e,t,n);return pu({type:2,toast:r}),r.id},Rn=(t,e)=>tm("blank")(t,e);Rn.error=tm("error");Rn.success=tm("success");Rn.loading=tm("loading");Rn.custom=tm("custom");Rn.dismiss=t=>{pu({type:3,toastId:t})};Rn.remove=t=>pu({type:4,toastId:t});Rn.promise=(t,e,n)=>{let r=Rn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?lb(e.success,i):void 0;return s?Rn.success(s,{id:r,...n,...n?.success}):Rn.dismiss(r),i}).catch(i=>{let s=e.error?lb(e.error,i):void 0;s?Rn.error(s,{id:r,...n,...n?.error}):Rn.dismiss(r)}),t};var dz=(t,e)=>{pu({type:1,toast:{id:t,height:e}})},fz=()=>{pu({type:5,time:Date.now()})},Jp=new Map,pz=1e3,hz=(t,e=pz)=>{if(Jp.has(t))return;let n=setTimeout(()=>{Jp.delete(t),pu({type:4,toastId:t})},e);Jp.set(t,n)},mz=t=>{let{toasts:e,pausedAt:n}=cz(t);H.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(u<0){l.visible&&Rn.dismiss(l.id);return}return setTimeout(()=>Rn.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=H.useCallback(()=>{n&&pu({type:6,time:Date.now()})},[n]),i=H.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:f}=o||{},p=e.filter(x=>(x.position||f)===(s.position||f)&&x.height),h=p.findIndex(x=>x.id===s.id),b=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...l?[b+1]:[0,b]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return H.useEffect(()=>{e.forEach(s=>{if(s.dismissed)hz(s.id,s.removeDelay);else{let o=Jp.get(s.id);o&&(clearTimeout(o),Jp.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:dz,startPause:fz,endPause:r,calculateOffset:i}}},gz=za`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yz=za`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bz=za`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,vz=rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yz} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${bz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,xz=za`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wz=rc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${xz} 1s linear infinite;
`,_z=za`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Sz=za`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ez=rc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_z} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Sz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Iz=rc("div")`
  position: absolute;
`,Nz=rc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kz=za`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Cz=rc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?H.createElement(Cz,null,e):e:n==="blank"?null:H.createElement(Nz,null,H.createElement(wz,{...r}),n!=="loading"&&H.createElement(Iz,null,n==="error"?H.createElement(vz,{...r}):H.createElement(Ez,{...r})))},Tz=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Rz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Oz="0%{opacity:0;} 100%{opacity:1;}",qz="0%{opacity:1;} 100%{opacity:0;}",Az=rc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Pz=rc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Fz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=X3()?[Oz,qz]:[Tz(n),Rz(n)];return{animation:e?`${za(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${za(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Dz=H.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?Fz(t.position||e||"top-center",t.visible):{opacity:0},s=H.createElement(jz,{toast:t}),o=H.createElement(Pz,{...t.ariaProps},lb(t.message,t));return H.createElement(Az,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):H.createElement(H.Fragment,null,s,o))});iz(H.createElement);var Lz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=H.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return H.createElement("div",{ref:s,className:e,style:n},i)},Mz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:X3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},$z=hv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lg=16,Bz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=mz(n);return H.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Lg,left:Lg,right:Lg,bottom:Lg,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(f=>{let p=f.position||e,h=u.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),b=Mz(p,h);return H.createElement(Lz,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?$z:"",style:b},f.type==="custom"?lb(f.message,f):i?i(f):H.createElement(Dz,{toast:f,position:p}))}))},zz=Rn;class hu extends Error{}class Wz extends hu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Vz extends hu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Uz extends hu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class pd extends hu{}class tA extends hu{constructor(e){super(`Invalid unit ${e}`)}}class Ci extends hu{}class yl extends hu{constructor(){super("Zone is an abstract class")}}const jt="numeric",Ao="short",qs="long",cb={year:jt,month:jt,day:jt},nA={year:jt,month:Ao,day:jt},Hz={year:jt,month:Ao,day:jt,weekday:Ao},rA={year:jt,month:qs,day:jt},iA={year:jt,month:qs,day:jt,weekday:qs},sA={hour:jt,minute:jt},oA={hour:jt,minute:jt,second:jt},aA={hour:jt,minute:jt,second:jt,timeZoneName:Ao},lA={hour:jt,minute:jt,second:jt,timeZoneName:qs},cA={hour:jt,minute:jt,hourCycle:"h23"},uA={hour:jt,minute:jt,second:jt,hourCycle:"h23"},dA={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:Ao},fA={hour:jt,minute:jt,second:jt,hourCycle:"h23",timeZoneName:qs},pA={year:jt,month:jt,day:jt,hour:jt,minute:jt},hA={year:jt,month:jt,day:jt,hour:jt,minute:jt,second:jt},mA={year:jt,month:Ao,day:jt,hour:jt,minute:jt},gA={year:jt,month:Ao,day:jt,hour:jt,minute:jt,second:jt},Kz={year:jt,month:Ao,day:jt,weekday:Ao,hour:jt,minute:jt},yA={year:jt,month:qs,day:jt,hour:jt,minute:jt,timeZoneName:Ao},bA={year:jt,month:qs,day:jt,hour:jt,minute:jt,second:jt,timeZoneName:Ao},vA={year:jt,month:qs,day:jt,weekday:qs,hour:jt,minute:jt,timeZoneName:qs},xA={year:jt,month:qs,day:jt,weekday:qs,hour:jt,minute:jt,second:jt,timeZoneName:qs};class nm{get type(){throw new yl}get name(){throw new yl}get ianaName(){return this.name}get isUniversal(){throw new yl}offsetName(e,n){throw new yl}formatOffset(e,n){throw new yl}offset(e){throw new yl}equals(e){throw new yl}get isValid(){throw new yl}}let s_=null;class mv extends nm{static get instance(){return s_===null&&(s_=new mv),s_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return jA(e,n,r)}formatOffset(e,n){return Zp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let vy={};function Qz(t){return vy[t]||(vy[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),vy[t]}const Gz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Jz(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,l,u,f,p]=r;return[o,i,s,l,u,f,p]}function Zz(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],l=Gz[s];s==="era"?r[l]=o:gn(l)||(r[l]=parseInt(o,10))}return r}let Mg={};class Wa extends nm{static create(e){return Mg[e]||(Mg[e]=new Wa(e)),Mg[e]}static resetCache(){Mg={},vy={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Wa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return jA(e,n,r,this.name)}formatOffset(e,n){return Zp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=Qz(this.name);let[i,s,o,l,u,f,p]=r.formatToParts?Zz(r,n):Jz(r,n);l==="BC"&&(i=-Math.abs(i)+1);const b=yv({year:i,month:s,day:o,hour:u===24?0:u,minute:f,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(b-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let $C={};function Yz(t,e={}){const n=JSON.stringify([t,e]);let r=$C[n];return r||(r=new Intl.ListFormat(t,e),$C[n]=r),r}let JS={};function ZS(t,e={}){const n=JSON.stringify([t,e]);let r=JS[n];return r||(r=new Intl.DateTimeFormat(t,e),JS[n]=r),r}let YS={};function Xz(t,e={}){const n=JSON.stringify([t,e]);let r=YS[n];return r||(r=new Intl.NumberFormat(t,e),YS[n]=r),r}let XS={};function eW(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=XS[i];return s||(s=new Intl.RelativeTimeFormat(t,e),XS[i]=s),s}let Op=null;function tW(){return Op||(Op=new Intl.DateTimeFormat().resolvedOptions().locale,Op)}let BC={};function nW(t){let e=BC[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,BC[t]=e}return e}function rW(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=ZS(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=ZS(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function iW(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function sW(t){const e=[];for(let n=1;n<=12;n++){const r=mn.utc(2009,n,1);e.push(t(r))}return e}function oW(t){const e=[];for(let n=1;n<=7;n++){const r=mn.utc(2016,11,13+n);e.push(t(r))}return e}function $g(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function aW(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class lW{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Xz(e,l)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):xI(e,3);return Gr(n,this.padTo)}}}class cW{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Wa.create(l).valid?(i=l,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=ZS(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class uW{constructor(e,n,r){this.opts={style:"long",...r},!n&&kA()&&(this.rtf=eW(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):qW(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const dW={firstDay:1,minimalDays:4,weekend:[6,7]};class Un{static fromOpts(e){return Un.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Or.defaultLocale,l=o||(s?"en-US":tW()),u=n||Or.defaultNumberingSystem,f=r||Or.defaultOutputCalendar,p=eE(i)||Or.defaultWeekSettings;return new Un(l,u,f,p,o)}static resetCache(){Op=null,JS={},YS={},XS={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Un.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,l,u]=rW(e);this.locale=o,this.numberingSystem=n||l||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=iW(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=aW(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Un.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,eE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return $g(this,e,OA,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=sW(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return $g(this,e,PA,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=oW(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return $g(this,void 0,()=>FA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[mn.utc(2016,11,13,9),mn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return $g(this,e,DA,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[mn.utc(-40,1,1),mn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new lW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new cW(e,this.intl,n)}relFormatter(e={}){return new uW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Yz(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:CA()?nW(this.locale):dW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let o_=null;class Hi extends nm{static get utcInstance(){return o_===null&&(o_=new Hi(0)),o_}static instance(e){return e===0?Hi.utcInstance:new Hi(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Hi(bv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Zp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Zp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Zp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class fW extends nm{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Tl(t,e){if(gn(t)||t===null)return e;if(t instanceof nm)return t;if(bW(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?mv.instance:n==="utc"||n==="gmt"?Hi.utcInstance:Hi.parseSpecifier(n)||Wa.create(t)}else return Ll(t)?Hi.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new fW(t)}const gI={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},zC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pW=gI.hanidec.replace(/[\[|\]]/g,"").split("");function hW(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(gI.hanidec)!==-1)e+=pW.indexOf(t[n]);else for(const i in zC){const[s,o]=zC[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let cd={};function mW(){cd={}}function xo({numberingSystem:t},e=""){const n=t||"latn";return cd[n]||(cd[n]={}),cd[n][e]||(cd[n][e]=new RegExp(`${gI[n]}${e}`)),cd[n][e]}let WC=()=>Date.now(),VC="system",UC=null,HC=null,KC=null,QC=60,GC,JC=null;class Or{static get now(){return WC}static set now(e){WC=e}static set defaultZone(e){VC=e}static get defaultZone(){return Tl(VC,mv.instance)}static get defaultLocale(){return UC}static set defaultLocale(e){UC=e}static get defaultNumberingSystem(){return HC}static set defaultNumberingSystem(e){HC=e}static get defaultOutputCalendar(){return KC}static set defaultOutputCalendar(e){KC=e}static get defaultWeekSettings(){return JC}static set defaultWeekSettings(e){JC=eE(e)}static get twoDigitCutoffYear(){return QC}static set twoDigitCutoffYear(e){QC=e%100}static get throwOnInvalid(){return GC}static set throwOnInvalid(e){GC=e}static resetCaches(){Un.resetCache(),Wa.resetCache(),mn.resetCache(),mW()}}class To{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const wA=[0,31,59,90,120,151,181,212,243,273,304,334],_A=[0,31,60,91,121,152,182,213,244,274,305,335];function oo(t,e){return new To("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function yI(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function SA(t,e,n){return n+(rm(t)?_A:wA)[e-1]}function EA(t,e){const n=rm(t)?_A:wA,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function bI(t,e){return(t-e+7)%7+1}function ub(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=SA(r,i,s),l=bI(yI(r,i,s),n);let u=Math.floor((o-l+14-e)/7),f;return u<1?(f=r-1,u=fh(f,e,n)):u>fh(r,e,n)?(f=r+1,u=1):f=r,{weekYear:f,weekNumber:u,weekday:l,...vv(t)}}function ZC(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=bI(yI(r,1,e),n),l=Id(r);let u=i*7+s-o-7+e,f;u<1?(f=r-1,u+=Id(f)):u>l?(f=r+1,u-=Id(r)):f=r;const{month:p,day:h}=EA(f,u);return{year:f,month:p,day:h,...vv(t)}}function a_(t){const{year:e,month:n,day:r}=t,i=SA(e,n,r);return{year:e,ordinal:i,...vv(t)}}function YC(t){const{year:e,ordinal:n}=t,{month:r,day:i}=EA(e,n);return{year:e,month:r,day:i,...vv(t)}}function XC(t,e){if(!gn(t.localWeekday)||!gn(t.localWeekNumber)||!gn(t.localWeekYear)){if(!gn(t.weekday)||!gn(t.weekNumber)||!gn(t.weekYear))throw new pd("Cannot mix locale-based week fields with ISO-based week fields");return gn(t.localWeekday)||(t.weekday=t.localWeekday),gn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),gn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function gW(t,e=4,n=1){const r=gv(t.weekYear),i=ao(t.weekNumber,1,fh(t.weekYear,e,n)),s=ao(t.weekday,1,7);return r?i?s?!1:oo("weekday",t.weekday):oo("week",t.weekNumber):oo("weekYear",t.weekYear)}function yW(t){const e=gv(t.year),n=ao(t.ordinal,1,Id(t.year));return e?n?!1:oo("ordinal",t.ordinal):oo("year",t.year)}function IA(t){const e=gv(t.year),n=ao(t.month,1,12),r=ao(t.day,1,db(t.year,t.month));return e?n?r?!1:oo("day",t.day):oo("month",t.month):oo("year",t.year)}function NA(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=ao(e,0,23)||e===24&&n===0&&r===0&&i===0,o=ao(n,0,59),l=ao(r,0,59),u=ao(i,0,999);return s?o?l?u?!1:oo("millisecond",i):oo("second",r):oo("minute",n):oo("hour",e)}function gn(t){return typeof t>"u"}function Ll(t){return typeof t=="number"}function gv(t){return typeof t=="number"&&t%1===0}function bW(t){return typeof t=="string"}function vW(t){return Object.prototype.toString.call(t)==="[object Date]"}function kA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function CA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function xW(t){return Array.isArray(t)?t:[t]}function ej(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function wW(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Bd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function eE(t){if(t==null)return null;if(typeof t!="object")throw new Ci("Week settings must be an object");if(!ao(t.firstDay,1,7)||!ao(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!ao(e,1,7)))throw new Ci("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function ao(t,e,n){return gv(t)&&t>=e&&t<=n}function _W(t,e){return t-e*Math.floor(t/e)}function Gr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Nl(t){if(!(gn(t)||t===null||t===""))return parseInt(t,10)}function Tc(t){if(!(gn(t)||t===null||t===""))return parseFloat(t)}function vI(t){if(!(gn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function xI(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function rm(t){return t%4===0&&(t%100!==0||t%400===0)}function Id(t){return rm(t)?366:365}function db(t,e){const n=_W(e-1,12)+1,r=t+(e-n)/12;return n===2?rm(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function yv(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function tj(t,e,n){return-bI(yI(t,1,e),n)+e-1}function fh(t,e=4,n=1){const r=tj(t,e,n),i=tj(t+1,e,n);return(Id(t)-r+i)/7}function tE(t){return t>99?t:t>Or.twoDigitCutoffYear?1900+t:2e3+t}function jA(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function bv(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function TA(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ci(`Invalid unit value ${t}`);return e}function fb(t,e){const n={};for(const r in t)if(Bd(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=TA(i)}return n}function Zp(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Gr(n,2)}:${Gr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Gr(n,2)}${Gr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function vv(t){return wW(t,["hour","minute","second","millisecond"])}const SW=["January","February","March","April","May","June","July","August","September","October","November","December"],RA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EW=["J","F","M","A","M","J","J","A","S","O","N","D"];function OA(t){switch(t){case"narrow":return[...EW];case"short":return[...RA];case"long":return[...SW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const qA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],AA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],IW=["M","T","W","T","F","S","S"];function PA(t){switch(t){case"narrow":return[...IW];case"short":return[...AA];case"long":return[...qA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const FA=["AM","PM"],NW=["Before Christ","Anno Domini"],kW=["BC","AD"],CW=["B","A"];function DA(t){switch(t){case"narrow":return[...CW];case"short":return[...kW];case"long":return[...NW];default:return null}}function jW(t){return FA[t.hour<12?0:1]}function TW(t,e){return PA(e)[t.weekday-1]}function RW(t,e){return OA(e)[t.month-1]}function OW(t,e){return DA(e)[t.year<0?0:1]}function qW(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,f=i[t],p=r?u?f[1]:f[2]||f[1]:u?i[t][0]:t;return o?`${l} ${p} ago`:`in ${l} ${p}`}function nj(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const AW={D:cb,DD:nA,DDD:rA,DDDD:iA,t:sA,tt:oA,ttt:aA,tttt:lA,T:cA,TT:uA,TTT:dA,TTTT:fA,f:pA,ff:mA,fff:yA,ffff:vA,F:hA,FF:gA,FFF:bA,FFFF:xA};class Ti{static create(e,n={}){return new Ti(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||l===n?r+=l:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=l,n=l)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return AW[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Gr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>r?jW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?RW(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),f=(x,_)=>r?TW(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Ti.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?OW(e,x):s({era:x},"era"),b=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return nj(Ti.parseFormat(n),b)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>f=>{const p=r(f);return p?this.num(u.get(p),f.length):f},s=Ti.parseFormat(n),o=s.reduce((u,{literal:f,val:p})=>f?u:u.concat(p),[]),l=e.shiftTo(...o.map(r).filter(u=>u));return nj(s,i(l))}}const LA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function sf(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function of(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,l,u]=s(e,i);return[{...n,...o},l||r,u]},[{},null,1]).slice(0,2)}function af(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function MA(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Nl(e[n+i]);return[r,null,n+i]}}const $A=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,PW=`(?:${$A.source}?(?:\\[(${LA.source})\\])?)?`,wI=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BA=RegExp(`${wI.source}${PW}`),_I=RegExp(`(?:T${BA.source})?`),FW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,DW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,LW=/(\d{4})-?(\d{3})/,MW=MA("weekYear","weekNumber","weekDay"),$W=MA("year","ordinal"),BW=/(\d{4})-(\d\d)-(\d\d)/,zA=RegExp(`${wI.source} ?(?:${$A.source}|(${LA.source}))?`),zW=RegExp(`(?: ${zA.source})?`);function Nd(t,e,n){const r=t[e];return gn(r)?n:Nl(r)}function WW(t,e){return[{year:Nd(t,e),month:Nd(t,e+1,1),day:Nd(t,e+2,1)},null,e+3]}function lf(t,e){return[{hours:Nd(t,e,0),minutes:Nd(t,e+1,0),seconds:Nd(t,e+2,0),milliseconds:vI(t[e+3])},null,e+4]}function im(t,e){const n=!t[e]&&!t[e+1],r=bv(t[e+1],t[e+2]),i=n?null:Hi.instance(r);return[{},i,e+3]}function sm(t,e){const n=t[e]?Wa.create(t[e]):null;return[{},n,e+1]}const VW=RegExp(`^T?${wI.source}$`),UW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function HW(t){const[e,n,r,i,s,o,l,u,f]=t,p=e[0]==="-",h=u&&u[0]==="-",b=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:b(Tc(n)),months:b(Tc(r)),weeks:b(Tc(i)),days:b(Tc(s)),hours:b(Tc(o)),minutes:b(Tc(l)),seconds:b(Tc(u),u==="-0"),milliseconds:b(vI(f),h)}]}const KW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function SI(t,e,n,r,i,s,o){const l={year:e.length===2?tE(Nl(e)):Nl(e),month:RA.indexOf(n)+1,day:Nl(r),hour:Nl(i),minute:Nl(s)};return o&&(l.second=Nl(o)),t&&(l.weekday=t.length>3?qA.indexOf(t)+1:AA.indexOf(t)+1),l}const QW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function GW(t){const[,e,n,r,i,s,o,l,u,f,p,h]=t,b=SI(e,i,r,n,s,o,l);let x;return u?x=KW[u]:f?x=0:x=bv(p,h),[b,new Hi(x)]}function JW(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ZW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,YW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,XW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function rj(t){const[,e,n,r,i,s,o,l]=t;return[SI(e,i,r,n,s,o,l),Hi.utcInstance]}function e6(t){const[,e,n,r,i,s,o,l]=t;return[SI(e,l,n,r,i,s,o),Hi.utcInstance]}const t6=sf(FW,_I),n6=sf(DW,_I),r6=sf(LW,_I),i6=sf(BA),WA=of(WW,lf,im,sm),s6=of(MW,lf,im,sm),o6=of($W,lf,im,sm),a6=of(lf,im,sm);function l6(t){return af(t,[t6,WA],[n6,s6],[r6,o6],[i6,a6])}function c6(t){return af(JW(t),[QW,GW])}function u6(t){return af(t,[ZW,rj],[YW,rj],[XW,e6])}function d6(t){return af(t,[UW,HW])}const f6=of(lf);function p6(t){return af(t,[VW,f6])}const h6=sf(BW,zW),m6=sf(zA),g6=of(lf,im,sm);function y6(t){return af(t,[h6,WA],[m6,g6])}const ij="Invalid Duration",VA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},b6={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...VA},Xs=146097/400,Ju=146097/4800,v6={years:{quarters:4,months:12,weeks:Xs/7,days:Xs,hours:Xs*24,minutes:Xs*24*60,seconds:Xs*24*60*60,milliseconds:Xs*24*60*60*1e3},quarters:{months:3,weeks:Xs/28,days:Xs/4,hours:Xs*24/4,minutes:Xs*24*60/4,seconds:Xs*24*60*60/4,milliseconds:Xs*24*60*60*1e3/4},months:{weeks:Ju/7,days:Ju,hours:Ju*24,minutes:Ju*24*60,seconds:Ju*24*60*60,milliseconds:Ju*24*60*60*1e3},...VA},Wc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],x6=Wc.slice(0).reverse();function bl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new An(r)}function UA(t,e){let n=e.milliseconds??0;for(const r of x6.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function sj(t,e){const n=UA(t,e)<0?-1:1;Wc.reduceRight((r,i)=>{if(gn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],l=Math.floor(s/o);e[i]+=l*n,e[r]-=l*o*n}return i},null),Wc.reduce((r,i)=>{if(gn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function w6(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class An{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?v6:b6;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Un.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return An.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new Ci(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new An({values:fb(e,An.normalizeUnit),loc:Un.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ll(e))return An.fromMillis(e);if(An.isDuration(e))return e;if(typeof e=="object")return An.fromObject(e);throw new Ci(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=d6(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=p6(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new Ci("need to specify a reason the Duration is invalid");const r=e instanceof To?e:new To(e,n);if(Or.throwOnInvalid)throw new Uz(r);return new An({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new tA(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ti.create(this.loc,r).formatDurationFromString(this,e):ij}toHuman(e={}){if(!this.isValid)return ij;const n=Wc.map(r=>{const i=this.values[r];return gn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=xI(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},mn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?UA(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e),r={};for(const i of Wc)(Bd(n.values,i)||Bd(this.values,i))&&(r[i]=n.get(i)+this.get(i));return bl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=TA(e(this.values[r],r));return bl(this,{values:n},!0)}get(e){return this[An.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...fb(e,An.normalizeUnit)};return bl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return bl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return sj(this.matrix,e),bl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=w6(this.normalize().shiftToAll().toObject());return bl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>An.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of Wc)if(e.indexOf(o)>=0){s=o;let l=0;for(const f in r)l+=this.matrix[f][o]*r[f],r[f]=0;Ll(i[o])&&(l+=i[o]);const u=Math.trunc(l);n[o]=u,r[o]=(l*1e3-u*1e3)/1e3}else Ll(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return sj(this.matrix,n),bl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return bl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of Wc)if(!n(this.values[r],e.values[r]))return!1;return!0}}const Zu="Invalid Interval";function _6(t,e){return!t||!t.isValid?Rr.invalid("missing or invalid start"):!e||!e.isValid?Rr.invalid("missing or invalid end"):e<t?Rr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Rr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new Ci("need to specify a reason the Interval is invalid");const r=e instanceof To?e:new To(e,n);if(Or.throwOnInvalid)throw new Vz(r);return new Rr({invalid:r})}static fromDateTimes(e,n){const r=hp(e),i=hp(n),s=_6(r,i);return s??new Rr({start:r,end:i})}static after(e,n){const r=An.fromDurationLike(n),i=hp(e);return Rr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=An.fromDurationLike(n),i=hp(e);return Rr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=mn.fromISO(r,n),o=s.isValid}catch{o=!1}let l,u;try{l=mn.fromISO(i,n),u=l.isValid}catch{u=!1}if(o&&u)return Rr.fromDateTimes(s,l);if(o){const f=An.fromISO(i,n);if(f.isValid)return Rr.after(s,f)}else if(u){const f=An.fromISO(r,n);if(f.isValid)return Rr.before(l,f)}}return Rr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Rr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(hp).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,l=+o>+this.e?this.e:o;r.push(Rr.fromDateTimes(i,l)),i=l,s+=1}return r}splitBy(e){const n=An.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const l=this.start.plus(n.mapUnits(u=>u*i));s=+l>+this.e?this.e:l,o.push(Rr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Rr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Rr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((u,f)=>u.time-f.time);for(const u of l)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(Rr.fromDateTimes(n,u.time)),n=null);return Rr.merge(i)}difference(...e){return Rr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Zu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=cb,n={}){return this.isValid?Ti.create(this.s.loc.clone(n),e).formatInterval(this):Zu}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Zu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Zu}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Zu}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Zu}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):An.invalid(this.invalidReason)}mapEndpoints(e){return Rr.fromDateTimes(e(this.s),e(this.e))}}class Bg{static hasDST(e=Or.defaultZone){const n=mn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Wa.isValidZone(e)}static normalizeZone(e){return Tl(e,Or.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Un.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Un.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Un.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Un.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Un.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Un.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Un.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Un.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Un.create(n,null,"gregory").eras(e)}static features(){return{relative:kA(),localeWeek:CA()}}}function oj(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(An.fromMillis(r).as("days"))}function S6(t,e,n){const r=[["years",(u,f)=>f.year-u.year],["quarters",(u,f)=>f.quarter-u.quarter+(f.year-u.year)*4],["months",(u,f)=>f.month-u.month+(f.year-u.year)*12],["weeks",(u,f)=>{const p=oj(u,f);return(p-p%7)/7}],["days",oj]],i={},s=t;let o,l;for(const[u,f]of r)n.indexOf(u)>=0&&(o=u,i[u]=f(t,e),l=s.plus(i),l>e?(i[u]--,t=s.plus(i),t>e&&(l=t,i[u]--,t=s.plus(i))):t=l);return[t,i,l,o]}function E6(t,e,n,r){let[i,s,o,l]=S6(t,e,n);const u=e-i,f=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);f.length===0&&(o<e&&(o=i.plus({[l]:1})),o!==i&&(s[l]=(s[l]||0)+u/(o-i)));const p=An.fromObject(s,r);return f.length>0?An.fromMillis(u,r).shiftTo(...f).plus(p):p}const I6="missing Intl.DateTimeFormat.formatToParts support";function $n(t,e=n=>n){return{regex:t,deser:([n])=>e(hW(n))}}const N6="\xa0",HA=`[ ${N6}]`,KA=new RegExp(HA,"g");function k6(t){return t.replace(/\./g,"\\.?").replace(KA,HA)}function aj(t){return t.replace(/\./g,"").replace(KA," ").toLowerCase()}function wo(t,e){return t===null?null:{regex:RegExp(t.map(k6).join("|")),deser:([n])=>t.findIndex(r=>aj(n)===aj(r))+e}}function lj(t,e){return{regex:t,deser:([,n,r])=>bv(n,r),groups:e}}function zg(t){return{regex:t,deser:([e])=>e}}function C6(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function j6(t,e){const n=xo(e),r=xo(e,"{2}"),i=xo(e,"{3}"),s=xo(e,"{4}"),o=xo(e,"{6}"),l=xo(e,"{1,2}"),u=xo(e,"{1,3}"),f=xo(e,"{1,6}"),p=xo(e,"{1,9}"),h=xo(e,"{2,4}"),b=xo(e,"{4,6}"),x=N=>({regex:RegExp(C6(N.val)),deser:([j])=>j,literal:!0}),E=(N=>{if(t.literal)return x(N);switch(N.val){case"G":return wo(e.eras("short"),0);case"GG":return wo(e.eras("long"),0);case"y":return $n(f);case"yy":return $n(h,tE);case"yyyy":return $n(s);case"yyyyy":return $n(b);case"yyyyyy":return $n(o);case"M":return $n(l);case"MM":return $n(r);case"MMM":return wo(e.months("short",!0),1);case"MMMM":return wo(e.months("long",!0),1);case"L":return $n(l);case"LL":return $n(r);case"LLL":return wo(e.months("short",!1),1);case"LLLL":return wo(e.months("long",!1),1);case"d":return $n(l);case"dd":return $n(r);case"o":return $n(u);case"ooo":return $n(i);case"HH":return $n(r);case"H":return $n(l);case"hh":return $n(r);case"h":return $n(l);case"mm":return $n(r);case"m":return $n(l);case"q":return $n(l);case"qq":return $n(r);case"s":return $n(l);case"ss":return $n(r);case"S":return $n(u);case"SSS":return $n(i);case"u":return zg(p);case"uu":return zg(l);case"uuu":return $n(n);case"a":return wo(e.meridiems(),0);case"kkkk":return $n(s);case"kk":return $n(h,tE);case"W":return $n(l);case"WW":return $n(r);case"E":case"c":return $n(n);case"EEE":return wo(e.weekdays("short",!1),1);case"EEEE":return wo(e.weekdays("long",!1),1);case"ccc":return wo(e.weekdays("short",!0),1);case"cccc":return wo(e.weekdays("long",!0),1);case"Z":case"ZZ":return lj(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return lj(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return zg(/[a-z_+-/]{1,256}?/i);case" ":return zg(/[^\S\n\r]/);default:return x(N)}})(t)||{invalidReason:I6};return E.token=t,E}const T6={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function R6(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let l=T6[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function O6(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function q6(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(Bd(n,o)){const l=n[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(i[l.token.val[0]]=l.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function A6(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return gn(t.z)||(n=Wa.create(t.z)),gn(t.Z)||(n||(n=new Hi(t.Z)),r=t.Z),gn(t.q)||(t.M=(t.q-1)*3+1),gn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),gn(t.u)||(t.S=vI(t.u)),[Object.keys(t).reduce((s,o)=>{const l=e(o);return l&&(s[l]=t[o]),s},{}),n,r]}let l_=null;function P6(){return l_||(l_=mn.fromMillis(0x16a2e5618e3)),l_}function F6(t,e){if(t.literal)return t;const n=Ti.macroTokenToFormatOpts(t.val),r=ZA(n,e);return r==null||r.includes(void 0)?t:r}function QA(t,e){return Array.prototype.concat(...t.map(n=>F6(n,e)))}class GA{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=QA(Ti.parseFormat(n),e),this.units=this.tokens.map(r=>j6(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=O6(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=q6(e,this.regex,this.handlers),[i,s,o]=r?A6(r):[null,null,void 0];if(Bd(r,"a")&&Bd(r,"H"))throw new pd("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function JA(t,e,n){return new GA(t,n).explainFromTokens(e)}function D6(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=JA(t,e,n);return[r,i,s,o]}function ZA(t,e){if(!t)return null;const r=Ti.create(e,t).dtFormatter(P6()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>R6(o,t,s))}const c_="Invalid DateTime",L6=864e13;function qp(t){return new To("unsupported zone",`the zone "${t.name}" is not supported`)}function u_(t){return t.weekData===null&&(t.weekData=ub(t.c)),t.weekData}function d_(t){return t.localWeekData===null&&(t.localWeekData=ub(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Rc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new mn({...n,...e,old:n})}function YA(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Wg(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function xy(t,e,n){return YA(yv(t),e,n)}function cj(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,db(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=An.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=yv(s);let[u,f]=YA(l,n,t.zone);return o!==0&&(u+=o,f=t.zone.offset(u)),{ts:u,o:f}}function Yu(t,e,n,r,i,s){const{setZone:o,zone:l}=n;if(t&&Object.keys(t).length!==0||e){const u=e||l,f=mn.fromObject(t,{...n,zone:u,specificOffset:s});return o?f:f.setZone(l)}else return mn.invalid(new To("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Vg(t,e,n=!0){return t.isValid?Ti.create(Un.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function f_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Gr(t.c.year,n?6:4),e?(r+="-",r+=Gr(t.c.month),r+="-",r+=Gr(t.c.day)):(r+=Gr(t.c.month),r+=Gr(t.c.day)),r}function uj(t,e,n,r,i,s){let o=Gr(t.c.hour);return e?(o+=":",o+=Gr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Gr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Gr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Gr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Gr(Math.trunc(-t.o/60)),o+=":",o+=Gr(Math.trunc(-t.o%60))):(o+="+",o+=Gr(Math.trunc(t.o/60)),o+=":",o+=Gr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const XA={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},M6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},$6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},eP=["year","month","day","hour","minute","second","millisecond"],B6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],z6=["year","ordinal","hour","minute","second","millisecond"];function W6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new tA(t);return e}function dj(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return W6(t)}}function V6(t){return _y[t]||(wy===void 0&&(wy=Or.now()),_y[t]=t.offset(wy)),_y[t]}function fj(t,e){const n=Tl(e.zone,Or.defaultZone);if(!n.isValid)return mn.invalid(qp(n));const r=Un.fromObject(e);let i,s;if(gn(t.year))i=Or.now();else{for(const u of eP)gn(t[u])&&(t[u]=XA[u]);const o=IA(t)||NA(t);if(o)return mn.invalid(o);const l=V6(n);[i,s]=xy(t,l,n)}return new mn({ts:i,zone:n,loc:r,o:s})}function pj(t,e,n){const r=gn(n.round)?!0:n.round,i=(o,l)=>(o=xI(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,l)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const l=s(o);if(Math.abs(l)>=1)return i(l,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function hj(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let wy,_y={};class mn{constructor(e){const n=e.zone||Or.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new To("invalid input"):null)||(n.isValid?null:qp(n));this.ts=gn(e.ts)?Or.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const l=Ll(e.o)&&!e.old?e.o:n.offset(this.ts);i=Wg(this.ts,l),r=Number.isNaN(i.year)?new To("invalid input"):null,i=r?null:i,s=r?null:l}this._zone=n,this.loc=e.loc||Un.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new mn({})}static local(){const[e,n]=hj(arguments),[r,i,s,o,l,u,f]=n;return fj({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static utc(){const[e,n]=hj(arguments),[r,i,s,o,l,u,f]=n;return e.zone=Hi.utcInstance,fj({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static fromJSDate(e,n={}){const r=vW(e)?e.valueOf():NaN;if(Number.isNaN(r))return mn.invalid("invalid input");const i=Tl(n.zone,Or.defaultZone);return i.isValid?new mn({ts:r,zone:i,loc:Un.fromObject(n)}):mn.invalid(qp(i))}static fromMillis(e,n={}){if(Ll(e))return e<-864e13||e>L6?mn.invalid("Timestamp out of range"):new mn({ts:e,zone:Tl(n.zone,Or.defaultZone),loc:Un.fromObject(n)});throw new Ci(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ll(e))return new mn({ts:e*1e3,zone:Tl(n.zone,Or.defaultZone),loc:Un.fromObject(n)});throw new Ci("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Tl(n.zone,Or.defaultZone);if(!r.isValid)return mn.invalid(qp(r));const i=Un.fromObject(n),s=fb(e,dj),{minDaysInFirstWeek:o,startOfWeek:l}=XC(s,i),u=Or.now(),f=gn(n.specificOffset)?r.offset(u):n.specificOffset,p=!gn(s.ordinal),h=!gn(s.year),b=!gn(s.month)||!gn(s.day),x=h||b,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new pd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new pd("Can't mix ordinal dates with month/day");const E=_||s.weekday&&!x;let N,j,C=Wg(u,f);E?(N=B6,j=M6,C=ub(C,o,l)):p?(N=z6,j=$6,C=a_(C)):(N=eP,j=XA);let R=!1;for(const z of N){const D=s[z];gn(D)?R?s[z]=j[z]:s[z]=C[z]:R=!0}const q=E?gW(s,o,l):p?yW(s):IA(s),L=q||NA(s);if(L)return mn.invalid(L);const M=E?ZC(s,o,l):p?YC(s):s,[W,P]=xy(M,f,r),O=new mn({ts:W,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==O.weekday?mn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:mn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=l6(e);return Yu(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=c6(e);return Yu(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=u6(e);return Yu(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(gn(e)||gn(n))throw new Ci("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Un.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[l,u,f,p]=D6(o,e,n);return p?mn.invalid(p):Yu(l,u,r,`format ${n}`,e,f)}static fromString(e,n,r={}){return mn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=y6(e);return Yu(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new Ci("need to specify a reason the DateTime is invalid");const r=e instanceof To?e:new To(e,n);if(Or.throwOnInvalid)throw new Wz(r);return new mn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=ZA(e,Un.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return QA(Ti.parseFormat(e),Un.fromObject(n)).map(i=>i.val).join("")}static resetCache(){wy=void 0,_y={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?u_(this).weekYear:NaN}get weekNumber(){return this.isValid?u_(this).weekNumber:NaN}get weekday(){return this.isValid?u_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?d_(this).weekday:NaN}get localWeekNumber(){return this.isValid?d_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?d_(this).weekYear:NaN}get ordinal(){return this.isValid?a_(this.c).ordinal:NaN}get monthShort(){return this.isValid?Bg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Bg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Bg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Bg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=yv(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),l=this.zone.offset(r-s*n);if(o===l)return[this];const u=r-o*n,f=r-l*n,p=Wg(u,o),h=Wg(f,l);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[Rc(this,{ts:u}),Rc(this,{ts:f})]:[this]}get isInLeapYear(){return rm(this.year)}get daysInMonth(){return db(this.year,this.month)}get daysInYear(){return this.isValid?Id(this.year):NaN}get weeksInWeekYear(){return this.isValid?fh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?fh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Ti.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Hi.instance(e),n)}toLocal(){return this.setZone(Or.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Tl(e,Or.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=xy(o,s,e)}return Rc(this,{ts:i,zone:e})}else return mn.invalid(qp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Rc(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=fb(e,dj),{minDaysInFirstWeek:r,startOfWeek:i}=XC(n,this.loc),s=!gn(n.weekYear)||!gn(n.weekNumber)||!gn(n.weekday),o=!gn(n.ordinal),l=!gn(n.year),u=!gn(n.month)||!gn(n.day),f=l||u,p=n.weekYear||n.weekNumber;if((f||o)&&p)throw new pd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new pd("Can't mix ordinal dates with month/day");let h;s?h=ZC({...ub(this.c,r,i),...n},r,i):gn(n.ordinal)?(h={...this.toObject(),...n},gn(n.day)&&(h.day=Math.min(db(h.year,h.month),h.day))):h=YC({...a_(this.c),...n});const[b,x]=xy(h,this.o,this.zone);return Rc(this,{ts:b,o:x})}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return Rc(this,cj(this,n))}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e).negate();return Rc(this,cj(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=An.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Ti.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):c_}toLocaleString(e=cb,n={}){return this.isValid?Ti.create(this.loc.clone(n),e).formatDateTime(this):c_}toLocaleParts(e={}){return this.isValid?Ti.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=f_(this,o);return l+="T",l+=uj(this,o,n,r,i,s),l}toISODate({format:e="extended"}={}){return this.isValid?f_(this,e==="extended"):null}toISOWeekDate(){return Vg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+uj(this,o==="extended",n,e,r,s):null}toRFC2822(){return Vg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Vg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?f_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Vg(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():c_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return An.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=xW(n).map(An.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,u=o?e:this,f=E6(l,u,s,i);return o?f.negate():f}diffNow(e="milliseconds",n={}){return this.diff(mn.now(),e,n)}until(e){return this.isValid?Rr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||mn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),pj(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?pj(e.base||mn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(mn.isDateTime))throw new Ci("min requires all arguments be DateTimes");return ej(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(mn.isDateTime))throw new Ci("max requires all arguments be DateTimes");return ej(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Un.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return JA(o,e,n)}static fromStringExplain(e,n,r={}){return mn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Un.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new GA(s,e)}static fromFormatParser(e,n,r={}){if(gn(e)||gn(n))throw new Ci("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Un.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new Ci(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:l,zone:u,specificOffset:f,invalidReason:p}=n.explainFromTokens(e);return p?mn.invalid(p):Yu(l,u,r,`format ${n.format}`,e,f)}static get DATE_SHORT(){return cb}static get DATE_MED(){return nA}static get DATE_MED_WITH_WEEKDAY(){return Hz}static get DATE_FULL(){return rA}static get DATE_HUGE(){return iA}static get TIME_SIMPLE(){return sA}static get TIME_WITH_SECONDS(){return oA}static get TIME_WITH_SHORT_OFFSET(){return aA}static get TIME_WITH_LONG_OFFSET(){return lA}static get TIME_24_SIMPLE(){return cA}static get TIME_24_WITH_SECONDS(){return uA}static get TIME_24_WITH_SHORT_OFFSET(){return dA}static get TIME_24_WITH_LONG_OFFSET(){return fA}static get DATETIME_SHORT(){return pA}static get DATETIME_SHORT_WITH_SECONDS(){return hA}static get DATETIME_MED(){return mA}static get DATETIME_MED_WITH_SECONDS(){return gA}static get DATETIME_MED_WITH_WEEKDAY(){return Kz}static get DATETIME_FULL(){return yA}static get DATETIME_FULL_WITH_SECONDS(){return bA}static get DATETIME_HUGE(){return vA}static get DATETIME_HUGE_WITH_SECONDS(){return xA}}function hp(t){if(mn.isDateTime(t))return t;if(t&&t.valueOf&&Ll(t.valueOf()))return mn.fromJSDate(t);if(t&&typeof t=="object")return mn.fromObject(t);throw new Ci(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function tP(t,e){return function(){return t.apply(e,arguments)}}const{toString:U6}=Object.prototype,{getPrototypeOf:EI}=Object,xv=(t=>e=>{const n=U6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mo=t=>(t=t.toLowerCase(),e=>xv(e)===t),wv=t=>e=>typeof e===t,{isArray:cf}=Array,ph=wv("undefined");function H6(t){return t!==null&&!ph(t)&&t.constructor!==null&&!ph(t.constructor)&&As(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nP=Mo("ArrayBuffer");function K6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nP(t.buffer),e}const Q6=wv("string"),As=wv("function"),rP=wv("number"),_v=t=>t!==null&&typeof t=="object",G6=t=>t===!0||t===!1,Sy=t=>{if(xv(t)!=="object")return!1;const e=EI(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},J6=Mo("Date"),Z6=Mo("File"),Y6=Mo("Blob"),X6=Mo("FileList"),eV=t=>_v(t)&&As(t.pipe),tV=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||As(t.append)&&((e=xv(t))==="formdata"||e==="object"&&As(t.toString)&&t.toString()==="[object FormData]"))},nV=Mo("URLSearchParams"),[rV,iV,sV,oV]=["ReadableStream","Request","Response","Headers"].map(Mo),aV=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function om(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),cf(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function iP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Vc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sP=t=>!ph(t)&&t!==Vc;function nE(){const{caseless:t}=sP(this)&&this||{},e={},n=(r,i)=>{const s=t&&iP(e,i)||i;Sy(e[s])&&Sy(r)?e[s]=nE(e[s],r):Sy(r)?e[s]=nE({},r):cf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&om(arguments[r],n);return e}const lV=(t,e,n,{allOwnKeys:r}={})=>(om(e,(i,s)=>{n&&As(i)?t[s]=tP(i,n):t[s]=i},{allOwnKeys:r}),t),cV=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uV=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},dV=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&EI(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},fV=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},pV=t=>{if(!t)return null;if(cf(t))return t;let e=t.length;if(!rP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},hV=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&EI(Uint8Array)),mV=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},gV=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},yV=Mo("HTMLFormElement"),bV=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),mj=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),vV=Mo("RegExp"),oP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};om(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},xV=t=>{oP(t,(e,n)=>{if(As(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(As(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wV=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return cf(t)?r(t):r(String(t).split(e)),n},_V=()=>{},SV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,p_="abcdefghijklmnopqrstuvwxyz",gj="0123456789",aP={DIGIT:gj,ALPHA:p_,ALPHA_DIGIT:p_+p_.toUpperCase()+gj},EV=(t=16,e=aP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function IV(t){return!!(t&&As(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const NV=t=>{const e=new Array(10),n=(r,i)=>{if(_v(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=cf(r)?[]:{};return om(r,(o,l)=>{const u=n(o,i+1);!ph(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},kV=Mo("AsyncFunction"),CV=t=>t&&(_v(t)||As(t))&&As(t.then)&&As(t.catch),lP=((t,e)=>t?setImmediate:e?((n,r)=>(Vc.addEventListener("message",({source:i,data:s})=>{i===Vc&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Vc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",As(Vc.postMessage)),jV=typeof queueMicrotask<"u"?queueMicrotask.bind(Vc):typeof process<"u"&&process.nextTick||lP,Ye={isArray:cf,isArrayBuffer:nP,isBuffer:H6,isFormData:tV,isArrayBufferView:K6,isString:Q6,isNumber:rP,isBoolean:G6,isObject:_v,isPlainObject:Sy,isReadableStream:rV,isRequest:iV,isResponse:sV,isHeaders:oV,isUndefined:ph,isDate:J6,isFile:Z6,isBlob:Y6,isRegExp:vV,isFunction:As,isStream:eV,isURLSearchParams:nV,isTypedArray:hV,isFileList:X6,forEach:om,merge:nE,extend:lV,trim:aV,stripBOM:cV,inherits:uV,toFlatObject:dV,kindOf:xv,kindOfTest:Mo,endsWith:fV,toArray:pV,forEachEntry:mV,matchAll:gV,isHTMLForm:yV,hasOwnProperty:mj,hasOwnProp:mj,reduceDescriptors:oP,freezeMethods:xV,toObjectSet:wV,toCamelCase:bV,noop:_V,toFiniteNumber:SV,findKey:iP,global:Vc,isContextDefined:sP,ALPHABET:aP,generateString:EV,isSpecCompliantForm:IV,toJSONObject:NV,isAsyncFn:kV,isThenable:CV,setImmediate:lP,asap:jV};function _n(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(_n,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const cP=_n.prototype,uP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{uP[t]={value:t}});Object.defineProperties(_n,uP);Object.defineProperty(cP,"isAxiosError",{value:!0});_n.from=(t,e,n,r,i,s)=>{const o=Object.create(cP);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),_n.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const TV=null;function rE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function dP(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function yj(t,e,n){return t?t.concat(e).map(function(i,s){return i=dP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function RV(t){return Ye.isArray(t)&&!t.some(rE)}const OV=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function Sv(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,N){return!Ye.isUndefined(N[E])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new _n("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,E,N){let j=_;if(_&&!N&&typeof _=="object"){if(Ye.endsWith(E,"{}"))E=r?E:E.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&RV(_)||(Ye.isFileList(_)||Ye.endsWith(E,"[]"))&&(j=Ye.toArray(_)))return E=dP(E),j.forEach(function(R,q){!(Ye.isUndefined(R)||R===null)&&e.append(o===!0?yj([E],q,s):o===null?E:E+"[]",f(R))}),!1}return rE(_)?!0:(e.append(yj(N,E,s),f(_)),!1)}const h=[],b=Object.assign(OV,{defaultVisitor:p,convertValue:f,isVisitable:rE});function x(_,E){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(_),Ye.forEach(_,function(j,C){(!(Ye.isUndefined(j)||j===null)&&i.call(e,j,Ye.isString(C)?C.trim():C,E,b))===!0&&x(j,E?E.concat(C):[C])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function bj(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function II(t,e){this._pairs=[],t&&Sv(t,this,e)}const fP=II.prototype;fP.append=function(e,n){this._pairs.push([e,n])};fP.toString=function(e){const n=e?function(r){return e.call(this,r,bj)}:bj;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function qV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pP(t,e,n){if(!e)return t;const r=n&&n.encode||qV;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new II(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class vj{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AV=typeof URLSearchParams<"u"?URLSearchParams:II,PV=typeof FormData<"u"?FormData:null,FV=typeof Blob<"u"?Blob:null,DV={isBrowser:!0,classes:{URLSearchParams:AV,FormData:PV,Blob:FV},protocols:["http","https","file","blob","url","data"]},NI=typeof window<"u"&&typeof document<"u",iE=typeof navigator=="object"&&navigator||void 0,LV=NI&&(!iE||["ReactNative","NativeScript","NS"].indexOf(iE.product)<0),MV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$V=NI&&window.location.href||"http://localhost",BV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:NI,hasStandardBrowserEnv:LV,hasStandardBrowserWebWorkerEnv:MV,navigator:iE,origin:$V},Symbol.toStringTag,{value:"Module"})),Ri={...BV,...DV};function zV(t,e){return Sv(t,new Ri.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ri.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function WV(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VV(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function mP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=VV(i[o])),!l)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(WV(r),i,n,0)}),n}return null}function UV(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const am={transitional:hP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(mP(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zV(e,this.formSerializer).toString();if((l=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Sv(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),UV(e)):e}],transformResponse:[function(e){const n=this.transitional||am.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?_n.from(l,_n.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ri.classes.FormData,Blob:Ri.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{am.headers[t]={}});const HV=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KV=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&HV[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},xj=Symbol("internals");function mp(t){return t&&String(t).trim().toLowerCase()}function Ey(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(Ey):String(t)}function QV(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const GV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function h_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function JV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ZV(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let hs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,f){const p=mp(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||f===!0||f===void 0&&i[h]!==!1)&&(i[h||u]=Ey(l))}const o=(l,u)=>Ye.forEach(l,(f,p)=>s(f,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!GV(e))o(KV(e),n);else if(Ye.isHeaders(e))for(const[l,u]of e.entries())s(u,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=mp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return QV(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=mp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||h_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=mp(o),o){const l=Ye.findKey(r,o);l&&(!n||h_(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||h_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=Ey(i),delete n[s];return}const l=e?JV(s):String(s).trim();l!==s&&delete n[s],n[l]=Ey(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[xj]=this[xj]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=mp(o);r[l]||(ZV(i,o),r[l]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(hs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(hs);function m_(t,e){const n=this||am,r=e||n,i=hs.from(r.headers);let s=r.data;return Ye.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function gP(t){return!!(t&&t.__CANCEL__)}function uf(t,e,n){_n.call(this,t??"canceled",_n.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(uf,_n,{__CANCEL__:!0});function yP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new _n("Request failed with status code "+n.status,[_n.ERR_BAD_REQUEST,_n.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function YV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function XV(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=r[s];o||(o=f),n[i]=u,r[i]=f;let h=s,b=0;for(;h!==i;)b+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-o<e)return;const x=p&&f-p;return x?Math.round(b*1e3/x):void 0}}function eU(t,e){let n=0,r=1e3/e,i,s;const o=(f,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,f)};return[(...f)=>{const p=Date.now(),h=p-n;h>=r?o(f,p):(i=f,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const pb=(t,e,n=3)=>{let r=0;const i=XV(50,250);return eU(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-r,f=i(u),p=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&p?(l-o)/f:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},wj=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},_j=t=>(...e)=>Ye.asap(()=>t(...e)),tU=Ri.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ri.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ri.origin),Ri.navigator&&/(msie|trident)/i.test(Ri.navigator.userAgent)):()=>!0,nU=Ri.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function rU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function iU(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bP(t,e){return t&&!rU(e)?iU(t,e):e}const Sj=t=>t instanceof hs?{...t}:t;function nu(t,e){e=e||{};const n={};function r(f,p,h,b){return Ye.isPlainObject(f)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:b},f,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(f,p,h,b){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f,h,b)}else return r(f,p,h,b)}function s(f,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(f,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function l(f,p,h){if(h in e)return r(f,p);if(h in t)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,p,h)=>i(Sj(f),Sj(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,b=h(t[p],e[p],p);Ye.isUndefined(b)&&h!==l||(n[p]=b)}),n}const vP=t=>{const e=nu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=hs.from(o),e.url=pP(bP(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(Ye.isFormData(n)){if(Ri.hasStandardBrowserEnv||Ri.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[f,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Ri.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&tU(e.url))){const f=i&&s&&nU.read(s);f&&o.set(i,f)}return e},sU=typeof XMLHttpRequest<"u",oU=sU&&function(t){return new Promise(function(n,r){const i=vP(t);let s=i.data;const o=hs.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=i,p,h,b,x,_;function E(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let N=new XMLHttpRequest;N.open(i.method.toUpperCase(),i.url,!0),N.timeout=i.timeout;function j(){if(!N)return;const R=hs.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),L={data:!l||l==="text"||l==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:R,config:t,request:N};yP(function(W){n(W),E()},function(W){r(W),E()},L),N=null}"onloadend"in N?N.onloadend=j:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(j)},N.onabort=function(){N&&(r(new _n("Request aborted",_n.ECONNABORTED,t,N)),N=null)},N.onerror=function(){r(new _n("Network Error",_n.ERR_NETWORK,t,N)),N=null},N.ontimeout=function(){let q=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const L=i.transitional||hP;i.timeoutErrorMessage&&(q=i.timeoutErrorMessage),r(new _n(q,L.clarifyTimeoutError?_n.ETIMEDOUT:_n.ECONNABORTED,t,N)),N=null},s===void 0&&o.setContentType(null),"setRequestHeader"in N&&Ye.forEach(o.toJSON(),function(q,L){N.setRequestHeader(L,q)}),Ye.isUndefined(i.withCredentials)||(N.withCredentials=!!i.withCredentials),l&&l!=="json"&&(N.responseType=i.responseType),f&&([b,_]=pb(f,!0),N.addEventListener("progress",b)),u&&N.upload&&([h,x]=pb(u),N.upload.addEventListener("progress",h),N.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=R=>{N&&(r(!R||R.type?new uf(null,t,N):R),N.abort(),N=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const C=YV(i.url);if(C&&Ri.protocols.indexOf(C)===-1){r(new _n("Unsupported protocol "+C+":",_n.ERR_BAD_REQUEST,t));return}N.send(s||null)})},aU=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const p=f instanceof Error?f:this.reason;r.abort(p instanceof _n?p:new uf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new _n(`timeout ${e} of ms exceeded`,_n.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),t=null)};t.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(l),u}},lU=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},cU=async function*(t,e){for await(const n of uU(t))yield*lU(n,e)},uU=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Ej=(t,e,n,r)=>{const i=cU(t,e);let s=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await i.next();if(f){l(),u.close();return}let h=p.byteLength;if(n){let b=s+=h;n(b)}u.enqueue(new Uint8Array(p))}catch(f){throw l(f),f}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Ev=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xP=Ev&&typeof ReadableStream=="function",dU=Ev&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),wP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},fU=xP&&wP(()=>{let t=!1;const e=new Request(Ri.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Ij=64*1024,sE=xP&&wP(()=>Ye.isReadableStream(new Response("").body)),hb={stream:sE&&(t=>t.body)};Ev&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!hb[e]&&(hb[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new _n(`Response type '${e}' is not supported`,_n.ERR_NOT_SUPPORT,r)})})})(new Response);const pU=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Ri.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await dU(t)).byteLength},hU=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??pU(e)},mU=Ev&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:f,headers:p,withCredentials:h="same-origin",fetchOptions:b}=vP(t);f=f?(f+"").toLowerCase():"text";let x=aU([i,s&&s.toAbortSignal()],o),_;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let N;try{if(u&&fU&&n!=="get"&&n!=="head"&&(N=await hU(p,r))!==0){let L=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(Ye.isFormData(r)&&(M=L.headers.get("content-type"))&&p.setContentType(M),L.body){const[W,P]=wj(N,pb(_j(u)));r=Ej(L.body,Ij,W,P)}}Ye.isString(h)||(h=h?"include":"omit");const j="credentials"in Request.prototype;_=new Request(e,{...b,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:j?h:void 0});let C=await fetch(_);const R=sE&&(f==="stream"||f==="response");if(sE&&(l||R&&E)){const L={};["status","statusText","headers"].forEach(O=>{L[O]=C[O]});const M=Ye.toFiniteNumber(C.headers.get("content-length")),[W,P]=l&&wj(M,pb(_j(l),!0))||[];C=new Response(Ej(C.body,Ij,W,()=>{P&&P(),E&&E()}),L)}f=f||"text";let q=await hb[Ye.findKey(hb,f)||"text"](C,t);return!R&&E&&E(),await new Promise((L,M)=>{yP(L,M,{data:q,headers:hs.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:_})})}catch(j){throw E&&E(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new _n("Network Error",_n.ERR_NETWORK,t,_),{cause:j.cause||j}):_n.from(j,j&&j.code,t,_)}}),oE={http:TV,xhr:oU,fetch:mU};Ye.forEach(oE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Nj=t=>`- ${t}`,gU=t=>Ye.isFunction(t)||t===null||t===!1,_P={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!gU(n)&&(r=oE[(o=String(n)).toLowerCase()],r===void 0))throw new _n(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Nj).join(`
`):" "+Nj(s[0]):"as no adapter specified";throw new _n("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:oE};function g_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new uf(null,t)}function kj(t){return g_(t),t.headers=hs.from(t.headers),t.data=m_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_P.getAdapter(t.adapter||am.adapter)(t).then(function(r){return g_(t),r.data=m_.call(t,t.transformResponse,r),r.headers=hs.from(r.headers),r},function(r){return gP(r)||(g_(t),r&&r.response&&(r.response.data=m_.call(t,t.transformResponse,r.response),r.response.headers=hs.from(r.response.headers))),Promise.reject(r)})}const SP="1.7.9",Iv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Iv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Cj={};Iv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+SP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new _n(i(o," has been removed"+(n?" in "+n:"")),_n.ERR_DEPRECATED);return n&&!Cj[o]&&(Cj[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};Iv.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function yU(t,e,n){if(typeof t!="object")throw new _n("options must be an object",_n.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new _n("option "+s+" must be "+u,_n.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _n("Unknown option "+s,_n.ERR_BAD_OPTION)}}const Iy={assertOptions:yU,validators:Iv},Qo=Iy.validators;let Gc=class{constructor(e){this.defaults=e,this.interceptors={request:new vj,response:new vj}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=nu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Iy.assertOptions(r,{silentJSONParsing:Qo.transitional(Qo.boolean),forcedJSONParsing:Qo.transitional(Qo.boolean),clarifyTimeoutError:Qo.transitional(Qo.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:Iy.assertOptions(i,{encode:Qo.function,serialize:Qo.function},!0)),Iy.assertOptions(n,{baseUrl:Qo.spelling("baseURL"),withXsrfToken:Qo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=hs.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(u=u&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,h=0,b;if(!u){const _=[kj.bind(this),void 0];for(_.unshift.apply(_,l),_.push.apply(_,f),b=_.length,p=Promise.resolve(n);h<b;)p=p.then(_[h++],_[h++]);return p}b=l.length;let x=n;for(h=0;h<b;){const _=l[h++],E=l[h++];try{x=_(x)}catch(N){E.call(this,N);break}}try{p=kj.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,b=f.length;h<b;)p=p.then(f[h++],f[h++]);return p}getUri(e){e=nu(this.defaults,e);const n=bP(e.baseURL,e.url);return pP(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){Gc.prototype[e]=function(n,r){return this.request(nu(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(nu(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Gc.prototype[e]=n(),Gc.prototype[e+"Form"]=n(!0)});let bU=class EP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new uf(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new EP(function(i){e=i}),cancel:e}}};function vU(t){return function(n){return t.apply(null,n)}}function xU(t){return Ye.isObject(t)&&t.isAxiosError===!0}const aE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(aE).forEach(([t,e])=>{aE[e]=t});function IP(t){const e=new Gc(t),n=tP(Gc.prototype.request,e);return Ye.extend(n,Gc.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return IP(nu(t,i))},n}const Vr=IP(am);Vr.Axios=Gc;Vr.CanceledError=uf;Vr.CancelToken=bU;Vr.isCancel=gP;Vr.VERSION=SP;Vr.toFormData=Sv;Vr.AxiosError=_n;Vr.Cancel=Vr.CanceledError;Vr.all=function(e){return Promise.all(e)};Vr.spread=vU;Vr.isAxiosError=xU;Vr.mergeConfig=nu;Vr.AxiosHeaders=hs;Vr.formToJSON=t=>mP(Ye.isHTMLForm(t)?new FormData(t):t);Vr.getAdapter=_P.getAdapter;Vr.HttpStatusCode=aE;Vr.default=Vr;const{Axios:Ice,AxiosError:wU,CanceledError:Nce,isCancel:kce,CancelToken:Cce,VERSION:jce,all:Tce,Cancel:Rce,isAxiosError:Oce,spread:qce,toFormData:Ace,AxiosHeaders:Pce,HttpStatusCode:Fce,formToJSON:Dce,getAdapter:Lce,mergeConfig:Mce}=Vr,kI=({error:t,schema:e,onError:n})=>{if(t instanceof wU){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var y_,jj;function _U(){if(jj)return y_;jj=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return y_=n,y_}var SU=_U();const EU=uo(SU),IU=({instance:t,limit:e}={})=>EU(t||Vr,e||{maxRequests:5,perMilliseconds:100}),CI="-",NU=t=>{const e=CU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(CI);return l[0]===""&&l.length!==1&&l.shift(),NP(l,e)||kU(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},NP=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?NP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(CI);return e.validators.find(({validator:o})=>o(s))?.classGroupId},Tj=/^\[(.+)\]$/,kU=t=>{if(Tj.test(t)){const e=Tj.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},CU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return TU(Object.entries(t.classGroups),n).forEach(([s,o])=>{lE(o,r,s,e)}),r},lE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Rj(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(jU(i)){lE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{lE(o,Rj(e,s),n,r)})})},Rj=(t,e)=>{let n=t;return e.split(CI).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},jU=t=>t.isThemeGetter,TU=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,RU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},kP="!",OU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const u=[];let f=0,p=0,h;for(let N=0;N<l.length;N++){let j=l[N];if(f===0){if(j===i&&(r||l.slice(N,N+s)===e)){u.push(l.slice(p,N)),p=N+s;continue}if(j==="/"){h=N;continue}}j==="["?f++:j==="]"&&f--}const b=u.length===0?l:l.substring(p),x=b.startsWith(kP),_=x?b.substring(1):b,E=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:E}};return n?l=>n({className:l,parseClassName:o}):o},qU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},AU=t=>({cache:RU(t.cacheSize),parseClassName:OU(t),...NU(t)}),PU=/\s+/,FU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(PU);let l="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:x}=n(f);let _=!!x,E=r(_?b.substring(0,x):b);if(!E){if(!_){l=f+(l.length>0?" "+l:l);continue}if(E=r(b),!E){l=f+(l.length>0?" "+l:l);continue}_=!1}const N=qU(p).join(":"),j=h?N+kP:N,C=j+E;if(s.includes(C))continue;s.push(C);const R=i(E,_);for(let q=0;q<R.length;++q){const L=R[q];s.push(j+L)}l=f+(l.length>0?" "+l:l)}return l};function DU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CP(e))&&(r&&(r+=" "),r+=n);return r}const CP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CP(t[r]))&&(n&&(n+=" "),n+=e);return n};function LU(t,...e){let n,r,i,s=o;function o(u){const f=e.reduce((p,h)=>h(p),t());return n=AU(f),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const f=r(u);if(f)return f;const p=FU(u,n);return i(u,p),p}return function(){return s(DU.apply(null,arguments))}}const fr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},jP=/^\[(?:([a-z-]+):)?(.+)\]$/i,MU=/^\d+\/\d+$/,$U=new Set(["px","full","screen"]),BU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,VU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,UU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ka=t=>kd(t)||$U.has(t)||MU.test(t),vl=t=>df(t,"length",XU),kd=t=>!!t&&!Number.isNaN(Number(t)),b_=t=>df(t,"number",kd),gp=t=>!!t&&Number.isInteger(Number(t)),HU=t=>t.endsWith("%")&&kd(t.slice(0,-1)),En=t=>jP.test(t),xl=t=>BU.test(t),KU=new Set(["length","size","percentage"]),QU=t=>df(t,KU,TP),GU=t=>df(t,"position",TP),JU=new Set(["image","url"]),ZU=t=>df(t,JU,t5),YU=t=>df(t,"",e5),yp=()=>!0,df=(t,e,n)=>{const r=jP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},XU=t=>zU.test(t)&&!WU.test(t),TP=()=>!1,e5=t=>VU.test(t),t5=t=>UU.test(t),n5=()=>{const t=fr("colors"),e=fr("spacing"),n=fr("blur"),r=fr("brightness"),i=fr("borderColor"),s=fr("borderRadius"),o=fr("borderSpacing"),l=fr("borderWidth"),u=fr("contrast"),f=fr("grayscale"),p=fr("hueRotate"),h=fr("invert"),b=fr("gap"),x=fr("gradientColorStops"),_=fr("gradientColorStopPositions"),E=fr("inset"),N=fr("margin"),j=fr("opacity"),C=fr("padding"),R=fr("saturate"),q=fr("scale"),L=fr("sepia"),M=fr("skew"),W=fr("space"),P=fr("translate"),O=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",En,e],V=()=>[En,e],U=()=>["",ka,vl],B=()=>["auto",kd,En],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ie=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",En],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[kd,En];return{cacheSize:500,separator:":",theme:{colors:[yp],spacing:[ka,vl],blur:["none","",xl,En],brightness:te(),borderColor:[t],borderRadius:["none","","full",xl,En],borderSpacing:V(),borderWidth:U(),contrast:te(),grayscale:ne(),hueRotate:te(),invert:ne(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[HU,vl],inset:D(),margin:D(),opacity:te(),padding:V(),saturate:te(),scale:te(),sepia:ne(),skew:te(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",En]}],container:["container"],columns:[{columns:[xl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),En]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gp,En]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",En]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",gp,En]}],"grid-cols":[{"grid-cols":[yp]}],"col-start-end":[{col:["auto",{span:["full",gp,En]},En]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[yp]}],"row-start-end":[{row:["auto",{span:[gp,En]},En]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",En]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",En]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...ie()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ie(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ie(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",En,e]}],"min-w":[{"min-w":[En,e,"min","max","fit"]}],"max-w":[{"max-w":[En,e,"none","full","min","max","fit","prose",{screen:[xl]},xl]}],h:[{h:[En,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[En,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xl,vl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",b_]}],"font-family":[{font:[yp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",En]}],"line-clamp":[{"line-clamp":["none",kd,b_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ka,En]}],"list-image":[{"list-image":["none",En]}],"list-style-type":[{list:["none","disc","decimal",En]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ka,vl]}],"underline-offset":[{"underline-offset":["auto",ka,En]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),GU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ZU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[ka,En]}],"outline-w":[{outline:[ka,vl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[ka,vl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xl,YU]}],"shadow-color":[{shadow:[yp]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",xl,En]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[R]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",En]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",En]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",En]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[q]}],"scale-x":[{"scale-x":[q]}],"scale-y":[{"scale-y":[q]}],rotate:[{rotate:[gp,En]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",En]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ka,vl,b_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},RP=LU(n5),cE=new Proxy(()=>cE,{get:()=>cE});function xn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(l,u)=>({css:f,...p}={})=>{const h=[],b=t,x={...b?.()?.config.defaults,...i,...o,...p};h.push(b?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,E]of Object.entries(x)){const N=n[_]?.[E];N&&h.push(N)}for(const _ of r)Object.entries(_.if).every(([E,N])=>N===x[E])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(f),RP(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:cE()})}const sn=RP;var v_,Oj;function OP(){return Oj||(Oj=1,v_=Object),v_}var x_,qj;function r5(){return qj||(qj=1,x_=Error),x_}var w_,Aj;function i5(){return Aj||(Aj=1,w_=EvalError),w_}var __,Pj;function s5(){return Pj||(Pj=1,__=RangeError),__}var S_,Fj;function o5(){return Fj||(Fj=1,S_=ReferenceError),S_}var E_,Dj;function a5(){return Dj||(Dj=1,E_=SyntaxError),E_}var I_,Lj;function qP(){return Lj||(Lj=1,I_=TypeError),I_}var N_,Mj;function l5(){return Mj||(Mj=1,N_=URIError),N_}var k_,$j;function c5(){return $j||($j=1,k_=Math.abs),k_}var C_,Bj;function u5(){return Bj||(Bj=1,C_=Math.floor),C_}var j_,zj;function d5(){return zj||(zj=1,j_=Math.max),j_}var T_,Wj;function f5(){return Wj||(Wj=1,T_=Math.min),T_}var R_,Vj;function p5(){return Vj||(Vj=1,R_=Math.pow),R_}var O_,Uj;function h5(){return Uj||(Uj=1,O_=Math.round),O_}var q_,Hj;function m5(){return Hj||(Hj=1,q_=Number.isNaN||function(e){return e!==e}),q_}var A_,Kj;function g5(){if(Kj)return A_;Kj=1;var t=m5();return A_=function(n){return t(n)||n===0?n:n<0?-1:1},A_}var P_,Qj;function y5(){return Qj||(Qj=1,P_=Object.getOwnPropertyDescriptor),P_}var F_,Gj;function AP(){if(Gj)return F_;Gj=1;var t=y5();if(t)try{t([],"length")}catch{t=null}return F_=t,F_}var D_,Jj;function b5(){if(Jj)return D_;Jj=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return D_=t,D_}var L_,Zj;function PP(){return Zj||(Zj=1,L_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),L_}var M_,Yj;function v5(){if(Yj)return M_;Yj=1;var t=typeof Symbol<"u"&&Symbol,e=PP();return M_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},M_}var $_,Xj;function FP(){return Xj||(Xj=1,$_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),$_}var B_,eT;function DP(){if(eT)return B_;eT=1;var t=OP();return B_=t.getPrototypeOf||null,B_}var z_,tT;function x5(){if(tT)return z_;tT=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,f){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var b=0;b<f.length;b+=1)p[b+u.length]=f[b];return p},s=function(u,f){for(var p=[],h=f,b=0;h<u.length;h+=1,b+=1)p[b]=u[h];return p},o=function(l,u){for(var f="",p=0;p<l.length;p+=1)f+=l[p],p+1<l.length&&(f+=u);return f};return z_=function(u){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(t+f);for(var p=s(arguments,1),h,b=function(){if(this instanceof h){var j=f.apply(this,i(p,arguments));return Object(j)===j?j:this}return f.apply(u,i(p,arguments))},x=n(0,f.length-p.length),_=[],E=0;E<x;E++)_[E]="$"+E;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var N=function(){};N.prototype=f.prototype,h.prototype=new N,N.prototype=null}return h},z_}var W_,nT;function Nv(){if(nT)return W_;nT=1;var t=x5();return W_=Function.prototype.bind||t,W_}var V_,rT;function jI(){return rT||(rT=1,V_=Function.prototype.call),V_}var U_,iT;function LP(){return iT||(iT=1,U_=Function.prototype.apply),U_}var H_,sT;function w5(){return sT||(sT=1,H_=typeof Reflect<"u"&&Reflect&&Reflect.apply),H_}var K_,oT;function _5(){if(oT)return K_;oT=1;var t=Nv(),e=LP(),n=jI(),r=w5();return K_=r||t.call(n,e),K_}var Q_,aT;function MP(){if(aT)return Q_;aT=1;var t=Nv(),e=qP(),n=jI(),r=_5();return Q_=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},Q_}var G_,lT;function S5(){if(lT)return G_;lT=1;var t=MP(),e=AP(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return G_=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(l){return s(l==null?l:i(l))}:!1,G_}var J_,cT;function E5(){if(cT)return J_;cT=1;var t=FP(),e=DP(),n=S5();return J_=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,J_}var Z_,uT;function I5(){if(uT)return Z_;uT=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Nv();return Z_=n.call(t,e),Z_}var Y_,dT;function N5(){if(dT)return Y_;dT=1;var t,e=OP(),n=r5(),r=i5(),i=s5(),s=o5(),o=a5(),l=qP(),u=l5(),f=c5(),p=u5(),h=d5(),b=f5(),x=p5(),_=h5(),E=g5(),N=Function,j=function(De){try{return N('"use strict"; return ('+De+").constructor;")()}catch{}},C=AP(),R=b5(),q=function(){throw new l},L=C?function(){try{return arguments.callee,q}catch{try{return C(arguments,"callee").get}catch{return q}}}():q,M=v5()(),W=E5(),P=DP(),O=FP(),z=LP(),D=jI(),V={},U=typeof Uint8Array>"u"||!W?t:W(Uint8Array),B={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":M&&W?W([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":N,"%GeneratorFunction%":V,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M&&W?W(W([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M||!W?t:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":C,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M||!W?t:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M&&W?W(""[Symbol.iterator]()):t,"%Symbol%":M?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":L,"%TypedArray%":U,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":z,"%Object.defineProperty%":R,"%Object.getPrototypeOf%":P,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":E,"%Reflect.getPrototypeOf%":O};if(W)try{null.error}catch(De){var G=W(W(De));B["%Error.prototype%"]=G}var Z=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=j("async function () {}");else if(Je==="%GeneratorFunction%")Xe=j("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=j("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ve=De("%AsyncGeneratorFunction%");Ve&&(Xe=Ve.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ct=De("%AsyncGenerator%");ct&&W&&(Xe=W(ct.prototype))}return B[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ie=Nv(),ne=I5(),oe=ie.call(D,Array.prototype.concat),te=ie.call(z,Array.prototype.splice),ue=ie.call(D,String.prototype.replace),de=ie.call(D,String.prototype.slice),ye=ie.call(D,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ie=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ve=de(Je,-1);if(Xe==="%"&&Ve!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ve==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ct=[];return ue(Je,we,function(_t,Rt,Ut,an){ct[ct.length]=Ut?ue(an,Ie,"$1"):Rt||_t}),ct},Re=function(Je,Xe){var Ve=Je,ct;if(ne(le,Ve)&&(ct=le[Ve],Ve="%"+ct[0]+"%"),ne(B,Ve)){var _t=B[Ve];if(_t===V&&(_t=Z(Ve)),typeof _t>"u"&&!Xe)throw new l("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ct,name:Ve,value:_t}}throw new o("intrinsic "+Je+" does not exist!")};return Y_=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ve=ze(Je),ct=Ve.length>0?Ve[0]:"",_t=Re("%"+ct+"%",Xe),Rt=_t.name,Ut=_t.value,an=!1,xe=_t.alias;xe&&(ct=xe[0],te(Ve,oe([0,1],xe)));for(var be=1,Ne=!0;be<Ve.length;be+=1){var Ae=Ve[be],Ue=de(Ae,0,1),rt=de(Ae,-1);if((Ue==='"'||Ue==="'"||Ue==="`"||rt==='"'||rt==="'"||rt==="`")&&Ue!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!Ne)&&(an=!0),ct+="."+Ae,Rt="%"+ct+"%",ne(B,Rt))Ut=B[Rt];else if(Ut!=null){if(!(Ae in Ut)){if(!Xe)throw new l("base intrinsic for "+Je+" exists, but the property is not available.");return}if(C&&be+1>=Ve.length){var Me=C(Ut,Ae);Ne=!!Me,Ne&&"get"in Me&&!("originalValue"in Me.get)?Ut=Me.get:Ut=Ut[Ae]}else Ne=ne(Ut,Ae),Ut=Ut[Ae];Ne&&!an&&(B[Rt]=Ut)}}return Ut},Y_}var X_,fT;function k5(){if(fT)return X_;fT=1;var t=N5(),e=MP(),n=e([t("%String.prototype.indexOf%")]);return X_=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},X_}var e0,pT;function C5(){if(pT)return e0;pT=1;var t=PP();return e0=function(){return t()&&!!Symbol.toStringTag},e0}var t0,hT;function j5(){if(hT)return t0;hT=1;var t=k5(),e=t("String.prototype.valueOf"),n=function(l){try{return e(l),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=C5()();return t0=function(l){return typeof l=="string"?!0:!l||typeof l!="object"?!1:s?n(l):r(l)===i},t0}var T5=j5();const R5=uo(T5),kv=t=>R5(t),O5=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const l=n.regionLowerCase?s.toLowerCase():s;if(e.includes(l))return r.push({index:o,appLocale:l}),!0;const{isAvailable:u,appLocale:f}=q5(l,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?f.toLowerCase():f}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},q5=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!Ny()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=Ny()?new Intl.Locale(t).minimize().language:t.split("-")[0],l=Ny()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===l;return u&&(r=s),u}),appLocale:r}},A5=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},Ny=()=>Intl&&"Locale"in Intl,P5=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=Ny()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:l}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${l}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},F5=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=A5(n),i=P5([...r,t],n);return O5(i,e,n)[0]||t},D5=({available:t,fallback:e})=>F5(e,t,{languageOnly:!0});var n0={exports:{}};const L5={},M5=Object.freeze(Object.defineProperty({__proto__:null,default:L5},Symbol.toStringTag,{value:"Module"})),mT=rB(M5);var gT;function $5(){return gT||(gT=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=$c:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),f=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],b=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});var _=function(M,W){return function(P){return new R(W,!0).update(P)[M]()}},E=function(M){var W=_("hex",M);s&&(W=N(W,M)),W.create=function(){return new R(M)},W.update=function(z){return W.create().update(z)};for(var P=0;P<b.length;++P){var O=b[P];W[O]=_(O,M)}return W},N=function(M,W){var P=mT,O=mT.Buffer,z=W?"sha224":"sha256",D;O.from&&!r.JS_SHA256_NO_BUFFER_FROM?D=O.from:D=function(U){return new O(U)};var V=function(U){if(typeof U=="string")return P.createHash(z).update(U,"utf8").digest("hex");if(U==null)throw new Error(e);return U.constructor===ArrayBuffer&&(U=new Uint8Array(U)),Array.isArray(U)||ArrayBuffer.isView(U)||U.constructor===O?P.createHash(z).update(D(U)).digest("hex"):M(U)};return V},j=function(M,W){return function(P,O){return new q(P,W,!0).update(O)[M]()}},C=function(M){var W=j("hex",M);W.create=function(z){return new q(z,M)},W.update=function(z,D){return W.create(z).update(D)};for(var P=0;P<b.length;++P){var O=b[P];W[O]=j(O,M)}return W};function R(M,W){W?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=M}R.prototype.update=function(M){if(!this.finalized){var W,P=typeof M;if(P!=="string"){if(P==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);W=!0}for(var O,z=0,D,V=M.length,U=this.blocks;z<V;){if(this.hashed&&(this.hashed=!1,U[0]=this.block,this.block=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0),W)for(D=this.start;z<V&&D<64;++z)U[D>>>2]|=M[z]<<p[D++&3];else for(D=this.start;z<V&&D<64;++z)O=M.charCodeAt(z),O<128?U[D>>>2]|=O<<p[D++&3]:O<2048?(U[D>>>2]|=(192|O>>>6)<<p[D++&3],U[D>>>2]|=(128|O&63)<<p[D++&3]):O<55296||O>=57344?(U[D>>>2]|=(224|O>>>12)<<p[D++&3],U[D>>>2]|=(128|O>>>6&63)<<p[D++&3],U[D>>>2]|=(128|O&63)<<p[D++&3]):(O=65536+((O&1023)<<10|M.charCodeAt(++z)&1023),U[D>>>2]|=(240|O>>>18)<<p[D++&3],U[D>>>2]|=(128|O>>>12&63)<<p[D++&3],U[D>>>2]|=(128|O>>>6&63)<<p[D++&3],U[D>>>2]|=(128|O&63)<<p[D++&3]);this.lastByteIndex=D,this.bytes+=D-this.start,D>=64?(this.block=U[16],this.start=D-64,this.hash(),this.hashed=!0):this.start=D}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,W=this.lastByteIndex;M[16]=this.block,M[W>>>2]|=f[W&3],this.block=M[16],W>=56&&(this.hashed||this.hash(),M[0]=this.block,M[16]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0),M[14]=this.hBytes<<3|this.bytes>>>29,M[15]=this.bytes<<3,this.hash()}},R.prototype.hash=function(){var M=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,D=this.h5,V=this.h6,U=this.h7,B=this.blocks,G,Z,le,ie,ne,oe,te,ue,de,ye,we;for(G=16;G<64;++G)ne=B[G-15],Z=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=B[G-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,B[G]=B[G-16]+Z+B[G-7]+le<<0;for(we=W&P,G=0;G<64;G+=4)this.first?(this.is224?(ue=300032,ne=B[0]-0x543c9a5b,U=ne-0x8f1a6c7<<0,O=ne+0x170e9b5<<0):(ue=0x2a01a605,ne=B[0]-0xc881298,U=ne-0x5ab00ac6<<0,O=ne+0x8909ae5<<0),this.first=!1):(Z=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),le=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),ue=M&W,ie=ue^M&P^we,te=z&D^~z&V,ne=U+le+te+h[G]+B[G],oe=Z+ie,U=O+ne<<0,O=ne+oe<<0),Z=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),le=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),de=O&M,ie=de^O&W^ue,te=U&z^~U&D,ne=V+le+te+h[G+1]+B[G+1],oe=Z+ie,V=P+ne<<0,P=ne+oe<<0,Z=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),ye=P&O,ie=ye^P&M^de,te=V&U^~V&z,ne=D+le+te+h[G+2]+B[G+2],oe=Z+ie,D=W+ne<<0,W=ne+oe<<0,Z=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),le=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7),we=W&P,ie=we^W&O^ye,te=D&V^~D&U,ne=z+le+te+h[G+3]+B[G+3],oe=Z+ie,z=M+ne<<0,M=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+M<<0,this.h1=this.h1+W<<0,this.h2=this.h2+P<<0,this.h3=this.h3+O<<0,this.h4=this.h4+z<<0,this.h5=this.h5+D<<0,this.h6=this.h6+V<<0,this.h7=this.h7+U<<0},R.prototype.hex=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,D=this.h5,V=this.h6,U=this.h7,B=u[M>>>28&15]+u[M>>>24&15]+u[M>>>20&15]+u[M>>>16&15]+u[M>>>12&15]+u[M>>>8&15]+u[M>>>4&15]+u[M&15]+u[W>>>28&15]+u[W>>>24&15]+u[W>>>20&15]+u[W>>>16&15]+u[W>>>12&15]+u[W>>>8&15]+u[W>>>4&15]+u[W&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[O>>>28&15]+u[O>>>24&15]+u[O>>>20&15]+u[O>>>16&15]+u[O>>>12&15]+u[O>>>8&15]+u[O>>>4&15]+u[O&15]+u[z>>>28&15]+u[z>>>24&15]+u[z>>>20&15]+u[z>>>16&15]+u[z>>>12&15]+u[z>>>8&15]+u[z>>>4&15]+u[z&15]+u[D>>>28&15]+u[D>>>24&15]+u[D>>>20&15]+u[D>>>16&15]+u[D>>>12&15]+u[D>>>8&15]+u[D>>>4&15]+u[D&15]+u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15];return this.is224||(B+=u[U>>>28&15]+u[U>>>24&15]+u[U>>>20&15]+u[U>>>16&15]+u[U>>>12&15]+u[U>>>8&15]+u[U>>>4&15]+u[U&15]),B},R.prototype.toString=R.prototype.hex,R.prototype.digest=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,O=this.h3,z=this.h4,D=this.h5,V=this.h6,U=this.h7,B=[M>>>24&255,M>>>16&255,M>>>8&255,M&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255,D>>>24&255,D>>>16&255,D>>>8&255,D&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255];return this.is224||B.push(U>>>24&255,U>>>16&255,U>>>8&255,U&255),B},R.prototype.array=R.prototype.digest,R.prototype.arrayBuffer=function(){this.finalize();var M=new ArrayBuffer(this.is224?28:32),W=new DataView(M);return W.setUint32(0,this.h0),W.setUint32(4,this.h1),W.setUint32(8,this.h2),W.setUint32(12,this.h3),W.setUint32(16,this.h4),W.setUint32(20,this.h5),W.setUint32(24,this.h6),this.is224||W.setUint32(28,this.h7),M};function q(M,W,P){var O,z=typeof M;if(z==="string"){var D=[],V=M.length,U=0,B;for(O=0;O<V;++O)B=M.charCodeAt(O),B<128?D[U++]=B:B<2048?(D[U++]=192|B>>>6,D[U++]=128|B&63):B<55296||B>=57344?(D[U++]=224|B>>>12,D[U++]=128|B>>>6&63,D[U++]=128|B&63):(B=65536+((B&1023)<<10|M.charCodeAt(++O)&1023),D[U++]=240|B>>>18,D[U++]=128|B>>>12&63,D[U++]=128|B>>>6&63,D[U++]=128|B&63);M=D}else if(z==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);M.length>64&&(M=new R(W,!0).update(M).array());var G=[],Z=[];for(O=0;O<64;++O){var le=M[O]||0;G[O]=92^le,Z[O]=54^le}R.call(this,W,P),this.update(Z),this.oKeyPad=G,this.inner=!0,this.sharedMemory=P}q.prototype=new R,q.prototype.finalize=function(){if(R.prototype.finalize.call(this),this.inner){this.inner=!1;var M=this.array();R.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(M),R.prototype.finalize.call(this)}};var L=E();L.sha256=L,L.sha224=E(!0),L.sha256.hmac=C(),L.sha224.hmac=C(!0),o?t.exports=L:(r.sha256=L.sha256,r.sha224=L.sha224)})()}(n0)),n0.exports}var uE=$5();const B5=uE.sha224,$P=({index:t,key:e,fallback:n})=>t[B5(e)]?.value??t[e]?.value??n??e,z5=({index:t,key:e,fallback:n})=>$P({index:t,key:e,fallback:n}),W5=({index:t,key:e,fallback:n})=>$P({index:t,key:e,fallback:n}),sa={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>z5({index:sa.index,key:t,fallback:e}),rich:(t,e)=>W5({index:sa.index,key:t,fallback:e})};function Ml(t){return typeof t>"u"||t===void 0}function Fs(t){return typeof t=="string"}function Cv(t){return typeof t=="number"}function mb(t){return typeof t=="boolean"}function TI(t){return t===null}function V5(t){return t instanceof Date}function RI(t){return typeof t=="bigint"}function $s(t){return typeof t=="function"}function Zo(t){return typeof t=="object"&&t!==null}function J(t){return Object.freeze(t)}function Ug(t){return Va(t)?t:[t]}function Va(t){return Array.isArray(t)}function $l(t){return t}const Jn=J({is(t){return t.kind==="AlterTableNode"},create(t){return J({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return J({...t,...e})},cloneWithColumnAlteration(t,e){return J({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),vr=J({is(t){return t.kind==="IdentifierNode"},create(t){return J({kind:"IdentifierNode",name:t})}}),Oa=J({is(t){return t.kind==="CreateIndexNode"},create(t){return J({kind:"CreateIndexNode",name:vr.create(t)})},cloneWith(t,e){return J({...t,...e})},cloneWithColumns(t,e){return J({...t,columns:[...t.columns||[],...e]})}}),BP=J({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return J({kind:"CreateSchemaNode",schema:vr.create(t),...e})},cloneWith(t,e){return J({...t,...e})}}),U5=["preserve rows","delete rows","drop"],Es=J({is(t){return t.kind==="CreateTableNode"},create(t){return J({kind:"CreateTableNode",table:t,columns:J([])})},cloneWithColumn(t,e){return J({...t,columns:J([...t.columns,e])})},cloneWithConstraint(t,e){return J({...t,constraints:t.constraints?J([...t.constraints,e]):J([e])})},cloneWithFrontModifier(t,e){return J({...t,frontModifiers:t.frontModifiers?J([...t.frontModifiers,e]):J([e])})},cloneWithEndModifier(t,e){return J({...t,endModifiers:t.endModifiers?J([...t.endModifiers,e]):J([e])})},cloneWith(t,e){return J({...t,...e})}}),Hl=J({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return J({kind:"SchemableIdentifierNode",identifier:vr.create(t)})},createWithSchema(t,e){return J({kind:"SchemableIdentifierNode",schema:vr.create(t),identifier:vr.create(e)})}}),Yp=J({is(t){return t.kind==="DropIndexNode"},create(t,e){return J({kind:"DropIndexNode",name:Hl.create(t),...e})},cloneWith(t,e){return J({...t,...e})}}),dE=J({is(t){return t.kind==="DropSchemaNode"},create(t,e){return J({kind:"DropSchemaNode",schema:vr.create(t),...e})},cloneWith(t,e){return J({...t,...e})}}),fE=J({is(t){return t.kind==="DropTableNode"},create(t,e){return J({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return J({...t,...e})}}),ic=J({is(t){return t.kind==="AliasNode"},create(t,e){return J({kind:"AliasNode",node:t,alias:e})}}),Bl=J({is(t){return t.kind==="TableNode"},create(t){return J({kind:"TableNode",table:Hl.create(t)})},createWithSchema(t,e){return J({kind:"TableNode",table:Hl.createWithSchema(t,e)})}});function ys(t){return Zo(t)&&$s(t.toOperationNode)}function H5(t){return Zo(t)&&"expressionType"in t&&ys(t)}function K5(t){return Zo(t)&&"expression"in t&&Fs(t.alias)&&ys(t)}const Ca=J({is(t){return t.kind==="SelectModifierNode"},create(t,e){return J({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return J({kind:"SelectModifierNode",rawModifier:t})}}),Kl=J({is(t){return t.kind==="AndNode"},create(t,e){return J({kind:"AndNode",left:t,right:e})}}),ff=J({is(t){return t.kind==="OrNode"},create(t,e){return J({kind:"OrNode",left:t,right:e})}}),r0=J({is(t){return t.kind==="OnNode"},create(t){return J({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return J({...t,on:e==="And"?Kl.create(t.on,n):ff.create(t.on,n)})}}),Xp=J({is(t){return t.kind==="JoinNode"},create(t,e){return J({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return J({kind:"JoinNode",joinType:t,table:e,on:r0.create(n)})},cloneWithOn(t,e){return J({...t,on:t.on?r0.cloneWithOperation(t.on,"And",e):r0.create(e)})}}),zd=J({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return J({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),Q5=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],G5=["+","-","*","/","%","^","&","|","#","<<",">>"],zP=["->","->>"],J5=[...Q5,...G5,"&&","||"],Z5=["exists","not exists"],Y5=["not","-",...Z5],X5=[...J5,...zP,...Y5,"between","between symmetric"],Ql=J({is(t){return t.kind==="OperatorNode"},create(t){return J({kind:"OperatorNode",operator:t})}});function yT(t){return Fs(t)&&zP.includes(t)}const Ur=J({is(t){return t.kind==="ColumnNode"},create(t){return J({kind:"ColumnNode",column:vr.create(t)})}}),OI=J({is(t){return t.kind==="SelectAllNode"},create(){return J({kind:"SelectAllNode"})}}),jv=J({is(t){return t.kind==="ReferenceNode"},create(t,e){return J({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return J({kind:"ReferenceNode",table:t,column:OI.create()})}});class e8{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return KP(this.#e)}}function WP(t){return Zo(t)&&ys(t)&&Fs(t.dynamicReference)}const pE=J({is(t){return t.kind==="OrderByItemNode"},create(t,e){return J({kind:"OrderByItemNode",orderBy:t,direction:e})}}),ji=J({is(t){return t.kind==="RawNode"},create(t,e){return J({kind:"RawNode",sqlFragments:J(t),parameters:J(e)})},createWithSql(t){return ji.create([t],[])},createWithChild(t){return ji.create(["",""],[t])},createWithChildren(t){return ji.create(new Array(t.length+1).fill(""),t)}});function VP(t){return t==="asc"||t==="desc"}function lm(t){if(t.length===2)return[i0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>i0(n)):[i0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function i0(t,e){const n=t8(t);if(pE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return pE.create(n,UP(e))}function t8(t){if(pm(t))return mu(t);if(WP(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!VP(n))throw new Error(`Invalid order by direction: ${n}`);return pE.create(Ua(e),UP(n))}return Ua(t)}function UP(t){if(t)return t==="asc"||t==="desc"?ji.createWithSql(t):t.toOperationNode()}const gb=J({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return J({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return J({...t,traversal:e})}}),HP=J({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return J({kind:"JSONOperatorChainNode",operator:t,values:J([])})},cloneWithValue(t,e){return J({...t,values:J([...t.values,e])})}}),eh=J({is(t){return t.kind==="JSONPathNode"},create(t){return J({kind:"JSONPathNode",inOperator:t,pathLegs:J([])})},cloneWithLeg(t,e){return J({...t,pathLegs:J([...t.pathLegs,e])})}});function KP(t){return Fs(t)?Ua(t):t.toOperationNode()}function hh(t){return Va(t)?t.map(e=>Ts(e)):[Ts(t)]}function Ts(t){return pm(t)?mu(t):KP(t)}function n8(t,e){const n=Ua(t);if(yT(e))return gb.create(n,HP.create(Ql.create(e)));const r=e.slice(0,-1);if(yT(r))return gb.create(n,eh.create(Ql.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Ua(t){const e=".";if(!t.includes(e))return jv.create(Ur.create(t));const n=t.split(e).map(qI);if(n.length===3)return i8(n);if(n.length===2)return s8(n);throw new Error(`invalid column reference ${t}`)}function r8(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(qI);return ic.create(Ua(n),vr.create(r))}else return Ua(t)}function QP(t){return Ur.create(t)}function yb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(qI);if(!VP(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return lm([n,r])[0]}else return QP(t)}function i8(t){const[e,n,r]=t;return jv.create(Ur.create(r),Bl.createWithSchema(e,n))}function s8(t){const[e,n]=t;return jv.create(Ur.create(n),Bl.create(e))}function qI(t){return t.trim()}const GP=J({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return J({kind:"PrimitiveValueListNode",values:J([...t])})}}),AI=J({is(t){return t.kind==="ValueListNode"},create(t){return J({kind:"ValueListNode",values:J(t)})}}),oa=J({is(t){return t.kind==="ValueNode"},create(t){return J({kind:"ValueNode",value:t})},createImmediate(t){return J({kind:"ValueNode",value:t,immediate:!0})}});function o8(t){return Va(t)?a8(t):Zr(t)}function Zr(t){return pm(t)?mu(t):oa.create(t)}function PI(t){return Cv(t)||mb(t)||TI(t)}function FI(t){if(!PI(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return oa.createImmediate(t)}function a8(t){return t.some(pm)?AI.create(t.map(e=>Zr(e))):GP.create(t)}const Wd=J({is(t){return t.kind==="ParensNode"},create(t){return J({kind:"ParensNode",node:t})}});function bi(t){if(t.length===3)return DI(t[0],t[1],t[2]);if(t.length===1)return Zr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function DI(t,e,n){return l8(e)&&JP(n)?zd.create(Ts(t),hE(e),oa.createImmediate(n)):zd.create(Ts(t),hE(e),o8(n))}function aa(t,e,n){return zd.create(Ts(t),hE(e),Ts(n))}function bT(t,e){return bb(Object.entries(t).filter(([,n])=>!Ml(n)).map(([n,r])=>DI(n,JP(r)?"is":"=",r)),e)}function bb(t,e,n=!0){const r=e==="and"?Kl.create:ff.create;if(t.length===0)return zd.create(oa.createImmediate(1),Ql.create("="),oa.createImmediate(e==="and"?1:0));let i=vT(t[0]);for(let s=1;s<t.length;++s)i=r(i,vT(t[s]));return t.length>1&&n?Wd.create(i):i}function l8(t){return t==="is"||t==="is not"}function JP(t){return TI(t)||mb(t)}function hE(t){if(Fs(t)&&X5.includes(t))return Ql.create(t);if(ys(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function vT(t){return ys(t)?t.toOperationNode():t}const Gl=J({is(t){return t.kind==="OrderByNode"},create(t){return J({kind:"OrderByNode",items:J([...t])})},cloneWithItems(t,e){return J({...t,items:J([...t.items,...e])})}}),xT=J({is(t){return t.kind==="PartitionByNode"},create(t){return J({kind:"PartitionByNode",items:J(t)})},cloneWithItems(t,e){return J({...t,items:J([...t.items,...e])})}}),mE=J({is(t){return t.kind==="OverNode"},create(){return J({kind:"OverNode"})},cloneWithOrderByItems(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithPartitionByItems(t,e){return J({...t,partitionBy:t.partitionBy?xT.cloneWithItems(t.partitionBy,e):xT.create(e)})}}),vb=J({is(t){return t.kind==="FromNode"},create(t){return J({kind:"FromNode",froms:J(t)})},cloneWithFroms(t,e){return J({...t,froms:J([...t.froms,...e])})}}),wT=J({is(t){return t.kind==="GroupByNode"},create(t){return J({kind:"GroupByNode",items:J(t)})},cloneWithItems(t,e){return J({...t,items:J([...t.items,...e])})}}),_T=J({is(t){return t.kind==="HavingNode"},create(t){return J({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return J({...t,having:e==="And"?Kl.create(t.having,n):ff.create(t.having,n)})}}),Gn=J({is(t){return t.kind==="SelectQueryNode"},create(t){return J({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return J({kind:"SelectQueryNode",from:vb.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return J({...t,selections:t.selections?J([...t.selections,...e]):J(e)})},cloneWithDistinctOn(t,e){return J({...t,distinctOn:t.distinctOn?J([...t.distinctOn,...e]):J(e)})},cloneWithFrontModifier(t,e){return J({...t,frontModifiers:t.frontModifiers?J([...t.frontModifiers,e]):J([e])})},cloneWithOrderByItems(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithGroupByItems(t,e){return J({...t,groupBy:t.groupBy?wT.cloneWithItems(t.groupBy,e):wT.create(e)})},cloneWithLimit(t,e){return J({...t,limit:e})},cloneWithOffset(t,e){return J({...t,offset:e})},cloneWithFetch(t,e){return J({...t,fetch:e})},cloneWithHaving(t,e){return J({...t,having:t.having?_T.cloneWithOperation(t.having,"And",e):_T.create(e)})},cloneWithSetOperations(t,e){return J({...t,setOperations:t.setOperations?J([...t.setOperations,...e]):J([...e])})},cloneWithoutSelections(t){return J({...t,selections:[]})},cloneWithoutLimit(t){return J({...t,limit:void 0})},cloneWithoutOffset(t){return J({...t,offset:void 0})},cloneWithoutOrderBy(t){return J({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return J({...t,groupBy:void 0})}});function In(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Cd{#e;constructor(e){this.#e=J(e)}on(...e){return new Cd({...this.#e,joinNode:Xp.cloneWithOn(this.#e.joinNode,bi(e))})}onRef(e,n,r){return new Cd({...this.#e,joinNode:Xp.cloneWithOn(this.#e.joinNode,aa(e,n,r))})}onTrue(){return new Cd({...this.#e,joinNode:Xp.cloneWithOn(this.#e.joinNode,ji.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}In(Cd,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const c8=J({is(t){return t.kind==="PartitionByItemNode"},create(t){return J({kind:"PartitionByItemNode",partitionBy:t})}});function u8(t){return hh(t).map(c8.create)}class mh{#e;constructor(e){this.#e=J(e)}orderBy(e,n){return new mh({overNode:mE.cloneWithOrderByItems(this.#e.overNode,lm([e,n]))})}partitionBy(e){return new mh({overNode:mE.cloneWithPartitionByItems(this.#e.overNode,u8(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}In(mh,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const th=J({is(t){return t.kind==="SelectionNode"},create(t){return J({kind:"SelectionNode",selection:t})},createSelectAll(){return J({kind:"SelectionNode",selection:OI.create()})},createSelectAllFromTable(t){return J({kind:"SelectionNode",selection:jv.createSelectAll(t)})}});function Po(t){return $s(t)?Po(t(hf())):Va(t)?t.map(e=>ST(e)):[ST(t)]}function ST(t){return Fs(t)?th.create(r8(t)):WP(t)?th.create(t.toOperationNode()):th.create(cF(t))}function la(t){return t?Array.isArray(t)?t.map(ET):[ET(t)]:[th.createSelectAll()]}function ET(t){if(Fs(t))return th.createSelectAllFromTable(zr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const d8=J({is(t){return t.kind==="ValuesNode"},create(t){return J({kind:"ValuesNode",values:J(t)})}}),f8=J({is(t){return t.kind==="DefaultInsertValueNode"},create(){return J({kind:"DefaultInsertValueNode"})}});function ZP(t){const e=$s(t)?t(hf()):t,n=Va(e)?e:J([e]);return p8(n)}function p8(t){const e=h8(t);return[J([...e.keys()].map(Ur.create)),d8.create(t.map(n=>m8(n,e)))]}function h8(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function m8(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const l=e.get(o);if(Ml(l))continue;const u=t[o];(Ml(u)||pm(u))&&(i=!0),r[l]=u}if(n.length<e.size||i){const o=f8.create();return AI.create(r.map(l=>Ml(l)?o:Zr(l)))}return GP.create(r)}const ks=J({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return J({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return J({kind:"InsertQueryNode"})},cloneWith(t,e){return J({...t,...e})}}),jd=J({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return J({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return J({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return J({...t,from:t.from?vb.cloneWithFroms(t.from,e):vb.create(e)})},cloneWithUpdates(t,e){return J({...t,updates:t.updates?J([...t.updates,...e]):e})},cloneWithLimit(t,e){return J({...t,limit:e})}}),IT=J({is(t){return t.kind==="UsingNode"},create(t){return J({kind:"UsingNode",tables:J(t)})},cloneWithTables(t,e){return J({...t,tables:J([...t.tables,...e])})}}),Dc=J({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return J({kind:"DeleteQueryNode",from:vb.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithoutOrderBy(t){return J({...t,orderBy:void 0})},cloneWithLimit(t,e){return J({...t,limit:e})},cloneWithoutLimit(t){return J({...t,limit:void 0})},cloneWithUsing(t,e){return J({...t,using:t.using!==void 0?IT.cloneWithTables(t.using,e):IT.create(e)})}}),ds=J({is(t){return t.kind==="WhereNode"},create(t){return J({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return J({...t,where:e==="And"?Kl.create(t.where,n):ff.create(t.where,n)})}}),NT=J({is(t){return t.kind==="ReturningNode"},create(t){return J({kind:"ReturningNode",selections:J(t)})},cloneWithSelections(t,e){return J({...t,selections:t.selections?J([...t.selections,...e]):J(e)})}}),g8=J({is(t){return t.kind==="ExplainNode"},create(t,e){return J({kind:"ExplainNode",format:t,options:e})}}),cm=J({is(t){return t.kind==="WhenNode"},create(t){return J({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return J({...t,result:e})}}),fs=J({is(t){return t.kind==="MergeQueryNode"},create(t,e){return J({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return J({...t,using:e})},cloneWithWhen(t,e){return J({...t,whens:t.whens?J([...t.whens,e]):J([e])})},cloneWithThen(t,e){return J({...t,whens:t.whens?J([...t.whens.slice(0,-1),cm.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),kT=J({is(t){return t.kind==="OutputNode"},create(t){return J({kind:"OutputNode",selections:J(t)})},cloneWithSelections(t,e){return J({...t,selections:t.selections?J([...t.selections,...e]):J(e)})}}),Lt=J({is(t){return Gn.is(t)||ks.is(t)||jd.is(t)||Dc.is(t)||fs.is(t)},cloneWithEndModifier(t,e){return J({...t,endModifiers:t.endModifiers?J([...t.endModifiers,e]):J([e])})},cloneWithWhere(t,e){return J({...t,where:t.where?ds.cloneWithOperation(t.where,"And",e):ds.create(e)})},cloneWithJoin(t,e){return J({...t,joins:t.joins?J([...t.joins,e]):J([e])})},cloneWithReturning(t,e){return J({...t,returning:t.returning?NT.cloneWithSelections(t.returning,e):NT.create(e)})},cloneWithoutReturning(t){return J({...t,returning:void 0})},cloneWithoutWhere(t){return J({...t,where:void 0})},cloneWithExplain(t,e,n){return J({...t,explain:g8.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return J({...t,top:e})},cloneWithOutput(t,e){return J({...t,output:t.output?kT.cloneWithSelections(t.output,e):kT.create(e)})}}),YP=J({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return J({kind:"ColumnUpdateNode",column:t,value:e})}});function y8(...t){return t.length===2?[YP.create(Ts(t[0]),Zr(t[1]))]:LI(t[0])}function LI(t){const e=$s(t)?t(hf()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>YP.create(Ur.create(n),Zr(r)))}const b8=J({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return J({kind:"OnDuplicateKeyNode",updates:t})}});class v8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class um extends Error{node;constructor(e){super("no result"),this.node=e}}function dm(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Is=J({is(t){return t.kind==="OnConflictNode"},create(){return J({kind:"OnConflictNode"})},cloneWith(t,e){return J({...t,...e})},cloneWithIndexWhere(t,e){return J({...t,indexWhere:t.indexWhere?ds.cloneWithOperation(t.indexWhere,"And",e):ds.create(e)})},cloneWithIndexOrWhere(t,e){return J({...t,indexWhere:t.indexWhere?ds.cloneWithOperation(t.indexWhere,"Or",e):ds.create(e)})},cloneWithUpdateWhere(t,e){return J({...t,updateWhere:t.updateWhere?ds.cloneWithOperation(t.updateWhere,"And",e):ds.create(e)})},cloneWithUpdateOrWhere(t,e){return J({...t,updateWhere:t.updateWhere?ds.cloneWithOperation(t.updateWhere,"Or",e):ds.create(e)})},cloneWithoutIndexWhere(t){return J({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return J({...t,updateWhere:void 0})}});class Jo{#e;constructor(e){this.#e=J(e)}column(e){const n=Ur.create(e);return new Jo({...this.#e,onConflictNode:Is.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?J([...this.#e.onConflictNode.columns,n]):J([n])})})}columns(e){const n=e.map(Ur.create);return new Jo({...this.#e,onConflictNode:Is.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?J([...this.#e.onConflictNode.columns,...n]):J(n)})})}constraint(e){return new Jo({...this.#e,onConflictNode:Is.cloneWith(this.#e.onConflictNode,{constraint:vr.create(e)})})}expression(e){return new Jo({...this.#e,onConflictNode:Is.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Jo({...this.#e,onConflictNode:Is.cloneWithIndexWhere(this.#e.onConflictNode,bi(e))})}whereRef(e,n,r){return new Jo({...this.#e,onConflictNode:Is.cloneWithIndexWhere(this.#e.onConflictNode,aa(e,n,r))})}clearWhere(){return new Jo({...this.#e,onConflictNode:Is.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new XP({...this.#e,onConflictNode:Is.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Td({...this.#e,onConflictNode:Is.cloneWith(this.#e.onConflictNode,{updates:LI(e)})})}$call(e){return e(this)}}In(Jo,"don't await OnConflictBuilder instances.");class XP{#e;constructor(e){this.#e=J(e)}toOperationNode(){return this.#e.onConflictNode}}In(XP,"don't await OnConflictDoNothingBuilder instances.");class Td{#e;constructor(e){this.#e=J(e)}where(...e){return new Td({...this.#e,onConflictNode:Is.cloneWithUpdateWhere(this.#e.onConflictNode,bi(e))})}whereRef(e,n,r){return new Td({...this.#e,onConflictNode:Is.cloneWithUpdateWhere(this.#e.onConflictNode,aa(e,n,r))})}clearWhere(){return new Td({...this.#e,onConflictNode:Is.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}In(Td,"don't await OnConflictUpdateBuilder instances.");const x8=J({is(t){return t.kind==="TopNode"},create(t,e){return J({kind:"TopNode",expression:t,modifiers:e})}});function pf(t,e){if(!Cv(t)&&!RI(t))throw new Error(`Invalid top expression: ${t}`);if(!Ml(e)&&!w8(e))throw new Error(`Invalid top modifiers: ${e}`);return x8.create(t,e)}function w8(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class gr{#e;constructor(e){this.#e=J(e)}values(e){const[n,r]=ZP(e);return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{columns:J(e.map(Ur.create))})})}expression(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{values:mu(e)})})}defaultValues(){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new gr({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new gr({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,pf(e,n))})}onConflict(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{onConflict:e(new Jo({onConflictNode:Is.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{onDuplicateKey:b8.create(LI(e))})})}returning(e){return new gr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(){return new gr({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,la())})}output(e){return new gr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new gr({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}clearReturning(){return new gr({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new gr({...this.#e})}$castTo(){return new gr(this.#e)}$narrowType(){return new gr(this.#e)}$assertType(){return new gr(this.#e)}withPlugin(e){return new gr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new v8(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=um){const n=await this.executeTakeFirst();if(n===void 0)throw dm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new gr({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}In(gr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class _8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const MI=J({is(t){return t.kind==="LimitNode"},create(t){return J({kind:"LimitNode",limit:t})}});class Qn{#e;constructor(e){this.#e=J(e)}where(...e){return new Qn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,bi(e))})}whereRef(e,n,r){return new Qn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,aa(e,n,r))})}clearWhere(){return new Qn({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Qn({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,pf(e,n))})}using(e){return new Qn({...this.#e,queryNode:Dc.cloneWithUsing(this.#e.queryNode,bh(e))})}innerJoin(...e){return new Qn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("InnerJoin",e))})}leftJoin(...e){return new Qn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("LeftJoin",e))})}rightJoin(...e){return new Qn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("RightJoin",e))})}fullJoin(...e){return new Qn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("FullJoin",e))})}returning(e){return new Qn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Qn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,la(e))})}output(e){return new Qn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Qn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}clearReturning(){return new Qn({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Qn({...this.#e,queryNode:Dc.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Qn({...this.#e,queryNode:Dc.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Qn({...this.#e,queryNode:Dc.cloneWithOrderByItems(this.#e.queryNode,lm([e,n]))})}limit(e){return new Qn({...this.#e,queryNode:Dc.cloneWithLimit(this.#e.queryNode,MI.create(Zr(e)))})}modifyEnd(e){return new Qn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Qn({...this.#e})}$castTo(){return new Qn(this.#e)}$narrowType(){return new Qn(this.#e)}$assertType(){return new Qn(this.#e)}withPlugin(e){return new Qn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new _8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=um){const n=await this.executeTakeFirst();if(n===void 0)throw dm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Qn({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}In(Qn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class S8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class Xn{#e;constructor(e){this.#e=J(e)}where(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,bi(e))})}whereRef(e,n,r){return new Xn({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,aa(e,n,r))})}clearWhere(){return new Xn({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Xn({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,pf(e,n))})}from(e){return new Xn({...this.#e,queryNode:jd.cloneWithFromItems(this.#e.queryNode,bh(e))})}innerJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("InnerJoin",e))})}leftJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("LeftJoin",e))})}rightJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("RightJoin",e))})}fullJoin(...e){return new Xn({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("FullJoin",e))})}limit(e){return new Xn({...this.#e,queryNode:jd.cloneWithLimit(this.#e.queryNode,MI.create(Zr(e)))})}set(...e){return new Xn({...this.#e,queryNode:jd.cloneWithUpdates(this.#e.queryNode,y8(...e))})}returning(e){return new Xn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Xn({...this.#e,queryNode:Lt.cloneWithReturning(this.#e.queryNode,la(e))})}output(e){return new Xn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Xn({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}modifyEnd(e){return new Xn({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new Xn({...this.#e,queryNode:Lt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new Xn({...this.#e})}$castTo(){return new Xn(this.#e)}$narrowType(){return new Xn(this.#e)}$assertType(){return new Xn(this.#e)}withPlugin(e){return new Xn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new S8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=um){const n=await this.executeTakeFirst();if(n===void 0)throw dm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Xn({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}In(Xn,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const CT=J({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return J({kind:"CommonTableExpressionNameNode",table:Bl.create(t),columns:e?J(e.map(Ur.create)):void 0})}}),xb=J({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return J({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return J({...t,...e})}});class gh{#e;constructor(e){this.#e=J(e)}materialized(){return new gh({...this.#e,node:xb.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new gh({...this.#e,node:xb.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}In(gh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function jT(t,e){const n=e(P8()).toOperationNode();return $s(t)?t(E8(n)).toOperationNode():xb.create(eF(t),n)}function E8(t){return e=>new gh({node:xb.create(eF(e),t)})}function eF(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return CT.create(n,r)}else return CT.create(t)}const Hg=J({is(t){return t.kind==="WithNode"},create(t,e){return J({kind:"WithNode",expressions:J([t]),...e})},cloneWithExpression(t,e){return J({...t,expressions:J([...t.expressions,e])})}}),TT=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function I8(t){let e="";for(let n=0;n<t;++n)e+=N8();return e}function N8(){return TT[~~(Math.random()*TT.length)]}function Zn(){return new k8}class k8{#e;get queryId(){return this.#e===void 0&&(this.#e=I8(8)),this.#e}}class tF{nodeStack=[];#e=J({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),J(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&J(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:J([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const C8=J({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class j8 extends tF{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:vr.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Bl.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in C8}#i(e){const n=new Set;if("name"in e&&e.name&&Hl.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#c(e.with,n),n}#o(e,n){const r=Bl.is(e)?e:ic.is(e)&&Bl.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#c(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class fm{#e;constructor(e){this.#e=new j8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const T8=J({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return J({kind:"MatchedNode",not:t,bySource:e})}});function RT(t,e,n){return cm.create(bb([T8.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?aa(e[0],e[1],e[2]):bi(e)]:[]],"and",!1))}function nh(t){return Fs(t)?ji.create([t],[]):ys(t)?t.toOperationNode():t}class OT{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const qT=new Set;function R8(t){qT.has(t)||(qT.add(t),console.log(t))}const O8=J([]);class nF{#e;constructor(e=O8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return q8(i,s),s})}async *stream(e,n,r){const i=new OT,s=new OT;this.provideConnection(async l=>(i.resolve(l),await s.promise)).catch(l=>i.reject(l));const o=await i.promise;try{for await(const l of o.streamQuery(e,n))yield await this.#t(l,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function q8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||R8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class hd extends nF{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new hd([...this.plugins,e])}withPlugins(e){return new hd([...this.plugins,...e])}withPluginAtFront(e){return new hd([e,...this.plugins])}withoutPlugins(){return new hd([])}}const Tv=new hd;class A8{numChangedRows;constructor(e){this.numChangedRows=e}}class Uc{#e;constructor(e){this.#e=J(e)}modifyEnd(e){return new Uc({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Uc({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,pf(e,n))})}using(...e){return new Rs({...this.#e,queryNode:fs.cloneWithUsing(this.#e.queryNode,Wi("Using",e))})}output(e){return new Uc({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Uc({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}}In(Uc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Rs{#e;constructor(e){this.#e=J(e)}modifyEnd(e){return new Rs({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Rs({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,pf(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new gE({...this.#e,queryNode:fs.cloneWithWhen(this.#e.queryNode,RT({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new Rs({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Rs({...this.#e,queryNode:Lt.cloneWithOutput(this.#e.queryNode,la(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:fs.cloneWithWhen(this.#e.queryNode,RT({isMatched:!1,bySource:r},e,n))},s=r?gE:rF;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new Rs({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new A8(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=um){const n=await this.executeTakeFirst();if(n===void 0)throw dm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}In(Rs,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class gE{#e;constructor(e){this.#e=J(e)}thenDelete(){return new Rs({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,nh("delete"))})}thenDoNothing(){return new Rs({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,nh("do nothing"))})}thenUpdate(e){return new Rs({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,nh(e(new Xn({queryId:this.#e.queryId,executor:Tv,queryNode:jd.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}In(gE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class rF{#e;constructor(e){this.#e=J(e)}thenDoNothing(){return new Rs({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,nh("do nothing"))})}thenInsertValues(e){const[n,r]=ZP(e);return new Rs({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,nh(ks.cloneWith(ks.createWithoutInto(),{columns:n,values:r})))})}}In(rF,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Rl{#e;constructor(e){this.#e=J(e)}selectFrom(e){return yE({queryId:Zn(),executor:this.#e.executor,queryNode:Gn.createFrom(bh(e),this.#e.withNode)})}selectNoFrom(e){return yE({queryId:Zn(),executor:this.#e.executor,queryNode:Gn.cloneWithSelections(Gn.create(this.#e.withNode),Po(e))})}insertInto(e){return new gr({queryId:Zn(),executor:this.#e.executor,queryNode:ks.create(zr(e),this.#e.withNode)})}replaceInto(e){return new gr({queryId:Zn(),executor:this.#e.executor,queryNode:ks.create(zr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Qn({queryId:Zn(),executor:this.#e.executor,queryNode:Dc.create(bh(e),this.#e.withNode)})}updateTable(e){return new Xn({queryId:Zn(),executor:this.#e.executor,queryNode:jd.create(vh(e),this.#e.withNode)})}mergeInto(e){return new Uc({queryId:Zn(),executor:this.#e.executor,queryNode:fs.create(uF(e),this.#e.withNode)})}with(e,n){const r=jT(e,n);return new Rl({...this.#e,withNode:this.#e.withNode?Hg.cloneWithExpression(this.#e.withNode,r):Hg.create(r)})}withRecursive(e,n){const r=jT(e,n);return new Rl({...this.#e,withNode:this.#e.withNode?Hg.cloneWithExpression(this.#e.withNode,r):Hg.create(r,{recursive:!0})})}withPlugin(e){return new Rl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Rl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Rl({...this.#e,executor:this.#e.executor.withPluginAtFront(new fm(e))})}}function P8(){return new Rl({executor:Tv})}function F8(t,e){return new Cd({joinNode:Xp.create(t,vh(e))})}function D8(){return new mh({overNode:mE.create()})}function Wi(t,e){if(e.length===3)return M8(t,e[0],e[1],e[2]);if(e.length===2)return L8(t,e[0],e[1]);throw new Error("not implemented")}function L8(t,e,n){return n(F8(t,e)).toOperationNode()}function M8(t,e,n,r){return Xp.createWithOn(t,vh(e),aa(n,"=",r))}const $8=J({is(t){return t.kind==="OffsetNode"},create(t){return J({kind:"OffsetNode",offset:t})}}),B8=J({is(t){return t.kind==="GroupByItemNode"},create(t){return J({kind:"GroupByItemNode",groupBy:t})}});function z8(t){return t=$s(t)?t(hf()):t,hh(t).map(B8.create)}const iF=J({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return J({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Xu(t,e,n){return $s(e)&&(e=e(BI())),Va(e)||(e=[e]),e.map(r=>iF.create(t,mu(r),n))}class er{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new $I(this,e)}or(...e){return new wb(ff.create(this.#e,bi(e)))}and(...e){return new _b(Kl.create(this.#e,bi(e)))}$castTo(){return new er(this.#e)}$notNull(){return new er(this.#e)}toOperationNode(){return this.#e}}class $I{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ic.create(this.#e.toOperationNode(),ys(this.#t)?this.#t.toOperationNode():vr.create(this.#t))}}class wb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new $I(this,e)}or(...e){return new wb(ff.create(this.#e,bi(e)))}$castTo(){return new wb(this.#e)}toOperationNode(){return Wd.create(this.#e)}}class _b{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new $I(this,e)}and(...e){return new _b(Kl.create(this.#e,bi(e)))}$castTo(){return new _b(this.#e)}toOperationNode(){return Wd.create(this.#e)}}const W8={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:oa.create(t),modifier:e}}};function V8(t,e){if(!Cv(t)&&!RI(t))throw new Error(`Invalid fetch row count: ${t}`);if(!U8(e))throw new Error(`Invalid fetch modifier: ${e}`);return W8.create(t,e)}function U8(t){return t==="only"||t==="with ties"}class ln{#e;constructor(e){this.#e=J(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new ln({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,bi(e))})}whereRef(e,n,r){return new ln({...this.#e,queryNode:Lt.cloneWithWhere(this.#e.queryNode,aa(e,n,r))})}having(...e){return new ln({...this.#e,queryNode:Gn.cloneWithHaving(this.#e.queryNode,bi(e))})}havingRef(e,n,r){return new ln({...this.#e,queryNode:Gn.cloneWithHaving(this.#e.queryNode,aa(e,n,r))})}select(e){return new ln({...this.#e,queryNode:Gn.cloneWithSelections(this.#e.queryNode,Po(e))})}distinctOn(e){return new ln({...this.#e,queryNode:Gn.cloneWithDistinctOn(this.#e.queryNode,hh(e))})}modifyFront(e){return new ln({...this.#e,queryNode:Gn.cloneWithFrontModifier(this.#e.queryNode,Ca.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.createWithExpression(e.toOperationNode()))})}distinct(){return new ln({...this.#e,queryNode:Gn.cloneWithFrontModifier(this.#e.queryNode,Ca.create("Distinct"))})}forUpdate(e){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForUpdate",e?Ug(e).map(zr):void 0))})}forShare(e){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForShare",e?Ug(e).map(zr):void 0))})}forKeyShare(e){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForKeyShare",e?Ug(e).map(zr):void 0))})}forNoKeyUpdate(e){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("ForNoKeyUpdate",e?Ug(e).map(zr):void 0))})}skipLocked(){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("SkipLocked"))})}noWait(){return new ln({...this.#e,queryNode:Lt.cloneWithEndModifier(this.#e.queryNode,Ca.create("NoWait"))})}selectAll(e){return new ln({...this.#e,queryNode:Gn.cloneWithSelections(this.#e.queryNode,la(e))})}innerJoin(...e){return new ln({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("InnerJoin",e))})}leftJoin(...e){return new ln({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("LeftJoin",e))})}rightJoin(...e){return new ln({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("RightJoin",e))})}fullJoin(...e){return new ln({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("FullJoin",e))})}innerJoinLateral(...e){return new ln({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("LateralInnerJoin",e))})}leftJoinLateral(...e){return new ln({...this.#e,queryNode:Lt.cloneWithJoin(this.#e.queryNode,Wi("LateralLeftJoin",e))})}orderBy(...e){return new ln({...this.#e,queryNode:Gn.cloneWithOrderByItems(this.#e.queryNode,lm(e))})}groupBy(e){return new ln({...this.#e,queryNode:Gn.cloneWithGroupByItems(this.#e.queryNode,z8(e))})}limit(e){return new ln({...this.#e,queryNode:Gn.cloneWithLimit(this.#e.queryNode,MI.create(Zr(e)))})}offset(e){return new ln({...this.#e,queryNode:Gn.cloneWithOffset(this.#e.queryNode,$8.create(Zr(e)))})}fetch(e,n="only"){return new ln({...this.#e,queryNode:Gn.cloneWithFetch(this.#e.queryNode,V8(e,n))})}top(e,n){return new ln({...this.#e,queryNode:Lt.cloneWithTop(this.#e.queryNode,pf(e,n))})}union(e){return new ln({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Xu("union",e,!1))})}unionAll(e){return new ln({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Xu("union",e,!0))})}intersect(e){return new ln({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Xu("intersect",e,!1))})}intersectAll(e){return new ln({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Xu("intersect",e,!0))})}except(e){return new ln({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Xu("except",e,!1))})}exceptAll(e){return new ln({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Xu("except",e,!0))})}as(e){return new sF(this,e)}clearSelect(){return new ln({...this.#e,queryNode:Gn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new ln({...this.#e,queryNode:Lt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new ln({...this.#e,queryNode:Gn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new ln({...this.#e,queryNode:Gn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new ln({...this.#e,queryNode:Gn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new ln({...this.#e,queryNode:Gn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new ln({...this.#e})}$castTo(){return new ln(this.#e)}$narrowType(){return new ln(this.#e)}$assertType(){return new ln(this.#e)}$asTuple(){return new er(this.toOperationNode())}withPlugin(e){return new ln({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=um){const n=await this.executeTakeFirst();if(n===void 0)throw dm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new ln({...this.#e,queryNode:Lt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}In(ln,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function yE(t){return new ln(t)}class sF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return ic.create(this.#e.toOperationNode(),vr.create(this.#t))}}In(sF,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Ol=J({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return J({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return J({...t,distinct:!0})},cloneWithOrderBy(t,e){return J({...t,orderBy:t.orderBy?Gl.cloneWithItems(t.orderBy,e):Gl.create(e)})},cloneWithFilter(t,e){return J({...t,filter:t.filter?ds.cloneWithOperation(t.filter,"And",e):ds.create(e)})},cloneWithOrFilter(t,e){return J({...t,filter:t.filter?ds.cloneWithOperation(t.filter,"Or",e):ds.create(e)})},cloneWithOver(t,e){return J({...t,over:e})}}),AT=J({is(t){return t.kind==="FunctionNode"},create(t,e){return J({kind:"FunctionNode",func:t,arguments:e})}});class ro{#e;constructor(e){this.#e=J(e)}get expressionType(){}as(e){return new H8(this,e)}distinct(){return new ro({...this.#e,aggregateFunctionNode:Ol.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new ro({...this.#e,aggregateFunctionNode:Ol.cloneWithOrderBy(this.#e.aggregateFunctionNode,lm([e,n]))})}filterWhere(...e){return new ro({...this.#e,aggregateFunctionNode:Ol.cloneWithFilter(this.#e.aggregateFunctionNode,bi(e))})}filterWhereRef(e,n,r){return new ro({...this.#e,aggregateFunctionNode:Ol.cloneWithFilter(this.#e.aggregateFunctionNode,aa(e,n,r))})}over(e){const n=D8();return new ro({...this.#e,aggregateFunctionNode:Ol.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new ro(this.#e)}$notNull(){return new ro(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}In(ro,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class H8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ic.create(this.#e.toOperationNode(),vr.create(this.#t))}}function oF(){const t=(n,r)=>new er(AT.create(n,hh(r??[]))),e=(n,r)=>new ro({aggregateFunctionNode:Ol.create(n,r?hh(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new ro({aggregateFunctionNode:Ol.create("count",la(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new ro({aggregateFunctionNode:Ol.create("json_agg",[Fs(n)?zr(n):n.toOperationNode()])})},toJson(n){return new er(AT.create("to_json",[Fs(n)?zr(n):n.toOperationNode()]))}})}const K8=J({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return J({kind:"UnaryOperationNode",operator:t,operand:e})}});function Q8(t,e){return K8.create(Ql.create(t),Ts(e))}const Xo=J({is(t){return t.kind==="CaseNode"},create(t){return J({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return J({...t,when:J(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return J({...t,when:t.when?J([...t.when.slice(0,-1),cm.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return J({...t,...e})}});class aF{#e;constructor(e){this.#e=J(e)}when(...e){return new lF({...this.#e,node:Xo.cloneWithWhen(this.#e.node,cm.create(bi(e)))})}}class lF{#e;constructor(e){this.#e=J(e)}then(e){return new G8({...this.#e,node:Xo.cloneWithThen(this.#e.node,PI(e)?FI(e):Zr(e))})}}class G8{#e;constructor(e){this.#e=J(e)}when(...e){return new lF({...this.#e,node:Xo.cloneWithWhen(this.#e.node,cm.create(bi(e)))})}else(e){return new J8({...this.#e,node:Xo.cloneWith(this.#e.node,{else:PI(e)?FI(e):Zr(e)})})}end(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!0}))}}class J8{#e;constructor(e){this.#e=J(e)}end(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new er(Xo.cloneWith(this.#e.node,{isStatement:!0}))}}const PT=J({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return J({kind:"JSONPathLegNode",type:t,value:e})}});class bE{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return gb.is(this.#e)?new yh(gb.cloneWithTraversal(this.#e,eh.is(this.#e.traversal)?eh.cloneWithLeg(this.#e.traversal,PT.create(e,n)):HP.cloneWithValue(this.#e.traversal,oa.createImmediate(n)))):new yh(eh.cloneWithLeg(this.#e,PT.create(e,n)))}}class yh extends bE{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new Z8(this,e)}$castTo(){return new yh(this.#e)}$notNull(){return new yh(this.#e)}toOperationNode(){return this.#e}}class Z8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ic.create(this.#e.toOperationNode(),ys(this.#t)?this.#t.toOperationNode():vr.create(this.#t))}}const FT=J({is(t){return t.kind==="TupleNode"},create(t){return J({kind:"TupleNode",values:J(t)})}}),Y8=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],X8=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],eH=J({is(t){return t.kind==="DataTypeNode"},create(t){return J({kind:"DataTypeNode",dataType:t})}});function tH(t){return!!(Y8.includes(t)||X8.some(e=>e.test(t)))}function ru(t){if(ys(t))return t.toOperationNode();if(tH(t))return eH.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const nH=J({is(t){return t.kind==="CastNode"},create(t,e){return J({kind:"CastNode",expression:t,dataType:e})}});function BI(t=Tv){function e(i,s,o){return new er(DI(i,s,o))}function n(i,s){return new er(Q8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return yE({queryId:Zn(),executor:t,queryNode:Gn.createFrom(bh(i))})},case(i){return new aF({node:Xo.create(Ml(i)?void 0:Ts(i))})},ref(i,s){return Ml(s)?new er(Ua(i)):new bE(n8(i,s))},jsonPath(){return new bE(eh.create())},table(i){return new er(zr(i))},val(i){return new er(Zr(i))},refTuple(...i){return new er(FT.create(i.map(Ts)))},tuple(...i){return new er(FT.create(i.map(Zr)))},lit(i){return new er(FI(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new er(zd.create(Ts(i),Ql.create("between"),Kl.create(Zr(s),Zr(o))))},betweenSymmetric(i,s,o){return new er(zd.create(Ts(i),Ql.create("between symmetric"),Kl.create(Zr(s),Zr(o))))},and(i){return Va(i)?new er(bb(i,"and")):new er(bT(i,"and"))},or(i){return Va(i)?new er(bb(i,"or")):new er(bT(i,"or"))},parens(...i){const s=bi(i);return Wd.is(s)?new er(s):new er(Wd.create(s))},cast(i,s){return new er(nH.create(Ts(i),ru(s)))},withSchema(i){return BI(t.withPluginAtFront(new fm(i)))}});return r.fn=oF(),r.eb=r,r}function hf(t){return BI()}function mu(t){if(ys(t))return t.toOperationNode();if($s(t))return t(hf()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function cF(t){if(ys(t))return t.toOperationNode();if($s(t))return t(hf()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function pm(t){return H5(t)||K5(t)||$s(t)}function bh(t){return Va(t)?t.map(e=>vh(e)):[vh(t)]}function vh(t){return Fs(t)?uF(t):cF(t)}function uF(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(dF);return ic.create(zr(n),vr.create(r))}else return zr(t)}function zr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(dF);return Bl.createWithSchema(n,r)}else return Bl.create(t)}function dF(t){return t.trim()}const fF=J({is(t){return t.kind==="AddColumnNode"},create(t){return J({kind:"AddColumnNode",column:t})}}),yr=J({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return J({kind:"ColumnDefinitionNode",column:Ur.create(t),dataType:e})},cloneWithFrontModifier(t,e){return J({...t,frontModifiers:t.frontModifiers?J([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return J({...t,endModifiers:t.endModifiers?J([...t.endModifiers,e]):[e]})},cloneWith(t,e){return J({...t,...e})}}),pF=J({is(t){return t.kind==="DropColumnNode"},create(t){return J({kind:"DropColumnNode",column:Ur.create(t)})}}),hF=J({is(t){return t.kind==="RenameColumnNode"},create(t,e){return J({kind:"RenameColumnNode",column:Ur.create(t),renameTo:Ur.create(e)})}}),zI=J({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return J({kind:"CheckConstraintNode",expression:t,name:e?vr.create(e):void 0})}}),rH=["no action","restrict","cascade","set null","set default"],ky=J({is(t){return t.kind==="ReferencesNode"},create(t,e){return J({kind:"ReferencesNode",table:t,columns:J([...e])})},cloneWithOnDelete(t,e){return J({...t,onDelete:e})},cloneWithOnUpdate(t,e){return J({...t,onUpdate:e})}});function mF(t){return ys(t)?t.toOperationNode():oa.createImmediate(t)}const Kg=J({is(t){return t.kind==="GeneratedNode"},create(t){return J({kind:"GeneratedNode",...t})},createWithExpression(t){return J({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return J({...t,...e})}}),iH=J({is(t){return t.kind==="DefaultValueNode"},create(t){return J({kind:"DefaultValueNode",defaultValue:t})}});function Sb(t){if(rH.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class ir{#e;constructor(e){this.#e=e}autoIncrement(){return new ir(yr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new ir(yr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new ir(yr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=Ua(e);if(!n.table||OI.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new ir(yr.cloneWith(this.#e,{references:ky.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new ir(yr.cloneWith(this.#e,{references:ky.cloneWithOnDelete(this.#e.references,Sb(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new ir(yr.cloneWith(this.#e,{references:ky.cloneWithOnUpdate(this.#e.references,Sb(e))}))}unique(){return new ir(yr.cloneWith(this.#e,{unique:!0}))}notNull(){return new ir(yr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new ir(yr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new ir(yr.cloneWith(this.#e,{defaultTo:iH.create(mF(e))}))}check(e){return new ir(yr.cloneWith(this.#e,{check:zI.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new ir(yr.cloneWith(this.#e,{generated:Kg.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new ir(yr.cloneWith(this.#e,{generated:Kg.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new ir(yr.cloneWith(this.#e,{generated:Kg.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new ir(yr.cloneWith(this.#e,{generated:Kg.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new ir(yr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new ir(yr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new ir(yr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new ir(yr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}In(ir,"don't await ColumnDefinitionBuilder instances directly.");const gF=J({is(t){return t.kind==="ModifyColumnNode"},create(t){return J({kind:"ModifyColumnNode",column:t})}}),Eb=J({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return J({kind:"ForeignKeyConstraintNode",columns:t,references:ky.create(e,n),name:r?vr.create(r):void 0})},cloneWith(t,e){return J({...t,...e})}});class Vd{#e;constructor(e){this.#e=e}onDelete(e){return new Vd(Eb.cloneWith(this.#e,{onDelete:Sb(e)}))}onUpdate(e){return new Vd(Eb.cloneWith(this.#e,{onUpdate:Sb(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}In(Vd,"don't await ForeignKeyConstraintBuilder instances directly.");const Cy=J({is(t){return t.kind==="AddConstraintNode"},create(t){return J({kind:"AddConstraintNode",constraint:t})}}),WI=J({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return J({kind:"UniqueConstraintNode",columns:J(t.map(Ur.create)),name:e?vr.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return J({...t,...e})}}),jy=J({is(t){return t.kind==="DropConstraintNode"},create(t){return J({kind:"DropConstraintNode",constraintName:vr.create(t)})},cloneWith(t,e){return J({...t,...e})}}),bp=J({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return J({kind:"AlterColumnNode",column:Ur.create(t),[e]:n})}});class VI{#e;constructor(e){this.#e=e}setDataType(e){return new ud(bp.create(this.#e,"dataType",ru(e)))}setDefault(e){return new ud(bp.create(this.#e,"setDefault",mF(e)))}dropDefault(){return new ud(bp.create(this.#e,"dropDefault",!0))}setNotNull(){return new ud(bp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new ud(bp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}In(VI,"don't await AlterColumnBuilder instances");class ud{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}In(ud,"don't await AlteredColumnBuilder instances");class qc{#e;constructor(e){this.#e=J(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(qc,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class xh{#e;constructor(e){this.#e=J(e)}onDelete(e){return new xh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new xh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Jn.cloneWithTableProps(this.#e.node,{addConstraint:Cy.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(xh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Rd{#e;constructor(e){this.#e=J(e)}ifExists(){return new Rd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:jy.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Rd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:jy.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Rd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:jy.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(Rd,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const yF=J({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return J({kind:"PrimaryKeyConstraintNode",columns:J(t.map(Ur.create)),name:e?vr.create(e):void 0})}}),dd=J({is(t){return t.kind==="AddIndexNode"},create(t){return J({kind:"AddIndexNode",name:vr.create(t)})},cloneWith(t,e){return J({...t,...e})},cloneWithColumns(t,e){return J({...t,columns:[...t.columns||[],...e]})}});class ql{#e;constructor(e){this.#e=J(e)}unique(){return new ql({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:dd.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new ql({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:dd.cloneWithColumns(this.#e.node.addIndex,[yb(e)])})})}columns(e){return new ql({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:dd.cloneWithColumns(this.#e.node.addIndex,e.map(yb))})})}expression(e){return new ql({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:dd.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new ql({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:dd.cloneWith(this.#e.node.addIndex,{using:ji.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(ql,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class hm{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new hm(WI.cloneWith(this.#e,{nullsNotDistinct:!0}))}}In(hm,"don't await UniqueConstraintNodeBuilder instances directly.");class bF{#e;constructor(e){this.#e=J(e)}renameTo(e){return new qc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{renameTo:zr(e)})})}setSchema(e){return new qc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{setSchema:vr.create(e)})})}alterColumn(e,n){const r=n(new VI(e));return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,pF.create(e))})}renameColumn(e,n){return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,hF.create(e,n))})}addColumn(e,n,r=$l){const i=r(new ir(yr.create(e,ru(n))));return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,fF.create(i.toOperationNode()))})}modifyColumn(e,n,r=$l){const i=r(new ir(yr.create(e,ru(n))));return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,gF.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=$l){const i=r(new hm(WI.create(n,e)));return new qc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addConstraint:Cy.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new qc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addConstraint:Cy.create(zI.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new xh({...this.#e,constraintBuilder:new Vd(Eb.create(n.map(Ur.create),zr(r),i.map(Ur.create),e))})}addPrimaryKeyConstraint(e,n){return new qc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addConstraint:Cy.create(yF.create(n,e))})})}dropConstraint(e){return new Rd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:jy.create(e)})})}addIndex(e){return new ql({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:dd.create(e)})})}dropIndex(e){return new qc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropIndex:Yp.create(e)})})}$call(e){return e(this)}}In(bF,"don't await AlterTableBuilder instances");class so{#e;constructor(e){this.#e=J(e)}alterColumn(e,n){const r=n(new VI(e));return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,pF.create(e))})}renameColumn(e,n){return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,hF.create(e,n))})}addColumn(e,n,r=$l){const i=r(new ir(yr.create(e,ru(n))));return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,fF.create(i.toOperationNode()))})}modifyColumn(e,n,r=$l){const i=r(new ir(yr.create(e,ru(n))));return new so({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,gF.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(so,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class vF extends tF{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class to{#e;constructor(e){this.#e=J(e)}ifNotExists(){return new to({...this.#e,node:Oa.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new to({...this.#e,node:Oa.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new to({...this.#e,node:Oa.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new to({...this.#e,node:Oa.cloneWith(this.#e.node,{table:zr(e)})})}column(e){return new to({...this.#e,node:Oa.cloneWithColumns(this.#e.node,[yb(e)])})}columns(e){return new to({...this.#e,node:Oa.cloneWithColumns(this.#e.node,e.map(yb))})}expression(e){return new to({...this.#e,node:Oa.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new to({...this.#e,node:Oa.cloneWith(this.#e.node,{using:ji.createWithSql(e)})})}where(...e){const n=new vF;return new to({...this.#e,node:Lt.cloneWithWhere(this.#e.node,n.transformNode(bi(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(to,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Rv{#e;constructor(e){this.#e=J(e)}ifNotExists(){return new Rv({...this.#e,node:BP.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(Rv,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function sH(t){if(U5.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ls{#e;constructor(e){this.#e=J(e)}temporary(){return new ls({...this.#e,node:Es.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ls({...this.#e,node:Es.cloneWith(this.#e.node,{onCommit:sH(e)})})}ifNotExists(){return new ls({...this.#e,node:Es.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=$l){const i=r(new ir(yr.create(e,ru(n))));return new ls({...this.#e,node:Es.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ls({...this.#e,node:Es.cloneWithConstraint(this.#e.node,yF.create(n,e))})}addUniqueConstraint(e,n,r=$l){const i=r(new hm(WI.create(n,e)));return new ls({...this.#e,node:Es.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new ls({...this.#e,node:Es.cloneWithConstraint(this.#e.node,zI.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=$l){const o=s(new Vd(Eb.create(n.map(Ur.create),zr(r),i.map(Ur.create),e)));return new ls({...this.#e,node:Es.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ls({...this.#e,node:Es.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ls({...this.#e,node:Es.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ls({...this.#e,node:Es.cloneWith(this.#e.node,{selectQuery:mu(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(ls,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Od{#e;constructor(e){this.#e=J(e)}on(e){return new Od({...this.#e,node:Yp.cloneWith(this.#e.node,{table:zr(e)})})}ifExists(){return new Od({...this.#e,node:Yp.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Od({...this.#e,node:Yp.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(Od,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class wh{#e;constructor(e){this.#e=J(e)}ifExists(){return new wh({...this.#e,node:dE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new wh({...this.#e,node:dE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(wh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class _h{#e;constructor(e){this.#e=J(e)}ifExists(){return new _h({...this.#e,node:fE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new _h({...this.#e,node:fE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(_h,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const kl=J({is(t){return t.kind==="CreateViewNode"},create(t){return J({kind:"CreateViewNode",name:Hl.create(t)})},cloneWith(t,e){return J({...t,...e})}});class oH{#e=new vF;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Pa{#e;constructor(e){this.#e=J(e)}temporary(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{columns:e.map(QP)})})}as(e){const n=e.withPlugin(new oH).toOperationNode();return new Pa({...this.#e,node:kl.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(Pa,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Ty=J({is(t){return t.kind==="DropViewNode"},create(t){return J({kind:"DropViewNode",name:Hl.create(t)})},cloneWith(t,e){return J({...t,...e})}});class qd{#e;constructor(e){this.#e=J(e)}materialized(){return new qd({...this.#e,node:Ty.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new qd({...this.#e,node:Ty.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new qd({...this.#e,node:Ty.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(qd,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const xF=J({is(t){return t.kind==="CreateTypeNode"},create(t){return J({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return J({...t,enum:AI.create(e.map(n=>oa.createImmediate(n)))})}});class Ov{#e;constructor(e){this.#e=J(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Ov({...this.#e,node:xF.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(Ov,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const wF=J({is(t){return t.kind==="DropTypeNode"},create(t){return J({kind:"DropTypeNode",name:t})},cloneWith(t,e){return J({...t,...e})}});class qv{#e;constructor(e){this.#e=J(e)}ifExists(){return new qv({...this.#e,node:wF.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}In(qv,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function DT(t){const e=".";if(t.includes(e)){const n=t.split(e).map(aH);if(n.length===2)return Hl.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Hl.create(t)}function aH(t){return t.trim()}class rh{#e;constructor(e){this.#e=e}createTable(e){return new ls({queryId:Zn(),executor:this.#e,node:Es.create(zr(e))})}dropTable(e){return new _h({queryId:Zn(),executor:this.#e,node:fE.create(zr(e))})}createIndex(e){return new to({queryId:Zn(),executor:this.#e,node:Oa.create(e)})}dropIndex(e){return new Od({queryId:Zn(),executor:this.#e,node:Yp.create(e)})}createSchema(e){return new Rv({queryId:Zn(),executor:this.#e,node:BP.create(e)})}dropSchema(e){return new wh({queryId:Zn(),executor:this.#e,node:dE.create(e)})}alterTable(e){return new bF({queryId:Zn(),executor:this.#e,node:Jn.create(zr(e))})}createView(e){return new Pa({queryId:Zn(),executor:this.#e,node:kl.create(e)})}dropView(e){return new qd({queryId:Zn(),executor:this.#e,node:Ty.create(e)})}createType(e){return new Ov({queryId:Zn(),executor:this.#e,node:xF.create(DT(e))})}dropType(e){return new qv({queryId:Zn(),executor:this.#e,node:wF.create(DT(e))})}withPlugin(e){return new rh(this.#e.withPlugin(e))}withoutPlugins(){return new rh(this.#e.withoutPlugins())}withSchema(e){return new rh(this.#e.withPluginAtFront(new fm(e)))}}class lH{ref(e){return new e8(e)}}class cH{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Lc extends nF{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Lc(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Lc(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Lc(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Lc(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Lc(this.#e,this.#t,this.#n,[])}}function LT(){return typeof performance<"u"&&$s(performance.now)?performance.now():Date.now()}class uH{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=LT();try{return await n.call(e,r)}catch(o){throw i=o,await this.#c(o,r,s),o}finally{i||await this.#l(r,s)}}}async #c(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#u(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(n)}))}#u(e){return LT()-e}}const dH=()=>{};class _F{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(dH);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const fH=["read uncommitted","read committed","repeatable read","serializable","snapshot"];J(["query","error"]);class pH{#e;#t;constructor(e){$s(e)?(this.#t=e,this.#e=J({query:!0,error:!0})):(this.#t=hH,this.#e=J({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function hH(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function mH(t){return Zo(t)&&$s(t.compile)}let UI=class Ap extends Rl{#e;constructor(e){let n,r;if(gH(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),l=i.createAdapter(),u=new pH(e.log??[]),f=new uH(s,u),p=new cH(f),h=new Lc(o,l,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:f}}super(n),this.#e=J(r)}get schema(){return new rh(this.#e.executor)}get dynamic(){return new lH}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new aF({node:Xo.create(Ml(e)?void 0:mu(e))})}get fn(){return oF()}transaction(){return new Av({...this.#e})}connection(){return new SF({...this.#e})}withPlugin(e){return new Ap({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Ap({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Ap({...this.#e,executor:this.#e.executor.withPluginAtFront(new fm(e))})}withTables(){return new Ap({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Zn()){const r=mH(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class md extends UI{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new md({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new md({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new md({...this.#e,executor:this.#e.executor.withPluginAtFront(new fm(e))})}withTables(){return new md({...this.#e})}}function gH(t){return Zo(t)&&Zo(t.config)&&Zo(t.driver)&&Zo(t.executor)&&Zo(t.dialect)}class SF{#e;constructor(e){this.#e=J(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new _F(n)),i=new UI({...this.#e,executor:r});return await e(i)})}}In(SF,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class Av{#e;constructor(e){this.#e=J(e)}setIsolationLevel(e){return new Av({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return yH(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new _F(s)),l=new md({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(l);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}In(Av,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function yH(t){if(t.isolationLevel&&!fH.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Ad{#e;constructor(e){this.#e=J(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new EF(this,e)}$castTo(){return new Ad({...this.#e})}$notNull(){return new Ad(this.#e)}withPlugin(e){return new Ad({...this.#e,plugins:this.#e.plugins!==void 0?J([...this.#e.plugins,e]):J([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():Tv;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function wl(t){return new Ad(t)}In(Ad,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class EF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return ic.create(this.#e.toOperationNode(),ys(this.#t)?this.#t.toOperationNode():vr.create(this.#t))}}In(EF,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const jr=Object.assign((t,...e)=>wl({queryId:Zn(),rawNode:ji.create(t,e?.map(MT)??[])}),{ref(t){return wl({queryId:Zn(),rawNode:ji.createWithChild(Ua(t))})},val(t){return wl({queryId:Zn(),rawNode:ji.createWithChild(Zr(t))})},value(t){return this.val(t)},table(t){return wl({queryId:Zn(),rawNode:ji.createWithChild(zr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",wl({queryId:Zn(),rawNode:ji.create(e,t.map(vr.create))})},lit(t){return wl({queryId:Zn(),rawNode:ji.createWithChild(oa.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return wl({queryId:Zn(),rawNode:ji.createWithSql(t)})},join(t,e=jr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=MT(t[i]),i!==t.length-1&&(n[2*i+1]=r);return wl({queryId:Zn(),rawNode:ji.createWithChildren(n)})}});function MT(t){return ys(t)?t.toOperationNode():Zr(t)}class bH{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=J({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class vH extends bH{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),J({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Wd.is(this.parentNode)&&!ks.is(this.parentNode)&&!Es.is(this.parentNode)&&!kl.is(this.parentNode)&&!iF.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Lt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!fs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!fs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Lt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Fs(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(wH[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Lt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!fs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!fs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),mb(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(xH[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Ql.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Fs(e))this.append(`'${e}'`);else if(Cv(e)||mb(e))this.append(e.toString());else if(TI(e))this.append("null");else if(V5(e))this.appendImmediateValue(e.toISOString());else if(RI(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?$T[n.modifier]-$T[r.modifier]:1),J(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const xH=J({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),$T=J({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),wH=J({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class _H{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const SH=/"/g;class EH extends vH{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(SH,'""')}visitDefaultInsertValue(e){this.append("null")}}const IH="kysely_migration",NH="kysely_migration_lock";J({__noMigrations__:!0});class kH{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",IH).where("name","!=",NH));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(jr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class CH extends _H{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const Jc={jsonObject(t){const e=jr.join(Object.entries(t).map(([n,r])=>jr`${n}, ${r}`));return jr`json_object(${e})`},jsonGroupArray(t){return jr`json_group_array(${Jc.jsonObject(t)})`}},IF={hash(t){return uE.sha224(t)},verify(t,e){return uE.sha224(t)===e}};var On;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(On||(On={}));var vE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(vE||(vE={}));const Ft=On.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fa=t=>{switch(typeof t){case"undefined":return Ft.undefined;case"string":return Ft.string;case"number":return isNaN(t)?Ft.nan:Ft.number;case"boolean":return Ft.boolean;case"function":return Ft.function;case"bigint":return Ft.bigint;case"symbol":return Ft.symbol;case"object":return Array.isArray(t)?Ft.array:t===null?Ft.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ft.promise:typeof Map<"u"&&t instanceof Map?Ft.map:typeof Set<"u"&&t instanceof Set?Ft.set:typeof Date<"u"&&t instanceof Date?Ft.date:Ft.object;default:return Ft.unknown}},yt=On.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ps extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(n(o))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return i(this),r}static assert(e){if(!(e instanceof Ps))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,On.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ps.create=t=>new Ps(t);const Ud=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Ft.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,On.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${On.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${On.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${On.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:On.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,On.assertNever(t)}return{message:n}};let NF=Ud;function TH(t){NF=t}function Ib(){return NF}const Nb=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=r.filter(f=>!!f).slice().reverse();for(const f of u)l=f(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},RH=[];function Ct(t,e){const n=Ib(),r=Nb({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ud?void 0:Ud].filter(i=>!!i)});t.common.issues.push(r)}class Oi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return un;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Oi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return un;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const un=Object.freeze({status:"aborted"}),gd=t=>({status:"dirty",value:t}),Gi=t=>({status:"valid",value:t}),xE=t=>t.status==="aborted",wE=t=>t.status==="dirty",iu=t=>t.status==="valid",Sh=t=>typeof Promise<"u"&&t instanceof Promise;function kb(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function kF(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Kt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Kt||(Kt={}));var Pp,Fp;class ca{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const BT=(t,e)=>{if(iu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ps(t.common.issues);return this._error=n,this._error}}};function Sn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var u,f;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(f=p??n)!==null&&f!==void 0?f:l.defaultError}},description:i}}class Nn{get description(){return this._def.description}_getType(e){return Fa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Oi,ctx:{common:e.parent.common,data:e.data,parsedType:Fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Sh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return BT(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return iu(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>iu(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (Sh(i)?i:Promise.resolve(i));return BT(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fo({schema:this,typeName:cn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ta.create(this,this._def)}nullable(){return Xl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return Kd.create(this,this._def)}or(e){return kh.create([this,e],this._def)}and(e){return Ch.create(this,e,this._def)}transform(e){return new Fo({...Sn(this._def),schema:this,typeName:cn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new qh({...Sn(this._def),innerType:this,defaultValue:n,typeName:cn.ZodDefault})}brand(){return new HI({typeName:cn.ZodBranded,type:this,...Sn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ah({...Sn(this._def),innerType:this,catchValue:n,typeName:cn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return mm.create(this,e)}readonly(){return Ph.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OH=/^c[^\s-]{8,}$/i,qH=/^[0-9a-z]+$/,AH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FH=/^[a-z0-9_-]{21}$/i,DH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,LH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$H="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let s0;const BH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,WH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,VH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,UH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,HH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,CF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KH=new RegExp(`^${CF}$`);function jF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function QH(t){return new RegExp(`^${jF(t)}$`)}function TF(t){let e=`${CF}T${jF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function GH(t,e){return!!((e==="v4"||!e)&&BH.test(t)||(e==="v6"||!e)&&WH.test(t))}function JH(t,e){if(!DH.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function ZH(t,e){return!!((e==="v4"||!e)&&zH.test(t)||(e==="v6"||!e)&&VH.test(t))}class Ro extends Nn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ft.string){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_type,expected:Ft.string,received:s.parsedType}),un}const r=new Oi;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Ct(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Ct(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")MH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")s0||(s0=new RegExp($H,"u")),s0.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")PH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")FH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")OH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")qH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")AH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ct(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?TF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?KH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?QH(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?LH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?GH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?JH(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?ZH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?UH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?HH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):On.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Kt.errToObj(r)})}_addCheck(e){return new Ro({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Kt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Kt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Kt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Kt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Kt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Kt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Kt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Kt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Kt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Kt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Kt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Kt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Kt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Kt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Kt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Kt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Kt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Kt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Kt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Kt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Kt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Kt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Kt.errToObj(n)})}nonempty(e){return this.min(1,Kt.errToObj(e))}trim(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ro({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ro.create=t=>{var e;return new Ro({checks:[],typeName:cn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};function YH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Jl extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ft.number){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_type,expected:Ft.number,received:s.parsedType}),un}let r;const i=new Oi;for(const s of this._def.checks)s.kind==="int"?On.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?YH(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.not_finite,message:s.message}),i.dirty()):On.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Jl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Jl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Kt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Kt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Kt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Kt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&On.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Jl.create=t=>new Jl({checks:[],typeName:cn.ZodNumber,coerce:t?.coerce||!1,...Sn(t)});class Zl extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ft.bigint)return this._getInvalidInput(e);let r;const i=new Oi;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):On.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ct(n,{code:yt.invalid_type,expected:Ft.bigint,received:n.parsedType}),un}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Zl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Zl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zl.create=t=>{var e;return new Zl({checks:[],typeName:cn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Sn(t)})};class Eh extends Nn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ft.boolean){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:Ft.boolean,received:r.parsedType}),un}return Gi(e.data)}}Eh.create=t=>new Eh({typeName:cn.ZodBoolean,coerce:t?.coerce||!1,...Sn(t)});class su extends Nn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ft.date){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_type,expected:Ft.date,received:s.parsedType}),un}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_date}),un}const r=new Oi;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):On.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new su({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Kt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Kt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}su.create=t=>new su({checks:[],coerce:t?.coerce||!1,typeName:cn.ZodDate,...Sn(t)});class Cb extends Nn{_parse(e){if(this._getType(e)!==Ft.symbol){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:Ft.symbol,received:r.parsedType}),un}return Gi(e.data)}}Cb.create=t=>new Cb({typeName:cn.ZodSymbol,...Sn(t)});class Ih extends Nn{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:Ft.undefined,received:r.parsedType}),un}return Gi(e.data)}}Ih.create=t=>new Ih({typeName:cn.ZodUndefined,...Sn(t)});class Nh extends Nn{_parse(e){if(this._getType(e)!==Ft.null){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:Ft.null,received:r.parsedType}),un}return Gi(e.data)}}Nh.create=t=>new Nh({typeName:cn.ZodNull,...Sn(t)});class Hd extends Nn{constructor(){super(...arguments),this._any=!0}_parse(e){return Gi(e.data)}}Hd.create=t=>new Hd({typeName:cn.ZodAny,...Sn(t)});class Zc extends Nn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Gi(e.data)}}Zc.create=t=>new Zc({typeName:cn.ZodUnknown,...Sn(t)});class Ha extends Nn{_parse(e){const n=this._getOrReturnCtx(e);return Ct(n,{code:yt.invalid_type,expected:Ft.never,received:n.parsedType}),un}}Ha.create=t=>new Ha({typeName:cn.ZodNever,...Sn(t)});class jb extends Nn{_parse(e){if(this._getType(e)!==Ft.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:Ft.void,received:r.parsedType}),un}return Gi(e.data)}}jb.create=t=>new jb({typeName:cn.ZodVoid,...Sn(t)});class qo extends Nn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Ft.array)return Ct(n,{code:yt.invalid_type,expected:Ft.array,received:n.parsedType}),un;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Ct(n,{code:o?yt.too_big:yt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ct(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ct(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new ca(n,o,n.path,l)))).then(o=>Oi.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new ca(n,o,n.path,l)));return Oi.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new qo({...this._def,minLength:{value:e,message:Kt.toString(n)}})}max(e,n){return new qo({...this._def,maxLength:{value:e,message:Kt.toString(n)}})}length(e,n){return new qo({...this._def,exactLength:{value:e,message:Kt.toString(n)}})}nonempty(e){return this.min(1,e)}}qo.create=(t,e)=>new qo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:cn.ZodArray,...Sn(e)});function fd(t){if(t instanceof kr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ta.create(fd(r))}return new kr({...t._def,shape:()=>e})}else return t instanceof qo?new qo({...t._def,type:fd(t.element)}):t instanceof ta?ta.create(fd(t.unwrap())):t instanceof Xl?Xl.create(fd(t.unwrap())):t instanceof ua?ua.create(t.items.map(e=>fd(e))):t}class kr extends Nn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=On.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ft.object){const f=this._getOrReturnCtx(e);return Ct(f,{code:yt.invalid_type,expected:Ft.object,received:f.parsedType}),un}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ha&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||l.push(f);const u=[];for(const f of o){const p=s[f],h=i.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new ca(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Ha){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(f==="strict")l.length>0&&(Ct(i,{code:yt.unrecognized_keys,keys:l}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of l){const h=i.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new ca(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of u){const h=await p.key,b=await p.value;f.push({key:h,value:b,alwaysSet:p.alwaysSet})}return f}).then(f=>Oi.mergeObjectSync(r,f)):Oi.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Kt.errToObj,new kr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Kt.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new kr({...this._def,unknownKeys:"strip"})}passthrough(){return new kr({...this._def,unknownKeys:"passthrough"})}extend(e){return new kr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:cn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new kr({...this._def,catchall:e})}pick(e){const n={};return On.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new kr({...this._def,shape:()=>n})}omit(e){const n={};return On.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new kr({...this._def,shape:()=>n})}deepPartial(){return fd(this)}partial(e){const n={};return On.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new kr({...this._def,shape:()=>n})}required(e){const n={};return On.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ta;)s=s._def.innerType;n[r]=s}}),new kr({...this._def,shape:()=>n})}keyof(){return RF(On.objectKeys(this.shape))}}kr.create=(t,e)=>new kr({shape:()=>t,unknownKeys:"strip",catchall:Ha.create(),typeName:cn.ZodObject,...Sn(e)});kr.strictCreate=(t,e)=>new kr({shape:()=>t,unknownKeys:"strict",catchall:Ha.create(),typeName:cn.ZodObject,...Sn(e)});kr.lazycreate=(t,e)=>new kr({shape:t,unknownKeys:"strip",catchall:Ha.create(),typeName:cn.ZodObject,...Sn(e)});class kh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Ps(l.ctx.common.issues));return Ct(n,{code:yt.invalid_union,unionErrors:o}),un}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const f={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(u=>new Ps(u));return Ct(n,{code:yt.invalid_union,unionErrors:l}),un}}get options(){return this._def.options}}kh.create=(t,e)=>new kh({options:t,typeName:cn.ZodUnion,...Sn(e)});const qa=t=>t instanceof Th?qa(t.schema):t instanceof Fo?qa(t.innerType()):t instanceof Rh?[t.value]:t instanceof Yl?t.options:t instanceof Oh?On.objectValues(t.enum):t instanceof qh?qa(t._def.innerType):t instanceof Ih?[void 0]:t instanceof Nh?[null]:t instanceof ta?[void 0,...qa(t.unwrap())]:t instanceof Xl?[null,...qa(t.unwrap())]:t instanceof HI||t instanceof Ph?qa(t.unwrap()):t instanceof Ah?qa(t._def.innerType):[];class Pv extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.object)return Ct(n,{code:yt.invalid_type,expected:Ft.object,received:n.parsedType}),un;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Ct(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),un)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=qa(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new Pv({typeName:cn.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Sn(r)})}}function _E(t,e){const n=Fa(t),r=Fa(e);if(t===e)return{valid:!0,data:t};if(n===Ft.object&&r===Ft.object){const i=On.objectKeys(e),s=On.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const u=_E(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===Ft.array&&r===Ft.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],u=_E(o,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Ft.date&&r===Ft.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ch extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(xE(s)||xE(o))return un;const l=_E(s.value,o.value);return l.valid?((wE(s)||wE(o))&&n.dirty(),{status:n.value,value:l.data}):(Ct(r,{code:yt.invalid_intersection_types}),un)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ch.create=(t,e,n)=>new Ch({left:t,right:e,typeName:cn.ZodIntersection,...Sn(n)});class ua extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.array)return Ct(r,{code:yt.invalid_type,expected:Ft.array,received:r.parsedType}),un;if(r.data.length<this._def.items.length)return Ct(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),un;!this._def.rest&&r.data.length>this._def.items.length&&(Ct(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new ca(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Oi.mergeArray(n,o)):Oi.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ua({...this._def,rest:e})}}ua.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ua({items:t,typeName:cn.ZodTuple,rest:null,...Sn(e)})};class jh extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.object)return Ct(r,{code:yt.invalid_type,expected:Ft.object,received:r.parsedType}),un;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new ca(r,l,r.path,l)),value:o._parse(new ca(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Oi.mergeObjectAsync(n,i):Oi.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Nn?new jh({keyType:e,valueType:n,typeName:cn.ZodRecord,...Sn(r)}):new jh({keyType:Ro.create(),valueType:e,typeName:cn.ZodRecord,...Sn(n)})}}class Tb extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.map)return Ct(r,{code:yt.invalid_type,expected:Ft.map,received:r.parsedType}),un;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,u],f)=>({key:i._parse(new ca(r,l,r.path,[f,"key"])),value:s._parse(new ca(r,u,r.path,[f,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return un;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return un;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}}}}Tb.create=(t,e,n)=>new Tb({valueType:e,keyType:t,typeName:cn.ZodMap,...Sn(n)});class ou extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ft.set)return Ct(r,{code:yt.invalid_type,expected:Ft.set,received:r.parsedType}),un;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ct(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ct(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const f=new Set;for(const p of u){if(p.status==="aborted")return un;p.status==="dirty"&&n.dirty(),f.add(p.value)}return{status:n.value,value:f}}const l=[...r.data.values()].map((u,f)=>s._parse(new ca(r,u,r.path,f)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new ou({...this._def,minSize:{value:e,message:Kt.toString(n)}})}max(e,n){return new ou({...this._def,maxSize:{value:e,message:Kt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ou.create=(t,e)=>new ou({valueType:t,minSize:null,maxSize:null,typeName:cn.ZodSet,...Sn(e)});class Pd extends Nn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.function)return Ct(n,{code:yt.invalid_type,expected:Ft.function,received:n.parsedType}),un;function r(l,u){return Nb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ib(),Ud].filter(f=>!!f),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(l,u){return Nb({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ib(),Ud].filter(f=>!!f),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Kd){const l=this;return Gi(async function(...u){const f=new Ps([]),p=await l._def.args.parseAsync(u,s).catch(x=>{throw f.addIssue(r(u,x)),f}),h=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(h,s).catch(x=>{throw f.addIssue(i(h,x)),f})})}else{const l=this;return Gi(function(...u){const f=l._def.args.safeParse(u,s);if(!f.success)throw new Ps([r(u,f.error)]);const p=Reflect.apply(o,this,f.data),h=l._def.returns.safeParse(p,s);if(!h.success)throw new Ps([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Pd({...this._def,args:ua.create(e).rest(Zc.create())})}returns(e){return new Pd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Pd({args:e||ua.create([]).rest(Zc.create()),returns:n||Zc.create(),typeName:cn.ZodFunction,...Sn(r)})}}class Th extends Nn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Th.create=(t,e)=>new Th({getter:t,typeName:cn.ZodLazy,...Sn(e)});class Rh extends Nn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ct(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),un}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rh.create=(t,e)=>new Rh({value:t,typeName:cn.ZodLiteral,...Sn(e)});function RF(t,e){return new Yl({values:t,typeName:cn.ZodEnum,...Sn(e)})}class Yl extends Nn{constructor(){super(...arguments),Pp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ct(n,{expected:On.joinValues(r),received:n.parsedType,code:yt.invalid_type}),un}if(kb(this,Pp)||kF(this,Pp,new Set(this._def.values)),!kb(this,Pp).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ct(n,{received:n.data,code:yt.invalid_enum_value,options:r}),un}return Gi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Yl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Yl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Pp=new WeakMap;Yl.create=RF;class Oh extends Nn{constructor(){super(...arguments),Fp.set(this,void 0)}_parse(e){const n=On.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ft.string&&r.parsedType!==Ft.number){const i=On.objectValues(n);return Ct(r,{expected:On.joinValues(i),received:r.parsedType,code:yt.invalid_type}),un}if(kb(this,Fp)||kF(this,Fp,new Set(On.getValidEnumValues(this._def.values))),!kb(this,Fp).has(e.data)){const i=On.objectValues(n);return Ct(r,{received:r.data,code:yt.invalid_enum_value,options:i}),un}return Gi(e.data)}get enum(){return this._def.values}}Fp=new WeakMap;Oh.create=(t,e)=>new Oh({values:t,typeName:cn.ZodNativeEnum,...Sn(e)});class Kd extends Nn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ft.promise&&n.common.async===!1)return Ct(n,{code:yt.invalid_type,expected:Ft.promise,received:n.parsedType}),un;const r=n.parsedType===Ft.promise?n.data:Promise.resolve(n.data);return Gi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Kd.create=(t,e)=>new Kd({type:t,typeName:cn.ZodPromise,...Sn(e)});class Fo extends Nn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===cn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Ct(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return un;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?un:u.status==="dirty"||n.value==="dirty"?gd(u.value):u});{if(n.value==="aborted")return un;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?un:l.status==="dirty"||n.value==="dirty"?gd(l.value):l}}if(i.type==="refinement"){const o=l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?un:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?un:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!iu(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>iu(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);On.assertNever(i)}}Fo.create=(t,e,n)=>new Fo({schema:t,typeName:cn.ZodEffects,effect:e,...Sn(n)});Fo.createWithPreprocess=(t,e,n)=>new Fo({schema:e,effect:{type:"preprocess",transform:t},typeName:cn.ZodEffects,...Sn(n)});class ta extends Nn{_parse(e){return this._getType(e)===Ft.undefined?Gi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ta.create=(t,e)=>new ta({innerType:t,typeName:cn.ZodOptional,...Sn(e)});class Xl extends Nn{_parse(e){return this._getType(e)===Ft.null?Gi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xl.create=(t,e)=>new Xl({innerType:t,typeName:cn.ZodNullable,...Sn(e)});class qh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ft.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qh.create=(t,e)=>new qh({innerType:t,typeName:cn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Sn(e)});class Ah extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Sh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ps(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ps(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ah.create=(t,e)=>new Ah({innerType:t,typeName:cn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Sn(e)});class Rb extends Nn{_parse(e){if(this._getType(e)!==Ft.nan){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:Ft.nan,received:r.parsedType}),un}return{status:"valid",value:e.data}}}Rb.create=t=>new Rb({typeName:cn.ZodNaN,...Sn(t)});const XH=Symbol("zod_brand");class HI extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class mm extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?un:s.status==="dirty"?(n.dirty(),gd(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?un:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new mm({in:e,out:n,typeName:cn.ZodPipeline})}}class Ph extends Nn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(iu(i)&&(i.value=Object.freeze(i.value)),i);return Sh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Ph.create=(t,e)=>new Ph({innerType:t,typeName:cn.ZodReadonly,...Sn(e)});function OF(t,e={},n){return t?Hd.create().superRefine((r,i)=>{var s,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,f=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...f,fatal:u})}}):Hd.create()}const e9={object:kr.lazycreate};var cn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(cn||(cn={}));const t9=(t,e={message:`Input not instance of ${t.name}`})=>OF(n=>n instanceof t,e),qF=Ro.create,AF=Jl.create,n9=Rb.create,r9=Zl.create,PF=Eh.create,i9=su.create,s9=Cb.create,o9=Ih.create,a9=Nh.create,l9=Hd.create,c9=Zc.create,u9=Ha.create,d9=jb.create,f9=qo.create,p9=kr.create,h9=kr.strictCreate,m9=kh.create,g9=Pv.create,y9=Ch.create,b9=ua.create,v9=jh.create,x9=Tb.create,w9=ou.create,_9=Pd.create,S9=Th.create,E9=Rh.create,I9=Yl.create,N9=Oh.create,k9=Kd.create,zT=Fo.create,C9=ta.create,j9=Xl.create,T9=Fo.createWithPreprocess,R9=mm.create,O9=()=>qF().optional(),q9=()=>AF().optional(),A9=()=>PF().optional(),P9={string:t=>Ro.create({...t,coerce:!0}),number:t=>Jl.create({...t,coerce:!0}),boolean:t=>Eh.create({...t,coerce:!0}),bigint:t=>Zl.create({...t,coerce:!0}),date:t=>su.create({...t,coerce:!0})},F9=un;var F=Object.freeze({__proto__:null,defaultErrorMap:Ud,setErrorMap:TH,getErrorMap:Ib,makeIssue:Nb,EMPTY_PATH:RH,addIssueToContext:Ct,ParseStatus:Oi,INVALID:un,DIRTY:gd,OK:Gi,isAborted:xE,isDirty:wE,isValid:iu,isAsync:Sh,get util(){return On},get objectUtil(){return vE},ZodParsedType:Ft,getParsedType:Fa,ZodType:Nn,datetimeRegex:TF,ZodString:Ro,ZodNumber:Jl,ZodBigInt:Zl,ZodBoolean:Eh,ZodDate:su,ZodSymbol:Cb,ZodUndefined:Ih,ZodNull:Nh,ZodAny:Hd,ZodUnknown:Zc,ZodNever:Ha,ZodVoid:jb,ZodArray:qo,ZodObject:kr,ZodUnion:kh,ZodDiscriminatedUnion:Pv,ZodIntersection:Ch,ZodTuple:ua,ZodRecord:jh,ZodMap:Tb,ZodSet:ou,ZodFunction:Pd,ZodLazy:Th,ZodLiteral:Rh,ZodEnum:Yl,ZodNativeEnum:Oh,ZodPromise:Kd,ZodEffects:Fo,ZodTransformer:Fo,ZodOptional:ta,ZodNullable:Xl,ZodDefault:qh,ZodCatch:Ah,ZodNaN:Rb,BRAND:XH,ZodBranded:HI,ZodPipeline:mm,ZodReadonly:Ph,custom:OF,Schema:Nn,ZodSchema:Nn,late:e9,get ZodFirstPartyTypeKind(){return cn},coerce:P9,any:l9,array:f9,bigint:r9,boolean:PF,date:i9,discriminatedUnion:g9,effect:zT,enum:I9,function:_9,instanceof:t9,intersection:y9,lazy:S9,literal:E9,map:x9,nan:n9,nativeEnum:N9,never:u9,null:a9,nullable:j9,number:AF,object:p9,oboolean:A9,onumber:q9,optional:C9,ostring:O9,pipeline:R9,preprocess:T9,promise:k9,record:v9,set:w9,strictObject:h9,string:qF,symbol:s9,transformer:zT,tuple:b9,undefined:o9,union:m9,unknown:c9,void:d9,NEVER:F9,ZodIssueCode:yt,quotelessJson:jH,ZodError:Ps});const D9=F.object({page:F.number().gte(0,"Page must be greater than zero"),size:F.number().gte(1,"Page size must be greater than one to get any data")}),Ai=F.object({id:F.string().min(1)}),KI=F.object({message:F.string()}),Pi=F.object({id:F.string().optional(),idIn:F.array(F.string()).optional(),fulltext:F.string().optional()}),L9=F.enum(["asc","desc"]),Qi=()=>F.union([F.boolean(),F.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),Ds=()=>F.union([F.number(),F.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),No=()=>F.union([F.number().int(),F.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),gi=t=>F.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>F.array(t).parse(e)),M9=t=>F.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),SE=new Proxy(()=>SE,{get:()=>SE}),Fi=({entity:t,shape:e,filter:n,sort:r})=>{const i=SE();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:F.array(F.object({name:F.enum(r),sort:L9})),"~sort":i,"~sort-keyof":i}},_l=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),$9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:_l(1,i),start:[],end:[]};const o=Math.max(t-n,r),l=Math.min(t+n,i-r),u=o>r+2,f=l<i-(r+1);return!u&&f?{type:"end",page:t,total:e,start:[],pages:_l(1,n*2+r+2),end:_l(e-(r-1),i)}:u&&!f?{type:"start",page:t,total:e,start:_l(1,r),pages:_l(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:_l(1,r),pages:_l(o,l),end:_l(i-r+1,i)}};var ed={},ja={},rr={},Sl={},WT;function FF(){if(WT)return Sl;WT=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.anumber=t,Sl.abytes=n,Sl.ahash=r,Sl.aexists=i,Sl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...l){if(!e(o))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(o.length))throw new Error("Uint8Array expected of length "+l+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,l=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(l&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,l){n(o);const u=l.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return Sl}var yn={},VT;function B9(){if(VT)return yn;VT=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.add5L=yn.add5H=yn.add4H=yn.add4L=yn.add3H=yn.add3L=yn.rotlBL=yn.rotlBH=yn.rotlSL=yn.rotlSH=yn.rotr32L=yn.rotr32H=yn.rotrBL=yn.rotrBH=yn.rotrSL=yn.rotrSH=yn.shrSL=yn.shrSH=yn.toBig=void 0,yn.fromBig=n,yn.split=r,yn.add=j;const t=BigInt(2**32-1),e=BigInt(32);function n(O,z=!1){return z?{h:Number(O&t),l:Number(O>>e&t)}:{h:Number(O>>e&t)|0,l:Number(O&t)|0}}function r(O,z=!1){let D=new Uint32Array(O.length),V=new Uint32Array(O.length);for(let U=0;U<O.length;U++){const{h:B,l:G}=n(O[U],z);[D[U],V[U]]=[B,G]}return[D,V]}const i=(O,z)=>BigInt(O>>>0)<<e|BigInt(z>>>0);yn.toBig=i;const s=(O,z,D)=>O>>>D;yn.shrSH=s;const o=(O,z,D)=>O<<32-D|z>>>D;yn.shrSL=o;const l=(O,z,D)=>O>>>D|z<<32-D;yn.rotrSH=l;const u=(O,z,D)=>O<<32-D|z>>>D;yn.rotrSL=u;const f=(O,z,D)=>O<<64-D|z>>>D-32;yn.rotrBH=f;const p=(O,z,D)=>O>>>D-32|z<<64-D;yn.rotrBL=p;const h=(O,z)=>z;yn.rotr32H=h;const b=(O,z)=>O;yn.rotr32L=b;const x=(O,z,D)=>O<<D|z>>>32-D;yn.rotlSH=x;const _=(O,z,D)=>z<<D|O>>>32-D;yn.rotlSL=_;const E=(O,z,D)=>z<<D-32|O>>>64-D;yn.rotlBH=E;const N=(O,z,D)=>O<<D-32|z>>>64-D;yn.rotlBL=N;function j(O,z,D,V){const U=(z>>>0)+(V>>>0);return{h:O+D+(U/2**32|0)|0,l:U|0}}const C=(O,z,D)=>(O>>>0)+(z>>>0)+(D>>>0);yn.add3L=C;const R=(O,z,D,V)=>z+D+V+(O/2**32|0)|0;yn.add3H=R;const q=(O,z,D,V)=>(O>>>0)+(z>>>0)+(D>>>0)+(V>>>0);yn.add4L=q;const L=(O,z,D,V,U)=>z+D+V+U+(O/2**32|0)|0;yn.add4H=L;const M=(O,z,D,V,U)=>(O>>>0)+(z>>>0)+(D>>>0)+(V>>>0)+(U>>>0);yn.add5L=M;const W=(O,z,D,V,U,B)=>z+D+V+U+B+(O/2**32|0)|0;yn.add5H=W;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:u,rotrBH:f,rotrBL:p,rotr32H:h,rotr32L:b,rotlSH:x,rotlSL:_,rotlBH:E,rotlBL:N,add:j,add3L:C,add3H:R,add4L:q,add4H:L,add5H:W,add5L:M};return yn.default=P,yn}var o0={},vp={},UT;function z9(){return UT||(UT=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.crypto=void 0,vp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),vp}var HT;function W9(){return HT||(HT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=l,t.rotl=u,t.byteSwap=f,t.byteSwap32=p,t.bytesToHex=b,t.hexToBytes=E,t.asyncLoop=j,t.utf8ToBytes=C,t.toBytes=R,t.concatBytes=q,t.checkOpts=M,t.wrapConstructor=W,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=O,t.randomBytes=z;const e=z9(),n=FF();function r(D){return D instanceof Uint8Array||ArrayBuffer.isView(D)&&D.constructor.name==="Uint8Array"}function i(D){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}function s(D){return new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4))}function o(D){return new DataView(D.buffer,D.byteOffset,D.byteLength)}function l(D,V){return D<<32-V|D>>>V}function u(D,V){return D<<V|D>>>32-V>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function f(D){return D<<24&0xff000000|D<<8&0xff0000|D>>>8&65280|D>>>24&255}t.byteSwapIfBE=t.isLE?D=>D:D=>f(D);function p(D){for(let V=0;V<D.length;V++)D[V]=f(D[V])}const h=Array.from({length:256},(D,V)=>V.toString(16).padStart(2,"0"));function b(D){(0,n.abytes)(D);let V="";for(let U=0;U<D.length;U++)V+=h[D[U]];return V}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(D){if(D>=x._0&&D<=x._9)return D-x._0;if(D>=x.A&&D<=x.F)return D-(x.A-10);if(D>=x.a&&D<=x.f)return D-(x.a-10)}function E(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);const V=D.length,U=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const B=new Uint8Array(U);for(let G=0,Z=0;G<U;G++,Z+=2){const le=_(D.charCodeAt(Z)),ie=_(D.charCodeAt(Z+1));if(le===void 0||ie===void 0){const ne=D[Z]+D[Z+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+Z)}B[G]=le*16+ie}return B}const N=async()=>{};t.nextTick=N;async function j(D,V,U){let B=Date.now();for(let G=0;G<D;G++){U(G);const Z=Date.now()-B;Z>=0&&Z<V||(await (0,t.nextTick)(),B+=Z)}}function C(D){if(typeof D!="string")throw new Error("utf8ToBytes expected string, got "+typeof D);return new Uint8Array(new TextEncoder().encode(D))}function R(D){return typeof D=="string"&&(D=C(D)),(0,n.abytes)(D),D}function q(...D){let V=0;for(let B=0;B<D.length;B++){const G=D[B];(0,n.abytes)(G),V+=G.length}const U=new Uint8Array(V);for(let B=0,G=0;B<D.length;B++){const Z=D[B];U.set(Z,G),G+=Z.length}return U}class L{clone(){return this._cloneInto()}}t.Hash=L;function M(D,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(D,V)}function W(D){const V=B=>D().update(R(B)).digest(),U=D();return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=()=>D(),V}function P(D){const V=(B,G)=>D(G).update(R(B)).digest(),U=D({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=B=>D(B),V}function O(D){const V=(B,G)=>D(G).update(R(B)).digest(),U=D({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=B=>D(B),V}function z(D=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(D));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(D);throw new Error("crypto.getRandomValues must be defined")}}(o0)),o0}var KT;function V9(){if(KT)return rr;KT=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.shake256=rr.shake128=rr.keccak_512=rr.keccak_384=rr.keccak_256=rr.keccak_224=rr.sha3_512=rr.sha3_384=rr.sha3_256=rr.sha3_224=rr.Keccak=void 0,rr.keccakP=N;const t=FF(),e=B9(),n=W9(),r=[],i=[],s=[],o=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(7),p=BigInt(256),h=BigInt(113);for(let q=0,L=l,M=1,W=0;q<24;q++){[M,W]=[W,(2*M+3*W)%5],r.push(2*(5*W+M)),i.push((q+1)*(q+2)/2%64);let P=o;for(let O=0;O<7;O++)L=(L<<l^(L>>f)*h)%p,L&u&&(P^=l<<(l<<BigInt(O))-l);s.push(P)}const[b,x]=(0,e.split)(s,!0),_=(q,L,M)=>M>32?(0,e.rotlBH)(q,L,M):(0,e.rotlSH)(q,L,M),E=(q,L,M)=>M>32?(0,e.rotlBL)(q,L,M):(0,e.rotlSL)(q,L,M);function N(q,L=24){const M=new Uint32Array(10);for(let W=24-L;W<24;W++){for(let z=0;z<10;z++)M[z]=q[z]^q[z+10]^q[z+20]^q[z+30]^q[z+40];for(let z=0;z<10;z+=2){const D=(z+8)%10,V=(z+2)%10,U=M[V],B=M[V+1],G=_(U,B,1)^M[D],Z=E(U,B,1)^M[D+1];for(let le=0;le<50;le+=10)q[z+le]^=G,q[z+le+1]^=Z}let P=q[2],O=q[3];for(let z=0;z<24;z++){const D=i[z],V=_(P,O,D),U=E(P,O,D),B=r[z];P=q[B],O=q[B+1],q[B]=V,q[B+1]=U}for(let z=0;z<50;z+=10){for(let D=0;D<10;D++)M[D]=q[z+D];for(let D=0;D<10;D++)q[z+D]^=~M[(D+2)%10]&M[(D+4)%10]}q[0]^=b[W],q[1]^=x[W]}M.fill(0)}class j extends n.Hash{constructor(L,M,W,P=!1,O=24){if(super(),this.blockLen=L,this.suffix=M,this.outputLen=W,this.enableXOF=P,this.rounds=O,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(W),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),N(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(L){(0,t.aexists)(this);const{blockLen:M,state:W}=this;L=(0,n.toBytes)(L);const P=L.length;for(let O=0;O<P;){const z=Math.min(M-this.pos,P-O);for(let D=0;D<z;D++)W[this.pos++]^=L[O++];this.pos===M&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:L,suffix:M,pos:W,blockLen:P}=this;L[W]^=M,M&128&&W===P-1&&this.keccak(),L[P-1]^=128,this.keccak()}writeInto(L){(0,t.aexists)(this,!1),(0,t.abytes)(L),this.finish();const M=this.state,{blockLen:W}=this;for(let P=0,O=L.length;P<O;){this.posOut>=W&&this.keccak();const z=Math.min(W-this.posOut,O-P);L.set(M.subarray(this.posOut,this.posOut+z),P),this.posOut+=z,P+=z}return L}xofInto(L){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(L)}xof(L){return(0,t.anumber)(L),this.xofInto(new Uint8Array(L))}digestInto(L){if((0,t.aoutput)(L,this),this.finished)throw new Error("digest() was already called");return this.writeInto(L),this.destroy(),L}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(L){const{blockLen:M,suffix:W,outputLen:P,rounds:O,enableXOF:z}=this;return L||(L=new j(M,W,P,z,O)),L.state32.set(this.state32),L.pos=this.pos,L.posOut=this.posOut,L.finished=this.finished,L.rounds=O,L.suffix=W,L.outputLen=P,L.enableXOF=z,L.destroyed=this.destroyed,L}}rr.Keccak=j;const C=(q,L,M)=>(0,n.wrapConstructor)(()=>new j(L,q,M));rr.sha3_224=C(6,144,224/8),rr.sha3_256=C(6,136,256/8),rr.sha3_384=C(6,104,384/8),rr.sha3_512=C(6,72,512/8),rr.keccak_224=C(1,144,224/8),rr.keccak_256=C(1,136,256/8),rr.keccak_384=C(1,104,384/8),rr.keccak_512=C(1,72,512/8);const R=(q,L,M)=>(0,n.wrapXOFConstructorWithOpts)((W={})=>new j(L,q,W.dkLen===void 0?M:W.dkLen,!0));return rr.shake128=R(31,168,128/8),rr.shake256=R(31,136,256/8),rr}var QT;function U9(){if(QT)return ja;QT=1;const{sha3_512:t}=V9(),e=24,n=32,r=(_=4,E=Math.random)=>{let N="";for(;N.length<_;)N=N+Math.floor(E()*36).toString(36);return N};function i(_){let E=8n,N=0n;for(const j of _.values()){const C=BigInt(j);N=(N<<E)+C}return N}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,E)=>String.fromCharCode(E+97)),l=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof $c<"u"?$c:typeof window<"u"?window:{},random:E=Math.random}={})=>{const N=Object.keys(_).toString(),j=N.length?N+r(n,E):r(n,E);return s(j).substring(0,n)},f=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:E=f(Math.floor(_()*p)),length:N=e,fingerprint:j=u({random:_})}={})=>function(){const R=l(_),q=Date.now().toString(36),L=E().toString(36),M=r(N,_),W=`${q+M+L+j}`;return`${R+s(W).substring(1,N)}`},b=h(),x=(_,{minLength:E=2,maxLength:N=n}={})=>{const j=_.length,C=/^[0-9a-z]+$/;try{if(typeof _=="string"&&j>=E&&j<=N&&C.test(_))return!0}finally{}return!1};return ja.getConstants=()=>({defaultLength:e,bigLength:n}),ja.init=h,ja.createId=b,ja.bufToBigInt=i,ja.createCounter=f,ja.createFingerprint=u,ja.isCuid=x,ja}var GT;function H9(){if(GT)return ed;GT=1;const{createId:t,init:e,getConstants:n,isCuid:r}=U9();return ed.createId=t,ed.init=e,ed.getConstants=n,ed.isCuid=r,ed}var K9=H9();const Tn=K9.createId;var a0,JT;function Q9(){if(JT)return a0;JT=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(C){C!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(R){try{var q=t.call(R);return i.test(q)}catch{return!1}},o=function(R){try{return s(R)?!1:(t.call(R),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",f="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",b="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),N=function(){return!1};if(typeof document=="object"){var j=document.all;l.call(j)===l.call(document.all)&&(N=function(R){if((E||!R)&&(typeof R>"u"||typeof R=="object"))try{var q=l.call(R);return(q===h||q===b||q===x||q===u)&&R("")==null}catch{}return!1})}return a0=e?function(R){if(N(R))return!0;if(!R||typeof R!="function"&&typeof R!="object")return!1;try{e(R,null,n)}catch(q){if(q!==r)return!1}return!s(R)&&o(R)}:function(R){if(N(R))return!0;if(!R||typeof R!="function"&&typeof R!="object")return!1;if(_)return o(R);if(s(R))return!1;var q=l.call(R);return q!==f&&q!==p&&!/^\[object HTML/.test(q)?!1:o(R)},a0}var G9=Q9();const J9=uo(G9),Z9=t=>J9(t);var Ry={exports:{}},Y9=Ry.exports,ZT;function X9(){return ZT||(ZT=1,function(t){(function(e,n){t.exports=n()})(Y9,function(){var e=Object.prototype.toString;function n(h,b){return h==null?!1:Object.prototype.hasOwnProperty.call(h,b)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var b in h)if(n(h,b))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function l(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var b=parseInt(h);return b.toString()===h?b:h}function f(h){h=h||{};var b=function(j){return Object.keys(b).reduce(function(C,R){return R==="create"||typeof b[R]=="function"&&(C[R]=b[R].bind(b,j)),C},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(j,C){return typeof C=="number"&&Array.isArray(j)||n(j,C)};function _(j,C){if(x(j,C))return j[C]}var E;h.includeInheritedProps?E=function(j,C){typeof C!="string"&&typeof C!="number"&&(C=String(C));var R=_(j,C);if(C==="__proto__"||C==="prototype"||C==="constructor"&&typeof R=="function")throw new Error("For security reasons, object's magic properties cannot be set");return R}:E=function(j,C){return _(j,C)};function N(j,C,R,q){if(typeof C=="number"&&(C=[C]),!C||C.length===0)return j;if(typeof C=="string")return N(j,C.split(".").map(u),R,q);var L=C[0],M=E(j,L);return C.length===1?((M===void 0||!q)&&(j[L]=R),M):(M===void 0&&(typeof C[1]=="number"?j[L]=[]:j[L]={}),N(j[L],C.slice(1),R,q))}return b.has=function(j,C){if(typeof C=="number"?C=[C]:typeof C=="string"&&(C=C.split(".")),!C||C.length===0)return!!j;for(var R=0;R<C.length;R++){var q=u(C[R]);if(typeof q=="number"&&o(j)&&q<j.length||(h.includeInheritedProps?q in Object(j):n(j,q)))j=j[q];else return!1}return!0},b.ensureExists=function(j,C,R){return N(j,C,R,!0)},b.set=function(j,C,R,q){return N(j,C,R,q)},b.insert=function(j,C,R,q){var L=b.get(j,C);q=~~q,o(L)||(L=[],b.set(j,C,L)),L.splice(q,0,R)},b.empty=function(j,C){if(!r(C)&&j!=null){var R,q;if(R=b.get(j,C)){if(typeof R=="string")return b.set(j,C,"");if(l(R))return b.set(j,C,!1);if(typeof R=="number")return b.set(j,C,0);if(o(R))R.length=0;else if(s(R))for(q in R)x(R,q)&&delete R[q];else return b.set(j,C,null)}}},b.push=function(j,C){var R=b.get(j,C);o(R)||(R=[],b.set(j,C,R)),R.push.apply(R,Array.prototype.slice.call(arguments,2))},b.coalesce=function(j,C,R){for(var q,L=0,M=C.length;L<M;L++)if((q=b.get(j,C[L]))!==void 0)return q;return R},b.get=function(j,C,R){if(typeof C=="number"&&(C=[C]),!C||C.length===0)return j;if(j==null)return R;if(typeof C=="string")return b.get(j,C.split("."),R);var q=u(C[0]),L=E(j,q);return L===void 0?R:C.length===1?L:b.get(j[q],C.slice(1),R)},b.del=function(C,R){if(typeof R=="number"&&(R=[R]),C==null||r(R))return C;if(typeof R=="string")return b.del(C,R.split("."));var q=u(R[0]);if(E(C,q),!x(C,q))return C;if(R.length===1)o(C)?C.splice(q,1):delete C[q];else return b.del(C[q],R.slice(1));return C},b}var p=f();return p.create=f,p.withInheritedProps=f({includeInheritedProps:!0}),p})}(Ry)),Ry.exports}var eK=X9();const YT=uo(eK);function on({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const QI=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},DF=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),tK=xn({use:DF,slot:{},variant:{},defaults:{}}),GI=({icon:t,iconProps:e,variant:n,tva:r=tK,css:i,children:s,...o})=>{const l=r({...n,css:i}).slots;return d.jsxs("div",{className:l.base(),...o,children:[kv(t)?d.jsx(Yt,{icon:t,...e}):t,s]})};function Fv(){return typeof window<"u"}function sc(t){return LF(t)?(t.nodeName||"").toLowerCase():"#document"}function ms(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function da(t){var e;return(e=(LF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LF(t){return Fv()?t instanceof Node||t instanceof ms(t).Node:!1}function sr(t){return Fv()?t instanceof Element||t instanceof ms(t).Element:!1}function Yr(t){return Fv()?t instanceof HTMLElement||t instanceof ms(t).HTMLElement:!1}function EE(t){return!Fv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ms(t).ShadowRoot}function gm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=lo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function nK(t){return["table","td","th"].includes(sc(t))}function Dv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function JI(t){const e=Lv(),n=sr(t)?lo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function rK(t){let e=Ka(t);for(;Yr(e)&&!Ma(e);){if(JI(e))return e;if(Dv(e))return null;e=Ka(e)}return null}function Lv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ma(t){return["html","body","#document"].includes(sc(t))}function lo(t){return ms(t).getComputedStyle(t)}function Mv(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ka(t){if(sc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||EE(t)&&t.host||da(t);return EE(e)?e.host:e}function MF(t){const e=Ka(t);return Ma(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&gm(e)?e:MF(e)}function zl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=MF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ms(i);if(s){const l=IE(o);return e.concat(o,o.visualViewport||[],gm(i)?i:[],l&&n?zl(l):[])}return e.concat(i,zl(i,[],n))}function IE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ko(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function hi(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&EE(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function ZI(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function $F(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function BF(t){return t.mozInputSource===0&&t.isTrusted?!0:NE()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function YI(t){return sK()?!1:!NE()&&t.width===0&&t.height===0||NE()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function zF(){return/apple/i.test(navigator.vendor)}function NE(){const t=/android/i;return t.test(ZI())||t.test($F())}function iK(){return ZI().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function sK(){return $F().includes("jsdom/")}function Fh(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function oK(t){return"nativeEvent"in t}function aK(t){return t.matches("html,body")}function mi(t){return t?.ownerDocument||document}function l0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Al(t){return"composedPath"in t?t.composedPath()[0]:t.target}const lK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function XI(t){return Yr(t)&&t.matches(lK)}function Bi(t){t.preventDefault(),t.stopPropagation()}function WF(t){return t?t.getAttribute("role")==="combobox"&&XI(t):!1}const Qd=Math.min,js=Math.max,Ob=Math.round,yd=Math.floor,na=t=>({x:t,y:t}),cK={left:"right",right:"left",bottom:"top",top:"bottom"},uK={start:"end",end:"start"};function XT(t,e,n){return js(t,Qd(e,n))}function ym(t,e){return typeof t=="function"?t(e):t}function ec(t){return t.split("-")[0]}function bm(t){return t.split("-")[1]}function VF(t){return t==="x"?"y":"x"}function UF(t){return t==="y"?"height":"width"}function au(t){return["top","bottom"].includes(ec(t))?"y":"x"}function HF(t){return VF(au(t))}function dK(t,e,n){n===void 0&&(n=!1);const r=bm(t),i=HF(t),s=UF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=qb(o)),[o,qb(o)]}function fK(t){const e=qb(t);return[kE(t),e,kE(e)]}function kE(t){return t.replace(/start|end/g,e=>uK[e])}function pK(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function hK(t,e,n,r){const i=bm(t);let s=pK(ec(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(kE)))),s}function qb(t){return t.replace(/left|right|bottom|top/g,e=>cK[e])}function mK(t){return{top:0,right:0,bottom:0,left:0,...t}}function gK(t){return typeof t!="number"?mK(t):{top:t,right:t,bottom:t,left:t}}function Ab(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var yK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Pb=yK.join(","),KF=typeof Element>"u",Gd=KF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Fb=!KF&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Db=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},bK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},vK=function(e,n,r){if(Db(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Pb));return n&&Gd.call(e,Pb)&&i.unshift(e),i=i.filter(r),i},xK=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Db(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,f=t(u,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:o,candidates:f})}else{var p=Gd.call(o,Pb);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!Db(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&b){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},QF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},GF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||bK(e))&&!QF(e)?0:e.tabIndex},wK=function(e,n){var r=GF(e);return r<0&&n&&!QF(e)?0:r},_K=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},JF=function(e){return e.tagName==="INPUT"},SK=function(e){return JF(e)&&e.type==="hidden"},EK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},IK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},NK=function(e){if(!e.name)return!0;var n=e.form||Fb(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=IK(i,e.form);return!s||s===e},kK=function(e){return JF(e)&&e.type==="radio"},CK=function(e){return kK(e)&&!NK(e)},jK=function(e){var n,r=e&&Fb(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,l,u;for(s=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var f,p,h;r=Fb(i),i=(f=r)===null||f===void 0?void 0:f.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},eR=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},TK=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Gd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Gd.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,f=Fb(e);if(u&&!u.shadowRoot&&i(u)===!0)return eR(e);e.assignedSlot?e=e.assignedSlot:!u&&f!==e.ownerDocument?e=f.host:e=u}e=l}if(jK(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return eR(e);return!1},RK=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Gd.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},OK=function(e,n){return!(n.disabled||Db(n)||SK(n)||TK(n,e)||EK(n)||RK(n))},CE=function(e,n){return!(CK(n)||GF(n)<0||!OK(e,n))},qK=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},AK=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=wK(l,o),f=o?t(i.candidates):l;u===0?o?n.push.apply(n,f):n.push(l):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:f})}),r.sort(_K).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},$v=function(e,n){n=n||{};var r;return n.getShadowRoot?r=xK([e],n.includeContainer,{filter:CE.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:qK}):r=vK(e,n.includeContainer,CE.bind(null,n)),AK(r)},PK=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Gd.call(e,Pb)===!1?!1:CE(n,e)};function tR(t,e,n){let{reference:r,floating:i}=t;const s=au(e),o=HF(e),l=UF(o),u=ec(e),f=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(bm(e)){case"start":x[o]-=b*(n&&f?-1:1);break;case"end":x[o]+=b*(n&&f?-1:1);break}return x}const FK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=tR(f,r,u),b=r,x={},_=0;for(let E=0;E<l.length;E++){const{name:N,fn:j}=l[E],{x:C,y:R,data:q,reset:L}=await j({x:p,y:h,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:f,platform:o,elements:{reference:t,floating:e}});p=C??p,h=R??h,x={...x,[N]:{...x[N],...q}},L&&_<=50&&(_++,typeof L=="object"&&(L.placement&&(b=L.placement),L.rects&&(f=L.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):L.rects),{x:p,y:h}=tR(f,b,u)),E=-1)}return{x:p,y:h,placement:b,strategy:i,middlewareData:x}};async function eN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:b=!1,padding:x=0}=ym(e,t),_=gK(x),N=l[b?h==="floating"?"reference":"floating":h],j=Ab(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(N)))==null||n?N:N.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:f,rootBoundary:p,strategy:u})),C=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,R=await (s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),q=await (s.isElement==null?void 0:s.isElement(R))?await (s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},L=Ab(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:R,strategy:u}):C);return{top:(j.top-L.top+_.top)/q.y,bottom:(L.bottom-j.bottom+_.bottom)/q.y,left:(j.left-L.left+_.left)/q.x,right:(L.right-j.right+_.right)/q.x}}const DK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:f}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...N}=ym(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const j=ec(i),C=au(l),R=ec(l)===l,q=await (u.isRTL==null?void 0:u.isRTL(f.floating)),L=b||(R||!E?[qb(l)]:fK(l)),M=_!=="none";!b&&M&&L.push(...hK(l,E,_,q));const W=[l,...L],P=await eN(e,N),O=[];let z=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&O.push(P[j]),h){const B=dK(i,o,q);O.push(P[B[0]],P[B[1]])}if(z=[...z,{placement:i,overflows:O}],!O.every(B=>B<=0)){var D,V;const B=(((D=s.flip)==null?void 0:D.index)||0)+1,G=W[B];if(G)return{data:{index:B,overflows:z},reset:{placement:G}};let Z=(V=z.filter(le=>le.overflows[0]<=0).sort((le,ie)=>le.overflows[1]-ie.overflows[1])[0])==null?void 0:V.placement;if(!Z)switch(x){case"bestFit":{var U;const le=(U=z.filter(ie=>{if(M){const ne=au(ie.placement);return ne===C||ne==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((ie,ne)=>ie[1]-ne[1])[0])==null?void 0:U[0];le&&(Z=le);break}case"initialPlacement":Z=l;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};async function LK(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=ec(n),l=bm(n),u=au(n)==="y",f=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=ym(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(x=l==="end"?_*-1:_),u?{x:x*p,y:b*f}:{x:b*f,y:x*p}}const MK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await LK(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},$K=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:N=>{let{x:j,y:C}=N;return{x:j,y:C}}},...u}=ym(t,e),f={x:n,y:r},p=await eN(e,u),h=au(ec(i)),b=VF(h);let x=f[b],_=f[h];if(s){const N=b==="y"?"top":"left",j=b==="y"?"bottom":"right",C=x+p[N],R=x-p[j];x=XT(C,x,R)}if(o){const N=h==="y"?"top":"left",j=h==="y"?"bottom":"right",C=_+p[N],R=_-p[j];_=XT(C,_,R)}const E=l.fn({...e,[b]:x,[h]:_});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:s,[h]:o}}}}}},BK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...f}=ym(t,e),p=await eN(e,f),h=ec(i),b=bm(i),x=au(i)==="y",{width:_,height:E}=s.floating;let N,j;h==="top"||h==="bottom"?(N=h,j=b===(await (o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=h,N=b==="end"?"top":"bottom");const C=E-p.top-p.bottom,R=_-p.left-p.right,q=Qd(E-p[N],C),L=Qd(_-p[j],R),M=!e.middlewareData.shift;let W=q,P=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=C),M&&!b){const z=js(p.left,0),D=js(p.right,0),V=js(p.top,0),U=js(p.bottom,0);x?P=_-2*(z!==0||D!==0?z+D:js(p.left,p.right)):W=E-2*(V!==0||U!==0?V+U:js(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:W});const O=await o.getDimensions(l.floating);return _!==O.width||E!==O.height?{reset:{rects:!0}}:{}}}};function ZF(t){const e=lo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Yr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Ob(n)!==s||Ob(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function tN(t){return sr(t)?t:t.contextElement}function Fd(t){const e=tN(t);if(!Yr(e))return na(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=ZF(e);let o=(s?Ob(n.width):n.width)/r,l=(s?Ob(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const zK=na(0);function YF(t){const e=ms(t);return!Lv()||!e.visualViewport?zK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function WK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ms(t)?!1:e}function lu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=tN(t);let o=na(1);e&&(r?sr(r)&&(o=Fd(r)):o=Fd(t));const l=WK(s,n,r)?YF(s):na(0);let u=(i.left+l.x)/o.x,f=(i.top+l.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const b=ms(s),x=r&&sr(r)?ms(r):r;let _=b,E=IE(_);for(;E&&r&&x!==_;){const N=Fd(E),j=E.getBoundingClientRect(),C=lo(E),R=j.left+(E.clientLeft+parseFloat(C.paddingLeft))*N.x,q=j.top+(E.clientTop+parseFloat(C.paddingTop))*N.y;u*=N.x,f*=N.y,p*=N.x,h*=N.y,u+=R,f+=q,_=ms(E),E=IE(_)}}return Ab({width:p,height:h,x:u,y:f})}function nN(t,e){const n=Mv(t).scrollLeft;return e?e.left+n:lu(da(t)).left+n}function XF(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:nN(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function VK(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=da(r),l=e?Dv(e.floating):!1;if(r===o||l&&s)return n;let u={scrollLeft:0,scrollTop:0},f=na(1);const p=na(0),h=Yr(r);if((h||!h&&!s)&&((sc(r)!=="body"||gm(o))&&(u=Mv(r)),Yr(r))){const x=lu(r);f=Fd(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const b=o&&!h&&!s?XF(o,u,!0):na(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+p.x+b.x,y:n.y*f.y-u.scrollTop*f.y+p.y+b.y}}function UK(t){return Array.from(t.getClientRects())}function HK(t){const e=da(t),n=Mv(t),r=t.ownerDocument.body,i=js(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=js(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+nN(t);const l=-n.scrollTop;return lo(r).direction==="rtl"&&(o+=js(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function KK(t,e){const n=ms(t),r=da(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const f=Lv();(!f||f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:l,y:u}}function QK(t,e){const n=lu(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Yr(t)?Fd(t):na(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,u=i*s.x,f=r*s.y;return{width:o,height:l,x:u,y:f}}function nR(t,e,n){let r;if(e==="viewport")r=KK(t,n);else if(e==="document")r=HK(da(t));else if(sr(e))r=QK(e,n);else{const i=YF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ab(r)}function eD(t,e){const n=Ka(t);return n===e||!sr(n)||Ma(n)?!1:lo(n).position==="fixed"||eD(n,e)}function GK(t,e){const n=e.get(t);if(n)return n;let r=zl(t,[],!1).filter(l=>sr(l)&&sc(l)!=="body"),i=null;const s=lo(t).position==="fixed";let o=s?Ka(t):t;for(;sr(o)&&!Ma(o);){const l=lo(o),u=JI(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gm(o)&&!u&&eD(t,o))?r=r.filter(p=>p!==o):i=l,o=Ka(o)}return e.set(t,r),r}function JK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Dv(e)?[]:GK(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((f,p)=>{const h=nR(e,p,i);return f.top=js(h.top,f.top),f.right=Qd(h.right,f.right),f.bottom=Qd(h.bottom,f.bottom),f.left=js(h.left,f.left),f},nR(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ZK(t){const{width:e,height:n}=ZF(t);return{width:e,height:n}}function YK(t,e,n){const r=Yr(e),i=da(e),s=n==="fixed",o=lu(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=na(0);if(r||!r&&!s)if((sc(e)!=="body"||gm(i))&&(l=Mv(e)),r){const b=lu(e,!0,s,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else i&&(u.x=nN(i));const f=i&&!r&&!s?XF(i,l):na(0),p=o.left+l.scrollLeft-u.x-f.x,h=o.top+l.scrollTop-u.y-f.y;return{x:p,y:h,width:o.width,height:o.height}}function c0(t){return lo(t).position==="static"}function rR(t,e){if(!Yr(t)||lo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return da(t)===n&&(n=n.ownerDocument.body),n}function tD(t,e){const n=ms(t);if(Dv(t))return n;if(!Yr(t)){let i=Ka(t);for(;i&&!Ma(i);){if(sr(i)&&!c0(i))return i;i=Ka(i)}return n}let r=rR(t,e);for(;r&&nK(r)&&c0(r);)r=rR(r,e);return r&&Ma(r)&&c0(r)&&!JI(r)?n:r||rK(t)||n}const XK=async function(t){const e=this.getOffsetParent||tD,n=this.getDimensions,r=await n(t.floating);return{reference:YK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eQ(t){return lo(t).direction==="rtl"}const tQ={convertOffsetParentRelativeRectToViewportRelativeRect:VK,getDocumentElement:da,getClippingRect:JK,getOffsetParent:tD,getElementRects:XK,getClientRects:UK,getDimensions:ZK,getScale:Fd,isElement:sr,isRTL:eQ};function nD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nQ(t,e){let n=null,r;const i=da(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const f=t.getBoundingClientRect(),{left:p,top:h,width:b,height:x}=f;if(l||e(),!b||!x)return;const _=yd(h),E=yd(i.clientWidth-(p+b)),N=yd(i.clientHeight-(h+x)),j=yd(p),R={rootMargin:-_+"px "+-E+"px "+-N+"px "+-j+"px",threshold:js(0,Qd(1,u))||1};let q=!0;function L(M){const W=M[0].intersectionRatio;if(W!==u){if(!q)return o();W?o(!1,W):r=setTimeout(()=>{o(!1,1e-7)},1e3)}W===1&&!nD(f,t.getBoundingClientRect())&&o(),q=!1}try{n=new IntersectionObserver(L,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(L,R)}n.observe(t)}return o(!0),s}function rD(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=tN(t),p=i||s?[...f?zl(f):[],...zl(e)]:[];p.forEach(j=>{i&&j.addEventListener("scroll",n,{passive:!0}),s&&j.addEventListener("resize",n)});const h=f&&l?nQ(f,n):null;let b=-1,x=null;o&&(x=new ResizeObserver(j=>{let[C]=j;C&&C.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(e)})),n()}),f&&!u&&x.observe(f),x.observe(e));let _,E=u?lu(t):null;u&&N();function N(){const j=lu(t);E&&!nD(E,j)&&n(),E=j,_=requestAnimationFrame(N)}return n(),()=>{var j;p.forEach(C=>{i&&C.removeEventListener("scroll",n),s&&C.removeEventListener("resize",n)}),h?.(),(j=x)==null||j.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const rQ=MK,iQ=$K,sQ=DK,oQ=BK,aQ=(t,e,n)=>{const r=new Map,i={platform:tQ,...n},s={...i.platform,_c:r};return FK(t,e,{...i,platform:s})};var Oy=typeof document<"u"?H.useLayoutEffect:H.useEffect;function Lb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Lb(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Lb(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function iD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function iR(t,e){const n=iD(t);return Math.round(e*n)/n}function u0(t){const e=H.useRef(t);return Oy(()=>{e.current=t}),e}function lQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:f}=t,[p,h]=H.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,x]=H.useState(r);Lb(b,r)||x(r);const[_,E]=H.useState(null),[N,j]=H.useState(null),C=H.useCallback(ie=>{ie!==M.current&&(M.current=ie,E(ie))},[]),R=H.useCallback(ie=>{ie!==W.current&&(W.current=ie,j(ie))},[]),q=s||_,L=o||N,M=H.useRef(null),W=H.useRef(null),P=H.useRef(p),O=u!=null,z=u0(u),D=u0(i),V=u0(f),U=H.useCallback(()=>{if(!M.current||!W.current)return;const ie={placement:e,strategy:n,middleware:b};D.current&&(ie.platform=D.current),aQ(M.current,W.current,ie).then(ne=>{const oe={...ne,isPositioned:V.current!==!1};B.current&&!Lb(P.current,oe)&&(P.current=oe,em.flushSync(()=>{h(oe)}))})},[b,e,n,D,V]);Oy(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(ie=>({...ie,isPositioned:!1})))},[f]);const B=H.useRef(!1);Oy(()=>(B.current=!0,()=>{B.current=!1}),[]),Oy(()=>{if(q&&(M.current=q),L&&(W.current=L),q&&L){if(z.current)return z.current(q,L,U);U()}},[q,L,U,z,O]);const G=H.useMemo(()=>({reference:M,floating:W,setReference:C,setFloating:R}),[C,R]),Z=H.useMemo(()=>({reference:q,floating:L}),[q,L]),le=H.useMemo(()=>{const ie={position:n,left:0,top:0};if(!Z.floating)return ie;const ne=iR(Z.floating,p.x),oe=iR(Z.floating,p.y);return l?{...ie,transform:"translate("+ne+"px, "+oe+"px)",...iD(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,l,Z.floating,p.x,p.y]);return H.useMemo(()=>({...p,update:U,refs:G,elements:Z,floatingStyles:le}),[p,U,G,Z,le])}const sD=(t,e)=>({...rQ(t),options:[t,e]}),cQ=(t,e)=>({...iQ(t),options:[t,e]}),oD=(t,e)=>({...sQ(t),options:[t,e]}),uQ=(t,e)=>({...oQ(t),options:[t,e]});function sR(t){return H.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const aD={...kB},dQ=aD.useInsertionEffect,fQ=dQ||(t=>t());function Vi(t){const e=H.useRef(()=>{});return fQ(()=>{e.current=t}),H.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const rN="ArrowUp",vm="ArrowDown",Wl="ArrowLeft",Vl="ArrowRight";function Qg(t,e,n){return Math.floor(t/e)!==n}function ih(t,e){return e<0||e>=t.current.length}function d0(t,e){return ki(t,{disabledIndices:e})}function oR(t,e){return ki(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function ki(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let l=n;do l+=r?-s:s;while(l>=0&&l<=o.length-1&&qy(o,l,i));return l}function pQ(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:l,minIndex:u,maxIndex:f,prevIndex:p,stopEvent:h=!1}=e,b=p;if(n.key===rN){if(h&&Bi(n),p===-1)b=f;else if(b=ki(t,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),i&&(p-o<u||b<0)){const x=p%o,_=f%o,E=f-(_-x);_===x?b=f:b=_>x?E:E-o}ih(t,b)&&(b=p)}if(n.key===vm&&(h&&Bi(n),p===-1?b=u:(b=ki(t,{startingIndex:p,amount:o,disabledIndices:l}),i&&p+o>f&&(b=ki(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),ih(t,b)&&(b=p)),r==="both"){const x=yd(p/o);n.key===(s?Wl:Vl)&&(h&&Bi(n),p%o!==o-1?(b=ki(t,{startingIndex:p,disabledIndices:l}),i&&Qg(b,o,x)&&(b=ki(t,{startingIndex:p-p%o-1,disabledIndices:l}))):i&&(b=ki(t,{startingIndex:p-p%o-1,disabledIndices:l})),Qg(b,o,x)&&(b=p)),n.key===(s?Vl:Wl)&&(h&&Bi(n),p%o!==0?(b=ki(t,{startingIndex:p,decrement:!0,disabledIndices:l}),i&&Qg(b,o,x)&&(b=ki(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):i&&(b=ki(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),Qg(b,o,x)&&(b=p));const _=yd(f/o)===x;ih(t,b)&&(i&&_?b=n.key===(s?Vl:Wl)?f:ki(t,{startingIndex:p-p%o-1,disabledIndices:l}):b=p)}return b}function hQ(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:l,height:u}=s,f=!1;for(n&&(i=0);!f;){const p=[];for(let h=0;h<l;h++)for(let b=0;b<u;b++)p.push(i+h+b*e);i%e+l<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),f=!0):i++}}),[...r]}function mQ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function gQ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function qy(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var br=typeof document<"u"?H.useLayoutEffect:H.useEffect;let aR=!1,yQ=0;const lR=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+yQ++;function bQ(){const[t,e]=H.useState(()=>aR?lR():void 0);return br(()=>{t==null&&e(lR())},[]),H.useEffect(()=>{aR=!0},[]),t}const vQ=aD.useId,iN=vQ||bQ;function lD(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const cD=H.createContext(null),uD=H.createContext(null),xm=()=>{var t;return((t=H.useContext(cD))==null?void 0:t.id)||null},mf=()=>H.useContext(uD);function xQ(t){const e=iN(),n=mf(),i=xm();return br(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function wQ(t){const{children:e,id:n}=t,r=xm();return d.jsx(cD.Provider,{value:H.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function _Q(t){const{children:e}=t,n=H.useRef([]),r=H.useCallback(o=>{n.current=[...n.current,o]},[]),i=H.useCallback(o=>{n.current=n.current.filter(l=>l!==o)},[]),s=H.useState(()=>lD())[0];return d.jsx(uD.Provider,{value:H.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function cu(t){return"data-floating-ui-"+t}function Ui(t){const e=H.useRef(t);return br(()=>{e.current=t}),e}const cR=cu("safe-polygon");function f0(t,e,n){return n&&!Fh(n)?0:typeof t=="number"?t:t?.[e]}function SQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:l=!0,delay:u=0,handleClose:f=null,mouseOnly:p=!1,restMs:h=0,move:b=!0}=e,x=mf(),_=xm(),E=Ui(f),N=Ui(u),j=Ui(n),C=H.useRef(),R=H.useRef(-1),q=H.useRef(),L=H.useRef(-1),M=H.useRef(!0),W=H.useRef(!1),P=H.useRef(()=>{}),O=H.useRef(!1),z=H.useCallback(()=>{var le;const ie=(le=i.current.openEvent)==null?void 0:le.type;return ie?.includes("mouse")&&ie!=="mousedown"},[i]);H.useEffect(()=>{if(!l)return;function le(ie){let{open:ne}=ie;ne||(clearTimeout(R.current),clearTimeout(L.current),M.current=!0,O.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[l,s]),H.useEffect(()=>{if(!l||!E.current||!n)return;function le(ne){z()&&r(!1,ne,"hover")}const ie=mi(o.floating).documentElement;return ie.addEventListener("mouseleave",le),()=>{ie.removeEventListener("mouseleave",le)}},[o.floating,n,r,l,E,z]);const D=H.useCallback(function(le,ie,ne){ie===void 0&&(ie=!0),ne===void 0&&(ne="hover");const oe=f0(N.current,"close",C.current);oe&&!q.current?(clearTimeout(R.current),R.current=window.setTimeout(()=>r(!1,le,ne),oe)):ie&&(clearTimeout(R.current),r(!1,le,ne))},[N,r]),V=Vi(()=>{P.current(),q.current=void 0}),U=Vi(()=>{if(W.current){const le=mi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(cR),W.current=!1}}),B=Vi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);H.useEffect(()=>{if(!l)return;function le(te){if(clearTimeout(R.current),M.current=!1,p&&!Fh(C.current)||h>0&&!f0(N.current,"open"))return;const ue=f0(N.current,"open",C.current);ue?R.current=window.setTimeout(()=>{j.current||r(!0,te,"hover")},ue):n||r(!0,te,"hover")}function ie(te){if(B())return;P.current();const ue=mi(o.floating);if(clearTimeout(L.current),O.current=!1,E.current&&i.current.floatingContext){n||clearTimeout(R.current),q.current=E.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){U(),V(),B()||D(te,!0,"safe-polygon")}});const ye=q.current;ue.addEventListener("mousemove",ye),P.current=()=>{ue.removeEventListener("mousemove",ye)};return}(C.current==="touch"?!hi(o.floating,te.relatedTarget):!0)&&D(te)}function ne(te){B()||i.current.floatingContext&&(E.current==null||E.current({...i.current.floatingContext,tree:x,x:te.clientX,y:te.clientY,onClose(){U(),V(),B()||D(te)}})(te))}if(sr(o.domReference)){var oe;const te=o.domReference;return n&&te.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),b&&te.addEventListener("mousemove",le,{once:!0}),te.addEventListener("mouseenter",le),te.addEventListener("mouseleave",ie),()=>{var ue;n&&te.removeEventListener("mouseleave",ne),(ue=o.floating)==null||ue.removeEventListener("mouseleave",ne),b&&te.removeEventListener("mousemove",le),te.removeEventListener("mouseenter",le),te.removeEventListener("mouseleave",ie)}}},[o,l,t,p,h,b,D,V,U,r,n,j,x,N,E,i,B]),br(()=>{var le;if(l&&n&&(le=E.current)!=null&&le.__options.blockPointerEvents&&z()){W.current=!0;const ne=o.floating;if(sr(o.domReference)&&ne){var ie;const oe=mi(o.floating).body;oe.setAttribute(cR,"");const te=o.domReference,ue=x==null||(ie=x.nodesRef.current.find(de=>de.id===_))==null||(ie=ie.context)==null?void 0:ie.elements.floating;return ue&&(ue.style.pointerEvents=""),oe.style.pointerEvents="none",te.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",te.style.pointerEvents="",ne.style.pointerEvents=""}}}},[l,n,_,o,x,E,z]),br(()=>{n||(C.current=void 0,O.current=!1,V(),U())},[n,V,U]),H.useEffect(()=>()=>{V(),clearTimeout(R.current),clearTimeout(L.current),U()},[l,o.domReference,V,U]);const G=H.useMemo(()=>{function le(ie){C.current=ie.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(ie){const{nativeEvent:ne}=ie;function oe(){!M.current&&!j.current&&r(!0,ne,"hover")}p&&!Fh(C.current)||n||h===0||O.current&&ie.movementX**2+ie.movementY**2<2||(clearTimeout(L.current),C.current==="touch"?oe():(O.current=!0,L.current=window.setTimeout(oe,h)))}}},[p,r,n,j,h]),Z=H.useMemo(()=>({onMouseEnter(){clearTimeout(R.current)},onMouseLeave(le){B()||D(le.nativeEvent,!1)}}),[D,B]);return H.useMemo(()=>l?{reference:G,floating:Z}:{},[l,G,Z])}let uR=0;function Ac(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(uR);const s=()=>t?.focus({preventScroll:n});i?s():uR=requestAnimationFrame(s)}function dR(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Dd(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var l;return i.parentId===o.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}function EQ(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Dd(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let td=new WeakMap,Gg=new WeakSet,Jg={},p0=0;const IQ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,dD=t=>t&&(t.host||dD(t.parentNode)),NQ=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=dD(n);return t.contains(r)?r:null}).filter(n=>n!=null);function kQ(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=NQ(e,t),l=new Set,u=new Set(o),f=[];Jg[i]||(Jg[i]=new WeakMap);const p=Jg[i];o.forEach(h),b(e),l.clear();function h(x){!x||l.has(x)||(l.add(x),x.parentNode&&h(x.parentNode))}function b(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(sc(_)!=="script")if(l.has(_))b(_);else{const E=s?_.getAttribute(s):null,N=E!==null&&E!=="false",j=td.get(_)||0,C=s?j+1:j,R=(p.get(_)||0)+1;td.set(_,C),p.set(_,R),f.push(_),C===1&&N&&Gg.add(_),R===1&&_.setAttribute(i,""),!N&&s&&_.setAttribute(s,"true")}})}return p0++,()=>{f.forEach(x=>{const _=td.get(x)||0,E=s?_-1:_,N=(p.get(x)||0)-1;td.set(x,E),p.set(x,N),E||(!Gg.has(x)&&s&&x.removeAttribute(s),Gg.delete(x)),N||x.removeAttribute(i)}),p0--,p0||(td=new WeakMap,td=new WeakMap,Gg=new WeakSet,Jg={})}}function fR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=mi(t[0]).body;return kQ(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const Bv=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function fD(t,e){const n=$v(t,Bv());e==="prev"&&n.reverse();const r=n.indexOf(ko(mi(t)));return n.slice(r+1)[0]}function pD(){return fD(document.body,"next")}function hD(){return fD(document.body,"prev")}function sh(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!hi(n,r)}function CQ(t){$v(t,Bv()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function pR(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const zv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let jQ;function hR(t){t.key==="Tab"&&(t.target,clearTimeout(jQ))}const Mb=H.forwardRef(function(e,n){const[r,i]=H.useState();br(()=>(zF()&&i("button"),document.addEventListener("keydown",hR),()=>{document.removeEventListener("keydown",hR)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[cu("focus-guard")]:"",style:zv};return d.jsx("span",{...e,...s})}),mD=H.createContext(null),mR=cu("portal");function TQ(t){t===void 0&&(t={});const{id:e,root:n}=t,r=iN(),i=gD(),[s,o]=H.useState(null),l=H.useRef(null);return br(()=>()=>{s?.remove(),queueMicrotask(()=>{l.current=null})},[s]),br(()=>{if(!r||l.current)return;const u=e?document.getElementById(e):null;if(!u)return;const f=document.createElement("div");f.id=r,f.setAttribute(mR,""),u.appendChild(f),l.current=f,o(f)},[e,r]),br(()=>{if(n===null||!r||l.current)return;let u=n||i?.portalNode;u&&!sr(u)&&(u=u.current),u=u||document.body;let f=null;e&&(f=document.createElement("div"),f.id=e,u.appendChild(f));const p=document.createElement("div");p.id=r,p.setAttribute(mR,""),u=f||u,u.appendChild(p),l.current=p,o(p)},[e,n,r,i]),s}function sN(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=TQ({id:n,root:r}),[o,l]=H.useState(null),u=H.useRef(null),f=H.useRef(null),p=H.useRef(null),h=H.useRef(null),b=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return H.useEffect(()=>{if(!s||!i||b)return;function E(N){s&&sh(N)&&(N.type==="focusin"?pR:CQ)(s)}return s.addEventListener("focusin",E,!0),s.addEventListener("focusout",E,!0),()=>{s.removeEventListener("focusin",E,!0),s.removeEventListener("focusout",E,!0)}},[s,i,b]),H.useEffect(()=>{s&&(x||pR(s))},[x,s]),d.jsxs(mD.Provider,{value:H.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:f,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:l}),[i,s]),children:[_&&s&&d.jsx(Mb,{"data-type":"outside",ref:u,onFocus:E=>{if(sh(E,s)){var N;(N=p.current)==null||N.focus()}else{const j=hD()||o?.domReference;j?.focus()}}}),_&&s&&d.jsx("span",{"aria-owns":s.id,style:zv}),s&&em.createPortal(e,s),_&&s&&d.jsx(Mb,{"data-type":"outside",ref:f,onFocus:E=>{if(sh(E,s)){var N;(N=h.current)==null||N.focus()}else{const j=pD()||o?.domReference;j?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,E.nativeEvent,"focus-out")}}})]})}const gD=()=>H.useContext(mD),jE="data-floating-ui-focusable";function TE(t){return t?t.hasAttribute(jE)?t:t.querySelector("["+jE+"]")||t:null}const RQ=20;let Pc=[];function h0(t){Pc=Pc.filter(e=>e.isConnected),t&&sc(t)!=="body"&&(Pc.push(t),Pc.length>RQ&&(Pc=Pc.slice(-20)))}function gR(){return Pc.slice().reverse().find(t=>t.isConnected)}function OQ(t){const e=Bv();return PK(t,e)?t:$v(t,e)[0]||t}const qQ=H.forwardRef(function(e,n){return d.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:zv})});function yD(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:u=!1,modal:f=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:b=!1}=t,{open:x,onOpenChange:_,events:E,dataRef:N,elements:{domReference:j,floating:C}}=e,R=Vi(()=>{var De;return(De=N.current.floatingContext)==null?void 0:De.nodeId}),q=typeof o=="number"&&o<0,L=WF(j)&&q,M=IQ(),W=M?s:!0,P=!W||M&&b,O=Ui(i),z=Ui(o),D=Ui(l),V=mf(),U=gD(),B=H.useRef(null),G=H.useRef(null),Z=H.useRef(!1),le=H.useRef(!1),ie=H.useRef(-1),ne=U!=null,oe=TE(C),te=Vi(function(De){return De===void 0&&(De=oe),De?$v(De,Bv()):[]}),ue=Vi(De=>{const Je=te(De);return O.current.map(Xe=>j&&Xe==="reference"?j:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});H.useEffect(()=>{if(r||!f)return;function De(Xe){if(Xe.key==="Tab"){hi(oe,ko(mi(oe)))&&te().length===0&&!L&&Bi(Xe);const Ve=ue(),ct=Al(Xe);O.current[0]==="reference"&&ct===j&&(Bi(Xe),Xe.shiftKey?Ac(Ve[Ve.length-1]):Ac(Ve[1])),O.current[1]==="floating"&&ct===oe&&Xe.shiftKey&&(Bi(Xe),Ac(Ve[0]))}}const Je=mi(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,j,oe,f,O,L,te,ue]),H.useEffect(()=>{if(r||!C)return;function De(Je){const Xe=Al(Je),ct=te().indexOf(Xe);ct!==-1&&(ie.current=ct)}return C.addEventListener("focusin",De),()=>{C.removeEventListener("focusin",De)}},[r,C,te]),H.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ve=Xe.relatedTarget;queueMicrotask(()=>{const ct=R(),_t=!(hi(j,Ve)||hi(C,Ve)||hi(Ve,C)||hi(U?.portalNode,Ve)||Ve!=null&&Ve.hasAttribute(cu("focus-guard"))||V&&(Dd(V.nodesRef.current,ct).find(Rt=>{var Ut,an;return hi((Ut=Rt.context)==null?void 0:Ut.elements.floating,Ve)||hi((an=Rt.context)==null?void 0:an.elements.domReference,Ve)})||dR(V.nodesRef.current,ct).find(Rt=>{var Ut,an,xe;return[(Ut=Rt.context)==null?void 0:Ut.elements.floating,TE((an=Rt.context)==null?void 0:an.elements.floating)].includes(Ve)||((xe=Rt.context)==null?void 0:xe.elements.domReference)===Ve})));if(u&&_t&&ko(mi(oe))===mi(oe).body){Yr(oe)&&oe.focus();const Rt=ie.current,Ut=te(),an=Ut[Rt]||Ut[Ut.length-1]||oe;Yr(an)&&an.focus()}(L||!f)&&Ve&&_t&&!le.current&&Ve!==gR()&&(Z.current=!0,_(!1,Xe,"focus-out"))})}if(C&&Yr(j))return j.addEventListener("focusout",Je),j.addEventListener("pointerdown",De),C.addEventListener("focusout",Je),()=>{j.removeEventListener("focusout",Je),j.removeEventListener("pointerdown",De),C.removeEventListener("focusout",Je)}},[r,j,C,oe,f,V,U,_,h,u,te,L,R]);const de=H.useRef(null),ye=H.useRef(null),we=sR([de,U?.beforeInsideRef]),Ie=sR([ye,U?.afterInsideRef]);H.useEffect(()=>{var De;if(r||!C)return;const Je=Array.from((U==null||(De=U.portalNode)==null?void 0:De.querySelectorAll("["+cu("portal")+"]"))||[]),Xe=V&&!f?dR(V?.nodesRef.current,R()).map(_t=>{var Rt;return(Rt=_t.context)==null?void 0:Rt.elements.floating}):[],Ve=[C,...Je,...Xe,B.current,G.current,de.current,ye.current,U?.beforeOutsideRef.current,U?.afterOutsideRef.current,O.current.includes("reference")||L?j:null].filter(_t=>_t!=null),ct=f||L?fR(Ve,!P,P):fR(Ve);return()=>{ct()}},[r,j,C,f,O,U,L,W,P,V,R]),br(()=>{if(r||!Yr(oe))return;const De=mi(oe),Je=ko(De);queueMicrotask(()=>{const Xe=ue(oe),Ve=z.current,ct=(typeof Ve=="number"?Xe[Ve]:Ve.current)||oe,_t=hi(oe,Je);!q&&!_t&&x&&Ac(ct,{preventScroll:ct===oe})})},[r,x,oe,q,ue,z]),br(()=>{if(r||!oe)return;let De=!1;const Je=mi(oe),Xe=ko(Je);let ct=N.current.openEvent;h0(Xe);function _t(an){let{open:xe,reason:be,event:Ne,nested:Ae}=an;xe&&(ct=Ne),be==="escape-key"&&j&&h0(j),["hover","safe-polygon"].includes(be)&&Ne.type==="mouseleave"&&(Z.current=!0),be==="outside-press"&&(Ae?(Z.current=!1,De=!0):Z.current=!(BF(Ne)||YI(Ne)))}E.on("openchange",_t);const Rt=Je.createElement("span");Rt.setAttribute("tabindex","-1"),Rt.setAttribute("aria-hidden","true"),Object.assign(Rt.style,zv),ne&&j&&j.insertAdjacentElement("afterend",Rt);function Ut(){return typeof D.current=="boolean"?gR()||Rt:D.current.current||Rt}return()=>{E.off("openchange",_t);const an=ko(Je),xe=hi(C,an)||V&&Dd(V.nodesRef.current,R()).some(Ae=>{var Ue;return hi((Ue=Ae.context)==null?void 0:Ue.elements.floating,an)});(xe||ct&&["click","mousedown"].includes(ct.type))&&j&&h0(j);const Ne=Ut();queueMicrotask(()=>{const Ae=OQ(Ne);D.current&&!Z.current&&Yr(Ae)&&(!(Ae!==an&&an!==Je.body)||xe)&&Ae.focus({preventScroll:De}),Rt.remove()})}},[r,C,oe,D,N,E,V,ne,j,R]),H.useEffect(()=>{queueMicrotask(()=>{Z.current=!1})},[r]),br(()=>{if(!r&&U)return U.setFocusManagerState({modal:f,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:j}),()=>{U.setFocusManagerState(null)}},[r,U,f,x,_,h,j]),br(()=>{if(r||!oe||typeof MutationObserver!="function"||q)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ve=te(),ct=ko(mi(C)),_t=Ve.indexOf(ct);_t!==-1&&(ie.current=_t),O.current.includes("floating")||ct!==j&&Ve.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,C,oe,j,O,te,q]);function ze(De){return r||!p||!f?null:d.jsx(qQ,{ref:De==="start"?B:G,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const Re=!r&&W&&(f?!L:!0)&&(ne||f);return d.jsxs(d.Fragment,{children:[Re&&d.jsx(Mb,{"data-type":"inside",ref:we,onFocus:De=>{if(f){const Xe=ue();Ac(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(Z.current=!1,sh(De,U.portalNode)){const Xe=pD()||j;Xe?.focus()}else{var Je;(Je=U.beforeOutsideRef.current)==null||Je.focus()}}}),!L&&ze("start"),n,ze("end"),Re&&d.jsx(Mb,{"data-type":"inside",ref:Ie,onFocus:De=>{if(f)Ac(ue()[0]);else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(h&&(Z.current=!0),sh(De,U.portalNode)){const Xe=hD()||j;Xe?.focus()}else{var Je;(Je=U.afterOutsideRef.current)==null||Je.focus()}}})]})}let Zg=0;function AQ(){const t=/iP(hone|ad|od)|iOS/.test(ZI()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var l,u;const f=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(f))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let yR=()=>{};const PQ=H.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return br(()=>{if(r)return Zg++,Zg===1&&(yR=AQ()),()=>{Zg--,Zg===0&&yR()}},[r]),d.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function bR(t){return Yr(t.target)&&t.target.tagName==="BUTTON"}function vR(t){return XI(t)}function oN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:l="click",toggle:u=!0,ignoreMouse:f=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,b=H.useRef(),x=H.useRef(!1),_=H.useMemo(()=>({onPointerDown(E){b.current=E.pointerType},onMouseDown(E){const N=b.current;E.button===0&&l!=="click"&&(Fh(N,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const N=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}Fh(N,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){b.current=void 0,!(E.defaultPrevented||!p||bR(E))&&(E.key===" "&&!vR(s)&&(E.preventDefault(),x.current=!0),E.key==="Enter"&&r(!(n&&u),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!p||bR(E)||vR(s)||E.key===" "&&x.current&&(x.current=!1,r(!(n&&u),E.nativeEvent,"click"))}}),[i,s,l,f,p,r,n,h,u]);return H.useMemo(()=>o?{reference:_}:{},[o,_])}const FQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},DQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xR=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function aN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:f="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:b=!1,bubbles:x,capture:_}=e,E=mf(),N=Vi(typeof u=="function"?u:()=>!1),j=typeof u=="function"?N:u,C=H.useRef(!1),R=H.useRef(!1),{escapeKey:q,outsidePress:L}=xR(x),{escapeKey:M,outsidePress:W}=xR(_),P=H.useRef(!1),O=Vi(G=>{var Z;if(!n||!o||!l||G.key!=="Escape"||P.current)return;const le=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ie=E?Dd(E.nodesRef.current,le):[];if(!q&&(G.stopPropagation(),ie.length>0)){let ne=!0;if(ie.forEach(oe=>{var te;if((te=oe.context)!=null&&te.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,oK(G)?G.nativeEvent:G,"escape-key")}),z=Vi(G=>{var Z;const le=()=>{var ie;O(G),(ie=Al(G))==null||ie.removeEventListener("keydown",le)};(Z=Al(G))==null||Z.addEventListener("keydown",le)}),D=Vi(G=>{var Z;const le=C.current;C.current=!1;const ie=R.current;if(R.current=!1,f==="click"&&ie||le||typeof j=="function"&&!j(G))return;const ne=Al(G),oe="["+cu("inert")+"]",te=mi(i.floating).querySelectorAll(oe);let ue=sr(ne)?ne:null;for(;ue&&!Ma(ue);){const Ie=Ka(ue);if(Ma(Ie)||!sr(Ie))break;ue=Ie}if(te.length&&sr(ne)&&!aK(ne)&&!hi(ne,i.floating)&&Array.from(te).every(Ie=>!hi(ue,Ie)))return;if(Yr(ne)&&B){const Ie=Ma(ne),ze=lo(ne),Re=/auto|scroll/,De=Ie||Re.test(ze.overflowX),Je=Ie||Re.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ve=Je&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ct=ze.direction==="rtl",_t=Ve&&(ct?G.offsetX<=ne.offsetWidth-ne.clientWidth:G.offsetX>ne.clientWidth),Rt=Xe&&G.offsetY>ne.clientHeight;if(_t||Rt)return}const de=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ye=E&&Dd(E.nodesRef.current,de).some(Ie=>{var ze;return l0(G,(ze=Ie.context)==null?void 0:ze.elements.floating)});if(l0(G,i.floating)||l0(G,i.domReference)||ye)return;const we=E?Dd(E.nodesRef.current,de):[];if(we.length>0){let Ie=!0;if(we.forEach(ze=>{var Re;if((Re=ze.context)!=null&&Re.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ie=!1;return}}),!Ie)return}r(!1,G,"outside-press")}),V=Vi(G=>{var Z;const le=()=>{var ie;D(G),(ie=Al(G))==null||ie.removeEventListener(f,le)};(Z=Al(G))==null||Z.addEventListener(f,le)});H.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=q,s.current.__outsidePressBubbles=L;let G=-1;function Z(te){r(!1,te,"ancestor-scroll")}function le(){window.clearTimeout(G),P.current=!0}function ie(){G=window.setTimeout(()=>{P.current=!1},Lv()?5:0)}const ne=mi(i.floating);l&&(ne.addEventListener("keydown",M?z:O,M),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",ie)),j&&ne.addEventListener(f,W?V:D,W);let oe=[];return b&&(sr(i.domReference)&&(oe=zl(i.domReference)),sr(i.floating)&&(oe=oe.concat(zl(i.floating))),!sr(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat(zl(i.reference.contextElement)))),oe=oe.filter(te=>{var ue;return te!==((ue=ne.defaultView)==null?void 0:ue.visualViewport)}),oe.forEach(te=>{te.addEventListener("scroll",Z,{passive:!0})}),()=>{l&&(ne.removeEventListener("keydown",M?z:O,M),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",ie)),j&&ne.removeEventListener(f,W?V:D,W),oe.forEach(te=>{te.removeEventListener("scroll",Z)}),window.clearTimeout(G)}},[s,i,l,j,f,n,r,b,o,q,L,O,M,z,D,W,V]),H.useEffect(()=>{C.current=!1},[j,f]);const U=H.useMemo(()=>({onKeyDown:O,...p&&{[FQ[h]]:G=>{r(!1,G.nativeEvent,"reference-press")},...h!=="click"&&{onClick(G){r(!1,G.nativeEvent,"reference-press")}}}}),[O,r,p,h]),B=H.useMemo(()=>({onKeyDown:O,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[DQ[f]]:()=>{C.current=!0}}),[O,f]);return H.useMemo(()=>o?{reference:U,floating:B}:{},[o,U,B])}function LQ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=iN(),s=H.useRef({}),[o]=H.useState(()=>lD()),l=xm()!=null,[u,f]=H.useState(r.reference),p=Vi((x,_,E)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:E,nested:l}),n?.(x,_,E)}),h=H.useMemo(()=>({setPositionReference:f}),[]),b=H.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return H.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:b,events:o,floatingId:i,refs:h}),[e,p,b,o,i,h])}function lN(t){t===void 0&&(t={});const{nodeId:e}=t,n=LQ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=H.useState(null),[l,u]=H.useState(null),p=i?.domReference||s,h=H.useRef(null),b=mf();br(()=>{p&&(h.current=p)},[p]);const x=lQ({...t,elements:{...i,...l&&{reference:l}}}),_=H.useCallback(R=>{const q=sr(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;u(q),x.refs.setReference(q)},[x.refs]),E=H.useCallback(R=>{(sr(R)||R===null)&&(h.current=R,o(R)),(sr(x.refs.reference.current)||x.refs.reference.current===null||R!==null&&!sr(R))&&x.refs.setReference(R)},[x.refs]),N=H.useMemo(()=>({...x.refs,setReference:E,setPositionReference:_,domReference:h}),[x.refs,E,_]),j=H.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),C=H.useMemo(()=>({...x,...r,refs:N,elements:j,nodeId:e}),[x,N,j,e,r]);return br(()=>{r.dataRef.current.floatingContext=C;const R=b?.nodesRef.current.find(q=>q.id===e);R&&(R.context=C)}),H.useMemo(()=>({...x,context:C,refs:N,elements:j}),[x,N,j,C])}function MQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:l=!0,visibleOnly:u=!0}=e,f=H.useRef(!1),p=H.useRef(),h=H.useRef(!0);H.useEffect(()=>{if(!l)return;const x=ms(o.domReference);function _(){!n&&Yr(o.domReference)&&o.domReference===ko(mi(o.domReference))&&(f.current=!0)}function E(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",E,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",E,!0)}},[o.domReference,n,l]),H.useEffect(()=>{if(!l)return;function x(_){let{reason:E}=_;(E==="reference-press"||E==="escape-key")&&(f.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,l]),H.useEffect(()=>()=>{clearTimeout(p.current)},[]);const b=H.useMemo(()=>({onPointerDown(x){YI(x.nativeEvent)||(h.current=!1)},onMouseLeave(){f.current=!1},onFocus(x){if(f.current)return;const _=Al(x.nativeEvent);if(u&&sr(_))try{if(zF()&&iK())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!XI(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){f.current=!1;const _=x.relatedTarget,E=x.nativeEvent,N=sr(_)&&_.hasAttribute(cu("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var j;const C=ko(o.domReference?o.domReference.ownerDocument:document);!_&&C===o.domReference||hi((j=s.current.floatingContext)==null?void 0:j.refs.floating.current,C)||hi(o.domReference,C)||N||r(!1,E,"focus")})}}),[s,o.domReference,r,u]);return H.useMemo(()=>l?{reference:b}:{},[l,b])}const wR="active",_R="selected";function m0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[wR]:o,[_R]:l,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[jE]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(u=>{let[f,p]=u;if(!(i&&[wR,_R].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof p=="function"){var h;(h=r.get(f))==null||h.push(p),o[f]=function(){for(var b,x=arguments.length,_=new Array(x),E=0;E<x;E++)_[E]=arguments[E];return(b=r.get(f))==null?void 0:b.map(N=>N(..._)).find(N=>N!==void 0)}}}else o[f]=p}),o),{})}}function cN(t){t===void 0&&(t=[]);const e=t.map(l=>l?.reference),n=t.map(l=>l?.floating),r=t.map(l=>l?.item),i=H.useCallback(l=>m0(l,t,"reference"),e),s=H.useCallback(l=>m0(l,t,"floating"),n),o=H.useCallback(l=>m0(l,t,"item"),r);return H.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Wv(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function SR(t,e){return Wv(e,t===rN||t===vm,t===Wl||t===Vl)}function g0(t,e,n){return Wv(e,t===vm,n?t===Wl:t===Vl)||t==="Enter"||t===" "||t===""}function $Q(t,e,n){return Wv(e,n?t===Wl:t===Vl,t===vm)}function ER(t,e,n){return Wv(e,n?t===Vl:t===Wl,t===rN)}function BQ(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:f=null,allowEscape:p=!1,loop:h=!1,nested:b=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:E="auto",focusItemOnHover:N=!0,openOnArrowKeyDown:j=!0,disabledIndices:C=void 0,orientation:R="vertical",cols:q=1,scrollItemIntoView:L=!0,virtualItemRef:M,itemSizes:W,dense:P=!1}=e,O=TE(i.floating),z=Ui(O),D=xm(),V=mf(),U=Vi(()=>{l(Z.current===-1?null:Z.current)}),B=WF(i.domReference),G=H.useRef(E),Z=H.useRef(f??-1),le=H.useRef(null),ie=H.useRef(!0),ne=H.useRef(U),oe=H.useRef(!!i.floating),te=H.useRef(n),ue=H.useRef(!1),de=H.useRef(!1),ye=Ui(C),we=Ui(n),Ie=Ui(L),ze=Ui(f),[Re,De]=H.useState(),[Je,Xe]=H.useState(),Ve=Vi(()=>{function be(Ue){_?(De(Ue.id),V?.events.emit("virtualfocus",Ue),M&&(M.current=Ue)):Ac(Ue,{sync:ue.current,preventScroll:!0})}const Ne=s.current[Z.current];Ne&&be(Ne),(ue.current?Ue=>Ue():requestAnimationFrame)(()=>{const Ue=s.current[Z.current]||Ne;if(!Ue)return;Ne||be(Ue);const rt=Ie.current;rt&&_t&&(de.current||!ie.current)&&(Ue.scrollIntoView==null||Ue.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});br(()=>{u&&(n&&i.floating?G.current&&f!=null&&(de.current=!0,Z.current=f,U()):oe.current&&(Z.current=-1,ne.current()))},[u,n,i.floating,f,U]),br(()=>{if(u&&n&&i.floating)if(o==null){if(ue.current=!1,ze.current!=null)return;if(oe.current&&(Z.current=-1,Ve()),(!te.current||!oe.current)&&G.current&&(le.current!=null||G.current===!0&&le.current==null)){let be=0;const Ne=()=>{s.current[0]==null?(be<2&&(be?requestAnimationFrame:queueMicrotask)(Ne),be++):(Z.current=le.current==null||g0(le.current,R,x)||b?d0(s,ye.current):oR(s,ye.current),le.current=null,U())};Ne()}}else ih(s,o)||(Z.current=o,Ve(),de.current=!1)},[u,n,i.floating,o,ze,b,s,R,x,U,Ve,ye]),br(()=>{var be;if(!u||i.floating||!V||_||!oe.current)return;const Ne=V.nodesRef.current,Ae=(be=Ne.find(Me=>Me.id===D))==null||(be=be.context)==null?void 0:be.elements.floating,Ue=ko(mi(i.floating)),rt=Ne.some(Me=>Me.context&&hi(Me.context.elements.floating,Ue));Ae&&!rt&&ie.current&&Ae.focus({preventScroll:!0})},[u,i.floating,V,D,_]),br(()=>{if(!u||!V||!_||D)return;function be(Ne){Xe(Ne.id),M&&(M.current=Ne)}return V.events.on("virtualfocus",be),()=>{V.events.off("virtualfocus",be)}},[u,V,_,D,M]),br(()=>{ne.current=U,te.current=n,oe.current=!!i.floating}),br(()=>{n||(le.current=null)},[n]);const ct=o!=null,_t=H.useMemo(()=>{function be(Ae){if(!n)return;const Ue=s.current.indexOf(Ae);Ue!==-1&&Z.current!==Ue&&(Z.current=Ue,U())}return{onFocus(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,be(Ue)},onClick:Ae=>{let{currentTarget:Ue}=Ae;return Ue.focus({preventScroll:!0})},...N&&{onMouseMove(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,de.current=!1,be(Ue)},onPointerLeave(Ae){let{pointerType:Ue}=Ae;if(!(!ie.current||Ue==="touch")&&(ue.current=!0,Z.current=-1,U(),!_)){var rt;(rt=z.current)==null||rt.focus({preventScroll:!0})}}}}},[n,z,N,s,U,_]),Rt=Vi(be=>{if(ie.current=!1,ue.current=!0,be.which===229||!we.current&&be.currentTarget===z.current)return;if(b&&ER(be.key,R,x)){Bi(be),r(!1,be.nativeEvent,"list-navigation"),Yr(i.domReference)&&(_?V?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ne=Z.current,Ae=d0(s,C),Ue=oR(s,C);if(B||(be.key==="Home"&&(Bi(be),Z.current=Ae,U()),be.key==="End"&&(Bi(be),Z.current=Ue,U())),q>1){const rt=W||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=hQ(rt,q,P),ut=Me.findIndex(bn=>bn!=null&&!qy(s.current,bn,C)),Qt=Me.reduce((bn,lr,Ln)=>lr!=null&&!qy(s.current,lr,C)?Ln:bn,-1),Gt=Me[pQ({current:Me.map(bn=>bn!=null?s.current[bn]:null)},{event:be,orientation:R,loop:h,rtl:x,cols:q,disabledIndices:gQ([...C||s.current.map((bn,lr)=>qy(s.current,lr)?lr:void 0),void 0],Me),minIndex:ut,maxIndex:Qt,prevIndex:mQ(Z.current>Ue?Ae:Z.current,rt,Me,q,be.key===vm?"bl":be.key===(x?Wl:Vl)?"tr":"tl"),stopEvent:!0})];if(Gt!=null&&(Z.current=Gt,U()),R==="both")return}if(SR(be.key,R)){if(Bi(be),n&&!_&&ko(be.currentTarget.ownerDocument)===be.currentTarget){Z.current=g0(be.key,R,x)?Ae:Ue,U();return}g0(be.key,R,x)?h?Z.current=Ne>=Ue?p&&Ne!==s.current.length?-1:Ae:ki(s,{startingIndex:Ne,disabledIndices:C}):Z.current=Math.min(Ue,ki(s,{startingIndex:Ne,disabledIndices:C})):h?Z.current=Ne<=Ae?p&&Ne!==-1?s.current.length:Ue:ki(s,{startingIndex:Ne,decrement:!0,disabledIndices:C}):Z.current=Math.max(Ae,ki(s,{startingIndex:Ne,decrement:!0,disabledIndices:C})),ih(s,Z.current)&&(Z.current=-1),U()}}),Ut=H.useMemo(()=>_&&n&&ct&&{"aria-activedescendant":Je||Re},[_,n,ct,Je,Re]),an=H.useMemo(()=>({"aria-orientation":R==="both"?void 0:R,...B?{}:Ut,onKeyDown:Rt,onPointerMove(){ie.current=!0}}),[Ut,Rt,R,B]),xe=H.useMemo(()=>{function be(Ae){E==="auto"&&BF(Ae.nativeEvent)&&(G.current=!0)}function Ne(Ae){G.current=E,E==="auto"&&YI(Ae.nativeEvent)&&(G.current=!0)}return{...Ut,onKeyDown(Ae){ie.current=!1;const Ue=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ue||rt,ut=$Q(Ae.key,R,x),Qt=ER(Ae.key,R,x),Gt=SR(Ae.key,R),bn=(b?ut:Gt)||Ae.key==="Enter"||Ae.key.trim()==="";if(_&&n){const Di=V?.nodesRef.current.find(Jt=>Jt.parentId==null),_r=V&&Di?EQ(V.nodesRef.current,Di.id):null;if(Me&&_r&&M){const Jt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ut||Qt){var lr,Ln;const Zi=((lr=_r.context)==null?void 0:lr.elements.domReference)===Ae.currentTarget,Yi=Qt&&!Zi?(Ln=_r.context)==null?void 0:Ln.elements.domReference:ut?s.current.find(Xi=>Xi?.id===Re):null;Yi&&(Bi(Ae),Yi.dispatchEvent(Jt),Xe(void 0))}if((Gt||rt)&&_r.context&&_r.context.open&&_r.parentId&&Ae.currentTarget!==_r.context.elements.domReference){var Kr;Bi(Ae),(Kr=_r.context.elements.domReference)==null||Kr.dispatchEvent(Jt);return}}return Rt(Ae)}if(!(!n&&!j&&Ue)){if(bn&&(le.current=b&&Gt?null:Ae.key),b){ut&&(Bi(Ae),n?(Z.current=d0(s,ye.current),U()):r(!0,Ae.nativeEvent,"list-navigation"));return}Gt&&(f!=null&&(Z.current=f),Bi(Ae),!n&&j?r(!0,Ae.nativeEvent,"list-navigation"):Rt(Ae),n&&U())}},onFocus(){n&&!_&&(Z.current=-1,U())},onPointerDown:Ne,onPointerEnter:Ne,onMouseDown:be,onClick:be}},[Re,Ut,Rt,ye,E,s,b,U,r,n,j,R,x,f,V,_,M]);return H.useMemo(()=>u?{reference:xe,floating:an,item:_t}:{},[u,xe,an,_t])}const IR=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function nd(t,e){return typeof t=="function"?t(e):t}function zQ(t,e){const[n,r]=H.useState(t);return t&&!n&&r(!0),H.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function WQ(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[l,u]=H.useState("unmounted"),f=zQ(n,o);return!f&&l==="close"&&u("unmounted"),br(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:f,status:l}}function uN(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,l=t.placement,u=l.split("-")[0],f=H.useMemo(()=>({side:u,placement:l}),[u,l]),p=typeof o=="number",h=(p?o:o.open)||0,b=(p?o:o.close)||0,[x,_]=H.useState(()=>({...nd(s,f),...nd(n,f)})),{isMounted:E,status:N}=WQ(t,{duration:o}),j=Ui(n),C=Ui(r),R=Ui(i),q=Ui(s);return br(()=>{const L=nd(j.current,f),M=nd(R.current,f),W=nd(q.current,f),P=nd(C.current,f)||Object.keys(L).reduce((O,z)=>(O[z]="",O),{});if(N==="initial"&&_(O=>({transitionProperty:O.transitionProperty,...W,...L})),N==="open"&&_({transitionProperty:Object.keys(P).map(IR).join(","),transitionDuration:h+"ms",...W,...P}),N==="close"){const O=M||L;_({transitionProperty:Object.keys(O).map(IR).join(","),transitionDuration:b+"ms",...W,...O})}},[b,R,j,C,q,h,N,f]),{isMounted:E,styles:x}}const VQ=H.createContext({close(){}}),UQ=xn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),HQ=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:l=UQ,css:u,children:f})=>{const[p,h]=H.useState(!1),{refs:b,floatingStyles:x,context:_}=lN({open:p,onOpenChange:h,placement:"top",whileElementsMounted:rD,middleware:[sD(10),oD({fallbackAxisSideDirection:"start"}),cQ()],...s}),{getReferenceProps:E,getFloatingProps:N}=cN([SQ(_,{enabled:e==="hover",delay:i}),oN(_,{enabled:e==="click"}),MQ(_),aN(_)]),{isMounted:j,styles:C}=uN(_),R=l({mounted:j,...o,css:u}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",ref:b.setReference,...E(),disabled:n,className:R.target(),children:t}),d.jsx(sN,{children:d.jsx("div",{ref:b.setFloating,style:{...x,...C},className:R.portal(),...N(),onClick:r?()=>{h(!1)}:void 0,children:d.jsx(VQ.Provider,{value:{close(){h(!1)}},children:f})})})]})},bD="icon-[system-uicons--menu-hamburger]",vD=xn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),Yt=({icon:t,variant:e,tva:n=vD,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?d.jsx("div",{className:s.base({css:[t]}),...i}):null},KQ=xn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),or=({icon:t=bD,iconProps:e,children:n,variant:r,tva:i=KQ,css:s,...o})=>{const l=i({...r,css:s}).slots;return d.jsx(_Q,{children:d.jsx(HQ,{action:"click",target:d.jsx(Yt,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:d.jsx("div",{className:l.base(),children:n})})})},xD="icon-[svg-spinners--90-ring-with-bg]",QQ=xn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),wm=({iconEnabled:t,iconDisabled:e,iconLoading:n=xD,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:l=QQ,css:u,children:f,...p})=>{const h=l({disabled:r,loading:i,...o,css:u}).slots;return d.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?d.jsx(Yt,{icon:i?n:e??t}):d.jsx(Yt,{icon:i?n:t}),f]})},dN="icon-[iconamoon--close-light]",Vv=H.createContext(void 0),GQ=xn({slot:{base:["bg-slate-400/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),gf=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:l,tva:u=GQ,children:f})=>{const[p,h]=H.useState(i),b=xQ(),{refs:x,context:_}=lN({nodeId:b,open:p,onOpenChange:h}),E=oN(_),N=aN(_,{outsidePress:s}),{getReferenceProps:j,getFloatingProps:C}=cN([E,N]),{isMounted:R,styles:q}=uN(_),L=u({disabled:r,...o,css:l}).slots;return d.jsxs(Vv.Provider,{value:{close(){h(!1)}},children:[d.jsx("div",{ref:x.setReference,...j({disabled:r}),className:L.target(),children:t}),d.jsx(wQ,{id:b,children:R&&d.jsx(d.Fragment,{children:d.jsx(sN,{children:d.jsx(PQ,{lockScroll:!0,style:q,className:L.base(),children:d.jsx(yD,{context:_,children:d.jsxs("div",{ref:x.setFloating,...C(),className:L.modal(),children:[d.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[d.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(kv(e)?d.jsx(Yt,{icon:e,variant:{size:"xl"}}):e),n&&d.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),d.jsx(wm,{iconEnabled:dN,onClick:()=>h(!1)})]}),Z9(f)?d.jsx(f,{close:()=>h(!1)}):f]})})})})})})]})},JQ=xn({use:DF,slot:{},variant:{},defaults:{}}),kn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=JQ,css:l,...u})=>{const f=o({...s,disabled:r,css:l}).slots;return i?null:d.jsxs("div",{className:f.base(),children:[kv(t)?d.jsx(Yt,{icon:t,...e}):t,d.jsx(gf,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},ZQ=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),yi=({variant:t,tva:e=ZQ,css:n,...r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),...r})},RE="icon-[material-symbols-light--check-small]",YQ="icon-[material-symbols-light--close-small]",XQ="icon-[material-symbols-light--check-indeterminate-small]",e7=xn({use:vD,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),Uv=({value:t,checkIcon:e=RE,unCheckIcon:n=YQ,undefinedIcon:r=XQ,tva:i=e7,...s})=>t==null?d.jsx(Yt,{icon:r,tva:i,...s}):d.jsx(Yt,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),t7=xn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),wD=({value:t,onChange:e,variant:n,tva:r=t7,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx("div",{className:o.base(),children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:l=>{e(l.target.checked)},...s}),d.jsx("div",{className:o.switch()})]})})},n7=xn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),dn=({iconEnabled:t,iconDisabled:e,iconLoading:n=xD,iconProps:r,loading:i,variant:s,tva:o=n7,css:l,children:u,...f})=>{const p=o({disabled:f.disabled,...s,css:l}).slots;return d.jsxs("button",{type:"button",className:p.base({disabled:f.disabled}),...f,children:[f.disabled?d.jsx(Yt,{icon:i===!0?n:e,variant:{size:"xl"},...r}):d.jsx(Yt,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},fN=H.createContext({inline:!1}),r7=xn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),i7=({inline:t,label:e,value:n,variant:r,tva:i=r7,css:s})=>{const o=H.useContext(fN),l=t??o?.inline,u=i({inline:l,...r,css:s}).slots;return d.jsxs("div",{className:u.base(),children:[e?d.jsx("div",{className:u.label(),children:e}):null,d.jsx("div",{className:u.value(),children:n})]})},s7=xn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),_D=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=s7,css:o,inline:l=!1})=>{const u=s({inline:l,...i,css:o}).slots;return d.jsx(fN.Provider,{value:{inline:l},children:d.jsx("div",{className:u.base(),children:t.filter(({id:f})=>!e.includes(f)).map(({id:f,render:p,...h})=>d.jsx(i7,{value:d.jsx(p,{entity:r}),...n,...h},f))})})},o7=xn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),NR="icon-[tabler--dots]",a7=xn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),l7=xn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),y0=({pages:t,page:e,onPage:n,variant:r,tva:i=l7,css:s})=>{const o=i({...r,css:s}).slots;return d.jsx("nav",{className:o.base(),children:d.jsx("ul",{className:o.list(),children:t.map((l,u)=>d.jsx("li",{className:o.page({current:e===l-1}),onClick:()=>n(l-1),children:l},`page-${l}-${u}`))})})},c7=xn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),pN=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:l,onChange:u,value:f,variant:p,tva:h=c7,css:b})=>{const[x,_]=H.useState(!1),[E,N]=H.useState(null),[j,C]=H.useState(t.findIndex(ne=>ne.id===n));H.useEffect(()=>{C(t.findIndex(ne=>ne.id===f))},[f]);const{refs:R,floatingStyles:q,context:L}=lN({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:rD,middleware:[sD(5),oD({padding:10}),uQ({apply({rects:ne,elements:oe,availableHeight:te}){Object.assign(oe.floating.style,{maxHeight:`${te}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),M=H.useRef([]),W=H.useRef(!1),P=oN(L,{event:"mousedown"}),O=aN(L),z=BQ(L,{listRef:M,activeIndex:E,selectedIndex:j,onNavigate:N,loop:!0}),{getReferenceProps:D,getFloatingProps:V,getItemProps:U}=cN([O,z,P]),{isMounted:B,styles:G}=uN(L),Z=ne=>{C(ne),_(!1);const oe=t[ne];oe&&o?.(oe),l?.(oe),u?.(oe?.id)},le=j===null?void 0:t[j],ie=h({disabled:s,...p,css:b}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:R.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:D(),className:ie.base(),children:d.jsxs("div",{className:ie.input(),children:[e?d.jsx(Yt,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?d.jsx(r,{entity:le}):i||sa.rich("Select item"),d.jsx(Yt,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),B&&d.jsx(sN,{children:d.jsx(yD,{context:L,modal:!1,children:d.jsx("div",{ref:R.setFloating,style:{...q,...G},className:ie.popup(),...V(),children:t.map((ne,oe)=>d.jsxs("div",{ref:te=>{M.current[oe]=te},role:"option",tabIndex:oe===E?0:-1,"aria-selected":oe===j&&oe===E,className:ie.item({selected:oe===j,active:oe===E}),...U({onClick(){Z(oe)},onKeyDown(te){te.key==="Enter"&&(te.preventDefault(),Z(oe)),te.key===" "&&!W.current&&(te.preventDefault(),Z(oe))}}),children:[d.jsx(r,{entity:ne}),oe===j&&d.jsx(Yt,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},u7=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>d.jsx(pN,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),kR=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=a7,css:l})=>{const u=H.useMemo(()=>$9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[u.total>1?d.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(y0,{page:t.page,pages:u.start,onPage:r}),d.jsx(Yt,{icon:NR})]}),d.jsx(y0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(Yt,{icon:NR}),d.jsx(y0,{page:t.page,pages:u.end,onPage:r})]})]}):null,d.jsxs("div",{className:f.sums(),children:[d.jsx("div",{children:n}),d.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&d.jsxs(d.Fragment,{children:[d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-semibold",children:e.where})]})]}),d.jsx(u7,{size:t.size,onSize:i})]})},CR="function",bd="64e10b34-2bf7-4616-9668-f99de5aa046e",d7="get",f7="has",p7="set",{isArray:Ay}=Array;let{SharedArrayBuffer:$b,window:h7}=globalThis,{notify:SD,wait:ED,waitAsync:Bb}=Atomics,ID=null;Bb||(Bb=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new $b(4)}catch{$b=ArrayBuffer;const e=new WeakMap;if(h7){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[bd];if(!Ay(o)){s.stopImmediatePropagation();const{id:l,sb:u}=o;n.get(l)(u)}};ID=function(s,...o){const l=s?.[bd];if(Ay(l)){const[u,f]=l;e.set(f,u),this.addEventListener("message",i)}return r.call(this,s,...o)},Bb=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let l=0;l<o.length;l++)s[l]=o[l];return"ok"})})}else{const n=(r,i)=>({[bd]:{id:r,sb:i}});SD=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[bd];if(Ay(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:OE,Map:jR,Uint16Array:qE}=globalThis,{BYTES_PER_ELEMENT:TR}=OE,{BYTES_PER_ELEMENT:m7}=qE,g7=(t,e,n)=>{for(;ED(t,0,0,e)==="timed-out";)n()},AE=new WeakSet,b0=new WeakMap,y7={value:{then:t=>t()}};let b7=0;const hN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!b0.has(t)){const s=ID||t.postMessage,o=(b,...x)=>s.call(t,{[bd]:x},{transfer:b}),l=typeof i===CR?i:i?.handler,u=i?.delay||42,f=new TextDecoder("utf-16"),p=(b,x)=>b?Bb(x,0):(l?g7(x,u,l):ED(x,0),y7);let h=!1;b0.set(t,new Proxy(new jR,{[f7]:(b,x)=>typeof x=="string"&&!x.startsWith("_"),[d7]:(b,x)=>x==="then"?null:(..._)=>{const E=b7++;let N=new OE(new $b(TR*2)),j=[];AE.has(_.at(-1)||j)&&AE.delete(j=_.pop()),o(j,E,N,x,r?_.map(r):_);const C=t!==globalThis;let R=0;return h&&C&&(R=setTimeout(console.warn,1e3,` - Possible deadlock if proxy.${x}(...args) is awaited`)),p(C,N).value.then(()=>{clearTimeout(R);const q=N[1];if(!q)return;const L=m7*q;return N=new OE(new $b(L+L%TR)),o([],E,N),p(C,N).value.then(()=>e(f.decode(new qE(N.buffer).slice(0,q))))})},[p7](b,x,_){const E=typeof _;if(E!==CR)throw new Error(`Unable to assign ${x} as ${E}`);if(!b.size){const N=new jR;t.addEventListener("message",async j=>{const C=j.data?.[bd];if(Ay(C)){j.stopImmediatePropagation();const[R,q,...L]=C;let M;if(L.length){const[W,P]=L;if(b.has(W)){h=!0;try{const O=await b.get(W)(...P);if(O!==void 0){const z=n(r?r(O):O);N.set(R,z),q[1]=z.length}}catch(O){M=O}finally{h=!1}}else M=new Error(`Unsupported action: ${W}`);q[0]=1}else{const W=N.get(R);N.delete(R);for(let P=new qE(q.buffer),O=0;O<W.length;O++)P[O]=W.charCodeAt(O)}if(SD(q,0),M)throw M}})}return!!b.set(x,_)}}))}return b0.get(t)};hN.transfer=(...t)=>(AE.add(t),t);var mN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,y)=>{i=g,s=y}),l=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const f=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,f.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",b="";function x(g){return r.locateFile?r.locateFile(g,b):b+g}var _,E;(l||u)&&(u?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(E=g=>{var y=new XMLHttpRequest;return y.open("GET",g,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),_=g=>fetch(g,{credentials:"same-origin"}).then(y=>y.ok?y.arrayBuffer():Promise.reject(new Error(y.status+" : "+y.url))));var N=r.print||console.log.bind(console),j=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var C=r.wasmBinary,R,q=!1,L,M,W,P,O,z;function D(){var g=R.buffer;r.HEAP8=L=new Int8Array(g),r.HEAP16=W=new Int16Array(g),r.HEAPU8=M=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=O=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=z=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)R=r.wasmMemory;else{var V=r.INITIAL_MEMORY||0x1000000;R=new WebAssembly.Memory({initial:V/65536,maximum:32768})}D();var U=[],B=[],G=[];function Z(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(U)}function le(){!r.noFSInit&&!K.initialized&&K.init(),K.ignorePermissions=!1,xe(B)}function ie(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)te(r.postRun.shift());xe(G)}function ne(g){U.unshift(g)}function oe(g){B.unshift(g)}function te(g){G.unshift(g)}var ue=0,de=null;function ye(g){return g}function we(g){ue++,r.monitorRunDependencies?.(ue)}function Ie(g){if(ue--,r.monitorRunDependencies?.(ue),ue==0&&de){var y=de;de=null,y()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",j(g),q=!0,g+=". Build with -sASSERTIONS for more info.";var y=new WebAssembly.RuntimeError(g);throw s(y),y}var Re="data:application/octet-stream;base64,",De=g=>g.startsWith(Re);function Je(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ve(g){if(g==Xe&&C)return new Uint8Array(C);if(E)return E(g);throw"both async and sync fetching of the wasm failed"}function ct(g){return C?Promise.resolve().then(()=>Ve(g)):_(g).then(y=>new Uint8Array(y),()=>Ve(g))}function _t(g,y,S){return ct(g).then(I=>WebAssembly.instantiate(I,y)).then(S,I=>{j(`failed to asynchronously prepare wasm: ${I}`),ze(I)})}function Rt(g,y,S,I){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(T=>{var $=WebAssembly.instantiateStreaming(T,S);return $.then(I,function(fe){return j(`wasm streaming compile failed: ${fe}`),j("falling back to ArrayBuffer instantiation"),_t(y,S,I)})}):_t(y,S,I)}function Ut(){return{env:Mf,wasi_snapshot_preview1:Mf}}function an(){var g=Ut();function y(I,T){return he=I.exports,oe(he.__wasm_call_ctors),Ie(),he}we();function S(I){y(I.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,y)}catch(I){j(`Module.instantiateWasm callback failed with error: ${I}`),s(I)}return Xe||(Xe=Je()),Rt(C,Xe,g,S).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var be={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(g).slice(1)},normalizeArray:(g,y)=>{for(var S=0,I=g.length-1;I>=0;I--){var T=g[I];T==="."?g.splice(I,1):T===".."?(g.splice(I,1),S++):S&&(g.splice(I,1),S--)}if(y)for(;S;S--)g.unshift("..");return g},normalize:g=>{var y=be.isAbs(g),S=g.substr(-1)==="/";return g=be.normalizeArray(g.split("/").filter(I=>!!I),!y).join("/"),!g&&!y&&(g="."),g&&S&&(g+="/"),(y?"/":"")+g},dirname:g=>{var y=be.splitPath(g),S=y[0],I=y[1];return!S&&!I?".":(I&&(I=I.substr(0,I.length-1)),S+I)},basename:g=>{if(g==="/")return"/";g=be.normalize(g),g=g.replace(/\/$/,"");var y=g.lastIndexOf("/");return y===-1?g:g.substr(y+1)},join:(...g)=>be.normalize(g.join("/")),join2:(g,y)=>be.normalize(g+"/"+y)},Ne=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=Ne())(g),Ue={resolve:(...g)=>{for(var y="",S=!1,I=g.length-1;I>=-1&&!S;I--){var T=I>=0?g[I]:K.cwd();if(typeof T!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!T)return"";y=T+"/"+y,S=be.isAbs(T)}return y=be.normalizeArray(y.split("/").filter($=>!!$),!S).join("/"),(S?"/":"")+y||"."},relative:(g,y)=>{g=Ue.resolve(g).substr(1),y=Ue.resolve(y).substr(1);function S(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var I=S(g.split("/")),T=S(y.split("/")),$=Math.min(I.length,T.length),fe=$,me=0;me<$;me++)if(I[me]!==T[me]){fe=me;break}for(var Ke=[],me=fe;me<I.length;me++)Ke.push("..");return Ke=Ke.concat(T.slice(fe)),Ke.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,y,S)=>{for(var I=y+S,T=y;g[T]&&!(T>=I);)++T;if(T-y>16&&g.buffer&&rt)return rt.decode(g.subarray(y,T));for(var $="";y<T;){var fe=g[y++];if(!(fe&128)){$+=String.fromCharCode(fe);continue}var me=g[y++]&63;if((fe&224)==192){$+=String.fromCharCode((fe&31)<<6|me);continue}var Ke=g[y++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Ke:fe=(fe&7)<<18|me<<12|Ke<<6|g[y++]&63,fe<65536)$+=String.fromCharCode(fe);else{var tt=fe-65536;$+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return $},ut=[],Qt=g=>{for(var y=0,S=0;S<g.length;++S){var I=g.charCodeAt(S);I<=127?y++:I<=2047?y+=2:I>=55296&&I<=57343?(y+=4,++S):y+=3}return y},Gt=(g,y,S,I)=>{if(!(I>0))return 0;for(var T=S,$=S+I-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Ke=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Ke&1023}if(me<=127){if(S>=$)break;y[S++]=me}else if(me<=2047){if(S+1>=$)break;y[S++]=192|me>>6,y[S++]=128|me&63}else if(me<=65535){if(S+2>=$)break;y[S++]=224|me>>12,y[S++]=128|me>>6&63,y[S++]=128|me&63}else{if(S+3>=$)break;y[S++]=240|me>>18,y[S++]=128|me>>12&63,y[S++]=128|me>>6&63,y[S++]=128|me&63}}return y[S]=0,S-T};function bn(g,y,S){var I=Qt(g)+1,T=new Array(I),$=Gt(g,T,0,T.length);return T.length=$,T}var lr=()=>{if(!ut.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ut=bn(g)}return ut.shift()},Ln={ttys:[],init(){},shutdown(){},register(g,y){Ln.ttys[g]={input:[],output:[],ops:y},K.registerDevice(g,Ln.stream_ops)},stream_ops:{open(g){var y=Ln.ttys[g.node.rdev];if(!y)throw new K.ErrnoError(43);g.tty=y,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,y,S,I,T){if(!g.tty||!g.tty.ops.get_char)throw new K.ErrnoError(60);for(var $=0,fe=0;fe<I;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new K.ErrnoError(29)}if(me===void 0&&$===0)throw new K.ErrnoError(6);if(me==null)break;$++,y[S+fe]=me}return $&&(g.node.timestamp=Date.now()),$},write(g,y,S,I,T){if(!g.tty||!g.tty.ops.put_char)throw new K.ErrnoError(60);try{for(var $=0;$<I;$++)g.tty.ops.put_char(g.tty,y[S+$])}catch{throw new K.ErrnoError(29)}return I&&(g.node.timestamp=Date.now()),$}},default_tty_ops:{get_char(g){return lr()},put_char(g,y){y===null||y===10?(N(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(N(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,y,S){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,y){y===null||y===10?(j(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(j(Me(g.output,0)),g.output=[])}}},Kr=(g,y)=>(M.fill(0,g,g+y),g),Di=(g,y)=>Math.ceil(g/y)*y,_r=g=>{g=Di(g,65536);var y=$f(65536,g);return y?Kr(y,g):0},Jt={ops_table:null,mount(g){return Jt.createNode(null,"/",16895,0)},createNode(g,y,S,I){if(K.isBlkdev(S)||K.isFIFO(S))throw new K.ErrnoError(63);Jt.ops_table||={dir:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,lookup:Jt.node_ops.lookup,mknod:Jt.node_ops.mknod,rename:Jt.node_ops.rename,unlink:Jt.node_ops.unlink,rmdir:Jt.node_ops.rmdir,readdir:Jt.node_ops.readdir,symlink:Jt.node_ops.symlink},stream:{llseek:Jt.stream_ops.llseek}},file:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:{llseek:Jt.stream_ops.llseek,read:Jt.stream_ops.read,write:Jt.stream_ops.write,allocate:Jt.stream_ops.allocate,mmap:Jt.stream_ops.mmap,msync:Jt.stream_ops.msync}},link:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,readlink:Jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:K.chrdev_stream_ops}};var T=K.createNode(g,y,S,I);return K.isDir(T.mode)?(T.node_ops=Jt.ops_table.dir.node,T.stream_ops=Jt.ops_table.dir.stream,T.contents={}):K.isFile(T.mode)?(T.node_ops=Jt.ops_table.file.node,T.stream_ops=Jt.ops_table.file.stream,T.usedBytes=0,T.contents=null):K.isLink(T.mode)?(T.node_ops=Jt.ops_table.link.node,T.stream_ops=Jt.ops_table.link.stream):K.isChrdev(T.mode)&&(T.node_ops=Jt.ops_table.chrdev.node,T.stream_ops=Jt.ops_table.chrdev.stream),T.timestamp=Date.now(),g&&(g.contents[y]=T,g.timestamp=T.timestamp),T},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,y){var S=g.contents?g.contents.length:0;if(!(S>=y)){var I=1024*1024;y=Math.max(y,S*(S<I?2:1.125)>>>0),S!=0&&(y=Math.max(y,256));var T=g.contents;g.contents=new Uint8Array(y),g.usedBytes>0&&g.contents.set(T.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,y){if(g.usedBytes!=y)if(y==0)g.contents=null,g.usedBytes=0;else{var S=g.contents;g.contents=new Uint8Array(y),S&&g.contents.set(S.subarray(0,Math.min(y,g.usedBytes))),g.usedBytes=y}},node_ops:{getattr(g){var y={};return y.dev=K.isChrdev(g.mode)?g.id:1,y.ino=g.id,y.mode=g.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=g.rdev,K.isDir(g.mode)?y.size=4096:K.isFile(g.mode)?y.size=g.usedBytes:K.isLink(g.mode)?y.size=g.link.length:y.size=0,y.atime=new Date(g.timestamp),y.mtime=new Date(g.timestamp),y.ctime=new Date(g.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr(g,y){y.mode!==void 0&&(g.mode=y.mode),y.timestamp!==void 0&&(g.timestamp=y.timestamp),y.size!==void 0&&Jt.resizeFileStorage(g,y.size)},lookup(g,y){throw K.genericErrors[44]},mknod(g,y,S,I){return Jt.createNode(g,y,S,I)},rename(g,y,S){if(K.isDir(g.mode)){var I;try{I=K.lookupNode(y,S)}catch{}if(I)for(var T in I.contents)throw new K.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=S,y.contents[S]=g,y.timestamp=g.parent.timestamp},unlink(g,y){delete g.contents[y],g.timestamp=Date.now()},rmdir(g,y){var S=K.lookupNode(g,y);for(var I in S.contents)throw new K.ErrnoError(55);delete g.contents[y],g.timestamp=Date.now()},readdir(g){var y=[".",".."];for(var S of Object.keys(g.contents))y.push(S);return y},symlink(g,y,S){var I=Jt.createNode(g,y,41471,0);return I.link=S,I},readlink(g){if(!K.isLink(g.mode))throw new K.ErrnoError(28);return g.link}},stream_ops:{read(g,y,S,I,T){var $=g.node.contents;if(T>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-T,I);if(fe>8&&$.subarray)y.set($.subarray(T,T+fe),S);else for(var me=0;me<fe;me++)y[S+me]=$[T+me];return fe},write(g,y,S,I,T,$){if(y.buffer===L.buffer&&($=!1),!I)return 0;var fe=g.node;if(fe.timestamp=Date.now(),y.subarray&&(!fe.contents||fe.contents.subarray)){if($)return fe.contents=y.subarray(S,S+I),fe.usedBytes=I,I;if(fe.usedBytes===0&&T===0)return fe.contents=y.slice(S,S+I),fe.usedBytes=I,I;if(T+I<=fe.usedBytes)return fe.contents.set(y.subarray(S,S+I),T),I}if(Jt.expandFileStorage(fe,T+I),fe.contents.subarray&&y.subarray)fe.contents.set(y.subarray(S,S+I),T);else for(var me=0;me<I;me++)fe.contents[T+me]=y[S+me];return fe.usedBytes=Math.max(fe.usedBytes,T+I),I},llseek(g,y,S){var I=y;if(S===1?I+=g.position:S===2&&K.isFile(g.node.mode)&&(I+=g.node.usedBytes),I<0)throw new K.ErrnoError(28);return I},allocate(g,y,S){Jt.expandFileStorage(g.node,y+S),g.node.usedBytes=Math.max(g.node.usedBytes,y+S)},mmap(g,y,S,I,T){if(!K.isFile(g.node.mode))throw new K.ErrnoError(43);var $,fe,me=g.node.contents;if(!(T&2)&&me&&me.buffer===L.buffer)fe=!1,$=me.byteOffset;else{if(fe=!0,$=_r(y),!$)throw new K.ErrnoError(48);me&&((S>0||S+y<me.length)&&(me.subarray?me=me.subarray(S,S+y):me=Array.prototype.slice.call(me,S,S+y)),L.set(me,$))}return{ptr:$,allocated:fe}},msync(g,y,S,I,T){return Jt.stream_ops.write(g,y,0,I,S,!1),0}}},Zi=(g,y,S,I)=>{var T=`al ${g}`;_(g).then($=>{y(new Uint8Array($)),T&&Ie()},$=>{if(S)S();else throw`Loading data file "${g}" failed.`}),T&&we()},Yi=(g,y,S,I,T,$)=>{K.createDataFile(g,y,S,I,T,$)},Xi=r.preloadPlugins||[],po=(g,y,S,I)=>{typeof Browser<"u"&&Browser.init();var T=!1;return Xi.forEach($=>{T||$.canHandle(y)&&($.handle(g,y,S,I),T=!0)}),T},pa=(g,y,S,I,T,$,fe,me,Ke,tt)=>{var at=y?Ue.resolve(be.join2(g,y)):g;function mt(Be){function Oe(et){tt?.(),me||Yi(g,y,et,I,T,Ke),$?.(),Ie()}po(Be,at,Oe,()=>{fe?.(),Ie()})||Oe(Be)}we(),typeof S=="string"?Zi(S,mt,fe):mt(S)},uc=g=>{var y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},S=y[g];if(typeof S>"u")throw new Error(`Unknown file open mode: ${g}`);return S},zs=(g,y)=>{var S=0;return g&&(S|=365),y&&(S|=146),S},K={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,y,S,I){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=K.nextInode++,this.name=y,this.mode=S,this.node_ops={},this.stream_ops={},this.rdev=I,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return K.isDir(this.mode)}get isDevice(){return K.isChrdev(this.mode)}},lookupPath(g,y={}){if(g=Ue.resolve(g),!g)return{path:"",node:null};var S={follow_mount:!0,recurse_count:0};if(y=Object.assign(S,y),y.recurse_count>8)throw new K.ErrnoError(32);for(var I=g.split("/").filter(mt=>!!mt),T=K.root,$="/",fe=0;fe<I.length;fe++){var me=fe===I.length-1;if(me&&y.parent)break;if(T=K.lookupNode(T,I[fe]),$=be.join2($,I[fe]),K.isMountpoint(T)&&(!me||me&&y.follow_mount)&&(T=T.mounted.root),!me||y.follow)for(var Ke=0;K.isLink(T.mode);){var tt=K.readlink($);$=Ue.resolve(be.dirname($),tt);var at=K.lookupPath($,{recurse_count:y.recurse_count+1});if(T=at.node,Ke++>40)throw new K.ErrnoError(32)}}return{path:$,node:T}},getPath(g){for(var y;;){if(K.isRoot(g)){var S=g.mount.mountpoint;return y?S[S.length-1]!=="/"?`${S}/${y}`:S+y:S}y=y?`${g.name}/${y}`:g.name,g=g.parent}},hashName(g,y){for(var S=0,I=0;I<y.length;I++)S=(S<<5)-S+y.charCodeAt(I)|0;return(g+S>>>0)%K.nameTable.length},hashAddNode(g){var y=K.hashName(g.parent.id,g.name);g.name_next=K.nameTable[y],K.nameTable[y]=g},hashRemoveNode(g){var y=K.hashName(g.parent.id,g.name);if(K.nameTable[y]===g)K.nameTable[y]=g.name_next;else for(var S=K.nameTable[y];S;){if(S.name_next===g){S.name_next=g.name_next;break}S=S.name_next}},lookupNode(g,y){var S=K.mayLookup(g);if(S)throw new K.ErrnoError(S);for(var I=K.hashName(g.id,y),T=K.nameTable[I];T;T=T.name_next){var $=T.name;if(T.parent.id===g.id&&$===y)return T}return K.lookup(g,y)},createNode(g,y,S,I){var T=new K.FSNode(g,y,S,I);return K.hashAddNode(T),T},destroyNode(g){K.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var y=["r","w","rw"][g&3];return g&512&&(y+="w"),y},nodePermissions(g,y){return K.ignorePermissions?0:y.includes("r")&&!(g.mode&292)||y.includes("w")&&!(g.mode&146)||y.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!K.isDir(g.mode))return 54;var y=K.nodePermissions(g,"x");return y||(g.node_ops.lookup?0:2)},mayCreate(g,y){try{var S=K.lookupNode(g,y);return 20}catch{}return K.nodePermissions(g,"wx")},mayDelete(g,y,S){var I;try{I=K.lookupNode(g,y)}catch($){return $.errno}var T=K.nodePermissions(g,"wx");if(T)return T;if(S){if(!K.isDir(I.mode))return 54;if(K.isRoot(I)||K.getPath(I)===K.cwd())return 10}else if(K.isDir(I.mode))return 31;return 0},mayOpen(g,y){return g?K.isLink(g.mode)?32:K.isDir(g.mode)&&(K.flagsToPermissionString(y)!=="r"||y&512)?31:K.nodePermissions(g,K.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=K.MAX_OPEN_FDS;g++)if(!K.streams[g])return g;throw new K.ErrnoError(33)},getStreamChecked(g){var y=K.getStream(g);if(!y)throw new K.ErrnoError(8);return y},getStream:g=>K.streams[g],createStream(g,y=-1){return g=Object.assign(new K.FSStream,g),y==-1&&(y=K.nextfd()),g.fd=y,K.streams[y]=g,g},closeStream(g){K.streams[g]=null},dupStream(g,y=-1){var S=K.createStream(g,y);return S.stream_ops?.dup?.(S),S},chrdev_stream_ops:{open(g){var y=K.getDevice(g.node.rdev);g.stream_ops=y.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new K.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,y)=>g<<8|y,registerDevice(g,y){K.devices[g]={stream_ops:y}},getDevice:g=>K.devices[g],getMounts(g){for(var y=[],S=[g];S.length;){var I=S.pop();y.push(I),S.push(...I.mounts)}return y},syncfs(g,y){typeof g=="function"&&(y=g,g=!1),K.syncFSRequests++,K.syncFSRequests>1&&j(`warning: ${K.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var S=K.getMounts(K.root.mount),I=0;function T(fe){return K.syncFSRequests--,y(fe)}function $(fe){if(fe)return $.errored?void 0:($.errored=!0,T(fe));++I>=S.length&&T(null)}S.forEach(fe=>{if(!fe.type.syncfs)return $(null);fe.type.syncfs(fe,g,$)})},mount(g,y,S){var I=S==="/",T=!S,$;if(I&&K.root)throw new K.ErrnoError(10);if(!I&&!T){var fe=K.lookupPath(S,{follow_mount:!1});if(S=fe.path,$=fe.node,K.isMountpoint($))throw new K.ErrnoError(10);if(!K.isDir($.mode))throw new K.ErrnoError(54)}var me={type:g,opts:y,mountpoint:S,mounts:[]},Ke=g.mount(me);return Ke.mount=me,me.root=Ke,I?K.root=Ke:$&&($.mounted=me,$.mount&&$.mount.mounts.push(me)),Ke},unmount(g){var y=K.lookupPath(g,{follow_mount:!1});if(!K.isMountpoint(y.node))throw new K.ErrnoError(28);var S=y.node,I=S.mounted,T=K.getMounts(I);Object.keys(K.nameTable).forEach(fe=>{for(var me=K.nameTable[fe];me;){var Ke=me.name_next;T.includes(me.mount)&&K.destroyNode(me),me=Ke}}),S.mounted=null;var $=S.mount.mounts.indexOf(I);S.mount.mounts.splice($,1)},lookup(g,y){return g.node_ops.lookup(g,y)},mknod(g,y,S){var I=K.lookupPath(g,{parent:!0}),T=I.node,$=be.basename(g);if(!$||$==="."||$==="..")throw new K.ErrnoError(28);var fe=K.mayCreate(T,$);if(fe)throw new K.ErrnoError(fe);if(!T.node_ops.mknod)throw new K.ErrnoError(63);return T.node_ops.mknod(T,$,y,S)},create(g,y){return y=y!==void 0?y:438,y&=4095,y|=32768,K.mknod(g,y,0)},mkdir(g,y){return y=y!==void 0?y:511,y&=1023,y|=16384,K.mknod(g,y,0)},mkdirTree(g,y){for(var S=g.split("/"),I="",T=0;T<S.length;++T)if(S[T]){I+="/"+S[T];try{K.mkdir(I,y)}catch($){if($.errno!=20)throw $}}},mkdev(g,y,S){return typeof S>"u"&&(S=y,y=438),y|=8192,K.mknod(g,y,S)},symlink(g,y){if(!Ue.resolve(g))throw new K.ErrnoError(44);var S=K.lookupPath(y,{parent:!0}),I=S.node;if(!I)throw new K.ErrnoError(44);var T=be.basename(y),$=K.mayCreate(I,T);if($)throw new K.ErrnoError($);if(!I.node_ops.symlink)throw new K.ErrnoError(63);return I.node_ops.symlink(I,T,g)},rename(g,y){var S=be.dirname(g),I=be.dirname(y),T=be.basename(g),$=be.basename(y),fe,me,Ke;if(fe=K.lookupPath(g,{parent:!0}),me=fe.node,fe=K.lookupPath(y,{parent:!0}),Ke=fe.node,!me||!Ke)throw new K.ErrnoError(44);if(me.mount!==Ke.mount)throw new K.ErrnoError(75);var tt=K.lookupNode(me,T),at=Ue.relative(g,I);if(at.charAt(0)!==".")throw new K.ErrnoError(28);if(at=Ue.relative(y,S),at.charAt(0)!==".")throw new K.ErrnoError(55);var mt;try{mt=K.lookupNode(Ke,$)}catch{}if(tt!==mt){var Be=K.isDir(tt.mode),Oe=K.mayDelete(me,T,Be);if(Oe)throw new K.ErrnoError(Oe);if(Oe=mt?K.mayDelete(Ke,$,Be):K.mayCreate(Ke,$),Oe)throw new K.ErrnoError(Oe);if(!me.node_ops.rename)throw new K.ErrnoError(63);if(K.isMountpoint(tt)||mt&&K.isMountpoint(mt))throw new K.ErrnoError(10);if(Ke!==me&&(Oe=K.nodePermissions(me,"w"),Oe))throw new K.ErrnoError(Oe);K.hashRemoveNode(tt);try{me.node_ops.rename(tt,Ke,$),tt.parent=Ke}catch(et){throw et}finally{K.hashAddNode(tt)}}},rmdir(g){var y=K.lookupPath(g,{parent:!0}),S=y.node,I=be.basename(g),T=K.lookupNode(S,I),$=K.mayDelete(S,I,!0);if($)throw new K.ErrnoError($);if(!S.node_ops.rmdir)throw new K.ErrnoError(63);if(K.isMountpoint(T))throw new K.ErrnoError(10);S.node_ops.rmdir(S,I),K.destroyNode(T)},readdir(g){var y=K.lookupPath(g,{follow:!0}),S=y.node;if(!S.node_ops.readdir)throw new K.ErrnoError(54);return S.node_ops.readdir(S)},unlink(g){var y=K.lookupPath(g,{parent:!0}),S=y.node;if(!S)throw new K.ErrnoError(44);var I=be.basename(g),T=K.lookupNode(S,I),$=K.mayDelete(S,I,!1);if($)throw new K.ErrnoError($);if(!S.node_ops.unlink)throw new K.ErrnoError(63);if(K.isMountpoint(T))throw new K.ErrnoError(10);S.node_ops.unlink(S,I),K.destroyNode(T)},readlink(g){var y=K.lookupPath(g),S=y.node;if(!S)throw new K.ErrnoError(44);if(!S.node_ops.readlink)throw new K.ErrnoError(28);return Ue.resolve(K.getPath(S.parent),S.node_ops.readlink(S))},stat(g,y){var S=K.lookupPath(g,{follow:!y}),I=S.node;if(!I)throw new K.ErrnoError(44);if(!I.node_ops.getattr)throw new K.ErrnoError(63);return I.node_ops.getattr(I)},lstat(g){return K.stat(g,!0)},chmod(g,y,S){var I;if(typeof g=="string"){var T=K.lookupPath(g,{follow:!S});I=T.node}else I=g;if(!I.node_ops.setattr)throw new K.ErrnoError(63);I.node_ops.setattr(I,{mode:y&4095|I.mode&-4096,timestamp:Date.now()})},lchmod(g,y){K.chmod(g,y,!0)},fchmod(g,y){var S=K.getStreamChecked(g);K.chmod(S.node,y)},chown(g,y,S,I){var T;if(typeof g=="string"){var $=K.lookupPath(g,{follow:!I});T=$.node}else T=g;if(!T.node_ops.setattr)throw new K.ErrnoError(63);T.node_ops.setattr(T,{timestamp:Date.now()})},lchown(g,y,S){K.chown(g,y,S,!0)},fchown(g,y,S){var I=K.getStreamChecked(g);K.chown(I.node,y,S)},truncate(g,y){if(y<0)throw new K.ErrnoError(28);var S;if(typeof g=="string"){var I=K.lookupPath(g,{follow:!0});S=I.node}else S=g;if(!S.node_ops.setattr)throw new K.ErrnoError(63);if(K.isDir(S.mode))throw new K.ErrnoError(31);if(!K.isFile(S.mode))throw new K.ErrnoError(28);var T=K.nodePermissions(S,"w");if(T)throw new K.ErrnoError(T);S.node_ops.setattr(S,{size:y,timestamp:Date.now()})},ftruncate(g,y){var S=K.getStreamChecked(g);if(!(S.flags&2097155))throw new K.ErrnoError(28);K.truncate(S.node,y)},utime(g,y,S){var I=K.lookupPath(g,{follow:!0}),T=I.node;T.node_ops.setattr(T,{timestamp:Math.max(y,S)})},open(g,y,S){if(g==="")throw new K.ErrnoError(44);y=typeof y=="string"?uc(y):y,y&64?(S=typeof S>"u"?438:S,S=S&4095|32768):S=0;var I;if(typeof g=="object")I=g;else{g=be.normalize(g);try{var T=K.lookupPath(g,{follow:!(y&131072)});I=T.node}catch{}}var $=!1;if(y&64)if(I){if(y&128)throw new K.ErrnoError(20)}else I=K.mknod(g,S,0),$=!0;if(!I)throw new K.ErrnoError(44);if(K.isChrdev(I.mode)&&(y&=-513),y&65536&&!K.isDir(I.mode))throw new K.ErrnoError(54);if(!$){var fe=K.mayOpen(I,y);if(fe)throw new K.ErrnoError(fe)}y&512&&!$&&K.truncate(I,0),y&=-131713;var me=K.createStream({node:I,path:K.getPath(I),flags:y,seekable:!0,position:0,stream_ops:I.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(y&1)&&(K.readFiles||(K.readFiles={}),g in K.readFiles||(K.readFiles[g]=1)),me},close(g){if(K.isClosed(g))throw new K.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(y){throw y}finally{K.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,y,S){if(K.isClosed(g))throw new K.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new K.ErrnoError(70);if(S!=0&&S!=1&&S!=2)throw new K.ErrnoError(28);return g.position=g.stream_ops.llseek(g,y,S),g.ungotten=[],g.position},read(g,y,S,I,T){if(I<0||T<0)throw new K.ErrnoError(28);if(K.isClosed(g))throw new K.ErrnoError(8);if((g.flags&2097155)===1)throw new K.ErrnoError(8);if(K.isDir(g.node.mode))throw new K.ErrnoError(31);if(!g.stream_ops.read)throw new K.ErrnoError(28);var $=typeof T<"u";if(!$)T=g.position;else if(!g.seekable)throw new K.ErrnoError(70);var fe=g.stream_ops.read(g,y,S,I,T);return $||(g.position+=fe),fe},write(g,y,S,I,T,$){if(I<0||T<0)throw new K.ErrnoError(28);if(K.isClosed(g))throw new K.ErrnoError(8);if(!(g.flags&2097155))throw new K.ErrnoError(8);if(K.isDir(g.node.mode))throw new K.ErrnoError(31);if(!g.stream_ops.write)throw new K.ErrnoError(28);g.seekable&&g.flags&1024&&K.llseek(g,0,2);var fe=typeof T<"u";if(!fe)T=g.position;else if(!g.seekable)throw new K.ErrnoError(70);var me=g.stream_ops.write(g,y,S,I,T,$);return fe||(g.position+=me),me},allocate(g,y,S){if(K.isClosed(g))throw new K.ErrnoError(8);if(y<0||S<=0)throw new K.ErrnoError(28);if(!(g.flags&2097155))throw new K.ErrnoError(8);if(!K.isFile(g.node.mode)&&!K.isDir(g.node.mode))throw new K.ErrnoError(43);if(!g.stream_ops.allocate)throw new K.ErrnoError(138);g.stream_ops.allocate(g,y,S)},mmap(g,y,S,I,T){if(I&2&&!(T&2)&&(g.flags&2097155)!==2)throw new K.ErrnoError(2);if((g.flags&2097155)===1)throw new K.ErrnoError(2);if(!g.stream_ops.mmap)throw new K.ErrnoError(43);if(!y)throw new K.ErrnoError(28);return g.stream_ops.mmap(g,y,S,I,T)},msync(g,y,S,I,T){return g.stream_ops.msync?g.stream_ops.msync(g,y,S,I,T):0},ioctl(g,y,S){if(!g.stream_ops.ioctl)throw new K.ErrnoError(59);return g.stream_ops.ioctl(g,y,S)},readFile(g,y={}){if(y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error(`Invalid encoding type "${y.encoding}"`);var S,I=K.open(g,y.flags),T=K.stat(g),$=T.size,fe=new Uint8Array($);return K.read(I,fe,0,$,0),y.encoding==="utf8"?S=Me(fe,0):y.encoding==="binary"&&(S=fe),K.close(I),S},writeFile(g,y,S={}){S.flags=S.flags||577;var I=K.open(g,S.flags,S.mode);if(typeof y=="string"){var T=new Uint8Array(Qt(y)+1),$=Gt(y,T,0,T.length);K.write(I,T,0,$,void 0,S.canOwn)}else if(ArrayBuffer.isView(y))K.write(I,y,0,y.byteLength,void 0,S.canOwn);else throw new Error("Unsupported data type");K.close(I)},cwd:()=>K.currentPath,chdir(g){var y=K.lookupPath(g,{follow:!0});if(y.node===null)throw new K.ErrnoError(44);if(!K.isDir(y.node.mode))throw new K.ErrnoError(54);var S=K.nodePermissions(y.node,"x");if(S)throw new K.ErrnoError(S);K.currentPath=y.path},createDefaultDirectories(){K.mkdir("/tmp"),K.mkdir("/home"),K.mkdir("/home/web_user")},createDefaultDevices(){K.mkdir("/dev"),K.registerDevice(K.makedev(1,3),{read:()=>0,write:(I,T,$,fe,me)=>fe}),K.mkdev("/dev/null",K.makedev(1,3)),Ln.register(K.makedev(5,0),Ln.default_tty_ops),Ln.register(K.makedev(6,0),Ln.default_tty1_ops),K.mkdev("/dev/tty",K.makedev(5,0)),K.mkdev("/dev/tty1",K.makedev(6,0));var g=new Uint8Array(1024),y=0,S=()=>(y===0&&(y=Ae(g).byteLength),g[--y]);K.createDevice("/dev","random",S),K.createDevice("/dev","urandom",S),K.mkdir("/dev/shm"),K.mkdir("/dev/shm/tmp")},createSpecialDirectories(){K.mkdir("/proc");var g=K.mkdir("/proc/self");K.mkdir("/proc/self/fd"),K.mount({mount(){var y=K.createNode(g,"fd",16895,73);return y.node_ops={lookup(S,I){var T=+I,$=K.getStreamChecked(T),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>$.path}};return fe.parent=fe,fe}},y}},{},"/proc/self/fd")},createStandardStreams(g,y,S){g?K.createDevice("/dev","stdin",g):K.symlink("/dev/tty","/dev/stdin"),y?K.createDevice("/dev","stdout",null,y):K.symlink("/dev/tty","/dev/stdout"),S?K.createDevice("/dev","stderr",null,S):K.symlink("/dev/tty1","/dev/stderr"),K.open("/dev/stdin",0),K.open("/dev/stdout",1),K.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{K.genericErrors[g]=new K.ErrnoError(g),K.genericErrors[g].stack="<generic error, no stack>"}),K.nameTable=new Array(4096),K.mount(Jt,{},"/"),K.createDefaultDirectories(),K.createDefaultDevices(),K.createSpecialDirectories(),K.filesystems={MEMFS:Jt}},init(g,y,S){K.initialized=!0,g??=r.stdin,y??=r.stdout,S??=r.stderr,K.createStandardStreams(g,y,S)},quit(){K.initialized=!1;for(var g=0;g<K.streams.length;g++){var y=K.streams[g];y&&K.close(y)}},findObject(g,y){var S=K.analyzePath(g,y);return S.exists?S.object:null},analyzePath(g,y){try{var S=K.lookupPath(g,{follow:!y});g=S.path}catch{}var I={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var S=K.lookupPath(g,{parent:!0});I.parentExists=!0,I.parentPath=S.path,I.parentObject=S.node,I.name=be.basename(g),S=K.lookupPath(g,{follow:!y}),I.exists=!0,I.path=S.path,I.object=S.node,I.name=S.node.name,I.isRoot=S.path==="/"}catch(T){I.error=T.errno}return I},createPath(g,y,S,I){g=typeof g=="string"?g:K.getPath(g);for(var T=y.split("/").reverse();T.length;){var $=T.pop();if($){var fe=be.join2(g,$);try{K.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,y,S,I,T){var $=be.join2(typeof g=="string"?g:K.getPath(g),y),fe=zs(I,T);return K.create($,fe)},createDataFile(g,y,S,I,T,$){var fe=y;g&&(g=typeof g=="string"?g:K.getPath(g),fe=y?be.join2(g,y):g);var me=zs(I,T),Ke=K.create(fe,me);if(S){if(typeof S=="string"){for(var tt=new Array(S.length),at=0,mt=S.length;at<mt;++at)tt[at]=S.charCodeAt(at);S=tt}K.chmod(Ke,me|146);var Be=K.open(Ke,577);K.write(Be,S,0,S.length,0,$),K.close(Be),K.chmod(Ke,me)}},createDevice(g,y,S,I){var T=be.join2(typeof g=="string"?g:K.getPath(g),y),$=zs(!!S,!!I);K.createDevice.major||(K.createDevice.major=64);var fe=K.makedev(K.createDevice.major++,0);return K.registerDevice(fe,{open(me){me.seekable=!1},close(me){I?.buffer?.length&&I(10)},read(me,Ke,tt,at,mt){for(var Be=0,Oe=0;Oe<at;Oe++){var et;try{et=S()}catch{throw new K.ErrnoError(29)}if(et===void 0&&Be===0)throw new K.ErrnoError(6);if(et==null)break;Be++,Ke[tt+Oe]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Ke,tt,at,mt){for(var Be=0;Be<at;Be++)try{I(Ke[tt+Be])}catch{throw new K.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),K.mkdev(T,$,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=E(g.url),g.usedBytes=g.contents.length}catch{throw new K.ErrnoError(29)}},createLazyFile(g,y,S,I,T){class ${constructor(){this.lengthKnown=!1,this.chunks=[]}get(Oe){if(!(Oe>this.length-1||Oe<0)){var et=Oe%this.chunkSize,ve=Oe/this.chunkSize|0;return this.getter(ve)[et]}}setDataGetter(Oe){this.getter=Oe}cacheLength(){var Oe=new XMLHttpRequest;if(Oe.open("HEAD",S,!1),Oe.send(null),!(Oe.status>=200&&Oe.status<300||Oe.status===304))throw new Error("Couldn't load "+S+". Status: "+Oe.status);var et=Number(Oe.getResponseHeader("Content-length")),ve,ke=(ve=Oe.getResponseHeader("Accept-Ranges"))&&ve==="bytes",je=(ve=Oe.getResponseHeader("Content-Encoding"))&&ve==="gzip",Ze=1024*1024;ke||(Ze=et);var Ge=(Qe,St)=>{if(Qe>St)throw new Error("invalid range ("+Qe+", "+St+") or no bytes requested!");if(St>et-1)throw new Error("only "+et+" bytes available! programmer error!");var ee=new XMLHttpRequest;if(ee.open("GET",S,!1),et!==Ze&&ee.setRequestHeader("Range","bytes="+Qe+"-"+St),ee.responseType="arraybuffer",ee.overrideMimeType&&ee.overrideMimeType("text/plain; charset=x-user-defined"),ee.send(null),!(ee.status>=200&&ee.status<300||ee.status===304))throw new Error("Couldn't load "+S+". Status: "+ee.status);return ee.response!==void 0?new Uint8Array(ee.response||[]):bn(ee.responseText||"")},Te=this;Te.setDataGetter(Qe=>{var St=Qe*Ze,ee=(Qe+1)*Ze-1;if(ee=Math.min(ee,et-1),typeof Te.chunks[Qe]>"u"&&(Te.chunks[Qe]=Ge(St,ee)),typeof Te.chunks[Qe]>"u")throw new Error("doXHR failed!");return Te.chunks[Qe]}),(je||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,N("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new $,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:S};var Ke=K.createFile(g,y,me,I,T);me.contents?Ke.contents=me.contents:me.url&&(Ke.contents=null,Ke.url=me.url),Object.defineProperties(Ke,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Ke.stream_ops);at.forEach(Be=>{var Oe=Ke.stream_ops[Be];tt[Be]=(...et)=>(K.forceLoadFile(Ke),Oe(...et))});function mt(Be,Oe,et,ve,ke){var je=Be.node.contents;if(ke>=je.length)return 0;var Ze=Math.min(je.length-ke,ve);if(je.slice)for(var Ge=0;Ge<Ze;Ge++)Oe[et+Ge]=je[ke+Ge];else for(var Ge=0;Ge<Ze;Ge++)Oe[et+Ge]=je.get(ke+Ge);return Ze}return tt.read=(Be,Oe,et,ve,ke)=>(K.forceLoadFile(Ke),mt(Be,Oe,et,ve,ke)),tt.mmap=(Be,Oe,et,ve,ke)=>{K.forceLoadFile(Ke);var je=_r(Oe);if(!je)throw new K.ErrnoError(48);return mt(Be,L,je,Oe,et),{ptr:je,allocated:!0}},Ke.stream_ops=tt,Ke}},bu=(g,y)=>g?Me(M,g,y):"",hn={DEFAULT_POLLMASK:5,calculateAt(g,y,S){if(be.isAbs(y))return y;var I;if(g===-100)I=K.cwd();else{var T=hn.getStreamFromFD(g);I=T.path}if(y.length==0){if(!S)throw new K.ErrnoError(44);return I}return be.join2(I,y)},doStat(g,y,S){var I=g(y);P[S>>2]=I.dev,P[S+4>>2]=I.mode,O[S+8>>2]=I.nlink,P[S+12>>2]=I.uid,P[S+16>>2]=I.gid,P[S+20>>2]=I.rdev,z[S+24>>3]=BigInt(I.size),P[S+32>>2]=4096,P[S+36>>2]=I.blocks;var T=I.atime.getTime(),$=I.mtime.getTime(),fe=I.ctime.getTime();return z[S+40>>3]=BigInt(Math.floor(T/1e3)),O[S+48>>2]=T%1e3*1e3*1e3,z[S+56>>3]=BigInt(Math.floor($/1e3)),O[S+64>>2]=$%1e3*1e3*1e3,z[S+72>>3]=BigInt(Math.floor(fe/1e3)),O[S+80>>2]=fe%1e3*1e3*1e3,z[S+88>>3]=BigInt(I.ino),0},doMsync(g,y,S,I,T){if(!K.isFile(y.node.mode))throw new K.ErrnoError(43);if(I&2)return 0;var $=M.slice(g,g+S);K.msync(y,$,T,S,I)},getStreamFromFD(g){var y=K.getStreamChecked(g);return y},varargs:void 0,getStr(g){var y=bu(g);return y}};function vu(g,y){try{return g=hn.getStr(g),K.chmod(g,y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function xu(g,y,S,I){try{if(y=hn.getStr(y),y=hn.calculateAt(g,y),S&-8)return-28;var T=K.lookupPath(y,{follow:!0}),$=T.node;if(!$)return-44;var fe="";return S&4&&(fe+="r"),S&2&&(fe+="w"),S&1&&(fe+="x"),fe&&K.nodePermissions($,fe)?-2:0}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function wu(g,y){try{return K.fchmod(g,y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function dc(g,y,S){try{return K.fchown(g,y,S),0}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}function ha(){var g=P[+hn.varargs>>2];return hn.varargs+=4,g}var es=ha;function fc(g,y,S){hn.varargs=S;try{var I=hn.getStreamFromFD(g);switch(y){case 0:{var T=ha();if(T<0)return-28;for(;K.streams[T];)T++;var $;return $=K.dupStream(I,T),$.fd}case 1:case 2:return 0;case 3:return I.flags;case 4:{var T=ha();return I.flags|=T,0}case 12:{var T=es(),fe=0;return W[T+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function ma(g,y){try{var S=hn.getStreamFromFD(g);return hn.doStat(K.stat,S.path,y)}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}var If=0x20000000000000,ga=-0x20000000000000,Ws=g=>g<ga||g>If?NaN:Number(g);function Ya(g,y){y=Ws(y);try{return isNaN(y)?61:(K.ftruncate(g,y),0)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var Vs=(g,y,S)=>Gt(g,M,y,S);function Nf(g,y){try{if(y===0)return-28;var S=K.cwd(),I=Qt(S)+1;return y<I?-68:(Vs(S,g,y),I)}catch(T){if(typeof K>"u"||T.name!=="ErrnoError")throw T;return-T.errno}}function kf(g,y,S){hn.varargs=S;try{var I=hn.getStreamFromFD(g);switch(y){case 21509:return I.tty?0:-59;case 21505:{if(!I.tty)return-59;if(I.tty.ops.ioctl_tcgets){var T=I.tty.ops.ioctl_tcgets(I),$=es();P[$>>2]=T.c_iflag||0,P[$+4>>2]=T.c_oflag||0,P[$+8>>2]=T.c_cflag||0,P[$+12>>2]=T.c_lflag||0;for(var fe=0;fe<32;fe++)L[$+fe+17]=T.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return I.tty?0:-59;case 21506:case 21507:case 21508:{if(!I.tty)return-59;if(I.tty.ops.ioctl_tcsets){for(var $=es(),me=P[$>>2],Ke=P[$+4>>2],tt=P[$+8>>2],at=P[$+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(L[$+fe+17]);return I.tty.ops.ioctl_tcsets(I.tty,y,{c_iflag:me,c_oflag:Ke,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!I.tty)return-59;var $=es();return P[$>>2]=0,0}case 21520:return I.tty?-28:-59;case 21531:{var $=es();return K.ioctl(I,y,$)}case 21523:{if(!I.tty)return-59;if(I.tty.ops.ioctl_tiocgwinsz){var Be=I.tty.ops.ioctl_tiocgwinsz(I.tty),$=es();W[$>>1]=Be[0],W[$+2>>1]=Be[1]}return 0}case 21524:return I.tty?0:-59;case 21515:return I.tty?0:-59;default:return-28}}catch(Oe){if(typeof K>"u"||Oe.name!=="ErrnoError")throw Oe;return-Oe.errno}}function _u(g,y){try{return g=hn.getStr(g),hn.doStat(K.lstat,g,y)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Us(g,y,S){try{return y=hn.getStr(y),y=hn.calculateAt(g,y),y=be.normalize(y),y[y.length-1]==="/"&&(y=y.substr(0,y.length-1)),K.mkdir(y,S,0),0}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}function Su(g,y,S,I){try{y=hn.getStr(y);var T=I&256,$=I&4096;return I=I&-6401,y=hn.calculateAt(g,y,$),hn.doStat(T?K.lstat:K.stat,y,S)}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function Eu(g,y,S,I){hn.varargs=I;try{y=hn.getStr(y),y=hn.calculateAt(g,y);var T=I?ha():0;return K.open(y,S,T).fd}catch($){if(typeof K>"u"||$.name!=="ErrnoError")throw $;return-$.errno}}function Cf(g,y,S,I){try{if(y=hn.getStr(y),y=hn.calculateAt(g,y),I<=0)return-28;var T=K.readlink(y),$=Math.min(I,Qt(T)),fe=L[S+$];return Vs(T,S,I+1),L[S+$]=fe,$}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function Iu(g){try{return g=hn.getStr(g),K.rmdir(g),0}catch(y){if(typeof K>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function Nu(g,y){try{return g=hn.getStr(g),hn.doStat(K.stat,g,y)}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function ku(g,y,S){try{return y=hn.getStr(y),y=hn.calculateAt(g,y),S===0?K.unlink(y):S===512?K.rmdir(y):ze("Invalid flags passed to unlinkat"),0}catch(I){if(typeof K>"u"||I.name!=="ErrnoError")throw I;return-I.errno}}var pc=g=>O[g>>2]+P[g+4>>2]*0x100000000;function Cu(g,y,S,I){try{y=hn.getStr(y),y=hn.calculateAt(g,y,!0);var T=Date.now(),$,fe;if(!S)$=T,fe=T;else{var me=pc(S),Ke=P[S+8>>2];Ke==0x3fffffff?$=T:Ke==0x3ffffffe?$=-1:$=me*1e3+Ke/(1e3*1e3),S+=16,me=pc(S),Ke=P[S+8>>2],Ke==0x3fffffff?fe=T:Ke==0x3ffffffe?fe=-1:fe=me*1e3+Ke/(1e3*1e3)}return(fe!=-1||$!=-1)&&K.utime(y,$,fe),0}catch(tt){if(typeof K>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var jf=1,cr=()=>jf,Tf=g=>g%4===0&&(g%100!==0||g%400===0),hc=[0,31,60,91,121,152,182,213,244,274,305,335],ju=[0,31,59,90,120,151,181,212,243,273,304,334],Xa=g=>{var y=Tf(g.getFullYear()),S=y?hc:ju,I=S[g.getMonth()]+g.getDate()-1;return I};function Rf(g,y){g=Ws(g);var S=new Date(g*1e3);P[y>>2]=S.getSeconds(),P[y+4>>2]=S.getMinutes(),P[y+8>>2]=S.getHours(),P[y+12>>2]=S.getDate(),P[y+16>>2]=S.getMonth(),P[y+20>>2]=S.getFullYear()-1900,P[y+24>>2]=S.getDay();var I=Xa(S)|0;P[y+28>>2]=I,P[y+36>>2]=-(S.getTimezoneOffset()*60);var T=new Date(S.getFullYear(),0,1),$=new Date(S.getFullYear(),6,1).getTimezoneOffset(),fe=T.getTimezoneOffset(),me=($!=fe&&S.getTimezoneOffset()==Math.min(fe,$))|0;P[y+32>>2]=me}function mc(g,y,S,I,T,$,fe){T=Ws(T);try{if(isNaN(T))return 61;var me=hn.getStreamFromFD(I),Ke=K.mmap(me,g,T,y,S),tt=Ke.ptr;return P[$>>2]=Ke.allocated,O[fe>>2]=tt,0}catch(at){if(typeof K>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function el(g,y,S,I,T,$){$=Ws($);try{var fe=hn.getStreamFromFD(T);S&2&&hn.doMsync(g,fe,y,I,$)}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var ts=(g,y,S,I)=>{var T=new Date().getFullYear(),$=new Date(T,0,1),fe=new Date(T,6,1),me=$.getTimezoneOffset(),Ke=fe.getTimezoneOffset(),tt=Math.max(me,Ke);O[g>>2]=tt*60,P[y>>2]=+(me!=Ke);var at=Oe=>{var et=Oe>=0?"-":"+",ve=Math.abs(Oe),ke=String(Math.floor(ve/60)).padStart(2,"0"),je=String(ve%60).padStart(2,"0");return`UTC${et}${ke}${je}`},mt=at(me),Be=at(Ke);Ke<me?(Vs(mt,S,17),Vs(Be,I,17)):(Vs(mt,I,17),Vs(Be,S,17))},Of=()=>Date.now(),_i;_i=()=>performance.now();var qf=()=>0x80000000,Af=g=>{var y=R.buffer,S=(g-y.byteLength+65535)/65536;try{return R.grow(S),D(),1}catch{}},Pf=g=>{var y=M.length;g>>>=0;var S=qf();if(g>S)return!1;for(var I=1;I<=4;I*=2){var T=y*(1+.2/I);T=Math.min(T,g+0x6000000);var $=Math.min(S,Di(Math.max(g,T),65536)),fe=Af($);if(fe)return!0}return!1},Wo={},tl=()=>h||"./this.program",Li=()=>{if(!Li.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:tl()};for(var S in Wo)Wo[S]===void 0?delete y[S]:y[S]=Wo[S];var I=[];for(var S in y)I.push(`${S}=${y[S]}`);Li.strings=I}return Li.strings},nl=(g,y)=>{for(var S=0;S<g.length;++S)L[y++]=g.charCodeAt(S);L[y]=0},hx=(g,y)=>{var S=0;return Li().forEach((I,T)=>{var $=y+S;O[g+T*4>>2]=$,nl(I,$),S+=I.length+1}),0},mx=(g,y)=>{var S=Li();O[g>>2]=S.length;var I=0;return S.forEach(T=>I+=T.length+1),O[y>>2]=I,0};function Ff(g){try{var y=hn.getStreamFromFD(g);return K.close(y),0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return S.errno}}function Dm(g,y){try{var S=0,I=0,T=0,$=hn.getStreamFromFD(g),fe=$.tty?2:K.isDir($.mode)?3:K.isLink($.mode)?7:4;return L[y]=fe,W[y+2>>1]=T,z[y+8>>3]=BigInt(S),z[y+16>>3]=BigInt(I),0}catch(me){if(typeof K>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var Df=(g,y,S,I)=>{for(var T=0,$=0;$<S;$++){var fe=O[y>>2],me=O[y+4>>2];y+=8;var Ke=K.read(g,L,fe,me,I);if(Ke<0)return-1;if(T+=Ke,Ke<me)break}return T};function gc(g,y,S,I){try{var T=hn.getStreamFromFD(g),$=Df(T,y,S);return O[I>>2]=$,0}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function gx(g,y,S,I){y=Ws(y);try{if(isNaN(y))return 61;var T=hn.getStreamFromFD(g);return K.llseek(T,y,S),z[I>>3]=BigInt(T.position),T.getdents&&y===0&&S===0&&(T.getdents=null),0}catch($){if(typeof K>"u"||$.name!=="ErrnoError")throw $;return $.errno}}function Lf(g){try{var y=hn.getStreamFromFD(g);return y.stream_ops?.fsync?y.stream_ops.fsync(y):0}catch(S){if(typeof K>"u"||S.name!=="ErrnoError")throw S;return S.errno}}var Mn=(g,y,S,I)=>{for(var T=0,$=0;$<S;$++){var fe=O[y>>2],me=O[y+4>>2];y+=8;var Ke=K.write(g,L,fe,me,I);if(Ke<0)return-1;if(T+=Ke,Ke<me)break}return T};function Lm(g,y,S,I){try{var T=hn.getStreamFromFD(g),$=Mn(T,y,S);return O[I>>2]=$,0}catch(fe){if(typeof K>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}K.createPreloadedFile=pa,K.staticInit();var Mf={__syscall_chmod:vu,__syscall_faccessat:xu,__syscall_fchmod:wu,__syscall_fchown32:dc,__syscall_fcntl64:fc,__syscall_fstat64:ma,__syscall_ftruncate64:Ya,__syscall_getcwd:Nf,__syscall_ioctl:kf,__syscall_lstat64:_u,__syscall_mkdirat:Us,__syscall_newfstatat:Su,__syscall_openat:Eu,__syscall_readlinkat:Cf,__syscall_rmdir:Iu,__syscall_stat64:Nu,__syscall_unlinkat:ku,__syscall_utimensat:Cu,_emscripten_get_now_is_monotonic:cr,_localtime_js:Rf,_mmap_js:mc,_munmap_js:el,_tzset_js:ts,emscripten_date_now:Of,emscripten_get_now:_i,emscripten_resize_heap:Pf,environ_get:hx,environ_sizes_get:mx,fd_close:Ff,fd_fdstat_get:Dm,fd_read:gc,fd_seek:gx,fd_sync:Lf,fd_write:Lm,memory:R},he=an();r._sqlite3_status64=(g,y,S,I)=>(r._sqlite3_status64=he.sqlite3_status64)(g,y,S,I),r._sqlite3_status=(g,y,S,I)=>(r._sqlite3_status=he.sqlite3_status)(g,y,S,I),r._sqlite3_db_status=(g,y,S,I,T)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,y,S,I,T),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,y)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,y),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,y)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,y),r._sqlite3_realloc64=(g,y)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,y),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,y)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,y),r._sqlite3_stricmp=(g,y)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,y),r._sqlite3_strnicmp=(g,y,S)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,y,S),r._sqlite3_uri_parameter=(g,y)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,y),r._sqlite3_uri_boolean=(g,y,S)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,y,S),r._sqlite3_serialize=(g,y,S,I)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,y,S,I),r._sqlite3_prepare_v2=(g,y,S,I,T)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,y,S,I,T),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,y)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,y),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,y,S,I,T)=>(r._sqlite3_exec=he.sqlite3_exec)(g,y,S,I,T),r._sqlite3_column_int=(g,y)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,y),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,y,S,I)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,y,S,I),r._sqlite3_column_name=(g,y)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,y),r._sqlite3_column_text=(g,y)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,y),r._sqlite3_column_type=(g,y)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,y),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,y,S,I,T,$)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,y,S,I,T,$),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,y)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,y),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,y,S,I)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,y,S,I),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,y)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,y),r._sqlite3_result_error=(g,y,S)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,y,S),r._sqlite3_result_int=(g,y)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,y),r._sqlite3_result_int64=(g,y)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,y),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,y,S,I)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,y,S,I),r._sqlite3_result_subtype=(g,y)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,y),r._sqlite3_result_text=(g,y,S,I)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,y,S,I),r._sqlite3_result_zeroblob=(g,y)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,y),r._sqlite3_result_zeroblob64=(g,y)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,y),r._sqlite3_result_error_code=(g,y)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,y),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,y)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,y),r._sqlite3_vtab_in_next=(g,y)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,y),r._sqlite3_aggregate_context=(g,y)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,y),r._sqlite3_get_auxdata=(g,y)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,y),r._sqlite3_set_auxdata=(g,y,S,I)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,y,S,I),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,y)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,y),r._sqlite3_column_bytes=(g,y)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,y),r._sqlite3_column_double=(g,y)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,y),r._sqlite3_column_value=(g,y)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,y),r._sqlite3_column_decltype=(g,y)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,y),r._sqlite3_bind_blob=(g,y,S,I,T)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,y,S,I,T),r._sqlite3_bind_double=(g,y,S)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,y,S),r._sqlite3_bind_int=(g,y,S)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,y,S),r._sqlite3_bind_int64=(g,y,S)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,y,S),r._sqlite3_bind_null=(g,y)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,y),r._sqlite3_bind_pointer=(g,y,S,I,T)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,y,S,I,T),r._sqlite3_bind_text=(g,y,S,I,T)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,y,S,I,T),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,y)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,y),r._sqlite3_bind_parameter_index=(g,y)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,y),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,y)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,y),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,y,S)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,y,S),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,y,S)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,y,S),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,y,S)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,y,S),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,y,S)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,y,S),r._sqlite3_strglob=(g,y)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,y),r._sqlite3_strlike=(g,y,S)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,y,S),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,y,S,I,T,$)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,y,S,I,T,$),r._sqlite3_create_module=(g,y,S,I)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,y,S,I),r._sqlite3_create_module_v2=(g,y,S,I,T)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,y,S,I,T),r._sqlite3_drop_modules=(g,y)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,y),r._sqlite3_declare_vtab=(g,y)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,y),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,y)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,y),r._sqlite3_vtab_in=(g,y,S)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,y,S),r._sqlite3_vtab_rhs_value=(g,y,S)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,y,S),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,y,S)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,y,S),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,y)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,y),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,y)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,y),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,y)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,y),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,y,S)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,y,S),r._sqlite3_progress_handler=(g,y,S,I)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,y,S,I),r._sqlite3_busy_timeout=(g,y)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,y),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,y,S,I,T,$,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,y,S,I,T,$,fe,me),r._sqlite3_create_function_v2=(g,y,S,I,T,$,fe,me,Ke)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,y,S,I,T,$,fe,me,Ke),r._sqlite3_create_window_function=(g,y,S,I,T,$,fe,me,Ke,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,y,S,I,T,$,fe,me,Ke,tt),r._sqlite3_overload_function=(g,y,S)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,y,S),r._sqlite3_trace_v2=(g,y,S,I)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,y,S,I),r._sqlite3_commit_hook=(g,y,S)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,y,S),r._sqlite3_update_hook=(g,y,S)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,y,S),r._sqlite3_rollback_hook=(g,y,S)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,y,S),r._sqlite3_preupdate_hook=(g,y,S)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,y,S),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,y,S)=>(r._sqlite3_limit=he.sqlite3_limit)(g,y,S),r._sqlite3_open=(g,y)=>(r._sqlite3_open=he.sqlite3_open)(g,y),r._sqlite3_open_v2=(g,y,S,I)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,y,S,I),r._sqlite3_create_collation=(g,y,S,I,T)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,y,S,I,T),r._sqlite3_create_collation_v2=(g,y,S,I,T,$)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,y,S,I,T,$),r._sqlite3_collation_needed=(g,y,S)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,y,S),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,y,S,I,T,$,fe,me,Ke)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,y,S,I,T,$,fe,me,Ke),r._sqlite3_extended_result_codes=(g,y)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,y),r._sqlite3_uri_key=(g,y)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,y),r._sqlite3_uri_int64=(g,y,S)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,y,S),r._sqlite3_db_name=(g,y)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,y),r._sqlite3_db_filename=(g,y)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,y),r._sqlite3_db_readonly=(g,y)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,y),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,y,S,I)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,y,S,I),r._sqlite3session_attach=(g,y)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,y),r._sqlite3session_create=(g,y,S)=>(r._sqlite3session_create=he.sqlite3session_create)(g,y,S),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,y,S)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,y,S),r._sqlite3session_changeset=(g,y,S)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,y,S),r._sqlite3session_changeset_strm=(g,y,S)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,y,S),r._sqlite3session_patchset_strm=(g,y,S)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,y,S),r._sqlite3session_patchset=(g,y,S)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,y,S),r._sqlite3session_enable=(g,y)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,y),r._sqlite3session_indirect=(g,y)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,y),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,y,S)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,y,S),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,y,S)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,y,S),r._sqlite3changeset_start_v2=(g,y,S,I)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,y,S,I),r._sqlite3changeset_start_strm=(g,y,S)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,y,S),r._sqlite3changeset_start_v2_strm=(g,y,S,I)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,y,S,I),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,y,S,I,T)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,y,S,I,T),r._sqlite3changeset_pk=(g,y,S)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,y,S),r._sqlite3changeset_old=(g,y,S)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,y,S),r._sqlite3changeset_new=(g,y,S)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,y,S),r._sqlite3changeset_conflict=(g,y,S)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,y,S),r._sqlite3changeset_fk_conflicts=(g,y)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,y),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,y,S,I)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,y,S,I),r._sqlite3changeset_invert_strm=(g,y,S,I)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,y,S,I),r._sqlite3changeset_apply_v2=(g,y,S,I,T,$,fe,me,Ke)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,y,S,I,T,$,fe,me,Ke),r._sqlite3changeset_apply=(g,y,S,I,T,$)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,y,S,I,T,$),r._sqlite3changeset_apply_v2_strm=(g,y,S,I,T,$,fe,me,Ke)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,y,S,I,T,$,fe,me,Ke),r._sqlite3changeset_apply_strm=(g,y,S,I,T,$)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,y,S,I,T,$),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,y,S)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,y,S),r._sqlite3changegroup_output=(g,y,S)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,y,S),r._sqlite3changegroup_add_strm=(g,y,S)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,y,S),r._sqlite3changegroup_output_strm=(g,y,S)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,y,S),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,y,S,I,T,$)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,y,S,I,T,$),r._sqlite3changeset_concat_strm=(g,y,S,I,T,$)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,y,S,I,T,$),r._sqlite3session_config=(g,y)=>(r._sqlite3session_config=he.sqlite3session_config)(g,y),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,y,S)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,y,S),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,y)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,y),r._sqlite3__wasm_db_vfs=(g,y)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,y),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,y)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,y),r._sqlite3__wasm_db_serialize=(g,y,S,I,T)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,y,S,I,T),r._sqlite3__wasm_vfs_create_file=(g,y,S,I)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,y,S,I),r._sqlite3__wasm_posix_create_file=(g,y,S)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,y,S),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,y)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,y),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,y,S)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,y,S),r._sqlite3__wasm_db_config_ip=(g,y,S,I)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,y,S,I),r._sqlite3__wasm_db_config_pii=(g,y,S,I,T)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,y,S,I,T),r._sqlite3__wasm_db_config_s=(g,y,S)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,y,S),r._sqlite3__wasm_config_i=(g,y)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,y),r._sqlite3__wasm_config_ii=(g,y,S)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,y,S),r._sqlite3__wasm_config_j=(g,y)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,y),r._sqlite3__wasm_qfmt_token=(g,y)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,y),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,y)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,y),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,y)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,y),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,y)=>(r._realloc=he.realloc)(g,y);var $f=(g,y)=>($f=he.emscripten_builtin_memalign)(g,y);r.wasmMemory=R;var yc;de=function g(){yc||Bf(),yc||(de=g)};function Bf(){if(ue>0||(Z(),ue>0))return;function g(){yc||(yc=!0,r.calledRun=!0,!q&&(le(),i(r),r.onRuntimeInitialized?.(),ie()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Bf(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function y(S=globalThis.sqlite3ApiConfig||y.defaultConfig){if(y.sqlite3)return(y.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),y.sqlite3;const I=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},S||{});Object.assign(I,{allocExportName:I.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:I.useStdAlloc?"free":"sqlite3_free",reallocExportName:I.useStdAlloc?"realloc":"sqlite3_realloc"},I),["exports","memory","wasmfsOpfsDir"].forEach(Q=>{typeof I[Q]=="function"&&(I[Q]=I[Q]())}),delete globalThis.sqlite3ApiConfig,delete y.defaultConfig;const T=Object.create(null),$=Object.create(null),fe=Q=>T.sqlite3_js_rc_str&&T.sqlite3_js_rc_str(Q)||"Unknown result code #"+Q,me=Q=>typeof Q=="number"&&Q===(Q|0);class Ke extends Error{constructor(...re){let se;if(re.length)if(me(re[0]))if(se=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(se);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=se||T.SQLITE_ERROR,this.name="SQLite3Error"}}Ke.toss=(...Q)=>{throw new Ke(...Q)};const tt=Ke.toss;I.wasmfsOpfsDir&&!/^\/[^/]+$/.test(I.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=Q=>typeof Q!="bigint"&&Q===(Q|0)&&Q<=0x7fffffff&&Q>=-0x80000000,mt=function Q(re){return Q._max||(Q._max=BigInt("0x7fffffffffffffff"),Q._min=~Q._max),re>=Q._min&&re<=Q._max},Be=Q=>Q>=-2147483647n-1n&&Q<=2147483647n,Oe=function Q(re){return Q._min||(Q._min=Number.MIN_SAFE_INTEGER,Q._max=Number.MAX_SAFE_INTEGER),re>=Q._min&&re<=Q._max},et=Q=>Q&&Q.constructor&&at(Q.constructor.BYTES_PER_ELEMENT)?Q:!1,ve=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ke=Q=>Q.buffer instanceof ve,je=(Q,re,se)=>ke(Q)?Q.slice(re,se):Q.subarray(re,se),Ze=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Ge=Q=>Q&&(Q instanceof Uint8Array||Q instanceof Int8Array||Q instanceof ArrayBuffer),Te=Q=>Ze(Q)||tt("Value is not of a supported TypedArray type."),Qe=new TextDecoder("utf-8"),St=function(Q,re,se){return Qe.decode(je(Q,re,se))},ee=function(Q){return Ge(Q)?St(Q instanceof ArrayBuffer?new Uint8Array(Q):Q):Array.isArray(Q)?Q.join(""):($.isPtr(Q)&&(Q=$.cstrToJs(Q)),Q)};class ce extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=T.SQLITE_NOMEM,this.name="WasmAllocError"}}ce.toss=(...Q)=>{throw new ce(...Q)},Object.assign(T,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(Q,re,se,Le,it,qt,Wt,Xt,lt)=>{},sqlite3_create_function:(Q,re,se,Le,it,qt,Wt,Xt)=>{},sqlite3_create_window_function:(Q,re,se,Le,it,qt,Wt,Xt,lt,_e)=>{},sqlite3_prepare_v3:(Q,re,se,Le,it,qt)=>{},sqlite3_prepare_v2:(Q,re,se,Le,it)=>{},sqlite3_exec:(Q,re,se,Le,it)=>{},sqlite3_randomness:(Q,re)=>{}});const Ee={affirmBindableTypedArray:Te,flexibleString:ee,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Oe,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Ge,isTypedArray:et,typedArrayToString:St,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:ke,toss:function(...Q){throw new Error(Q.join(" "))},toss3:tt,typedArrayPart:je,affirmDbHeader:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re="SQLite format 3";re.length>Q.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let se=0;se<re.length;++se)re.charCodeAt(se)!==Q[se]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));const re=Q.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(Q)}};Object.assign($,{ptrSizeof:I.wasmPtrSizeof||4,ptrIR:I.wasmPtrIR||"i32",bigIntEnabled:!!I.bigIntEnabled,exports:I.exports||tt("Missing API config.exports (WASM module exports)."),memory:I.memory||I.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),$.allocFromTypedArray=function(Q){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q)),Te(Q);const re=$.alloc(Q.byteLength||1);return $.heapForSize(Q.constructor).set(Q.byteLength?Q:[0],re),re};{const Q=I.allocExportName,re=I.deallocExportName,se=I.reallocExportName;for(const Le of[Q,re,se])$.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");$.alloc=function Le(it){return Le.impl(it)||ce.toss("Failed to allocate",it," bytes.")},$.alloc.impl=$.exports[Q],$.realloc=function Le(it,qt){const Wt=Le.impl(it,qt);return qt?Wt||ce.toss("Failed to reallocate",qt," bytes."):0},$.realloc.impl=$.exports[se],$.dealloc=$.exports[re]}$.compileOptionUsed=function Q(re){if(arguments.length){if(Array.isArray(re)){const se={};return re.forEach(Le=>{se[Le]=T.sqlite3_compileoption_used(Le)}),se}else if(typeof re=="object")return Object.keys(re).forEach(se=>{re[se]=T.sqlite3_compileoption_used(se)}),re}else{if(Q._result)return Q._result;Q._opt||(Q._rx=/^([^=]+)=(.+)/,Q._rxInt=/^-?\d+$/,Q._opt=function(Wt,Xt){const lt=Q._rx.exec(Wt);Xt[0]=lt?lt[1]:Wt,Xt[1]=lt?Q._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const se={},Le=[0,0];let it=0,qt;for(;qt=T.sqlite3_compileoption_get(it++);)Q._opt(qt,Le),se[Le[0]]=Le[1];return Q._result=se}return typeof re=="string"?!!T.sqlite3_compileoption_used(re):!1},$.pstack=Object.assign(Object.create(null),{restore:$.exports.sqlite3__wasm_pstack_restore,alloc:function(Q){return typeof Q=="string"&&!(Q=$.sizeofIR(Q))&&ce.toss("Invalid value for pstack.alloc(",arguments[0],")"),$.exports.sqlite3__wasm_pstack_alloc(Q)||ce.toss("Could not allocate",Q,"bytes from the pstack.")},allocChunks:function(Q,re){typeof re=="string"&&!(re=$.sizeofIR(re))&&ce.toss("Invalid size value for allocChunks(",arguments[1],")");const se=$.pstack.alloc(Q*re),Le=[];let it=0,qt=0;for(;it<Q;++it,qt+=re)Le.push(se+qt);return Le},allocPtr:(Q=1,re=!0)=>Q===1?$.pstack.alloc(re?8:$.ptrSizeof):$.pstack.allocChunks(Q,re?8:$.ptrSizeof),call:function(Q){const re=$.pstack.pointer;try{return Q(pe)}finally{$.pstack.restore(re)}}}),Object.defineProperties($.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:$.exports.sqlite3__wasm_pstack_remaining}}),T.sqlite3_randomness=(...Q)=>{if(Q.length===1&&Ee.isTypedArray(Q[0])&&Q[0].BYTES_PER_ELEMENT===1){const re=Q[0];if(re.byteLength===0)return $.exports.sqlite3_randomness(0,0),re;const se=$.pstack.pointer;try{let Le=re.byteLength,it=0;const qt=$.exports.sqlite3_randomness,Wt=$.heap8u(),Xt=Le<512?Le:512,lt=$.pstack.alloc(Xt);do{const _e=Le>Xt?Xt:Le;qt(_e,lt),re.set(je(Wt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{$.pstack.restore(se)}return re}$.exports.sqlite3_randomness(...Q)};let st;if(T.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const Q=I.wasmfsOpfsDir;if(!Q||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return Q&&$.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],Q)===0?st=Q:st=""}catch{return st=""}},T.sqlite3_wasmfs_filename_is_persistent=function(Q){const re=T.sqlite3_wasmfs_opfs_dir();return re&&Q?Q.startsWith(re+"/"):!1},T.sqlite3_js_db_uses_vfs=function(Q,re,se=0){try{const Le=T.sqlite3_vfs_find(re);return Le?Q?Le===T.sqlite3_js_db_vfs(Q,se)?Le:!1:Le===T.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},T.sqlite3_js_vfs_list=function(){const Q=[];let re=T.sqlite3_vfs_find(0);for(;re;){const se=new T.sqlite3_vfs(re);Q.push($.cstrToJs(se.$zName)),re=se.$pNext,se.dispose()}return Q},T.sqlite3_js_db_export=function(Q,re=0){Q=$.xWrap.testConvertArg("sqlite3*",Q),Q||tt("Invalid sqlite3* argument."),$.bigIntEnabled||tt("BigInt64 support is not enabled.");const se=$.scopedAllocPush();let Le;try{const it=$.scopedAlloc(8+$.ptrSizeof),qt=it+8,Wt=re?$.isPtr(re)?re:$.scopedAllocCString(""+re):0;let Xt=$.exports.sqlite3__wasm_db_serialize(Q,Wt,qt,it,0);Xt&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(Xt)),Le=$.peekPtr(qt);const lt=$.peek(it,"i64");return Xt=lt?$.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,Xt}finally{Le&&$.exports.sqlite3_free(Le),$.scopedAllocPop(se)}},T.sqlite3_js_db_vfs=(Q,re=0)=>Ee.sqlite3__wasm_db_vfs(Q,re),T.sqlite3_js_aggregate_context=(Q,re)=>T.sqlite3_aggregate_context(Q,re)||(re?ce.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),T.sqlite3_js_posix_create_file=function(Q,re,se){let Le;re&&$.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=$.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(se)||se<0)&&(se=re.byteLength)):Ke.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(se)||se<0)&&Ke.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(Q,Le,se);it&&Ke.toss("Creation of file failed with sqlite3 result code",T.sqlite3_js_rc_str(it))}finally{$.dealloc(Le)}},T.sqlite3_js_vfs_create_file=function(Q,re,se,Le){I.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;se?($.isPtr(se)?it=se:se instanceof ArrayBuffer&&(se=new Uint8Array(se)),se instanceof Uint8Array?(it=$.allocFromTypedArray(se),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=se.byteLength)):Ke.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&($.dealloc(it),Ke.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const qt=Ee.sqlite3__wasm_vfs_create_file(Q,re,it,Le);qt&&Ke.toss("Creation of file failed with sqlite3 result code",T.sqlite3_js_rc_str(qt))}finally{$.dealloc(it)}},T.sqlite3_js_sql_to_string=Q=>{if(typeof Q=="string")return Q;const re=ee(v);return re===v?void 0:re},Ee.isUIThread()){const Q=function(re){const se=Object.create(null);return se.prefix="kvvfs-"+re,se.stores=[],(re==="session"||re==="")&&se.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&se.stores.push(globalThis.localStorage),se};T.sqlite3_js_kvvfs_clear=function(re=""){let se=0;const Le=Q(re);return Le.stores.forEach(it=>{const qt=[];let Wt;for(Wt=0;Wt<it.length;++Wt){const Xt=it.key(Wt);Xt.startsWith(Le.prefix)&&qt.push(Xt)}qt.forEach(Xt=>it.removeItem(Xt)),se+=qt.length}),se},T.sqlite3_js_kvvfs_size=function(re=""){let se=0;const Le=Q(re);return Le.stores.forEach(it=>{let qt;for(qt=0;qt<it.length;++qt){const Wt=it.key(qt);Wt.startsWith(Le.prefix)&&(se+=Wt.length,se+=it.getItem(Wt).length)}}),se*2}}T.sqlite3_db_config=function(Q,re,...se){switch(this.s||(this.s=$.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=$.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=$.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case T.SQLITE_DBCONFIG_ENABLE_FKEY:case T.SQLITE_DBCONFIG_ENABLE_TRIGGER:case T.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case T.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case T.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case T.SQLITE_DBCONFIG_ENABLE_QPSG:case T.SQLITE_DBCONFIG_TRIGGER_EQP:case T.SQLITE_DBCONFIG_RESET_DATABASE:case T.SQLITE_DBCONFIG_DEFENSIVE:case T.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case T.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case T.SQLITE_DBCONFIG_DQS_DML:case T.SQLITE_DBCONFIG_DQS_DDL:case T.SQLITE_DBCONFIG_ENABLE_VIEW:case T.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case T.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case T.SQLITE_DBCONFIG_STMT_SCANSTATUS:case T.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(Q,re,se[0],se[1]||0);case T.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(Q,re,se[0],se[1],se[2]);case T.SQLITE_DBCONFIG_MAINDBNAME:return this.s(Q,re,se[0]);default:return T.SQLITE_MISUSE}}.bind(Object.create(null)),T.sqlite3_value_to_js=function(Q,re=!0){let se;const Le=T.sqlite3_value_type(Q);switch(Le){case T.SQLITE_INTEGER:$.bigIntEnabled?(se=T.sqlite3_value_int64(Q),Ee.bigIntFitsDouble(se)&&(se=Number(se))):se=T.sqlite3_value_double(Q);break;case T.SQLITE_FLOAT:se=T.sqlite3_value_double(Q);break;case T.SQLITE_TEXT:se=T.sqlite3_value_text(Q);break;case T.SQLITE_BLOB:{const it=T.sqlite3_value_bytes(Q),qt=T.sqlite3_value_blob(Q);it&&!qt&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),se=it?$.heap8u().slice(qt,qt+Number(it)):null;break}case T.SQLITE_NULL:se=null;break;default:re&&tt(T.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),se=void 0}return se},T.sqlite3_values_to_js=function(Q,re,se=!0){let Le;const it=[];for(Le=0;Le<Q;++Le)it.push(T.sqlite3_value_to_js($.peekPtr(re+$.ptrSizeof*Le),se));return it},T.sqlite3_result_error_js=function(Q,re){re instanceof ce?T.sqlite3_result_error_nomem(Q):T.sqlite3_result_error(Q,""+re,-1)},T.sqlite3_result_js=function(Q,re){if(re instanceof Error){T.sqlite3_result_error_js(Q,re);return}try{switch(typeof re){case"undefined":break;case"boolean":T.sqlite3_result_int(Q,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?T.sqlite3_result_int(Q,Number(re)):Ee.bigIntFitsDouble(re)?T.sqlite3_result_double(Q,Number(re)):$.bigIntEnabled?Ee.bigIntFits64(re)?T.sqlite3_result_int64(Q,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let se;Ee.isInt32(re)?se=T.sqlite3_result_int:$.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?se=T.sqlite3_result_int64:se=T.sqlite3_result_double,se(Q,re);break}case"string":{const[se,Le]=$.allocCString(re,!0);T.sqlite3_result_text(Q,se,Le,T.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){T.sqlite3_result_null(Q);break}else if(Ee.isBindableTypedArray(re)){const se=$.allocFromTypedArray(re);T.sqlite3_result_blob(Q,se,re.byteLength,T.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(se){T.sqlite3_result_error_js(Q,se)}},T.sqlite3_column_js=function(Q,re,se=!0){const Le=T.sqlite3_column_value(Q,re);return Le===0?void 0:T.sqlite3_value_to_js(Le,se)};const ae=function(Q,re,se){se=T[se],this.ptr?$.pokePtr(this.ptr,0):this.ptr=$.allocPtr();const Le=se(Q,re,this.ptr);if(Le)return Ke.toss(Le,arguments[2]+"() failed with code "+Le);const it=$.peekPtr(this.ptr);return it?T.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));T.sqlite3_preupdate_new_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_new"),T.sqlite3_preupdate_old_js=(Q,re)=>ae(Q,re,"sqlite3_preupdate_old"),T.sqlite3changeset_new_js=(Q,re)=>ae(Q,re,"sqlite3changeset_new"),T.sqlite3changeset_old_js=(Q,re)=>ae(Q,re,"sqlite3changeset_old");const pe={WasmAllocError:ce,SQLite3Error:Ke,capi:T,util:Ee,wasm:$,config:I,version:Object.create(null),client:void 0,asyncPostInit:async function Q(){if(Q.isReady instanceof Promise)return Q.isReady;let re=y.initializersAsync;delete y.initializersAsync;const se=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=qt=>{throw I.error("an async sqlite3 initializer failed:",qt),qt};if(!re||!re.length)return Q.isReady=se().catch(Le);re=re.map(qt=>qt instanceof Function?async Wt=>qt(pe):qt),re.push(se);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return Q.isReady=it.catch(Le)},scriptInfo:void 0};try{y.initializers.forEach(Q=>{Q(pe)})}catch(Q){throw console.error("sqlite3 bootstrap initializer threw:",Q),Q}return delete y.initializers,y.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(y){y.bigIntEnabled===void 0&&(y.bigIntEnabled=!!globalThis.BigInt64Array);const S=(...ee)=>{throw new Error(ee.join(" "))};y.exports||Object.defineProperty(y,"exports",{enumerable:!0,configurable:!0,get:()=>y.instance&&y.instance.exports});const I=y.pointerIR||"i32",T=y.ptrSizeof=I==="i32"?4:I==="i64"?8:S("Unhandled ptrSizeof:",I),$=Object.create(null);$.heapSize=0,$.memory=null,$.freeFuncIndexes=[],$.scopedAlloc=[],$.utf8Decoder=new TextDecoder,$.utf8Encoder=new TextEncoder("utf-8"),y.sizeofIR=ee=>{switch(ee){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return T;default:return(""+ee).endsWith("*")?T:void 0}};const fe=function(){if(!$.memory)$.memory=y.memory instanceof WebAssembly.Memory?y.memory:y.exports.memory;else if($.heapSize===$.memory.buffer.byteLength)return $;const ee=$.memory.buffer;return $.HEAP8=new Int8Array(ee),$.HEAP8U=new Uint8Array(ee),$.HEAP16=new Int16Array(ee),$.HEAP16U=new Uint16Array(ee),$.HEAP32=new Int32Array(ee),$.HEAP32U=new Uint32Array(ee),y.bigIntEnabled&&($.HEAP64=new BigInt64Array(ee),$.HEAP64U=new BigUint64Array(ee)),$.HEAP32F=new Float32Array(ee),$.HEAP64F=new Float64Array(ee),$.heapSize=ee.byteLength,$};y.heap8=()=>fe().HEAP8,y.heap8u=()=>fe().HEAP8U,y.heap16=()=>fe().HEAP16,y.heap16u=()=>fe().HEAP16U,y.heap32=()=>fe().HEAP32,y.heap32u=()=>fe().HEAP32U,y.heapForSize=function(ee,ce=!0){const Ee=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe();switch(ee){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ce?Ee.HEAP8U:Ee.HEAP8;case 16:return ce?Ee.HEAP16U:Ee.HEAP16;case 32:return ce?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ce?Ee.HEAP64U:Ee.HEAP64;break;default:if(y.bigIntEnabled){if(ee===globalThis.BigUint64Array)return Ee.HEAP64U;if(ee===globalThis.BigInt64Array)return Ee.HEAP64;break}}S("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},y.functionTable=function(){return y.exports.__indirect_function_table},y.functionEntry=function(ee){const ce=y.functionTable();return ee<ce.length?ce.get(ee):void 0},y.jsFuncToWasm=function ee(ce,Ee){if(ee._||(ee._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,Q,re){re<128?pe[Q](re):pe[Q](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const Q=ee._.rxJSig.exec(pe);return Q?Q[2]:pe.substr(1)},letterType:pe=>ee._.sigTypes[pe]||S("Invalid signature letter:",pe),pushSigType:(pe,Q)=>pe.push(ee._.typeCodes[ee._.letterType(Q)])}),typeof ce=="string"){const pe=Ee;Ee=ce,ce=pe}const st=ee._.sigParams(Ee),ae=[1,96];ee._.uleb128Encode(ae,"push",st.length);for(const pe of st)ee._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),ee._.pushSigType(ae,Ee[0])),ee._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ce}}).exports.f};const me=function(ce,Ee,st){if(st&&!$.scopedAlloc.length&&S("No scopedAllocPush() scope is active."),typeof ce=="string"){const re=Ee;Ee=ce,ce=re}(typeof Ee!="string"||!(ce instanceof Function))&&S("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=y.functionTable(),pe=ae.length;let Q;for(;$.freeFuncIndexes.length&&(Q=$.freeFuncIndexes.pop(),ae.get(Q));){Q=null;continue}Q||(Q=pe,ae.grow(1));try{return ae.set(Q,ce),st&&$.scopedAlloc[$.scopedAlloc.length-1].push(Q),Q}catch(re){if(!(re instanceof TypeError))throw Q===pe&&$.freeFuncIndexes.push(pe),re}try{const re=y.jsFuncToWasm(ce,Ee);ae.set(Q,re),st&&$.scopedAlloc[$.scopedAlloc.length-1].push(Q)}catch(re){throw Q===pe&&$.freeFuncIndexes.push(pe),re}return Q};y.installFunction=(ee,ce)=>me(ee,ce,!1),y.scopedInstallFunction=(ee,ce)=>me(ee,ce,!0),y.uninstallFunction=function(ee){if(!ee&&ee!==0)return;const ce=$.freeFuncIndexes,Ee=y.functionTable();ce.push(ee);const st=Ee.get(ee);return Ee.set(ee,null),st},y.peek=function(ce,Ee="i8"){Ee.endsWith("*")&&(Ee=I);const st=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe(),ae=Array.isArray(ce)?[]:void 0;let pe;do{switch(ae&&(ce=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ce>>0];break;case"i16":pe=st.HEAP16[ce>>1];break;case"i32":pe=st.HEAP32[ce>>2];break;case"float":case"f32":pe=st.HEAP32F[ce>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ce>>3]);break;case"i64":if(y.bigIntEnabled){pe=BigInt(st.HEAP64[ce>>3]);break}default:S("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},y.poke=function(ee,ce,Ee="i8"){Ee.endsWith("*")&&(Ee=I);const st=$.memory&&$.heapSize===$.memory.buffer.byteLength?$:fe();for(const ae of Array.isArray(ee)?ee:[ee])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ce;continue;case"i16":st.HEAP16[ae>>1]=ce;continue;case"i32":st.HEAP32[ae>>2]=ce;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ce;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ce;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ce);continue}default:S("Invalid type for poke(): "+Ee)}return this},y.peekPtr=(...ee)=>y.peek(ee.length===1?ee[0]:ee,I),y.pokePtr=(ee,ce=0)=>y.poke(ee,ce,I),y.peek8=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i8"),y.poke8=(ee,ce)=>y.poke(ee,ce,"i8"),y.peek16=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i16"),y.poke16=(ee,ce)=>y.poke(ee,ce,"i16"),y.peek32=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i32"),y.poke32=(ee,ce)=>y.poke(ee,ce,"i32"),y.peek64=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"i64"),y.poke64=(ee,ce)=>y.poke(ee,ce,"i64"),y.peek32f=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"f32"),y.poke32f=(ee,ce)=>y.poke(ee,ce,"f32"),y.peek64f=(...ee)=>y.peek(ee.length===1?ee[0]:ee,"f64"),y.poke64f=(ee,ce)=>y.poke(ee,ce,"f64"),y.getMemValue=y.peek,y.getPtrValue=y.peekPtr,y.setMemValue=y.poke,y.setPtrValue=y.pokePtr,y.isPtr32=ee=>typeof ee=="number"&&ee===(ee|0)&&ee>=0,y.isPtr=y.isPtr32,y.cstrlen=function(ee){if(!ee||!y.isPtr(ee))return null;const ce=fe().HEAP8U;let Ee=ee;for(;ce[Ee]!==0;++Ee);return Ee-ee};const Ke=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(ee,ce,Ee){return $.utf8Decoder.decode(ee.buffer instanceof Ke?ee.slice(ce,Ee):ee.subarray(ce,Ee))};y.cstrToJs=function(ee){const ce=y.cstrlen(ee);return ce?tt(fe().HEAP8U,ee,ee+ce):ce===null?ce:""},y.jstrlen=function(ee){if(typeof ee!="string")return null;const ce=ee.length;let Ee=0;for(let st=0;st<ce;++st){let ae=ee.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|ee.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},y.jstrcpy=function(ee,ce,Ee=0,st=-1,ae=!0){if((!ce||!(ce instanceof Int8Array)&&!(ce instanceof Uint8Array))&&S("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ce.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,Q=ee.length;const re=Ee,se=Ee+st-(ae?1:0);for(;pe<Q&&Ee<se;++pe){let Le=ee.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|ee.charCodeAt(++pe)&1023),Le<=127){if(Ee>=se)break;ce[Ee++]=Le}else if(Le<=2047){if(Ee+1>=se)break;ce[Ee++]=192|Le>>6,ce[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=se)break;ce[Ee++]=224|Le>>12,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}else{if(Ee+3>=se)break;ce[Ee++]=240|Le>>18,ce[Ee++]=128|Le>>12&63,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}}return ae&&(ce[Ee++]=0),Ee-re},y.cstrncpy=function(ee,ce,Ee){if((!ee||!ce)&&S("cstrncpy() does not accept NULL strings."),Ee<0)Ee=y.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=y.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ce+ae]);++ae)st[ee+ae]=pe;return ae<Ee&&(st[ee+ae++]=0),ae},y.jstrToUintArray=(ee,ce=!1)=>$.utf8Encoder.encode(ce?ee+"\0":ee);const at=(ee,ce)=>{(!(ee.alloc instanceof Function)||!(ee.dealloc instanceof Function))&&S("Object is missing alloc() and/or dealloc() function(s)","required by",ce+"().")},mt=function(ee,ce,Ee,st){if(at(y,st),typeof ee!="string")return null;{const ae=$.utf8Encoder.encode(ee),pe=Ee(ae.length+1),Q=fe().HEAP8U;return Q.set(ae,pe),Q[pe+ae.length]=0,ce?[pe,ae.length]:pe}};y.allocCString=(ee,ce=!1)=>mt(ee,ce,y.alloc,"allocCString()"),y.scopedAllocPush=function(){at(y,"scopedAllocPush");const ee=[];return $.scopedAlloc.push(ee),ee},y.scopedAllocPop=function(ee){at(y,"scopedAllocPop");const ce=arguments.length?$.scopedAlloc.indexOf(ee):$.scopedAlloc.length-1;ce<0&&S("Invalid state object for scopedAllocPop()."),arguments.length===0&&(ee=$.scopedAlloc[ce]),$.scopedAlloc.splice(ce,1);for(let Ee;Ee=ee.pop();)y.functionEntry(Ee)?y.uninstallFunction(Ee):y.dealloc(Ee)},y.scopedAlloc=function(ee){$.scopedAlloc.length||S("No scopedAllocPush() scope is active.");const ce=y.alloc(ee);return $.scopedAlloc[$.scopedAlloc.length-1].push(ce),ce},Object.defineProperty(y.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>$.scopedAlloc.length,set:()=>S("The 'active' property is read-only.")}),y.scopedAllocCString=(ee,ce=!1)=>mt(ee,ce,y.scopedAlloc,"scopedAllocCString()");const Be=function(ee,ce){const Ee=y[ee?"scopedAlloc":"alloc"]((ce.length+1)*y.ptrSizeof);let st=0;return ce.forEach(ae=>{y.pokePtr(Ee+y.ptrSizeof*st++,y[ee?"scopedAllocCString":"allocCString"](""+ae))}),y.pokePtr(Ee+y.ptrSizeof*st,0),Ee};y.scopedAllocMainArgv=ee=>Be(!0,ee),y.allocMainArgv=ee=>Be(!1,ee),y.cArgvToJs=(ee,ce)=>{const Ee=[];for(let st=0;st<ee;++st){const ae=y.peekPtr(ce+y.ptrSizeof*st);Ee.push(ae?y.cstrToJs(ae):null)}return Ee},y.scopedAllocCall=function(ee){y.scopedAllocPush();try{return ee()}finally{y.scopedAllocPop()}};const Oe=function(ee,ce,Ee){at(y,Ee);const st=ce?"i64":I;let ae=y[Ee](ee*(ce?8:T));if(y.poke(ae,0,st),ee===1)return ae;const pe=[ae];for(let Q=1;Q<ee;++Q)ae+=ce?8:T,pe[Q]=ae,y.poke(ae,0,st);return pe};y.allocPtr=(ee=1,ce=!0)=>Oe(ee,ce,"alloc"),y.scopedAllocPtr=(ee=1,ce=!0)=>Oe(ee,ce,"scopedAlloc"),y.xGet=function(ee){return y.exports[ee]||S("Cannot find exported symbol:",ee)};const et=(ee,ce)=>S(ee+"() requires",ce,"argument(s).");y.xCall=function(ee,...ce){const Ee=ee instanceof Function?ee:y.xGet(ee);return Ee instanceof Function||S("Exported symbol",ee,"is not a function."),Ee.length!==ce.length&&et(Ee===ee?Ee.name:ee,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ce)},$.xWrap=Object.create(null),$.xWrap.convert=Object.create(null),$.xWrap.convert.arg=new Map,$.xWrap.convert.result=new Map;const ve=$.xWrap.convert.arg,ke=$.xWrap.convert.result;y.bigIntEnabled&&ve.set("i64",ee=>BigInt(ee));const je=I==="i32"?ee=>ee|0:ee=>BigInt(ee)|BigInt(0);ve.set("i32",je).set("i16",ee=>(ee|0)&65535).set("i8",ee=>(ee|0)&255).set("f32",ee=>Number(ee).valueOf()).set("float",ve.get("f32")).set("f64",ve.get("f32")).set("double",ve.get("f64")).set("int",ve.get("i32")).set("null",ee=>ee).set(null,ve.get("null")).set("**",je).set("*",je),ke.set("*",je).set("pointer",je).set("number",ee=>Number(ee)).set("void",ee=>{}).set("null",ee=>ee).set(null,ke.get("null"));{const ee=["i8","i16","i32","int","f32","float","f64","double"];y.bigIntEnabled&&ee.push("i64");const ce=ve.get(I);for(const Ee of ee)ve.set(Ee+"*",ce),ke.set(Ee+"*",ce),ke.set(Ee,ve.get(Ee)||S("Missing arg converter:",Ee))}const Ze=function(ee){return typeof ee=="string"?y.scopedAllocCString(ee):ee?je(ee):null};ve.set("string",Ze).set("utf8",Ze).set("pointer",Ze),ke.set("string",ee=>y.cstrToJs(ee)).set("utf8",ke.get("string")).set("string:dealloc",ee=>{try{return ee?y.cstrToJs(ee):null}finally{y.dealloc(ee)}}).set("utf8:dealloc",ke.get("string:dealloc")).set("json",ee=>JSON.parse(y.cstrToJs(ee))).set("json:dealloc",ee=>{try{return ee?JSON.parse(y.cstrToJs(ee)):null}finally{y.dealloc(ee)}});const Ge=class{constructor(ee){this.name=ee.name||"unnamed adapter"}convertArg(ee,ce,Ee){S("AbstractArgAdapter must be subclassed.")}};ve.FuncPtrAdapter=class Aa extends Ge{constructor(ce){super(ce),ve.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ce),this.name=ce.name||"unnamed",this.signature=ce.signature,ce.contextKey instanceof Function&&(this.contextKey=ce.contextKey,ce.bindScope||(ce.bindScope="context")),this.bindScope=ce.bindScope||S("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Aa.bindScopes.indexOf(ce.bindScope)<0&&S("Invalid options.bindScope ("+ce.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Aa.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ce.callProxy instanceof Function?ce.callProxy:void 0}contextKey(ce,Ee){return this}contextMap(ce){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ce);return st===void 0&&Ee.set(ce,st=[]),st}convertArg(ce,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ce)return ae[1];if(ce instanceof Function){this.callProxy&&(ce=this.callProxy(ce));const pe=me(ce,this.signature,this.isTransient);if(Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ce),ae){if(ae[1]){Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{$.scopedAlloc[$.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ce,ae[1]=pe}return pe}else if(y.isPtr(ce)||ce===null||ce===void 0){if(ae&&ae[1]&&ae[1]!==ce){Aa.debugFuncInstall&&Aa.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{$.scopedAlloc[$.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ce|0}return ce||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ve.FuncPtrAdapter.warnOnUse=!1,ve.FuncPtrAdapter.debugFuncInstall=!1,ve.FuncPtrAdapter.debugOut=console.debug.bind(console),ve.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Te=ee=>ve.get(ee)||S("Argument adapter not found:",ee),Qe=ee=>ke.get(ee)||S("Result adapter not found:",ee);$.xWrap.convertArg=(ee,...ce)=>Te(ee)(...ce),$.xWrap.convertArgNoCheck=(ee,...ce)=>ve.get(ee)(...ce),$.xWrap.convertResult=(ee,ce)=>ee===null?ce:ee?Qe(ee)(ce):void 0,$.xWrap.convertResultNoCheck=(ee,ce)=>ee===null?ce:ee?ke.get(ee)(ce):void 0,y.xWrap=function(ee,ce,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),y.isPtr(ee)&&(ee=y.functionEntry(ee)||S("Function pointer not found in WASM function table."));const st=ee instanceof Function,ae=st?ee:y.xGet(ee);if(st&&(ee=ae.name||"unnamed function"),Ee.length!==ae.length&&et(ee,ae.length),ce===null&&ae.length===0)return ae;ce!=null&&Qe(ce);for(const Q of Ee)Q instanceof Ge?ve.set(Q,(...re)=>Q.convertArg(...re)):Te(Q);const pe=$.xWrap;return ae.length===0?(...Q)=>Q.length?et(ee,ae.length):pe.convertResult(ce,ae.call(null)):function(...Q){Q.length!==ae.length&&et(ee,ae.length);const re=y.scopedAllocPush();try{let se=0;for(;se<Q.length;++se)Q[se]=pe.convertArgNoCheck(Ee[se],Q[se],Q,se);return pe.convertResultNoCheck(ce,ae.apply(null,Q))}finally{y.scopedAllocPop(re)}}};const St=function(ee,ce,Ee,st,ae,pe){if(typeof Ee=="string"){if(ce===1)return pe.get(Ee);if(ce===2){if(st)st instanceof Function||S(ae,"requires a function argument.");else return delete pe.get(Ee),ee;return pe.set(Ee,st),ee}}S("Invalid arguments to",ae)};return y.xWrap.resultAdapter=function ee(ce,Ee){return St(ee,arguments.length,ce,Ee,"resultAdapter()",ke)},y.xWrap.argAdapter=function ee(ce,Ee){return St(ee,arguments.length,ce,Ee,"argAdapter()",ve)},y.xWrap.FuncPtrAdapter=ve.FuncPtrAdapter,y.xCallWrapped=function(ee,ce,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),y.xWrap(ee,ce,Ee||[]).apply(null,st||[])},y.xWrap.testConvertArg=$.xWrap.convertArg,y.xWrap.testConvertResult=$.xWrap.convertResult,y},globalThis.WhWasmUtilInstaller.yawl=function(y){const S=()=>fetch(y.uri,{credentials:"same-origin"}),I=this,T=function(fe){if(y.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Ke=y.wasmUtilTarget;if(Ke.module=fe.module,Ke.instance=fe.instance,Ke.instance.exports.memory||(Ke.memory=y.imports&&y.imports.env&&y.imports.env.memory||me("Missing 'memory' object!")),!Ke.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Ke.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Ke.dealloc=function(at){tt.free(at)}}I(Ke)}return y.onload&&y.onload(fe,y),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(S(),y.imports||{}).then(T)}:function(){return S().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,y.imports||{})).then(T)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function y(S){const I=(...We)=>{throw new Error(We.join(" "))};!(S.heap instanceof WebAssembly.Memory)&&!(S.heap instanceof Function)&&I("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){S[We]instanceof Function||I("Config option '"+We+"' must be a function.")});const T=y,$=S.heap instanceof Function?S.heap:()=>new Uint8Array(S.heap.buffer),fe=S.alloc,me=S.dealloc,Ke=S.log||console.log.bind(console),tt=S.memberPrefix||"",at=S.memberSuffix||"",mt=S.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!S.bigIntEnabled,Be=globalThis.BigInt,Oe=globalThis.BigInt64Array,et=S.ptrSizeof||4,ve=S.ptrIR||"i32";T.debugFlags||(T.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const bt=function wt(Nt){return arguments.length===0?wt.__flags:(Nt<0?(delete wt.__flags.getter,delete wt.__flags.setter,delete wt.__flags.alloc,delete wt.__flags.dealloc):(wt.__flags.getter=(1&Nt)!==0,wt.__flags.setter=(2&Nt)!==0,wt.__flags.alloc=(4&Nt)!==0,wt.__flags.dealloc=(8&Nt)!==0),wt._flags)};return Object.defineProperty(bt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||bt(0),bt},T.debugFlags=T.__makeDebugFlags());const ke=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),je=We=>We[1]==="(",Ze=We=>We==="P",Ge=We=>je(We)?"p":We[0],Te=function(We){switch(Ge(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ve;case"j":return"i64";case"f":return"float";case"d":return"double"}I("Unhandled signature IR:",We)},Qe=Oe?()=>!0:()=>I("BigInt64Array is not available."),St=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Qe()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Qe()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}I("Unhandled DataView getter for signature:",We)},ee=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Qe()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Qe()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}I("Unhandled DataView setter for signature:",We)},ce=function(We){switch(Ge(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Qe()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Qe()&&Be}break}I("Unhandled DataView set wrapper for signature:",We)},Ee=(We,bt)=>We+"::"+bt,st=function(We,bt){return()=>I(Ee(We,bt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",Q=function(We,bt,wt){if(wt||(wt=ae.get(bt)),wt){if(ae.delete(bt),Array.isArray(bt.ondispose)){let Nt;for(;Nt=bt.ondispose.shift();)try{Nt instanceof Function?Nt.call(bt):Nt instanceof zt?Nt.dispose():typeof Nt=="number"&&me(Nt)}catch(wn){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",wn)}}else if(bt.ondispose instanceof Function)try{bt.ondispose()}catch(Nt){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",Nt)}delete bt.ondispose,We.debugFlags.__flags.dealloc&&Ke("debug.dealloc:",bt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),bt[pe]||me(wt)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),se=function(We,bt,wt){let Nt=!wt;wt?Object.defineProperty(bt,pe,re(wt)):(wt=fe(We.structInfo.sizeof),wt||I("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Ke("debug.alloc:",Nt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),Nt&&$().fill(0,wt,wt+We.structInfo.sizeof),ae.set(bt,wt)}catch(wn){throw Q(We,bt,wt),wn}},Le=function(){const We=this.pointer;return We?new Uint8Array($().slice(We,We+this.structInfo.sizeof)):null},qt=re(We=>tt+We+at),Wt=function(We,bt,wt=!0){let Nt=We.members[bt];if(!Nt&&(tt||at)){for(const wn of Object.values(We.members))if(wn.key===bt){Nt=wn;break}!Nt&&wt&&I(Ee(We.name,bt),"is not a mapped struct member.")}return Nt},Xt=function We(bt,wt,Nt=!1){We._||(We._=Kn=>Kn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const wn=Wt(bt.structInfo,wt,!0);return Nt?We._(wn.signature):wn.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>I("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const bt of Object.keys(this.structInfo.members))We.push(this.memberKey(bt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Mt=function(We,bt,wt){return Pe.decode(We.buffer instanceof pt?We.slice(bt,wt):We.subarray(bt,wt))},tn=function(We,bt,wt=!1){const Nt=Wt(We.structInfo,bt,wt);return Nt&&Nt.signature.length===1&&Nt.signature[0]==="s"?Nt:!1},qe=function(We){We.signature!=="s"&&I("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(bt,wt){const Nt=Wt(bt.structInfo,wt,!0);qe(Nt);const wn=bt[Nt.key];if(!wn)return null;let Kn=wn;const Wn=$();for(;Wn[Kn]!==0;++Kn);return wn===Kn?"":Mt(Wn,wn,Kn)},dt=function(We,...bt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...bt)},It=function(We){const bt=ot.encode(We),wt=fe(bt.length+1);wt||I("Allocation error while duplicating string:",We);const Nt=$();return Nt.set(bt,wt),Nt[wt+bt.length]=0,wt},xt=function(We,bt,wt){const Nt=Wt(We.structInfo,bt,!0);qe(Nt);const wn=It(wt);return We[Nt.key]=wn,dt(We,wn),We},zt=function(bt,wt){arguments[2]!==re&&I("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(bt),structInfo:re(wt)})};zt.prototype=Object.create(null,{dispose:re(function(){Q(this.constructor,this)}),lookupMember:re(function(We,bt=!0){return Wt(this.structInfo,We,bt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,bt=!0){return tn(this,We,bt)}),memberKey:qt,memberKeys:_e,memberSignature:re(function(We,bt=!1){return Xt(this,We,bt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,bt){return xt(this,We,bt)})}),Object.assign(zt.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(zt,{allocCString:re(It),isA:re(We=>We instanceof zt),hasExternalPointer:re(We=>We instanceof zt&&!!We[pe]),memberKey:qt});const vn=We=>Number.isFinite(We)||We instanceof(Be||Number),At=function We(bt,wt,Nt){if(!We._){We._={getters:{},setters:{},sw:{}};const ui=["i","c","C","p","P","s","f","d","v()"];mt&&ui.push("j"),ui.forEach(function(Hs){We._.getters[Hs]=St(Hs),We._.setters[Hs]=ee(Hs),We._.sw[Hs]=ce(Hs)});const yx=/^[ipPsjfdcC]$/,bx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Hs,vx,Mm,zf){Object.prototype.hasOwnProperty.call(Hs,Mm)&&I(Hs.structName,"already has a property named",Mm+"."),yx.test(zf)||bx.test(zf)||I("Malformed signature for",Ee(Hs.structName,vx)+":",zf)}}const wn=bt.memberKey(wt);We.sigCheck(bt.prototype,wt,wn,Nt.signature),Nt.key=wn,Nt.name=wt;const Kn=Ge(Nt.signature),Wn=Ee(bt.prototype.structName,wn),Hn=bt.prototype.debugFlags.__flags,ya=Object.create(null);ya.configurable=!1,ya.enumerable=!1,ya.get=function(){Hn.getter&&Ke("debug.getter:",We._.getters[Kn],"for",Te(Kn),Wn,"@",this.pointer,"+",Nt.offset,"sz",Nt.sizeof);let ui=new DataView($().buffer,this.pointer+Nt.offset,Nt.sizeof)[We._.getters[Kn]](0,ke);return Hn.getter&&Ke("debug.getter:",Wn,"result =",ui),ui},Nt.readOnly?ya.set=st(bt.prototype.structName,wn):ya.set=function(ui){if(Hn.setter&&Ke("debug.setter:",We._.setters[Kn],"for",Te(Kn),Wn,"@",this.pointer,"+",Nt.offset,"sz",Nt.sizeof,ui),this.pointer||I("Cannot set struct property on disposed instance."),ui===null)ui=0;else for(;!vn(ui);){if(Ze(Nt.signature)&&ui instanceof zt){ui=ui.pointer||0,Hn.setter&&Ke("debug.setter:",Wn,"resolved to",ui);break}I("Invalid value for pointer-type",Wn+".")}new DataView($().buffer,this.pointer+Nt.offset,Nt.sizeof)[We._.setters[Kn]](0,We._.sw[Kn](ui),ke)},Object.defineProperty(bt.prototype,wn,ya)},Sr=function We(bt,wt){arguments.length===1?(wt=bt,bt=wt.name):wt.name||(wt.name=bt),bt||I("Struct name is required.");let Nt=!1;Object.keys(wt.members).forEach(Wn=>{const Hn=wt.members[Wn];Hn.sizeof?Hn.sizeof===1?Hn.signature==="c"||Hn.signature==="C"||I("Unexpected sizeof==1 member",Ee(wt.name,Wn),"with signature",Hn.signature):(Hn.sizeof%4!==0&&(console.warn("Invalid struct member description =",Hn,"from",wt),I(bt,"member",Wn,"sizeof is not aligned. sizeof="+Hn.sizeof)),Hn.offset%4!==0&&(console.warn("Invalid struct member description =",Hn,"from",wt),I(bt,"member",Wn,"offset is not aligned. offset="+Hn.offset))):I(bt,"member",Wn,"is missing sizeof."),(!Nt||Nt.offset<Hn.offset)&&(Nt=Hn)}),Nt?wt.sizeof<Nt.offset+Nt.sizeof&&I("Invalid struct config:",bt,"max member offset ("+Nt.offset+") ","extends past end of struct (sizeof="+wt.sizeof+")."):I("No member property descriptions found.");const wn=re(T.__makeDebugFlags(We.debugFlags)),Kn=function Wn(Hn){this instanceof Wn?arguments.length?((Hn!==(Hn|0)||Hn<=0)&&I("Invalid pointer value for",bt,"constructor."),se(Wn,this,Hn)):se(Wn,this):I("The",bt,"constructor may only be called via 'new'.")};return Object.defineProperties(Kn,{debugFlags:wn,isA:re(Wn=>Wn instanceof Kn),memberKey:qt,memberKeys:_e,methodInfoForKey:re(function(Wn){}),structInfo:re(wt),structName:re(bt)}),Kn.prototype=new zt(bt,wt,re),Object.defineProperties(Kn.prototype,{debugFlags:wn,constructor:re(Kn)}),Object.keys(wt.members).forEach(Wn=>At(Kn,Wn,wt.members[Wn])),Kn};return Sr.StructType=zt,Sr.config=S,Sr.allocCString=It,Sr.debugFlags||(Sr.debugFlags=T.__makeDebugFlags(T.debugFlags)),Sr},globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ve)=>{throw new Error(ve.join(" "))};y.SQLite3Error.toss;const I=y.capi,T=y.wasm,$=y.util;if(globalThis.WhWasmUtilInstaller(T),delete globalThis.WhWasmUtilInstaller,T.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new T.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ve=>{let ke;return(je,Ze,Ge,Te)=>{try{const Qe=T.cArgvToJs(Ze,Ge);return ke||(ke=T.cArgvToJs(Ze,Te)),ve(Qe,ke)|0}catch(Qe){return Qe.resultCode||I.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new T.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ve,ke)=>ve[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new T.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ve,ke)=>ve[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],T.exports.sqlite3_progress_handler&&T.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new T.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ve,ke)=>ve[0]}),"*"]]),T.exports.sqlite3_stmt_explain&&T.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),T.exports.sqlite3_set_authorizer&&T.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ve,ke)=>ve[0],callProxy:ve=>(ke,je,Ze,Ge,Te,Qe)=>{try{return Ze=Ze&&T.cstrToJs(Ze),Ge=Ge&&T.cstrToJs(Ge),Te=Te&&T.cstrToJs(Te),Qe=Qe&&T.cstrToJs(Qe),ve(ke,je,Ze,Ge,Te,Qe)||0}catch(St){return St.resultCode||I.SQLITE_ERROR}}}),"*"]]),T.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,je,Ze,Ge,Te)=>{ve(ke,je,T.cstrToJs(Ze),T.cstrToJs(Ge),Te)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],T.bigIntEnabled&&T.exports.sqlite3_declare_vtab&&T.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),T.bigIntEnabled&&T.exports.sqlite3_preupdate_hook&&T.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ve=>ve[0],callProxy:ve=>(ke,je,Ze,Ge,Te,Qe,St)=>{ve(ke,je,Ze,T.cstrToJs(Ge),T.cstrToJs(Te),Qe,St)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),T.bigIntEnabled&&T.exports.sqlite3changegroup_add&&T.exports.sqlite3session_create&&T.exports.sqlite3_preupdate_hook){const ve={signature:"i(ps)",callProxy:ke=>(je,Ze)=>{try{return ke(je,T.cstrToJs(Ze))|0}catch(Ge){return Ge.resultCode||I.SQLITE_ERROR}}};T.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new T.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new T.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new T.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new T.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new T.xWrap.FuncPtrAdapter({name:"xFilter",...ve,contextKey:(ke,je)=>ke[0]}),"*"]])}T.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],y.StructBinder=globalThis.Jaccwabyt({heap:T.heap8u,alloc:T.alloc,dealloc:T.dealloc,bigIntEnabled:T.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ve=T.xWrap.argAdapter("string");T.xWrap.argAdapter("string:flexible",Te=>ve($.flexibleString(Te))),T.xWrap.argAdapter("string:static",function(Te){return T.isPtr(Te)?Te:(Te=""+Te,this[Te]||(this[Te]=T.allocCString(Te)))}.bind(Object.create(null)));const ke=T.xWrap.argAdapter("*"),je=function(){};T.xWrap.argAdapter("sqlite3_filename",ke)("sqlite3_context*",ke)("sqlite3_value*",ke)("void*",ke)("sqlite3_changegroup*",ke)("sqlite3_changeset_iter*",ke)("sqlite3_session*",ke)("sqlite3_stmt*",Te=>ke(Te instanceof(y?.oo1?.Stmt||je)?Te.pointer:Te))("sqlite3*",Te=>ke(Te instanceof(y?.oo1?.DB||je)?Te.pointer:Te))("sqlite3_vfs*",Te=>typeof Te=="string"?I.sqlite3_vfs_find(Te)||y.SQLite3Error.toss(I.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",Te):ke(Te instanceof(I.sqlite3_vfs||je)?Te.pointer:Te)),T.exports.sqlite3_declare_vtab&&T.xWrap.argAdapter("sqlite3_index_info*",Te=>ke(Te instanceof(I.sqlite3_index_info||je)?Te.pointer:Te))("sqlite3_module*",Te=>ke(Te instanceof(I.sqlite3_module||je)?Te.pointer:Te));const Ze=T.xWrap.resultAdapter("*");T.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),T.exports.sqlite3_step.length===0&&(T.xWrap.doArgcCheck=!1,y.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const Te of T.bindingSignatures)I[Te[0]]=T.xWrap.apply(null,Te);for(const Te of T.bindingSignatures.wasmInternal)$[Te[0]]=T.xWrap.apply(null,Te);const Ge=function(Te){return()=>S(Te+"() is unavailable due to lack","of BigInt support in this build.")};for(const Te of T.bindingSignatures.int64)I[Te[0]]=T.bigIntEnabled?T.xWrap.apply(null,Te):Ge(Te[0]);if(delete T.bindingSignatures,T.exports.sqlite3__wasm_db_error){const Te=T.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");$.sqlite3__wasm_db_error=function(Qe,St,ee){return St instanceof y.WasmAllocError?(St=I.SQLITE_NOMEM,ee=0):St instanceof Error&&(ee=ee||""+St,St=St.resultCode||I.SQLITE_ERROR),Qe?Te(Qe,St,ee):St}}else $.sqlite3__wasm_db_error=function(Te,Qe,St){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Qe}}{const ve=T.xCall("sqlite3__wasm_enum_json");ve||S("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),T.ctype=JSON.parse(T.cstrToJs(ve));const ke=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];T.bigIntEnabled&&ke.push("serialize","session","vtab");for(const Ge of ke)for(const Te of Object.entries(T.ctype[Ge]))I[Te[0]]=Te[1];T.functionEntry(I.SQLITE_WASM_DEALLOC)||S("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+I.SQLITE_WASM_DEALLOC+").");const je=Object.create(null);for(const Ge of["resultCodes"])for(const Te of Object.entries(T.ctype[Ge]))je[Te[1]]=Te[0];I.sqlite3_js_rc_str=Ge=>je[Ge];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!$.isUIThread(),sqlite3_index_info:!T.bigIntEnabled,sqlite3_index_constraint:!T.bigIntEnabled,sqlite3_index_orderby:!T.bigIntEnabled,sqlite3_index_constraint_usage:!T.bigIntEnabled});for(const Ge of T.ctype.structs)Ze[Ge.name]||(I[Ge.name]=y.StructBinder(Ge));if(I.sqlite3_index_info){for(const Ge of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])I.sqlite3_index_info[Ge]=I[Ge],delete I[Ge];I.sqlite3_vtab_config=T.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(ve,ke,je)=>$.sqlite3__wasm_db_error(ve,I.SQLITE_MISUSE,ke+"() requires "+je+" argument"+(je===1?"":"s")+"."),me=ve=>$.sqlite3__wasm_db_error(ve,I.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Ke=ve=>T.xWrap.argAdapter("sqlite3*")(ve),tt=ve=>T.isPtr(ve)?T.cstrToJs(ve):ve,at=function(ve,ke){ve=Ke(ve);let je=this.dbMap.get(ve);if(ke)!je&&ke>0&&this.dbMap.set(ve,je=Object.create(null));else return this.dbMap.delete(ve),je;return je}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(ve,ke){const je=at(ve,1);je.collation||(je.collation=new Set),je.collation.add(tt(ke).toLowerCase())},at._addUDF=function(ve,ke,je,Ze){ke=tt(ke).toLowerCase();let Ge=Ze.get(ke);Ge||Ze.set(ke,Ge=new Set),Ge.add(je<0?-1:je)},at.addFunction=function(ve,ke,je){const Ze=at(ve,1);Ze.udf||(Ze.udf=new Map),this._addUDF(ve,ke,je,Ze.udf)},T.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(ve,ke,je){const Ze=at(ve,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(ve,ke,je,Ze.wudf)}),at.cleanup=function(ve){ve=Ke(ve);const ke=[ve];for(const Ge of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const Te=T.exports[Ge];if(Te){ke.length=Te.length;try{I[Ge](...ke)}catch(Qe){y.config.warn("close-time call of",Ge+"(",ke,") threw:",Qe)}}}const je=at(ve,0);if(!je)return;if(je.collation){for(const Ge of je.collation)try{I.sqlite3_create_collation_v2(ve,Ge,I.SQLITE_UTF8,0,0,0)}catch{}delete je.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Ge=Ze?je.wudf:je.udf;if(!Ge)continue;const Te=Ze?I.sqlite3_create_window_function:I.sqlite3_create_function_v2;for(const Qe of Ge){const St=Qe[0],ee=Qe[1],ce=[ve,St,0,I.SQLITE_UTF8,0,0,0,0,0];Ze&&ce.push(0);for(const Ee of ee)try{ce[2]=Ee,Te.apply(null,ce)}catch{}ee.clear()}Ge.clear()}delete je.udf,delete je.wudf};{const ve=T.xWrap("sqlite3_close_v2","int","sqlite3*");I.sqlite3_close_v2=function(ke){if(arguments.length!==1)return fe(ke,"sqlite3_close_v2",1);if(ke)try{at.cleanup(ke)}catch{}return ve(ke)}}if(I.sqlite3session_create){const ve=T.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);I.sqlite3session_delete=function(ke){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);ke&&I.sqlite3session_table_filter(ke,0,0),ve(ke)}}{const ve=(je,Ze)=>"argv["+Ze+"]:"+je[0]+":"+T.cstrToJs(je[1]).toLowerCase(),ke=T.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new T.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ve}),new T.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ve})]);I.sqlite3_create_collation_v2=function(je,Ze,Ge,Te,Qe,St){if(arguments.length!==6)return fe(je,"sqlite3_create_collation_v2",6);if(!(Ge&15))Ge|=I.SQLITE_UTF8;else if(I.SQLITE_UTF8!==(Ge&15))return me(je);try{const ee=ke(je,Ze,Ge,Te,Qe,St);return ee===0&&Qe instanceof Function&&at.addCollation(je,Ze),ee}catch(ee){return $.sqlite3__wasm_db_error(je,ee)}},I.sqlite3_create_collation=(je,Ze,Ge,Te,Qe)=>arguments.length===5?I.sqlite3_create_collation_v2(je,Ze,Ge,Te,Qe,0):fe(je,"sqlite3_create_collation",5)}{const ve=function(Ge,Te){return Ge[0]+":"+(Ge[2]<0?-1:Ge[2])+":"+Te+":"+T.cstrToJs(Ge[1]).toLowerCase()},ke=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(Te,Qe,St)=>{try{Ge(Te,...I.sqlite3_values_to_js(Qe,St))}catch(ee){I.sqlite3_result_error_js(Te,ee)}}},xFinalAndValue:{signature:"v(p)",contextKey:ve,callProxy:Ge=>Te=>{try{I.sqlite3_result_js(Te,Ge(Te))}catch(Qe){I.sqlite3_result_error_js(Te,Qe)}}},xFunc:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(Te,Qe,St)=>{try{I.sqlite3_result_js(Te,Ge(Te,...I.sqlite3_values_to_js(Qe,St)))}catch(ee){I.sqlite3_result_error_js(Te,ee)}}},xDestroy:{signature:"v(p)",contextKey:ve,callProxy:Ge=>Te=>{try{Ge(Te)}catch(Qe){console.error("UDF xDestroy method threw:",Qe)}}}}),je=T.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new T.xWrap.FuncPtrAdapter({name:"xFunc",...ke.xFunc}),new T.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new T.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new T.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]),Ze=T.exports.sqlite3_create_window_function?T.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new T.xWrap.FuncPtrAdapter({name:"xStep",...ke.xInverseAndStep}),new T.xWrap.FuncPtrAdapter({name:"xFinal",...ke.xFinalAndValue}),new T.xWrap.FuncPtrAdapter({name:"xValue",...ke.xFinalAndValue}),new T.xWrap.FuncPtrAdapter({name:"xInverse",...ke.xInverseAndStep}),new T.xWrap.FuncPtrAdapter({name:"xDestroy",...ke.xDestroy})]):void 0;I.sqlite3_create_function_v2=function Ge(Te,Qe,St,ee,ce,Ee,st,ae,pe){if(Ge.length!==arguments.length)return fe(Te,"sqlite3_create_function_v2",Ge.length);if(!(ee&15))ee|=I.SQLITE_UTF8;else if(I.SQLITE_UTF8!==(ee&15))return me(Te);try{const Q=je(Te,Qe,St,ee,ce,Ee,st,ae,pe);return Q===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(Te,Qe,St),Q}catch(Q){return console.error("sqlite3_create_function_v2() setup threw:",Q),$.sqlite3__wasm_db_error(Te,Q,"Creation of UDF threw: "+Q)}},I.sqlite3_create_function=function Ge(Te,Qe,St,ee,ce,Ee,st,ae){return Ge.length===arguments.length?I.sqlite3_create_function_v2(Te,Qe,St,ee,ce,Ee,st,ae,0):fe(Te,"sqlite3_create_function",Ge.length)},Ze?I.sqlite3_create_window_function=function Ge(Te,Qe,St,ee,ce,Ee,st,ae,pe,Q){if(Ge.length!==arguments.length)return fe(Te,"sqlite3_create_window_function",Ge.length);if(!(ee&15))ee|=I.SQLITE_UTF8;else if(I.SQLITE_UTF8!==(ee&15))return me(Te);try{const re=Ze(Te,Qe,St,ee,ce,Ee,st,ae,pe,Q);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||Q instanceof Function)&&at.addWindowFunc(Te,Qe,St),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),$.sqlite3__wasm_db_error(Te,re,"Creation of UDF threw: "+re)}}:delete I.sqlite3_create_window_function,I.sqlite3_create_function_v2.udfSetResult=I.sqlite3_create_function.udfSetResult=I.sqlite3_result_js,I.sqlite3_create_window_function&&(I.sqlite3_create_window_function.udfSetResult=I.sqlite3_result_js),I.sqlite3_create_function_v2.udfConvertArgs=I.sqlite3_create_function.udfConvertArgs=I.sqlite3_values_to_js,I.sqlite3_create_window_function&&(I.sqlite3_create_window_function.udfConvertArgs=I.sqlite3_values_to_js),I.sqlite3_create_function_v2.udfSetError=I.sqlite3_create_function.udfSetError=I.sqlite3_result_error_js,I.sqlite3_create_window_function&&(I.sqlite3_create_window_function.udfSetError=I.sqlite3_result_error_js)}{const ve=(je,Ze)=>(typeof je=="string"?Ze=-1:$.isSQLableTypedArray(je)?(Ze=je.byteLength,je=$.typedArrayToString(je instanceof ArrayBuffer?new Uint8Array(je):je)):Array.isArray(je)&&(je=je.join(""),Ze=-1),[je,Ze]),ke={basic:T.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:T.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};I.sqlite3_prepare_v3=function je(Ze,Ge,Te,Qe,St,ee){if(je.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",je.length);const[ce,Ee]=ve(Ge,Te);switch(typeof ce){case"string":return ke.basic(Ze,ce,Ee,Qe,St,null);case"number":return ke.full(Ze,ce,Ee,Qe,St,ee);default:return $.sqlite3__wasm_db_error(Ze,I.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},I.sqlite3_prepare_v2=function je(Ze,Ge,Te,Qe,St){return je.length===arguments.length?I.sqlite3_prepare_v3(Ze,Ge,Te,0,Qe,St):fe(Ze,"sqlite3_prepare_v2",je.length)}}{const ve=T.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),ke=T.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);I.sqlite3_bind_text=function je(Ze,Ge,Te,Qe,St){if(je.length!==arguments.length)return fe(I.sqlite3_db_handle(Ze),"sqlite3_bind_text",je.length);if(T.isPtr(Te)||Te===null)return ve(Ze,Ge,Te,Qe,St);Te instanceof ArrayBuffer?Te=new Uint8Array(Te):Array.isArray(pMem)&&(Te=pMem.join(""));let ee,ce;try{if($.isSQLableTypedArray(Te))ee=T.allocFromTypedArray(Te),ce=Te.byteLength;else if(typeof Te=="string")[ee,ce]=T.allocCString(Te);else return $.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),I.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ve(Ze,Ge,ee,ce,I.SQLITE_WASM_DEALLOC)}catch(Ee){return T.dealloc(ee),$.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),Ee)}},I.sqlite3_bind_blob=function je(Ze,Ge,Te,Qe,St){if(je.length!==arguments.length)return fe(I.sqlite3_db_handle(Ze),"sqlite3_bind_blob",je.length);if(T.isPtr(Te)||Te===null)return ke(Ze,Ge,Te,Qe,St);Te instanceof ArrayBuffer?Te=new Uint8Array(Te):Array.isArray(Te)&&(Te=Te.join(""));let ee,ce;try{if($.isBindableTypedArray(Te))ee=T.allocFromTypedArray(Te),ce=Qe>=0?Qe:Te.byteLength;else if(typeof Te=="string")[ee,ce]=T.allocCString(Te);else return $.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),I.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return ke(Ze,Ge,ee,ce,I.SQLITE_WASM_DEALLOC)}catch(Ee){return T.dealloc(ee),$.sqlite3__wasm_db_error(I.sqlite3_db_handle(Ze),Ee)}}}I.sqlite3_config=function(ve,...ke){if(arguments.length<2)return I.SQLITE_MISUSE;switch(ve){case I.SQLITE_CONFIG_COVERING_INDEX_SCAN:case I.SQLITE_CONFIG_MEMSTATUS:case I.SQLITE_CONFIG_SMALL_MALLOC:case I.SQLITE_CONFIG_SORTERREF_SIZE:case I.SQLITE_CONFIG_STMTJRNL_SPILL:case I.SQLITE_CONFIG_URI:return T.exports.sqlite3__wasm_config_i(ve,ke[0]);case I.SQLITE_CONFIG_LOOKASIDE:return T.exports.sqlite3__wasm_config_ii(ve,ke[0],ke[1]);case I.SQLITE_CONFIG_MEMDB_MAXSIZE:return T.exports.sqlite3__wasm_config_j(ve,ke[0]);case I.SQLITE_CONFIG_GETMALLOC:case I.SQLITE_CONFIG_GETMUTEX:case I.SQLITE_CONFIG_GETPCACHE2:case I.SQLITE_CONFIG_GETPCACHE:case I.SQLITE_CONFIG_HEAP:case I.SQLITE_CONFIG_LOG:case I.SQLITE_CONFIG_MALLOC:case I.SQLITE_CONFIG_MMAP_SIZE:case I.SQLITE_CONFIG_MULTITHREAD:case I.SQLITE_CONFIG_MUTEX:case I.SQLITE_CONFIG_PAGECACHE:case I.SQLITE_CONFIG_PCACHE2:case I.SQLITE_CONFIG_PCACHE:case I.SQLITE_CONFIG_PCACHE_HDRSZ:case I.SQLITE_CONFIG_PMASZ:case I.SQLITE_CONFIG_SERIALIZED:case I.SQLITE_CONFIG_SINGLETHREAD:case I.SQLITE_CONFIG_SQLLOG:case I.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return I.SQLITE_NOTFOUND}};{const ve=new Set;I.sqlite3_auto_extension=function(ke){if(ke instanceof Function)ke=T.installFunction("i(ppp)",ke);else if(arguments.length!==1||!T.isPtr(ke))return I.SQLITE_MISUSE;const je=T.exports.sqlite3_auto_extension(ke);return ke!==arguments[0]&&(je===0?ve.add(ke):T.uninstallFunction(ke)),je},I.sqlite3_cancel_auto_extension=function(ke){return!ke||arguments.length!==1||!T.isPtr(ke)?0:T.exports.sqlite3_cancel_auto_extension(ke)},I.sqlite3_reset_auto_extension=function(){T.exports.sqlite3_reset_auto_extension();for(const ke of ve)T.uninstallFunction(ke);ve.clear()}}const mt=I.sqlite3_vfs_find("kvvfs");if(mt)if($.isUIThread()){const ve=new I.sqlite3_kvvfs_methods(T.exports.sqlite3__wasm_kvvfs_methods());delete I.sqlite3_kvvfs_methods;const ke=T.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,je=T.pstack,Ze=Te=>T.peek(Te)===115?sessionStorage:localStorage,Ge={xRead:(Te,Qe,St,ee)=>{const ce=je.pointer,Ee=T.scopedAllocPush();try{const st=ke(Te,Qe);if(!st)return-3;const ae=T.cstrToJs(st),pe=Ze(Te).getItem(ae);if(!pe)return-1;const Q=pe.length;if(ee<=0)return Q;if(ee===1)return T.poke(St,0),Q;const re=T.scopedAllocCString(pe);return ee>Q+1&&(ee=Q+1),T.heap8u().copyWithin(St,re,re+ee-1),T.poke(St+ee-1,0),ee-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{je.restore(ce),T.scopedAllocPop(Ee)}},xWrite:(Te,Qe,St)=>{const ee=je.pointer;try{const ce=ke(Te,Qe);if(!ce)return 1;const Ee=T.cstrToJs(ce);return Ze(Te).setItem(Ee,T.cstrToJs(St)),0}catch(ce){return console.error("kvstorageWrite()",ce),I.SQLITE_IOERR}finally{je.restore(ee)}},xDelete:(Te,Qe)=>{const St=je.pointer;try{const ee=ke(Te,Qe);return ee?(Ze(Te).removeItem(T.cstrToJs(ee)),0):1}catch(ee){return console.error("kvstorageDelete()",ee),I.SQLITE_IOERR}finally{je.restore(St)}}};for(const Te of Object.keys(Ge))ve[ve.memberKey(Te)]=T.installFunction(ve.memberSignature(Te),Ge[Te])}else I.sqlite3_vfs_unregister(mt);T.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=y.StructBinder,Oe=function ve(ke,je,Ze,Ge=ve.installMethodArgcCheck){if(ke instanceof Be.StructType?!(Ze instanceof Function)&&!T.isPtr(Ze)&&S("Usage errror: expecting a Function or WASM pointer to one."):S("Usage error: target object is-not-a StructType."),arguments.length===1)return(ee,ce)=>ve(ke,ee,ce,Ge);ve.argcProxy||(ve.argcProxy=function(ee,ce,Ee,st){return function(...ae){return Ee.length!==arguments.length&&S("Argument mismatch for",ee.structInfo.name+"::"+ce+": Native signature is:",st),Ee.apply(this,ae)}},ve.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((ee,ce)=>{if(typeof ee=="number")try{T.uninstallFunction(ee)}catch{}}),delete this.ondispose.__removeFuncList)});const Te=ke.memberSignature(je);Te.length<2&&S("Member",je,"does not have a function pointer signature:",Te);const Qe=ke.memberKey(je),St=Ge&&!T.isPtr(Ze)?ve.argcProxy(ke,Qe,Ze,Te):Ze;if(T.isPtr(St))St&&!T.functionEntry(St)&&S("Pointer",St,"is not a WASM function table entry."),ke[Qe]=St;else{const ee=T.installFunction(St,ke.memberSignature(je,!0));ke[Qe]=ee,(!ke.ondispose||!ke.ondispose.__removeFuncList)&&(ke.addOnDispose("ondispose.__removeFuncList handler",ve.removeFuncList),ke.ondispose.__removeFuncList=[]),ke.ondispose.__removeFuncList.push(Qe,ee)}return(ee,ce)=>ve(ke,ee,ce,Ge)};Oe.installMethodArgcCheck=!1;const et=function(ve,ke,je=Oe.installMethodArgcCheck){const Ze=new Map;for(const Ge of Object.keys(ke)){const Te=ke[Ge],Qe=Ze.get(Te);if(Qe){const St=ve.memberKey(Ge);ve[St]=ve[ve.memberKey(Qe)]}else Oe(ve,Ge,Te,je),Ze.set(Te,Ge)}return ve};Be.StructType.prototype.installMethod=function(ke,je,Ze=Oe.installMethodArgcCheck){return arguments.length<3&&ke&&typeof ke=="object"?et(this,...arguments):Oe(this,...arguments)},Be.StructType.prototype.installMethods=function(ve,ke=Oe.installMethodArgcCheck){return et(this,ve,ke)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){y.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ae)=>{throw new y.SQLite3Error(...ae)},I=y.capi,T=y.wasm,$=y.util,fe=new WeakMap,me=new WeakMap,Ke=(ae,pe,Q)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:Q},tt=function(ae,pe){return pe&&(ae instanceof Oe&&(ae=ae.pointer),S(pe,"sqlite3 result code",pe+":",ae?I.sqlite3_errmsg(ae):I.sqlite3_errstr(pe))),arguments[0]},at=T.installFunction("i(ippp)",function(ae,pe,Q,re){I.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",T.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>S("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const Q=ae.normalizeArgs(...pe);let re=Q.filename,se=Q.vfs,Le=Q.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||se&&typeof se!="string"&&typeof se!="number")&&(y.config.error("Invalid DB ctor args",Q,arguments),S("Invalid arguments for DB constructor."));let it=typeof re=="number"?T.cstrToJs(re):re;const qt=ae._name2vfs[it];qt&&(se=qt.vfs,re=it=qt.filename(it));let Wt,Xt=0;Le.indexOf("c")>=0&&(Xt|=I.SQLITE_OPEN_CREATE|I.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(Xt|=I.SQLITE_OPEN_READWRITE),Xt===0&&(Xt|=I.SQLITE_OPEN_READONLY),Xt|=I.SQLITE_OPEN_EXRESCODE;const lt=T.pstack.pointer;try{const _e=T.pstack.allocPtr();let Pe=I.sqlite3_open_v2(re,_e,Xt,se||0);Wt=T.peekPtr(_e),tt(Wt,Pe),I.sqlite3_extended_result_codes(Wt,1),Le.indexOf("t")>=0&&I.sqlite3_trace_v2(Wt,I.SQLITE_TRACE_STMT,at,Wt)}catch(_e){throw Wt&&I.sqlite3_close_v2(Wt),_e}finally{T.pstack.restore(lt)}this.filename=it,fe.set(this,Wt),me.set(this,Object.create(null));try{const _e=I.sqlite3_js_db_vfs(Wt)||S("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,y):tt(Wt,I.sqlite3_exec(Wt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||S("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",Q=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=Q),re};const Oe=function(...ae){Be.apply(this,ae)};Oe.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,T.bigIntEnabled&&(et.bigint=et.number);const ve=function(){et!==arguments[2]&&S(I.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=I.sqlite3_bind_parameter_count(this.pointer)},ke=function(ae){return ae.pointer||S("DB has been closed."),ae},je=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&S("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const Q=Object.create(null);switch(Q.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||$.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?Q.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(Q.opt=pe[0],Q.sql=Q.opt.sql);break;case 2:Q.sql=pe[0],Q.opt=pe[1];break;default:S("Invalid argument count for exec().")}Q.sql=$.flexibleString(Q.sql),typeof Q.sql!="string"&&S("Missing SQL argument or unsupported SQL value type.");const re=Q.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),Q.returnVal=()=>re.saveSql;break;case void 0:case"this":Q.returnVal=()=>ae;break;default:S("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),Q.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":Q.cbArg=(se,Le)=>{Le.columnNames||(Le.columnNames=se.getColumnNames([]));const it=se.get([]),qt=Object.create(null);for(const Wt in Le.columnNames)qt[Le.columnNames[Wt]]=it[Wt];return qt};break;case"array":Q.cbArg=se=>se.get([]);break;case"stmt":Array.isArray(re.resultRows)&&S("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),Q.cbArg=se=>se;break;default:if($.isInt32(re.rowMode)){Q.cbArg=se=>se.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const se=re.rowMode.substr(1);Q.cbArg=Le=>{const it=Le.get(Object.create(null))[se];return it===void 0?S(I.SQLITE_NOTFOUND,"exec(): unknown result column:",se):it};break}S("Invalid rowMode:",re.rowMode)}return Q},Ge=(ae,pe,Q,...re)=>{const se=ae.prepare(pe);try{const Le=se.bind(Q).step()?se.get(...re):void 0;return se.reset(),Le}finally{se.finalize()}},Te=(ae,pe,Q,re)=>ae.exec({sql:pe,bind:Q,rowMode:re,returnValue:"resultRows"});Oe.checkRc=(ae,pe)=>tt(ae,pe),Oe.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return ke(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,Q)=>{if(Q&&Q.pointer)try{Q.finalize()}catch{}}),fe.delete(this),me.delete(this),I.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const Q=ke(this).pointer;return ae?pe?I.sqlite3_total_changes64(Q):I.sqlite3_total_changes(Q):pe?I.sqlite3_changes64(Q):I.sqlite3_changes(Q)},dbFilename:function(ae="main"){return I.sqlite3_db_filename(ke(this).pointer,ae)},dbName:function(ae=0){return I.sqlite3_db_name(ke(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const Q=I.sqlite3_js_db_vfs(ke(this).pointer,ae);if(Q){const re=new I.sqlite3_vfs(Q);try{pe=T.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){ke(this);const pe=T.pstack.pointer;let Q,re;try{Q=T.pstack.alloc(8),Oe.checkRc(this,I.sqlite3_prepare_v2(this.pointer,ae,-1,Q,null)),re=T.peekPtr(Q)}finally{T.pstack.restore(pe)}re||S("Cannot prepare empty SQL.");const se=new ve(this,re,et);return me.get(this)[re]=se,se},exec:function(){ke(this);const ae=Ze(this,arguments);if(!ae.sql)return S("exec() requires an SQL string.");const pe=ae.opt,Q=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let se,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const qt=T.scopedAllocPush(),Wt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const Xt=$.isSQLableTypedArray(ae.sql);let lt=Xt?ae.sql.byteLength:T.jstrlen(ae.sql);const _e=T.scopedAlloc(2*T.ptrSizeof+(lt+1)),Pe=_e+T.ptrSizeof;let ot=Pe+T.ptrSizeof;const pt=ot+lt;for(Xt?T.heap8().set(ae.sql,ot):T.jstrcpy(ae.sql,T.heap8(),ot,lt,!1),T.poke(ot+lt,0);ot&&T.peek(ot,"i8");){T.pokePtr([_e,Pe],0),Oe.checkRc(this,I.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Mt=T.peekPtr(_e);if(ot=T.peekPtr(Pe),lt=pt-ot,!!Mt){if(Wt&&Wt.push(I.sqlite3_sql(Mt).trim()),se=new ve(this,Mt,et),Le&&se.parameterCount&&(se.bind(Le),Le=null),it&&se.columnCount){let tn=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const qe=Object.create(null);for(;se.step();se._lockedByExec=!1){tn++===0&&se.getColumnNames(qe.columnNames=pe.columnNames||[]),se._lockedByExec=!0;const nt=ae.cbArg(se,qe);if(re&&re.push(nt),Q&&Q.call(pe,nt,se)===!1)break}se._lockedByExec=!1}tn===0&&se.getColumnNames(pe.columnNames)}else se.step();se.reset().finalize(),se=null}}}finally{T.scopedAllocPop(qt),se&&(delete se._lockedByExec,se.finalize())}return ae.returnVal()},createFunction:function(pe,Q,re){const se=qe=>qe instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,Q=re.xFunc||0;break;case 2:se(Q)||(re=Q,Q=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&S("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const qt=re.xValue||0,Wt=re.xInverse||0;let Xt;se(Q)?(Xt=!1,(se(Le)||se(it))&&S("Ambiguous arguments: scalar or aggregate?"),Le=it=null):se(Le)?(se(it)||S("Missing xFinal() callback for aggregate or window UDF."),Q=null):se(it)?S("Missing xStep() callback for aggregate or window UDF."):S("Missing function-type properties."),Xt===!1?(se(qt)||se(Wt))&&S("xValue and xInverse are not permitted for non-window UDFs."):se(qt)?(se(Wt)||S("xInverse must be provided if xValue is."),Xt=!0):se(Wt)&&S("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!$.isInt32(lt))&&S("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!se(_e)&&S("xDestroy property must be a function.");let Pe=0;Ke(re,"deterministic")&&(Pe|=I.SQLITE_DETERMINISTIC),Ke(re,"directOnly")&&(Pe|=I.SQLITE_DIRECTONLY),Ke(re,"innocuous")&&(Pe|=I.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=Q||Le,pt=Ke(re,"arity"),Mt=typeof pt=="number"?pt:ot.length?ot.length-1:0;let tn;return Xt?tn=I.sqlite3_create_window_function(this.pointer,pe,Mt,I.SQLITE_UTF8|Pe,lt||0,Le,it,qt,Wt,_e):tn=I.sqlite3_create_function_v2(this.pointer,pe,Mt,I.SQLITE_UTF8|Pe,lt||0,Q,Le,it,_e),Oe.checkRc(this,tn),this},selectValue:function(ae,pe,Q){return Ge(this,ae,pe,0,Q)},selectValues:function(ae,pe,Q){const re=this.prepare(ae),se=[];try{for(re.bind(pe);re.step();)se.push(re.get(0,Q));re.reset()}finally{re.finalize()}return se},selectArray:function(ae,pe){return Ge(this,ae,pe,[])},selectObject:function(ae,pe){return Ge(this,ae,pe,{})},selectArrays:function(ae,pe){return Te(this,ae,pe,"array")},selectObjects:function(ae,pe){return Te(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&S(I.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),ke(this).exec(pe);try{const Q=ae(this);return this.exec("COMMIT"),Q}catch(Q){throw this.exec("ROLLBACK"),Q}},savepoint:function(ae){ke(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Qe=function(ae){return ae.pointer||S("Stmt has been closed."),ae},St=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(T.bigIntEnabled)return pe;default:return $.isBindableTypedArray(ae)?et.blob:void 0}},ee=function(ae){return St(ae)||S("Unsupported bind() argument type:",typeof ae)},ce=function(ae,pe){const Q=typeof pe=="number"?pe:I.sqlite3_bind_parameter_index(ae.pointer,pe);return Q===0||!$.isInt32(Q)?S("Invalid bind() parameter name: "+pe):(Q<1||Q>ae.parameterCount)&&S("Bind index",pe,"is out of range."),Q},Ee=function(ae,pe){return ae._lockedByExec&&S("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,Q,re,se){Ee(Qe(pe),"bind()"),ae._||(ae._tooBigInt=it=>S("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,qt,Wt,Xt){const[lt,_e]=T.allocCString(Wt,!0);return(Xt?I.sqlite3_bind_blob:I.sqlite3_bind_text)(it.pointer,qt,lt,_e,I.SQLITE_WASM_DEALLOC)}}),ee(se),Q=ce(pe,Q);let Le=0;switch(se==null?et.null:re){case et.null:Le=I.sqlite3_bind_null(pe.pointer,Q);break;case et.string:Le=ae._.string(pe,Q,se,!1);break;case et.number:{let it;$.isInt32(se)?it=I.sqlite3_bind_int:typeof se=="bigint"?$.bigIntFits64(se)?T.bigIntEnabled?it=I.sqlite3_bind_int64:$.bigIntFitsDouble(se)?(se=Number(se),it=I.sqlite3_bind_double):ae._tooBigInt(se):ae._tooBigInt(se):(se=Number(se),T.bigIntEnabled&&Number.isInteger(se)?it=I.sqlite3_bind_int64:it=I.sqlite3_bind_double),Le=it(pe.pointer,Q,se);break}case et.boolean:Le=I.sqlite3_bind_int(pe.pointer,Q,se?1:0);break;case et.blob:{if(typeof se=="string"){Le=ae._.string(pe,Q,se,!0);break}else se instanceof ArrayBuffer?se=new Uint8Array(se):$.isBindableTypedArray(se)||S("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=T.alloc(se.byteLength||1);T.heap8().set(se.byteLength?se:[0],it),Le=I.sqlite3_bind_blob(pe.pointer,Q,it,se.byteLength,I.SQLITE_WASM_DEALLOC);break}default:y.config.warn("Unsupported bind() argument type:",se),S("Unsupported bind() argument type: "+typeof se)}return Le&&Oe.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};ve.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=I.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Qe(this),"clearBindings()"),I.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=I.sqlite3_reset(Qe(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Qe(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:S("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||S("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&S("When binding an array, an index argument is not permitted."),pe.forEach((Q,re)=>st(this,re+1,ee(Q),Q)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!$.isBindableTypedArray(pe)?(arguments.length!==1&&S("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(Q=>st(this,Q,ee(pe[Q]),pe[Q])),this):st(this,ae,ee(pe),pe)))},bindAsBlob:function(ae,pe){Qe(this),arguments.length===1&&(pe=ae,ae=1);const Q=ee(pe);return et.string!==Q&&et.blob!==Q&&et.null!==Q&&S("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=I.sqlite3_step(Qe(this).pointer);switch(ae){case I.SQLITE_DONE:return this._mayGet=!1;case I.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,y.config.warn("sqlite3_step() rc=",ae,I.sqlite3_js_rc_str(ae),"SQL =",I.sqlite3_sql(this.pointer)),Oe.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Qe(this)._mayGet||S("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let Q=0;const re=this.columnCount;for(;Q<re;)ae[Q]=this.get(Q++);return ae}else if(ae&&typeof ae=="object"){let Q=0;const re=this.columnCount;for(;Q<re;)ae[I.sqlite3_column_name(this.pointer,Q)]=this.get(Q++);return ae}switch(je(this,ae),pe===void 0?I.sqlite3_column_type(this.pointer,ae):pe){case I.SQLITE_NULL:return null;case I.SQLITE_INTEGER:if(T.bigIntEnabled){const Q=I.sqlite3_column_int64(this.pointer,ae);return Q>=Number.MIN_SAFE_INTEGER&&Q<=Number.MAX_SAFE_INTEGER?Number(Q).valueOf():Q}else{const Q=I.sqlite3_column_double(this.pointer,ae);return(Q>Number.MAX_SAFE_INTEGER||Q<Number.MIN_SAFE_INTEGER)&&S("Integer is out of range for JS integer range: "+Q),$.isInt32(Q)?Q|0:Q}case I.SQLITE_FLOAT:return I.sqlite3_column_double(this.pointer,ae);case I.SQLITE_TEXT:return I.sqlite3_column_text(this.pointer,ae);case I.SQLITE_BLOB:{const Q=I.sqlite3_column_bytes(this.pointer,ae),re=I.sqlite3_column_blob(this.pointer,ae),se=new Uint8Array(Q);return Q&&se.set(T.heap8u().slice(re,re+Q),0),Q&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(se.buffer),se}default:S("Don't know how to translate","type of result column #"+ae+".")}S("Not reached.")},getInt:function(ae){return this.get(ae,I.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,I.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,I.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,I.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,I.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return I.sqlite3_column_name(je(Qe(this),ae).pointer,ae)},getColumnNames:function(ae=[]){je(Qe(this),0);const pe=this.columnCount;for(let Q=0;Q<pe;++Q)ae.push(I.sqlite3_column_name(this.pointer,Q));return ae},getParamIndex:function(ae){return Qe(this).parameterCount?I.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Qe(this).parameterCount?I.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return I.sqlite3_stmt_busy(Qe(this))!==0},isReadOnly:function(){return I.sqlite3_stmt_readonly(Qe(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>S("The pointer property is read-only.")};Object.defineProperty(ve.prototype,"pointer",ae),Object.defineProperty(Oe.prototype,"pointer",ae)}if(Object.defineProperty(ve.prototype,"columnCount",{enumerable:!1,get:function(){return I.sqlite3_column_count(this.pointer)},set:()=>S("The columnCount property is read-only.")}),y.oo1={DB:Oe,Stmt:ve},$.isUIThread()){y.oo1.JsStorageDb=function(pe="session"){const Q=Be.normalizeArgs(...arguments);pe=Q.filename,pe!=="session"&&pe!=="local"&&S("JsStorageDb db name must be one of 'session' or 'local'."),Q.vfs="kvvfs",Be.call(this,Q)};const ae=y.oo1.JsStorageDb;ae.prototype=Object.create(Oe.prototype),ae.clearStorage=I.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(ke(this).filename)},ae.storageSize=I.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(ke(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util;y.initWorker1API=function(){const I=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||I("initWorker1API() must be run from a Worker thread.");const T=this.sqlite3||I("Missing this.sqlite3 object."),$=T.oo1.DB,fe=function(Be){let Oe=me.idMap.get(Be);return Oe||(Oe="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Oe),Oe)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Oe=new $(Be);return this.dbs[fe(Oe)]=Oe,this.dbList.indexOf(Oe)<0&&this.dbList.push(Oe),Oe},close:function(Be,Oe){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,ve=S.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const ke=this.dbList.indexOf(Be);ke>=0&&this.dbList.splice(ke,1),Oe&&et&&ve&&S.sqlite3__wasm_vfs_unlink(ve,et)}},post:function(Be,Oe){Oe&&Oe.length?(globalThis.postMessage(Be,Array.from(Oe)),Oe.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Oe=!0){return this.dbs[Be]||(Oe?I("Unknown (or closed) DB ID:",Be):void 0)}},Ke=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:I("DB is not opened.")},tt=function(Be,Oe=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Oe?Ke(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Oe=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&I("Throwing because of simulateError flag.");const ve=Object.create(null);Oe.vfs=et.vfs,Oe.filename=et.filename||"";const ke=me.open(Oe);return ve.filename=ke.filename,ve.persistent=!!T.capi.sqlite3_js_db_uses_vfs(ke.pointer,"opfs"),ve.dbId=fe(ke),ve.vfs=ke.dbVfsName(),ve},close:function(Be){const Oe=tt(Be,!1),et={filename:Oe&&Oe.filename};if(Oe){const ve=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Oe,ve)}return et},exec:function(Be){const Oe=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Oe.rowMode==="stmt"?I("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Oe.sql||I("'exec' requires input SQL.");const et=tt(Be);(Oe.callback||Array.isArray(Oe.resultRows))&&(et._blobXfer=me.xfer);const ve=Oe.callback;let ke=0;const je=!!Oe.columnNames;typeof ve=="string"&&(je||(Oe.columnNames=[]),Oe.callback=function(Ze,Ge){me.post({type:ve,columnNames:Oe.columnNames,rowNumber:++ke,row:Ze},me.xfer)});try{const Ze=Oe.countChanges?et.changes(!0,Oe.countChanges===64):void 0;et.exec(Oe),Ze!==void 0&&(Oe.changeCount=et.changes(!0,Oe.countChanges===64)-Ze),Oe.callback instanceof Function&&(Oe.callback=ve,me.post({type:ve,columnNames:Oe.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Oe.callback&&(Oe.callback=ve)}return Oe},"config-get":function(){const Be=Object.create(null),Oe=T.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Oe,et)&&(Be[et]=Oe[et])}),Be.version=T.version,Be.vfsList=T.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Oe=tt(Be),et={byteArray:T.capi.sqlite3_js_db_export(Oe.pointer),filename:Oe.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){I("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Oe,et=Be.dbId,ve=Be.type;const ke=performance.now();try{mt.hasOwnProperty(ve)&&mt[ve]instanceof Function?Oe=await mt[ve](Be):I("Unknown db worker message type:",Be.type)}catch(je){ve="error",Oe={operation:Be.type,message:je.message,errorClass:je.name,input:Be},je.stack&&(Oe.stack=typeof je.stack=="string"?je.stack.split(/\n\s*/):je.stack)}et||(et=Oe.dbId||at()),me.post({type:ve,dbId:et,messageId:Be.messageId,workerReceivedTime:ke,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Oe},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:y})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.wasm,I=y.capi,T=y.util.toss3,$=Object.create(null);y.vfs=$,I.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof y.capi.sqlite3_vfs||T("Expecting a sqlite3_vfs-type argument.");const me=I.sqlite3_vfs_register(this,fe?1:0);return me&&T("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==I.sqlite3_vfs_find(this.$zName)&&T("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},$.installVfs=function(fe){let me=0;const Ke=["io","vfs"];for(const tt of Ke){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=S.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||T("Misuse: installVfs() options object requires at least","one of:",Ke),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){if(!y.wasm.exports.sqlite3_declare_vtab)return;const S=y.wasm,I=y.capi,T=y.util.toss3,$=Object.create(null);y.vtab=$;const fe=I.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;S.isPtr(mt)||y.SQLite3Error.toss("Invalid argument to",tt+"()");let Oe=this.get(mt);return Be&&this.delete(mt),Oe}.bind(new Map)},Ke=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Oe=mt();return S.pokePtr(Be,Oe.pointer),Oe},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Oe=mt(Be,!0);Oe&&Oe.dispose()}})};$.xVtab=Ke("xVtab",I.sqlite3_vtab),$.xCursor=Ke("xCursor",I.sqlite3_vtab_cursor),$.xIndexInfo=tt=>new I.sqlite3_index_info(tt),$.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Oe;return mt instanceof y.WasmAllocError?Oe=I.SQLITE_NOMEM:arguments.length>2?Oe=Be:mt instanceof y.SQLite3Error&&(Oe=mt.resultCode),Oe||I.SQLITE_ERROR},$.xError.errorReporter=console.error.bind(console),$.xRowid=(tt,at)=>S.poke(tt,at,"i64"),$.setupModule=function(tt){let at=!1;const mt=this instanceof I.sqlite3_module?this:tt.struct||(at=new I.sqlite3_module);try{const Be=tt.methods||T("Missing 'methods' object.");for(const Oe of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Oe[0],ve=Oe[1];Be[et]===!0?Be[et]=Be[ve]:Be[ve]===!0&&(Be[ve]=Be[et])}if(tt.catchExceptions){const Oe=function(ke,je){return["xConnect","xCreate"].indexOf(ke)>=0?function(Ze,Ge,Te,Qe,St,ee){try{return je(...arguments)||0}catch(ce){return ce instanceof y.WasmAllocError||(S.dealloc(S.peekPtr(ee)),S.pokePtr(ee,S.allocCString(ce.message))),$.xError(ke,ce)}}:function(...Ze){try{return je(...Ze)||0}catch(Ge){return $.xError(ke,Ge)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ve=Object.create(null);for(const ke of et){const je=Be[ke];if(je instanceof Function)ke==="xConnect"&&Be.xCreate===je?ve[ke]=Be.xCreate:ke==="xCreate"&&Be.xConnect===je?ve[ke]=Be.xConnect:ve[ke]=Oe(ke,je);else continue}mt.installMethods(ve,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Oe;typeof tt.iVersion=="number"?Oe=tt.iVersion:mt.$xShadowName?Oe=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Oe=2:Oe=1,mt.$iVersion=Oe}}catch(Be){throw at&&at.dispose(),Be}return mt},I.sqlite3_module.prototype.setupModule=function(tt){return $.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=function I(T){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!T||typeof T!="object")&&(T=Object.create(null));const $=new URL(globalThis.location.href).searchParams;return $.has("opfs-disable")?Promise.resolve(y):(T.verbose===void 0&&(T.verbose=$.has("opfs-verbose")?+$.get("opfs-verbose")||2:1),T.sanityChecks===void 0&&(T.sanityChecks=$.has("opfs-sanity-check")),T.proxyUri===void 0&&(T.proxyUri=I.defaultProxyUri),typeof T.proxyUri=="function"&&(T.proxyUri=T.proxyUri()),new Promise(function(me,Ke){const tt=[y.config.error,y.config.warn,y.config.log],at=(qe,...nt)=>{T.verbose>qe&&tt[qe]("OPFS syncer:",...nt)},mt=(...qe)=>at(2,...qe),Be=(...qe)=>at(1,...qe),Oe=(...qe)=>at(0,...qe),et=y.util.toss,ve=y.capi,ke=y.util,je=y.wasm,Ze=ve.sqlite3_vfs,Ge=ve.sqlite3_file,Te=ve.sqlite3_io_methods,Qe=Object.create(null),St=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Qe.metrics={dump:function(){let qe,nt=0,dt=0,It=0;for(qe in se.opIds){const xt=Le[qe];nt+=xt.count,dt+=xt.time,It+=xt.wait,xt.avgTime=xt.count&&xt.time?xt.time/xt.count:0,xt.avgWait=xt.count&&xt.wait?xt.wait/xt.count:0}y.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+It+" ms of waiting on the async side)"),y.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let qe;const nt=It=>It.count=It.time=It.wait=0;for(qe in se.opIds)nt(Le[qe]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const ee=new Te,ce=new Ze().addOnDispose(()=>ee.dispose());let Ee;const st=qe=>(Ee=!0,ce.dispose(),Ke(qe)),ae=()=>(Ee=!1,me(y)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(qe){Oe("Error initializing OPFS asyncer:",qe),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const Q=ve.sqlite3_vfs_find(null),re=Q?new Ze(Q):null;ee.$iVersion=1,ce.$iVersion=2,ce.$szOsFile=ve.sqlite3_file.structInfo.sizeof,ce.$mxPathname=1024,ce.$zName=je.allocCString("opfs"),ce.$xDlOpen=ce.$xDlError=ce.$xDlSym=ce.$xDlClose=null,ce.addOnDispose("$zName",ce.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const se=Object.create(null);se.verbose=T.verbose,se.littleEndian=(()=>{const qe=new ArrayBuffer(2);return new DataView(qe).setInt16(0,256,!0),new Int16Array(qe)[0]===256})(),se.asyncIdleWaitTime=150,se.asyncS11nExceptions=1,se.fileBufferSize=1024*64,se.sabS11nOffset=se.fileBufferSize,se.sabS11nSize=ce.$mxPathname*2,se.sabIO=new SharedArrayBuffer(se.fileBufferSize+se.sabS11nSize),se.opIds=Object.create(null);const Le=Object.create(null);{let qe=0;se.opIds.whichOp=qe++,se.opIds.rc=qe++,se.opIds.xAccess=qe++,se.opIds.xClose=qe++,se.opIds.xDelete=qe++,se.opIds.xDeleteNoWait=qe++,se.opIds.xFileSize=qe++,se.opIds.xLock=qe++,se.opIds.xOpen=qe++,se.opIds.xRead=qe++,se.opIds.xSleep=qe++,se.opIds.xSync=qe++,se.opIds.xTruncate=qe++,se.opIds.xUnlock=qe++,se.opIds.xWrite=qe++,se.opIds.mkdir=qe++,se.opIds["opfs-async-metrics"]=qe++,se.opIds["opfs-async-shutdown"]=qe++,se.opIds.retry=qe++,se.sabOP=new SharedArrayBuffer(qe*4),Qe.metrics.reset()}se.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(qe=>{(se.sq3Codes[qe]=ve[qe])===void 0&&et("Maintenance required: not found:",qe)}),se.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(qe,...nt)=>{const dt=se.opIds[qe]||et("Invalid op ID:",qe);se.s11n.serialize(...nt),Atomics.store(se.sabOPView,se.opIds.rc,-1),Atomics.store(se.sabOPView,se.opIds.whichOp,dt),Atomics.notify(se.sabOPView,se.opIds.whichOp);const It=performance.now();for(;Atomics.wait(se.sabOPView,se.opIds.rc,-1)!=="not-equal";);const xt=Atomics.load(se.sabOPView,se.opIds.rc);if(Le[qe].wait+=performance.now()-It,xt&&se.asyncS11nExceptions){const zt=se.s11n.deserialize();zt&&Oe(qe+"() async error:",...zt)}return xt};Qe.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const qt=()=>{if(se.s11n)return se.s11n;const qe=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),It=new DataView(se.sabIO,se.sabS11nOffset,se.sabS11nSize);se.s11n=Object.create(null);const xt=Object.create(null);xt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},xt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},xt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},xt.string={id:4};const zt=At=>xt[typeof At]||et("Maintenance required: this value type cannot be serialized.",At),vn=At=>{switch(At){case xt.number.id:return xt.number;case xt.bigint.id:return xt.bigint;case xt.boolean.id:return xt.boolean;case xt.string.id:return xt.string;default:et("Invalid type ID:",At)}};return se.s11n.deserialize=function(At=!1){++Le.s11n.deserialize.count;const Sr=performance.now(),We=dt[0],bt=We?[]:null;if(We){const wt=[];let Nt=1,wn,Kn,Wn;for(wn=0;wn<We;++wn,++Nt)wt.push(vn(dt[Nt]));for(wn=0;wn<We;++wn){const Hn=wt[wn];Hn.getter?(Wn=It[Hn.getter](Nt,se.littleEndian),Nt+=Hn.size):(Kn=It.getInt32(Nt,se.littleEndian),Nt+=4,Wn=qe.decode(dt.slice(Nt,Nt+Kn)),Nt+=Kn),bt.push(Wn)}}return At&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Sr,bt},se.s11n.serialize=function(...At){const Sr=performance.now();if(++Le.s11n.serialize.count,At.length){const We=[];let bt=0,wt=1;for(dt[0]=At.length&255;bt<At.length;++bt,++wt)We.push(zt(At[bt])),dt[wt]=We[bt].id;for(bt=0;bt<At.length;++bt){const Nt=We[bt];if(Nt.setter)It[Nt.setter](wt,At[bt],se.littleEndian),wt+=Nt.size;else{const wn=nt.encode(At[bt]);It.setInt32(wt,wn.byteLength,se.littleEndian),wt+=4,dt.set(wn,wt),wt+=wn.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Sr},se.s11n},Wt=function qe(nt=16){qe._chars||(qe._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",qe._n=qe._chars.length);const dt=[];let It=0;for(;It<nt;++It){const xt=Math.random()*(qe._n*64)%qe._n|0;dt[It]=qe._chars[xt]}return dt.join("")},Xt=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=qe=>{lt.start=performance.now(),lt.op=qe,++Le[qe].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(qe,nt){return je.poke(nt,0,"i32"),0},xClose:function(qe){_e("xClose");let nt=0;const dt=Xt[qe];return dt&&(delete Xt[qe],nt=it("xClose",qe),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(qe){return ve.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(qe,nt,dt){return ve.SQLITE_NOTFOUND},xFileSize:function(qe,nt){_e("xFileSize");let dt=it("xFileSize",qe);if(dt==0)try{const It=se.s11n.deserialize()[0];je.poke(nt,It,"i64")}catch(It){Oe("Unexpected error reading xFileSize() result:",It),dt=se.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(qe,nt){_e("xLock");const dt=Xt[qe];let It=0;return dt.lockType?dt.lockType=nt:(It=it("xLock",qe,nt),It===0&&(dt.lockType=nt)),Pe(),It},xRead:function(qe,nt,dt,It){_e("xRead");const xt=Xt[qe];let zt;try{zt=it("xRead",qe,dt,Number(It)),(zt===0||ve.SQLITE_IOERR_SHORT_READ===zt)&&je.heap8u().set(xt.sabView.subarray(0,dt),nt)}catch(vn){Oe("xRead(",arguments,") failed:",vn,xt),zt=ve.SQLITE_IOERR_READ}return Pe(),zt},xSync:function(qe,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",qe,nt);return Pe(),dt},xTruncate:function(qe,nt){_e("xTruncate");const dt=it("xTruncate",qe,Number(nt));return Pe(),dt},xUnlock:function(qe,nt){_e("xUnlock");const dt=Xt[qe];let It=0;return ve.SQLITE_LOCK_NONE===nt&&dt.lockType&&(It=it("xUnlock",qe,nt)),It===0&&(dt.lockType=nt),Pe(),It},xWrite:function(qe,nt,dt,It){_e("xWrite");const xt=Xt[qe];let zt;try{xt.sabView.set(je.heap8u().subarray(nt,nt+dt)),zt=it("xWrite",qe,dt,Number(It))}catch(vn){Oe("xWrite(",arguments,") failed:",vn,xt),zt=ve.SQLITE_IOERR_WRITE}return Pe(),zt}},pt={xAccess:function(qe,nt,dt,It){_e("xAccess");const xt=it("xAccess",je.cstrToJs(nt));return je.poke(It,xt?0:1,"i32"),Pe(),0},xCurrentTime:function(qe,nt){return je.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(qe,nt){return je.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(qe,nt,dt){_e("xDelete");const It=it("xDelete",je.cstrToJs(nt),dt,!1);return Pe(),It},xFullPathname:function(qe,nt,dt,It){return je.cstrncpy(It,nt,dt)<dt?0:ve.SQLITE_CANTOPEN},xGetLastError:function(qe,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,It,xt,zt){_e("xOpen");let vn=0;dt===0?dt=Wt():je.isPtr(dt)&&(ve.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(vn|=se.opfsFlags.OPFS_UNLOCK_ASAP),ve.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(vn|=se.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=je.cstrToJs(dt));const At=Object.create(null);At.fid=It,At.filename=dt,At.sab=new SharedArrayBuffer(se.fileBufferSize),At.flags=xt,At.readOnly=!(y.SQLITE_OPEN_CREATE&xt)&&!!(xt&ve.SQLITE_OPEN_READONLY);const Sr=it("xOpen",It,dt,xt,vn);return Sr||(At.readOnly&&je.poke(zt,ve.SQLITE_OPEN_READONLY,"i32"),Xt[It]=At,At.sabView=se.sabFileBufView,At.sq3File=new Ge(It),At.sq3File.$pMethods=ee.pointer,At.lockType=ve.SQLITE_LOCK_NONE),Pe(),Sr}};re&&(ce.$xRandomness=re.$xRandomness,ce.$xSleep=re.$xSleep),ce.$xRandomness||(pt.xRandomness=function(qe,nt,dt){const It=je.heap8u();let xt=0;for(;xt<nt;++xt)It[dt+xt]=Math.random()*255e3&255;return xt}),ce.$xSleep||(pt.xSleep=function(qe,nt){return Atomics.wait(se.sabOPView,se.opIds.xSleep,0,nt),0}),Qe.getResolvedPath=function(qe,nt){const dt=new URL(qe,"file://irrelevant").pathname;return nt?dt.split("/").filter(It=>!!It):dt},Qe.getDirForFilename=async function(nt,dt=!1){const It=Qe.getResolvedPath(nt,!0),xt=It.pop();let zt=Qe.rootDirectory;for(const vn of It)vn&&(zt=await zt.getDirectoryHandle(vn,{create:!!dt}));return[zt,xt]},Qe.mkdir=async function(qe){try{return await Qe.getDirForFilename(qe+"/filepart",!0),!0}catch{return!1}},Qe.entryExists=async function(qe){try{const[nt,dt]=await Qe.getDirForFilename(qe);return await nt.getFileHandle(dt),!0}catch{return!1}},Qe.randomFilename=Wt,Qe.treeList=async function(){const qe=async function dt(It,xt){xt.name=It.name,xt.dirs=[],xt.files=[];for await(const zt of It.values())if(zt.kind==="directory"){const vn=Object.create(null);xt.dirs.push(vn),await dt(zt,vn)}else xt.files.push(zt.name)},nt=Object.create(null);return await qe(Qe.rootDirectory,nt),nt},Qe.rmfr=async function(){const qe=Qe.rootDirectory,nt={recurse:!0};for await(const dt of qe.values())qe.removeEntry(dt.name,nt)},Qe.unlink=async function(qe,nt=!1,dt=!1){try{const[It,xt]=await Qe.getDirForFilename(qe,!1);return await It.removeEntry(xt,{recursive:nt}),!0}catch(It){if(dt)throw new Error("unlink(",arguments[0],") failed: "+It.message,{cause:It});return!1}},Qe.traverse=async function(qe){const nt={recursive:!0,directory:Qe.rootDirectory};typeof qe=="function"&&(qe={callback:qe}),qe=Object.assign(nt,qe||{}),async function It(xt,zt){for await(const vn of xt.values()){if(qe.callback(vn,xt,zt)===!1)return!1;if(qe.recursive&&vn.kind==="directory"&&await It(vn,zt+1)===!1)break}}(qe.directory,0)};const Mt=async function(qe,nt){const[dt,It]=await Qe.getDirForFilename(qe,!0);let zt=await (await dt.getFileHandle(It,{create:!0})).createSyncAccessHandle(),vn=0,At,Sr=!1;try{for(zt.truncate(0);(At=await nt())!==void 0;)At instanceof ArrayBuffer&&(At=new Uint8Array(At)),vn===0&&At.byteLength>=15&&(ke.affirmDbHeader(At),Sr=!0),zt.write(At,{at:vn}),vn+=At.byteLength;if((vn<512||vn%512!==0)&&et("Input size",vn,"is not correct for an SQLite database."),!Sr){const We=new Uint8Array(20);zt.read(We,{at:0}),ke.affirmDbHeader(We)}return zt.write(new Uint8Array([1,1]),{at:18}),vn}catch(We){throw await zt.close(),zt=void 0,await dt.removeEntry(It).catch(()=>{}),We}finally{zt&&await zt.close()}};if(Qe.importDb=async function(qe,nt){if(nt instanceof Function)return Mt(qe,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),ke.affirmIsDb(nt);const dt=nt.byteLength,[It,xt]=await Qe.getDirForFilename(qe,!0);let zt,vn=0;try{return zt=await (await It.getFileHandle(xt,{create:!0})).createSyncAccessHandle(),zt.truncate(0),vn=zt.write(nt,{at:0}),vn!=dt&&et("Expected to write "+dt+" bytes but wrote "+vn+"."),zt.write(new Uint8Array([1,1]),{at:18}),vn}catch(At){throw zt&&(await zt.close(),zt=void 0),await It.removeEntry(xt).catch(()=>{}),At}finally{zt&&await zt.close()}},y.oo1){const qe=function(...nt){const dt=y.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ce.$zName,y.oo1.DB.dbCtorHelper.call(this,dt)};qe.prototype=Object.create(y.oo1.DB.prototype),y.oo1.OpfsDb=qe,qe.importDb=Qe.importDb,y.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ce.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const tn=function(){const qe=je.scopedAllocPush(),nt=new Ge;try{const dt=nt.pointer,It=ve.SQLITE_OPEN_CREATE|ve.SQLITE_OPEN_READWRITE|ve.SQLITE_OPEN_MAIN_DB,xt=je.scopedAlloc(8),zt="/sanity/check/file"+Wt(8),vn=je.scopedAllocCString(zt);let At;if(se.s11n.serialize("This is \xe4 string."),At=se.s11n.deserialize(),mt("deserialize() says:",At),At[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ce.pointer,vn,0,xt),At=je.peek(xt,"i32"),mt("xAccess(",zt,") exists ?=",At),At=pt.xOpen(ce.pointer,vn,dt,It,xt),mt("open rc =",At,"state.sabOPView[xOpen] =",se.sabOPView[se.opIds.xOpen]),At!==0){Oe("open failed with code",At);return}pt.xAccess(ce.pointer,vn,0,xt),At=je.peek(xt,"i32"),At||et("xAccess() failed to detect file."),At=ot.xSync(nt.pointer,0),At&&et("sync failed w/ rc",At),At=ot.xTruncate(nt.pointer,1024),At&&et("truncate failed w/ rc",At),je.poke(xt,0,"i64"),At=ot.xFileSize(nt.pointer,xt),At&&et("xFileSize failed w/ rc",At),mt("xFileSize says:",je.peek(xt,"i64")),At=ot.xWrite(nt.pointer,vn,10,1),At&&et("xWrite() failed!");const Sr=je.scopedAlloc(16);At=ot.xRead(nt.pointer,Sr,6,2),je.poke(Sr+6,0);let We=je.cstrToJs(Sr);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ce.pointer,2e3),mt("waking up from xSleep()")),At=ot.xClose(dt),mt("xClose rc =",At,"sabOPView =",se.sabOPView),mt("Deleting file:",zt),pt.xDelete(ce.pointer,vn,4660),pt.xAccess(ce.pointer,vn,0,xt),At=je.peek(xt,"i32"),At&&et("Expecting 0 from xAccess(",zt,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),je.scopedAllocPop(qe)}};pe.onmessage=function({data:qe}){switch(qe.type){case"opfs-unavailable":st(new Error(qe.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:se});break;case"opfs-async-inited":{if(Ee===!0)break;try{y.vfs.installVfs({io:{struct:ee,methods:ot},vfs:{struct:ce,methods:pt}}),se.sabOPView=new Int32Array(se.sabOP),se.sabFileBufView=new Uint8Array(se.sabIO,0,se.fileBufferSize),se.sabS11nView=new Uint8Array(se.sabIO,se.sabS11nOffset,se.sabS11nSize),qt(),T.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),tn()),St()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,y.opfs=Qe,Qe.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ce),ae()}).catch(st):ae()}catch(nt){Oe(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(qe);Oe(nt),st(new Error(nt));break}}}}))};S.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async I=>{try{let T=S.defaultProxyUri;return I.scriptInfo.sqlite3Dir&&(S.defaultProxyUri=I.scriptInfo.sqlite3Dir+T),S().catch($=>{I.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",$.message)})}catch(T){return I.config.error("installOpfsVfs() exception:",T),Promise.reject(T)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util.toss,I=y.util.toss3,T=Object.create(null),$=y.capi,fe=y.util,me=y.wasm,Ke=4096,tt=512,at=4,mt=8,Be=tt+at,Oe=tt,et=Be,ve=Ke,ke=$.SQLITE_OPEN_MAIN_DB|$.SQLITE_OPEN_MAIN_JOURNAL|$.SQLITE_OPEN_SUPER_JOURNAL|$.SQLITE_OPEN_WAL,je=".opaque",Ze=()=>Math.random().toString(36).slice(2),Ge=new TextDecoder,Te=new TextEncoder,Qe=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),St=[y.config.error,y.config.warn,y.config.log];y.config.log;const ee=y.config.warn;y.config.error;const ce=new Map,Ee=lt=>ce.get(lt),st=(lt,_e)=>{_e?ce.set(lt,_e):ce.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),Q=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&$.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,$.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return $.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return $.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-ve;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Mt=pt.getOFileForS3File(lt);pt.log(`xRead ${Mt.path} ${Pe} @ ${ot}`);try{const tn=Mt.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return tn<Pe?(me.heap8u().fill(0,_e+tn,_e+Pe),$.SQLITE_IOERR_SHORT_READ):0}catch(tn){return pt.storeErr(tn,$.SQLITE_IOERR)}},xSectorSize:function(lt){return Ke},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,$.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(ve+Number(_e)),0}catch(pt){return Pe.storeErr(pt,$.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Mt=pt.getOFileForS3File(lt);pt.log(`xWrite ${Mt.path} ${Pe} ${ot}`);try{const tn=Mt.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Pe===tn?0:S("Unknown write() failure.")}catch(tn){return pt.storeErr(tn,$.SQLITE_IOERR)}}},se=new $.sqlite3_io_methods;se.$iVersion=1,y.vfs.installVfs({io:{struct:se,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Mt=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Mt)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),$.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:$.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Mt=me.scopedAllocPush();try{const[tn,qe]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,tn,_e),qe>_e&&me.poke8(Pe+_e-1,0)}catch{return $.SQLITE_NOMEM}finally{me.scopedAllocPop(Mt)}}return pt?pt.sqlite3Rc||$.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Mt){const tn=Ee(_e);try{tn.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const qe=Pe&&me.peek8(Pe)?tn.getPath(Pe):Ze();let nt=tn.getSAHForPath(qe);!nt&&pt&$.SQLITE_OPEN_CREATE&&(tn.getFileCount()<tn.getCapacity()?(nt=tn.nextAvailableSAH(),tn.setAssociatedPath(nt,qe,pt)):S("SAH pool is full. Cannot create file",qe)),nt||S("file not found:",qe);const dt={path:qe,flags:pt,sah:nt};tn.mapS3FileToOFile(ot,dt),dt.lockType=$.SQLITE_LOCK_NONE;const It=new $.sqlite3_file(ot);return It.$pMethods=se.pointer,It.dispose(),me.poke32(Mt,pt),0}catch(qe){return tn.storeErr(qe),$.SQLITE_CANTOPEN}}},it=function(lt){y.capi.sqlite3_vfs_find(lt)&&I("VFS name is already registered:",lt);const _e=new $.sqlite3_vfs,Pe=$.sqlite3_vfs_find(null),ot=Pe?new $.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=$.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Mt,tn){const qe=me.heap8u();let nt=0;for(;nt<Mt;++nt)qe[tn+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Mt)=>0),y.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class qt{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#c;#l;#u;constructor(_e=Object.create(null)){this.#u=_e.verbosity??Qe.verbosity,this.vfsName=_e.name||Qe.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#c=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Qe.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Qe.initialCapacity)})}#d(_e,...Pe){this.#u>_e&&St[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Mt=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Mt,ot),this.setAssociatedPath(Mt,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Mt=await pt.createSyncAccessHandle();if(this.#r.set(Mt,ot),_e)Mt.truncate(ve),this.setAssociatedPath(Mt,"",0);else{const tn=this.getAssociatedPath(Mt);tn?this.#i.set(tn,Mt):this.#s.add(Mt)}}catch(Mt){throw this.storeErr(Mt),this.releaseAccessHandles(),Mt}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#c.getUint32(Oe);if(this.#a[0]&&(Pe&$.SQLITE_OPEN_DELETEONCLOSE||!(Pe&ke)))return ee(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Mt,tn)=>Mt===pt[tn])){const Mt=this.#a.findIndex(tn=>tn===0);return Mt===0&&_e.truncate(ve),Mt?Ge.decode(this.#a.subarray(0,Mt)):""}else return ee("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=Te.encodeInto(Pe,this.#a);tt<=pt.written+1&&S("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#c.setUint32(Oe,ot);const Mt=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Mt,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(ve),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(je,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||$.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),Q(_e,this)):(this.#o.delete(_e),Q(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;$.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete T[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(je,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){y.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||S("File not found:",_e),ot=Pe.getSize()-ve,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Mt=Pe.read(pt,{at:ve});Mt!=ot&&S("Expected to read "+ot+" bytes but read "+Mt+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to.");ot.truncate(0);let pt=0,Mt,tn=!1;try{for(;(Mt=await Pe())!==void 0;)Mt instanceof ArrayBuffer&&(Mt=new Uint8Array(Mt)),pt===0&&Mt.byteLength>=15&&(fe.affirmDbHeader(Mt),tn=!0),ot.write(Mt,{at:ve+pt}),pt+=Mt.byteLength;if((pt<512||pt%512!==0)&&S("Input size",pt,"is not correct for an SQLite database."),!tn){const qe=new Uint8Array(20);ot.read(qe,{at:0}),fe.affirmDbHeader(qe)}ot.write(new Uint8Array([1,1]),{at:ve+18})}catch(qe){throw this.setAssociatedPath(ot,"",0),qe}return this.setAssociatedPath(ot,_e,$.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&S("Byte array size is invalid for an SQLite db.");const Mt="SQLite format 3";for(let qe=0;qe<Mt.length;++qe)Mt.charCodeAt(qe)!==Pe[qe]&&S("Input does not contain an SQLite database header.");const tn=ot.write(Pe,{at:ve});return tn!=pt?(this.setAssociatedPath(ot,"",0),S("Expected to write "+pt+" bytes but wrote "+tn+".")):(ot.write(new Uint8Array([1,1]),{at:ve+18}),this.setAssociatedPath(ot,_e,$.SQLITE_OPEN_MAIN_DB)),tn}}class Wt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const Xt=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&S("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};y.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Qe,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(T[_e])try{return await T[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete T[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?T[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):T[_e]=Xt().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new qt(lt);return Pe.isReady.then(async()=>{const ot=new Wt(Pe);if(y.oo1){const pt=y.oo1,Mt=Pe.getVfs(),tn=function(...qe){const nt=pt.DB.dbCtorHelper.normalizeArgs(...qe);nt.vfs=Mt.$zName,pt.DB.dbCtorHelper.call(this,nt)};tn.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=tn}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>T[_e]=Promise.reject(Pe))}}),typeof g<"u"){const y=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=y;let S;try{S=globalThis.sqlite3ApiBootstrap()}catch(I){throw console.error("sqlite3ApiBootstrap() error:",I),I}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=S}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const v7=function(){const t=mN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();mN=v7;const x7=mN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let f,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let b=n[h.messageId];if(!b){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(b=n[h.type],b&&b.onrow){b.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":b.reject(h);return;case"open":f||(f=h.dbId);break;case"close":h.dbId===f&&(f=void 0);break}try{b.resolve(h)}catch(x){b.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=f),h.messageId=l(h),h.departureTime=performance.now();const b=Object.create(null);b.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",b.onrow=h.args.callback,h.args.callback=x,n[x]=b):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(E,N){b.resolve=E,b.reject=N,n[h.messageId]=b,s("Posting",h.type,"message to Worker dbId="+(f||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function RR(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function v0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function ND(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function PE(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const l=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(l);let f=0;return s.forEach(p=>{u.set(p,f),f+=p.length}),u}}else return n}class w7{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:RR()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:RR()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,l=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await x7()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,l),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,l),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=v0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let l of r.statements){const u=v0(o,l);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)v0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],f=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:f,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let l;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?l=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:l=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:l}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const l=await PE(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,l)}else{const l=await PE(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(l);this.pointers.push(u);const f=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,l.byteLength,l.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(f),this.execInitStatements()}}catch(l){this.emitMessage({type:"error",error:l,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:l,tempFileNames:u}=ND(this.config.databasePath),f=await o(),p=[l,...u];this.destroy(),await Promise.all(p.map(async h=>f.removeEntry(h).catch(b=>{if(!(b instanceof DOMException&&b.name==="NotFoundError"))throw b})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:hN(globalThis);this.proxy=n,this.init("initial")}}function zb(t,...e){return{sql:t.join("?"),params:e}}function _7(t){return!t.some(e=>!Array.isArray(e))}function x0(t,e){let n;return _7(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function S7(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function E7(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function I7(t){if(typeof t=="function"&&(t=t(zb)),S7(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!E7(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function w0(){return crypto.randomUUID()}function OR(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=zb(t,...e),n}async function Yg(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class N7{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const l=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(l.type){case"success":case"data":case"buffer":case"info":case"error":if(l.queryKey&&u.has(l.queryKey)){const[p,h]=u.get(l.queryKey);l.type==="error"?h(l.error):p(l),u.delete(l.queryKey)}else if(l.type==="error")throw l.error;break;case"callback":const f=this.userCallbacks.get(l.name);f&&f(...l.args??[]);break;case"event":this.config.onConnect?.(l.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Yg("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const l=w0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:l},[o.database]);break;default:this.processor.postMessage({...o,queryKey:l});break}return new Promise((u,f)=>{this.queriesInProgress.set(l,[u,f])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l,u="all",f)=>{const p=await this.createQuery({type:"query",transactionKey:f,sql:o,params:l,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return l.type==="data"&&l.data.forEach((f,p)=>{u[p]=f}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...l)=>{const u=OR(o,l),{rows:f,columns:p}=await this.exec(u.sql,u.params,"all");return x0(f,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=o(zb);return(await this.execBatch(l)).map(({rows:f,columns:p})=>x0(f,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=w0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const l=async h=>{const b=I7(h),{rows:x,columns:_}=await this.exec(b.sql,b.params,"all",o);return x0(x,_)};return{query:l,sql:async(h,...b)=>{const x=OR(h,b);return await l(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Yg("exclusive",!1,this.config,async()=>{let l;this.bypassMutationLock=!0;try{l=await this.beginTransaction();const u=await o({sql:l.sql,query:l.query});return await l.commit(),u}catch(u){throw await l?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,l)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=l),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=l)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,l;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const f=ND(this.config.databasePath),{directories:p,getDirectoryHandle:h}=f;o=f.fileName;const b=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${b}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();l=await (await (await _.getFileHandle(b)).getFile()).arrayBuffer(),await _.removeEntry(b)}else{const f=await this.createQuery({type:"export"});if(f.type==="buffer")o="database.sqlite3",l=f.buffer;else throw new Error("The database failed to export.")}return new File([l],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await Yg("exclusive",!1,this.config,async()=>{try{const u=await PE(o);await this.createQuery({type:"import",database:u}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Yg("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=w0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=hN(this.processor)):(this.processor=new w7(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(zb)??[]}})}}class k7 extends N7{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new CH,createDriver:()=>new C7(this),createIntrospector:e=>new kH(e),createQueryCompiler:()=>new EH}})}}class C7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new j7(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class j7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const T7=({database:t,bootstrap:e})=>{const{dialect:n}=new k7({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new UI({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},vi=xn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),R7="icon-[material-symbols--error-outline]",O7=xn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),ci=({error:t,variant:e,tva:n=O7,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?d.jsxs("div",{className:i.base(),children:[d.jsx(Yt,{icon:R7}),d.jsx("span",{children:sa.rich(t.message)})]}):null},q7=xn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),pn=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:l=q7,css:u})=>{const f=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:"flex flex-row justify-between",children:[t?d.jsx("label",{htmlFor:i,children:t}):null,d.jsx(ci,{variant:{compact:!0},error:r.errors[i]})]}),e?d.jsx("div",{className:"text-sm italic",children:e}):null,d.jsx("div",{className:f.input(),children:s})]})},Ji=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{QI({error:i,errors:[kI({error:i,schema:KI,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function A7(t,e,n,r={leading:!1}){const[i,s]=H.useState(t),[o,l]=H.useState(t),u=H.useRef(null),f=H.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);H.useEffect(()=>p,[]),H.useEffect(()=>{e(i)},[i]),H.useEffect(()=>{l(t),s(t)},[t]);const h=H.useCallback(b=>{l(b),p(),f.current&&r.leading?s(b):u.current=window.setTimeout(()=>{f.current=!0,s(b)},n),f.current=!1},[r.leading]);return[o,h]}const P7=xn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),kD=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=P7,css:s})=>{const o=i({...r,css:s}).slots,[l,u]=A7(t,f=>{e(f||"")},500);return d.jsxs("div",{className:o.base(),children:[d.jsx("div",{className:o.search(),children:d.jsx(Yt,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),d.jsx("input",{value:l||"",className:o.input(),type:"text",placeholder:n||sa.text("Fulltext (placeholder)"),onChange:f=>{u(f.target.value)}}),t&&d.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:d.jsx(Yt,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},gs="icon-[pajamas--go-back]",Wb="icon-[line-md--confirm-circle]",CD="icon-[mage--edit]",F7="icon-[arcticons--nothing-x]",D7="icon-[tabler--filter-plus]",qR="icon-[tabler--filter-minus]",Hv="icon-[ph--list-dashes-thin]",L7="icon-[svg-spinners--3-dots-scale]",gN="icon-[material-symbols-light--logout-sharp]",M7="icon-[fluent--shape-intersect-20-regular]",Kv="icon-[fluent--checkbox-unchecked-20-regular]",Qv="icon-[fluent--checkbox-checked-20-regular]",Dh="icon-[teenyicons--tag-outline]",ti="icon-[ph--trash]",$7="icon-[clarity--upload-cloud-line]",yN="icon-[ph--user]",B7=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Dn=t=>{const e=uv(),n=Lo();return async()=>{await B7({keys:t,queryClient:e}),await n.invalidate()}};var _0={exports:{}},S0,AR;function z7(){if(AR)return S0;AR=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return S0=t,S0}var E0,PR;function W7(){if(PR)return E0;PR=1;var t=z7();function e(){}function n(){}return n.resetWarningCache=e,E0=function(){function r(o,l,u,f,p,h){if(h!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},E0}var FR;function V7(){return FR||(FR=1,_0.exports=W7()()),_0.exports}var U7=V7();const Yn=uo(U7);function gu(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{f(r.next(p))}catch(h){o(h)}}function u(p){try{f(r.throw(p))}catch(h){o(h)}}function f(p){p.done?s(p.value):i(p.value).then(l,u)}f((r=r.apply(t,e||[])).next())})}const H7=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Jd(t,e,n){const r=K7(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&DR(r,"path",s),DR(r,"relativePath",s),r}function K7(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=H7.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function DR(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const Q7=[".DS_Store","Thumbs.db"];function G7(t){return gu(this,void 0,void 0,function*(){return Vb(t)&&J7(t.dataTransfer)?eG(t.dataTransfer,t.type):Z7(t)?Y7(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?X7(t):[]})}function J7(t){return Vb(t)}function Z7(t){return Vb(t)&&Vb(t.target)}function Vb(t){return typeof t=="object"&&t!==null}function Y7(t){return FE(t.target.files).map(e=>Jd(e))}function X7(t){return gu(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Jd(n))})}function eG(t,e){return gu(this,void 0,void 0,function*(){if(t.items){const n=FE(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(tG));return LR(jD(r))}return LR(FE(t.files).map(n=>Jd(n)))})}function LR(t){return t.filter(e=>Q7.indexOf(e.name)===-1)}function FE(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function tG(t){if(typeof t.webkitGetAsEntry!="function")return MR(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?TD(e):MR(t,e)}function jD(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?jD(n):[n]],[])}function MR(t,e){return gu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Jd(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Jd(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function nG(t){return gu(this,void 0,void 0,function*(){return t.isDirectory?TD(t):rG(t)})}function TD(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>gu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(nG));i.push(l),s()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}s()})}function rG(t){return gu(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Jd(r,t.fullPath);e(i)},r=>{n(r)})})})}var Xg={},$R;function iG(){return $R||($R=1,Xg.__esModule=!0,Xg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0}),Xg}var sG=iG();const I0=uo(sG);function BR(t){return lG(t)||aG(t)||OD(t)||oG()}function oG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lG(t){if(Array.isArray(t))return DE(t)}function zR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zR(Object(n),!0).forEach(function(r){RD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lh(t,e){return dG(t)||uG(t,e)||OD(t,e)||cG()}function cG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OD(t,e){if(t){if(typeof t=="string")return DE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DE(t,e)}}function DE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function dG(t){if(Array.isArray(t))return t}var fG=typeof I0=="function"?I0:I0.default,qD="file-invalid-type",AD="file-too-large",PD="file-too-small",FD="too-many-files",pG={FileInvalidType:qD,FileTooLarge:AD,FileTooSmall:PD,TooManyFiles:FD},hG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:qD,message:"File type must be ".concat(r)}},VR=function(e){return{code:AD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},UR=function(e){return{code:PD,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},mG={code:FD,message:"Too many files"};function DD(t,e){var n=t.type==="application/x-moz-file"||fG(t,e);return[n,n?null:hG(e)]}function LD(t,e,n){if(Mc(t.size))if(Mc(e)&&Mc(n)){if(t.size>n)return[!1,VR(n)];if(t.size<e)return[!1,UR(e)]}else{if(Mc(e)&&t.size<e)return[!1,UR(e)];if(Mc(n)&&t.size>n)return[!1,VR(n)]}return[!0,null]}function Mc(t){return t!=null}function gG(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,l=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var f=DD(u,n),p=Lh(f,1),h=p[0],b=LD(u,r,i),x=Lh(b,1),_=x[0],E=l?l(u):null;return h&&_&&!E})}function Ub(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function ey(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function HR(t){t.preventDefault()}function yG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function bG(t){return t.indexOf("Edge/")!==-1}function vG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return yG(t)||bG(t)}function Go(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(l){return!Ub(r)&&l&&l.apply(void 0,[r].concat(s)),Ub(r)})}}function xG(){return"showOpenFilePicker"in window}function wG(t){if(Mc(t)){var e=Object.entries(t).filter(function(n){var r=Lh(n,2),i=r[0],s=r[1],o=!0;return MD(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every($D))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Lh(r,2),s=i[0],o=i[1];return WR(WR({},n),{},RD({},s,o))},{});return[{description:"Files",accept:e}]}return t}function _G(t){if(Mc(t))return Object.entries(t).reduce(function(e,n){var r=Lh(n,2),i=r[0],s=r[1];return[].concat(BR(e),[i],BR(s))},[]).filter(function(e){return MD(e)||$D(e)}).join(",")}function SG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function EG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function MD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function $D(t){return/^.*\.[\w]+$/.test(t)}var IG=["children"],NG=["open"],kG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],CG=["refKey","onChange","onClick"];function jG(t){return OG(t)||RG(t)||BD(t)||TG()}function TG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OG(t){if(Array.isArray(t))return LE(t)}function N0(t,e){return PG(t)||AG(t,e)||BD(t,e)||qG()}function qG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BD(t,e){if(t){if(typeof t=="string")return LE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LE(t,e)}}function LE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function PG(t){if(Array.isArray(t))return t}function KR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KR(Object(n),!0).forEach(function(r){ME(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ME(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hb(t,e){if(t==null)return{};var n=FG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Gv=H.forwardRef(function(t,e){var n=t.children,r=Hb(t,IG),i=WD(r),s=i.open,o=Hb(i,NG);return H.useImperativeHandle(e,function(){return{open:s}},[s]),Bn.createElement(H.Fragment,null,n(Nr(Nr({},o),{},{open:s})))});Gv.displayName="Dropzone";var zD={disabled:!1,getFilesFromEvent:G7,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Gv.defaultProps=zD;Gv.propTypes={children:Yn.func,accept:Yn.objectOf(Yn.arrayOf(Yn.string)),multiple:Yn.bool,preventDropOnDocument:Yn.bool,noClick:Yn.bool,noKeyboard:Yn.bool,noDrag:Yn.bool,noDragEventsBubbling:Yn.bool,minSize:Yn.number,maxSize:Yn.number,maxFiles:Yn.number,disabled:Yn.bool,getFilesFromEvent:Yn.func,onFileDialogCancel:Yn.func,onFileDialogOpen:Yn.func,useFsAccessApi:Yn.bool,autoFocus:Yn.bool,onDragEnter:Yn.func,onDragLeave:Yn.func,onDragOver:Yn.func,onDrop:Yn.func,onDropAccepted:Yn.func,onDropRejected:Yn.func,onError:Yn.func,validator:Yn.func};var $E={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function WD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Nr(Nr({},zD),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,f=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,b=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,E=e.onFileDialogCancel,N=e.onFileDialogOpen,j=e.useFsAccessApi,C=e.autoFocus,R=e.preventDropOnDocument,q=e.noClick,L=e.noKeyboard,M=e.noDrag,W=e.noDragEventsBubbling,P=e.onError,O=e.validator,z=H.useMemo(function(){return _G(n)},[n]),D=H.useMemo(function(){return wG(n)},[n]),V=H.useMemo(function(){return typeof N=="function"?N:QR},[N]),U=H.useMemo(function(){return typeof E=="function"?E:QR},[E]),B=H.useRef(null),G=H.useRef(null),Z=H.useReducer(DG,$E),le=N0(Z,2),ie=le[0],ne=le[1],oe=ie.isFocused,te=ie.isFileDialogActive,ue=H.useRef(typeof window<"u"&&window.isSecureContext&&j&&xG()),de=function(){!ue.current&&te&&setTimeout(function(){if(G.current){var ut=G.current.files;ut.length||(ne({type:"closeDialog"}),U())}},300)};H.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[G,te,U,ue]);var ye=H.useRef([]),we=function(ut){B.current&&B.current.contains(ut.target)||(ut.preventDefault(),ye.current=[])};H.useEffect(function(){return R&&(document.addEventListener("dragover",HR,!1),document.addEventListener("drop",we,!1)),function(){R&&(document.removeEventListener("dragover",HR),document.removeEventListener("drop",we))}},[B,R]),H.useEffect(function(){return!r&&C&&B.current&&B.current.focus(),function(){}},[B,C,r]);var Ie=H.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[].concat(jG(ye.current),[Me.target]),ey(Me)&&Promise.resolve(i(Me)).then(function(ut){if(!(Ub(Me)&&!W)){var Qt=ut.length,Gt=Qt>0&&gG({files:ut,accept:z,minSize:o,maxSize:s,multiple:l,maxFiles:u,validator:O}),bn=Qt>0&&!Gt;ne({isDragAccept:Gt,isDragReject:bn,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Me)}}).catch(function(ut){return Ie(ut)})},[i,f,Ie,W,z,o,s,l,u,O]),Re=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ut=ey(Me);if(ut&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ut&&h&&h(Me),!1},[h,W]),De=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me);var ut=ye.current.filter(function(Gt){return B.current&&B.current.contains(Gt)}),Qt=ut.indexOf(Me.target);Qt!==-1&&ut.splice(Qt,1),ye.current=ut,!(ut.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ey(Me)&&p&&p(Me))},[B,p,W]),Je=H.useCallback(function(Me,ut){var Qt=[],Gt=[];Me.forEach(function(bn){var lr=DD(bn,z),Ln=N0(lr,2),Kr=Ln[0],Di=Ln[1],_r=LD(bn,o,s),Jt=N0(_r,2),Zi=Jt[0],Yi=Jt[1],Xi=O?O(bn):null;if(Kr&&Zi&&!Xi)Qt.push(bn);else{var po=[Di,Yi];Xi&&(po=po.concat(Xi)),Gt.push({file:bn,errors:po.filter(function(pa){return pa})})}}),(!l&&Qt.length>1||l&&u>=1&&Qt.length>u)&&(Qt.forEach(function(bn){Gt.push({file:bn,errors:[mG]})}),Qt.splice(0)),ne({acceptedFiles:Qt,fileRejections:Gt,isDragReject:Gt.length>0,type:"setFiles"}),b&&b(Qt,Gt,ut),Gt.length>0&&_&&_(Gt,ut),Qt.length>0&&x&&x(Qt,ut)},[ne,l,z,o,s,u,b,x,_,O]),Xe=H.useCallback(function(Me){Me.preventDefault(),Me.persist(),Ne(Me),ye.current=[],ey(Me)&&Promise.resolve(i(Me)).then(function(ut){Ub(Me)&&!W||Je(ut,Me)}).catch(function(ut){return Ie(ut)}),ne({type:"reset"})},[i,Je,Ie,W]),Ve=H.useCallback(function(){if(ue.current){ne({type:"openDialog"}),V();var Me={multiple:l,types:D};window.showOpenFilePicker(Me).then(function(ut){return i(ut)}).then(function(ut){Je(ut,null),ne({type:"closeDialog"})}).catch(function(ut){SG(ut)?(U(ut),ne({type:"closeDialog"})):EG(ut)?(ue.current=!1,G.current?(G.current.value=null,G.current.click()):Ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ie(ut)});return}G.current&&(ne({type:"openDialog"}),V(),G.current.value=null,G.current.click())},[ne,V,U,j,Je,Ie,D,l]),ct=H.useCallback(function(Me){!B.current||!B.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ve())},[B,Ve]),_t=H.useCallback(function(){ne({type:"focus"})},[]),Rt=H.useCallback(function(){ne({type:"blur"})},[]),Ut=H.useCallback(function(){q||(vG()?setTimeout(Ve,0):Ve())},[q,Ve]),an=function(ut){return r?null:ut},xe=function(ut){return L?null:an(ut)},be=function(ut){return M?null:an(ut)},Ne=function(ut){W&&ut.stopPropagation()},Ae=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.role,bn=Me.onKeyDown,lr=Me.onFocus,Ln=Me.onBlur,Kr=Me.onClick,Di=Me.onDragEnter,_r=Me.onDragOver,Jt=Me.onDragLeave,Zi=Me.onDrop,Yi=Hb(Me,kG);return Nr(Nr(ME({onKeyDown:xe(Go(bn,ct)),onFocus:xe(Go(lr,_t)),onBlur:xe(Go(Ln,Rt)),onClick:an(Go(Kr,Ut)),onDragEnter:be(Go(Di,ze)),onDragOver:be(Go(_r,Re)),onDragLeave:be(Go(Jt,De)),onDrop:be(Go(Zi,Xe)),role:typeof Gt=="string"&&Gt!==""?Gt:"presentation"},Qt,B),!r&&!L?{tabIndex:0}:{}),Yi)}},[B,ct,_t,Rt,Ut,ze,Re,De,Xe,L,M,r]),Ue=H.useCallback(function(Me){Me.stopPropagation()},[]),rt=H.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.onChange,bn=Me.onClick,lr=Hb(Me,CG),Ln=ME({accept:z,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:an(Go(Gt,Xe)),onClick:an(Go(bn,Ue)),tabIndex:-1},Qt,G);return Nr(Nr({},Ln),lr)}},[G,n,l,Xe,r]);return Nr(Nr({},ie),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:B,inputRef:G,open:an(Ve)})}function DG(t,e){switch(e.type){case"focus":return Nr(Nr({},t),{},{isFocused:!0});case"blur":return Nr(Nr({},t),{},{isFocused:!1});case"openDialog":return Nr(Nr({},$E),{},{isFileDialogActive:!0});case"closeDialog":return Nr(Nr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Nr(Nr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Nr(Nr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Nr({},$E);default:return t}}function QR(){}const LG=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:pG,default:Gv,useDropzone:WD},Symbol.toStringTag,{value:"Module"})),MG=xn({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:$G}=LG,BG=({id:t,accept:e,text:n,variant:r,tva:i=MG,css:s,...o})=>{const{getRootProps:l,getInputProps:u,isDragActive:f,isDragReject:p}=$G({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:f,rejected:p,...r,css:s}).slots;return d.jsx("div",{...l(),className:h.base(),children:d.jsxs("label",{htmlFor:t,className:h.label(),children:[d.jsxs("div",{className:h.zone(),children:[d.jsx(Yt,{icon:$7,variant:{size:"4xl"}}),d.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||sa.rich("Drag 'n' drop a file here")}),n?.message?d.jsx("p",{className:"text-xs",children:n.message}):null]}),d.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},zG=xn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),VD=({logo:t,menu:e,actions:n,variant:r,tva:i=zG,css:s,children:o})=>{const l=i({...r,css:s}).slots;return d.jsxs("div",{className:l.base(),children:[d.jsx(Bz,{position:"top-right"}),d.jsxs("div",{className:l.header(),children:[d.jsx("div",{children:t}),d.jsx("div",{className:"grow",children:e}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),d.jsx("div",{className:l.content(),children:o??d.jsx(fo,{})})]})},WG=xn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),VG=H.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=WG,css:i,children:s,...o},l)=>{const u=r({...n,css:i}).slots;return d.jsxs("a",{...o,ref:l,className:u.base(),children:[t&&d.jsx(Yt,{icon:t,...e}),s]})}),UG=J3(VG),Tt=t=>d.jsx(UG,{preload:"intent",...t}),HG=xn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),KG=({show:t=!0,variant:e,tva:n=HG,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?d.jsx("div",{className:i.base(),children:d.jsx(Yt,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var Py={exports:{}},QG=Py.exports,GR;function GG(){return GR||(GR=1,function(t,e){(function(n,r){t.exports=r()})(QG,()=>(()=>{var n={d:(_,E)=>{for(var N in E)n.o(E,N)&&!n.o(_,N)&&Object.defineProperty(_,N,{enumerable:!0,get:E[N]})},o:(_,E)=>Object.prototype.hasOwnProperty.call(_,E)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,l;const u=()=>{if(!o){o=!0;try{l=h.storage||localStorage,l.getItem("")}catch{l=(()=>{const _={getItem:N=>E[N]||null,setItem:(N,j)=>{E[N]=j},removeItem:N=>{E[N]=void 0},clear:()=>{E={__proto__:_}}};let E={__proto__:_};return E})()}b()}},f="\0",p=(_,E,N=!0)=>N?[...JSON.stringify(_)].map(j=>String.fromCharCode(j.charCodeAt(0)+E)).join(""):JSON.parse([..._].map(j=>String.fromCharCode(j.charCodeAt(0)-E)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,E)=>p(_,E,!1),secret:75,storage:void 0};Object.seal(h);const b=(_=!1)=>{u();for(const E of Object.keys(l)){const N=l.getItem(E);let j;try{j=JSON.parse(N||"")}catch{continue}s(j)&&f in j&&(Date.now()>j.ttl||_)&&l.removeItem(E)}},x={config:h,set:(_,E,N={})=>{u();const j={...h,...N,encrypt:N.encrypt!==!1&&(N.encrypt||h.encrypt),ttl:N.ttl===null?null:N.ttl||h.ttl};try{const C=j.ttl&&!isNaN(j.ttl)&&j.ttl>0;let R=C?{[f]:E,ttl:Date.now()+1e3*j.ttl}:E;j.encrypt&&(C?R[f]=(j.encrypter||i)(R[f],j.secret):R=(j.encrypter||i)(R,j.secret)),l.setItem(_,JSON.stringify(R))}catch{return!1}},get:(_,E={})=>{u();const N=l.getItem(_),j={...h,...E,encrypt:E.encrypt!==!1&&(E.encrypt||h.encrypt),ttl:E.ttl===null?null:E.ttl||h.ttl};let C,R;try{C=JSON.parse(N||""),R=s(C)&&f in C,(j.decrypt||j.encrypt)&&(R?C[f]=(j.decrypter||i)(C[f],j.secret):C=(j.decrypter||i)(C,j.secret))}catch{}return R?Date.now()>C.ttl?(l.removeItem(_),null):C[f]:C!==void 0?C:N},flush:b,clear:()=>{u(),l.clear()},remove:_=>{u(),l.removeItem(_)}};return r.default})())}(Py)),Py.exports}var JG=GG();const ZG=uo(JG),yf=ZG,YG=xn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),yu=({variant:t,tva:e=YG,css:n,children:r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),children:r})},UD=xn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),XG=H.forwardRef(({icon:t=null,variant:e,tva:n=UD,css:r,children:i,...s},o)=>{const l=n({...e,css:r}).slots;return d.jsxs("a",{...s,className:l.base(),ref:o,children:[kv(t)?d.jsx(Yt,{icon:t}):t,i]})}),eJ=J3(XG),tr=({match:t=[],variant:e,tva:n=UD,css:r,...i})=>{const s=W4(),o=t.some(l=>!!s(l));return d.jsx(eJ,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},tJ=xn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),tc=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=tJ,css:l})=>{const u=i?n.slice(0,i):n,f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[n.length?null:e,u.map(p=>d.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&d.jsx(gf,{textTitle:t,target:d.jsx(wm,{iconEnabled:bD}),outside:!0,children:d.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>d.jsx(r,{entity:p},`items-${p.id}`))})})]})},nJ=xn({slot:{base:[]},variant:{},defaults:{}}),X=({label:t,fallback:e,variant:n,tva:r=nJ,css:i})=>{const s=r({...n,css:i}).slots;return d.jsx("div",{className:s.base(),children:sa.rich(t,e)})},HD=xn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),rJ=xn({use:HD,slot:{},variant:{},defaults:{}}),KD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=rJ,css:x})=>{const _=b({...h,css:x}).slots,[E,N]=H.useState(0),[j,C]=H.useState(15),[R,q]=H.useState(f||[]),[L,M]=H.useState(void 0),W=ib({queryKey:[l,"PopupMultiSelect","data",{fulltext:L,page:E,size:j}],async queryFn(){return u({filter:{fulltext:L},cursor:{page:E,size:j}})}}),P=ib({queryKey:[l,"PopupMultiSelect","selected",{value:f}],async queryFn(){return u({filter:{idIn:f}})},enabled:!!f});return d.jsx(gf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[d.jsx(Yt,{icon:P.data?.data?.length?Qv:Kv}),P.data&&P.data.data.length?d.jsx(s,{entities:P.data.data}):n||d.jsx(X,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:j},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(X,{label:"Total count of items (label)"}),onPage(O){N(O)},onSize(O){C(O),N(0)}},fulltext:{value:L,set(O){M(O),N(0)}},table:{data:W.data?.data??[],selection:{type:"multi",value:R,set(O){q(O)}}}})}),d.jsx(Vv.Consumer,{children:O=>d.jsxs("div",{className:_.footer(),children:[d.jsx(dn,{iconEnabled:gs,iconDisabled:gs,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:d.jsx(X,{label:"Close (label)"})}),d.jsx(dn,{iconEnabled:Wb,iconDisabled:Wb,disabled:!R.length&&!o,onClick:()=>{p(R),O?.close()},children:d.jsx(X,{label:"Confirm selection (label)"})})]})})]})})},QD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=HD,css:x})=>{const _=b({...h,css:x}).slots,[E,N]=H.useState(0),[j,C]=H.useState(15),[R,q]=H.useState(f?[f]:[]),[L,M]=H.useState(void 0),W=ib({queryKey:[l,"PopupSelect","data",{fulltext:L,page:E,size:j}],async queryFn(){return u({filter:{fulltext:L},cursor:{page:E,size:j}})}}),P=ib({queryKey:[l,"PopupSelect","selected",{value:f}],async queryFn(){return u({filter:{id:f||void 0}})},enabled:!!f});return d.jsx(gf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[d.jsx(Yt,{icon:P.data?.data?.[0]?Qv:Kv}),P.data?.data?.[0]?d.jsx(s,{entity:P.data?.data?.[0]}):n||d.jsx(X,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:j},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(X,{label:"Total count of items (label)"}),onPage(O){N(O)},onSize(O){C(O),N(0)}},fulltext:{value:L,set(O){M(O),N(0)}},table:{data:W.data?.data??[],selection:{type:"single",value:R,set(O){q(O)}}}})}),d.jsx(Vv.Consumer,{children:O=>d.jsxs("div",{className:_.footer(),children:[d.jsx(dn,{iconEnabled:gs,iconDisabled:gs,onClick:()=>{O?.close()},variant:{variant:"subtle"},children:d.jsx(X,{label:"Close (label)"})}),d.jsx(dn,{iconEnabled:Wb,iconDisabled:Wb,disabled:!R.length&&!o,onClick:()=>{p(R?.[0]),O?.close()},children:d.jsx(X,{label:"Confirm selection (label)"})})]})})]})})},iJ=xn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),bf=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=iJ,css:l})=>{const u=o({...s,css:l}).slots;return d.jsx(fN.Provider,{value:{inline:!0},children:d.jsx("div",{className:u.base(),children:d.jsxs("div",{className:u.container(),children:[d.jsx("div",{className:u.title(),children:d.jsx(e,{entity:t})}),d.jsx("div",{className:u.links(),children:d.jsx(n,{entity:t})}),d.jsx("div",{className:u.actions(),children:d.jsx(r,{entity:t})}),d.jsx("div",{className:u.extra(),children:d.jsx(i,{entity:t})})]})})})},sJ=xn({slot:{base:["w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),vf=({value:t,variant:e,tva:n=sJ,css:r})=>{const i=n({...e,css:r}).slots;return d.jsx("div",{className:i.base(),children:d.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},oJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},aJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},qr=t=>({onPage:oJ(t),onSize:aJ(t)}),Ar=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Pr=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},bs=t=>e=>{t({search(n){return{...n,selection:e}}})},ei=t=>({loading:d.jsx(X,{label:`${t} - Loading (label)`}),success:d.jsx(X,{label:`${t} - Success (label)`}),error:d.jsx(X,{label:`${t} - Error (label)`})}),lJ=xn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),vs=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=lJ,css:l})=>{const u=o({...s,css:l}).slots,f=H.useContext(Vv),p=Zt({async mutationFn(){return zz.promise(n(),ei(e))},async onSuccess(){await i?.(),f?.close()}});return d.jsxs("div",{className:u.base(),children:[d.jsx("div",{className:u.content(),children:t}),d.jsxs("div",{className:u.footer(),children:[d.jsx(dn,{variant:{variant:"subtle",size:"sm"},iconEnabled:gs,onClick:()=>{f?.close(),r?.()},children:d.jsx(X,{label:"Cancel (button)"})}),d.jsx(dn,{variant:{variant:"danger",size:"md"},iconEnabled:ti,onClick:()=>{p.mutate()},children:d.jsx(X,{label:"Delete (button)"})})]})]})},cJ=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),$o=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),Cr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=l=>{let u=l;return s&&(u=l.limit(s.size).offset(s.page*s.size)),u};return F.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},ar=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await Cr({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await cJ({select:t,where:i,filter:r,query:e})}),hr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},ty=(t,e)=>F.custom().pipe(t.catch(e)),Fr=({filter:t},{size:e=30}={size:30})=>F.object({filter:ty(t.optional(),void 0),cursor:ty(D9,{page:0,size:e}).default({page:0,size:e}),sort:ty(F.any().optional(),[]).default([]),selection:ty(F.array(F.string()),[]).default([])}),uJ=xn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),GD=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=uJ,css:o,children:l})=>{const u=s({...i,css:o}).slots;return d.jsxs("div",{className:u.base(),children:[n?d.jsx(Yt,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,d.jsx("div",{className:u.title(),children:t}),d.jsx("div",{className:u.message(),children:e}),d.jsx("div",{className:u.body(),children:l})]})},bN=xn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),dJ=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=bN,css:o})=>{const l=e.def.render,u=s({...i,css:o}).slots;return d.jsx("td",{className:u.td(),children:d.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[d.jsx(l,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?d.jsx(Yt,{icon:D7,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},fJ=({table:t,row:e,action:n,variant:r,tva:i=bN,css:s})=>{const o=i({...r,css:s}).slots,l=n?.table,u=n?.row;return d.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[l||u||t.selection.enabled?d.jsx("td",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(Yt,{icon:t.selection.isSelected(e)?Qv:Kv,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?d.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(f=>d.jsx(dJ,{table:t,cell:f,variant:r,tva:i,css:s},`${e.id}-${f.column.id}`)),d.jsx("td",{})]})},Dr=({table:t,fulltext:e,cursor:n,empty:r=()=>d.jsx(GD,{icon:F7,textTitle:d.jsx(X,{label:"Nothing here"}),textMessage:d.jsx(X,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=bN,css:l})=>{const u=o({...s,css:l}).slots,f=i?.table,p=i?.row;return d.jsxs("div",{className:u.base(),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?d.jsx(kD,{value:e.value,onFulltext:e.set}):null}),d.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[d.jsx(kR,{...n}),t.filter.is()&&d.jsx(wm,{iconEnabled:qR,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),d.jsx("div",{className:"relative overflow-x-auto",children:d.jsxs("table",{className:u.table(),children:[d.jsx("thead",{className:u.thead(),children:d.jsxs("tr",{children:[f||p||t.selection.enabled?d.jsx("th",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(Yt,{icon:t.selection.isAll()?Qv:t.selection.isAny()?M7:Kv,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,f?d.jsx(f,{table:t}):null]})}):null,t.visible.map(h=>{const b=h.def.header||(()=>null);return d.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(b,{table:t}),d.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&d.jsx(Yt,{icon:qR,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),d.jsx("th",{})]})}),t.isEmpty?null:d.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>d.jsx(fJ,{row:h,table:t,action:i,variant:s,tva:o,css:l},h.id))})]})}),t.isEmpty?d.jsx(r,{}):null,d.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[d.jsx("div",{}),d.jsx(kR,{...n})]})]})},pi=[];for(let t=0;t<256;++t)pi.push((t+256).toString(16).slice(1));function pJ(t,e=0){return(pi[t[e+0]]+pi[t[e+1]]+pi[t[e+2]]+pi[t[e+3]]+"-"+pi[t[e+4]]+pi[t[e+5]]+"-"+pi[t[e+6]]+pi[t[e+7]]+"-"+pi[t[e+8]]+pi[t[e+9]]+"-"+pi[t[e+10]]+pi[t[e+11]]+pi[t[e+12]]+pi[t[e+13]]+pi[t[e+14]]+pi[t[e+15]]).toLowerCase()}let k0;const hJ=new Uint8Array(16);function mJ(){if(!k0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k0=crypto.getRandomValues.bind(crypto)}return k0(hJ)}const gJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JR={randomUUID:gJ};function ZR(t,e,n){if(JR.randomUUID&&!t)return JR.randomUUID();t=t||{};const r=t.random??t.rng?.()??mJ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pJ(r)}const Lr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:l})=>{const u={...s?.value||{}},f=YT(u),p=new Set(o?.value),h=t.map(x=>({id:ZR(),def:x,filter:x.filter?{is(){return x.filter?f.get(x.filter.path)!==void 0:!1},reset(){x.filter&&f.set(x.filter.path,void 0),s?.set({...u})},shallow(_,E){x.filter&&f.set(_,E),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),b=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const E=e.indexOf(x.def.name),N=e.indexOf(_.def.name);return(E===-1?1/0:E)-(N===-1?1/0:N)});return{columns:h,visible:b,rows:i?.map(x=>({id:ZR(),data:x,cells:b.map(_=>({column:_,data:x,value:YT(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){f.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:l}},Mr=()=>t=>t,JD=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return d.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>d.jsx(yi,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||d.jsx(X,{label:"No tags (label)"})})},yJ=xn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),xf=({icon:t,title:e,subtitle:n,variant:r,tva:i=yJ,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return d.jsxs("div",{className:o.base(),children:[d.jsxs("div",{className:o.title(),children:[t?d.jsx(Yt,{icon:t}):null,e]}),n?d.jsx("div",{className:o.subtitle(),children:n}):null]})};var ny={},YR;function bJ(){if(YR)return ny;YR=1;var t=G3();return ny.createRoot=t.createRoot,ny.hydrateRoot=t.hydrateRoot,ny}var vJ=bJ();const xJ=uo(vJ),vN=C4()({component:()=>d.jsxs(d.Fragment,{children:[d.jsx(J4,{}),d.jsx(fo,{})]})}),wJ="modulepreload",_J=function(t){return"/"+t},XR={},eO=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=_J(u),u in XR)return;XR[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":wJ,f||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),f)return new Promise((b,x)=>{h.addEventListener("load",b),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},SJ=Dt("/$locale")({component:fo,loader:async({params:{locale:t}})=>{try{sa.push((await EJ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function EJ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return eO(()=>import("./cs-DKwp3jby.js"),[]);case"../translation/en":case"../translation/en.yaml":return eO(()=>import("./en-DAdE-tts.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const ZD="cs",IJ=[ZD,"en"],NJ=Dt("/")({loader:async()=>{throw Xh({to:"/$locale",params:{locale:D5({available:IJ,fallback:ZD})}})}}),kJ=Dt("/$locale/")({component:()=>{const{locale:t}=en({from:"/$locale"});return d.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:d.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[d.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),d.jsx("ul",{children:d.jsx("li",{children:d.jsx(Tt,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:kt,bootstrap:CJ}=T7({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(jr`CURRENT_TIMESTAMP`).notNull()).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute(),await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("color","varchar(128)",r=>r.notNull().defaultTo("slate")).addColumn("minWidth","integer",r=>r.notNull()).addColumn("maxWidth","integer",r=>r.notNull()).addColumn("minHeight","integer",r=>r.notNull()).addColumn("maxHeight","integer",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).execute(),await t.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute(),await t.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await t.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","integer",r=>r.notNull()).addColumn("y","integer",r=>r.notNull()).addColumn("width","integer",r=>r.notNull()).addColumn("height","integer",r=>r.notNull()).execute(),await t.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute(),await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Region] blueprintId-regionId",["blueprintId","regionId"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute(),await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Route_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("routeId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] routeId",["routeId"],"Route",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addColumn("amount","float4").addColumn("priority","integer",r=>r.notNull().defaultTo(0)).execute()}}}),jJ=Dt("/$locale/apps/derivean")({loader:CJ}),YD="icon-[proicons--game]",TJ=xn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),XD=({variant:t,tva:e=TJ,css:n})=>{const r=e({...t,css:n}).slots;return d.jsx("div",{className:r.base(),children:"DeRivean"})},Bo="icon-[fluent--building-shop-20-regular]",Kb="icon-[oui--vis-map-region]",zn="icon-[hugeicons--resources-add]",RJ=t=>{const{locale:e}=en({from:"/$locale"});return d.jsxs(yu,{...t,children:[d.jsx(tr,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:d.jsx(X,{label:"Editor (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:d.jsx(X,{label:"Blueprint list (menu)"})}),d.jsx(tr,{icon:Kb,to:"/$locale/apps/derivean/root/region/list",params:{locale:e},children:d.jsx(X,{label:"Region list (menu)"})}),d.jsx(tr,{icon:zn,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(X,{label:"Resource list (menu)"})}),d.jsx(tr,{icon:yN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:d.jsx(X,{label:"User list (menu)"})}),d.jsx(tr,{icon:Dh,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:d.jsx(X,{label:"Tag list (menu)"})})]})},_m=F.object({id:F.string(),name:F.string(),login:F.string()}),OJ=Dt("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return _m.parse(yf.get("session"))}catch{throw Xh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=en({from:"/$locale"}),{session:e}=li({from:"/$locale/apps/derivean/root"});return d.jsx(VD,{logo:d.jsx(Tt,{to:"/$locale/apps/derivean/root",params:{locale:t},children:d.jsx(XD,{})}),menu:d.jsx(RJ,{}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(Tt,{icon:YD,to:"/$locale/apps/derivean/game",params:{locale:t}}),d.jsx(Tt,{icon:gN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}}),qJ=Dt("/$locale/apps/derivean/map")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return _m.parse(yf.get("session"))}catch{throw Xh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}}}),AJ=Dt("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return _m.parse(yf.get("session"))}catch{throw Xh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=en({from:"/$locale"}),{session:e}=li({from:"/$locale/apps/derivean/game"}),n=$B({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return d.jsx(VD,{logo:d.jsx(Tt,{to:"/$locale/apps/derivean/game",params:{locale:t},children:d.jsx(XD,{})}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(Tt,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),d.jsx(Tt,{icon:gN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:n.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:d.jsx(fo,{})})}});var Fy={exports:{}},PJ=Fy.exports,tO;function FJ(){return tO||(tO=1,function(t,e){(function(n,r){r()})(PJ,function(){function n(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,p,h){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){u(b.response,p,h)},b.onerror=function(){console.error("could not download file")},b.send()}function i(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $c=="object"&&$c.global===$c?$c:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(f,p,h){var b=o.URL||o.webkitURL,x=document.createElement("a");p=p||f.name||"download",x.download=p,x.rel="noopener",typeof f=="string"?(x.href=f,x.origin===location.origin?s(x):i(x.href)?r(f,p,h):s(x,x.target="_blank")):(x.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,h){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,h),p);else if(i(f))r(f,p,h);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){s(b)})}}:function(f,p,h,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return r(f,p,h);var x=f.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||x&&_||l)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var R=N.result;R=E?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=R:location=R,b=null},N.readAsDataURL(f)}else{var j=o.URL||o.webkitURL,C=j.createObjectURL(f);b?b.location=C:location.href=C,b=null,setTimeout(function(){j.revokeObjectURL(C)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(Fy)),Fy.exports}var DJ=FJ();const LJ=uo(DJ),C0=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Region","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],MJ=Dt("/$locale/apps/derivean/root/")({component(){const t=Zt({mutationKey:["export"],async mutationFn(){return Rn.promise((async()=>{const e=[];await kt.transaction().execute(async n=>{for await(const r of C0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),LJ.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),ei("Export game files"))}});return d.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[d.jsx(BG,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await jr`PRAGMA foreign_keys = OFF`.execute(kt),await Rn.promise(kt.transaction().execute(async i=>{for await(const{source:s}of r){const o=C0.find(l=>l===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const l=C0.find(u=>u===s);if(l)for await(const u of Object.values(o))await i.insertInto(l).values(u).execute()}}),ei("Import game files")),await jr`PRAGMA foreign_keys = ON`.execute(kt)}}),d.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:d.jsx(dn,{iconEnabled:YD,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:d.jsx(X,{label:"Export game files (label)"})})}),d.jsx("h2",{children:"TODO"}),d.jsxs("ul",{className:"flex flex-col gap-2",children:[d.jsx("li",{children:"Fix Cycles as it's not bound to the Map."}),d.jsxs("li",{children:[d.jsx("p",{children:"Idea of lands; define lands in root, their size boundaries (will be randomized), available resources (may be randomized)."}),d.jsx("p",{children:"Here may be time for citizens, like geologist who will investigate a land to find, what's in there."}),d.jsx("p",{children:"Generate land into a map (so there will be Land as definition and Land as an instance)."}),d.jsx("p",{children:"For start, list all lands + zoom to land."})]}),d.jsx("li",{children:"Fetch production on building from production next to prod* ids on the building."}),d.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),d.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),d.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),d.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),d.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),d.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),d.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),d.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),d.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),d.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),d.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var Sm=t=>t.type==="checkbox",Hc=t=>t instanceof Date,zi=t=>t==null;const e2=t=>typeof t=="object";var Wr=t=>!zi(t)&&!Array.isArray(t)&&e2(t)&&!Hc(t),t2=t=>Wr(t)&&t.target?Sm(t.target)?t.target.checked:t.target.value:t,$J=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,n2=(t,e)=>t.has($J(e)),BJ=t=>{const e=t.constructor&&t.constructor.prototype;return Wr(e)&&e.hasOwnProperty("isPrototypeOf")},xN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cs(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(xN&&(t instanceof Blob||r))&&(n||Wr(t)))if(e=n?[]:{},!n&&!BJ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=cs(t[i]));else return t;return e}var Jv=t=>Array.isArray(t)?t.filter(Boolean):[],Br=t=>t===void 0,Et=(t,e,n)=>{if(!e||!Wr(t))return n;const r=Jv(e.split(/[,[\].]+?/)).reduce((i,s)=>zi(i)?i:i[s],t);return Br(r)||r===t?Br(t[e])?n:t[e]:r},io=t=>typeof t=="boolean",wN=t=>/^\w*$/.test(t),r2=t=>Jv(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Vn=(t,e,n)=>{let r=-1;const i=wN(e)?[e]:r2(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let u=n;if(r!==o){const f=t[l];u=Wr(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}return t};const Qb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Co={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ta={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},zJ=Bn.createContext(null),_N=()=>Bn.useContext(zJ);var i2=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Co.all&&(e._proxyFormState[o]=!r||Co.all),n&&(n[o]=!0),t[o]}});return i},us=t=>Wr(t)&&!Object.keys(t).length,s2=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return us(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Co.all))},oh=t=>Array.isArray(t)?t:[t],o2=(t,e,n)=>!t||!e||t===e||oh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function SN(t){const e=Bn.useRef(t);e.current=t,Bn.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function WJ(t){const e=_N(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,l]=Bn.useState(n._formState),u=Bn.useRef(!0),f=Bn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Bn.useRef(i);return p.current=i,SN({disabled:r,next:h=>u.current&&o2(p.current,h.name,s)&&s2(h,f.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),Bn.useEffect(()=>(u.current=!0,f.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),Bn.useMemo(()=>i2(o,n,f.current,!1),[o,n])}var ea=t=>typeof t=="string",a2=(t,e,n,r,i)=>ea(t)?(r&&e.watch.add(t),Et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Et(n,s))):(r&&(e.watchAll=!0),n);function VJ(t){const e=_N(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,l=Bn.useRef(r);l.current=r,SN({disabled:s,subject:n._subjects.values,next:p=>{o2(l.current,p.name,o)&&f(cs(a2(l.current,n._names,p.values||n._formValues,!1,i)))}});const[u,f]=Bn.useState(n._getWatch(r,i));return Bn.useEffect(()=>n._removeUnmounted()),u}function UJ(t){const e=_N(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=n2(i._names.array,n),l=VJ({control:i,name:n,defaultValue:Et(i._formValues,n,Et(i._defaultValues,n,t.defaultValue)),exact:!0}),u=WJ({control:i,name:n,exact:!0}),f=Bn.useRef(i.register(n,{...t.rules,value:l,...io(t.disabled)?{disabled:t.disabled}:{}})),p=Bn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(u.validatingFields,n)},error:{enumerable:!0,get:()=>Et(u.errors,n)}}),[u,n]),h=Bn.useMemo(()=>({name:n,value:l,...io(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:b=>f.current.onChange({target:{value:t2(b),name:n},type:Qb.CHANGE}),onBlur:()=>f.current.onBlur({target:{value:Et(i._formValues,n),name:n},type:Qb.BLUR}),ref:b=>{const x=Et(i._fields,n);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})}}),[n,i._formValues,r,u.disabled,l,i._fields]);return Bn.useEffect(()=>{const b=i._options.shouldUnregister||s,x=(_,E)=>{const N=Et(i._fields,_);N&&N._f&&(N._f.mount=E)};if(x(n,!0),b){const _=cs(Et(i._options.defaultValues,n));Vn(i._defaultValues,n,_),Br(Et(i._formValues,n))&&Vn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?b&&!i._state.action:b)?i.unregister(n):x(n,!1)}},[n,i,o,s]),Bn.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),Bn.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const qi=t=>t.render(UJ(t));var l2=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},nO=t=>({isOnSubmit:!t||t===Co.onSubmit,isOnBlur:t===Co.onBlur,isOnChange:t===Co.onChange,isOnAll:t===Co.all,isOnTouch:t===Co.onTouched}),rO=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ah=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Et(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(ah(l,e))break}else if(Wr(l)&&ah(l,e))break}}};var HJ=(t,e,n)=>{const r=oh(Et(t,n));return Vn(r,"root",e[n]),Vn(t,n,r),t},EN=t=>t.type==="file",Yo=t=>typeof t=="function",Gb=t=>{if(!xN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Dy=t=>ea(t),IN=t=>t.type==="radio",Jb=t=>t instanceof RegExp;const iO={value:!1,isValid:!1},sO={value:!0,isValid:!0};var c2=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Br(t[0].attributes.value)?Br(t[0].value)||t[0].value===""?sO:{value:t[0].value,isValid:!0}:sO:iO}return iO};const oO={isValid:!1,value:null};var u2=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,oO):oO;function aO(t,e,n="validate"){if(Dy(t)||Array.isArray(t)&&t.every(Dy)||io(t)&&!t)return{type:n,message:Dy(t)?t:"",ref:e}}var rd=t=>Wr(t)&&!Jb(t)?t:{value:t,message:""},lO=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:u,maxLength:f,minLength:p,min:h,max:b,pattern:x,validate:_,name:E,valueAsNumber:N,mount:j}=t._f,C=Et(n,E);if(!j||e.has(E))return{};const R=l?l[0]:o,q=V=>{i&&R.reportValidity&&(R.setCustomValidity(io(V)?"":V||""),R.reportValidity())},L={},M=IN(o),W=Sm(o),P=M||W,O=(N||EN(o))&&Br(o.value)&&Br(C)||Gb(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,z=l2.bind(null,E,r,L),D=(V,U,B,G=Ta.maxLength,Z=Ta.minLength)=>{const le=V?U:B;L[E]={type:V?G:Z,message:le,ref:o,...z(V?G:Z,le)}};if(s?!Array.isArray(C)||!C.length:u&&(!P&&(O||zi(C))||io(C)&&!C||W&&!c2(l).isValid||M&&!u2(l).isValid)){const{value:V,message:U}=Dy(u)?{value:!!u,message:u}:rd(u);if(V&&(L[E]={type:Ta.required,message:U,ref:R,...z(Ta.required,U)},!r))return q(U),L}if(!O&&(!zi(h)||!zi(b))){let V,U;const B=rd(b),G=rd(h);if(!zi(C)&&!isNaN(C)){const Z=o.valueAsNumber||C&&+C;zi(B.value)||(V=Z>B.value),zi(G.value)||(U=Z<G.value)}else{const Z=o.valueAsDate||new Date(C),le=oe=>new Date(new Date().toDateString()+" "+oe),ie=o.type=="time",ne=o.type=="week";ea(B.value)&&C&&(V=ie?le(C)>le(B.value):ne?C>B.value:Z>new Date(B.value)),ea(G.value)&&C&&(U=ie?le(C)<le(G.value):ne?C<G.value:Z<new Date(G.value))}if((V||U)&&(D(!!V,B.message,G.message,Ta.max,Ta.min),!r))return q(L[E].message),L}if((f||p)&&!O&&(ea(C)||s&&Array.isArray(C))){const V=rd(f),U=rd(p),B=!zi(V.value)&&C.length>+V.value,G=!zi(U.value)&&C.length<+U.value;if((B||G)&&(D(B,V.message,U.message),!r))return q(L[E].message),L}if(x&&!O&&ea(C)){const{value:V,message:U}=rd(x);if(Jb(V)&&!C.match(V)&&(L[E]={type:Ta.pattern,message:U,ref:o,...z(Ta.pattern,U)},!r))return q(U),L}if(_){if(Yo(_)){const V=await _(C,n),U=aO(V,R);if(U&&(L[E]={...U,...z(Ta.validate,U.message)},!r))return q(U.message),L}else if(Wr(_)){let V={};for(const U in _){if(!us(V)&&!r)break;const B=aO(await _[U](C,n),R,U);B&&(V={...B,...z(U,B.message)},q(B.message),r&&(L[E]=V))}if(!us(V)&&(L[E]={ref:R,...V},!r))return L}}return q(!0),L};function KJ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Br(t)?r++:t[e[r++]];return t}function QJ(t){for(const e in t)if(t.hasOwnProperty(e)&&!Br(t[e]))return!1;return!0}function ii(t,e){const n=Array.isArray(e)?e:wN(e)?[e]:r2(e),r=n.length===1?t:KJ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Wr(r)&&us(r)||Array.isArray(r)&&QJ(r))&&ii(t,n.slice(0,-1)),t}var j0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},BE=t=>zi(t)||!e2(t);function Pl(t,e){if(BE(t)||BE(e))return t===e;if(Hc(t)&&Hc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Hc(s)&&Hc(o)||Wr(s)&&Wr(o)||Array.isArray(s)&&Array.isArray(o)?!Pl(s,o):s!==o)return!1}}return!0}var d2=t=>t.type==="select-multiple",GJ=t=>IN(t)||Sm(t),T0=t=>Gb(t)&&t.isConnected,f2=t=>{for(const e in t)if(Yo(t[e]))return!0;return!1};function Zb(t,e={}){const n=Array.isArray(t);if(Wr(t)||n)for(const r in t)Array.isArray(t[r])||Wr(t[r])&&!f2(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Zb(t[r],e[r])):zi(t[r])||(e[r]=!0);return e}function p2(t,e,n){const r=Array.isArray(t);if(Wr(t)||r)for(const i in t)Array.isArray(t[i])||Wr(t[i])&&!f2(t[i])?Br(e)||BE(n[i])?n[i]=Array.isArray(t[i])?Zb(t[i],[]):{...Zb(t[i])}:p2(t[i],zi(e)?{}:e[i],n[i]):n[i]=!Pl(t[i],e[i]);return n}var xp=(t,e)=>p2(t,e,Zb(e)),h2=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Br(t)?t:e?t===""?NaN:t&&+t:n&&ea(t)?new Date(t):r?r(t):t;function R0(t){const e=t.ref;return EN(e)?e.files:IN(e)?u2(t.refs).value:d2(e)?[...e.selectedOptions].map(({value:n})=>n):Sm(e)?c2(t.refs).value:h2(Br(e.value)?t.ref.value:e.value,t)}var JJ=(t,e,n,r)=>{const i={};for(const s of t){const o=Et(e,s);o&&Vn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},wp=t=>Br(t)?t:Jb(t)?t.source:Wr(t)?Jb(t.value)?t.value.source:t.value:t;const cO="AsyncFunction";var ZJ=t=>!!t&&!!t.validate&&!!(Yo(t.validate)&&t.validate.constructor.name===cO||Wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===cO)),YJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function uO(t,e,n){const r=Et(t,n);if(r||wN(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Et(e,s),l=Et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var XJ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,eZ=(t,e)=>!Jv(Et(t,e)).length&&ii(t,e);const tZ={mode:Co.onSubmit,reValidateMode:Co.onChange,shouldFocusError:!0};function nZ(t={}){let e={...tZ,...t},n={submitCount:0,isDirty:!1,isLoading:Yo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Wr(e.defaultValues)||Wr(e.values)?cs(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:cs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:j0(),array:j0(),state:j0()},b=nO(e.mode),x=nO(e.reValidateMode),_=e.criteriaMode===Co.all,E=xe=>be=>{clearTimeout(f),f=setTimeout(xe,be)},N=async xe=>{if(!e.disabled&&(p.isValid||xe)){const be=e.resolver?us((await P()).errors):await z(r,!0);be!==n.isValid&&h.state.next({isValid:be})}},j=(xe,be)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(l.mount)).forEach(Ne=>{Ne&&(be?Vn(n.validatingFields,Ne,be):ii(n.validatingFields,Ne))}),h.state.next({validatingFields:n.validatingFields,isValidating:!us(n.validatingFields)}))},C=(xe,be=[],Ne,Ae,Ue=!0,rt=!0)=>{if(Ae&&Ne&&!e.disabled){if(o.action=!0,rt&&Array.isArray(Et(r,xe))){const Me=Ne(Et(r,xe),Ae.argA,Ae.argB);Ue&&Vn(r,xe,Me)}if(rt&&Array.isArray(Et(n.errors,xe))){const Me=Ne(Et(n.errors,xe),Ae.argA,Ae.argB);Ue&&Vn(n.errors,xe,Me),eZ(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(Et(n.touchedFields,xe))){const Me=Ne(Et(n.touchedFields,xe),Ae.argA,Ae.argB);Ue&&Vn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=xp(i,s)),h.state.next({name:xe,isDirty:V(xe,be),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Vn(s,xe,be)},R=(xe,be)=>{Vn(n.errors,xe,be),h.state.next({errors:n.errors})},q=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},L=(xe,be,Ne,Ae)=>{const Ue=Et(r,xe);if(Ue){const rt=Et(s,xe,Br(Ne)?Et(i,xe):Ne);Br(rt)||Ae&&Ae.defaultChecked||be?Vn(s,xe,be?rt:R0(Ue._f)):G(xe,rt),o.mount&&N()}},M=(xe,be,Ne,Ae,Ue)=>{let rt=!1,Me=!1;const ut={name:xe};if(!e.disabled){const Qt=!!(Et(r,xe)&&Et(r,xe)._f&&Et(r,xe)._f.disabled);if(!Ne||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ut.isDirty=V(),rt=Me!==ut.isDirty);const Gt=Qt||Pl(Et(i,xe),be);Me=!!(!Qt&&Et(n.dirtyFields,xe)),Gt||Qt?ii(n.dirtyFields,xe):Vn(n.dirtyFields,xe,!0),ut.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Gt}if(Ne){const Gt=Et(n.touchedFields,xe);Gt||(Vn(n.touchedFields,xe,Ne),ut.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Gt!==Ne)}rt&&Ue&&h.state.next(ut)}return rt?ut:{}},W=(xe,be,Ne,Ae)=>{const Ue=Et(n.errors,xe),rt=p.isValid&&io(be)&&n.isValid!==be;if(e.delayError&&Ne?(u=E(()=>R(xe,Ne)),u(e.delayError)):(clearTimeout(f),u=null,Ne?Vn(n.errors,xe,Ne):ii(n.errors,xe)),(Ne?!Pl(Ue,Ne):Ue)||!us(Ae)||rt){const Me={...Ae,...rt&&io(be)?{isValid:be}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{j(xe,!0);const be=await e.resolver(s,e.context,JJ(xe||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return j(xe),be},O=async xe=>{const{errors:be}=await P(xe);if(xe)for(const Ne of xe){const Ae=Et(be,Ne);Ae?Vn(n.errors,Ne,Ae):ii(n.errors,Ne)}else n.errors=be;return be},z=async(xe,be,Ne={valid:!0})=>{for(const Ae in xe){const Ue=xe[Ae];if(Ue){const{_f:rt,...Me}=Ue;if(rt){const ut=l.array.has(rt.name),Qt=Ue._f&&ZJ(Ue._f);Qt&&p.validatingFields&&j([Ae],!0);const Gt=await lO(Ue,l.disabled,s,_,e.shouldUseNativeValidation&&!be,ut);if(Qt&&p.validatingFields&&j([Ae]),Gt[rt.name]&&(Ne.valid=!1,be))break;!be&&(Et(Gt,rt.name)?ut?HJ(n.errors,Gt,rt.name):Vn(n.errors,rt.name,Gt[rt.name]):ii(n.errors,rt.name))}!us(Me)&&await z(Me,be,Ne)}}return Ne.valid},D=()=>{for(const xe of l.unMount){const be=Et(r,xe);be&&(be._f.refs?be._f.refs.every(Ne=>!T0(Ne)):!T0(be._f.ref))&&Ie(xe)}l.unMount=new Set},V=(xe,be)=>!e.disabled&&(xe&&be&&Vn(s,xe,be),!Pl(te(),i)),U=(xe,be,Ne)=>a2(xe,l,{...o.mount?s:Br(be)?i:ea(xe)?{[xe]:be}:be},Ne,be),B=xe=>Jv(Et(o.mount?s:i,xe,e.shouldUnregister?Et(i,xe,[]):[])),G=(xe,be,Ne={})=>{const Ae=Et(r,xe);let Ue=be;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&Vn(s,xe,h2(be,rt)),Ue=Gb(rt.ref)&&zi(be)?"":be,d2(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ue.includes(Me.value)):rt.refs?Sm(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ue)?!!Ue.find(ut=>ut===Me.value):Ue===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ue):rt.refs.forEach(Me=>Me.checked=Me.value===Ue):EN(rt.ref)?rt.ref.value="":(rt.ref.value=Ue,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(Ne.shouldDirty||Ne.shouldTouch)&&M(xe,Ue,Ne.shouldTouch,Ne.shouldDirty,!0),Ne.shouldValidate&&oe(xe)},Z=(xe,be,Ne)=>{for(const Ae in be){const Ue=be[Ae],rt=`${xe}.${Ae}`,Me=Et(r,rt);(l.array.has(xe)||Wr(Ue)||Me&&!Me._f)&&!Hc(Ue)?Z(rt,Ue,Ne):G(rt,Ue,Ne)}},le=(xe,be,Ne={})=>{const Ae=Et(r,xe),Ue=l.array.has(xe),rt=cs(be);Vn(s,xe,rt),Ue?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&Ne.shouldDirty&&h.state.next({name:xe,dirtyFields:xp(i,s),isDirty:V(xe,rt)})):Ae&&!Ae._f&&!zi(rt)?Z(xe,rt,Ne):G(xe,rt,Ne),rO(xe,l)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},ie=async xe=>{o.mount=!0;const be=xe.target;let Ne=be.name,Ae=!0;const Ue=Et(r,Ne),rt=()=>be.type?R0(Ue._f):t2(xe),Me=ut=>{Ae=Number.isNaN(ut)||Hc(ut)&&isNaN(ut.getTime())||Pl(ut,Et(s,Ne,ut))};if(Ue){let ut,Qt;const Gt=rt(),bn=xe.type===Qb.BLUR||xe.type===Qb.FOCUS_OUT,lr=!YJ(Ue._f)&&!e.resolver&&!Et(n.errors,Ne)&&!Ue._f.deps||XJ(bn,Et(n.touchedFields,Ne),n.isSubmitted,x,b),Ln=rO(Ne,l,bn);Vn(s,Ne,Gt),bn?(Ue._f.onBlur&&Ue._f.onBlur(xe),u&&u(0)):Ue._f.onChange&&Ue._f.onChange(xe);const Kr=M(Ne,Gt,bn,!1),Di=!us(Kr)||Ln;if(!bn&&h.values.next({name:Ne,type:xe.type,values:{...s}}),lr)return p.isValid&&(e.mode==="onBlur"&&bn?N():bn||N()),Di&&h.state.next({name:Ne,...Ln?{}:Kr});if(!bn&&Ln&&h.state.next({...n}),e.resolver){const{errors:_r}=await P([Ne]);if(Me(Gt),Ae){const Jt=uO(n.errors,r,Ne),Zi=uO(_r,r,Jt.name||Ne);ut=Zi.error,Ne=Zi.name,Qt=us(_r)}}else j([Ne],!0),ut=(await lO(Ue,l.disabled,s,_,e.shouldUseNativeValidation))[Ne],j([Ne]),Me(Gt),Ae&&(ut?Qt=!1:p.isValid&&(Qt=await z(r,!0)));Ae&&(Ue._f.deps&&oe(Ue._f.deps),W(Ne,Qt,ut,Kr))}},ne=(xe,be)=>{if(Et(n.errors,be)&&xe.focus)return xe.focus(),1},oe=async(xe,be={})=>{let Ne,Ae;const Ue=oh(xe);if(e.resolver){const rt=await O(Br(xe)?xe:Ue);Ne=us(rt),Ae=xe?!Ue.some(Me=>Et(rt,Me)):Ne}else xe?(Ae=(await Promise.all(Ue.map(async rt=>{const Me=Et(r,rt);return await z(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&N()):Ae=Ne=await z(r);return h.state.next({...!ea(xe)||p.isValid&&Ne!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Ne}:{},errors:n.errors}),be.shouldFocus&&!Ae&&ah(r,ne,xe?Ue:l.mount),Ae},te=xe=>{const be={...o.mount?s:i};return Br(xe)?be:ea(xe)?Et(be,xe):xe.map(Ne=>Et(be,Ne))},ue=(xe,be)=>({invalid:!!Et((be||n).errors,xe),isDirty:!!Et((be||n).dirtyFields,xe),error:Et((be||n).errors,xe),isValidating:!!Et(n.validatingFields,xe),isTouched:!!Et((be||n).touchedFields,xe)}),de=xe=>{xe&&oh(xe).forEach(be=>ii(n.errors,be)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,be,Ne)=>{const Ae=(Et(r,xe,{_f:{}})._f||{}).ref,Ue=Et(n.errors,xe)||{},{ref:rt,message:Me,type:ut,...Qt}=Ue;Vn(n.errors,xe,{...Qt,...be,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),Ne&&Ne.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},we=(xe,be)=>Yo(xe)?h.values.subscribe({next:Ne=>xe(U(void 0,be),Ne)}):U(xe,be,!0),Ie=(xe,be={})=>{for(const Ne of xe?oh(xe):l.mount)l.mount.delete(Ne),l.array.delete(Ne),be.keepValue||(ii(r,Ne),ii(s,Ne)),!be.keepError&&ii(n.errors,Ne),!be.keepDirty&&ii(n.dirtyFields,Ne),!be.keepTouched&&ii(n.touchedFields,Ne),!be.keepIsValidating&&ii(n.validatingFields,Ne),!e.shouldUnregister&&!be.keepDefaultValue&&ii(i,Ne);h.values.next({values:{...s}}),h.state.next({...n,...be.keepDirty?{isDirty:V()}:{}}),!be.keepIsValid&&N()},ze=({disabled:xe,name:be,field:Ne,fields:Ae})=>{(io(xe)&&o.mount||xe||l.disabled.has(be))&&(xe?l.disabled.add(be):l.disabled.delete(be),M(be,R0(Ne?Ne._f:Et(Ae,be)._f),!1,!1,!0))},Re=(xe,be={})=>{let Ne=Et(r,xe);const Ae=io(be.disabled)||io(e.disabled);return Vn(r,xe,{...Ne||{},_f:{...Ne&&Ne._f?Ne._f:{ref:{name:xe}},name:xe,mount:!0,...be}}),l.mount.add(xe),Ne?ze({field:Ne,disabled:io(be.disabled)?be.disabled:e.disabled,name:xe}):L(xe,!0,be.value),{...Ae?{disabled:be.disabled||e.disabled}:{},...e.progressive?{required:!!be.required,min:wp(be.min),max:wp(be.max),minLength:wp(be.minLength),maxLength:wp(be.maxLength),pattern:wp(be.pattern)}:{},name:xe,onChange:ie,onBlur:ie,ref:Ue=>{if(Ue){Re(xe,be),Ne=Et(r,xe);const rt=Br(Ue.value)&&Ue.querySelectorAll&&Ue.querySelectorAll("input,select,textarea")[0]||Ue,Me=GJ(rt),ut=Ne._f.refs||[];if(Me?ut.find(Qt=>Qt===rt):rt===Ne._f.ref)return;Vn(r,xe,{_f:{...Ne._f,...Me?{refs:[...ut.filter(T0),rt,...Array.isArray(Et(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),L(xe,!1,void 0,rt)}else Ne=Et(r,xe,{}),Ne._f&&(Ne._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(n2(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},De=()=>e.shouldFocusError&&ah(r,ne,l.mount),Je=xe=>{io(xe)&&(h.state.next({disabled:xe}),ah(r,(be,Ne)=>{const Ae=Et(r,Ne);Ae&&(be.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ue=>{Ue.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,be)=>async Ne=>{let Ae;Ne&&(Ne.preventDefault&&Ne.preventDefault(),Ne.persist&&Ne.persist());let Ue=cs(s);if(l.disabled.size)for(const rt of l.disabled)Vn(Ue,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ue=Me}else await z(r);if(ii(n.errors,"root"),us(n.errors)){h.state.next({errors:{}});try{await xe(Ue,Ne)}catch(rt){Ae=rt}}else be&&await be({...n.errors},Ne),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:us(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ve=(xe,be={})=>{Et(r,xe)&&(Br(be.defaultValue)?le(xe,cs(Et(i,xe))):(le(xe,be.defaultValue),Vn(i,xe,cs(be.defaultValue))),be.keepTouched||ii(n.touchedFields,xe),be.keepDirty||(ii(n.dirtyFields,xe),n.isDirty=be.defaultValue?V(xe,cs(Et(i,xe))):V()),be.keepError||(ii(n.errors,xe),p.isValid&&N()),h.state.next({...n}))},ct=(xe,be={})=>{const Ne=xe?cs(xe):i,Ae=cs(Ne),Ue=us(xe),rt=Ue?i:Ae;if(be.keepDefaultValues||(i=Ne),!be.keepValues){if(be.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(xp(i,s))]);for(const ut of Array.from(Me))Et(n.dirtyFields,ut)?Vn(rt,ut,Et(s,ut)):le(ut,Et(rt,ut))}else{if(xN&&Br(xe))for(const Me of l.mount){const ut=Et(r,Me);if(ut&&ut._f){const Qt=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(Gb(Qt)){const Gt=Qt.closest("form");if(Gt){Gt.reset();break}}}}r={}}s=e.shouldUnregister?be.keepDefaultValues?cs(i):{}:cs(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}l={mount:be.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?n.submitCount:0,isDirty:Ue?!1:be.keepDirty?n.isDirty:!!(be.keepDefaultValues&&!Pl(xe,i)),isSubmitted:be.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ue?{}:be.keepDirtyValues?be.keepDefaultValues&&s?xp(i,s):n.dirtyFields:be.keepDefaultValues&&xe?xp(i,xe):be.keepDirty?n.dirtyFields:{},touchedFields:be.keepTouched?n.touchedFields:{},errors:be.keepErrors?n.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_t=(xe,be)=>ct(Yo(xe)?xe(s):xe,be);return{control:{register:Re,unregister:Ie,getFieldState:ue,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:U,_getDirty:V,_updateValid:N,_removeUnmounted:D,_updateFieldArray:C,_updateDisabledField:ze,_getFieldArray:B,_reset:ct,_resetDefaultValues:()=>Yo(e.defaultValues)&&e.defaultValues().then(xe=>{_t(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:q,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:Re,handleSubmit:Xe,watch:we,setValue:le,getValues:te,reset:_t,resetField:Ve,clearErrors:de,unregister:Ie,setError:ye,setFocus:(xe,be={})=>{const Ne=Et(r,xe),Ae=Ne&&Ne._f;if(Ae){const Ue=Ae.refs?Ae.refs[0]:Ae.ref;Ue.focus&&(Ue.focus(),be.shouldSelect&&Yo(Ue.select)&&Ue.select())}},getFieldState:ue}}function xi(t={}){const e=Bn.useRef(void 0),n=Bn.useRef(void 0),[r,i]=Bn.useState({isDirty:!1,isValidating:!1,isLoading:Yo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Yo(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...nZ(t),formState:r});const s=e.current.control;return s._options=t,SN({subject:s._subjects.state,next:o=>{s2(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Bn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Bn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Bn.useEffect(()=>{t.values&&!Pl(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Bn.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Bn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Bn.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=i2(r,s),e.current}const dO=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},m2=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?dO(r.ref,n,t):r.refs&&r.refs.forEach(i=>dO(i,n,t))}},rZ=(t,e)=>{e.shouldUseNativeValidation&&m2(t,e);const n={};for(const r in t){const i=Et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(iZ(e.names||Object.keys(t),r)){const o=Object.assign({},Et(n,r));Vn(o,"root",s),Vn(n,r,o)}else Vn(n,r,s)}return n},iZ=(t,e)=>t.some(n=>n.startsWith(e+"."));var sZ=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,f=u&&u[r.code];n[o]=l2(o,e,n,i,f?[].concat(f,r.message):r.message)}t.shift()}return n},wi=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return s.shouldUseNativeValidation&&m2({},s),{errors:{},values:n.raw?r:f}})}catch(f){return l(f)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l?.errors)}(o))return{values:{},errors:rZ(sZ(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Yb="icon-[cil--arrow-right]",g2="icon-[et--map]",oZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({name:F.string().min(1),cycles:F.number().int(),sort:F.number().int(),limit:F.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),aZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintId:F.string().min(1),conflictId:F.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),lZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintId:F.string().min(1),dependencyId:F.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),cZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintId:F.string().min(1),inventoryId:F.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),uZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintId:F.string().min(1),resourceId:F.string().min(1),amount:F.number(),cycles:F.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),dZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintProductionId:F.string().min(1),blueprintId:F.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),fZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintProductionId:F.string().min(1),resourceId:F.string().min(1),amount:F.number(),passive:Qi()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),pZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintProductionId:F.string().min(1),resourceId:F.string().min(1),amount:F.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),hZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({blueprintId:F.string().min(1),resourceId:F.string().min(1),amount:F.number(),passive:Qi()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),mZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({userId:F.string().min(1),blueprintId:F.string().min(1),constructionId:F.string().nullish(),landId:F.string().min(1),productionId:F.string().nullish(),recurringProductionId:F.string().nullish(),x:F.number(),y:F.number(),valid:Qi()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","landId","productionId","recurringProductionId","x","y","valid"]}),gZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({resourceId:F.string().min(1),amount:F.number(),limit:F.number(),type:F.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),yZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({userId:F.string().min(1),name:F.string().min(1)})),shape:t,filter:e,sort:["id","userId","name"]}),bZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({name:F.string().min(1),color:F.string().min(1),minWidth:F.number().int(),maxWidth:F.number().int(),minHeight:F.number().int(),maxHeight:F.number().int(),probability:F.number().int(),limit:F.number().int()})),shape:t,filter:e,sort:["id","name","color","minWidth","maxWidth","minHeight","maxHeight","probability","limit"]}),vZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({name:F.string().min(1),transport:F.number()})),shape:t,filter:e,sort:["id","name","transport"]}),xZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({code:F.string().min(1),label:F.string().min(1),group:F.string().nullish(),sort:F.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),wZ=({shape:t,filter:e})=>Fi({entity:Ai.merge(F.object({name:F.string().min(1),login:F.string().min(1),password:F.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),_Z=yZ({shape:F.object({name:F.string().min(1)}),filter:Pi});function SZ(t){return Math.random()<t/100}function fO(t,e){return Math.floor(Math.random()*(e-t+1))+t}function EZ(t=20480,e=32){const n=()=>Math.floor(Math.random()*(t/e))*e;return{x:n(),y:n()}}async function IZ(t,e,n,r){return!!await t.selectFrom("Land as l").where("l.mapId","=",e).where(s=>s.not(s.or([s("l.x",">=",n.x+r.width),s(jr`l.x + l.width`,"<=",n.x),s("l.y",">=",n.y+r.height),s(jr`l.y + l.height`,"<=",n.y)]))).select("id").executeTakeFirst()}const NZ=async({tx:t,userId:e,name:n,size:r={world:32,land:384*2}})=>{const i=await t.insertInto("Map").values({id:Tn(),userId:e,name:n}).returning("id").executeTakeFirstOrThrow(),s=await t.selectFrom("Region").selectAll().execute();for await(const{id:o,probability:l,limit:u,minWidth:f,maxWidth:p,minHeight:h,maxHeight:b}of s)for(let x=0;x<u;x++){if(!SZ(l))continue;let _=0;const E=10;for(;_<E;){const N=fO(f,p)*r.land+64,j=fO(h,b)*r.land+64,C=EZ(4096*r.world);if(!await IZ(t,i.id,C,{width:N,height:j})){await t.insertInto("Land").values({id:Tn(),height:j,width:N,regionId:o,mapId:i.id,...C}).execute();break}_++}}return i},kZ=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(_Z.shape),defaultValues:{name:"",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"name",label:d.jsx(X,{label:"Map name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:g2,type:"submit",children:d.jsx(X,{label:"Create map (submit)"})})})]})},y2=Dt("/$locale/apps/derivean/game/")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,map:await t.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>Cr({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:F.object({id:F.string().min(1),name:F.string().min(1)})}))}})}},component(){const{user:t,map:e}=y2.useLoaderData(),{tva:n}=pr({from:"__root__"}),r=n().slots,i=Dn([["GameMap"]]),{locale:s}=en({from:"/$locale"}),o=nc(),l=Zt({async mutationFn({id:u}){return kt.transaction().execute(async f=>f.deleteFrom("Map").where("id","=",u).where("userId","=",t.id).execute())},async onSuccess(){await i()}});return d.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[d.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:d.jsx(X,{label:"Map list (label)"})}),e.length>0?e.map(u=>d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsx(Tt,{icon:Yb,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id},children:u.name}),d.jsx("div",{children:d.jsx(dn,{iconEnabled:ti,variant:{variant:"danger"},loading:l.isPending,onClick:()=>{l.mutate({id:u.id})}})})]},u.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no maps (label)"})}),d.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:d.jsx(X,{label:"New map (label)"})}),d.jsx("div",{children:d.jsx(kZ,{mutation:Zt({async mutationFn(u){return Rn.promise(kt.transaction().execute(f=>NZ({tx:f,userId:t.id,...u})),ei("Map generator"))},async onSuccess(u){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:u.id}}),await i()}})})})]})}});var O0,pO;function NN(){if(pO)return O0;pO=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var b=arguments,x=this;return p.forEach(function(_){b.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var b=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(b),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(b),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var b=h;b!==void 0;b=this.parent(b))if(b===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var b of this.successors(p))x.add(b);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var b=this;Object.entries(this._nodes).forEach(function([E,N]){p(E)&&h.setNode(E,N)}),Object.values(this._edgeObjs).forEach(function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,b.edge(E))});var x={};function _(E){var N=b.parent(E);return N===void 0||h.hasNode(N)?(x[E]=N,N):N in x?x[N]:_(N)}return this._isCompound&&h.nodes().forEach(E=>h.setParent(E,_(E))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var b=this,x=arguments;return p.reduce(function(_,E){return x.length>1?b.setEdge(_,E,h):b.setEdge(_,E),E}),this}setEdge(){var p,h,b,x,_=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(p=E.v,h=E.w,b=E.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=E,h=arguments[1],b=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,b!==void 0&&(b=""+b);var N=o(this._isDirected,p,h,b);if(Object.hasOwn(this._edgeLabels,N))return _&&(this._edgeLabels[N]=x),this;if(b!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[N]=_?x:this._defaultEdgeLabelFn(p,h,b);var j=l(this._isDirected,p,h,b);return p=j.v,h=j.w,Object.freeze(j),this._edgeObjs[N]=j,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][N]=j,this._out[p][N]=j,this._edgeCount++,this}edge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var b=this._in[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var b=this._out[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var b=this.inEdges(p,h);if(b)return b.concat(this.outEdges(p,h))}}function i(f,p){f[p]?f[p]++:f[p]=1}function s(f,p){--f[p]||delete f[p]}function o(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}return x+n+_+n+(b===void 0?t:b)}function l(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}var N={v:x,w:_};return b&&(N.name=b),N}function u(f,p){return o(f,p.v,p.w,p.name)}return O0=r,O0}var q0,hO;function CZ(){return hO||(hO=1,q0="2.2.4"),q0}var A0,mO;function jZ(){return mO||(mO=1,A0={Graph:NN(),version:CZ()}),A0}var P0,gO;function TZ(){if(gO)return P0;gO=1;var t=NN();P0={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var l=s.node(o),u=s.parent(o),f={v:o};return l!==void 0&&(f.value=l),u!==void 0&&(f.parent=u),f})}function r(s){return s.edges().map(function(o){var l=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),l!==void 0&&(u.value=l),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),s.edges.forEach(function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return P0}var F0,yO;function RZ(){if(yO)return F0;yO=1,F0=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return F0}var D0,bO;function b2(){if(bO)return D0;bO=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r}}return D0=t,D0}var L0,vO;function v2(){if(vO)return L0;vO=1;var t=b2();L0=n;var e=()=>1;function n(i,s,o,l){return r(i,String(s),o||e,l||function(u){return i.outEdges(u)})}function r(i,s,o,l){var u={},f=new t,p,h,b=function(x){var _=x.v!==p?x.v:x.w,E=u[_],N=o(x),j=h.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+N);j<E.distance&&(E.distance=j,E.predecessor=p,f.decrease(_,j))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},f.add(x,_)});f.size()>0&&(p=f.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(b);return u}return L0}var M0,xO;function OZ(){if(xO)return M0;xO=1;var t=v2();M0=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return M0}var $0,wO;function x2(){if(wO)return $0;wO=1,$0=t;function t(e){var n=0,r=[],i={},s=[];function o(l){var u=i[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),e.successors(l).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var f=[],p;do p=r.pop(),i[p].onStack=!1,f.push(p);while(l!==p);s.push(f)}}return e.nodes().forEach(function(l){Object.hasOwn(i,l)||o(l)}),s}return $0}var B0,_O;function qZ(){if(_O)return B0;_O=1;var t=x2();B0=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return B0}var z0,SO;function AZ(){if(SO)return z0;SO=1,z0=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},l=r.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(f){u!==f&&(o[u][f]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(f){var p=f.v===u?f.w:f.v,h=i(f);o[u][p]={distance:h,predecessor:u}})}),l.forEach(function(u){var f=o[u];l.forEach(function(p){var h=o[p];l.forEach(function(b){var x=h[u],_=f[b],E=h[b],N=x.distance+_.distance;N<E.distance&&(E.distance=N,E.predecessor=_.predecessor)})})}),o}return z0}var W0,EO;function w2(){if(EO)return W0;EO=1;function t(n){var r={},i={},s=[];function o(l){if(Object.hasOwn(i,l))throw new e;Object.hasOwn(r,l)||(i[l]=!0,r[l]=!0,n.predecessors(l).forEach(o),delete i[l],s.push(l))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return W0=t,t.CycleException=e,W0}var V0,IO;function PZ(){if(IO)return V0;IO=1;var t=w2();V0=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return V0}var U0,NO;function _2(){if(NO)return U0;NO=1,U0=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var l=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,f=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,l,p,f)}),f}function e(i,s,o,l){for(var u=[[i,!1]];u.length>0;){var f=u.pop();f[1]?l.push(f[0]):Object.hasOwn(o,f[0])||(o[f[0]]=!0,u.push([f[0],!0]),r(s(f[0]),p=>u.push([p,!1])))}}function n(i,s,o,l){for(var u=[i];u.length>0;){var f=u.pop();Object.hasOwn(o,f)||(o[f]=!0,l.push(f),r(s(f),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return U0}var H0,kO;function FZ(){if(kO)return H0;kO=1;var t=_2();H0=e;function e(n,r){return t(n,r,"post")}return H0}var K0,CO;function DZ(){if(CO)return K0;CO=1;var t=_2();K0=e;function e(n,r){return t(n,r,"pre")}return K0}var Q0,jO;function LZ(){if(jO)return Q0;jO=1;var t=NN(),e=b2();Q0=n;function n(r,i){var s=new t,o={},l=new e,u;function f(h){var b=h.v===u?h.w:h.v,x=l.priority(b);if(x!==void 0){var _=i(h);_<x&&(o[b]=u,l.decrease(b,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(r.nodes()[0],0);for(var p=!1;l.size()>0;){if(u=l.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(f)}return s}return Q0}var G0,TO;function MZ(){return TO||(TO=1,G0={components:RZ(),dijkstra:v2(),dijkstraAll:OZ(),findCycles:qZ(),floydWarshall:AZ(),isAcyclic:PZ(),postorder:FZ(),preorder:DZ(),prim:LZ(),tarjan:x2(),topsort:w2()}),G0}var J0,RO;function Do(){if(RO)return J0;RO=1;var t=jZ();return J0={Graph:t.Graph,json:TZ(),alg:MZ(),version:t.version},J0}var Z0,OO;function $Z(){if(OO)return Z0;OO=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Z0=t,Z0}var Y0,qO;function BZ(){if(qO)return Y0;qO=1;let t=Do().Graph,e=$Z();Y0=r;let n=()=>1;function r(f,p){if(f.nodeCount()<=1)return[];let h=o(f,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>f.outEdges(x.v,x.w))}function i(f,p,h){let b=[],x=p[p.length-1],_=p[0],E;for(;f.nodeCount();){for(;E=_.dequeue();)s(f,p,h,E);for(;E=x.dequeue();)s(f,p,h,E);if(f.nodeCount()){for(let N=p.length-2;N>0;--N)if(E=p[N].dequeue(),E){b=b.concat(s(f,p,h,E,!0));break}}}return b}function s(f,p,h,b,x){let _=x?[]:void 0;return f.inEdges(b.v).forEach(E=>{let N=f.edge(E),j=f.node(E.v);x&&_.push({v:E.v,w:E.w}),j.out-=N,l(p,h,j)}),f.outEdges(b.v).forEach(E=>{let N=f.edge(E),j=E.w,C=f.node(j);C.in-=N,l(p,h,C)}),f.removeNode(b.v),_}function o(f,p){let h=new t,b=0,x=0;f.nodes().forEach(N=>{h.setNode(N,{v:N,in:0,out:0})}),f.edges().forEach(N=>{let j=h.edge(N.v,N.w)||0,C=p(N),R=j+C;h.setEdge(N.v,N.w,R),x=Math.max(x,h.node(N.v).out+=C),b=Math.max(b,h.node(N.w).in+=C)});let _=u(x+b+3).map(()=>new e),E=b+1;return h.nodes().forEach(N=>{l(_,E,h.node(N))}),{graph:h,buckets:_,zeroIdx:E}}function l(f,p,h){h.out?h.in?f[h.out-h.in+p].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}function u(f){const p=[];for(let h=0;h<f;h++)p.push(h);return p}return Y0}var X0,AO;function Xr(){if(AO)return X0;AO=1;let t=Do().Graph;X0={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:o,mapValues:M,maxRank:_,normalizeRanks:u,notime:j,partition:E,pick:L,predecessorWeights:s,range:q,removeEmptyRanks:f,simplify:n,successorWeights:i,time:N,uniqueId:R,zipObject:W};function e(P,O,z,D){let V;do V=R(D);while(P.hasNode(V));return z.dummy=O,P.setNode(V,z),V}function n(P){let O=new t().setGraph(P.graph());return P.nodes().forEach(z=>O.setNode(z,P.node(z))),P.edges().forEach(z=>{let D=O.edge(z.v,z.w)||{weight:0,minlen:1},V=P.edge(z);O.setEdge(z.v,z.w,{weight:D.weight+V.weight,minlen:Math.max(D.minlen,V.minlen)})}),O}function r(P){let O=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(z=>{P.children(z).length||O.setNode(z,P.node(z))}),P.edges().forEach(z=>{O.setEdge(z,P.edge(z))}),O}function i(P){let O=P.nodes().map(z=>{let D={};return P.outEdges(z).forEach(V=>{D[V.w]=(D[V.w]||0)+P.edge(V).weight}),D});return W(P.nodes(),O)}function s(P){let O=P.nodes().map(z=>{let D={};return P.inEdges(z).forEach(V=>{D[V.v]=(D[V.v]||0)+P.edge(V).weight}),D});return W(P.nodes(),O)}function o(P,O){let z=P.x,D=P.y,V=O.x-z,U=O.y-D,B=P.width/2,G=P.height/2;if(!V&&!U)throw new Error("Not possible to find intersection inside of the rectangle");let Z,le;return Math.abs(U)*B>Math.abs(V)*G?(U<0&&(G=-G),Z=G*V/U,le=G):(V<0&&(B=-B),Z=B,le=B*U/V),{x:z+Z,y:D+le}}function l(P){let O=q(_(P)+1).map(()=>[]);return P.nodes().forEach(z=>{let D=P.node(z),V=D.rank;V!==void 0&&(O[V][D.order]=z)}),O}function u(P){let O=P.nodes().map(D=>{let V=P.node(D).rank;return V===void 0?Number.MAX_VALUE:V}),z=x(Math.min,O);P.nodes().forEach(D=>{let V=P.node(D);Object.hasOwn(V,"rank")&&(V.rank-=z)})}function f(P){let O=P.nodes().map(B=>P.node(B).rank),z=x(Math.min,O),D=[];P.nodes().forEach(B=>{let G=P.node(B).rank-z;D[G]||(D[G]=[]),D[G].push(B)});let V=0,U=P.graph().nodeRankFactor;Array.from(D).forEach((B,G)=>{B===void 0&&G%U!==0?--V:B!==void 0&&V&&B.forEach(Z=>P.node(Z).rank+=V)})}function p(P,O,z,D){let V={width:0,height:0};return arguments.length>=4&&(V.rank=z,V.order=D),e(P,"border",V,O)}function h(P,O=b){const z=[];for(let D=0;D<P.length;D+=O){const V=P.slice(D,D+O);z.push(V)}return z}const b=65535;function x(P,O){if(O.length>b){const z=h(O);return P.apply(null,z.map(D=>P.apply(null,D)))}else return P.apply(null,O)}function _(P){const z=P.nodes().map(D=>{let V=P.node(D).rank;return V===void 0?Number.MIN_VALUE:V});return x(Math.max,z)}function E(P,O){let z={lhs:[],rhs:[]};return P.forEach(D=>{O(D)?z.lhs.push(D):z.rhs.push(D)}),z}function N(P,O){let z=Date.now();try{return O()}finally{console.log(P+" time: "+(Date.now()-z)+"ms")}}function j(P,O){return O()}let C=0;function R(P){var O=++C;return toString(P)+O}function q(P,O,z=1){O==null&&(O=P,P=0);let D=U=>U<O;z<0&&(D=U=>O<U);const V=[];for(let U=P;D(U);U+=z)V.push(U);return V}function L(P,O){const z={};for(const D of O)P[D]!==void 0&&(z[D]=P[D]);return z}function M(P,O){let z=O;return typeof O=="string"&&(z=D=>D[O]),Object.entries(P).reduce((D,[V,U])=>(D[V]=z(U,V),D),{})}function W(P,O){return P.reduce((z,D,V)=>(z[D]=O[V],z),{})}return X0}var eS,PO;function zZ(){if(PO)return eS;PO=1;let t=BZ(),e=Xr().uniqueId;eS={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,l(s)):r(s)).forEach(u=>{let f=s.edge(u);s.removeEdge(u),f.forwardName=u.name,f.reversed=!0,s.setEdge(u.w,u.v,f,e("rev"))});function l(u){return f=>u.edge(f).weight}}function r(s){let o=[],l={},u={};function f(p){Object.hasOwn(u,p)||(u[p]=!0,l[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(l,h.w)?o.push(h):f(h.w)}),delete l[p])}return s.nodes().forEach(f),o}function i(s){s.edges().forEach(o=>{let l=s.edge(o);if(l.reversed){s.removeEdge(o);let u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return eS}var tS,FO;function WZ(){if(FO)return tS;FO=1;let t=Xr();tS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,l=i.node(o).rank,u=s.w,f=i.node(u).rank,p=s.name,h=i.edge(s),b=h.labelRank;if(f===l+1)return;i.removeEdge(s);let x,_,E;for(E=0,++l;l<f;++E,++l)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},x=t.addDummyNode(i,"edge",_,"_d"),l===b&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),E===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),l=o.edgeLabel,u;for(i.setEdge(o.edgeObj,l);o.dummy;)u=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=i.node(s)})}return tS}var nS,DO;function Xb(){if(DO)return nS;DO=1;const{applyWithChunking:t}=Xr();nS={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(Object.hasOwn(i,o))return l.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var f=t(Math.min,u);return f===Number.POSITIVE_INFINITY&&(f=0),l.rank=f}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return nS}var rS,LO;function S2(){if(LO)return rS;LO=1;var t=Do().Graph,e=Xb().slack;rS=n;function n(o){var l=new t({directed:!1}),u=o.nodes()[0],f=o.nodeCount();l.setNode(u,{});for(var p,h;r(l,o)<f;)p=i(l,o),h=l.hasNode(p.v)?e(o,p):-e(o,p),s(l,o,h);return l}function r(o,l){function u(f){l.nodeEdges(f).forEach(p=>{var h=p.v,b=f===h?p.w:h;!o.hasNode(b)&&!e(l,p)&&(o.setNode(b,{}),o.setEdge(f,b,{}),u(b))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,l){return l.edges().reduce((f,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(l,p)),h<f[0]?[h,p]:f},[Number.POSITIVE_INFINITY,null])[1]}function s(o,l,u){o.nodes().forEach(f=>l.node(f).rank+=u)}return rS}var iS,MO;function VZ(){if(MO)return iS;MO=1;var t=S2(),e=Xb().slack,n=Xb().longestPath,r=Do().alg.preorder,i=Do().alg.postorder,s=Xr().simplify;iS=o,o.initLowLimValues=p,o.initCutValues=l,o.calcCutValue=f,o.leaveEdge=b,o.enterEdge=x,o.exchangeEdges=_;function o(C){C=s(C),n(C);var R=t(C);p(R),l(R,C);for(var q,L;q=b(R);)L=x(R,C,q),_(R,C,q,L)}function l(C,R){var q=i(C,C.nodes());q=q.slice(0,q.length-1),q.forEach(L=>u(C,R,L))}function u(C,R,q){var L=C.node(q),M=L.parent;C.edge(q,M).cutvalue=f(C,R,q)}function f(C,R,q){var L=C.node(q),M=L.parent,W=!0,P=R.edge(q,M),O=0;return P||(W=!1,P=R.edge(M,q)),O=P.weight,R.nodeEdges(q).forEach(z=>{var D=z.v===q,V=D?z.w:z.v;if(V!==M){var U=D===W,B=R.edge(z).weight;if(O+=U?B:-B,N(C,q,V)){var G=C.edge(q,V).cutvalue;O+=U?-G:G}}}),O}function p(C,R){arguments.length<2&&(R=C.nodes()[0]),h(C,{},1,R)}function h(C,R,q,L,M){var W=q,P=C.node(L);return R[L]=!0,C.neighbors(L).forEach(O=>{Object.hasOwn(R,O)||(q=h(C,R,q,O,L))}),P.low=W,P.lim=q++,M?P.parent=M:delete P.parent,q}function b(C){return C.edges().find(R=>C.edge(R).cutvalue<0)}function x(C,R,q){var L=q.v,M=q.w;R.hasEdge(L,M)||(L=q.w,M=q.v);var W=C.node(L),P=C.node(M),O=W,z=!1;W.lim>P.lim&&(O=P,z=!0);var D=R.edges().filter(V=>z===j(C,C.node(V.v),O)&&z!==j(C,C.node(V.w),O));return D.reduce((V,U)=>e(R,U)<e(R,V)?U:V)}function _(C,R,q,L){var M=q.v,W=q.w;C.removeEdge(M,W),C.setEdge(L.v,L.w,{}),p(C),l(C,R),E(C,R)}function E(C,R){var q=C.nodes().find(M=>!R.node(M).parent),L=r(C,q);L=L.slice(1),L.forEach(M=>{var W=C.node(M).parent,P=R.edge(M,W),O=!1;P||(P=R.edge(W,M),O=!0),R.node(M).rank=R.node(W).rank+(O?P.minlen:-P.minlen)})}function N(C,R,q){return C.hasEdge(R,q)}function j(C,R,q){return q.low<=R.lim&&R.lim<=q.lim}return iS}var sS,$O;function UZ(){if($O)return sS;$O=1;var t=Xb(),e=t.longestPath,n=S2(),r=VZ();sS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return sS}var oS,BO;function HZ(){if(BO)return oS;BO=1,oS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),l=o.edgeObj,u=e(r,i,l.v,l.w),f=u.path,p=u.lca,h=0,b=f[h],x=!0;for(;s!==l.w;){if(o=r.node(s),x){for(;(b=f[h])!==p&&r.node(b).maxRank<o.rank;)h++;b===p&&(x=!1)}if(!x){for(;h<f.length-1&&r.node(b=f[h+1]).minRank<=o.rank;)h++;b=f[h]}r.setParent(s,b),s=r.successors(s)[0]}})}function e(r,i,s,o){let l=[],u=[],f=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,b;h=s;do h=r.parent(h),l.push(h);while(h&&(i[h].low>f||p>i[h].lim));for(b=h,h=o;(h=r.parent(h))!==b;)u.push(h);return{path:l.concat(u.reverse()),lca:b}}function n(r){let i={},s=0;function o(l){let u=s;r.children(l).forEach(o),i[l]={low:u,lim:s++}}return r.children().forEach(o),i}return oS}var aS,zO;function KZ(){if(zO)return aS;zO=1;let t=Xr();aS={run:e,cleanup:s};function e(o){let l=t.addDummyNode(o,"root",{},"_root"),u=r(o),f=Object.values(u),p=t.applyWithChunking(Math.max,f)-1,h=2*p+1;o.graph().nestingRoot=l,o.edges().forEach(x=>o.edge(x).minlen*=h);let b=i(o)+1;o.children().forEach(x=>n(o,l,h,b,p,u,x)),o.graph().nodeRankFactor=h}function n(o,l,u,f,p,h,b){let x=o.children(b);if(!x.length){b!==l&&o.setEdge(l,b,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),E=t.addBorderNode(o,"_bb"),N=o.node(b);o.setParent(_,b),N.borderTop=_,o.setParent(E,b),N.borderBottom=E,x.forEach(j=>{n(o,l,u,f,p,h,j);let C=o.node(j),R=C.borderTop?C.borderTop:j,q=C.borderBottom?C.borderBottom:j,L=C.borderTop?f:2*f,M=R!==q?1:p-h[b]+1;o.setEdge(_,R,{weight:L,minlen:M,nestingEdge:!0}),o.setEdge(q,E,{weight:L,minlen:M,nestingEdge:!0})}),o.parent(b)||o.setEdge(l,_,{weight:0,minlen:p+h[b]})}function r(o){var l={};function u(f,p){var h=o.children(f);h&&h.length&&h.forEach(b=>u(b,p+1)),l[f]=p}return o.children().forEach(f=>u(f,1)),l}function i(o){return o.edges().reduce((l,u)=>l+o.edge(u).weight,0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,o.edges().forEach(u=>{var f=o.edge(u);f.nestingEdge&&o.removeEdge(u)})}return aS}var lS,WO;function QZ(){if(WO)return lS;WO=1;let t=Xr();lS=e;function e(r){function i(s){let o=r.children(s),l=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let u=l.minRank,f=l.maxRank+1;u<f;++u)n(r,"borderLeft","_bl",s,l,u),n(r,"borderRight","_br",s,l,u)}}r.children().forEach(i)}function n(r,i,s,o,l,u){let f={width:0,height:0,rank:u,borderType:i},p=l[i][u-1],h=t.addDummyNode(r,"border",f,s);l[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return lS}var cS,VO;function GZ(){if(VO)return cS;VO=1,cS={adjust:t,undo:e};function t(u){let f=u.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(u)}function e(u){let f=u.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&i(u),(f==="lr"||f==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(f=>r(u.node(f))),u.edges().forEach(f=>r(u.edge(f)))}function r(u){let f=u.width;u.width=u.height,u.height=f}function i(u){u.nodes().forEach(f=>s(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(f=>l(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(l),Object.hasOwn(p,"x")&&l(p)})}function l(u){let f=u.x;u.x=u.y,u.y=f}return cS}var uS,UO;function JZ(){if(UO)return uS;UO=1;let t=Xr();uS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),l=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);l[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),l}return uS}var dS,HO;function ZZ(){if(HO)return dS;HO=1;let t=Xr().zipObject;dS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((b,x)=>x)),l=i.flatMap(b=>r.outEdges(b).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let f=2*u-1;u-=1;let p=new Array(f).fill(0),h=0;return l.forEach(b=>{let x=b.pos+u;p[x]+=b.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=b.weight;h+=b.weight*_}),h}return dS}var fS,KO;function YZ(){if(KO)return fS;KO=1,fS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,l)=>{let u=e.edge(l),f=e.node(l.v);return{sum:o.sum+u.weight*f.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return fS}var pS,QO;function XZ(){if(QO)return pS;QO=1;let t=Xr();pS=e;function e(i,s){let o={};i.forEach((u,f)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let f=o[u.v],p=o[u.w];f!==void 0&&p!==void 0&&(p.indegree++,f.out.push(o[u.w]))});let l=Object.values(o).filter(u=>!u.indegree);return n(l)}function n(i){let s=[];function o(u){return f=>{f.merged||(f.barycenter===void 0||u.barycenter===void 0||f.barycenter>=u.barycenter)&&r(u,f)}}function l(u){return f=>{f.in.push(u),--f.indegree===0&&i.push(f)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(l(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return pS}var hS,GO;function eY(){if(GO)return hS;GO=1;let t=Xr();hS=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),l=o.lhs,u=o.rhs.sort((_,E)=>E.i-_.i),f=[],p=0,h=0,b=0;l.sort(r(!!s)),b=n(f,u,b),l.forEach(_=>{b+=_.vs.length,f.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,b=n(f,u,b)});let x={vs:f.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let l;for(;s.length&&(l=s[s.length-1]).i<=o;)s.pop(),i.push(l.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return hS}var mS,JO;function tY(){if(JO)return mS;JO=1;let t=YZ(),e=XZ(),n=eY();mS=r;function r(o,l,u,f){let p=o.children(l),h=o.node(l),b=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};b&&(p=p.filter(C=>C!==b&&C!==x));let E=t(o,p);E.forEach(C=>{if(o.children(C.v).length){let R=r(o,C.v,u,f);_[C.v]=R,Object.hasOwn(R,"barycenter")&&s(C,R)}});let N=e(E,u);i(N,_);let j=n(N,f);if(b&&(j.vs=[b,j.vs,x].flat(!0),o.predecessors(b).length)){let C=o.node(o.predecessors(b)[0]),R=o.node(o.predecessors(x)[0]);Object.hasOwn(j,"barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+C.order+R.order)/(j.weight+2),j.weight+=2}return j}function i(o,l){o.forEach(u=>{u.vs=u.vs.flatMap(f=>l[f]?l[f].vs:f)})}function s(o,l){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight):(o.barycenter=l.barycenter,o.weight=l.weight)}return mS}var gS,ZO;function nY(){if(ZO)return gS;ZO=1;let t=Do().Graph,e=Xr();gS=n;function n(i,s,o){let l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(f=>i.node(f));return i.nodes().forEach(f=>{let p=i.node(f),h=i.parent(f);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(f),u.setParent(f,h||l),i[o](f).forEach(b=>{let x=b.v===f?b.w:b.v,_=u.edge(x,f),E=_!==void 0?_.weight:0;u.setEdge(x,f,{weight:i.edge(b).weight+E})}),Object.hasOwn(p,"minRank")&&u.setNode(f,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return gS}var yS,YO;function rY(){if(YO)return yS;YO=1,yS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let l=e.parent(o),u,f;for(;l;){if(u=e.parent(l),u?(f=i[u],i[u]=l):(f=s,s=l),f&&f!==l){n.setEdge(f,l);return}l=u}})}return yS}var bS,XO;function iY(){if(XO)return bS;XO=1;let t=JZ(),e=ZZ(),n=tY(),r=nY(),i=rY(),s=Do().Graph,o=Xr();bS=l;function l(h,b){if(b&&typeof b.customOrder=="function"){b.customOrder(h,l);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),E=u(h,o.range(x-1,-1,-1),"outEdges"),N=t(h);if(p(h,N),b&&b.disableOptimalOrderHeuristic)return;let j=Number.POSITIVE_INFINITY,C;for(let R=0,q=0;q<4;++R,++q){f(R%2?_:E,R%4>=2),N=o.buildLayerMatrix(h);let L=e(h,N);L<j&&(q=0,C=Object.assign({},N),j=L)}p(h,C)}function u(h,b,x){return b.map(function(_){return r(h,_,x)})}function f(h,b){let x=new s;h.forEach(function(_){let E=_.graph().root,N=n(_,E,x,b);N.vs.forEach((j,C)=>_.node(j).order=C),i(_,x,N.vs)})}function p(h,b){Object.values(b).forEach(x=>x.forEach((_,E)=>h.node(_).order=E))}return bS}var vS,eq;function sY(){if(eq)return vS;eq=1;let t=Do().Graph,e=Xr();vS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:b};function n(N,j){let C={};function R(q,L){let M=0,W=0,P=q.length,O=L[L.length-1];return L.forEach((z,D)=>{let V=i(N,z),U=V?N.node(V).order:P;(V||z===O)&&(L.slice(W,D+1).forEach(B=>{N.predecessors(B).forEach(G=>{let Z=N.node(G),le=Z.order;(le<M||U<le)&&!(Z.dummy&&N.node(B).dummy)&&s(C,G,B)})}),W=D+1,M=U)}),L}return j.length&&j.reduce(R),C}function r(N,j){let C={};function R(L,M,W,P,O){let z;e.range(M,W).forEach(D=>{z=L[D],N.node(z).dummy&&N.predecessors(z).forEach(V=>{let U=N.node(V);U.dummy&&(U.order<P||U.order>O)&&s(C,V,z)})})}function q(L,M){let W=-1,P,O=0;return M.forEach((z,D)=>{if(N.node(z).dummy==="border"){let V=N.predecessors(z);V.length&&(P=N.node(V[0]).order,R(M,O,D,W,P),O=D,W=P)}R(M,O,M.length,P,L.length)}),M}return j.length&&j.reduce(q),C}function i(N,j){if(N.node(j).dummy)return N.predecessors(j).find(C=>N.node(C).dummy)}function s(N,j,C){if(j>C){let q=j;j=C,C=q}let R=N[j];R||(N[j]=R={}),R[C]=!0}function o(N,j,C){if(j>C){let R=j;j=C,C=R}return!!N[j]&&Object.hasOwn(N[j],C)}function l(N,j,C,R){let q={},L={},M={};return j.forEach(W=>{W.forEach((P,O)=>{q[P]=P,L[P]=P,M[P]=O})}),j.forEach(W=>{let P=-1;W.forEach(O=>{let z=R(O);if(z.length){z=z.sort((V,U)=>M[V]-M[U]);let D=(z.length-1)/2;for(let V=Math.floor(D),U=Math.ceil(D);V<=U;++V){let B=z[V];L[O]===O&&P<M[B]&&!o(C,O,B)&&(L[B]=O,L[O]=q[O]=q[B],P=M[B])}}})}),{root:q,align:L}}function u(N,j,C,R,q){let L={},M=f(N,j,C,q),W=q?"borderLeft":"borderRight";function P(D,V){let U=M.nodes(),B=U.pop(),G={};for(;B;)G[B]?D(B):(G[B]=!0,U.push(B),U=U.concat(V(B))),B=U.pop()}function O(D){L[D]=M.inEdges(D).reduce((V,U)=>Math.max(V,L[U.v]+M.edge(U)),0)}function z(D){let V=M.outEdges(D).reduce((B,G)=>Math.min(B,L[G.w]-M.edge(G)),Number.POSITIVE_INFINITY),U=N.node(D);V!==Number.POSITIVE_INFINITY&&U.borderType!==W&&(L[D]=Math.max(L[D],V))}return P(O,M.predecessors.bind(M)),P(z,M.successors.bind(M)),Object.keys(R).forEach(D=>L[D]=L[C[D]]),L}function f(N,j,C,R){let q=new t,L=N.graph(),M=_(L.nodesep,L.edgesep,R);return j.forEach(W=>{let P;W.forEach(O=>{let z=C[O];if(q.setNode(z),P){var D=C[P],V=q.edge(D,z);q.setEdge(D,z,Math.max(M(N,O,P),V||0))}P=O})}),q}function p(N,j){return Object.values(j).reduce((C,R)=>{let q=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY;Object.entries(R).forEach(([W,P])=>{let O=E(N,W)/2;q=Math.max(P+O,q),L=Math.min(P-O,L)});const M=q-L;return M<C[0]&&(C=[M,R]),C},[Number.POSITIVE_INFINITY,null])[1]}function h(N,j){let C=Object.values(j),R=e.applyWithChunking(Math.min,C),q=e.applyWithChunking(Math.max,C);["u","d"].forEach(L=>{["l","r"].forEach(M=>{let W=L+M,P=N[W];if(P===j)return;let O=Object.values(P),z=R-e.applyWithChunking(Math.min,O);M!=="l"&&(z=q-e.applyWithChunking(Math.max,O)),z&&(N[W]=e.mapValues(P,D=>D+z))})})}function b(N,j){return e.mapValues(N.ul,(C,R)=>{if(j)return N[j.toLowerCase()][R];{let q=Object.values(N).map(L=>L[R]).sort((L,M)=>L-M);return(q[1]+q[2])/2}})}function x(N){let j=e.buildLayerMatrix(N),C=Object.assign(n(N,j),r(N,j)),R={},q;["u","d"].forEach(M=>{q=M==="u"?j:Object.values(j).reverse(),["l","r"].forEach(W=>{W==="r"&&(q=q.map(D=>Object.values(D).reverse()));let P=(M==="u"?N.predecessors:N.successors).bind(N),O=l(N,q,C,P),z=u(N,q,O.root,O.align,W==="r");W==="r"&&(z=e.mapValues(z,D=>-D)),R[M+W]=z})});let L=p(N,R);return h(R,L),b(R,N.graph().align)}function _(N,j,C){return(R,q,L)=>{let M=R.node(q),W=R.node(L),P=0,O;if(P+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":O=-M.width/2;break;case"r":O=M.width/2;break}if(O&&(P+=C?O:-O),O=0,P+=(M.dummy?j:N)/2,P+=(W.dummy?j:N)/2,P+=W.width/2,Object.hasOwn(W,"labelpos"))switch(W.labelpos.toLowerCase()){case"l":O=W.width/2;break;case"r":O=-W.width/2;break}return O&&(P+=C?O:-O),O=0,P}}function E(N,j){return N.node(j).width}return vS}var xS,tq;function oY(){if(tq)return xS;tq=1;let t=Xr(),e=sY().positionX;xS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,l=0;s.forEach(u=>{const f=u.reduce((p,h)=>{const b=i.node(h).height;return p>b?p:b},0);u.forEach(p=>i.node(p).y=l+f/2),l+=f+o})}return xS}var wS,nq;function aY(){if(nq)return wS;nq=1;let t=zZ(),e=WZ(),n=UZ(),r=Xr().normalizeRanks,i=HZ(),s=Xr().removeEmptyRanks,o=KZ(),l=QZ(),u=GZ(),f=iY(),p=oY(),h=Xr(),b=Do().Graph;wS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ie=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ie,we,ye)),we("  updateInputGraph",()=>E(de,Ie))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>O(de)),ye("    removeSelfEdges",()=>ie(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>z(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>D(de)),ye("    removeEdgeLabelProxies",()=>V(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>l(de)),ye("    order",()=>f(de,we)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>G(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>U(de)),ye("    assignNodeIntersects",()=>B(de)),ye("    reversePoints",()=>Z(de)),ye("    acyclic.undo",()=>t.undo(de))}function E(de,ye){de.nodes().forEach(we=>{let Ie=de.node(we),ze=ye.node(we);Ie&&(Ie.x=ze.x,Ie.y=ze.y,Ie.rank=ze.rank,ye.children(we).length&&(Ie.width=ze.width,Ie.height=ze.height))}),de.edges().forEach(we=>{let Ie=de.edge(we),ze=ye.edge(we);Ie.points=ze.points,Object.hasOwn(ze,"x")&&(Ie.x=ze.x,Ie.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let N=["nodesep","edgesep","ranksep","marginx","marginy"],j={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},C=["acyclicer","ranker","rankdir","align"],R=["width","height"],q={width:0,height:0},L=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},W=["labelpos"];function P(de){let ye=new b({multigraph:!0,compound:!0}),we=ue(de.graph());return ye.setGraph(Object.assign({},j,te(we,N),h.pick(we,C))),de.nodes().forEach(Ie=>{let ze=ue(de.node(Ie));const Re=te(ze,R);Object.keys(q).forEach(De=>{Re[De]===void 0&&(Re[De]=q[De])}),ye.setNode(Ie,Re),ye.setParent(Ie,de.parent(Ie))}),de.edges().forEach(Ie=>{let ze=ue(de.edge(Ie));ye.setEdge(Ie,Object.assign({},M,te(ze,L),h.pick(ze,W)))}),ye}function O(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ie=de.edge(we);Ie.minlen*=2,Ie.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ie.width+=Ie.labeloffset:Ie.height+=Ie.labeloffset)})}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ie=de.node(ye.v),Re={rank:(de.node(ye.w).rank-Ie.rank)/2+Ie.rank,e:ye};h.addDummyNode(de,"edge-proxy",Re,"_ep")}})}function D(de){let ye=0;de.nodes().forEach(we=>{let Ie=de.node(we);Ie.borderTop&&(Ie.minRank=de.node(Ie.borderTop).rank,Ie.maxRank=de.node(Ie.borderBottom).rank,ye=Math.max(ye,Ie.maxRank))}),de.graph().maxRank=ye}function V(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function U(de){let ye=Number.POSITIVE_INFINITY,we=0,Ie=Number.POSITIVE_INFINITY,ze=0,Re=de.graph(),De=Re.marginx||0,Je=Re.marginy||0;function Xe(Ve){let ct=Ve.x,_t=Ve.y,Rt=Ve.width,Ut=Ve.height;ye=Math.min(ye,ct-Rt/2),we=Math.max(we,ct+Rt/2),Ie=Math.min(Ie,_t-Ut/2),ze=Math.max(ze,_t+Ut/2)}de.nodes().forEach(Ve=>Xe(de.node(Ve))),de.edges().forEach(Ve=>{let ct=de.edge(Ve);Object.hasOwn(ct,"x")&&Xe(ct)}),ye-=De,Ie-=Je,de.nodes().forEach(Ve=>{let ct=de.node(Ve);ct.x-=ye,ct.y-=Ie}),de.edges().forEach(Ve=>{let ct=de.edge(Ve);ct.points.forEach(_t=>{_t.x-=ye,_t.y-=Ie}),Object.hasOwn(ct,"x")&&(ct.x-=ye),Object.hasOwn(ct,"y")&&(ct.y-=Ie)}),Re.width=we-ye+De,Re.height=ze-Ie+Je}function B(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ie=de.node(ye.v),ze=de.node(ye.w),Re,De;we.points?(Re=we.points[0],De=we.points[we.points.length-1]):(we.points=[],Re=ze,De=Ie),we.points.unshift(h.intersectRect(Ie,Re)),we.points.push(h.intersectRect(ze,De))})}function G(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function Z(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ie=de.node(we.borderTop),ze=de.node(we.borderBottom),Re=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-Re.x),we.height=Math.abs(ze.y-Ie.y),we.x=Re.x+we.width/2,we.y=Ie.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function ie(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ie=0;we.forEach((ze,Re)=>{var De=de.node(ze);De.order=Re+Ie,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:Re+ ++Ie,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ie=de.node(we.e.v),ze=Ie.x+Ie.width/2,Re=Ie.y,De=we.x-ze,Je=Ie.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:Re-Je},{x:ze+5*De/6,y:Re-Je},{x:ze+De,y:Re},{x:ze+5*De/6,y:Re+Je},{x:ze+2*De/3,y:Re+Je}],we.label.x=we.x,we.label.y=we.y}})}function te(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ue(de){var ye={};return de&&Object.entries(de).forEach(([we,Ie])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ie}),ye}return wS}var _S,rq;function lY(){if(rq)return _S;rq=1;let t=Xr(),e=Do().Graph;_S={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,l)=>{let u="layer"+l;s.setNode(u,{rank:"same"}),o.reduce((f,p)=>(s.setEdge(f,p,{style:"invis"}),p))}),s}return _S}var SS,iq;function cY(){return iq||(iq=1,SS="1.1.4"),SS}var ES,sq;function uY(){return sq||(sq=1,ES={graphlib:Do(),layout:aY(),debug:lY(),util:{time:Xr().time,notime:Xr().notime},version:cY()}),ES}var dY=uY();const E2=uo(dY);function Hr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Hr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var fY={value:()=>{}};function Zv(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ly(n)}function Ly(t){this._=t}function pY(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ly.prototype=Zv.prototype={constructor:Ly,on:function(t,e){var n=this._,r=pY(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=hY(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=oq(n[i],t.name,e);else if(e==null)for(i in n)n[i]=oq(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ly(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function hY(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function oq(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=fY,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var zE="http://www.w3.org/1999/xhtml";const aq={svg:"http://www.w3.org/2000/svg",xhtml:zE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yv(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),aq.hasOwnProperty(e)?{space:aq[e],local:t}:t}function mY(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===zE&&e.documentElement.namespaceURI===zE?e.createElement(t):e.createElementNS(n,t)}}function gY(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function I2(t){var e=Yv(t);return(e.local?gY:mY)(e)}function yY(){}function kN(t){return t==null?yY:function(){return this.querySelector(t)}}function bY(t){typeof t!="function"&&(t=kN(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,f,p=0;p<o;++p)(u=s[p])&&(f=t.call(u,u.__data__,p,s))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f);return new Ls(r,this._parents)}function vY(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function xY(){return[]}function N2(t){return t==null?xY:function(){return this.querySelectorAll(t)}}function wY(t){return function(){return vY(t.apply(this,arguments))}}function _Y(t){typeof t=="function"?t=wY(t):t=N2(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&(r.push(t.call(u,u.__data__,f,o)),i.push(u));return new Ls(r,i)}function k2(t){return function(){return this.matches(t)}}function C2(t){return function(e){return e.matches(t)}}var SY=Array.prototype.find;function EY(t){return function(){return SY.call(this.children,t)}}function IY(){return this.firstElementChild}function NY(t){return this.select(t==null?IY:EY(typeof t=="function"?t:C2(t)))}var kY=Array.prototype.filter;function CY(){return Array.from(this.children)}function jY(t){return function(){return kY.call(this.children,t)}}function TY(t){return this.selectAll(t==null?CY:jY(typeof t=="function"?t:C2(t)))}function RY(t){typeof t!="function"&&(t=k2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Ls(r,this._parents)}function j2(t){return new Array(t.length)}function OY(){return new Ls(this._enter||this._groups.map(j2),this._parents)}function ev(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ev.prototype={constructor:ev,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qY(t){return function(){return t}}function AY(t,e,n,r,i,s){for(var o=0,l,u=e.length,f=s.length;o<f;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new ev(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function PY(t,e,n,r,i,s,o){var l,u,f=new Map,p=e.length,h=s.length,b=new Array(p),x;for(l=0;l<p;++l)(u=e[l])&&(b[l]=x=o.call(u,u.__data__,l,e)+"",f.has(x)?i[l]=u:f.set(x,u));for(l=0;l<h;++l)x=o.call(t,s[l],l,s)+"",(u=f.get(x))?(r[l]=u,u.__data__=s[l],f.delete(x)):n[l]=new ev(t,s[l]);for(l=0;l<p;++l)(u=e[l])&&f.get(b[l])===u&&(i[l]=u)}function FY(t){return t.__data__}function DY(t,e){if(!arguments.length)return Array.from(this,FY);var n=e?PY:AY,r=this._parents,i=this._groups;typeof t!="function"&&(t=qY(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),f=0;f<s;++f){var p=r[f],h=i[f],b=h.length,x=LY(t.call(p,p&&p.__data__,f,r)),_=x.length,E=l[f]=new Array(_),N=o[f]=new Array(_),j=u[f]=new Array(b);n(p,h,E,N,j,x,e);for(var C=0,R=0,q,L;C<_;++C)if(q=E[C]){for(C>=R&&(R=C+1);!(L=N[R])&&++R<_;);q._next=L||null}}return o=new Ls(o,r),o._enter=l,o._exit=u,o}function LY(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function MY(){return new Ls(this._exit||this._groups.map(j2),this._parents)}function $Y(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function BY(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var f=n[u],p=r[u],h=f.length,b=l[u]=new Array(h),x,_=0;_<h;++_)(x=f[_]||p[_])&&(b[_]=x);for(;u<i;++u)l[u]=n[u];return new Ls(l,this._parents)}function zY(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function WY(t){t||(t=VY);function e(h,b){return h&&b?t(h.__data__,b.__data__):!h-!b}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),f,p=0;p<l;++p)(f=o[p])&&(u[p]=f);u.sort(e)}return new Ls(i,this._parents).order()}function VY(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function UY(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function HY(){return Array.from(this)}function KY(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function QY(){let t=0;for(const e of this)++t;return t}function GY(){return!this.node()}function JY(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function ZY(t){return function(){this.removeAttribute(t)}}function YY(t){return function(){this.removeAttributeNS(t.space,t.local)}}function XY(t,e){return function(){this.setAttribute(t,e)}}function eX(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function tX(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function nX(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function rX(t,e){var n=Yv(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?YY:ZY:typeof e=="function"?n.local?nX:tX:n.local?eX:XY)(n,e))}function T2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function iX(t){return function(){this.style.removeProperty(t)}}function sX(t,e,n){return function(){this.style.setProperty(t,e,n)}}function oX(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function aX(t,e,n){return arguments.length>1?this.each((e==null?iX:typeof e=="function"?oX:sX)(t,e,n??"")):Zd(this.node(),t)}function Zd(t,e){return t.style.getPropertyValue(e)||T2(t).getComputedStyle(t,null).getPropertyValue(e)}function lX(t){return function(){delete this[t]}}function cX(t,e){return function(){this[t]=e}}function uX(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function dX(t,e){return arguments.length>1?this.each((e==null?lX:typeof e=="function"?uX:cX)(t,e)):this.node()[t]}function R2(t){return t.trim().split(/^|\s+/)}function CN(t){return t.classList||new O2(t)}function O2(t){this._node=t,this._names=R2(t.getAttribute("class")||"")}O2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function q2(t,e){for(var n=CN(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function A2(t,e){for(var n=CN(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function fX(t){return function(){q2(this,t)}}function pX(t){return function(){A2(this,t)}}function hX(t,e){return function(){(e.apply(this,arguments)?q2:A2)(this,t)}}function mX(t,e){var n=R2(t+"");if(arguments.length<2){for(var r=CN(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?hX:e?fX:pX)(n,e))}function gX(){this.textContent=""}function yX(t){return function(){this.textContent=t}}function bX(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function vX(t){return arguments.length?this.each(t==null?gX:(typeof t=="function"?bX:yX)(t)):this.node().textContent}function xX(){this.innerHTML=""}function wX(t){return function(){this.innerHTML=t}}function _X(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function SX(t){return arguments.length?this.each(t==null?xX:(typeof t=="function"?_X:wX)(t)):this.node().innerHTML}function EX(){this.nextSibling&&this.parentNode.appendChild(this)}function IX(){return this.each(EX)}function NX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kX(){return this.each(NX)}function CX(t){var e=typeof t=="function"?t:I2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function jX(){return null}function TX(t,e){var n=typeof t=="function"?t:I2(t),r=e==null?jX:typeof e=="function"?e:kN(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function RX(){var t=this.parentNode;t&&t.removeChild(this)}function OX(){return this.each(RX)}function qX(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function AX(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function PX(t){return this.select(t?AX:qX)}function FX(t){return arguments.length?this.property("__data__",t):this.node().__data__}function DX(t){return function(e){t.call(this,e,this.__data__)}}function LX(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function MX(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function $X(t,e,n){return function(){var r=this.__on,i,s=DX(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function BX(t,e,n){var r=LX(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,p;u<f;++u)for(i=0,p=l[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?$X:MX,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function P2(t,e,n){var r=T2(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function zX(t,e){return function(){return P2(this,t,e)}}function WX(t,e){return function(){return P2(this,t,e.apply(this,arguments))}}function VX(t,e){return this.each((typeof e=="function"?WX:zX)(t,e))}function*UX(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var F2=[null];function Ls(t,e){this._groups=t,this._parents=e}function Em(){return new Ls([[document.documentElement]],F2)}function HX(){return this}Ls.prototype=Em.prototype={constructor:Ls,select:bY,selectAll:_Y,selectChild:NY,selectChildren:TY,filter:RY,data:DY,enter:OY,exit:MY,join:$Y,merge:BY,selection:HX,order:zY,sort:WY,call:UY,nodes:HY,node:KY,size:QY,empty:GY,each:JY,attr:rX,style:aX,property:dX,classed:mX,text:vX,html:SX,raise:IX,lower:kX,append:CX,insert:TX,remove:OX,clone:PX,datum:FX,on:BX,dispatch:VX,[Symbol.iterator]:UX};function Os(t){return typeof t=="string"?new Ls([[document.querySelector(t)]],[document.documentElement]):new Ls([[t]],F2)}function KX(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Eo(t,e){if(t=KX(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const QX={passive:!1},Mh={capture:!0,passive:!1};function IS(t){t.stopImmediatePropagation()}function Ld(t){t.preventDefault(),t.stopImmediatePropagation()}function D2(t){var e=t.document.documentElement,n=Os(t).on("dragstart.drag",Ld,Mh);"onselectstart"in e?n.on("selectstart.drag",Ld,Mh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function L2(t,e){var n=t.document.documentElement,r=Os(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ld,Mh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ry=t=>()=>t;function WE(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}WE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function GX(t){return!t.ctrlKey&&!t.button}function JX(){return this.parentNode}function ZX(t,e){return e??{x:t.x,y:t.y}}function YX(){return navigator.maxTouchPoints||"ontouchstart"in this}function M2(){var t=GX,e=JX,n=ZX,r=YX,i={},s=Zv("start","drag","end"),o=0,l,u,f,p,h=0;function b(q){q.on("mousedown.drag",x).filter(r).on("touchstart.drag",N).on("touchmove.drag",j,QX).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(q,L){if(!(p||!t.call(this,q,L))){var M=R(this,e.call(this,q,L),q,L,"mouse");M&&(Os(q.view).on("mousemove.drag",_,Mh).on("mouseup.drag",E,Mh),D2(q.view),IS(q),f=!1,l=q.clientX,u=q.clientY,M("start",q))}}function _(q){if(Ld(q),!f){var L=q.clientX-l,M=q.clientY-u;f=L*L+M*M>h}i.mouse("drag",q)}function E(q){Os(q.view).on("mousemove.drag mouseup.drag",null),L2(q.view,f),Ld(q),i.mouse("end",q)}function N(q,L){if(t.call(this,q,L)){var M=q.changedTouches,W=e.call(this,q,L),P=M.length,O,z;for(O=0;O<P;++O)(z=R(this,W,q,L,M[O].identifier,M[O]))&&(IS(q),z("start",q,M[O]))}}function j(q){var L=q.changedTouches,M=L.length,W,P;for(W=0;W<M;++W)(P=i[L[W].identifier])&&(Ld(q),P("drag",q,L[W]))}function C(q){var L=q.changedTouches,M=L.length,W,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),W=0;W<M;++W)(P=i[L[W].identifier])&&(IS(q),P("end",q,L[W]))}function R(q,L,M,W,P,O){var z=s.copy(),D=Eo(O||M,L),V,U,B;if((B=n.call(q,new WE("beforestart",{sourceEvent:M,target:b,identifier:P,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:z}),W))!=null)return V=B.x-D[0]||0,U=B.y-D[1]||0,function G(Z,le,ie){var ne=D,oe;switch(Z){case"start":i[P]=G,oe=o++;break;case"end":delete i[P],--o;case"drag":D=Eo(ie||le,L),oe=o;break}z.call(Z,q,new WE(Z,{sourceEvent:le,subject:B,target:b,identifier:P,active:oe,x:D[0]+V,y:D[1]+U,dx:D[0]-ne[0],dy:D[1]-ne[1],dispatch:z}),W)}}return b.filter=function(q){return arguments.length?(t=typeof q=="function"?q:ry(!!q),b):t},b.container=function(q){return arguments.length?(e=typeof q=="function"?q:ry(q),b):e},b.subject=function(q){return arguments.length?(n=typeof q=="function"?q:ry(q),b):n},b.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:ry(!!q),b):r},b.on=function(){var q=s.on.apply(s,arguments);return q===s?b:q},b.clickDistance=function(q){return arguments.length?(h=(q=+q)*q,b):Math.sqrt(h)},b}function jN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Im(){}var $h=.7,tv=1/$h,Md="\\s*([+-]?\\d+)\\s*",Bh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XX=/^#([0-9a-f]{3,8})$/,eee=new RegExp(`^rgb\\(${Md},${Md},${Md}\\)$`),tee=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),nee=new RegExp(`^rgba\\(${Md},${Md},${Md},${Bh}\\)$`),ree=new RegExp(`^rgba\\(${ra},${ra},${ra},${Bh}\\)$`),iee=new RegExp(`^hsl\\(${Bh},${ra},${ra}\\)$`),see=new RegExp(`^hsla\\(${Bh},${ra},${ra},${Bh}\\)$`),lq={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};jN(Im,zh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cq,formatHex:cq,formatHex8:oee,formatHsl:aee,formatRgb:uq,toString:uq});function cq(){return this.rgb().formatHex()}function oee(){return this.rgb().formatHex8()}function aee(){return B2(this).formatHsl()}function uq(){return this.rgb().formatRgb()}function zh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=XX.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dq(e):n===3?new ps(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?iy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?iy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eee.exec(t))?new ps(e[1],e[2],e[3],1):(e=tee.exec(t))?new ps(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nee.exec(t))?iy(e[1],e[2],e[3],e[4]):(e=ree.exec(t))?iy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iee.exec(t))?hq(e[1],e[2]/100,e[3]/100,1):(e=see.exec(t))?hq(e[1],e[2]/100,e[3]/100,e[4]):lq.hasOwnProperty(t)?dq(lq[t]):t==="transparent"?new ps(NaN,NaN,NaN,0):null}function dq(t){return new ps(t>>16&255,t>>8&255,t&255,1)}function iy(t,e,n,r){return r<=0&&(t=e=n=NaN),new ps(t,e,n,r)}function lee(t){return t instanceof Im||(t=zh(t)),t?(t=t.rgb(),new ps(t.r,t.g,t.b,t.opacity)):new ps}function VE(t,e,n,r){return arguments.length===1?lee(t):new ps(t,e,n,r??1)}function ps(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}jN(ps,VE,$2(Im,{brighter(t){return t=t==null?tv:Math.pow(tv,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$h:Math.pow($h,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ps(Yc(this.r),Yc(this.g),Yc(this.b),nv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fq,formatHex:fq,formatHex8:cee,formatRgb:pq,toString:pq}));function fq(){return`#${Kc(this.r)}${Kc(this.g)}${Kc(this.b)}`}function cee(){return`#${Kc(this.r)}${Kc(this.g)}${Kc(this.b)}${Kc((isNaN(this.opacity)?1:this.opacity)*255)}`}function pq(){const t=nv(this.opacity);return`${t===1?"rgb(":"rgba("}${Yc(this.r)}, ${Yc(this.g)}, ${Yc(this.b)}${t===1?")":`, ${t})`}`}function nv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Kc(t){return t=Yc(t),(t<16?"0":"")+t.toString(16)}function hq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jo(t,e,n,r)}function B2(t){if(t instanceof jo)return new jo(t.h,t.s,t.l,t.opacity);if(t instanceof Im||(t=zh(t)),!t)return new jo;if(t instanceof jo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new jo(o,l,u,t.opacity)}function uee(t,e,n,r){return arguments.length===1?B2(t):new jo(t,e,n,r??1)}function jo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jN(jo,uee,$2(Im,{brighter(t){return t=t==null?tv:Math.pow(tv,t),new jo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$h:Math.pow($h,t),new jo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ps(NS(t>=240?t-240:t+120,i,r),NS(t,i,r),NS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jo(mq(this.h),sy(this.s),sy(this.l),nv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=nv(this.opacity);return`${t===1?"hsl(":"hsla("}${mq(this.h)}, ${sy(this.s)*100}%, ${sy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mq(t){return t=(t||0)%360,t<0?t+360:t}function sy(t){return Math.max(0,Math.min(1,t||0))}function NS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const z2=t=>()=>t;function dee(t,e){return function(n){return t+n*e}}function fee(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pee(t){return(t=+t)==1?W2:function(e,n){return n-e?fee(e,n,t):z2(isNaN(e)?n:e)}}function W2(t,e){var n=e-t;return n?dee(t,n):z2(isNaN(t)?e:t)}const gq=function t(e){var n=pee(e);function r(i,s){var o=n((i=VE(i)).r,(s=VE(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),f=W2(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=t,r}(1);function Cl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var UE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kS=new RegExp(UE.source,"g");function hee(t){return function(){return t}}function mee(t){return function(e){return t(e)+""}}function gee(t,e){var n=UE.lastIndex=kS.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=UE.exec(t))&&(i=kS.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Cl(r,i)})),n=kS.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?mee(u[0].x):hee(e):(e=u.length,function(f){for(var p=0,h;p<e;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}var yq=180/Math.PI,HE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V2(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*yq,skewX:Math.atan(u)*yq,scaleX:o,scaleY:l}}var oy;function yee(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?HE:V2(e.a,e.b,e.c,e.d,e.e,e.f)}function bee(t){return t==null||(oy||(oy=document.createElementNS("http://www.w3.org/2000/svg","g")),oy.setAttribute("transform",t),!(t=oy.transform.baseVal.consolidate()))?HE:(t=t.matrix,V2(t.a,t.b,t.c,t.d,t.e,t.f))}function U2(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push("translate(",null,e,null,n);_.push({i:E-4,x:Cl(f,h)},{i:E-2,x:Cl(p,b)})}else(h||b)&&x.push("translate("+h+e+b+n)}function o(f,p,h,b){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),b.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Cl(f,p)})):p&&h.push(i(h)+"rotate("+p+r)}function l(f,p,h,b){f!==p?b.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Cl(f,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push(i(x)+"scale(",null,",",null,")");_.push({i:E-4,x:Cl(f,h)},{i:E-2,x:Cl(p,b)})}else(h!==1||b!==1)&&x.push(i(x)+"scale("+h+","+b+")")}return function(f,p){var h=[],b=[];return f=t(f),p=t(p),s(f.translateX,f.translateY,p.translateX,p.translateY,h,b),o(f.rotate,p.rotate,h,b),l(f.skewX,p.skewX,h,b),u(f.scaleX,f.scaleY,p.scaleX,p.scaleY,h,b),f=p=null,function(x){for(var _=-1,E=b.length,N;++_<E;)h[(N=b[_]).i]=N.x(x);return h.join("")}}}var vee=U2(yee,"px, ","px)","deg)"),xee=U2(bee,", ",")",")"),wee=1e-12;function bq(t){return((t=Math.exp(t))+1/t)/2}function _ee(t){return((t=Math.exp(t))-1/t)/2}function See(t){return((t=Math.exp(2*t))-1)/(t+1)}const Eee=function t(e,n,r){function i(s,o){var l=s[0],u=s[1],f=s[2],p=o[0],h=o[1],b=o[2],x=p-l,_=h-u,E=x*x+_*_,N,j;if(E<wee)j=Math.log(b/f)/e,N=function(W){return[l+W*x,u+W*_,f*Math.exp(e*W*j)]};else{var C=Math.sqrt(E),R=(b*b-f*f+r*E)/(2*f*n*C),q=(b*b-f*f-r*E)/(2*b*n*C),L=Math.log(Math.sqrt(R*R+1)-R),M=Math.log(Math.sqrt(q*q+1)-q);j=(M-L)/e,N=function(W){var P=W*j,O=bq(L),z=f/(n*C)*(O*See(e*P+L)-_ee(L));return[l+z*x,u+z*_,f*O/bq(e*P+L)]}}return N.duration=j*1e3*e/Math.SQRT2,N}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4);var Yd=0,Dp=0,_p=0,H2=1e3,rv,Lp,iv=0,uu=0,Xv=0,Wh=typeof performance=="object"&&performance.now?performance:Date,K2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function TN(){return uu||(K2(Iee),uu=Wh.now()+Xv)}function Iee(){uu=0}function sv(){this._call=this._time=this._next=null}sv.prototype=Q2.prototype={constructor:sv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?TN():+n)+(e==null?0:+e),!this._next&&Lp!==this&&(Lp?Lp._next=this:rv=this,Lp=this),this._call=t,this._time=n,KE()},stop:function(){this._call&&(this._call=null,this._time=1/0,KE())}};function Q2(t,e,n){var r=new sv;return r.restart(t,e,n),r}function Nee(){TN(),++Yd;for(var t=rv,e;t;)(e=uu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Yd}function vq(){uu=(iv=Wh.now())+Xv,Yd=Dp=0;try{Nee()}finally{Yd=0,Cee(),uu=0}}function kee(){var t=Wh.now(),e=t-iv;e>H2&&(Xv-=e,iv=t)}function Cee(){for(var t,e=rv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:rv=n);Lp=t,KE(r)}function KE(t){if(!Yd){Dp&&(Dp=clearTimeout(Dp));var e=t-uu;e>24?(t<1/0&&(Dp=setTimeout(vq,t-Wh.now()-Xv)),_p&&(_p=clearInterval(_p))):(_p||(iv=Wh.now(),_p=setInterval(kee,H2)),Yd=1,K2(vq))}}function xq(t,e,n){var r=new sv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var jee=Zv("start","end","cancel","interrupt"),Tee=[],G2=0,wq=1,QE=2,My=3,_q=4,GE=5,$y=6;function ex(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ree(t,n,{name:e,index:r,group:i,on:jee,tween:Tee,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:G2})}function RN(t,e){var n=zo(t,e);if(n.state>G2)throw new Error("too late; already scheduled");return n}function fa(t,e){var n=zo(t,e);if(n.state>My)throw new Error("too late; already running");return n}function zo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ree(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Q2(s,0,n.time);function s(f){n.state=wq,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var p,h,b,x;if(n.state!==wq)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===My)return xq(o);x.state===_q?(x.state=$y,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=$y,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(xq(function(){n.state===My&&(n.state=_q,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=QE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===QE){for(n.state=My,i=new Array(b=n.tween.length),p=0,h=-1;p<b;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function l(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=GE,1),h=-1,b=i.length;++h<b;)i[h].call(t,p);n.state===GE&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=$y,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function By(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>QE&&r.state<GE,r.state=$y,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Oee(t){return this.each(function(){By(this,t)})}function qee(t,e){var n,r;return function(){var i=fa(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Aee(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=fa(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,f=i.length;u<f;++u)if(i[u].name===e){i[u]=l;break}u===f&&i.push(l)}s.tween=i}}function Pee(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=zo(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?qee:Aee)(n,t,e))}function ON(t,e,n){var r=t._id;return t.each(function(){var i=fa(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return zo(i,r).value[e]}}function J2(t,e){var n;return(typeof e=="number"?Cl:e instanceof zh?gq:(n=zh(e))?(e=n,gq):gee)(t,e)}function Fee(t){return function(){this.removeAttribute(t)}}function Dee(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lee(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Mee(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function $ee(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function Bee(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function zee(t,e){var n=Yv(t),r=n==="transform"?xee:J2;return this.attrTween(t,typeof e=="function"?(n.local?Bee:$ee)(n,r,ON(this,"attr."+t,e)):e==null?(n.local?Dee:Fee)(n):(n.local?Mee:Lee)(n,r,e))}function Wee(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Vee(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Uee(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Vee(t,s)),n}return i._value=e,i}function Hee(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Wee(t,s)),n}return i._value=e,i}function Kee(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Yv(t);return this.tween(n,(r.local?Uee:Hee)(r,e))}function Qee(t,e){return function(){RN(this,t).delay=+e.apply(this,arguments)}}function Gee(t,e){return e=+e,function(){RN(this,t).delay=e}}function Jee(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qee:Gee)(e,t)):zo(this.node(),e).delay}function Zee(t,e){return function(){fa(this,t).duration=+e.apply(this,arguments)}}function Yee(t,e){return e=+e,function(){fa(this,t).duration=e}}function Xee(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zee:Yee)(e,t)):zo(this.node(),e).duration}function ete(t,e){if(typeof e!="function")throw new Error;return function(){fa(this,t).ease=e}}function tte(t){var e=this._id;return arguments.length?this.each(ete(e,t)):zo(this.node(),e).ease}function nte(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fa(this,t).ease=n}}function rte(t){if(typeof t!="function")throw new Error;return this.each(nte(this._id,t))}function ite(t){typeof t!="function"&&(t=k2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Qa(r,this._parents,this._name,this._id)}function ste(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],f=n[l],p=u.length,h=o[l]=new Array(p),b,x=0;x<p;++x)(b=u[x]||f[x])&&(h[x]=b);for(;l<r;++l)o[l]=e[l];return new Qa(o,this._parents,this._name,this._id)}function ote(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ate(t,e,n){var r,i,s=ote(e)?RN:fa;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function lte(t,e){var n=this._id;return arguments.length<2?zo(this.node(),n).on.on(t):this.each(ate(n,t,e))}function cte(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ute(){return this.on("end.remove",cte(this._id))}function dte(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kN(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,f=s[o]=new Array(u),p,h,b=0;b<u;++b)(p=l[b])&&(h=t.call(p,p.__data__,b,l))&&("__data__"in p&&(h.__data__=p.__data__),f[b]=h,ex(f[b],e,n,b,f,zo(p,n)));return new Qa(s,this._parents,e,n)}function fte(t){var e=this._name,n=this._id;typeof t!="function"&&(t=N2(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],f=u.length,p,h=0;h<f;++h)if(p=u[h]){for(var b=t.call(p,p.__data__,h,u),x,_=zo(p,n),E=0,N=b.length;E<N;++E)(x=b[E])&&ex(x,e,n,E,b,_);s.push(b),o.push(p)}return new Qa(s,o,e,n)}var pte=Em.prototype.constructor;function hte(){return new pte(this._groups,this._parents)}function mte(t,e){var n,r,i;return function(){var s=Zd(this,t),o=(this.style.removeProperty(t),Zd(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function Z2(t){return function(){this.style.removeProperty(t)}}function gte(t,e,n){var r,i=n+"",s;return function(){var o=Zd(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function yte(t,e,n){var r,i,s;return function(){var o=Zd(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Zd(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function bte(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=fa(this,t),f=u.on,p=u.value[s]==null?l||(l=Z2(e)):void 0;(f!==n||i!==p)&&(r=(n=f).copy()).on(o,i=p),u.on=r}}function vte(t,e,n){var r=(t+="")=="transform"?vee:J2;return e==null?this.styleTween(t,mte(t,r)).on("end.style."+t,Z2(t)):typeof e=="function"?this.styleTween(t,yte(t,r,ON(this,"style."+t,e))).each(bte(this._id,t)):this.styleTween(t,gte(t,r,e),n).on("end.style."+t,null)}function xte(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function wte(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&xte(t,o,n)),r}return s._value=e,s}function _te(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,wte(t,e,n??""))}function Ste(t){return function(){this.textContent=t}}function Ete(t){return function(){var e=t(this);this.textContent=e??""}}function Ite(t){return this.tween("text",typeof t=="function"?Ete(ON(this,"text",t)):Ste(t==null?"":t+""))}function Nte(t){return function(e){this.textContent=t.call(this,e)}}function kte(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Nte(i)),e}return r._value=t,r}function Cte(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,kte(t))}function jte(){for(var t=this._name,e=this._id,n=Y2(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)if(u=o[f]){var p=zo(u,e);ex(u,t,n,f,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Qa(r,this._parents,t,n)}function Tte(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var f=fa(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),f.on=e}),i===0&&s()})}var Rte=0;function Qa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Y2(){return++Rte}var Ra=Em.prototype;Qa.prototype={constructor:Qa,select:dte,selectAll:fte,selectChild:Ra.selectChild,selectChildren:Ra.selectChildren,filter:ite,merge:ste,selection:hte,transition:jte,call:Ra.call,nodes:Ra.nodes,node:Ra.node,size:Ra.size,empty:Ra.empty,each:Ra.each,on:lte,attr:zee,attrTween:Kee,style:vte,styleTween:_te,text:Ite,textTween:Cte,remove:ute,tween:Pee,delay:Jee,duration:Xee,ease:tte,easeVarying:rte,end:Tte,[Symbol.iterator]:Ra[Symbol.iterator]};function Ote(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qte={time:null,delay:0,duration:250,ease:Ote};function Ate(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Pte(t){var e,n;t instanceof Qa?(e=t._id,t=t._name):(e=Y2(),(n=qte).time=TN(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&ex(u,t,e,f,o,n||Ate(u,e));return new Qa(r,this._parents,t,e)}Em.prototype.interrupt=Oee;Em.prototype.transition=Pte;const ay=t=>()=>t;function Fte(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Da(t,e,n){this.k=t,this.x=e,this.y=n}Da.prototype={constructor:Da,scale:function(t){return t===1?this:new Da(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Da(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tx=new Da(1,0,0);X2.prototype=Da.prototype;function X2(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tx;return t.__zoom}function CS(t){t.stopImmediatePropagation()}function Sp(t){t.preventDefault(),t.stopImmediatePropagation()}function Dte(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Lte(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Sq(){return this.__zoom||tx}function Mte(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function $te(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bte(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function eL(){var t=Dte,e=Lte,n=Bte,r=Mte,i=$te,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Eee,f=Zv("start","zoom","end"),p,h,b,x=500,_=150,E=0,N=10;function j(B){B.property("__zoom",Sq).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",D).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(B,G,Z,le){var ie=B.selection?B.selection():B;ie.property("__zoom",Sq),B!==ie?L(B,G,Z,le):ie.interrupt().each(function(){M(this,arguments).event(le).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},j.scaleBy=function(B,G,Z,le){j.scaleTo(B,function(){var ie=this.__zoom.k,ne=typeof G=="function"?G.apply(this,arguments):G;return ie*ne},Z,le)},j.scaleTo=function(B,G,Z,le){j.transform(B,function(){var ie=e.apply(this,arguments),ne=this.__zoom,oe=Z==null?q(ie):typeof Z=="function"?Z.apply(this,arguments):Z,te=ne.invert(oe),ue=typeof G=="function"?G.apply(this,arguments):G;return n(R(C(ne,ue),oe,te),ie,o)},Z,le)},j.translateBy=function(B,G,Z,le){j.transform(B,function(){return n(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),o)},null,le)},j.translateTo=function(B,G,Z,le,ie){j.transform(B,function(){var ne=e.apply(this,arguments),oe=this.__zoom,te=le==null?q(ne):typeof le=="function"?le.apply(this,arguments):le;return n(tx.translate(te[0],te[1]).scale(oe.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof Z=="function"?-Z.apply(this,arguments):-Z),ne,o)},le,ie)};function C(B,G){return G=Math.max(s[0],Math.min(s[1],G)),G===B.k?B:new Da(G,B.x,B.y)}function R(B,G,Z){var le=G[0]-Z[0]*B.k,ie=G[1]-Z[1]*B.k;return le===B.x&&ie===B.y?B:new Da(B.k,le,ie)}function q(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function L(B,G,Z,le){B.on("start.zoom",function(){M(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(le).end()}).tween("zoom",function(){var ie=this,ne=arguments,oe=M(ie,ne).event(le),te=e.apply(ie,ne),ue=Z==null?q(te):typeof Z=="function"?Z.apply(ie,ne):Z,de=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),ye=ie.__zoom,we=typeof G=="function"?G.apply(ie,ne):G,Ie=u(ye.invert(ue).concat(de/ye.k),we.invert(ue).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var Re=Ie(ze),De=de/Re[2];ze=new Da(De,ue[0]-Re[0]*De,ue[1]-Re[1]*De)}oe.zoom(null,ze)}})}function M(B,G,Z){return!Z&&B.__zooming||new W(B,G)}function W(B,G){this.that=B,this.args=G,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,G),this.taps=0}W.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,G){return this.mouse&&B!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var G=Os(this.that).datum();f.call(B,this.that,new Fte(B,{sourceEvent:this.sourceEvent,target:j,type:B,transform:this.that.__zoom,dispatch:f}),G)}};function P(B,...G){if(!t.apply(this,arguments))return;var Z=M(this,G).event(B),le=this.__zoom,ie=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=Eo(B);if(Z.wheel)(Z.mouse[0][0]!==ne[0]||Z.mouse[0][1]!==ne[1])&&(Z.mouse[1]=le.invert(Z.mouse[0]=ne)),clearTimeout(Z.wheel);else{if(le.k===ie)return;Z.mouse=[ne,le.invert(ne)],By(this),Z.start()}Sp(B),Z.wheel=setTimeout(oe,_),Z.zoom("mouse",n(R(C(le,ie),Z.mouse[0],Z.mouse[1]),Z.extent,o));function oe(){Z.wheel=null,Z.end()}}function O(B,...G){if(b||!t.apply(this,arguments))return;var Z=B.currentTarget,le=M(this,G,!0).event(B),ie=Os(B.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),ne=Eo(B,Z),oe=B.clientX,te=B.clientY;D2(B.view),CS(B),le.mouse=[ne,this.__zoom.invert(ne)],By(this),le.start();function ue(ye){if(Sp(ye),!le.moved){var we=ye.clientX-oe,Ie=ye.clientY-te;le.moved=we*we+Ie*Ie>E}le.event(ye).zoom("mouse",n(R(le.that.__zoom,le.mouse[0]=Eo(ye,Z),le.mouse[1]),le.extent,o))}function de(ye){ie.on("mousemove.zoom mouseup.zoom",null),L2(ye.view,le.moved),Sp(ye),le.event(ye).end()}}function z(B,...G){if(t.apply(this,arguments)){var Z=this.__zoom,le=Eo(B.changedTouches?B.changedTouches[0]:B,this),ie=Z.invert(le),ne=Z.k*(B.shiftKey?.5:2),oe=n(R(C(Z,ne),le,ie),e.apply(this,G),o);Sp(B),l>0?Os(this).transition().duration(l).call(L,oe,le,B):Os(this).call(j.transform,oe,le,B)}}function D(B,...G){if(t.apply(this,arguments)){var Z=B.touches,le=Z.length,ie=M(this,G,B.changedTouches.length===le).event(B),ne,oe,te,ue;for(CS(B),oe=0;oe<le;++oe)te=Z[oe],ue=Eo(te,this),ue=[ue,this.__zoom.invert(ue),te.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==ue[2]&&(ie.touch1=ue,ie.taps=0):(ie.touch0=ue,ne=!0,ie.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(ie.taps<2&&(h=ue[0],p=setTimeout(function(){p=null},x)),By(this),ie.start())}}function V(B,...G){if(this.__zooming){var Z=M(this,G).event(B),le=B.changedTouches,ie=le.length,ne,oe,te,ue;for(Sp(B),ne=0;ne<ie;++ne)oe=le[ne],te=Eo(oe,this),Z.touch0&&Z.touch0[2]===oe.identifier?Z.touch0[0]=te:Z.touch1&&Z.touch1[2]===oe.identifier&&(Z.touch1[0]=te);if(oe=Z.that.__zoom,Z.touch1){var de=Z.touch0[0],ye=Z.touch0[1],we=Z.touch1[0],Ie=Z.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,Re=(Re=Ie[0]-ye[0])*Re+(Re=Ie[1]-ye[1])*Re;oe=C(oe,Math.sqrt(ze/Re)),te=[(de[0]+we[0])/2,(de[1]+we[1])/2],ue=[(ye[0]+Ie[0])/2,(ye[1]+Ie[1])/2]}else if(Z.touch0)te=Z.touch0[0],ue=Z.touch0[1];else return;Z.zoom("touch",n(R(oe,te,ue),Z.extent,o))}}function U(B,...G){if(this.__zooming){var Z=M(this,G).event(B),le=B.changedTouches,ie=le.length,ne,oe;for(CS(B),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),ne=0;ne<ie;++ne)oe=le[ne],Z.touch0&&Z.touch0[2]===oe.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===oe.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(oe=Eo(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<N)){var te=Os(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return j.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:ay(+B),j):r},j.filter=function(B){return arguments.length?(t=typeof B=="function"?B:ay(!!B),j):t},j.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:ay(!!B),j):i},j.extent=function(B){return arguments.length?(e=typeof B=="function"?B:ay([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),j):e},j.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],j):[s[0],s[1]]},j.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],j):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},j.constrain=function(B){return arguments.length?(n=B,j):n},j.duration=function(B){return arguments.length?(l=+B,j):l},j.interpolate=function(B){return arguments.length?(u=B,j):u},j.on=function(){var B=f.on.apply(f,arguments);return B===f?j:B},j.clickDistance=function(B){return arguments.length?(E=(B=+B)*B,j):Math.sqrt(E)},j.tapDistance=function(B){return arguments.length?(N=+B,j):N},j}const Ga={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},Vh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tL=["Enter"," ","Escape"];var Xd;(function(t){t.Strict="strict",t.Loose="loose"})(Xd||(Xd={}));var Xc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Xc||(Xc={}));var Uh;(function(t){t.Partial="partial",t.Full="full"})(Uh||(Uh={}));const nL={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Fl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Fl||(Fl={}));var Hh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Hh||(Hh={}));var Ot;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ot||(Ot={}));const Eq={[Ot.Left]:Ot.Right,[Ot.Right]:Ot.Left,[Ot.Top]:Ot.Bottom,[Ot.Bottom]:Ot.Top};function rL(t){return t===null?null:t?"valid":"invalid"}const iL=t=>"id"in t&&"source"in t&&"target"in t,zte=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),qN=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Nm=(t,e=[0,0])=>{const{width:n,height:r}=Ja(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},Wte=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):qN(i)?i:e.nodeLookup.get(i.id));const l=o?ov(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return nx(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rx(n)},wf=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=ov(r);n=nx(n,i)}}),rx(n)},sL=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...km(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const f of t.values()){const{measured:p,selectable:h=!0,hidden:b=!1}=f;if(o&&!h||b)continue;const x=p.width??f.width??f.initialWidth??null,_=p.height??f.height??f.initialHeight??null,E=Kh(l,tf(f)),N=(x??0)*(_??0),j=s&&E>0;(!f.internals.handleBounds||j||E>=N||f.dragging)&&u.push(f)}return u},Vte=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function JE(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function ZE({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const l=wf(t),u=AN(l,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function oL({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:f}=l?l.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Ga.error005());else{const x=l.measured.width,_=l.measured.height;x&&_&&(h=[[u,f],[u+x,f+_]])}else l&&nf(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+f],[o.extent[1][0]+u,o.extent[1][1]+f]]);const b=nf(h)?du(e,h,o.measured):e;return{position:{x:b.x-u+o.measured.width*p[0],y:b.y-f+o.measured.height*p[1]},positionAbsolute:b}}async function Ute({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(b=>b.id)),o=[];for(const b of n){if(b.deletable===!1)continue;const x=s.has(b.id),_=!x&&b.parentId&&o.find(E=>E.id===b.parentId);(x||_)&&o.push(b)}const l=new Set(e.map(b=>b.id)),u=r.filter(b=>b.deletable!==!1),p=Vte(o,u);for(const b of u)l.has(b.id)&&!p.find(_=>_.id===b.id)&&p.push(b);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const ef=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),du=(t={x:0,y:0},e,n)=>({x:ef(t.x,e[0][0],e[1][0]-(n?.width??0)),y:ef(t.y,e[0][1],e[1][1]-(n?.height??0))});function aL(t,e,n){const{width:r,height:i}=Ja(n),{x:s,y:o}=n.internals.positionAbsolute;return du(t,[[s,o],[s+r,o+i]],e)}const Iq=(t,e,n)=>t<e?ef(Math.abs(t-e),1,e)/e:t>n?-ef(Math.abs(t-n),1,e)/e:0,lL=(t,e,n=15,r=40)=>{const i=Iq(t.x,r,e.width-r)*n,s=Iq(t.y,r,e.height-r)*n;return[i,s]},nx=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),YE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),rx=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),tf=(t,e=[0,0])=>{const{x:n,y:r}=qN(t)?t.internals.positionAbsolute:Nm(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},ov=(t,e=[0,0])=>{const{x:n,y:r}=qN(t)?t.internals.positionAbsolute:Nm(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},cL=(t,e)=>rx(nx(YE(t),YE(e))),Kh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},Nq=t=>Oo(t.width)&&Oo(t.height)&&Oo(t.x)&&Oo(t.y),Oo=t=>!isNaN(t)&&isFinite(t),Hte=(t,e)=>{},ix=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),km=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?ix(l,o):l},uL=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),AN=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),l=n/(t.height*(1+s)),u=Math.min(o,l),f=ef(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,b=e/2-p*f,x=n/2-h*f;return{x:b,y:x,zoom:f}},av=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function nf(t){return t!==void 0&&t!=="parent"}function Ja(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function dL(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function fL(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function kq(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function lh(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=$a(t),l=km({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:f}=n?ix(l,e):l;return{xSnapped:u,ySnapped:f,...l}}const sx=t=>({width:t.offsetWidth,height:t.offsetHeight}),pL=t=>t?.getRootNode?.()||window?.document,Kte=["INPUT","SELECT","TEXTAREA"];function XE(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:Kte.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const hL=t=>"clientX"in t,$a=(t,e)=>{const n=hL(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},Cq=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...sx(o)}})};function mL({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,f=e*.125+s*.375+l*.375+r*.125,p=Math.abs(u-t),h=Math.abs(f-e);return[u,f,p,h]}function ly(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function jq({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Ot.Left:return[e-ly(e-r,s),n];case Ot.Right:return[e+ly(r-e,s),n];case Ot.Top:return[e,n-ly(n-i,s)];case Ot.Bottom:return[e,n+ly(i-n,s)]}}function PN({sourceX:t,sourceY:e,sourcePosition:n=Ot.Bottom,targetX:r,targetY:i,targetPosition:s=Ot.Top,curvature:o=.25}){const[l,u]=jq({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[f,p]=jq({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,b,x,_]=mL({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:p});return[`M${t},${e} C${l},${u} ${f},${p} ${r},${i}`,h,b,x,_]}function gL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function Qte({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function Gte({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=nx(ov(t),ov(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Kh(o,rx(s))>0}const Jte=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,Zte=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Yte=(t,e)=>{if(!t.source||!t.target)return e;let n;return iL(t)?n={...t}:n={...t,id:Jte(t)},Zte(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function yL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=gL({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const Tq={[Ot.Left]:{x:-1,y:0},[Ot.Right]:{x:1,y:0},[Ot.Top]:{x:0,y:-1},[Ot.Bottom]:{x:0,y:1}},Xte=({source:t,sourcePosition:e=Ot.Bottom,target:n})=>e===Ot.Left||e===Ot.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Rq=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function ene({source:t,sourcePosition:e=Ot.Bottom,target:n,targetPosition:r=Ot.Top,center:i,offset:s}){const o=Tq[e],l=Tq[r],u={x:t.x+o.x*s,y:t.y+o.y*s},f={x:n.x+l.x*s,y:n.y+l.y*s},p=Xte({source:u,sourcePosition:e,target:f}),h=p.x!==0?"x":"y",b=p[h];let x=[],_,E;const N={x:0,y:0},j={x:0,y:0},[C,R,q,L]=gL({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){_=i.x??C,E=i.y??R;const W=[{x:_,y:u.y},{x:_,y:f.y}],P=[{x:u.x,y:E},{x:f.x,y:E}];o[h]===b?x=h==="x"?W:P:x=h==="x"?P:W}else{const W=[{x:u.x,y:f.y}],P=[{x:f.x,y:u.y}];if(h==="x"?x=o.x===b?P:W:x=o.y===b?W:P,e===r){const U=Math.abs(t[h]-n[h]);if(U<=s){const B=Math.min(s-1,s-U);o[h]===b?N[h]=(u[h]>t[h]?-1:1)*B:j[h]=(f[h]>n[h]?-1:1)*B}}if(e!==r){const U=h==="x"?"y":"x",B=o[h]===l[U],G=u[U]>f[U],Z=u[U]<f[U];(o[h]===1&&(!B&&G||B&&Z)||o[h]!==1&&(!B&&Z||B&&G))&&(x=h==="x"?W:P)}const O={x:u.x+N.x,y:u.y+N.y},z={x:f.x+j.x,y:f.y+j.y},D=Math.max(Math.abs(O.x-x[0].x),Math.abs(z.x-x[0].x)),V=Math.max(Math.abs(O.y-x[0].y),Math.abs(z.y-x[0].y));D>=V?(_=(O.x+z.x)/2,E=x[0].y):(_=x[0].x,E=(O.y+z.y)/2)}return[[t,{x:u.x+N.x,y:u.y+N.y},...x,{x:f.x+j.x,y:f.y+j.y},n],_,E,q,L]}function tne(t,e,n,r){const i=Math.min(Rq(t,e)/2,Rq(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function eI({sourceX:t,sourceY:e,sourcePosition:n=Ot.Bottom,targetX:r,targetY:i,targetPosition:s=Ot.Top,borderRadius:o=5,centerX:l,centerY:u,offset:f=20}){const[p,h,b,x,_]=ene({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:f});return[p.reduce((N,j,C)=>{let R="";return C>0&&C<p.length-1?R=tne(p[C-1],j,p[C+1],o):R=`${C===0?"M":"L"}${j.x} ${j.y}`,N+=R,N},""),h,b,x,_]}function Oq(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function nne(t){const{sourceNode:e,targetNode:n}=t;if(!Oq(e)||!Oq(n))return null;const r=e.internals.handleBounds||qq(e.handles),i=n.internals.handleBounds||qq(n.handles),s=Aq(r?.source??[],t.sourceHandle),o=Aq(t.connectionMode===Xd.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Ga.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Ot.Bottom,u=o?.position||Ot.Top,f=Qh(e,s,l),p=Qh(n,o,u);return{sourceX:f.x,sourceY:f.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function qq(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Qh(t,e,n=Ot.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Ja(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Ot.Top:return{x:i+o/2,y:s};case Ot.Right:return{x:i+o,y:s+l/2};case Ot.Bottom:return{x:i+o/2,y:s+l};case Ot.Left:return{x:i,y:s+l/2}}}function Aq(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function tI(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function rne(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const f=tI(u,e);s.has(f)||(o.push({id:f,color:u.color||n,...u}),s.add(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}function ine(t,e,n,r,i){let s=.5;i==="start"?s=0:i==="end"&&(s=1);let o=[(t.x+t.width*s)*e.zoom+e.x,t.y*e.zoom+e.y-r],l=[-100*s,-100];switch(n){case Ot.Right:o=[(t.x+t.width)*e.zoom+e.x+r,(t.y+t.height*s)*e.zoom+e.y],l=[0,-100*s];break;case Ot.Bottom:o[1]=(t.y+t.height)*e.zoom+e.y+r,l[1]=0;break;case Ot.Left:o=[t.x*e.zoom+e.x-r,(t.y+t.height*s)*e.zoom+e.y],l=[-100,-100*s];break}return`translate(${o[0]}px, ${o[1]}px) translate(${l[0]}%, ${l[1]}%)`}const FN={nodeOrigin:[0,0],nodeExtent:Vh,elevateNodesOnSelect:!0,defaults:{}},sne={...FN,checkEquality:!0};function DN(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function one(t,e,n){const r=DN(FN,n);for(const i of t.values())if(i.parentId)LN(i,t,e,r);else{const s=Nm(i,r.nodeOrigin),o=nf(i.extent)?i.extent:r.nodeExtent,l=du(s,o,Ja(i));i.internals.positionAbsolute=l}}function nI(t,e,n,r){const i=DN(sne,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const l of t){let u=s.get(l.id);if(i.checkEquality&&l===u?.internals.userNode)e.set(l.id,u);else{const f=Nm(l,i.nodeOrigin),p=nf(l.extent)?l.extent:i.nodeExtent,h=du(f,p,Ja(l));u={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:l.measured?u?.internals.handleBounds:void 0,z:bL(l,o),userNode:l}},e.set(l.id,u)}l.parentId&&LN(u,e,n,r)}}function ane(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function LN(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=DN(FN,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}ane(t,n);const f=i?1e3:0,{x:p,y:h,z:b}=lne(t,u,s,o,f),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:b}})}function bL(t,e){return(Oo(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function lne(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=Ja(t),u=Nm(t,n),f=nf(t.extent)?du(u,t.extent,l):u;let p=du({x:s+f.x,y:o+f.y},r,l);t.extent==="parent"&&(p=aL(p,l,e));const h=bL(t,i),b=e.internals.z??0;return{x:p.x,y:p.y,z:b>h?b:h}}function MN(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??tf(l),f=cL(u,o.rect);s.set(o.parentId,{expandedRect:f,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const f=l.internals.positionAbsolute,p=Ja(l),h=l.origin??r,b=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,x=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),E=Math.max(p.height,Math.round(o.height)),N=(_-p.width)*h[0],j=(E-p.height)*h[1];(b>0||x>0||N||j)&&(i.push({id:u,type:"position",position:{x:l.position.x-b+N,y:l.position.y-x+j}}),n.get(u)?.forEach(C=>{t.some(R=>R.id===C.id)||i.push({id:C.id,type:"position",position:{x:C.position.x+b,y:C.position.y+x}})})),(p.width<o.width||p.height<o.height||b||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?h[0]*b-N:0),height:E+(x?h[1]*x-j:0)}})}),i}function cne(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=[];for(const b of t.values()){const x=e.get(b.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),l=!0;continue}const _=sx(b.nodeElement),E=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(E||!x.internals.handleBounds||b.force))){const j=b.nodeElement.getBoundingClientRect(),C=nf(x.extent)?x.extent:s;let{positionAbsolute:R}=x.internals;x.parentId&&x.extent==="parent"?R=aL(R,_,e.get(x.parentId)):C&&(R=du(R,C,_));const q={...x,measured:_,internals:{...x.internals,positionAbsolute:R,handleBounds:{source:Cq("source",b.nodeElement,j,p,x.id),target:Cq("target",b.nodeElement,j,p,x.id)}}};e.set(x.id,q),x.parentId&&LN(q,e,n,{nodeOrigin:i}),l=!0,E&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:tf(q,i)}))}}if(h.length>0){const b=MN(h,e,n,i);u.push(...b)}return{changes:u,updatedInternals:l}}async function une({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function Pq(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,e))}}function vL(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},f=`${i}-${o}--${s}-${l}`,p=`${s}-${l}--${i}-${o}`;Pq("source",u,p,t,i,o),Pq("target",u,f,t,s,l),e.set(r.id,r)}}function xL(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:xL(n,e):!1}function Fq(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function dne(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!xL(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function jS({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function fne({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,f={x:0,y:0},p=null,h=!1,b=null,x=!1;function _({noDragClassName:N,handleSelector:j,domNode:C,isSelectable:R,nodeId:q,nodeClickDistance:L=0}){b=Os(C);function M({x:z,y:D},V){const{nodeLookup:U,nodeExtent:B,snapGrid:G,snapToGrid:Z,nodeOrigin:le,onNodeDrag:ie,onSelectionDrag:ne,onError:oe,updateNodePositions:te}=e();s={x:z,y:D};let ue=!1,de={x:0,y:0,x2:0,y2:0};if(l.size>1&&B){const ye=wf(l);de=YE(ye)}for(const[ye,we]of l){if(!U.has(ye))continue;let Ie={x:z-we.distance.x,y:D-we.distance.y};Z&&(Ie=ix(Ie,G));let ze=[[B[0][0],B[0][1]],[B[1][0],B[1][1]]];if(l.size>1&&B&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+B[0][0],Ve=Je.x+we.measured.width-de.x2+B[1][0],ct=Je.y-de.y+B[0][1],_t=Je.y+we.measured.height-de.y2+B[1][1];ze=[[Xe,ct],[Ve,_t]]}const{position:Re,positionAbsolute:De}=oL({nodeId:ye,nextPosition:Ie,nodeLookup:U,nodeExtent:ze,nodeOrigin:le,onError:oe});ue=ue||we.position.x!==Re.x||we.position.y!==Re.y,we.position=Re,we.internals.positionAbsolute=De}if(ue&&(te(l,!0),V&&(r||ie||!q&&ne))){const[ye,we]=jS({nodeId:q,dragItems:l,nodeLookup:U});r?.(V,l,ye,we),ie?.(V,ye,we),q||ne?.(V,we)}}async function W(){if(!p)return;const{transform:z,panBy:D,autoPanSpeed:V}=e(),[U,B]=lL(f,p,V);(U!==0||B!==0)&&(s.x=(s.x??0)-U/z[2],s.y=(s.y??0)-B/z[2],await D({x:U,y:B})&&M(s,null)),o=requestAnimationFrame(W)}function P(z){const{nodeLookup:D,multiSelectionActive:V,nodesDraggable:U,transform:B,snapGrid:G,snapToGrid:Z,selectNodesOnDrag:le,onNodeDragStart:ie,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!R)&&!V&&q&&(D.get(q)?.selected||oe()),R&&le&&q&&t?.(q);const te=lh(z.sourceEvent,{transform:B,snapGrid:G,snapToGrid:Z,containerBounds:p});if(s=te,l=dne(D,U,te,q),l.size>0&&(n||ie||!q&&ne)){const[ue,de]=jS({nodeId:q,dragItems:l,nodeLookup:D});n?.(z.sourceEvent,l,ue,de),ie?.(z.sourceEvent,ue,de),q||ne?.(z.sourceEvent,de)}}const O=M2().clickDistance(L).on("start",z=>{const{domNode:D,nodeDragThreshold:V,transform:U,snapGrid:B,snapToGrid:G}=e();p=D?.getBoundingClientRect()||null,x=!1,V===0&&P(z),s=lh(z.sourceEvent,{transform:U,snapGrid:B,snapToGrid:G,containerBounds:p}),f=$a(z.sourceEvent,p)}).on("drag",z=>{const{autoPanOnNodeDrag:D,transform:V,snapGrid:U,snapToGrid:B,nodeDragThreshold:G,nodeLookup:Z}=e(),le=lh(z.sourceEvent,{transform:V,snapGrid:U,snapToGrid:B,containerBounds:p});if((z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||q&&!Z.has(q))&&(x=!0),!x){if(!u&&D&&h&&(u=!0,W()),!h){const ie=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(ie*ie+ne*ne)>G&&P(z)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&l&&h&&(f=$a(z.sourceEvent,p),M(le,z.sourceEvent))}}).on("end",z=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:D,updateNodePositions:V,onNodeDragStop:U,onSelectionDragStop:B}=e();if(V(l,!1),i||U||!q&&B){const[G,Z]=jS({nodeId:q,dragItems:l,nodeLookup:D,dragging:!1});i?.(z.sourceEvent,l,G,Z),U?.(z.sourceEvent,G,Z),q||B?.(z.sourceEvent,Z)}}}).filter(z=>{const D=z.target;return!z.button&&(!N||!Fq(D,`.${N}`,C))&&(!j||Fq(D,j,C))});b.call(O)}function E(){b?.on(".drag",null)}return{update:_,destroy:E}}function pne(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Kh(i,tf(s))>0&&r.push(s);return r}const hne=250;function mne(t,e,n,r){let i=[],s=1/0;const o=pne(t,n,e+hne);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:p,y:h}=Qh(l,f,f.position,!0),b=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));b>e||(b<s?(i=[{...f,x:p,y:h}],s=b):b===s&&i.push({...f,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function wL(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(f=>f.id===n):l?.[0])??null;return u&&s?{...u,...Qh(o,u,u.position,!0)}:u}function _L(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function gne(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const SL=()=>!0;function yne(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:f,autoPanOnConnect:p,flowId:h,panBy:b,cancelConnection:x,onConnectStart:_,onConnect:E,onConnectEnd:N,isValidConnection:j=SL,onReconnectEnd:C,updateConnection:R,getTransform:q,getFromHandle:L,autoPanSpeed:M}){const W=pL(t.target);let P=0,O;const{x:z,y:D}=$a(t),V=W?.elementFromPoint(z,D),U=_L(s,V),B=l?.getBoundingClientRect();if(!B||!U)return;const G=wL(i,U,r,u,e);if(!G)return;let Z=$a(t,B),le=!1,ie=null,ne=!1,oe=null;function te(){if(!p||!B)return;const[De,Je]=lL(Z,B,M);b({x:De,y:Je}),P=requestAnimationFrame(te)}const ue={...G,nodeId:i,type:U,position:G.position},de=u.get(i),we={inProgress:!0,isValid:null,from:Qh(de,ue,Ot.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:de,to:Z,toHandle:null,toPosition:Eq[ue.position],toNode:null};R(we);let Ie=we;_?.(t,{nodeId:i,handleId:r,handleType:U});function ze(De){if(!L()||!ue){Re(De);return}const Je=q();Z=$a(De,B),O=mne(km(Z,Je,!1,[1,1]),n,u,ue),le||(te(),le=!0);const Xe=EL(De,{handle:O,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:j,doc:W,lib:f,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,ie=Xe.connection,ne=gne(!!O,Xe.isValid);const Ve={...Ie,isValid:ne,to:O&&ne?uL({x:O.x,y:O.y},Je):Z,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:Eq[ue.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};ne&&O&&Ie.toHandle&&Ve.toHandle&&Ie.toHandle.type===Ve.toHandle.type&&Ie.toHandle.nodeId===Ve.toHandle.nodeId&&Ie.toHandle.id===Ve.toHandle.id&&Ie.to.x===Ve.to.x&&Ie.to.y===Ve.to.y||(R(Ve),Ie=Ve)}function Re(De){(O||oe)&&ie&&ne&&E?.(ie);const{inProgress:Je,...Xe}=Ie,Ve={...Xe,toPosition:Ie.toHandle?Ie.toPosition:null};N?.(De,Ve),s&&C?.(De,Ve),x(),cancelAnimationFrame(P),le=!1,ne=!1,ie=null,oe=null,W.removeEventListener("mousemove",ze),W.removeEventListener("mouseup",Re),W.removeEventListener("touchmove",ze),W.removeEventListener("touchend",Re)}W.addEventListener("mousemove",ze),W.addEventListener("mouseup",Re),W.addEventListener("touchmove",ze),W.addEventListener("touchend",Re)}function EL(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:f=SL,nodeLookup:p}){const h=s==="target",b=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=$a(t),E=o.elementFromPoint(x,_),N=E?.classList.contains(`${l}-flow__handle`)?E:b,j={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const C=_L(void 0,N),R=N.getAttribute("data-nodeid"),q=N.getAttribute("data-handleid"),L=N.classList.contains("connectable"),M=N.classList.contains("connectableend");if(!R||!C)return j;const W={source:h?R:r,sourceHandle:h?q:i,target:h?r:R,targetHandle:h?i:q};j.connection=W;const O=L&&M&&(n===Xd.Strict?h&&C==="source"||!h&&C==="target":R!==r||q!==i);j.isValid=O&&f(W),j.toHandle=wL(R,C,q,p,n,!1)}return j}const rI={onPointerDown:yne,isValid:EL};function bne({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Os(t);function s({translateExtent:l,width:u,height:f,zoomStep:p=10,pannable:h=!0,zoomable:b=!0,inversePan:x=!1}){const _=R=>{const q=n();if(R.sourceEvent.type!=="wheel"||!e)return;const L=-R.sourceEvent.deltaY*(R.sourceEvent.deltaMode===1?.05:R.sourceEvent.deltaMode?1:.002)*p,M=q[2]*Math.pow(2,L);e.scaleTo(M)};let E=[0,0];const N=R=>{(R.sourceEvent.type==="mousedown"||R.sourceEvent.type==="touchstart")&&(E=[R.sourceEvent.clientX??R.sourceEvent.touches[0].clientX,R.sourceEvent.clientY??R.sourceEvent.touches[0].clientY])},j=R=>{const q=n();if(R.sourceEvent.type!=="mousemove"&&R.sourceEvent.type!=="touchmove"||!e)return;const L=[R.sourceEvent.clientX??R.sourceEvent.touches[0].clientX,R.sourceEvent.clientY??R.sourceEvent.touches[0].clientY],M=[L[0]-E[0],L[1]-E[1]];E=L;const W=r()*Math.max(q[2],Math.log(q[2]))*(x?-1:1),P={x:q[0]-M[0]*W,y:q[1]-M[1]*W},O=[[0,0],[u,f]];e.setViewportConstrained({x:P.x,y:P.y,zoom:q[2]},O,l)},C=eL().on("start",N).on("zoom",h?j:null).on("zoom.wheel",b?_:null);i.call(C,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Eo}}const vne=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ox=t=>({x:t.x,y:t.y,zoom:t.k}),TS=({x:t,y:e,zoom:n})=>tx.translate(t,e).scale(n),vd=(t,e)=>t.target.closest(`.${e}`),IL=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),RS=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},NL=t=>{const e=t.ctrlKey&&av()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function xne({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:f}){return p=>{if(vd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const N=Eo(p),j=NL(p),C=h*Math.pow(2,j);r.scaleTo(n,C,N,p);return}const b=p.deltaMode===1?20:1;let x=i===Xc.Vertical?0:p.deltaX*b,_=i===Xc.Horizontal?0:p.deltaY*b;!av()&&p.shiftKey&&i!==Xc.Vertical&&(x=p.deltaY*b,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const E=ox(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(p,E)),t.isPanScrolling&&(u?.(p,E),t.panScrollTimeout=setTimeout(()=>{f?.(p,E),t.isPanScrolling=!1},150))}}function wne({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||vd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function _ne({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=ox(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Sne({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&IL(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,ox(s.transform))}}function Ene({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&IL(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&vne(t.prevViewport,o.transform))){const l=ox(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Ine({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:f}){return p=>{const h=t||e,b=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(vd(p,`${f}-flow__node`)||vd(p,`${f}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||vd(p,l)&&p.type==="wheel"||vd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!b&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Nne({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:f}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),b=eL().clickDistance(!Oo(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=Os(t).call(b);R({x:s.x,y:s.y,zoom:ef(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),E=x.on("dblclick.zoom");b.wheelDelta(NL);function N(V,U){return x?new Promise(B=>{b?.transform(RS(x,U?.duration,()=>B(!0)),V)}):Promise.resolve(!1)}function j({noWheelClassName:V,noPanClassName:U,onPaneContextMenu:B,userSelectionActive:G,panOnScroll:Z,panOnDrag:le,panOnScrollMode:ie,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:te,zoomOnScroll:ue,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ie}){G&&!p.isZoomingOrPanning&&C();const Re=Z&&!ye&&!G?xne({zoomPanValues:p,noWheelClassName:V,d3Selection:x,d3Zoom:b,panOnScrollMode:ie,panOnScrollSpeed:ne,zoomOnPinch:te,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):wne({noWheelClassName:V,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",Re,{passive:!1}),!G){const Je=_ne({zoomPanValues:p,onDraggingChange:f,onPanZoomStart:l});b.on("start",Je);const Xe=Sne({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:Ie});b.on("zoom",Xe);const Ve=Ene({zoomPanValues:p,panOnDrag:le,panOnScroll:Z,onPaneContextMenu:B,onPanZoomEnd:u,onDraggingChange:f});b.on("end",Ve)}const De=Ine({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ue,panOnScroll:Z,zoomOnDoubleClick:de,zoomOnPinch:te,userSelectionActive:G,noPanClassName:U,noWheelClassName:V,lib:we});b.filter(De),de?x.on("dblclick.zoom",E):x.on("dblclick.zoom",null)}function C(){b.on("zoom",null)}async function R(V,U,B){const G=TS(V),Z=b?.constrain()(G,U,B);return Z&&await N(Z),new Promise(le=>le(Z))}async function q(V,U){const B=TS(V);return await N(B,U),new Promise(G=>G(B))}function L(V){if(x){const U=TS(V),B=x.property("__zoom");(B.k!==V.zoom||B.x!==V.x||B.y!==V.y)&&b?.transform(x,U,null,{sync:!0})}}function M(){const V=x?X2(x.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function W(V,U){return x?new Promise(B=>{b?.scaleTo(RS(x,U?.duration,()=>B(!0)),V)}):Promise.resolve(!1)}function P(V,U){return x?new Promise(B=>{b?.scaleBy(RS(x,U?.duration,()=>B(!0)),V)}):Promise.resolve(!1)}function O(V){b?.scaleExtent(V)}function z(V){b?.translateExtent(V)}function D(V){const U=!Oo(V)||V<0?0:V;b?.clickDistance(U)}return{update:j,destroy:C,setViewport:q,setViewportConstrained:R,getViewport:M,scaleTo:W,scaleBy:P,setScaleExtent:O,setTranslateExtent:z,syncViewport:L,setClickDistance:D}}var ch;(function(t){t.Line="line",t.Handle="handle"})(ch||(ch={}));function kne({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Cne(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function El(t,e){return Math.max(0,e-t)}function Il(t,e){return Math.max(0,t-e)}function cy(t,e,n){return Math.max(0,e-t,t-n)}function Dq(t,e){return t?!e:e}function jne(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:f}=e;const{isHorizontal:p,isVertical:h}=e,b=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:E,maxWidth:N,minHeight:j,maxHeight:C}=r,{x:R,y:q,width:L,height:M,aspectRatio:W}=t;let P=Math.floor(p?x-t.pointerX:0),O=Math.floor(h?_-t.pointerY:0);const z=L+(u?-P:P),D=M+(f?-O:O),V=-s[0]*L,U=-s[1]*M;let B=cy(z,E,N),G=cy(D,j,C);if(o){let ie=0,ne=0;u&&P<0?ie=El(R+P+V,o[0][0]):!u&&P>0&&(ie=Il(R+z+V,o[1][0])),f&&O<0?ne=El(q+O+U,o[0][1]):!f&&O>0&&(ne=Il(q+D+U,o[1][1])),B=Math.max(B,ie),G=Math.max(G,ne)}if(l){let ie=0,ne=0;u&&P>0?ie=Il(R+P,l[0][0]):!u&&P<0&&(ie=El(R+z,l[1][0])),f&&O>0?ne=Il(q+O,l[0][1]):!f&&O<0&&(ne=El(q+D,l[1][1])),B=Math.max(B,ie),G=Math.max(G,ne)}if(i){if(p){const ie=cy(z/W,j,C)*W;if(B=Math.max(B,ie),o){let ne=0;!u&&!f||u&&!f&&b?ne=Il(q+U+z/W,o[1][1])*W:ne=El(q+U+(u?P:-P)/W,o[0][1])*W,B=Math.max(B,ne)}if(l){let ne=0;!u&&!f||u&&!f&&b?ne=El(q+z/W,l[1][1])*W:ne=Il(q+(u?P:-P)/W,l[0][1])*W,B=Math.max(B,ne)}}if(h){const ie=cy(D*W,E,N)/W;if(G=Math.max(G,ie),o){let ne=0;!u&&!f||f&&!u&&b?ne=Il(R+D*W+V,o[1][0])/W:ne=El(R+(f?O:-O)*W+V,o[0][0])/W,G=Math.max(G,ne)}if(l){let ne=0;!u&&!f||f&&!u&&b?ne=El(R+D*W,l[1][0])/W:ne=Il(R+(f?O:-O)*W,l[0][0])/W,G=Math.max(G,ne)}}}O=O+(O<0?G:-G),P=P+(P<0?B:-B),i&&(b?z>D*W?O=(Dq(u,f)?-P:P)/W:P=(Dq(u,f)?-O:O)*W:p?(O=P/W,f=u):(P=O*W,u=f));const Z=u?R+P:R,le=f?q+O:q;return{width:L+(u?-P:P),height:M+(f?-O:O),x:s[0]*P*(u?-1:1)+Z,y:s[1]*O*(f?-1:1)+le}}const kL={width:0,height:0,x:0,y:0},Tne={...kL,pointerX:0,pointerY:0,aspectRatio:1};function Rne(t){return[[0,0],[t.measured.width,t.measured.height]]}function One(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function qne({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Os(t);function o({controlPosition:u,boundaries:f,keepAspectRatio:p,onResizeStart:h,onResize:b,onResizeEnd:x,shouldResize:_}){let E={...kL},N={...Tne};const j=Cne(u);let C,R=null,q=[],L,M,W;const P=M2().on("start",O=>{const{nodeLookup:z,transform:D,snapGrid:V,snapToGrid:U,nodeOrigin:B,paneDomNode:G}=n();if(C=z.get(e),!C)return;R=G?.getBoundingClientRect()??null;const{xSnapped:Z,ySnapped:le}=lh(O.sourceEvent,{transform:D,snapGrid:V,snapToGrid:U,containerBounds:R});E={width:C.measured.width??0,height:C.measured.height??0,x:C.position.x??0,y:C.position.y??0},N={...E,pointerX:Z,pointerY:le,aspectRatio:E.width/E.height},L=void 0,C.parentId&&(C.extent==="parent"||C.expandParent)&&(L=z.get(C.parentId),M=L&&C.extent==="parent"?Rne(L):void 0),q=[],W=void 0;for(const[ie,ne]of z)if(ne.parentId===e&&(q.push({id:ie,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=One(ne,C,ne.origin??B);W?W=[[Math.min(oe[0][0],W[0][0]),Math.min(oe[0][1],W[0][1])],[Math.max(oe[1][0],W[1][0]),Math.max(oe[1][1],W[1][1])]]:W=oe}h?.(O,{...E})}).on("drag",O=>{const{transform:z,snapGrid:D,snapToGrid:V,nodeOrigin:U}=n(),B=lh(O.sourceEvent,{transform:z,snapGrid:D,snapToGrid:V,containerBounds:R}),G=[];if(!C)return;const{x:Z,y:le,width:ie,height:ne}=E,oe={},te=C.origin??U,{width:ue,height:de,x:ye,y:we}=jne(N,j,B,f,p,te,M,W),Ie=ue!==ie,ze=de!==ne,Re=ye!==Z&&Ie,De=we!==le&&ze;if(!Re&&!De&&!Ie&&!ze)return;if((Re||De||te[0]===1||te[1]===1)&&(oe.x=Re?ye:E.x,oe.y=De?we:E.y,E.x=oe.x,E.y=oe.y,q.length>0)){const ct=ye-Z,_t=we-le;for(const Rt of q)Rt.position={x:Rt.position.x-ct+te[0]*(ue-ie),y:Rt.position.y-_t+te[1]*(de-ne)},G.push(Rt)}if((Ie||ze)&&(oe.width=Ie?ue:E.width,oe.height=ze?de:E.height,E.width=oe.width,E.height=oe.height),L&&C.expandParent){const ct=te[0]*(oe.width??0);oe.x&&oe.x<ct&&(E.x=ct,N.x=N.x-(oe.x-ct));const _t=te[1]*(oe.height??0);oe.y&&oe.y<_t&&(E.y=_t,N.y=N.y-(oe.y-_t))}const Je=kne({width:E.width,prevWidth:ie,height:E.height,prevHeight:ne,affectsX:j.affectsX,affectsY:j.affectsY}),Xe={...E,direction:Je};_?.(O,Xe)!==!1&&(b?.(O,Xe),r(oe,G))}).on("end",O=>{x?.(O,{...E}),i?.()});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Lq=t=>{let e;const n=new Set,r=(p,h)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const x=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},f=e=t(r,i,u);return u},Ane=t=>t?Lq(t):Lq,{useDebugValue:Pne}=Bn,{useSyncExternalStoreWithSelector:Fne}=GB,Dne=t=>t;function CL(t,e=Dne,n){const r=Fne(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Pne(r),r}const Mq=(t,e)=>{const n=Ane(t),r=(i,s=e)=>CL(n,i,s);return Object.assign(r,n),r},Lne=(t,e)=>t?Mq(t,e):Mq;function xr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const ax=H.createContext(null),Mne=ax.Provider,jL=Ga.error001();function jn(t,e){const n=H.useContext(ax);if(n===null)throw new Error(jL);return CL(n,t,e)}function wr(){const t=H.useContext(ax);if(t===null)throw new Error(jL);return H.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const $q={display:"none"},$ne={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},TL="react-flow__node-desc",RL="react-flow__edge-desc",Bne="react-flow__aria-live",zne=t=>t.ariaLiveMessage;function Wne({rfId:t}){const e=jn(zne);return d.jsx("div",{id:`${Bne}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:$ne,children:e})}function Vne({rfId:t,disableKeyboardA11y:e}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:`${TL}-${t}`,style:$q,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),d.jsx("div",{id:`${RL}-${t}`,style:$q,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&d.jsx(Wne,{rfId:t})]})}const Une=t=>t.userSelectionActive?"none":"all",$N=H.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=jn(Une),l=`${t}`.split("-");return d.jsx("div",{className:Hr(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function Hne({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:d.jsx($N,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kne=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},uy=t=>t.id;function Qne(t,e){return xr(t.selectedNodes.map(uy),e.selectedNodes.map(uy))&&xr(t.selectedEdges.map(uy),e.selectedEdges.map(uy))}function Gne({onSelectionChange:t}){const e=wr(),{selectedNodes:n,selectedEdges:r}=jn(Kne,Qne);return H.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Jne=t=>!!t.onSelectionChangeHandlers;function Zne({onSelectionChange:t}){const e=jn(Jne);return t||e?d.jsx(Gne,{onSelectionChange:t}):null}const OL=[0,0],Yne={x:0,y:0,zoom:1},Xne=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Bq=[...Xne,"rfId"],ere=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),zq={translateExtent:Vh,nodeOrigin:OL,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function tre(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:f}=jn(ere,xr),p=wr();H.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=zq,l()}),[]);const h=H.useRef(zq);return H.useEffect(()=>{for(const b of Bq){const x=t[b],_=h.current[b];x!==_&&(typeof t[b]>"u"||(b==="nodes"?e(x):b==="edges"?n(x):b==="minZoom"?r(x):b==="maxZoom"?i(x):b==="translateExtent"?s(x):b==="nodeExtent"?o(x):b==="paneClickDistance"?f(x):b==="fitView"?p.setState({fitViewOnInit:x}):b==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[b]:x})))}h.current=t},Bq.map(b=>t[b])),null}function Wq(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function nre(t){const[e,n]=H.useState(t==="system"?null:t);return H.useEffect(()=>{if(t!=="system"){n(t);return}const r=Wq(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:Wq()?.matches?"dark":"light"}const Vq=typeof document<"u"?document:null;function Gh(t=null,e={target:Vq,actInsideInputWithModifier:!0}){const[n,r]=H.useState(!1),i=H.useRef(!1),s=H.useRef(new Set([])),[o,l]=H.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=f.reduce((h,b)=>h.concat(...b),[]);return[f,p]}return[[],[]]},[t]);return H.useEffect(()=>{const u=e?.target||Vq;if(t!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&XE(b))return!1;const _=Hq(b.code,l);s.current.add(b[_]),Uq(o,s.current,!1)&&(b.preventDefault(),r(!0))},p=b=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&XE(b))return!1;const _=Hq(b.code,l);Uq(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[_]),b.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function Uq(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Hq(t,e){return e.includes(t)?"code":"key"}const rre=()=>{const t=wr();return H.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const l=JE(n,e),{width:u,height:f}=sx(o);return ZE({nodes:l,width:u,height:f,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:l}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,f=i/2-e*u,p=s/2-n*u;return l?(await l.setViewport({x:f,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=AN(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:l}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-l};return km(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=uL(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function qL(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)ire(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function ire(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function BN(t,e){return qL(t,e)}function AL(t,e){return qL(t,e)}function Fc(t,e){return{id:t,type:"select",selected:e}}function xd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Fc(s.id,o)))}return r}function Kq({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Qq(t){return{id:t.id,type:"remove"}}const Gq=t=>zte(t),sre=t=>iL(t);function PL(t){return H.forwardRef(t)}const ore=typeof window<"u"?H.useLayoutEffect:H.useEffect;function Jq(t){const[e,n]=H.useState(BigInt(0)),[r]=H.useState(()=>are(()=>n(i=>i+BigInt(1))));return ore(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function are(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const FL=H.createContext(null);function lre({children:t}){const e=wr(),n=H.useCallback(l=>{const{nodes:u=[],setNodes:f,hasDefaultNodes:p,onNodesChange:h,nodeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(Kq({items:x,lookup:b}))},[]),r=Jq(n),i=H.useCallback(l=>{const{edges:u=[],setEdges:f,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(Kq({items:x,lookup:b}))},[]),s=Jq(i),o=H.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return d.jsx(FL.Provider,{value:o,children:t})}function cre(){const t=H.useContext(FL);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const ure=t=>!!t.panZoom;function _f(){const t=rre(),e=wr(),n=cre(),r=jn(ure),i=H.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},l=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState(),_=Gq(h)?h:b.get(h.id),E=_.parentId?fL(_.position,_.measured,_.parentId,b,x):_.position,N={..._,position:E,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return tf(N)},f=(h,b,x={replace:!1})=>{o(_=>_.map(E=>{if(E.id===h){const N=typeof b=="function"?b(E):b;return x.replace&&Gq(N)?N:{...E,...N}}return E}))},p=(h,b,x={replace:!1})=>{l(_=>_.map(E=>{if(E.id===h){const N=typeof b=="function"?b(E):b;return x.replace&&sre(N)?N:{...E,...N}}return E}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(b=>({...b}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:l,addNodes:h=>{const b=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...b])},addEdges:h=>{const b=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...b])},toObject:()=>{const{nodes:h=[],edges:b=[],transform:x}=e.getState(),[_,E,N]=x;return{nodes:h.map(j=>({...j})),edges:b.map(j=>({...j})),viewport:{x:_,y:E,zoom:N}}},deleteElements:async({nodes:h=[],edges:b=[]})=>{const{nodes:x,edges:_,onNodesDelete:E,onEdgesDelete:N,triggerNodeChanges:j,triggerEdgeChanges:C,onDelete:R,onBeforeDelete:q}=e.getState(),{nodes:L,edges:M}=await Ute({nodesToRemove:h,edgesToRemove:b,nodes:x,edges:_,onBeforeDelete:q}),W=M.length>0,P=L.length>0;if(W){const O=M.map(Qq);N?.(M),C(O)}if(P){const O=L.map(Qq);E?.(L),j(O)}return(P||W)&&R?.({nodes:L,edges:M}),{deletedNodes:L,deletedEdges:M}},getIntersectingNodes:(h,b=!0,x)=>{const _=Nq(h),E=_?h:u(h),N=x!==void 0;return E?(x||e.getState().nodes).filter(j=>{const C=e.getState().nodeLookup.get(j.id);if(C&&!_&&(j.id===h.id||!C.internals.positionAbsolute))return!1;const R=tf(N?j:C),q=Kh(R,E);return b&&q>0||q>=E.width*E.height}):[]},isNodeIntersecting:(h,b,x=!0)=>{const E=Nq(h)?h:u(h);if(!E)return!1;const N=Kh(E,b);return x&&N>0||N>=E.width*E.height},updateNode:f,updateNodeData:(h,b,x={replace:!1})=>{f(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},updateEdge:p,updateEdgeData:(h,b,x={replace:!1})=>{p(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},getNodesBounds:h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState();return Wte(h,{nodeLookup:b,nodeOrigin:x})},getHandleConnections:({type:h,id:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?b?`-${h}-${b}`:`-${h}`:""}`)?.values()??[])}},[]);return H.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const Zq=t=>t.selected,dre={actInsideInputWithModifier:!1},fre=typeof window<"u"?window:void 0;function pre({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=wr(),{deleteElements:r}=_f(),i=Gh(t,dre),s=Gh(e,{target:fre});H.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(Zq),edges:o.filter(Zq)}),n.setState({nodesSelectionActive:!1})}},[i]),H.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function hre(t){const e=wr();H.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=sx(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Ga.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const lx={position:"absolute",width:"100%",height:"100%",top:0,left:0},mre=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function gre({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Xc.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:f,minZoom:p,maxZoom:h,zoomActivationKeyCode:b,preventScrolling:x=!0,children:_,noWheelClassName:E,noPanClassName:N,onViewportChange:j,isControlledViewport:C,paneClickDistance:R}){const q=wr(),L=H.useRef(null),{userSelectionActive:M,lib:W}=jn(mre,xr),P=Gh(b),O=H.useRef();hre(L);const z=H.useCallback(D=>{j?.({x:D[0],y:D[1],zoom:D[2]}),C||q.setState({transform:D})},[j,C]);return H.useEffect(()=>{if(L.current){O.current=Nne({domNode:L.current,minZoom:p,maxZoom:h,translateExtent:f,viewport:u,paneClickDistance:R,onDraggingChange:B=>q.setState({paneDragging:B}),onPanZoomStart:(B,G)=>{const{onViewportChangeStart:Z,onMoveStart:le}=q.getState();le?.(B,G),Z?.(G)},onPanZoom:(B,G)=>{const{onViewportChange:Z,onMove:le}=q.getState();le?.(B,G),Z?.(G)},onPanZoomEnd:(B,G)=>{const{onViewportChangeEnd:Z,onMoveEnd:le}=q.getState();le?.(B,G),Z?.(G)}});const{x:D,y:V,zoom:U}=O.current.getViewport();return q.setState({panZoom:O.current,transform:[D,V,U],domNode:L.current.closest(".react-flow")}),()=>{O.current?.destroy()}}},[]),H.useEffect(()=>{O.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:N,userSelectionActive:M,noWheelClassName:E,lib:W,onTransformChange:z})},[t,e,n,r,i,s,o,l,P,x,N,M,E,W,z]),d.jsx("div",{className:"react-flow__renderer",ref:L,style:lx,children:_})}const yre=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function bre(){const{userSelectionActive:t,userSelectionRect:e}=jn(yre,xr);return t&&e?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const OS=(t,e)=>n=>{n.target===e.current&&t?.(n)},vre=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function xre({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Uh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:b,children:x}){const _=wr(),{userSelectionActive:E,elementsSelectable:N,dragging:j}=jn(vre,xr),C=N&&(t||E),R=H.useRef(null),q=H.useRef(),L=H.useRef(new Set),M=H.useRef(new Set),W=H.useRef(!1),P=H.useRef(!1),O=Z=>{if(W.current){W.current=!1;return}l?.(Z),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},z=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}u?.(Z)},D=f?Z=>f(Z):void 0,V=Z=>{const{resetSelectedElements:le,domNode:ie}=_.getState();if(q.current=ie?.getBoundingClientRect(),!N||!t||Z.button!==0||Z.target!==R.current||!q.current)return;Z.target?.setPointerCapture?.(Z.pointerId),P.current=!0,W.current=!1;const{x:ne,y:oe}=$a(Z.nativeEvent,q.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(Z)},U=Z=>{const{userSelectionRect:le,transform:ie,nodeLookup:ne,edgeLookup:oe,connectionLookup:te,triggerNodeChanges:ue,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!q.current||!le)return;W.current=!0;const{x:we,y:Ie}=$a(Z.nativeEvent,q.current),{startX:ze,startY:Re}=le,De={startX:ze,startY:Re,x:we<ze?we:ze,y:Ie<Re?Ie:Re,width:Math.abs(we-ze),height:Math.abs(Ie-Re)},Je=L.current,Xe=M.current;L.current=new Set(sL(ne,De,ie,n===Uh.Partial,!0).map(ct=>ct.id)),M.current=new Set;const Ve=ye?.selectable??!0;for(const ct of L.current){const _t=te.get(ct);if(_t)for(const{edgeId:Rt}of _t.values()){const Ut=oe.get(Rt);Ut&&(Ut.selectable??Ve)&&M.current.add(Rt)}}if(!kq(Je,L.current)){const ct=xd(ne,L.current,!0);ue(ct)}if(!kq(Xe,M.current)){const ct=xd(oe,M.current);de(ct)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},B=Z=>{if(Z.button!==0||!P.current)return;Z.target?.releasePointerCapture?.(Z.pointerId);const{userSelectionRect:le}=_.getState();!E&&le&&Z.target===R.current&&O?.(Z),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:L.current.size>0}),o?.(Z),(e||i)&&(W.current=!1),P.current=!1},G=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:Hr(["react-flow__pane",{draggable:G,dragging:j,selection:t}]),onClick:C?void 0:OS(O,R),onContextMenu:OS(z,R),onWheel:OS(D,R),onPointerEnter:C?void 0:p,onPointerDown:C?V:h,onPointerMove:C?U:h,onPointerUp:C?B:void 0,onPointerLeave:b,ref:R,style:lx,children:[x,d.jsx(bre,{})]})}function iI({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),f=l.get(t);if(!f){u?.("012",Ga.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function DL({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=wr(),[u,f]=H.useState(!1),p=H.useRef();return H.useEffect(()=>{p.current=fne({getStoreItems:()=>l.getState(),onNodeMouseDown:h=>{iI({id:h,store:l,nodeRef:t})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),H.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const wre=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function LL(){const t=wr();return H.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:f,nodeOrigin:p}=t.getState(),h=new Map,b=wre(o),x=i?s[0]:5,_=i?s[1]:5,E=n.direction.x*x*n.factor,N=n.direction.y*_*n.factor;for(const[,j]of f){if(!b(j))continue;let C={x:j.internals.positionAbsolute.x+E,y:j.internals.positionAbsolute.y+N};i&&(C=ix(C,s));const{position:R,positionAbsolute:q}=oL({nodeId:j.id,nextPosition:C,nodeLookup:f,nodeExtent:r,nodeOrigin:p,onError:l});j.position=R,j.internals.positionAbsolute=q,h.set(j.id,j)}u(h)},[])}const zN=H.createContext(null),_re=zN.Provider;zN.Consumer;const WN=()=>H.useContext(zN),Sre=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Ere=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:f}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Xd.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,valid:p&&f}};function Ire({type:t="source",position:e=Ot.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:f,onMouseDown:p,onTouchStart:h,...b},x){const _=o||null,E=t==="target",N=wr(),j=WN(),{connectOnClick:C,noPanClassName:R,rfId:q}=jn(Sre,xr),{connectingFrom:L,connectingTo:M,clickConnecting:W,isPossibleEndHandle:P,connectionInProcess:O,valid:z}=jn(Ere(j,_,t),xr);j||N.getState().onError?.("010",Ga.error010());const D=B=>{const{defaultEdgeOptions:G,onConnect:Z,hasDefaultEdges:le}=N.getState(),ie={...G,...B};if(le){const{edges:ne,setEdges:oe}=N.getState();oe(Yte(ie,ne))}Z?.(ie),l?.(ie)},V=B=>{if(!j)return;const G=hL(B.nativeEvent);if(i&&(G&&B.button===0||!G)){const Z=N.getState();rI.onPointerDown(B.nativeEvent,{autoPanOnConnect:Z.autoPanOnConnect,connectionMode:Z.connectionMode,connectionRadius:Z.connectionRadius,domNode:Z.domNode,nodeLookup:Z.nodeLookup,lib:Z.lib,isTarget:E,handleId:_,nodeId:j,flowId:Z.rfId,panBy:Z.panBy,cancelConnection:Z.cancelConnection,onConnectStart:Z.onConnectStart,onConnectEnd:Z.onConnectEnd,updateConnection:Z.updateConnection,onConnect:D,isValidConnection:n||Z.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:Z.autoPanSpeed})}G?p?.(B):h?.(B)},U=B=>{const{onClickConnectStart:G,onClickConnectEnd:Z,connectionClickStartHandle:le,connectionMode:ie,isValidConnection:ne,lib:oe,rfId:te,nodeLookup:ue,connection:de}=N.getState();if(!j||!le&&!i)return;if(!le){G?.(B.nativeEvent,{nodeId:j,handleId:_,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:j,type:t,id:_}});return}const ye=pL(B.target),we=n||ne,{connection:Ie,isValid:ze}=rI.isValid(B.nativeEvent,{handle:{nodeId:j,id:_,type:t},connectionMode:ie,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:te,doc:ye,lib:oe,nodeLookup:ue});ze&&Ie&&D(Ie);const Re=structuredClone(de);delete Re.inProgress,Re.toPosition=Re.toHandle?Re.toHandle.position:null,Z?.(B,Re),N.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":_,"data-nodeid":j,"data-handlepos":e,"data-id":`${q}-${j}-${_}-${t}`,className:Hr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",R,f,{source:!E,target:E,connectable:r,connectablestart:i,connectableend:s,clickconnecting:W,connectingfrom:L,connectingto:M,valid:z,connectionindicator:r&&(!O||P)&&(O?s:i)}]),onMouseDown:V,onTouchStart:V,onClick:C?U:void 0,ref:x,...b,children:u})}const co=H.memo(PL(Ire));function Nre({data:t,isConnectable:e,sourcePosition:n=Ot.Bottom}){return d.jsxs(d.Fragment,{children:[t?.label,d.jsx(co,{type:"source",position:n,isConnectable:e})]})}function kre({data:t,isConnectable:e,targetPosition:n=Ot.Top,sourcePosition:r=Ot.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(co,{type:"target",position:n,isConnectable:e}),t?.label,d.jsx(co,{type:"source",position:r,isConnectable:e})]})}function Cre(){return null}function jre({data:t,isConnectable:e,targetPosition:n=Ot.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(co,{type:"target",position:n,isConnectable:e}),t?.label]})}const lv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Yq={input:Nre,default:kre,output:jre,group:Cre};function Tre(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const Rre=t=>{const{width:e,height:n,x:r,y:i}=wf(t.nodeLookup,{filter:s=>!!s.selected});return{width:Oo(e)?e:null,height:Oo(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Ore({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=wr(),{width:i,height:s,transformString:o,userSelectionActive:l}=jn(Rre,xr),u=LL(),f=H.useRef(null);if(H.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),DL({nodeRef:f}),l||!i||!s)return null;const p=t?b=>{const x=r.getState().nodes.filter(_=>_.selected);t(b,x)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(lv,b.key)&&(b.preventDefault(),u({direction:lv[b.key],factor:b.shiftKey?4:1}))};return d.jsx("div",{className:Hr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:d.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const Xq=typeof window<"u"?window:void 0,qre=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function ML({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:E,zoomActivationKeyCode:N,elementsSelectable:j,zoomOnScroll:C,zoomOnPinch:R,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:P,defaultViewport:O,translateExtent:z,minZoom:D,maxZoom:V,preventScrolling:U,onSelectionContextMenu:B,noWheelClassName:G,noPanClassName:Z,disableKeyboardA11y:le,onViewportChange:ie,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:te}=jn(qre),ue=Gh(f,{target:Xq}),de=Gh(E,{target:Xq}),ye=de||P,we=de||q,Ie=p&&ye!==!0,ze=ue||te||Ie;return pre({deleteKeyCode:u,multiSelectionKeyCode:_}),d.jsx(gre,{onPaneContextMenu:s,elementsSelectable:j,zoomOnScroll:C,zoomOnPinch:R,panOnScroll:we,panOnScrollSpeed:L,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:!ue&&ye,defaultViewport:O,translateExtent:z,minZoom:D,maxZoom:V,zoomActivationKeyCode:N,preventScrolling:U,noWheelClassName:G,noPanClassName:Z,onViewportChange:ie,isControlledViewport:ne,paneClickDistance:l,children:d.jsxs(xre,{onSelectionStart:b,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ue,selectionOnDrag:Ie,children:[t,oe&&d.jsx(Ore,{onSelectionContextMenu:B,noPanClassName:Z,disableKeyboardA11y:le})]})})}ML.displayName="FlowRenderer";const Are=H.memo(ML),Pre=t=>e=>t?sL(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Fre(t){return jn(H.useCallback(Pre(t),[t]),xr)}const Dre=t=>t.updateNodeInternals;function Lre(){const t=jn(Dre),[e]=H.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return H.useEffect(()=>()=>{e?.disconnect()},[e]),e}function Mre({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=wr(),s=H.useRef(null),o=H.useRef(null),l=H.useRef(t.sourcePosition),u=H.useRef(t.targetPosition),f=H.useRef(e),p=n&&!!t.internals.handleBounds;return H.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),H.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),H.useEffect(()=>{if(s.current){const h=f.current!==e,b=l.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||b||x)&&(f.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function $re({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:f,nodesFocusable:p,resizeObserver:h,noDragClassName:b,noPanClassName:x,disableKeyboardA11y:_,rfId:E,nodeTypes:N,nodeExtent:j,nodeClickDistance:C,onError:R}){const{node:q,internals:L,isParent:M}=jn(Re=>{const De=Re.nodeLookup.get(t),Je=Re.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},xr);let W=q.type||"default",P=N?.[W]||Yq[W];P===void 0&&(R?.("003",Ga.error003(W)),W="default",P=Yq.default);const O=!!(q.draggable||l&&typeof q.draggable>"u"),z=!!(q.selectable||u&&typeof q.selectable>"u"),D=!!(q.connectable||f&&typeof q.connectable>"u"),V=!!(q.focusable||p&&typeof q.focusable>"u"),U=wr(),B=dL(q),G=Mre({node:q,nodeType:W,hasDimensions:B,resizeObserver:h}),Z=DL({nodeRef:G,disabled:q.hidden||!O,noDragClassName:b,handleSelector:q.dragHandle,nodeId:t,isSelectable:z,nodeClickDistance:C}),le=LL();if(q.hidden)return null;const ie=Ja(q),ne=Tre(q),oe=z||O||e||n||r||i,te=n?Re=>n(Re,{...L.userNode}):void 0,ue=r?Re=>r(Re,{...L.userNode}):void 0,de=i?Re=>i(Re,{...L.userNode}):void 0,ye=s?Re=>s(Re,{...L.userNode}):void 0,we=o?Re=>o(Re,{...L.userNode}):void 0,Ie=Re=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=U.getState();z&&(!De||!O||Je>0)&&iI({id:t,store:U,nodeRef:G}),e&&e(Re,{...L.userNode})},ze=Re=>{if(!(XE(Re.nativeEvent)||_))if(tL.includes(Re.key)&&z){const De=Re.key==="Escape";iI({id:t,store:U,unselect:De,nodeRef:G})}else O&&q.selected&&Object.prototype.hasOwnProperty.call(lv,Re.key)&&(Re.preventDefault(),U.setState({ariaLiveMessage:`Moved selected node ${Re.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~L.positionAbsolute.x}, y: ${~~L.positionAbsolute.y}`}),le({direction:lv[Re.key],factor:Re.shiftKey?4:1}))};return d.jsx("div",{className:Hr(["react-flow__node",`react-flow__node-${W}`,{[x]:O},q.className,{selected:q.selected,selectable:z,parent:M,draggable:O,dragging:Z}]),ref:G,style:{zIndex:L.z,transform:`translate(${L.positionAbsolute.x}px,${L.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:B?"visible":"hidden",...q.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:te,onMouseMove:ue,onMouseLeave:de,onContextMenu:ye,onClick:Ie,onDoubleClick:we,onKeyDown:V?ze:void 0,tabIndex:V?0:void 0,role:V?"button":void 0,"aria-describedby":_?void 0:`${TL}-${E}`,"aria-label":q.ariaLabel,children:d.jsx(_re,{value:t,children:d.jsx(P,{id:t,data:q.data,type:W,positionAbsoluteX:L.positionAbsolute.x,positionAbsoluteY:L.positionAbsolute.y,selected:q.selected??!1,selectable:z,draggable:O,deletable:q.deletable??!0,isConnectable:D,sourcePosition:q.sourcePosition,targetPosition:q.targetPosition,dragging:Z,dragHandle:q.dragHandle,zIndex:L.z,parentId:q.parentId,...ie})})})}const Bre=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function $L(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=jn(Bre,xr),o=Fre(t.onlyRenderVisibleElements),l=Lre();return d.jsx("div",{className:"react-flow__nodes",style:lx,children:o.map(u=>d.jsx($re,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}$L.displayName="NodeRenderer";const zre=H.memo($L);function Wre(t){return jn(H.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Gte({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),xr)}const Vre=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ure=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),e3={[Hh.Arrow]:Vre,[Hh.ArrowClosed]:Ure};function Hre(t){const e=wr();return H.useMemo(()=>Object.prototype.hasOwnProperty.call(e3,t)?e3[t]:(e.getState().onError?.("009",Ga.error009(t)),null),[t])}const Kre=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Hre(e);return u?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:d.jsx(u,{color:n,strokeWidth:o})}):null},BL=({defaultColor:t,rfId:e})=>{const n=jn(s=>s.edges),r=jn(s=>s.defaultEdgeOptions),i=H.useMemo(()=>rne(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?d.jsx("svg",{className:"react-flow__marker",children:d.jsx("defs",{children:i.map(s=>d.jsx(Kre,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};BL.displayName="MarkerDefinitions";var Qre=H.memo(BL);function zL({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:f,...p}){const[h,b]=H.useState({x:1,y:0,width:0,height:0}),x=Hr(["react-flow__edge-textwrapper",f]),_=H.useRef(null);return H.useEffect(()=>{if(_.current){const E=_.current.getBBox();b({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:d.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&d.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}zL.displayName="EdgeText";const Gre=H.memo(zL);function Cm({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:f=20,...p}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...p,d:t,fill:"none",className:Hr(["react-flow__edge-path",p.className])}),f&&d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&Oo(e)&&Oo(n)?d.jsx(Gre,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function t3({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Ot.Left||t===Ot.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function cx({sourceX:t,sourceY:e,sourcePosition:n=Ot.Bottom,targetX:r,targetY:i,targetPosition:s=Ot.Top}){const[o,l]=t3({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,f]=t3({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,b,x]=mL({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${t},${e} C${o},${l} ${u},${f} ${r},${i}`,p,h,b,x]}function WL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ot.Bottom,targetPosition:l=Ot.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:N,interactionWidth:j})=>{const[C,R,q]=cx({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),L=t.isInternal?void 0:e;return d.jsx(Cm,{id:L,path:C,labelX:R,labelY:q,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:N,interactionWidth:j})})}const Jre=WL({isInternal:!1}),VL=WL({isInternal:!0});Jre.displayName="SimpleBezierEdge";VL.displayName="SimpleBezierEdgeInternal";function UL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,sourcePosition:x=Ot.Bottom,targetPosition:_=Ot.Top,markerEnd:E,markerStart:N,pathOptions:j,interactionWidth:C})=>{const[R,q,L]=eI({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:j?.borderRadius,offset:j?.offset}),M=t.isInternal?void 0:e;return d.jsx(Cm,{id:M,path:R,labelX:q,labelY:L,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:E,markerStart:N,interactionWidth:C})})}const HL=UL({isInternal:!1}),KL=UL({isInternal:!0});HL.displayName="SmoothStepEdge";KL.displayName="SmoothStepEdgeInternal";function QL(t){return H.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return d.jsx(HL,{...n,id:r,pathOptions:H.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Zre=QL({isInternal:!1}),GL=QL({isInternal:!0});Zre.displayName="StepEdge";GL.displayName="StepEdgeInternal";function JL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})=>{const[N,j,C]=yL({sourceX:n,sourceY:r,targetX:i,targetY:s}),R=t.isInternal?void 0:e;return d.jsx(Cm,{id:R,path:N,labelX:j,labelY:C,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})})}const Yre=JL({isInternal:!1}),ZL=JL({isInternal:!0});Yre.displayName="StraightEdge";ZL.displayName="StraightEdgeInternal";function YL(t){return H.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ot.Bottom,targetPosition:l=Ot.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:N,pathOptions:j,interactionWidth:C})=>{const[R,q,L]=PN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:j?.curvature}),M=t.isInternal?void 0:e;return d.jsx(Cm,{id:M,path:R,labelX:q,labelY:L,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:N,interactionWidth:C})})}const Xre=YL({isInternal:!1}),XL=YL({isInternal:!0});Xre.displayName="BezierEdge";XL.displayName="BezierEdgeInternal";const n3={default:XL,straight:ZL,step:GL,smoothstep:KL,simplebezier:VL},r3={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},eie=(t,e,n)=>n===Ot.Left?t-e:n===Ot.Right?t+e:t,tie=(t,e,n)=>n===Ot.Top?t-e:n===Ot.Bottom?t+e:t,i3="react-flow__edgeupdater";function s3({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Hr([i3,`${i3}-${l}`]),cx:eie(e,r,t),cy:tie(n,r,t),r,stroke:"transparent",fill:"transparent"})}function nie({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,setReconnecting:b,setUpdateHover:x}){const _=wr(),E=(q,L)=>{if(q.button!==0)return;const{autoPanOnConnect:M,domNode:W,isValidConnection:P,connectionMode:O,connectionRadius:z,lib:D,onConnectStart:V,onConnectEnd:U,cancelConnection:B,nodeLookup:G,rfId:Z,panBy:le,updateConnection:ie}=_.getState(),ne=L.type==="target";b(!0),p?.(q,n,L.type);const oe=(ue,de)=>{b(!1),h?.(ue,n,L.type,de)},te=ue=>f?.(n,ue);rI.onPointerDown(q.nativeEvent,{autoPanOnConnect:M,connectionMode:O,connectionRadius:z,domNode:W,handleId:L.id,nodeId:L.nodeId,nodeLookup:G,isTarget:ne,edgeUpdaterType:L.type,lib:D,flowId:Z,cancelConnection:B,panBy:le,isValidConnection:P,onConnect:te,onConnectStart:V,onConnectEnd:U,onReconnectEnd:oe,updateConnection:ie,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},N=q=>E(q,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),j=q=>E(q,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>x(!0),R=()=>x(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(s3,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:N,onMouseEnter:C,onMouseOut:R,type:"source"}),(t===!0||t==="target")&&d.jsx(s3,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:j,onMouseEnter:C,onMouseOut:R,type:"target"})]})}function rie({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,rfId:_,edgeTypes:E,noPanClassName:N,onError:j,disableKeyboardA11y:C}){let R=jn(Ve=>Ve.edgeLookup.get(t));const q=jn(Ve=>Ve.defaultEdgeOptions);R=q?{...q,...R}:R;let L=R.type||"default",M=E?.[L]||n3[L];M===void 0&&(j?.("011",Ga.error011(L)),L="default",M=n3.default);const W=!!(R.focusable||e&&typeof R.focusable>"u"),P=typeof h<"u"&&(R.reconnectable||n&&typeof R.reconnectable>"u"),O=!!(R.selectable||r&&typeof R.selectable>"u"),z=H.useRef(null),[D,V]=H.useState(!1),[U,B]=H.useState(!1),G=wr(),{zIndex:Z,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue}=jn(H.useCallback(Ve=>{const ct=Ve.nodeLookup.get(R.source),_t=Ve.nodeLookup.get(R.target);if(!ct||!_t)return{zIndex:R.zIndex,...r3};const Rt=nne({id:t,sourceNode:ct,targetNode:_t,sourceHandle:R.sourceHandle||null,targetHandle:R.targetHandle||null,connectionMode:Ve.connectionMode,onError:j});return{zIndex:Qte({selected:R.selected,zIndex:R.zIndex,sourceNode:ct,targetNode:_t,elevateOnSelect:Ve.elevateEdgesOnSelect}),...Rt||r3}},[R.source,R.target,R.sourceHandle,R.targetHandle,R.selected,R.zIndex]),xr),de=H.useMemo(()=>R.markerStart?`url('#${tI(R.markerStart,_)}')`:void 0,[R.markerStart,_]),ye=H.useMemo(()=>R.markerEnd?`url('#${tI(R.markerEnd,_)}')`:void 0,[R.markerEnd,_]);if(R.hidden||le===null||ie===null||ne===null||oe===null)return null;const we=Ve=>{const{addSelectedEdges:ct,unselectNodesAndEdges:_t,multiSelectionActive:Rt}=G.getState();O&&(G.setState({nodesSelectionActive:!1}),R.selected&&Rt?(_t({nodes:[],edges:[R]}),z.current?.blur()):ct([t])),i&&i(Ve,R)},Ie=s?Ve=>{s(Ve,{...R})}:void 0,ze=o?Ve=>{o(Ve,{...R})}:void 0,Re=l?Ve=>{l(Ve,{...R})}:void 0,De=u?Ve=>{u(Ve,{...R})}:void 0,Je=f?Ve=>{f(Ve,{...R})}:void 0,Xe=Ve=>{if(!C&&tL.includes(Ve.key)&&O){const{unselectNodesAndEdges:ct,addSelectedEdges:_t}=G.getState();Ve.key==="Escape"?(z.current?.blur(),ct({edges:[R]})):_t([t])}};return d.jsx("svg",{style:{zIndex:Z},children:d.jsxs("g",{className:Hr(["react-flow__edge",`react-flow__edge-${L}`,R.className,N,{selected:R.selected,animated:R.animated,inactive:!O&&!i,updating:D,selectable:O}]),onClick:we,onDoubleClick:Ie,onContextMenu:ze,onMouseEnter:Re,onMouseMove:De,onMouseLeave:Je,onKeyDown:W?Xe:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":R.ariaLabel===null?void 0:R.ariaLabel||`Edge from ${R.source} to ${R.target}`,"aria-describedby":W?`${RL}-${_}`:void 0,ref:z,children:[!U&&d.jsx(M,{id:t,source:R.source,target:R.target,type:R.type,selected:R.selected,animated:R.animated,selectable:O,deletable:R.deletable??!0,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue,data:R.data,style:R.style,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth}),P&&d.jsx(nie,{edge:R,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,sourceX:le,sourceY:ie,targetX:ne,targetY:oe,sourcePosition:te,targetPosition:ue,setUpdateHover:V,setReconnecting:B})]})})}const iie=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function eM({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:E}){const{edgesFocusable:N,edgesReconnectable:j,elementsSelectable:C,onError:R}=jn(iie,xr),q=Wre(e);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(Qre,{defaultColor:t,rfId:n}),q.map(L=>d.jsx(rie,{id:L,edgesFocusable:N,edgesReconnectable:j,elementsSelectable:C,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,onClick:p,reconnectRadius:h,onDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:R,edgeTypes:r,disableKeyboardA11y:E},L))]})}eM.displayName="EdgeRenderer";const sie=H.memo(eM),oie=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function aie({children:t}){const e=jn(oie);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function lie(t){const e=_f(),n=H.useRef(!1);H.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const cie=t=>t.panZoom?.syncViewport;function uie(t){const e=jn(cie),n=wr();return H.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function die(t){return t.connection.inProgress?{...t.connection,to:km(t.connection.to,t.transform)}:{...t.connection}}function fie(t){return die}function tM(t){const e=fie();return jn(e,xr)}const pie=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function hie({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=jn(pie,xr);return!(s&&i&&u)?null:d.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:Hr(["react-flow__connection",rL(l)]),children:d.jsx(nM,{style:e,type:n,CustomComponent:r,isValid:l})})})}const nM=({style:t,type:e=Fl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:f,toNode:p,toHandle:h,toPosition:b}=tM();if(!i)return;if(n)return d.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:u,toPosition:b,connectionStatus:rL(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:f.x,targetY:f.y,targetPosition:b};switch(e){case Fl.Bezier:[x]=PN(_);break;case Fl.SimpleBezier:[x]=cx(_);break;case Fl.Step:[x]=eI({..._,borderRadius:0});break;case Fl.SmoothStep:[x]=eI(_);break;default:[x]=yL(_)}return d.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};nM.displayName="ConnectionLine";const mie={};function o3(t=mie){H.useRef(t),wr(),H.useEffect(()=>{},[t])}function gie(){wr(),H.useRef(!1),H.useEffect(()=>{},[])}function rM({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:b,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:E,connectionLineComponent:N,connectionLineContainerStyle:j,selectionKeyCode:C,selectionOnDrag:R,selectionMode:q,multiSelectionKeyCode:L,panActivationKeyCode:M,zoomActivationKeyCode:W,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:z,defaultViewport:D,translateExtent:V,minZoom:U,maxZoom:B,preventScrolling:G,defaultMarkerColor:Z,zoomOnScroll:le,zoomOnPinch:ie,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,zoomOnDoubleClick:ue,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneScroll:Re,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Rt,reconnectRadius:Ut,onReconnect:an,onReconnectStart:xe,onReconnectEnd:be,noDragClassName:Ne,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut,viewport:Qt,onViewportChange:Gt}){return o3(t),o3(e),gie(),lie(n),uie(Qt),d.jsx(Are,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ie,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:Re,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:C,selectionOnDrag:R,selectionMode:q,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:L,panActivationKeyCode:M,zoomActivationKeyCode:W,elementsSelectable:z,zoomOnScroll:le,zoomOnPinch:ie,zoomOnDoubleClick:ue,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:te,panOnDrag:de,defaultViewport:D,translateExtent:V,minZoom:U,maxZoom:B,onSelectionContextMenu:h,preventScrolling:G,noDragClassName:Ne,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,onViewportChange:Gt,isControlledViewport:!!Qt,children:d.jsxs(aie,{children:[d.jsx(sie,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:an,onReconnectStart:xe,onReconnectEnd:be,onlyRenderVisibleElements:O,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Rt,reconnectRadius:Ut,defaultMarkerColor:Z,noPanClassName:Ue,disableKeyboardA11y:rt,rfId:ut}),d.jsx(hie,{style:E,type:_,component:N,containerStyle:j}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(zre,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:O,noPanClassName:Ue,noDragClassName:Ne,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}rM.displayName="GraphView";const yie=H.memo(rM),a3=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=>{const f=new Map,p=new Map,h=new Map,b=new Map,x=r??e??[],_=n??t??[],E=l??[0,0],N=u??Vh;vL(h,b,x),nI(_,f,p,{nodeOrigin:E,nodeExtent:N,elevateNodesOnSelect:!1});let j=[0,0,1];if(o&&i&&s){const C=wf(f,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:R,y:q,zoom:L}=AN(C,i,s,.5,2,.1);j=[R,q,L]}return{rfId:"1",width:0,height:0,transform:j,nodes:_,nodeLookup:f,parentLookup:p,edges:x,edgeLookup:b,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Vh,nodeExtent:N,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Xd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...nL},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Hte,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},bie=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=>Lne((f,p)=>({...a3({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:E}=p();nI(h,b,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:E,checkEquality:!0}),f({nodes:h})},setEdges:h=>{const{connectionLookup:b,edgeLookup:x}=p();vL(b,x,h),f({edges:h})},setDefaultNodesAndEdges:(h,b)=>{if(h){const{setNodes:x}=p();x(h),f({hasDefaultNodes:!0})}if(b){const{setEdges:x}=p();x(b),f({hasDefaultEdges:!0})}},updateNodeInternals:(h,b={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:E,fitViewOnInit:N,fitViewDone:j,fitViewOnInitOptions:C,domNode:R,nodeOrigin:q,nodeExtent:L,debug:M,fitViewSync:W}=p(),{changes:P,updatedInternals:O}=cne(h,_,E,R,q,L);if(O){if(one(_,E,{nodeOrigin:q,nodeExtent:L}),b.triggerFitView){let z=j;!j&&N&&(z=W({...C,nodes:C?.nodes})),f({fitViewDone:z})}else f({});P?.length>0&&(M&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,b=!1)=>{const x=[],_=[];for(const[E,N]of h){const j=!!(N?.expandParent&&N?.parentId&&N?.position),C={id:E,type:"position",position:j?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:b};j&&x.push({id:E,parentId:N.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width,height:N.measured.height}}),_.push(C)}if(x.length>0){const{nodeLookup:E,parentLookup:N,nodeOrigin:j}=p(),C=MN(x,E,N,j);_.push(...C)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:b,setNodes:x,nodes:_,hasDefaultNodes:E,debug:N}=p();if(h?.length){if(E){const j=BN(h,_);x(j)}N&&console.log("React Flow: trigger node changes",h),b?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:b,setEdges:x,edges:_,hasDefaultEdges:E,debug:N}=p();if(h?.length){if(E){const j=AL(h,_);x(j)}N&&console.log("React Flow: trigger edge changes",h),b?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:N}=p();if(b){const j=h.map(C=>Fc(C,!0));E(j);return}E(xd(_,new Set([...h]),!0)),N(xd(x))},addSelectedEdges:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:N}=p();if(b){const j=h.map(C=>Fc(C,!0));N(j);return}N(xd(x,new Set([...h]))),E(xd(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:b}={})=>{const{edges:x,nodes:_,nodeLookup:E,triggerNodeChanges:N,triggerEdgeChanges:j}=p(),C=h||_,R=b||x,q=C.map(M=>{const W=E.get(M.id);return W&&(W.selected=!1),Fc(M.id,!1)}),L=R.map(M=>Fc(M.id,!1));N(q),j(L)},setMinZoom:h=>{const{panZoom:b,maxZoom:x}=p();b?.setScaleExtent([h,x]),f({minZoom:h})},setMaxZoom:h=>{const{panZoom:b,minZoom:x}=p();b?.setScaleExtent([x,h]),f({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),f({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),E=b.reduce((j,C)=>C.selected?[...j,Fc(C.id,!1)]:j,[]),N=h.reduce((j,C)=>C.selected?[...j,Fc(C.id,!1)]:j,[]);x(E),_(N)},setNodeExtent:h=>{const{nodes:b,nodeLookup:x,parentLookup:_,nodeOrigin:E,elevateNodesOnSelect:N,nodeExtent:j}=p();h[0][0]===j[0][0]&&h[0][1]===j[0][1]&&h[1][0]===j[1][0]&&h[1][1]===j[1][1]||(nI(b,x,_,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:N,checkEquality:!1}),f({nodeExtent:h}))},panBy:h=>{const{transform:b,width:x,height:_,panZoom:E,translateExtent:N}=p();return une({delta:h,panZoom:E,transform:b,translateExtent:N,width:x,height:_})},fitView:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:N,nodeLookup:j}=p();if(!b)return Promise.resolve(!1);const C=JE(j,h);return ZE({nodes:C,width:x,height:_,panZoom:b,minZoom:E,maxZoom:N},h)},fitViewSync:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:N,nodeLookup:j}=p();if(!b)return!1;const C=JE(j,h);return ZE({nodes:C,width:x,height:_,panZoom:b,minZoom:E,maxZoom:N},h),C.size>0},cancelConnection:()=>{f({connection:{...nL}})},updateConnection:h=>{f({connection:h})},reset:()=>f({...a3()})}),Object.is);function iM({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:f}){const[p]=H.useState(()=>bie({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return d.jsx(Mne,{value:p,children:d.jsx(lre,{children:f})})}function vie({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:f}){return H.useContext(ax)?d.jsx(d.Fragment,{children:t}):d.jsx(iM,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:f,children:t})}const xie={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function wie({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:f,onMove:p,onMoveStart:h,onMoveEnd:b,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:N,onClickConnectEnd:j,onNodeMouseEnter:C,onNodeMouseMove:R,onNodeMouseLeave:q,onNodeContextMenu:L,onNodeDoubleClick:M,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:O,onNodesDelete:z,onEdgesDelete:D,onDelete:V,onSelectionChange:U,onSelectionDragStart:B,onSelectionDrag:G,onSelectionDragStop:Z,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:te,connectionLineType:ue=Fl.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ie="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:Re=!1,selectionMode:De=Uh.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=av()?"Meta":"Control",zoomActivationKeyCode:Ve=av()?"Meta":"Control",snapToGrid:ct,snapGrid:_t,onlyRenderVisibleElements:Rt=!1,selectNodesOnDrag:Ut,nodesDraggable:an,nodesConnectable:xe,nodesFocusable:be,nodeOrigin:Ne=OL,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt=!0,defaultViewport:Me=Yne,minZoom:ut=.5,maxZoom:Qt=2,translateExtent:Gt=Vh,preventScrolling:bn=!0,nodeExtent:lr,defaultMarkerColor:Ln="#b1b1b7",zoomOnScroll:Kr=!0,zoomOnPinch:Di=!0,panOnScroll:_r=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Zi=Xc.Free,zoomOnDoubleClick:Yi=!0,panOnDrag:Xi=!0,onPaneClick:po,onPaneMouseEnter:pa,onPaneMouseMove:uc,onPaneMouseLeave:zs,onPaneScroll:K,onPaneContextMenu:bu,paneClickDistance:hn=0,nodeClickDistance:vu=0,children:xu,onReconnect:wu,onReconnectStart:dc,onReconnectEnd:ha,onEdgeContextMenu:es,onEdgeDoubleClick:fc,onEdgeMouseEnter:ma,onEdgeMouseMove:If,onEdgeMouseLeave:ga,reconnectRadius:Ws=10,onNodesChange:Ya,onEdgesChange:Vs,noDragClassName:Nf="nodrag",noWheelClassName:kf="nowheel",noPanClassName:_u="nopan",fitView:Us,fitViewOptions:Su,connectOnClick:Eu,attributionPosition:Cf,proOptions:Iu,defaultEdgeOptions:Nu,elevateNodesOnSelect:ku,elevateEdgesOnSelect:pc,disableKeyboardA11y:Cu=!1,autoPanOnConnect:jf,autoPanOnNodeDrag:cr,autoPanSpeed:Tf,connectionRadius:hc,isValidConnection:ju,onError:Xa,style:Rf,id:mc,nodeDragThreshold:el,viewport:ts,onViewportChange:Of,width:_i,height:qf,colorMode:Af="light",debug:Pf,...Wo},tl){const Li=mc||"1",nl=nre(Af);return d.jsx("div",{"data-testid":"rf__wrapper",...Wo,style:{...Rf,...xie},ref:tl,className:Hr(["react-flow",i,nl]),id:mc,children:d.jsxs(vie,{nodes:t,edges:e,width:_i,height:qf,fitView:Us,nodeOrigin:Ne,nodeExtent:lr,children:[d.jsx(yie,{onInit:f,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:C,onNodeMouseMove:R,onNodeMouseLeave:q,onNodeContextMenu:L,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:ue,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:Re,selectionMode:De,deleteKeyCode:Ie,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:Rt,defaultViewport:Me,translateExtent:Gt,minZoom:ut,maxZoom:Qt,preventScrolling:bn,zoomOnScroll:Kr,zoomOnPinch:Di,zoomOnDoubleClick:Yi,panOnScroll:_r,panOnScrollSpeed:Jt,panOnScrollMode:Zi,panOnDrag:Xi,onPaneClick:po,onPaneMouseEnter:pa,onPaneMouseMove:uc,onPaneMouseLeave:zs,onPaneScroll:K,onPaneContextMenu:bu,paneClickDistance:hn,nodeClickDistance:vu,onSelectionContextMenu:le,onSelectionStart:ie,onSelectionEnd:ne,onReconnect:wu,onReconnectStart:dc,onReconnectEnd:ha,onEdgeContextMenu:es,onEdgeDoubleClick:fc,onEdgeMouseEnter:ma,onEdgeMouseMove:If,onEdgeMouseLeave:ga,reconnectRadius:Ws,defaultMarkerColor:Ln,noDragClassName:Nf,noWheelClassName:kf,noPanClassName:_u,rfId:Li,disableKeyboardA11y:Cu,nodeExtent:lr,viewport:ts,onViewportChange:Of}),d.jsx(tre,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:N,onClickConnectEnd:j,nodesDraggable:an,nodesConnectable:xe,nodesFocusable:be,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt,elevateNodesOnSelect:ku,elevateEdgesOnSelect:pc,minZoom:ut,maxZoom:Qt,nodeExtent:lr,onNodesChange:Ya,onEdgesChange:Vs,snapToGrid:ct,snapGrid:_t,connectionMode:te,translateExtent:Gt,connectOnClick:Eu,defaultEdgeOptions:Nu,fitView:Us,fitViewOptions:Su,onNodesDelete:z,onEdgesDelete:D,onDelete:V,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:O,onSelectionDrag:G,onSelectionDragStart:B,onSelectionDragStop:Z,onMove:p,onMoveStart:h,onMoveEnd:b,noPanClassName:_u,nodeOrigin:Ne,rfId:Li,autoPanOnConnect:jf,autoPanOnNodeDrag:cr,autoPanSpeed:Tf,onError:Xa,connectionRadius:hc,isValidConnection:ju,selectNodesOnDrag:Ut,nodeDragThreshold:el,onBeforeDelete:oe,paneClickDistance:hn,debug:Pf}),d.jsx(Zne,{onSelectionChange:U}),xu,d.jsx(Hne,{proOptions:Iu,position:Cf}),d.jsx(Vne,{rfId:Li,disableKeyboardA11y:Cu})]})})}var sM=PL(wie);const _ie=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Sie({children:t}){const e=jn(_ie);return e?em.createPortal(t,e):null}function Eie(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>BN(i,s)),[]);return[e,n,r]}function Iie(t){const[e,n]=H.useState(t),r=H.useCallback(i=>n(s=>AL(i,s)),[]);return[e,n,r]}function l3(t){return jn(H.useCallback(n=>n.nodeLookup.get(t),[t]),xr)}function Nie({dimensions:t,lineWidth:e,variant:n,className:r}){return d.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Hr(["react-flow__background-pattern",n,r])})}function kie({radius:t,className:e}){return d.jsx("circle",{cx:t,cy:t,r:t,className:Hr(["react-flow__background-pattern","dots",e])})}var ia;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ia||(ia={}));const Cie={[ia.Dots]:1,[ia.Lines]:1,[ia.Cross]:6},jie=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function oM({id:t,variant:e=ia.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:f,patternClassName:p}){const h=H.useRef(null),{transform:b,patternId:x}=jn(jie,xr),_=r||Cie[e],E=e===ia.Dots,N=e===ia.Cross,j=Array.isArray(n)?n:[n,n],C=[j[0]*b[2]||1,j[1]*b[2]||1],R=_*b[2],q=Array.isArray(s)?s:[s,s],L=N?[R,R]:C,M=[q[0]*b[2]||1+L[0]/2,q[1]*b[2]||1+L[1]/2],W=`${x}${t||""}`;return d.jsxs("svg",{className:Hr(["react-flow__background",f]),style:{...u,...lx,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:W,x:b[0]%C[0],y:b[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:E?d.jsx(kie,{radius:R/2,className:p}):d.jsx(Nie,{dimensions:L,lineWidth:i,variant:e,className:p})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}oM.displayName="Background";const aM=H.memo(oM);function Tie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Rie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Oie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function qie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Aie(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function dy({children:t,className:e,...n}){return d.jsx("button",{type:"button",className:Hr(["react-flow__controls-button",e]),...n,children:t})}const Pie=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function lM({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:f,children:p,position:h="bottom-left",orientation:b="vertical","aria-label":x="React Flow controls"}){const _=wr(),{isInteractive:E,minZoomReached:N,maxZoomReached:j}=jn(Pie,xr),{zoomIn:C,zoomOut:R,fitView:q}=_f(),L=()=>{C(),s?.()},M=()=>{R(),o?.()},W=()=>{q(i),l?.()},P=()=>{_.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),u?.(!E)},O=b==="horizontal"?"horizontal":"vertical";return d.jsxs($N,{className:Hr(["react-flow__controls",O,f]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&d.jsxs(d.Fragment,{children:[d.jsx(dy,{onClick:L,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:j,children:d.jsx(Tie,{})}),d.jsx(dy,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N,children:d.jsx(Rie,{})})]}),n&&d.jsx(dy,{className:"react-flow__controls-fitview",onClick:W,title:"fit view","aria-label":"fit view",children:d.jsx(Oie,{})}),r&&d.jsx(dy,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?d.jsx(Aie,{}):d.jsx(qie,{})}),p]})}lM.displayName="Controls";const cM=H.memo(lM);function Fie({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:f,borderRadius:p,shapeRendering:h,selected:b,onClick:x}){const{background:_,backgroundColor:E}=s||{},N=o||_||E;return d.jsx("rect",{className:Hr(["react-flow__minimap-node",{selected:b},f]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:N,stroke:l,strokeWidth:u},shapeRendering:h,onClick:x?j=>x(j,t):void 0})}const Die=H.memo(Fie),Lie=t=>t.nodes.map(e=>e.id),qS=t=>t instanceof Function?t:()=>t;function Mie({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Die,onClick:o}){const l=jn(Lie,xr),u=qS(e),f=qS(t),p=qS(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:l.map(b=>d.jsx(Bie,{id:b,nodeColorFunc:u,nodeStrokeColorFunc:f,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},b))})}function $ie({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:f,x:p,y:h,width:b,height:x}=jn(_=>{const E=_.nodeLookup.get(t),{x:N,y:j}=E.internals.positionAbsolute,{width:C,height:R}=Ja(E);return{node:E,x:N,y:j,width:C,height:R}},xr);return!f||f.hidden||!dL(f)?null:d.jsx(l,{x:p,y:h,width:b,height:x,style:f.style,selected:!!f.selected,className:r(f),color:e(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:u,id:f.id})}const Bie=H.memo($ie);var zie=H.memo(Mie);const Wie=200,Vie=150,Uie=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?cL(wf(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},Hie="react-flow__minimap-desc";function uM({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:f,maskStrokeColor:p,maskStrokeWidth:h,position:b="bottom-right",onClick:x,onNodeClick:_,pannable:E=!1,zoomable:N=!1,ariaLabel:j="React Flow mini map",inversePan:C,zoomStep:R=10,offsetScale:q=5}){const L=wr(),M=H.useRef(null),{boundingRect:W,viewBB:P,rfId:O,panZoom:z,translateExtent:D,flowWidth:V,flowHeight:U}=jn(Uie,xr),B=t?.width??Wie,G=t?.height??Vie,Z=W.width/B,le=W.height/G,ie=Math.max(Z,le),ne=ie*B,oe=ie*G,te=q*ie,ue=W.x-(ne-W.width)/2-te,de=W.y-(oe-W.height)/2-te,ye=ne+te*2,we=oe+te*2,Ie=`${Hie}-${O}`,ze=H.useRef(0),Re=H.useRef();ze.current=ie,H.useEffect(()=>{if(M.current&&z)return Re.current=bne({domNode:M.current,panZoom:z,getTransform:()=>L.getState().transform,getViewScale:()=>ze.current}),()=>{Re.current?.destroy()}},[z]),H.useEffect(()=>{Re.current?.update({translateExtent:D,width:V,height:U,inversePan:C,pannable:E,zoomStep:R,zoomable:N})},[E,N,C,R,D,V,U]);const De=x?Xe=>{const[Ve,ct]=Re.current?.pointer(Xe)||[0,0];x(Xe,{x:Ve,y:ct})}:void 0,Je=_?H.useCallback((Xe,Ve)=>{const ct=L.getState().nodeLookup.get(Ve);_(Xe,ct)},[]):void 0;return d.jsx($N,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*ie:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Hr(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:B,height:G,viewBox:`${ue} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ie,ref:M,onClick:De,children:[j&&d.jsx("title",{id:Ie,children:j}),d.jsx(zie,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-te},${de-te}h${ye+te*2}v${we+te*2}h${-ye-te*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}uM.displayName="MiniMap";const dM=H.memo(uM);function Kie({nodeId:t,position:e,variant:n=ch.Handle,className:r,style:i={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:b,onResizeStart:x,onResize:_,onResizeEnd:E}){const N=WN(),j=typeof t=="string"?t:N,C=wr(),R=H.useRef(null),q=n===ch.Line?"right":"bottom-right",L=e??q,M=H.useRef(null);H.useEffect(()=>{if(!(!R.current||!j))return M.current||(M.current=qne({domNode:R.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:z,transform:D,snapGrid:V,snapToGrid:U,nodeOrigin:B,domNode:G}=C.getState();return{nodeLookup:z,transform:D,snapGrid:V,snapToGrid:U,nodeOrigin:B,paneDomNode:G}},onChange:(z,D)=>{const{triggerNodeChanges:V,nodeLookup:U,parentLookup:B,nodeOrigin:G}=C.getState(),Z=[],le={x:z.x,y:z.y},ie=U.get(j);if(ie&&ie.expandParent&&ie.parentId){const ne=ie.origin??G,oe=z.width??ie.measured.width,te=z.height??ie.measured.height,ue={id:ie.id,parentId:ie.parentId,rect:{width:oe,height:te,...fL({x:z.x??ie.position.x,y:z.y??ie.position.y},{width:oe,height:te},ie.parentId,U,ne)}},de=MN([ue],U,B,G);Z.push(...de),le.x=z.x?Math.max(ne[0]*oe,z.x):void 0,le.y=z.y?Math.max(ne[1]*te,z.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:j,type:"position",position:{...le}};Z.push(ne)}if(z.width!==void 0&&z.height!==void 0){const ne={id:j,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:z.width,height:z.height}};Z.push(ne)}for(const ne of D){const oe={...ne,type:"position"};Z.push(oe)}V(Z)},onEnd:()=>{const z={id:j,type:"dimensions",resizing:!1};C.getState().triggerNodeChanges([z])}})),M.current.update({controlPosition:L,boundaries:{minWidth:l,minHeight:u,maxWidth:f,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:E,shouldResize:b}),()=>{M.current?.destroy()}},[L,l,u,f,p,h,x,_,E,b]);const W=L.split("-"),P=n===ch.Line?"borderColor":"backgroundColor",O=o?{...i,[P]:o}:i;return d.jsx("div",{className:Hr(["react-flow__resize-control","nodrag",...W,n,r]),ref:R,style:O,children:s})}H.memo(Kie);const Qie=t=>t.domNode?.querySelector(".react-flow__renderer");function Gie({children:t}){const e=jn(Qie);return e?em.createPortal(t,e):null}const Jie=(t,e)=>t?.internals.positionAbsolute.x!==e?.internals.positionAbsolute.x||t?.internals.positionAbsolute.y!==e?.internals.positionAbsolute.y||t?.measured.width!==e?.measured.width||t?.measured.height!==e?.measured.height||t?.selected!==e?.selected||t?.internals.z!==e?.internals.z,Zie=(t,e)=>{if(t.size!==e.size)return!1;for(const[n,r]of t)if(Jie(r,e.get(n)))return!1;return!0},Yie=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2],selectedNodesCount:t.nodes.filter(e=>e.selected).length});function fM({nodeId:t,children:e,className:n,style:r,isVisible:i,position:s=Ot.Top,offset:o=10,align:l="center",...u}){const f=WN(),p=H.useCallback(L=>(Array.isArray(t)?t:[t||f||""]).reduce((P,O)=>{const z=L.nodeLookup.get(O);return z&&P.set(z.id,z),P},new Map),[t,f]),h=jn(p,Zie),{x:b,y:x,zoom:_,selectedNodesCount:E}=jn(Yie,xr);if(!(typeof i=="boolean"?i:h.size===1&&h.values().next().value.selected&&E===1)||!h.size)return null;const j=wf(h),C=Array.from(h.values()),R=Math.max(...C.map(L=>L.internals.z+1)),q={position:"absolute",transform:ine(j,{x:b,y:x,zoom:_},s,o,l),zIndex:R,...r};return d.jsx(Gie,{children:d.jsx("div",{style:q,className:Hr(["react-flow__node-toolbar",n]),...u,"data-id":C.reduce((L,M)=>`${L}${M.id} `,"").trim(),children:e})})}const Pn="icon-[solar--home-outline]",Xie=["bg-blue-200","bg-blue-400","bg-blue-600","bg-green-200","bg-green-400","bg-green-600","bg-orange-200","bg-orange-400","bg-orange-600","bg-slate-200","bg-slate-400","bg-gray-200","bg-gray-400","bg-purple-200","bg-purple-400","bg-purple-600","bg-purple-800"],VN=bZ({shape:F.object({name:F.string().min(1),color:F.string().min(1),minWidth:No(),maxWidth:No(),minHeight:No(),maxHeight:No(),probability:No(),limit:No()}),filter:Pi}),c3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(VN.shape),defaultValues:{name:"",color:"slate",minWidth:1,maxWidth:4,minHeight:1,maxHeight:4,limit:32,probability:100,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"name",label:d.jsx(X,{label:"Region name (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[d.jsx(pn,{formState:s.formState,name:"minWidth",label:d.jsx(X,{label:"Region min width (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minWidth")})}),d.jsx(pn,{formState:s.formState,name:"maxWidth",label:d.jsx(X,{label:"Region max width (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxWidth")})})]}),d.jsxs("div",{className:"flex flex-row gap-4 items-center w-full",children:[d.jsx(pn,{formState:s.formState,name:"minHeight",label:d.jsx(X,{label:"Region min height (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("minHeight")})}),d.jsx(pn,{formState:s.formState,name:"maxHeight",label:d.jsx(X,{label:"Region max height (label)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("maxHeight")})})]}),d.jsx(pn,{formState:s.formState,name:"probability",label:d.jsx(X,{label:"Region spawn probability (label)"}),hint:d.jsx(X,{label:"Region spawn probability (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:.5,max:100,step:.5,...s.register("probability")})}),d.jsx(pn,{formState:s.formState,name:"limit",label:d.jsx(X,{label:"Region limit (label)"}),hint:d.jsx(X,{label:"Region limit (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,step:1,...s.register("limit")})}),d.jsx(pn,{formState:s.formState,name:"color",label:d.jsx(X,{label:"Color (label)"}),children:d.jsx(qi,{control:s.control,name:"color",render:({field:{ref:l,...u}})=>d.jsx(pN,{items:Xie.map(f=>({id:f,color:f})),render:({entity:f})=>d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:sn("w-4","h-4",f.color)}),f.color]}),...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:g2,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Ep=Mr(),ese=[Ep({name:"name",header(){return d.jsx(X,{label:"Region name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),Ep({name:"width",header(){return d.jsx(X,{label:"Region width (label)"})},render({data:t}){return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:on({number:t.minWidth})}),d.jsx("div",{children:d.jsx(Yt,{icon:Yb,variant:{size:"xs"}})}),d.jsx("div",{children:on({number:t.maxWidth})})]})},size:16}),Ep({name:"height",header(){return d.jsx(X,{label:"Region height (label)"})},render({data:t}){return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{children:on({number:t.minHeight})}),d.jsx("div",{children:d.jsx(Yt,{icon:Yb,variant:{size:"xs"}})}),d.jsx("div",{children:on({number:t.maxHeight})})]})},size:12}),Ep({name:"probability",header(){return d.jsx(X,{label:"Region probability (label)"})},render({value:t}){return d.jsxs(yi,{children:[on({number:t}),"%"]})},size:14}),Ep({name:"limit",header(){return d.jsx(X,{label:"Region limit (label)"})},render({value:t}){return on({number:t})},size:18})],pM=({table:t,...e})=>{const n=Dn([["Region"]]);return d.jsx(Dr,{table:Lr({...t,columns:ese}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create region (menu)"}),textTitle:d.jsx(X,{label:"Create region (modal)"}),icon:Kb,children:({close:r})=>d.jsx(c3,{mutation:Zt({async mutationFn(i){return kt.transaction().execute(async s=>s.insertInto("Region").values({id:Tn(),...i}).execute())},async onSuccess(){await n(),r()}})})})})},row({data:r}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit region (modal)"}),icon:Kb,children:({close:i})=>d.jsx(c3,{defaultValues:r,mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.updateTable("Region").set(s).where("id","=",r.id).execute())},async onSuccess(){await n(),i()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:d.jsx(X,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:n})})]})}},...e})},tse=t=>d.jsx(KD,{icon:Kb,table:pM,textTitle:d.jsx(X,{label:"Select regions (title)"}),render:({entities:e})=>d.jsx(tc,{items:e,css:{base:["flex","flex-row","gap-2"]},render:({entity:n})=>d.jsx("div",{className:sn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:n.name})}),queryKey:"Region",query:async({filter:e,cursor:n})=>kt.transaction().execute(async r=>ar({select:r.selectFrom("Region as r").selectAll(),output:VN.entity,query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("r.id","=",s.id)),s?.idIn&&(o=o.where("r.id","in",s.idIn)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("r.id","like",l),u("r.name","like",l)]))}return o},filter:e,cursor:n})),...t}),UN=oZ({shape:F.object({name:F.string().min(1),cycles:No(),sort:No(),limit:No(),regionIds:F.array(F.string()).optional()}),filter:Pi.merge(F.object({name:F.string().optional()}))}),cv=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(UN.shape),defaultValues:{cycles:1,sort:0,limit:1,regionIds:[],...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"name",label:d.jsx(X,{label:"Building name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx(pn,{formState:s.formState,name:"cycles",label:d.jsx(X,{label:"Construction cycles (label)"}),hint:d.jsx(X,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),d.jsx(pn,{formState:s.formState,name:"limit",label:d.jsx(X,{label:"Building limit (label)"}),hint:d.jsx(X,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),d.jsx(pn,{formState:s.formState,name:"sort",label:d.jsx(X,{label:"Blueprint sort (label)"}),hint:d.jsx(X,{label:"Sort blueprints by this number (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),d.jsx(pn,{formState:s.formState,name:"regionIds",label:d.jsx(X,{label:"Regions (label)"}),children:d.jsx(qi,{control:s.control,name:"regionIds",render:({field:{ref:l,...u}})=>d.jsx(tse,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Ms="icon-[fluent-mdl2--production-floor-management]",nse=({id:t,data:e,isConnectable:n})=>{const{locale:r}=en({from:"/$locale"}),i=nc();return d.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[d.jsx(co,{type:"target",position:Ot.Left,className:"w-4 h-4"}),d.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[d.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),d.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(Tt,{icon:zn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),d.jsx(Tt,{icon:Ms,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),d.jsx(Tt,{icon:CD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),d.jsx("div",{children:d.jsx(gf,{target:d.jsx(wm,{iconEnabled:ti,css:{base:["text-red-500"]}}),outside:!0,textTitle:d.jsx(X,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Dn([["Editor"]]);return d.jsx(vs,{callback:async()=>kt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),d.jsx(co,{type:"source",position:Ot.Right,isConnectable:n,className:"w-4 h-4"})]})},rse=({nodeId:t})=>{const{fitView:e}=_f();return H.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},ise=({data:t,zoomTo:e})=>{const n=Dn([]),r=Zt({async mutationFn({blueprintId:i,dependencyId:s}){return kt.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Tn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return d.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:d.jsx("div",{style:{width:"95vw",height:"85vh"},children:d.jsxs(sM,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:H.useMemo(()=>({blueprint(i){return d.jsx(nse,{...i})}}),[]),edgeTypes:H.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:l,targetY:u,sourcePosition:f,targetPosition:p,style:h={},markerEnd:b}){const{setEdges:x}=_f(),[_,E,N]=PN({sourceX:s,sourceY:o,sourcePosition:f,targetX:l,targetY:u,targetPosition:p}),j=Dn([]),C=Zt({async mutationFn({id:R}){return kt.transaction().execute(async q=>{await q.deleteFrom("Blueprint_Dependency").where("id","=",R).execute()})},async onSuccess(){x(R=>R.filter(q=>q.id!==i)),await j()}});return d.jsxs(d.Fragment,{children:[d.jsx(Cm,{path:_,markerEnd:b,style:h}),d.jsx(Sie,{children:d.jsx("div",{className:sn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${E}px,${N}px)`},children:d.jsx(Yt,{icon:C.isPending?L7:dN,onClick:()=>{C.mutate({id:i})}})})})]})}}),[]),children:[d.jsx(rse,{nodeId:e}),d.jsx(cM,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:d.jsx(gf,{target:d.jsx(wm,{className:"react-flow__controls-button",iconEnabled:Pn}),outside:!1,textTitle:d.jsx(X,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Dn([["Editor"]]),{locale:o}=en({from:"/$locale"}),l=nc();return d.jsx(cv,{mutation:Zt({async mutationFn(u){return Rn.promise(kt.transaction().execute(f=>f.insertInto("Blueprint").values({id:Tn(),...u}).returningAll().executeTakeFirstOrThrow()),ei("Create blueprint"))},async onSuccess(u){await s(),l({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),d.jsx(dM,{}),d.jsx(aM,{variant:ia.Dots,gap:12,size:1})]})})})},sse=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),E2.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),sI=Dt("/$locale/apps/derivean/root/editor")({validateSearch:hr(F.object({zoomTo:F.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return sse({graph:new E2.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=sI.useLoaderData(),{zoomTo:e}=sI.useSearch();return d.jsx(ise,{data:t,zoomTo:e})}}),ose=()=>Zt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return kt.transaction().execute(async r=>_m.parse(await r.insertInto("User").values({id:Tn(),name:e,login:t,password:IF.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),ase=F.object({name:F.string().min(1),login:F.string().min(1),password1:F.string().min(1),password2:F.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),lse=({onSuccess:t})=>{const e=ose(),n=xi({resolver:wi(ase)}),r=vi({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return d.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{QI({error:s,errors:[kI({error:s,schema:KI,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[d.jsx(ci,{variant:{highlight:!0},error:n.formState.errors.root}),d.jsx(pn,{formState:n.formState,name:"name",label:d.jsx(X,{label:"Name (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),d.jsx(pn,{formState:n.formState,name:"login",label:d.jsx(X,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),d.jsx(pn,{formState:n.formState,name:"password1",label:d.jsx(X,{label:"Password 1 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),d.jsx(pn,{formState:n.formState,name:"password2",label:d.jsx(X,{label:"Password 2 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),d.jsx(dn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:d.jsx(X,{label:"Register (submit)"})})]})},cse=Dt("/$locale/apps/derivean/public/register")({component:()=>{const t=nc();return d.jsx("div",{className:sn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(lse,{onSuccess:async e=>{yf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),use=Dt("/$locale/apps/derivean/public/logout")({pendingComponent(){return d.jsx("div",{className:sn(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsx(GD,{icon:gN,textTitle:d.jsx(X,{label:"Logout (label)"}),textMessage:d.jsx(X,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:t}}){throw yf.remove("session"),Xh({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),dse=()=>Zt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return kt.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",IF.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),fse=F.object({login:F.string().min(1),password:F.string().min(1)}),pse=({onSuccess:t})=>{const{locale:e}=en({from:"/$locale"}),n=dse(),r=xi({resolver:wi(fse)}),i=vi({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return d.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{QI({error:o,errors:[kI({error:o,schema:KI,onError:({data:l})=>{r.setError("root",{message:l.message})}})],onError:l=>{r.setError("root",{message:l.message})}})}}).catch(()=>{})),children:[d.jsx(ci,{variant:{highlight:!0},error:r.formState.errors.root}),d.jsx(pn,{formState:r.formState,name:"login",label:d.jsx(X,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),d.jsx(pn,{formState:r.formState,name:"password",label:d.jsx(X,{label:"Password (label)"}),children:d.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),d.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[d.jsx(Tt,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:d.jsx(X,{label:"Register (link)"})}),d.jsx(dn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:d.jsx(X,{label:"Login (submit)"})})]})]})},hse=Dt("/$locale/apps/derivean/public/login")({component:()=>{const t=nc();return d.jsx("div",{className:sn(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(pse,{onSuccess:async e=>{yf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),mse=async({tx:t,userId:e})=>{const n=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id as buildingId","c.id","c.cycle","bl.cycles",r=>r.case().when(r.not(r.exists(r.selectFrom("Blueprint_Requirement as br").select(r.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(i=>i.not(i.exists(i.selectFrom("Inventory as i").select(i.lit(1).as("one")).where("i.id","in",i.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(r.lit(!0)).else(r.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();for await(const{id:r,cycle:i,cycles:s,buildingId:o}of n){if(await t.deleteFrom("Route").where("toId","=",o).execute(),i>=s){await t.deleteFrom("Construction").where("id","=",r).execute();continue}await t.updateTable("Construction").set("cycle",i+1).where("id","=",r).execute()}},gse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route_Resource as rr").select(["rr.id","rr.routeId","rr.resourceId"]).where("rr.routeId","in",t.selectFrom("Route as r").innerJoin("Building as b","b.id","r.toId").select("r.id").where("b.constructionId","is not",null).where("r.userId","=",e)).execute();for await(const{id:r,routeId:i,resourceId:s}of n){const o=await t.selectFrom("Blueprint_Requirement as br").select(["br.amount"]).where("br.resourceId","=",s).where("br.blueprintId","=",t.selectFrom("Route as r").innerJoin("Building as b","b.id","r.toId").select("b.blueprintId").where("r.id","=",i)).executeTakeFirst(),l=await t.selectFrom("Inventory as i").select(["i.amount"]).where("i.resourceId","=",s).where("i.id","in",t.selectFrom("Building_Inventory as bi").select(["bi.inventoryId"]).where("bi.buildingId","=",t.selectFrom("Route as r").select("r.toId").where("r.id","=",i))).executeTakeFirst();!o||!l||l.amount>=o.amount&&await t.deleteFrom("Route_Resource").where("id","=",r).execute()}},u3=async({tx:t,userId:e,buildingId:n,blueprintProductionId:r})=>{const i=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",r).executeTakeFirstOrThrow(),s=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",r).execute();for await(const{resourceId:o,amount:l,passive:u}of s){const f=await t.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi","bi.inventoryId","i.id").select(["i.id","i.amount"]).where("bi.buildingId","=",n).where("i.resourceId","=",o).where("i.amount",">=",l).where("i.type","in",["storage"]).executeTakeFirstOrThrow();u||await t.updateTable("Inventory").set({amount:f.amount-l}).where("id","=",f.id).execute()}await t.insertInto("Production").values({id:Tn(),buildingId:n,blueprintProductionId:r,userId:e,cycle:0,cycles:i.cycles}).execute()},yse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","p.cycle","p.cycles","bp.resourceId","r.name","bp.amount"]).where("userId","=",e).execute();for await(const{id:s,buildingId:o,resourceId:l,cycle:u,cycles:f,amount:p}of n){if(u<f){await t.updateTable("Production").set("cycle",u+1).where("id","=",s).execute();continue}const h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(h&&(!(h.limit>0)||h.amount+p<=h.limit)){await t.updateTable("Inventory").set({amount:h.amount+p}).where("id","=",h.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}const b=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(b&&(!(b.limit>0)||b.amount+p<=b.limit)){await t.updateTable("Inventory").set({amount:b.amount+p}).where("id","=",b.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}}const r=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();for await(const{buildingId:s,productionId:o}of r)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await u3({tx:t,blueprintProductionId:o,buildingId:s,userId:e}),await t.updateTable("Building").set({productionId:null}).where("id","=",s).execute()}catch{}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();for await(const{buildingId:s,recurringProductionId:o}of i)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await u3({tx:t,blueprintProductionId:o,buildingId:s,userId:e})}catch{}},bse=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route as r").innerJoin("Route_Resource as rr","rr.routeId","r.id").select(["r.id","r.toId","r.fromId"]).where("r.userId","=",e).orderBy("rr.priority","desc").execute();for await(const{id:r,fromId:i,toId:s}of n){const o=await t.selectFrom("Route_Resource as rr").select(["rr.amount","rr.resourceId","rr.type"]).where("rr.routeId","=",r).orderBy("rr.priority","desc").execute();for await(const{amount:l,resourceId:u,type:f}of o){const p=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).where("i.resourceId","=",u).where("i.type","=","storage").orderBy("i.amount","desc").executeTakeFirst(),h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",u).where("i.type","=",f).orderBy("i.amount","asc").executeTakeFirst();if(!p||!h){console.log("Source or target is not compatible");continue}const b=Math.max(0,Math.min(Math.min(p.amount,l??p.amount),h.limit-h.amount));b>0&&(await t.updateTable("Inventory").set({amount:p.amount-b}).where("id","=",p.id).execute(),await t.updateTable("Inventory").set({amount:h.amount+b}).where("id","=",h.id).execute())}}},hM=async({tx:t,userId:e})=>{try{await t.insertInto("Cycle").values({id:Tn(),stamp:mn.now().toUTC().toSQLTime(),userId:e}).execute(),await mse({tx:t,userId:e}),await gse({tx:t,userId:e}),await yse({tx:t,userId:e}),await bse({tx:t,userId:e})}catch(n){throw console.error(n),n}},vse=({userId:t,...e})=>{const n=Dn([["GameMap"]]),[r,i]=H.useState(!1),s=Zt({mutationKey:["useCycleMutation"],async mutationFn({userId:o}){return kt.transaction().execute(async l=>hM({userId:o,tx:l}))},async onSuccess(){await n()}});return H.useEffect(()=>{if(r&&!s.isPending){const o=setInterval(()=>{s.mutate({userId:t})},1e3);return()=>clearInterval(o)}},[r]),d.jsx(dn,{iconEnabled:r?"icon-[fluent--pause-24-regular]":"icon-[hugeicons--play]",onClick:()=>{i(o=>!o)},loading:s.isPending,...e})},Jh="icon-[gala--clock]",xse=({userId:t,cycle:e,...n})=>{const r=Dn([["Cycle"],["GameMap"],["Resource_Queue"],["Building_Queue"],["Building"],["User_Inventory"],["Inventory"],["Building_Base_Production"]]),i=Zt({mutationKey:["useCycleMutation"],async mutationFn({userId:s}){return kt.transaction().execute(async o=>hM({userId:s,tx:o}))},async onSuccess(){await r()}});return d.jsxs(dn,{iconEnabled:Jh,iconDisabled:Jh,onClick:()=>{i.mutate({userId:t})},loading:i.isPending,...n,children:[d.jsx(X,{css:{base:["font-bold"]},label:"New cycle (label)"}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{className:"font-light text-sm",children:on({number:e})}),d.jsx(Yt,{icon:"icon-[solar--arrow-right-linear]"}),d.jsx("div",{className:"font-bold",children:on({number:e+1})})]})]})},wse=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=cx({sourceX:t,sourceY:e,targetX:n,targetY:r});return d.jsx("g",{children:d.jsx("path",{style:i,fill:"none",d:s})})};function d3(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Ot.Left:s>=r+n.measured.width-1?Ot.Right:o<=i+1?Ot.Top:o>=n.y+n.measured.height-1?Ot.Bottom:Ot.Top}function f3(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,l=r/2,u=i.x+o,f=i.y+l,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,b=(p-u)/(2*o)-(h-f)/(2*l),x=(p-u)/(2*o)+(h-f)/(2*l),_=1/(Math.abs(b)+Math.abs(x)||1),E=_*b,N=_*x,j=o*(E+N)+u,C=l*(-E+N)+f;return{x:j,y:C}}function _se(t,e){const n=f3(t,e),r=f3(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:d3(t,n),targetPos:d3(e,r)}}const Sse=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=l3(e),o=l3(n);if(!s||!o)return null;const{sx:l,sy:u,tx:f,ty:p}=_se(s,o),[h]=cx({sourceX:l,sourceY:u,targetX:f,targetY:p});return d.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},mM=["flex","flex-row","gap-2","items-center","p-4","bg-white","rounded-md","border","shadow-md","border-slate-300"],Ba="icon-[mingcute--inventory-line]",oI="icon-[tabler--basket]",gM="icon-[oui--refresh]",ux="icon-[gis--route-end]",Ese=({id:t,data:e})=>{const{mapId:n,locale:r}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(d.Fragment,{children:[d.jsx(fM,{className:sn(mM),children:"Blah"}),d.jsxs("div",{className:sn(["flex","flex-col","gap-1","w-full","h-full","justify-between","items-start"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx(Tt,{icon:Bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t},css:{base:["font-bold"]},children:e.name}),d.jsxs("div",{className:"flex flex-row gap-1 items-end",children:[d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(dn,{iconEnabled:Ba,variant:{variant:"subtle",size:"sm"}})}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(dn,{iconEnabled:Ms,variant:{variant:"subtle",size:"sm"}})}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:r,mapId:n,buildingId:t},children:d.jsx(dn,{iconEnabled:ux,variant:{variant:"subtle",size:"sm"}})})]})]}),d.jsxs("div",{className:"flex flex-row items-center justify-between w-full",children:[d.jsx("div",{children:e.productionName?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[d.jsx(Yt,{icon:oI,variant:{size:"xs"}}),d.jsx("div",{children:e.productionName})]}):e.recurringProductionName?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[d.jsx(Yt,{icon:gM,variant:{size:"xs"}}),d.jsx("div",{children:e.recurringProductionName})]}):null}),e.production?d.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400 font-bold",children:[d.jsx(Yt,{icon:Yb}),d.jsx("div",{children:e.production.name})]}):null]}),e.production?d.jsx(vf,{value:100*e.production.cycle/e.production.cycles}):null,d.jsx(co,{className:"hidden",position:Ot.Right,type:"source",isConnectable:!1}),d.jsx(co,{className:"hidden",position:Ot.Left,type:"target",isConnectable:!1})]})]})},Ise=({id:t,data:e})=>{const n=tM(),r=n.inProgress&&n.fromNode.id!==t;return d.jsxs("div",{className:"flex flex-row gap-2 w-full h-full items-center justify-center ",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center text-xl",children:[d.jsx(Yt,{icon:ux,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&d.jsx(co,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ot.Right,type:"source"}),(!n.inProgress||r)&&d.jsx(co,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Ot.Left,type:"target",isConnectableStart:!1})]})]})},Nse=({data:t})=>{const e=Dn([["GameMap"]]),n=Zt({async mutationFn({constructionId:r}){return kt.transaction().execute(i=>i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:"flex flex-row gap-2 items-start justify-between w-full h-full",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name})]}),d.jsx(dn,{iconEnabled:RE,iconDisabled:RE,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},fu="icon-[emojione-monotone--construction]",kse=({data:t})=>{const{mapId:e,locale:n}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(d.Fragment,{children:[d.jsx(fM,{position:Ot.Top,className:sn(mM),children:d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:n,mapId:e,landId:t.id},children:d.jsx(dn,{iconEnabled:fu,variant:{variant:"subtle"},children:d.jsx(X,{label:"Construction (label)"})})})}),d.jsx("div",{children:d.jsx("div",{className:"text-9xl font-bold font-slate-800",children:t.name})})]})},Cse=({data:t})=>{const{mapId:e,locale:n}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsx(Tt,{icon:fu,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements",params:{locale:n,mapId:e,buildingId:t.id},css:{base:["font-bold"]},children:t.name})}),d.jsx(vf,{value:100*t.cycle/t.cycles}),d.jsx(co,{className:"hidden",position:Ot.Right,type:"source",isConnectable:!1}),d.jsx(co,{className:"hidden",position:Ot.Left,type:"target",isConnectable:!1})]})},HN="icon-[lucide--land-plot]",Ip=384,Np=128,id=["p-2","bg-white","rounded-lg","border-[4px]","border-slate-300"],jse={stroke:"#DD44AA",strokeWidth:3},Tse={land:kse,construction:Nse,queue:Cse,building:Ese,"building-route":Ise},Rse={route:Sse},Ose=({userId:t,cycle:e,construction:n,queue:r,building:i,route:s,land:o,zoomToId:l,routing:u})=>{const f=Dn([["GameMap"]]),{mapId:p,locale:h}=en({from:"/$locale/apps/derivean/map/$mapId"}),b=nc(),x=H.useMemo(()=>[...o.map(G=>({id:G.id,position:{x:G.x,y:G.y},width:G.width,height:G.height,selectable:!0,draggable:!1,data:G,type:"land",className:sn(id,[G.color,"border-slate-600","opacity-25"]),zIndex:-1})),...n.map(G=>({id:G.id,data:G,position:{x:G.x,y:G.y},type:"construction",width:Ip,height:Np,selectable:!1,className:sn(id,[G.valid?["border-green-500"]:["border-red-500"]]),extent:"parent",parentId:G.landId})),...r.map(G=>u?{id:G.id,data:G,position:{x:G.x,y:G.y},type:"building-route",width:Ip,height:Np,selectable:!1,className:sn(id,["border-amber-400","bg-amber-50"],G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId}:{id:G.id,data:G,position:{x:G.x,y:G.y},type:"queue",width:Ip,height:Np,selectable:!1,className:sn(id,["border-amber-400","bg-amber-50"],G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId}),...i.map(G=>u?{id:G.id,data:G,position:{x:G.x,y:G.y},type:"building-route",width:Ip,height:Np,className:sn(id,G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId}:{id:G.id,data:G,position:{x:G.x,y:G.y},type:"building",width:Ip,height:Np,selectable:!0,className:sn(id,G.valid?void 0:["border-red-500"]),extent:"parent",parentId:G.landId})],[n,r,i,o,u]),_=H.useMemo(()=>[...s.map(G=>({id:G.id,source:G.fromId,target:G.toId,type:"route",animated:G.resourceCount>0,markerEnd:{type:Hh.ArrowClosed,color:G.resourceCount>0?"#b1b1b7":"#FF0000"},style:{stroke:G.resourceCount>0?"#777777":"#FF0000",strokeWidth:4,pointerEvents:"all"}}))],[s]),[E,N]=Eie(x),[j,C]=Iie(_),{updateNode:R,getIntersectingNodes:q,fitView:L,getNodes:M}=_f();H.useEffect(()=>{N(x)},[x]),H.useEffect(()=>{C(_)},[_]),H.useEffect(()=>{l&&setTimeout(()=>{L({nodes:[{id:l}],duration:750})},250)},[L,l]);const W=Zt({async mutationFn({buildingId:G,x:Z,y:le}){return kt.transaction().execute(async ie=>{await ie.updateTable("Building").set({x:Z,y:le}).where("id","=",G).execute()})},async onSuccess(){await f()}}),P=Zt({async mutationFn(){return kt.transaction().execute(async G=>{const Z=M().filter(le=>q(le).filter(ie=>ie.type!=="land").length>0).map(le=>le.id);await G.updateTable("Building").where("id","in",G.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").where("l.mapId","=",p).select("b.id")).set({valid:!0}).execute(),await G.updateTable("Building").set({valid:!1}).where("id","in",Z).execute()})},async onSuccess(){await f()}}),O=H.useCallback(G=>{N(Z=>BN(G,Z))},[N]),z=H.useCallback((G,Z)=>{N(le=>le.map(ie=>ie.id===Z.id?{...ie,selected:!1}:ie))},[]),D=H.useCallback((G,Z)=>{},[q,R]),V=H.useCallback((G,Z)=>{W.mutate({buildingId:Z.id,x:Z.position.x,y:Z.position.y},{onSuccess(){P.mutate()}})},[q,W]),U=Zt({async mutationFn({fromId:G,toId:Z}){return kt.transaction().execute(async le=>le.insertInto("Route").values({id:Tn(),fromId:G,toId:Z,userId:t}).execute())},async onSuccess(){await f()}}),B=H.useCallback(({source:G,target:Z})=>U.mutate({fromId:G,toId:Z}),[U]);return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-row",children:[d.jsxs(sM,{nodes:E,edges:j,onNodesChange:O,onNodeDragStart:z,onNodeDrag:D,onNodeDragStop:V,onConnect:B,className:"grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:Tse,edgeTypes:Rse,connectionLineComponent:wse,connectionLineStyle:jse,maxZoom:2,minZoom:.1,onDoubleClick:()=>{b({search:{routing:!u}})},onEdgeClick:(G,Z)=>{b({to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:h,buildingId:Z.source}})},zoomOnDoubleClick:!1,children:[d.jsx(xse,{userId:t,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-16"]},onDoubleClick:G=>{G.preventDefault(),G.stopPropagation()}}),d.jsx(vse,{userId:t,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),d.jsx(cM,{orientation:"horizontal",showZoom:!1,showFitView:!1}),d.jsx(dM,{zoomable:!0,draggable:!0,pannable:!0,maskColor:"rgba(0,0,0,0.2)"}),d.jsx(aM,{variant:ia.Lines,className:"bg-slate-50",gap:32,size:1}),d.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-xs",children:[d.jsx(Tt,{to:"/$locale/apps/derivean/game",params:{locale:h},children:d.jsx(dn,{iconEnabled:gs,variant:{variant:"subtle"}})}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:h,mapId:p},children:d.jsx(dn,{iconEnabled:Bo,variant:{variant:"subtle"}})}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:h,mapId:p},children:d.jsx(dn,{iconEnabled:HN,variant:{variant:"subtle"}})})]})]}),d.jsx(fo,{})]})})},qse=({cycle:t,userId:e,construction:n,building:r,queue:i,route:s,land:o,zoomToId:l,routing:u})=>d.jsx(iM,{children:d.jsx(Ose,{userId:e,cycle:t,construction:n,queue:i,building:r,route:s,land:o,zoomToId:l,routing:u})}),aI=Dt("/$locale/apps/derivean/map/$mapId")({validateSearch:hr(F.object({zoomToId:F.string().optional(),routing:F.boolean().optional()})),async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r}}){const i=await n();return{user:i,construction:await t.ensureQueryData({queryKey:["GameMap",r,"construction"],async queryFn(){return e.transaction().execute(s=>Cr({select:s.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.constructionId","bl.name","bg.x","bg.y","bg.valid"]).where("c.plan","=",!0).where("l.mapId","=",r).where("bg.userId","=",i.id),output:F.object({id:F.string().min(1),blueprintId:F.string().min(1),landId:F.string().min(1),constructionId:F.string().min(1),name:F.string().min(1),x:F.number(),y:F.number(),valid:Qi()})}))}}),queue:await t.ensureQueryData({queryKey:["GameMap",r,"queue"],async queryFn(){return e.transaction().execute(s=>Cr({select:s.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bl.name","bg.x","bg.y","bg.valid","c.cycles","c.cycle"]).where("c.plan","=",!1).where("l.mapId","=",r).where("bg.userId","=",i.id),output:F.object({id:F.string().min(1),blueprintId:F.string().min(1),landId:F.string().min(1),name:F.string().min(1),x:F.number(),y:F.number(),cycles:F.number().int().nonnegative(),cycle:F.number().int().nonnegative(),valid:Qi()})}))}}),building:await t.ensureQueryData({queryKey:["GameMap",r,"building"],async queryFn(){return e.transaction().execute(s=>Cr({select:s.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.landId","bg.productionId","bg.recurringProductionId","bg.valid",o=>o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),o=>o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),o=>o.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(l=>Jc.jsonObject({id:l.ref("p.id"),name:l.ref("r.name"),cycle:l.ref("p.cycle"),cycles:l.ref("p.cycles")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("l.mapId","=",r).where("bg.userId","=",i.id),output:F.object({id:F.string().min(1),blueprintId:F.string().min(1),landId:F.string().min(1),name:F.string().min(1),productionId:F.string().nullish(),recurringProductionId:F.string().nullish(),productionName:F.string().nullish(),recurringProductionName:F.string().nullish(),production:M9(F.object({id:F.string().min(1),name:F.string().min(1),cycle:F.number().int().nonnegative(),cycles:F.number().int().nonnegative()})).nullish(),x:F.number(),y:F.number(),valid:Qi()})}))}}),route:await t.ensureQueryData({queryKey:["GameMap",r,"route"],async queryFn(){return e.transaction().execute(s=>Cr({select:s.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName",o=>o.selectFrom("Route_Resource as rr").whereRef("rr.routeId","=","r.id").select(l=>l.fn.count("rr.id").as("resourceCount")).as("resourceCount")]).where("r.userId","=",i.id),output:F.object({id:F.string().min(1),fromId:F.string().min(1),toId:F.string().min(1),fromName:F.string().min(1),toName:F.string().min(1),resourceCount:F.number().int().nonnegative()})}))}}),land:await t.ensureQueryData({queryKey:["GameMap",r,"land","list"],async queryFn(){return e.transaction().execute(async s=>Cr({select:s.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","r.color","l.x","l.y","l.width","l.height"]).where("l.mapId","=",r).orderBy("r.name"),output:F.object({id:F.string().min(1),name:F.string().min(1),color:F.string().min(1),x:F.number().int(),y:F.number().int(),width:F.number().int(),height:F.number().int()})}))}}),cycle:await t.ensureQueryData({queryKey:["GameMap",r,"cycle"],async queryFn(){return e.transaction().execute(async s=>(await s.selectFrom("Cycle as c").select(o=>o.fn.count("c.id").as("count")).where("c.userId","=",i.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,construction:e,queue:n,building:r,route:i,land:s,cycle:o}=aI.useLoaderData(),{zoomToId:l,routing:u}=aI.useSearch();return d.jsx(qse,{userId:t.id,cycle:o,construction:e,queue:n,building:r,route:i,land:s,zoomToId:l,routing:u})}}),yM=Dt("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=yM.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let l=`z.never({message: '${i}'})`;switch(o){case"integer":{l="z.number().int()";break}case"float4":{l="z.number()";break}case"datetime":{l="z.string()";break}case"boolean":{l="withBoolSchema()";break}}return o.startsWith("varchar")&&(l=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${l}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return d.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),p3=Mr(),Ase=[p3({name:"name",header(){return d.jsx(X,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),p3({name:"login",header(){return d.jsx(X,{label:"User login (label)"})},render({value:t}){return t},size:14})],Pse=({table:t,...e})=>{const n=Dn([["GameMap"],["Management"],["User_Inventory"]]),r=Zt({async mutationFn({userId:i}){return kt.transaction().execute(async s=>{await s.deleteFrom("Building").where("userId","=",i).execute(),await s.deleteFrom("Production").where("userId","=",i).execute(),await s.deleteFrom("Construction").where("userId","=",i).execute(),await s.deleteFrom("Cycle").where("userId","=",i).execute()})},async onSuccess(){await n()}});return d.jsx(Dr,{table:Lr({...t,columns:Ase}),action:{row({data:i}){return d.jsx(or,{children:d.jsx(GI,{icon:ti,onClick:()=>{r.mutateAsync({userId:i.id})},children:d.jsx(X,{label:"Reset game (menu)"})})})}},...e})},Fse=wZ({shape:F.object({name:F.string().min(1),login:F.string().min(1),password:F.string().min(1)}),filter:Pi.merge(F.object({login:F.string().optional(),password:F.string().optional()}))}),zy=Dt("/$locale/apps/derivean/root/user/list")({validateSearch:hr(Fr(Fse)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>ar({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:F.object({id:F.string().min(1),name:F.string().min(1),login:F.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=zy.useLoaderData(),{filter:n,cursor:r,selection:i}=zy.useSearch(),s=zy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Pse,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:bs(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of users (label)"}),...qr(s)}})})}}),Dse=({entity:t,...e})=>{const{locale:n}=en({from:"/$locale"});return d.jsxs(yu,{...e,children:[d.jsx(tr,{icon:yN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Building list (menu)"})})]})},Lse=t=>{const{locale:e}=en({from:"/$locale"});return d.jsx(bf,{title:({entity:n})=>d.jsx(xf,{icon:yN,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Tt,{icon:Hv,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:d.jsx(X,{label:"User list (label)"})})}),...t})},bM=Dt("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await $o({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:F.object({id:F.string().min(1),name:F.string().min(1)})})}))},component(){const{tva:t}=pr({from:"__root__"}),{entity:e}=bM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Lse,{entity:e}),d.jsx(Dse,{entity:e}),d.jsx(fo,{})]})}}),jm=xZ({shape:F.object({code:F.string().min(1),label:F.string().min(1),group:F.string().nullish(),sort:No()}),filter:Pi.merge(F.object({code:F.string().optional(),group:F.string().optional()}))}),h3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(jm.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"code",label:d.jsx(X,{label:"Tag code (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),d.jsx(pn,{formState:s.formState,name:"label",label:d.jsx(X,{label:"Tag label (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),d.jsx(pn,{formState:s.formState,name:"group",label:d.jsx(X,{label:"Tag group (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),d.jsx(pn,{formState:s.formState,name:"sort",label:d.jsx(X,{label:"Tag sort (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Dh,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},AS=Mr(),Mse=[AS({name:"label",header(){return d.jsx(X,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),AS({name:"code",header(){return d.jsx(X,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),AS({name:"group",header(){return d.jsx(X,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],vM=({group:t,table:e,...n})=>{const r=Dn([["Tag"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:Mse}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create tag (menu)"}),textTitle:d.jsx(X,{label:"Create tag (modal)"}),icon:Dh,children:d.jsx(h3,{defaultValues:{group:t},mutation:Zt({async mutationFn(i){return Rn.promise(kt.transaction().execute(s=>s.insertInto("Tag").values({id:Tn(),...i}).returningAll().executeTakeFirstOrThrow()),ei("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit tag (modal)"}),icon:Dh,children:d.jsx(h3,{defaultValues:{group:t,...i},mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Edit tag"))},async onSuccess(){await r()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>{await kt.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:d.jsx(X,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},Wy=Dt("/$locale/apps/derivean/root/tag/list")({validateSearch:hr(Fr(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>ar({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:F.object({id:F.string().min(1),code:F.string().min(1),label:F.string().min(1),group:F.string().nullish(),sort:F.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Wy.useLoaderData(),{filter:n,cursor:r,selection:i}=Wy.useSearch(),s=Wy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(vM,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:bs(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...qr(s)}})})}}),$se=({group:t,...e})=>d.jsx(KD,{icon:Dh,table:n=>d.jsx(vM,{group:t,...n}),render:({entities:n})=>d.jsx(JD,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>kt.transaction().execute(async i=>ar({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:jm.entity,query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("t.id","=",o.id)),o?.idIn&&(l=l.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("t.code","like",u),f("t.group","like",u),f("t.label","like",u),f("t.id","like",u)]))}return l},filter:n,cursor:r})),...e}),xM=vZ({shape:F.object({name:F.string().min(1),transport:Ds(),tagIds:F.array(F.string()).optional()}),filter:Pi.merge(F.object({name:F.string().optional()}))}),m3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=vi,css:s})=>{const o=xi({resolver:wi(xM.shape),defaultValues:{transport:1,...n}}),l=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return d.jsxs("form",{className:l.base(),onSubmit:Ji({form:o,mutation:e}),children:[d.jsx(ci,{variant:{highlight:!0},error:o.formState.errors.root}),d.jsx(pn,{formState:o.formState,name:"name",label:d.jsx(X,{label:"Resource name (label)"}),children:d.jsx("input",{type:"text",className:l.input(),...o.register("name")})}),d.jsx(pn,{formState:o.formState,name:"transport",label:d.jsx(X,{label:"Resource transport (label)"}),hint:d.jsx(X,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:l.input(),min:.5,step:.5,...o.register("transport")})}),d.jsx(pn,{formState:o.formState,name:"tagIds",label:d.jsx(X,{label:"Resource tags (label)"}),children:d.jsx(qi,{control:o.control,name:"tagIds",render:({field:{ref:u,...f}})=>d.jsx($se,{group:t,textTitle:d.jsx(X,{label:"Select resource tags (title)"}),textSelect:d.jsx(X,{label:"Select resource tags (label)"}),allowEmpty:!0,...f})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},sd=Mr(),Bse=[sd({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),sd({name:"transport",header(){return d.jsx(X,{label:"Resource transport (label)"})},render({value:t}){return on({number:t})},size:12}),sd({name:"countProduction",header(){return d.jsx(X,{label:"Resource production count (label)"})},render({value:t}){return d.jsx(yi,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:on({number:t})})},size:12}),sd({name:"countRequirement",header(){return d.jsx(X,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return d.jsx(yi,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:on({number:e})})},size:12}),sd({name:"countProductionRequirement",header(){return d.jsx(X,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return d.jsx(yi,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:on({number:e})})},size:18}),sd({name:"tags",header(){return d.jsx(X,{label:"Resource tags (label)"})},render({value:t}){return d.jsx(JD,{tags:t})},size:32})],wM=({group:t,table:e,...n})=>{const r=Dn([["Resource"],["Resource_Tag"]]);return d.jsx(Dr,{table:Lr({...e,columns:Bse}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create resource (menu)"}),textTitle:d.jsx(X,{label:"Create resource (modal)"}),icon:zn,children:({close:i})=>d.jsx(m3,{group:t,mutation:Zt({async mutationFn({name:s,transport:o,tagIds:l=[]}){return kt.transaction().execute(async u=>{const f=await u.insertInto("Resource").values({id:Tn(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return l.length&&await u.insertInto("Resource_Tag").values(l.map(p=>({id:Tn(),resourceId:f.id,tagId:p}))).execute(),f})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit resource (modal)"}),icon:zn,children:({close:s})=>d.jsx(m3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Zt({async mutationFn({tagIds:o,...l}){return Rn.promise(kt.transaction().execute(async u=>{const f=await u.updateTable("Resource").set(l).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",f.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:Tn(),resourceId:f.id,tagId:p}))).execute(),f}),ei("Update resource"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},Vy=Dt("/$locale/apps/derivean/root/resource/list")({validateSearch:hr(Fr(xM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>ar({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>jr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:F.object({id:F.string().min(1),name:F.string().min(1),transport:Ds(),countRequirement:F.number().nonnegative(),countProduction:F.number().nonnegative(),countProductionRequirement:F.number().nonnegative(),tags:gi(jm.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Vy.useLoaderData(),{filter:n,cursor:r,selection:i}=Vy.useSearch(),s=Vy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(wM,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:bs(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...qr(s)}})})}}),zse=({entity:t,...e})=>{const{locale:n}=en({from:"/$locale"});return d.jsx(yu,{...e,children:d.jsx(tr,{icon:zn,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})})})},Wse=t=>{const{locale:e}=en({from:"/$locale"});return d.jsx(bf,{title:({entity:n})=>d.jsx(xf,{icon:zn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Tt,{icon:Hv,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(X,{label:"Resource list (label)"})})}),...t})},_M=Dt("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await $o({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:F.object({id:F.string().min(1),name:F.string().min(1)})})}))}})},component:()=>{const{tva:t}=pr({from:"__root__"}),{entity:e}=_M.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Wse,{entity:e}),d.jsx(zse,{entity:e}),d.jsx(fo,{})]})}}),Uy=Dt("/$locale/apps/derivean/root/region/list")({validateSearch:hr(Fr(VN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Region","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>ar({select:i.selectFrom("Region as r").select(["r.id","r.name","r.color","r.minWidth","r.maxWidth","r.minHeight","r.maxHeight","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u)]))}return l},output:F.object({id:F.string().min(1),name:F.string().min(1),color:F.string().min(1),minWidth:F.number().int().min(0),maxWidth:F.number().int().min(0),minHeight:F.number().int().min(0),maxHeight:F.number().int().min(0),probability:F.number().int().min(0),limit:F.number().int().min(0)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Uy.useLoaderData(),{filter:n,cursor:r,selection:i}=Uy.useSearch(),s=Uy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(pM,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:bs(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...qr(s)}})})}}),Vse=xn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),SM=({dependencies:t,variant:e,tva:n=Vse,css:r,...i})=>{const s=n({...e,css:r}).slots;return d.jsx(tc,{items:t,render:({entity:o})=>d.jsx("div",{className:s.item(),children:d.jsx("div",{children:o.name})}),...i})};var fy={},g3;function Use(){if(g3)return fy;g3=1;function t(r,i,s,o){var l=new Set;return function(u){if(!l.has(u)){var f=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var b=h[h.length-1],x=b.processed,_=b.node;if(x)h.pop(),p.pop(),f.delete(_),l.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(l.has(_)){h.pop();continue}else if(f.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}f.add(_),p.push(_);for(var E=r.get(_),N=E.length-1;N>=0;N--)h.push({node:E[N],processed:!1});b.processed=!0}}}}}var e=fy.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var l=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(f){l(f)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(f){return i.incomingEdges.get(f).length===0}).forEach(function(f){u(f)}),this.circular&&o.filter(function(f){return s.indexOf(f)===-1}).forEach(function(f){u(f)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=fy.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),fy}var EM=Use();const Tm=async({tx:t})=>{const e=new EM.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},Zh=async({tx:t})=>{const e=Tm({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},IM=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:Tn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Tn(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:Tn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Tn(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},Hse=xn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),dx=({requirements:t,diff:e,variant:n,tva:r=Hse,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx(tc,{items:t,render:({entity:l})=>{const u=e?.find(p=>p.resourceId===l.resourceId),f=u?.amount?u.amount-l.amount:-l.amount;return d.jsxs("div",{className:o.item({css:!e||f>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:l.passive}),children:[d.jsx("div",{children:l.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",on({number:l.amount})]}),e?f>=0?d.jsx(Yt,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):d.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[d.jsx(Yt,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",on({number:f}),")"]}):null]})},...s})},kp=Mr(),Kse=[kp({name:"name",header(){return d.jsx(X,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Tt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),kp({name:"dependencies",header(){return d.jsx(X,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?d.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[d.jsx(SM,{textTitle:d.jsx(X,{label:"Blueprint dependencies (title)"}),dependencies:t}),d.jsx("div",{className:"border-b border-slate-200"})]}):d.jsx(X,{label:"No dependencies (label)"})},size:32}),kp({name:"requirements",header(){return d.jsx(X,{label:"Required resources (label)"})},render({value:t}){return d.jsx(dx,{textTitle:d.jsx(X,{label:"Blueprint requirements (title)"}),textEmpty:d.jsx(X,{label:"No requirements (label)"}),requirements:t})},size:32}),kp({name:"cycles",header(){return d.jsx(X,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(Yt,{icon:Jh}),on({number:t})]})},size:8}),kp({name:"limit",header(){return d.jsx(X,{label:"Building limit (label)"})},render({value:t}){return on({number:t})},size:8})],NM=({dependencies:t,table:e,...n})=>{const r=Dn([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=Zt({async mutationFn(){return kt.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:l}of o)await IM({tx:s,blueprintId:l})})},async onSuccess(){await r()},onError(s){console.error(s)}});return d.jsx(Dr,{table:Lr({...e,columns:Kse,context:{dependencies:t}}),action:{table(){return d.jsxs(or,{children:[d.jsx(GI,{icon:Ba,onClick:()=>{Rn.promise(i.mutateAsync(),ei("Fill inventories"))},children:d.jsx(X,{label:"Fill inventories (label)"})}),d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint (modal)"}),icon:Pn,children:({close:s})=>d.jsx(cv,{mutation:Zt({async mutationFn({regionIds:o,...l}){kt.transaction().execute(async u=>{const f=await u.insertInto("Blueprint").values({id:Tn(),...l}).returningAll().executeTakeFirstOrThrow();return o?.length&&await u.insertInto("Blueprint_Region").values(o.map(p=>({id:Tn(),blueprintId:f.id,regionId:p}))).execute(),await Zh({tx:u}),f})},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint (modal)"}),icon:Pn,children:({close:o})=>d.jsx(cv,{defaultValues:{...s,regionIds:s.regions.map(l=>l.id)},mutation:Zt({async mutationFn({regionIds:l,...u}){return Rn.promise(kt.transaction().execute(async f=>{const p=await f.updateTable("Blueprint").set(u).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await f.deleteFrom("Blueprint_Region").where("blueprintId","=",p.id).execute(),l?.length&&await f.insertInto("Blueprint_Region").values(l.map(h=>({id:Tn(),blueprintId:p.id,regionId:h}))).execute(),await Zh({tx:f}),p}),ei("Update blueprint"))},async onSuccess(){await r(),o()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},oc=lZ({shape:F.object({dependencyId:F.string().min(1)}),filter:Pi.merge(F.object({blueprintId:F.string().optional(),dependencyId:F.string().optional()}))}),Sf=hZ({shape:F.object({resourceId:F.string().min(1),amount:Ds(),passive:F.boolean()}),filter:Pi.merge(F.object({blueprintId:F.string().optional(),resourceId:F.string().optional()}))}),Hy=Dt("/$locale/apps/derivean/root/blueprint/list")({validateSearch:hr(Fr(UN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(l=>Jc.jsonGroupArray({id:l.ref("r.id"),name:l.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("br.id")},
                                                'amount', ${l.ref("br.amount")},
                                                'passive', ${l.ref("br.passive")},
                                                'resourceId', ${l.ref("br.resourceId")},
                                                'blueprintId', ${l.ref("br.blueprintId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(l=>jr`json_group_array(json_object(
                                                        'id', ${l.ref("bd.id")},
                                                        'dependencyId', ${l.ref("bd.dependencyId")},
                                                        'blueprintId', ${l.ref("bd.blueprintId")},
                                                        'name', ${l.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bl.id","=",l.id)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",f),p("bl.name","like",f)]))}return u},output:F.object({id:F.string().min(1),name:F.string().min(1),cycles:F.number().nonnegative(),sort:F.number().nonnegative(),limit:F.number().nonnegative(),regions:gi(F.object({id:F.string().min(1),name:F.string().min(1)})),requirements:gi(Sf.entity.merge(F.object({name:F.string().min(1)}))),dependencies:gi(oc.entity.merge(F.object({name:F.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>Tm({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=Hy.useLoaderData(),{filter:r,cursor:i,selection:s}=Hy.useSearch(),o=Hy.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(NM,{dependencies:n,table:{data:t,filter:{value:r,set:Ar(o)},selection:{type:"multi",value:s,set:bs(o)}},fulltext:{value:r?.fulltext,set:Pr(o)},cursor:{count:e,cursor:i,textTotal:d.jsx(X,{label:"Number of blueprints"}),...qr(o)}})})}}),Qse=({entity:t,...e})=>{const{locale:n}=en({from:"/$locale"});return d.jsxs(yu,{...e,children:[d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint dependencies (menu)"})}),d.jsx(tr,{icon:zn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Required resources (menu)"})}),d.jsx(tr,{icon:Ms,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Resource production (menu)"})}),d.jsx(tr,{icon:Ba,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint inventory (menu)"})}),d.jsx(tr,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint conflicts (menu)"})}),d.jsx(tr,{icon:CD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Edit (menu)"})})]})},Gse=t=>{const{locale:e}=en({from:"/$locale"});return d.jsx(bf,{title:({entity:n})=>d.jsx(xf,{icon:Pn,title:n.name}),actions:({entity:n})=>d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:Hv,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:d.jsx(X,{label:"Blueprint list (label)"})}),d.jsx(Tt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:d.jsx(X,{label:"Editor (label)"})})]}),...t})},kM=Dt("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(o=>Jc.jsonGroupArray({id:o.ref("r.id"),name:o.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>Jc.jsonGroupArray({id:o.ref("br.id"),amount:o.ref("br.amount"),passive:o.ref("br.passive"),resourceId:o.ref("br.resourceId"),blueprintId:o.ref("br.blueprintId"),name:o.ref("r.name")}).as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>Jc.jsonGroupArray({id:o.ref("bd.id"),dependencyId:o.ref("bd.dependencyId"),blueprintId:o.ref("bd.blueprintId"),name:o.ref("bl2.name")}).as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:F.object({id:F.string().min(1),name:F.string().min(1),cycles:F.number().nonnegative(),sort:F.number().nonnegative(),regions:gi(F.object({id:F.string().min(1),name:F.string().min(1)})),requirements:gi(Sf.entity.merge(F.object({name:F.string().min(1)}))),dependencies:gi(oc.entity.merge(F.object({name:F.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>Tm({tx:i}))}},component(){const{tva:t}=pr({from:"__root__"}),{entity:e}=kM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Gse,{entity:e}),d.jsx(Qse,{entity:e}),d.jsx(fo,{})]})}}),Jse=Dt("/$locale/apps/derivean/map/$mapId/view")({}),y3=Mr(),Zse=[y3({name:"name",header(){return d.jsx(X,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Tt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),y3({name:"cycles",header(){return d.jsx(X,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(Yt,{icon:Jh}),on({number:t})]})},size:8})],Yse=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Zse}),...e}),Ky=Dt("/$locale/apps/derivean/game/blueprint/list")({validateSearch:hr(Fr(UN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async l=>ar({select:l.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",l.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:f}){let p=u;if(f?.id&&(p=p.where("bl.id","=",f.id)),f?.fulltext){const h=`%${f.fulltext}%`.toLowerCase();p=p.where(b=>b.or([b("bl.id","like",h),b("bl.name","like",h)]))}return p},output:F.object({id:F.string().min(1),name:F.string().min(1),cycles:F.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=Ky.useLoaderData(),{filter:n,cursor:r}=Ky.useSearch(),i=Ky.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Yse,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of blueprints"}),...qr(i)}})})}}),Xse=({entity:t,...e})=>{const{locale:n}=en({from:"/$locale"});return d.jsxs(yu,{...e,children:[d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(X,{label:"View detail (menu)"})}),d.jsx(tr,{icon:Bo,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint dependencies (menu)"})}),d.jsx(tr,{icon:zn,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Required resources (menu)"})}),d.jsx(tr,{icon:Ms,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Resource production (menu)"})}),d.jsx(tr,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Blueprint conflicts (menu)"})})]})},eoe=t=>{const{locale:e}=en({from:"/$locale"});return d.jsx(bf,{title:({entity:n})=>d.jsx(xf,{icon:Pn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Tt,{icon:Hv,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:d.jsx(X,{label:"Blueprint list (label)"})})}),...t})},CM=Dt("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:F.object({id:F.string().min(1),name:F.string().min(1),cycles:F.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>Tm({tx:i}))}},component(){const{tva:t}=pr({from:"__root__"}),{entity:e}=CM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(eoe,{entity:e}),d.jsx(Xse,{entity:e}),d.jsx(fo,{})]})}}),toe=Dt("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),noe=Dt("/$locale/apps/derivean/root/resource/$id/view")({component(){return d.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}}),roe=Dt("/$locale/apps/derivean/root/region/$id/view")({component(){return"view"}}),KN="icon-[carbon--document-requirements]",ioe=({entity:t,...e})=>{const{locale:n}=en({from:"/$locale"});return d.jsxs(yu,{...e,children:[d.jsx(tr,{icon:KN,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production requirements (menu)"})}),d.jsx(tr,{icon:zn,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource requirements (menu)"})}),d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource dependencies (menu)"})})]})},soe=t=>{const{locale:e}=en({from:"/$locale"});return d.jsx(bf,{title:({entity:n})=>d.jsx(xf,{icon:Ms,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(X,{label:"Building base detail (label)"})})}),...t})},jM=Dt("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await $o({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:F.object({id:F.string().min(1),resource:F.string().min(1),blueprint:F.string().min(1),blueprintId:F.string().min(1),amount:F.number().nonnegative(),cycles:F.number().int().nonnegative()})})}))}})},component(){const{entity:t}=jM.useLoaderData(),{tva:e}=pr({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(soe,{entity:t}),d.jsx(ioe,{entity:t}),d.jsx(fo,{})]})}}),ooe=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return d.jsxs("div",{className:sn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?d.jsx(Yt,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):d.jsx(Yt,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>d.jsx(yi,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},Tn())):d.jsx(X,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof EM.DepGraphCycleError?d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center"]),children:[d.jsx(Yt,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>d.jsx(yi,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},Tn()))]}):"kaboom"}},aoe=({dependencies:t,...e})=>d.jsx(_D,{items:[{id:"name",label:d.jsx(X,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:d.jsx(X,{label:"Construction cycles (label)"}),render({entity:n}){return on({number:n.cycles})}},{id:"regions",label:d.jsx(X,{label:"Regions (label)"}),render({entity:n}){return d.jsx(tc,{items:n.regions,css:{base:["flex","flex-row","gap-2"]},textEmpty:d.jsx(X,{label:"No regions (label)"}),render:({entity:r})=>d.jsx("div",{className:sn(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:r.name})})}},{id:"requirements",label:d.jsx(X,{label:"Required resources (label)"}),render({entity:n}){return d.jsx(dx,{requirements:n.requirements,textEmpty:d.jsx(X,{label:"No requirements (label)"})})}},{id:"dependencies",label:d.jsx(X,{label:"Blueprint dependencies (label)"}),render({entity:n}){return d.jsx(SM,{dependencies:n.dependencies,textEmpty:d.jsx(X,{label:"No dependencies (label)"})})}},{id:"deps",label:d.jsx(X,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return d.jsx(ooe,{graph:t,blueprintId:n.id})}}],...e}),TM=Dt("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>Tm({tx:e}))}},component(){const{dependencies:t}=TM.useLoaderData(),{entity:e}=li({from:"/$locale/apps/derivean/root/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(aoe,{dependencies:t,entity:e})})}}),Rm=({group:t,...e})=>d.jsx(QD,{icon:zn,textTitle:d.jsx(X,{label:"Select resource (title)"}),textSelect:d.jsx(X,{label:"Select resource (label)"}),table:n=>d.jsx(wM,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>kt.transaction().execute(async i=>ar({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>jr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:F.object({id:F.string().min(1),name:F.string().min(1),transport:Ds(),tags:gi(jm.entity),countRequirement:F.number().nonnegative(),countProduction:F.number().nonnegative(),countProductionRequirement:F.number().nonnegative()}),filter:n,cursor:r})),...e}),b3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(Sf.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Requirement (label)"}),children:d.jsx(qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{allowEmpty:!0,...u})})}),d.jsx(pn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(pn,{formState:s.formState,name:"passive",label:d.jsx(X,{label:"Passive requirement (label)"}),hint:d.jsx(X,{label:"Passive requirement (hint)"}),children:d.jsx(qi,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(wD,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},PS=Mr(),loe=[PS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),PS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),PS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],coe=({blueprintId:t,table:e,...n})=>{const r=Dn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:loe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create requirement item (menu)"}),textTitle:d.jsx(X,{label:"Create requirement item (modal)"}),icon:zn,children:d.jsx(b3,{mutation:Zt({async mutationFn(i){return kt.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Tn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit requirement item (modal)"}),icon:zn,children:d.jsx(b3,{defaultValues:i,mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Mp=Dt("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:hr(Fr(Sf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Mp.useLoaderData(),{filter:n,cursor:r,selection:i}=Mp.useSearch(),{id:s}=Mp.useParams(),o=Mp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(coe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of requirements (label)"}),...qr(o)}})})}}),QN=uZ({shape:F.object({resourceId:F.string().min(1),amount:Ds(),cycles:No()}),filter:Pi.merge(F.object({blueprintId:F.string().optional(),resourceId:F.string().optional()}))}),v3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(QN.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Resource name (label)"}),children:d.jsx(qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{textTitle:d.jsx(X,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(pn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(pn,{formState:s.formState,name:"cycles",label:d.jsx(X,{label:"Production cycles (label)"}),hint:d.jsx(X,{label:"Production cycles (hint)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Ms,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Om=t=>d.jsx(QD,{icon:Pn,textTitle:d.jsx(X,{label:"Select blueprint (title)"}),table:({table:e,...n})=>d.jsx(NM,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>kt.transaction().execute(async r=>ar({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(s=>Jc.jsonGroupArray({id:s.ref("r.id"),name:s.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","b.id").as("regions"),i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>jr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>jr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",l),u("b.name","like",l)]))}return o},output:F.object({id:F.string().min(1),name:F.string().min(1),cycles:F.number().nonnegative(),sort:F.number().nonnegative(),limit:F.number().nonnegative(),regions:gi(F.object({id:F.string().min(1),name:F.string().min(1)})),requirements:gi(Sf.entity.merge(F.object({name:F.string().min(1)}))),dependencies:gi(oc.entity.merge(F.object({name:F.string().min(1)})))}),filter:e,cursor:n})),...t}),uoe=F.object({blueprintId:F.string().min(1)}),doe=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(uoe),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"blueprintId",label:d.jsx(X,{label:"Target blueprint (label)"}),children:d.jsx(qi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Om,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},od=Mr(),foe=[od({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Ms,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),od({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:8}),od({name:"cycles",header(){return d.jsx(X,{label:"Production cycles (label)"})},render({value:t}){return on({number:t})},size:8}),od({name:"requirements",header(){return d.jsx(X,{label:"Required resources (label)"})},render({value:t}){return d.jsx(dx,{textTitle:d.jsx(X,{label:"Resource requirements (title)"}),textEmpty:d.jsx(X,{label:"No requirements (label)"}),requirements:t})},size:32}),od({name:"resources",header(){return d.jsx(X,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(tc,{items:t,render:({entity:e})=>d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",on({number:e.amount})]})]})})},size:32}),od({name:"dependencies",header(){return d.jsx(X,{label:"Required production dependencies (label)"})},render({value:t}){return d.jsx(tc,{items:t,render:({entity:e})=>d.jsx("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:d.jsx("div",{children:e.name})})})},size:32})],poe=({blueprintId:t,table:e,...n})=>{const r=Dn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:foe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint production (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint production (modal)"}),icon:Ms,children:({close:i})=>d.jsx(v3,{mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Tn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint production (modal)"}),icon:Ms,children:d.jsx(v3,{defaultValues:i,mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(kn,{label:d.jsx(X,{label:"Move production to (menu)"}),textTitle:d.jsx(X,{label:"Move production to (modal)"}),icon:zn,children:({close:s})=>d.jsx(doe,{mutation:Zt({async mutationFn(o){return kt.transaction().execute(async l=>{await l.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},qm=dZ({shape:F.object({blueprintId:F.string().min(1)}),filter:Pi}),Am=fZ({shape:F.object({resourceId:F.string().min(1),amount:Ds(),passive:F.boolean()}),filter:Pi.merge(F.object({blueprintProductionId:F.string().optional(),resourceId:F.string().optional()}))}),Pm=pZ({shape:F.object({resourceId:F.string().min(1),amount:Ds()}),filter:Pi.merge(F.object({resourceId:F.string().optional()}))}),$p=Dt("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:hr(Fr(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),cycles:F.number().nonnegative(),requirements:gi(Am.entity.merge(F.object({name:F.string().min(1)}))),resources:gi(Pm.entity.merge(F.object({name:F.string().min(1)}))),dependencies:gi(qm.entity.merge(F.object({name:F.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=$p.useLoaderData(),{filter:n,cursor:r,selection:i}=$p.useSearch(),{id:s}=$p.useParams(),o=$p.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(poe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of productions (label)"}),...qr(o)}})})}}),hoe=({label:t,...e})=>d.jsx(X,{label:`Inventory type - ${t}`,...e}),moe=gZ({shape:F.object({resourceId:F.string().min(1),amount:Ds(),limit:Ds(),type:F.enum(["storage","construction"])}),filter:Pi.merge(F.object({resourceId:F.string().optional(),type:F.enum(["storage","construction"]).optional()}))}),x3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(moe.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Resource name (label)"}),children:d.jsx(qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{textTitle:d.jsx(X,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(pn,{formState:s.formState,name:"type",label:d.jsx(X,{label:"Inventory type (label)"}),children:d.jsx(qi,{control:s.control,name:"type",render:({field:{ref:l,...u}})=>d.jsx(pN,{items:[{id:"storage",value:sa.text("Inventory type - storage")},{id:"construction",value:sa.text("Inventory type - construction")}],render:({entity:f})=>f.value,...u})})}),d.jsx(pn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(pn,{formState:s.formState,name:"limit",label:d.jsx(X,{label:"Inventory limit (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Ba,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},py=Mr(),goe=[py({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),py({name:"type",header(){return d.jsx(X,{label:"Inventory type (label)"})},render({value:t}){return d.jsx(hoe,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),py({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:12}),py({name:"limit",header(){return d.jsx(X,{label:"Inventory limit (label)"})},render({value:t,data:e}){return d.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[d.jsx("div",{children:on({number:t})}),d.jsx(vf,{value:100*e.amount/e.limit})]})},size:14})],yoe=({blueprintId:t,table:e,...n})=>{const r=Dn([["Blueprint_Inventory"]]),i=Zt({async mutationFn(){return kt.transaction().execute(async s=>IM({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return d.jsx(Dr,{table:Lr({...e,columns:goe}),action:{table(){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Create inventory item (menu)"}),textTitle:d.jsx(X,{label:"Create inventory item (modal)"}),icon:Ba,children:d.jsx(x3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:Tn(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:Tn(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),ei("Create inventory item"))},async onSuccess(){await r()}})})}),d.jsx(GI,{icon:Ba,onClick:()=>{i.mutate()},children:d.jsx(X,{label:"Fill inventory (label)"})})]})},row({data:s}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit inventory item (modal)"}),icon:Ba,children:d.jsx(x3,{defaultValues:s,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),ei("Update inventory item"))},async onSuccess(){await r()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:d.jsx(X,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},boe=cZ({shape:F.object({blueprintId:F.string().min(1),inventoryId:F.string().min(1)}),filter:Pi.merge(F.object({blueprintId:F.string().optional(),inventoryId:F.string().optional()}))}),Bp=Dt("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:hr(Fr(boe)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>ar({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bi.id","=",l.id)),l?.idIn&&(u=u.where("bi.id","in",l.idIn)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${f}%`),p("r.id","like",`%${f}%`),p("r.name","like",`%${f}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",f),h("t.label","like",f),h("t.group","like",f)])))]))}return u},output:F.object({id:F.string().min(1),name:F.string().min(1),type:F.enum(["storage","construction"]),resourceId:F.string().min(1),blueprintId:F.string().min(1),inventoryId:F.string().min(1),amount:F.number().nonnegative(),limit:F.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bp.useLoaderData(),{filter:n,cursor:r,selection:i}=Bp.useSearch(),{id:s}=Bp.useParams(),o=Bp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(yoe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of items"}),...qr(o)}})})}}),RM=Dt("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=li({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=RM.useNavigate(),n=Dn([["Blueprint"]]);return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(cv,{defaultValues:t,mutation:Zt({async mutationFn(r){return Rn.promise(kt.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),w3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(oc.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"dependencyId",label:d.jsx(X,{label:"Blueprint dependency (label)"}),children:d.jsx(qi,{control:s.control,name:"dependencyId",render:({field:{ref:l,...u}})=>d.jsx(Om,{textTitle:d.jsx(X,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},voe=Mr(),xoe=[voe({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],woe=({blueprintId:t,table:e,...n})=>{const r=Dn([["Blueprint_Dependency"],["Blueprint"]]);return d.jsx(Dr,{table:Lr({...e,columns:xoe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint dependency (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint dependency (modal)"}),icon:Pn,children:({close:i})=>d.jsx(w3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Dependency").values({id:Tn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Zh({tx:o}),l}),ei("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint dependency (modal)"}),icon:Pn,children:({close:s})=>d.jsx(w3,{defaultValues:i,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},zp=Dt("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:hr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1),dependencyId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zp.useLoaderData(),{filter:n,cursor:r,selection:i}=zp.useSearch(),{id:s}=zp.useParams(),o=zp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(woe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of requirements (label)"}),...qr(o)}})})}}),_oe=aZ({shape:F.object({conflictId:F.string().min(1)}),filter:Pi}),_3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(_oe.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"conflictId",label:d.jsx(X,{label:"Blueprint conflict (label)"}),hint:d.jsx(X,{label:"Blueprint conflict (hint)"}),children:d.jsx(qi,{control:s.control,name:"conflictId",render:({field:{ref:l,...u}})=>d.jsx(Om,{textTitle:d.jsx(X,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Soe=Mr(),Eoe=[Soe({name:"name",header(){return d.jsx(X,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Ioe=({blueprintId:t,table:e,...n})=>{const r=Dn([["Blueprint_Conflict"],["Blueprint"]]);return d.jsx(Dr,{table:Lr({...e,columns:Eoe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint conflict (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint conflict (modal)"}),icon:Pn,children:({close:i})=>d.jsx(_3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Conflict").values({id:Tn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Zh({tx:o}),l}),ei("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint conflict (modal)"}),icon:Pn,children:({close:s})=>d.jsx(_3,{defaultValues:i,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},Wp=Dt("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:hr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1),conflictId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Wp.useLoaderData(),{filter:n,cursor:r,selection:i}=Wp.useSearch(),{id:s}=Wp.useParams(),o=Wp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Ioe,{blueprintId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of conflicts (label)"}),...qr(o)}})})}}),Noe=Dt("/$locale/apps/derivean/map/$mapId/route/$routeId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,routeId:r}}){return{route:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.id","=",r),output:F.object({id:F.string().min(1),fromId:F.string().min(1),toId:F.string().min(1),fromName:F.string().min(1),toName:F.string().min(1)})}))}})}}}),koe=({land:t})=>{const{mapId:e,locale:n}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:{locale:n,mapId:e},search:{zoomToId:t.id},children:t.name}),d.jsxs("div",{className:"flex flex-col items-end text-xs",children:[d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{className:"font-bold",children:on({number:t.x})}),d.jsx("div",{children:":"}),d.jsx("div",{className:"font-bold",children:on({number:t.y})})]}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{className:"font-bold",children:on({number:t.width})}),d.jsx("div",{children:"x"}),d.jsx("div",{className:"font-bold",children:on({number:t.height})})]})]})]})})},Coe=xn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),xs=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=Coe,css:s,children:o})=>{const{mapId:l,locale:u}=en({from:"/$locale/apps/derivean/map/$mapId"}),f=i({...r,css:s}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:f.title(),children:[d.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?d.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:u,mapId:l},children:d.jsx(dn,{iconEnabled:dN,variant:{variant:"subtle"}})})]}),d.jsx("div",{className:f.content(),children:o})]})},joe=({land:t,...e})=>d.jsx(xs,{icon:HN,textTitle:d.jsx(X,{label:"Land list (label)"}),...e,children:t.map(n=>d.jsx(koe,{land:n},n.id))}),OM=Dt("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land","list"],async queryFn(){return e.transaction().execute(async r=>Cr({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.x","l.y","l.width","l.height"]).where("l.mapId","=",n).orderBy("r.name").orderBy("l.width","desc").orderBy("l.height","desc"),output:F.object({id:F.string().min(1),name:F.string().min(1),mapId:F.string().min(1),x:F.number(),y:F.number(),width:F.number(),height:F.number()})}))}})}},component(){const{land:t}=OM.useLoaderData();return d.jsx(joe,{land:t})}}),Toe=Dt("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,landId:r}}){return{land:await t.ensureQueryData({queryKey:["GameMap",n,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:F.object({id:F.string().min(1),name:F.string().min(1),mapId:F.string().min(1)})}))}})}}}),Roe=({building:t})=>{const{mapId:e,locale:n}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(Tt,{icon:Bo,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:n,mapId:e,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),d.jsx(Tt,{icon:HN,to:"/$locale/apps/derivean/map/$mapId/building/list",params:{locale:n,mapId:e},search:{zoomToId:t.landId},children:t.land})]})})},Ooe=({building:t,...e})=>d.jsx(xs,{icon:Bo,textTitle:d.jsx(X,{label:"Building list (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(Roe,{building:n},n.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No buildings yet. (label)"})})}),qM=Dt("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building","list"],async queryFn(){return e.transaction().execute(async r=>Cr({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",n).orderBy("bl.name","asc"),output:F.object({id:F.string().min(1),name:F.string().min(1),landId:F.string().min(1),land:F.string().min(1)})}))}})}},component(){const{building:t}=qM.useLoaderData();return d.jsx(Ooe,{building:t})}}),qoe=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{building:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>$o({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","r.name as land","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:F.object({id:F.string().min(1),name:F.string().min(1),land:F.string().min(1),productionId:F.string().nullish(),recurringProductionId:F.string().nullish()})}))}})}}}),Aoe=Dt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"fetch"],async queryFn(){return e.transaction().execute(async r=>$o({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:F.object({id:F.string().min(1),name:F.string().min(1)})}))}})}}}),Poe=({entity:t,...e})=>{const{locale:n}=en({from:"/$locale"});return d.jsxs(yu,{...e,children:[d.jsx(tr,{icon:KN,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production requirements (menu)"})}),d.jsx(tr,{icon:zn,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource requirements (menu)"})}),d.jsx(tr,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(X,{label:"Production resource dependencies (menu)"})})]})},Foe=t=>{const{locale:e}=en({from:"/$locale"});return d.jsx(bf,{title:({entity:n})=>d.jsx(xf,{icon:Ms,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(X,{label:"Building base detail (label)"})})}),...t})},AM=Dt("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await $o({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:F.object({id:F.string().min(1),resource:F.string().min(1),blueprint:F.string().min(1),blueprintId:F.string().min(1),amount:F.number().nonnegative(),cycles:F.number().int().nonnegative()})})}))}})},component(){const{entity:t}=AM.useLoaderData(),{tva:e}=pr({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Foe,{entity:t}),d.jsx(Poe,{entity:t}),d.jsx(fo,{})]})}}),Doe=t=>d.jsx(_D,{items:[{id:"name",label:d.jsx(X,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:d.jsx(X,{label:"Construction cycles (label)"}),render({entity:e}){return on({number:e.cycles})}}],...t}),Loe=Dt("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=li({from:"/$locale/apps/derivean/game/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(Doe,{entity:t})})}}),FS=Mr(),Moe=[FS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),FS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),FS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],$oe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Moe}),...e}),Qy=Dt("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:hr(Fr(Sf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Qy.useLoaderData(),{filter:n,cursor:r}=Qy.useSearch(),i=Qy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx($oe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of requirements (label)"}),...qr(i)}})})}}),ad=Mr(),Boe=[ad({name:"name",header(){return d.jsx(X,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Ms,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),ad({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:8}),ad({name:"cycles",header(){return d.jsx(X,{label:"Production cycles (label)"})},render({value:t}){return on({number:t})},size:8}),ad({name:"requirements",header(){return d.jsx(X,{label:"Required resources (label)"})},render({value:t}){return d.jsx(dx,{textTitle:d.jsx(X,{label:"Resource requirements (title)"}),textEmpty:d.jsx(X,{label:"No requirements (label)"}),requirements:t})},size:32}),ad({name:"resources",header(){return d.jsx(X,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(tc,{items:t,render:({entity:e})=>d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",on({number:e.amount})]})]})})},size:32}),ad({name:"dependencies",header(){return d.jsx(X,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=en({from:"/$locale"});return d.jsx(tc,{items:t,render:({entity:n})=>d.jsx("div",{className:sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:d.jsx(Tt,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],zoe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Boe}),...e}),Gy=Dt("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:hr(Fr(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>jr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),cycles:F.number().nonnegative(),requirements:gi(Am.entity.merge(F.object({name:F.string().min(1)}))),resources:gi(Pm.entity.merge(F.object({name:F.string().min(1)}))),dependencies:gi(qm.entity.merge(F.object({name:F.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Gy.useLoaderData(),{filter:n,cursor:r}=Gy.useSearch(),i=Gy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(zoe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of productions (label)"}),...qr(i)}})})}}),Woe=Mr(),Voe=[Woe({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Uoe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Voe}),...e}),Jy=Dt("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:hr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1),dependencyId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Jy.useLoaderData(),{filter:n,cursor:r}=Jy.useSearch(),i=Jy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Uoe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of dependencies (label)"}),...qr(i)}})})}}),Hoe=Mr(),Koe=[Hoe({name:"name",header(){return d.jsx(X,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Qoe=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Koe}),...e}),Zy=Dt("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:hr(Fr(oc)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1),conflictId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Zy.useLoaderData(),{filter:n,cursor:r}=Zy.useSearch(),i=Zy.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Qoe,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of conflicts (label)"}),...qr(i)}})})}}),PM=mZ({shape:F.object({blueprintId:F.string().min(1),constructionId:F.string().optional(),productionId:F.string().optional(),recurringProductionId:F.string().optional(),x:Ds(),y:Ds()}),filter:Pi.merge(F.object({userId:F.string().optional(),blueprintId:F.string().optional(),name:F.string().optional()}))}),Goe=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(PM.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"blueprintId",label:d.jsx(X,{label:"Select blueprint (label)"}),children:d.jsx(qi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Om,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Bo,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},Joe=Mr(),Zoe=[Joe({name:"name",header(){return d.jsx(X,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],Yoe=({table:t,...e})=>{const n=Dn([["Building"]]);return d.jsx(Dr,{table:Lr({...t,columns:Zoe}),action:{row({data:r}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit building (modal)"}),icon:Bo,children:d.jsx(Goe,{defaultValues:r,mutation:Zt({async mutationFn(i){return Rn.promise(kt.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),ei("Edit building"))},async onSuccess(){await n()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:d.jsx(X,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:n})})]})}},...e})},Yy=Dt("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:hr(Fr(PM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>ar({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Yy.useLoaderData(),{filter:n,cursor:r,selection:i}=Yy.useSearch(),s=Yy.useNavigate(),{tva:o}=pr({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Yoe,{table:{data:t,filter:{value:n,set:Ar(s)},selection:{type:"multi",value:i,set:bs(s)}},fulltext:{value:n?.fulltext,set:Pr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of buildings (label)"}),...qr(s)}})})}}),S3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(Pm.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Requirement (label)"}),children:d.jsx(qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{allowEmpty:!0,...u})})}),d.jsx(pn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},E3=Mr(),Xoe=[E3({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),E3({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10})],eae=({blueprintProductionId:t,table:e,...n})=>{const r=Dn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:Xoe}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create production resource requirement (menu)"}),textTitle:d.jsx(X,{label:"Create production resource requirement (modal)"}),icon:zn,children:({close:i})=>d.jsx(S3,{mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Tn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit production resource requirement (modal)"}),icon:zn,children:({close:s})=>d.jsx(S3,{defaultValues:i,mutation:Zt({async mutationFn(o){return kt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},Vp=Dt("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:hr(Fr(Pm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Vp.useLoaderData(),{filter:n,cursor:r,selection:i}=Vp.useSearch(),{id:s}=Vp.useParams(),o=Vp.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(eae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production resource requirements (label)"}),...qr(o)}})})}}),I3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(Am.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"resourceId",label:d.jsx(X,{label:"Requirement (label)"}),children:d.jsx(qi,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(Rm,{allowEmpty:!0,...u})})}),d.jsx(pn,{formState:s.formState,name:"amount",label:d.jsx(X,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(pn,{formState:s.formState,name:"passive",label:d.jsx(X,{label:"Passive requirement (label)"}),hint:d.jsx(X,{label:"Passive requirement (hint)"}),children:d.jsx(qi,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(wD,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:zn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},DS=Mr(),tae=[DS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),DS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),DS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],nae=({blueprintProductionId:t,table:e,...n})=>{const r=Dn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return d.jsx(Dr,{table:Lr({...e,columns:tae}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create production requirement (menu)"}),textTitle:d.jsx(X,{label:"Create production requirement (modal)"}),icon:zn,children:({close:i})=>d.jsx(I3,{mutation:Zt({async mutationFn(s){return kt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Tn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit production requirement (modal)"}),icon:zn,children:({close:s})=>d.jsx(I3,{defaultValues:i,mutation:Zt({async mutationFn(o){return kt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},Up=Dt("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:hr(Fr(Am)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Up.useLoaderData(),{filter:n,cursor:r,selection:i}=Up.useSearch(),{id:s}=Up.useParams(),o=Up.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(nae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production requirements (label)"}),...qr(o)}})})}}),N3=({mutation:t,defaultValues:e,variant:n,tva:r=vi,css:i})=>{const s=xi({resolver:wi(qm.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:Ji({form:s,mutation:t}),children:[d.jsx(ci,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(pn,{formState:s.formState,name:"blueprintId",label:d.jsx(X,{label:"Blueprint dependency (label)"}),children:d.jsx(qi,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Om,{textTitle:d.jsx(X,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(dn,{iconEnabled:Pn,type:"submit",children:d.jsx(X,{label:"Save (submit)"})})})]})},rae=Mr(),iae=[rae({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],sae=({blueprintProductionId:t,table:e,...n})=>{const r=Dn([["Blueprint_Production_Dependency"],["Blueprint"]]);return d.jsx(Dr,{table:Lr({...e,columns:iae}),action:{table(){return d.jsx(or,{children:d.jsx(kn,{label:d.jsx(X,{label:"Create blueprint production dependency (menu)"}),textTitle:d.jsx(X,{label:"Create blueprint production dependency (modal)"}),icon:Pn,children:({close:i})=>d.jsx(N3,{mutation:Zt({async mutationFn(s){return Rn.promise(kt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Production_Dependency").values({id:Tn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await Zh({tx:o}),l}),ei("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(or,{children:[d.jsx(kn,{label:d.jsx(X,{label:"Edit (menu)"}),textTitle:d.jsx(X,{label:"Edit blueprint production dependency (modal)"}),icon:Pn,children:({close:s})=>d.jsx(N3,{defaultValues:i,mutation:Zt({async mutationFn(o){return Rn.promise(kt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),ei("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(kn,{icon:ti,label:d.jsx(X,{label:"Delete (menu)"}),textTitle:d.jsx(X,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(vs,{callback:async()=>kt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(X,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},Hp=Dt("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:hr(Fr(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Hp.useLoaderData(),{filter:n,cursor:r,selection:i}=Hp.useSearch(),{id:s}=Hp.useParams(),o=Hp.useNavigate(),{tva:l}=pr({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(sae,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:Ar(o)},selection:{type:"multi",value:i,set:bs(o)}},fulltext:{value:n?.fulltext,set:Pr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of dependencies (label)"}),...qr(o)}})})}}),oae=({routeId:t,inventory:e})=>{const n=Dn([["GameMap"]]),r=Zt({async mutationFn({routeId:i,resourceId:s,transport:o,type:l}){return kt.transaction().execute(async u=>u.insertInto("Route_Resource").values({id:Tn(),resourceId:s,routeId:i,amount:o,type:l,priority:0}).execute())},async onSuccess(){await n()}});return d.jsxs("div",{className:sn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsx("div",{children:d.jsx(dn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,type:"storage",routeId:t})}})})]})},aae=({resource:t})=>{const e=Dn([["GameMap"]]),n=Zt({async mutationFn({routeResourceId:r}){return kt.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:sn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs(yi,{children:["x",on({number:t.amount})]})]}),d.jsx("div",{children:d.jsx(dn,{variant:{variant:"secondary"},iconEnabled:ti,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},lae=({route:t,resource:e,inventory:n,...r})=>{const{mapId:i,locale:s}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(xs,{icon:zn,textTitle:d.jsx(X,{label:"Route resources (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:s,mapId:i,buildingId:t.fromId}}),d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:"font-light",children:t.fromName}),d.jsx(Yt,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{children:t.toName})]})]}),...r,children:[d.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(X,{label:"Transported resources (label)"})}),e.map(o=>d.jsx(aae,{resource:o},o.id))]}):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No route resources yet (label)"})})}),d.jsx("div",{className:"border-b border-slate-300 shadow-md"}),d.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(X,{label:"Available resources (label)"})}),n.map(o=>d.jsx(oae,{inventory:o,routeId:t.id},o.id))]}):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no available items for transport (label)"})})})]})},FM=Dt("/$locale/apps/derivean/map/$mapId/route/$routeId/resources")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,routeId:r}}){return{resource:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"resources","list"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId","rr.type"]).where("rr.routeId","=",r).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),routeId:F.string().min(1),resourceId:F.string().min(1),name:F.string().min(1),amount:F.number().nonnegative(),type:F.enum(["storage","construction","input","output"])})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport","i.type"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("bi.inventoryId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",r)).where("i.type","in",["storage"])).where("r.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",r)).where("i.type","in",["storage"])).where("r.id","not in",i.selectFrom("Route_Resource as rr").where("rr.routeId","=",r).select("rr.resourceId")).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),resourceId:F.string().min(1),name:F.string().min(1),transport:Ds(),type:F.string().min(1)})}))}})}},component(){const{route:t}=li({from:"/$locale/apps/derivean/map/$mapId/route/$routeId"}),{resource:e,inventory:n}=FM.useLoaderData();return d.jsx(lae,{route:t,resource:e,inventory:n})}}),cae=({routeId:t,inventory:e})=>{const n=Dn([["GameMap"]]),r=Zt({async mutationFn({routeId:i,resourceId:s,transport:o}){return kt.transaction().execute(async l=>l.insertInto("Route_Resource").values({id:Tn(),resourceId:s,routeId:i,amount:o,type:"construction",priority:0}).execute())},async onSuccess(){await n()}});return d.jsxs("div",{className:sn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsx("div",{children:d.jsx(dn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,routeId:t})}})})]})},uae=({resource:t})=>{const e=Dn([["GameMap"]]),n=Zt({async mutationFn({routeResourceId:r}){return kt.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:sn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs(yi,{children:["x",on({number:t.amount})]})]}),d.jsx("div",{children:d.jsx(dn,{variant:{variant:"secondary"},iconEnabled:ti,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},dae=({route:t,resource:e,inventory:n,...r})=>{const{mapId:i,locale:s}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(xs,{icon:fu,textTitle:d.jsx(X,{label:"Construction resources (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:s,mapId:i,buildingId:t.fromId}}),d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:"font-light",children:t.fromName}),d.jsx(Yt,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{children:t.toName})]})]}),...r,children:[d.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(X,{label:"Transported resources (label)"})}),e.map(o=>d.jsx(uae,{resource:o},o.id))]}):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No route resources yet (label)"})})}),d.jsx("div",{className:"border-b border-slate-300 shadow-md"}),d.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(X,{label:"Available resources (label)"})}),n.map(o=>d.jsx(cae,{inventory:o,routeId:t.id},o.id))]}):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no available items for transport (label)"})})})]})},DM=Dt("/$locale/apps/derivean/map/$mapId/route/$routeId/construction")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,routeId:r}}){return{resource:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"construction"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId","rr.type"]).where("rr.routeId","=",r),output:F.object({id:F.string().min(1),routeId:F.string().min(1),resourceId:F.string().min(1),name:F.string().min(1),amount:F.number().nonnegative(),type:F.enum(["storage","construction","input","output"])})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"route",r,"construction","inventory"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("bi.inventoryId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",r)).where("i.type","=","construction")).where("r.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",r)).where("i.type","=","storage")).where("r.id","in",i.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",i.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",r)).where("i.type","=","construction")).where("r.id","not in",i.selectFrom("Route_Resource as rr").where("rr.routeId","=",r).select("rr.resourceId")).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),resourceId:F.string().min(1),name:F.string().min(1),transport:Ds()})}))}})}},component(){const{route:t}=li({from:"/$locale/apps/derivean/map/$mapId/route/$routeId"}),{resource:e,inventory:n}=DM.useLoaderData();return d.jsx(dae,{route:t,resource:e,inventory:n})}}),fae=xn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),pae=async({userId:t,blueprintId:e,landId:n,x:r,y:i,plan:s,valid:o})=>kt.transaction().execute(async l=>{const u=await l.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),f=await l.insertInto("Building").values({id:Tn(),userId:t,blueprintId:e,landId:n,constructionId:(await l.insertInto("Construction").values({id:Tn(),userId:t,cycle:0,cycles:u.cycles,plan:s}).returning("id").executeTakeFirstOrThrow()).id,x:r,y:i,valid:o}).returningAll().executeTakeFirstOrThrow(),p=await l.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",l.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:h,limit:b,resourceId:x,type:_}of p)await l.insertInto("Building_Inventory").values({id:Tn(),buildingId:f.id,inventoryId:(await l.insertInto("Inventory").values({id:Tn(),amount:h,limit:b,resourceId:x,type:_}).returning("id").executeTakeFirstOrThrow()).id}).execute();return f}),GN=({cycles:t})=>d.jsxs("div",{className:sn(["flex","flex-row","items-center","gap-2"]),children:[d.jsx(Yt,{css:{base:["text-slate-400"]},icon:Jh}),d.jsx("div",{className:"font-bold text-md",children:on({number:t})})]}),hae=({blueprint:t,land:e,userId:n,variant:r,tva:i=fae,css:s})=>{const{mapId:o,locale:l}=en({from:"/$locale/apps/derivean/map/$mapId"}),u=nc(),f=Dn([["GameMap"]]),p=Zt({async mutationFn({blueprintId:b,landId:x}){const _=await pae({userId:n,blueprintId:b,landId:x,x:0,y:0,plan:!0,valid:!1});u({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:l,mapId:o,landId:e.id},search:{zoomToId:_.id}})},async onSuccess(){await f()},onError(b){console.error(b)}}),h=i({...r,css:s}).slots;return d.jsx("div",{className:h.base(),children:d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsxs(yi,{children:["x",t.count]}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:{locale:l,mapId:o,blueprintId:t.id},css:{base:["font-bold"]},children:t.name})]}),d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(GN,{cycles:t.cycles}),d.jsx(dn,{iconEnabled:fu,iconDisabled:fu,loading:p.isPending,onClick:()=>{p.mutate({blueprintId:t.id,landId:e.id})}})]})]})})},mae=({userId:t,land:e,blueprints:n,...r})=>d.jsx(xs,{icon:fu,textTitle:d.jsx(X,{label:"Construction (label)"}),textSubTitle:e.name,...r,children:n.length>0?n.map(i=>d.jsx(hae,{blueprint:i,userId:t,land:e},i.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no available blueprints (label)"})})}),LM=Dt("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,landId:i}}){const s=await n();return{user:s,blueprints:await t.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>Cr({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",l=>l.selectFrom("Building as bg").select(u=>u.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),l=>l.case().when(l.not(l.exists(l.selectFrom("Blueprint_Dependency as bd").select(l.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(u.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(l.lit(!0)).else(l.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:F.object({id:F.string().min(1),name:F.string().min(1),count:F.number().int().nonnegative(),cycles:F.number().int().nonnegative(),sort:F.number().int().nonnegative(),withAvailableBuildings:Qi()})}))}})}},component(){const{user:t,blueprints:e}=LM.useLoaderData(),{land:n}=li({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return d.jsx(mae,{userId:t.id,land:n,blueprints:e})}}),lI="icon-[heroicons--queue-list]",Cp=["p-4","border","border-slate-300","w-full","justify-start"],gae=({building:t})=>{const{mapId:e,locale:n}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsxs(xs,{icon:Bo,textTitle:t.name,textSubTitle:t.land,children:[d.jsx(Tt,{icon:Ms,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Cp},children:d.jsx(X,{label:"Building production (label)"})}),d.jsx(Tt,{icon:lI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Cp},children:d.jsx(X,{label:"Production queue (label)"})}),d.jsx(Tt,{icon:Ba,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Cp},children:d.jsx(X,{label:"Building inventory (label)"})}),d.jsx(Tt,{icon:ux,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Cp},children:d.jsx(X,{label:"Building routes (label)"})}),d.jsx(Tt,{icon:"icon-[ph--queue-thin]",to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/route/priority",params:{locale:n,mapId:e,buildingId:t.id},css:{base:Cp},children:d.jsx(X,{label:"Route priority (label)"})})]})},yae=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"});return d.jsx(gae,{building:t})}}),bae=({route:t})=>{const{mapId:e,locale:n}=en({from:"/$locale/apps/derivean/map/$mapId"}),r=Dn([["GameMap"]]),i=Zt({async mutationFn({routeId:s}){return kt.transaction().execute(async o=>o.deleteFrom("Route").where("id","=",s).execute())},async onSuccess(){await r()}});return d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.count>0?void 0:["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]]),children:[t.toConstructionId?d.jsx(Tt,{icon:fu,to:"/$locale/apps/derivean/map/$mapId/route/$routeId/construction",params:{locale:n,mapId:e,routeId:t.id},children:t.toName}):d.jsx(Tt,{icon:zn,to:"/$locale/apps/derivean/map/$mapId/route/$routeId/resources",params:{locale:n,mapId:e,routeId:t.id},children:t.toName}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Tt,{icon:"icon-[cil--arrow-right]",to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:n,mapId:e,buildingId:t.fromId},search:{zoomToId:t.toId},children:d.jsx(yi,{children:on({number:t.count})})}),d.jsx(dn,{iconEnabled:ti,variant:{variant:"secondary"},loading:i.isPending,onClick:()=>{i.mutate({routeId:t.id})}})]})]})},vae=({building:t,route:e,...n})=>{const{mapId:r,locale:i}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(xs,{icon:ux,textTitle:d.jsx(X,{label:"Routes (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/routes",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(bae,{route:s},s.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No outcomming routes yet (label)"})})})},MM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/routes")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{route:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"routes","list"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blt.name as toName","bt.constructionId as toConstructionId",s=>s.selectFrom("Route_Resource as rr").select(o=>o.fn.count("rr.id").as("count")).whereRef("rr.routeId","=","r.id").as("count")]).where("r.fromId","=",r),output:F.object({id:F.string().min(1),fromId:F.string().min(1),toId:F.string().min(1),toName:F.string().min(1),toConstructionId:F.string().nullish(),count:F.number().nonnegative()})}))}})}},component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{route:e}=MM.useLoaderData();return d.jsx(vae,{building:t,route:e})}}),xae=({inventory:t})=>d.jsxs("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.limit>0&&t.amount>=t.limit?["border-red-400","bg-red-50","hover:bg-red-50","hover:border-red-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx("div",{className:"font-bold",children:t.name}),on({number:t.amount})," /"," ",on({number:t.limit})]}),t.limit>0?d.jsx(vf,{variant:{size:"md"},value:100*t.amount/t.limit,css:{progress:t.amount>=t.limit?["bg-red-500"]:void 0}}):null]}),wae=({inventory:t,fulltextProps:e,...n})=>d.jsxs(xs,{icon:Ba,textTitle:d.jsx(X,{label:"Inventory (label)"}),...n,children:[d.jsx(kD,{...e}),d.jsx("div",{children:d.jsx(X,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),t.length>0?t.map(r=>d.jsx(xae,{inventory:r},r.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"No inventory storage. (label)"})})]}),Kp=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:hr(F.object({fulltext:F.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{mapId:r,buildingId:i}}){return{inventory:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"inventory","storage",{fulltext:n}],async queryFn(){return e.transaction().execute(async s=>Cr({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).where("i.type","in",["storage"]).orderBy("r.name"),query({select:o,where:l}){let u=o;if(l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("r.name","like",f)]))}return u},output:F.object({id:F.string().min(1),amount:F.number().nonnegative(),limit:F.number().nonnegative(),name:F.string().min(1)}),filter:{fulltext:n}}))}})}},component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=Kp.useSearch(),{mapId:n,locale:r}=Kp.useParams(),i=Kp.useNavigate(),{inventory:s}=Kp.useLoaderData();return d.jsx(wae,{inventory:s,textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:r,mapId:n,buildingId:t.id}}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:{locale:r,mapId:n,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(o){i({search:{fulltext:o}})}}})}}),$M=({requirement:t})=>{const e=(t.available||0)>=t.amount;return d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[d.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?d.jsxs(yi,{children:["x",on({number:t.amount})]}):d.jsxs(yi,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[d.jsx("div",{className:"font-bold",children:on({number:t.available})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-light",children:on({number:t.amount})})]})]})},_ae=({blueprint:t,requirement:e,...n})=>d.jsx(xs,{icon:zn,textTitle:d.jsx(X,{label:"Building requirements (label)"}),textSubTitle:t.name,...n,children:e.length>0?e.map(r=>d.jsx($M,{requirement:r},r.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(X,{label:"There are no requirements. (label)"})})}),BM=Dt("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{blueprintId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","blueprint",n,"requirements"],async queryFn(){return e.transaction().execute(async r=>Cr({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:F.object({id:F.string().min(1),name:F.string().min(1),amount:F.number().nonnegative(),passive:Qi()})}))}})}},component(){const{blueprint:t}=li({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=BM.useLoaderData();return d.jsx(_ae,{blueprint:t,requirement:e})}}),k3=Mr(),Sae=[k3({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),k3({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10})],Eae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Sae}),...e}),Xy=Dt("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:hr(Fr(Pm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Xy.useLoaderData(),{filter:n,cursor:r}=Xy.useSearch(),i=Xy.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(Eae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production resource requirements (label)"}),...qr(i)}})})}}),LS=Mr(),Iae=[LS({name:"name",header(){return d.jsx(X,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),LS({name:"amount",header(){return d.jsx(X,{label:"Amount (label)"})},render({value:t}){return on({number:t})},size:10}),LS({name:"passive",header(){return d.jsx(X,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Uv,{value:t})},size:10})],Nae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Iae}),...e}),eb=Dt("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:hr(Fr(Am)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),passive:Qi()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=eb.useLoaderData(),{filter:n,cursor:r}=eb.useSearch(),i=eb.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(Nae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of production requirements (label)"}),...qr(i)}})})}}),kae=Mr(),Cae=[kae({name:"name",header(){return d.jsx(X,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=en({from:"/$locale"});return d.jsx(Tt,{icon:Pn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],jae=({table:t,...e})=>d.jsx(Dr,{table:Lr({...t,columns:Cae}),...e}),tb=Dt("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:hr(Fr(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>ar({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:F.object({id:F.string().min(1),name:F.string().min(1),blueprintId:F.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=tb.useLoaderData(),{filter:n,cursor:r}=tb.useSearch(),i=tb.useNavigate(),{tva:s}=pr({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(jae,{table:{data:t,filter:{value:n,set:Ar(i)}},fulltext:{value:n?.fulltext,set:Pr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(X,{label:"Number of dependencies (label)"}),...qr(i)}})})}}),Tae=({priority:t})=>{const e=Dn([["GameMap"]]),n=Zt({async mutationFn({routeResourceId:r,priority:i}){return kt.transaction().execute(async s=>s.updateTable("Route_Resource").set({priority:Math.max(0,i)}).where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:sn(["flex","flex-row","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",n.isPending?["pointer-events-none","opacity-50"]:void 0]),children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Yt,{icon:zn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold text-sm",children:t.name}),d.jsx(Yt,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{className:"text-xs",children:t.toName})]}),d.jsx("div",{className:"flex flex-row gap-2 items-center text-slate-500",children:d.jsxs(yi,{children:["x",on({number:t.amount})]})})]}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(yi,{children:on({number:t.priority})}),d.jsx(dn,{variant:{variant:"secondary"},iconEnabled:"icon-[typcn--minus-outline]",onClick:()=>{n.mutate({routeResourceId:t.id,priority:t.priority-1})}}),d.jsx(dn,{variant:{variant:"secondary"},iconEnabled:"icon-[mingcute--plus-line]",onClick:()=>{n.mutate({routeResourceId:t.id,priority:t.priority+1})}})]})]})},Rae=({building:t,priority:e,...n})=>{const{mapId:r,locale:i}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(xs,{icon:"icon-[ph--queue-thin]",textTitle:d.jsx(X,{label:"Route priority (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/route/priority",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(Tae,{priority:s},s.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"There are no resources on the road. (label)"})})})},zM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/route/priority")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{priority:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"route","priority","list"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Route_Resource as rr").innerJoin("Route as r","r.id","rr.routeId").innerJoin("Resource as re","re.id","rr.resourceId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["rr.id","rr.amount","re.name","rr.priority","blt.name as toName"]).where("r.fromId","=",r).orderBy("rr.priority","desc"),output:F.object({id:F.string().min(1),name:F.string().min(1),toName:F.string().min(1),amount:F.number().nonnegative(),priority:F.number().int().nonnegative()})}))}})}},component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{priority:e}=zM.useLoaderData();return d.jsx(Rae,{building:t,priority:e})}}),Oae=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return d.jsxs("div",{className:sn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsxs(yi,{children:["x",on({number:t.amount})]})}),d.jsx(GN,{cycles:t.cycles})]}),d.jsx(vf,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},qae=({building:t,queue:e,inventory:n,...r})=>{const{mapId:i,locale:s}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(xs,{icon:lI,textTitle:d.jsx(X,{label:"Production queue (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id}}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(o=>d.jsx(Oae,{queue:o,inventory:n},o.id)):d.jsxs("div",{className:sn(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[d.jsx(X,{label:"Production queue is empty. (label)"}),d.jsx(Tt,{icon:lI,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},children:d.jsx(X,{label:"Plan queue (label)"})})]})})},WM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{queue:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:F.object({id:F.string().min(1),name:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),cycle:F.number().int().nonnegative(),cycles:F.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.name","like",u)]))}return l},output:F.object({id:F.string().min(1),resourceId:F.string().min(1),amount:F.number().nonnegative(),limit:F.number().nonnegative(),name:F.string().min(1)})}))}})}},component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:n}=WM.useLoaderData();return d.jsx(qae,{building:t,queue:e,inventory:n})}}),Aae=({building:t,production:e})=>{const{mapId:n,locale:r}=en({from:"/$locale/apps/derivean/map/$mapId"}),i=Dn([["GameMap"]]),s=Zt({async mutationFn({blueprintProductionId:f,buildingId:p}){return kt.transaction().execute(async h=>h.updateTable("Building").set({productionId:f}).where("id","=",p).execute())},async onSuccess(){await i()}}),o=Zt({async mutationFn({buildingId:f}){return kt.transaction().execute(async p=>p.updateTable("Building").set({productionId:null}).where("id","=",f).execute())},async onSuccess(){await i()}}),l=Zt({async mutationFn({blueprintProductionId:f,buildingId:p}){return kt.transaction().execute(async h=>h.updateTable("Building").set({recurringProductionId:f}).where("id","=",p).execute())},async onSuccess(){await i()}}),u=Zt({async mutationFn({buildingId:f}){return kt.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:null}).where("id","=",f).execute())},async onSuccess(){await i()}});return d.jsxs("div",{className:sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",e.withAvailableResources?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?d.jsx(dn,{iconEnabled:oI,loading:o.isPending,onClick:()=>{o.mutate({buildingId:t.id})}}):d.jsx(dn,{iconEnabled:"icon-[solar--play-outline]",loading:s.isPending,onClick:()=>{s.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?d.jsx(dn,{iconEnabled:oI,loading:u.isPending,onClick:()=>{u.mutate({buildingId:t.id})}}):d.jsx(dn,{iconEnabled:gM,loading:l.isPending,onClick:()=>{l.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),d.jsxs(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:{locale:r,mapId:n,buildingId:t.id,productionId:e.id},children:[e.name,d.jsxs(yi,{children:["x",on({number:e.amount})]})]})]}),d.jsx(GN,{cycles:e.cycles})]})},Pae=({building:t,production:e,...n})=>{const{mapId:r,locale:i}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(xs,{icon:Ms,textTitle:d.jsx(X,{label:"Building production (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:i,mapId:r,buildingId:t.id}}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:i,mapId:r,buildingId:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(s=>d.jsx(Aae,{building:t,production:s},s.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(X,{label:"This building does not produce anything. (label)"})})})},VM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{mapId:r,buildingId:i}}){const s=await n();return{production:await t.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>Cr({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",l=>l.case().when(l.not(l.exists(l.selectFrom("Blueprint_Production_Requirement as bpr").select(l.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select(u.lit(1).as("one")).where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(l.lit(!0)).else(l.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(l=>l.not(l.exists(l.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(l=>l.not(l.exists(l.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(u=>u.not(u.exists(u.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",u.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))),output:F.object({id:F.string().min(1),name:F.string().min(1),amount:F.number().nonnegative(),cycles:F.number().int().nonnegative(),withAvailableResources:Qi()})}))}})}},component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=VM.useLoaderData();return d.jsx(Pae,{building:t,production:e})}}),Fae=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{production:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>$o({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:F.object({id:F.string().min(1),amount:F.number().nonnegative(),name:F.string().min(1)})}))}})}}}),Dae=({requirement:t})=>{const e=t.available||0;return d.jsxs("div",{className:sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.amount>e?["border-red-400","bg-red-50","hover:border-red-600","hover:bg-red-50"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{children:on({number:e})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-bold",children:on({number:t.amount})})]})]}),d.jsx(vf,{value:100*e/t.amount})]})},Lae=({requirement:t,...e})=>d.jsx(xs,{icon:KN,textTitle:d.jsx(X,{label:"Construction requirements (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(Dae,{requirement:n},n.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(X,{label:"There are no construction requirements (label)"})})}),UM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/construction/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"construction","requirement"],async queryFn(){return e.transaction().execute(async i=>Cr({select:i.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",s=>s.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",r)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),name:F.string().min(1),amount:F.number().nonnegative(),available:F.number().nonnegative().nullish(),passive:Qi()})}))}})}},component(){const{requirement:t}=UM.useLoaderData();return d.jsx(Lae,{requirement:t})}}),Mae=({building:t,production:e,requirement:n,...r})=>{const{mapId:i,locale:s}=en({from:"/$locale/apps/derivean/map/$mapId"});return d.jsx(xs,{icon:zn,textTitle:d.jsx(X,{label:"Production requirements (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Tt,{icon:gs,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id}}),d.jsx(Tt,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:s,mapId:i,buildingId:t.id},search:{zoomToId:t.id},children:t.name}),d.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(o=>d.jsx($M,{requirement:o},o.id)):d.jsx("div",{className:sn(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(X,{label:"There are no requirements. (label)"})})})},HM=Dt("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{mapId:n,buildingId:r,productionId:i}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap",n,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>Cr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:F.object({id:F.string().min(1),name:F.string().min(1),amount:F.number().nonnegative(),available:F.number().nonnegative().nullish(),passive:Qi()})}))}})}},component(){const{building:t}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=li({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:n}=HM.useLoaderData();return d.jsx(Mae,{building:t,production:e,requirement:n})}}),JN=SJ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>vN}),$ae=NJ.update({id:"/",path:"/",getParentRoute:()=>vN}),Bae=kJ.update({id:"/",path:"/",getParentRoute:()=>JN}),ac=jJ.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>JN}),Bs=OJ.update({id:"/root",path:"/root",getParentRoute:()=>ac}),KM=qJ.update({id:"/map",path:"/map",getParentRoute:()=>ac}),Fm=AJ.update({id:"/game",path:"/game",getParentRoute:()=>ac}),zae=MJ.update({id:"/",path:"/",getParentRoute:()=>Bs}),Wae=y2.update({id:"/",path:"/",getParentRoute:()=>Fm}),Vae=sI.update({id:"/editor",path:"/editor",getParentRoute:()=>Bs}),Uae=cse.update({id:"/public/register",path:"/public/register",getParentRoute:()=>ac}),Hae=use.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>ac}),Kae=hse.update({id:"/public/login",path:"/public/login",getParentRoute:()=>ac}),lc=aI.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>KM}),Qae=yM.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>ac}),Gae=zy.update({id:"/user/list",path:"/user/list",getParentRoute:()=>Bs}),ZN=bM.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>Bs}),Jae=Wy.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>Bs}),Zae=Vy.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>Bs}),QM=_M.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>Bs}),Yae=Uy.update({id:"/region/list",path:"/region/list",getParentRoute:()=>Bs}),Xae=Hy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Bs}),cc=kM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Bs}),ele=Jse.update({id:"/view",path:"/view",getParentRoute:()=>lc}),tle=Ky.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Fm}),Ef=CM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Fm}),nle=toe.update({id:"/view",path:"/view",getParentRoute:()=>ZN}),rle=noe.update({id:"/view",path:"/view",getParentRoute:()=>QM}),ile=roe.update({id:"/region/$id/view",path:"/region/$id/view",getParentRoute:()=>Bs}),fx=jM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Bs}),sle=TM.update({id:"/view",path:"/view",getParentRoute:()=>cc}),ole=Mp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>cc}),ale=$p.update({id:"/production",path:"/production",getParentRoute:()=>cc}),lle=Bp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>cc}),cle=RM.update({id:"/edit",path:"/edit",getParentRoute:()=>cc}),ule=zp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>cc}),dle=Wp.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>cc}),YN=Noe.update({id:"/route/$routeId",path:"/route/$routeId",getParentRoute:()=>lc}),fle=OM.update({id:"/land/list",path:"/land/list",getParentRoute:()=>lc}),GM=Toe.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>lc}),ple=qM.update({id:"/building/list",path:"/building/list",getParentRoute:()=>lc}),Za=qoe.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>lc}),JM=Aoe.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>lc}),px=AM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Fm}),hle=Loe.update({id:"/view",path:"/view",getParentRoute:()=>Ef}),mle=Qy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Ef}),gle=Gy.update({id:"/production",path:"/production",getParentRoute:()=>Ef}),yle=Jy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Ef}),ble=Zy.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>Ef}),vle=Yy.update({id:"/building/list",path:"/building/list",getParentRoute:()=>ZN}),xle=Vp.update({id:"/resources",path:"/resources",getParentRoute:()=>fx}),wle=Up.update({id:"/requirements",path:"/requirements",getParentRoute:()=>fx}),_le=Hp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>fx}),Sle=FM.update({id:"/resources",path:"/resources",getParentRoute:()=>YN}),Ele=DM.update({id:"/construction",path:"/construction",getParentRoute:()=>YN}),Ile=LM.update({id:"/construction",path:"/construction",getParentRoute:()=>GM}),Nle=yae.update({id:"/view",path:"/view",getParentRoute:()=>Za}),kle=MM.update({id:"/routes",path:"/routes",getParentRoute:()=>Za}),Cle=Kp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Za}),jle=BM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>JM}),Tle=Xy.update({id:"/resources",path:"/resources",getParentRoute:()=>px}),Rle=eb.update({id:"/requirements",path:"/requirements",getParentRoute:()=>px}),Ole=tb.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>px}),qle=zM.update({id:"/route/priority",path:"/route/priority",getParentRoute:()=>Za}),Ale=WM.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Za}),Ple=VM.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Za}),ZM=Fae.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Za}),Fle=UM.update({id:"/construction/requirements",path:"/construction/requirements",getParentRoute:()=>Za}),Dle=HM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ZM}),Lle={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:ble,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:yle,LocaleAppsDeriveanGameBlueprintIdProductionRoute:gle,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:mle,LocaleAppsDeriveanGameBlueprintIdViewRoute:hle},Mle=Ef._addFileChildren(Lle),$le={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:Ole,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:Rle,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:Tle},Ble=px._addFileChildren($le),zle={LocaleAppsDeriveanGameIndexRoute:Wae,LocaleAppsDeriveanGameBlueprintIdRoute:Mle,LocaleAppsDeriveanGameBlueprintListRoute:tle,LocaleAppsDeriveanGameBlueprintProductionIdRoute:Ble},Wle=Fm._addFileChildren(zle),Vle={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:jle},Ule=JM._addFileChildren(Vle),Hle={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:Dle},Kle=ZM._addFileChildren(Hle),Qle={LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:Cle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoutesRoute:kle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:Nle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdConstructionRequirementsRoute:Fle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:Kle,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:Ple,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:Ale,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoutePriorityRoute:qle},Gle=Za._addFileChildren(Qle),Jle={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:Ile},Zle=GM._addFileChildren(Jle),Yle={LocaleAppsDeriveanMapMapIdRouteRouteIdConstructionRoute:Ele,LocaleAppsDeriveanMapMapIdRouteRouteIdResourcesRoute:Sle},Xle=YN._addFileChildren(Yle),ece={LocaleAppsDeriveanMapMapIdViewRoute:ele,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:Ule,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:Gle,LocaleAppsDeriveanMapMapIdBuildingListRoute:ple,LocaleAppsDeriveanMapMapIdLandLandIdRoute:Zle,LocaleAppsDeriveanMapMapIdLandListRoute:fle,LocaleAppsDeriveanMapMapIdRouteRouteIdRoute:Xle},tce=lc._addFileChildren(ece),nce={LocaleAppsDeriveanMapMapIdRoute:tce},rce=KM._addFileChildren(nce),ice={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:dle,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:ule,LocaleAppsDeriveanRootBlueprintIdEditRoute:cle,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:lle,LocaleAppsDeriveanRootBlueprintIdProductionRoute:ale,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:ole,LocaleAppsDeriveanRootBlueprintIdViewRoute:sle},sce=cc._addFileChildren(ice),oce={LocaleAppsDeriveanRootResourceIdViewRoute:rle},ace=QM._addFileChildren(oce),lce={LocaleAppsDeriveanRootUserIdViewRoute:nle,LocaleAppsDeriveanRootUserIdBuildingListRoute:vle},cce=ZN._addFileChildren(lce),uce={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:_le,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:wle,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:xle},dce=fx._addFileChildren(uce),fce={LocaleAppsDeriveanRootEditorRoute:Vae,LocaleAppsDeriveanRootIndexRoute:zae,LocaleAppsDeriveanRootBlueprintIdRoute:sce,LocaleAppsDeriveanRootBlueprintListRoute:Xae,LocaleAppsDeriveanRootRegionListRoute:Yae,LocaleAppsDeriveanRootResourceIdRoute:ace,LocaleAppsDeriveanRootResourceListRoute:Zae,LocaleAppsDeriveanRootTagListRoute:Jae,LocaleAppsDeriveanRootUserIdRoute:cce,LocaleAppsDeriveanRootUserListRoute:Gae,LocaleAppsDeriveanRootBlueprintProductionIdRoute:dce,LocaleAppsDeriveanRootRegionIdViewRoute:ile},pce=Bs._addFileChildren(fce),hce={LocaleAppsDeriveanGameRoute:Wle,LocaleAppsDeriveanMapRoute:rce,LocaleAppsDeriveanRootRoute:pce,LocaleAppsDeriveanDbSchemaRoute:Qae,LocaleAppsDeriveanPublicLoginRoute:Kae,LocaleAppsDeriveanPublicLogoutRoute:Hae,LocaleAppsDeriveanPublicRegisterRoute:Uae},mce=ac._addFileChildren(hce),gce={LocaleIndexRoute:Bae,LocaleAppsDeriveanRoute:mce},yce=JN._addFileChildren(gce),bce={IndexRoute:$ae,LocaleRoute:yce},vce=vN._addFileChildren(bce)._addFileTypes(),YM=new _B({defaultOptions:{queries:{placeholderData:cB}}}),xce=v4({routeTree:vce,context:{queryClient:YM,tva:o7,async session(){return _m.parse(null)},kysely:kt},defaultPendingComponent:KG,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),C3=document.getElementById("app");IU({limit:{maxRequests:10,perMilliseconds:100}});C3.innerHTML||xJ.createRoot(C3).render(d.jsx(CB,{client:YM,children:d.jsx(U4,{router:xce})}))})();