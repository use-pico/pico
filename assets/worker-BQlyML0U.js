(function(){"use strict";var lt=(()=>{var oe=self.location.href;return function(ee={}){var le,i=ee,Z,K,ue=new Promise((e,t)=>{Z=e,K=t}),me=typeof window=="object",ye=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const Ae=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,Ae.debugModule("globalThis.location =",globalThis.location);var Ie=Object.assign({},i),ie="./this.program",fe="";function Se(e){return i.locateFile?i.locateFile(e,fe):fe+e}var Pe,De;(me||ye)&&(ye?fe=self.location.href:typeof document<"u"&&document.currentScript&&(fe=document.currentScript.src),oe&&(fe=oe),fe.startsWith("blob:")?fe="":fe=fe.substr(0,fe.replace(/[?#].*/,"").lastIndexOf("/")+1),ye&&(De=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Pe=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var Fe=i.print||console.log.bind(console),Oe=i.printErr||console.error.bind(console);Object.assign(i,Ie),Ie=null,i.arguments&&i.arguments,i.thisProgram&&(ie=i.thisProgram);var Me=i.wasmBinary,Ce,je=!1,ke,Be,Re,be,qe,Ne;function Ot(){var e=Ce.buffer;i.HEAP8=ke=new Int8Array(e),i.HEAP16=Re=new Int16Array(e),i.HEAPU8=Be=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=be=new Int32Array(e),i.HEAPU32=qe=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e),i.HEAP64=Ne=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}if(i.wasmMemory)Ce=i.wasmMemory;else{var an=i.INITIAL_MEMORY||16777216;Ce=new WebAssembly.Memory({initial:an/65536,maximum:32768})}Ot();var Lt=[],Ct=[],Dt=[];function ln(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)un(i.preRun.shift());mt(Lt)}function cn(){!i.noFSInit&&!l.initialized&&l.init(),l.ignorePermissions=!1,mt(Ct)}function _n(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)dn(i.postRun.shift());mt(Dt)}function un(e){Lt.unshift(e)}function fn(e){Ct.unshift(e)}function dn(e){Dt.unshift(e)}var Qe=0,Xe=null;function Ar(e){return e}function pt(e){Qe++,i.monitorRunDependencies?.(Qe)}function rt(e){if(Qe--,i.monitorRunDependencies?.(Qe),Qe==0&&Xe){var t=Xe;Xe=null,t()}}function ht(e){i.onAbort?.(e),e="Aborted("+e+")",Oe(e),je=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw K(t),t}var pn="data:application/octet-stream;base64,",Rt=e=>e.startsWith(pn);function hn(){if(i.locateFile){var e="sqlite3.wasm";return Rt(e)?e:Se(e)}return new URL("/assets/sqlite3-CgX3seBP.wasm",self.location.href).href}var st;function Nt(e){if(e==st&&Me)return new Uint8Array(Me);if(De)return De(e);throw"both async and sync fetching of the wasm failed"}function mn(e){return Me?Promise.resolve().then(()=>Nt(e)):Pe(e).then(t=>new Uint8Array(t),()=>Nt(e))}function Mt(e,t,n){return mn(e).then(r=>WebAssembly.instantiate(r,t)).then(n,r=>{Oe(`failed to asynchronously prepare wasm: ${r}`),ht(r)})}function gn(e,t,n,r){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Rt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var o=WebAssembly.instantiateStreaming(s,n);return o.then(r,function(h){return Oe(`wasm streaming compile failed: ${h}`),Oe("falling back to ArrayBuffer instantiation"),Mt(t,n,r)})}):Mt(t,n,r)}function bn(){return{env:Vt,wasi_snapshot_preview1:Vt}}function yn(){var e=bn();function t(r,s){return m=r.exports,fn(m.__wasm_call_ctors),rt(),m}pt();function n(r){t(r.instance)}if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(r){Oe(`Module.instantiateWasm callback failed with error: ${r}`),K(r)}return st||(st=hn()),gn(Me,st,e,n).catch(K),{}}var mt=e=>{for(;e.length>0;)e.shift()(i)};i.noExitRuntime;var we={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=we.isAbs(e),n=e.substr(-1)==="/";return e=we.normalizeArray(e.split("/").filter(r=>!!r),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=we.splitPath(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)},basename:e=>{if(e==="/")return"/";e=we.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:(...e)=>we.normalize(e.join("/")),join2:(e,t)=>we.normalize(e+"/"+t)},qn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);ht("initRandomDevice")},jt=e=>(jt=qn())(e),ze={resolve:(...e)=>{for(var t="",n=!1,r=e.length-1;r>=-1&&!n;r--){var s=r>=0?e[r]:l.cwd();if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!s)return"";t=s+"/"+t,n=we.isAbs(s)}return t=we.normalizeArray(t.split("/").filter(o=>!!o),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{e=ze.resolve(e).substr(1),t=ze.resolve(t).substr(1);function n(D){for(var U=0;U<D.length&&D[U]==="";U++);for(var Q=D.length-1;Q>=0&&D[Q]==="";Q--);return U>Q?[]:D.slice(U,Q-U+1)}for(var r=n(e.split("/")),s=n(t.split("/")),o=Math.min(r.length,s.length),h=o,g=0;g<o;g++)if(r[g]!==s[g]){h=g;break}for(var P=[],g=h;g<r.length;g++)P.push("..");return P=P.concat(s.slice(h)),P.join("/")}},Bt=typeof TextDecoder<"u"?new TextDecoder:void 0,$e=(e,t,n)=>{for(var r=t+n,s=t;e[s]&&!(s>=r);)++s;if(s-t>16&&e.buffer&&Bt)return Bt.decode(e.subarray(t,s));for(var o="";t<s;){var h=e[t++];if(!(h&128)){o+=String.fromCharCode(h);continue}var g=e[t++]&63;if((h&224)==192){o+=String.fromCharCode((h&31)<<6|g);continue}var P=e[t++]&63;if((h&240)==224?h=(h&15)<<12|g<<6|P:h=(h&7)<<18|g<<12|P<<6|e[t++]&63,h<65536)o+=String.fromCharCode(h);else{var D=h-65536;o+=String.fromCharCode(55296|D>>10,56320|D&1023)}}return o},gt=[],it=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},bt=(e,t,n,r)=>{if(!(r>0))return 0;for(var s=n,o=n+r-1,h=0;h<e.length;++h){var g=e.charCodeAt(h);if(g>=55296&&g<=57343){var P=e.charCodeAt(++h);g=65536+((g&1023)<<10)|P&1023}if(g<=127){if(n>=o)break;t[n++]=g}else if(g<=2047){if(n+1>=o)break;t[n++]=192|g>>6,t[n++]=128|g&63}else if(g<=65535){if(n+2>=o)break;t[n++]=224|g>>12,t[n++]=128|g>>6&63,t[n++]=128|g&63}else{if(n+3>=o)break;t[n++]=240|g>>18,t[n++]=128|g>>12&63,t[n++]=128|g>>6&63,t[n++]=128|g&63}}return t[n]=0,n-s};function Ut(e,t,n){var r=it(e)+1,s=new Array(r),o=bt(e,s,0,s.length);return s.length=o,s}var wn=()=>{if(!gt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;gt=Ut(e)}return gt.shift()},He={ttys:[],init(){},shutdown(){},register(e,t){He.ttys[e]={input:[],output:[],ops:t},l.registerDevice(e,He.stream_ops)},stream_ops:{open(e){var t=He.ttys[e.node.rdev];if(!t)throw new l.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,s){if(!e.tty||!e.tty.ops.get_char)throw new l.ErrnoError(60);for(var o=0,h=0;h<r;h++){var g;try{g=e.tty.ops.get_char(e.tty)}catch{throw new l.ErrnoError(29)}if(g===void 0&&o===0)throw new l.ErrnoError(6);if(g==null)break;o++,t[n+h]=g}return o&&(e.node.timestamp=Date.now()),o},write(e,t,n,r,s){if(!e.tty||!e.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch{throw new l.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char(e){return wn()},put_char(e,t){t===null||t===10?(Fe($e(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Fe($e(e.output,0)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,n){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Oe($e(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Oe($e(e.output,0)),e.output=[])}}},vn=(e,t)=>(Be.fill(0,e,e+t),e),zt=(e,t)=>Math.ceil(e/t)*t,Wt=e=>{e=zt(e,65536);var t=$t(65536,e);return t?vn(t,e):0},de={ops_table:null,mount(e){return de.createNode(null,"/",16895,0)},createNode(e,t,n,r){if(l.isBlkdev(n)||l.isFIFO(n))throw new l.ErrnoError(63);de.ops_table||={dir:{node:{getattr:de.node_ops.getattr,setattr:de.node_ops.setattr,lookup:de.node_ops.lookup,mknod:de.node_ops.mknod,rename:de.node_ops.rename,unlink:de.node_ops.unlink,rmdir:de.node_ops.rmdir,readdir:de.node_ops.readdir,symlink:de.node_ops.symlink},stream:{llseek:de.stream_ops.llseek}},file:{node:{getattr:de.node_ops.getattr,setattr:de.node_ops.setattr},stream:{llseek:de.stream_ops.llseek,read:de.stream_ops.read,write:de.stream_ops.write,allocate:de.stream_ops.allocate,mmap:de.stream_ops.mmap,msync:de.stream_ops.msync}},link:{node:{getattr:de.node_ops.getattr,setattr:de.node_ops.setattr,readlink:de.node_ops.readlink},stream:{}},chrdev:{node:{getattr:de.node_ops.getattr,setattr:de.node_ops.setattr},stream:l.chrdev_stream_ops}};var s=l.createNode(e,t,n,r);return l.isDir(s.mode)?(s.node_ops=de.ops_table.dir.node,s.stream_ops=de.ops_table.dir.stream,s.contents={}):l.isFile(s.mode)?(s.node_ops=de.ops_table.file.node,s.stream_ops=de.ops_table.file.stream,s.usedBytes=0,s.contents=null):l.isLink(s.mode)?(s.node_ops=de.ops_table.link.node,s.stream_ops=de.ops_table.link.stream):l.isChrdev(s.mode)&&(s.node_ops=de.ops_table.chrdev.node,s.stream_ops=de.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var r=1024*1024;t=Math.max(t,n*(n<r?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=l.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,l.isDir(e.mode)?t.size=4096:l.isFile(e.mode)?t.size=e.usedBytes:l.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&de.resizeFileStorage(e,t.size)},lookup(e,t){throw l.genericErrors[44]},mknod(e,t,n,r){return de.createNode(e,t,n,r)},rename(e,t,n){if(l.isDir(e.mode)){var r;try{r=l.lookupNode(t,n)}catch{}if(r)for(var s in r.contents)throw new l.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=l.lookupNode(e,t);for(var r in n.contents)throw new l.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=de.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!l.isLink(e.mode))throw new l.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,s){var o=e.node.contents;if(s>=e.node.usedBytes)return 0;var h=Math.min(e.node.usedBytes-s,r);if(h>8&&o.subarray)t.set(o.subarray(s,s+h),n);else for(var g=0;g<h;g++)t[n+g]=o[s+g];return h},write(e,t,n,r,s,o){if(t.buffer===ke.buffer&&(o=!1),!r)return 0;var h=e.node;if(h.timestamp=Date.now(),t.subarray&&(!h.contents||h.contents.subarray)){if(o)return h.contents=t.subarray(n,n+r),h.usedBytes=r,r;if(h.usedBytes===0&&s===0)return h.contents=t.slice(n,n+r),h.usedBytes=r,r;if(s+r<=h.usedBytes)return h.contents.set(t.subarray(n,n+r),s),r}if(de.expandFileStorage(h,s+r),h.contents.subarray&&t.subarray)h.contents.set(t.subarray(n,n+r),s);else for(var g=0;g<r;g++)h.contents[s+g]=t[n+g];return h.usedBytes=Math.max(h.usedBytes,s+r),r},llseek(e,t,n){var r=t;if(n===1?r+=e.position:n===2&&l.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new l.ErrnoError(28);return r},allocate(e,t,n){de.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,s){if(!l.isFile(e.node.mode))throw new l.ErrnoError(43);var o,h,g=e.node.contents;if(!(s&2)&&g&&g.buffer===ke.buffer)h=!1,o=g.byteOffset;else{if(h=!0,o=Wt(t),!o)throw new l.ErrnoError(48);g&&((n>0||n+t<g.length)&&(g.subarray?g=g.subarray(n,n+t):g=Array.prototype.slice.call(g,n,n+t)),ke.set(g,o))}return{ptr:o,allocated:h}},msync(e,t,n,r,s){return de.stream_ops.write(e,t,0,r,n,!1),0}}},En=(e,t,n,r)=>{var s=`al ${e}`;Pe(e).then(o=>{t(new Uint8Array(o)),s&&rt()},o=>{if(n)n();else throw`Loading data file "${e}" failed.`}),s&&pt()},xn=(e,t,n,r,s,o)=>{l.createDataFile(e,t,n,r,s,o)},Sn=i.preloadPlugins||[],An=(e,t,n,r)=>{typeof Browser<"u"&&Browser.init();var s=!1;return Sn.forEach(o=>{s||o.canHandle(t)&&(o.handle(e,t,n,r),s=!0)}),s},In=(e,t,n,r,s,o,h,g,P,D)=>{var U=t?ze.resolve(we.join2(e,t)):e;function Q(T){function S(C){D?.(),g||xn(e,t,C,r,s,P),o?.(),rt()}An(T,U,S,()=>{h?.(),rt()})||S(T)}pt(),typeof n=="string"?En(n,Q,h):Q(n)},kn=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},n=t[e];if(typeof n>"u")throw new Error(`Unknown file open mode: ${e}`);return n},yt=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){this.name="ErrnoError",this.errno=e}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=l.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(e,t={}){if(e=ze.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new l.ErrnoError(32);for(var r=e.split("/").filter(Q=>!!Q),s=l.root,o="/",h=0;h<r.length;h++){var g=h===r.length-1;if(g&&t.parent)break;if(s=l.lookupNode(s,r[h]),o=we.join2(o,r[h]),l.isMountpoint(s)&&(!g||g&&t.follow_mount)&&(s=s.mounted.root),!g||t.follow)for(var P=0;l.isLink(s.mode);){var D=l.readlink(o);o=ze.resolve(we.dirname(o),D);var U=l.lookupPath(o,{recurse_count:t.recurse_count+1});if(s=U.node,P++>40)throw new l.ErrnoError(32)}}return{path:o,node:s}},getPath(e){for(var t;;){if(l.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%l.nameTable.length},hashAddNode(e){var t=l.hashName(e.parent.id,e.name);e.name_next=l.nameTable[t],l.nameTable[t]=e},hashRemoveNode(e){var t=l.hashName(e.parent.id,e.name);if(l.nameTable[t]===e)l.nameTable[t]=e.name_next;else for(var n=l.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=l.mayLookup(e);if(n)throw new l.ErrnoError(n);for(var r=l.hashName(e.id,t),s=l.nameTable[r];s;s=s.name_next){var o=s.name;if(s.parent.id===e.id&&o===t)return s}return l.lookup(e,t)},createNode(e,t,n,r){var s=new l.FSNode(e,t,n,r);return l.hashAddNode(s),s},destroyNode(e){l.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return l.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!l.isDir(e.mode))return 54;var t=l.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var n=l.lookupNode(e,t);return 20}catch{}return l.nodePermissions(e,"wx")},mayDelete(e,t,n){var r;try{r=l.lookupNode(e,t)}catch(o){return o.errno}var s=l.nodePermissions(e,"wx");if(s)return s;if(n){if(!l.isDir(r.mode))return 54;if(l.isRoot(r)||l.getPath(r)===l.cwd())return 10}else if(l.isDir(r.mode))return 31;return 0},mayOpen(e,t){return e?l.isLink(e.mode)?32:l.isDir(e.mode)&&(l.flagsToPermissionString(t)!=="r"||t&512)?31:l.nodePermissions(e,l.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=l.MAX_OPEN_FDS;e++)if(!l.streams[e])return e;throw new l.ErrnoError(33)},getStreamChecked(e){var t=l.getStream(e);if(!t)throw new l.ErrnoError(8);return t},getStream:e=>l.streams[e],createStream(e,t=-1){return e=Object.assign(new l.FSStream,e),t==-1&&(t=l.nextfd()),e.fd=t,l.streams[t]=e,e},closeStream(e){l.streams[e]=null},dupStream(e,t=-1){var n=l.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=l.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new l.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){l.devices[e]={stream_ops:t}},getDevice:e=>l.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push(...r.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),l.syncFSRequests++,l.syncFSRequests>1&&Oe(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=l.getMounts(l.root.mount),r=0;function s(h){return l.syncFSRequests--,t(h)}function o(h){if(h)return o.errored?void 0:(o.errored=!0,s(h));++r>=n.length&&s(null)}n.forEach(h=>{if(!h.type.syncfs)return o(null);h.type.syncfs(h,e,o)})},mount(e,t,n){var r=n==="/",s=!n,o;if(r&&l.root)throw new l.ErrnoError(10);if(!r&&!s){var h=l.lookupPath(n,{follow_mount:!1});if(n=h.path,o=h.node,l.isMountpoint(o))throw new l.ErrnoError(10);if(!l.isDir(o.mode))throw new l.ErrnoError(54)}var g={type:e,opts:t,mountpoint:n,mounts:[]},P=e.mount(g);return P.mount=g,g.root=P,r?l.root=P:o&&(o.mounted=g,o.mount&&o.mount.mounts.push(g)),P},unmount(e){var t=l.lookupPath(e,{follow_mount:!1});if(!l.isMountpoint(t.node))throw new l.ErrnoError(28);var n=t.node,r=n.mounted,s=l.getMounts(r);Object.keys(l.nameTable).forEach(h=>{for(var g=l.nameTable[h];g;){var P=g.name_next;s.includes(g.mount)&&l.destroyNode(g),g=P}}),n.mounted=null;var o=n.mount.mounts.indexOf(r);n.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,n){var r=l.lookupPath(e,{parent:!0}),s=r.node,o=we.basename(e);if(!o||o==="."||o==="..")throw new l.ErrnoError(28);var h=l.mayCreate(s,o);if(h)throw new l.ErrnoError(h);if(!s.node_ops.mknod)throw new l.ErrnoError(63);return s.node_ops.mknod(s,o,t,n)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,l.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,l.mknod(e,t,0)},mkdirTree(e,t){for(var n=e.split("/"),r="",s=0;s<n.length;++s)if(n[s]){r+="/"+n[s];try{l.mkdir(r,t)}catch(o){if(o.errno!=20)throw o}}},mkdev(e,t,n){return typeof n>"u"&&(n=t,t=438),t|=8192,l.mknod(e,t,n)},symlink(e,t){if(!ze.resolve(e))throw new l.ErrnoError(44);var n=l.lookupPath(t,{parent:!0}),r=n.node;if(!r)throw new l.ErrnoError(44);var s=we.basename(t),o=l.mayCreate(r,s);if(o)throw new l.ErrnoError(o);if(!r.node_ops.symlink)throw new l.ErrnoError(63);return r.node_ops.symlink(r,s,e)},rename(e,t){var n=we.dirname(e),r=we.dirname(t),s=we.basename(e),o=we.basename(t),h,g,P;if(h=l.lookupPath(e,{parent:!0}),g=h.node,h=l.lookupPath(t,{parent:!0}),P=h.node,!g||!P)throw new l.ErrnoError(44);if(g.mount!==P.mount)throw new l.ErrnoError(75);var D=l.lookupNode(g,s),U=ze.relative(e,r);if(U.charAt(0)!==".")throw new l.ErrnoError(28);if(U=ze.relative(t,n),U.charAt(0)!==".")throw new l.ErrnoError(55);var Q;try{Q=l.lookupNode(P,o)}catch{}if(D!==Q){var T=l.isDir(D.mode),S=l.mayDelete(g,s,T);if(S)throw new l.ErrnoError(S);if(S=Q?l.mayDelete(P,o,T):l.mayCreate(P,o),S)throw new l.ErrnoError(S);if(!g.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(D)||Q&&l.isMountpoint(Q))throw new l.ErrnoError(10);if(P!==g&&(S=l.nodePermissions(g,"w"),S))throw new l.ErrnoError(S);l.hashRemoveNode(D);try{g.node_ops.rename(D,P,o),D.parent=P}catch(C){throw C}finally{l.hashAddNode(D)}}},rmdir(e){var t=l.lookupPath(e,{parent:!0}),n=t.node,r=we.basename(e),s=l.lookupNode(n,r),o=l.mayDelete(n,r,!0);if(o)throw new l.ErrnoError(o);if(!n.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(s))throw new l.ErrnoError(10);n.node_ops.rmdir(n,r),l.destroyNode(s)},readdir(e){var t=l.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new l.ErrnoError(54);return n.node_ops.readdir(n)},unlink(e){var t=l.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new l.ErrnoError(44);var r=we.basename(e),s=l.lookupNode(n,r),o=l.mayDelete(n,r,!1);if(o)throw new l.ErrnoError(o);if(!n.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(s))throw new l.ErrnoError(10);n.node_ops.unlink(n,r),l.destroyNode(s)},readlink(e){var t=l.lookupPath(e),n=t.node;if(!n)throw new l.ErrnoError(44);if(!n.node_ops.readlink)throw new l.ErrnoError(28);return ze.resolve(l.getPath(n.parent),n.node_ops.readlink(n))},stat(e,t){var n=l.lookupPath(e,{follow:!t}),r=n.node;if(!r)throw new l.ErrnoError(44);if(!r.node_ops.getattr)throw new l.ErrnoError(63);return r.node_ops.getattr(r)},lstat(e){return l.stat(e,!0)},chmod(e,t,n){var r;if(typeof e=="string"){var s=l.lookupPath(e,{follow:!n});r=s.node}else r=e;if(!r.node_ops.setattr)throw new l.ErrnoError(63);r.node_ops.setattr(r,{mode:t&4095|r.mode&-4096,timestamp:Date.now()})},lchmod(e,t){l.chmod(e,t,!0)},fchmod(e,t){var n=l.getStreamChecked(e);l.chmod(n.node,t)},chown(e,t,n,r){var s;if(typeof e=="string"){var o=l.lookupPath(e,{follow:!r});s=o.node}else s=e;if(!s.node_ops.setattr)throw new l.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown(e,t,n){l.chown(e,t,n,!0)},fchown(e,t,n){var r=l.getStreamChecked(e);l.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new l.ErrnoError(28);var n;if(typeof e=="string"){var r=l.lookupPath(e,{follow:!0});n=r.node}else n=e;if(!n.node_ops.setattr)throw new l.ErrnoError(63);if(l.isDir(n.mode))throw new l.ErrnoError(31);if(!l.isFile(n.mode))throw new l.ErrnoError(28);var s=l.nodePermissions(n,"w");if(s)throw new l.ErrnoError(s);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=l.getStreamChecked(e);if(!(n.flags&2097155))throw new l.ErrnoError(28);l.truncate(n.node,t)},utime(e,t,n){var r=l.lookupPath(e,{follow:!0}),s=r.node;s.node_ops.setattr(s,{timestamp:Math.max(t,n)})},open(e,t,n){if(e==="")throw new l.ErrnoError(44);t=typeof t=="string"?kn(t):t,t&64?(n=typeof n>"u"?438:n,n=n&4095|32768):n=0;var r;if(typeof e=="object")r=e;else{e=we.normalize(e);try{var s=l.lookupPath(e,{follow:!(t&131072)});r=s.node}catch{}}var o=!1;if(t&64)if(r){if(t&128)throw new l.ErrnoError(20)}else r=l.mknod(e,n,0),o=!0;if(!r)throw new l.ErrnoError(44);if(l.isChrdev(r.mode)&&(t&=-513),t&65536&&!l.isDir(r.mode))throw new l.ErrnoError(54);if(!o){var h=l.mayOpen(r,t);if(h)throw new l.ErrnoError(h)}t&512&&!o&&l.truncate(r,0),t&=-131713;var g=l.createStream({node:r,path:l.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return g.stream_ops.open&&g.stream_ops.open(g),i.logReadFiles&&!(t&1)&&(l.readFiles||(l.readFiles={}),e in l.readFiles||(l.readFiles[e]=1)),g},close(e){if(l.isClosed(e))throw new l.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{l.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,n){if(l.isClosed(e))throw new l.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new l.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new l.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,s){if(r<0||s<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.read)throw new l.ErrnoError(28);var o=typeof s<"u";if(!o)s=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var h=e.stream_ops.read(e,t,n,r,s);return o||(e.position+=h),h},write(e,t,n,r,s,o){if(r<0||s<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if(!(e.flags&2097155))throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.write)throw new l.ErrnoError(28);e.seekable&&e.flags&1024&&l.llseek(e,0,2);var h=typeof s<"u";if(!h)s=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var g=e.stream_ops.write(e,t,n,r,s,o);return h||(e.position+=g),g},allocate(e,t,n){if(l.isClosed(e))throw new l.ErrnoError(8);if(t<0||n<=0)throw new l.ErrnoError(28);if(!(e.flags&2097155))throw new l.ErrnoError(8);if(!l.isFile(e.node.mode)&&!l.isDir(e.node.mode))throw new l.ErrnoError(43);if(!e.stream_ops.allocate)throw new l.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,s){if(r&2&&!(s&2)&&(e.flags&2097155)!==2)throw new l.ErrnoError(2);if((e.flags&2097155)===1)throw new l.ErrnoError(2);if(!e.stream_ops.mmap)throw new l.ErrnoError(43);if(!t)throw new l.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,s)},msync(e,t,n,r,s){return e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,s):0},ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new l.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var n,r=l.open(e,t.flags),s=l.stat(e),o=s.size,h=new Uint8Array(o);return l.read(r,h,0,o,0),t.encoding==="utf8"?n=$e(h,0):t.encoding==="binary"&&(n=h),l.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=l.open(e,n.flags,n.mode);if(typeof t=="string"){var s=new Uint8Array(it(t)+1),o=bt(t,s,0,s.length);l.write(r,s,0,o,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))l.write(r,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");l.close(r)},cwd:()=>l.currentPath,chdir(e){var t=l.lookupPath(e,{follow:!0});if(t.node===null)throw new l.ErrnoError(44);if(!l.isDir(t.node.mode))throw new l.ErrnoError(54);var n=l.nodePermissions(t.node,"x");if(n)throw new l.ErrnoError(n);l.currentPath=t.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(r,s,o,h,g)=>h}),l.mkdev("/dev/null",l.makedev(1,3)),He.register(l.makedev(5,0),He.default_tty_ops),He.register(l.makedev(6,0),He.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=jt(e).byteLength),e[--t]);l.createDevice("/dev","random",n),l.createDevice("/dev","urandom",n),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var e=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var t=l.createNode(e,"fd",16895,73);return t.node_ops={lookup(n,r){var s=+r,o=l.getStreamChecked(s),h={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path}};return h.parent=h,h}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?l.createDevice("/dev","stdin",e):l.symlink("/dev/tty","/dev/stdin"),t?l.createDevice("/dev","stdout",null,t):l.symlink("/dev/tty","/dev/stdout"),n?l.createDevice("/dev","stderr",null,n):l.symlink("/dev/tty1","/dev/stderr"),l.open("/dev/stdin",0),l.open("/dev/stdout",1),l.open("/dev/stderr",1)},staticInit(){[44].forEach(e=>{l.genericErrors[e]=new l.ErrnoError(e),l.genericErrors[e].stack="<generic error, no stack>"}),l.nameTable=new Array(4096),l.mount(de,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:de}},init(e,t,n){l.initialized=!0,e??=i.stdin,t??=i.stdout,n??=i.stderr,l.createStandardStreams(e,t,n)},quit(){l.initialized=!1;for(var e=0;e<l.streams.length;e++){var t=l.streams[e];t&&l.close(t)}},findObject(e,t){var n=l.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{var n=l.lookupPath(e,{follow:!t});e=n.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=l.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=we.basename(e),n=l.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot=n.path==="/"}catch(s){r.error=s.errno}return r},createPath(e,t,n,r){e=typeof e=="string"?e:l.getPath(e);for(var s=t.split("/").reverse();s.length;){var o=s.pop();if(o){var h=we.join2(e,o);try{l.mkdir(h)}catch{}e=h}}return h},createFile(e,t,n,r,s){var o=we.join2(typeof e=="string"?e:l.getPath(e),t),h=yt(r,s);return l.create(o,h)},createDataFile(e,t,n,r,s,o){var h=t;e&&(e=typeof e=="string"?e:l.getPath(e),h=t?we.join2(e,t):e);var g=yt(r,s),P=l.create(h,g);if(n){if(typeof n=="string"){for(var D=new Array(n.length),U=0,Q=n.length;U<Q;++U)D[U]=n.charCodeAt(U);n=D}l.chmod(P,g|146);var T=l.open(P,577);l.write(T,n,0,n.length,0,o),l.close(T),l.chmod(P,g)}},createDevice(e,t,n,r){var s=we.join2(typeof e=="string"?e:l.getPath(e),t),o=yt(!!n,!!r);l.createDevice.major||(l.createDevice.major=64);var h=l.makedev(l.createDevice.major++,0);return l.registerDevice(h,{open(g){g.seekable=!1},close(g){r?.buffer?.length&&r(10)},read(g,P,D,U,Q){for(var T=0,S=0;S<U;S++){var C;try{C=n()}catch{throw new l.ErrnoError(29)}if(C===void 0&&T===0)throw new l.ErrnoError(6);if(C==null)break;T++,P[D+S]=C}return T&&(g.node.timestamp=Date.now()),T},write(g,P,D,U,Q){for(var T=0;T<U;T++)try{r(P[D+T])}catch{throw new l.ErrnoError(29)}return U&&(g.node.timestamp=Date.now()),T}}),l.mkdev(s,o,h)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=De(e.url),e.usedBytes=e.contents.length}catch{throw new l.ErrnoError(29)}},createLazyFile(e,t,n,r,s){class o{constructor(){this.lengthKnown=!1,this.chunks=[]}get(S){if(!(S>this.length-1||S<0)){var C=S%this.chunkSize,b=S/this.chunkSize|0;return this.getter(b)[C]}}setDataGetter(S){this.getter=S}cacheLength(){var S=new XMLHttpRequest;if(S.open("HEAD",n,!1),S.send(null),!(S.status>=200&&S.status<300||S.status===304))throw new Error("Couldn't load "+n+". Status: "+S.status);var C=Number(S.getResponseHeader("Content-length")),b,w=(b=S.getResponseHeader("Accept-Ranges"))&&b==="bytes",E=(b=S.getResponseHeader("Content-Encoding"))&&b==="gzip",R=1024*1024;w||(R=C);var L=(O,J)=>{if(O>J)throw new Error("invalid range ("+O+", "+J+") or no bytes requested!");if(J>C-1)throw new Error("only "+C+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",n,!1),C!==R&&c.setRequestHeader("Range","bytes="+O+"-"+J),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+n+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):Ut(c.responseText||"")},x=this;x.setDataGetter(O=>{var J=O*R,c=(O+1)*R-1;if(c=Math.min(c,C-1),typeof x.chunks[O]>"u"&&(x.chunks[O]=L(J,c)),typeof x.chunks[O]>"u")throw new Error("doXHR failed!");return x.chunks[O]}),(E||!C)&&(R=C=1,C=this.getter(0).length,R=C,Fe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=C,this._chunkSize=R,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!ye)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var h=new o,g={isDevice:!1,contents:h}}else var g={isDevice:!1,url:n};var P=l.createFile(e,t,g,r,s);g.contents?P.contents=g.contents:g.url&&(P.contents=null,P.url=g.url),Object.defineProperties(P,{usedBytes:{get:function(){return this.contents.length}}});var D={},U=Object.keys(P.stream_ops);U.forEach(T=>{var S=P.stream_ops[T];D[T]=(...C)=>(l.forceLoadFile(P),S(...C))});function Q(T,S,C,b,w){var E=T.node.contents;if(w>=E.length)return 0;var R=Math.min(E.length-w,b);if(E.slice)for(var L=0;L<R;L++)S[C+L]=E[w+L];else for(var L=0;L<R;L++)S[C+L]=E.get(w+L);return R}return D.read=(T,S,C,b,w)=>(l.forceLoadFile(P),Q(T,S,C,b,w)),D.mmap=(T,S,C,b,w)=>{l.forceLoadFile(P);var E=Wt(S);if(!E)throw new l.ErrnoError(48);return Q(T,ke,E,S,C),{ptr:E,allocated:!0}},P.stream_ops=D,P}},Tn=(e,t)=>e?$e(Be,e,t):"",he={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(we.isAbs(t))return t;var r;if(e===-100)r=l.cwd();else{var s=he.getStreamFromFD(e);r=s.path}if(t.length==0){if(!n)throw new l.ErrnoError(44);return r}return we.join2(r,t)},doStat(e,t,n){var r=e(t);be[n>>2]=r.dev,be[n+4>>2]=r.mode,qe[n+8>>2]=r.nlink,be[n+12>>2]=r.uid,be[n+16>>2]=r.gid,be[n+20>>2]=r.rdev,Ne[n+24>>3]=BigInt(r.size),be[n+32>>2]=4096,be[n+36>>2]=r.blocks;var s=r.atime.getTime(),o=r.mtime.getTime(),h=r.ctime.getTime();return Ne[n+40>>3]=BigInt(Math.floor(s/1e3)),qe[n+48>>2]=s%1e3*1e3*1e3,Ne[n+56>>3]=BigInt(Math.floor(o/1e3)),qe[n+64>>2]=o%1e3*1e3*1e3,Ne[n+72>>3]=BigInt(Math.floor(h/1e3)),qe[n+80>>2]=h%1e3*1e3*1e3,Ne[n+88>>3]=BigInt(r.ino),0},doMsync(e,t,n,r,s){if(!l.isFile(t.node.mode))throw new l.ErrnoError(43);if(r&2)return 0;var o=Be.slice(e,e+n);l.msync(t,o,s,n,r)},getStreamFromFD(e){var t=l.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=Tn(e);return t}};function Fn(e,t){try{return e=he.getStr(e),l.chmod(e,t),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Pn(e,t,n,r){try{if(t=he.getStr(t),t=he.calculateAt(e,t),n&-8)return-28;var s=l.lookupPath(t,{follow:!0}),o=s.node;if(!o)return-44;var h="";return n&4&&(h+="r"),n&2&&(h+="w"),n&1&&(h+="x"),h&&l.nodePermissions(o,h)?-2:0}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function On(e,t){try{return l.fchmod(e,t),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ln(e,t,n){try{return l.fchown(e,t,n),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function ot(){var e=be[+he.varargs>>2];return he.varargs+=4,e}var Ge=ot;function Cn(e,t,n){he.varargs=n;try{var r=he.getStreamFromFD(e);switch(t){case 0:{var s=ot();if(s<0)return-28;for(;l.streams[s];)s++;var o;return o=l.dupStream(r,s),o.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var s=ot();return r.flags|=s,0}case 12:{var s=Ge(),h=0;return Re[s+h>>1]=2,0}case 13:case 14:return 0}return-28}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function Dn(e,t){try{var n=he.getStreamFromFD(e);return he.doStat(l.stat,n.path,t)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var Rn=9007199254740992,Nn=-9007199254740992,Ye=e=>e<Nn||e>Rn?NaN:Number(e);function Mn(e,t){t=Ye(t);try{return isNaN(t)?61:(l.ftruncate(e,t),0)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Ke=(e,t,n)=>bt(e,Be,t,n);function jn(e,t){try{if(t===0)return-28;var n=l.cwd(),r=it(n)+1;return t<r?-68:(Ke(n,e,t),r)}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Bn(e,t,n){he.varargs=n;try{var r=he.getStreamFromFD(e);switch(t){case 21509:return r.tty?0:-59;case 21505:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var s=r.tty.ops.ioctl_tcgets(r),o=Ge();be[o>>2]=s.c_iflag||0,be[o+4>>2]=s.c_oflag||0,be[o+8>>2]=s.c_cflag||0,be[o+12>>2]=s.c_lflag||0;for(var h=0;h<32;h++)ke[o+h+17]=s.c_cc[h]||0;return 0}return 0}case 21510:case 21511:case 21512:return r.tty?0:-59;case 21506:case 21507:case 21508:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){for(var o=Ge(),g=be[o>>2],P=be[o+4>>2],D=be[o+8>>2],U=be[o+12>>2],Q=[],h=0;h<32;h++)Q.push(ke[o+h+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:g,c_oflag:P,c_cflag:D,c_lflag:U,c_cc:Q})}return 0}case 21519:{if(!r.tty)return-59;var o=Ge();return be[o>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var o=Ge();return l.ioctl(r,t,o)}case 21523:{if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var T=r.tty.ops.ioctl_tiocgwinsz(r.tty),o=Ge();Re[o>>1]=T[0],Re[o+2>>1]=T[1]}return 0}case 21524:return r.tty?0:-59;case 21515:return r.tty?0:-59;default:return-28}}catch(S){if(typeof l>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Un(e,t){try{return e=he.getStr(e),he.doStat(l.lstat,e,t)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function zn(e,t,n){try{return t=he.getStr(t),t=he.calculateAt(e,t),t=we.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),l.mkdir(t,n,0),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Wn(e,t,n,r){try{t=he.getStr(t);var s=r&256,o=r&4096;return r=r&-6401,t=he.calculateAt(e,t,o),he.doStat(s?l.lstat:l.stat,t,n)}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Qn(e,t,n,r){he.varargs=r;try{t=he.getStr(t),t=he.calculateAt(e,t);var s=r?ot():0;return l.open(t,n,s).fd}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Hn(e,t,n,r){try{if(t=he.getStr(t),t=he.calculateAt(e,t),r<=0)return-28;var s=l.readlink(t),o=Math.min(r,it(s)),h=ke[n+o];return Ke(s,n,r+1),ke[n+o]=h,o}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function Vn(e){try{return e=he.getStr(e),l.rmdir(e),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function $n(e,t){try{return e=he.getStr(e),he.doStat(l.stat,e,t)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Gn(e,t,n){try{return t=he.getStr(t),t=he.calculateAt(e,t),n===0?l.unlink(t):n===512?l.rmdir(t):ht("Invalid flags passed to unlinkat"),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var Qt=e=>qe[e>>2]+be[e+4>>2]*4294967296;function Kn(e,t,n,r){try{t=he.getStr(t),t=he.calculateAt(e,t,!0);var s=Date.now(),o,h;if(!n)o=s,h=s;else{var g=Qt(n),P=be[n+8>>2];P==1073741823?o=s:P==1073741822?o=-1:o=g*1e3+P/1e6,n+=16,g=Qt(n),P=be[n+8>>2],P==1073741823?h=s:P==1073741822?h=-1:h=g*1e3+P/1e6}return(h!=-1||o!=-1)&&l.utime(t,o,h),0}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return-D.errno}}var Jn=1,Xn=()=>Jn,Yn=e=>e%4===0&&(e%100!==0||e%400===0),Zn=[0,31,60,91,121,152,182,213,244,274,305,335],er=[0,31,59,90,120,151,181,212,243,273,304,334],tr=e=>{var t=Yn(e.getFullYear()),n=t?Zn:er,r=n[e.getMonth()]+e.getDate()-1;return r};function nr(e,t){e=Ye(e);var n=new Date(e*1e3);be[t>>2]=n.getSeconds(),be[t+4>>2]=n.getMinutes(),be[t+8>>2]=n.getHours(),be[t+12>>2]=n.getDate(),be[t+16>>2]=n.getMonth(),be[t+20>>2]=n.getFullYear()-1900,be[t+24>>2]=n.getDay();var r=tr(n)|0;be[t+28>>2]=r,be[t+36>>2]=-(n.getTimezoneOffset()*60);var s=new Date(n.getFullYear(),0,1),o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),h=s.getTimezoneOffset(),g=(o!=h&&n.getTimezoneOffset()==Math.min(h,o))|0;be[t+32>>2]=g}function rr(e,t,n,r,s,o,h){s=Ye(s);try{if(isNaN(s))return 61;var g=he.getStreamFromFD(r),P=l.mmap(g,e,s,t,n),D=P.ptr;return be[o>>2]=P.allocated,qe[h>>2]=D,0}catch(U){if(typeof l>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}function sr(e,t,n,r,s,o){o=Ye(o);try{var h=he.getStreamFromFD(s);n&2&&he.doMsync(e,h,t,r,o)}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}var ir=(e,t,n,r)=>{var s=new Date().getFullYear(),o=new Date(s,0,1),h=new Date(s,6,1),g=o.getTimezoneOffset(),P=h.getTimezoneOffset(),D=Math.max(g,P);qe[e>>2]=D*60,be[t>>2]=+(g!=P);var U=S=>{var C=S>=0?"-":"+",b=Math.abs(S),w=String(Math.floor(b/60)).padStart(2,"0"),E=String(b%60).padStart(2,"0");return`UTC${C}${w}${E}`},Q=U(g),T=U(P);P<g?(Ke(Q,n,17),Ke(T,r,17)):(Ke(Q,r,17),Ke(T,n,17))},or=()=>Date.now(),Ht;Ht=()=>performance.now();var ar=()=>2147483648,lr=e=>{var t=Ce.buffer,n=(e-t.byteLength+65535)/65536;try{return Ce.grow(n),Ot(),1}catch{}},cr=e=>{var t=Be.length;e>>>=0;var n=ar();if(e>n)return!1;for(var r=1;r<=4;r*=2){var s=t*(1+.2/r);s=Math.min(s,e+100663296);var o=Math.min(n,zt(Math.max(e,s),65536)),h=lr(o);if(h)return!0}return!1},qt={},_r=()=>ie||"./this.program",Ze=()=>{if(!Ze.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:_r()};for(var n in qt)qt[n]===void 0?delete t[n]:t[n]=qt[n];var r=[];for(var n in t)r.push(`${n}=${t[n]}`);Ze.strings=r}return Ze.strings},ur=(e,t)=>{for(var n=0;n<e.length;++n)ke[t++]=e.charCodeAt(n);ke[t]=0},fr=(e,t)=>{var n=0;return Ze().forEach((r,s)=>{var o=t+n;qe[e+s*4>>2]=o,ur(r,o),n+=r.length+1}),0},dr=(e,t)=>{var n=Ze();qe[e>>2]=n.length;var r=0;return n.forEach(s=>r+=s.length+1),qe[t>>2]=r,0};function pr(e){try{var t=he.getStreamFromFD(e);return l.close(t),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return n.errno}}function hr(e,t){try{var n=0,r=0,s=0,o=he.getStreamFromFD(e),h=o.tty?2:l.isDir(o.mode)?3:l.isLink(o.mode)?7:4;return ke[t]=h,Re[t+2>>1]=s,Ne[t+8>>3]=BigInt(n),Ne[t+16>>3]=BigInt(r),0}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return g.errno}}var mr=(e,t,n,r)=>{for(var s=0,o=0;o<n;o++){var h=qe[t>>2],g=qe[t+4>>2];t+=8;var P=l.read(e,ke,h,g,r);if(P<0)return-1;if(s+=P,P<g)break}return s};function gr(e,t,n,r){try{var s=he.getStreamFromFD(e),o=mr(s,t,n);return qe[r>>2]=o,0}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return h.errno}}function br(e,t,n,r){t=Ye(t);try{if(isNaN(t))return 61;var s=he.getStreamFromFD(e);return l.llseek(s,t,n),Ne[r>>3]=BigInt(s.position),s.getdents&&t===0&&n===0&&(s.getdents=null),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function yr(e){try{var t=he.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var qr=(e,t,n,r)=>{for(var s=0,o=0;o<n;o++){var h=qe[t>>2],g=qe[t+4>>2];t+=8;var P=l.write(e,ke,h,g,r);if(P<0)return-1;if(s+=P,P<g)break}return s};function wr(e,t,n,r){try{var s=he.getStreamFromFD(e),o=qr(s,t,n);return qe[r>>2]=o,0}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return h.errno}}l.createPreloadedFile=In,l.staticInit();var Vt={__syscall_chmod:Fn,__syscall_faccessat:Pn,__syscall_fchmod:On,__syscall_fchown32:Ln,__syscall_fcntl64:Cn,__syscall_fstat64:Dn,__syscall_ftruncate64:Mn,__syscall_getcwd:jn,__syscall_ioctl:Bn,__syscall_lstat64:Un,__syscall_mkdirat:zn,__syscall_newfstatat:Wn,__syscall_openat:Qn,__syscall_readlinkat:Hn,__syscall_rmdir:Vn,__syscall_stat64:$n,__syscall_unlinkat:Gn,__syscall_utimensat:Kn,_emscripten_get_now_is_monotonic:Xn,_localtime_js:nr,_mmap_js:rr,_munmap_js:sr,_tzset_js:ir,emscripten_date_now:or,emscripten_get_now:Ht,emscripten_resize_heap:cr,environ_get:fr,environ_sizes_get:dr,fd_close:pr,fd_fdstat_get:hr,fd_read:gr,fd_seek:br,fd_sync:yr,fd_write:wr,memory:Ce},m=yn();i._sqlite3_status64=(e,t,n,r)=>(i._sqlite3_status64=m.sqlite3_status64)(e,t,n,r),i._sqlite3_status=(e,t,n,r)=>(i._sqlite3_status=m.sqlite3_status)(e,t,n,r),i._sqlite3_db_status=(e,t,n,r,s)=>(i._sqlite3_db_status=m.sqlite3_db_status)(e,t,n,r,s),i._sqlite3_msize=e=>(i._sqlite3_msize=m.sqlite3_msize)(e),i._sqlite3_vfs_find=e=>(i._sqlite3_vfs_find=m.sqlite3_vfs_find)(e),i._sqlite3_initialize=()=>(i._sqlite3_initialize=m.sqlite3_initialize)(),i._sqlite3_malloc=e=>(i._sqlite3_malloc=m.sqlite3_malloc)(e),i._sqlite3_free=e=>(i._sqlite3_free=m.sqlite3_free)(e),i._sqlite3_vfs_register=(e,t)=>(i._sqlite3_vfs_register=m.sqlite3_vfs_register)(e,t),i._sqlite3_vfs_unregister=e=>(i._sqlite3_vfs_unregister=m.sqlite3_vfs_unregister)(e),i._sqlite3_malloc64=e=>(i._sqlite3_malloc64=m.sqlite3_malloc64)(e),i._sqlite3_realloc=(e,t)=>(i._sqlite3_realloc=m.sqlite3_realloc)(e,t),i._sqlite3_realloc64=(e,t)=>(i._sqlite3_realloc64=m.sqlite3_realloc64)(e,t),i._sqlite3_value_text=e=>(i._sqlite3_value_text=m.sqlite3_value_text)(e),i._sqlite3_randomness=(e,t)=>(i._sqlite3_randomness=m.sqlite3_randomness)(e,t),i._sqlite3_stricmp=(e,t)=>(i._sqlite3_stricmp=m.sqlite3_stricmp)(e,t),i._sqlite3_strnicmp=(e,t,n)=>(i._sqlite3_strnicmp=m.sqlite3_strnicmp)(e,t,n),i._sqlite3_uri_parameter=(e,t)=>(i._sqlite3_uri_parameter=m.sqlite3_uri_parameter)(e,t),i._sqlite3_uri_boolean=(e,t,n)=>(i._sqlite3_uri_boolean=m.sqlite3_uri_boolean)(e,t,n),i._sqlite3_serialize=(e,t,n,r)=>(i._sqlite3_serialize=m.sqlite3_serialize)(e,t,n,r),i._sqlite3_prepare_v2=(e,t,n,r,s)=>(i._sqlite3_prepare_v2=m.sqlite3_prepare_v2)(e,t,n,r,s),i._sqlite3_step=e=>(i._sqlite3_step=m.sqlite3_step)(e),i._sqlite3_column_int64=(e,t)=>(i._sqlite3_column_int64=m.sqlite3_column_int64)(e,t),i._sqlite3_reset=e=>(i._sqlite3_reset=m.sqlite3_reset)(e),i._sqlite3_exec=(e,t,n,r,s)=>(i._sqlite3_exec=m.sqlite3_exec)(e,t,n,r,s),i._sqlite3_column_int=(e,t)=>(i._sqlite3_column_int=m.sqlite3_column_int)(e,t),i._sqlite3_finalize=e=>(i._sqlite3_finalize=m.sqlite3_finalize)(e),i._sqlite3_file_control=(e,t,n,r)=>(i._sqlite3_file_control=m.sqlite3_file_control)(e,t,n,r),i._sqlite3_column_name=(e,t)=>(i._sqlite3_column_name=m.sqlite3_column_name)(e,t),i._sqlite3_column_text=(e,t)=>(i._sqlite3_column_text=m.sqlite3_column_text)(e,t),i._sqlite3_column_type=(e,t)=>(i._sqlite3_column_type=m.sqlite3_column_type)(e,t),i._sqlite3_errmsg=e=>(i._sqlite3_errmsg=m.sqlite3_errmsg)(e),i._sqlite3_deserialize=(e,t,n,r,s,o)=>(i._sqlite3_deserialize=m.sqlite3_deserialize)(e,t,n,r,s,o),i._sqlite3_clear_bindings=e=>(i._sqlite3_clear_bindings=m.sqlite3_clear_bindings)(e),i._sqlite3_value_blob=e=>(i._sqlite3_value_blob=m.sqlite3_value_blob)(e),i._sqlite3_value_bytes=e=>(i._sqlite3_value_bytes=m.sqlite3_value_bytes)(e),i._sqlite3_value_double=e=>(i._sqlite3_value_double=m.sqlite3_value_double)(e),i._sqlite3_value_int=e=>(i._sqlite3_value_int=m.sqlite3_value_int)(e),i._sqlite3_value_int64=e=>(i._sqlite3_value_int64=m.sqlite3_value_int64)(e),i._sqlite3_value_subtype=e=>(i._sqlite3_value_subtype=m.sqlite3_value_subtype)(e),i._sqlite3_value_pointer=(e,t)=>(i._sqlite3_value_pointer=m.sqlite3_value_pointer)(e,t),i._sqlite3_value_type=e=>(i._sqlite3_value_type=m.sqlite3_value_type)(e),i._sqlite3_value_nochange=e=>(i._sqlite3_value_nochange=m.sqlite3_value_nochange)(e),i._sqlite3_value_frombind=e=>(i._sqlite3_value_frombind=m.sqlite3_value_frombind)(e),i._sqlite3_value_dup=e=>(i._sqlite3_value_dup=m.sqlite3_value_dup)(e),i._sqlite3_value_free=e=>(i._sqlite3_value_free=m.sqlite3_value_free)(e),i._sqlite3_result_blob=(e,t,n,r)=>(i._sqlite3_result_blob=m.sqlite3_result_blob)(e,t,n,r),i._sqlite3_result_error_toobig=e=>(i._sqlite3_result_error_toobig=m.sqlite3_result_error_toobig)(e),i._sqlite3_result_error_nomem=e=>(i._sqlite3_result_error_nomem=m.sqlite3_result_error_nomem)(e),i._sqlite3_result_double=(e,t)=>(i._sqlite3_result_double=m.sqlite3_result_double)(e,t),i._sqlite3_result_error=(e,t,n)=>(i._sqlite3_result_error=m.sqlite3_result_error)(e,t,n),i._sqlite3_result_int=(e,t)=>(i._sqlite3_result_int=m.sqlite3_result_int)(e,t),i._sqlite3_result_int64=(e,t)=>(i._sqlite3_result_int64=m.sqlite3_result_int64)(e,t),i._sqlite3_result_null=e=>(i._sqlite3_result_null=m.sqlite3_result_null)(e),i._sqlite3_result_pointer=(e,t,n,r)=>(i._sqlite3_result_pointer=m.sqlite3_result_pointer)(e,t,n,r),i._sqlite3_result_subtype=(e,t)=>(i._sqlite3_result_subtype=m.sqlite3_result_subtype)(e,t),i._sqlite3_result_text=(e,t,n,r)=>(i._sqlite3_result_text=m.sqlite3_result_text)(e,t,n,r),i._sqlite3_result_zeroblob=(e,t)=>(i._sqlite3_result_zeroblob=m.sqlite3_result_zeroblob)(e,t),i._sqlite3_result_zeroblob64=(e,t)=>(i._sqlite3_result_zeroblob64=m.sqlite3_result_zeroblob64)(e,t),i._sqlite3_result_error_code=(e,t)=>(i._sqlite3_result_error_code=m.sqlite3_result_error_code)(e,t),i._sqlite3_user_data=e=>(i._sqlite3_user_data=m.sqlite3_user_data)(e),i._sqlite3_context_db_handle=e=>(i._sqlite3_context_db_handle=m.sqlite3_context_db_handle)(e),i._sqlite3_vtab_nochange=e=>(i._sqlite3_vtab_nochange=m.sqlite3_vtab_nochange)(e),i._sqlite3_vtab_in_first=(e,t)=>(i._sqlite3_vtab_in_first=m.sqlite3_vtab_in_first)(e,t),i._sqlite3_vtab_in_next=(e,t)=>(i._sqlite3_vtab_in_next=m.sqlite3_vtab_in_next)(e,t),i._sqlite3_aggregate_context=(e,t)=>(i._sqlite3_aggregate_context=m.sqlite3_aggregate_context)(e,t),i._sqlite3_get_auxdata=(e,t)=>(i._sqlite3_get_auxdata=m.sqlite3_get_auxdata)(e,t),i._sqlite3_set_auxdata=(e,t,n,r)=>(i._sqlite3_set_auxdata=m.sqlite3_set_auxdata)(e,t,n,r),i._sqlite3_column_count=e=>(i._sqlite3_column_count=m.sqlite3_column_count)(e),i._sqlite3_data_count=e=>(i._sqlite3_data_count=m.sqlite3_data_count)(e),i._sqlite3_column_blob=(e,t)=>(i._sqlite3_column_blob=m.sqlite3_column_blob)(e,t),i._sqlite3_column_bytes=(e,t)=>(i._sqlite3_column_bytes=m.sqlite3_column_bytes)(e,t),i._sqlite3_column_double=(e,t)=>(i._sqlite3_column_double=m.sqlite3_column_double)(e,t),i._sqlite3_column_value=(e,t)=>(i._sqlite3_column_value=m.sqlite3_column_value)(e,t),i._sqlite3_column_decltype=(e,t)=>(i._sqlite3_column_decltype=m.sqlite3_column_decltype)(e,t),i._sqlite3_bind_blob=(e,t,n,r,s)=>(i._sqlite3_bind_blob=m.sqlite3_bind_blob)(e,t,n,r,s),i._sqlite3_bind_double=(e,t,n)=>(i._sqlite3_bind_double=m.sqlite3_bind_double)(e,t,n),i._sqlite3_bind_int=(e,t,n)=>(i._sqlite3_bind_int=m.sqlite3_bind_int)(e,t,n),i._sqlite3_bind_int64=(e,t,n)=>(i._sqlite3_bind_int64=m.sqlite3_bind_int64)(e,t,n),i._sqlite3_bind_null=(e,t)=>(i._sqlite3_bind_null=m.sqlite3_bind_null)(e,t),i._sqlite3_bind_pointer=(e,t,n,r,s)=>(i._sqlite3_bind_pointer=m.sqlite3_bind_pointer)(e,t,n,r,s),i._sqlite3_bind_text=(e,t,n,r,s)=>(i._sqlite3_bind_text=m.sqlite3_bind_text)(e,t,n,r,s),i._sqlite3_bind_parameter_count=e=>(i._sqlite3_bind_parameter_count=m.sqlite3_bind_parameter_count)(e),i._sqlite3_bind_parameter_name=(e,t)=>(i._sqlite3_bind_parameter_name=m.sqlite3_bind_parameter_name)(e,t),i._sqlite3_bind_parameter_index=(e,t)=>(i._sqlite3_bind_parameter_index=m.sqlite3_bind_parameter_index)(e,t),i._sqlite3_db_handle=e=>(i._sqlite3_db_handle=m.sqlite3_db_handle)(e),i._sqlite3_stmt_readonly=e=>(i._sqlite3_stmt_readonly=m.sqlite3_stmt_readonly)(e),i._sqlite3_stmt_isexplain=e=>(i._sqlite3_stmt_isexplain=m.sqlite3_stmt_isexplain)(e),i._sqlite3_stmt_explain=(e,t)=>(i._sqlite3_stmt_explain=m.sqlite3_stmt_explain)(e,t),i._sqlite3_stmt_busy=e=>(i._sqlite3_stmt_busy=m.sqlite3_stmt_busy)(e),i._sqlite3_stmt_status=(e,t,n)=>(i._sqlite3_stmt_status=m.sqlite3_stmt_status)(e,t,n),i._sqlite3_sql=e=>(i._sqlite3_sql=m.sqlite3_sql)(e),i._sqlite3_expanded_sql=e=>(i._sqlite3_expanded_sql=m.sqlite3_expanded_sql)(e),i._sqlite3_preupdate_old=(e,t,n)=>(i._sqlite3_preupdate_old=m.sqlite3_preupdate_old)(e,t,n),i._sqlite3_preupdate_count=e=>(i._sqlite3_preupdate_count=m.sqlite3_preupdate_count)(e),i._sqlite3_preupdate_depth=e=>(i._sqlite3_preupdate_depth=m.sqlite3_preupdate_depth)(e),i._sqlite3_preupdate_blobwrite=e=>(i._sqlite3_preupdate_blobwrite=m.sqlite3_preupdate_blobwrite)(e),i._sqlite3_preupdate_new=(e,t,n)=>(i._sqlite3_preupdate_new=m.sqlite3_preupdate_new)(e,t,n),i._sqlite3_value_numeric_type=e=>(i._sqlite3_value_numeric_type=m.sqlite3_value_numeric_type)(e),i._sqlite3_set_authorizer=(e,t,n)=>(i._sqlite3_set_authorizer=m.sqlite3_set_authorizer)(e,t,n),i._sqlite3_strglob=(e,t)=>(i._sqlite3_strglob=m.sqlite3_strglob)(e,t),i._sqlite3_strlike=(e,t,n)=>(i._sqlite3_strlike=m.sqlite3_strlike)(e,t,n),i._sqlite3_auto_extension=e=>(i._sqlite3_auto_extension=m.sqlite3_auto_extension)(e),i._sqlite3_cancel_auto_extension=e=>(i._sqlite3_cancel_auto_extension=m.sqlite3_cancel_auto_extension)(e),i._sqlite3_reset_auto_extension=()=>(i._sqlite3_reset_auto_extension=m.sqlite3_reset_auto_extension)(),i._sqlite3_prepare_v3=(e,t,n,r,s,o)=>(i._sqlite3_prepare_v3=m.sqlite3_prepare_v3)(e,t,n,r,s,o),i._sqlite3_create_module=(e,t,n,r)=>(i._sqlite3_create_module=m.sqlite3_create_module)(e,t,n,r),i._sqlite3_create_module_v2=(e,t,n,r,s)=>(i._sqlite3_create_module_v2=m.sqlite3_create_module_v2)(e,t,n,r,s),i._sqlite3_drop_modules=(e,t)=>(i._sqlite3_drop_modules=m.sqlite3_drop_modules)(e,t),i._sqlite3_declare_vtab=(e,t)=>(i._sqlite3_declare_vtab=m.sqlite3_declare_vtab)(e,t),i._sqlite3_vtab_on_conflict=e=>(i._sqlite3_vtab_on_conflict=m.sqlite3_vtab_on_conflict)(e),i._sqlite3_vtab_collation=(e,t)=>(i._sqlite3_vtab_collation=m.sqlite3_vtab_collation)(e,t),i._sqlite3_vtab_in=(e,t,n)=>(i._sqlite3_vtab_in=m.sqlite3_vtab_in)(e,t,n),i._sqlite3_vtab_rhs_value=(e,t,n)=>(i._sqlite3_vtab_rhs_value=m.sqlite3_vtab_rhs_value)(e,t,n),i._sqlite3_vtab_distinct=e=>(i._sqlite3_vtab_distinct=m.sqlite3_vtab_distinct)(e),i._sqlite3_keyword_name=(e,t,n)=>(i._sqlite3_keyword_name=m.sqlite3_keyword_name)(e,t,n),i._sqlite3_keyword_count=()=>(i._sqlite3_keyword_count=m.sqlite3_keyword_count)(),i._sqlite3_keyword_check=(e,t)=>(i._sqlite3_keyword_check=m.sqlite3_keyword_check)(e,t),i._sqlite3_complete=e=>(i._sqlite3_complete=m.sqlite3_complete)(e),i._sqlite3_libversion=()=>(i._sqlite3_libversion=m.sqlite3_libversion)(),i._sqlite3_libversion_number=()=>(i._sqlite3_libversion_number=m.sqlite3_libversion_number)(),i._sqlite3_shutdown=()=>(i._sqlite3_shutdown=m.sqlite3_shutdown)(),i._sqlite3_last_insert_rowid=e=>(i._sqlite3_last_insert_rowid=m.sqlite3_last_insert_rowid)(e),i._sqlite3_set_last_insert_rowid=(e,t)=>(i._sqlite3_set_last_insert_rowid=m.sqlite3_set_last_insert_rowid)(e,t),i._sqlite3_changes64=e=>(i._sqlite3_changes64=m.sqlite3_changes64)(e),i._sqlite3_changes=e=>(i._sqlite3_changes=m.sqlite3_changes)(e),i._sqlite3_total_changes64=e=>(i._sqlite3_total_changes64=m.sqlite3_total_changes64)(e),i._sqlite3_total_changes=e=>(i._sqlite3_total_changes=m.sqlite3_total_changes)(e),i._sqlite3_txn_state=(e,t)=>(i._sqlite3_txn_state=m.sqlite3_txn_state)(e,t),i._sqlite3_close_v2=e=>(i._sqlite3_close_v2=m.sqlite3_close_v2)(e),i._sqlite3_busy_handler=(e,t,n)=>(i._sqlite3_busy_handler=m.sqlite3_busy_handler)(e,t,n),i._sqlite3_progress_handler=(e,t,n,r)=>(i._sqlite3_progress_handler=m.sqlite3_progress_handler)(e,t,n,r),i._sqlite3_busy_timeout=(e,t)=>(i._sqlite3_busy_timeout=m.sqlite3_busy_timeout)(e,t),i._sqlite3_interrupt=e=>(i._sqlite3_interrupt=m.sqlite3_interrupt)(e),i._sqlite3_is_interrupted=e=>(i._sqlite3_is_interrupted=m.sqlite3_is_interrupted)(e),i._sqlite3_create_function=(e,t,n,r,s,o,h,g)=>(i._sqlite3_create_function=m.sqlite3_create_function)(e,t,n,r,s,o,h,g),i._sqlite3_create_function_v2=(e,t,n,r,s,o,h,g,P)=>(i._sqlite3_create_function_v2=m.sqlite3_create_function_v2)(e,t,n,r,s,o,h,g,P),i._sqlite3_create_window_function=(e,t,n,r,s,o,h,g,P,D)=>(i._sqlite3_create_window_function=m.sqlite3_create_window_function)(e,t,n,r,s,o,h,g,P,D),i._sqlite3_overload_function=(e,t,n)=>(i._sqlite3_overload_function=m.sqlite3_overload_function)(e,t,n),i._sqlite3_trace_v2=(e,t,n,r)=>(i._sqlite3_trace_v2=m.sqlite3_trace_v2)(e,t,n,r),i._sqlite3_commit_hook=(e,t,n)=>(i._sqlite3_commit_hook=m.sqlite3_commit_hook)(e,t,n),i._sqlite3_update_hook=(e,t,n)=>(i._sqlite3_update_hook=m.sqlite3_update_hook)(e,t,n),i._sqlite3_rollback_hook=(e,t,n)=>(i._sqlite3_rollback_hook=m.sqlite3_rollback_hook)(e,t,n),i._sqlite3_preupdate_hook=(e,t,n)=>(i._sqlite3_preupdate_hook=m.sqlite3_preupdate_hook)(e,t,n),i._sqlite3_error_offset=e=>(i._sqlite3_error_offset=m.sqlite3_error_offset)(e),i._sqlite3_errcode=e=>(i._sqlite3_errcode=m.sqlite3_errcode)(e),i._sqlite3_extended_errcode=e=>(i._sqlite3_extended_errcode=m.sqlite3_extended_errcode)(e),i._sqlite3_errstr=e=>(i._sqlite3_errstr=m.sqlite3_errstr)(e),i._sqlite3_limit=(e,t,n)=>(i._sqlite3_limit=m.sqlite3_limit)(e,t,n),i._sqlite3_open=(e,t)=>(i._sqlite3_open=m.sqlite3_open)(e,t),i._sqlite3_open_v2=(e,t,n,r)=>(i._sqlite3_open_v2=m.sqlite3_open_v2)(e,t,n,r),i._sqlite3_create_collation=(e,t,n,r,s)=>(i._sqlite3_create_collation=m.sqlite3_create_collation)(e,t,n,r,s),i._sqlite3_create_collation_v2=(e,t,n,r,s,o)=>(i._sqlite3_create_collation_v2=m.sqlite3_create_collation_v2)(e,t,n,r,s,o),i._sqlite3_collation_needed=(e,t,n)=>(i._sqlite3_collation_needed=m.sqlite3_collation_needed)(e,t,n),i._sqlite3_get_autocommit=e=>(i._sqlite3_get_autocommit=m.sqlite3_get_autocommit)(e),i._sqlite3_table_column_metadata=(e,t,n,r,s,o,h,g,P)=>(i._sqlite3_table_column_metadata=m.sqlite3_table_column_metadata)(e,t,n,r,s,o,h,g,P),i._sqlite3_extended_result_codes=(e,t)=>(i._sqlite3_extended_result_codes=m.sqlite3_extended_result_codes)(e,t),i._sqlite3_uri_key=(e,t)=>(i._sqlite3_uri_key=m.sqlite3_uri_key)(e,t),i._sqlite3_uri_int64=(e,t,n)=>(i._sqlite3_uri_int64=m.sqlite3_uri_int64)(e,t,n),i._sqlite3_db_name=(e,t)=>(i._sqlite3_db_name=m.sqlite3_db_name)(e,t),i._sqlite3_db_filename=(e,t)=>(i._sqlite3_db_filename=m.sqlite3_db_filename)(e,t),i._sqlite3_db_readonly=(e,t)=>(i._sqlite3_db_readonly=m.sqlite3_db_readonly)(e,t),i._sqlite3_compileoption_used=e=>(i._sqlite3_compileoption_used=m.sqlite3_compileoption_used)(e),i._sqlite3_compileoption_get=e=>(i._sqlite3_compileoption_get=m.sqlite3_compileoption_get)(e),i._sqlite3session_diff=(e,t,n,r)=>(i._sqlite3session_diff=m.sqlite3session_diff)(e,t,n,r),i._sqlite3session_attach=(e,t)=>(i._sqlite3session_attach=m.sqlite3session_attach)(e,t),i._sqlite3session_create=(e,t,n)=>(i._sqlite3session_create=m.sqlite3session_create)(e,t,n),i._sqlite3session_delete=e=>(i._sqlite3session_delete=m.sqlite3session_delete)(e),i._sqlite3session_table_filter=(e,t,n)=>(i._sqlite3session_table_filter=m.sqlite3session_table_filter)(e,t,n),i._sqlite3session_changeset=(e,t,n)=>(i._sqlite3session_changeset=m.sqlite3session_changeset)(e,t,n),i._sqlite3session_changeset_strm=(e,t,n)=>(i._sqlite3session_changeset_strm=m.sqlite3session_changeset_strm)(e,t,n),i._sqlite3session_patchset_strm=(e,t,n)=>(i._sqlite3session_patchset_strm=m.sqlite3session_patchset_strm)(e,t,n),i._sqlite3session_patchset=(e,t,n)=>(i._sqlite3session_patchset=m.sqlite3session_patchset)(e,t,n),i._sqlite3session_enable=(e,t)=>(i._sqlite3session_enable=m.sqlite3session_enable)(e,t),i._sqlite3session_indirect=(e,t)=>(i._sqlite3session_indirect=m.sqlite3session_indirect)(e,t),i._sqlite3session_isempty=e=>(i._sqlite3session_isempty=m.sqlite3session_isempty)(e),i._sqlite3session_memory_used=e=>(i._sqlite3session_memory_used=m.sqlite3session_memory_used)(e),i._sqlite3session_object_config=(e,t,n)=>(i._sqlite3session_object_config=m.sqlite3session_object_config)(e,t,n),i._sqlite3session_changeset_size=e=>(i._sqlite3session_changeset_size=m.sqlite3session_changeset_size)(e),i._sqlite3changeset_start=(e,t,n)=>(i._sqlite3changeset_start=m.sqlite3changeset_start)(e,t,n),i._sqlite3changeset_start_v2=(e,t,n,r)=>(i._sqlite3changeset_start_v2=m.sqlite3changeset_start_v2)(e,t,n,r),i._sqlite3changeset_start_strm=(e,t,n)=>(i._sqlite3changeset_start_strm=m.sqlite3changeset_start_strm)(e,t,n),i._sqlite3changeset_start_v2_strm=(e,t,n,r)=>(i._sqlite3changeset_start_v2_strm=m.sqlite3changeset_start_v2_strm)(e,t,n,r),i._sqlite3changeset_next=e=>(i._sqlite3changeset_next=m.sqlite3changeset_next)(e),i._sqlite3changeset_op=(e,t,n,r,s)=>(i._sqlite3changeset_op=m.sqlite3changeset_op)(e,t,n,r,s),i._sqlite3changeset_pk=(e,t,n)=>(i._sqlite3changeset_pk=m.sqlite3changeset_pk)(e,t,n),i._sqlite3changeset_old=(e,t,n)=>(i._sqlite3changeset_old=m.sqlite3changeset_old)(e,t,n),i._sqlite3changeset_new=(e,t,n)=>(i._sqlite3changeset_new=m.sqlite3changeset_new)(e,t,n),i._sqlite3changeset_conflict=(e,t,n)=>(i._sqlite3changeset_conflict=m.sqlite3changeset_conflict)(e,t,n),i._sqlite3changeset_fk_conflicts=(e,t)=>(i._sqlite3changeset_fk_conflicts=m.sqlite3changeset_fk_conflicts)(e,t),i._sqlite3changeset_finalize=e=>(i._sqlite3changeset_finalize=m.sqlite3changeset_finalize)(e),i._sqlite3changeset_invert=(e,t,n,r)=>(i._sqlite3changeset_invert=m.sqlite3changeset_invert)(e,t,n,r),i._sqlite3changeset_invert_strm=(e,t,n,r)=>(i._sqlite3changeset_invert_strm=m.sqlite3changeset_invert_strm)(e,t,n,r),i._sqlite3changeset_apply_v2=(e,t,n,r,s,o,h,g,P)=>(i._sqlite3changeset_apply_v2=m.sqlite3changeset_apply_v2)(e,t,n,r,s,o,h,g,P),i._sqlite3changeset_apply=(e,t,n,r,s,o)=>(i._sqlite3changeset_apply=m.sqlite3changeset_apply)(e,t,n,r,s,o),i._sqlite3changeset_apply_v2_strm=(e,t,n,r,s,o,h,g,P)=>(i._sqlite3changeset_apply_v2_strm=m.sqlite3changeset_apply_v2_strm)(e,t,n,r,s,o,h,g,P),i._sqlite3changeset_apply_strm=(e,t,n,r,s,o)=>(i._sqlite3changeset_apply_strm=m.sqlite3changeset_apply_strm)(e,t,n,r,s,o),i._sqlite3changegroup_new=e=>(i._sqlite3changegroup_new=m.sqlite3changegroup_new)(e),i._sqlite3changegroup_add=(e,t,n)=>(i._sqlite3changegroup_add=m.sqlite3changegroup_add)(e,t,n),i._sqlite3changegroup_output=(e,t,n)=>(i._sqlite3changegroup_output=m.sqlite3changegroup_output)(e,t,n),i._sqlite3changegroup_add_strm=(e,t,n)=>(i._sqlite3changegroup_add_strm=m.sqlite3changegroup_add_strm)(e,t,n),i._sqlite3changegroup_output_strm=(e,t,n)=>(i._sqlite3changegroup_output_strm=m.sqlite3changegroup_output_strm)(e,t,n),i._sqlite3changegroup_delete=e=>(i._sqlite3changegroup_delete=m.sqlite3changegroup_delete)(e),i._sqlite3changeset_concat=(e,t,n,r,s,o)=>(i._sqlite3changeset_concat=m.sqlite3changeset_concat)(e,t,n,r,s,o),i._sqlite3changeset_concat_strm=(e,t,n,r,s,o)=>(i._sqlite3changeset_concat_strm=m.sqlite3changeset_concat_strm)(e,t,n,r,s,o),i._sqlite3session_config=(e,t)=>(i._sqlite3session_config=m.sqlite3session_config)(e,t),i._sqlite3_sourceid=()=>(i._sqlite3_sourceid=m.sqlite3_sourceid)(),i._sqlite3__wasm_pstack_ptr=()=>(i._sqlite3__wasm_pstack_ptr=m.sqlite3__wasm_pstack_ptr)(),i._sqlite3__wasm_pstack_restore=e=>(i._sqlite3__wasm_pstack_restore=m.sqlite3__wasm_pstack_restore)(e),i._sqlite3__wasm_pstack_alloc=e=>(i._sqlite3__wasm_pstack_alloc=m.sqlite3__wasm_pstack_alloc)(e),i._sqlite3__wasm_pstack_remaining=()=>(i._sqlite3__wasm_pstack_remaining=m.sqlite3__wasm_pstack_remaining)(),i._sqlite3__wasm_pstack_quota=()=>(i._sqlite3__wasm_pstack_quota=m.sqlite3__wasm_pstack_quota)(),i._sqlite3__wasm_db_error=(e,t,n)=>(i._sqlite3__wasm_db_error=m.sqlite3__wasm_db_error)(e,t,n),i._sqlite3__wasm_test_struct=e=>(i._sqlite3__wasm_test_struct=m.sqlite3__wasm_test_struct)(e),i._sqlite3__wasm_enum_json=()=>(i._sqlite3__wasm_enum_json=m.sqlite3__wasm_enum_json)(),i._sqlite3__wasm_vfs_unlink=(e,t)=>(i._sqlite3__wasm_vfs_unlink=m.sqlite3__wasm_vfs_unlink)(e,t),i._sqlite3__wasm_db_vfs=(e,t)=>(i._sqlite3__wasm_db_vfs=m.sqlite3__wasm_db_vfs)(e,t),i._sqlite3__wasm_db_reset=e=>(i._sqlite3__wasm_db_reset=m.sqlite3__wasm_db_reset)(e),i._sqlite3__wasm_db_export_chunked=(e,t)=>(i._sqlite3__wasm_db_export_chunked=m.sqlite3__wasm_db_export_chunked)(e,t),i._sqlite3__wasm_db_serialize=(e,t,n,r,s)=>(i._sqlite3__wasm_db_serialize=m.sqlite3__wasm_db_serialize)(e,t,n,r,s),i._sqlite3__wasm_vfs_create_file=(e,t,n,r)=>(i._sqlite3__wasm_vfs_create_file=m.sqlite3__wasm_vfs_create_file)(e,t,n,r),i._sqlite3__wasm_posix_create_file=(e,t,n)=>(i._sqlite3__wasm_posix_create_file=m.sqlite3__wasm_posix_create_file)(e,t,n),i._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(i._sqlite3__wasm_kvvfsMakeKeyOnPstack=m.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),i._sqlite3__wasm_kvvfs_methods=()=>(i._sqlite3__wasm_kvvfs_methods=m.sqlite3__wasm_kvvfs_methods)(),i._sqlite3__wasm_vtab_config=(e,t,n)=>(i._sqlite3__wasm_vtab_config=m.sqlite3__wasm_vtab_config)(e,t,n),i._sqlite3__wasm_db_config_ip=(e,t,n,r)=>(i._sqlite3__wasm_db_config_ip=m.sqlite3__wasm_db_config_ip)(e,t,n,r),i._sqlite3__wasm_db_config_pii=(e,t,n,r,s)=>(i._sqlite3__wasm_db_config_pii=m.sqlite3__wasm_db_config_pii)(e,t,n,r,s),i._sqlite3__wasm_db_config_s=(e,t,n)=>(i._sqlite3__wasm_db_config_s=m.sqlite3__wasm_db_config_s)(e,t,n),i._sqlite3__wasm_config_i=(e,t)=>(i._sqlite3__wasm_config_i=m.sqlite3__wasm_config_i)(e,t),i._sqlite3__wasm_config_ii=(e,t,n)=>(i._sqlite3__wasm_config_ii=m.sqlite3__wasm_config_ii)(e,t,n),i._sqlite3__wasm_config_j=(e,t)=>(i._sqlite3__wasm_config_j=m.sqlite3__wasm_config_j)(e,t),i._sqlite3__wasm_qfmt_token=(e,t)=>(i._sqlite3__wasm_qfmt_token=m.sqlite3__wasm_qfmt_token)(e,t),i._sqlite3__wasm_init_wasmfs=e=>(i._sqlite3__wasm_init_wasmfs=m.sqlite3__wasm_init_wasmfs)(e),i._sqlite3__wasm_test_intptr=e=>(i._sqlite3__wasm_test_intptr=m.sqlite3__wasm_test_intptr)(e),i._sqlite3__wasm_test_voidptr=e=>(i._sqlite3__wasm_test_voidptr=m.sqlite3__wasm_test_voidptr)(e),i._sqlite3__wasm_test_int64_max=()=>(i._sqlite3__wasm_test_int64_max=m.sqlite3__wasm_test_int64_max)(),i._sqlite3__wasm_test_int64_min=()=>(i._sqlite3__wasm_test_int64_min=m.sqlite3__wasm_test_int64_min)(),i._sqlite3__wasm_test_int64_times2=e=>(i._sqlite3__wasm_test_int64_times2=m.sqlite3__wasm_test_int64_times2)(e),i._sqlite3__wasm_test_int64_minmax=(e,t)=>(i._sqlite3__wasm_test_int64_minmax=m.sqlite3__wasm_test_int64_minmax)(e,t),i._sqlite3__wasm_test_int64ptr=e=>(i._sqlite3__wasm_test_int64ptr=m.sqlite3__wasm_test_int64ptr)(e),i._sqlite3__wasm_test_stack_overflow=e=>(i._sqlite3__wasm_test_stack_overflow=m.sqlite3__wasm_test_stack_overflow)(e),i._sqlite3__wasm_test_str_hello=e=>(i._sqlite3__wasm_test_str_hello=m.sqlite3__wasm_test_str_hello)(e),i._sqlite3__wasm_SQLTester_strglob=(e,t)=>(i._sqlite3__wasm_SQLTester_strglob=m.sqlite3__wasm_SQLTester_strglob)(e,t),i._malloc=e=>(i._malloc=m.malloc)(e),i._free=e=>(i._free=m.free)(e),i._realloc=(e,t)=>(i._realloc=m.realloc)(e,t);var $t=(e,t)=>($t=m.emscripten_builtin_memalign)(e,t);i.wasmMemory=Ce;var at;Xe=function e(){at||Gt(),at||(Xe=e)};function Gt(){if(Qe>0||(ln(),Qe>0))return;function e(){at||(at=!0,i.calledRun=!0,!je&&(cn(),Z(i),i.onRuntimeInitialized?.(),_n()))}i.setStatus?(i.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>i.setStatus(""),1),e()},1)):e()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return Gt(),i.postRun||(i.postRun=[]),i.postRun.push(function(e){if(globalThis.sqlite3ApiBootstrap=function t(n=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof e<"u"&&e.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},n||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(a=>{typeof r[a]=="function"&&(r[a]=r[a]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const s=Object.create(null),o=Object.create(null),h=a=>s.sqlite3_js_rc_str&&s.sqlite3_js_rc_str(a)||"Unknown result code #"+a,g=a=>typeof a=="number"&&a===(a|0);class P extends Error{constructor(..._){let u;if(_.length)if(g(_[0]))if(u=_[0],_.length===1)super(h(_[0]));else{const k=h(u);typeof _[1]=="object"?super(k,_[1]):(_[0]=k+":",super(_.join(" ")))}else _.length===2&&typeof _[1]=="object"?super(..._):super(_.join(" "));this.resultCode=u||s.SQLITE_ERROR,this.name="SQLite3Error"}}P.toss=(...a)=>{throw new P(...a)};const D=P.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&D("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const U=a=>typeof a!="bigint"&&a===(a|0)&&a<=2147483647&&a>=-2147483648,Q=function a(_){return a._max||(a._max=BigInt("0x7fffffffffffffff"),a._min=~a._max),_>=a._min&&_<=a._max},T=a=>a>=-0x7fffffffn-1n&&a<=0x7fffffffn,S=function a(_){return a._min||(a._min=Number.MIN_SAFE_INTEGER,a._max=Number.MAX_SAFE_INTEGER),_>=a._min&&_<=a._max},C=a=>a&&a.constructor&&U(a.constructor.BYTES_PER_ELEMENT)?a:!1,b=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,w=a=>a.buffer instanceof b,E=(a,_,u)=>w(a)?a.slice(_,u):a.subarray(_,u),R=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),L=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),x=a=>R(a)||D("Value is not of a supported TypedArray type."),O=new TextDecoder("utf-8"),J=function(a,_,u){return O.decode(E(a,_,u))},c=function(a){return L(a)?J(a instanceof ArrayBuffer?new Uint8Array(a):a):Array.isArray(a)?a.join(""):(o.isPtr(a)&&(a=o.cstrToJs(a)),a)};class d extends Error{constructor(..._){_.length===2&&typeof _[1]=="object"?super(..._):_.length?super(_.join(" ")):super("Allocation failed."),this.resultCode=s.SQLITE_NOMEM,this.name="WasmAllocError"}}d.toss=(...a)=>{throw new d(...a)},Object.assign(s,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(a,_,u,k,z,ne,ae,_e,M)=>{},sqlite3_create_function:(a,_,u,k,z,ne,ae,_e)=>{},sqlite3_create_window_function:(a,_,u,k,z,ne,ae,_e,M,y)=>{},sqlite3_prepare_v3:(a,_,u,k,z,ne)=>{},sqlite3_prepare_v2:(a,_,u,k,z)=>{},sqlite3_exec:(a,_,u,k,z)=>{},sqlite3_randomness:(a,_)=>{}});const q={affirmBindableTypedArray:x,flexibleString:c,bigIntFits32:T,bigIntFits64:Q,bigIntFitsDouble:S,isBindableTypedArray:R,isInt32:U,isSQLableTypedArray:L,isTypedArray:C,typedArrayToString:J,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:w,toss:function(...a){throw new Error(a.join(" "))},toss3:D,typedArrayPart:E,affirmDbHeader:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const _="SQLite format 3";_.length>a.byteLength&&D("Input does not contain an SQLite3 database header.");for(let u=0;u<_.length;++u)_.charCodeAt(u)!==a[u]&&D("Input does not contain an SQLite3 database header.")},affirmIsDb:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const _=a.byteLength;(_<512||_%512!==0)&&D("Byte array size",_,"is invalid for an SQLite3 db."),q.affirmDbHeader(a)}};Object.assign(o,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||D("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||D("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),o.allocFromTypedArray=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a)),x(a);const _=o.alloc(a.byteLength||1);return o.heapForSize(a.constructor).set(a.byteLength?a:[0],_),_};{const a=r.allocExportName,_=r.deallocExportName,u=r.reallocExportName;for(const k of[a,_,u])o.exports[k]instanceof Function||D("Missing required exports[",k,"] function.");o.alloc=function k(z){return k.impl(z)||d.toss("Failed to allocate",z," bytes.")},o.alloc.impl=o.exports[a],o.realloc=function k(z,ne){const ae=k.impl(z,ne);return ne?ae||d.toss("Failed to reallocate",ne," bytes."):0},o.realloc.impl=o.exports[u],o.dealloc=o.exports[_]}o.compileOptionUsed=function a(_){if(arguments.length){if(Array.isArray(_)){const u={};return _.forEach(k=>{u[k]=s.sqlite3_compileoption_used(k)}),u}else if(typeof _=="object")return Object.keys(_).forEach(u=>{_[u]=s.sqlite3_compileoption_used(u)}),_}else{if(a._result)return a._result;a._opt||(a._rx=/^([^=]+)=(.+)/,a._rxInt=/^-?\d+$/,a._opt=function(ae,_e){const M=a._rx.exec(ae);_e[0]=M?M[1]:ae,_e[1]=M?a._rxInt.test(M[2])?+M[2]:M[2]:!0});const u={},k=[0,0];let z=0,ne;for(;ne=s.sqlite3_compileoption_get(z++);)a._opt(ne,k),u[k[0]]=k[1];return a._result=u}return typeof _=="string"?!!s.sqlite3_compileoption_used(_):!1},o.pstack=Object.assign(Object.create(null),{restore:o.exports.sqlite3__wasm_pstack_restore,alloc:function(a){return typeof a=="string"&&!(a=o.sizeofIR(a))&&d.toss("Invalid value for pstack.alloc(",arguments[0],")"),o.exports.sqlite3__wasm_pstack_alloc(a)||d.toss("Could not allocate",a,"bytes from the pstack.")},allocChunks:function(a,_){typeof _=="string"&&!(_=o.sizeofIR(_))&&d.toss("Invalid size value for allocChunks(",arguments[1],")");const u=o.pstack.alloc(a*_),k=[];let z=0,ne=0;for(;z<a;++z,ne+=_)k.push(u+ne);return k},allocPtr:(a=1,_=!0)=>a===1?o.pstack.alloc(_?8:o.ptrSizeof):o.pstack.allocChunks(a,_?8:o.ptrSizeof),call:function(a){const _=o.pstack.pointer;try{return a(p)}finally{o.pstack.restore(_)}}}),Object.defineProperties(o.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_remaining}}),s.sqlite3_randomness=(...a)=>{if(a.length===1&&q.isTypedArray(a[0])&&a[0].BYTES_PER_ELEMENT===1){const _=a[0];if(_.byteLength===0)return o.exports.sqlite3_randomness(0,0),_;const u=o.pstack.pointer;try{let k=_.byteLength,z=0;const ne=o.exports.sqlite3_randomness,ae=o.heap8u(),_e=k<512?k:512,M=o.pstack.alloc(_e);do{const y=k>_e?_e:k;ne(y,M),_.set(E(ae,M,M+y),z),k-=y,z+=y}while(k>0)}catch(k){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",k)}finally{o.pstack.restore(u)}return _}o.exports.sqlite3_randomness(...a)};let B;if(s.sqlite3_wasmfs_opfs_dir=function(){if(B!==void 0)return B;const a=r.wasmfsOpfsDir;if(!a||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return B="";try{return a&&o.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],a)===0?B=a:B=""}catch{return B=""}},s.sqlite3_wasmfs_filename_is_persistent=function(a){const _=s.sqlite3_wasmfs_opfs_dir();return _&&a?a.startsWith(_+"/"):!1},s.sqlite3_js_db_uses_vfs=function(a,_,u=0){try{const k=s.sqlite3_vfs_find(_);return k?a?k===s.sqlite3_js_db_vfs(a,u)?k:!1:k===s.sqlite3_vfs_find(0)?k:!1:!1}catch{return!1}},s.sqlite3_js_vfs_list=function(){const a=[];let _=s.sqlite3_vfs_find(0);for(;_;){const u=new s.sqlite3_vfs(_);a.push(o.cstrToJs(u.$zName)),_=u.$pNext,u.dispose()}return a},s.sqlite3_js_db_export=function(a,_=0){a=o.xWrap.testConvertArg("sqlite3*",a),a||D("Invalid sqlite3* argument."),o.bigIntEnabled||D("BigInt64 support is not enabled.");const u=o.scopedAllocPush();let k;try{const z=o.scopedAlloc(8+o.ptrSizeof),ne=z+8,ae=_?o.isPtr(_)?_:o.scopedAllocCString(""+_):0;let _e=o.exports.sqlite3__wasm_db_serialize(a,ae,ne,z,0);_e&&D("Database serialization failed with code",p.capi.sqlite3_js_rc_str(_e)),k=o.peekPtr(ne);const M=o.peek(z,"i64");return _e=M?o.heap8u().slice(k,k+Number(M)):new Uint8Array,_e}finally{k&&o.exports.sqlite3_free(k),o.scopedAllocPop(u)}},s.sqlite3_js_db_vfs=(a,_=0)=>q.sqlite3__wasm_db_vfs(a,_),s.sqlite3_js_aggregate_context=(a,_)=>s.sqlite3_aggregate_context(a,_)||(_?d.toss("Cannot allocate",_,"bytes for sqlite3_aggregate_context()"):0),s.sqlite3_js_posix_create_file=function(a,_,u){let k;_&&o.isPtr(_)?k=_:_ instanceof ArrayBuffer||_ instanceof Uint8Array?(k=o.allocFromTypedArray(_),(arguments.length<3||!q.isInt32(u)||u<0)&&(u=_.byteLength)):P.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!q.isInt32(u)||u<0)&&P.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const z=q.sqlite3__wasm_posix_create_file(a,k,u);z&&P.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(z))}finally{o.dealloc(k)}},s.sqlite3_js_vfs_create_file=function(a,_,u,k){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let z;u?(o.isPtr(u)?z=u:u instanceof ArrayBuffer&&(u=new Uint8Array(u)),u instanceof Uint8Array?(z=o.allocFromTypedArray(u),(arguments.length<4||!q.isInt32(k)||k<0)&&(k=u.byteLength)):P.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):z=0,(!q.isInt32(k)||k<0)&&(o.dealloc(z),P.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const ne=q.sqlite3__wasm_vfs_create_file(a,_,z,k);ne&&P.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(ne))}finally{o.dealloc(z)}},s.sqlite3_js_sql_to_string=a=>{if(typeof a=="string")return a;const _=c(v);return _===v?void 0:_},q.isUIThread()){const a=function(_){const u=Object.create(null);return u.prefix="kvvfs-"+_,u.stores=[],(_==="session"||_==="")&&u.stores.push(globalThis.sessionStorage),(_==="local"||_==="")&&u.stores.push(globalThis.localStorage),u};s.sqlite3_js_kvvfs_clear=function(_=""){let u=0;const k=a(_);return k.stores.forEach(z=>{const ne=[];let ae;for(ae=0;ae<z.length;++ae){const _e=z.key(ae);_e.startsWith(k.prefix)&&ne.push(_e)}ne.forEach(_e=>z.removeItem(_e)),u+=ne.length}),u},s.sqlite3_js_kvvfs_size=function(_=""){let u=0;const k=a(_);return k.stores.forEach(z=>{let ne;for(ne=0;ne<z.length;++ne){const ae=z.key(ne);ae.startsWith(k.prefix)&&(u+=ae.length,u+=z.getItem(ae).length)}}),u*2}}s.sqlite3_db_config=function(a,_,...u){switch(this.s||(this.s=o.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=o.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=o.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),_){case s.SQLITE_DBCONFIG_ENABLE_FKEY:case s.SQLITE_DBCONFIG_ENABLE_TRIGGER:case s.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case s.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case s.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case s.SQLITE_DBCONFIG_ENABLE_QPSG:case s.SQLITE_DBCONFIG_TRIGGER_EQP:case s.SQLITE_DBCONFIG_RESET_DATABASE:case s.SQLITE_DBCONFIG_DEFENSIVE:case s.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case s.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case s.SQLITE_DBCONFIG_DQS_DML:case s.SQLITE_DBCONFIG_DQS_DDL:case s.SQLITE_DBCONFIG_ENABLE_VIEW:case s.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case s.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case s.SQLITE_DBCONFIG_STMT_SCANSTATUS:case s.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(a,_,u[0],u[1]||0);case s.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(a,_,u[0],u[1],u[2]);case s.SQLITE_DBCONFIG_MAINDBNAME:return this.s(a,_,u[0]);default:return s.SQLITE_MISUSE}}.bind(Object.create(null)),s.sqlite3_value_to_js=function(a,_=!0){let u;const k=s.sqlite3_value_type(a);switch(k){case s.SQLITE_INTEGER:o.bigIntEnabled?(u=s.sqlite3_value_int64(a),q.bigIntFitsDouble(u)&&(u=Number(u))):u=s.sqlite3_value_double(a);break;case s.SQLITE_FLOAT:u=s.sqlite3_value_double(a);break;case s.SQLITE_TEXT:u=s.sqlite3_value_text(a);break;case s.SQLITE_BLOB:{const z=s.sqlite3_value_bytes(a),ne=s.sqlite3_value_blob(a);z&&!ne&&p.WasmAllocError.toss("Cannot allocate memory for blob argument of",z,"byte(s)"),u=z?o.heap8u().slice(ne,ne+Number(z)):null;break}case s.SQLITE_NULL:u=null;break;default:_&&D(s.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",k),u=void 0}return u},s.sqlite3_values_to_js=function(a,_,u=!0){let k;const z=[];for(k=0;k<a;++k)z.push(s.sqlite3_value_to_js(o.peekPtr(_+o.ptrSizeof*k),u));return z},s.sqlite3_result_error_js=function(a,_){_ instanceof d?s.sqlite3_result_error_nomem(a):s.sqlite3_result_error(a,""+_,-1)},s.sqlite3_result_js=function(a,_){if(_ instanceof Error){s.sqlite3_result_error_js(a,_);return}try{switch(typeof _){case"undefined":break;case"boolean":s.sqlite3_result_int(a,_?1:0);break;case"bigint":q.bigIntFits32(_)?s.sqlite3_result_int(a,Number(_)):q.bigIntFitsDouble(_)?s.sqlite3_result_double(a,Number(_)):o.bigIntEnabled?q.bigIntFits64(_)?s.sqlite3_result_int64(a,_):D("BigInt value",_.toString(),"is too BigInt for int64."):D("BigInt value",_.toString(),"is too BigInt.");break;case"number":{let u;q.isInt32(_)?u=s.sqlite3_result_int:o.bigIntEnabled&&Number.isInteger(_)&&q.bigIntFits64(BigInt(_))?u=s.sqlite3_result_int64:u=s.sqlite3_result_double,u(a,_);break}case"string":{const[u,k]=o.allocCString(_,!0);s.sqlite3_result_text(a,u,k,s.SQLITE_WASM_DEALLOC);break}case"object":if(_===null){s.sqlite3_result_null(a);break}else if(q.isBindableTypedArray(_)){const u=o.allocFromTypedArray(_);s.sqlite3_result_blob(a,u,_.byteLength,s.SQLITE_WASM_DEALLOC);break}default:D("Don't not how to handle this UDF result value:",typeof _,_)}}catch(u){s.sqlite3_result_error_js(a,u)}},s.sqlite3_column_js=function(a,_,u=!0){const k=s.sqlite3_column_value(a,_);return k===0?void 0:s.sqlite3_value_to_js(k,u)};const f=function(a,_,u){u=s[u],this.ptr?o.pokePtr(this.ptr,0):this.ptr=o.allocPtr();const k=u(a,_,this.ptr);if(k)return P.toss(k,arguments[2]+"() failed with code "+k);const z=o.peekPtr(this.ptr);return z?s.sqlite3_value_to_js(z,!0):void 0}.bind(Object.create(null));s.sqlite3_preupdate_new_js=(a,_)=>f(a,_,"sqlite3_preupdate_new"),s.sqlite3_preupdate_old_js=(a,_)=>f(a,_,"sqlite3_preupdate_old"),s.sqlite3changeset_new_js=(a,_)=>f(a,_,"sqlite3changeset_new"),s.sqlite3changeset_old_js=(a,_)=>f(a,_,"sqlite3changeset_old");const p={WasmAllocError:d,SQLite3Error:P,capi:s,util:q,wasm:o,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function a(){if(a.isReady instanceof Promise)return a.isReady;let _=t.initializersAsync;delete t.initializersAsync;const u=async()=>(p.__isUnderTest||(delete p.util,delete p.StructBinder),p),k=ne=>{throw r.error("an async sqlite3 initializer failed:",ne),ne};if(!_||!_.length)return a.isReady=u().catch(k);_=_.map(ne=>ne instanceof Function?async ae=>ne(p):ne),_.push(u);let z=Promise.resolve(p);for(;_.length;)z=z.then(_.shift());return a.isReady=z.catch(k)},scriptInfo:void 0};try{t.initializers.forEach(a=>{a(p)})}catch(a){throw console.error("sqlite3 bootstrap initializer threw:",a),a}return delete t.initializers,t.sqlite3=p,p},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const n=(...c)=>{throw new Error(c.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const r=t.pointerIR||"i32",s=t.ptrSizeof=r==="i32"?4:r==="i64"?8:n("Unhandled ptrSizeof:",r),o=Object.create(null);o.heapSize=0,o.memory=null,o.freeFuncIndexes=[],o.scopedAlloc=[],o.utf8Decoder=new TextDecoder,o.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return s;default:return(""+c).endsWith("*")?s:void 0}};const h=function(){if(!o.memory)o.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(o.heapSize===o.memory.buffer.byteLength)return o;const c=o.memory.buffer;return o.HEAP8=new Int8Array(c),o.HEAP8U=new Uint8Array(c),o.HEAP16=new Int16Array(c),o.HEAP16U=new Uint16Array(c),o.HEAP32=new Int32Array(c),o.HEAP32U=new Uint32Array(c),t.bigIntEnabled&&(o.HEAP64=new BigInt64Array(c),o.HEAP64U=new BigUint64Array(c)),o.HEAP32F=new Float32Array(c),o.HEAP64F=new Float64Array(c),o.heapSize=c.byteLength,o};t.heap8=()=>h().HEAP8,t.heap8u=()=>h().HEAP8U,t.heap16=()=>h().HEAP16,t.heap16u=()=>h().HEAP16U,t.heap32=()=>h().HEAP32,t.heap32u=()=>h().HEAP32U,t.heapForSize=function(c,d=!0){const q=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:h();switch(c){case Int8Array:return q.HEAP8;case Uint8Array:return q.HEAP8U;case Int16Array:return q.HEAP16;case Uint16Array:return q.HEAP16U;case Int32Array:return q.HEAP32;case Uint32Array:return q.HEAP32U;case 8:return d?q.HEAP8U:q.HEAP8;case 16:return d?q.HEAP16U:q.HEAP16;case 32:return d?q.HEAP32U:q.HEAP32;case 64:if(q.HEAP64)return d?q.HEAP64U:q.HEAP64;break;default:if(t.bigIntEnabled){if(c===globalThis.BigUint64Array)return q.HEAP64U;if(c===globalThis.BigInt64Array)return q.HEAP64;break}}n("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(c){const d=t.functionTable();return c<d.length?d.get(c):void 0},t.jsFuncToWasm=function c(d,q){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(p,a,_){_<128?p[a](_):p[a](_%128|128,_>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(p){const a=c._.rxJSig.exec(p);return a?a[2]:p.substr(1)},letterType:p=>c._.sigTypes[p]||n("Invalid signature letter:",p),pushSigType:(p,a)=>p.push(c._.typeCodes[c._.letterType(a)])}),typeof d=="string"){const p=q;q=d,d=p}const B=c._.sigParams(q),f=[1,96];c._.uleb128Encode(f,"push",B.length);for(const p of B)c._.pushSigType(f,p);return q[0]==="v"?f.push(0):(f.push(1),c._.pushSigType(f,q[0])),c._.uleb128Encode(f,"unshift",f.length),f.unshift(0,97,115,109,1,0,0,0,1),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(f)),{e:{f:d}}).exports.f};const g=function(d,q,B){if(B&&!o.scopedAlloc.length&&n("No scopedAllocPush() scope is active."),typeof d=="string"){const _=q;q=d,d=_}(typeof q!="string"||!(d instanceof Function))&&n("Invalid arguments: expecting (function,signature) or (signature,function).");const f=t.functionTable(),p=f.length;let a;for(;o.freeFuncIndexes.length&&(a=o.freeFuncIndexes.pop(),f.get(a));){a=null;continue}a||(a=p,f.grow(1));try{return f.set(a,d),B&&o.scopedAlloc[o.scopedAlloc.length-1].push(a),a}catch(_){if(!(_ instanceof TypeError))throw a===p&&o.freeFuncIndexes.push(p),_}try{const _=t.jsFuncToWasm(d,q);f.set(a,_),B&&o.scopedAlloc[o.scopedAlloc.length-1].push(a)}catch(_){throw a===p&&o.freeFuncIndexes.push(p),_}return a};t.installFunction=(c,d)=>g(c,d,!1),t.scopedInstallFunction=(c,d)=>g(c,d,!0),t.uninstallFunction=function(c){if(!c&&c!==0)return;const d=o.freeFuncIndexes,q=t.functionTable();d.push(c);const B=q.get(c);return q.set(c,null),B},t.peek=function(d,q="i8"){q.endsWith("*")&&(q=r);const B=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:h(),f=Array.isArray(d)?[]:void 0;let p;do{switch(f&&(d=arguments[0].shift()),q){case"i1":case"i8":p=B.HEAP8[d>>0];break;case"i16":p=B.HEAP16[d>>1];break;case"i32":p=B.HEAP32[d>>2];break;case"float":case"f32":p=B.HEAP32F[d>>2];break;case"double":case"f64":p=Number(B.HEAP64F[d>>3]);break;case"i64":if(t.bigIntEnabled){p=BigInt(B.HEAP64[d>>3]);break}default:n("Invalid type for peek():",q)}f&&f.push(p)}while(f&&arguments[0].length);return f||p},t.poke=function(c,d,q="i8"){q.endsWith("*")&&(q=r);const B=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:h();for(const f of Array.isArray(c)?c:[c])switch(q){case"i1":case"i8":B.HEAP8[f>>0]=d;continue;case"i16":B.HEAP16[f>>1]=d;continue;case"i32":B.HEAP32[f>>2]=d;continue;case"float":case"f32":B.HEAP32F[f>>2]=d;continue;case"double":case"f64":B.HEAP64F[f>>3]=d;continue;case"i64":if(B.HEAP64){B.HEAP64[f>>3]=BigInt(d);continue}default:n("Invalid type for poke(): "+q)}return this},t.peekPtr=(...c)=>t.peek(c.length===1?c[0]:c,r),t.pokePtr=(c,d=0)=>t.poke(c,d,r),t.peek8=(...c)=>t.peek(c.length===1?c[0]:c,"i8"),t.poke8=(c,d)=>t.poke(c,d,"i8"),t.peek16=(...c)=>t.peek(c.length===1?c[0]:c,"i16"),t.poke16=(c,d)=>t.poke(c,d,"i16"),t.peek32=(...c)=>t.peek(c.length===1?c[0]:c,"i32"),t.poke32=(c,d)=>t.poke(c,d,"i32"),t.peek64=(...c)=>t.peek(c.length===1?c[0]:c,"i64"),t.poke64=(c,d)=>t.poke(c,d,"i64"),t.peek32f=(...c)=>t.peek(c.length===1?c[0]:c,"f32"),t.poke32f=(c,d)=>t.poke(c,d,"f32"),t.peek64f=(...c)=>t.peek(c.length===1?c[0]:c,"f64"),t.poke64f=(c,d)=>t.poke(c,d,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,t.isPtr=t.isPtr32,t.cstrlen=function(c){if(!c||!t.isPtr(c))return null;const d=h().HEAP8U;let q=c;for(;d[q]!==0;++q);return q-c};const P=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,D=function(c,d,q){return o.utf8Decoder.decode(c.buffer instanceof P?c.slice(d,q):c.subarray(d,q))};t.cstrToJs=function(c){const d=t.cstrlen(c);return d?D(h().HEAP8U,c,c+d):d===null?d:""},t.jstrlen=function(c){if(typeof c!="string")return null;const d=c.length;let q=0;for(let B=0;B<d;++B){let f=c.charCodeAt(B);f>=55296&&f<=57343&&(f=65536+((f&1023)<<10)|c.charCodeAt(++B)&1023),f<=127?++q:f<=2047?q+=2:f<=65535?q+=3:q+=4}return q},t.jstrcpy=function(c,d,q=0,B=-1,f=!0){if((!d||!(d instanceof Int8Array)&&!(d instanceof Uint8Array))&&n("jstrcpy() target must be an Int8Array or Uint8Array."),B<0&&(B=d.length-q),!(B>0)||!(q>=0))return 0;let p=0,a=c.length;const _=q,u=q+B-(f?1:0);for(;p<a&&q<u;++p){let k=c.charCodeAt(p);if(k>=55296&&k<=57343&&(k=65536+((k&1023)<<10)|c.charCodeAt(++p)&1023),k<=127){if(q>=u)break;d[q++]=k}else if(k<=2047){if(q+1>=u)break;d[q++]=192|k>>6,d[q++]=128|k&63}else if(k<=65535){if(q+2>=u)break;d[q++]=224|k>>12,d[q++]=128|k>>6&63,d[q++]=128|k&63}else{if(q+3>=u)break;d[q++]=240|k>>18,d[q++]=128|k>>12&63,d[q++]=128|k>>6&63,d[q++]=128|k&63}}return f&&(d[q++]=0),q-_},t.cstrncpy=function(c,d,q){if((!c||!d)&&n("cstrncpy() does not accept NULL strings."),q<0)q=t.cstrlen(strPtr)+1;else if(!(q>0))return 0;const B=t.heap8u();let f=0,p;for(;f<q&&(p=B[d+f]);++f)B[c+f]=p;return f<q&&(B[c+f++]=0),f},t.jstrToUintArray=(c,d=!1)=>o.utf8Encoder.encode(d?c+"\0":c);const U=(c,d)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&n("Object is missing alloc() and/or dealloc() function(s)","required by",d+"().")},Q=function(c,d,q,B){if(U(t,B),typeof c!="string")return null;{const f=o.utf8Encoder.encode(c),p=q(f.length+1),a=h().HEAP8U;return a.set(f,p),a[p+f.length]=0,d?[p,f.length]:p}};t.allocCString=(c,d=!1)=>Q(c,d,t.alloc,"allocCString()"),t.scopedAllocPush=function(){U(t,"scopedAllocPush");const c=[];return o.scopedAlloc.push(c),c},t.scopedAllocPop=function(c){U(t,"scopedAllocPop");const d=arguments.length?o.scopedAlloc.indexOf(c):o.scopedAlloc.length-1;d<0&&n("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=o.scopedAlloc[d]),o.scopedAlloc.splice(d,1);for(let q;q=c.pop();)t.functionEntry(q)?t.uninstallFunction(q):t.dealloc(q)},t.scopedAlloc=function(c){o.scopedAlloc.length||n("No scopedAllocPush() scope is active.");const d=t.alloc(c);return o.scopedAlloc[o.scopedAlloc.length-1].push(d),d},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>o.scopedAlloc.length,set:()=>n("The 'active' property is read-only.")}),t.scopedAllocCString=(c,d=!1)=>Q(c,d,t.scopedAlloc,"scopedAllocCString()");const T=function(c,d){const q=t[c?"scopedAlloc":"alloc"]((d.length+1)*t.ptrSizeof);let B=0;return d.forEach(f=>{t.pokePtr(q+t.ptrSizeof*B++,t[c?"scopedAllocCString":"allocCString"](""+f))}),t.pokePtr(q+t.ptrSizeof*B,0),q};t.scopedAllocMainArgv=c=>T(!0,c),t.allocMainArgv=c=>T(!1,c),t.cArgvToJs=(c,d)=>{const q=[];for(let B=0;B<c;++B){const f=t.peekPtr(d+t.ptrSizeof*B);q.push(f?t.cstrToJs(f):null)}return q},t.scopedAllocCall=function(c){t.scopedAllocPush();try{return c()}finally{t.scopedAllocPop()}};const S=function(c,d,q){U(t,q);const B=d?"i64":r;let f=t[q](c*(d?8:s));if(t.poke(f,0,B),c===1)return f;const p=[f];for(let a=1;a<c;++a)f+=d?8:s,p[a]=f,t.poke(f,0,B);return p};t.allocPtr=(c=1,d=!0)=>S(c,d,"alloc"),t.scopedAllocPtr=(c=1,d=!0)=>S(c,d,"scopedAlloc"),t.xGet=function(c){return t.exports[c]||n("Cannot find exported symbol:",c)};const C=(c,d)=>n(c+"() requires",d,"argument(s).");t.xCall=function(c,...d){const q=c instanceof Function?c:t.xGet(c);return q instanceof Function||n("Exported symbol",c,"is not a function."),q.length!==d.length&&C(q===c?q.name:c,q.length),arguments.length===2&&Array.isArray(arguments[1])?q.apply(null,arguments[1]):q.apply(null,d)},o.xWrap=Object.create(null),o.xWrap.convert=Object.create(null),o.xWrap.convert.arg=new Map,o.xWrap.convert.result=new Map;const b=o.xWrap.convert.arg,w=o.xWrap.convert.result;t.bigIntEnabled&&b.set("i64",c=>BigInt(c));const E=r==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);b.set("i32",E).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",b.get("f32")).set("f64",b.get("f32")).set("double",b.get("f64")).set("int",b.get("i32")).set("null",c=>c).set(null,b.get("null")).set("**",E).set("*",E),w.set("*",E).set("pointer",E).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,w.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&c.push("i64");const d=b.get(r);for(const q of c)b.set(q+"*",d),w.set(q+"*",d),w.set(q,b.get(q)||n("Missing arg converter:",q))}const R=function(c){return typeof c=="string"?t.scopedAllocCString(c):c?E(c):null};b.set("string",R).set("utf8",R).set("pointer",R),w.set("string",c=>t.cstrToJs(c)).set("utf8",w.get("string")).set("string:dealloc",c=>{try{return c?t.cstrToJs(c):null}finally{t.dealloc(c)}}).set("utf8:dealloc",w.get("string:dealloc")).set("json",c=>JSON.parse(t.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(t.cstrToJs(c)):null}finally{t.dealloc(c)}});const L=class{constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,d,q){n("AbstractArgAdapter must be subclassed.")}};b.FuncPtrAdapter=class We extends L{constructor(d){super(d),b.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",d),this.name=d.name||"unnamed",this.signature=d.signature,d.contextKey instanceof Function&&(this.contextKey=d.contextKey,d.bindScope||(d.bindScope="context")),this.bindScope=d.bindScope||n("FuncPtrAdapter options requires a bindScope (explicit or implied)."),We.bindScopes.indexOf(d.bindScope)<0&&n("Invalid options.bindScope ("+d.bindMod+") for FuncPtrAdapter. Expecting one of: ("+We.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=d.callProxy instanceof Function?d.callProxy:void 0}contextKey(d,q){return this}contextMap(d){const q=this.__cmap||(this.__cmap=new Map);let B=q.get(d);return B===void 0&&q.set(d,B=[]),B}convertArg(d,q,B){let f=this.singleton;if(!f&&this.isContext&&(f=this.contextMap(this.contextKey(q,B))),f&&f[0]===d)return f[1];if(d instanceof Function){this.callProxy&&(d=this.callProxy(d));const p=g(d,this.signature,this.isTransient);if(We.debugFuncInstall&&We.debugOut("FuncPtrAdapter installed",this,this.contextKey(q,B),"@"+p,d),f){if(f[1]){We.debugFuncInstall&&We.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(q,B),"@"+f[1],d);try{o.scopedAlloc[o.scopedAlloc.length-1].push(f[1])}catch{}}f[0]=d,f[1]=p}return p}else if(t.isPtr(d)||d===null||d===void 0){if(f&&f[1]&&f[1]!==d){We.debugFuncInstall&&We.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(q,B),"@"+f[1],d);try{o.scopedAlloc[o.scopedAlloc.length-1].push(f[1])}catch{}f[0]=f[1]=d|0}return d||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},b.FuncPtrAdapter.warnOnUse=!1,b.FuncPtrAdapter.debugFuncInstall=!1,b.FuncPtrAdapter.debugOut=console.debug.bind(console),b.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const x=c=>b.get(c)||n("Argument adapter not found:",c),O=c=>w.get(c)||n("Result adapter not found:",c);o.xWrap.convertArg=(c,...d)=>x(c)(...d),o.xWrap.convertArgNoCheck=(c,...d)=>b.get(c)(...d),o.xWrap.convertResult=(c,d)=>c===null?d:c?O(c)(d):void 0,o.xWrap.convertResultNoCheck=(c,d)=>c===null?d:c?w.get(c)(d):void 0,t.xWrap=function(c,d,...q){arguments.length===3&&Array.isArray(arguments[2])&&(q=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||n("Function pointer not found in WASM function table."));const B=c instanceof Function,f=B?c:t.xGet(c);if(B&&(c=f.name||"unnamed function"),q.length!==f.length&&C(c,f.length),d===null&&f.length===0)return f;d!=null&&O(d);for(const a of q)a instanceof L?b.set(a,(..._)=>a.convertArg(..._)):x(a);const p=o.xWrap;return f.length===0?(...a)=>a.length?C(c,f.length):p.convertResult(d,f.call(null)):function(...a){a.length!==f.length&&C(c,f.length);const _=t.scopedAllocPush();try{let u=0;for(;u<a.length;++u)a[u]=p.convertArgNoCheck(q[u],a[u],a,u);return p.convertResultNoCheck(d,f.apply(null,a))}finally{t.scopedAllocPop(_)}}};const J=function(c,d,q,B,f,p){if(typeof q=="string"){if(d===1)return p.get(q);if(d===2){if(B)B instanceof Function||n(f,"requires a function argument.");else return delete p.get(q),c;return p.set(q,B),c}}n("Invalid arguments to",f)};return t.xWrap.resultAdapter=function c(d,q){return J(c,arguments.length,d,q,"resultAdapter()",w)},t.xWrap.argAdapter=function c(d,q){return J(c,arguments.length,d,q,"argAdapter()",b)},t.xWrap.FuncPtrAdapter=b.FuncPtrAdapter,t.xCallWrapped=function(c,d,q,...B){return Array.isArray(arguments[3])&&(B=arguments[3]),t.xWrap(c,d,q||[]).apply(null,B||[])},t.xWrap.testConvertArg=o.xWrap.convertArg,t.xWrap.testConvertResult=o.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=function(t){const n=()=>fetch(t.uri,{credentials:"same-origin"}),r=this,s=function(h){if(t.wasmUtilTarget){const g=(...D)=>{throw new Error(D.join(" "))},P=t.wasmUtilTarget;if(P.module=h.module,P.instance=h.instance,P.instance.exports.memory||(P.memory=t.imports&&t.imports.env&&t.imports.env.memory||g("Missing 'memory' object!")),!P.alloc&&h.instance.exports.malloc){const D=h.instance.exports;P.alloc=function(U){return D.malloc(U)||g("Allocation of",U,"bytes failed.")},P.dealloc=function(U){D.free(U)}}r(P)}return t.onload&&t.onload(h,t),h};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(n(),t.imports||{}).then(s)}:function(){return n().then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,t.imports||{})).then(s)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(n){const r=(...F)=>{throw new Error(F.join(" "))};!(n.heap instanceof WebAssembly.Memory)&&!(n.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(F){n[F]instanceof Function||r("Config option '"+F+"' must be a function.")});const s=t,o=n.heap instanceof Function?n.heap:()=>new Uint8Array(n.heap.buffer),h=n.alloc,g=n.dealloc,P=n.log||console.log.bind(console),D=n.memberPrefix||"",U=n.memberSuffix||"",Q=n.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!n.bigIntEnabled,T=globalThis.BigInt,S=globalThis.BigInt64Array,C=n.ptrSizeof||4,b=n.ptrIR||"i32";s.debugFlags||(s.__makeDebugFlags=function(F=null){F&&F.__flags&&(F=F.__flags);const V=function G(Y){return arguments.length===0?G.__flags:(Y<0?(delete G.__flags.getter,delete G.__flags.setter,delete G.__flags.alloc,delete G.__flags.dealloc):(G.__flags.getter=(1&Y)!==0,G.__flags.setter=(2&Y)!==0,G.__flags.alloc=(4&Y)!==0,G.__flags.dealloc=(8&Y)!==0),G._flags)};return Object.defineProperty(V,"__flags",{iterable:!1,writable:!1,value:Object.create(F)}),F||V(0),V},s.debugFlags=s.__makeDebugFlags());const w=function(){const F=new ArrayBuffer(2);return new DataView(F).setInt16(0,256,!0),new Int16Array(F)[0]===256}(),E=F=>F[1]==="(",R=F=>F==="P",L=F=>E(F)?"p":F[0],x=function(F){switch(L(F)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return b;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",F)},O=S?()=>!0:()=>r("BigInt64Array is not available."),J=function(F){switch(L(F)){case"p":case"P":case"s":{switch(C){case 4:return"getInt32";case 8:return O()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return O()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",F)},c=function(F){switch(L(F)){case"p":case"P":case"s":{switch(C){case 4:return"setInt32";case 8:return O()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return O()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",F)},d=function(F){switch(L(F)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return O()&&T;case"p":case"P":case"s":switch(C){case 4:return Number;case 8:return O()&&T}break}r("Unhandled DataView set wrapper for signature:",F)},q=(F,V)=>F+"::"+V,B=function(F,V){return()=>r(q(F,V),"is read-only.")},f=new WeakMap,p="(pointer-is-external)",a=function(F,V,G){if(G||(G=f.get(V)),G){if(f.delete(V),Array.isArray(V.ondispose)){let Y;for(;Y=V.ondispose.shift();)try{Y instanceof Function?Y.call(V):Y instanceof se?Y.dispose():typeof Y=="number"&&g(Y)}catch(ge){console.warn("ondispose() for",F.structName,"@",G,"threw. NOT propagating it.",ge)}}else if(V.ondispose instanceof Function)try{V.ondispose()}catch(Y){console.warn("ondispose() for",F.structName,"@",G,"threw. NOT propagating it.",Y)}delete V.ondispose,F.debugFlags.__flags.dealloc&&P("debug.dealloc:",V[p]?"EXTERNAL":"",F.structName,"instance:",F.structInfo.sizeof,"bytes @"+G),V[p]||g(G)}},_=F=>({configurable:!1,writable:!1,iterable:!1,value:F}),u=function(F,V,G){let Y=!G;G?Object.defineProperty(V,p,_(G)):(G=h(F.structInfo.sizeof),G||r("Allocation of",F.structName,"structure failed."));try{F.debugFlags.__flags.alloc&&P("debug.alloc:",Y?"":"EXTERNAL",F.structName,"instance:",F.structInfo.sizeof,"bytes @"+G),Y&&o().fill(0,G,G+F.structInfo.sizeof),f.set(V,G)}catch(ge){throw a(F,V,G),ge}},k=function(){const F=this.pointer;return F?new Uint8Array(o().slice(F,F+this.structInfo.sizeof)):null},ne=_(F=>D+F+U),ae=function(F,V,G=!0){let Y=F.members[V];if(!Y&&(D||U)){for(const ge of Object.values(F.members))if(ge.key===V){Y=ge;break}!Y&&G&&r(q(F.name,V),"is not a mapped struct member.")}return Y},_e=function F(V,G,Y=!1){F._||(F._=xe=>xe.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ge=ae(V.structInfo,G,!0);return Y?F._(ge.signature):ge.signature},M={configurable:!1,enumerable:!1,get:function(){return f.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},y=_(function(){const F=[];for(const V of Object.keys(this.structInfo.members))F.push(this.memberKey(V));return F}),I=new TextDecoder("utf-8"),j=new TextEncoder,H=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,re=function(F,V,G){return I.decode(F.buffer instanceof H?F.slice(V,G):F.subarray(V,G))},ce=function(F,V,G=!1){const Y=ae(F.structInfo,V,G);return Y&&Y.signature.length===1&&Y.signature[0]==="s"?Y:!1},A=function(F){F.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(F))},N=function(V,G){const Y=ae(V.structInfo,G,!0);A(Y);const ge=V[Y.key];if(!ge)return null;let xe=ge;const ve=o();for(;ve[xe]!==0;++xe);return ge===xe?"":re(ve,ge,xe)},W=function(F,...V){F.ondispose?Array.isArray(F.ondispose)||(F.ondispose=[F.ondispose]):F.ondispose=[],F.ondispose.push(...V)},X=function(F){const V=j.encode(F),G=h(V.length+1);G||r("Allocation error while duplicating string:",F);const Y=o();return Y.set(V,G),Y[G+V.length]=0,G},$=function(F,V,G){const Y=ae(F.structInfo,V,!0);A(Y);const ge=X(G);return F[Y.key]=ge,W(F,ge),F},se=function(V,G){arguments[2]!==_&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:_(V),structInfo:_(G)})};se.prototype=Object.create(null,{dispose:_(function(){a(this.constructor,this)}),lookupMember:_(function(F,V=!0){return ae(this.structInfo,F,V)}),memberToJsString:_(function(F){return N(this,F)}),memberIsString:_(function(F,V=!0){return ce(this,F,V)}),memberKey:ne,memberKeys:y,memberSignature:_(function(F,V=!1){return _e(this,F,V)}),memoryDump:_(k),pointer:M,setMemberCString:_(function(F,V){return $(this,F,V)})}),Object.assign(se.prototype,{addOnDispose:function(...F){return W(this,...F),this}}),Object.defineProperties(se,{allocCString:_(X),isA:_(F=>F instanceof se),hasExternalPointer:_(F=>F instanceof se&&!!F[p]),memberKey:ne});const pe=F=>Number.isFinite(F)||F instanceof(T||Number),te=function F(V,G,Y){if(!F._){F._={getters:{},setters:{},sw:{}};const Le=["i","c","C","p","P","s","f","d","v()"];Q&&Le.push("j"),Le.forEach(function(Ue){F._.getters[Ue]=J(Ue),F._.setters[Ue]=c(Ue),F._.sw[Ue]=d(Ue)});const vr=/^[ipPsjfdcC]$/,Er=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;F.sigCheck=function(Ue,xr,Kt,wt){Object.prototype.hasOwnProperty.call(Ue,Kt)&&r(Ue.structName,"already has a property named",Kt+"."),vr.test(wt)||Er.test(wt)||r("Malformed signature for",q(Ue.structName,xr)+":",wt)}}const ge=V.memberKey(G);F.sigCheck(V.prototype,G,ge,Y.signature),Y.key=ge,Y.name=G;const xe=L(Y.signature),ve=q(V.prototype.structName,ge),Ee=V.prototype.debugFlags.__flags,Je=Object.create(null);Je.configurable=!1,Je.enumerable=!1,Je.get=function(){Ee.getter&&P("debug.getter:",F._.getters[xe],"for",x(xe),ve,"@",this.pointer,"+",Y.offset,"sz",Y.sizeof);let Le=new DataView(o().buffer,this.pointer+Y.offset,Y.sizeof)[F._.getters[xe]](0,w);return Ee.getter&&P("debug.getter:",ve,"result =",Le),Le},Y.readOnly?Je.set=B(V.prototype.structName,ge):Je.set=function(Le){if(Ee.setter&&P("debug.setter:",F._.setters[xe],"for",x(xe),ve,"@",this.pointer,"+",Y.offset,"sz",Y.sizeof,Le),this.pointer||r("Cannot set struct property on disposed instance."),Le===null)Le=0;else for(;!pe(Le);){if(R(Y.signature)&&Le instanceof se){Le=Le.pointer||0,Ee.setter&&P("debug.setter:",ve,"resolved to",Le);break}r("Invalid value for pointer-type",ve+".")}new DataView(o().buffer,this.pointer+Y.offset,Y.sizeof)[F._.setters[xe]](0,F._.sw[xe](Le),w)},Object.defineProperty(V.prototype,ge,Je)},Te=function F(V,G){arguments.length===1?(G=V,V=G.name):G.name||(G.name=V),V||r("Struct name is required.");let Y=!1;Object.keys(G.members).forEach(ve=>{const Ee=G.members[ve];Ee.sizeof?Ee.sizeof===1?Ee.signature==="c"||Ee.signature==="C"||r("Unexpected sizeof==1 member",q(G.name,ve),"with signature",Ee.signature):(Ee.sizeof%4!==0&&(console.warn("Invalid struct member description =",Ee,"from",G),r(V,"member",ve,"sizeof is not aligned. sizeof="+Ee.sizeof)),Ee.offset%4!==0&&(console.warn("Invalid struct member description =",Ee,"from",G),r(V,"member",ve,"offset is not aligned. offset="+Ee.offset))):r(V,"member",ve,"is missing sizeof."),(!Y||Y.offset<Ee.offset)&&(Y=Ee)}),Y?G.sizeof<Y.offset+Y.sizeof&&r("Invalid struct config:",V,"max member offset ("+Y.offset+") ","extends past end of struct (sizeof="+G.sizeof+")."):r("No member property descriptions found.");const ge=_(s.__makeDebugFlags(F.debugFlags)),xe=function ve(Ee){this instanceof ve?arguments.length?((Ee!==(Ee|0)||Ee<=0)&&r("Invalid pointer value for",V,"constructor."),u(ve,this,Ee)):u(ve,this):r("The",V,"constructor may only be called via 'new'.")};return Object.defineProperties(xe,{debugFlags:ge,isA:_(ve=>ve instanceof xe),memberKey:ne,memberKeys:y,methodInfoForKey:_(function(ve){}),structInfo:_(G),structName:_(V)}),xe.prototype=new se(V,G,_),Object.defineProperties(xe.prototype,{debugFlags:ge,constructor:_(xe)}),Object.keys(G.members).forEach(ve=>te(xe,ve,G.members[ve])),xe};return Te.StructType=se,Te.config=n,Te.allocCString=X,Te.debugFlags||(Te.debugFlags=s.__makeDebugFlags(s.debugFlags)),Te},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...b)=>{throw new Error(b.join(" "))};t.SQLite3Error.toss;const r=t.capi,s=t.wasm,o=t.util;if(globalThis.WhWasmUtilInstaller(s),delete globalThis.WhWasmUtilInstaller,s.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(b,w)=>b[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:b=>b[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new s.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:b=>{let w;return(E,R,L,x)=>{try{const O=s.cArgvToJs(R,L);return w||(w=s.cArgvToJs(R,x)),b(O,w)|0}catch(O){return O.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:b=>b[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new s.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(b,w)=>b[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(b,w)=>b[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],s.exports.sqlite3_progress_handler&&s.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(b,w)=>b[0]}),"*"]]),s.exports.sqlite3_stmt_explain&&s.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),s.exports.sqlite3_set_authorizer&&s.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(b,w)=>b[0],callProxy:b=>(w,E,R,L,x,O)=>{try{return R=R&&s.cstrToJs(R),L=L&&s.cstrToJs(L),x=x&&s.cstrToJs(x),O=O&&s.cstrToJs(O),b(w,E,R,L,x,O)||0}catch(J){return J.resultCode||r.SQLITE_ERROR}}}),"*"]]),s.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:b=>b[0],callProxy:b=>(w,E,R,L,x)=>{b(w,E,s.cstrToJs(R),s.cstrToJs(L),x)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],s.bigIntEnabled&&s.exports.sqlite3_declare_vtab&&s.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),s.bigIntEnabled&&s.exports.sqlite3_preupdate_hook&&s.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:b=>b[0],callProxy:b=>(w,E,R,L,x,O,J)=>{b(w,E,R,s.cstrToJs(L),s.cstrToJs(x),O,J)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),s.bigIntEnabled&&s.exports.sqlite3changegroup_add&&s.exports.sqlite3session_create&&s.exports.sqlite3_preupdate_hook){const b={signature:"i(ps)",callProxy:w=>(E,R)=>{try{return w(E,s.cstrToJs(R))|0}catch(L){return L.resultCode||r.SQLITE_ERROR}}};s.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...b}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xFilter",...b,contextKey:(w,E)=>w[0]}),"*"]])}s.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:s.heap8u,alloc:s.alloc,dealloc:s.dealloc,bigIntEnabled:s.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const b=s.xWrap.argAdapter("string");s.xWrap.argAdapter("string:flexible",x=>b(o.flexibleString(x))),s.xWrap.argAdapter("string:static",function(x){return s.isPtr(x)?x:(x=""+x,this[x]||(this[x]=s.allocCString(x)))}.bind(Object.create(null)));const w=s.xWrap.argAdapter("*"),E=function(){};s.xWrap.argAdapter("sqlite3_filename",w)("sqlite3_context*",w)("sqlite3_value*",w)("void*",w)("sqlite3_changegroup*",w)("sqlite3_changeset_iter*",w)("sqlite3_session*",w)("sqlite3_stmt*",x=>w(x instanceof(t?.oo1?.Stmt||E)?x.pointer:x))("sqlite3*",x=>w(x instanceof(t?.oo1?.DB||E)?x.pointer:x))("sqlite3_vfs*",x=>typeof x=="string"?r.sqlite3_vfs_find(x)||t.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",x):w(x instanceof(r.sqlite3_vfs||E)?x.pointer:x)),s.exports.sqlite3_declare_vtab&&s.xWrap.argAdapter("sqlite3_index_info*",x=>w(x instanceof(r.sqlite3_index_info||E)?x.pointer:x))("sqlite3_module*",x=>w(x instanceof(r.sqlite3_module||E)?x.pointer:x));const R=s.xWrap.resultAdapter("*");s.xWrap.resultAdapter("sqlite3*",R)("sqlite3_context*",R)("sqlite3_stmt*",R)("sqlite3_value*",R)("sqlite3_vfs*",R)("void*",R),s.exports.sqlite3_step.length===0&&(s.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const x of s.bindingSignatures)r[x[0]]=s.xWrap.apply(null,x);for(const x of s.bindingSignatures.wasmInternal)o[x[0]]=s.xWrap.apply(null,x);const L=function(x){return()=>n(x+"() is unavailable due to lack","of BigInt support in this build.")};for(const x of s.bindingSignatures.int64)r[x[0]]=s.bigIntEnabled?s.xWrap.apply(null,x):L(x[0]);if(delete s.bindingSignatures,s.exports.sqlite3__wasm_db_error){const x=s.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");o.sqlite3__wasm_db_error=function(O,J,c){return J instanceof t.WasmAllocError?(J=r.SQLITE_NOMEM,c=0):J instanceof Error&&(c=c||""+J,J=J.resultCode||r.SQLITE_ERROR),O?x(O,J,c):J}}else o.sqlite3__wasm_db_error=function(x,O,J){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),O}}{const b=s.xCall("sqlite3__wasm_enum_json");b||n("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),s.ctype=JSON.parse(s.cstrToJs(b));const w=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];s.bigIntEnabled&&w.push("serialize","session","vtab");for(const L of w)for(const x of Object.entries(s.ctype[L]))r[x[0]]=x[1];s.functionEntry(r.SQLITE_WASM_DEALLOC)||n("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const E=Object.create(null);for(const L of["resultCodes"])for(const x of Object.entries(s.ctype[L]))E[x[1]]=x[0];r.sqlite3_js_rc_str=L=>E[L];const R=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!o.isUIThread(),sqlite3_index_info:!s.bigIntEnabled,sqlite3_index_constraint:!s.bigIntEnabled,sqlite3_index_orderby:!s.bigIntEnabled,sqlite3_index_constraint_usage:!s.bigIntEnabled});for(const L of s.ctype.structs)R[L.name]||(r[L.name]=t.StructBinder(L));if(r.sqlite3_index_info){for(const L of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[L]=r[L],delete r[L];r.sqlite3_vtab_config=s.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const h=(b,w,E)=>o.sqlite3__wasm_db_error(b,r.SQLITE_MISUSE,w+"() requires "+E+" argument"+(E===1?"":"s")+"."),g=b=>o.sqlite3__wasm_db_error(b,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),P=b=>s.xWrap.argAdapter("sqlite3*")(b),D=b=>s.isPtr(b)?s.cstrToJs(b):b,U=function(b,w){b=P(b);let E=this.dbMap.get(b);if(w)!E&&w>0&&this.dbMap.set(b,E=Object.create(null));else return this.dbMap.delete(b),E;return E}.bind(Object.assign(Object.create(null),{dbMap:new Map}));U.addCollation=function(b,w){const E=U(b,1);E.collation||(E.collation=new Set),E.collation.add(D(w).toLowerCase())},U._addUDF=function(b,w,E,R){w=D(w).toLowerCase();let L=R.get(w);L||R.set(w,L=new Set),L.add(E<0?-1:E)},U.addFunction=function(b,w,E){const R=U(b,1);R.udf||(R.udf=new Map),this._addUDF(b,w,E,R.udf)},s.exports.sqlite3_create_window_function&&(U.addWindowFunc=function(b,w,E){const R=U(b,1);R.wudf||(R.wudf=new Map),this._addUDF(b,w,E,R.wudf)}),U.cleanup=function(b){b=P(b);const w=[b];for(const L of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const x=s.exports[L];if(x){w.length=x.length;try{r[L](...w)}catch(O){t.config.warn("close-time call of",L+"(",w,") threw:",O)}}}const E=U(b,0);if(!E)return;if(E.collation){for(const L of E.collation)try{r.sqlite3_create_collation_v2(b,L,r.SQLITE_UTF8,0,0,0)}catch{}delete E.collation}let R;for(R=0;R<2;++R){const L=R?E.wudf:E.udf;if(!L)continue;const x=R?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const O of L){const J=O[0],c=O[1],d=[b,J,0,r.SQLITE_UTF8,0,0,0,0,0];R&&d.push(0);for(const q of c)try{d[2]=q,x.apply(null,d)}catch{}c.clear()}L.clear()}delete E.udf,delete E.wudf};{const b=s.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(w){if(arguments.length!==1)return h(w,"sqlite3_close_v2",1);if(w)try{U.cleanup(w)}catch{}return b(w)}}if(r.sqlite3session_create){const b=s.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(w){if(arguments.length!==1)return h(pDb,"sqlite3session_delete",1);w&&r.sqlite3session_table_filter(w,0,0),b(w)}}{const b=(E,R)=>"argv["+R+"]:"+E[0]+":"+s.cstrToJs(E[1]).toLowerCase(),w=s.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new s.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:b}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:b})]);r.sqlite3_create_collation_v2=function(E,R,L,x,O,J){if(arguments.length!==6)return h(E,"sqlite3_create_collation_v2",6);if(!(L&15))L|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(L&15))return g(E);try{const c=w(E,R,L,x,O,J);return c===0&&O instanceof Function&&U.addCollation(E,R),c}catch(c){return o.sqlite3__wasm_db_error(E,c)}},r.sqlite3_create_collation=(E,R,L,x,O)=>arguments.length===5?r.sqlite3_create_collation_v2(E,R,L,x,O,0):h(E,"sqlite3_create_collation",5)}{const b=function(L,x){return L[0]+":"+(L[2]<0?-1:L[2])+":"+x+":"+s.cstrToJs(L[1]).toLowerCase()},w=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:b,callProxy:L=>(x,O,J)=>{try{L(x,...r.sqlite3_values_to_js(O,J))}catch(c){r.sqlite3_result_error_js(x,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:b,callProxy:L=>x=>{try{r.sqlite3_result_js(x,L(x))}catch(O){r.sqlite3_result_error_js(x,O)}}},xFunc:{signature:"v(pip)",contextKey:b,callProxy:L=>(x,O,J)=>{try{r.sqlite3_result_js(x,L(x,...r.sqlite3_values_to_js(O,J)))}catch(c){r.sqlite3_result_error_js(x,c)}}},xDestroy:{signature:"v(p)",contextKey:b,callProxy:L=>x=>{try{L(x)}catch(O){console.error("UDF xDestroy method threw:",O)}}}}),E=s.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xFunc",...w.xFunc}),new s.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]),R=s.exports.sqlite3_create_window_function?s.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xValue",...w.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xInverse",...w.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]):void 0;r.sqlite3_create_function_v2=function L(x,O,J,c,d,q,B,f,p){if(L.length!==arguments.length)return h(x,"sqlite3_create_function_v2",L.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(x);try{const a=E(x,O,J,c,d,q,B,f,p);return a===0&&(q instanceof Function||B instanceof Function||f instanceof Function||p instanceof Function)&&U.addFunction(x,O,J),a}catch(a){return console.error("sqlite3_create_function_v2() setup threw:",a),o.sqlite3__wasm_db_error(x,a,"Creation of UDF threw: "+a)}},r.sqlite3_create_function=function L(x,O,J,c,d,q,B,f){return L.length===arguments.length?r.sqlite3_create_function_v2(x,O,J,c,d,q,B,f,0):h(x,"sqlite3_create_function",L.length)},R?r.sqlite3_create_window_function=function L(x,O,J,c,d,q,B,f,p,a){if(L.length!==arguments.length)return h(x,"sqlite3_create_window_function",L.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(x);try{const _=R(x,O,J,c,d,q,B,f,p,a);return _===0&&(q instanceof Function||B instanceof Function||f instanceof Function||p instanceof Function||a instanceof Function)&&U.addWindowFunc(x,O,J),_}catch(_){return console.error("sqlite3_create_window_function() setup threw:",_),o.sqlite3__wasm_db_error(x,_,"Creation of UDF threw: "+_)}}:delete r.sqlite3_create_window_function,r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js),r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js),r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_result_error_js,r.sqlite3_create_window_function&&(r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js)}{const b=(E,R)=>(typeof E=="string"?R=-1:o.isSQLableTypedArray(E)?(R=E.byteLength,E=o.typedArrayToString(E instanceof ArrayBuffer?new Uint8Array(E):E)):Array.isArray(E)&&(E=E.join(""),R=-1),[E,R]),w={basic:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function E(R,L,x,O,J,c){if(E.length!==arguments.length)return h(R,"sqlite3_prepare_v3",E.length);const[d,q]=b(L,x);switch(typeof d){case"string":return w.basic(R,d,q,O,J,null);case"number":return w.full(R,d,q,O,J,c);default:return o.sqlite3__wasm_db_error(R,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function E(R,L,x,O,J){return E.length===arguments.length?r.sqlite3_prepare_v3(R,L,x,0,O,J):h(R,"sqlite3_prepare_v2",E.length)}}{const b=s.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),w=s.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function E(R,L,x,O,J){if(E.length!==arguments.length)return h(r.sqlite3_db_handle(R),"sqlite3_bind_text",E.length);if(s.isPtr(x)||x===null)return b(R,L,x,O,J);x instanceof ArrayBuffer?x=new Uint8Array(x):Array.isArray(pMem)&&(x=pMem.join(""));let c,d;try{if(o.isSQLableTypedArray(x))c=s.allocFromTypedArray(x),d=x.byteLength;else if(typeof x=="string")[c,d]=s.allocCString(x);else return o.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return b(R,L,c,d,r.SQLITE_WASM_DEALLOC)}catch(q){return s.dealloc(c),o.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),q)}},r.sqlite3_bind_blob=function E(R,L,x,O,J){if(E.length!==arguments.length)return h(r.sqlite3_db_handle(R),"sqlite3_bind_blob",E.length);if(s.isPtr(x)||x===null)return w(R,L,x,O,J);x instanceof ArrayBuffer?x=new Uint8Array(x):Array.isArray(x)&&(x=x.join(""));let c,d;try{if(o.isBindableTypedArray(x))c=s.allocFromTypedArray(x),d=O>=0?O:x.byteLength;else if(typeof x=="string")[c,d]=s.allocCString(x);else return o.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return w(R,L,c,d,r.SQLITE_WASM_DEALLOC)}catch(q){return s.dealloc(c),o.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),q)}}}r.sqlite3_config=function(b,...w){if(arguments.length<2)return r.SQLITE_MISUSE;switch(b){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return s.exports.sqlite3__wasm_config_i(b,w[0]);case r.SQLITE_CONFIG_LOOKASIDE:return s.exports.sqlite3__wasm_config_ii(b,w[0],w[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return s.exports.sqlite3__wasm_config_j(b,w[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const b=new Set;r.sqlite3_auto_extension=function(w){if(w instanceof Function)w=s.installFunction("i(ppp)",w);else if(arguments.length!==1||!s.isPtr(w))return r.SQLITE_MISUSE;const E=s.exports.sqlite3_auto_extension(w);return w!==arguments[0]&&(E===0?b.add(w):s.uninstallFunction(w)),E},r.sqlite3_cancel_auto_extension=function(w){return!w||arguments.length!==1||!s.isPtr(w)?0:s.exports.sqlite3_cancel_auto_extension(w)},r.sqlite3_reset_auto_extension=function(){s.exports.sqlite3_reset_auto_extension();for(const w of b)s.uninstallFunction(w);b.clear()}}const Q=r.sqlite3_vfs_find("kvvfs");if(Q)if(o.isUIThread()){const b=new r.sqlite3_kvvfs_methods(s.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const w=s.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,E=s.pstack,R=x=>s.peek(x)===115?sessionStorage:localStorage,L={xRead:(x,O,J,c)=>{const d=E.pointer,q=s.scopedAllocPush();try{const B=w(x,O);if(!B)return-3;const f=s.cstrToJs(B),p=R(x).getItem(f);if(!p)return-1;const a=p.length;if(c<=0)return a;if(c===1)return s.poke(J,0),a;const _=s.scopedAllocCString(p);return c>a+1&&(c=a+1),s.heap8u().copyWithin(J,_,_+c-1),s.poke(J+c-1,0),c-1}catch(B){return console.error("kvstorageRead()",B),-2}finally{E.restore(d),s.scopedAllocPop(q)}},xWrite:(x,O,J)=>{const c=E.pointer;try{const d=w(x,O);if(!d)return 1;const q=s.cstrToJs(d);return R(x).setItem(q,s.cstrToJs(J)),0}catch(d){return console.error("kvstorageWrite()",d),r.SQLITE_IOERR}finally{E.restore(c)}},xDelete:(x,O)=>{const J=E.pointer;try{const c=w(x,O);return c?(R(x).removeItem(s.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),r.SQLITE_IOERR}finally{E.restore(J)}}};for(const x of Object.keys(L))b[b.memberKey(x)]=s.installFunction(b.memberSignature(x),L[x])}else r.sqlite3_vfs_unregister(Q);s.xWrap.FuncPtrAdapter.warnOnUse=!0;const T=t.StructBinder,S=function b(w,E,R,L=b.installMethodArgcCheck){if(w instanceof T.StructType?!(R instanceof Function)&&!s.isPtr(R)&&n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,d)=>b(w,c,d,L);b.argcProxy||(b.argcProxy=function(c,d,q,B){return function(...f){return q.length!==arguments.length&&n("Argument mismatch for",c.structInfo.name+"::"+d+": Native signature is:",B),q.apply(this,f)}},b.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,d)=>{if(typeof c=="number")try{s.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const x=w.memberSignature(E);x.length<2&&n("Member",E,"does not have a function pointer signature:",x);const O=w.memberKey(E),J=L&&!s.isPtr(R)?b.argcProxy(w,O,R,x):R;if(s.isPtr(J))J&&!s.functionEntry(J)&&n("Pointer",J,"is not a WASM function table entry."),w[O]=J;else{const c=s.installFunction(J,w.memberSignature(E,!0));w[O]=c,(!w.ondispose||!w.ondispose.__removeFuncList)&&(w.addOnDispose("ondispose.__removeFuncList handler",b.removeFuncList),w.ondispose.__removeFuncList=[]),w.ondispose.__removeFuncList.push(O,c)}return(c,d)=>b(w,c,d,L)};S.installMethodArgcCheck=!1;const C=function(b,w,E=S.installMethodArgcCheck){const R=new Map;for(const L of Object.keys(w)){const x=w[L],O=R.get(x);if(O){const J=b.memberKey(L);b[J]=b[b.memberKey(O)]}else S(b,L,x,E),R.set(x,L)}return b};T.StructType.prototype.installMethod=function(w,E,R=S.installMethodArgcCheck){return arguments.length<3&&w&&typeof w=="object"?C(this,...arguments):S(this,...arguments)},T.StructType.prototype.installMethods=function(b,w=S.installMethodArgcCheck){return C(this,b,w)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=(...f)=>{throw new t.SQLite3Error(...f)},r=t.capi,s=t.wasm,o=t.util,h=new WeakMap,g=new WeakMap,P=(f,p,a)=>{const _=Object.getOwnPropertyDescriptor(f,p);return _?_.value:a},D=function(f,p){return p&&(f instanceof S&&(f=f.pointer),n(p,"sqlite3 result code",p+":",f?r.sqlite3_errmsg(f):r.sqlite3_errstr(p))),arguments[0]},U=s.installFunction("i(ippp)",function(f,p,a,_){r.SQLITE_TRACE_STMT===f&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+p+":",s.cstrToJs(_))}.bind({counter:0})),Q=Object.create(null),T=function f(...p){if(!f._name2vfs){f._name2vfs=Object.create(null);const y=typeof importScripts=="function"?I=>n("The VFS for",I,"is only available in the main window thread."):!1;f._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:y||(()=>"local")},f._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:y||(()=>"session")}}const a=f.normalizeArgs(...p);let _=a.filename,u=a.vfs,k=a.flags;(typeof _!="string"&&typeof _!="number"||typeof k!="string"||u&&typeof u!="string"&&typeof u!="number")&&(t.config.error("Invalid DB ctor args",a,arguments),n("Invalid arguments for DB constructor."));let z=typeof _=="number"?s.cstrToJs(_):_;const ne=f._name2vfs[z];ne&&(u=ne.vfs,_=z=ne.filename(z));let ae,_e=0;k.indexOf("c")>=0&&(_e|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),k.indexOf("w")>=0&&(_e|=r.SQLITE_OPEN_READWRITE),_e===0&&(_e|=r.SQLITE_OPEN_READONLY),_e|=r.SQLITE_OPEN_EXRESCODE;const M=s.pstack.pointer;try{const y=s.pstack.allocPtr();let I=r.sqlite3_open_v2(_,y,_e,u||0);ae=s.peekPtr(y),D(ae,I),r.sqlite3_extended_result_codes(ae,1),k.indexOf("t")>=0&&r.sqlite3_trace_v2(ae,r.SQLITE_TRACE_STMT,U,ae)}catch(y){throw ae&&r.sqlite3_close_v2(ae),y}finally{s.pstack.restore(M)}this.filename=z,h.set(this,ae),g.set(this,Object.create(null));try{const y=r.sqlite3_js_db_vfs(ae)||n("Internal error: cannot get VFS for new db handle."),I=Q[y];I&&(I instanceof Function?I(this,t):D(ae,r.sqlite3_exec(ae,I,0,0,0)))}catch(y){throw this.close(),y}};T.setVfsPostOpenCallback=function(f,p){p instanceof Function||n("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),Q[f]=p},T.normalizeArgs=function(f=":memory:",p="c",a=null){const _={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(_,arguments[0]),_.flags===void 0&&(_.flags="c"),_.vfs===void 0&&(_.vfs=null),_.filename===void 0&&(_.filename=":memory:")):(_.filename=f,_.flags=p,_.vfs=a),_};const S=function(...f){T.apply(this,f)};S.dbCtorHelper=T;const C={null:1,number:2,string:3,boolean:4,blob:5};C.undefined==C.null,s.bigIntEnabled&&(C.bigint=C.number);const b=function(){C!==arguments[2]&&n(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],h.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},w=function(f){return f.pointer||n("DB has been closed."),f},E=function(f,p){return(p!==(p|0)||p<0||p>=f.columnCount)&&n("Column index",p,"is out of range."),f},R=function(f,p){const a=Object.create(null);switch(a.opt=Object.create(null),p.length){case 1:typeof p[0]=="string"||o.isSQLableTypedArray(p[0])||Array.isArray(p[0])?a.sql=p[0]:p[0]&&typeof p[0]=="object"&&(a.opt=p[0],a.sql=a.opt.sql);break;case 2:a.sql=p[0],a.opt=p[1];break;default:n("Invalid argument count for exec().")}a.sql=o.flexibleString(a.sql),typeof a.sql!="string"&&n("Missing SQL argument or unsupported SQL value type.");const _=a.opt;switch(_.returnValue){case"resultRows":_.resultRows||(_.resultRows=[]),a.returnVal=()=>_.resultRows;break;case"saveSql":_.saveSql||(_.saveSql=[]),a.returnVal=()=>_.saveSql;break;case void 0:case"this":a.returnVal=()=>f;break;default:n("Invalid returnValue value:",_.returnValue)}if(!_.callback&&!_.returnValue&&_.rowMode!==void 0&&(_.resultRows||(_.resultRows=[]),a.returnVal=()=>_.resultRows),_.callback||_.resultRows)switch(_.rowMode===void 0?"array":_.rowMode){case"object":a.cbArg=(u,k)=>{k.columnNames||(k.columnNames=u.getColumnNames([]));const z=u.get([]),ne=Object.create(null);for(const ae in k.columnNames)ne[k.columnNames[ae]]=z[ae];return ne};break;case"array":a.cbArg=u=>u.get([]);break;case"stmt":Array.isArray(_.resultRows)&&n("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),a.cbArg=u=>u;break;default:if(o.isInt32(_.rowMode)){a.cbArg=u=>u.get(_.rowMode);break}else if(typeof _.rowMode=="string"&&_.rowMode.length>1&&_.rowMode[0]==="$"){const u=_.rowMode.substr(1);a.cbArg=k=>{const z=k.get(Object.create(null))[u];return z===void 0?n(r.SQLITE_NOTFOUND,"exec(): unknown result column:",u):z};break}n("Invalid rowMode:",_.rowMode)}return a},L=(f,p,a,..._)=>{const u=f.prepare(p);try{const k=u.bind(a).step()?u.get(..._):void 0;return u.reset(),k}finally{u.finalize()}},x=(f,p,a,_)=>f.exec({sql:p,bind:a,rowMode:_,returnValue:"resultRows"});S.checkRc=(f,p)=>D(f,p),S.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return w(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const f=this.pointer;if(Object.keys(g.get(this)).forEach((p,a)=>{if(a&&a.pointer)try{a.finalize()}catch{}}),h.delete(this),g.delete(this),r.sqlite3_close_v2(f),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(f=!1,p=!1){const a=w(this).pointer;return f?p?r.sqlite3_total_changes64(a):r.sqlite3_total_changes(a):p?r.sqlite3_changes64(a):r.sqlite3_changes(a)},dbFilename:function(f="main"){return r.sqlite3_db_filename(w(this).pointer,f)},dbName:function(f=0){return r.sqlite3_db_name(w(this).pointer,f)},dbVfsName:function(f=0){let p;const a=r.sqlite3_js_db_vfs(w(this).pointer,f);if(a){const _=new r.sqlite3_vfs(a);try{p=s.cstrToJs(_.$zName)}finally{_.dispose()}}return p},prepare:function(f){w(this);const p=s.pstack.pointer;let a,_;try{a=s.pstack.alloc(8),S.checkRc(this,r.sqlite3_prepare_v2(this.pointer,f,-1,a,null)),_=s.peekPtr(a)}finally{s.pstack.restore(p)}_||n("Cannot prepare empty SQL.");const u=new b(this,_,C);return g.get(this)[_]=u,u},exec:function(){w(this);const f=R(this,arguments);if(!f.sql)return n("exec() requires an SQL string.");const p=f.opt,a=p.callback,_=Array.isArray(p.resultRows)?p.resultRows:void 0;let u,k=p.bind,z=!!(f.cbArg||p.columnNames||_);const ne=s.scopedAllocPush(),ae=Array.isArray(p.saveSql)?p.saveSql:void 0;try{const _e=o.isSQLableTypedArray(f.sql);let M=_e?f.sql.byteLength:s.jstrlen(f.sql);const y=s.scopedAlloc(2*s.ptrSizeof+(M+1)),I=y+s.ptrSizeof;let j=I+s.ptrSizeof;const H=j+M;for(_e?s.heap8().set(f.sql,j):s.jstrcpy(f.sql,s.heap8(),j,M,!1),s.poke(j+M,0);j&&s.peek(j,"i8");){s.pokePtr([y,I],0),S.checkRc(this,r.sqlite3_prepare_v3(this.pointer,j,M,0,y,I));const re=s.peekPtr(y);if(j=s.peekPtr(I),M=H-j,!!re){if(ae&&ae.push(r.sqlite3_sql(re).trim()),u=new b(this,re,C),k&&u.parameterCount&&(u.bind(k),k=null),z&&u.columnCount){let ce=Array.isArray(p.columnNames)?0:1;if(z=!1,f.cbArg||_){const A=Object.create(null);for(;u.step();u._lockedByExec=!1){ce++===0&&u.getColumnNames(A.columnNames=p.columnNames||[]),u._lockedByExec=!0;const N=f.cbArg(u,A);if(_&&_.push(N),a&&a.call(p,N,u)===!1)break}u._lockedByExec=!1}ce===0&&u.getColumnNames(p.columnNames)}else u.step();u.reset().finalize(),u=null}}}finally{s.scopedAllocPop(ne),u&&(delete u._lockedByExec,u.finalize())}return f.returnVal()},createFunction:function(p,a,_){const u=A=>A instanceof Function;switch(arguments.length){case 1:_=p,p=_.name,a=_.xFunc||0;break;case 2:u(a)||(_=a,a=_.xFunc||0);break}_||(_={}),typeof p!="string"&&n("Invalid arguments: missing function name.");let k=_.xStep||0,z=_.xFinal||0;const ne=_.xValue||0,ae=_.xInverse||0;let _e;u(a)?(_e=!1,(u(k)||u(z))&&n("Ambiguous arguments: scalar or aggregate?"),k=z=null):u(k)?(u(z)||n("Missing xFinal() callback for aggregate or window UDF."),a=null):u(z)?n("Missing xStep() callback for aggregate or window UDF."):n("Missing function-type properties."),_e===!1?(u(ne)||u(ae))&&n("xValue and xInverse are not permitted for non-window UDFs."):u(ne)?(u(ae)||n("xInverse must be provided if xValue is."),_e=!0):u(ae)&&n("xValue must be provided if xInverse is.");const M=_.pApp;M!=null&&(typeof M!="number"||!o.isInt32(M))&&n("Invalid value for pApp property. Must be a legal WASM pointer value.");const y=_.xDestroy||0;y&&!u(y)&&n("xDestroy property must be a function.");let I=0;P(_,"deterministic")&&(I|=r.SQLITE_DETERMINISTIC),P(_,"directOnly")&&(I|=r.SQLITE_DIRECTONLY),P(_,"innocuous")&&(I|=r.SQLITE_INNOCUOUS),p=p.toLowerCase();const j=a||k,H=P(_,"arity"),re=typeof H=="number"?H:j.length?j.length-1:0;let ce;return _e?ce=r.sqlite3_create_window_function(this.pointer,p,re,r.SQLITE_UTF8|I,M||0,k,z,ne,ae,y):ce=r.sqlite3_create_function_v2(this.pointer,p,re,r.SQLITE_UTF8|I,M||0,a,k,z,y),S.checkRc(this,ce),this},selectValue:function(f,p,a){return L(this,f,p,0,a)},selectValues:function(f,p,a){const _=this.prepare(f),u=[];try{for(_.bind(p);_.step();)u.push(_.get(0,a));_.reset()}finally{_.finalize()}return u},selectArray:function(f,p){return L(this,f,p,[])},selectObject:function(f,p){return L(this,f,p,{})},selectArrays:function(f,p){return x(this,f,p,"array")},selectObjects:function(f,p){return x(this,f,p,"object")},openStatementCount:function(){return this.pointer?Object.keys(g.get(this)).length:0},transaction:function(f){let p="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&n(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),p+=" "+arguments[0],f=arguments[1]),w(this).exec(p);try{const a=f(this);return this.exec("COMMIT"),a}catch(a){throw this.exec("ROLLBACK"),a}},savepoint:function(f){w(this).exec("SAVEPOINT oo1");try{const p=f(this);return this.exec("RELEASE oo1"),p}catch(p){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),p}},checkRc:function(f){return D(this,f)}};const O=function(f){return f.pointer||n("Stmt has been closed."),f},J=function(f){let p=C[f==null?"null":typeof f];switch(p){case C.boolean:case C.null:case C.number:case C.string:return p;case C.bigint:if(s.bigIntEnabled)return p;default:return o.isBindableTypedArray(f)?C.blob:void 0}},c=function(f){return J(f)||n("Unsupported bind() argument type:",typeof f)},d=function(f,p){const a=typeof p=="number"?p:r.sqlite3_bind_parameter_index(f.pointer,p);return a===0||!o.isInt32(a)?n("Invalid bind() parameter name: "+p):(a<1||a>f.parameterCount)&&n("Bind index",p,"is out of range."),a},q=function(f,p){return f._lockedByExec&&n("Operation is illegal when statement is locked:",p),f},B=function f(p,a,_,u){q(O(p),"bind()"),f._||(f._tooBigInt=z=>n("BigInt value is too big to store without precision loss:",z),f._={string:function(z,ne,ae,_e){const[M,y]=s.allocCString(ae,!0);return(_e?r.sqlite3_bind_blob:r.sqlite3_bind_text)(z.pointer,ne,M,y,r.SQLITE_WASM_DEALLOC)}}),c(u),a=d(p,a);let k=0;switch(u==null?C.null:_){case C.null:k=r.sqlite3_bind_null(p.pointer,a);break;case C.string:k=f._.string(p,a,u,!1);break;case C.number:{let z;o.isInt32(u)?z=r.sqlite3_bind_int:typeof u=="bigint"?o.bigIntFits64(u)?s.bigIntEnabled?z=r.sqlite3_bind_int64:o.bigIntFitsDouble(u)?(u=Number(u),z=r.sqlite3_bind_double):f._tooBigInt(u):f._tooBigInt(u):(u=Number(u),s.bigIntEnabled&&Number.isInteger(u)?z=r.sqlite3_bind_int64:z=r.sqlite3_bind_double),k=z(p.pointer,a,u);break}case C.boolean:k=r.sqlite3_bind_int(p.pointer,a,u?1:0);break;case C.blob:{if(typeof u=="string"){k=f._.string(p,a,u,!0);break}else u instanceof ArrayBuffer?u=new Uint8Array(u):o.isBindableTypedArray(u)||n("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const z=s.alloc(u.byteLength||1);s.heap8().set(u.byteLength?u:[0],z),k=r.sqlite3_bind_blob(p.pointer,a,z,u.byteLength,r.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",u),n("Unsupported bind() argument type: "+typeof u)}return k&&S.checkRc(p.db.pointer,k),p._mayGet=!1,p};b.prototype={finalize:function(){if(this.pointer){q(this,"finalize()");const f=r.sqlite3_finalize(this.pointer);return delete g.get(this.db)[this.pointer],h.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,f}},clearBindings:function(){return q(O(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(f){q(this,"reset()"),f&&this.clearBindings();const p=r.sqlite3_reset(O(this).pointer);return this._mayGet=!1,D(this.db,p),this},bind:function(){O(this);let f,p;switch(arguments.length){case 1:f=1,p=arguments[0];break;case 2:f=arguments[0],p=arguments[1];break;default:n("Invalid bind() arguments.")}return p===void 0?this:(this.parameterCount||n("This statement has no bindable parameters."),this._mayGet=!1,p===null?B(this,f,C.null,p):Array.isArray(p)?(arguments.length!==1&&n("When binding an array, an index argument is not permitted."),p.forEach((a,_)=>B(this,_+1,c(a),a)),this):(p instanceof ArrayBuffer&&(p=new Uint8Array(p)),typeof p=="object"&&!o.isBindableTypedArray(p)?(arguments.length!==1&&n("When binding an object, an index argument is not permitted."),Object.keys(p).forEach(a=>B(this,a,c(p[a]),p[a])),this):B(this,f,c(p),p)))},bindAsBlob:function(f,p){O(this),arguments.length===1&&(p=f,f=1);const a=c(p);return C.string!==a&&C.blob!==a&&C.null!==a&&n("Invalid value type for bindAsBlob()"),B(this,f,C.blob,p)},step:function(){q(this,"step()");const f=r.sqlite3_step(O(this).pointer);switch(f){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",f,r.sqlite3_js_rc_str(f),"SQL =",r.sqlite3_sql(this.pointer)),S.checkRc(this.db.pointer,f)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const f=this.step();return this.reset(),f}finally{try{this.finalize()}catch{}}},get:function(f,p){if(O(this)._mayGet||n("Stmt.step() has not (recently) returned true."),Array.isArray(f)){let a=0;const _=this.columnCount;for(;a<_;)f[a]=this.get(a++);return f}else if(f&&typeof f=="object"){let a=0;const _=this.columnCount;for(;a<_;)f[r.sqlite3_column_name(this.pointer,a)]=this.get(a++);return f}switch(E(this,f),p===void 0?r.sqlite3_column_type(this.pointer,f):p){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(s.bigIntEnabled){const a=r.sqlite3_column_int64(this.pointer,f);return a>=Number.MIN_SAFE_INTEGER&&a<=Number.MAX_SAFE_INTEGER?Number(a).valueOf():a}else{const a=r.sqlite3_column_double(this.pointer,f);return(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)&&n("Integer is out of range for JS integer range: "+a),o.isInt32(a)?a|0:a}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,f);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,f);case r.SQLITE_BLOB:{const a=r.sqlite3_column_bytes(this.pointer,f),_=r.sqlite3_column_blob(this.pointer,f),u=new Uint8Array(a);return a&&u.set(s.heap8u().slice(_,_+a),0),a&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(u.buffer),u}default:n("Don't know how to translate","type of result column #"+f+".")}n("Not reached.")},getInt:function(f){return this.get(f,r.SQLITE_INTEGER)},getFloat:function(f){return this.get(f,r.SQLITE_FLOAT)},getString:function(f){return this.get(f,r.SQLITE_TEXT)},getBlob:function(f){return this.get(f,r.SQLITE_BLOB)},getJSON:function(f){const p=this.get(f,r.SQLITE_STRING);return p===null?p:JSON.parse(p)},getColumnName:function(f){return r.sqlite3_column_name(E(O(this),f).pointer,f)},getColumnNames:function(f=[]){E(O(this),0);const p=this.columnCount;for(let a=0;a<p;++a)f.push(r.sqlite3_column_name(this.pointer,a));return f},getParamIndex:function(f){return O(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,f):void 0},getParamName:function(f){return O(this).parameterCount?r.sqlite3_bind_parameter_name(this.pointer,f):void 0},isBusy:function(){return r.sqlite3_stmt_busy(O(this))!==0},isReadOnly:function(){return r.sqlite3_stmt_readonly(O(this))!==0}};{const f={enumerable:!0,get:function(){return h.get(this)},set:()=>n("The pointer property is read-only.")};Object.defineProperty(b.prototype,"pointer",f),Object.defineProperty(S.prototype,"pointer",f)}if(Object.defineProperty(b.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>n("The columnCount property is read-only.")}),t.oo1={DB:S,Stmt:b},o.isUIThread()){t.oo1.JsStorageDb=function(p="session"){const a=T.normalizeArgs(...arguments);p=a.filename,p!=="session"&&p!=="local"&&n("JsStorageDb db name must be one of 'session' or 'local'."),a.vfs="kvvfs",T.call(this,a)};const f=t.oo1.JsStorageDb;f.prototype=Object.create(S.prototype),f.clearStorage=r.sqlite3_js_kvvfs_clear,f.prototype.clearStorage=function(){return f.clearStorage(w(this).filename)},f.storageSize=r.sqlite3_js_kvvfs_size,f.prototype.storageSize=function(){return f.storageSize(w(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.util;t.initWorker1API=function(){const r=(...T)=>{throw new Error(T.join(" "))};globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const s=this.sqlite3||r("Missing this.sqlite3 object."),o=s.oo1.DB,h=function(T){let S=g.idMap.get(T);return S||(S="db#"+ ++g.idSeq+"@"+T.pointer,g.idMap.set(T,S),S)},g={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(T){const S=new o(T);return this.dbs[h(S)]=S,this.dbList.indexOf(S)<0&&this.dbList.push(S),S},close:function(T,S){if(T){delete this.dbs[h(T)];const C=T.filename,b=n.sqlite3__wasm_db_vfs(T.pointer,0);T.close();const w=this.dbList.indexOf(T);w>=0&&this.dbList.splice(w,1),S&&C&&b&&n.sqlite3__wasm_vfs_unlink(b,C)}},post:function(T,S){S&&S.length?(globalThis.postMessage(T,Array.from(S)),S.length=0):globalThis.postMessage(T)},dbs:Object.create(null),getDb:function(T,S=!0){return this.dbs[T]||(S?r("Unknown (or closed) DB ID:",T):void 0)}},P=function(T=g.dbList[0]){return T&&T.pointer?T:r("DB is not opened.")},D=function(T,S=!0){const C=g.getDb(T.dbId,!1)||g.dbList[0];return S?P(C):C},U=function(){return g.dbList[0]&&h(g.dbList[0])},Q={open:function(T){const S=Object.create(null),C=T.args||Object.create(null);C.simulateError&&r("Throwing because of simulateError flag.");const b=Object.create(null);S.vfs=C.vfs,S.filename=C.filename||"";const w=g.open(S);return b.filename=w.filename,b.persistent=!!s.capi.sqlite3_js_db_uses_vfs(w.pointer,"opfs"),b.dbId=h(w),b.vfs=w.dbVfsName(),b},close:function(T){const S=D(T,!1),C={filename:S&&S.filename};if(S){const b=T.args&&typeof T.args=="object"?!!T.args.unlink:!1;g.close(S,b)}return C},exec:function(T){const S=typeof T.args=="string"?{sql:T.args}:T.args||Object.create(null);S.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):S.sql||r("'exec' requires input SQL.");const C=D(T);(S.callback||Array.isArray(S.resultRows))&&(C._blobXfer=g.xfer);const b=S.callback;let w=0;const E=!!S.columnNames;typeof b=="string"&&(E||(S.columnNames=[]),S.callback=function(R,L){g.post({type:b,columnNames:S.columnNames,rowNumber:++w,row:R},g.xfer)});try{const R=S.countChanges?C.changes(!0,S.countChanges===64):void 0;C.exec(S),R!==void 0&&(S.changeCount=C.changes(!0,S.countChanges===64)-R),S.callback instanceof Function&&(S.callback=b,g.post({type:b,columnNames:S.columnNames,rowNumber:null,row:void 0}))}finally{delete C._blobXfer,S.callback&&(S.callback=b)}return S},"config-get":function(){const T=Object.create(null),S=s.config;return["bigIntEnabled"].forEach(function(C){Object.getOwnPropertyDescriptor(S,C)&&(T[C]=S[C])}),T.version=s.version,T.vfsList=s.capi.sqlite3_js_vfs_list(),T},export:function(T){const S=D(T),C={byteArray:s.capi.sqlite3_js_db_export(S.pointer),filename:S.filename,mimetype:"application/x-sqlite3"};return g.xfer.push(C.byteArray.buffer),C},toss:function(T){r("Testing worker exception")}};globalThis.onmessage=async function(T){T=T.data;let S,C=T.dbId,b=T.type;const w=performance.now();try{Q.hasOwnProperty(b)&&Q[b]instanceof Function?S=await Q[b](T):r("Unknown db worker message type:",T.type)}catch(E){b="error",S={operation:T.type,message:E.message,errorClass:E.name,input:T},E.stack&&(S.stack=typeof E.stack=="string"?E.stack.split(/\n\s*/):E.stack)}C||(C=S.dbId||U()),g.post({type:b,dbId:C,messageId:T.messageId,workerReceivedTime:w,workerRespondTime:performance.now(),departureTime:T.departureTime,result:S},g.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.wasm,r=t.capi,s=t.util.toss3,o=Object.create(null);t.vfs=o,r.sqlite3_vfs.prototype.registerVfs=function(h=!1){this instanceof t.capi.sqlite3_vfs||s("Expecting a sqlite3_vfs-type argument.");const g=r.sqlite3_vfs_register(this,h?1:0);return g&&s("sqlite3_vfs_register(",this,") failed with rc",g),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&s("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},o.installVfs=function(h){let g=0;const P=["io","vfs"];for(const D of P){const U=h[D];U&&(++g,U.struct.installMethods(U.methods,!!U.applyArgcCheck),D==="vfs"&&(!U.struct.$zName&&typeof U.name=="string"&&U.struct.addOnDispose(U.struct.$zName=n.allocCString(U.name)),U.struct.registerVfs(!!U.asDefault)))}return g||s("Misuse: installVfs() options object requires at least","one of:",P),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const n=t.wasm,r=t.capi,s=t.util.toss3,o=Object.create(null);t.vtab=o;const h=r.sqlite3_index_info;h.prototype.nthConstraint=function(D,U=!1){if(D<0||D>=this.$nConstraint)return!1;const Q=this.$aConstraint+h.sqlite3_index_constraint.structInfo.sizeof*D;return U?Q:new h.sqlite3_index_constraint(Q)},h.prototype.nthConstraintUsage=function(D,U=!1){if(D<0||D>=this.$nConstraint)return!1;const Q=this.$aConstraintUsage+h.sqlite3_index_constraint_usage.structInfo.sizeof*D;return U?Q:new h.sqlite3_index_constraint_usage(Q)},h.prototype.nthOrderBy=function(D,U=!1){if(D<0||D>=this.$nOrderBy)return!1;const Q=this.$aOrderBy+h.sqlite3_index_orderby.structInfo.sizeof*D;return U?Q:new h.sqlite3_index_orderby(Q)};const g=function(D,U){return function(Q,T=!1){if(arguments.length===0&&(Q=new U),Q instanceof U)return this.set(Q.pointer,Q),Q;n.isPtr(Q)||t.SQLite3Error.toss("Invalid argument to",D+"()");let S=this.get(Q);return T&&this.delete(Q),S}.bind(new Map)},P=function(D,U){const Q=g(D,U);return Object.assign(Object.create(null),{StructType:U,create:T=>{const S=Q();return n.pokePtr(T,S.pointer),S},get:T=>Q(T),unget:T=>Q(T,!0),dispose:T=>{const S=Q(T,!0);S&&S.dispose()}})};o.xVtab=P("xVtab",r.sqlite3_vtab),o.xCursor=P("xCursor",r.sqlite3_vtab_cursor),o.xIndexInfo=D=>new r.sqlite3_index_info(D),o.xError=function D(U,Q,T){if(D.errorReporter instanceof Function)try{D.errorReporter("sqlite3_module::"+U+"(): "+Q.message)}catch{}let S;return Q instanceof t.WasmAllocError?S=r.SQLITE_NOMEM:arguments.length>2?S=T:Q instanceof t.SQLite3Error&&(S=Q.resultCode),S||r.SQLITE_ERROR},o.xError.errorReporter=console.error.bind(console),o.xRowid=(D,U)=>n.poke(D,U,"i64"),o.setupModule=function(D){let U=!1;const Q=this instanceof r.sqlite3_module?this:D.struct||(U=new r.sqlite3_module);try{const T=D.methods||s("Missing 'methods' object.");for(const S of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const C=S[0],b=S[1];T[C]===!0?T[C]=T[b]:T[b]===!0&&(T[b]=T[C])}if(D.catchExceptions){const S=function(w,E){return["xConnect","xCreate"].indexOf(w)>=0?function(R,L,x,O,J,c){try{return E(...arguments)||0}catch(d){return d instanceof t.WasmAllocError||(n.dealloc(n.peekPtr(c)),n.pokePtr(c,n.allocCString(d.message))),o.xError(w,d)}}:function(...R){try{return E(...R)||0}catch(L){return o.xError(w,L)}}},C=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],b=Object.create(null);for(const w of C){const E=T[w];if(E instanceof Function)w==="xConnect"&&T.xCreate===E?b[w]=T.xCreate:w==="xCreate"&&T.xConnect===E?b[w]=T.xConnect:b[w]=S(w,E);else continue}Q.installMethods(b,!1)}else Q.installMethods(T,!!D.applyArgcCheck);if(Q.$iVersion===0){let S;typeof D.iVersion=="number"?S=D.iVersion:Q.$xShadowName?S=3:Q.$xSavePoint||Q.$xRelease||Q.$xRollbackTo?S=2:S=1,Q.$iVersion=S}}catch(T){throw U&&U.dispose(),T}return Q},r.sqlite3_module.prototype.setupModule=function(D){return o.setupModule.call(this,D)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=function r(s){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!s||typeof s!="object")&&(s=Object.create(null));const o=new URL(globalThis.location.href).searchParams;return o.has("opfs-disable")?Promise.resolve(t):(s.verbose===void 0&&(s.verbose=o.has("opfs-verbose")?+o.get("opfs-verbose")||2:1),s.sanityChecks===void 0&&(s.sanityChecks=o.has("opfs-sanity-check")),s.proxyUri===void 0&&(s.proxyUri=r.defaultProxyUri),typeof s.proxyUri=="function"&&(s.proxyUri=s.proxyUri()),new Promise(function(g,P){const D=[t.config.error,t.config.warn,t.config.log],U=(A,...N)=>{s.verbose>A&&D[A]("OPFS syncer:",...N)},Q=(...A)=>U(2,...A),T=(...A)=>U(1,...A),S=(...A)=>U(0,...A),C=t.util.toss,b=t.capi,w=t.util,E=t.wasm,R=b.sqlite3_vfs,L=b.sqlite3_file,x=b.sqlite3_io_methods,O=Object.create(null),J=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;O.metrics={dump:function(){let A,N=0,W=0,X=0;for(A in u.opIds){const $=k[A];N+=$.count,W+=$.time,X+=$.wait,$.avgTime=$.count&&$.time?$.time/$.count:0,$.avgWait=$.count&&$.wait?$.wait/$.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",k,`
Total of`,N,"op(s) for",W,"ms (incl. "+X+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",k.s11n),p.postMessage({type:"opfs-async-metrics"})},reset:function(){let A;const N=X=>X.count=X.time=X.wait=0;for(A in u.opIds)N(k[A]=Object.create(null));let W=k.s11n=Object.create(null);W=W.serialize=Object.create(null),W.count=W.time=0,W=k.s11n.deserialize=Object.create(null),W.count=W.time=0}};const c=new x,d=new R().addOnDispose(()=>c.dispose());let q;const B=A=>(q=!0,d.dispose(),P(A)),f=()=>(q=!1,g(t)),p=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",self.location.href));setTimeout(()=>{q===void 0&&B(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),p._originalOnError=p.onerror,p.onerror=function(A){S("Error initializing OPFS asyncer:",A),B(new Error("Loading OPFS async Worker failed for unknown reasons."))};const a=b.sqlite3_vfs_find(null),_=a?new R(a):null;c.$iVersion=1,d.$iVersion=2,d.$szOsFile=b.sqlite3_file.structInfo.sizeof,d.$mxPathname=1024,d.$zName=E.allocCString("opfs"),d.$xDlOpen=d.$xDlError=d.$xDlSym=d.$xDlClose=null,d.addOnDispose("$zName",d.$zName,"cleanup default VFS wrapper",()=>_?_.dispose():null);const u=Object.create(null);u.verbose=s.verbose,u.littleEndian=(()=>{const A=new ArrayBuffer(2);return new DataView(A).setInt16(0,256,!0),new Int16Array(A)[0]===256})(),u.asyncIdleWaitTime=150,u.asyncS11nExceptions=1,u.fileBufferSize=1024*64,u.sabS11nOffset=u.fileBufferSize,u.sabS11nSize=d.$mxPathname*2,u.sabIO=new SharedArrayBuffer(u.fileBufferSize+u.sabS11nSize),u.opIds=Object.create(null);const k=Object.create(null);{let A=0;u.opIds.whichOp=A++,u.opIds.rc=A++,u.opIds.xAccess=A++,u.opIds.xClose=A++,u.opIds.xDelete=A++,u.opIds.xDeleteNoWait=A++,u.opIds.xFileSize=A++,u.opIds.xLock=A++,u.opIds.xOpen=A++,u.opIds.xRead=A++,u.opIds.xSleep=A++,u.opIds.xSync=A++,u.opIds.xTruncate=A++,u.opIds.xUnlock=A++,u.opIds.xWrite=A++,u.opIds.mkdir=A++,u.opIds["opfs-async-metrics"]=A++,u.opIds["opfs-async-shutdown"]=A++,u.opIds.retry=A++,u.sabOP=new SharedArrayBuffer(A*4),O.metrics.reset()}u.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(A=>{(u.sq3Codes[A]=b[A])===void 0&&C("Maintenance required: not found:",A)}),u.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const z=(A,...N)=>{const W=u.opIds[A]||C("Invalid op ID:",A);u.s11n.serialize(...N),Atomics.store(u.sabOPView,u.opIds.rc,-1),Atomics.store(u.sabOPView,u.opIds.whichOp,W),Atomics.notify(u.sabOPView,u.opIds.whichOp);const X=performance.now();for(;Atomics.wait(u.sabOPView,u.opIds.rc,-1)!=="not-equal";);const $=Atomics.load(u.sabOPView,u.opIds.rc);if(k[A].wait+=performance.now()-X,$&&u.asyncS11nExceptions){const se=u.s11n.deserialize();se&&S(A+"() async error:",...se)}return $};O.debug={asyncShutdown:()=>{T("Shutting down OPFS async listener. The OPFS VFS will no longer work."),z("opfs-async-shutdown")},asyncRestart:()=>{T("Attempting to restart OPFS VFS async listener. Might work, might not."),p.postMessage({type:"opfs-async-restart"})}};const ne=()=>{if(u.s11n)return u.s11n;const A=new TextDecoder,N=new TextEncoder("utf-8"),W=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),X=new DataView(u.sabIO,u.sabS11nOffset,u.sabS11nSize);u.s11n=Object.create(null);const $=Object.create(null);$.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},$.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},$.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},$.string={id:4};const se=te=>$[typeof te]||C("Maintenance required: this value type cannot be serialized.",te),pe=te=>{switch(te){case $.number.id:return $.number;case $.bigint.id:return $.bigint;case $.boolean.id:return $.boolean;case $.string.id:return $.string;default:C("Invalid type ID:",te)}};return u.s11n.deserialize=function(te=!1){++k.s11n.deserialize.count;const Te=performance.now(),F=W[0],V=F?[]:null;if(F){const G=[];let Y=1,ge,xe,ve;for(ge=0;ge<F;++ge,++Y)G.push(pe(W[Y]));for(ge=0;ge<F;++ge){const Ee=G[ge];Ee.getter?(ve=X[Ee.getter](Y,u.littleEndian),Y+=Ee.size):(xe=X.getInt32(Y,u.littleEndian),Y+=4,ve=A.decode(W.slice(Y,Y+xe)),Y+=xe),V.push(ve)}}return te&&(W[0]=0),k.s11n.deserialize.time+=performance.now()-Te,V},u.s11n.serialize=function(...te){const Te=performance.now();if(++k.s11n.serialize.count,te.length){const F=[];let V=0,G=1;for(W[0]=te.length&255;V<te.length;++V,++G)F.push(se(te[V])),W[G]=F[V].id;for(V=0;V<te.length;++V){const Y=F[V];if(Y.setter)X[Y.setter](G,te[V],u.littleEndian),G+=Y.size;else{const ge=N.encode(te[V]);X.setInt32(G,ge.byteLength,u.littleEndian),G+=4,W.set(ge,G),G+=ge.byteLength}}}else W[0]=0;k.s11n.serialize.time+=performance.now()-Te},u.s11n},ae=function A(N=16){A._chars||(A._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",A._n=A._chars.length);const W=[];let X=0;for(;X<N;++X){const $=Math.random()*(A._n*64)%A._n|0;W[X]=A._chars[$]}return W.join("")},_e=Object.create(null),M=Object.create(null);M.op=void 0,M.start=void 0;const y=A=>{M.start=performance.now(),M.op=A,++k[A].count},I=()=>k[M.op].time+=performance.now()-M.start,j={xCheckReservedLock:function(A,N){return E.poke(N,0,"i32"),0},xClose:function(A){y("xClose");let N=0;const W=_e[A];return W&&(delete _e[A],N=z("xClose",A),W.sq3File&&W.sq3File.dispose()),I(),N},xDeviceCharacteristics:function(A){return b.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(A,N,W){return b.SQLITE_NOTFOUND},xFileSize:function(A,N){y("xFileSize");let W=z("xFileSize",A);if(W==0)try{const X=u.s11n.deserialize()[0];E.poke(N,X,"i64")}catch(X){S("Unexpected error reading xFileSize() result:",X),W=u.sq3Codes.SQLITE_IOERR}return I(),W},xLock:function(A,N){y("xLock");const W=_e[A];let X=0;return W.lockType?W.lockType=N:(X=z("xLock",A,N),X===0&&(W.lockType=N)),I(),X},xRead:function(A,N,W,X){y("xRead");const $=_e[A];let se;try{se=z("xRead",A,W,Number(X)),(se===0||b.SQLITE_IOERR_SHORT_READ===se)&&E.heap8u().set($.sabView.subarray(0,W),N)}catch(pe){S("xRead(",arguments,") failed:",pe,$),se=b.SQLITE_IOERR_READ}return I(),se},xSync:function(A,N){y("xSync"),++k.xSync.count;const W=z("xSync",A,N);return I(),W},xTruncate:function(A,N){y("xTruncate");const W=z("xTruncate",A,Number(N));return I(),W},xUnlock:function(A,N){y("xUnlock");const W=_e[A];let X=0;return b.SQLITE_LOCK_NONE===N&&W.lockType&&(X=z("xUnlock",A,N)),X===0&&(W.lockType=N),I(),X},xWrite:function(A,N,W,X){y("xWrite");const $=_e[A];let se;try{$.sabView.set(E.heap8u().subarray(N,N+W)),se=z("xWrite",A,W,Number(X))}catch(pe){S("xWrite(",arguments,") failed:",pe,$),se=b.SQLITE_IOERR_WRITE}return I(),se}},H={xAccess:function(A,N,W,X){y("xAccess");const $=z("xAccess",E.cstrToJs(N));return E.poke(X,$?0:1,"i32"),I(),0},xCurrentTime:function(A,N){return E.poke(N,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(A,N){return E.poke(N,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(A,N,W){y("xDelete");const X=z("xDelete",E.cstrToJs(N),W,!1);return I(),X},xFullPathname:function(A,N,W,X){return E.cstrncpy(X,N,W)<W?0:b.SQLITE_CANTOPEN},xGetLastError:function(A,N,W){return T("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(N,W,X,$,se){y("xOpen");let pe=0;W===0?W=ae():E.isPtr(W)&&(b.sqlite3_uri_boolean(W,"opfs-unlock-asap",0)&&(pe|=u.opfsFlags.OPFS_UNLOCK_ASAP),b.sqlite3_uri_boolean(W,"delete-before-open",0)&&(pe|=u.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),W=E.cstrToJs(W));const te=Object.create(null);te.fid=X,te.filename=W,te.sab=new SharedArrayBuffer(u.fileBufferSize),te.flags=$,te.readOnly=!(t.SQLITE_OPEN_CREATE&$)&&!!($&b.SQLITE_OPEN_READONLY);const Te=z("xOpen",X,W,$,pe);return Te||(te.readOnly&&E.poke(se,b.SQLITE_OPEN_READONLY,"i32"),_e[X]=te,te.sabView=u.sabFileBufView,te.sq3File=new L(X),te.sq3File.$pMethods=c.pointer,te.lockType=b.SQLITE_LOCK_NONE),I(),Te}};_&&(d.$xRandomness=_.$xRandomness,d.$xSleep=_.$xSleep),d.$xRandomness||(H.xRandomness=function(A,N,W){const X=E.heap8u();let $=0;for(;$<N;++$)X[W+$]=Math.random()*255e3&255;return $}),d.$xSleep||(H.xSleep=function(A,N){return Atomics.wait(u.sabOPView,u.opIds.xSleep,0,N),0}),O.getResolvedPath=function(A,N){const W=new URL(A,"file://irrelevant").pathname;return N?W.split("/").filter(X=>!!X):W},O.getDirForFilename=async function(N,W=!1){const X=O.getResolvedPath(N,!0),$=X.pop();let se=O.rootDirectory;for(const pe of X)pe&&(se=await se.getDirectoryHandle(pe,{create:!!W}));return[se,$]},O.mkdir=async function(A){try{return await O.getDirForFilename(A+"/filepart",!0),!0}catch{return!1}},O.entryExists=async function(A){try{const[N,W]=await O.getDirForFilename(A);return await N.getFileHandle(W),!0}catch{return!1}},O.randomFilename=ae,O.treeList=async function(){const A=async function W(X,$){$.name=X.name,$.dirs=[],$.files=[];for await(const se of X.values())if(se.kind==="directory"){const pe=Object.create(null);$.dirs.push(pe),await W(se,pe)}else $.files.push(se.name)},N=Object.create(null);return await A(O.rootDirectory,N),N},O.rmfr=async function(){const A=O.rootDirectory,N={recurse:!0};for await(const W of A.values())A.removeEntry(W.name,N)},O.unlink=async function(A,N=!1,W=!1){try{const[X,$]=await O.getDirForFilename(A,!1);return await X.removeEntry($,{recursive:N}),!0}catch(X){if(W)throw new Error("unlink(",arguments[0],") failed: "+X.message,{cause:X});return!1}},O.traverse=async function(A){const N={recursive:!0,directory:O.rootDirectory};typeof A=="function"&&(A={callback:A}),A=Object.assign(N,A||{}),async function X($,se){for await(const pe of $.values()){if(A.callback(pe,$,se)===!1)return!1;if(A.recursive&&pe.kind==="directory"&&await X(pe,se+1)===!1)break}}(A.directory,0)};const re=async function(A,N){const[W,X]=await O.getDirForFilename(A,!0);let se=await(await W.getFileHandle(X,{create:!0})).createSyncAccessHandle(),pe=0,te,Te=!1;try{for(se.truncate(0);(te=await N())!==void 0;)te instanceof ArrayBuffer&&(te=new Uint8Array(te)),pe===0&&te.byteLength>=15&&(w.affirmDbHeader(te),Te=!0),se.write(te,{at:pe}),pe+=te.byteLength;if((pe<512||pe%512!==0)&&C("Input size",pe,"is not correct for an SQLite database."),!Te){const F=new Uint8Array(20);se.read(F,{at:0}),w.affirmDbHeader(F)}return se.write(new Uint8Array([1,1]),{at:18}),pe}catch(F){throw await se.close(),se=void 0,await W.removeEntry(X).catch(()=>{}),F}finally{se&&await se.close()}};if(O.importDb=async function(A,N){if(N instanceof Function)return re(A,N);N instanceof ArrayBuffer&&(N=new Uint8Array(N)),w.affirmIsDb(N);const W=N.byteLength,[X,$]=await O.getDirForFilename(A,!0);let se,pe=0;try{return se=await(await X.getFileHandle($,{create:!0})).createSyncAccessHandle(),se.truncate(0),pe=se.write(N,{at:0}),pe!=W&&C("Expected to write "+W+" bytes but wrote "+pe+"."),se.write(new Uint8Array([1,1]),{at:18}),pe}catch(te){throw se&&(await se.close(),se=void 0),await X.removeEntry($).catch(()=>{}),te}finally{se&&await se.close()}},t.oo1){const A=function(...N){const W=t.oo1.DB.dbCtorHelper.normalizeArgs(...N);W.vfs=d.$zName,t.oo1.DB.dbCtorHelper.call(this,W)};A.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=A,A.importDb=O.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(d.pointer,function(N,W){W.capi.sqlite3_busy_timeout(N,1e4)})}const ce=function(){const A=E.scopedAllocPush(),N=new L;try{const W=N.pointer,X=b.SQLITE_OPEN_CREATE|b.SQLITE_OPEN_READWRITE|b.SQLITE_OPEN_MAIN_DB,$=E.scopedAlloc(8),se="/sanity/check/file"+ae(8),pe=E.scopedAllocCString(se);let te;if(u.s11n.serialize("This is ä string."),te=u.s11n.deserialize(),Q("deserialize() says:",te),te[0]!=="This is ä string."&&C("String d13n error."),H.xAccess(d.pointer,pe,0,$),te=E.peek($,"i32"),Q("xAccess(",se,") exists ?=",te),te=H.xOpen(d.pointer,pe,W,X,$),Q("open rc =",te,"state.sabOPView[xOpen] =",u.sabOPView[u.opIds.xOpen]),te!==0){S("open failed with code",te);return}H.xAccess(d.pointer,pe,0,$),te=E.peek($,"i32"),te||C("xAccess() failed to detect file."),te=j.xSync(N.pointer,0),te&&C("sync failed w/ rc",te),te=j.xTruncate(N.pointer,1024),te&&C("truncate failed w/ rc",te),E.poke($,0,"i64"),te=j.xFileSize(N.pointer,$),te&&C("xFileSize failed w/ rc",te),Q("xFileSize says:",E.peek($,"i64")),te=j.xWrite(N.pointer,pe,10,1),te&&C("xWrite() failed!");const Te=E.scopedAlloc(16);te=j.xRead(N.pointer,Te,6,2),E.poke(Te+6,0);let F=E.cstrToJs(Te);Q("xRead() got:",F),F!=="sanity"&&C("Unexpected xRead() value."),H.xSleep&&(Q("xSleep()ing before close()ing..."),H.xSleep(d.pointer,2e3),Q("waking up from xSleep()")),te=j.xClose(W),Q("xClose rc =",te,"sabOPView =",u.sabOPView),Q("Deleting file:",se),H.xDelete(d.pointer,pe,4660),H.xAccess(d.pointer,pe,0,$),te=E.peek($,"i32"),te&&C("Expecting 0 from xAccess(",se,") after xDelete()."),T("End of OPFS sanity checks.")}finally{N.dispose(),E.scopedAllocPop(A)}};p.onmessage=function({data:A}){switch(A.type){case"opfs-unavailable":B(new Error(A.payload.join(" ")));break;case"opfs-async-loaded":p.postMessage({type:"opfs-async-init",args:u});break;case"opfs-async-inited":{if(q===!0)break;try{t.vfs.installVfs({io:{struct:c,methods:j},vfs:{struct:d,methods:H}}),u.sabOPView=new Int32Array(u.sabOP),u.sabFileBufView=new Uint8Array(u.sabIO,0,u.fileBufferSize),u.sabS11nView=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),ne(),s.sanityChecks&&(T("Running sanity checks because of opfs-sanity-check URL arg..."),ce()),J()?navigator.storage.getDirectory().then(N=>{p.onerror=p._originalOnError,delete p._originalOnError,t.opfs=O,O.rootDirectory=N,Q("End of OPFS sqlite3_vfs setup.",d),f()}).catch(B):f()}catch(N){S(N),B(N)}break}default:{const N="Unexpected message from the OPFS async worker: "+JSON.stringify(A);S(N),B(new Error(N));break}}}}))};n.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let s=n.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(n.defaultProxyUri=r.scriptInfo.sqlite3Dir+s),n().catch(o=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",o.message)})}catch(s){return r.config.error("installOpfsVfs() exception:",s),Promise.reject(s)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const n=t.util.toss,r=t.util.toss3,s=Object.create(null),o=t.capi,h=t.util,g=t.wasm,P=4096,D=512,U=4,Q=8,T=D+U,S=D,C=T,b=P,w=o.SQLITE_OPEN_MAIN_DB|o.SQLITE_OPEN_MAIN_JOURNAL|o.SQLITE_OPEN_SUPER_JOURNAL|o.SQLITE_OPEN_WAL,E=".opaque",R=()=>Math.random().toString(36).slice(2),L=new TextDecoder,x=new TextEncoder,O=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),J=[t.config.error,t.config.warn,t.config.log];t.config.log;const c=t.config.warn;t.config.error;const d=new Map,q=M=>d.get(M),B=(M,y)=>{y?d.set(M,y):d.delete(M)},f=new Map,p=M=>f.get(M),a=(M,y)=>{y?f.set(M,y):f.delete(M)},_={xCheckReservedLock:function(M,y){const I=p(M);return I.log("xCheckReservedLock"),I.storeErr(),g.poke32(y,1),0},xClose:function(M){const y=p(M);y.storeErr();const I=y.getOFileForS3File(M);if(I)try{y.log(`xClose ${I.path}`),y.mapS3FileToOFile(M,!1),I.sah.flush(),I.flags&o.SQLITE_OPEN_DELETEONCLOSE&&y.deletePath(I.path)}catch(j){return y.storeErr(j,o.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(M){return o.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(M,y,I){return o.SQLITE_NOTFOUND},xFileSize:function(M,y){const I=p(M);I.log("xFileSize");const H=I.getOFileForS3File(M).sah.getSize()-b;return g.poke64(y,BigInt(H)),0},xLock:function(M,y){const I=p(M);I.log(`xLock ${y}`),I.storeErr();const j=I.getOFileForS3File(M);return j.lockType=y,0},xRead:function(M,y,I,j){const H=p(M);H.storeErr();const re=H.getOFileForS3File(M);H.log(`xRead ${re.path} ${I} @ ${j}`);try{const ce=re.sah.read(g.heap8u().subarray(y,y+I),{at:b+Number(j)});return ce<I?(g.heap8u().fill(0,y+ce,y+I),o.SQLITE_IOERR_SHORT_READ):0}catch(ce){return H.storeErr(ce,o.SQLITE_IOERR)}},xSectorSize:function(M){return P},xSync:function(M,y){const I=p(M);I.log(`xSync ${y}`),I.storeErr();const j=I.getOFileForS3File(M);try{return j.sah.flush(),0}catch(H){return I.storeErr(H,o.SQLITE_IOERR)}},xTruncate:function(M,y){const I=p(M);I.log(`xTruncate ${y}`),I.storeErr();const j=I.getOFileForS3File(M);try{return j.sah.truncate(b+Number(y)),0}catch(H){return I.storeErr(H,o.SQLITE_IOERR)}},xUnlock:function(M,y){const I=p(M);I.log("xUnlock");const j=I.getOFileForS3File(M);return j.lockType=y,0},xWrite:function(M,y,I,j){const H=p(M);H.storeErr();const re=H.getOFileForS3File(M);H.log(`xWrite ${re.path} ${I} ${j}`);try{const ce=re.sah.write(g.heap8u().subarray(y,y+I),{at:b+Number(j)});return I===ce?0:n("Unknown write() failure.")}catch(ce){return H.storeErr(ce,o.SQLITE_IOERR)}}},u=new o.sqlite3_io_methods;u.$iVersion=1,t.vfs.installVfs({io:{struct:u,methods:_}});const k={xAccess:function(M,y,I,j){const H=q(M);H.storeErr();try{const re=H.getPath(y);g.poke32(j,H.hasFilename(re)?1:0)}catch{g.poke32(j,0)}return 0},xCurrentTime:function(M,y){return g.poke(y,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(M,y){return g.poke(y,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(M,y,I){const j=q(M);j.log(`xDelete ${g.cstrToJs(y)}`),j.storeErr();try{return j.deletePath(j.getPath(y)),0}catch(H){return j.storeErr(H),o.SQLITE_IOERR_DELETE}},xFullPathname:function(M,y,I,j){return g.cstrncpy(j,y,I)<I?0:o.SQLITE_CANTOPEN},xGetLastError:function(M,y,I){const j=q(M),H=j.popErr();if(j.log(`xGetLastError ${y} e =`,H),H){const re=g.scopedAllocPush();try{const[ce,A]=g.scopedAllocCString(H.message,!0);g.cstrncpy(I,ce,y),A>y&&g.poke8(I+y-1,0)}catch{return o.SQLITE_NOMEM}finally{g.scopedAllocPop(re)}}return H?H.sqlite3Rc||o.SQLITE_IOERR:0},xOpen:function(y,I,j,H,re){const ce=q(y);try{ce.log(`xOpen ${g.cstrToJs(I)} ${H}`);const A=I&&g.peek8(I)?ce.getPath(I):R();let N=ce.getSAHForPath(A);!N&&H&o.SQLITE_OPEN_CREATE&&(ce.getFileCount()<ce.getCapacity()?(N=ce.nextAvailableSAH(),ce.setAssociatedPath(N,A,H)):n("SAH pool is full. Cannot create file",A)),N||n("file not found:",A);const W={path:A,flags:H,sah:N};ce.mapS3FileToOFile(j,W),W.lockType=o.SQLITE_LOCK_NONE;const X=new o.sqlite3_file(j);return X.$pMethods=u.pointer,X.dispose(),g.poke32(re,H),0}catch(A){return ce.storeErr(A),o.SQLITE_CANTOPEN}}},z=function(M){t.capi.sqlite3_vfs_find(M)&&r("VFS name is already registered:",M);const y=new o.sqlite3_vfs,I=o.sqlite3_vfs_find(null),j=I?new o.sqlite3_vfs(I):null;return y.$iVersion=2,y.$szOsFile=o.sqlite3_file.structInfo.sizeof,y.$mxPathname=D,y.addOnDispose(y.$zName=g.allocCString(M),()=>B(y.pointer,0)),j&&(y.$xRandomness=j.$xRandomness,y.$xSleep=j.$xSleep,j.dispose()),!y.$xRandomness&&!k.xRandomness&&(k.xRandomness=function(H,re,ce){const A=g.heap8u();let N=0;for(;N<re;++N)A[ce+N]=Math.random()*255e3&255;return N}),!y.$xSleep&&!k.xSleep&&(k.xSleep=(H,re)=>0),t.vfs.installVfs({vfs:{struct:y,methods:k}}),y};class ne{vfsDir;#e;#i;#a;#r=new Map;#t=new Map;#s=new Set;#l=new Map;#n=new Uint8Array(T);#c;#o;#u;constructor(y=Object.create(null)){this.#u=y.verbosity??O.verbosity,this.vfsName=y.name||O.name,this.#o=z(this.vfsName),B(this.#o.pointer,this),this.vfsDir=y.directory||"."+this.vfsName,this.#c=new DataView(this.#n.buffer,this.#n.byteOffset),this.isReady=this.reset(!!(y.clearOnInit??O.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(y.initialCapacity||O.initialCapacity)})}#_(y,...I){this.#u>y&&J[y](this.vfsName+":",...I)}log(...y){this.#_(2,...y)}warn(...y){this.#_(1,...y)}error(...y){this.#_(0,...y)}getVfs(){return this.#o}getCapacity(){return this.#r.size}getFileCount(){return this.#t.size}getFileNames(){const y=[],I=this.#t.keys();for(const j of I)y.push(j);return y}async addCapacity(y){for(let I=0;I<y;++I){const j=R(),re=await(await this.#i.getFileHandle(j,{create:!0})).createSyncAccessHandle();this.#r.set(re,j),this.setAssociatedPath(re,"",0)}return this.getCapacity()}async reduceCapacity(y){let I=0;for(const j of Array.from(this.#s)){if(I===y||this.getFileCount()===this.getCapacity())break;const H=this.#r.get(j);j.close(),await this.#i.removeEntry(H),this.#r.delete(j),this.#s.delete(j),++I}return I}releaseAccessHandles(){for(const y of this.#r.keys())y.close();this.#r.clear(),this.#t.clear(),this.#s.clear()}async acquireAccessHandles(y){const I=[];for await(const[j,H]of this.#i)H.kind==="file"&&I.push([j,H]);return Promise.all(I.map(async([j,H])=>{try{const re=await H.createSyncAccessHandle();if(this.#r.set(re,j),y)re.truncate(b),this.setAssociatedPath(re,"",0);else{const ce=this.getAssociatedPath(re);ce?this.#t.set(ce,re):this.#s.add(re)}}catch(re){throw this.storeErr(re),this.releaseAccessHandles(),re}}))}getAssociatedPath(y){y.read(this.#n,{at:0});const I=this.#c.getUint32(S);if(this.#n[0]&&(I&o.SQLITE_OPEN_DELETEONCLOSE||!(I&w)))return c(`Removing file with unexpected flags ${I.toString(16)}`,this.#n),this.setAssociatedPath(y,"",0),"";const j=new Uint32Array(Q/4);y.read(j,{at:C});const H=this.computeDigest(this.#n);if(j.every((re,ce)=>re===H[ce])){const re=this.#n.findIndex(ce=>ce===0);return re===0&&y.truncate(b),re?L.decode(this.#n.subarray(0,re)):""}else return c("Disassociating file with bad digest."),this.setAssociatedPath(y,"",0),""}setAssociatedPath(y,I,j){const H=x.encodeInto(I,this.#n);D<=H.written+1&&n("Path too long:",I),this.#n.fill(0,H.written,D),this.#c.setUint32(S,j);const re=this.computeDigest(this.#n);y.write(this.#n,{at:0}),y.write(re,{at:C}),y.flush(),I?(this.#t.set(I,y),this.#s.delete(y)):(y.truncate(b),this.#s.add(y))}computeDigest(y){let I=3735928559,j=1103547991;for(const H of y)I=31*I+H*307,j=31*j+H*307;return new Uint32Array([I>>>0,j>>>0])}async reset(y){await this.isReady;let I=await navigator.storage.getDirectory(),j;for(const H of this.vfsDir.split("/"))H&&(j=I,I=await I.getDirectoryHandle(H,{create:!0}));return this.#e=I,this.#a=j,this.#i=await this.#e.getDirectoryHandle(E,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(y)}getPath(y){return g.isPtr(y)&&(y=g.cstrToJs(y)),(y instanceof URL?y:new URL(y,"file://localhost/")).pathname}deletePath(y){const I=this.#t.get(y);return I&&(this.#t.delete(y),this.setAssociatedPath(I,"",0)),!!I}storeErr(y,I){return y&&(y.sqlite3Rc=I||o.SQLITE_IOERR,this.error(y)),this.$error=y,I}popErr(){const y=this.$error;return this.$error=void 0,y}nextAvailableSAH(){const[y]=this.#s.keys();return y}getOFileForS3File(y){return this.#l.get(y)}mapS3FileToOFile(y,I){I?(this.#l.set(y,I),a(y,this)):(this.#l.delete(y),a(y,!1))}hasFilename(y){return this.#t.has(y)}getSAHForPath(y){return this.#t.get(y)}async removeVfs(){if(!this.#o.pointer||!this.#i)return!1;o.sqlite3_vfs_unregister(this.#o.pointer),this.#o.dispose(),delete s[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(E,{recursive:!0}),this.#i=void 0,await this.#a.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#a=void 0}catch(y){t.config.error(this.vfsName,"removeVfs() failed:",y)}return!0}exportFile(y){const I=this.#t.get(y)||n("File not found:",y),j=I.getSize()-b,H=new Uint8Array(j>0?j:0);if(j>0){const re=I.read(H,{at:b});re!=j&&n("Expected to read "+j+" bytes but read "+re+".")}return H}async importDbChunked(y,I){const j=this.#t.get(y)||this.nextAvailableSAH()||n("No available handles to import to.");j.truncate(0);let H=0,re,ce=!1;try{for(;(re=await I())!==void 0;)re instanceof ArrayBuffer&&(re=new Uint8Array(re)),H===0&&re.byteLength>=15&&(h.affirmDbHeader(re),ce=!0),j.write(re,{at:b+H}),H+=re.byteLength;if((H<512||H%512!==0)&&n("Input size",H,"is not correct for an SQLite database."),!ce){const A=new Uint8Array(20);j.read(A,{at:0}),h.affirmDbHeader(A)}j.write(new Uint8Array([1,1]),{at:b+18})}catch(A){throw this.setAssociatedPath(j,"",0),A}return this.setAssociatedPath(j,y,o.SQLITE_OPEN_MAIN_DB),H}importDb(y,I){if(I instanceof ArrayBuffer)I=new Uint8Array(I);else if(I instanceof Function)return this.importDbChunked(y,I);const j=this.#t.get(y)||this.nextAvailableSAH()||n("No available handles to import to."),H=I.byteLength;(H<512||H%512!=0)&&n("Byte array size is invalid for an SQLite db.");const re="SQLite format 3";for(let A=0;A<re.length;++A)re.charCodeAt(A)!==I[A]&&n("Input does not contain an SQLite database header.");const ce=j.write(I,{at:b});return ce!=H?(this.setAssociatedPath(j,"",0),n("Expected to write "+H+" bytes but wrote "+ce+".")):(j.write(new Uint8Array([1,1]),{at:b+18}),this.setAssociatedPath(j,y,o.SQLITE_OPEN_MAIN_DB)),ce}}class ae{#e;constructor(y){this.#e=y,this.vfsName=y.vfsName}async addCapacity(y){return this.#e.addCapacity(y)}async reduceCapacity(y){return this.#e.reduceCapacity(y)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(y){const I=this.#e.getCapacity();return I<y?this.#e.addCapacity(y-I):I}exportFile(y){return this.#e.exportFile(y)}importDb(y,I){return this.#e.importDb(y,I)}async wipeFiles(){return this.#e.reset(!0)}unlink(y){return this.#e.deletePath(y)}async removeVfs(){return this.#e.removeVfs()}}const _e=async()=>{const M=await navigator.storage.getDirectory(),y=".opfs-sahpool-sync-check-"+R(),H=(await(await M.getFileHandle(y,{create:!0})).createSyncAccessHandle()).close();return await H,await M.removeEntry(y),H?.then&&n("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(M=Object.create(null)){M=Object.assign(Object.create(null),O,M||{});const y=M.name;if(M.$testThrowPhase1)throw M.$testThrowPhase1;if(s[y])try{return await s[y]}catch(I){if(M.forceReinitIfPreviouslyFailed)delete s[y];else throw I}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?s[y]=Promise.reject(new Error("Missing required OPFS APIs.")):s[y]=_e().then(async function(){if(M.$testThrowPhase2)throw M.$testThrowPhase2;const I=new ne(M);return I.isReady.then(async()=>{const j=new ae(I);if(t.oo1){const H=t.oo1,re=I.getVfs(),ce=function(...A){const N=H.DB.dbCtorHelper.normalizeArgs(...A);N.vfs=re.$zName,H.DB.dbCtorHelper.call(this,N)};ce.prototype=Object.create(H.DB.prototype),j.OpfsSAHPoolDb=ce}return I.log("VFS initialized."),j}).catch(async j=>{throw await I.removeVfs().catch(()=>{}),j})}).catch(I=>s[y]=Promise.reject(I))}}),typeof e<"u"){const t=Object.assign(Object.create(null),{exports:typeof m>"u"?e.asm:m,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let n;try{n=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}e.sqlite3=n}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),le=ue,le}})();lt=function(){const oe=lt;if(!oe)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const ee=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(ee.debugModule=ee.urlParams.has("sqlite3.debugModule")?(...le)=>console.warn("sqlite3.debugModule:",...le):()=>{},ee.urlParams.has("sqlite3.dir"))ee.sqlite3Dir=ee.urlParams.get("sqlite3.dir")+"/";else if(ee.moduleScript){const le=ee.moduleScript.src.split("/");le.pop(),ee.sqlite3Dir=le.join("/")+"/"}if(globalThis.sqlite3InitModule=function le(...i){return oe(...i).then(Z=>{const K=Z.sqlite3;K.scriptInfo=ee,le.__isUnderTest&&(K.__isUnderTest=!0);const ue=K.asyncPostInit;return delete K.asyncPostInit,ue()}).catch(Z=>{throw console.error("Exception loading sqlite3 module:",Z),Z})},globalThis.sqlite3InitModule.ready=oe.ready,globalThis.sqlite3InitModuleState.moduleScript){const le=globalThis.sqlite3InitModuleState;let i=le.moduleScript.src.split("/");i.pop(),le.scriptDir=i.join("/")+"/"}return ee.debugModule("sqlite3InitModuleState =",ee),globalThis.sqlite3InitModule}(),globalThis.sqlite3Worker1Promiser=function oe(ee=oe.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const ie=ee;ee=Object.assign(Object.create(null),oe.defaultConfig),ee.onready=ie}else ee=Object.assign(Object.create(null),oe.defaultConfig,ee);const le=Object.create(null),i=function(){},Z=ee.onerror||i,K=ee.debug||i,ue=ee.generateMessageId?void 0:Object.create(null),me=ee.generateMessageId||function(ie){return ie.type+"#"+(ue[ie.type]=(ue[ie.type]||0)+1)},ye=(...ie)=>{throw new Error(ie.join(" "))};ee.worker||(ee.worker=oe.defaultConfig.worker),typeof ee.worker=="function"&&(ee.worker=ee.worker());let Ae,Ie;return ee.worker.onmessage=function(ie){ie=ie.data,K("worker1.onmessage",ie);let fe=le[ie.messageId];if(!fe){if(ie&&ie.type==="sqlite3-api"&&ie.result==="worker1-ready"){ee.onready&&ee.onready(Ie);return}if(fe=le[ie.type],fe&&fe.onrow){fe.onrow(ie);return}ee.onunhandled?ee.onunhandled(arguments[0]):Z("sqlite3Worker1Promiser() unhandled worker message:",ie);return}switch(delete le[ie.messageId],ie.type){case"error":fe.reject(ie);return;case"open":Ae||(Ae=ie.dbId);break;case"close":ie.dbId===Ae&&(Ae=void 0);break}try{fe.resolve(ie)}catch(Se){fe.reject(Se)}},Ie=function(){let ie;arguments.length===1?ie=arguments[0]:arguments.length===2?(ie=Object.create(null),ie.type=arguments[0],ie.args=arguments[1],ie.dbId=ie.args.dbId):ye("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!ie.dbId&&ie.type!=="open"&&(ie.dbId=Ae),ie.messageId=me(ie),ie.departureTime=performance.now();const fe=Object.create(null);fe.message=ie;let Se;ie.type==="exec"&&ie.args&&(typeof ie.args.callback=="function"?(Se=ie.messageId+":row",fe.onrow=ie.args.callback,ie.args.callback=Se,le[Se]=fe):typeof ie.args.callback=="string"&&ye("exec callback may not be a string when using the Promise interface."));let Pe=new Promise(function(De,Fe){fe.resolve=De,fe.reject=Fe,le[ie.messageId]=fe,K("Posting",ie.type,"message to Worker dbId="+(Ae||"default")+":",ie),ee.worker.postMessage(ie)});return Se&&(Pe=Pe.finally(()=>delete le[Se])),Pe}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",self.location.href),{type:"module"})},onerror:(...oe)=>console.error("worker1 promiser error",...oe)},sqlite3Worker1Promiser.v2=function(oe){let ee;typeof oe=="function"?(ee=oe,oe={}):typeof oe?.onready=="function"&&(ee=oe.onready,delete oe.onready);const le=Object.create(null);oe=Object.assign(oe||Object.create(null),{onready:async function(Z){try{ee&&await ee(Z),le.resolve(Z)}catch(K){le.reject(K)}}});const i=new Promise(function(Z,K){le.resolve=Z,le.reject=K});try{this.original(oe)}catch(Z){le.reject(Z)}return i}.bind({original:sqlite3Worker1Promiser}),sqlite3Worker1Promiser.v2;const vt="function",Ve="64e10b34-2bf7-4616-9668-f99de5aa046e",Jt="get",Xt="has",Yt="set",{isArray:et}=Array;let{SharedArrayBuffer:tt,window:Zt}=globalThis,{notify:Et,wait:xt,waitAsync:nt}=Atomics,St=null;nt||(nt=oe=>({value:new Promise(ee=>{let le=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");le.onmessage=ee,le.postMessage(oe)})}));try{new tt(4)}catch{tt=ArrayBuffer;const ee=new WeakMap;if(Zt){const le=new Map,{prototype:{postMessage:i}}=Worker,Z=K=>{const ue=K.data?.[Ve];if(!et(ue)){K.stopImmediatePropagation();const{id:me,sb:ye}=ue;le.get(me)(ye)}};St=function(K,...ue){const me=K?.[Ve];if(et(me)){const[ye,Ae]=me;ee.set(Ae,ye),this.addEventListener("message",Z)}return i.call(this,K,...ue)},nt=K=>({value:new Promise(ue=>{le.set(ee.get(K),ue)}).then(ue=>{le.delete(ee.get(K)),ee.delete(K);for(let me=0;me<ue.length;me++)K[me]=ue[me];return"ok"})})}else{const le=(i,Z)=>({[Ve]:{id:i,sb:Z}});Et=i=>{postMessage(le(ee.get(i),i))},addEventListener("message",i=>{const Z=i.data?.[Ve];if(et(Z)){const[K,ue]=Z;ee.set(ue,K)}})}}/*! (c) Andrea Giammarchi - ISC */const{Int32Array:ct,Map:At,Uint16Array:_t}=globalThis,{BYTES_PER_ELEMENT:It}=ct,{BYTES_PER_ELEMENT:en}=_t,tn=(oe,ee,le)=>{for(;xt(oe,0,0,ee)==="timed-out";)le()},ut=new WeakSet,ft=new WeakMap,nn={value:{then:oe=>oe()}};let rn=0;const kt=(oe,{parse:ee=JSON.parse,stringify:le=JSON.stringify,transform:i,interrupt:Z}=JSON)=>{if(!ft.has(oe)){const K=St||oe.postMessage,ue=(fe,...Se)=>K.call(oe,{[Ve]:Se},{transfer:fe}),me=typeof Z===vt?Z:Z?.handler,ye=Z?.delay||42,Ae=new TextDecoder("utf-16"),Ie=(fe,Se)=>fe?nt(Se,0):(me?tn(Se,ye,me):xt(Se,0),nn);let ie=!1;ft.set(oe,new Proxy(new At,{[Xt]:(fe,Se)=>typeof Se=="string"&&!Se.startsWith("_"),[Jt]:(fe,Se)=>Se==="then"?null:(...Pe)=>{const De=rn++;let Fe=new ct(new tt(It*2)),Oe=[];ut.has(Pe.at(-1)||Oe)&&ut.delete(Oe=Pe.pop()),ue(Oe,De,Fe,Se,i?Pe.map(i):Pe);const Me=oe!==globalThis;let Ce=0;return ie&&Me&&(Ce=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${Se}(...args) is awaited`)),Ie(Me,Fe).value.then(()=>{clearTimeout(Ce);const je=Fe[1];if(!je)return;const ke=en*je;return Fe=new ct(new tt(ke+ke%It)),ue([],De,Fe),Ie(Me,Fe).value.then(()=>ee(Ae.decode(new _t(Fe.buffer).slice(0,je))))})},[Yt](fe,Se,Pe){const De=typeof Pe;if(De!==vt)throw new Error(`Unable to assign ${Se} as ${De}`);if(!fe.size){const Fe=new At;oe.addEventListener("message",async Oe=>{const Me=Oe.data?.[Ve];if(et(Me)){Oe.stopImmediatePropagation();const[Ce,je,...ke]=Me;let Be;if(ke.length){const[Re,be]=ke;if(fe.has(Re)){ie=!0;try{const qe=await fe.get(Re)(...be);if(qe!==void 0){const Ne=le(i?i(qe):qe);Fe.set(Ce,Ne),je[1]=Ne.length}}catch(qe){Be=qe}finally{ie=!1}}else Be=new Error(`Unsupported action: ${Re}`);je[0]=1}else{const Re=Fe.get(Ce);Fe.delete(Ce);for(let be=new _t(je.buffer),qe=0;qe<Re.length;qe++)be[qe]=Re.charCodeAt(qe)}if(Et(je,0),Be)throw Be}})}return!!fe.set(Se,Pe)}}))}return ft.get(oe)};kt.transfer=(...oe)=>(ut.add(oe),oe);function Tt(){let oe,ee;return{lock:async()=>{for(;oe;)await oe;oe=new Promise(Z=>{ee=Z})},unlock:async()=>{const Z=ee;oe=void 0,ee=void 0,Z?.()}}}function dt(oe,ee){const le={rows:[],columns:[]},i=oe.exec({sql:ee.sql,bind:ee.params,returnValue:"resultRows",rowMode:"array",columnNames:le.columns});switch(ee.method){case"run":break;case"get":le.rows=i[0]??[];break;case"all":default:le.rows=i;break}return le}function sn(oe){const ee=oe.split(/[\\/]/).filter(K=>K!==""),le=ee.pop();if(!le)throw new Error("Database path is invalid.");const i=["journal","wal","shm"].map(K=>`${le}-${K}`);return{directories:ee,fileName:le,tempFileNames:i,getDirectoryHandle:async()=>{let K=await navigator.storage.getDirectory();for(let ue of ee)K=await K.getDirectoryHandle(ue);return K}}}async function Ft(oe,ee){let le;if(oe instanceof Blob?le=oe.stream():le=oe,le instanceof ReadableStream&&ee){const Z=le.getReader();switch(ee){case"callback":return async()=>(await Z.read()).value;case"buffer":const K=[];let ue=!1;for(;!ue;){const Ie=await Z.read();Ie.value&&K.push(Ie.value),ue=Ie.done}const me=K.reduce((Ie,ie)=>Ie+ie.length,0),ye=new Uint8Array(me);let Ae=0;return K.forEach(Ie=>{ye.set(Ie,Ae),Ae+=Ie.length}),ye}}else return le}class on{constructor(ee){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:Tt()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:Tt()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:Z,readOnly:K,verbose:ue}=this.config,me=[K===!0?"r":"cw",ue===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await lt()),this.db&&this.destroy(),"opfs"in this.sqlite3&&Z!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(Z,me),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(Z,me),this.dbStorageType="memory",Z!==":memory:"&&console.warn(`The origin private file system is not available, so ${Z} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${Z})`),this.reinitChannel.onmessage=ye=>{this.config.clientKey!==ye.data.clientKey&&this.init(ye.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:i})}catch(ye){this.emitMessage({type:"error",error:ye,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(i,Z)=>{const K=i instanceof MessageEvent?i.data:i;switch(await this.initMutex.lock(),K.type){case"config":this.editConfig(K);break;case"query":case"batch":case"transaction":this.exec(K);break;case"function":this.createUserFunction(K);break;case"getinfo":this.getDatabaseInfo(K);break;case"import":this.importDb(K);break;case"export":this.exportDb(K);break;case"delete":this.deleteDb(K);break;case"destroy":this.destroy(K);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(i,Z=[])=>{this.onmessage&&this.onmessage(i,Z)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:i=>{this.config=i.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{if(this.db)try{const Z={type:"data",queryKey:i.queryKey,data:[]};switch(i.type){case"query":const K=this.transactionKey!==null&&this.transactionKey===i.transactionKey;try{K||await this.transactionMutex.lock();const ue=dt(this.db,i);Z.data.push(ue)}finally{K||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(ue=>{for(let me of i.statements){const ye=dt(ue,me);Z.data.push(ye)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(i.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=i.transactionKey,this.db.exec({sql:"BEGIN"})),(i.action==="commit"||i.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===i.transactionKey){const ue=i.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:ue}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(Z)}catch(Z){this.emitMessage({type:"error",error:Z,queryKey:i.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let i of this.config.onInitStatements)dt(this.db,i)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{try{const Z=this.config.databasePath,K=this.dbStorageType,ue=K!==void 0?K!=="memory"?await navigator.storage?.persisted():!1:void 0,ye=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],Ae=typeof ye=="number"?ye:void 0;this.emitMessage({type:"info",queryKey:i.queryKey,info:{databasePath:Z,databaseSizeBytes:Ae,storageType:K,persisted:ue}})}catch(Z){this.emitMessage({type:"error",queryKey:i.queryKey,error:Z})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:i=>{const{functionName:Z,functionType:K,queryKey:ue}=i;let me;if(this.userFunctions.has(Z)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${Z}" has already been created for this SQLocal instance.`),queryKey:ue});return}K==="callback"?me=(...ye)=>{this.emitMessage({type:"callback",name:Z,args:ye})}:me=this.proxy[`_sqlocal_func_${Z}`];try{this.initUserFunction({type:K,name:Z,func:me}),this.emitMessage({type:"success",queryKey:ue})}catch(ye){this.emitMessage({type:"error",error:ye,queryKey:ue})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:i=>{this.db&&(this.db.createFunction({name:i.name,xFunc:(Z,...K)=>i.func(...K),arity:-1}),this.userFunctions.set(i.name,i))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:Z,database:K}=i;let ue=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const me=await Ft(K,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,me)}else{const me=await Ft(K,"buffer"),ye=this.sqlite3.wasm.allocFromTypedArray(me);this.pointers.push(ye);const Ae=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",ye,me.byteLength,me.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(Ae),this.execInitStatements()}}catch(me){this.emitMessage({type:"error",error:me,queryKey:Z}),ue=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}ue||this.emitMessage({type:"success",queryKey:Z})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:i=>{if(!this.sqlite3||!this.db)return;const{queryKey:Z}=i;try{const K=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:Z,buffer:K},[K])}catch(K){this.emitMessage({type:"error",error:K,queryKey:Z})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async i=>{if(!this.config.databasePath)return;const{queryKey:Z}=i;let K=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:ue,fileName:me,tempFileNames:ye}=sn(this.config.databasePath),Ae=await ue(),Ie=[me,...ye];this.destroy(),await Promise.all(Ie.map(async ie=>Ae.removeEntry(ie).catch(fe=>{if(!(fe instanceof DOMException&&fe.name==="NotFoundError"))throw fe})))}else this.destroy()}catch(ue){this.emitMessage({type:"error",error:ue,queryKey:Z}),K=!0}finally{await this.init("delete")}K||this.emitMessage({type:"success",queryKey:Z})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:i=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(Z=>this.sqlite3?.wasm.dealloc(Z)),this.pointers=[],i&&this.emitMessage({type:"success",queryKey:i.queryKey})}});const le=ee?globalThis:kt(globalThis);this.proxy=le,this.init("initial")}}const Pt=new on(!1);self.onmessage=oe=>{Pt.postMessage(oe)},Pt.onmessage=(oe,ee)=>{self.postMessage(oe,ee)}})();
