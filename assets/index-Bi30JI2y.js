(async()=>{function D$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function L$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Aw={exports:{}},cp={},Pw={exports:{}},kn={};var JI;function M$(){if(JI)return kn;JI=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=h&&X[h]||X["@@iterator"],typeof X=="function"?X:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,N={};function I(X,ue,de){this.props=X,this.context=ue,this.refs=N,this.updater=de||x}I.prototype.isReactComponent={},I.prototype.setState=function(X,ue){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ue,"setState")},I.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function R(){}R.prototype=I.prototype;function T(X,ue,de){this.props=X,this.context=ue,this.refs=N,this.updater=de||x}var O=T.prototype=new R;O.constructor=T,_(O,I.prototype),O.isPureReactComponent=!0;var A=Array.isArray,D=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function P(X,ue,de){var ye,we={},Ne=null,ze=null;if(ue!=null)for(ye in ue.ref!==void 0&&(ze=ue.ref),ue.key!==void 0&&(Ne=""+ue.key),ue)D.call(ue,ye)&&!W.hasOwnProperty(ye)&&(we[ye]=ue[ye]);var Oe=arguments.length-2;if(Oe===1)we.children=de;else if(1<Oe){for(var De=Array(Oe),Je=0;Je<Oe;Je++)De[Je]=arguments[Je+2];we.children=De}if(X&&X.defaultProps)for(ye in Oe=X.defaultProps,Oe)we[ye]===void 0&&(we[ye]=Oe[ye]);return{$$typeof:t,type:X,key:Ne,ref:ze,props:we,_owner:M.current}}function j(X,ue){return{$$typeof:t,type:X.type,key:ue,ref:X.ref,props:X.props,_owner:X._owner}}function L(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function F(X){var ue={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(de){return ue[de]})}var V=/\/+/g;function U(X,ue){return typeof X=="object"&&X!==null&&X.key!=null?F(""+X.key):ue.toString(36)}function z(X,ue,de,ye,we){var Ne=typeof X;(Ne==="undefined"||Ne==="boolean")&&(X=null);var ze=!1;if(X===null)ze=!0;else switch(Ne){case"string":case"number":ze=!0;break;case"object":switch(X.$$typeof){case t:case e:ze=!0}}if(ze)return ze=X,we=we(ze),X=ye===""?"."+U(ze,0):ye,A(we)?(de="",X!=null&&(de=X.replace(V,"$&/")+"/"),z(we,ue,de,"",function(Je){return Je})):we!=null&&(L(we)&&(we=j(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(V,"$&/")+"/")+X)),ue.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",A(X))for(var Oe=0;Oe<X.length;Oe++){Ne=X[Oe];var De=ye+U(Ne,Oe);ze+=z(Ne,ue,de,De,we)}else if(De=b(X),typeof De=="function")for(X=De.call(X),Oe=0;!(Ne=X.next()).done;)Ne=Ne.value,De=ye+U(Ne,Oe++),ze+=z(Ne,ue,de,De,we);else if(Ne==="object")throw ue=String(X),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return ze}function ee(X,ue,de){if(X==null)return X;var ye=[],we=0;return z(X,ye,"","",function(Ne){return ue.call(de,Ne,we++)}),ye}function Z(X){if(X._status===-1){var ue=X._result;ue=ue(),ue.then(function(de){(X._status===0||X._status===-1)&&(X._status=1,X._result=de)},function(de){(X._status===0||X._status===-1)&&(X._status=2,X._result=de)}),X._status===-1&&(X._status=0,X._result=ue)}if(X._status===1)return X._result.default;throw X._result}var le={current:null},se={transition:null},te={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:se,ReactCurrentOwner:M};function oe(){throw Error("act(...) is not supported in production builds of React.")}return kn.Children={map:ee,forEach:function(X,ue,de){ee(X,function(){ue.apply(this,arguments)},de)},count:function(X){var ue=0;return ee(X,function(){ue++}),ue},toArray:function(X){return ee(X,function(ue){return ue})||[]},only:function(X){if(!L(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},kn.Component=I,kn.Fragment=n,kn.Profiler=i,kn.PureComponent=T,kn.StrictMode=r,kn.Suspense=u,kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,kn.act=oe,kn.cloneElement=function(X,ue,de){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ye=_({},X.props),we=X.key,Ne=X.ref,ze=X._owner;if(ue!=null){if(ue.ref!==void 0&&(Ne=ue.ref,ze=M.current),ue.key!==void 0&&(we=""+ue.key),X.type&&X.type.defaultProps)var Oe=X.type.defaultProps;for(De in ue)D.call(ue,De)&&!W.hasOwnProperty(De)&&(ye[De]=ue[De]===void 0&&Oe!==void 0?Oe[De]:ue[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){Oe=Array(De);for(var Je=0;Je<De;Je++)Oe[Je]=arguments[Je+2];ye.children=Oe}return{$$typeof:t,type:X.type,key:we,ref:Ne,props:ye,_owner:ze}},kn.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:s,_context:X},X.Consumer=X},kn.createElement=P,kn.createFactory=function(X){var ue=P.bind(null,X);return ue.type=X,ue},kn.createRef=function(){return{current:null}},kn.forwardRef=function(X){return{$$typeof:l,render:X}},kn.isValidElement=L,kn.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:Z}},kn.memo=function(X,ue){return{$$typeof:d,type:X,compare:ue===void 0?null:ue}},kn.startTransition=function(X){var ue=se.transition;se.transition={};try{X()}finally{se.transition=ue}},kn.unstable_act=oe,kn.useCallback=function(X,ue){return le.current.useCallback(X,ue)},kn.useContext=function(X){return le.current.useContext(X)},kn.useDebugValue=function(){},kn.useDeferredValue=function(X){return le.current.useDeferredValue(X)},kn.useEffect=function(X,ue){return le.current.useEffect(X,ue)},kn.useId=function(){return le.current.useId()},kn.useImperativeHandle=function(X,ue,de){return le.current.useImperativeHandle(X,ue,de)},kn.useInsertionEffect=function(X,ue){return le.current.useInsertionEffect(X,ue)},kn.useLayoutEffect=function(X,ue){return le.current.useLayoutEffect(X,ue)},kn.useMemo=function(X,ue){return le.current.useMemo(X,ue)},kn.useReducer=function(X,ue,de){return le.current.useReducer(X,ue,de)},kn.useRef=function(X){return le.current.useRef(X)},kn.useState=function(X){return le.current.useState(X)},kn.useSyncExternalStore=function(X,ue,de){return le.current.useSyncExternalStore(X,ue,de)},kn.useTransition=function(){return le.current.useTransition()},kn.version="18.3.1",kn}var ZI;function Jh(){return ZI||(ZI=1,Pw.exports=M$()),Pw.exports}var YI;function $$(){if(YI)return cp;YI=1;var t=Jh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var p,h={},b=null,x=null;d!==void 0&&(b=""+d),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:l,key:b,ref:x,props:h,_owner:i.current}}return cp.Fragment=n,cp.jsx=o,cp.jsxs=o,cp}var XI;function B$(){return XI||(XI=1,Aw.exports=$$()),Aw.exports}var f=B$(),Xd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jc=typeof window>"u"||"Deno"in globalThis;function eo(){}function z$(t,e){return typeof t=="function"?t(e):t}function qS(t){return typeof t=="number"&&t>=0&&t!==1/0}function y3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function md(t,e){return typeof t=="function"?t(e):t}function Eo(t,e){return typeof t=="function"?t(e):t}function eC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==n1(o,e.options))return!1}else if(!lh(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function tC(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Zc(e.options.mutationKey)!==Zc(s))return!1}else if(!lh(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function n1(t,e){return(e?.queryKeyHashFn||Zc)(t)}function Zc(t){return JSON.stringify(t,(e,n)=>AS(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function lh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!lh(t[n],e[n])):!1}function r1(t,e){if(t===e)return t;const n=nC(t)&&nC(e);if(n||AS(t)&&AS(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let u=0;for(let d=0;d<o;d++){const p=n?d:s[d];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(l[p]=void 0,u++):(l[p]=r1(t[p],e[p]),l[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function Yy(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function nC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function AS(t){if(!rC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!rC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function rC(t){return Object.prototype.toString.call(t)==="[object Object]"}function W$(t){return new Promise(e=>{setTimeout(e,t)})}function PS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?r1(t,e):e}function V$(t){return t}function U$(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function H$(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var i1=Symbol();function b3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===i1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Q$=class extends Xd{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Jc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},s1=new Q$,K$=class extends Xd{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Jc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Xy=new K$;function FS(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function G$(t){return Math.min(1e3*2**t,3e4)}function v3(t){return(t??"online")==="online"?Xy.isOnline():!0}var x3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Fw(t){return t instanceof x3}function w3(t){let e=!1,n=0,r=!1,i;const s=FS(),o=N=>{r||(b(new x3(N)),t.abort?.())},l=()=>{e=!0},u=()=>{e=!1},d=()=>s1.isFocused()&&(t.networkMode==="always"||Xy.isOnline())&&t.canRun(),p=()=>v3(t.networkMode)&&t.canRun(),h=N=>{r||(r=!0,t.onSuccess?.(N),i?.(),s.resolve(N))},b=N=>{r||(r=!0,t.onError?.(N),i?.(),s.reject(N))},x=()=>new Promise(N=>{i=I=>{(r||d())&&N(I)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let N;const I=n===0?t.initialPromise:void 0;try{N=I??t.fn()}catch(R){N=Promise.reject(R)}Promise.resolve(N).then(h).catch(R=>{if(r)return;const T=t.retry??(Jc?0:3),O=t.retryDelay??G$,A=typeof O=="function"?O(n,R):O,D=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,R);if(e||!D){b(R);return}n++,t.onFail?.(n,R),W$(A).then(()=>d()?void 0:x()).then(()=>{e?b(R):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function J$(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Gr=J$(),_3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qS(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Jc?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Z$=class extends _3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Y$(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=PS(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(eo).catch(eo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Eo(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===i1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!y3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const l=b3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(l,u,this):l(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=l=>{Fw(l)&&l.silent||this.#o({type:"error",error:l}),Fw(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=w3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){o(u);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,u)=>{this.#o({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...S3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return Fw(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Gr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function S3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:v3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Y$(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var X$=class extends Xd{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??n1(r,e);let s=this.get(i);return s||(s=new Z$({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>eC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>eC(t,n)):e}notify(t){Gr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Gr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},eB=class extends _3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||E3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=w3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Gr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function E3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tB=class extends Xd{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new eB({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Rg(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Rg(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Rg(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Rg(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>tC(e,n))}findAll(t={}){return this.getAll().filter(e=>tC(t,e))}notify(t){Gr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Gr.batch(()=>Promise.all(t.map(e=>e.continue().catch(eo))))}};function Rg(t){return t.options.scope?.id}function iC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=b3(e.options,e.fetchOptions),x=async(_,N,I)=>{if(p)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const R={queryKey:e.queryKey,pageParam:N,direction:I?"backward":"forward",meta:e.options.meta};h(R);const T=await b(R),{maxPages:O}=e.options,A=I?H$:U$;return{pages:A(_.pages,T,O),pageParams:A(_.pageParams,N,O)}};if(i&&s.length){const _=i==="backward",N=_?nB:sC,I={pages:s,pageParams:o},R=N(r,I);l=await x(I,R,_)}else{const _=t??s.length;do{const N=u===0?o[0]??r.initialPageParam:sC(r,l);if(u>0&&N==null)break;l=await x(l,N),u++}while(u<_)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=d}}}function sC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function nB(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var rB=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new X$,this.#t=t.mutationCache||new tB,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=s1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Xy.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(md(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=z$(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Gr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Gr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Gr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(eo).catch(eo)}invalidateQueries(t,e={}){return Gr.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(eo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(eo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(md(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(eo).catch(eo)}fetchInfiniteQuery(t){return t.behavior=iC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(eo).catch(eo)}ensureInfiniteQueryData(t){return t.behavior=iC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Xy.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Zc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{lh(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(Zc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{lh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=n1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===i1&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},iB=class extends Xd{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=FS(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#c;#l;#u;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),oC(this.#t,this.options)?this.#h():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return DS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return DS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Eo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!Yy(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&aC(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||Eo(this.options.enabled,this.#t)!==Eo(n.enabled,this.#t)||md(this.options.staleTime,this.#t)!==md(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||Eo(this.options.enabled,this.#t)!==Eo(n.enabled,this.#t)||s!==this.#f)&&this.#b(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return oB(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(eo)),e}#g(){this.#x();const t=md(this.options.staleTime,this.#t);if(Jc||this.#r.isStale||!qS(t))return;const n=y3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#f=t,!(Jc||Eo(this.options.enabled,this.#t)===!1||!qS(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||s1.isFocused())&&this.#h()},this.#f))}#v(){this.#g(),this.#b(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:d}=t;let p={...d},h=!1,b;if(e._optimisticResults){const W=this.hasListeners(),P=!W&&oC(t,e),j=W&&aC(t,n,e,r);(P||j)&&(p={...p,...S3(d.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:N}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#c)b=this.#l;else try{this.#c=e.select,b=e.select(p.data),b=PS(i?.data,b,e),this.#l=b,this.#a=null}catch(W){this.#a=W}else b=p.data;if(e.placeholderData!==void 0&&b===void 0&&N==="pending"){let W;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)W=i.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#a=null}catch(P){this.#a=P}W!==void 0&&(N="success",b=PS(i?.data,W,e),h=!0)}this.#a&&(x=this.#a,b=this.#l,_=Date.now(),N="error");const I=p.fetchStatus==="fetching",R=N==="pending",T=N==="error",O=R&&I,A=b!==void 0,M={status:N,fetchStatus:p.fetchStatus,isPending:R,isSuccess:N==="success",isError:T,isInitialLoading:O,isLoading:O,data:b,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:I,isRefetching:I&&!R,isLoadingError:T&&!A,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:T&&A,isStale:o1(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const W=L=>{M.status==="error"?L.reject(M.error):M.data!==void 0&&L.resolve(M.data)},P=()=>{const L=this.#o=M.promise=FS();W(L)},j=this.#o;switch(j.status){case"pending":t.queryHash===n.queryHash&&W(j);break;case"fulfilled":(M.status==="error"||M.data!==j.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==j.reason)&&P();break}}return M}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#u=this.#t),Yy(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(u=>{const d=u;return this.#r[d]!==e[d]&&l.has(d)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){Gr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function sB(t,e){return Eo(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function oC(t,e){return sB(t,e)||t.state.data!==void 0&&DS(t,e,e.refetchOnMount)}function DS(t,e,n){if(Eo(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&o1(t,e)}return!1}function aC(t,e,n,r){return(t!==e||Eo(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&o1(t,n)}function o1(t,e){return Eo(e.enabled,t)!==!1&&t.isStaleByTime(md(e.staleTime,t))}function oB(t,e){return!Yy(t.getCurrentResult(),e)}var aB=class extends Xd{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Yy(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Zc(n.mutationKey)!==Zc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??E3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Gr.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},Q=Jh();const Bn=lo(Q),lB=D$({__proto__:null,default:Bn},[Q]);var N3=Q.createContext(void 0),iv=t=>{const e=Q.useContext(N3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},cB=({client:t,children:e})=>(Q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),f.jsx(N3.Provider,{value:t,children:e})),k3=Q.createContext(!1),uB=()=>Q.useContext(k3);k3.Provider;function dB(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var fB=Q.createContext(dB()),pB=()=>Q.useContext(fB);function I3(t,e){return typeof t=="function"?t(...e):!!t}function LS(){}var hB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},mB=t=>{Q.useEffect(()=>{t.clearReset()},[t])},gB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&I3(n,[t.error,r]),yB=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},bB=(t,e)=>t.isLoading&&t.isFetching&&!e,vB=(t,e)=>t?.suspense&&e.isPending,lC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function xB(t,e,n){const r=iv(),i=uB(),s=pB(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",yB(o),hB(o,s),mB(s);const l=!r.getQueryCache().get(o.queryHash),[u]=Q.useState(()=>new e(r,o)),d=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(Q.useSyncExternalStore(Q.useCallback(h=>{const b=p?u.subscribe(Gr.batchCalls(h)):LS;return u.updateResult(),b},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),Q.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),vB(o,d))throw lC(o,u,s);if(gB({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,d),o.experimental_prefetchInRender&&!Jc&&bB(d,i)&&(l?lC(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(LS).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?d:u.trackResult(d)}function eb(t,e){return xB(t,iB)}function cC(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function wB(t={},e){const n=iv().getMutationCache(),r=Q.useRef(t),i=Q.useRef(null);return i.current||(i.current=cC(n,t)),Q.useEffect(()=>{r.current=t}),Q.useSyncExternalStore(Q.useCallback(s=>n.subscribe(()=>{const o=r1(i.current,cC(n,r.current));i.current!==o&&(i.current=o,Gr.schedule(s))}),[n]),()=>i.current,()=>i.current)}function nn(t,e){const n=iv(),[r]=Q.useState(()=>new aB(n,t));Q.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Q.useSyncExternalStore(Q.useCallback(o=>r.subscribe(Gr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=Q.useCallback((o,l)=>{r.mutate(o,l).catch(LS)},[r]);if(i.error&&I3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const Uc="__TSR_index",uC="popstate",dC="beforeunload";function C3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:l,...u})=>{var d,p;if(l?.ignoreBlocker??!1){o();return}const b=((d=t.getBlockers)==null?void 0:d.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&b.length&&x)for(const _ of b){const N=ch(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:N,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,l,u)=>{const d=e.state[Uc];l=MS(d+1,l),s({task:()=>{t.pushState(o,l),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:l})},replace:(o,l,u)=>{const d=e.state[Uc];l=MS(d,l),s({task:()=>{t.replaceState(o,l),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:l})},go:(o,l)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Uc]!==0,createHref:o=>t.createHref(o),block:o=>{var l;if(!t.setBlockers)return()=>{};const u=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...u,o]),()=>{var d,p;const h=((d=t.getBlockers)==null?void 0:d.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(b=>b!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function MS(t,e){return e||(e={}),{...e,key:EB(),[Uc]:t}}function _B(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,l=P=>P,u=()=>ch(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let d=u(),p,h=!1,b=!1,x=!1,_=!1;const N=()=>d;let I,R;const T=()=>{I&&(W._ignoreSubscribers=!0,(I.isPush?e.history.pushState:e.history.replaceState)(I.state,"",I.href),W._ignoreSubscribers=!1,I=void 0,R=void 0,p=void 0)},O=(P,j,L)=>{const F=l(j);R||(p=d),d=ch(j,L),I={href:F,state:L,isPush:I?.isPush||P==="push"},R||(R=Promise.resolve().then(()=>T()))},A=P=>{d=u(),W.notify({type:P})},D=async()=>{if(b){b=!1;return}const P=u(),j=P.state[Uc]-d.state[Uc],L=j===1,F=j===-1,V=!L&&!F||h;h=!1;const U=V?"GO":F?"BACK":"FORWARD",z=V?{type:"GO",index:j}:{type:F?"BACK":"FORWARD"};if(x)x=!1;else{const ee=s();if(typeof document<"u"&&ee.length){for(const Z of ee)if(await Z.blockerFn({currentLocation:d,nextLocation:P,action:U})){b=!0,e.history.go(1),W.notify(z);return}}}d=u(),W.notify(z)},M=P=>{if(_){_=!1;return}let j=!1;const L=s();if(typeof document<"u"&&L.length)for(const F of L){const V=F.enableBeforeUnload??!0;if(V===!0){j=!0;break}if(typeof V=="function"&&V()===!0){j=!0;break}}if(j)return P.preventDefault(),P.returnValue=""},W=C3({getLocation:N,getLength:()=>e.history.length,pushState:(P,j)=>O("push",P,j),replaceState:(P,j)=>O("replace",P,j),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>l(P),flush:T,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(dC,M,{capture:!0}),e.removeEventListener(uC,D)},onBlocked:()=>{p&&d!==p&&(d=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(dC,M,{capture:!0}),e.addEventListener(uC,D),e.history.pushState=function(...P){const j=n.apply(e.history,P);return W._ignoreSubscribers||A("PUSH"),j},e.history.replaceState=function(...P){const j=r.apply(e.history,P);return W._ignoreSubscribers||A("REPLACE"),j},W}function SB(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>MS(o,void 0));return C3({getLocation:()=>ch(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function ch(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Uc]:0}}}function EB(){return(Math.random()+1).toString(36).substring(7)}var NB="Invariant failed";function Ss(t,e){if(!t)throw new Error(NB)}const Dw=Q.createContext(null);function T3(){return typeof document>"u"?Dw:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Dw,Dw)}function Fo(t){const e=Q.useContext(T3());return t?.warn,e}var Lw={exports:{}},Mw={},$w={exports:{}},Bw={};var fC;function kB(){if(fC)return Bw;fC=1;var t=Jh();function e(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(h,b){var x=b(),_=r({inst:{value:x,getSnapshot:b}}),N=_[0].inst,I=_[1];return s(function(){N.value=x,N.getSnapshot=b,u(N)&&I({inst:N})},[h,x,b]),i(function(){return u(N)&&I({inst:N}),h(function(){u(N)&&I({inst:N})})},[h]),o(x),x}function u(h){var b=h.getSnapshot;h=h.value;try{var x=b();return!n(h,x)}catch{return!0}}function d(h,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Bw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Bw}var pC;function IB(){return pC||(pC=1,$w.exports=kB()),$w.exports}var hC;function CB(){if(hC)return Mw;hC=1;var t=Jh(),e=IB();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Mw.useSyncExternalStoreWithSelector=function(d,p,h,b,x){var _=s(null);if(_.current===null){var N={hasValue:!1,value:null};_.current=N}else N=_.current;_=l(function(){function R(M){if(!T){if(T=!0,O=M,M=b(M),x!==void 0&&N.hasValue){var W=N.value;if(x(W,M))return A=W}return A=M}if(W=A,r(O,M))return W;var P=b(M);return x!==void 0&&x(W,P)?(O=M,W):(O=M,A=P)}var T=!1,O,A,D=h===void 0?null:h;return[function(){return R(p())},D===null?void 0:function(){return R(D())}]},[p,h,b,x]);var I=i(d,_[0],_[1]);return o(function(){N.hasValue=!0,N.value=I},[I]),u(I),I},Mw}var mC;function TB(){return mC||(mC=1,Lw.exports=CB()),Lw.exports}var R3=TB();const RB=lo(R3),gd=new WeakMap,fy=new WeakMap,tb={current:[]};let zw=!1,Up=0;const Np=new Set,Og=new Map;function O3(t){const e=Array.from(t).sort((n,r)=>n instanceof yd&&n.options.deps.includes(r)?1:r instanceof yd&&r.options.deps.includes(n)?-1:0);for(const n of e){if(tb.current.includes(n))continue;tb.current.push(n),n.recompute();const r=fy.get(n);if(r)for(const i of r){const s=gd.get(i);s&&O3(s)}}}function OB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function jB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function j3(t){if(Up>0&&!Og.has(t)&&Og.set(t,t.prevState),Np.add(t),!(Up>0)&&!zw)try{for(zw=!0;Np.size>0;){const e=Array.from(Np);Np.clear();for(const n of e){const r=Og.get(n)??n.prevState;n.prevState=r,OB(n)}for(const n of e){const r=gd.get(n);r&&(tb.current.push(n),O3(r))}for(const n of e){const r=gd.get(n);if(r)for(const i of r)jB(i)}}}finally{zw=!1,tb.current=[],Og.clear()}}function Ww(t){Up++;try{t()}finally{if(Up--,Up===0){const e=Array.from(Np)[0];e&&j3(e)}}}class $S{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),j3(this)},this.prevState=e,this.state=e,this.options=n}}class yd{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof yd&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof yd)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof $S){let r=gd.get(n);r||(r=new Set,gd.set(n,r)),r.add(this);let i=fy.get(this);i||(i=new Set,fy.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof yd)this.unregisterFromGraph(n.options.deps);else if(n instanceof $S){const r=gd.get(n);r&&r.delete(this);const i=fy.get(this);i&&i.delete(n)}}}function qB(t,e=n=>n){return R3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,AB)}function AB(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Vw,gC;function PB(){if(gC)return Vw;gC=1;const t={},e=t.hasOwnProperty,n=(P,j)=>{for(const L in P)e.call(P,L)&&j(L,P[L])},r=(P,j)=>(j&&n(j,(L,F)=>{P[L]=F}),P),i=(P,j)=>{const L=P.length;let F=-1;for(;++F<L;)j(P[F])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,j)=>{let L=P.toString(16);return j?L:L.toUpperCase()},l=t.toString,u=Array.isArray,d=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>l.call(P)=="[object Object]",h=P=>typeof P=="string"||l.call(P)=="[object String]",b=P=>typeof P=="number"||l.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",N=P=>l.call(P)=="[object Map]",I=P=>l.call(P)=="[object Set]",R={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},T=/[\\\b\f\n\r\t]/,O=/[0-9]/,A=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,D=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,M=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,W=(P,j)=>{const L=()=>{le=Z,++j.indentLevel,Z=j.indent.repeat(j.indentLevel)},F={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},V=j&&j.json;V&&(F.quotes="double",F.wrap=!0),j=r(F,j),j.quotes!="single"&&j.quotes!="double"&&j.quotes!="backtick"&&(j.quotes="single");const U=j.quotes=="double"?'"':j.quotes=="backtick"?"`":"'",z=j.compact,ee=j.lowercaseHex;let Z=j.indent.repeat(j.indentLevel),le="";const se=j.__inline1__,te=j.__inline2__,oe=z?"":`
`;let X,ue=!0;const de=j.numbers=="binary",ye=j.numbers=="octal",we=j.numbers=="decimal",Ne=j.numbers=="hexadecimal";if(V&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(N(P))return P.size==0?"new Map()":(z||(j.__inline1__=!0,j.__inline2__=!1),"new Map("+W(Array.from(P),j)+")");if(I(P))return P.size==0?"new Set()":"new Set("+W(Array.from(P),j)+")";if(d(P))return P.length==0?"Buffer.from([])":"Buffer.from("+W(Array.from(P),j)+")";if(u(P))return X=[],j.wrap=!0,se&&(j.__inline1__=!1,j.__inline2__=!0),te||L(),i(P,Oe=>{ue=!1,te&&(j.__inline2__=!1),X.push((z||te?"":Z)+W(Oe,j))}),ue?"[]":te?"["+X.join(", ")+"]":"["+oe+X.join(","+oe)+oe+(z?"":le)+"]";if(b(P)||x(P)){if(V)return JSON.stringify(Number(P));let Oe;if(we)Oe=String(P);else if(Ne){let De=P.toString(16);ee||(De=De.toUpperCase()),Oe="0x"+De}else de?Oe="0b"+P.toString(2):ye&&(Oe="0o"+P.toString(8));return x(P)?Oe+"n":Oe}else return x(P)?V?JSON.stringify(Number(P)):P+"n":p(P)?(X=[],j.wrap=!0,L(),n(P,(Oe,De)=>{ue=!1,X.push((z?"":Z)+W(Oe,j)+":"+(z?"":" ")+W(De,j))}),ue?"{}":"{"+oe+X.join(","+oe)+oe+(z?"":le)+"}"):V?JSON.stringify(P)||"null":String(P)}const ze=j.escapeEverything?D:M;return X=P.replace(ze,(Oe,De,Je,Xe,Ve,ct)=>{if(De){if(j.minimal)return De;const Tt=De.charCodeAt(0),Ut=De.charCodeAt(1);if(j.es6){const rn=(Tt-55296)*1024+Ut-56320+65536;return"\\u{"+o(rn,ee)+"}"}return s(o(Tt,ee))+s(o(Ut,ee))}if(Je)return s(o(Je.charCodeAt(0),ee));if(Oe=="\0"&&!V&&!O.test(ct.charAt(Ve+1)))return"\\0";if(Xe)return Xe==U||j.escapeEverything?"\\"+Xe:Xe;if(T.test(Oe))return R[Oe];if(j.minimal&&!A.test(Oe))return Oe;const _t=o(Oe.charCodeAt(0),ee);return V||_t.length>2?s(_t):"\\x"+("00"+_t).slice(-2)}),U=="`"&&(X=X.replace(/\$\{/g,"\\${")),j.isScriptContext&&(X=X.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,V?"\\u003C!--":"\\x3C!--")),j.wrap&&(X=U+X+U),X};return W.version="3.0.2",Vw=W,Vw}PB();const ws="__root__";function FB(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function yC(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function DB(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const l=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],yC(l)):i[r]=yC(l)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const LB=$B(JSON.parse),MB=BB(JSON.stringify,JSON.parse);function $B(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=DB(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function BB(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=FB(r).toString();return i?`?${i}`:""}}function Hp(t){return t[t.length-1]}function zB(t){return typeof t=="function"}function Lc(t,e){return zB(t)?t(e):t}function py(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Ys(t,e){if(t===e)return t;const n=e,r=vC(t)&&vC(n);if(r||Pl(t)&&Pl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),l=o.length,u=r?[]:{};let d=0;for(let p=0;p<l;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,d++):(u[h]=Ys(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&d++)}return s===l&&d===s?t:u}return n}function Pl(t){if(!bC(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!bC(n)||!n.hasOwnProperty("isPrototypeOf"))}function bC(t){return Object.prototype.toString.call(t)==="[object Object]"}function vC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function xC(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function bd(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Pl(t)&&Pl(e)){const r=n?.ignoreUndefined??!0,i=xC(t,r),s=xC(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>bd(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!bd(r,e[i],n)):!1}const kp=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function nd(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Uw(t){const e=Q.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function WB(t,e,n={},r={}){const i=Q.useRef(typeof IntersectionObserver=="function"),s=Q.useRef(null);return Q.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function VB(t){const e=Q.useRef(null);return Q.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function Fa(t){return sv(t.filter(e=>e!==void 0).join("/"))}function sv(t){return t.replace(/\/{2,}/g,"/")}function a1(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function Mc(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function UB(t){return Mc(a1(t))}function nb(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function HB(t,e,n){return nb(t,n)===nb(e,n)}function QB({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=rb(t,e,i),n=rb(t,n,i);let l=Ad(e);const u=Ad(n);l.length>1&&((s=Hp(l))==null?void 0:s.value)==="/"&&l.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&l.push(p):l=[p]:p.value===".."?l.pop():p.value==="."||l.push(p)}),l.length>1&&(((o=Hp(l))==null?void 0:o.value)==="/"?r==="never"&&l.pop():r==="always"&&l.push({type:"pathname",value:"/"}));const d=Fa([t,...l.map(p=>p.value)]);return sv(d)}function Ad(t){if(!t)return[];t=sv(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function jg({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Ad(t),o={};for(const[l,u]of Object.entries(e)){const d=typeof u=="string";["*","_splat"].includes(l)?o[l]=d?encodeURI(u):u:o[l]=d?KB(u,i):u}return Fa(s.map(l=>{if(l.type==="wildcard"){const u=o._splat;return n?`${l.value}${u??""}`:u}if(l.type==="param"){if(r){const u=o[l.value];return`${l.value}${u??""}`}return o[l.value.substring(1)]??"undefined"}return l.value}))}function KB(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function qg(t,e,n){const r=GB(t,e,n);if(!(n.to&&!r))return r??{}}function rb(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function GB(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=rb(t,e,n.caseSensitive);const r=rb(t,`${n.to??"$"}`,n.caseSensitive),i=Ad(e),s=Ad(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const d=i[u],p=s[u],h=u>=i.length-1,b=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(Fa(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!d?.value)return!0;if(d){if(n.caseSensitive){if(p.value!==d.value)return!1}else if(p.value.toLowerCase()!==d.value.toLowerCase())return!1}}if(!d)return!1;if(p.type==="param"){if(d.value==="/")return!1;d.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(d.value))}}if(!h&&b)return o["**"]=Fa(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function Zh(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function Tc(t){return!!t?.isRedirect}function Hw(t){return!!t?.isRedirect&&t.href}function l1(t){const e=t.errorComponent??ov;return f.jsx(JB,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?Q.createElement(e,{error:n,reset:r}):t.children})}class JB extends Q.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function ov({error:t}){const[e,n]=Q.useState(!1);return f.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[f.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),f.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),f.jsx("div",{style:{height:".25rem"}}),e?f.jsx("div",{children:f.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?f.jsx("code",{children:t.message}):null})}):null]})}function Mi(t){const e=Fo({warn:t?.router===void 0}),n=t?.router||e,r=Q.useRef();return qB(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Ys(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function _o(t){return!!t?.isNotFound}function ZB(t){const e=Mi({select:n=>`not-found-${n.location.pathname}-${n.status}`});return f.jsx(l1,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(_o(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(_o(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function YB(){return f.jsx("p",{children:"Not Found"})}const Ip={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Pg.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Pl(i)){const s=Pg.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Ip.encode(n));if(Pl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Ip.encode(r)]));const e=Pg.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Pl(t)){const e=Pg.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Ip.decode(e)):Pl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Ip.decode(n)])):t}},Ag=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Pg=[Ag("undefined",t=>t===void 0,()=>0,()=>{}),Ag("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),Ag("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),Ag("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],q3=["component","errorComponent","pendingComponent","notFoundComponent"];function XB(t){var e;for(const n of q3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Qw(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new BS("Async validation not supported");if(n.issues)throw new BS(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function e4(t){return new t4(t)}class t4{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${UB(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?SB({initialEntries:[this.basepath||"/"]}):_B()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new $S(r4(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((l,u)=>{l.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const d=this.routesById[l.id];if(Ss(!d,`Duplicate routes found with id: ${String(l.id)}`),this.routesById[l.id]=l,!l.isRoot&&l.path){const h=Mc(l.fullPath);(!this.routesByPath[h]||l.fullPath.endsWith("/"))&&(this.routesByPath[h]=l)}const p=l.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,l)=>{var u;if(o.isRoot||!o.path)return;const d=a1(o.fullPath),p=Ad(d);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);i.push({child:o,trimmed:d,parsed:p,index:l,scores:h})}),this.flatRoutes=i.sort((o,l)=>{const u=Math.min(o.scores.length,l.scores.length);for(let d=0;d<u;d++)if(o.scores[d]!==l.scores[d])return l.scores[d]-o.scores[d];if(o.scores.length!==l.scores.length)return l.scores.length-o.scores.length;for(let d=0;d<u;d++)if(o.parsed[d].value!==l.parsed[d].value)return o.parsed[d].value>l.parsed[d].value?1:-1;return o.index-l.index}).map((o,l)=>(o.child.rank=l,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:d,hash:p,state:h})=>{const b=this.options.parseSearch(d),x=this.options.stringifySearch(b);return{pathname:u,searchStr:x,search:Ys(n?.search,b),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:Ys(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:l}=s.state;if(o&&(!l||l===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>QB({basepath:this.basepath,base:n,to:sv(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=Mc(n.pathname),o=p=>qg(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let l=r?.to!==void 0?this.routesByPath[r.to]:void 0;l?i=o(l):l=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=l||this.routesById[ws];const d=[u];for(;u.parentRoute;)u=u.parentRoute,d.unshift(u);return{matchedRoutes:d,routeParams:i,foundRoute:l}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var l,u,d,p,h,b;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(F=>qg(this.basepath,Mc(F.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,N=_?.pathname||this.latestLocation.pathname;Ss(s.from==null||_!=null,"Could not find match for from: "+s.from);const I=(l=this.state.pendingMatches)!=null&&l.length?(u=Hp(this.state.pendingMatches))==null?void 0:u.search:((d=Hp(x))==null?void 0:d.search)||this.latestLocation.search,R=o?.matchedRoutes.filter(F=>x.find(V=>V.routeId===F.id));let T;if(s.to)T=this.resolvePathWithBase(N,`${s.to}`);else{const F=this.routesById[(p=R?.find(V=>{const U=jg({path:V.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return Fa([this.basepath,U])===N}))==null?void 0:p.id];T=this.resolvePathWithBase(N,F?.to??N)}const O={...(h=Hp(x))==null?void 0:h.params};let A=(s.params??!0)===!0?O:{...O,...Lc(s.params,O)};Object.keys(A).length>0&&o?.matchedRoutes.map(F=>{var V;return((V=F.options.params)==null?void 0:V.stringify)??F.options.stringifyParams}).filter(Boolean).forEach(F=>{A={...A,...F(A)}}),T=jg({path:T,params:A??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let D=I;if(n._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let F={};o?.matchedRoutes.forEach(V=>{try{V.options.validateSearch&&(F={...F,...Qw(V.options.validateSearch,{...F,...D})??{}})}catch{}}),D=F}D=(F=>{const V=o?.matchedRoutes.reduce((ee,Z)=>{var le;const se=[];if("search"in Z.options)(le=Z.options.search)!=null&&le.middlewares&&se.push(...Z.options.search.middlewares);else if(Z.options.preSearchFilters||Z.options.postSearchFilters){const te=({search:oe,next:X})=>{let ue=oe;"preSearchFilters"in Z.options&&Z.options.preSearchFilters&&(ue=Z.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=X(ue);return"postSearchFilters"in Z.options&&Z.options.postSearchFilters?Z.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};se.push(te)}if(n._includeValidateSearch&&Z.options.validateSearch){const te=({search:oe,next:X})=>{try{const ue=X(oe);return{...ue,...Qw(Z.options.validateSearch,ue)??{}}}catch{}};se.push(te)}return ee.concat(se)},[])??[],U=({search:ee})=>s.search?s.search===!0?ee:Lc(s.search,ee):{};V.push(U);const z=(ee,Z)=>{if(ee>=V.length)return Z;const le=V[ee];return le({search:Z,next:te=>z(ee+1,te)})};return z(0,F)})(D),D=Ys(I,D);const W=this.options.stringifySearch(D),P=s.hash===!0?this.latestLocation.hash:s.hash?Lc(s.hash,this.latestLocation.hash):void 0,j=P?`#${P}`:"";let L=s.state===!0?this.latestLocation.state:s.state?Lc(s.state,this.latestLocation.state):{};return L=Ys(this.latestLocation.state,L),{pathname:T,search:D,searchStr:W,state:L,hash:P??"",href:`${T}${W}${j}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var l;const u=r(s);let d=o?r(o):void 0;if(!d){let b={};const x=(l=this.options.routeMasks)==null?void 0:l.find(_=>{const N=qg(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return N?(b=N,!0):!1});if(x){const{from:_,...N}=x;o={...py(n,["from"]),...N,params:b},d=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(d){const b=this.getMatchedRoutes(d,o),x=r(o,b);h.maskedLocation=x}return h};return n.mask?i(n,{...py(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=bd(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,l=this.commitLocationPromise;if(this.commitLocationPromise=nd(()=>{l?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:d,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=d??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:l,...u}={})=>{if(l){const p=this.history.location.state.__TSR_index,h=ch(l,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const d=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...d,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var l;try{const u=this.latestLocation,d=this.state.resolvedLocation,p=d.href!==u.href,h=d.pathname!==u.pathname;this.cancelMatches();let b;Ww(()=>{b=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:b,cachedMatches:x.cachedMatches.filter(_=>!b.find(N=>N.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:d,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:d,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:b,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,N;Ww(()=>{this.__store.setState(I=>{const R=I.matches,T=I.pendingMatches||I.matches;return x=R.filter(O=>!T.find(A=>A.id===O.id)),_=T.filter(O=>!R.find(A=>A.id===O.id)),N=R.filter(O=>T.find(A=>A.id===O.id)),{...I,isLoading:!1,loadedAt:Date.now(),matches:T,pendingMatches:void 0,cachedMatches:[...I.cachedMatches,...x.filter(O=>O.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[N,"onStay"]].forEach(([I,R])=>{I.forEach(T=>{var O,A;(A=(O=this.looseRoutesById[T.routeId].options)[R])==null||A.call(O,T)})})})}})}catch(u){Hw(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):_o(u)&&(i=u),this.__store.setState(d=>({...d,statusCode:r?r.statusCode:i?404:d.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),l=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),d=o?"pendingMatches":l?"matches":u?"cachedMatches":"";return d&&this.__store.setState(p=>{var h;return{...p,[d]:(h=p[d])==null?void 0:h.map(b=>b.id===n?s=r(b):b)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:l})=>{let u,d=!1;const p=async()=>{d||(d=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const b=(x,_)=>{var N,I,R;if(Hw(_)&&!_.reloadDocument)throw _;if(Tc(_)||_o(_)){if(o(x.id,T=>({...T,status:Tc(_)?"redirected":_o(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(N=x.beforeLoadPromise)==null||N.resolve(),(I=x.loaderPromise)==null||I.resolve(),(R=x.loadPromise)==null||R.resolve(),Tc(_))throw d=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(_o(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var N,I,R;try{const T=(D,M,W)=>{var P,j;const{id:L,routeId:F}=r[D],V=this.looseRoutesById[F];if(M instanceof Promise)throw M;M.routerCode=W,u=u??D,b(this.getMatch(L),M);try{(j=(P=V.options).onError)==null||j.call(P,M)}catch(U){M=U,b(this.getMatch(L),M)}o(L,U=>{var z,ee;return(z=U.beforeLoadPromise)==null||z.resolve(),(ee=U.loadPromise)==null||ee.resolve(),{...U,error:M,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[D,{id:M,routeId:W}]of r.entries()){const P=this.getMatch(M),j=(N=r[D-1])==null?void 0:N.id,L=this.looseRoutesById[W],F=L.options.pendingMs??this.options.defaultPendingMs,V=!!(s&&!this.isServer&&!h(M)&&(L.options.loader||L.options.beforeLoad)&&typeof F=="number"&&F!==1/0&&(L.options.pendingComponent??this.options.defaultPendingComponent));let U=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(V&&setTimeout(()=>{try{p()}catch{}},F),await P.beforeLoadPromise,U=this.getMatch(M).status!=="success"),U){try{o(M,Ne=>({...Ne,loadPromise:nd(()=>{var ze;(ze=Ne.loadPromise)==null||ze.resolve()}),beforeLoadPromise:nd()}));const z=new AbortController;let ee;V&&(ee=setTimeout(()=>{try{p()}catch{}},F));const{paramsError:Z,searchError:le}=this.getMatch(M);Z&&T(D,Z,"PARSE_PARAMS"),le&&T(D,le,"VALIDATE_SEARCH");const se=()=>j?this.getMatch(j).context:this.options.context??{};o(M,Ne=>({...Ne,isFetching:"beforeLoad",fetchCount:Ne.fetchCount+1,abortController:z,pendingTimeout:ee,context:{...se(),...Ne.__routeContext}}));const{search:te,params:oe,context:X,cause:ue}=this.getMatch(M),de=h(M),ye={search:te,abortController:z,params:oe,preload:de,context:X,location:n,navigate:Ne=>this.navigate({...Ne,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ue,matches:r};let we=await ((R=(I=L.options).beforeLoad)==null?void 0:R.call(I,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch(M)})),(Tc(we)||_o(we))&&T(D,we,"BEFORE_LOAD"),o(M,Ne=>({...Ne,__beforeLoadContext:we,context:{...se(),...Ne.__routeContext,...we},abortController:z}))}catch(z){T(D,z,"BEFORE_LOAD")}o(M,z=>{var ee;return(ee=z.beforeLoadPromise)==null||ee.resolve(),{...z,beforeLoadPromise:void 0,isFetching:!1}})}}const O=r.slice(0,u),A=[];O.forEach(({id:D,routeId:M},W)=>{A.push((async()=>{const{loaderPromise:P}=this.getMatch(D);let j=!1,L=!1;if(P){await P;const F=this.getMatch(D);F.error&&b(F,F.error)}else{const F=A[W-1],V=this.looseRoutesById[M],U=()=>{const{params:ue,loaderDeps:de,abortController:ye,context:we,cause:Ne}=this.getMatch(D),ze=h(D);return{params:ue,deps:de,preload:!!ze,parentMatchPromise:F,abortController:ye,context:we,location:n,navigate:Oe=>this.navigate({...Oe,_fromLocation:n}),cause:ze?"preload":Ne,route:V}},z=Date.now()-this.getMatch(D).updatedAt,ee=h(D),Z=ee?V.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:V.options.staleTime??this.options.defaultStaleTime??0,le=V.options.shouldReload,se=typeof le=="function"?le(U()):le;o(D,ue=>({...ue,loaderPromise:nd(),preload:!!ee&&!this.state.matches.find(de=>de.id===D)}));const te=async()=>{var ue,de,ye,we,Ne,ze,Oe,De;try{const Je=async()=>{const Xe=this.getMatch(D);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(V),o(D,rn=>({...rn,isFetching:"loader"}));let Xe=await ((de=(ue=V.options).loader)==null?void 0:de.call(ue,U()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(D)})),b(this.getMatch(D),Xe),await V._lazyPromise,await Je();const Ve=(we=(ye=V.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(D),params:this.getMatch(D).params,loaderData:Xe}),ct=Ve?.meta,_t=Ve?.links,Tt=Ve?.scripts,Ut=(ze=(Ne=V.options).headers)==null?void 0:ze.call(Ne,{loaderData:Xe});o(D,rn=>({...rn,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ct,links:_t,scripts:Tt,headers:Ut}))}catch(Xe){let Ve=Xe;await Je(),b(this.getMatch(D),Xe);try{(De=(Oe=V.options).onError)==null||De.call(Oe,Xe)}catch(ct){Ve=ct,b(this.getMatch(D),ct)}o(D,ct=>({...ct,error:Ve,status:"error",isFetching:!1}))}await V._componentsPromise}catch(Je){o(D,Xe=>({...Xe,loaderPromise:void 0})),b(this.getMatch(D),Je)}},{status:oe,invalid:X}=this.getMatch(D);j=oe==="success"&&(X||(se??z>Z)),ee&&V.options.preload===!1||(j&&!l?(L=!0,(async()=>{try{await te();const{loaderPromise:ue,loadPromise:de}=this.getMatch(D);ue?.resolve(),de?.resolve(),o(D,ye=>({...ye,loaderPromise:void 0}))}catch(ue){Hw(ue)&&await this.navigate(ue)}})()):(oe!=="success"||j&&l)&&await te())}if(!L){const{loaderPromise:F,loadPromise:V}=this.getMatch(D);F?.resolve(),V?.resolve()}return o(D,F=>({...F,isFetching:L?F.isFetching:!1,loaderPromise:L?F.loaderPromise:void 0,invalid:!1})),this.getMatch(D)})())}),await Promise.all(A),x()}catch(T){_(T)}})()}),await p()}catch(x){if(Tc(x)||_o(x))throw _o(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(q3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...s,...this.state.cachedMatches.map(l=>l.id)]);Ww(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,l]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(l,u)=>{s.has(l)?i=i.map(d=>d.id===l?u(d):d):this.updateMatch(l,u)}}),i}catch(l){if(Tc(l))return l.reloadDocument?void 0:await this.preloadRoute({...l,_fromLocation:r});console.error(l);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const l=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=qg(this.basepath,l.pathname,{...r,to:s.pathname});return!u||n.params&&!bd(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?bd(l.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??i4;return{state:{dehydratedMatches:this.state.matches.map(i=>({...py(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Ss(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,l=this.matchRoutes(this.state.location).map(u=>{const d=o.dehydratedMatches.find(p=>p.id===u.id);return Ss(d,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...d}});this.__store.setState(u=>({...u,matches:l})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[ws]:this.looseRoutesById[r.routeId])||this.looseRoutesById[ws];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==ws;)o=o.parentRoute,Ss(o);const l=s[o.id];Ss(l,"Could not find match for route: "+o.id),i(l.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??MB,parseSearch:e.parseSearch??LB,transformer:e.transformer??Ip}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:Mc(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const b=i[h];if(b.children)return b.id}return ws}})(),u=i.map(h=>{var b;let x;const _=((b=h.options.params)==null?void 0:b.parse)??h.options.parseParams;if(_)try{const N=_(s);Object.assign(s,N)}catch(N){if(x=new n4(N.message,{cause:N}),n?.throwOnError)throw x;return x}}),d=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,b)=>{var x,_,N,I;const R=d[b-1],[T,O]=(()=>{const U=R?.search??e.search;try{const z=Qw(h.options.validateSearch,U)??{};return[{...U,...z},void 0]}catch(z){const ee=new BS(z.message,{cause:z});if(n?.throwOnError)throw ee;return[U,ee]}})(),A=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:T}))??"",D=A?JSON.stringify(A):"",M=jg({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),W=jg({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+D,P=this.getMatch(W),j=this.state.matches.find(U=>U.routeId===h.id),L=j?"stay":"enter";let F;if(P)F={...P,cause:L,params:j?Ys(j.params,s):s,search:Ys(j?j.search:P.search,T)};else{const U=h.options.loader||h.options.beforeLoad||h.lazyFn||XB(h)?"pending":"success";F={id:W,index:b,routeId:h.id,params:j?Ys(j.params,s):s,pathname:Fa([this.basepath,M]),updatedAt:Date.now(),search:j?Ys(j.search,T):T,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:u[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:L,loaderDeps:j?Ys(j.loaderDeps,A):A,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:nd(),fullPath:h.fullPath}}F.status==="success"&&(F.headers=(I=(N=h.options).headers)==null?void 0:I.call(N,{loaderData:F.loaderData})),n?.preload||(F.globalNotFound=l===h.id),F.searchError=O;const V=p(R);F.context={...V,...F.__routeContext,...F.__beforeLoadContext},d.push(F)}),d.forEach((h,b)=>{var x,_,N,I;const R=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const A=d[b-1],D=p(A),M={deps:h.loaderDeps,params:h.params,context:D,location:e,navigate:W=>this.navigate({...W,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:d};h.__routeContext=((_=(x=R.options).context)==null?void 0:_.call(x,M))??{},h.context={...D,...h.__routeContext,...h.__beforeLoadContext}}const O=(I=(N=R.options).head)==null?void 0:I.call(N,{matches:d,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=O?.links,h.scripts=O?.scripts,h.meta=O?.meta}),d}}class BS extends Error{}class n4 extends Error{}function r4(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function i4(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function wC(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function _C(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const av=Q.createContext(void 0),s4=Q.createContext(void 0);function Wl(t){const e=Q.useContext(t.from?s4:av);return Mi({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Ss(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function hi(t){return Wl({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function o4(t){const{select:e,...n}=t;return Wl({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function sn(t){return Wl({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function a4(t){return Wl({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function lu(t){const{navigate:e}=Fo();return Q.useCallback(n=>e({...n}),[e])}let A3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=ws:Ss(this.parentRoute);let l=o?ws:s.path;l&&l!=="/"&&(l=a1(l));const u=s?.id||l;let d=o?ws:Fa([this.parentRoute.id===ws?"":this.parentRoute.id,u]);l===ws&&(l="/"),d!==ws&&(d=Fa(["/",d]));const p=d===ws?"/":Fa([this.parentRoute.fullPath,l]);this._path=l,this._id=d,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Wl({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Wl({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>a4({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>sn({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>o4({...n,from:this.id}),this.useLoaderData=n=>hi({...n,from:this.id}),this.useNavigate=()=>lu({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Ss(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function l4(t){return new A3(t)}function c4(){return t=>d4(t)}class u4 extends A3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function d4(t){return new u4(t)}function zt(t){return new f4(t,{silent:!0}).createRoute}class f4{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=l4(r);return i.isRoot=!1,i},this.silent=n?.silent}}function hy(t){return f.jsx(f.Fragment,{children:t.children})}function P3(t,e,n){return e.options.notFoundComponent?f.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?f.jsx(t.options.defaultNotFoundComponent,{data:n}):f.jsx(YB,{})}const F3=Q.memo(function({matchId:e}){var n,r;const i=Fo(),s=Mi({select:I=>{var R;return(R=I.matches.find(T=>T.id===e))==null?void 0:R.routeId}});Ss(s);const o=i.routesById[s],l=o.options.pendingComponent??i.options.defaultPendingComponent,u=l?f.jsx(l,{}):null,d=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,b=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??l??((r=o.options.errorComponent)==null?void 0:r.preload))?Q.Suspense:hy,x=d?l1:hy,_=h?ZB:hy,N=Mi({select:I=>I.loadedAt});return f.jsx(av.Provider,{value:e,children:f.jsx(b,{fallback:u,children:f.jsx(x,{getResetKey:()=>N,errorComponent:d||ov,onCatch:(I,R)=>{if(_o(I))throw I;p?.(I,R)},children:f.jsx(_,{fallback:I=>{if(!h||I.routeId&&I.routeId!==s||!I.routeId&&!o.isRoot)throw I;return Q.createElement(h,I)},children:f.jsx(p4,{matchId:e})})})})})}),p4=Q.memo(function({matchId:e}){var n,r,i,s,o;const l=Fo(),{match:u,matchIndex:d,routeId:p}=Mi({select:_=>{const N=_.matches.findIndex(T=>T.id===e),I=_.matches[N];return{routeId:I.routeId,matchIndex:N,match:py(I,["id","status","error"])}},structuralSharing:!0}),h=l.routesById[p],b=Q.useMemo(()=>{const _=h.options.component??l.options.defaultComponent;return _?f.jsx(_,{}):f.jsx(co,{})},[h.options.component,l.options.defaultComponent]),x=(h.options.errorComponent??l.options.defaultErrorComponent)||ov;if(u.status==="notFound"){let _;return wC(u.error)?_=(((n=l.options.errorSerializer)==null?void 0:n.deserialize)??_C)(u.error.data):_=u.error,Ss(_o(_)),P3(l,h,_)}if(u.status==="redirected")throw Ss(Tc(u.error)),(r=l.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(l.isServer)return f.jsx(x,{error:u.error,info:{componentStack:""}});throw wC(u.error)?(((i=l.options.errorSerializer)==null?void 0:i.deserialize)??_C)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??l.options.defaultPendingMinMs;if(_&&!((s=l.getMatch(u.id))!=null&&s.minPendingPromise)&&!l.isServer){const N=nd();Promise.resolve().then(()=>{l.updateMatch(u.id,I=>({...I,minPendingPromise:N}))}),setTimeout(()=>{N.resolve(),l.updateMatch(u.id,I=>({...I,minPendingPromise:void 0}))},_)}throw(o=l.getMatch(u.id))==null?void 0:o.loadPromise}return f.jsxs(f.Fragment,{children:[b,l.AfterEachMatch?f.jsx(l.AfterEachMatch,{match:u,matchIndex:d}):null]})}),co=Q.memo(function(){const e=Fo(),n=Q.useContext(av),r=Mi({select:d=>{var p;return(p=d.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=Mi({select:d=>{const h=d.matches.find(b=>b.id===n);return Ss(h),h.globalNotFound}}),o=Mi({select:d=>{var p;const h=d.matches,b=h.findIndex(x=>x.id===n);return(p=h[b+1])==null?void 0:p.id}});if(s)return P3(e,i,void 0);if(!o)return null;const l=f.jsx(F3,{matchId:o}),u=e.options.defaultPendingComponent?f.jsx(e.options.defaultPendingComponent,{}):null;return n===ws?f.jsx(Q.Suspense,{fallback:u,children:l}):l});var Kw={exports:{}},ts={},Gw={exports:{}},Jw={};var SC;function h4(){return SC||(SC=1,function(t){function e(se,te){var oe=se.length;se.push(te);e:for(;0<oe;){var X=oe-1>>>1,ue=se[X];if(0<i(ue,te))se[X]=te,se[oe]=ue,oe=X;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var te=se[0],oe=se.pop();if(oe!==te){se[0]=oe;e:for(var X=0,ue=se.length,de=ue>>>1;X<de;){var ye=2*(X+1)-1,we=se[ye],Ne=ye+1,ze=se[Ne];if(0>i(we,oe))Ne<ue&&0>i(ze,we)?(se[X]=ze,se[Ne]=oe,X=Ne):(se[X]=we,se[ye]=oe,X=ye);else if(Ne<ue&&0>i(ze,oe))se[X]=ze,se[Ne]=oe,X=Ne;else break e}}return te}function i(se,te){var oe=se.sortIndex-te.sortIndex;return oe!==0?oe:se.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,h=null,b=3,x=!1,_=!1,N=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(se){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=se)r(d),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(d)}}function A(se){if(N=!1,O(se),!_)if(n(u)!==null)_=!0,Z(D);else{var te=n(d);te!==null&&le(A,te.startTime-se)}}function D(se,te){_=!1,N&&(N=!1,R(P),P=-1),x=!0;var oe=b;try{for(O(te),h=n(u);h!==null&&(!(h.expirationTime>te)||se&&!F());){var X=h.callback;if(typeof X=="function"){h.callback=null,b=h.priorityLevel;var ue=X(h.expirationTime<=te);te=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(u)&&r(u),O(te)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(d);ye!==null&&le(A,ye.startTime-te),de=!1}return de}finally{h=null,b=oe,x=!1}}var M=!1,W=null,P=-1,j=5,L=-1;function F(){return!(t.unstable_now()-L<j)}function V(){if(W!==null){var se=t.unstable_now();L=se;var te=!0;try{te=W(!0,se)}finally{te?U():(M=!1,W=null)}}else M=!1}var U;if(typeof T=="function")U=function(){T(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,ee=z.port2;z.port1.onmessage=V,U=function(){ee.postMessage(null)}}else U=function(){I(V,0)};function Z(se){W=se,M||(M=!0,U())}function le(se,te){P=I(function(){se(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,Z(D))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(se){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var oe=b;b=te;try{return se()}finally{b=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,te){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=b;b=se;try{return te()}finally{b=oe}},t.unstable_scheduleCallback=function(se,te,oe){var X=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?X+oe:X):oe=X,se){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=0x3fffffff;break;case 4:ue=1e4;break;default:ue=5e3}return ue=oe+ue,se={id:p++,callback:te,priorityLevel:se,startTime:oe,expirationTime:ue,sortIndex:-1},oe>X?(se.sortIndex=oe,e(d,se),n(u)===null&&se===n(d)&&(N?(R(P),P=-1):N=!0,le(A,oe-X))):(se.sortIndex=ue,e(u,se),_||x||(_=!0,Z(D))),se},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(se){var te=b;return function(){var oe=b;b=te;try{return se.apply(this,arguments)}finally{b=oe}}}}(Jw)),Jw}var EC;function m4(){return EC||(EC=1,Gw.exports=h4()),Gw.exports}var NC;function g4(){if(NC)return ts;NC=1;var t=Jh(),e=m4();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function b(a){return u.call(h,a)?!0:u.call(p,a)?!1:d.test(a)?h[a]=!0:(p[a]=!0,!1)}function x(a,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function _(a,c,m,w){if(c===null||typeof c>"u"||x(a,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function N(a,c,m,w,k,q,J){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=q,this.removeEmptyString=J}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){I[a]=new N(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];I[c]=new N(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){I[a]=new N(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){I[a]=new N(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){I[a]=new N(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){I[a]=new N(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){I[a]=new N(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){I[a]=new N(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){I[a]=new N(a,5,!1,a.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function T(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(R,T);I[c]=new N(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(R,T);I[c]=new N(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(R,T);I[c]=new N(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){I[a]=new N(a,1,!1,a.toLowerCase(),null,!1,!1)}),I.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){I[a]=new N(a,1,!1,a.toLowerCase(),null,!0,!0)});function O(a,c,m,w){var k=I.hasOwnProperty(c)?I[c]:null;(k!==null?k.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,k,w)&&(m=null),w||k===null?b(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):k.mustUseProperty?a[k.propertyName]=m===null?k.type===3?!1:"":m:(c=k.attributeName,w=k.attributeNamespace,m===null?a.removeAttribute(c):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,w?a.setAttributeNS(w,c,m):a.setAttribute(c,m))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),F=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),se=Symbol.iterator;function te(a){return a===null||typeof a!="object"?null:(a=se&&a[se]||a["@@iterator"],typeof a=="function"?a:null)}var oe=Object.assign,X;function ue(a){if(X===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);X=c&&c[1]||""}return`
`+X+a}var de=!1;function ye(a,c){if(!a||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(a,[],c)}else{try{c.call()}catch(He){w=He}a.call(c.prototype)}else{try{throw Error()}catch(He){w=He}a()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var k=He.stack.split(`
`),q=w.stack.split(`
`),J=k.length-1,ge=q.length-1;1<=J&&0<=ge&&k[J]!==q[ge];)ge--;for(;1<=J&&0<=ge;J--,ge--)if(k[J]!==q[ge]){if(J!==1||ge!==1)do if(J--,ge--,0>ge||k[J]!==q[ge]){var Se=`
`+k[J].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=J&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ue(a):""}function we(a){switch(a.tag){case 5:return ue(a.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return a=ye(a.type,!1),a;case 11:return a=ye(a.type.render,!1),a;case 1:return a=ye(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case W:return"Fragment";case M:return"Portal";case j:return"Profiler";case P:return"StrictMode";case U:return"Suspense";case z:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case F:return(a.displayName||"Context")+".Consumer";case L:return(a._context.displayName||"Context")+".Provider";case V:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ee:return c=a.displayName||null,c!==null?c:Ne(a.type)||"Memo";case Z:c=a._payload,a=a._init;try{return Ne(a(c))}catch{}}return null}function ze(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Oe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function De(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(a){var c=De(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,q=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return k.call(this)},set:function(J){w=""+J,q.call(this,J)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(J){w=""+J},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Xe(a){a._valueTracker||(a._valueTracker=Je(a))}function Ve(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return a&&(w=De(a)?a.checked?"true":"false":a.value),a=w,a!==m?(c.setValue(a),!0):!1}function ct(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function _t(a,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function Tt(a,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Oe(c.value!=null?c.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ut(a,c){c=c.checked,c!=null&&O(a,"checked",c,!1)}function rn(a,c){Ut(a,c);var m=Oe(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?be(a,c.type,m):c.hasOwnProperty("defaultValue")&&be(a,c.type,Oe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function xe(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function be(a,c,m){(c!=="number"||ct(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var ke=Array.isArray;function Ae(a,c,m,w){if(a=a.options,c){c={};for(var k=0;k<m.length;k++)c["$"+m[k]]=!0;for(m=0;m<a.length;m++)k=c.hasOwnProperty("$"+a[m].value),a[m].selected!==k&&(a[m].selected=k),k&&w&&(a[m].defaultSelected=!0)}else{for(m=""+Oe(m),c=null,k=0;k<a.length;k++){if(a[k].value===m){a[k].selected=!0,w&&(a[k].defaultSelected=!0);return}c!==null||a[k].disabled||(c=a[k])}c!==null&&(c.selected=!0)}}function Ue(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(ke(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:Oe(m)}}function Me(a,c){var m=Oe(c.value),w=Oe(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function ut(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Kt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Kt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var hn,or=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,k){MSApp.execUnsafeLocalFunction(function(){return a(c,m,w,k)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(hn=hn||document.createElement("div"),hn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=hn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Ln(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ti=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(a){Ti.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Hr[c]=Hr[a]})});function _r(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Hr.hasOwnProperty(a)&&Hr[a]?(""+c).trim():c+"px"}function Jt(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,k=_r(m,c[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,k):a[m]=k}}var Ui=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hi(a,c){if(c){if(Ui[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Qi(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function da(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ac=null,$s=null,H=null;function pu(a){if(a=Kf(a)){if(typeof ac!="function")throw Error(n(280));var c=a.stateNode;c&&(c=Um(c),ac(a.stateNode,a.type,c))}}function un(a){$s?H?H.push(a):H=[a]:$s=a}function hu(){if($s){var a=$s,c=H;if(H=$s=null,pu(a),c)for(a=0;a<c.length;a++)pu(c[a])}}function mu(a,c){return a(c)}function gu(){}var lc=!1;function fa(a,c,m){if(lc)return a(c,m);lc=!0;try{return mu(a,c,m)}finally{lc=!1,($s!==null||H!==null)&&(gu(),hu())}}function Ki(a,c){var m=a.stateNode;if(m===null)return null;var w=Um(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var cc=!1;if(l)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){cc=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{cc=!1}function wf(a,c,m,w,k,q,J,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var ha=!1,Bs=null,Ja=!1,zs=null,_f={onError:function(a){ha=!0,Bs=a}};function Sf(a,c,m,w,k,q,J,ge,Se){ha=!1,Bs=null,wf.apply(_f,arguments)}function yu(a,c,m,w,k,q,J,ge,Se){if(Sf.apply(this,arguments),ha){if(ha){var He=Bs;ha=!1,Bs=null}else throw Error(n(198));Ja||(Ja=!0,zs=He)}}function Ws(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function bu(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function vu(a){if(Ws(a)!==a)throw Error(n(188))}function Ef(a){var c=a.alternate;if(!c){if(c=Ws(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,w=c;;){var k=m.return;if(k===null)break;var q=k.alternate;if(q===null){if(w=k.return,w!==null){m=w;continue}break}if(k.child===q.child){for(q=k.child;q;){if(q===m)return vu(k),a;if(q===w)return vu(k),c;q=q.sibling}throw Error(n(188))}if(m.return!==w.return)m=k,w=q;else{for(var J=!1,ge=k.child;ge;){if(ge===m){J=!0,m=k,w=q;break}if(ge===w){J=!0,w=k,m=q;break}ge=ge.sibling}if(!J){for(ge=q.child;ge;){if(ge===m){J=!0,m=q,w=k;break}if(ge===w){J=!0,w=q,m=k;break}ge=ge.sibling}if(!J)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function xu(a){return a=Ef(a),a!==null?wu(a):null}function wu(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=wu(a);if(c!==null)return c;a=a.sibling}return null}var _u=e.unstable_scheduleCallback,uc=e.unstable_cancelCallback,Su=e.unstable_shouldYield,Nf=e.unstable_requestPaint,ar=e.unstable_now,kf=e.unstable_getCurrentPriorityLevel,dc=e.unstable_ImmediatePriority,Eu=e.unstable_UserBlockingPriority,Za=e.unstable_NormalPriority,If=e.unstable_LowPriority,fc=e.unstable_IdlePriority,Ya=null,Gi=null;function Cf(a){if(Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(Ya,a,void 0,(a.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:Of,Tf=Math.log,Rf=Math.LN2;function Of(a){return a>>>=0,a===0?32:31-(Tf(a)/Rf|0)|0}var $o=64,Xa=4194304;function Ri(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return a&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return a}}function el(a,c){var m=a.pendingLanes;if(m===0)return 0;var w=0,k=a.suspendedLanes,q=a.pingedLanes,J=m&0xfffffff;if(J!==0){var ge=J&~k;ge!==0?w=Ri(ge):(q&=J,q!==0&&(w=Ri(q)))}else J=m&~k,J!==0?w=Ri(J):q!==0&&(w=Ri(q));if(w===0)return 0;if(c!==0&&c!==w&&!(c&k)&&(k=w&-w,q=c&-c,k>=q||k===16&&(q&4194240)!==0))return c;if(w&4&&(w|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)m=31-gi(c),k=1<<m,w|=a[m],c&=~k;return w}function lx(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function cx(a,c){for(var m=a.suspendedLanes,w=a.pingedLanes,k=a.expirationTimes,q=a.pendingLanes;0<q;){var J=31-gi(q),ge=1<<J,Se=k[J];Se===-1?(!(ge&m)||ge&w)&&(k[J]=lx(ge,c)):Se<=c&&(a.expiredLanes|=ge),q&=~ge}}function jf(a){return a=a.pendingLanes&-0x40000001,a!==0?a:a&0x40000000?0x40000000:0}function Pm(){var a=$o;return $o<<=1,!($o&4194240)&&($o=64),a}function qf(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function pc(a,c,m){a.pendingLanes|=c,c!==0x20000000&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-gi(c),a[c]=m}function ux(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var k=31-gi(m),q=1<<k;c[k]=0,w[k]=-1,a[k]=-1,m&=~q}}function Af(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var w=31-gi(m),k=1<<w;k&c|a[w]&c&&(a[w]|=c),m&=~k}}var Mn=0;function Fm(a){return a&=-a,1<a?4<a?a&0xfffffff?16:0x20000000:4:1}var Pf,he,Ff,hc,Df,g=!1,y=[],S=null,E=null,C=null,B=new Map,fe=new Map,me=[],Qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(a,c){switch(a){case"focusin":case"focusout":S=null;break;case"dragenter":case"dragleave":E=null;break;case"mouseover":case"mouseout":C=null;break;case"pointerover":case"pointerout":B.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(a,c,m,w,k,q){return a===null||a.nativeEvent!==q?(a={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:q,targetContainers:[k]},c!==null&&(c=Kf(c),c!==null&&he(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),a)}function mt(a,c,m,w,k){switch(c){case"focusin":return S=at(S,a,c,m,w,k),!0;case"dragenter":return E=at(E,a,c,m,w,k),!0;case"mouseover":return C=at(C,a,c,m,w,k),!0;case"pointerover":var q=k.pointerId;return B.set(q,at(B.get(q)||null,a,c,m,w,k)),!0;case"gotpointercapture":return q=k.pointerId,fe.set(q,at(fe.get(q)||null,a,c,m,w,k)),!0}return!1}function Be(a){var c=mc(a.target);if(c!==null){var m=Ws(c);if(m!==null){if(c=m.tag,c===13){if(c=bu(m),c!==null){a.blockedOn=c,Df(a.priority,function(){Ff(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function je(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=ce(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);fo=w,m.target.dispatchEvent(w),fo=null}else return c=Kf(m),c!==null&&he(c),a.blockedOn=m,!1;c.shift()}return!0}function et(a,c,m){je(a)&&m.delete(c)}function ve(){g=!1,S!==null&&je(S)&&(S=null),E!==null&&je(E)&&(E=null),C!==null&&je(C)&&(C=null),B.forEach(et),fe.forEach(et)}function Ie(a,c){a.blockedOn===c&&(a.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ve)))}function Te(a){function c(k){return Ie(k,a)}if(0<y.length){Ie(y[0],a);for(var m=1;m<y.length;m++){var w=y[m];w.blockedOn===a&&(w.blockedOn=null)}}for(S!==null&&Ie(S,a),E!==null&&Ie(E,a),C!==null&&Ie(C,a),B.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=A.ReactCurrentBatchConfig,Ge=!0;function Re(a,c,m,w){var k=Mn,q=Ze.transition;Ze.transition=null;try{Mn=1,St(a,c,m,w)}finally{Mn=k,Ze.transition=q}}function Ke(a,c,m,w){var k=Mn,q=Ze.transition;Ze.transition=null;try{Mn=4,St(a,c,m,w)}finally{Mn=k,Ze.transition=q}}function St(a,c,m,w){if(Ge){var k=ce(a,c,m,w);if(k===null)Ex(a,c,w,Y,m),tt(a,w);else if(mt(k,a,c,m,w))w.stopPropagation();else if(tt(a,w),c&4&&-1<Qe.indexOf(a)){for(;k!==null;){var q=Kf(k);if(q!==null&&Pf(q),q=ce(a,c,m,w),q===null&&Ex(a,c,w,Y,m),q===k)break;k=q}k!==null&&w.stopPropagation()}else Ex(a,c,w,null,m)}}var Y=null;function ce(a,c,m,w){if(Y=null,a=da(w),a=mc(a),a!==null)if(c=Ws(a),c===null)a=null;else if(m=c.tag,m===13){if(a=bu(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return Y=a,null}function Ee(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kf()){case dc:return 1;case Eu:return 4;case Za:case If:return 16;case fc:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function K(){if(pe)return pe;var a,c=ae,m=c.length,w,k="value"in st?st.value:st.textContent,q=k.length;for(a=0;a<m&&c[a]===k[a];a++);var J=m-a;for(w=1;w<=J&&c[m-w]===k[q-w];w++);return pe=k.slice(a,1<w?1-w:void 0)}function re(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ie(){return!0}function Le(){return!1}function it(a){function c(m,w,k,q,J){this._reactName=m,this._targetInst=k,this.type=w,this.nativeEvent=q,this.target=J,this.currentTarget=null;for(var ge in a)a.hasOwnProperty(ge)&&(m=a[ge],this[ge]=m?m(q):q[ge]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?ie:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ie)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ie)},persist:function(){},isPersistent:ie}),c}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wt=it(Rt),Zt=oe({},Rt,{view:0,detail:0}),lt=it(Zt),_e,Pe,ot,pt=oe({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ot&&(ot&&a.type==="mousemove"?(_e=a.screenX-ot.screenX,Pe=a.screenY-ot.screenY):Pe=_e=0,ot=a),_e)},movementY:function(a){return"movementY"in a?a.movementY:Pe}}),Dt=it(pt),Yt=oe({},pt,{dataTransfer:0}),qe=it(Yt),nt=oe({},Zt,{relatedTarget:0}),dt=it(nt),Nt=oe({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=it(Nt),Bt=oe({},Rt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),mn=it(Bt),Ot=oe({},Rt,{data:0}),Sr=it(Ot),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=wt[a])?!!c[a]:!1}function yn(){return kt}var Qn=oe({},Zt,{key:function(a){if(a.key){var c=We[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=re(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(a){return a.type==="keypress"?re(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?re(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),zn=it(Qn),Hn=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=it(Hn),li=oe({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn}),dx=it(li),fx=oe({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vs=it(fx),px=oe({},pt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Dm=it(px),Lf=[9,13,27,32],hx=l&&"CompositionEvent"in window,Mf=null;l&&"documentMode"in document&&(Mf=document.documentMode);var AM=l&&"TextEvent"in window&&!Mf,zN=l&&(!hx||Mf&&8<Mf&&11>=Mf),WN=" ",VN=!1;function UN(a,c){switch(a){case"keyup":return Lf.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HN(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Nu=!1;function PM(a,c){switch(a){case"compositionend":return HN(c);case"keypress":return c.which!==32?null:(VN=!0,WN);case"textInput":return a=c.data,a===WN&&VN?null:a;default:return null}}function FM(a,c){if(Nu)return a==="compositionend"||!hx&&UN(a,c)?(a=K(),pe=ae=st=null,Nu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return zN&&c.locale!=="ko"?null:c.data;default:return null}}var DM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QN(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!DM[a.type]:c==="textarea"}function KN(a,c,m,w){un(w),c=zm(c,"onChange"),0<c.length&&(m=new Wt("onChange","change",null,m,w),a.push({event:m,listeners:c}))}var $f=null,Bf=null;function LM(a){fk(a,0)}function Lm(a){var c=Ru(a);if(Ve(c))return a}function MM(a,c){if(a==="change")return c}var GN=!1;if(l){var mx;if(l){var gx="oninput"in document;if(!gx){var JN=document.createElement("div");JN.setAttribute("oninput","return;"),gx=typeof JN.oninput=="function"}mx=gx}else mx=!1;GN=mx&&(!document.documentMode||9<document.documentMode)}function ZN(){$f&&($f.detachEvent("onpropertychange",YN),Bf=$f=null)}function YN(a){if(a.propertyName==="value"&&Lm(Bf)){var c=[];KN(c,Bf,a,da(a)),fa(LM,c)}}function $M(a,c,m){a==="focusin"?(ZN(),$f=c,Bf=m,$f.attachEvent("onpropertychange",YN)):a==="focusout"&&ZN()}function BM(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Lm(Bf)}function zM(a,c){if(a==="click")return Lm(c)}function WM(a,c){if(a==="input"||a==="change")return Lm(c)}function VM(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var po=typeof Object.is=="function"?Object.is:VM;function zf(a,c){if(po(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var k=m[w];if(!u.call(c,k)||!po(a[k],c[k]))return!1}return!0}function XN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ek(a,c){var m=XN(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=c&&w>=c)return{node:m,offset:c-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=XN(m)}}function tk(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?tk(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function nk(){for(var a=window,c=ct();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=ct(a.document)}return c}function yx(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function UM(a){var c=nk(),m=a.focusedElem,w=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&tk(m.ownerDocument.documentElement,m)){if(w!==null&&yx(m)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var k=m.textContent.length,q=Math.min(w.start,k);w=w.end===void 0?q:Math.min(w.end,k),!a.extend&&q>w&&(k=w,w=q,q=k),k=ek(m,q);var J=ek(m,w);k&&J&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==J.node||a.focusOffset!==J.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),a.removeAllRanges(),q>w?(a.addRange(c),a.extend(J.node,J.offset)):(c.setEnd(J.node,J.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var HM=l&&"documentMode"in document&&11>=document.documentMode,ku=null,bx=null,Wf=null,vx=!1;function rk(a,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;vx||ku==null||ku!==ct(w)||(w=ku,"selectionStart"in w&&yx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Wf&&zf(Wf,w)||(Wf=w,w=zm(bx,"onSelect"),0<w.length&&(c=new Wt("onSelect","select",null,c,m),a.push({event:c,listeners:w}),c.target=ku)))}function Mm(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var Iu={animationend:Mm("Animation","AnimationEnd"),animationiteration:Mm("Animation","AnimationIteration"),animationstart:Mm("Animation","AnimationStart"),transitionend:Mm("Transition","TransitionEnd")},xx={},ik={};l&&(ik=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function $m(a){if(xx[a])return xx[a];if(!Iu[a])return a;var c=Iu[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in ik)return xx[a]=c[m];return a}var sk=$m("animationend"),ok=$m("animationiteration"),ak=$m("animationstart"),lk=$m("transitionend"),ck=new Map,uk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(a,c){ck.set(a,c),s(c,[a])}for(var wx=0;wx<uk.length;wx++){var _x=uk[wx],QM=_x.toLowerCase(),KM=_x[0].toUpperCase()+_x.slice(1);tl(QM,"on"+KM)}tl(sk,"onAnimationEnd"),tl(ok,"onAnimationIteration"),tl(ak,"onAnimationStart"),tl("dblclick","onDoubleClick"),tl("focusin","onFocus"),tl("focusout","onBlur"),tl(lk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vf));function dk(a,c,m){var w=a.type||"unknown-event";a.currentTarget=m,yu(w,c,void 0,a),a.currentTarget=null}function fk(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],k=w.event;w=w.listeners;e:{var q=void 0;if(c)for(var J=w.length-1;0<=J;J--){var ge=w[J],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==q&&k.isPropagationStopped())break e;dk(k,ge,He),q=Se}else for(J=0;J<w.length;J++){if(ge=w[J],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==q&&k.isPropagationStopped())break e;dk(k,ge,He),q=Se}}}if(Ja)throw a=zs,Ja=!1,zs=null,a}function lr(a,c){var m=c[Rx];m===void 0&&(m=c[Rx]=new Set);var w=a+"__bubble";m.has(w)||(pk(c,a,2,!1),m.add(w))}function Sx(a,c,m){var w=0;c&&(w|=4),pk(m,a,w,c)}var Bm="_reactListening"+Math.random().toString(36).slice(2);function Uf(a){if(!a[Bm]){a[Bm]=!0,r.forEach(function(m){m!=="selectionchange"&&(GM.has(m)||Sx(m,!1,a),Sx(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Bm]||(c[Bm]=!0,Sx("selectionchange",!1,c))}}function pk(a,c,m,w){switch(Ee(c)){case 1:var k=Re;break;case 4:k=Ke;break;default:k=St}m=k.bind(null,c,m,a),k=void 0,!cc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),w?k!==void 0?a.addEventListener(c,m,{capture:!0,passive:k}):a.addEventListener(c,m,!0):k!==void 0?a.addEventListener(c,m,{passive:k}):a.addEventListener(c,m,!1)}function Ex(a,c,m,w,k){var q=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var J=w.tag;if(J===3||J===4){var ge=w.stateNode.containerInfo;if(ge===k||ge.nodeType===8&&ge.parentNode===k)break;if(J===4)for(J=w.return;J!==null;){var Se=J.tag;if((Se===3||Se===4)&&(Se=J.stateNode.containerInfo,Se===k||Se.nodeType===8&&Se.parentNode===k))return;J=J.return}for(;ge!==null;){if(J=mc(ge),J===null)return;if(Se=J.tag,Se===5||Se===6){w=q=J;continue e}ge=ge.parentNode}}w=w.return}fa(function(){var He=q,ht=da(m),gt=[];e:{var ft=ck.get(a);if(ft!==void 0){var qt=Wt,$t=a;switch(a){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":qt=zn;break;case"focusin":$t="focus",qt=dt;break;case"focusout":$t="blur",qt=dt;break;case"beforeblur":case"afterblur":qt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qt=Dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qt=qe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qt=dx;break;case sk:case ok:case ak:qt=xt;break;case lk:qt=Vs;break;case"scroll":qt=lt;break;case"wheel":qt=Dm;break;case"copy":case"cut":case"paste":qt=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qt=ma}var Vt=(c&4)!==0,jr=!Vt&&a==="scroll",Fe=Vt?ft!==null?ft+"Capture":null:ft;Vt=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var vt=$e.stateNode;if($e.tag===5&&vt!==null&&($e=vt,Fe!==null&&(vt=Ki(Ce,Fe),vt!=null&&Vt.push(Hf(Ce,vt,$e)))),jr)break;Ce=Ce.return}0<Vt.length&&(ft=new qt(ft,$t,null,m,ht),gt.push({event:ft,listeners:Vt}))}}if(!(c&7)){e:{if(ft=a==="mouseover"||a==="pointerover",qt=a==="mouseout"||a==="pointerout",ft&&m!==fo&&($t=m.relatedTarget||m.fromElement)&&(mc($t)||$t[ga]))break e;if((qt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,qt?($t=m.relatedTarget||m.toElement,qt=He,$t=$t?mc($t):null,$t!==null&&(jr=Ws($t),$t!==jr||$t.tag!==5&&$t.tag!==6)&&($t=null)):(qt=null,$t=He),qt!==$t)){if(Vt=Dt,vt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(a==="pointerout"||a==="pointerover")&&(Vt=ma,vt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),jr=qt==null?ft:Ru(qt),$e=$t==null?ft:Ru($t),ft=new Vt(vt,Ce+"leave",qt,m,ht),ft.target=jr,ft.relatedTarget=$e,vt=null,mc(ht)===He&&(Vt=new Vt(Fe,Ce+"enter",$t,m,ht),Vt.target=$e,Vt.relatedTarget=jr,vt=Vt),jr=vt,qt&&$t)t:{for(Vt=qt,Fe=$t,Ce=0,$e=Vt;$e;$e=Cu($e))Ce++;for($e=0,vt=Fe;vt;vt=Cu(vt))$e++;for(;0<Ce-$e;)Vt=Cu(Vt),Ce--;for(;0<$e-Ce;)Fe=Cu(Fe),$e--;for(;Ce--;){if(Vt===Fe||Fe!==null&&Vt===Fe.alternate)break t;Vt=Cu(Vt),Fe=Cu(Fe)}Vt=null}else Vt=null;qt!==null&&hk(gt,ft,qt,Vt,!1),$t!==null&&jr!==null&&hk(gt,jr,$t,Vt,!0)}}e:{if(ft=He?Ru(He):window,qt=ft.nodeName&&ft.nodeName.toLowerCase(),qt==="select"||qt==="input"&&ft.type==="file")var Ht=MM;else if(QN(ft))if(GN)Ht=WM;else{Ht=BM;var en=$M}else(qt=ft.nodeName)&&qt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Ht=zM);if(Ht&&(Ht=Ht(a,He))){KN(gt,Ht,m,ht);break e}en&&en(a,ft,He),a==="focusout"&&(en=ft._wrapperState)&&en.controlled&&ft.type==="number"&&be(ft,"number",ft.value)}switch(en=He?Ru(He):window,a){case"focusin":(QN(en)||en.contentEditable==="true")&&(ku=en,bx=He,Wf=null);break;case"focusout":Wf=bx=ku=null;break;case"mousedown":vx=!0;break;case"contextmenu":case"mouseup":case"dragend":vx=!1,rk(gt,m,ht);break;case"selectionchange":if(HM)break;case"keydown":case"keyup":rk(gt,m,ht)}var tn;if(hx)e:{switch(a){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else Nu?UN(a,m)&&(cn="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(cn="onCompositionStart");cn&&(zN&&m.locale!=="ko"&&(Nu||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&Nu&&(tn=K()):(st=ht,ae="value"in st?st.value:st.textContent,Nu=!0)),en=zm(He,cn),0<en.length&&(cn=new Sr(cn,a,null,m,ht),gt.push({event:cn,listeners:en}),tn?cn.data=tn:(tn=HN(m),tn!==null&&(cn.data=tn)))),(tn=AM?PM(a,m):FM(a,m))&&(He=zm(He,"onBeforeInput"),0<He.length&&(ht=new Sr("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=tn))}fk(gt,c)})}function Hf(a,c,m){return{instance:a,listener:c,currentTarget:m}}function zm(a,c){for(var m=c+"Capture",w=[];a!==null;){var k=a,q=k.stateNode;k.tag===5&&q!==null&&(k=q,q=Ki(a,m),q!=null&&w.unshift(Hf(a,q,k)),q=Ki(a,c),q!=null&&w.push(Hf(a,q,k))),a=a.return}return w}function Cu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function hk(a,c,m,w,k){for(var q=c._reactName,J=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,k?(Se=Ki(m,q),Se!=null&&J.unshift(Hf(m,Se,ge))):k||(Se=Ki(m,q),Se!=null&&J.push(Hf(m,Se,ge)))),m=m.return}J.length!==0&&a.push({event:c,listeners:J})}var JM=/\r\n?/g,ZM=/\u0000|\uFFFD/g;function mk(a){return(typeof a=="string"?a:""+a).replace(JM,`
`).replace(ZM,"")}function Wm(a,c,m){if(c=mk(c),mk(a)!==c&&m)throw Error(n(425))}function Vm(){}var Nx=null,kx=null;function Ix(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Cx=typeof setTimeout=="function"?setTimeout:void 0,YM=typeof clearTimeout=="function"?clearTimeout:void 0,gk=typeof Promise=="function"?Promise:void 0,XM=typeof queueMicrotask=="function"?queueMicrotask:typeof gk<"u"?function(a){return gk.resolve(null).then(a).catch(e$)}:Cx;function e$(a){setTimeout(function(){throw a})}function Tx(a,c){var m=c,w=0;do{var k=m.nextSibling;if(a.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(w===0){a.removeChild(k),Te(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=k}while(m);Te(c)}function nl(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function yk(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),Bo="__reactFiber$"+Tu,Qf="__reactProps$"+Tu,ga="__reactContainer$"+Tu,Rx="__reactEvents$"+Tu,t$="__reactListeners$"+Tu,n$="__reactHandles$"+Tu;function mc(a){var c=a[Bo];if(c)return c;for(var m=a.parentNode;m;){if(c=m[ga]||m[Bo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=yk(a);a!==null;){if(m=a[Bo])return m;a=yk(a)}return c}a=m,m=a.parentNode}return null}function Kf(a){return a=a[Bo]||a[ga],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ru(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Um(a){return a[Qf]||null}var Ox=[],Ou=-1;function rl(a){return{current:a}}function cr(a){0>Ou||(a.current=Ox[Ou],Ox[Ou]=null,Ou--)}function nr(a,c){Ou++,Ox[Ou]=a.current,a.current=c}var il={},yi=rl(il),Ji=rl(!1),gc=il;function ju(a,c){var m=a.type.contextTypes;if(!m)return il;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var k={},q;for(q in m)k[q]=c[q];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=k),k}function Zi(a){return a=a.childContextTypes,a!=null}function Hm(){cr(Ji),cr(yi)}function bk(a,c,m){if(yi.current!==il)throw Error(n(168));nr(yi,c),nr(Ji,m)}function vk(a,c,m){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var k in w)if(!(k in c))throw Error(n(108,ze(a)||"Unknown",k));return oe({},m,w)}function Qm(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||il,gc=yi.current,nr(yi,a),nr(Ji,Ji.current),!0}function xk(a,c,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=vk(a,c,gc),w.__reactInternalMemoizedMergedChildContext=a,cr(Ji),cr(yi),nr(yi,a)):cr(Ji),nr(Ji,m)}var ya=null,Km=!1,jx=!1;function wk(a){ya===null?ya=[a]:ya.push(a)}function r$(a){Km=!0,wk(a)}function sl(){if(!jx&&ya!==null){jx=!0;var a=0,c=Mn;try{var m=ya;for(Mn=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}ya=null,Km=!1}catch(k){throw ya!==null&&(ya=ya.slice(a+1)),_u(dc,sl),k}finally{Mn=c,jx=!1}}return null}var qu=[],Au=0,Gm=null,Jm=0,Us=[],Hs=0,yc=null,ba=1,va="";function bc(a,c){qu[Au++]=Jm,qu[Au++]=Gm,Gm=a,Jm=c}function _k(a,c,m){Us[Hs++]=ba,Us[Hs++]=va,Us[Hs++]=yc,yc=a;var w=ba;a=va;var k=32-gi(w)-1;w&=~(1<<k),m+=1;var q=32-gi(c)+k;if(30<q){var J=k-k%5;q=(w&(1<<J)-1).toString(32),w>>=J,k-=J,ba=1<<32-gi(c)+k|m<<k|w,va=q+a}else ba=1<<q|m<<k|w,va=a}function qx(a){a.return!==null&&(bc(a,1),_k(a,1,0))}function Ax(a){for(;a===Gm;)Gm=qu[--Au],qu[Au]=null,Jm=qu[--Au],qu[Au]=null;for(;a===yc;)yc=Us[--Hs],Us[Hs]=null,va=Us[--Hs],Us[Hs]=null,ba=Us[--Hs],Us[Hs]=null}var gs=null,ys=null,fr=!1,ho=null;function Sk(a,c){var m=Js(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function Ek(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,gs=a,ys=nl(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,gs=a,ys=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=yc!==null?{id:ba,overflow:va}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=Js(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,gs=a,ys=null,!0):!1;default:return!1}}function Px(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Fx(a){if(fr){var c=ys;if(c){var m=c;if(!Ek(a,c)){if(Px(a))throw Error(n(418));c=nl(m.nextSibling);var w=gs;c&&Ek(a,c)?Sk(w,m):(a.flags=a.flags&-4097|2,fr=!1,gs=a)}}else{if(Px(a))throw Error(n(418));a.flags=a.flags&-4097|2,fr=!1,gs=a}}}function Nk(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;gs=a}function Zm(a){if(a!==gs)return!1;if(!fr)return Nk(a),fr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Ix(a.type,a.memoizedProps)),c&&(c=ys)){if(Px(a))throw kk(),Error(n(418));for(;c;)Sk(a,c),c=nl(c.nextSibling)}if(Nk(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){ys=nl(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}ys=null}}else ys=gs?nl(a.stateNode.nextSibling):null;return!0}function kk(){for(var a=ys;a;)a=nl(a.nextSibling)}function Pu(){ys=gs=null,fr=!1}function Dx(a){ho===null?ho=[a]:ho.push(a)}var i$=A.ReactCurrentBatchConfig;function Gf(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var k=w,q=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===q?c.ref:(c=function(J){var ge=k.refs;J===null?delete ge[q]:ge[q]=J},c._stringRef=q,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Ym(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Ik(a){var c=a._init;return c(a._payload)}function Ck(a){function c(Fe,Ce){if(a){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!a)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function k(Fe,Ce){return Fe=pl(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function q(Fe,Ce,$e){return Fe.index=$e,a?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function J(Fe){return a&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==6?(Ce=Cw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,vt){var Ht=$e.type;return Ht===W?ht(Fe,Ce,$e.props.children,vt,$e.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Z&&Ik(Ht)===Ce.type)?(vt=k(Ce,$e.props),vt.ref=Gf(Fe,Ce,$e),vt.return=Fe,vt):(vt=_g($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Gf(Fe,Ce,$e),vt.return=Fe,vt)}function He(Fe,Ce,$e,vt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=Tw($e,Fe.mode,vt),Ce.return=Fe,Ce):(Ce=k(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,vt,Ht){return Ce===null||Ce.tag!==7?(Ce=kc($e,Fe.mode,vt,Ht),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Cw(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case D:return $e=_g(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=Gf(Fe,null,Ce),$e.return=Fe,$e;case M:return Ce=Tw(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case Z:var vt=Ce._init;return gt(Fe,vt(Ce._payload),$e)}if(ke(Ce)||te(Ce))return Ce=kc(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;Ym(Fe,Ce)}return null}function ft(Fe,Ce,$e,vt){var Ht=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Ht!==null?null:ge(Fe,Ce,""+$e,vt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:return $e.key===Ht?Se(Fe,Ce,$e,vt):null;case M:return $e.key===Ht?He(Fe,Ce,$e,vt):null;case Z:return Ht=$e._init,ft(Fe,Ce,Ht($e._payload),vt)}if(ke($e)||te($e))return Ht!==null?null:ht(Fe,Ce,$e,vt,null);Ym(Fe,$e)}return null}function qt(Fe,Ce,$e,vt,Ht){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+vt,Ht);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case D:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,Se(Ce,Fe,vt,Ht);case M:return Fe=Fe.get(vt.key===null?$e:vt.key)||null,He(Ce,Fe,vt,Ht);case Z:var en=vt._init;return qt(Fe,Ce,$e,en(vt._payload),Ht)}if(ke(vt)||te(vt))return Fe=Fe.get($e)||null,ht(Ce,Fe,vt,Ht,null);Ym(Ce,vt)}return null}function $t(Fe,Ce,$e,vt){for(var Ht=null,en=null,tn=Ce,cn=Ce=0,oi=null;tn!==null&&cn<$e.length;cn++){tn.index>cn?(oi=tn,tn=null):oi=tn.sibling;var Dn=ft(Fe,tn,$e[cn],vt);if(Dn===null){tn===null&&(tn=oi);break}a&&tn&&Dn.alternate===null&&c(Fe,tn),Ce=q(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn,tn=oi}if(cn===$e.length)return m(Fe,tn),fr&&bc(Fe,cn),Ht;if(tn===null){for(;cn<$e.length;cn++)tn=gt(Fe,$e[cn],vt),tn!==null&&(Ce=q(tn,Ce,cn),en===null?Ht=tn:en.sibling=tn,en=tn);return fr&&bc(Fe,cn),Ht}for(tn=w(Fe,tn);cn<$e.length;cn++)oi=qt(tn,Fe,cn,$e[cn],vt),oi!==null&&(a&&oi.alternate!==null&&tn.delete(oi.key===null?cn:oi.key),Ce=q(oi,Ce,cn),en===null?Ht=oi:en.sibling=oi,en=oi);return a&&tn.forEach(function(hl){return c(Fe,hl)}),fr&&bc(Fe,cn),Ht}function Vt(Fe,Ce,$e,vt){var Ht=te($e);if(typeof Ht!="function")throw Error(n(150));if($e=Ht.call($e),$e==null)throw Error(n(151));for(var en=Ht=null,tn=Ce,cn=Ce=0,oi=null,Dn=$e.next();tn!==null&&!Dn.done;cn++,Dn=$e.next()){tn.index>cn?(oi=tn,tn=null):oi=tn.sibling;var hl=ft(Fe,tn,Dn.value,vt);if(hl===null){tn===null&&(tn=oi);break}a&&tn&&hl.alternate===null&&c(Fe,tn),Ce=q(hl,Ce,cn),en===null?Ht=hl:en.sibling=hl,en=hl,tn=oi}if(Dn.done)return m(Fe,tn),fr&&bc(Fe,cn),Ht;if(tn===null){for(;!Dn.done;cn++,Dn=$e.next())Dn=gt(Fe,Dn.value,vt),Dn!==null&&(Ce=q(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn);return fr&&bc(Fe,cn),Ht}for(tn=w(Fe,tn);!Dn.done;cn++,Dn=$e.next())Dn=qt(tn,Fe,cn,Dn.value,vt),Dn!==null&&(a&&Dn.alternate!==null&&tn.delete(Dn.key===null?cn:Dn.key),Ce=q(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn);return a&&tn.forEach(function(F$){return c(Fe,F$)}),fr&&bc(Fe,cn),Ht}function jr(Fe,Ce,$e,vt){if(typeof $e=="object"&&$e!==null&&$e.type===W&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:e:{for(var Ht=$e.key,en=Ce;en!==null;){if(en.key===Ht){if(Ht=$e.type,Ht===W){if(en.tag===7){m(Fe,en.sibling),Ce=k(en,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(en.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Z&&Ik(Ht)===en.type){m(Fe,en.sibling),Ce=k(en,$e.props),Ce.ref=Gf(Fe,en,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,en);break}else c(Fe,en);en=en.sibling}$e.type===W?(Ce=kc($e.props.children,Fe.mode,vt,$e.key),Ce.return=Fe,Fe=Ce):(vt=_g($e.type,$e.key,$e.props,null,Fe.mode,vt),vt.ref=Gf(Fe,Ce,$e),vt.return=Fe,Fe=vt)}return J(Fe);case M:e:{for(en=$e.key;Ce!==null;){if(Ce.key===en)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=k(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=Tw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce}return J(Fe);case Z:return en=$e._init,jr(Fe,Ce,en($e._payload),vt)}if(ke($e))return $t(Fe,Ce,$e,vt);if(te($e))return Vt(Fe,Ce,$e,vt);Ym(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=k(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=Cw($e,Fe.mode,vt),Ce.return=Fe,Fe=Ce),J(Fe)):m(Fe,Ce)}return jr}var Fu=Ck(!0),Tk=Ck(!1),Xm=rl(null),eg=null,Du=null,Lx=null;function Mx(){Lx=Du=eg=null}function $x(a){var c=Xm.current;cr(Xm),a._currentValue=c}function Bx(a,c,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===m)break;a=a.return}}function Lu(a,c){eg=a,Lx=Du=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(Yi=!0),a.firstContext=null)}function Qs(a){var c=a._currentValue;if(Lx!==a)if(a={context:a,memoizedValue:c,next:null},Du===null){if(eg===null)throw Error(n(308));Du=a,eg.dependencies={lanes:0,firstContext:a}}else Du=Du.next=a;return c}var vc=null;function zx(a){vc===null?vc=[a]:vc.push(a)}function Rk(a,c,m,w){var k=c.interleaved;return k===null?(m.next=m,zx(c)):(m.next=k.next,k.next=m),c.interleaved=m,xa(a,w)}function xa(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var ol=!1;function Wx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ok(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function wa(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function al(a,c,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,qn&2){var k=w.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),w.pending=c,xa(a,m)}return k=w.interleaved,k===null?(c.next=c,zx(w)):(c.next=k.next,k.next=c),w.interleaved=c,xa(a,m)}function tg(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Af(a,m)}}function jk(a,c){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var k=null,q=null;if(m=m.firstBaseUpdate,m!==null){do{var J={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};q===null?k=q=J:q=q.next=J,m=m.next}while(m!==null);q===null?k=q=c:q=q.next=c}else k=q=c;m={baseState:w.baseState,firstBaseUpdate:k,lastBaseUpdate:q,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function ng(a,c,m,w){var k=a.updateQueue;ol=!1;var q=k.firstBaseUpdate,J=k.lastBaseUpdate,ge=k.shared.pending;if(ge!==null){k.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,J===null?q=He:J.next=He,J=Se;var ht=a.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==J&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(q!==null){var gt=k.baseState;J=0,ht=He=Se=null,ge=q;do{var ft=ge.lane,qt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:qt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var $t=a,Vt=ge;switch(ft=c,qt=m,Vt.tag){case 1:if($t=Vt.payload,typeof $t=="function"){gt=$t.call(qt,gt,ft);break e}gt=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=Vt.payload,ft=typeof $t=="function"?$t.call(qt,gt,ft):$t,ft==null)break e;gt=oe({},gt,ft);break e;case 2:ol=!0}}ge.callback!==null&&ge.lane!==0&&(a.flags|=64,ft=k.effects,ft===null?k.effects=[ge]:ft.push(ge))}else qt={eventTime:qt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=qt,Se=gt):ht=ht.next=qt,J|=ft;if(ge=ge.next,ge===null){if(ge=k.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,k.lastBaseUpdate=ft,k.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),k.baseState=Se,k.firstBaseUpdate=He,k.lastBaseUpdate=ht,c=k.shared.interleaved,c!==null){k=c;do J|=k.lane,k=k.next;while(k!==c)}else q===null&&(k.shared.lanes=0);_c|=J,a.lanes=J,a.memoizedState=gt}}function qk(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],k=w.callback;if(k!==null){if(w.callback=null,w=m,typeof k!="function")throw Error(n(191,k));k.call(w)}}}var Jf={},zo=rl(Jf),Zf=rl(Jf),Yf=rl(Jf);function xc(a){if(a===Jf)throw Error(n(174));return a}function Vx(a,c){switch(nr(Yf,c),nr(Zf,a),nr(zo,Jf),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Gt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Gt(c,a)}cr(zo),nr(zo,c)}function Mu(){cr(zo),cr(Zf),cr(Yf)}function Ak(a){xc(Yf.current);var c=xc(zo.current),m=Gt(c,a.type);c!==m&&(nr(Zf,a),nr(zo,m))}function Ux(a){Zf.current===a&&(cr(zo),cr(Zf))}var Er=rl(0);function rg(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Hx=[];function Qx(){for(var a=0;a<Hx.length;a++)Hx[a]._workInProgressVersionPrimary=null;Hx.length=0}var ig=A.ReactCurrentDispatcher,Kx=A.ReactCurrentBatchConfig,wc=0,Nr=null,ei=null,ii=null,sg=!1,Xf=!1,ep=0,s$=0;function bi(){throw Error(n(321))}function Gx(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!po(a[m],c[m]))return!1;return!0}function Jx(a,c,m,w,k,q){if(wc=q,Nr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ig.current=a===null||a.memoizedState===null?c$:u$,a=m(w,k),Xf){q=0;do{if(Xf=!1,ep=0,25<=q)throw Error(n(301));q+=1,ii=ei=null,c.updateQueue=null,ig.current=d$,a=m(w,k)}while(Xf)}if(ig.current=lg,c=ei!==null&&ei.next!==null,wc=0,ii=ei=Nr=null,sg=!1,c)throw Error(n(300));return a}function Zx(){var a=ep!==0;return ep=0,a}function Wo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Nr.memoizedState=ii=a:ii=ii.next=a,ii}function Ks(){if(ei===null){var a=Nr.alternate;a=a!==null?a.memoizedState:null}else a=ei.next;var c=ii===null?Nr.memoizedState:ii.next;if(c!==null)ii=c,ei=a;else{if(a===null)throw Error(n(310));ei=a,a={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},ii===null?Nr.memoizedState=ii=a:ii=ii.next=a}return ii}function tp(a,c){return typeof c=="function"?c(a):c}function Yx(a){var c=Ks(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=ei,k=w.baseQueue,q=m.pending;if(q!==null){if(k!==null){var J=k.next;k.next=q.next,q.next=J}w.baseQueue=k=q,m.pending=null}if(k!==null){q=k.next,w=w.baseState;var ge=J=null,Se=null,He=q;do{var ht=He.lane;if((wc&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:a(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,J=w):Se=Se.next=gt,Nr.lanes|=ht,_c|=ht}He=He.next}while(He!==null&&He!==q);Se===null?J=w:Se.next=ge,po(w,c.memoizedState)||(Yi=!0),c.memoizedState=w,c.baseState=J,c.baseQueue=Se,m.lastRenderedState=w}if(a=m.interleaved,a!==null){k=a;do q=k.lane,Nr.lanes|=q,_c|=q,k=k.next;while(k!==a)}else k===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function Xx(a){var c=Ks(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,k=m.pending,q=c.memoizedState;if(k!==null){m.pending=null;var J=k=k.next;do q=a(q,J.action),J=J.next;while(J!==k);po(q,c.memoizedState)||(Yi=!0),c.memoizedState=q,c.baseQueue===null&&(c.baseState=q),m.lastRenderedState=q}return[q,w]}function Pk(){}function Fk(a,c){var m=Nr,w=Ks(),k=c(),q=!po(w.memoizedState,k);if(q&&(w.memoizedState=k,Yi=!0),w=w.queue,ew(Mk.bind(null,m,w,a),[a]),w.getSnapshot!==c||q||ii!==null&&ii.memoizedState.tag&1){if(m.flags|=2048,np(9,Lk.bind(null,m,w,k,c),void 0,null),si===null)throw Error(n(349));wc&30||Dk(m,c,k)}return k}function Dk(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=Nr.updateQueue,c===null?(c={lastEffect:null,stores:null},Nr.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function Lk(a,c,m,w){c.value=m,c.getSnapshot=w,$k(c)&&Bk(a)}function Mk(a,c,m){return m(function(){$k(c)&&Bk(a)})}function $k(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!po(a,m)}catch{return!0}}function Bk(a){var c=xa(a,1);c!==null&&bo(c,a,1,-1)}function zk(a){var c=Wo();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tp,lastRenderedState:a},c.queue=a,a=a.dispatch=l$.bind(null,Nr,a),[c.memoizedState,a]}function np(a,c,m,w){return a={tag:a,create:c,destroy:m,deps:w,next:null},c=Nr.updateQueue,c===null?(c={lastEffect:null,stores:null},Nr.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,c.lastEffect=a)),a}function Wk(){return Ks().memoizedState}function og(a,c,m,w){var k=Wo();Nr.flags|=a,k.memoizedState=np(1|c,m,void 0,w===void 0?null:w)}function ag(a,c,m,w){var k=Ks();w=w===void 0?null:w;var q=void 0;if(ei!==null){var J=ei.memoizedState;if(q=J.destroy,w!==null&&Gx(w,J.deps)){k.memoizedState=np(c,m,q,w);return}}Nr.flags|=a,k.memoizedState=np(1|c,m,q,w)}function Vk(a,c){return og(8390656,8,a,c)}function ew(a,c){return ag(2048,8,a,c)}function Uk(a,c){return ag(4,2,a,c)}function Hk(a,c){return ag(4,4,a,c)}function Qk(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Kk(a,c,m){return m=m!=null?m.concat([a]):null,ag(4,4,Qk.bind(null,c,a),m)}function tw(){}function Gk(a,c){var m=Ks();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Gx(c,w[1])?w[0]:(m.memoizedState=[a,c],a)}function Jk(a,c){var m=Ks();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&Gx(c,w[1])?w[0]:(a=a(),m.memoizedState=[a,c],a)}function Zk(a,c,m){return wc&21?(po(m,c)||(m=Pm(),Nr.lanes|=m,_c|=m,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,Yi=!0),a.memoizedState=m)}function o$(a,c){var m=Mn;Mn=m!==0&&4>m?m:4,a(!0);var w=Kx.transition;Kx.transition={};try{a(!1),c()}finally{Mn=m,Kx.transition=w}}function Yk(){return Ks().memoizedState}function a$(a,c,m){var w=dl(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},Xk(a))eI(c,m);else if(m=Rk(a,c,m,w),m!==null){var k=ji();bo(m,a,w,k),tI(m,c,w)}}function l$(a,c,m){var w=dl(a),k={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(Xk(a))eI(c,k);else{var q=a.alternate;if(a.lanes===0&&(q===null||q.lanes===0)&&(q=c.lastRenderedReducer,q!==null))try{var J=c.lastRenderedState,ge=q(J,m);if(k.hasEagerState=!0,k.eagerState=ge,po(ge,J)){var Se=c.interleaved;Se===null?(k.next=k,zx(c)):(k.next=Se.next,Se.next=k),c.interleaved=k;return}}catch{}finally{}m=Rk(a,c,k,w),m!==null&&(k=ji(),bo(m,a,w,k),tI(m,c,w))}}function Xk(a){var c=a.alternate;return a===Nr||c!==null&&c===Nr}function eI(a,c){Xf=sg=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function tI(a,c,m){if(m&4194240){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Af(a,m)}}var lg={readContext:Qs,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},c$={readContext:Qs,useCallback:function(a,c){return Wo().memoizedState=[a,c===void 0?null:c],a},useContext:Qs,useEffect:Vk,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,og(4194308,4,Qk.bind(null,c,a),m)},useLayoutEffect:function(a,c){return og(4194308,4,a,c)},useInsertionEffect:function(a,c){return og(4,2,a,c)},useMemo:function(a,c){var m=Wo();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var w=Wo();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=a$.bind(null,Nr,a),[w.memoizedState,a]},useRef:function(a){var c=Wo();return a={current:a},c.memoizedState=a},useState:zk,useDebugValue:tw,useDeferredValue:function(a){return Wo().memoizedState=a},useTransition:function(){var a=zk(!1),c=a[0];return a=o$.bind(null,a[1]),Wo().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var w=Nr,k=Wo();if(fr){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),si===null)throw Error(n(349));wc&30||Dk(w,c,m)}k.memoizedState=m;var q={value:m,getSnapshot:c};return k.queue=q,Vk(Mk.bind(null,w,q,a),[a]),w.flags|=2048,np(9,Lk.bind(null,w,q,m,c),void 0,null),m},useId:function(){var a=Wo(),c=si.identifierPrefix;if(fr){var m=va,w=ba;m=(w&~(1<<32-gi(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=ep++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=s$++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},u$={readContext:Qs,useCallback:Gk,useContext:Qs,useEffect:ew,useImperativeHandle:Kk,useInsertionEffect:Uk,useLayoutEffect:Hk,useMemo:Jk,useReducer:Yx,useRef:Wk,useState:function(){return Yx(tp)},useDebugValue:tw,useDeferredValue:function(a){var c=Ks();return Zk(c,ei.memoizedState,a)},useTransition:function(){var a=Yx(tp)[0],c=Ks().memoizedState;return[a,c]},useMutableSource:Pk,useSyncExternalStore:Fk,useId:Yk,unstable_isNewReconciler:!1},d$={readContext:Qs,useCallback:Gk,useContext:Qs,useEffect:ew,useImperativeHandle:Kk,useInsertionEffect:Uk,useLayoutEffect:Hk,useMemo:Jk,useReducer:Xx,useRef:Wk,useState:function(){return Xx(tp)},useDebugValue:tw,useDeferredValue:function(a){var c=Ks();return ei===null?c.memoizedState=a:Zk(c,ei.memoizedState,a)},useTransition:function(){var a=Xx(tp)[0],c=Ks().memoizedState;return[a,c]},useMutableSource:Pk,useSyncExternalStore:Fk,useId:Yk,unstable_isNewReconciler:!1};function mo(a,c){if(a&&a.defaultProps){c=oe({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function nw(a,c,m,w){c=a.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var cg={isMounted:function(a){return(a=a._reactInternals)?Ws(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var w=ji(),k=dl(a),q=wa(w,k);q.payload=c,m!=null&&(q.callback=m),c=al(a,q,k),c!==null&&(bo(c,a,k,w),tg(c,a,k))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var w=ji(),k=dl(a),q=wa(w,k);q.tag=1,q.payload=c,m!=null&&(q.callback=m),c=al(a,q,k),c!==null&&(bo(c,a,k,w),tg(c,a,k))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=ji(),w=dl(a),k=wa(m,w);k.tag=2,c!=null&&(k.callback=c),c=al(a,k,w),c!==null&&(bo(c,a,w,m),tg(c,a,w))}};function nI(a,c,m,w,k,q,J){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,q,J):c.prototype&&c.prototype.isPureReactComponent?!zf(m,w)||!zf(k,q):!0}function rI(a,c,m){var w=!1,k=il,q=c.contextType;return typeof q=="object"&&q!==null?q=Qs(q):(k=Zi(c)?gc:yi.current,w=c.contextTypes,q=(w=w!=null)?ju(a,k):il),c=new c(m,q),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=cg,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=q),c}function iI(a,c,m,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==a&&cg.enqueueReplaceState(c,c.state,null)}function rw(a,c,m,w){var k=a.stateNode;k.props=m,k.state=a.memoizedState,k.refs={},Wx(a);var q=c.contextType;typeof q=="object"&&q!==null?k.context=Qs(q):(q=Zi(c)?gc:yi.current,k.context=ju(a,q)),k.state=a.memoizedState,q=c.getDerivedStateFromProps,typeof q=="function"&&(nw(a,c,q,m),k.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&cg.enqueueReplaceState(k,k.state,null),ng(a,m,k,w),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function $u(a,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var k=m}catch(q){k=`
Error generating stack: `+q.message+`
`+q.stack}return{value:a,source:c,stack:k,digest:null}}function iw(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function sw(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var f$=typeof WeakMap=="function"?WeakMap:Map;function sI(a,c,m){m=wa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){gg||(gg=!0,xw=w),sw(a,c)},m}function oI(a,c,m){m=wa(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var k=c.value;m.payload=function(){return w(k)},m.callback=function(){sw(a,c)}}var q=a.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(m.callback=function(){sw(a,c),typeof w!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var J=c.stack;this.componentDidCatch(c.value,{componentStack:J!==null?J:""})}),m}function aI(a,c,m){var w=a.pingCache;if(w===null){w=a.pingCache=new f$;var k=new Set;w.set(c,k)}else k=w.get(c),k===void 0&&(k=new Set,w.set(c,k));k.has(m)||(k.add(m),a=k$.bind(null,a,c,m),c.then(a,a))}function lI(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function cI(a,c,m,w,k){return a.mode&1?(a.flags|=65536,a.lanes=k,a):(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=wa(-1,1),c.tag=2,al(m,c,1))),m.lanes|=1),a)}var p$=A.ReactCurrentOwner,Yi=!1;function Oi(a,c,m,w){c.child=a===null?Tk(c,null,m,w):Fu(c,a.child,m,w)}function uI(a,c,m,w,k){m=m.render;var q=c.ref;return Lu(c,k),w=Jx(a,c,m,w,q,k),m=Zx(),a!==null&&!Yi?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,_a(a,c,k)):(fr&&m&&qx(c),c.flags|=1,Oi(a,c,w,k),c.child)}function dI(a,c,m,w,k){if(a===null){var q=m.type;return typeof q=="function"&&!Iw(q)&&q.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=q,fI(a,c,q,w,k)):(a=_g(m.type,null,w,c,c.mode,k),a.ref=c.ref,a.return=c,c.child=a)}if(q=a.child,!(a.lanes&k)){var J=q.memoizedProps;if(m=m.compare,m=m!==null?m:zf,m(J,w)&&a.ref===c.ref)return _a(a,c,k)}return c.flags|=1,a=pl(q,w),a.ref=c.ref,a.return=c,c.child=a}function fI(a,c,m,w,k){if(a!==null){var q=a.memoizedProps;if(zf(q,w)&&a.ref===c.ref)if(Yi=!1,c.pendingProps=w=q,(a.lanes&k)!==0)a.flags&131072&&(Yi=!0);else return c.lanes=a.lanes,_a(a,c,k)}return ow(a,c,m,w,k)}function pI(a,c,m){var w=c.pendingProps,k=w.children,q=a!==null?a.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(zu,bs),bs|=m;else{if(!(m&0x40000000))return a=q!==null?q.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,nr(zu,bs),bs|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=q!==null?q.baseLanes:m,nr(zu,bs),bs|=w}else q!==null?(w=q.baseLanes|m,c.memoizedState=null):w=m,nr(zu,bs),bs|=w;return Oi(a,c,k,m),c.child}function hI(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function ow(a,c,m,w,k){var q=Zi(m)?gc:yi.current;return q=ju(c,q),Lu(c,k),m=Jx(a,c,m,w,q,k),w=Zx(),a!==null&&!Yi?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,_a(a,c,k)):(fr&&w&&qx(c),c.flags|=1,Oi(a,c,m,k),c.child)}function mI(a,c,m,w,k){if(Zi(m)){var q=!0;Qm(c)}else q=!1;if(Lu(c,k),c.stateNode===null)dg(a,c),rI(c,m,w),rw(c,m,w,k),w=!0;else if(a===null){var J=c.stateNode,ge=c.memoizedProps;J.props=ge;var Se=J.context,He=m.contextType;typeof He=="object"&&He!==null?He=Qs(He):(He=Zi(m)?gc:yi.current,He=ju(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof J.getSnapshotBeforeUpdate=="function";gt||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&iI(c,J,w,He),ol=!1;var ft=c.memoizedState;J.state=ft,ng(c,w,J,k),Se=c.memoizedState,ge!==w||ft!==Se||Ji.current||ol?(typeof ht=="function"&&(nw(c,m,ht,w),Se=c.memoizedState),(ge=ol||nI(c,m,ge,w,ft,Se,He))?(gt||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(c.flags|=4194308)):(typeof J.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),J.props=w,J.state=Se,J.context=He,w=ge):(typeof J.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{J=c.stateNode,Ok(a,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:mo(c.type,ge),J.props=He,gt=c.pendingProps,ft=J.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=Qs(Se):(Se=Zi(m)?gc:yi.current,Se=ju(c,Se));var qt=m.getDerivedStateFromProps;(ht=typeof qt=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&iI(c,J,w,Se),ol=!1,ft=c.memoizedState,J.state=ft,ng(c,w,J,k);var $t=c.memoizedState;ge!==gt||ft!==$t||Ji.current||ol?(typeof qt=="function"&&(nw(c,m,qt,w),$t=c.memoizedState),(He=ol||nI(c,m,He,w,ft,$t,Se)||!1)?(ht||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(w,$t,Se),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(w,$t,Se)),typeof J.componentDidUpdate=="function"&&(c.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof J.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=$t),J.props=w,J.state=$t,J.context=Se,w=He):(typeof J.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),w=!1)}return aw(a,c,m,w,q,k)}function aw(a,c,m,w,k,q){hI(a,c);var J=(c.flags&128)!==0;if(!w&&!J)return k&&xk(c,m,!1),_a(a,c,q);w=c.stateNode,p$.current=c;var ge=J&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&J?(c.child=Fu(c,a.child,null,q),c.child=Fu(c,null,ge,q)):Oi(a,c,ge,q),c.memoizedState=w.state,k&&xk(c,m,!0),c.child}function gI(a){var c=a.stateNode;c.pendingContext?bk(a,c.pendingContext,c.pendingContext!==c.context):c.context&&bk(a,c.context,!1),Vx(a,c.containerInfo)}function yI(a,c,m,w,k){return Pu(),Dx(k),c.flags|=256,Oi(a,c,m,w),c.child}var lw={dehydrated:null,treeContext:null,retryLane:0};function cw(a){return{baseLanes:a,cachePool:null,transitions:null}}function bI(a,c,m){var w=c.pendingProps,k=Er.current,q=!1,J=(c.flags&128)!==0,ge;if((ge=J)||(ge=a!==null&&a.memoizedState===null?!1:(k&2)!==0),ge?(q=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),nr(Er,k&1),a===null)return Fx(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(J=w.children,a=w.fallback,q?(w=c.mode,q=c.child,J={mode:"hidden",children:J},!(w&1)&&q!==null?(q.childLanes=0,q.pendingProps=J):q=Sg(J,w,0,null),a=kc(a,w,m,null),q.return=c,a.return=c,q.sibling=a,c.child=q,c.child.memoizedState=cw(m),c.memoizedState=lw,a):uw(c,J));if(k=a.memoizedState,k!==null&&(ge=k.dehydrated,ge!==null))return h$(a,c,J,w,ge,k,m);if(q){q=w.fallback,J=c.mode,k=a.child,ge=k.sibling;var Se={mode:"hidden",children:w.children};return!(J&1)&&c.child!==k?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=pl(k,Se),w.subtreeFlags=k.subtreeFlags&0xe00000),ge!==null?q=pl(ge,q):(q=kc(q,J,m,null),q.flags|=2),q.return=c,w.return=c,w.sibling=q,c.child=w,w=q,q=c.child,J=a.child.memoizedState,J=J===null?cw(m):{baseLanes:J.baseLanes|m,cachePool:null,transitions:J.transitions},q.memoizedState=J,q.childLanes=a.childLanes&~m,c.memoizedState=lw,w}return q=a.child,a=q.sibling,w=pl(q,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=w,c.memoizedState=null,w}function uw(a,c){return c=Sg({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function ug(a,c,m,w){return w!==null&&Dx(w),Fu(c,a.child,null,m),a=uw(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function h$(a,c,m,w,k,q,J){if(m)return c.flags&256?(c.flags&=-257,w=iw(Error(n(422))),ug(a,c,J,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(q=w.fallback,k=c.mode,w=Sg({mode:"visible",children:w.children},k,0,null),q=kc(q,k,J,null),q.flags|=2,w.return=c,q.return=c,w.sibling=q,c.child=w,c.mode&1&&Fu(c,a.child,null,J),c.child.memoizedState=cw(J),c.memoizedState=lw,q);if(!(c.mode&1))return ug(a,c,J,null);if(k.data==="$!"){if(w=k.nextSibling&&k.nextSibling.dataset,w)var ge=w.dgst;return w=ge,q=Error(n(419)),w=iw(q,w,void 0),ug(a,c,J,w)}if(ge=(J&a.childLanes)!==0,Yi||ge){if(w=si,w!==null){switch(J&-J){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:k=32;break;case 0x20000000:k=0x10000000;break;default:k=0}k=k&(w.suspendedLanes|J)?0:k,k!==0&&k!==q.retryLane&&(q.retryLane=k,xa(a,k),bo(w,a,k,-1))}return kw(),w=iw(Error(n(421))),ug(a,c,J,w)}return k.data==="$?"?(c.flags|=128,c.child=a.child,c=I$.bind(null,a),k._reactRetry=c,null):(a=q.treeContext,ys=nl(k.nextSibling),gs=c,fr=!0,ho=null,a!==null&&(Us[Hs++]=ba,Us[Hs++]=va,Us[Hs++]=yc,ba=a.id,va=a.overflow,yc=c),c=uw(c,w.children),c.flags|=4096,c)}function vI(a,c,m){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),Bx(a.return,c,m)}function dw(a,c,m,w,k){var q=a.memoizedState;q===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:k}:(q.isBackwards=c,q.rendering=null,q.renderingStartTime=0,q.last=w,q.tail=m,q.tailMode=k)}function xI(a,c,m){var w=c.pendingProps,k=w.revealOrder,q=w.tail;if(Oi(a,c,w.children,m),w=Er.current,w&2)w=w&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vI(a,m,c);else if(a.tag===19)vI(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(nr(Er,w),!(c.mode&1))c.memoizedState=null;else switch(k){case"forwards":for(m=c.child,k=null;m!==null;)a=m.alternate,a!==null&&rg(a)===null&&(k=m),m=m.sibling;m=k,m===null?(k=c.child,c.child=null):(k=m.sibling,m.sibling=null),dw(c,!1,k,m,q);break;case"backwards":for(m=null,k=c.child,c.child=null;k!==null;){if(a=k.alternate,a!==null&&rg(a)===null){c.child=k;break}a=k.sibling,k.sibling=m,m=k,k=a}dw(c,!0,m,null,q);break;case"together":dw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function dg(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function _a(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),_c|=c.lanes,!(m&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=pl(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=pl(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function m$(a,c,m){switch(c.tag){case 3:gI(c),Pu();break;case 5:Ak(c);break;case 1:Zi(c.type)&&Qm(c);break;case 4:Vx(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,k=c.memoizedProps.value;nr(Xm,w._currentValue),w._currentValue=k;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(nr(Er,Er.current&1),c.flags|=128,null):m&c.child.childLanes?bI(a,c,m):(nr(Er,Er.current&1),a=_a(a,c,m),a!==null?a.sibling:null);nr(Er,Er.current&1);break;case 19:if(w=(m&c.childLanes)!==0,a.flags&128){if(w)return xI(a,c,m);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),nr(Er,Er.current),w)break;return null;case 22:case 23:return c.lanes=0,pI(a,c,m)}return _a(a,c,m)}var wI,fw,_I,SI;wI=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},fw=function(){},_I=function(a,c,m,w){var k=a.memoizedProps;if(k!==w){a=c.stateNode,xc(zo.current);var q=null;switch(m){case"input":k=_t(a,k),w=_t(a,w),q=[];break;case"select":k=oe({},k,{value:void 0}),w=oe({},w,{value:void 0}),q=[];break;case"textarea":k=Ue(a,k),w=Ue(a,w),q=[];break;default:typeof k.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Vm)}Hi(m,w);var J;m=null;for(He in k)if(!w.hasOwnProperty(He)&&k.hasOwnProperty(He)&&k[He]!=null)if(He==="style"){var ge=k[He];for(J in ge)ge.hasOwnProperty(J)&&(m||(m={}),m[J]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?q||(q=[]):(q=q||[]).push(He,null));for(He in w){var Se=w[He];if(ge=k?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(J in ge)!ge.hasOwnProperty(J)||Se&&Se.hasOwnProperty(J)||(m||(m={}),m[J]="");for(J in Se)Se.hasOwnProperty(J)&&ge[J]!==Se[J]&&(m||(m={}),m[J]=Se[J])}else m||(q||(q=[]),q.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(q=q||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(q=q||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&lr("scroll",a),q||ge===Se||(q=[])):(q=q||[]).push(He,Se))}m&&(q=q||[]).push("style",m);var He=q;(c.updateQueue=He)&&(c.flags|=4)}},SI=function(a,c,m,w){m!==w&&(c.flags|=4)};function rp(a,c){if(!fr)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function vi(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(c)for(var k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags&0xe00000,w|=k.flags&0xe00000,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags,w|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=w,a.childLanes=m,c}function g$(a,c,m){var w=c.pendingProps;switch(Ax(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vi(c),null;case 1:return Zi(c.type)&&Hm(),vi(c),null;case 3:return w=c.stateNode,Mu(),cr(Ji),cr(yi),Qx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Zm(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,ho!==null&&(Sw(ho),ho=null))),fw(a,c),vi(c),null;case 5:Ux(c);var k=xc(Yf.current);if(m=c.type,a!==null&&c.stateNode!=null)_I(a,c,m,w,k),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return vi(c),null}if(a=xc(zo.current),Zm(c)){w=c.stateNode,m=c.type;var q=c.memoizedProps;switch(w[Bo]=c,w[Qf]=q,a=(c.mode&1)!==0,m){case"dialog":lr("cancel",w),lr("close",w);break;case"iframe":case"object":case"embed":lr("load",w);break;case"video":case"audio":for(k=0;k<Vf.length;k++)lr(Vf[k],w);break;case"source":lr("error",w);break;case"img":case"image":case"link":lr("error",w),lr("load",w);break;case"details":lr("toggle",w);break;case"input":Tt(w,q),lr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!q.multiple},lr("invalid",w);break;case"textarea":rt(w,q),lr("invalid",w)}Hi(m,q),k=null;for(var J in q)if(q.hasOwnProperty(J)){var ge=q[J];J==="children"?typeof ge=="string"?w.textContent!==ge&&(q.suppressHydrationWarning!==!0&&Wm(w.textContent,ge,a),k=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(q.suppressHydrationWarning!==!0&&Wm(w.textContent,ge,a),k=["children",""+ge]):i.hasOwnProperty(J)&&ge!=null&&J==="onScroll"&&lr("scroll",w)}switch(m){case"input":Xe(w),xe(w,q,!0);break;case"textarea":Xe(w),ut(w);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(w.onclick=Vm)}w=k,c.updateQueue=w,w!==null&&(c.flags|=4)}else{J=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Kt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=J.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=J.createElement(m,{is:w.is}):(a=J.createElement(m),m==="select"&&(J=a,w.multiple?J.multiple=!0:w.size&&(J.size=w.size))):a=J.createElementNS(a,m),a[Bo]=c,a[Qf]=w,wI(a,c,!1,!1),c.stateNode=a;e:{switch(J=Qi(m,w),m){case"dialog":lr("cancel",a),lr("close",a),k=w;break;case"iframe":case"object":case"embed":lr("load",a),k=w;break;case"video":case"audio":for(k=0;k<Vf.length;k++)lr(Vf[k],a);k=w;break;case"source":lr("error",a),k=w;break;case"img":case"image":case"link":lr("error",a),lr("load",a),k=w;break;case"details":lr("toggle",a),k=w;break;case"input":Tt(a,w),k=_t(a,w),lr("invalid",a);break;case"option":k=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},k=oe({},w,{value:void 0}),lr("invalid",a);break;case"textarea":rt(a,w),k=Ue(a,w),lr("invalid",a);break;default:k=w}Hi(m,k),ge=k;for(q in ge)if(ge.hasOwnProperty(q)){var Se=ge[q];q==="style"?Jt(a,Se):q==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&or(a,Se)):q==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Ln(a,Se):typeof Se=="number"&&Ln(a,""+Se):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?Se!=null&&q==="onScroll"&&lr("scroll",a):Se!=null&&O(a,q,Se,J))}switch(m){case"input":Xe(a),xe(a,w,!1);break;case"textarea":Xe(a),ut(a);break;case"option":w.value!=null&&a.setAttribute("value",""+Oe(w.value));break;case"select":a.multiple=!!w.multiple,q=w.value,q!=null?Ae(a,!!w.multiple,q,!1):w.defaultValue!=null&&Ae(a,!!w.multiple,w.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Vm)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return vi(c),null;case 6:if(a&&c.stateNode!=null)SI(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=xc(Yf.current),xc(zo.current),Zm(c)){if(w=c.stateNode,m=c.memoizedProps,w[Bo]=c,(q=w.nodeValue!==m)&&(a=gs,a!==null))switch(a.tag){case 3:Wm(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Wm(w.nodeValue,m,(a.mode&1)!==0)}q&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Bo]=c,c.stateNode=w}return vi(c),null;case 13:if(cr(Er),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(fr&&ys!==null&&c.mode&1&&!(c.flags&128))kk(),Pu(),c.flags|=98560,q=!1;else if(q=Zm(c),w!==null&&w.dehydrated!==null){if(a===null){if(!q)throw Error(n(318));if(q=c.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(n(317));q[Bo]=c}else Pu(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;vi(c),q=!1}else ho!==null&&(Sw(ho),ho=null),q=!0;if(!q)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(a===null||Er.current&1?ti===0&&(ti=3):kw())),c.updateQueue!==null&&(c.flags|=4),vi(c),null);case 4:return Mu(),fw(a,c),a===null&&Uf(c.stateNode.containerInfo),vi(c),null;case 10:return $x(c.type._context),vi(c),null;case 17:return Zi(c.type)&&Hm(),vi(c),null;case 19:if(cr(Er),q=c.memoizedState,q===null)return vi(c),null;if(w=(c.flags&128)!==0,J=q.rendering,J===null)if(w)rp(q,!1);else{if(ti!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(J=rg(a),J!==null){for(c.flags|=128,rp(q,!1),w=J.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)q=m,a=w,q.flags&=0xe00002,J=q.alternate,J===null?(q.childLanes=0,q.lanes=a,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=J.childLanes,q.lanes=J.lanes,q.child=J.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=J.memoizedProps,q.memoizedState=J.memoizedState,q.updateQueue=J.updateQueue,q.type=J.type,a=J.dependencies,q.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return nr(Er,Er.current&1|2),c.child}a=a.sibling}q.tail!==null&&ar()>Wu&&(c.flags|=128,w=!0,rp(q,!1),c.lanes=4194304)}else{if(!w)if(a=rg(J),a!==null){if(c.flags|=128,w=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),rp(q,!0),q.tail===null&&q.tailMode==="hidden"&&!J.alternate&&!fr)return vi(c),null}else 2*ar()-q.renderingStartTime>Wu&&m!==0x40000000&&(c.flags|=128,w=!0,rp(q,!1),c.lanes=4194304);q.isBackwards?(J.sibling=c.child,c.child=J):(m=q.last,m!==null?m.sibling=J:c.child=J,q.last=J)}return q.tail!==null?(c=q.tail,q.rendering=c,q.tail=c.sibling,q.renderingStartTime=ar(),c.sibling=null,m=Er.current,nr(Er,w?m&1|2:m&1),c):(vi(c),null);case 22:case 23:return Nw(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?bs&0x40000000&&(vi(c),c.subtreeFlags&6&&(c.flags|=8192)):vi(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function y$(a,c){switch(Ax(c),c.tag){case 1:return Zi(c.type)&&Hm(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Mu(),cr(Ji),cr(yi),Qx(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Ux(c),null;case 13:if(cr(Er),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Pu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return cr(Er),null;case 4:return Mu(),null;case 10:return $x(c.type._context),null;case 22:case 23:return Nw(),null;case 24:return null;default:return null}}var fg=!1,xi=!1,b$=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Bu(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Tr(a,c,w)}else m.current=null}function pw(a,c,m){try{m()}catch(w){Tr(a,c,w)}}var EI=!1;function v$(a,c){if(Nx=Ge,a=nk(),yx(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var k=w.anchorOffset,q=w.focusNode;w=w.focusOffset;try{m.nodeType,q.nodeType}catch{m=null;break e}var J=0,ge=-1,Se=-1,He=0,ht=0,gt=a,ft=null;t:for(;;){for(var qt;gt!==m||k!==0&&gt.nodeType!==3||(ge=J+k),gt!==q||w!==0&&gt.nodeType!==3||(Se=J+w),gt.nodeType===3&&(J+=gt.nodeValue.length),(qt=gt.firstChild)!==null;)ft=gt,gt=qt;for(;;){if(gt===a)break t;if(ft===m&&++He===k&&(ge=J),ft===q&&++ht===w&&(Se=J),(qt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=qt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(kx={focusedElem:a,selectionRange:m},Ge=!1,Mt=c;Mt!==null;)if(c=Mt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Mt=a;else for(;Mt!==null;){c=Mt;try{var $t=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if($t!==null){var Vt=$t.memoizedProps,jr=$t.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Vt:mo(c.type,Vt),jr);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(vt){Tr(c,c.return,vt)}if(a=c.sibling,a!==null){a.return=c.return,Mt=a;break}Mt=c.return}return $t=EI,EI=!1,$t}function ip(a,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var k=w=w.next;do{if((k.tag&a)===a){var q=k.destroy;k.destroy=void 0,q!==void 0&&pw(c,m,q)}k=k.next}while(k!==w)}}function pg(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function hw(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function NI(a){var c=a.alternate;c!==null&&(a.alternate=null,NI(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Bo],delete c[Qf],delete c[Rx],delete c[t$],delete c[n$])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function kI(a){return a.tag===5||a.tag===3||a.tag===4}function II(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||kI(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function mw(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Vm));else if(w!==4&&(a=a.child,a!==null))for(mw(a,c,m),a=a.sibling;a!==null;)mw(a,c,m),a=a.sibling}function gw(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(gw(a,c,m),a=a.sibling;a!==null;)gw(a,c,m),a=a.sibling}var ci=null,go=!1;function ll(a,c,m){for(m=m.child;m!==null;)CI(a,c,m),m=m.sibling}function CI(a,c,m){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(Ya,m)}catch{}switch(m.tag){case 5:xi||Bu(m,c);case 6:var w=ci,k=go;ci=null,ll(a,c,m),ci=w,go=k,ci!==null&&(go?(a=ci,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):ci.removeChild(m.stateNode));break;case 18:ci!==null&&(go?(a=ci,m=m.stateNode,a.nodeType===8?Tx(a.parentNode,m):a.nodeType===1&&Tx(a,m),Te(a)):Tx(ci,m.stateNode));break;case 4:w=ci,k=go,ci=m.stateNode.containerInfo,go=!0,ll(a,c,m),ci=w,go=k;break;case 0:case 11:case 14:case 15:if(!xi&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){k=w=w.next;do{var q=k,J=q.destroy;q=q.tag,J!==void 0&&(q&2||q&4)&&pw(m,c,J),k=k.next}while(k!==w)}ll(a,c,m);break;case 1:if(!xi&&(Bu(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){Tr(m,c,ge)}ll(a,c,m);break;case 21:ll(a,c,m);break;case 22:m.mode&1?(xi=(w=xi)||m.memoizedState!==null,ll(a,c,m),xi=w):ll(a,c,m);break;default:ll(a,c,m)}}function TI(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new b$),c.forEach(function(w){var k=C$.bind(null,a,w);m.has(w)||(m.add(w),w.then(k,k))})}}function yo(a,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var k=m[w];try{var q=a,J=c,ge=J;e:for(;ge!==null;){switch(ge.tag){case 5:ci=ge.stateNode,go=!1;break e;case 3:ci=ge.stateNode.containerInfo,go=!0;break e;case 4:ci=ge.stateNode.containerInfo,go=!0;break e}ge=ge.return}if(ci===null)throw Error(n(160));CI(q,J,k),ci=null,go=!1;var Se=k.alternate;Se!==null&&(Se.return=null),k.return=null}catch(He){Tr(k,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)RI(c,a),c=c.sibling}function RI(a,c){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(yo(c,a),Vo(a),w&4){try{ip(3,a,a.return),pg(3,a)}catch(Vt){Tr(a,a.return,Vt)}try{ip(5,a,a.return)}catch(Vt){Tr(a,a.return,Vt)}}break;case 1:yo(c,a),Vo(a),w&512&&m!==null&&Bu(m,m.return);break;case 5:if(yo(c,a),Vo(a),w&512&&m!==null&&Bu(m,m.return),a.flags&32){var k=a.stateNode;try{Ln(k,"")}catch(Vt){Tr(a,a.return,Vt)}}if(w&4&&(k=a.stateNode,k!=null)){var q=a.memoizedProps,J=m!==null?m.memoizedProps:q,ge=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{ge==="input"&&q.type==="radio"&&q.name!=null&&Ut(k,q),Qi(ge,J);var He=Qi(ge,q);for(J=0;J<Se.length;J+=2){var ht=Se[J],gt=Se[J+1];ht==="style"?Jt(k,gt):ht==="dangerouslySetInnerHTML"?or(k,gt):ht==="children"?Ln(k,gt):O(k,ht,gt,He)}switch(ge){case"input":rn(k,q);break;case"textarea":Me(k,q);break;case"select":var ft=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!q.multiple;var qt=q.value;qt!=null?Ae(k,!!q.multiple,qt,!1):ft!==!!q.multiple&&(q.defaultValue!=null?Ae(k,!!q.multiple,q.defaultValue,!0):Ae(k,!!q.multiple,q.multiple?[]:"",!1))}k[Qf]=q}catch(Vt){Tr(a,a.return,Vt)}}break;case 6:if(yo(c,a),Vo(a),w&4){if(a.stateNode===null)throw Error(n(162));k=a.stateNode,q=a.memoizedProps;try{k.nodeValue=q}catch(Vt){Tr(a,a.return,Vt)}}break;case 3:if(yo(c,a),Vo(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(c.containerInfo)}catch(Vt){Tr(a,a.return,Vt)}break;case 4:yo(c,a),Vo(a);break;case 13:yo(c,a),Vo(a),k=a.child,k.flags&8192&&(q=k.memoizedState!==null,k.stateNode.isHidden=q,!q||k.alternate!==null&&k.alternate.memoizedState!==null||(vw=ar())),w&4&&TI(a);break;case 22:if(ht=m!==null&&m.memoizedState!==null,a.mode&1?(xi=(He=xi)||ht,yo(c,a),xi=He):yo(c,a),Vo(a),w&8192){if(He=a.memoizedState!==null,(a.stateNode.isHidden=He)&&!ht&&a.mode&1)for(Mt=a,ht=a.child;ht!==null;){for(gt=Mt=ht;Mt!==null;){switch(ft=Mt,qt=ft.child,ft.tag){case 0:case 11:case 14:case 15:ip(4,ft,ft.return);break;case 1:Bu(ft,ft.return);var $t=ft.stateNode;if(typeof $t.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,$t.props=c.memoizedProps,$t.state=c.memoizedState,$t.componentWillUnmount()}catch(Vt){Tr(w,m,Vt)}}break;case 5:Bu(ft,ft.return);break;case 22:if(ft.memoizedState!==null){qI(gt);continue}}qt!==null?(qt.return=ft,Mt=qt):qI(gt)}ht=ht.sibling}e:for(ht=null,gt=a;;){if(gt.tag===5){if(ht===null){ht=gt;try{k=gt.stateNode,He?(q=k.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,J=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=_r("display",J))}catch(Vt){Tr(a,a.return,Vt)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Vt){Tr(a,a.return,Vt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===a)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===a)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===a)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:yo(c,a),Vo(a),w&4&&TI(a);break;case 21:break;default:yo(c,a),Vo(a)}}function Vo(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(kI(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var k=w.stateNode;w.flags&32&&(Ln(k,""),w.flags&=-33);var q=II(a);gw(a,q,k);break;case 3:case 4:var J=w.stateNode.containerInfo,ge=II(a);mw(a,ge,J);break;default:throw Error(n(161))}}catch(Se){Tr(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function x$(a,c,m){Mt=a,OI(a)}function OI(a,c,m){for(var w=(a.mode&1)!==0;Mt!==null;){var k=Mt,q=k.child;if(k.tag===22&&w){var J=k.memoizedState!==null||fg;if(!J){var ge=k.alternate,Se=ge!==null&&ge.memoizedState!==null||xi;ge=fg;var He=xi;if(fg=J,(xi=Se)&&!He)for(Mt=k;Mt!==null;)J=Mt,Se=J.child,J.tag===22&&J.memoizedState!==null?AI(k):Se!==null?(Se.return=J,Mt=Se):AI(k);for(;q!==null;)Mt=q,OI(q),q=q.sibling;Mt=k,fg=ge,xi=He}jI(a)}else k.subtreeFlags&8772&&q!==null?(q.return=k,Mt=q):jI(a)}}function jI(a){for(;Mt!==null;){var c=Mt;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:xi||pg(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!xi)if(m===null)w.componentDidMount();else{var k=c.elementType===c.type?m.memoizedProps:mo(c.type,m.memoizedProps);w.componentDidUpdate(k,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var q=c.updateQueue;q!==null&&qk(c,q,w);break;case 3:var J=c.updateQueue;if(J!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}qk(c,J,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xi||c.flags&512&&hw(c)}catch(ft){Tr(c,c.return,ft)}}if(c===a){Mt=null;break}if(m=c.sibling,m!==null){m.return=c.return,Mt=m;break}Mt=c.return}}function qI(a){for(;Mt!==null;){var c=Mt;if(c===a){Mt=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Mt=m;break}Mt=c.return}}function AI(a){for(;Mt!==null;){var c=Mt;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{pg(4,c)}catch(Se){Tr(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var k=c.return;try{w.componentDidMount()}catch(Se){Tr(c,k,Se)}}var q=c.return;try{hw(c)}catch(Se){Tr(c,q,Se)}break;case 5:var J=c.return;try{hw(c)}catch(Se){Tr(c,J,Se)}}}catch(Se){Tr(c,c.return,Se)}if(c===a){Mt=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,Mt=ge;break}Mt=c.return}}var w$=Math.ceil,hg=A.ReactCurrentDispatcher,yw=A.ReactCurrentOwner,Gs=A.ReactCurrentBatchConfig,qn=0,si=null,Qr=null,ui=0,bs=0,zu=rl(0),ti=0,sp=null,_c=0,mg=0,bw=0,op=null,Xi=null,vw=0,Wu=1/0,Sa=null,gg=!1,xw=null,cl=null,yg=!1,ul=null,bg=0,ap=0,ww=null,vg=-1,xg=0;function ji(){return qn&6?ar():vg!==-1?vg:vg=ar()}function dl(a){return a.mode&1?qn&2&&ui!==0?ui&-ui:i$.transition!==null?(xg===0&&(xg=Pm()),xg):(a=Mn,a!==0||(a=window.event,a=a===void 0?16:Ee(a.type)),a):1}function bo(a,c,m,w){if(50<ap)throw ap=0,ww=null,Error(n(185));pc(a,m,w),(!(qn&2)||a!==si)&&(a===si&&(!(qn&2)&&(mg|=m),ti===4&&fl(a,ui)),es(a,w),m===1&&qn===0&&!(c.mode&1)&&(Wu=ar()+500,Km&&sl()))}function es(a,c){var m=a.callbackNode;cx(a,c);var w=el(a,a===si?ui:0);if(w===0)m!==null&&uc(m),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(m!=null&&uc(m),c===1)a.tag===0?r$(FI.bind(null,a)):wk(FI.bind(null,a)),XM(function(){!(qn&6)&&sl()}),m=null;else{switch(Fm(w)){case 1:m=dc;break;case 4:m=Eu;break;case 16:m=Za;break;case 0x20000000:m=fc;break;default:m=Za}m=VI(m,PI.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function PI(a,c){if(vg=-1,xg=0,qn&6)throw Error(n(327));var m=a.callbackNode;if(Vu()&&a.callbackNode!==m)return null;var w=el(a,a===si?ui:0);if(w===0)return null;if(w&30||w&a.expiredLanes||c)c=wg(a,w);else{c=w;var k=qn;qn|=2;var q=LI();(si!==a||ui!==c)&&(Sa=null,Wu=ar()+500,Ec(a,c));do try{E$();break}catch(ge){DI(a,ge)}while(!0);Mx(),hg.current=q,qn=k,Qr!==null?c=0:(si=null,ui=0,c=ti)}if(c!==0){if(c===2&&(k=jf(a),k!==0&&(w=k,c=_w(a,k))),c===1)throw m=sp,Ec(a,0),fl(a,w),es(a,ar()),m;if(c===6)fl(a,w);else{if(k=a.current.alternate,!(w&30)&&!_$(k)&&(c=wg(a,w),c===2&&(q=jf(a),q!==0&&(w=q,c=_w(a,q))),c===1))throw m=sp,Ec(a,0),fl(a,w),es(a,ar()),m;switch(a.finishedWork=k,a.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:Nc(a,Xi,Sa);break;case 3:if(fl(a,w),(w&0x7c00000)===w&&(c=vw+500-ar(),10<c)){if(el(a,0)!==0)break;if(k=a.suspendedLanes,(k&w)!==w){ji(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=Cx(Nc.bind(null,a,Xi,Sa),c);break}Nc(a,Xi,Sa);break;case 4:if(fl(a,w),(w&4194240)===w)break;for(c=a.eventTimes,k=-1;0<w;){var J=31-gi(w);q=1<<J,J=c[J],J>k&&(k=J),w&=~q}if(w=k,w=ar()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*w$(w/1960))-w,10<w){a.timeoutHandle=Cx(Nc.bind(null,a,Xi,Sa),w);break}Nc(a,Xi,Sa);break;case 5:Nc(a,Xi,Sa);break;default:throw Error(n(329))}}}return es(a,ar()),a.callbackNode===m?PI.bind(null,a):null}function _w(a,c){var m=op;return a.current.memoizedState.isDehydrated&&(Ec(a,c).flags|=256),a=wg(a,c),a!==2&&(c=Xi,Xi=m,c!==null&&Sw(c)),a}function Sw(a){Xi===null?Xi=a:Xi.push.apply(Xi,a)}function _$(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var k=m[w],q=k.getSnapshot;k=k.value;try{if(!po(q(),k))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fl(a,c){for(c&=~bw,c&=~mg,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-gi(c),w=1<<m;a[m]=-1,c&=~w}}function FI(a){if(qn&6)throw Error(n(327));Vu();var c=el(a,0);if(!(c&1))return es(a,ar()),null;var m=wg(a,c);if(a.tag!==0&&m===2){var w=jf(a);w!==0&&(c=w,m=_w(a,w))}if(m===1)throw m=sp,Ec(a,0),fl(a,c),es(a,ar()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Nc(a,Xi,Sa),es(a,ar()),null}function Ew(a,c){var m=qn;qn|=1;try{return a(c)}finally{qn=m,qn===0&&(Wu=ar()+500,Km&&sl())}}function Sc(a){ul!==null&&ul.tag===0&&!(qn&6)&&Vu();var c=qn;qn|=1;var m=Gs.transition,w=Mn;try{if(Gs.transition=null,Mn=1,a)return a()}finally{Mn=w,Gs.transition=m,qn=c,!(qn&6)&&sl()}}function Nw(){bs=zu.current,cr(zu)}function Ec(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,YM(m)),Qr!==null)for(m=Qr.return;m!==null;){var w=m;switch(Ax(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Hm();break;case 3:Mu(),cr(Ji),cr(yi),Qx();break;case 5:Ux(w);break;case 4:Mu();break;case 13:cr(Er);break;case 19:cr(Er);break;case 10:$x(w.type._context);break;case 22:case 23:Nw()}m=m.return}if(si=a,Qr=a=pl(a.current,null),ui=bs=c,ti=0,sp=null,bw=mg=_c=0,Xi=op=null,vc!==null){for(c=0;c<vc.length;c++)if(m=vc[c],w=m.interleaved,w!==null){m.interleaved=null;var k=w.next,q=m.pending;if(q!==null){var J=q.next;q.next=k,w.next=J}m.pending=w}vc=null}return a}function DI(a,c){do{var m=Qr;try{if(Mx(),ig.current=lg,sg){for(var w=Nr.memoizedState;w!==null;){var k=w.queue;k!==null&&(k.pending=null),w=w.next}sg=!1}if(wc=0,ii=ei=Nr=null,Xf=!1,ep=0,yw.current=null,m===null||m.return===null){ti=1,sp=c,Qr=null;break}e:{var q=a,J=m.return,ge=m,Se=c;if(c=ui,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var qt=lI(J);if(qt!==null){qt.flags&=-257,cI(qt,J,ge,q,c),qt.mode&1&&aI(q,He,c),c=qt,Se=He;var $t=c.updateQueue;if($t===null){var Vt=new Set;Vt.add(Se),c.updateQueue=Vt}else $t.add(Se);break e}else{if(!(c&1)){aI(q,He,c),kw();break e}Se=Error(n(426))}}else if(fr&&ge.mode&1){var jr=lI(J);if(jr!==null){!(jr.flags&65536)&&(jr.flags|=256),cI(jr,J,ge,q,c),Dx($u(Se,ge));break e}}q=Se=$u(Se,ge),ti!==4&&(ti=2),op===null?op=[q]:op.push(q),q=J;do{switch(q.tag){case 3:q.flags|=65536,c&=-c,q.lanes|=c;var Fe=sI(q,Se,c);jk(q,Fe);break e;case 1:ge=Se;var Ce=q.type,$e=q.stateNode;if(!(q.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(cl===null||!cl.has($e)))){q.flags|=65536,c&=-c,q.lanes|=c;var vt=oI(q,ge,c);jk(q,vt);break e}}q=q.return}while(q!==null)}$I(m)}catch(Ht){c=Ht,Qr===m&&m!==null&&(Qr=m=m.return);continue}break}while(!0)}function LI(){var a=hg.current;return hg.current=lg,a===null?lg:a}function kw(){(ti===0||ti===3||ti===2)&&(ti=4),si===null||!(_c&0xfffffff)&&!(mg&0xfffffff)||fl(si,ui)}function wg(a,c){var m=qn;qn|=2;var w=LI();(si!==a||ui!==c)&&(Sa=null,Ec(a,c));do try{S$();break}catch(k){DI(a,k)}while(!0);if(Mx(),qn=m,hg.current=w,Qr!==null)throw Error(n(261));return si=null,ui=0,ti}function S$(){for(;Qr!==null;)MI(Qr)}function E$(){for(;Qr!==null&&!Su();)MI(Qr)}function MI(a){var c=WI(a.alternate,a,bs);a.memoizedProps=a.pendingProps,c===null?$I(a):Qr=c,yw.current=null}function $I(a){var c=a;do{var m=c.alternate;if(a=c.return,c.flags&32768){if(m=y$(m,c),m!==null){m.flags&=32767,Qr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ti=6,Qr=null;return}}else if(m=g$(m,c,bs),m!==null){Qr=m;return}if(c=c.sibling,c!==null){Qr=c;return}Qr=c=a}while(c!==null);ti===0&&(ti=5)}function Nc(a,c,m){var w=Mn,k=Gs.transition;try{Gs.transition=null,Mn=1,N$(a,c,m,w)}finally{Gs.transition=k,Mn=w}return null}function N$(a,c,m,w){do Vu();while(ul!==null);if(qn&6)throw Error(n(327));m=a.finishedWork;var k=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var q=m.lanes|m.childLanes;if(ux(a,q),a===si&&(Qr=si=null,ui=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||yg||(yg=!0,VI(Za,function(){return Vu(),null})),q=(m.flags&15990)!==0,m.subtreeFlags&15990||q){q=Gs.transition,Gs.transition=null;var J=Mn;Mn=1;var ge=qn;qn|=4,yw.current=null,v$(a,m),RI(m,a),UM(kx),Ge=!!Nx,kx=Nx=null,a.current=m,x$(m),Nf(),qn=ge,Mn=J,Gs.transition=q}else a.current=m;if(yg&&(yg=!1,ul=a,bg=k),q=a.pendingLanes,q===0&&(cl=null),Cf(m.stateNode),es(a,ar()),c!==null)for(w=a.onRecoverableError,m=0;m<c.length;m++)k=c[m],w(k.value,{componentStack:k.stack,digest:k.digest});if(gg)throw gg=!1,a=xw,xw=null,a;return bg&1&&a.tag!==0&&Vu(),q=a.pendingLanes,q&1?a===ww?ap++:(ap=0,ww=a):ap=0,sl(),null}function Vu(){if(ul!==null){var a=Fm(bg),c=Gs.transition,m=Mn;try{if(Gs.transition=null,Mn=16>a?16:a,ul===null)var w=!1;else{if(a=ul,ul=null,bg=0,qn&6)throw Error(n(331));var k=qn;for(qn|=4,Mt=a.current;Mt!==null;){var q=Mt,J=q.child;if(Mt.flags&16){var ge=q.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for(Mt=He;Mt!==null;){var ht=Mt;switch(ht.tag){case 0:case 11:case 15:ip(8,ht,q)}var gt=ht.child;if(gt!==null)gt.return=ht,Mt=gt;else for(;Mt!==null;){ht=Mt;var ft=ht.sibling,qt=ht.return;if(NI(ht),ht===He){Mt=null;break}if(ft!==null){ft.return=qt,Mt=ft;break}Mt=qt}}}var $t=q.alternate;if($t!==null){var Vt=$t.child;if(Vt!==null){$t.child=null;do{var jr=Vt.sibling;Vt.sibling=null,Vt=jr}while(Vt!==null)}}Mt=q}}if(q.subtreeFlags&2064&&J!==null)J.return=q,Mt=J;else e:for(;Mt!==null;){if(q=Mt,q.flags&2048)switch(q.tag){case 0:case 11:case 15:ip(9,q,q.return)}var Fe=q.sibling;if(Fe!==null){Fe.return=q.return,Mt=Fe;break e}Mt=q.return}}var Ce=a.current;for(Mt=Ce;Mt!==null;){J=Mt;var $e=J.child;if(J.subtreeFlags&2064&&$e!==null)$e.return=J,Mt=$e;else e:for(J=Ce;Mt!==null;){if(ge=Mt,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:pg(9,ge)}}catch(Ht){Tr(ge,ge.return,Ht)}if(ge===J){Mt=null;break e}var vt=ge.sibling;if(vt!==null){vt.return=ge.return,Mt=vt;break e}Mt=ge.return}}if(qn=k,sl(),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(Ya,a)}catch{}w=!0}return w}finally{Mn=m,Gs.transition=c}}return!1}function BI(a,c,m){c=$u(m,c),c=sI(a,c,1),a=al(a,c,1),c=ji(),a!==null&&(pc(a,1,c),es(a,c))}function Tr(a,c,m){if(a.tag===3)BI(a,a,m);else for(;c!==null;){if(c.tag===3){BI(c,a,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(cl===null||!cl.has(w))){a=$u(m,a),a=oI(c,a,1),c=al(c,a,1),a=ji(),c!==null&&(pc(c,1,a),es(c,a));break}}c=c.return}}function k$(a,c,m){var w=a.pingCache;w!==null&&w.delete(c),c=ji(),a.pingedLanes|=a.suspendedLanes&m,si===a&&(ui&m)===m&&(ti===4||ti===3&&(ui&0x7c00000)===ui&&500>ar()-vw?Ec(a,0):bw|=m),es(a,c)}function zI(a,c){c===0&&(a.mode&1?(c=Xa,Xa<<=1,!(Xa&0x7c00000)&&(Xa=4194304)):c=1);var m=ji();a=xa(a,c),a!==null&&(pc(a,c,m),es(a,m))}function I$(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),zI(a,m)}function C$(a,c){var m=0;switch(a.tag){case 13:var w=a.stateNode,k=a.memoizedState;k!==null&&(m=k.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),zI(a,m)}var WI;WI=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||Ji.current)Yi=!0;else{if(!(a.lanes&m)&&!(c.flags&128))return Yi=!1,m$(a,c,m);Yi=!!(a.flags&131072)}else Yi=!1,fr&&c.flags&1048576&&_k(c,Jm,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;dg(a,c),a=c.pendingProps;var k=ju(c,yi.current);Lu(c,m),k=Jx(null,c,w,a,k,m);var q=Zx();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Zi(w)?(q=!0,Qm(c)):q=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Wx(c),k.updater=cg,c.stateNode=k,k._reactInternals=c,rw(c,w,a,m),c=aw(null,c,w,!0,q,m)):(c.tag=0,fr&&q&&qx(c),Oi(null,c,k,m),c=c.child),c;case 16:w=c.elementType;e:{switch(dg(a,c),a=c.pendingProps,k=w._init,w=k(w._payload),c.type=w,k=c.tag=R$(w),a=mo(w,a),k){case 0:c=ow(null,c,w,a,m);break e;case 1:c=mI(null,c,w,a,m);break e;case 11:c=uI(null,c,w,a,m);break e;case 14:c=dI(null,c,w,mo(w.type,a),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:mo(w,k),ow(a,c,w,k,m);case 1:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:mo(w,k),mI(a,c,w,k,m);case 3:e:{if(gI(c),a===null)throw Error(n(387));w=c.pendingProps,q=c.memoizedState,k=q.element,Ok(a,c),ng(c,w,null,m);var J=c.memoizedState;if(w=J.element,q.isDehydrated)if(q={element:w,isDehydrated:!1,cache:J.cache,pendingSuspenseBoundaries:J.pendingSuspenseBoundaries,transitions:J.transitions},c.updateQueue.baseState=q,c.memoizedState=q,c.flags&256){k=$u(Error(n(423)),c),c=yI(a,c,w,m,k);break e}else if(w!==k){k=$u(Error(n(424)),c),c=yI(a,c,w,m,k);break e}else for(ys=nl(c.stateNode.containerInfo.firstChild),gs=c,fr=!0,ho=null,m=Tk(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Pu(),w===k){c=_a(a,c,m);break e}Oi(a,c,w,m)}c=c.child}return c;case 5:return Ak(c),a===null&&Fx(c),w=c.type,k=c.pendingProps,q=a!==null?a.memoizedProps:null,J=k.children,Ix(w,k)?J=null:q!==null&&Ix(w,q)&&(c.flags|=32),hI(a,c),Oi(a,c,J,m),c.child;case 6:return a===null&&Fx(c),null;case 13:return bI(a,c,m);case 4:return Vx(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=Fu(c,null,w,m):Oi(a,c,w,m),c.child;case 11:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:mo(w,k),uI(a,c,w,k,m);case 7:return Oi(a,c,c.pendingProps,m),c.child;case 8:return Oi(a,c,c.pendingProps.children,m),c.child;case 12:return Oi(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,k=c.pendingProps,q=c.memoizedProps,J=k.value,nr(Xm,w._currentValue),w._currentValue=J,q!==null)if(po(q.value,J)){if(q.children===k.children&&!Ji.current){c=_a(a,c,m);break e}}else for(q=c.child,q!==null&&(q.return=c);q!==null;){var ge=q.dependencies;if(ge!==null){J=q.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(q.tag===1){Se=wa(-1,m&-m),Se.tag=2;var He=q.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}q.lanes|=m,Se=q.alternate,Se!==null&&(Se.lanes|=m),Bx(q.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(q.tag===10)J=q.type===c.type?null:q.child;else if(q.tag===18){if(J=q.return,J===null)throw Error(n(341));J.lanes|=m,ge=J.alternate,ge!==null&&(ge.lanes|=m),Bx(J,m,c),J=q.sibling}else J=q.child;if(J!==null)J.return=q;else for(J=q;J!==null;){if(J===c){J=null;break}if(q=J.sibling,q!==null){q.return=J.return,J=q;break}J=J.return}q=J}Oi(a,c,k.children,m),c=c.child}return c;case 9:return k=c.type,w=c.pendingProps.children,Lu(c,m),k=Qs(k),w=w(k),c.flags|=1,Oi(a,c,w,m),c.child;case 14:return w=c.type,k=mo(w,c.pendingProps),k=mo(w.type,k),dI(a,c,w,k,m);case 15:return fI(a,c,c.type,c.pendingProps,m);case 17:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:mo(w,k),dg(a,c),c.tag=1,Zi(w)?(a=!0,Qm(c)):a=!1,Lu(c,m),rI(c,w,k),rw(c,w,k,m),aw(null,c,w,!0,a,m);case 19:return xI(a,c,m);case 22:return pI(a,c,m)}throw Error(n(156,c.tag))};function VI(a,c){return _u(a,c)}function T$(a,c,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(a,c,m,w){return new T$(a,c,m,w)}function Iw(a){return a=a.prototype,!(!a||!a.isReactComponent)}function R$(a){if(typeof a=="function")return Iw(a)?1:0;if(a!=null){if(a=a.$$typeof,a===V)return 11;if(a===ee)return 14}return 2}function pl(a,c){var m=a.alternate;return m===null?(m=Js(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&0xe00000,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function _g(a,c,m,w,k,q){var J=2;if(w=a,typeof a=="function")Iw(a)&&(J=1);else if(typeof a=="string")J=5;else e:switch(a){case W:return kc(m.children,k,q,c);case P:J=8,k|=8;break;case j:return a=Js(12,m,c,k|2),a.elementType=j,a.lanes=q,a;case U:return a=Js(13,m,c,k),a.elementType=U,a.lanes=q,a;case z:return a=Js(19,m,c,k),a.elementType=z,a.lanes=q,a;case le:return Sg(m,k,q,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case L:J=10;break e;case F:J=9;break e;case V:J=11;break e;case ee:J=14;break e;case Z:J=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Js(J,m,c,k),c.elementType=a,c.type=w,c.lanes=q,c}function kc(a,c,m,w){return a=Js(7,a,w,c),a.lanes=m,a}function Sg(a,c,m,w){return a=Js(22,a,w,c),a.elementType=le,a.lanes=m,a.stateNode={isHidden:!1},a}function Cw(a,c,m){return a=Js(6,a,null,c),a.lanes=m,a}function Tw(a,c,m){return c=Js(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function O$(a,c,m,w,k){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qf(0),this.expirationTimes=qf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qf(0),this.identifierPrefix=w,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Rw(a,c,m,w,k,q,J,ge,Se){return a=new O$(a,c,m,ge,Se),c===1?(c=1,q===!0&&(c|=8)):c=0,q=Js(3,null,null,c),a.current=q,q.stateNode=a,q.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wx(q),a}function j$(a,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:w==null?null:""+w,children:a,containerInfo:c,implementation:m}}function UI(a){if(!a)return il;a=a._reactInternals;e:{if(Ws(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Zi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(Zi(m))return vk(a,m,c)}return c}function HI(a,c,m,w,k,q,J,ge,Se){return a=Rw(m,w,!0,a,k,q,J,ge,Se),a.context=UI(null),m=a.current,w=ji(),k=dl(m),q=wa(w,k),q.callback=c??null,al(m,q,k),a.current.lanes=k,pc(a,k,w),es(a,w),a}function Eg(a,c,m,w){var k=c.current,q=ji(),J=dl(k);return m=UI(m),c.context===null?c.context=m:c.pendingContext=m,c=wa(q,J),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=al(k,c,J),a!==null&&(bo(a,k,J,q),tg(a,k,J)),J}function Ng(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function QI(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function Ow(a,c){QI(a,c),(a=a.alternate)&&QI(a,c)}var KI=typeof reportError=="function"?reportError:function(a){console.error(a)};function jw(a){this._internalRoot=a}kg.prototype.render=jw.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));Eg(a,c,null,null)},kg.prototype.unmount=jw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Sc(function(){Eg(null,a,null,null)}),c[ga]=null}};function kg(a){this._internalRoot=a}kg.prototype.unstable_scheduleHydration=function(a){if(a){var c=hc();a={blockedOn:null,target:a,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,a),m===0&&Be(a)}};function qw(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Ig(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function GI(){}function q$(a,c,m,w,k){if(k){if(typeof w=="function"){var q=w;w=function(){var He=Ng(J);q.call(He)}}var J=HI(c,w,a,0,null,!1,!1,"",GI);return a._reactRootContainer=J,a[ga]=J.current,Uf(a.nodeType===8?a.parentNode:a),Sc(),J}for(;k=a.lastChild;)a.removeChild(k);if(typeof w=="function"){var ge=w;w=function(){var He=Ng(Se);ge.call(He)}}var Se=Rw(a,0,!1,null,null,!1,!1,"",GI);return a._reactRootContainer=Se,a[ga]=Se.current,Uf(a.nodeType===8?a.parentNode:a),Sc(function(){Eg(c,Se,m,w)}),Se}function Cg(a,c,m,w,k){var q=m._reactRootContainer;if(q){var J=q;if(typeof k=="function"){var ge=k;k=function(){var Se=Ng(J);ge.call(Se)}}Eg(c,J,a,k)}else J=q$(m,c,a,k,w);return Ng(J)}Pf=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ri(c.pendingLanes);m!==0&&(Af(c,m|1),es(c,ar()),!(qn&6)&&(Wu=ar()+500,sl()))}break;case 13:Sc(function(){var w=xa(a,1);if(w!==null){var k=ji();bo(w,a,1,k)}}),Ow(a,1)}},he=function(a){if(a.tag===13){var c=xa(a,0x8000000);if(c!==null){var m=ji();bo(c,a,0x8000000,m)}Ow(a,0x8000000)}},Ff=function(a){if(a.tag===13){var c=dl(a),m=xa(a,c);if(m!==null){var w=ji();bo(m,a,c,w)}Ow(a,c)}},hc=function(){return Mn},Df=function(a,c){var m=Mn;try{return Mn=a,c()}finally{Mn=m}},ac=function(a,c,m){switch(c){case"input":if(rn(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==a&&w.form===a.form){var k=Um(w);if(!k)throw Error(n(90));Ve(w),rn(w,k)}}}break;case"textarea":Me(a,m);break;case"select":c=m.value,c!=null&&Ae(a,!!m.multiple,c,!1)}},mu=Ew,gu=Sc;var A$={usingClientEntryPoint:!1,Events:[Kf,Ru,Um,un,hu,Ew]},lp={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P$={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=xu(a),a===null?null:a.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tg.isDisabled&&Tg.supportsFiber)try{Ya=Tg.inject(P$),Gi=Tg}catch{}}return ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A$,ts.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qw(c))throw Error(n(200));return j$(a,c,null,m)},ts.createRoot=function(a,c){if(!qw(a))throw Error(n(299));var m=!1,w="",k=KI;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Rw(a,1,!1,null,null,m,!1,w,k),a[ga]=c.current,Uf(a.nodeType===8?a.parentNode:a),new jw(c)},ts.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=xu(c),a=a===null?null:a.stateNode,a},ts.flushSync=function(a){return Sc(a)},ts.hydrate=function(a,c,m){if(!Ig(c))throw Error(n(200));return Cg(null,a,c,!0,m)},ts.hydrateRoot=function(a,c,m){if(!qw(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,k=!1,q="",J=KI;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(q=m.identifierPrefix),m.onRecoverableError!==void 0&&(J=m.onRecoverableError)),c=HI(c,null,a,1,m??null,k,!1,q,J),a[ga]=c.current,Uf(a),w)for(a=0;a<w.length;a++)m=w[a],k=m._getVersion,k=k(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,k]:c.mutableSourceEagerHydrationData.push(m,k);return new kg(c)},ts.render=function(a,c,m){if(!Ig(c))throw Error(n(200));return Cg(null,a,c,!1,m)},ts.unmountComponentAtNode=function(a){if(!Ig(a))throw Error(n(40));return a._reactRootContainer?(Sc(function(){Cg(null,null,a,!1,function(){a._reactRootContainer=null,a[ga]=null})}),!0):!1},ts.unstable_batchedUpdates=Ew,ts.unstable_renderSubtreeIntoContainer=function(a,c,m,w){if(!Ig(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Cg(a,c,m,!1,w)},ts.version="18.3.1-next-f1338f8080-20240426",ts}var kC;function D3(){if(kC)return Kw.exports;kC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kw.exports=g4(),Kw.exports}var lv=D3();const y4="Error preloading route! ☝️";function b4(t,e){const n=Fo(),[r,i]=Q.useState(!1),s=Q.useRef(!1),o=VB(e),{activeProps:l=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:d,to:p,preload:h,preloadDelay:b,hashScrollIntoView:x,replace:_,startTransition:N,resetScroll:I,viewTransition:R,children:T,target:O,disabled:A,style:D,className:M,onClick:W,onFocus:P,onMouseEnter:j,onMouseLeave:L,onTouchStart:F,ignoreBlocker:V,...U}=t,{params:z,search:ee,hash:Z,state:le,mask:se,reloadDocument:te,...oe}=U,X=Q.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ue=Mi({select:ke=>ke.location.search,structuralSharing:!0});t={from:Wl({strict:!1,select:ke=>ke.pathname}),...t};const ye=Q.useMemo(()=>n.buildLocation(t),[n,t,ue]),we=Q.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ne=b??n.options.defaultPreloadDelay??0,ze=Mi({select:ke=>{if(d?.exact){if(!HB(ke.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=nb(ke.location.pathname,n.basepath).split("/");if(!nb(ye.pathname,n.basepath).split("/").every((Me,ut)=>Me===Ae[ut]))return!1}return(d?.includeSearch??!0)&&!bd(ke.location.search,ye.search,{partial:!d?.exact,ignoreUndefined:!d?.explicitUndefined})?!1:d?.includeHash?ke.location.hash===ye.hash:!0}}),Oe=Q.useCallback(()=>{n.preloadRoute(t).catch(ke=>{console.warn(ke),console.warn(y4)})},[t,n]),De=Q.useCallback(ke=>{ke?.isIntersecting&&Oe()},[Oe]);if(WB(o,De,{rootMargin:"100px"},{disabled:!!A||we!=="viewport"}),kp(()=>{s.current||!A&&we==="render"&&(Oe(),s.current=!0)},[A,Oe,we]),X==="external")return{...oe,ref:o,type:X,href:p,...T&&{children:T},...O&&{target:O},...A&&{disabled:A},...D&&{style:D},...M&&{className:M},...W&&{onClick:W},...P&&{onFocus:P},...j&&{onMouseEnter:j},...L&&{onMouseLeave:L},...F&&{onTouchStart:F}};const Je=ke=>{if(!A&&!x4(ke)&&!ke.defaultPrevented&&(!O||O==="_self")&&ke.button===0){ke.preventDefault(),lv.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:_,resetScroll:I,hashScrollIntoView:x,startTransition:N,viewTransition:R,ignoreBlocker:V})}},Xe=ke=>{A||we&&Oe()},Ve=Xe,ct=ke=>{if(A)return;const Ae=ke.target||{};if(we){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,Oe()},Ne)}},_t=ke=>{if(A)return;const Ae=ke.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},Tt=ke=>Ae=>{var Ue;(Ue=Ae.persist)==null||Ue.call(Ae),ke.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Ut=ze?Lc(l,{})??{}:{},rn=ze?{}:Lc(u,{}),xe=[M,Ut.className,rn.className].filter(Boolean).join(" "),be={...D,...Ut.style,...rn.style};return{...oe,...Ut,...rn,href:A?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:Tt([W,Je]),onFocus:Tt([P,Xe]),onMouseEnter:Tt([j,ct]),onMouseLeave:Tt([L,_t]),onTouchStart:Tt([F,Ve]),disabled:!!A,target:O,...Object.keys(be).length&&{style:be},...xe&&{className:xe},...A&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function L3(t){return Q.forwardRef(function(n,r){return f.jsx(v4,{...n,_asChild:t,ref:r})})}const v4=Q.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=b4(r,e),l=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,Q.createElement(n||"a",{...o,ref:s},l)});function x4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function w4(){const t=Fo(),e=Q.useRef({router:t,mounted:!1}),n=Mi({select:({isLoading:h})=>h}),[r,i]=Q.useState(!1),s=Mi({select:h=>h.matches.some(b=>b.status==="pending"),structuralSharing:!0}),o=Uw(n),l=n||r||s,u=Uw(l),d=n||s,p=Uw(d);return t.isServer||(t.startReactTransition=h=>{i(!0),Q.startTransition(()=>{h(),i(!1)})}),Q.useEffect(()=>{const h=t.history.subscribe(t.load),b=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Mc(t.latestLocation.href)!==Mc(b.href)&&t.commitLocation({...b,replace:!0}),()=>{h()}},[t,t.history]),kp(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),kp(()=>{if(o&&!n){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onLoad",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),kp(()=>{if(p&&!d){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[d,p,t]),kp(()=>{if(u&&!l){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;if(t.emit({type:"onResolved",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(N=>({...N,status:"idle",resolvedLocation:N.location})),typeof document<"u"&&document.querySelector){const N=t.state.location.state.__hashScrollIntoViewOptions??!0;if(N&&t.state.location.hash!==""){const I=document.getElementById(t.state.location.hash);I&&I.scrollIntoView(N)}}}},[l,u,t]),null}function _4(){const t=Fo(),e=t.options.defaultPendingComponent?f.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?hy:Q.Suspense,r=f.jsxs(n,{fallback:e,children:[f.jsx(w4,{}),f.jsx(S4,{})]});return t.options.InnerWrap?f.jsx(t.options.InnerWrap,{children:r}):r}function S4(){const t=Mi({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Mi({select:n=>n.loadedAt});return f.jsx(av.Provider,{value:t,children:f.jsx(l1,{getResetKey:()=>e,errorComponent:ov,onCatch:n=>{n.message||n.toString()},children:t?f.jsx(F3,{matchId:t}):null})})}function E4(){const t=Fo();return Mi({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),Q.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function N4({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=T3(),i=f.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?f.jsx(t.options.Wrap,{children:i}):i}function k4({router:t,...e}){return f.jsx(N4,{router:t,...e,children:f.jsx(_4,{})})}const I4=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,Zw="window",IC="___";let Yw=new WeakSet;const C4=typeof window<"u"&&window.sessionStorage,wo=C4?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{wo.state=Lc(n,wo.state),window.sessionStorage.setItem(t,JSON.stringify(wo.state))}}})():void 0,T4=t=>t.state.key||t.href;function R4(t){const e=Fo();I4(()=>{const n=t?.getKey||T4,{history:r}=window;r.scrollRestoration="manual";const i=l=>{if(Yw.has(l.target))return;Yw.add(l.target);let u="";if(l.target===document||l.target===window)u=Zw;else{const d=l.target.getAttribute("data-scroll-restoration-id");d?u=`[data-scroll-restoration-id="${d}"]`:u=j4(l.target)}wo.state.next[u]||wo.set(d=>({...d,next:{...d.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",l=>{if(l.hrefChanged){const u=n(l.fromLocation);for(const d in wo.state.next){const p=wo.state.next[d];if(d===Zw)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(d){const h=document.querySelector(d);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}wo.set(h=>{const b={...h.next};return delete b[d],{...h,next:b,cached:{...h.cached,[[u,d].join(IC)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",l=>{if(l.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(l.toLocation);let d=!1;for(const p in wo.state.cached){const h=wo.state.cached[p],[b,x]=p.split(IC);if(b===u){if(x===Zw)d=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}d||window.scrollTo(0,0),wo.set(p=>({...p,next:{}})),Yw=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function O4(t){return R4(t),null}function j4(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function br(t){return Wl({...t,select:e=>t.select?t.select(e.context):e.context})}let q4={data:""},A4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||q4,P4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,F4=/\/\*[^]*?\*\/|  +/g,CC=/\n+/g,Il=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Il(o,s):s+"{"+Il(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Il(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Il.p?Il.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ea={},M3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+M3(t[n]);return e}return t},D4=(t,e,n,r,i)=>{let s=M3(t),o=Ea[s]||(Ea[s]=(u=>{let d=0,p=11;for(;d<u.length;)p=101*p+u.charCodeAt(d++)>>>0;return"go"+p})(s));if(!Ea[o]){let u=s!==t?t:(d=>{let p,h,b=[{}];for(;p=P4.exec(d.replace(F4,""));)p[4]?b.shift():p[3]?(h=p[3].replace(CC," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][p[1]]=p[2].replace(CC," ").trim();return b[0]})(t);Ea[o]=Il(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&Ea.g?Ea.g:null;return n&&(Ea.g=Ea[o]),((u,d,p,h)=>{h?d.data=d.data.replace(h,u):d.data.indexOf(u)===-1&&(d.data=p?u+d.data:d.data+u)})(Ea[o],e,r,l),o},L4=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Il(l,""):l===!1?"":l}return r+i+(o??"")},"");function cv(t){let e=this||{},n=t.call?t(e.p):t;return D4(n.unshift?n.raw?L4(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,A4(e.target),e.g,e.o,e.k)}let $3,zS,WS;cv.bind({g:1});let $a=cv.bind({k:1});function M4(t,e,n,r){Il.p=e,$3=t,zS=n,WS=r}function Xl(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),u=l.className||i.className;n.p=Object.assign({theme:zS&&zS()},l),n.o=/ *go\d+/.test(u),l.className=cv.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=l.as||t,delete l.as),WS&&d[0]&&WS(l),$3(d,l)}return i}}var $4=t=>typeof t=="function",ib=(t,e)=>$4(t)?t(e):t,B4=(()=>{let t=0;return()=>(++t).toString()})(),B3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),z4=20,z3=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,z4)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return z3(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},my=[],gy={toasts:[],pausedAt:void 0},cu=t=>{gy=z3(gy,t),my.forEach(e=>{e(gy)})},W4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},V4=(t={})=>{let[e,n]=Q.useState(gy);Q.useEffect(()=>(my.push(n),()=>{let i=my.indexOf(n);i>-1&&my.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||W4[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:r}},U4=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||B4()}),Yh=t=>(e,n)=>{let r=U4(e,t,n);return cu({type:2,toast:r}),r.id},Tn=(t,e)=>Yh("blank")(t,e);Tn.error=Yh("error");Tn.success=Yh("success");Tn.loading=Yh("loading");Tn.custom=Yh("custom");Tn.dismiss=t=>{cu({type:3,toastId:t})};Tn.remove=t=>cu({type:4,toastId:t});Tn.promise=(t,e,n)=>{let r=Tn.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?ib(e.success,i):void 0;return s?Tn.success(s,{id:r,...n,...n?.success}):Tn.dismiss(r),i}).catch(i=>{let s=e.error?ib(e.error,i):void 0;s?Tn.error(s,{id:r,...n,...n?.error}):Tn.dismiss(r)}),t};var H4=(t,e)=>{cu({type:1,toast:{id:t,height:e}})},Q4=()=>{cu({type:5,time:Date.now()})},Qp=new Map,K4=1e3,G4=(t,e=K4)=>{if(Qp.has(t))return;let n=setTimeout(()=>{Qp.delete(t),cu({type:4,toastId:t})},e);Qp.set(t,n)},J4=t=>{let{toasts:e,pausedAt:n}=V4(t);Q.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(u<0){l.visible&&Tn.dismiss(l.id);return}return setTimeout(()=>Tn.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=Q.useCallback(()=>{n&&cu({type:6,time:Date.now()})},[n]),i=Q.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:d}=o||{},p=e.filter(x=>(x.position||d)===(s.position||d)&&x.height),h=p.findIndex(x=>x.id===s.id),b=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...l?[b+1]:[0,b]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return Q.useEffect(()=>{e.forEach(s=>{if(s.dismissed)G4(s.id,s.removeDelay);else{let o=Qp.get(s.id);o&&(clearTimeout(o),Qp.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:H4,startPause:Q4,endPause:r,calculateOffset:i}}},Z4=$a`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Y4=$a`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X4=$a`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ez=Xl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Z4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Y4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${X4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tz=$a`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,nz=Xl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${tz} 1s linear infinite;
`,rz=$a`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,iz=$a`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,sz=Xl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${rz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${iz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,oz=Xl("div")`
  position: absolute;
`,az=Xl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lz=$a`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cz=Xl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,uz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?Q.createElement(cz,null,e):e:n==="blank"?null:Q.createElement(az,null,Q.createElement(nz,{...r}),n!=="loading"&&Q.createElement(oz,null,n==="error"?Q.createElement(ez,{...r}):Q.createElement(sz,{...r})))},dz=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,pz="0%{opacity:0;} 100%{opacity:1;}",hz="0%{opacity:1;} 100%{opacity:0;}",mz=Xl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,gz=Xl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,yz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=B3()?[pz,hz]:[dz(n),fz(n)];return{animation:e?`${$a(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$a(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},bz=Q.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?yz(t.position||e||"top-center",t.visible):{opacity:0},s=Q.createElement(uz,{toast:t}),o=Q.createElement(gz,{...t.ariaProps},ib(t.message,t));return Q.createElement(mz,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):Q.createElement(Q.Fragment,null,s,o))});M4(Q.createElement);var vz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=Q.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return Q.createElement("div",{ref:s,className:e,style:n},i)},xz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:B3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},wz=cv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fg=16,_z=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=J4(n);return Q.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Fg,left:Fg,right:Fg,bottom:Fg,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(d=>{let p=d.position||e,h=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),b=xz(p,h);return Q.createElement(vz,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?wz:"",style:b},d.type==="custom"?ib(d.message,d):i?i(d):Q.createElement(bz,{toast:d,position:p}))}))},Sz=Tn;class uu extends Error{}class Ez extends uu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Nz extends uu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class kz extends uu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ad extends uu{}class W3 extends uu{constructor(e){super(`Invalid unit ${e}`)}}class _i extends uu{}class ml extends uu{constructor(){super("Zone is an abstract class")}}const Ct="numeric",jo="short",Cs="long",sb={year:Ct,month:Ct,day:Ct},V3={year:Ct,month:jo,day:Ct},Iz={year:Ct,month:jo,day:Ct,weekday:jo},U3={year:Ct,month:Cs,day:Ct},H3={year:Ct,month:Cs,day:Ct,weekday:Cs},Q3={hour:Ct,minute:Ct},K3={hour:Ct,minute:Ct,second:Ct},G3={hour:Ct,minute:Ct,second:Ct,timeZoneName:jo},J3={hour:Ct,minute:Ct,second:Ct,timeZoneName:Cs},Z3={hour:Ct,minute:Ct,hourCycle:"h23"},Y3={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23"},X3={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:jo},eA={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:Cs},tA={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct},nA={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct,second:Ct},rA={year:Ct,month:jo,day:Ct,hour:Ct,minute:Ct},iA={year:Ct,month:jo,day:Ct,hour:Ct,minute:Ct,second:Ct},Cz={year:Ct,month:jo,day:Ct,weekday:jo,hour:Ct,minute:Ct},sA={year:Ct,month:Cs,day:Ct,hour:Ct,minute:Ct,timeZoneName:jo},oA={year:Ct,month:Cs,day:Ct,hour:Ct,minute:Ct,second:Ct,timeZoneName:jo},aA={year:Ct,month:Cs,day:Ct,weekday:Cs,hour:Ct,minute:Ct,timeZoneName:Cs},lA={year:Ct,month:Cs,day:Ct,weekday:Cs,hour:Ct,minute:Ct,second:Ct,timeZoneName:Cs};class Xh{get type(){throw new ml}get name(){throw new ml}get ianaName(){return this.name}get isUniversal(){throw new ml}offsetName(e,n){throw new ml}formatOffset(e,n){throw new ml}offset(e){throw new ml}equals(e){throw new ml}get isValid(){throw new ml}}let Xw=null;class uv extends Xh{static get instance(){return Xw===null&&(Xw=new uv),Xw}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return yA(e,n,r)}formatOffset(e,n){return Kp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let yy={};function Tz(t){return yy[t]||(yy[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),yy[t]}const Rz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Oz(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,l,u,d,p]=r;return[o,i,s,l,u,d,p]}function jz(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],l=Rz[s];s==="era"?r[l]=o:fn(l)||(r[l]=parseInt(o,10))}return r}let Dg={};class Ba extends Xh{static create(e){return Dg[e]||(Dg[e]=new Ba(e)),Dg[e]}static resetCache(){Dg={},yy={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ba.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return yA(e,n,r,this.name)}formatOffset(e,n){return Kp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=Tz(this.name);let[i,s,o,l,u,d,p]=r.formatToParts?jz(r,n):Oz(r,n);l==="BC"&&(i=-Math.abs(i)+1);const b=fv({year:i,month:s,day:o,hour:u===24?0:u,minute:d,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(b-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let TC={};function qz(t,e={}){const n=JSON.stringify([t,e]);let r=TC[n];return r||(r=new Intl.ListFormat(t,e),TC[n]=r),r}let VS={};function US(t,e={}){const n=JSON.stringify([t,e]);let r=VS[n];return r||(r=new Intl.DateTimeFormat(t,e),VS[n]=r),r}let HS={};function Az(t,e={}){const n=JSON.stringify([t,e]);let r=HS[n];return r||(r=new Intl.NumberFormat(t,e),HS[n]=r),r}let QS={};function Pz(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=QS[i];return s||(s=new Intl.RelativeTimeFormat(t,e),QS[i]=s),s}let Cp=null;function Fz(){return Cp||(Cp=new Intl.DateTimeFormat().resolvedOptions().locale,Cp)}let RC={};function Dz(t){let e=RC[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,RC[t]=e}return e}function Lz(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=US(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=US(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function Mz(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function $z(t){const e=[];for(let n=1;n<=12;n++){const r=dn.utc(2009,n,1);e.push(t(r))}return e}function Bz(t){const e=[];for(let n=1;n<=7;n++){const r=dn.utc(2016,11,13+n);e.push(t(r))}return e}function Lg(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function zz(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class Wz{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Az(e,l)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):p1(e,3);return Kr(n,this.padTo)}}}class Vz{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Ba.create(l).valid?(i=l,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=US(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Uz{constructor(e,n,r){this.opts={style:"long",...r},!n&&mA()&&(this.rtf=Pz(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):hW(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const Hz={firstDay:1,minimalDays:4,weekend:[6,7]};class Vn{static fromOpts(e){return Vn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Or.defaultLocale,l=o||(s?"en-US":Fz()),u=n||Or.defaultNumberingSystem,d=r||Or.defaultOutputCalendar,p=KS(i)||Or.defaultWeekSettings;return new Vn(l,u,d,p,o)}static resetCache(){Cp=null,VS={},HS={},QS={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Vn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,l,u]=Lz(e);this.locale=o,this.numberingSystem=n||l||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=Mz(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=zz(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Vn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,KS(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Lg(this,e,xA,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=$z(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Lg(this,e,SA,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Bz(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Lg(this,void 0,()=>EA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dn.utc(2016,11,13,9),dn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Lg(this,e,NA,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[dn.utc(-40,1,1),dn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new Wz(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new Vz(e,this.intl,n)}relFormatter(e={}){return new Uz(this.intl,this.isEnglish(),e)}listFormatter(e={}){return qz(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:gA()?Dz(this.locale):Hz}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let e_=null;class Li extends Xh{static get utcInstance(){return e_===null&&(e_=new Li(0)),e_}static instance(e){return e===0?Li.utcInstance:new Li(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Li(pv(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Kp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Kp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Kp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class Qz extends Xh{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Cl(t,e){if(fn(t)||t===null)return e;if(t instanceof Xh)return t;if(Xz(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?uv.instance:n==="utc"||n==="gmt"?Li.utcInstance:Li.parseSpecifier(n)||Ba.create(t)}else return Fl(t)?Li.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Qz(t)}const c1={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},OC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Kz=c1.hanidec.replace(/[\[|\]]/g,"").split("");function Gz(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(c1.hanidec)!==-1)e+=Kz.indexOf(t[n]);else for(const i in OC){const[s,o]=OC[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let rd={};function Jz(){rd={}}function vo({numberingSystem:t},e=""){const n=t||"latn";return rd[n]||(rd[n]={}),rd[n][e]||(rd[n][e]=new RegExp(`${c1[n]}${e}`)),rd[n][e]}let jC=()=>Date.now(),qC="system",AC=null,PC=null,FC=null,DC=60,LC,MC=null;class Or{static get now(){return jC}static set now(e){jC=e}static set defaultZone(e){qC=e}static get defaultZone(){return Cl(qC,uv.instance)}static get defaultLocale(){return AC}static set defaultLocale(e){AC=e}static get defaultNumberingSystem(){return PC}static set defaultNumberingSystem(e){PC=e}static get defaultOutputCalendar(){return FC}static set defaultOutputCalendar(e){FC=e}static get defaultWeekSettings(){return MC}static set defaultWeekSettings(e){MC=KS(e)}static get twoDigitCutoffYear(){return DC}static set twoDigitCutoffYear(e){DC=e%100}static get throwOnInvalid(){return LC}static set throwOnInvalid(e){LC=e}static resetCaches(){Vn.resetCache(),Ba.resetCache(),dn.resetCache(),Jz()}}class Co{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const cA=[0,31,59,90,120,151,181,212,243,273,304,334],uA=[0,31,60,91,121,152,182,213,244,274,305,335];function io(t,e){return new Co("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function u1(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function dA(t,e,n){return n+(em(t)?uA:cA)[e-1]}function fA(t,e){const n=em(t)?uA:cA,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function d1(t,e){return(t-e+7)%7+1}function ob(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=dA(r,i,s),l=d1(u1(r,i,s),n);let u=Math.floor((o-l+14-e)/7),d;return u<1?(d=r-1,u=uh(d,e,n)):u>uh(r,e,n)?(d=r+1,u=1):d=r,{weekYear:d,weekNumber:u,weekday:l,...hv(t)}}function $C(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=d1(u1(r,1,e),n),l=vd(r);let u=i*7+s-o-7+e,d;u<1?(d=r-1,u+=vd(d)):u>l?(d=r+1,u-=vd(r)):d=r;const{month:p,day:h}=fA(d,u);return{year:d,month:p,day:h,...hv(t)}}function t_(t){const{year:e,month:n,day:r}=t,i=dA(e,n,r);return{year:e,ordinal:i,...hv(t)}}function BC(t){const{year:e,ordinal:n}=t,{month:r,day:i}=fA(e,n);return{year:e,month:r,day:i,...hv(t)}}function zC(t,e){if(!fn(t.localWeekday)||!fn(t.localWeekNumber)||!fn(t.localWeekYear)){if(!fn(t.weekday)||!fn(t.weekNumber)||!fn(t.weekYear))throw new ad("Cannot mix locale-based week fields with ISO-based week fields");return fn(t.localWeekday)||(t.weekday=t.localWeekday),fn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),fn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Zz(t,e=4,n=1){const r=dv(t.weekYear),i=so(t.weekNumber,1,uh(t.weekYear,e,n)),s=so(t.weekday,1,7);return r?i?s?!1:io("weekday",t.weekday):io("week",t.weekNumber):io("weekYear",t.weekYear)}function Yz(t){const e=dv(t.year),n=so(t.ordinal,1,vd(t.year));return e?n?!1:io("ordinal",t.ordinal):io("year",t.year)}function pA(t){const e=dv(t.year),n=so(t.month,1,12),r=so(t.day,1,ab(t.year,t.month));return e?n?r?!1:io("day",t.day):io("month",t.month):io("year",t.year)}function hA(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=so(e,0,23)||e===24&&n===0&&r===0&&i===0,o=so(n,0,59),l=so(r,0,59),u=so(i,0,999);return s?o?l?u?!1:io("millisecond",i):io("second",r):io("minute",n):io("hour",e)}function fn(t){return typeof t>"u"}function Fl(t){return typeof t=="number"}function dv(t){return typeof t=="number"&&t%1===0}function Xz(t){return typeof t=="string"}function eW(t){return Object.prototype.toString.call(t)==="[object Date]"}function mA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function gA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function tW(t){return Array.isArray(t)?t:[t]}function WC(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function nW(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Pd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function KS(t){if(t==null)return null;if(typeof t!="object")throw new _i("Week settings must be an object");if(!so(t.firstDay,1,7)||!so(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!so(e,1,7)))throw new _i("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function so(t,e,n){return dv(t)&&t>=e&&t<=n}function rW(t,e){return t-e*Math.floor(t/e)}function Kr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function El(t){if(!(fn(t)||t===null||t===""))return parseInt(t,10)}function Ic(t){if(!(fn(t)||t===null||t===""))return parseFloat(t)}function f1(t){if(!(fn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function p1(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function em(t){return t%4===0&&(t%100!==0||t%400===0)}function vd(t){return em(t)?366:365}function ab(t,e){const n=rW(e-1,12)+1,r=t+(e-n)/12;return n===2?em(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function fv(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function VC(t,e,n){return-d1(u1(t,1,e),n)+e-1}function uh(t,e=4,n=1){const r=VC(t,e,n),i=VC(t+1,e,n);return(vd(t)-r+i)/7}function GS(t){return t>99?t:t>Or.twoDigitCutoffYear?1900+t:2e3+t}function yA(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function pv(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function bA(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new _i(`Invalid unit value ${t}`);return e}function lb(t,e){const n={};for(const r in t)if(Pd(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=bA(i)}return n}function Kp(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Kr(n,2)}:${Kr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Kr(n,2)}${Kr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function hv(t){return nW(t,["hour","minute","second","millisecond"])}const iW=["January","February","March","April","May","June","July","August","September","October","November","December"],vA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sW=["J","F","M","A","M","J","J","A","S","O","N","D"];function xA(t){switch(t){case"narrow":return[...sW];case"short":return[...vA];case"long":return[...iW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const wA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],_A=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],oW=["M","T","W","T","F","S","S"];function SA(t){switch(t){case"narrow":return[...oW];case"short":return[..._A];case"long":return[...wA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const EA=["AM","PM"],aW=["Before Christ","Anno Domini"],lW=["BC","AD"],cW=["B","A"];function NA(t){switch(t){case"narrow":return[...cW];case"short":return[...lW];case"long":return[...aW];default:return null}}function uW(t){return EA[t.hour<12?0:1]}function dW(t,e){return SA(e)[t.weekday-1]}function fW(t,e){return xA(e)[t.month-1]}function pW(t,e){return NA(e)[t.year<0?0:1]}function hW(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,d=i[t],p=r?u?d[1]:d[2]||d[1]:u?i[t][0]:t;return o?`${l} ${p} ago`:`in ${l} ${p}`}function UC(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const mW={D:sb,DD:V3,DDD:U3,DDDD:H3,t:Q3,tt:K3,ttt:G3,tttt:J3,T:Z3,TT:Y3,TTT:X3,TTTT:eA,f:tA,ff:rA,fff:sA,ffff:aA,F:nA,FF:iA,FFF:oA,FFFF:lA};class Ei{static create(e,n={}){return new Ei(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||l===n?r+=l:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=l,n=l)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return mW[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Kr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>r?uW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?fW(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),d=(x,_)=>r?dW(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Ei.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?pW(e,x):s({era:x},"era"),b=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return UC(Ei.parseFormat(n),b)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>d=>{const p=r(d);return p?this.num(u.get(p),d.length):d},s=Ei.parseFormat(n),o=s.reduce((u,{literal:d,val:p})=>d?u:u.concat(p),[]),l=e.shiftTo(...o.map(r).filter(u=>u));return UC(s,i(l))}}const kA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ef(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function tf(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,l,u]=s(e,i);return[{...n,...o},l||r,u]},[{},null,1]).slice(0,2)}function nf(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function IA(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=El(e[n+i]);return[r,null,n+i]}}const CA=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,gW=`(?:${CA.source}?(?:\\[(${kA.source})\\])?)?`,h1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,TA=RegExp(`${h1.source}${gW}`),m1=RegExp(`(?:T${TA.source})?`),yW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,bW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,vW=/(\d{4})-?(\d{3})/,xW=IA("weekYear","weekNumber","weekDay"),wW=IA("year","ordinal"),_W=/(\d{4})-(\d\d)-(\d\d)/,RA=RegExp(`${h1.source} ?(?:${CA.source}|(${kA.source}))?`),SW=RegExp(`(?: ${RA.source})?`);function xd(t,e,n){const r=t[e];return fn(r)?n:El(r)}function EW(t,e){return[{year:xd(t,e),month:xd(t,e+1,1),day:xd(t,e+2,1)},null,e+3]}function rf(t,e){return[{hours:xd(t,e,0),minutes:xd(t,e+1,0),seconds:xd(t,e+2,0),milliseconds:f1(t[e+3])},null,e+4]}function tm(t,e){const n=!t[e]&&!t[e+1],r=pv(t[e+1],t[e+2]),i=n?null:Li.instance(r);return[{},i,e+3]}function nm(t,e){const n=t[e]?Ba.create(t[e]):null;return[{},n,e+1]}const NW=RegExp(`^T?${h1.source}$`),kW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function IW(t){const[e,n,r,i,s,o,l,u,d]=t,p=e[0]==="-",h=u&&u[0]==="-",b=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:b(Ic(n)),months:b(Ic(r)),weeks:b(Ic(i)),days:b(Ic(s)),hours:b(Ic(o)),minutes:b(Ic(l)),seconds:b(Ic(u),u==="-0"),milliseconds:b(f1(d),h)}]}const CW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function g1(t,e,n,r,i,s,o){const l={year:e.length===2?GS(El(e)):El(e),month:vA.indexOf(n)+1,day:El(r),hour:El(i),minute:El(s)};return o&&(l.second=El(o)),t&&(l.weekday=t.length>3?wA.indexOf(t)+1:_A.indexOf(t)+1),l}const TW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function RW(t){const[,e,n,r,i,s,o,l,u,d,p,h]=t,b=g1(e,i,r,n,s,o,l);let x;return u?x=CW[u]:d?x=0:x=pv(p,h),[b,new Li(x)]}function OW(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const jW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,qW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,AW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function HC(t){const[,e,n,r,i,s,o,l]=t;return[g1(e,i,r,n,s,o,l),Li.utcInstance]}function PW(t){const[,e,n,r,i,s,o,l]=t;return[g1(e,l,n,r,i,s,o),Li.utcInstance]}const FW=ef(yW,m1),DW=ef(bW,m1),LW=ef(vW,m1),MW=ef(TA),OA=tf(EW,rf,tm,nm),$W=tf(xW,rf,tm,nm),BW=tf(wW,rf,tm,nm),zW=tf(rf,tm,nm);function WW(t){return nf(t,[FW,OA],[DW,$W],[LW,BW],[MW,zW])}function VW(t){return nf(OW(t),[TW,RW])}function UW(t){return nf(t,[jW,HC],[qW,HC],[AW,PW])}function HW(t){return nf(t,[kW,IW])}const QW=tf(rf);function KW(t){return nf(t,[NW,QW])}const GW=ef(_W,SW),JW=ef(RA),ZW=tf(rf,tm,nm);function YW(t){return nf(t,[GW,OA],[JW,ZW])}const QC="Invalid Duration",jA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},XW={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...jA},Zs=146097/400,Uu=146097/4800,e6={years:{quarters:4,months:12,weeks:Zs/7,days:Zs,hours:Zs*24,minutes:Zs*24*60,seconds:Zs*24*60*60,milliseconds:Zs*24*60*60*1e3},quarters:{months:3,weeks:Zs/28,days:Zs/4,hours:Zs*24/4,minutes:Zs*24*60/4,seconds:Zs*24*60*60/4,milliseconds:Zs*24*60*60*1e3/4},months:{weeks:Uu/7,days:Uu,hours:Uu*24,minutes:Uu*24*60,seconds:Uu*24*60*60,milliseconds:Uu*24*60*60*1e3},...jA},$c=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],t6=$c.slice(0).reverse();function gl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new An(r)}function qA(t,e){let n=e.milliseconds??0;for(const r of t6.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function KC(t,e){const n=qA(t,e)<0?-1:1;$c.reduceRight((r,i)=>{if(fn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],l=Math.floor(s/o);e[i]+=l*n,e[r]-=l*o*n}return i},null),$c.reduce((r,i)=>{if(fn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function n6(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class An{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?e6:XW;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Vn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return An.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new _i(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new An({values:lb(e,An.normalizeUnit),loc:Vn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Fl(e))return An.fromMillis(e);if(An.isDuration(e))return e;if(typeof e=="object")return An.fromObject(e);throw new _i(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=HW(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=KW(e);return r?An.fromObject(r,n):An.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the Duration is invalid");const r=e instanceof Co?e:new Co(e,n);if(Or.throwOnInvalid)throw new kz(r);return new An({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new W3(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ei.create(this.loc,r).formatDurationFromString(this,e):QC}toHuman(e={}){if(!this.isValid)return QC;const n=$c.map(r=>{const i=this.values[r];return fn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=p1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},dn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?qA(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e),r={};for(const i of $c)(Pd(n.values,i)||Pd(this.values,i))&&(r[i]=n.get(i)+this.get(i));return gl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=bA(e(this.values[r],r));return gl(this,{values:n},!0)}get(e){return this[An.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...lb(e,An.normalizeUnit)};return gl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return gl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return KC(this.matrix,e),gl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=n6(this.normalize().shiftToAll().toObject());return gl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>An.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of $c)if(e.indexOf(o)>=0){s=o;let l=0;for(const d in r)l+=this.matrix[d][o]*r[d],r[d]=0;Fl(i[o])&&(l+=i[o]);const u=Math.trunc(l);n[o]=u,r[o]=(l*1e3-u*1e3)/1e3}else Fl(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return KC(this.matrix,n),gl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return gl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of $c)if(!n(this.values[r],e.values[r]))return!1;return!0}}const Hu="Invalid Interval";function r6(t,e){return!t||!t.isValid?Rr.invalid("missing or invalid start"):!e||!e.isValid?Rr.invalid("missing or invalid end"):e<t?Rr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Rr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the Interval is invalid");const r=e instanceof Co?e:new Co(e,n);if(Or.throwOnInvalid)throw new Nz(r);return new Rr({invalid:r})}static fromDateTimes(e,n){const r=up(e),i=up(n),s=r6(r,i);return s??new Rr({start:r,end:i})}static after(e,n){const r=An.fromDurationLike(n),i=up(e);return Rr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=An.fromDurationLike(n),i=up(e);return Rr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=dn.fromISO(r,n),o=s.isValid}catch{o=!1}let l,u;try{l=dn.fromISO(i,n),u=l.isValid}catch{u=!1}if(o&&u)return Rr.fromDateTimes(s,l);if(o){const d=An.fromISO(i,n);if(d.isValid)return Rr.after(s,d)}else if(u){const d=An.fromISO(r,n);if(d.isValid)return Rr.before(l,d)}}return Rr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Rr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(up).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,l=+o>+this.e?this.e:o;r.push(Rr.fromDateTimes(i,l)),i=l,s+=1}return r}splitBy(e){const n=An.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const l=this.start.plus(n.mapUnits(u=>u*i));s=+l>+this.e?this.e:l,o.push(Rr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Rr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Rr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((u,d)=>u.time-d.time);for(const u of l)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(Rr.fromDateTimes(n,u.time)),n=null);return Rr.merge(i)}difference(...e){return Rr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Hu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=sb,n={}){return this.isValid?Ei.create(this.s.loc.clone(n),e).formatInterval(this):Hu}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Hu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Hu}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Hu}toFormat(e,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Hu}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):An.invalid(this.invalidReason)}mapEndpoints(e){return Rr.fromDateTimes(e(this.s),e(this.e))}}class Mg{static hasDST(e=Or.defaultZone){const n=dn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Ba.isValidZone(e)}static normalizeZone(e){return Cl(e,Or.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Vn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Vn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Vn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Vn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Vn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Vn.create(n,null,"gregory").eras(e)}static features(){return{relative:mA(),localeWeek:gA()}}}function GC(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(An.fromMillis(r).as("days"))}function i6(t,e,n){const r=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const p=GC(u,d);return(p-p%7)/7}],["days",GC]],i={},s=t;let o,l;for(const[u,d]of r)n.indexOf(u)>=0&&(o=u,i[u]=d(t,e),l=s.plus(i),l>e?(i[u]--,t=s.plus(i),t>e&&(l=t,i[u]--,t=s.plus(i))):t=l);return[t,i,l,o]}function s6(t,e,n,r){let[i,s,o,l]=i6(t,e,n);const u=e-i,d=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);d.length===0&&(o<e&&(o=i.plus({[l]:1})),o!==i&&(s[l]=(s[l]||0)+u/(o-i)));const p=An.fromObject(s,r);return d.length>0?An.fromMillis(u,r).shiftTo(...d).plus(p):p}const o6="missing Intl.DateTimeFormat.formatToParts support";function $n(t,e=n=>n){return{regex:t,deser:([n])=>e(Gz(n))}}const a6="\xa0",AA=`[ ${a6}]`,PA=new RegExp(AA,"g");function l6(t){return t.replace(/\./g,"\\.?").replace(PA,AA)}function JC(t){return t.replace(/\./g,"").replace(PA," ").toLowerCase()}function xo(t,e){return t===null?null:{regex:RegExp(t.map(l6).join("|")),deser:([n])=>t.findIndex(r=>JC(n)===JC(r))+e}}function ZC(t,e){return{regex:t,deser:([,n,r])=>pv(n,r),groups:e}}function $g(t){return{regex:t,deser:([e])=>e}}function c6(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function u6(t,e){const n=vo(e),r=vo(e,"{2}"),i=vo(e,"{3}"),s=vo(e,"{4}"),o=vo(e,"{6}"),l=vo(e,"{1,2}"),u=vo(e,"{1,3}"),d=vo(e,"{1,6}"),p=vo(e,"{1,9}"),h=vo(e,"{2,4}"),b=vo(e,"{4,6}"),x=I=>({regex:RegExp(c6(I.val)),deser:([R])=>R,literal:!0}),N=(I=>{if(t.literal)return x(I);switch(I.val){case"G":return xo(e.eras("short"),0);case"GG":return xo(e.eras("long"),0);case"y":return $n(d);case"yy":return $n(h,GS);case"yyyy":return $n(s);case"yyyyy":return $n(b);case"yyyyyy":return $n(o);case"M":return $n(l);case"MM":return $n(r);case"MMM":return xo(e.months("short",!0),1);case"MMMM":return xo(e.months("long",!0),1);case"L":return $n(l);case"LL":return $n(r);case"LLL":return xo(e.months("short",!1),1);case"LLLL":return xo(e.months("long",!1),1);case"d":return $n(l);case"dd":return $n(r);case"o":return $n(u);case"ooo":return $n(i);case"HH":return $n(r);case"H":return $n(l);case"hh":return $n(r);case"h":return $n(l);case"mm":return $n(r);case"m":return $n(l);case"q":return $n(l);case"qq":return $n(r);case"s":return $n(l);case"ss":return $n(r);case"S":return $n(u);case"SSS":return $n(i);case"u":return $g(p);case"uu":return $g(l);case"uuu":return $n(n);case"a":return xo(e.meridiems(),0);case"kkkk":return $n(s);case"kk":return $n(h,GS);case"W":return $n(l);case"WW":return $n(r);case"E":case"c":return $n(n);case"EEE":return xo(e.weekdays("short",!1),1);case"EEEE":return xo(e.weekdays("long",!1),1);case"ccc":return xo(e.weekdays("short",!0),1);case"cccc":return xo(e.weekdays("long",!0),1);case"Z":case"ZZ":return ZC(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return ZC(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return $g(/[a-z_+-/]{1,256}?/i);case" ":return $g(/[^\S\n\r]/);default:return x(I)}})(t)||{invalidReason:o6};return N.token=t,N}const d6={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function f6(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let l=d6[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function p6(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function h6(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(Pd(n,o)){const l=n[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(i[l.token.val[0]]=l.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function m6(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return fn(t.z)||(n=Ba.create(t.z)),fn(t.Z)||(n||(n=new Li(t.Z)),r=t.Z),fn(t.q)||(t.M=(t.q-1)*3+1),fn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),fn(t.u)||(t.S=f1(t.u)),[Object.keys(t).reduce((s,o)=>{const l=e(o);return l&&(s[l]=t[o]),s},{}),n,r]}let n_=null;function g6(){return n_||(n_=dn.fromMillis(0x16a2e5618e3)),n_}function y6(t,e){if(t.literal)return t;const n=Ei.macroTokenToFormatOpts(t.val),r=MA(n,e);return r==null||r.includes(void 0)?t:r}function FA(t,e){return Array.prototype.concat(...t.map(n=>y6(n,e)))}class DA{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=FA(Ei.parseFormat(n),e),this.units=this.tokens.map(r=>u6(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=p6(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=h6(e,this.regex,this.handlers),[i,s,o]=r?m6(r):[null,null,void 0];if(Pd(r,"a")&&Pd(r,"H"))throw new ad("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function LA(t,e,n){return new DA(t,n).explainFromTokens(e)}function b6(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=LA(t,e,n);return[r,i,s,o]}function MA(t,e){if(!t)return null;const r=Ei.create(e,t).dtFormatter(g6()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>f6(o,t,s))}const r_="Invalid DateTime",v6=864e13;function Tp(t){return new Co("unsupported zone",`the zone "${t.name}" is not supported`)}function i_(t){return t.weekData===null&&(t.weekData=ob(t.c)),t.weekData}function s_(t){return t.localWeekData===null&&(t.localWeekData=ob(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Cc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new dn({...n,...e,old:n})}function $A(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Bg(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function by(t,e,n){return $A(fv(t),e,n)}function YC(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,ab(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=An.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=fv(s);let[u,d]=$A(l,n,t.zone);return o!==0&&(u+=o,d=t.zone.offset(u)),{ts:u,o:d}}function Qu(t,e,n,r,i,s){const{setZone:o,zone:l}=n;if(t&&Object.keys(t).length!==0||e){const u=e||l,d=dn.fromObject(t,{...n,zone:u,specificOffset:s});return o?d:d.setZone(l)}else return dn.invalid(new Co("unparsable",`the input "${i}" can't be parsed as ${r}`))}function zg(t,e,n=!0){return t.isValid?Ei.create(Vn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function o_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Kr(t.c.year,n?6:4),e?(r+="-",r+=Kr(t.c.month),r+="-",r+=Kr(t.c.day)):(r+=Kr(t.c.month),r+=Kr(t.c.day)),r}function XC(t,e,n,r,i,s){let o=Kr(t.c.hour);return e?(o+=":",o+=Kr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Kr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Kr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Kr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Kr(Math.trunc(-t.o/60)),o+=":",o+=Kr(Math.trunc(-t.o%60))):(o+="+",o+=Kr(Math.trunc(t.o/60)),o+=":",o+=Kr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const BA={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},x6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},w6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},zA=["year","month","day","hour","minute","second","millisecond"],_6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],S6=["year","ordinal","hour","minute","second","millisecond"];function E6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new W3(t);return e}function eT(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return E6(t)}}function N6(t){return xy[t]||(vy===void 0&&(vy=Or.now()),xy[t]=t.offset(vy)),xy[t]}function tT(t,e){const n=Cl(e.zone,Or.defaultZone);if(!n.isValid)return dn.invalid(Tp(n));const r=Vn.fromObject(e);let i,s;if(fn(t.year))i=Or.now();else{for(const u of zA)fn(t[u])&&(t[u]=BA[u]);const o=pA(t)||hA(t);if(o)return dn.invalid(o);const l=N6(n);[i,s]=by(t,l,n)}return new dn({ts:i,zone:n,loc:r,o:s})}function nT(t,e,n){const r=fn(n.round)?!0:n.round,i=(o,l)=>(o=p1(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,l)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const l=s(o);if(Math.abs(l)>=1)return i(l,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function rT(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let vy,xy={};class dn{constructor(e){const n=e.zone||Or.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new Co("invalid input"):null)||(n.isValid?null:Tp(n));this.ts=fn(e.ts)?Or.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const l=Fl(e.o)&&!e.old?e.o:n.offset(this.ts);i=Bg(this.ts,l),r=Number.isNaN(i.year)?new Co("invalid input"):null,i=r?null:i,s=r?null:l}this._zone=n,this.loc=e.loc||Vn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new dn({})}static local(){const[e,n]=rT(arguments),[r,i,s,o,l,u,d]=n;return tT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:d},e)}static utc(){const[e,n]=rT(arguments),[r,i,s,o,l,u,d]=n;return e.zone=Li.utcInstance,tT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:d},e)}static fromJSDate(e,n={}){const r=eW(e)?e.valueOf():NaN;if(Number.isNaN(r))return dn.invalid("invalid input");const i=Cl(n.zone,Or.defaultZone);return i.isValid?new dn({ts:r,zone:i,loc:Vn.fromObject(n)}):dn.invalid(Tp(i))}static fromMillis(e,n={}){if(Fl(e))return e<-864e13||e>v6?dn.invalid("Timestamp out of range"):new dn({ts:e,zone:Cl(n.zone,Or.defaultZone),loc:Vn.fromObject(n)});throw new _i(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Fl(e))return new dn({ts:e*1e3,zone:Cl(n.zone,Or.defaultZone),loc:Vn.fromObject(n)});throw new _i("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Cl(n.zone,Or.defaultZone);if(!r.isValid)return dn.invalid(Tp(r));const i=Vn.fromObject(n),s=lb(e,eT),{minDaysInFirstWeek:o,startOfWeek:l}=zC(s,i),u=Or.now(),d=fn(n.specificOffset)?r.offset(u):n.specificOffset,p=!fn(s.ordinal),h=!fn(s.year),b=!fn(s.month)||!fn(s.day),x=h||b,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new ad("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new ad("Can't mix ordinal dates with month/day");const N=_||s.weekday&&!x;let I,R,T=Bg(u,d);N?(I=_6,R=x6,T=ob(T,o,l)):p?(I=S6,R=w6,T=t_(T)):(I=zA,R=BA);let O=!1;for(const L of I){const F=s[L];fn(F)?O?s[L]=R[L]:s[L]=T[L]:O=!0}const A=N?Zz(s,o,l):p?Yz(s):pA(s),D=A||hA(s);if(D)return dn.invalid(D);const M=N?$C(s,o,l):p?BC(s):s,[W,P]=by(M,d,r),j=new dn({ts:W,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==j.weekday?dn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${j.toISO()}`):j.isValid?j:dn.invalid(j.invalid)}static fromISO(e,n={}){const[r,i]=WW(e);return Qu(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=VW(e);return Qu(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=UW(e);return Qu(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(fn(e)||fn(n))throw new _i("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[l,u,d,p]=b6(o,e,n);return p?dn.invalid(p):Qu(l,u,r,`format ${n}`,e,d)}static fromString(e,n,r={}){return dn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=YW(e);return Qu(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the DateTime is invalid");const r=e instanceof Co?e:new Co(e,n);if(Or.throwOnInvalid)throw new Ez(r);return new dn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=MA(e,Vn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return FA(Ei.parseFormat(e),Vn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){vy=void 0,xy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?i_(this).weekYear:NaN}get weekNumber(){return this.isValid?i_(this).weekNumber:NaN}get weekday(){return this.isValid?i_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?s_(this).weekday:NaN}get localWeekNumber(){return this.isValid?s_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?s_(this).weekYear:NaN}get ordinal(){return this.isValid?t_(this.c).ordinal:NaN}get monthShort(){return this.isValid?Mg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Mg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Mg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Mg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=fv(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),l=this.zone.offset(r-s*n);if(o===l)return[this];const u=r-o*n,d=r-l*n,p=Bg(u,o),h=Bg(d,l);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[Cc(this,{ts:u}),Cc(this,{ts:d})]:[this]}get isInLeapYear(){return em(this.year)}get daysInMonth(){return ab(this.year,this.month)}get daysInYear(){return this.isValid?vd(this.year):NaN}get weeksInWeekYear(){return this.isValid?uh(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?uh(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Ei.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Li.instance(e),n)}toLocal(){return this.setZone(Or.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Cl(e,Or.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=by(o,s,e)}return Cc(this,{ts:i,zone:e})}else return dn.invalid(Tp(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Cc(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=lb(e,eT),{minDaysInFirstWeek:r,startOfWeek:i}=zC(n,this.loc),s=!fn(n.weekYear)||!fn(n.weekNumber)||!fn(n.weekday),o=!fn(n.ordinal),l=!fn(n.year),u=!fn(n.month)||!fn(n.day),d=l||u,p=n.weekYear||n.weekNumber;if((d||o)&&p)throw new ad("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new ad("Can't mix ordinal dates with month/day");let h;s?h=$C({...ob(this.c,r,i),...n},r,i):fn(n.ordinal)?(h={...this.toObject(),...n},fn(n.day)&&(h.day=Math.min(ab(h.year,h.month),h.day))):h=BC({...t_(this.c),...n});const[b,x]=by(h,this.o,this.zone);return Cc(this,{ts:b,o:x})}plus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e);return Cc(this,YC(this,n))}minus(e){if(!this.isValid)return this;const n=An.fromDurationLike(e).negate();return Cc(this,YC(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=An.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Ei.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):r_}toLocaleString(e=sb,n={}){return this.isValid?Ei.create(this.loc.clone(n),e).formatDateTime(this):r_}toLocaleParts(e={}){return this.isValid?Ei.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=o_(this,o);return l+="T",l+=XC(this,o,n,r,i,s),l}toISODate({format:e="extended"}={}){return this.isValid?o_(this,e==="extended"):null}toISOWeekDate(){return zg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+XC(this,o==="extended",n,e,r,s):null}toRFC2822(){return zg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return zg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?o_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),zg(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():r_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return An.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=tW(n).map(An.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,u=o?e:this,d=s6(l,u,s,i);return o?d.negate():d}diffNow(e="milliseconds",n={}){return this.diff(dn.now(),e,n)}until(e){return this.isValid?Rr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||dn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),nT(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?nT(e.base||dn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(dn.isDateTime))throw new _i("min requires all arguments be DateTimes");return WC(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(dn.isDateTime))throw new _i("max requires all arguments be DateTimes");return WC(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return LA(o,e,n)}static fromStringExplain(e,n,r={}){return dn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Vn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new DA(s,e)}static fromFormatParser(e,n,r={}){if(fn(e)||fn(n))throw new _i("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new _i(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:l,zone:u,specificOffset:d,invalidReason:p}=n.explainFromTokens(e);return p?dn.invalid(p):Qu(l,u,r,`format ${n.format}`,e,d)}static get DATE_SHORT(){return sb}static get DATE_MED(){return V3}static get DATE_MED_WITH_WEEKDAY(){return Iz}static get DATE_FULL(){return U3}static get DATE_HUGE(){return H3}static get TIME_SIMPLE(){return Q3}static get TIME_WITH_SECONDS(){return K3}static get TIME_WITH_SHORT_OFFSET(){return G3}static get TIME_WITH_LONG_OFFSET(){return J3}static get TIME_24_SIMPLE(){return Z3}static get TIME_24_WITH_SECONDS(){return Y3}static get TIME_24_WITH_SHORT_OFFSET(){return X3}static get TIME_24_WITH_LONG_OFFSET(){return eA}static get DATETIME_SHORT(){return tA}static get DATETIME_SHORT_WITH_SECONDS(){return nA}static get DATETIME_MED(){return rA}static get DATETIME_MED_WITH_SECONDS(){return iA}static get DATETIME_MED_WITH_WEEKDAY(){return Cz}static get DATETIME_FULL(){return sA}static get DATETIME_FULL_WITH_SECONDS(){return oA}static get DATETIME_HUGE(){return aA}static get DATETIME_HUGE_WITH_SECONDS(){return lA}}function up(t){if(dn.isDateTime(t))return t;if(t&&t.valueOf&&Fl(t.valueOf()))return dn.fromJSDate(t);if(t&&typeof t=="object")return dn.fromObject(t);throw new _i(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function WA(t,e){return function(){return t.apply(e,arguments)}}const{toString:k6}=Object.prototype,{getPrototypeOf:y1}=Object,mv=(t=>e=>{const n=k6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Do=t=>(t=t.toLowerCase(),e=>mv(e)===t),gv=t=>e=>typeof e===t,{isArray:sf}=Array,dh=gv("undefined");function I6(t){return t!==null&&!dh(t)&&t.constructor!==null&&!dh(t.constructor)&&Ts(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const VA=Do("ArrayBuffer");function C6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&VA(t.buffer),e}const T6=gv("string"),Ts=gv("function"),UA=gv("number"),yv=t=>t!==null&&typeof t=="object",R6=t=>t===!0||t===!1,wy=t=>{if(mv(t)!=="object")return!1;const e=y1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},O6=Do("Date"),j6=Do("File"),q6=Do("Blob"),A6=Do("FileList"),P6=t=>yv(t)&&Ts(t.pipe),F6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ts(t.append)&&((e=mv(t))==="formdata"||e==="object"&&Ts(t.toString)&&t.toString()==="[object FormData]"))},D6=Do("URLSearchParams"),[L6,M6,$6,B6]=["ReadableStream","Request","Response","Headers"].map(Do),z6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),sf(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function HA(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Bc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,QA=t=>!dh(t)&&t!==Bc;function JS(){const{caseless:t}=QA(this)&&this||{},e={},n=(r,i)=>{const s=t&&HA(e,i)||i;wy(e[s])&&wy(r)?e[s]=JS(e[s],r):wy(r)?e[s]=JS({},r):sf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&rm(arguments[r],n);return e}const W6=(t,e,n,{allOwnKeys:r}={})=>(rm(e,(i,s)=>{n&&Ts(i)?t[s]=WA(i,n):t[s]=i},{allOwnKeys:r}),t),V6=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),U6=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},H6=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&y1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Q6=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},K6=t=>{if(!t)return null;if(sf(t))return t;let e=t.length;if(!UA(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},G6=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&y1(Uint8Array)),J6=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Z6=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Y6=Do("HTMLFormElement"),X6=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),iT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),eV=Do("RegExp"),KA=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};rm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},tV=t=>{KA(t,(e,n)=>{if(Ts(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ts(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},nV=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return sf(t)?r(t):r(String(t).split(e)),n},rV=()=>{},iV=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,a_="abcdefghijklmnopqrstuvwxyz",sT="0123456789",GA={DIGIT:sT,ALPHA:a_,ALPHA_DIGIT:a_+a_.toUpperCase()+sT},sV=(t=16,e=GA.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function oV(t){return!!(t&&Ts(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const aV=t=>{const e=new Array(10),n=(r,i)=>{if(yv(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=sf(r)?[]:{};return rm(r,(o,l)=>{const u=n(o,i+1);!dh(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},lV=Do("AsyncFunction"),cV=t=>t&&(yv(t)||Ts(t))&&Ts(t.then)&&Ts(t.catch),JA=((t,e)=>t?setImmediate:e?((n,r)=>(Bc.addEventListener("message",({source:i,data:s})=>{i===Bc&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Bc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ts(Bc.postMessage)),uV=typeof queueMicrotask<"u"?queueMicrotask.bind(Bc):typeof process<"u"&&process.nextTick||JA,Ye={isArray:sf,isArrayBuffer:VA,isBuffer:I6,isFormData:F6,isArrayBufferView:C6,isString:T6,isNumber:UA,isBoolean:R6,isObject:yv,isPlainObject:wy,isReadableStream:L6,isRequest:M6,isResponse:$6,isHeaders:B6,isUndefined:dh,isDate:O6,isFile:j6,isBlob:q6,isRegExp:eV,isFunction:Ts,isStream:P6,isURLSearchParams:D6,isTypedArray:G6,isFileList:A6,forEach:rm,merge:JS,extend:W6,trim:z6,stripBOM:V6,inherits:U6,toFlatObject:H6,kindOf:mv,kindOfTest:Do,endsWith:Q6,toArray:K6,forEachEntry:J6,matchAll:Z6,isHTMLForm:Y6,hasOwnProperty:iT,hasOwnProp:iT,reduceDescriptors:KA,freezeMethods:tV,toObjectSet:nV,toCamelCase:X6,noop:rV,toFiniteNumber:iV,findKey:HA,global:Bc,isContextDefined:QA,ALPHABET:GA,generateString:sV,isSpecCompliantForm:oV,toJSONObject:aV,isAsyncFn:lV,isThenable:cV,setImmediate:JA,asap:uV};function bn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const ZA=bn.prototype,YA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YA[t]={value:t}});Object.defineProperties(bn,YA);Object.defineProperty(ZA,"isAxiosError",{value:!0});bn.from=(t,e,n,r,i,s)=>{const o=Object.create(ZA);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),bn.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const dV=null;function ZS(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function XA(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function oT(t,e,n){return t?t.concat(e).map(function(i,s){return i=XA(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function fV(t){return Ye.isArray(t)&&!t.some(ZS)}const pV=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function bv(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,I){return!Ye.isUndefined(I[N])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function d(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new bn("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,N,I){let R=_;if(_&&!I&&typeof _=="object"){if(Ye.endsWith(N,"{}"))N=r?N:N.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&fV(_)||(Ye.isFileList(_)||Ye.endsWith(N,"[]"))&&(R=Ye.toArray(_)))return N=XA(N),R.forEach(function(O,A){!(Ye.isUndefined(O)||O===null)&&e.append(o===!0?oT([N],A,s):o===null?N:N+"[]",d(O))}),!1}return ZS(_)?!0:(e.append(oT(I,N,s),d(_)),!1)}const h=[],b=Object.assign(pV,{defaultVisitor:p,convertValue:d,isVisitable:ZS});function x(_,N){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+N.join("."));h.push(_),Ye.forEach(_,function(R,T){(!(Ye.isUndefined(R)||R===null)&&i.call(e,R,Ye.isString(T)?T.trim():T,N,b))===!0&&x(R,N?N.concat(T):[T])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function aT(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function b1(t,e){this._pairs=[],t&&bv(t,this,e)}const eP=b1.prototype;eP.append=function(e,n){this._pairs.push([e,n])};eP.toString=function(e){const n=e?function(r){return e.call(this,r,aT)}:aT;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function hV(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tP(t,e,n){if(!e)return t;const r=n&&n.encode||hV;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new b1(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class lT{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const nP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mV=typeof URLSearchParams<"u"?URLSearchParams:b1,gV=typeof FormData<"u"?FormData:null,yV=typeof Blob<"u"?Blob:null,bV={isBrowser:!0,classes:{URLSearchParams:mV,FormData:gV,Blob:yV},protocols:["http","https","file","blob","url","data"]},v1=typeof window<"u"&&typeof document<"u",YS=typeof navigator=="object"&&navigator||void 0,vV=v1&&(!YS||["ReactNative","NativeScript","NS"].indexOf(YS.product)<0),xV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wV=v1&&window.location.href||"http://localhost",_V=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:v1,hasStandardBrowserEnv:vV,hasStandardBrowserWebWorkerEnv:xV,navigator:YS,origin:wV},Symbol.toStringTag,{value:"Module"})),Ni={..._V,...bV};function SV(t,e){return bv(t,new Ni.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ni.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function EV(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function NV(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function rP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=NV(i[o])),!l)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(EV(r),i,n,0)}),n}return null}function kV(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const im={transitional:nP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(rP(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return SV(e,this.formSerializer).toString();if((l=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return bv(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),kV(e)):e}],transformResponse:[function(e){const n=this.transitional||im.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?bn.from(l,bn.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ni.classes.FormData,Blob:Ni.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{im.headers[t]={}});const IV=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),CV=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&IV[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},cT=Symbol("internals");function dp(t){return t&&String(t).trim().toLowerCase()}function _y(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(_y):String(t)}function TV(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const RV=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function l_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function OV(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function jV(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let ls=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,d){const p=dp(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||d===!0||d===void 0&&i[h]!==!1)&&(i[h||u]=_y(l))}const o=(l,u)=>Ye.forEach(l,(d,p)=>s(d,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!RV(e))o(CV(e),n);else if(Ye.isHeaders(e))for(const[l,u]of e.entries())s(u,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=dp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return TV(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=dp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||l_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=dp(o),o){const l=Ye.findKey(r,o);l&&(!n||l_(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||l_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=_y(i),delete n[s];return}const l=e?OV(s):String(s).trim();l!==s&&delete n[s],n[l]=_y(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[cT]=this[cT]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=dp(o);r[l]||(jV(i,o),r[l]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};ls.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(ls.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(ls);function c_(t,e){const n=this||im,r=e||n,i=ls.from(r.headers);let s=r.data;return Ye.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function iP(t){return!!(t&&t.__CANCEL__)}function of(t,e,n){bn.call(this,t??"canceled",bn.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(of,bn,{__CANCEL__:!0});function sP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new bn("Request failed with status code "+n.status,[bn.ERR_BAD_REQUEST,bn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function qV(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function AV(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),p=r[s];o||(o=d),n[i]=u,r[i]=d;let h=s,b=0;for(;h!==i;)b+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),d-o<e)return;const x=p&&d-p;return x?Math.round(b*1e3/x):void 0}}function PV(t,e){let n=0,r=1e3/e,i,s;const o=(d,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,d)};return[(...d)=>{const p=Date.now(),h=p-n;h>=r?o(d,p):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const cb=(t,e,n=3)=>{let r=0;const i=AV(50,250);return PV(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-r,d=i(u),p=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:d||void 0,estimated:d&&l&&p?(l-o)/d:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},uT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},dT=t=>(...e)=>Ye.asap(()=>t(...e)),FV=Ni.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ni.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ni.origin),Ni.navigator&&/(msie|trident)/i.test(Ni.navigator.userAgent)):()=>!0,DV=Ni.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LV(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MV(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function oP(t,e){return t&&!LV(e)?MV(t,e):e}const fT=t=>t instanceof ls?{...t}:t;function Yc(t,e){e=e||{};const n={};function r(d,p,h,b){return Ye.isPlainObject(d)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:b},d,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(d,p,h,b){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d,h,b)}else return r(d,p,h,b)}function s(d,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(d,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(d))return r(void 0,d)}else return r(void 0,p)}function l(d,p,h){if(h in e)return r(d,p);if(h in t)return r(void 0,d)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,p,h)=>i(fT(d),fT(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,b=h(t[p],e[p],p);Ye.isUndefined(b)&&h!==l||(n[p]=b)}),n}const aP=t=>{const e=Yc({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=ls.from(o),e.url=tP(oP(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(Ye.isFormData(n)){if(Ni.hasStandardBrowserEnv||Ni.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[d,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...p].join("; "))}}if(Ni.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&FV(e.url))){const d=i&&s&&DV.read(s);d&&o.set(i,d)}return e},$V=typeof XMLHttpRequest<"u",BV=$V&&function(t){return new Promise(function(n,r){const i=aP(t);let s=i.data;const o=ls.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:d}=i,p,h,b,x,_;function N(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function R(){if(!I)return;const O=ls.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:O,config:t,request:I};sP(function(W){n(W),N()},function(W){r(W),N()},D),I=null}"onloadend"in I?I.onloadend=R:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(R)},I.onabort=function(){I&&(r(new bn("Request aborted",bn.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new bn("Network Error",bn.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||nP;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new bn(A,D.clarifyTimeoutError?bn.ETIMEDOUT:bn.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&Ye.forEach(o.toJSON(),function(A,D){I.setRequestHeader(D,A)}),Ye.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),l&&l!=="json"&&(I.responseType=i.responseType),d&&([b,_]=cb(d,!0),I.addEventListener("progress",b)),u&&I.upload&&([h,x]=cb(u),I.upload.addEventListener("progress",h),I.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=O=>{I&&(r(!O||O.type?new of(null,t,I):O),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const T=qV(i.url);if(T&&Ni.protocols.indexOf(T)===-1){r(new bn("Unsupported protocol "+T+":",bn.ERR_BAD_REQUEST,t));return}I.send(s||null)})},zV=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(d){if(!i){i=!0,l();const p=d instanceof Error?d:this.reason;r.abort(p instanceof bn?p:new of(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new bn(`timeout ${e} of ms exceeded`,bn.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),t=null)};t.forEach(d=>d.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(l),u}},WV=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},VV=async function*(t,e){for await(const n of UV(t))yield*WV(n,e)},UV=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},pT=(t,e,n,r)=>{const i=VV(t,e);let s=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:p}=await i.next();if(d){l(),u.close();return}let h=p.byteLength;if(n){let b=s+=h;n(b)}u.enqueue(new Uint8Array(p))}catch(d){throw l(d),d}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},vv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",lP=vv&&typeof ReadableStream=="function",HV=vv&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),cP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},QV=lP&&cP(()=>{let t=!1;const e=new Request(Ni.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),hT=64*1024,XS=lP&&cP(()=>Ye.isReadableStream(new Response("").body)),ub={stream:XS&&(t=>t.body)};vv&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ub[e]&&(ub[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new bn(`Response type '${e}' is not supported`,bn.ERR_NOT_SUPPORT,r)})})})(new Response);const KV=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Ni.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await HV(t)).byteLength},GV=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??KV(e)},JV=vv&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:d,headers:p,withCredentials:h="same-origin",fetchOptions:b}=aP(t);d=d?(d+"").toLowerCase():"text";let x=zV([i,s&&s.toAbortSignal()],o),_;const N=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let I;try{if(u&&QV&&n!=="get"&&n!=="head"&&(I=await GV(p,r))!==0){let D=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(Ye.isFormData(r)&&(M=D.headers.get("content-type"))&&p.setContentType(M),D.body){const[W,P]=uT(I,cb(dT(u)));r=pT(D.body,hT,W,P)}}Ye.isString(h)||(h=h?"include":"omit");const R="credentials"in Request.prototype;_=new Request(e,{...b,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:R?h:void 0});let T=await fetch(_);const O=XS&&(d==="stream"||d==="response");if(XS&&(l||O&&N)){const D={};["status","statusText","headers"].forEach(j=>{D[j]=T[j]});const M=Ye.toFiniteNumber(T.headers.get("content-length")),[W,P]=l&&uT(M,cb(dT(l),!0))||[];T=new Response(pT(T.body,hT,W,()=>{P&&P(),N&&N()}),D)}d=d||"text";let A=await ub[Ye.findKey(ub,d)||"text"](T,t);return!O&&N&&N(),await new Promise((D,M)=>{sP(D,M,{data:A,headers:ls.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:_})})}catch(R){throw N&&N(),R&&R.name==="TypeError"&&/fetch/i.test(R.message)?Object.assign(new bn("Network Error",bn.ERR_NETWORK,t,_),{cause:R.cause||R}):bn.from(R,R&&R.code,t,_)}}),eE={http:dV,xhr:BV,fetch:JV};Ye.forEach(eE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const mT=t=>`- ${t}`,ZV=t=>Ye.isFunction(t)||t===null||t===!1,uP={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!ZV(n)&&(r=eE[(o=String(n)).toLowerCase()],r===void 0))throw new bn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(mT).join(`
`):" "+mT(s[0]):"as no adapter specified";throw new bn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:eE};function u_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new of(null,t)}function gT(t){return u_(t),t.headers=ls.from(t.headers),t.data=c_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),uP.getAdapter(t.adapter||im.adapter)(t).then(function(r){return u_(t),r.data=c_.call(t,t.transformResponse,r),r.headers=ls.from(r.headers),r},function(r){return iP(r)||(u_(t),r&&r.response&&(r.response.data=c_.call(t,t.transformResponse,r.response),r.response.headers=ls.from(r.response.headers))),Promise.reject(r)})}const dP="1.7.9",xv={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{xv[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const yT={};xv.transitional=function(e,n,r){function i(s,o){return"[Axios v"+dP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new bn(i(o," has been removed"+(n?" in "+n:"")),bn.ERR_DEPRECATED);return n&&!yT[o]&&(yT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};xv.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function YV(t,e,n){if(typeof t!="object")throw new bn("options must be an object",bn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new bn("option "+s+" must be "+u,bn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new bn("Unknown option "+s,bn.ERR_BAD_OPTION)}}const Sy={assertOptions:YV,validators:xv},Uo=Sy.validators;let Hc=class{constructor(e){this.defaults=e,this.interceptors={request:new lT,response:new lT}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Yc(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Sy.assertOptions(r,{silentJSONParsing:Uo.transitional(Uo.boolean),forcedJSONParsing:Uo.transitional(Uo.boolean),clarifyTimeoutError:Uo.transitional(Uo.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:Sy.assertOptions(i,{encode:Uo.function,serialize:Uo.function},!0)),Sy.assertOptions(n,{baseUrl:Uo.spelling("baseURL"),withXsrfToken:Uo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=ls.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(u=u&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let p,h=0,b;if(!u){const _=[gT.bind(this),void 0];for(_.unshift.apply(_,l),_.push.apply(_,d),b=_.length,p=Promise.resolve(n);h<b;)p=p.then(_[h++],_[h++]);return p}b=l.length;let x=n;for(h=0;h<b;){const _=l[h++],N=l[h++];try{x=_(x)}catch(I){N.call(this,I);break}}try{p=gT.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,b=d.length;h<b;)p=p.then(d[h++],d[h++]);return p}getUri(e){e=Yc(this.defaults,e);const n=oP(e.baseURL,e.url);return tP(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){Hc.prototype[e]=function(n,r){return this.request(Yc(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(Yc(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Hc.prototype[e]=n(),Hc.prototype[e+"Form"]=n(!0)});let XV=class fP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new of(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new fP(function(i){e=i}),cancel:e}}};function eU(t){return function(n){return t.apply(null,n)}}function tU(t){return Ye.isObject(t)&&t.isAxiosError===!0}const tE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tE).forEach(([t,e])=>{tE[e]=t});function pP(t){const e=new Hc(t),n=WA(Hc.prototype.request,e);return Ye.extend(n,Hc.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return pP(Yc(t,i))},n}const Dr=pP(im);Dr.Axios=Hc;Dr.CanceledError=of;Dr.CancelToken=XV;Dr.isCancel=iP;Dr.VERSION=dP;Dr.toFormData=bv;Dr.AxiosError=bn;Dr.Cancel=Dr.CanceledError;Dr.all=function(e){return Promise.all(e)};Dr.spread=eU;Dr.isAxiosError=tU;Dr.mergeConfig=Yc;Dr.AxiosHeaders=ls;Dr.formToJSON=t=>rP(Ye.isHTMLForm(t)?new FormData(t):t);Dr.getAdapter=uP.getAdapter;Dr.HttpStatusCode=tE;Dr.default=Dr;const{Axios:Tle,AxiosError:nU,CanceledError:Rle,isCancel:Ole,CancelToken:jle,VERSION:qle,all:Ale,Cancel:Ple,isAxiosError:Fle,spread:Dle,toFormData:Lle,AxiosHeaders:Mle,HttpStatusCode:$le,formToJSON:Ble,getAdapter:zle,mergeConfig:Wle}=Dr,x1=({error:t,schema:e,onError:n})=>{if(t instanceof nU){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var d_,bT;function rU(){if(bT)return d_;bT=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return d_=n,d_}var iU=rU();const sU=lo(iU),oU=({instance:t,limit:e}={})=>sU(t||Dr,e||{maxRequests:5,perMilliseconds:100}),w1="-",aU=t=>{const e=cU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(w1);return l[0]===""&&l.length!==1&&l.shift(),hP(l,e)||lU(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},hP=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?hP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(w1);return e.validators.find(({validator:o})=>o(s))?.classGroupId},vT=/^\[(.+)\]$/,lU=t=>{if(vT.test(t)){const e=vT.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},cU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return dU(Object.entries(t.classGroups),n).forEach(([s,o])=>{nE(o,r,s,e)}),r},nE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:xT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(uU(i)){nE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{nE(o,xT(e,s),n,r)})})},xT=(t,e)=>{let n=t;return e.split(w1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uU=t=>t.isThemeGetter,dU=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,fU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},mP="!",pU=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const u=[];let d=0,p=0,h;for(let I=0;I<l.length;I++){let R=l[I];if(d===0){if(R===i&&(r||l.slice(I,I+s)===e)){u.push(l.slice(p,I)),p=I+s;continue}if(R==="/"){h=I;continue}}R==="["?d++:R==="]"&&d--}const b=u.length===0?l:l.substring(p),x=b.startsWith(mP),_=x?b.substring(1):b,N=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:N}};return n?l=>n({className:l,parseClassName:o}):o},hU=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},mU=t=>({cache:fU(t.cacheSize),parseClassName:pU(t),...aU(t)}),gU=/\s+/,yU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(gU);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:x}=n(d);let _=!!x,N=r(_?b.substring(0,x):b);if(!N){if(!_){l=d+(l.length>0?" "+l:l);continue}if(N=r(b),!N){l=d+(l.length>0?" "+l:l);continue}_=!1}const I=hU(p).join(":"),R=h?I+mP:I,T=R+N;if(s.includes(T))continue;s.push(T);const O=i(N,_);for(let A=0;A<O.length;++A){const D=O[A];s.push(R+D)}l=d+(l.length>0?" "+l:l)}return l};function bU(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=gP(e))&&(r&&(r+=" "),r+=n);return r}const gP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=gP(t[r]))&&(n&&(n+=" "),n+=e);return n};function vU(t,...e){let n,r,i,s=o;function o(u){const d=e.reduce((p,h)=>h(p),t());return n=mU(d),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const d=r(u);if(d)return d;const p=yU(u,n);return i(u,p),p}return function(){return s(bU.apply(null,arguments))}}const ur=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},yP=/^\[(?:([a-z-]+):)?(.+)\]$/i,xU=/^\d+\/\d+$/,wU=new Set(["px","full","screen"]),_U=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,NU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Na=t=>wd(t)||wU.has(t)||xU.test(t),yl=t=>af(t,"length",AU),wd=t=>!!t&&!Number.isNaN(Number(t)),f_=t=>af(t,"number",wd),fp=t=>!!t&&Number.isInteger(Number(t)),IU=t=>t.endsWith("%")&&wd(t.slice(0,-1)),_n=t=>yP.test(t),bl=t=>_U.test(t),CU=new Set(["length","size","percentage"]),TU=t=>af(t,CU,bP),RU=t=>af(t,"position",bP),OU=new Set(["image","url"]),jU=t=>af(t,OU,FU),qU=t=>af(t,"",PU),pp=()=>!0,af=(t,e,n)=>{const r=yP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},AU=t=>SU.test(t)&&!EU.test(t),bP=()=>!1,PU=t=>NU.test(t),FU=t=>kU.test(t),DU=()=>{const t=ur("colors"),e=ur("spacing"),n=ur("blur"),r=ur("brightness"),i=ur("borderColor"),s=ur("borderRadius"),o=ur("borderSpacing"),l=ur("borderWidth"),u=ur("contrast"),d=ur("grayscale"),p=ur("hueRotate"),h=ur("invert"),b=ur("gap"),x=ur("gradientColorStops"),_=ur("gradientColorStopPositions"),N=ur("inset"),I=ur("margin"),R=ur("opacity"),T=ur("padding"),O=ur("saturate"),A=ur("scale"),D=ur("sepia"),M=ur("skew"),W=ur("space"),P=ur("translate"),j=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",_n,e],V=()=>[_n,e],U=()=>["",Na,yl],z=()=>["auto",wd,_n],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",_n],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[wd,_n];return{cacheSize:500,separator:":",theme:{colors:[pp],spacing:[Na,yl],blur:["none","",bl,_n],brightness:X(),borderColor:[t],borderRadius:["none","","full",bl,_n],borderSpacing:V(),borderWidth:U(),contrast:X(),grayscale:te(),hueRotate:X(),invert:te(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[IU,yl],inset:F(),margin:F(),opacity:X(),padding:V(),saturate:X(),scale:X(),sepia:te(),skew:X(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",_n]}],container:["container"],columns:[{columns:[bl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),_n]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fp,_n]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_n]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",fp,_n]}],"grid-cols":[{"grid-cols":[pp]}],"col-start-end":[{col:["auto",{span:["full",fp,_n]},_n]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[pp]}],"row-start-end":[{row:["auto",{span:[fp,_n]},_n]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_n]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_n]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_n,e]}],"min-w":[{"min-w":[_n,e,"min","max","fit"]}],"max-w":[{"max-w":[_n,e,"none","full","min","max","fit","prose",{screen:[bl]},bl]}],h:[{h:[_n,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_n,e,"auto","min","max","fit"]}],"font-size":[{text:["base",bl,yl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",f_]}],"font-family":[{font:[pp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_n]}],"line-clamp":[{"line-clamp":["none",wd,f_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Na,_n]}],"list-image":[{"list-image":["none",_n]}],"list-style-type":[{list:["none","disc","decimal",_n]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[R]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[R]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Na,yl]}],"underline-offset":[{"underline-offset":["auto",Na,_n]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_n]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_n]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[R]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),RU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",TU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[R]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[R]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Na,_n]}],"outline-w":[{outline:[Na,yl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[R]}],"ring-offset-w":[{"ring-offset":[Na,yl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",bl,qU]}],"shadow-color":[{shadow:[pp]}],opacity:[{opacity:[R]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",bl,_n]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[O]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[R]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_n]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",_n]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",_n]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[fp,_n]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_n]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_n]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_n]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Na,yl,f_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vP=vU(DU),rE=new Proxy(()=>rE,{get:()=>rE});function gn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(l,u)=>({css:d,...p}={})=>{const h=[],b=t,x={...b?.()?.config.defaults,...i,...o,...p};h.push(b?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,N]of Object.entries(x)){const I=n[_]?.[N];I&&h.push(I)}for(const _ of r)Object.entries(_.if).every(([N,I])=>I===x[N])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(d),vP(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:rE()})}const Sn=vP;var p_,wT;function xP(){return wT||(wT=1,p_=Object),p_}var h_,_T;function LU(){return _T||(_T=1,h_=Error),h_}var m_,ST;function MU(){return ST||(ST=1,m_=EvalError),m_}var g_,ET;function $U(){return ET||(ET=1,g_=RangeError),g_}var y_,NT;function BU(){return NT||(NT=1,y_=ReferenceError),y_}var b_,kT;function zU(){return kT||(kT=1,b_=SyntaxError),b_}var v_,IT;function wP(){return IT||(IT=1,v_=TypeError),v_}var x_,CT;function WU(){return CT||(CT=1,x_=URIError),x_}var w_,TT;function VU(){return TT||(TT=1,w_=Math.abs),w_}var __,RT;function UU(){return RT||(RT=1,__=Math.floor),__}var S_,OT;function HU(){return OT||(OT=1,S_=Math.max),S_}var E_,jT;function QU(){return jT||(jT=1,E_=Math.min),E_}var N_,qT;function KU(){return qT||(qT=1,N_=Math.pow),N_}var k_,AT;function GU(){return AT||(AT=1,k_=Math.round),k_}var I_,PT;function JU(){return PT||(PT=1,I_=Number.isNaN||function(e){return e!==e}),I_}var C_,FT;function ZU(){if(FT)return C_;FT=1;var t=JU();return C_=function(n){return t(n)||n===0?n:n<0?-1:1},C_}var T_,DT;function YU(){return DT||(DT=1,T_=Object.getOwnPropertyDescriptor),T_}var R_,LT;function _P(){if(LT)return R_;LT=1;var t=YU();if(t)try{t([],"length")}catch{t=null}return R_=t,R_}var O_,MT;function XU(){if(MT)return O_;MT=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return O_=t,O_}var j_,$T;function SP(){return $T||($T=1,j_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),j_}var q_,BT;function e5(){if(BT)return q_;BT=1;var t=typeof Symbol<"u"&&Symbol,e=SP();return q_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},q_}var A_,zT;function EP(){return zT||(zT=1,A_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),A_}var P_,WT;function NP(){if(WT)return P_;WT=1;var t=xP();return P_=t.getPrototypeOf||null,P_}var F_,VT;function t5(){if(VT)return F_;VT=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,d){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var b=0;b<d.length;b+=1)p[b+u.length]=d[b];return p},s=function(u,d){for(var p=[],h=d,b=0;h<u.length;h+=1,b+=1)p[b]=u[h];return p},o=function(l,u){for(var d="",p=0;p<l.length;p+=1)d+=l[p],p+1<l.length&&(d+=u);return d};return F_=function(u){var d=this;if(typeof d!="function"||e.apply(d)!==r)throw new TypeError(t+d);for(var p=s(arguments,1),h,b=function(){if(this instanceof h){var R=d.apply(this,i(p,arguments));return Object(R)===R?R:this}return d.apply(u,i(p,arguments))},x=n(0,d.length-p.length),_=[],N=0;N<x;N++)_[N]="$"+N;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(b),d.prototype){var I=function(){};I.prototype=d.prototype,h.prototype=new I,I.prototype=null}return h},F_}var D_,UT;function wv(){if(UT)return D_;UT=1;var t=t5();return D_=Function.prototype.bind||t,D_}var L_,HT;function _1(){return HT||(HT=1,L_=Function.prototype.call),L_}var M_,QT;function kP(){return QT||(QT=1,M_=Function.prototype.apply),M_}var $_,KT;function n5(){return KT||(KT=1,$_=typeof Reflect<"u"&&Reflect&&Reflect.apply),$_}var B_,GT;function r5(){if(GT)return B_;GT=1;var t=wv(),e=kP(),n=_1(),r=n5();return B_=r||t.call(n,e),B_}var z_,JT;function IP(){if(JT)return z_;JT=1;var t=wv(),e=wP(),n=_1(),r=r5();return z_=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},z_}var W_,ZT;function i5(){if(ZT)return W_;ZT=1;var t=IP(),e=_P(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return W_=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(l){return s(l==null?l:i(l))}:!1,W_}var V_,YT;function s5(){if(YT)return V_;YT=1;var t=EP(),e=NP(),n=i5();return V_=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,V_}var U_,XT;function o5(){if(XT)return U_;XT=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=wv();return U_=n.call(t,e),U_}var H_,eR;function a5(){if(eR)return H_;eR=1;var t,e=xP(),n=LU(),r=MU(),i=$U(),s=BU(),o=zU(),l=wP(),u=WU(),d=VU(),p=UU(),h=HU(),b=QU(),x=KU(),_=GU(),N=ZU(),I=Function,R=function(De){try{return I('"use strict"; return ('+De+").constructor;")()}catch{}},T=_P(),O=XU(),A=function(){throw new l},D=T?function(){try{return arguments.callee,A}catch{try{return T(arguments,"callee").get}catch{return A}}}():A,M=e5()(),W=s5(),P=NP(),j=EP(),L=kP(),F=_1(),V={},U=typeof Uint8Array>"u"||!W?t:W(Uint8Array),z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":M&&W?W([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":V,"%AsyncGenerator%":V,"%AsyncGeneratorFunction%":V,"%AsyncIteratorPrototype%":V,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":V,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M&&W?W(W([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M||!W?t:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":T,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M||!W?t:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M&&W?W(""[Symbol.iterator]()):t,"%Symbol%":M?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":D,"%TypedArray%":U,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":L,"%Object.defineProperty%":O,"%Object.getPrototypeOf%":P,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":N,"%Reflect.getPrototypeOf%":j};if(W)try{null.error}catch(De){var ee=W(W(De));z["%Error.prototype%"]=ee}var Z=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=R("async function () {}");else if(Je==="%GeneratorFunction%")Xe=R("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=R("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ve=De("%AsyncGeneratorFunction%");Ve&&(Xe=Ve.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ct=De("%AsyncGenerator%");ct&&W&&(Xe=W(ct.prototype))}return z[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},se=wv(),te=o5(),oe=se.call(F,Array.prototype.concat),X=se.call(L,Array.prototype.splice),ue=se.call(F,String.prototype.replace),de=se.call(F,String.prototype.slice),ye=se.call(F,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ne=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ve=de(Je,-1);if(Xe==="%"&&Ve!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ve==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ct=[];return ue(Je,we,function(_t,Tt,Ut,rn){ct[ct.length]=Ut?ue(rn,Ne,"$1"):Tt||_t}),ct},Oe=function(Je,Xe){var Ve=Je,ct;if(te(le,Ve)&&(ct=le[Ve],Ve="%"+ct[0]+"%"),te(z,Ve)){var _t=z[Ve];if(_t===V&&(_t=Z(Ve)),typeof _t>"u"&&!Xe)throw new l("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ct,name:Ve,value:_t}}throw new o("intrinsic "+Je+" does not exist!")};return H_=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ve=ze(Je),ct=Ve.length>0?Ve[0]:"",_t=Oe("%"+ct+"%",Xe),Tt=_t.name,Ut=_t.value,rn=!1,xe=_t.alias;xe&&(ct=xe[0],X(Ve,oe([0,1],xe)));for(var be=1,ke=!0;be<Ve.length;be+=1){var Ae=Ve[be],Ue=de(Ae,0,1),rt=de(Ae,-1);if((Ue==='"'||Ue==="'"||Ue==="`"||rt==='"'||rt==="'"||rt==="`")&&Ue!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!ke)&&(rn=!0),ct+="."+Ae,Tt="%"+ct+"%",te(z,Tt))Ut=z[Tt];else if(Ut!=null){if(!(Ae in Ut)){if(!Xe)throw new l("base intrinsic for "+Je+" exists, but the property is not available.");return}if(T&&be+1>=Ve.length){var Me=T(Ut,Ae);ke=!!Me,ke&&"get"in Me&&!("originalValue"in Me.get)?Ut=Me.get:Ut=Ut[Ae]}else ke=te(Ut,Ae),Ut=Ut[Ae];ke&&!rn&&(z[Tt]=Ut)}}return Ut},H_}var Q_,tR;function l5(){if(tR)return Q_;tR=1;var t=a5(),e=IP(),n=e([t("%String.prototype.indexOf%")]);return Q_=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},Q_}var K_,nR;function c5(){if(nR)return K_;nR=1;var t=SP();return K_=function(){return t()&&!!Symbol.toStringTag},K_}var G_,rR;function u5(){if(rR)return G_;rR=1;var t=l5(),e=t("String.prototype.valueOf"),n=function(l){try{return e(l),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=c5()();return G_=function(l){return typeof l=="string"?!0:!l||typeof l!="object"?!1:s?n(l):r(l)===i},G_}var d5=u5();const f5=lo(d5),_v=t=>f5(t),p5=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const l=n.regionLowerCase?s.toLowerCase():s;if(e.includes(l))return r.push({index:o,appLocale:l}),!0;const{isAvailable:u,appLocale:d}=h5(l,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?d.toLowerCase():d}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},h5=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!Ey()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=Ey()?new Intl.Locale(t).minimize().language:t.split("-")[0],l=Ey()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===l;return u&&(r=s),u}),appLocale:r}},m5=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},Ey=()=>Intl&&"Locale"in Intl,g5=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=Ey()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:l}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${l}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},y5=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=m5(n),i=g5([...r,t],n);return p5(i,e,n)[0]||t},b5=({available:t,fallback:e})=>y5(e,t,{languageOnly:!0});var J_={exports:{}};const v5={},x5=Object.freeze(Object.defineProperty({__proto__:null,default:v5},Symbol.toStringTag,{value:"Module"})),iR=L$(x5);var sR;function w5(){return sR||(sR=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Dc:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),d=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],b=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});var _=function(M,W){return function(P){return new O(W,!0).update(P)[M]()}},N=function(M){var W=_("hex",M);s&&(W=I(W,M)),W.create=function(){return new O(M)},W.update=function(L){return W.create().update(L)};for(var P=0;P<b.length;++P){var j=b[P];W[j]=_(j,M)}return W},I=function(M,W){var P=iR,j=iR.Buffer,L=W?"sha224":"sha256",F;j.from&&!r.JS_SHA256_NO_BUFFER_FROM?F=j.from:F=function(U){return new j(U)};var V=function(U){if(typeof U=="string")return P.createHash(L).update(U,"utf8").digest("hex");if(U==null)throw new Error(e);return U.constructor===ArrayBuffer&&(U=new Uint8Array(U)),Array.isArray(U)||ArrayBuffer.isView(U)||U.constructor===j?P.createHash(L).update(F(U)).digest("hex"):M(U)};return V},R=function(M,W){return function(P,j){return new A(P,W,!0).update(j)[M]()}},T=function(M){var W=R("hex",M);W.create=function(L){return new A(L,M)},W.update=function(L,F){return W.create(L).update(F)};for(var P=0;P<b.length;++P){var j=b[P];W[j]=R(j,M)}return W};function O(M,W){W?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=M}O.prototype.update=function(M){if(!this.finalized){var W,P=typeof M;if(P!=="string"){if(P==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);W=!0}for(var j,L=0,F,V=M.length,U=this.blocks;L<V;){if(this.hashed&&(this.hashed=!1,U[0]=this.block,this.block=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0),W)for(F=this.start;L<V&&F<64;++L)U[F>>>2]|=M[L]<<p[F++&3];else for(F=this.start;L<V&&F<64;++L)j=M.charCodeAt(L),j<128?U[F>>>2]|=j<<p[F++&3]:j<2048?(U[F>>>2]|=(192|j>>>6)<<p[F++&3],U[F>>>2]|=(128|j&63)<<p[F++&3]):j<55296||j>=57344?(U[F>>>2]|=(224|j>>>12)<<p[F++&3],U[F>>>2]|=(128|j>>>6&63)<<p[F++&3],U[F>>>2]|=(128|j&63)<<p[F++&3]):(j=65536+((j&1023)<<10|M.charCodeAt(++L)&1023),U[F>>>2]|=(240|j>>>18)<<p[F++&3],U[F>>>2]|=(128|j>>>12&63)<<p[F++&3],U[F>>>2]|=(128|j>>>6&63)<<p[F++&3],U[F>>>2]|=(128|j&63)<<p[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=U[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,W=this.lastByteIndex;M[16]=this.block,M[W>>>2]|=d[W&3],this.block=M[16],W>=56&&(this.hashed||this.hash(),M[0]=this.block,M[16]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0),M[14]=this.hBytes<<3|this.bytes>>>29,M[15]=this.bytes<<3,this.hash()}},O.prototype.hash=function(){var M=this.h0,W=this.h1,P=this.h2,j=this.h3,L=this.h4,F=this.h5,V=this.h6,U=this.h7,z=this.blocks,ee,Z,le,se,te,oe,X,ue,de,ye,we;for(ee=16;ee<64;++ee)te=z[ee-15],Z=(te>>>7|te<<25)^(te>>>18|te<<14)^te>>>3,te=z[ee-2],le=(te>>>17|te<<15)^(te>>>19|te<<13)^te>>>10,z[ee]=z[ee-16]+Z+z[ee-7]+le<<0;for(we=W&P,ee=0;ee<64;ee+=4)this.first?(this.is224?(ue=300032,te=z[0]-0x543c9a5b,U=te-0x8f1a6c7<<0,j=te+0x170e9b5<<0):(ue=0x2a01a605,te=z[0]-0xc881298,U=te-0x5ab00ac6<<0,j=te+0x8909ae5<<0),this.first=!1):(Z=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),le=(L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7),ue=M&W,se=ue^M&P^we,X=L&F^~L&V,te=U+le+X+h[ee]+z[ee],oe=Z+se,U=j+te<<0,j=te+oe<<0),Z=(j>>>2|j<<30)^(j>>>13|j<<19)^(j>>>22|j<<10),le=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),de=j&M,se=de^j&W^ue,X=U&L^~U&F,te=V+le+X+h[ee+1]+z[ee+1],oe=Z+se,V=P+te<<0,P=te+oe<<0,Z=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),ye=P&j,se=ye^P&M^de,X=V&U^~V&L,te=F+le+X+h[ee+2]+z[ee+2],oe=Z+se,F=W+te<<0,W=te+oe<<0,Z=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),le=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),we=W&P,se=we^W&j^ye,X=F&V^~F&U,te=L+le+X+h[ee+3]+z[ee+3],oe=Z+se,L=M+te<<0,M=te+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+M<<0,this.h1=this.h1+W<<0,this.h2=this.h2+P<<0,this.h3=this.h3+j<<0,this.h4=this.h4+L<<0,this.h5=this.h5+F<<0,this.h6=this.h6+V<<0,this.h7=this.h7+U<<0},O.prototype.hex=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,j=this.h3,L=this.h4,F=this.h5,V=this.h6,U=this.h7,z=u[M>>>28&15]+u[M>>>24&15]+u[M>>>20&15]+u[M>>>16&15]+u[M>>>12&15]+u[M>>>8&15]+u[M>>>4&15]+u[M&15]+u[W>>>28&15]+u[W>>>24&15]+u[W>>>20&15]+u[W>>>16&15]+u[W>>>12&15]+u[W>>>8&15]+u[W>>>4&15]+u[W&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[j>>>28&15]+u[j>>>24&15]+u[j>>>20&15]+u[j>>>16&15]+u[j>>>12&15]+u[j>>>8&15]+u[j>>>4&15]+u[j&15]+u[L>>>28&15]+u[L>>>24&15]+u[L>>>20&15]+u[L>>>16&15]+u[L>>>12&15]+u[L>>>8&15]+u[L>>>4&15]+u[L&15]+u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15];return this.is224||(z+=u[U>>>28&15]+u[U>>>24&15]+u[U>>>20&15]+u[U>>>16&15]+u[U>>>12&15]+u[U>>>8&15]+u[U>>>4&15]+u[U&15]),z},O.prototype.toString=O.prototype.hex,O.prototype.digest=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,j=this.h3,L=this.h4,F=this.h5,V=this.h6,U=this.h7,z=[M>>>24&255,M>>>16&255,M>>>8&255,M&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,j>>>24&255,j>>>16&255,j>>>8&255,j&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255];return this.is224||z.push(U>>>24&255,U>>>16&255,U>>>8&255,U&255),z},O.prototype.array=O.prototype.digest,O.prototype.arrayBuffer=function(){this.finalize();var M=new ArrayBuffer(this.is224?28:32),W=new DataView(M);return W.setUint32(0,this.h0),W.setUint32(4,this.h1),W.setUint32(8,this.h2),W.setUint32(12,this.h3),W.setUint32(16,this.h4),W.setUint32(20,this.h5),W.setUint32(24,this.h6),this.is224||W.setUint32(28,this.h7),M};function A(M,W,P){var j,L=typeof M;if(L==="string"){var F=[],V=M.length,U=0,z;for(j=0;j<V;++j)z=M.charCodeAt(j),z<128?F[U++]=z:z<2048?(F[U++]=192|z>>>6,F[U++]=128|z&63):z<55296||z>=57344?(F[U++]=224|z>>>12,F[U++]=128|z>>>6&63,F[U++]=128|z&63):(z=65536+((z&1023)<<10|M.charCodeAt(++j)&1023),F[U++]=240|z>>>18,F[U++]=128|z>>>12&63,F[U++]=128|z>>>6&63,F[U++]=128|z&63);M=F}else if(L==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);M.length>64&&(M=new O(W,!0).update(M).array());var ee=[],Z=[];for(j=0;j<64;++j){var le=M[j]||0;ee[j]=92^le,Z[j]=54^le}O.call(this,W,P),this.update(Z),this.oKeyPad=ee,this.inner=!0,this.sharedMemory=P}A.prototype=new O,A.prototype.finalize=function(){if(O.prototype.finalize.call(this),this.inner){this.inner=!1;var M=this.array();O.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(M),O.prototype.finalize.call(this)}};var D=N();D.sha256=D,D.sha224=N(!0),D.sha256.hmac=T(),D.sha224.hmac=T(!0),o?t.exports=D:(r.sha256=D.sha256,r.sha224=D.sha224)})()}(J_)),J_.exports}var iE=w5();const _5=iE.sha224,CP=({index:t,key:e,fallback:n})=>t[_5(e)]?.value??t[e]?.value??n??e,S5=({index:t,key:e,fallback:n})=>CP({index:t,key:e,fallback:n}),E5=({index:t,key:e,fallback:n})=>CP({index:t,key:e,fallback:n}),na={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>S5({index:na.index,key:t,fallback:e}),rich:(t,e)=>E5({index:na.index,key:t,fallback:e})};function Dl(t){return typeof t>"u"||t===void 0}function Os(t){return typeof t=="string"}function Sv(t){return typeof t=="number"}function db(t){return typeof t=="boolean"}function S1(t){return t===null}function N5(t){return t instanceof Date}function E1(t){return typeof t=="bigint"}function Fs(t){return typeof t=="function"}function Ko(t){return typeof t=="object"&&t!==null}function G(t){return Object.freeze(t)}function Wg(t){return za(t)?t:[t]}function za(t){return Array.isArray(t)}function Ll(t){return t}const Jn=G({is(t){return t.kind==="AlterTableNode"},create(t){return G({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return G({...t,...e})},cloneWithColumnAlteration(t,e){return G({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),yr=G({is(t){return t.kind==="IdentifierNode"},create(t){return G({kind:"IdentifierNode",name:t})}}),Ra=G({is(t){return t.kind==="CreateIndexNode"},create(t){return G({kind:"CreateIndexNode",name:yr.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}}),TP=G({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return G({kind:"CreateSchemaNode",schema:yr.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),k5=["preserve rows","delete rows","drop"],vs=G({is(t){return t.kind==="CreateTableNode"},create(t){return G({kind:"CreateTableNode",table:t,columns:G([])})},cloneWithColumn(t,e){return G({...t,columns:G([...t.columns,e])})},cloneWithConstraint(t,e){return G({...t,constraints:t.constraints?G([...t.constraints,e]):G([e])})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWith(t,e){return G({...t,...e})}}),Vl=G({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return G({kind:"SchemableIdentifierNode",identifier:yr.create(t)})},createWithSchema(t,e){return G({kind:"SchemableIdentifierNode",schema:yr.create(t),identifier:yr.create(e)})}}),Gp=G({is(t){return t.kind==="DropIndexNode"},create(t,e){return G({kind:"DropIndexNode",name:Vl.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),sE=G({is(t){return t.kind==="DropSchemaNode"},create(t,e){return G({kind:"DropSchemaNode",schema:yr.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),oE=G({is(t){return t.kind==="DropTableNode"},create(t,e){return G({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return G({...t,...e})}}),ec=G({is(t){return t.kind==="AliasNode"},create(t,e){return G({kind:"AliasNode",node:t,alias:e})}}),Ml=G({is(t){return t.kind==="TableNode"},create(t){return G({kind:"TableNode",table:Vl.create(t)})},createWithSchema(t,e){return G({kind:"TableNode",table:Vl.createWithSchema(t,e)})}});function fs(t){return Ko(t)&&Fs(t.toOperationNode)}function I5(t){return Ko(t)&&"expressionType"in t&&fs(t)}function C5(t){return Ko(t)&&"expression"in t&&Os(t.alias)&&fs(t)}const ka=G({is(t){return t.kind==="SelectModifierNode"},create(t,e){return G({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return G({kind:"SelectModifierNode",rawModifier:t})}}),Ul=G({is(t){return t.kind==="AndNode"},create(t,e){return G({kind:"AndNode",left:t,right:e})}}),lf=G({is(t){return t.kind==="OrNode"},create(t,e){return G({kind:"OrNode",left:t,right:e})}}),Z_=G({is(t){return t.kind==="OnNode"},create(t){return G({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return G({...t,on:e==="And"?Ul.create(t.on,n):lf.create(t.on,n)})}}),Jp=G({is(t){return t.kind==="JoinNode"},create(t,e){return G({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return G({kind:"JoinNode",joinType:t,table:e,on:Z_.create(n)})},cloneWithOn(t,e){return G({...t,on:t.on?Z_.cloneWithOperation(t.on,"And",e):Z_.create(e)})}}),Fd=G({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return G({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),T5=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],R5=["+","-","*","/","%","^","&","|","#","<<",">>"],RP=["->","->>"],O5=[...T5,...R5,"&&","||"],j5=["exists","not exists"],q5=["not","-",...j5],A5=[...O5,...RP,...q5,"between","between symmetric"],Hl=G({is(t){return t.kind==="OperatorNode"},create(t){return G({kind:"OperatorNode",operator:t})}});function oR(t){return Os(t)&&RP.includes(t)}const Lr=G({is(t){return t.kind==="ColumnNode"},create(t){return G({kind:"ColumnNode",column:yr.create(t)})}}),N1=G({is(t){return t.kind==="SelectAllNode"},create(){return G({kind:"SelectAllNode"})}}),Ev=G({is(t){return t.kind==="ReferenceNode"},create(t,e){return G({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return G({kind:"ReferenceNode",table:t,column:N1.create()})}});class P5{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return PP(this.#e)}}function OP(t){return Ko(t)&&fs(t)&&Os(t.dynamicReference)}const aE=G({is(t){return t.kind==="OrderByItemNode"},create(t,e){return G({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Si=G({is(t){return t.kind==="RawNode"},create(t,e){return G({kind:"RawNode",sqlFragments:G(t),parameters:G(e)})},createWithSql(t){return Si.create([t],[])},createWithChild(t){return Si.create(["",""],[t])},createWithChildren(t){return Si.create(new Array(t.length+1).fill(""),t)}});function jP(t){return t==="asc"||t==="desc"}function sm(t){if(t.length===2)return[Y_(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>Y_(n)):[Y_(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function Y_(t,e){const n=F5(t);if(aE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return aE.create(n,qP(e))}function F5(t){if(um(t))return du(t);if(OP(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!jP(n))throw new Error(`Invalid order by direction: ${n}`);return aE.create(Wa(e),qP(n))}return Wa(t)}function qP(t){if(t)return t==="asc"||t==="desc"?Si.createWithSql(t):t.toOperationNode()}const fb=G({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return G({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return G({...t,traversal:e})}}),AP=G({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return G({kind:"JSONOperatorChainNode",operator:t,values:G([])})},cloneWithValue(t,e){return G({...t,values:G([...t.values,e])})}}),Zp=G({is(t){return t.kind==="JSONPathNode"},create(t){return G({kind:"JSONPathNode",inOperator:t,pathLegs:G([])})},cloneWithLeg(t,e){return G({...t,pathLegs:G([...t.pathLegs,e])})}});function PP(t){return Os(t)?Wa(t):t.toOperationNode()}function fh(t){return za(t)?t.map(e=>Ns(e)):[Ns(t)]}function Ns(t){return um(t)?du(t):PP(t)}function D5(t,e){const n=Wa(t);if(oR(e))return fb.create(n,AP.create(Hl.create(e)));const r=e.slice(0,-1);if(oR(r))return fb.create(n,Zp.create(Hl.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Wa(t){const e=".";if(!t.includes(e))return Ev.create(Lr.create(t));const n=t.split(e).map(k1);if(n.length===3)return M5(n);if(n.length===2)return $5(n);throw new Error(`invalid column reference ${t}`)}function L5(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(k1);return ec.create(Wa(n),yr.create(r))}else return Wa(t)}function FP(t){return Lr.create(t)}function pb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(k1);if(!jP(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return sm([n,r])[0]}else return FP(t)}function M5(t){const[e,n,r]=t;return Ev.create(Lr.create(r),Ml.createWithSchema(e,n))}function $5(t){const[e,n]=t;return Ev.create(Lr.create(n),Ml.create(e))}function k1(t){return t.trim()}const DP=G({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return G({kind:"PrimitiveValueListNode",values:G([...t])})}}),I1=G({is(t){return t.kind==="ValueListNode"},create(t){return G({kind:"ValueListNode",values:G(t)})}}),ra=G({is(t){return t.kind==="ValueNode"},create(t){return G({kind:"ValueNode",value:t})},createImmediate(t){return G({kind:"ValueNode",value:t,immediate:!0})}});function B5(t){return za(t)?z5(t):Jr(t)}function Jr(t){return um(t)?du(t):ra.create(t)}function C1(t){return Sv(t)||db(t)||S1(t)}function T1(t){if(!C1(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return ra.createImmediate(t)}function z5(t){return t.some(um)?I1.create(t.map(e=>Jr(e))):DP.create(t)}const Dd=G({is(t){return t.kind==="ParensNode"},create(t){return G({kind:"ParensNode",node:t})}});function mi(t){if(t.length===3)return R1(t[0],t[1],t[2]);if(t.length===1)return Jr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function R1(t,e,n){return W5(e)&&LP(n)?Fd.create(Ns(t),lE(e),ra.createImmediate(n)):Fd.create(Ns(t),lE(e),B5(n))}function ia(t,e,n){return Fd.create(Ns(t),lE(e),Ns(n))}function aR(t,e){return hb(Object.entries(t).filter(([,n])=>!Dl(n)).map(([n,r])=>R1(n,LP(r)?"is":"=",r)),e)}function hb(t,e,n=!0){const r=e==="and"?Ul.create:lf.create;if(t.length===0)return Fd.create(ra.createImmediate(1),Hl.create("="),ra.createImmediate(e==="and"?1:0));let i=lR(t[0]);for(let s=1;s<t.length;++s)i=r(i,lR(t[s]));return t.length>1&&n?Dd.create(i):i}function W5(t){return t==="is"||t==="is not"}function LP(t){return S1(t)||db(t)}function lE(t){if(Os(t)&&A5.includes(t))return Hl.create(t);if(fs(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function lR(t){return fs(t)?t.toOperationNode():t}const Ql=G({is(t){return t.kind==="OrderByNode"},create(t){return G({kind:"OrderByNode",items:G([...t])})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),cR=G({is(t){return t.kind==="PartitionByNode"},create(t){return G({kind:"PartitionByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),cE=G({is(t){return t.kind==="OverNode"},create(){return G({kind:"OverNode"})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Ql.cloneWithItems(t.orderBy,e):Ql.create(e)})},cloneWithPartitionByItems(t,e){return G({...t,partitionBy:t.partitionBy?cR.cloneWithItems(t.partitionBy,e):cR.create(e)})}}),mb=G({is(t){return t.kind==="FromNode"},create(t){return G({kind:"FromNode",froms:G(t)})},cloneWithFroms(t,e){return G({...t,froms:G([...t.froms,...e])})}}),uR=G({is(t){return t.kind==="GroupByNode"},create(t){return G({kind:"GroupByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),dR=G({is(t){return t.kind==="HavingNode"},create(t){return G({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return G({...t,having:e==="And"?Ul.create(t.having,n):lf.create(t.having,n)})}}),Gn=G({is(t){return t.kind==="SelectQueryNode"},create(t){return G({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return G({kind:"SelectQueryNode",from:mb.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})},cloneWithDistinctOn(t,e){return G({...t,distinctOn:t.distinctOn?G([...t.distinctOn,...e]):G(e)})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Ql.cloneWithItems(t.orderBy,e):Ql.create(e)})},cloneWithGroupByItems(t,e){return G({...t,groupBy:t.groupBy?uR.cloneWithItems(t.groupBy,e):uR.create(e)})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithOffset(t,e){return G({...t,offset:e})},cloneWithFetch(t,e){return G({...t,fetch:e})},cloneWithHaving(t,e){return G({...t,having:t.having?dR.cloneWithOperation(t.having,"And",e):dR.create(e)})},cloneWithSetOperations(t,e){return G({...t,setOperations:t.setOperations?G([...t.setOperations,...e]):G([...e])})},cloneWithoutSelections(t){return G({...t,selections:[]})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithoutOffset(t){return G({...t,offset:void 0})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return G({...t,groupBy:void 0})}});function En(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class _d{#e;constructor(e){this.#e=G(e)}on(...e){return new _d({...this.#e,joinNode:Jp.cloneWithOn(this.#e.joinNode,mi(e))})}onRef(e,n,r){return new _d({...this.#e,joinNode:Jp.cloneWithOn(this.#e.joinNode,ia(e,n,r))})}onTrue(){return new _d({...this.#e,joinNode:Jp.cloneWithOn(this.#e.joinNode,Si.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}En(_d,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const V5=G({is(t){return t.kind==="PartitionByItemNode"},create(t){return G({kind:"PartitionByItemNode",partitionBy:t})}});function U5(t){return fh(t).map(V5.create)}class ph{#e;constructor(e){this.#e=G(e)}orderBy(e,n){return new ph({overNode:cE.cloneWithOrderByItems(this.#e.overNode,sm([e,n]))})}partitionBy(e){return new ph({overNode:cE.cloneWithPartitionByItems(this.#e.overNode,U5(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}En(ph,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Yp=G({is(t){return t.kind==="SelectionNode"},create(t){return G({kind:"SelectionNode",selection:t})},createSelectAll(){return G({kind:"SelectionNode",selection:N1.create()})},createSelectAllFromTable(t){return G({kind:"SelectionNode",selection:Ev.createSelectAll(t)})}});function qo(t){return Fs(t)?qo(t(uf())):za(t)?t.map(e=>fR(e)):[fR(t)]}function fR(t){return Os(t)?Yp.create(L5(t)):OP(t)?Yp.create(t.toOperationNode()):Yp.create(ZP(t))}function sa(t){return t?Array.isArray(t)?t.map(pR):[pR(t)]:[Yp.createSelectAll()]}function pR(t){if(Os(t))return Yp.createSelectAllFromTable(Ar(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const H5=G({is(t){return t.kind==="ValuesNode"},create(t){return G({kind:"ValuesNode",values:G(t)})}}),Q5=G({is(t){return t.kind==="DefaultInsertValueNode"},create(){return G({kind:"DefaultInsertValueNode"})}});function MP(t){const e=Fs(t)?t(uf()):t,n=za(e)?e:G([e]);return K5(n)}function K5(t){const e=G5(t);return[G([...e.keys()].map(Lr.create)),H5.create(t.map(n=>J5(n,e)))]}function G5(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function J5(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const l=e.get(o);if(Dl(l))continue;const u=t[o];(Dl(u)||um(u))&&(i=!0),r[l]=u}if(n.length<e.size||i){const o=Q5.create();return I1.create(r.map(l=>Dl(l)?o:Jr(l)))}return DP.create(r)}const _s=G({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return G({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return G({kind:"InsertQueryNode"})},cloneWith(t,e){return G({...t,...e})}}),Sd=G({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return G({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return G({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return G({...t,from:t.from?mb.cloneWithFroms(t.from,e):mb.create(e)})},cloneWithUpdates(t,e){return G({...t,updates:t.updates?G([...t.updates,...e]):e})},cloneWithLimit(t,e){return G({...t,limit:e})}}),hR=G({is(t){return t.kind==="UsingNode"},create(t){return G({kind:"UsingNode",tables:G(t)})},cloneWithTables(t,e){return G({...t,tables:G([...t.tables,...e])})}}),Ac=G({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return G({kind:"DeleteQueryNode",from:mb.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Ql.cloneWithItems(t.orderBy,e):Ql.create(e)})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithUsing(t,e){return G({...t,using:t.using!==void 0?hR.cloneWithTables(t.using,e):hR.create(e)})}}),ss=G({is(t){return t.kind==="WhereNode"},create(t){return G({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return G({...t,where:e==="And"?Ul.create(t.where,n):lf.create(t.where,n)})}}),mR=G({is(t){return t.kind==="ReturningNode"},create(t){return G({kind:"ReturningNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),Z5=G({is(t){return t.kind==="ExplainNode"},create(t,e){return G({kind:"ExplainNode",format:t,options:e})}}),om=G({is(t){return t.kind==="WhenNode"},create(t){return G({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return G({...t,result:e})}}),os=G({is(t){return t.kind==="MergeQueryNode"},create(t,e){return G({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return G({...t,using:e})},cloneWithWhen(t,e){return G({...t,whens:t.whens?G([...t.whens,e]):G([e])})},cloneWithThen(t,e){return G({...t,whens:t.whens?G([...t.whens.slice(0,-1),om.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),gR=G({is(t){return t.kind==="OutputNode"},create(t){return G({kind:"OutputNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),Ft=G({is(t){return Gn.is(t)||_s.is(t)||Sd.is(t)||Ac.is(t)||os.is(t)},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWithWhere(t,e){return G({...t,where:t.where?ss.cloneWithOperation(t.where,"And",e):ss.create(e)})},cloneWithJoin(t,e){return G({...t,joins:t.joins?G([...t.joins,e]):G([e])})},cloneWithReturning(t,e){return G({...t,returning:t.returning?mR.cloneWithSelections(t.returning,e):mR.create(e)})},cloneWithoutReturning(t){return G({...t,returning:void 0})},cloneWithoutWhere(t){return G({...t,where:void 0})},cloneWithExplain(t,e,n){return G({...t,explain:Z5.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return G({...t,top:e})},cloneWithOutput(t,e){return G({...t,output:t.output?gR.cloneWithSelections(t.output,e):gR.create(e)})}}),$P=G({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return G({kind:"ColumnUpdateNode",column:t,value:e})}});function Y5(...t){return t.length===2?[$P.create(Ns(t[0]),Jr(t[1]))]:O1(t[0])}function O1(t){const e=Fs(t)?t(uf()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>$P.create(Lr.create(n),Jr(r)))}const X5=G({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return G({kind:"OnDuplicateKeyNode",updates:t})}});class e8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class am extends Error{node;constructor(e){super("no result"),this.node=e}}function lm(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const xs=G({is(t){return t.kind==="OnConflictNode"},create(){return G({kind:"OnConflictNode"})},cloneWith(t,e){return G({...t,...e})},cloneWithIndexWhere(t,e){return G({...t,indexWhere:t.indexWhere?ss.cloneWithOperation(t.indexWhere,"And",e):ss.create(e)})},cloneWithIndexOrWhere(t,e){return G({...t,indexWhere:t.indexWhere?ss.cloneWithOperation(t.indexWhere,"Or",e):ss.create(e)})},cloneWithUpdateWhere(t,e){return G({...t,updateWhere:t.updateWhere?ss.cloneWithOperation(t.updateWhere,"And",e):ss.create(e)})},cloneWithUpdateOrWhere(t,e){return G({...t,updateWhere:t.updateWhere?ss.cloneWithOperation(t.updateWhere,"Or",e):ss.create(e)})},cloneWithoutIndexWhere(t){return G({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return G({...t,updateWhere:void 0})}});class Qo{#e;constructor(e){this.#e=G(e)}column(e){const n=Lr.create(e);return new Qo({...this.#e,onConflictNode:xs.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,n]):G([n])})})}columns(e){const n=e.map(Lr.create);return new Qo({...this.#e,onConflictNode:xs.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,...n]):G(n)})})}constraint(e){return new Qo({...this.#e,onConflictNode:xs.cloneWith(this.#e.onConflictNode,{constraint:yr.create(e)})})}expression(e){return new Qo({...this.#e,onConflictNode:xs.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Qo({...this.#e,onConflictNode:xs.cloneWithIndexWhere(this.#e.onConflictNode,mi(e))})}whereRef(e,n,r){return new Qo({...this.#e,onConflictNode:xs.cloneWithIndexWhere(this.#e.onConflictNode,ia(e,n,r))})}clearWhere(){return new Qo({...this.#e,onConflictNode:xs.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new BP({...this.#e,onConflictNode:xs.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Ed({...this.#e,onConflictNode:xs.cloneWith(this.#e.onConflictNode,{updates:O1(e)})})}$call(e){return e(this)}}En(Qo,"don't await OnConflictBuilder instances.");class BP{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.onConflictNode}}En(BP,"don't await OnConflictDoNothingBuilder instances.");class Ed{#e;constructor(e){this.#e=G(e)}where(...e){return new Ed({...this.#e,onConflictNode:xs.cloneWithUpdateWhere(this.#e.onConflictNode,mi(e))})}whereRef(e,n,r){return new Ed({...this.#e,onConflictNode:xs.cloneWithUpdateWhere(this.#e.onConflictNode,ia(e,n,r))})}clearWhere(){return new Ed({...this.#e,onConflictNode:xs.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}En(Ed,"don't await OnConflictUpdateBuilder instances.");const t8=G({is(t){return t.kind==="TopNode"},create(t,e){return G({kind:"TopNode",expression:t,modifiers:e})}});function cf(t,e){if(!Sv(t)&&!E1(t))throw new Error(`Invalid top expression: ${t}`);if(!Dl(e)&&!n8(e))throw new Error(`Invalid top modifiers: ${e}`);return t8.create(t,e)}function n8(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class pr{#e;constructor(e){this.#e=G(e)}values(e){const[n,r]=MP(e);return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{columns:G(e.map(Lr.create))})})}expression(e){return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{values:du(e)})})}defaultValues(){return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new pr({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new pr({...this.#e,queryNode:Ft.cloneWithTop(this.#e.queryNode,cf(e,n))})}onConflict(e){return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{onConflict:e(new Qo({onConflictNode:xs.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new pr({...this.#e,queryNode:_s.cloneWith(this.#e.queryNode,{onDuplicateKey:X5.create(O1(e))})})}returning(e){return new pr({...this.#e,queryNode:Ft.cloneWithReturning(this.#e.queryNode,qo(e))})}returningAll(){return new pr({...this.#e,queryNode:Ft.cloneWithReturning(this.#e.queryNode,sa())})}output(e){return new pr({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,qo(e))})}outputAll(e){return new pr({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,sa(e))})}clearReturning(){return new pr({...this.#e,queryNode:Ft.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new pr({...this.#e})}$castTo(){return new pr(this.#e)}$narrowType(){return new pr(this.#e)}$assertType(){return new pr(this.#e)}withPlugin(e){return new pr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new e8(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=am){const n=await this.executeTakeFirst();if(n===void 0)throw lm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new pr({...this.#e,queryNode:Ft.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}En(pr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class r8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const j1=G({is(t){return t.kind==="LimitNode"},create(t){return G({kind:"LimitNode",limit:t})}});class Kn{#e;constructor(e){this.#e=G(e)}where(...e){return new Kn({...this.#e,queryNode:Ft.cloneWithWhere(this.#e.queryNode,mi(e))})}whereRef(e,n,r){return new Kn({...this.#e,queryNode:Ft.cloneWithWhere(this.#e.queryNode,ia(e,n,r))})}clearWhere(){return new Kn({...this.#e,queryNode:Ft.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Kn({...this.#e,queryNode:Ft.cloneWithTop(this.#e.queryNode,cf(e,n))})}using(e){return new Kn({...this.#e,queryNode:Ac.cloneWithUsing(this.#e.queryNode,gh(e))})}innerJoin(...e){return new Kn({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("InnerJoin",e))})}leftJoin(...e){return new Kn({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("LeftJoin",e))})}rightJoin(...e){return new Kn({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("RightJoin",e))})}fullJoin(...e){return new Kn({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("FullJoin",e))})}returning(e){return new Kn({...this.#e,queryNode:Ft.cloneWithReturning(this.#e.queryNode,qo(e))})}returningAll(e){return new Kn({...this.#e,queryNode:Ft.cloneWithReturning(this.#e.queryNode,sa(e))})}output(e){return new Kn({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,qo(e))})}outputAll(e){return new Kn({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,sa(e))})}clearReturning(){return new Kn({...this.#e,queryNode:Ft.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Kn({...this.#e,queryNode:Ac.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Kn({...this.#e,queryNode:Ac.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Kn({...this.#e,queryNode:Ac.cloneWithOrderByItems(this.#e.queryNode,sm([e,n]))})}limit(e){return new Kn({...this.#e,queryNode:Ac.cloneWithLimit(this.#e.queryNode,j1.create(Jr(e)))})}modifyEnd(e){return new Kn({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Kn({...this.#e})}$castTo(){return new Kn(this.#e)}$narrowType(){return new Kn(this.#e)}$assertType(){return new Kn(this.#e)}withPlugin(e){return new Kn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new r8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=am){const n=await this.executeTakeFirst();if(n===void 0)throw lm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Kn({...this.#e,queryNode:Ft.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}En(Kn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class i8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class er{#e;constructor(e){this.#e=G(e)}where(...e){return new er({...this.#e,queryNode:Ft.cloneWithWhere(this.#e.queryNode,mi(e))})}whereRef(e,n,r){return new er({...this.#e,queryNode:Ft.cloneWithWhere(this.#e.queryNode,ia(e,n,r))})}clearWhere(){return new er({...this.#e,queryNode:Ft.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new er({...this.#e,queryNode:Ft.cloneWithTop(this.#e.queryNode,cf(e,n))})}from(e){return new er({...this.#e,queryNode:Sd.cloneWithFromItems(this.#e.queryNode,gh(e))})}innerJoin(...e){return new er({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("InnerJoin",e))})}leftJoin(...e){return new er({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("LeftJoin",e))})}rightJoin(...e){return new er({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("RightJoin",e))})}fullJoin(...e){return new er({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("FullJoin",e))})}limit(e){return new er({...this.#e,queryNode:Sd.cloneWithLimit(this.#e.queryNode,j1.create(Jr(e)))})}set(...e){return new er({...this.#e,queryNode:Sd.cloneWithUpdates(this.#e.queryNode,Y5(...e))})}returning(e){return new er({...this.#e,queryNode:Ft.cloneWithReturning(this.#e.queryNode,qo(e))})}returningAll(e){return new er({...this.#e,queryNode:Ft.cloneWithReturning(this.#e.queryNode,sa(e))})}output(e){return new er({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,qo(e))})}outputAll(e){return new er({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,sa(e))})}modifyEnd(e){return new er({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new er({...this.#e,queryNode:Ft.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new er({...this.#e})}$castTo(){return new er(this.#e)}$narrowType(){return new er(this.#e)}$assertType(){return new er(this.#e)}withPlugin(e){return new er({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new i8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=am){const n=await this.executeTakeFirst();if(n===void 0)throw lm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new er({...this.#e,queryNode:Ft.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}En(er,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const yR=G({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return G({kind:"CommonTableExpressionNameNode",table:Ml.create(t),columns:e?G(e.map(Lr.create)):void 0})}}),gb=G({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return G({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return G({...t,...e})}});class hh{#e;constructor(e){this.#e=G(e)}materialized(){return new hh({...this.#e,node:gb.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new hh({...this.#e,node:gb.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}En(hh,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function bR(t,e){const n=e(g8()).toOperationNode();return Fs(t)?t(s8(n)).toOperationNode():gb.create(zP(t),n)}function s8(t){return e=>new hh({node:gb.create(zP(e),t)})}function zP(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return yR.create(n,r)}else return yR.create(t)}const Vg=G({is(t){return t.kind==="WithNode"},create(t,e){return G({kind:"WithNode",expressions:G([t]),...e})},cloneWithExpression(t,e){return G({...t,expressions:G([...t.expressions,e])})}}),vR=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function o8(t){let e="";for(let n=0;n<t;++n)e+=a8();return e}function a8(){return vR[~~(Math.random()*vR.length)]}function Zn(){return new l8}class l8{#e;get queryId(){return this.#e===void 0&&(this.#e=o8(8)),this.#e}}class WP{nodeStack=[];#e=G({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),G(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&G(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:G([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const c8=G({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class u8 extends WP{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:yr.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Ml.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in c8}#i(e){const n=new Set;if("name"in e&&e.name&&Vl.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#c(e.with,n),n}#o(e,n){const r=Ml.is(e)?e:ec.is(e)&&Ml.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#c(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class cm{#e;constructor(e){this.#e=new u8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const d8=G({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return G({kind:"MatchedNode",not:t,bySource:e})}});function xR(t,e,n){return om.create(hb([d8.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?ia(e[0],e[1],e[2]):mi(e)]:[]],"and",!1))}function Xp(t){return Os(t)?Si.create([t],[]):fs(t)?t.toOperationNode():t}class wR{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const _R=new Set;function f8(t){_R.has(t)||(_R.add(t),console.log(t))}const p8=G([]);class VP{#e;constructor(e=p8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return h8(i,s),s})}async *stream(e,n,r){const i=new wR,s=new wR;this.provideConnection(async l=>(i.resolve(l),await s.promise)).catch(l=>i.reject(l));const o=await i.promise;try{for await(const l of o.streamQuery(e,n))yield await this.#t(l,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function h8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||f8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class ld extends VP{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new ld([...this.plugins,e])}withPlugins(e){return new ld([...this.plugins,...e])}withPluginAtFront(e){return new ld([e,...this.plugins])}withoutPlugins(){return new ld([])}}const Nv=new ld;class m8{numChangedRows;constructor(e){this.numChangedRows=e}}class zc{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new zc({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new zc({...this.#e,queryNode:Ft.cloneWithTop(this.#e.queryNode,cf(e,n))})}using(...e){return new ks({...this.#e,queryNode:os.cloneWithUsing(this.#e.queryNode,Pi("Using",e))})}output(e){return new zc({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,qo(e))})}outputAll(e){return new zc({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,sa(e))})}}En(zc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class ks{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new ks({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new ks({...this.#e,queryNode:Ft.cloneWithTop(this.#e.queryNode,cf(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new uE({...this.#e,queryNode:os.cloneWithWhen(this.#e.queryNode,xR({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new ks({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,qo(e))})}outputAll(e){return new ks({...this.#e,queryNode:Ft.cloneWithOutput(this.#e.queryNode,sa(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:os.cloneWithWhen(this.#e.queryNode,xR({isMatched:!1,bySource:r},e,n))},s=r?uE:UP;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new ks({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new m8(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=am){const n=await this.executeTakeFirst();if(n===void 0)throw lm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}En(ks,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class uE{#e;constructor(e){this.#e=G(e)}thenDelete(){return new ks({...this.#e,queryNode:os.cloneWithThen(this.#e.queryNode,Xp("delete"))})}thenDoNothing(){return new ks({...this.#e,queryNode:os.cloneWithThen(this.#e.queryNode,Xp("do nothing"))})}thenUpdate(e){return new ks({...this.#e,queryNode:os.cloneWithThen(this.#e.queryNode,Xp(e(new er({queryId:this.#e.queryId,executor:Nv,queryNode:Sd.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}En(uE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class UP{#e;constructor(e){this.#e=G(e)}thenDoNothing(){return new ks({...this.#e,queryNode:os.cloneWithThen(this.#e.queryNode,Xp("do nothing"))})}thenInsertValues(e){const[n,r]=MP(e);return new ks({...this.#e,queryNode:os.cloneWithThen(this.#e.queryNode,Xp(_s.cloneWith(_s.createWithoutInto(),{columns:n,values:r})))})}}En(UP,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Tl{#e;constructor(e){this.#e=G(e)}selectFrom(e){return dE({queryId:Zn(),executor:this.#e.executor,queryNode:Gn.createFrom(gh(e),this.#e.withNode)})}selectNoFrom(e){return dE({queryId:Zn(),executor:this.#e.executor,queryNode:Gn.cloneWithSelections(Gn.create(this.#e.withNode),qo(e))})}insertInto(e){return new pr({queryId:Zn(),executor:this.#e.executor,queryNode:_s.create(Ar(e),this.#e.withNode)})}replaceInto(e){return new pr({queryId:Zn(),executor:this.#e.executor,queryNode:_s.create(Ar(e),this.#e.withNode,!0)})}deleteFrom(e){return new Kn({queryId:Zn(),executor:this.#e.executor,queryNode:Ac.create(gh(e),this.#e.withNode)})}updateTable(e){return new er({queryId:Zn(),executor:this.#e.executor,queryNode:Sd.create(yh(e),this.#e.withNode)})}mergeInto(e){return new zc({queryId:Zn(),executor:this.#e.executor,queryNode:os.create(YP(e),this.#e.withNode)})}with(e,n){const r=bR(e,n);return new Tl({...this.#e,withNode:this.#e.withNode?Vg.cloneWithExpression(this.#e.withNode,r):Vg.create(r)})}withRecursive(e,n){const r=bR(e,n);return new Tl({...this.#e,withNode:this.#e.withNode?Vg.cloneWithExpression(this.#e.withNode,r):Vg.create(r,{recursive:!0})})}withPlugin(e){return new Tl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Tl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Tl({...this.#e,executor:this.#e.executor.withPluginAtFront(new cm(e))})}}function g8(){return new Tl({executor:Nv})}function y8(t,e){return new _d({joinNode:Jp.create(t,yh(e))})}function b8(){return new ph({overNode:cE.create()})}function Pi(t,e){if(e.length===3)return x8(t,e[0],e[1],e[2]);if(e.length===2)return v8(t,e[0],e[1]);throw new Error("not implemented")}function v8(t,e,n){return n(y8(t,e)).toOperationNode()}function x8(t,e,n,r){return Jp.createWithOn(t,yh(e),ia(n,"=",r))}const w8=G({is(t){return t.kind==="OffsetNode"},create(t){return G({kind:"OffsetNode",offset:t})}}),_8=G({is(t){return t.kind==="GroupByItemNode"},create(t){return G({kind:"GroupByItemNode",groupBy:t})}});function S8(t){return t=Fs(t)?t(uf()):t,fh(t).map(_8.create)}const HP=G({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return G({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Ku(t,e,n){return Fs(e)&&(e=e(A1())),za(e)||(e=[e]),e.map(r=>HP.create(t,du(r),n))}class tr{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new q1(this,e)}or(...e){return new yb(lf.create(this.#e,mi(e)))}and(...e){return new bb(Ul.create(this.#e,mi(e)))}$castTo(){return new tr(this.#e)}$notNull(){return new tr(this.#e)}toOperationNode(){return this.#e}}class q1{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ec.create(this.#e.toOperationNode(),fs(this.#t)?this.#t.toOperationNode():yr.create(this.#t))}}class yb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new q1(this,e)}or(...e){return new yb(lf.create(this.#e,mi(e)))}$castTo(){return new yb(this.#e)}toOperationNode(){return Dd.create(this.#e)}}class bb{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new q1(this,e)}and(...e){return new bb(Ul.create(this.#e,mi(e)))}$castTo(){return new bb(this.#e)}toOperationNode(){return Dd.create(this.#e)}}const E8={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:ra.create(t),modifier:e}}};function N8(t,e){if(!Sv(t)&&!E1(t))throw new Error(`Invalid fetch row count: ${t}`);if(!k8(e))throw new Error(`Invalid fetch modifier: ${e}`);return E8.create(t,e)}function k8(t){return t==="only"||t==="with ties"}class on{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new on({...this.#e,queryNode:Ft.cloneWithWhere(this.#e.queryNode,mi(e))})}whereRef(e,n,r){return new on({...this.#e,queryNode:Ft.cloneWithWhere(this.#e.queryNode,ia(e,n,r))})}having(...e){return new on({...this.#e,queryNode:Gn.cloneWithHaving(this.#e.queryNode,mi(e))})}havingRef(e,n,r){return new on({...this.#e,queryNode:Gn.cloneWithHaving(this.#e.queryNode,ia(e,n,r))})}select(e){return new on({...this.#e,queryNode:Gn.cloneWithSelections(this.#e.queryNode,qo(e))})}distinctOn(e){return new on({...this.#e,queryNode:Gn.cloneWithDistinctOn(this.#e.queryNode,fh(e))})}modifyFront(e){return new on({...this.#e,queryNode:Gn.cloneWithFrontModifier(this.#e.queryNode,ka.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.createWithExpression(e.toOperationNode()))})}distinct(){return new on({...this.#e,queryNode:Gn.cloneWithFrontModifier(this.#e.queryNode,ka.create("Distinct"))})}forUpdate(e){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.create("ForUpdate",e?Wg(e).map(Ar):void 0))})}forShare(e){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.create("ForShare",e?Wg(e).map(Ar):void 0))})}forKeyShare(e){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.create("ForKeyShare",e?Wg(e).map(Ar):void 0))})}forNoKeyUpdate(e){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.create("ForNoKeyUpdate",e?Wg(e).map(Ar):void 0))})}skipLocked(){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.create("SkipLocked"))})}noWait(){return new on({...this.#e,queryNode:Ft.cloneWithEndModifier(this.#e.queryNode,ka.create("NoWait"))})}selectAll(e){return new on({...this.#e,queryNode:Gn.cloneWithSelections(this.#e.queryNode,sa(e))})}innerJoin(...e){return new on({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("InnerJoin",e))})}leftJoin(...e){return new on({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("LeftJoin",e))})}rightJoin(...e){return new on({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("RightJoin",e))})}fullJoin(...e){return new on({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("FullJoin",e))})}innerJoinLateral(...e){return new on({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("LateralInnerJoin",e))})}leftJoinLateral(...e){return new on({...this.#e,queryNode:Ft.cloneWithJoin(this.#e.queryNode,Pi("LateralLeftJoin",e))})}orderBy(...e){return new on({...this.#e,queryNode:Gn.cloneWithOrderByItems(this.#e.queryNode,sm(e))})}groupBy(e){return new on({...this.#e,queryNode:Gn.cloneWithGroupByItems(this.#e.queryNode,S8(e))})}limit(e){return new on({...this.#e,queryNode:Gn.cloneWithLimit(this.#e.queryNode,j1.create(Jr(e)))})}offset(e){return new on({...this.#e,queryNode:Gn.cloneWithOffset(this.#e.queryNode,w8.create(Jr(e)))})}fetch(e,n="only"){return new on({...this.#e,queryNode:Gn.cloneWithFetch(this.#e.queryNode,N8(e,n))})}top(e,n){return new on({...this.#e,queryNode:Ft.cloneWithTop(this.#e.queryNode,cf(e,n))})}union(e){return new on({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Ku("union",e,!1))})}unionAll(e){return new on({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Ku("union",e,!0))})}intersect(e){return new on({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Ku("intersect",e,!1))})}intersectAll(e){return new on({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Ku("intersect",e,!0))})}except(e){return new on({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Ku("except",e,!1))})}exceptAll(e){return new on({...this.#e,queryNode:Gn.cloneWithSetOperations(this.#e.queryNode,Ku("except",e,!0))})}as(e){return new QP(this,e)}clearSelect(){return new on({...this.#e,queryNode:Gn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new on({...this.#e,queryNode:Ft.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new on({...this.#e,queryNode:Gn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new on({...this.#e,queryNode:Gn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new on({...this.#e,queryNode:Gn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new on({...this.#e,queryNode:Gn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new on({...this.#e})}$castTo(){return new on(this.#e)}$narrowType(){return new on(this.#e)}$assertType(){return new on(this.#e)}$asTuple(){return new tr(this.toOperationNode())}withPlugin(e){return new on({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=am){const n=await this.executeTakeFirst();if(n===void 0)throw lm(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new on({...this.#e,queryNode:Ft.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}En(on,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function dE(t){return new on(t)}class QP{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return ec.create(this.#e.toOperationNode(),yr.create(this.#t))}}En(QP,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Rl=G({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return G({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return G({...t,distinct:!0})},cloneWithOrderBy(t,e){return G({...t,orderBy:t.orderBy?Ql.cloneWithItems(t.orderBy,e):Ql.create(e)})},cloneWithFilter(t,e){return G({...t,filter:t.filter?ss.cloneWithOperation(t.filter,"And",e):ss.create(e)})},cloneWithOrFilter(t,e){return G({...t,filter:t.filter?ss.cloneWithOperation(t.filter,"Or",e):ss.create(e)})},cloneWithOver(t,e){return G({...t,over:e})}}),SR=G({is(t){return t.kind==="FunctionNode"},create(t,e){return G({kind:"FunctionNode",func:t,arguments:e})}});class to{#e;constructor(e){this.#e=G(e)}get expressionType(){}as(e){return new I8(this,e)}distinct(){return new to({...this.#e,aggregateFunctionNode:Rl.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new to({...this.#e,aggregateFunctionNode:Rl.cloneWithOrderBy(this.#e.aggregateFunctionNode,sm([e,n]))})}filterWhere(...e){return new to({...this.#e,aggregateFunctionNode:Rl.cloneWithFilter(this.#e.aggregateFunctionNode,mi(e))})}filterWhereRef(e,n,r){return new to({...this.#e,aggregateFunctionNode:Rl.cloneWithFilter(this.#e.aggregateFunctionNode,ia(e,n,r))})}over(e){const n=b8();return new to({...this.#e,aggregateFunctionNode:Rl.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new to(this.#e)}$notNull(){return new to(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}En(to,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class I8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ec.create(this.#e.toOperationNode(),yr.create(this.#t))}}function KP(){const t=(n,r)=>new tr(SR.create(n,fh(r??[]))),e=(n,r)=>new to({aggregateFunctionNode:Rl.create(n,r?fh(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new to({aggregateFunctionNode:Rl.create("count",sa(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new to({aggregateFunctionNode:Rl.create("json_agg",[Os(n)?Ar(n):n.toOperationNode()])})},toJson(n){return new tr(SR.create("to_json",[Os(n)?Ar(n):n.toOperationNode()]))}})}const C8=G({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return G({kind:"UnaryOperationNode",operator:t,operand:e})}});function T8(t,e){return C8.create(Hl.create(t),Ns(e))}const Jo=G({is(t){return t.kind==="CaseNode"},create(t){return G({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return G({...t,when:G(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return G({...t,when:t.when?G([...t.when.slice(0,-1),om.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return G({...t,...e})}});class GP{#e;constructor(e){this.#e=G(e)}when(...e){return new JP({...this.#e,node:Jo.cloneWithWhen(this.#e.node,om.create(mi(e)))})}}class JP{#e;constructor(e){this.#e=G(e)}then(e){return new R8({...this.#e,node:Jo.cloneWithThen(this.#e.node,C1(e)?T1(e):Jr(e))})}}class R8{#e;constructor(e){this.#e=G(e)}when(...e){return new JP({...this.#e,node:Jo.cloneWithWhen(this.#e.node,om.create(mi(e)))})}else(e){return new O8({...this.#e,node:Jo.cloneWith(this.#e.node,{else:C1(e)?T1(e):Jr(e)})})}end(){return new tr(Jo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new tr(Jo.cloneWith(this.#e.node,{isStatement:!0}))}}class O8{#e;constructor(e){this.#e=G(e)}end(){return new tr(Jo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new tr(Jo.cloneWith(this.#e.node,{isStatement:!0}))}}const ER=G({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return G({kind:"JSONPathLegNode",type:t,value:e})}});class fE{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return fb.is(this.#e)?new mh(fb.cloneWithTraversal(this.#e,Zp.is(this.#e.traversal)?Zp.cloneWithLeg(this.#e.traversal,ER.create(e,n)):AP.cloneWithValue(this.#e.traversal,ra.createImmediate(n)))):new mh(Zp.cloneWithLeg(this.#e,ER.create(e,n)))}}class mh extends fE{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new j8(this,e)}$castTo(){return new mh(this.#e)}$notNull(){return new mh(this.#e)}toOperationNode(){return this.#e}}class j8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ec.create(this.#e.toOperationNode(),fs(this.#t)?this.#t.toOperationNode():yr.create(this.#t))}}const NR=G({is(t){return t.kind==="TupleNode"},create(t){return G({kind:"TupleNode",values:G(t)})}}),q8=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],A8=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],P8=G({is(t){return t.kind==="DataTypeNode"},create(t){return G({kind:"DataTypeNode",dataType:t})}});function F8(t){return!!(q8.includes(t)||A8.some(e=>e.test(t)))}function Xc(t){if(fs(t))return t.toOperationNode();if(F8(t))return P8.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const D8=G({is(t){return t.kind==="CastNode"},create(t,e){return G({kind:"CastNode",expression:t,dataType:e})}});function A1(t=Nv){function e(i,s,o){return new tr(R1(i,s,o))}function n(i,s){return new tr(T8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return dE({queryId:Zn(),executor:t,queryNode:Gn.createFrom(gh(i))})},case(i){return new GP({node:Jo.create(Dl(i)?void 0:Ns(i))})},ref(i,s){return Dl(s)?new tr(Wa(i)):new fE(D5(i,s))},jsonPath(){return new fE(Zp.create())},table(i){return new tr(Ar(i))},val(i){return new tr(Jr(i))},refTuple(...i){return new tr(NR.create(i.map(Ns)))},tuple(...i){return new tr(NR.create(i.map(Jr)))},lit(i){return new tr(T1(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new tr(Fd.create(Ns(i),Hl.create("between"),Ul.create(Jr(s),Jr(o))))},betweenSymmetric(i,s,o){return new tr(Fd.create(Ns(i),Hl.create("between symmetric"),Ul.create(Jr(s),Jr(o))))},and(i){return za(i)?new tr(hb(i,"and")):new tr(aR(i,"and"))},or(i){return za(i)?new tr(hb(i,"or")):new tr(aR(i,"or"))},parens(...i){const s=mi(i);return Dd.is(s)?new tr(s):new tr(Dd.create(s))},cast(i,s){return new tr(D8.create(Ns(i),Xc(s)))},withSchema(i){return A1(t.withPluginAtFront(new cm(i)))}});return r.fn=KP(),r.eb=r,r}function uf(t){return A1()}function du(t){if(fs(t))return t.toOperationNode();if(Fs(t))return t(uf()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function ZP(t){if(fs(t))return t.toOperationNode();if(Fs(t))return t(uf()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function um(t){return I5(t)||C5(t)||Fs(t)}function gh(t){return za(t)?t.map(e=>yh(e)):[yh(t)]}function yh(t){return Os(t)?YP(t):ZP(t)}function YP(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(XP);return ec.create(Ar(n),yr.create(r))}else return Ar(t)}function Ar(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(XP);return Ml.createWithSchema(n,r)}else return Ml.create(t)}function XP(t){return t.trim()}const eF=G({is(t){return t.kind==="AddColumnNode"},create(t){return G({kind:"AddColumnNode",column:t})}}),hr=G({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return G({kind:"ColumnDefinitionNode",column:Lr.create(t),dataType:e})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):[e]})},cloneWith(t,e){return G({...t,...e})}}),tF=G({is(t){return t.kind==="DropColumnNode"},create(t){return G({kind:"DropColumnNode",column:Lr.create(t)})}}),nF=G({is(t){return t.kind==="RenameColumnNode"},create(t,e){return G({kind:"RenameColumnNode",column:Lr.create(t),renameTo:Lr.create(e)})}}),P1=G({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return G({kind:"CheckConstraintNode",expression:t,name:e?yr.create(e):void 0})}}),L8=["no action","restrict","cascade","set null","set default"],Ny=G({is(t){return t.kind==="ReferencesNode"},create(t,e){return G({kind:"ReferencesNode",table:t,columns:G([...e])})},cloneWithOnDelete(t,e){return G({...t,onDelete:e})},cloneWithOnUpdate(t,e){return G({...t,onUpdate:e})}});function rF(t){return fs(t)?t.toOperationNode():ra.createImmediate(t)}const Ug=G({is(t){return t.kind==="GeneratedNode"},create(t){return G({kind:"GeneratedNode",...t})},createWithExpression(t){return G({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return G({...t,...e})}}),M8=G({is(t){return t.kind==="DefaultValueNode"},create(t){return G({kind:"DefaultValueNode",defaultValue:t})}});function vb(t){if(L8.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class ir{#e;constructor(e){this.#e=e}autoIncrement(){return new ir(hr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new ir(hr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new ir(hr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=Wa(e);if(!n.table||N1.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new ir(hr.cloneWith(this.#e,{references:Ny.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new ir(hr.cloneWith(this.#e,{references:Ny.cloneWithOnDelete(this.#e.references,vb(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new ir(hr.cloneWith(this.#e,{references:Ny.cloneWithOnUpdate(this.#e.references,vb(e))}))}unique(){return new ir(hr.cloneWith(this.#e,{unique:!0}))}notNull(){return new ir(hr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new ir(hr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new ir(hr.cloneWith(this.#e,{defaultTo:M8.create(rF(e))}))}check(e){return new ir(hr.cloneWith(this.#e,{check:P1.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new ir(hr.cloneWith(this.#e,{generated:Ug.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new ir(hr.cloneWith(this.#e,{generated:Ug.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new ir(hr.cloneWith(this.#e,{generated:Ug.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new ir(hr.cloneWith(this.#e,{generated:Ug.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new ir(hr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new ir(hr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new ir(hr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new ir(hr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}En(ir,"don't await ColumnDefinitionBuilder instances directly.");const iF=G({is(t){return t.kind==="ModifyColumnNode"},create(t){return G({kind:"ModifyColumnNode",column:t})}}),xb=G({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return G({kind:"ForeignKeyConstraintNode",columns:t,references:Ny.create(e,n),name:r?yr.create(r):void 0})},cloneWith(t,e){return G({...t,...e})}});class Ld{#e;constructor(e){this.#e=e}onDelete(e){return new Ld(xb.cloneWith(this.#e,{onDelete:vb(e)}))}onUpdate(e){return new Ld(xb.cloneWith(this.#e,{onUpdate:vb(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}En(Ld,"don't await ForeignKeyConstraintBuilder instances directly.");const ky=G({is(t){return t.kind==="AddConstraintNode"},create(t){return G({kind:"AddConstraintNode",constraint:t})}}),F1=G({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return G({kind:"UniqueConstraintNode",columns:G(t.map(Lr.create)),name:e?yr.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return G({...t,...e})}}),Iy=G({is(t){return t.kind==="DropConstraintNode"},create(t){return G({kind:"DropConstraintNode",constraintName:yr.create(t)})},cloneWith(t,e){return G({...t,...e})}}),hp=G({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return G({kind:"AlterColumnNode",column:Lr.create(t),[e]:n})}});class D1{#e;constructor(e){this.#e=e}setDataType(e){return new id(hp.create(this.#e,"dataType",Xc(e)))}setDefault(e){return new id(hp.create(this.#e,"setDefault",rF(e)))}dropDefault(){return new id(hp.create(this.#e,"dropDefault",!0))}setNotNull(){return new id(hp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new id(hp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}En(D1,"don't await AlterColumnBuilder instances");class id{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}En(id,"don't await AlteredColumnBuilder instances");class Rc{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Rc,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class bh{#e;constructor(e){this.#e=G(e)}onDelete(e){return new bh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new bh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Jn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(bh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Nd{#e;constructor(e){this.#e=G(e)}ifExists(){return new Nd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Nd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Nd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Nd,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const sF=G({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return G({kind:"PrimaryKeyConstraintNode",columns:G(t.map(Lr.create)),name:e?yr.create(e):void 0})}}),sd=G({is(t){return t.kind==="AddIndexNode"},create(t){return G({kind:"AddIndexNode",name:yr.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}});class Ol{#e;constructor(e){this.#e=G(e)}unique(){return new Ol({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:sd.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new Ol({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:sd.cloneWithColumns(this.#e.node.addIndex,[pb(e)])})})}columns(e){return new Ol({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:sd.cloneWithColumns(this.#e.node.addIndex,e.map(pb))})})}expression(e){return new Ol({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:sd.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new Ol({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:sd.cloneWith(this.#e.node.addIndex,{using:Si.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Ol,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class dm{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new dm(F1.cloneWith(this.#e,{nullsNotDistinct:!0}))}}En(dm,"don't await UniqueConstraintNodeBuilder instances directly.");class oF{#e;constructor(e){this.#e=G(e)}renameTo(e){return new Rc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{renameTo:Ar(e)})})}setSchema(e){return new Rc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{setSchema:yr.create(e)})})}alterColumn(e,n){const r=n(new D1(e));return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,tF.create(e))})}renameColumn(e,n){return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,nF.create(e,n))})}addColumn(e,n,r=Ll){const i=r(new ir(hr.create(e,Xc(n))));return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,eF.create(i.toOperationNode()))})}modifyColumn(e,n,r=Ll){const i=r(new ir(hr.create(e,Xc(n))));return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,iF.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=Ll){const i=r(new dm(F1.create(n,e)));return new Rc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Rc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(P1.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new bh({...this.#e,constraintBuilder:new Ld(xb.create(n.map(Lr.create),Ar(r),i.map(Lr.create),e))})}addPrimaryKeyConstraint(e,n){return new Rc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(sF.create(n,e))})})}dropConstraint(e){return new Nd({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.create(e)})})}addIndex(e){return new Ol({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{addIndex:sd.create(e)})})}dropIndex(e){return new Rc({...this.#e,node:Jn.cloneWithTableProps(this.#e.node,{dropIndex:Gp.create(e)})})}$call(e){return e(this)}}En(oF,"don't await AlterTableBuilder instances");class ro{#e;constructor(e){this.#e=G(e)}alterColumn(e,n){const r=n(new D1(e));return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,tF.create(e))})}renameColumn(e,n){return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,nF.create(e,n))})}addColumn(e,n,r=Ll){const i=r(new ir(hr.create(e,Xc(n))));return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,eF.create(i.toOperationNode()))})}modifyColumn(e,n,r=Ll){const i=r(new ir(hr.create(e,Xc(n))));return new ro({...this.#e,node:Jn.cloneWithColumnAlteration(this.#e.node,iF.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(ro,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class aF extends WP{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class Xs{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Xs({...this.#e,node:Ra.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Xs({...this.#e,node:Ra.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new Xs({...this.#e,node:Ra.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new Xs({...this.#e,node:Ra.cloneWith(this.#e.node,{table:Ar(e)})})}column(e){return new Xs({...this.#e,node:Ra.cloneWithColumns(this.#e.node,[pb(e)])})}columns(e){return new Xs({...this.#e,node:Ra.cloneWithColumns(this.#e.node,e.map(pb))})}expression(e){return new Xs({...this.#e,node:Ra.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new Xs({...this.#e,node:Ra.cloneWith(this.#e.node,{using:Si.createWithSql(e)})})}where(...e){const n=new aF;return new Xs({...this.#e,node:Ft.cloneWithWhere(this.#e.node,n.transformNode(mi(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Xs,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class kv{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new kv({...this.#e,node:TP.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(kv,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function $8(t){if(k5.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ns{#e;constructor(e){this.#e=G(e)}temporary(){return new ns({...this.#e,node:vs.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ns({...this.#e,node:vs.cloneWith(this.#e.node,{onCommit:$8(e)})})}ifNotExists(){return new ns({...this.#e,node:vs.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Ll){const i=r(new ir(hr.create(e,Xc(n))));return new ns({...this.#e,node:vs.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ns({...this.#e,node:vs.cloneWithConstraint(this.#e.node,sF.create(n,e))})}addUniqueConstraint(e,n,r=Ll){const i=r(new dm(F1.create(n,e)));return new ns({...this.#e,node:vs.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new ns({...this.#e,node:vs.cloneWithConstraint(this.#e.node,P1.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Ll){const o=s(new Ld(xb.create(n.map(Lr.create),Ar(r),i.map(Lr.create),e)));return new ns({...this.#e,node:vs.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ns({...this.#e,node:vs.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ns({...this.#e,node:vs.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ns({...this.#e,node:vs.cloneWith(this.#e.node,{selectQuery:du(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(ns,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class kd{#e;constructor(e){this.#e=G(e)}on(e){return new kd({...this.#e,node:Gp.cloneWith(this.#e.node,{table:Ar(e)})})}ifExists(){return new kd({...this.#e,node:Gp.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new kd({...this.#e,node:Gp.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(kd,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class vh{#e;constructor(e){this.#e=G(e)}ifExists(){return new vh({...this.#e,node:sE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new vh({...this.#e,node:sE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(vh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class xh{#e;constructor(e){this.#e=G(e)}ifExists(){return new xh({...this.#e,node:oE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new xh({...this.#e,node:oE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(xh,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Nl=G({is(t){return t.kind==="CreateViewNode"},create(t){return G({kind:"CreateViewNode",name:Vl.create(t)})},cloneWith(t,e){return G({...t,...e})}});class B8{#e=new aF;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class qa{#e;constructor(e){this.#e=G(e)}temporary(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{columns:e.map(FP)})})}as(e){const n=e.withPlugin(new B8).toOperationNode();return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(qa,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Cy=G({is(t){return t.kind==="DropViewNode"},create(t){return G({kind:"DropViewNode",name:Vl.create(t)})},cloneWith(t,e){return G({...t,...e})}});class Id{#e;constructor(e){this.#e=G(e)}materialized(){return new Id({...this.#e,node:Cy.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Id({...this.#e,node:Cy.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Id({...this.#e,node:Cy.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Id,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const lF=G({is(t){return t.kind==="CreateTypeNode"},create(t){return G({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return G({...t,enum:I1.create(e.map(n=>ra.createImmediate(n)))})}});class Iv{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Iv({...this.#e,node:lF.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Iv,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const cF=G({is(t){return t.kind==="DropTypeNode"},create(t){return G({kind:"DropTypeNode",name:t})},cloneWith(t,e){return G({...t,...e})}});class Cv{#e;constructor(e){this.#e=G(e)}ifExists(){return new Cv({...this.#e,node:cF.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}En(Cv,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function kR(t){const e=".";if(t.includes(e)){const n=t.split(e).map(z8);if(n.length===2)return Vl.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Vl.create(t)}function z8(t){return t.trim()}class eh{#e;constructor(e){this.#e=e}createTable(e){return new ns({queryId:Zn(),executor:this.#e,node:vs.create(Ar(e))})}dropTable(e){return new xh({queryId:Zn(),executor:this.#e,node:oE.create(Ar(e))})}createIndex(e){return new Xs({queryId:Zn(),executor:this.#e,node:Ra.create(e)})}dropIndex(e){return new kd({queryId:Zn(),executor:this.#e,node:Gp.create(e)})}createSchema(e){return new kv({queryId:Zn(),executor:this.#e,node:TP.create(e)})}dropSchema(e){return new vh({queryId:Zn(),executor:this.#e,node:sE.create(e)})}alterTable(e){return new oF({queryId:Zn(),executor:this.#e,node:Jn.create(Ar(e))})}createView(e){return new qa({queryId:Zn(),executor:this.#e,node:Nl.create(e)})}dropView(e){return new Id({queryId:Zn(),executor:this.#e,node:Cy.create(e)})}createType(e){return new Iv({queryId:Zn(),executor:this.#e,node:lF.create(kR(e))})}dropType(e){return new Cv({queryId:Zn(),executor:this.#e,node:cF.create(kR(e))})}withPlugin(e){return new eh(this.#e.withPlugin(e))}withoutPlugins(){return new eh(this.#e.withoutPlugins())}withSchema(e){return new eh(this.#e.withPluginAtFront(new cm(e)))}}class W8{ref(e){return new P5(e)}}class V8{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Pc extends VP{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Pc(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Pc(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Pc(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Pc(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Pc(this.#e,this.#t,this.#n,[])}}function IR(){return typeof performance<"u"&&Fs(performance.now)?performance.now():Date.now()}class U8{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=IR();try{return await n.call(e,r)}catch(o){throw i=o,await this.#c(o,r,s),o}finally{i||await this.#l(r,s)}}}async #c(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#u(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(n)}))}#u(e){return IR()-e}}const H8=()=>{};class uF{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(H8);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const Q8=["read uncommitted","read committed","repeatable read","serializable","snapshot"];G(["query","error"]);class K8{#e;#t;constructor(e){Fs(e)?(this.#t=e,this.#e=G({query:!0,error:!0})):(this.#t=G8,this.#e=G({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function G8(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function J8(t){return Ko(t)&&Fs(t.compile)}let L1=class Rp extends Tl{#e;constructor(e){let n,r;if(Z8(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),l=i.createAdapter(),u=new K8(e.log??[]),d=new U8(s,u),p=new V8(d),h=new Pc(o,l,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:d}}super(n),this.#e=G(r)}get schema(){return new eh(this.#e.executor)}get dynamic(){return new W8}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new GP({node:Jo.create(Dl(e)?void 0:du(e))})}get fn(){return KP()}transaction(){return new Tv({...this.#e})}connection(){return new dF({...this.#e})}withPlugin(e){return new Rp({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Rp({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Rp({...this.#e,executor:this.#e.executor.withPluginAtFront(new cm(e))})}withTables(){return new Rp({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Zn()){const r=J8(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class cd extends L1{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new cd({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new cd({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new cd({...this.#e,executor:this.#e.executor.withPluginAtFront(new cm(e))})}withTables(){return new cd({...this.#e})}}function Z8(t){return Ko(t)&&Ko(t.config)&&Ko(t.driver)&&Ko(t.executor)&&Ko(t.dialect)}class dF{#e;constructor(e){this.#e=G(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new uF(n)),i=new L1({...this.#e,executor:r});return await e(i)})}}En(dF,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class Tv{#e;constructor(e){this.#e=G(e)}setIsolationLevel(e){return new Tv({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return Y8(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new uF(s)),l=new cd({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(l);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}En(Tv,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function Y8(t){if(t.isolationLevel&&!Q8.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Cd{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new fF(this,e)}$castTo(){return new Cd({...this.#e})}$notNull(){return new Cd(this.#e)}withPlugin(e){return new Cd({...this.#e,plugins:this.#e.plugins!==void 0?G([...this.#e.plugins,e]):G([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():Nv;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function vl(t){return new Cd(t)}En(Cd,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class fF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return ec.create(this.#e.toOperationNode(),fs(this.#t)?this.#t.toOperationNode():yr.create(this.#t))}}En(fF,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const gr=Object.assign((t,...e)=>vl({queryId:Zn(),rawNode:Si.create(t,e?.map(CR)??[])}),{ref(t){return vl({queryId:Zn(),rawNode:Si.createWithChild(Wa(t))})},val(t){return vl({queryId:Zn(),rawNode:Si.createWithChild(Jr(t))})},value(t){return this.val(t)},table(t){return vl({queryId:Zn(),rawNode:Si.createWithChild(Ar(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",vl({queryId:Zn(),rawNode:Si.create(e,t.map(yr.create))})},lit(t){return vl({queryId:Zn(),rawNode:Si.createWithChild(ra.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return vl({queryId:Zn(),rawNode:Si.createWithSql(t)})},join(t,e=gr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=CR(t[i]),i!==t.length-1&&(n[2*i+1]=r);return vl({queryId:Zn(),rawNode:Si.createWithChildren(n)})}});function CR(t){return fs(t)?t.toOperationNode():Jr(t)}class X8{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=G({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class eH extends X8{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),G({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Dd.is(this.parentNode)&&!_s.is(this.parentNode)&&!vs.is(this.parentNode)&&!Nl.is(this.parentNode)&&!HP.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Ft.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!os.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!os.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Ft.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Os(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(nH[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Ft.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!os.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!os.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),db(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(tH[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Hl.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Os(e))this.append(`'${e}'`);else if(Sv(e)||db(e))this.append(e.toString());else if(S1(e))this.append("null");else if(N5(e))this.appendImmediateValue(e.toISOString());else if(E1(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?TR[n.modifier]-TR[r.modifier]:1),G(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const tH=G({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),TR=G({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),nH=G({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class rH{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const iH=/"/g;class sH extends eH{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(iH,'""')}visitDefaultInsertValue(e){this.append("null")}}const oH="kysely_migration",aH="kysely_migration_lock";G({__noMigrations__:!0});class lH{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",oH).where("name","!=",aH));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(gr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class cH extends rH{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const pF={jsonObject(t){const e=gr.join(Object.entries(t).map(([n,r])=>gr`${n}, ${r}`));return gr`json_object(${e})`},jsonGroupArray(t){return gr`json_group_array(${pF.jsonObject(t)})`}},hF={hash(t){return iE.sha224(t)},verify(t,e){return iE.sha224(t)===e}};var jn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(jn||(jn={}));var pE;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(pE||(pE={}));const Pt=jn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Aa=t=>{switch(typeof t){case"undefined":return Pt.undefined;case"string":return Pt.string;case"number":return isNaN(t)?Pt.nan:Pt.number;case"boolean":return Pt.boolean;case"function":return Pt.function;case"bigint":return Pt.bigint;case"symbol":return Pt.symbol;case"object":return Array.isArray(t)?Pt.array:t===null?Pt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Pt.promise:typeof Map<"u"&&t instanceof Map?Pt.map:typeof Set<"u"&&t instanceof Set?Pt.set:typeof Date<"u"&&t instanceof Date?Pt.date:Pt.object;default:return Pt.unknown}},yt=jn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),uH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Rs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const d=o.path[u];u===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],u++}}};return i(this),r}static assert(e){if(!(e instanceof Rs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Rs.create=t=>new Rs(t);const Md=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Pt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,jn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${jn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${jn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${jn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:jn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,jn.assertNever(t)}return{message:n}};let mF=Md;function dH(t){mF=t}function wb(){return mF}const _b=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=r.filter(d=>!!d).slice().reverse();for(const d of u)l=d(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},fH=[];function It(t,e){const n=wb(),r=_b({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Md?void 0:Md].filter(i=>!!i)});t.common.issues.push(r)}class Ii{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ln;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return Ii.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return ln;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const ln=Object.freeze({status:"aborted"}),ud=t=>({status:"dirty",value:t}),$i=t=>({status:"valid",value:t}),hE=t=>t.status==="aborted",mE=t=>t.status==="dirty",eu=t=>t.status==="valid",wh=t=>typeof Promise<"u"&&t instanceof Promise;function Sb(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function gF(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Qt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Qt||(Qt={}));var Op,jp;class oa{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const RR=(t,e)=>{if(eu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rs(t.common.issues);return this._error=n,this._error}}};function vn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var u,d;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=p??n)!==null&&d!==void 0?d:l.defaultError}},description:i}}class Nn{get description(){return this._def.description}_getType(e){return Aa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ii,ctx:{common:e.parent.common,data:e.data,parsedType:Aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(wh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Aa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return RR(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Aa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return eu(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>eu(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Aa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (wh(i)?i:Promise.resolve(i));return RR(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ao({schema:this,typeName:an.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Yo.create(this,this._def)}nullable(){return Zl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oo.create(this)}promise(){return Bd.create(this,this._def)}or(e){return Nh.create([this,e],this._def)}and(e){return kh.create(this,e,this._def)}transform(e){return new Ao({...vn(this._def),schema:this,typeName:an.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Oh({...vn(this._def),innerType:this,defaultValue:n,typeName:an.ZodDefault})}brand(){return new M1({typeName:an.ZodBranded,type:this,...vn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jh({...vn(this._def),innerType:this,catchValue:n,typeName:an.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return fm.create(this,e)}readonly(){return qh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pH=/^c[^\s-]{8,}$/i,hH=/^[0-9a-z]+$/,mH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,gH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,yH=/^[a-z0-9_-]{21}$/i,bH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let X_;const _H=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,EH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,NH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,IH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",CH=new RegExp(`^${yF}$`);function bF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function TH(t){return new RegExp(`^${bF(t)}$`)}function vF(t){let e=`${yF}T${bF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function RH(t,e){return!!((e==="v4"||!e)&&_H.test(t)||(e==="v6"||!e)&&EH.test(t))}function OH(t,e){if(!bH.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function jH(t,e){return!!((e==="v4"||!e)&&SH.test(t)||(e==="v6"||!e)&&NH.test(t))}class To extends Nn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pt.string){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_type,expected:Pt.string,received:s.parsedType}),ln}const r=new Ii;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?It(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&It(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")xH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")X_||(X_=new RegExp(wH,"u")),X_.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")gH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")yH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")pH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")hH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")mH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),It(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?vF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?CH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?TH(s).test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?vH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?RH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?OH(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?jH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?kH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?IH.test(e.data)||(i=this._getOrReturnCtx(e,i),It(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):jn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Qt.errToObj(r)})}_addCheck(e){return new To({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Qt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Qt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Qt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Qt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Qt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Qt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Qt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Qt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Qt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Qt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Qt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Qt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Qt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Qt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Qt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Qt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Qt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Qt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Qt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Qt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Qt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Qt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Qt.errToObj(n)})}nonempty(e){return this.min(1,Qt.errToObj(e))}trim(){return new To({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new To({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new To({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}To.create=t=>{var e;return new To({checks:[],typeName:an.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...vn(t)})};function qH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Kl extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pt.number){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_type,expected:Pt.number,received:s.parsedType}),ln}let r;const i=new Ii;for(const s of this._def.checks)s.kind==="int"?jn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),It(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?qH(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),It(r,{code:yt.not_finite,message:s.message}),i.dirty()):jn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qt.toString(n))}setLimit(e,n,r,i){return new Kl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qt.toString(i)}]})}_addCheck(e){return new Kl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Qt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Qt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&jn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Kl.create=t=>new Kl({checks:[],typeName:an.ZodNumber,coerce:t?.coerce||!1,...vn(t)});class Gl extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Pt.bigint)return this._getInvalidInput(e);let r;const i=new Ii;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),It(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):jn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return It(n,{code:yt.invalid_type,expected:Pt.bigint,received:n.parsedType}),ln}gte(e,n){return this.setLimit("min",e,!0,Qt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Qt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Qt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Qt.toString(n))}setLimit(e,n,r,i){return new Gl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Qt.toString(i)}]})}_addCheck(e){return new Gl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Qt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Gl.create=t=>{var e;return new Gl({checks:[],typeName:an.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...vn(t)})};class _h extends Nn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pt.boolean){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:Pt.boolean,received:r.parsedType}),ln}return $i(e.data)}}_h.create=t=>new _h({typeName:an.ZodBoolean,coerce:t?.coerce||!1,...vn(t)});class tu extends Nn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pt.date){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_type,expected:Pt.date,received:s.parsedType}),ln}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return It(s,{code:yt.invalid_date}),ln}const r=new Ii;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),It(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):jn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Qt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Qt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}tu.create=t=>new tu({checks:[],coerce:t?.coerce||!1,typeName:an.ZodDate,...vn(t)});class Eb extends Nn{_parse(e){if(this._getType(e)!==Pt.symbol){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:Pt.symbol,received:r.parsedType}),ln}return $i(e.data)}}Eb.create=t=>new Eb({typeName:an.ZodSymbol,...vn(t)});class Sh extends Nn{_parse(e){if(this._getType(e)!==Pt.undefined){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:Pt.undefined,received:r.parsedType}),ln}return $i(e.data)}}Sh.create=t=>new Sh({typeName:an.ZodUndefined,...vn(t)});class Eh extends Nn{_parse(e){if(this._getType(e)!==Pt.null){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:Pt.null,received:r.parsedType}),ln}return $i(e.data)}}Eh.create=t=>new Eh({typeName:an.ZodNull,...vn(t)});class $d extends Nn{constructor(){super(...arguments),this._any=!0}_parse(e){return $i(e.data)}}$d.create=t=>new $d({typeName:an.ZodAny,...vn(t)});class Qc extends Nn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $i(e.data)}}Qc.create=t=>new Qc({typeName:an.ZodUnknown,...vn(t)});class Va extends Nn{_parse(e){const n=this._getOrReturnCtx(e);return It(n,{code:yt.invalid_type,expected:Pt.never,received:n.parsedType}),ln}}Va.create=t=>new Va({typeName:an.ZodNever,...vn(t)});class Nb extends Nn{_parse(e){if(this._getType(e)!==Pt.undefined){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:Pt.void,received:r.parsedType}),ln}return $i(e.data)}}Nb.create=t=>new Nb({typeName:an.ZodVoid,...vn(t)});class Oo extends Nn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Pt.array)return It(n,{code:yt.invalid_type,expected:Pt.array,received:n.parsedType}),ln;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(It(n,{code:o?yt.too_big:yt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(It(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(It(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new oa(n,o,n.path,l)))).then(o=>Ii.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new oa(n,o,n.path,l)));return Ii.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Oo({...this._def,minLength:{value:e,message:Qt.toString(n)}})}max(e,n){return new Oo({...this._def,maxLength:{value:e,message:Qt.toString(n)}})}length(e,n){return new Oo({...this._def,exactLength:{value:e,message:Qt.toString(n)}})}nonempty(e){return this.min(1,e)}}Oo.create=(t,e)=>new Oo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:an.ZodArray,...vn(e)});function od(t){if(t instanceof Ir){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Yo.create(od(r))}return new Ir({...t._def,shape:()=>e})}else return t instanceof Oo?new Oo({...t._def,type:od(t.element)}):t instanceof Yo?Yo.create(od(t.unwrap())):t instanceof Zl?Zl.create(od(t.unwrap())):t instanceof aa?aa.create(t.items.map(e=>od(e))):t}class Ir extends Nn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=jn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Pt.object){const d=this._getOrReturnCtx(e);return It(d,{code:yt.invalid_type,expected:Pt.object,received:d.parsedType}),ln}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Va&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const u=[];for(const d of o){const p=s[d],h=i.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new oa(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Va){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(d==="strict")l.length>0&&(It(i,{code:yt.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const h=i.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new oa(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of u){const h=await p.key,b=await p.value;d.push({key:h,value:b,alwaysSet:p.alwaysSet})}return d}).then(d=>Ii.mergeObjectSync(r,d)):Ii.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Qt.errToObj,new Ir({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Qt.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new Ir({...this._def,unknownKeys:"strip"})}passthrough(){return new Ir({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ir({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ir({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:an.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ir({...this._def,catchall:e})}pick(e){const n={};return jn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ir({...this._def,shape:()=>n})}omit(e){const n={};return jn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ir({...this._def,shape:()=>n})}deepPartial(){return od(this)}partial(e){const n={};return jn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ir({...this._def,shape:()=>n})}required(e){const n={};return jn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Yo;)s=s._def.innerType;n[r]=s}}),new Ir({...this._def,shape:()=>n})}keyof(){return xF(jn.objectKeys(this.shape))}}Ir.create=(t,e)=>new Ir({shape:()=>t,unknownKeys:"strip",catchall:Va.create(),typeName:an.ZodObject,...vn(e)});Ir.strictCreate=(t,e)=>new Ir({shape:()=>t,unknownKeys:"strict",catchall:Va.create(),typeName:an.ZodObject,...vn(e)});Ir.lazycreate=(t,e)=>new Ir({shape:t,unknownKeys:"strip",catchall:Va.create(),typeName:an.ZodObject,...vn(e)});class Nh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new Rs(l.ctx.common.issues));return It(n,{code:yt.invalid_union,unionErrors:o}),ln}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const d={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(u=>new Rs(u));return It(n,{code:yt.invalid_union,unionErrors:l}),ln}}get options(){return this._def.options}}Nh.create=(t,e)=>new Nh({options:t,typeName:an.ZodUnion,...vn(e)});const Oa=t=>t instanceof Ch?Oa(t.schema):t instanceof Ao?Oa(t.innerType()):t instanceof Th?[t.value]:t instanceof Jl?t.options:t instanceof Rh?jn.objectValues(t.enum):t instanceof Oh?Oa(t._def.innerType):t instanceof Sh?[void 0]:t instanceof Eh?[null]:t instanceof Yo?[void 0,...Oa(t.unwrap())]:t instanceof Zl?[null,...Oa(t.unwrap())]:t instanceof M1||t instanceof qh?Oa(t.unwrap()):t instanceof jh?Oa(t._def.innerType):[];class Rv extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pt.object)return It(n,{code:yt.invalid_type,expected:Pt.object,received:n.parsedType}),ln;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(It(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ln)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Oa(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new Rv({typeName:an.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...vn(r)})}}function gE(t,e){const n=Aa(t),r=Aa(e);if(t===e)return{valid:!0,data:t};if(n===Pt.object&&r===Pt.object){const i=jn.objectKeys(e),s=jn.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const u=gE(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===Pt.array&&r===Pt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],u=gE(o,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Pt.date&&r===Pt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class kh extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(hE(s)||hE(o))return ln;const l=gE(s.value,o.value);return l.valid?((mE(s)||mE(o))&&n.dirty(),{status:n.value,value:l.data}):(It(r,{code:yt.invalid_intersection_types}),ln)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}kh.create=(t,e,n)=>new kh({left:t,right:e,typeName:an.ZodIntersection,...vn(n)});class aa extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pt.array)return It(r,{code:yt.invalid_type,expected:Pt.array,received:r.parsedType}),ln;if(r.data.length<this._def.items.length)return It(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ln;!this._def.rest&&r.data.length>this._def.items.length&&(It(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new oa(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>Ii.mergeArray(n,o)):Ii.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new aa({...this._def,rest:e})}}aa.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new aa({items:t,typeName:an.ZodTuple,rest:null,...vn(e)})};class Ih extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pt.object)return It(r,{code:yt.invalid_type,expected:Pt.object,received:r.parsedType}),ln;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new oa(r,l,r.path,l)),value:o._parse(new oa(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Ii.mergeObjectAsync(n,i):Ii.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Nn?new Ih({keyType:e,valueType:n,typeName:an.ZodRecord,...vn(r)}):new Ih({keyType:To.create(),valueType:e,typeName:an.ZodRecord,...vn(n)})}}class kb extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pt.map)return It(r,{code:yt.invalid_type,expected:Pt.map,received:r.parsedType}),ln;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,u],d)=>({key:i._parse(new oa(r,l,r.path,[d,"key"])),value:s._parse(new oa(r,u,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const d=await u.key,p=await u.value;if(d.status==="aborted"||p.status==="aborted")return ln;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(d.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const d=u.key,p=u.value;if(d.status==="aborted"||p.status==="aborted")return ln;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(d.value,p.value)}return{status:n.value,value:l}}}}kb.create=(t,e,n)=>new kb({valueType:e,keyType:t,typeName:an.ZodMap,...vn(n)});class nu extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pt.set)return It(r,{code:yt.invalid_type,expected:Pt.set,received:r.parsedType}),ln;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(It(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(It(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const d=new Set;for(const p of u){if(p.status==="aborted")return ln;p.status==="dirty"&&n.dirty(),d.add(p.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((u,d)=>s._parse(new oa(r,u,r.path,d)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new nu({...this._def,minSize:{value:e,message:Qt.toString(n)}})}max(e,n){return new nu({...this._def,maxSize:{value:e,message:Qt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}nu.create=(t,e)=>new nu({valueType:t,minSize:null,maxSize:null,typeName:an.ZodSet,...vn(e)});class Td extends Nn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pt.function)return It(n,{code:yt.invalid_type,expected:Pt.function,received:n.parsedType}),ln;function r(l,u){return _b({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wb(),Md].filter(d=>!!d),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(l,u){return _b({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wb(),Md].filter(d=>!!d),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Bd){const l=this;return $i(async function(...u){const d=new Rs([]),p=await l._def.args.parseAsync(u,s).catch(x=>{throw d.addIssue(r(u,x)),d}),h=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(h,s).catch(x=>{throw d.addIssue(i(h,x)),d})})}else{const l=this;return $i(function(...u){const d=l._def.args.safeParse(u,s);if(!d.success)throw new Rs([r(u,d.error)]);const p=Reflect.apply(o,this,d.data),h=l._def.returns.safeParse(p,s);if(!h.success)throw new Rs([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Td({...this._def,args:aa.create(e).rest(Qc.create())})}returns(e){return new Td({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Td({args:e||aa.create([]).rest(Qc.create()),returns:n||Qc.create(),typeName:an.ZodFunction,...vn(r)})}}class Ch extends Nn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ch.create=(t,e)=>new Ch({getter:t,typeName:an.ZodLazy,...vn(e)});class Th extends Nn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return It(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),ln}return{status:"valid",value:e.data}}get value(){return this._def.value}}Th.create=(t,e)=>new Th({value:t,typeName:an.ZodLiteral,...vn(e)});function xF(t,e){return new Jl({values:t,typeName:an.ZodEnum,...vn(e)})}class Jl extends Nn{constructor(){super(...arguments),Op.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return It(n,{expected:jn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),ln}if(Sb(this,Op)||gF(this,Op,new Set(this._def.values)),!Sb(this,Op).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return It(n,{received:n.data,code:yt.invalid_enum_value,options:r}),ln}return $i(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Jl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Jl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Op=new WeakMap;Jl.create=xF;class Rh extends Nn{constructor(){super(...arguments),jp.set(this,void 0)}_parse(e){const n=jn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Pt.string&&r.parsedType!==Pt.number){const i=jn.objectValues(n);return It(r,{expected:jn.joinValues(i),received:r.parsedType,code:yt.invalid_type}),ln}if(Sb(this,jp)||gF(this,jp,new Set(jn.getValidEnumValues(this._def.values))),!Sb(this,jp).has(e.data)){const i=jn.objectValues(n);return It(r,{received:r.data,code:yt.invalid_enum_value,options:i}),ln}return $i(e.data)}get enum(){return this._def.values}}jp=new WeakMap;Rh.create=(t,e)=>new Rh({values:t,typeName:an.ZodNativeEnum,...vn(e)});class Bd extends Nn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pt.promise&&n.common.async===!1)return It(n,{code:yt.invalid_type,expected:Pt.promise,received:n.parsedType}),ln;const r=n.parsedType===Pt.promise?n.data:Promise.resolve(n.data);return $i(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Bd.create=(t,e)=>new Bd({type:t,typeName:an.ZodPromise,...vn(e)});class Ao extends Nn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===an.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{It(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return ln;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?ln:u.status==="dirty"||n.value==="dirty"?ud(u.value):u});{if(n.value==="aborted")return ln;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?ln:l.status==="dirty"||n.value==="dirty"?ud(l.value):l}}if(i.type==="refinement"){const o=l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?ln:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?ln:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!eu(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>eu(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);jn.assertNever(i)}}Ao.create=(t,e,n)=>new Ao({schema:t,typeName:an.ZodEffects,effect:e,...vn(n)});Ao.createWithPreprocess=(t,e,n)=>new Ao({schema:e,effect:{type:"preprocess",transform:t},typeName:an.ZodEffects,...vn(n)});class Yo extends Nn{_parse(e){return this._getType(e)===Pt.undefined?$i(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yo.create=(t,e)=>new Yo({innerType:t,typeName:an.ZodOptional,...vn(e)});class Zl extends Nn{_parse(e){return this._getType(e)===Pt.null?$i(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zl.create=(t,e)=>new Zl({innerType:t,typeName:an.ZodNullable,...vn(e)});class Oh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Pt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Oh.create=(t,e)=>new Oh({innerType:t,typeName:an.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...vn(e)});class jh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return wh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rs(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Rs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}jh.create=(t,e)=>new jh({innerType:t,typeName:an.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...vn(e)});class Ib extends Nn{_parse(e){if(this._getType(e)!==Pt.nan){const r=this._getOrReturnCtx(e);return It(r,{code:yt.invalid_type,expected:Pt.nan,received:r.parsedType}),ln}return{status:"valid",value:e.data}}}Ib.create=t=>new Ib({typeName:an.ZodNaN,...vn(t)});const AH=Symbol("zod_brand");class M1 extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class fm extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ln:s.status==="dirty"?(n.dirty(),ud(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ln:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new fm({in:e,out:n,typeName:an.ZodPipeline})}}class qh extends Nn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(eu(i)&&(i.value=Object.freeze(i.value)),i);return wh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}qh.create=(t,e)=>new qh({innerType:t,typeName:an.ZodReadonly,...vn(e)});function wF(t,e={},n){return t?$d.create().superRefine((r,i)=>{var s,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,d=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...d,fatal:u})}}):$d.create()}const PH={object:Ir.lazycreate};var an;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(an||(an={}));const FH=(t,e={message:`Input not instance of ${t.name}`})=>wF(n=>n instanceof t,e),_F=To.create,SF=Kl.create,DH=Ib.create,LH=Gl.create,EF=_h.create,MH=tu.create,$H=Eb.create,BH=Sh.create,zH=Eh.create,WH=$d.create,VH=Qc.create,UH=Va.create,HH=Nb.create,QH=Oo.create,KH=Ir.create,GH=Ir.strictCreate,JH=Nh.create,ZH=Rv.create,YH=kh.create,XH=aa.create,e9=Ih.create,t9=kb.create,n9=nu.create,r9=Td.create,i9=Ch.create,s9=Th.create,o9=Jl.create,a9=Rh.create,l9=Bd.create,OR=Ao.create,c9=Yo.create,u9=Zl.create,d9=Ao.createWithPreprocess,f9=fm.create,p9=()=>_F().optional(),h9=()=>SF().optional(),m9=()=>EF().optional(),g9={string:t=>To.create({...t,coerce:!0}),number:t=>Kl.create({...t,coerce:!0}),boolean:t=>_h.create({...t,coerce:!0}),bigint:t=>Gl.create({...t,coerce:!0}),date:t=>tu.create({...t,coerce:!0})},y9=ln;var $=Object.freeze({__proto__:null,defaultErrorMap:Md,setErrorMap:dH,getErrorMap:wb,makeIssue:_b,EMPTY_PATH:fH,addIssueToContext:It,ParseStatus:Ii,INVALID:ln,DIRTY:ud,OK:$i,isAborted:hE,isDirty:mE,isValid:eu,isAsync:wh,get util(){return jn},get objectUtil(){return pE},ZodParsedType:Pt,getParsedType:Aa,ZodType:Nn,datetimeRegex:vF,ZodString:To,ZodNumber:Kl,ZodBigInt:Gl,ZodBoolean:_h,ZodDate:tu,ZodSymbol:Eb,ZodUndefined:Sh,ZodNull:Eh,ZodAny:$d,ZodUnknown:Qc,ZodNever:Va,ZodVoid:Nb,ZodArray:Oo,ZodObject:Ir,ZodUnion:Nh,ZodDiscriminatedUnion:Rv,ZodIntersection:kh,ZodTuple:aa,ZodRecord:Ih,ZodMap:kb,ZodSet:nu,ZodFunction:Td,ZodLazy:Ch,ZodLiteral:Th,ZodEnum:Jl,ZodNativeEnum:Rh,ZodPromise:Bd,ZodEffects:Ao,ZodTransformer:Ao,ZodOptional:Yo,ZodNullable:Zl,ZodDefault:Oh,ZodCatch:jh,ZodNaN:Ib,BRAND:AH,ZodBranded:M1,ZodPipeline:fm,ZodReadonly:qh,custom:wF,Schema:Nn,ZodSchema:Nn,late:PH,get ZodFirstPartyTypeKind(){return an},coerce:g9,any:WH,array:QH,bigint:LH,boolean:EF,date:MH,discriminatedUnion:ZH,effect:OR,enum:o9,function:r9,instanceof:FH,intersection:YH,lazy:i9,literal:s9,map:t9,nan:DH,nativeEnum:a9,never:UH,null:zH,nullable:u9,number:SF,object:KH,oboolean:m9,onumber:h9,optional:c9,ostring:p9,pipeline:f9,preprocess:d9,promise:l9,record:e9,set:n9,strictObject:GH,string:_F,symbol:$H,transformer:OR,tuple:XH,undefined:BH,union:JH,unknown:VH,void:HH,NEVER:y9,ZodIssueCode:yt,quotelessJson:uH,ZodError:Rs});const b9=$.object({page:$.number().gte(0,"Page must be greater than zero"),size:$.number().gte(1,"Page size must be greater than one to get any data")}),ps=$.object({id:$.string().min(1)}),$1=$.object({message:$.string()}),hs=$.object({id:$.string().optional(),idIn:$.array($.string()).optional(),fulltext:$.string().optional()}),v9=$.enum(["asc","desc"]),js=()=>$.union([$.boolean(),$.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),qs=()=>$.union([$.number(),$.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),th=()=>$.union([$.number().int(),$.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),cs=t=>$.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>$.array(t).parse(e)),x9=t=>$.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),yE=new Proxy(()=>yE,{get:()=>yE}),ms=({entity:t,shape:e,filter:n,sort:r})=>{const i=yE();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:$.array($.object({name:$.enum(r),sort:v9})),"~sort":i,"~sort-keyof":i}},xl=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),w9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:xl(1,i),start:[],end:[]};const o=Math.max(t-n,r),l=Math.min(t+n,i-r),u=o>r+2,d=l<i-(r+1);return!u&&d?{type:"end",page:t,total:e,start:[],pages:xl(1,n*2+r+2),end:xl(e-(r-1),i)}:u&&!d?{type:"start",page:t,total:e,start:xl(1,r),pages:xl(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:xl(1,r),pages:xl(o,l),end:xl(i-r+1,i)}};var Gu={},Ia={},rr={},wl={},jR;function NF(){if(jR)return wl;jR=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.anumber=t,wl.abytes=n,wl.ahash=r,wl.aexists=i,wl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...l){if(!e(o))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(o.length))throw new Error("Uint8Array expected of length "+l+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,l=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(l&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,l){n(o);const u=l.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return wl}var pn={},qR;function _9(){if(qR)return pn;qR=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.add5L=pn.add5H=pn.add4H=pn.add4L=pn.add3H=pn.add3L=pn.rotlBL=pn.rotlBH=pn.rotlSL=pn.rotlSH=pn.rotr32L=pn.rotr32H=pn.rotrBL=pn.rotrBH=pn.rotrSL=pn.rotrSH=pn.shrSL=pn.shrSH=pn.toBig=void 0,pn.fromBig=n,pn.split=r,pn.add=R;const t=BigInt(2**32-1),e=BigInt(32);function n(j,L=!1){return L?{h:Number(j&t),l:Number(j>>e&t)}:{h:Number(j>>e&t)|0,l:Number(j&t)|0}}function r(j,L=!1){let F=new Uint32Array(j.length),V=new Uint32Array(j.length);for(let U=0;U<j.length;U++){const{h:z,l:ee}=n(j[U],L);[F[U],V[U]]=[z,ee]}return[F,V]}const i=(j,L)=>BigInt(j>>>0)<<e|BigInt(L>>>0);pn.toBig=i;const s=(j,L,F)=>j>>>F;pn.shrSH=s;const o=(j,L,F)=>j<<32-F|L>>>F;pn.shrSL=o;const l=(j,L,F)=>j>>>F|L<<32-F;pn.rotrSH=l;const u=(j,L,F)=>j<<32-F|L>>>F;pn.rotrSL=u;const d=(j,L,F)=>j<<64-F|L>>>F-32;pn.rotrBH=d;const p=(j,L,F)=>j>>>F-32|L<<64-F;pn.rotrBL=p;const h=(j,L)=>L;pn.rotr32H=h;const b=(j,L)=>j;pn.rotr32L=b;const x=(j,L,F)=>j<<F|L>>>32-F;pn.rotlSH=x;const _=(j,L,F)=>L<<F|j>>>32-F;pn.rotlSL=_;const N=(j,L,F)=>L<<F-32|j>>>64-F;pn.rotlBH=N;const I=(j,L,F)=>j<<F-32|L>>>64-F;pn.rotlBL=I;function R(j,L,F,V){const U=(L>>>0)+(V>>>0);return{h:j+F+(U/2**32|0)|0,l:U|0}}const T=(j,L,F)=>(j>>>0)+(L>>>0)+(F>>>0);pn.add3L=T;const O=(j,L,F,V)=>L+F+V+(j/2**32|0)|0;pn.add3H=O;const A=(j,L,F,V)=>(j>>>0)+(L>>>0)+(F>>>0)+(V>>>0);pn.add4L=A;const D=(j,L,F,V,U)=>L+F+V+U+(j/2**32|0)|0;pn.add4H=D;const M=(j,L,F,V,U)=>(j>>>0)+(L>>>0)+(F>>>0)+(V>>>0)+(U>>>0);pn.add5L=M;const W=(j,L,F,V,U,z)=>L+F+V+U+z+(j/2**32|0)|0;pn.add5H=W;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:u,rotrBH:d,rotrBL:p,rotr32H:h,rotr32L:b,rotlSH:x,rotlSL:_,rotlBH:N,rotlBL:I,add:R,add3L:T,add3H:O,add4L:A,add4H:D,add5H:W,add5L:M};return pn.default=P,pn}var e0={},mp={},AR;function S9(){return AR||(AR=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.crypto=void 0,mp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),mp}var PR;function E9(){return PR||(PR=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=l,t.rotl=u,t.byteSwap=d,t.byteSwap32=p,t.bytesToHex=b,t.hexToBytes=N,t.asyncLoop=R,t.utf8ToBytes=T,t.toBytes=O,t.concatBytes=A,t.checkOpts=M,t.wrapConstructor=W,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=j,t.randomBytes=L;const e=S9(),n=NF();function r(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function i(F){return new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}function s(F){return new Uint32Array(F.buffer,F.byteOffset,Math.floor(F.byteLength/4))}function o(F){return new DataView(F.buffer,F.byteOffset,F.byteLength)}function l(F,V){return F<<32-V|F>>>V}function u(F,V){return F<<V|F>>>32-V>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function d(F){return F<<24&0xff000000|F<<8&0xff0000|F>>>8&65280|F>>>24&255}t.byteSwapIfBE=t.isLE?F=>F:F=>d(F);function p(F){for(let V=0;V<F.length;V++)F[V]=d(F[V])}const h=Array.from({length:256},(F,V)=>V.toString(16).padStart(2,"0"));function b(F){(0,n.abytes)(F);let V="";for(let U=0;U<F.length;U++)V+=h[F[U]];return V}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(F){if(F>=x._0&&F<=x._9)return F-x._0;if(F>=x.A&&F<=x.F)return F-(x.A-10);if(F>=x.a&&F<=x.f)return F-(x.a-10)}function N(F){if(typeof F!="string")throw new Error("hex string expected, got "+typeof F);const V=F.length,U=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const z=new Uint8Array(U);for(let ee=0,Z=0;ee<U;ee++,Z+=2){const le=_(F.charCodeAt(Z)),se=_(F.charCodeAt(Z+1));if(le===void 0||se===void 0){const te=F[Z]+F[Z+1];throw new Error('hex string expected, got non-hex character "'+te+'" at index '+Z)}z[ee]=le*16+se}return z}const I=async()=>{};t.nextTick=I;async function R(F,V,U){let z=Date.now();for(let ee=0;ee<F;ee++){U(ee);const Z=Date.now()-z;Z>=0&&Z<V||(await (0,t.nextTick)(),z+=Z)}}function T(F){if(typeof F!="string")throw new Error("utf8ToBytes expected string, got "+typeof F);return new Uint8Array(new TextEncoder().encode(F))}function O(F){return typeof F=="string"&&(F=T(F)),(0,n.abytes)(F),F}function A(...F){let V=0;for(let z=0;z<F.length;z++){const ee=F[z];(0,n.abytes)(ee),V+=ee.length}const U=new Uint8Array(V);for(let z=0,ee=0;z<F.length;z++){const Z=F[z];U.set(Z,ee),ee+=Z.length}return U}class D{clone(){return this._cloneInto()}}t.Hash=D;function M(F,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(F,V)}function W(F){const V=z=>F().update(O(z)).digest(),U=F();return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=()=>F(),V}function P(F){const V=(z,ee)=>F(ee).update(O(z)).digest(),U=F({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=z=>F(z),V}function j(F){const V=(z,ee)=>F(ee).update(O(z)).digest(),U=F({});return V.outputLen=U.outputLen,V.blockLen=U.blockLen,V.create=z=>F(z),V}function L(F=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(F));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(F);throw new Error("crypto.getRandomValues must be defined")}}(e0)),e0}var FR;function N9(){if(FR)return rr;FR=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.shake256=rr.shake128=rr.keccak_512=rr.keccak_384=rr.keccak_256=rr.keccak_224=rr.sha3_512=rr.sha3_384=rr.sha3_256=rr.sha3_224=rr.Keccak=void 0,rr.keccakP=I;const t=NF(),e=_9(),n=E9(),r=[],i=[],s=[],o=BigInt(0),l=BigInt(1),u=BigInt(2),d=BigInt(7),p=BigInt(256),h=BigInt(113);for(let A=0,D=l,M=1,W=0;A<24;A++){[M,W]=[W,(2*M+3*W)%5],r.push(2*(5*W+M)),i.push((A+1)*(A+2)/2%64);let P=o;for(let j=0;j<7;j++)D=(D<<l^(D>>d)*h)%p,D&u&&(P^=l<<(l<<BigInt(j))-l);s.push(P)}const[b,x]=(0,e.split)(s,!0),_=(A,D,M)=>M>32?(0,e.rotlBH)(A,D,M):(0,e.rotlSH)(A,D,M),N=(A,D,M)=>M>32?(0,e.rotlBL)(A,D,M):(0,e.rotlSL)(A,D,M);function I(A,D=24){const M=new Uint32Array(10);for(let W=24-D;W<24;W++){for(let L=0;L<10;L++)M[L]=A[L]^A[L+10]^A[L+20]^A[L+30]^A[L+40];for(let L=0;L<10;L+=2){const F=(L+8)%10,V=(L+2)%10,U=M[V],z=M[V+1],ee=_(U,z,1)^M[F],Z=N(U,z,1)^M[F+1];for(let le=0;le<50;le+=10)A[L+le]^=ee,A[L+le+1]^=Z}let P=A[2],j=A[3];for(let L=0;L<24;L++){const F=i[L],V=_(P,j,F),U=N(P,j,F),z=r[L];P=A[z],j=A[z+1],A[z]=V,A[z+1]=U}for(let L=0;L<50;L+=10){for(let F=0;F<10;F++)M[F]=A[L+F];for(let F=0;F<10;F++)A[L+F]^=~M[(F+2)%10]&M[(F+4)%10]}A[0]^=b[W],A[1]^=x[W]}M.fill(0)}class R extends n.Hash{constructor(D,M,W,P=!1,j=24){if(super(),this.blockLen=D,this.suffix=M,this.outputLen=W,this.enableXOF=P,this.rounds=j,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(W),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),I(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(D){(0,t.aexists)(this);const{blockLen:M,state:W}=this;D=(0,n.toBytes)(D);const P=D.length;for(let j=0;j<P;){const L=Math.min(M-this.pos,P-j);for(let F=0;F<L;F++)W[this.pos++]^=D[j++];this.pos===M&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:D,suffix:M,pos:W,blockLen:P}=this;D[W]^=M,M&128&&W===P-1&&this.keccak(),D[P-1]^=128,this.keccak()}writeInto(D){(0,t.aexists)(this,!1),(0,t.abytes)(D),this.finish();const M=this.state,{blockLen:W}=this;for(let P=0,j=D.length;P<j;){this.posOut>=W&&this.keccak();const L=Math.min(W-this.posOut,j-P);D.set(M.subarray(this.posOut,this.posOut+L),P),this.posOut+=L,P+=L}return D}xofInto(D){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(D)}xof(D){return(0,t.anumber)(D),this.xofInto(new Uint8Array(D))}digestInto(D){if((0,t.aoutput)(D,this),this.finished)throw new Error("digest() was already called");return this.writeInto(D),this.destroy(),D}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(D){const{blockLen:M,suffix:W,outputLen:P,rounds:j,enableXOF:L}=this;return D||(D=new R(M,W,P,L,j)),D.state32.set(this.state32),D.pos=this.pos,D.posOut=this.posOut,D.finished=this.finished,D.rounds=j,D.suffix=W,D.outputLen=P,D.enableXOF=L,D.destroyed=this.destroyed,D}}rr.Keccak=R;const T=(A,D,M)=>(0,n.wrapConstructor)(()=>new R(D,A,M));rr.sha3_224=T(6,144,224/8),rr.sha3_256=T(6,136,256/8),rr.sha3_384=T(6,104,384/8),rr.sha3_512=T(6,72,512/8),rr.keccak_224=T(1,144,224/8),rr.keccak_256=T(1,136,256/8),rr.keccak_384=T(1,104,384/8),rr.keccak_512=T(1,72,512/8);const O=(A,D,M)=>(0,n.wrapXOFConstructorWithOpts)((W={})=>new R(D,A,W.dkLen===void 0?M:W.dkLen,!0));return rr.shake128=O(31,168,128/8),rr.shake256=O(31,136,256/8),rr}var DR;function k9(){if(DR)return Ia;DR=1;const{sha3_512:t}=N9(),e=24,n=32,r=(_=4,N=Math.random)=>{let I="";for(;I.length<_;)I=I+Math.floor(N()*36).toString(36);return I};function i(_){let N=8n,I=0n;for(const R of _.values()){const T=BigInt(R);I=(I<<N)+T}return I}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,N)=>String.fromCharCode(N+97)),l=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof Dc<"u"?Dc:typeof window<"u"?window:{},random:N=Math.random}={})=>{const I=Object.keys(_).toString(),R=I.length?I+r(n,N):r(n,N);return s(R).substring(0,n)},d=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:N=d(Math.floor(_()*p)),length:I=e,fingerprint:R=u({random:_})}={})=>function(){const O=l(_),A=Date.now().toString(36),D=N().toString(36),M=r(I,_),W=`${A+M+D+R}`;return`${O+s(W).substring(1,I)}`},b=h(),x=(_,{minLength:N=2,maxLength:I=n}={})=>{const R=_.length,T=/^[0-9a-z]+$/;try{if(typeof _=="string"&&R>=N&&R<=I&&T.test(_))return!0}finally{}return!1};return Ia.getConstants=()=>({defaultLength:e,bigLength:n}),Ia.init=h,Ia.createId=b,Ia.bufToBigInt=i,Ia.createCounter=d,Ia.createFingerprint=u,Ia.isCuid=x,Ia}var LR;function I9(){if(LR)return Gu;LR=1;const{createId:t,init:e,getConstants:n,isCuid:r}=k9();return Gu.createId=t,Gu.init=e,Gu.getConstants=n,Gu.isCuid=r,Gu}var C9=I9();const Pn=C9.createId;var t0,MR;function T9(){if(MR)return t0;MR=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(T){T!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(O){try{var A=t.call(O);return i.test(A)}catch{return!1}},o=function(O){try{return s(O)?!1:(t.call(O),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",d="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",b="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,N=!(0 in[,]),I=function(){return!1};if(typeof document=="object"){var R=document.all;l.call(R)===l.call(document.all)&&(I=function(O){if((N||!O)&&(typeof O>"u"||typeof O=="object"))try{var A=l.call(O);return(A===h||A===b||A===x||A===u)&&O("")==null}catch{}return!1})}return t0=e?function(O){if(I(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;try{e(O,null,n)}catch(A){if(A!==r)return!1}return!s(O)&&o(O)}:function(O){if(I(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;if(_)return o(O);if(s(O))return!1;var A=l.call(O);return A!==d&&A!==p&&!/^\[object HTML/.test(A)?!1:o(O)},t0}var R9=T9();const O9=lo(R9),j9=t=>O9(t);var Ty={exports:{}},q9=Ty.exports,$R;function A9(){return $R||($R=1,function(t){(function(e,n){t.exports=n()})(q9,function(){var e=Object.prototype.toString;function n(h,b){return h==null?!1:Object.prototype.hasOwnProperty.call(h,b)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var b in h)if(n(h,b))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function l(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var b=parseInt(h);return b.toString()===h?b:h}function d(h){h=h||{};var b=function(R){return Object.keys(b).reduce(function(T,O){return O==="create"||typeof b[O]=="function"&&(T[O]=b[O].bind(b,R)),T},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(R,T){return typeof T=="number"&&Array.isArray(R)||n(R,T)};function _(R,T){if(x(R,T))return R[T]}var N;h.includeInheritedProps?N=function(R,T){typeof T!="string"&&typeof T!="number"&&(T=String(T));var O=_(R,T);if(T==="__proto__"||T==="prototype"||T==="constructor"&&typeof O=="function")throw new Error("For security reasons, object's magic properties cannot be set");return O}:N=function(R,T){return _(R,T)};function I(R,T,O,A){if(typeof T=="number"&&(T=[T]),!T||T.length===0)return R;if(typeof T=="string")return I(R,T.split(".").map(u),O,A);var D=T[0],M=N(R,D);return T.length===1?((M===void 0||!A)&&(R[D]=O),M):(M===void 0&&(typeof T[1]=="number"?R[D]=[]:R[D]={}),I(R[D],T.slice(1),O,A))}return b.has=function(R,T){if(typeof T=="number"?T=[T]:typeof T=="string"&&(T=T.split(".")),!T||T.length===0)return!!R;for(var O=0;O<T.length;O++){var A=u(T[O]);if(typeof A=="number"&&o(R)&&A<R.length||(h.includeInheritedProps?A in Object(R):n(R,A)))R=R[A];else return!1}return!0},b.ensureExists=function(R,T,O){return I(R,T,O,!0)},b.set=function(R,T,O,A){return I(R,T,O,A)},b.insert=function(R,T,O,A){var D=b.get(R,T);A=~~A,o(D)||(D=[],b.set(R,T,D)),D.splice(A,0,O)},b.empty=function(R,T){if(!r(T)&&R!=null){var O,A;if(O=b.get(R,T)){if(typeof O=="string")return b.set(R,T,"");if(l(O))return b.set(R,T,!1);if(typeof O=="number")return b.set(R,T,0);if(o(O))O.length=0;else if(s(O))for(A in O)x(O,A)&&delete O[A];else return b.set(R,T,null)}}},b.push=function(R,T){var O=b.get(R,T);o(O)||(O=[],b.set(R,T,O)),O.push.apply(O,Array.prototype.slice.call(arguments,2))},b.coalesce=function(R,T,O){for(var A,D=0,M=T.length;D<M;D++)if((A=b.get(R,T[D]))!==void 0)return A;return O},b.get=function(R,T,O){if(typeof T=="number"&&(T=[T]),!T||T.length===0)return R;if(R==null)return O;if(typeof T=="string")return b.get(R,T.split("."),O);var A=u(T[0]),D=N(R,A);return D===void 0?O:T.length===1?D:b.get(R[A],T.slice(1),O)},b.del=function(T,O){if(typeof O=="number"&&(O=[O]),T==null||r(O))return T;if(typeof O=="string")return b.del(T,O.split("."));var A=u(O[0]);if(N(T,A),!x(T,A))return T;if(O.length===1)o(T)?T.splice(A,1):delete T[A];else return b.del(T[A],O.slice(1));return T},b}var p=d();return p.create=d,p.withInheritedProps=d({includeInheritedProps:!0}),p})}(Ty)),Ty.exports}var P9=A9();const BR=lo(P9);function xn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const B1=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},kF=gn({slot:{base:["flex","flex-row","gap-2","items-center","rounded","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),F9=gn({use:kF,slot:{},variant:{},defaults:{}}),z1=({icon:t,iconProps:e,variant:n,tva:r=F9,css:i,children:s,...o})=>{const l=r({...n,css:i}).slots;return f.jsxs("div",{className:l.base(),...o,children:[_v(t)?f.jsx(Xt,{icon:t,...e}):t,s]})};function Ov(){return typeof window<"u"}function tc(t){return IF(t)?(t.nodeName||"").toLowerCase():"#document"}function us(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function la(t){var e;return(e=(IF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IF(t){return Ov()?t instanceof Node||t instanceof us(t).Node:!1}function sr(t){return Ov()?t instanceof Element||t instanceof us(t).Element:!1}function Zr(t){return Ov()?t instanceof HTMLElement||t instanceof us(t).HTMLElement:!1}function bE(t){return!Ov()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof us(t).ShadowRoot}function pm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=oo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function D9(t){return["table","td","th"].includes(tc(t))}function jv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function W1(t){const e=qv(),n=sr(t)?oo(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function L9(t){let e=Ua(t);for(;Zr(e)&&!Da(e);){if(W1(e))return e;if(jv(e))return null;e=Ua(e)}return null}function qv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Da(t){return["html","body","#document"].includes(tc(t))}function oo(t){return us(t).getComputedStyle(t)}function Av(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ua(t){if(tc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||bE(t)&&t.host||la(t);return bE(e)?e.host:e}function CF(t){const e=Ua(t);return Da(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zr(e)&&pm(e)?e:CF(e)}function $l(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=CF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=us(i);if(s){const l=vE(o);return e.concat(o,o.visualViewport||[],pm(i)?i:[],l&&n?$l(l):[])}return e.concat(i,$l(i,[],n))}function vE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function No(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function fi(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&bE(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function V1(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function TF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function RF(t){return t.mozInputSource===0&&t.isTrusted?!0:xE()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function U1(t){return $9()?!1:!xE()&&t.width===0&&t.height===0||xE()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function OF(){return/apple/i.test(navigator.vendor)}function xE(){const t=/android/i;return t.test(V1())||t.test(TF())}function M9(){return V1().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function $9(){return TF().includes("jsdom/")}function Ah(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function B9(t){return"nativeEvent"in t}function z9(t){return t.matches("html,body")}function pi(t){return t?.ownerDocument||document}function n0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function jl(t){return"composedPath"in t?t.composedPath()[0]:t.target}const W9="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function H1(t){return Zr(t)&&t.matches(W9)}function qi(t){t.preventDefault(),t.stopPropagation()}function jF(t){return t?t.getAttribute("role")==="combobox"&&H1(t):!1}const zd=Math.min,Es=Math.max,Cb=Math.round,dd=Math.floor,Xo=t=>({x:t,y:t}),V9={left:"right",right:"left",bottom:"top",top:"bottom"},U9={start:"end",end:"start"};function zR(t,e,n){return Es(t,zd(e,n))}function hm(t,e){return typeof t=="function"?t(e):t}function Yl(t){return t.split("-")[0]}function mm(t){return t.split("-")[1]}function qF(t){return t==="x"?"y":"x"}function AF(t){return t==="y"?"height":"width"}function ru(t){return["top","bottom"].includes(Yl(t))?"y":"x"}function PF(t){return qF(ru(t))}function H9(t,e,n){n===void 0&&(n=!1);const r=mm(t),i=PF(t),s=AF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Tb(o)),[o,Tb(o)]}function Q9(t){const e=Tb(t);return[wE(t),e,wE(e)]}function wE(t){return t.replace(/start|end/g,e=>U9[e])}function K9(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function G9(t,e,n,r){const i=mm(t);let s=K9(Yl(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(wE)))),s}function Tb(t){return t.replace(/left|right|bottom|top/g,e=>V9[e])}function J9(t){return{top:0,right:0,bottom:0,left:0,...t}}function Z9(t){return typeof t!="number"?J9(t):{top:t,right:t,bottom:t,left:t}}function Rb(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var Y9=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ob=Y9.join(","),FF=typeof Element>"u",Wd=FF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,jb=!FF&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},qb=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},X9=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},eQ=function(e,n,r){if(qb(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ob));return n&&Wd.call(e,Ob)&&i.unshift(e),i=i.filter(r),i},tQ=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!qb(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,d=t(u,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else{var p=Wd.call(o,Ob);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!qb(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&b){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},DF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},LF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||X9(e))&&!DF(e)?0:e.tabIndex},nQ=function(e,n){var r=LF(e);return r<0&&n&&!DF(e)?0:r},rQ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},MF=function(e){return e.tagName==="INPUT"},iQ=function(e){return MF(e)&&e.type==="hidden"},sQ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},oQ=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},aQ=function(e){if(!e.name)return!0;var n=e.form||jb(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=oQ(i,e.form);return!s||s===e},lQ=function(e){return MF(e)&&e.type==="radio"},cQ=function(e){return lQ(e)&&!aQ(e)},uQ=function(e){var n,r=e&&jb(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,l,u;for(s=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var d,p,h;r=jb(i),i=(d=r)===null||d===void 0?void 0:d.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},WR=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},dQ=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Wd.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Wd.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,d=jb(e);if(u&&!u.shadowRoot&&i(u)===!0)return WR(e);e.assignedSlot?e=e.assignedSlot:!u&&d!==e.ownerDocument?e=d.host:e=u}e=l}if(uQ(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return WR(e);return!1},fQ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Wd.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},pQ=function(e,n){return!(n.disabled||qb(n)||iQ(n)||dQ(n,e)||sQ(n)||fQ(n))},_E=function(e,n){return!(cQ(n)||LF(n)<0||!pQ(e,n))},hQ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},mQ=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=nQ(l,o),d=o?t(i.candidates):l;u===0?o?n.push.apply(n,d):n.push(l):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:d})}),r.sort(rQ).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},Pv=function(e,n){n=n||{};var r;return n.getShadowRoot?r=tQ([e],n.includeContainer,{filter:_E.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:hQ}):r=eQ(e,n.includeContainer,_E.bind(null,n)),mQ(r)},gQ=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Wd.call(e,Ob)===!1?!1:_E(n,e)};function VR(t,e,n){let{reference:r,floating:i}=t;const s=ru(e),o=PF(e),l=AF(o),u=Yl(e),d=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(mm(e)){case"start":x[o]-=b*(n&&d?-1:1);break;case"end":x[o]+=b*(n&&d?-1:1);break}return x}const yQ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=VR(d,r,u),b=r,x={},_=0;for(let N=0;N<l.length;N++){const{name:I,fn:R}=l[N],{x:T,y:O,data:A,reset:D}=await R({x:p,y:h,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:d,platform:o,elements:{reference:t,floating:e}});p=T??p,h=O??h,x={...x,[I]:{...x[I],...A}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(b=D.placement),D.rects&&(d=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:p,y:h}=VR(d,b,u)),N=-1)}return{x:p,y:h,placement:b,strategy:i,middlewareData:x}};async function Q1(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:b=!1,padding:x=0}=hm(e,t),_=Z9(x),I=l[b?h==="floating"?"reference":"floating":h],R=Rb(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:p,strategy:u})),T=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,O=await (s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),A=await (s.isElement==null?void 0:s.isElement(O))?await (s.getScale==null?void 0:s.getScale(O))||{x:1,y:1}:{x:1,y:1},D=Rb(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:T,offsetParent:O,strategy:u}):T);return{top:(R.top-D.top+_.top)/A.y,bottom:(D.bottom-R.bottom+_.bottom)/A.y,left:(R.left-D.left+_.left)/A.x,right:(D.right-R.right+_.right)/A.x}}const bQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:d}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:N=!0,...I}=hm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const R=Yl(i),T=ru(l),O=Yl(l)===l,A=await (u.isRTL==null?void 0:u.isRTL(d.floating)),D=b||(O||!N?[Tb(l)]:Q9(l)),M=_!=="none";!b&&M&&D.push(...G9(l,N,_,A));const W=[l,...D],P=await Q1(e,I),j=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&j.push(P[R]),h){const z=H9(i,o,A);j.push(P[z[0]],P[z[1]])}if(L=[...L,{placement:i,overflows:j}],!j.every(z=>z<=0)){var F,V;const z=(((F=s.flip)==null?void 0:F.index)||0)+1,ee=W[z];if(ee)return{data:{index:z,overflows:L},reset:{placement:ee}};let Z=(V=L.filter(le=>le.overflows[0]<=0).sort((le,se)=>le.overflows[1]-se.overflows[1])[0])==null?void 0:V.placement;if(!Z)switch(x){case"bestFit":{var U;const le=(U=L.filter(se=>{if(M){const te=ru(se.placement);return te===T||te==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(te=>te>0).reduce((te,oe)=>te+oe,0)]).sort((se,te)=>se[1]-te[1])[0])==null?void 0:U[0];le&&(Z=le);break}case"initialPlacement":Z=l;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};async function vQ(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yl(n),l=mm(n),u=ru(n)==="y",d=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=hm(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(x=l==="end"?_*-1:_),u?{x:x*p,y:b*d}:{x:b*d,y:x*p}}const xQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await vQ(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},wQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:I=>{let{x:R,y:T}=I;return{x:R,y:T}}},...u}=hm(t,e),d={x:n,y:r},p=await Q1(e,u),h=ru(Yl(i)),b=qF(h);let x=d[b],_=d[h];if(s){const I=b==="y"?"top":"left",R=b==="y"?"bottom":"right",T=x+p[I],O=x-p[R];x=zR(T,x,O)}if(o){const I=h==="y"?"top":"left",R=h==="y"?"bottom":"right",T=_+p[I],O=_-p[R];_=zR(T,_,O)}const N=l.fn({...e,[b]:x,[h]:_});return{...N,data:{x:N.x-n,y:N.y-r,enabled:{[b]:s,[h]:o}}}}}},_Q=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...d}=hm(t,e),p=await Q1(e,d),h=Yl(i),b=mm(i),x=ru(i)==="y",{width:_,height:N}=s.floating;let I,R;h==="top"||h==="bottom"?(I=h,R=b===(await (o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(R=h,I=b==="end"?"top":"bottom");const T=N-p.top-p.bottom,O=_-p.left-p.right,A=zd(N-p[I],T),D=zd(_-p[R],O),M=!e.middlewareData.shift;let W=A,P=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=O),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=T),M&&!b){const L=Es(p.left,0),F=Es(p.right,0),V=Es(p.top,0),U=Es(p.bottom,0);x?P=_-2*(L!==0||F!==0?L+F:Es(p.left,p.right)):W=N-2*(V!==0||U!==0?V+U:Es(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:W});const j=await o.getDimensions(l.floating);return _!==j.width||N!==j.height?{reset:{rects:!0}}:{}}}};function $F(t){const e=oo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Zr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Cb(n)!==s||Cb(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function K1(t){return sr(t)?t:t.contextElement}function Rd(t){const e=K1(t);if(!Zr(e))return Xo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=$F(e);let o=(s?Cb(n.width):n.width)/r,l=(s?Cb(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const SQ=Xo(0);function BF(t){const e=us(t);return!qv()||!e.visualViewport?SQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EQ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==us(t)?!1:e}function iu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=K1(t);let o=Xo(1);e&&(r?sr(r)&&(o=Rd(r)):o=Rd(t));const l=EQ(s,n,r)?BF(s):Xo(0);let u=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const b=us(s),x=r&&sr(r)?us(r):r;let _=b,N=vE(_);for(;N&&r&&x!==_;){const I=Rd(N),R=N.getBoundingClientRect(),T=oo(N),O=R.left+(N.clientLeft+parseFloat(T.paddingLeft))*I.x,A=R.top+(N.clientTop+parseFloat(T.paddingTop))*I.y;u*=I.x,d*=I.y,p*=I.x,h*=I.y,u+=O,d+=A,_=us(N),N=vE(_)}}return Rb({width:p,height:h,x:u,y:d})}function G1(t,e){const n=Av(t).scrollLeft;return e?e.left+n:iu(la(t)).left+n}function zF(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:G1(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function NQ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=la(r),l=e?jv(e.floating):!1;if(r===o||l&&s)return n;let u={scrollLeft:0,scrollTop:0},d=Xo(1);const p=Xo(0),h=Zr(r);if((h||!h&&!s)&&((tc(r)!=="body"||pm(o))&&(u=Av(r)),Zr(r))){const x=iu(r);d=Rd(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const b=o&&!h&&!s?zF(o,u,!0):Xo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+p.x+b.x,y:n.y*d.y-u.scrollTop*d.y+p.y+b.y}}function kQ(t){return Array.from(t.getClientRects())}function IQ(t){const e=la(t),n=Av(t),r=t.ownerDocument.body,i=Es(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Es(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+G1(t);const l=-n.scrollTop;return oo(r).direction==="rtl"&&(o+=Es(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function CQ(t,e){const n=us(t),r=la(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const d=qv();(!d||d&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:l,y:u}}function TQ(t,e){const n=iu(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Zr(t)?Rd(t):Xo(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,u=i*s.x,d=r*s.y;return{width:o,height:l,x:u,y:d}}function UR(t,e,n){let r;if(e==="viewport")r=CQ(t,n);else if(e==="document")r=IQ(la(t));else if(sr(e))r=TQ(e,n);else{const i=BF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Rb(r)}function WF(t,e){const n=Ua(t);return n===e||!sr(n)||Da(n)?!1:oo(n).position==="fixed"||WF(n,e)}function RQ(t,e){const n=e.get(t);if(n)return n;let r=$l(t,[],!1).filter(l=>sr(l)&&tc(l)!=="body"),i=null;const s=oo(t).position==="fixed";let o=s?Ua(t):t;for(;sr(o)&&!Da(o);){const l=oo(o),u=W1(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||pm(o)&&!u&&WF(t,o))?r=r.filter(p=>p!==o):i=l,o=Ua(o)}return e.set(t,r),r}function OQ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?jv(e)?[]:RQ(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((d,p)=>{const h=UR(e,p,i);return d.top=Es(h.top,d.top),d.right=zd(h.right,d.right),d.bottom=zd(h.bottom,d.bottom),d.left=Es(h.left,d.left),d},UR(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function jQ(t){const{width:e,height:n}=$F(t);return{width:e,height:n}}function qQ(t,e,n){const r=Zr(e),i=la(e),s=n==="fixed",o=iu(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=Xo(0);if(r||!r&&!s)if((tc(e)!=="body"||pm(i))&&(l=Av(e)),r){const b=iu(e,!0,s,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else i&&(u.x=G1(i));const d=i&&!r&&!s?zF(i,l):Xo(0),p=o.left+l.scrollLeft-u.x-d.x,h=o.top+l.scrollTop-u.y-d.y;return{x:p,y:h,width:o.width,height:o.height}}function r0(t){return oo(t).position==="static"}function HR(t,e){if(!Zr(t)||oo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return la(t)===n&&(n=n.ownerDocument.body),n}function VF(t,e){const n=us(t);if(jv(t))return n;if(!Zr(t)){let i=Ua(t);for(;i&&!Da(i);){if(sr(i)&&!r0(i))return i;i=Ua(i)}return n}let r=HR(t,e);for(;r&&D9(r)&&r0(r);)r=HR(r,e);return r&&Da(r)&&r0(r)&&!W1(r)?n:r||L9(t)||n}const AQ=async function(t){const e=this.getOffsetParent||VF,n=this.getDimensions,r=await n(t.floating);return{reference:qQ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function PQ(t){return oo(t).direction==="rtl"}const FQ={convertOffsetParentRelativeRectToViewportRelativeRect:NQ,getDocumentElement:la,getClippingRect:OQ,getOffsetParent:VF,getElementRects:AQ,getClientRects:kQ,getDimensions:jQ,getScale:Rd,isElement:sr,isRTL:PQ};function UF(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function DQ(t,e){let n=null,r;const i=la(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const d=t.getBoundingClientRect(),{left:p,top:h,width:b,height:x}=d;if(l||e(),!b||!x)return;const _=dd(h),N=dd(i.clientWidth-(p+b)),I=dd(i.clientHeight-(h+x)),R=dd(p),O={rootMargin:-_+"px "+-N+"px "+-I+"px "+-R+"px",threshold:Es(0,zd(1,u))||1};let A=!0;function D(M){const W=M[0].intersectionRatio;if(W!==u){if(!A)return o();W?o(!1,W):r=setTimeout(()=>{o(!1,1e-7)},1e3)}W===1&&!UF(d,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(D,{...O,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,O)}n.observe(t)}return o(!0),s}function HF(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=K1(t),p=i||s?[...d?$l(d):[],...$l(e)]:[];p.forEach(R=>{i&&R.addEventListener("scroll",n,{passive:!0}),s&&R.addEventListener("resize",n)});const h=d&&l?DQ(d,n):null;let b=-1,x=null;o&&(x=new ResizeObserver(R=>{let[T]=R;T&&T.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var O;(O=x)==null||O.observe(e)})),n()}),d&&!u&&x.observe(d),x.observe(e));let _,N=u?iu(t):null;u&&I();function I(){const R=iu(t);N&&!UF(N,R)&&n(),N=R,_=requestAnimationFrame(I)}return n(),()=>{var R;p.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),h?.(),(R=x)==null||R.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const LQ=xQ,MQ=wQ,$Q=bQ,BQ=_Q,zQ=(t,e,n)=>{const r=new Map,i={platform:FQ,...n},s={...i.platform,_c:r};return yQ(t,e,{...i,platform:s})};var Ry=typeof document<"u"?Q.useLayoutEffect:Q.useEffect;function Ab(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ab(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Ab(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function QF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function QR(t,e){const n=QF(t);return Math.round(e*n)/n}function i0(t){const e=Q.useRef(t);return Ry(()=>{e.current=t}),e}function WQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=t,[p,h]=Q.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,x]=Q.useState(r);Ab(b,r)||x(r);const[_,N]=Q.useState(null),[I,R]=Q.useState(null),T=Q.useCallback(se=>{se!==M.current&&(M.current=se,N(se))},[]),O=Q.useCallback(se=>{se!==W.current&&(W.current=se,R(se))},[]),A=s||_,D=o||I,M=Q.useRef(null),W=Q.useRef(null),P=Q.useRef(p),j=u!=null,L=i0(u),F=i0(i),V=i0(d),U=Q.useCallback(()=>{if(!M.current||!W.current)return;const se={placement:e,strategy:n,middleware:b};F.current&&(se.platform=F.current),zQ(M.current,W.current,se).then(te=>{const oe={...te,isPositioned:V.current!==!1};z.current&&!Ab(P.current,oe)&&(P.current=oe,lv.flushSync(()=>{h(oe)}))})},[b,e,n,F,V]);Ry(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(se=>({...se,isPositioned:!1})))},[d]);const z=Q.useRef(!1);Ry(()=>(z.current=!0,()=>{z.current=!1}),[]),Ry(()=>{if(A&&(M.current=A),D&&(W.current=D),A&&D){if(L.current)return L.current(A,D,U);U()}},[A,D,U,L,j]);const ee=Q.useMemo(()=>({reference:M,floating:W,setReference:T,setFloating:O}),[T,O]),Z=Q.useMemo(()=>({reference:A,floating:D}),[A,D]),le=Q.useMemo(()=>{const se={position:n,left:0,top:0};if(!Z.floating)return se;const te=QR(Z.floating,p.x),oe=QR(Z.floating,p.y);return l?{...se,transform:"translate("+te+"px, "+oe+"px)",...QF(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:oe}},[n,l,Z.floating,p.x,p.y]);return Q.useMemo(()=>({...p,update:U,refs:ee,elements:Z,floatingStyles:le}),[p,U,ee,Z,le])}const KF=(t,e)=>({...LQ(t),options:[t,e]}),VQ=(t,e)=>({...MQ(t),options:[t,e]}),GF=(t,e)=>({...$Q(t),options:[t,e]}),UQ=(t,e)=>({...BQ(t),options:[t,e]});function KR(t){return Q.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const JF={...lB},HQ=JF.useInsertionEffect,QQ=HQ||(t=>t());function Fi(t){const e=Q.useRef(()=>{});return QQ(()=>{e.current=t}),Q.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const J1="ArrowUp",gm="ArrowDown",Bl="ArrowLeft",zl="ArrowRight";function Hg(t,e,n){return Math.floor(t/e)!==n}function nh(t,e){return e<0||e>=t.current.length}function s0(t,e){return wi(t,{disabledIndices:e})}function GR(t,e){return wi(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function wi(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let l=n;do l+=r?-s:s;while(l>=0&&l<=o.length-1&&Oy(o,l,i));return l}function KQ(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:l,minIndex:u,maxIndex:d,prevIndex:p,stopEvent:h=!1}=e,b=p;if(n.key===J1){if(h&&qi(n),p===-1)b=d;else if(b=wi(t,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),i&&(p-o<u||b<0)){const x=p%o,_=d%o,N=d-(_-x);_===x?b=d:b=_>x?N:N-o}nh(t,b)&&(b=p)}if(n.key===gm&&(h&&qi(n),p===-1?b=u:(b=wi(t,{startingIndex:p,amount:o,disabledIndices:l}),i&&p+o>d&&(b=wi(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),nh(t,b)&&(b=p)),r==="both"){const x=dd(p/o);n.key===(s?Bl:zl)&&(h&&qi(n),p%o!==o-1?(b=wi(t,{startingIndex:p,disabledIndices:l}),i&&Hg(b,o,x)&&(b=wi(t,{startingIndex:p-p%o-1,disabledIndices:l}))):i&&(b=wi(t,{startingIndex:p-p%o-1,disabledIndices:l})),Hg(b,o,x)&&(b=p)),n.key===(s?zl:Bl)&&(h&&qi(n),p%o!==0?(b=wi(t,{startingIndex:p,decrement:!0,disabledIndices:l}),i&&Hg(b,o,x)&&(b=wi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):i&&(b=wi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),Hg(b,o,x)&&(b=p));const _=dd(d/o)===x;nh(t,b)&&(i&&_?b=n.key===(s?zl:Bl)?d:wi(t,{startingIndex:p-p%o-1,disabledIndices:l}):b=p)}return b}function GQ(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:l,height:u}=s,d=!1;for(n&&(i=0);!d;){const p=[];for(let h=0;h<l;h++)for(let b=0;b<u;b++)p.push(i+h+b*e);i%e+l<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),d=!0):i++}}),[...r]}function JQ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function ZQ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function Oy(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var mr=typeof document<"u"?Q.useLayoutEffect:Q.useEffect;let JR=!1,YQ=0;const ZR=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+YQ++;function XQ(){const[t,e]=Q.useState(()=>JR?ZR():void 0);return mr(()=>{t==null&&e(ZR())},[]),Q.useEffect(()=>{JR=!0},[]),t}const e7=JF.useId,Z1=e7||XQ;function ZF(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const YF=Q.createContext(null),XF=Q.createContext(null),ym=()=>{var t;return((t=Q.useContext(YF))==null?void 0:t.id)||null},df=()=>Q.useContext(XF);function t7(t){const e=Z1(),n=df(),i=ym();return mr(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function n7(t){const{children:e,id:n}=t,r=ym();return f.jsx(YF.Provider,{value:Q.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function r7(t){const{children:e}=t,n=Q.useRef([]),r=Q.useCallback(o=>{n.current=[...n.current,o]},[]),i=Q.useCallback(o=>{n.current=n.current.filter(l=>l!==o)},[]),s=Q.useState(()=>ZF())[0];return f.jsx(XF.Provider,{value:Q.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function su(t){return"data-floating-ui-"+t}function Di(t){const e=Q.useRef(t);return mr(()=>{e.current=t}),e}const YR=su("safe-polygon");function o0(t,e,n){return n&&!Ah(n)?0:typeof t=="number"?t:t?.[e]}function i7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:l=!0,delay:u=0,handleClose:d=null,mouseOnly:p=!1,restMs:h=0,move:b=!0}=e,x=df(),_=ym(),N=Di(d),I=Di(u),R=Di(n),T=Q.useRef(),O=Q.useRef(-1),A=Q.useRef(),D=Q.useRef(-1),M=Q.useRef(!0),W=Q.useRef(!1),P=Q.useRef(()=>{}),j=Q.useRef(!1),L=Q.useCallback(()=>{var le;const se=(le=i.current.openEvent)==null?void 0:le.type;return se?.includes("mouse")&&se!=="mousedown"},[i]);Q.useEffect(()=>{if(!l)return;function le(se){let{open:te}=se;te||(clearTimeout(O.current),clearTimeout(D.current),M.current=!0,j.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[l,s]),Q.useEffect(()=>{if(!l||!N.current||!n)return;function le(te){L()&&r(!1,te,"hover")}const se=pi(o.floating).documentElement;return se.addEventListener("mouseleave",le),()=>{se.removeEventListener("mouseleave",le)}},[o.floating,n,r,l,N,L]);const F=Q.useCallback(function(le,se,te){se===void 0&&(se=!0),te===void 0&&(te="hover");const oe=o0(I.current,"close",T.current);oe&&!A.current?(clearTimeout(O.current),O.current=window.setTimeout(()=>r(!1,le,te),oe)):se&&(clearTimeout(O.current),r(!1,le,te))},[I,r]),V=Fi(()=>{P.current(),A.current=void 0}),U=Fi(()=>{if(W.current){const le=pi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(YR),W.current=!1}}),z=Fi(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);Q.useEffect(()=>{if(!l)return;function le(X){if(clearTimeout(O.current),M.current=!1,p&&!Ah(T.current)||h>0&&!o0(I.current,"open"))return;const ue=o0(I.current,"open",T.current);ue?O.current=window.setTimeout(()=>{R.current||r(!0,X,"hover")},ue):n||r(!0,X,"hover")}function se(X){if(z())return;P.current();const ue=pi(o.floating);if(clearTimeout(D.current),j.current=!1,N.current&&i.current.floatingContext){n||clearTimeout(O.current),A.current=N.current({...i.current.floatingContext,tree:x,x:X.clientX,y:X.clientY,onClose(){U(),V(),z()||F(X,!0,"safe-polygon")}});const ye=A.current;ue.addEventListener("mousemove",ye),P.current=()=>{ue.removeEventListener("mousemove",ye)};return}(T.current==="touch"?!fi(o.floating,X.relatedTarget):!0)&&F(X)}function te(X){z()||i.current.floatingContext&&(N.current==null||N.current({...i.current.floatingContext,tree:x,x:X.clientX,y:X.clientY,onClose(){U(),V(),z()||F(X)}})(X))}if(sr(o.domReference)){var oe;const X=o.domReference;return n&&X.addEventListener("mouseleave",te),(oe=o.floating)==null||oe.addEventListener("mouseleave",te),b&&X.addEventListener("mousemove",le,{once:!0}),X.addEventListener("mouseenter",le),X.addEventListener("mouseleave",se),()=>{var ue;n&&X.removeEventListener("mouseleave",te),(ue=o.floating)==null||ue.removeEventListener("mouseleave",te),b&&X.removeEventListener("mousemove",le),X.removeEventListener("mouseenter",le),X.removeEventListener("mouseleave",se)}}},[o,l,t,p,h,b,F,V,U,r,n,R,x,I,N,i,z]),mr(()=>{var le;if(l&&n&&(le=N.current)!=null&&le.__options.blockPointerEvents&&L()){W.current=!0;const te=o.floating;if(sr(o.domReference)&&te){var se;const oe=pi(o.floating).body;oe.setAttribute(YR,"");const X=o.domReference,ue=x==null||(se=x.nodesRef.current.find(de=>de.id===_))==null||(se=se.context)==null?void 0:se.elements.floating;return ue&&(ue.style.pointerEvents=""),oe.style.pointerEvents="none",X.style.pointerEvents="auto",te.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",X.style.pointerEvents="",te.style.pointerEvents=""}}}},[l,n,_,o,x,N,L]),mr(()=>{n||(T.current=void 0,j.current=!1,V(),U())},[n,V,U]),Q.useEffect(()=>()=>{V(),clearTimeout(O.current),clearTimeout(D.current),U()},[l,o.domReference,V,U]);const ee=Q.useMemo(()=>{function le(se){T.current=se.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(se){const{nativeEvent:te}=se;function oe(){!M.current&&!R.current&&r(!0,te,"hover")}p&&!Ah(T.current)||n||h===0||j.current&&se.movementX**2+se.movementY**2<2||(clearTimeout(D.current),T.current==="touch"?oe():(j.current=!0,D.current=window.setTimeout(oe,h)))}}},[p,r,n,R,h]),Z=Q.useMemo(()=>({onMouseEnter(){clearTimeout(O.current)},onMouseLeave(le){z()||F(le.nativeEvent,!1)}}),[F,z]);return Q.useMemo(()=>l?{reference:ee,floating:Z}:{},[l,ee,Z])}let XR=0;function Oc(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(XR);const s=()=>t?.focus({preventScroll:n});i?s():XR=requestAnimationFrame(s)}function eO(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Od(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var l;return i.parentId===o.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}function s7(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Od(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let Ju=new WeakMap,Qg=new WeakSet,Kg={},a0=0;const o7=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,eD=t=>t&&(t.host||eD(t.parentNode)),a7=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=eD(n);return t.contains(r)?r:null}).filter(n=>n!=null);function l7(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=a7(e,t),l=new Set,u=new Set(o),d=[];Kg[i]||(Kg[i]=new WeakMap);const p=Kg[i];o.forEach(h),b(e),l.clear();function h(x){!x||l.has(x)||(l.add(x),x.parentNode&&h(x.parentNode))}function b(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(tc(_)!=="script")if(l.has(_))b(_);else{const N=s?_.getAttribute(s):null,I=N!==null&&N!=="false",R=Ju.get(_)||0,T=s?R+1:R,O=(p.get(_)||0)+1;Ju.set(_,T),p.set(_,O),d.push(_),T===1&&I&&Qg.add(_),O===1&&_.setAttribute(i,""),!I&&s&&_.setAttribute(s,"true")}})}return a0++,()=>{d.forEach(x=>{const _=Ju.get(x)||0,N=s?_-1:_,I=(p.get(x)||0)-1;Ju.set(x,N),p.set(x,I),N||(!Qg.has(x)&&s&&x.removeAttribute(s),Qg.delete(x)),I||x.removeAttribute(i)}),a0--,a0||(Ju=new WeakMap,Ju=new WeakMap,Qg=new WeakSet,Kg={})}}function tO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=pi(t[0]).body;return l7(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const Fv=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function tD(t,e){const n=Pv(t,Fv());e==="prev"&&n.reverse();const r=n.indexOf(No(pi(t)));return n.slice(r+1)[0]}function nD(){return tD(document.body,"next")}function rD(){return tD(document.body,"prev")}function rh(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!fi(n,r)}function c7(t){Pv(t,Fv()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function nO(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Dv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let u7;function rO(t){t.key==="Tab"&&(t.target,clearTimeout(u7))}const Pb=Q.forwardRef(function(e,n){const[r,i]=Q.useState();mr(()=>(OF()&&i("button"),document.addEventListener("keydown",rO),()=>{document.removeEventListener("keydown",rO)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[su("focus-guard")]:"",style:Dv};return f.jsx("span",{...e,...s})}),iD=Q.createContext(null),iO=su("portal");function d7(t){t===void 0&&(t={});const{id:e,root:n}=t,r=Z1(),i=sD(),[s,o]=Q.useState(null),l=Q.useRef(null);return mr(()=>()=>{s?.remove(),queueMicrotask(()=>{l.current=null})},[s]),mr(()=>{if(!r||l.current)return;const u=e?document.getElementById(e):null;if(!u)return;const d=document.createElement("div");d.id=r,d.setAttribute(iO,""),u.appendChild(d),l.current=d,o(d)},[e,r]),mr(()=>{if(n===null||!r||l.current)return;let u=n||i?.portalNode;u&&!sr(u)&&(u=u.current),u=u||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,u.appendChild(d));const p=document.createElement("div");p.id=r,p.setAttribute(iO,""),u=d||u,u.appendChild(p),l.current=p,o(p)},[e,n,r,i]),s}function Y1(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=d7({id:n,root:r}),[o,l]=Q.useState(null),u=Q.useRef(null),d=Q.useRef(null),p=Q.useRef(null),h=Q.useRef(null),b=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return Q.useEffect(()=>{if(!s||!i||b)return;function N(I){s&&rh(I)&&(I.type==="focusin"?nO:c7)(s)}return s.addEventListener("focusin",N,!0),s.addEventListener("focusout",N,!0),()=>{s.removeEventListener("focusin",N,!0),s.removeEventListener("focusout",N,!0)}},[s,i,b]),Q.useEffect(()=>{s&&(x||nO(s))},[x,s]),f.jsxs(iD.Provider,{value:Q.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:l}),[i,s]),children:[_&&s&&f.jsx(Pb,{"data-type":"outside",ref:u,onFocus:N=>{if(rh(N,s)){var I;(I=p.current)==null||I.focus()}else{const R=rD()||o?.domReference;R?.focus()}}}),_&&s&&f.jsx("span",{"aria-owns":s.id,style:Dv}),s&&lv.createPortal(e,s),_&&s&&f.jsx(Pb,{"data-type":"outside",ref:d,onFocus:N=>{if(rh(N,s)){var I;(I=h.current)==null||I.focus()}else{const R=nD()||o?.domReference;R?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,N.nativeEvent,"focus-out")}}})]})}const sD=()=>Q.useContext(iD),SE="data-floating-ui-focusable";function EE(t){return t?t.hasAttribute(SE)?t:t.querySelector("["+SE+"]")||t:null}const f7=20;let jc=[];function l0(t){jc=jc.filter(e=>e.isConnected),t&&tc(t)!=="body"&&(jc.push(t),jc.length>f7&&(jc=jc.slice(-20)))}function sO(){return jc.slice().reverse().find(t=>t.isConnected)}function p7(t){const e=Fv();return gQ(t,e)?t:Pv(t,e)[0]||t}const h7=Q.forwardRef(function(e,n){return f.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:Dv})});function oD(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:u=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:b=!1}=t,{open:x,onOpenChange:_,events:N,dataRef:I,elements:{domReference:R,floating:T}}=e,O=Fi(()=>{var De;return(De=I.current.floatingContext)==null?void 0:De.nodeId}),A=typeof o=="number"&&o<0,D=jF(R)&&A,M=o7(),W=M?s:!0,P=!W||M&&b,j=Di(i),L=Di(o),F=Di(l),V=df(),U=sD(),z=Q.useRef(null),ee=Q.useRef(null),Z=Q.useRef(!1),le=Q.useRef(!1),se=Q.useRef(-1),te=U!=null,oe=EE(T),X=Fi(function(De){return De===void 0&&(De=oe),De?Pv(De,Fv()):[]}),ue=Fi(De=>{const Je=X(De);return j.current.map(Xe=>R&&Xe==="reference"?R:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});Q.useEffect(()=>{if(r||!d)return;function De(Xe){if(Xe.key==="Tab"){fi(oe,No(pi(oe)))&&X().length===0&&!D&&qi(Xe);const Ve=ue(),ct=jl(Xe);j.current[0]==="reference"&&ct===R&&(qi(Xe),Xe.shiftKey?Oc(Ve[Ve.length-1]):Oc(Ve[1])),j.current[1]==="floating"&&ct===oe&&Xe.shiftKey&&(qi(Xe),Oc(Ve[0]))}}const Je=pi(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,R,oe,d,j,D,X,ue]),Q.useEffect(()=>{if(r||!T)return;function De(Je){const Xe=jl(Je),ct=X().indexOf(Xe);ct!==-1&&(se.current=ct)}return T.addEventListener("focusin",De),()=>{T.removeEventListener("focusin",De)}},[r,T,X]),Q.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ve=Xe.relatedTarget;queueMicrotask(()=>{const ct=O(),_t=!(fi(R,Ve)||fi(T,Ve)||fi(Ve,T)||fi(U?.portalNode,Ve)||Ve!=null&&Ve.hasAttribute(su("focus-guard"))||V&&(Od(V.nodesRef.current,ct).find(Tt=>{var Ut,rn;return fi((Ut=Tt.context)==null?void 0:Ut.elements.floating,Ve)||fi((rn=Tt.context)==null?void 0:rn.elements.domReference,Ve)})||eO(V.nodesRef.current,ct).find(Tt=>{var Ut,rn,xe;return[(Ut=Tt.context)==null?void 0:Ut.elements.floating,EE((rn=Tt.context)==null?void 0:rn.elements.floating)].includes(Ve)||((xe=Tt.context)==null?void 0:xe.elements.domReference)===Ve})));if(u&&_t&&No(pi(oe))===pi(oe).body){Zr(oe)&&oe.focus();const Tt=se.current,Ut=X(),rn=Ut[Tt]||Ut[Ut.length-1]||oe;Zr(rn)&&rn.focus()}(D||!d)&&Ve&&_t&&!le.current&&Ve!==sO()&&(Z.current=!0,_(!1,Xe,"focus-out"))})}if(T&&Zr(R))return R.addEventListener("focusout",Je),R.addEventListener("pointerdown",De),T.addEventListener("focusout",Je),()=>{R.removeEventListener("focusout",Je),R.removeEventListener("pointerdown",De),T.removeEventListener("focusout",Je)}},[r,R,T,oe,d,V,U,_,h,u,X,D,O]);const de=Q.useRef(null),ye=Q.useRef(null),we=KR([de,U?.beforeInsideRef]),Ne=KR([ye,U?.afterInsideRef]);Q.useEffect(()=>{var De;if(r||!T)return;const Je=Array.from((U==null||(De=U.portalNode)==null?void 0:De.querySelectorAll("["+su("portal")+"]"))||[]),Xe=V&&!d?eO(V?.nodesRef.current,O()).map(_t=>{var Tt;return(Tt=_t.context)==null?void 0:Tt.elements.floating}):[],Ve=[T,...Je,...Xe,z.current,ee.current,de.current,ye.current,U?.beforeOutsideRef.current,U?.afterOutsideRef.current,j.current.includes("reference")||D?R:null].filter(_t=>_t!=null),ct=d||D?tO(Ve,!P,P):tO(Ve);return()=>{ct()}},[r,R,T,d,j,U,D,W,P,V,O]),mr(()=>{if(r||!Zr(oe))return;const De=pi(oe),Je=No(De);queueMicrotask(()=>{const Xe=ue(oe),Ve=L.current,ct=(typeof Ve=="number"?Xe[Ve]:Ve.current)||oe,_t=fi(oe,Je);!A&&!_t&&x&&Oc(ct,{preventScroll:ct===oe})})},[r,x,oe,A,ue,L]),mr(()=>{if(r||!oe)return;let De=!1;const Je=pi(oe),Xe=No(Je);let ct=I.current.openEvent;l0(Xe);function _t(rn){let{open:xe,reason:be,event:ke,nested:Ae}=rn;xe&&(ct=ke),be==="escape-key"&&R&&l0(R),["hover","safe-polygon"].includes(be)&&ke.type==="mouseleave"&&(Z.current=!0),be==="outside-press"&&(Ae?(Z.current=!1,De=!0):Z.current=!(RF(ke)||U1(ke)))}N.on("openchange",_t);const Tt=Je.createElement("span");Tt.setAttribute("tabindex","-1"),Tt.setAttribute("aria-hidden","true"),Object.assign(Tt.style,Dv),te&&R&&R.insertAdjacentElement("afterend",Tt);function Ut(){return typeof F.current=="boolean"?sO()||Tt:F.current.current||Tt}return()=>{N.off("openchange",_t);const rn=No(Je),xe=fi(T,rn)||V&&Od(V.nodesRef.current,O()).some(Ae=>{var Ue;return fi((Ue=Ae.context)==null?void 0:Ue.elements.floating,rn)});(xe||ct&&["click","mousedown"].includes(ct.type))&&R&&l0(R);const ke=Ut();queueMicrotask(()=>{const Ae=p7(ke);F.current&&!Z.current&&Zr(Ae)&&(!(Ae!==rn&&rn!==Je.body)||xe)&&Ae.focus({preventScroll:De}),Tt.remove()})}},[r,T,oe,F,I,N,V,te,R,O]),Q.useEffect(()=>{queueMicrotask(()=>{Z.current=!1})},[r]),mr(()=>{if(!r&&U)return U.setFocusManagerState({modal:d,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:R}),()=>{U.setFocusManagerState(null)}},[r,U,d,x,_,h,R]),mr(()=>{if(r||!oe||typeof MutationObserver!="function"||A)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ve=X(),ct=No(pi(T)),_t=Ve.indexOf(ct);_t!==-1&&(se.current=_t),j.current.includes("floating")||ct!==R&&Ve.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,T,oe,R,j,X,A]);function ze(De){return r||!p||!d?null:f.jsx(h7,{ref:De==="start"?z:ee,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const Oe=!r&&W&&(d?!D:!0)&&(te||d);return f.jsxs(f.Fragment,{children:[Oe&&f.jsx(Pb,{"data-type":"inside",ref:we,onFocus:De=>{if(d){const Xe=ue();Oc(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(Z.current=!1,rh(De,U.portalNode)){const Xe=nD()||R;Xe?.focus()}else{var Je;(Je=U.beforeOutsideRef.current)==null||Je.focus()}}}),!D&&ze("start"),n,ze("end"),Oe&&f.jsx(Pb,{"data-type":"inside",ref:Ne,onFocus:De=>{if(d)Oc(ue()[0]);else if(U!=null&&U.preserveTabOrder&&U.portalNode)if(h&&(Z.current=!0),rh(De,U.portalNode)){const Xe=rD()||R;Xe?.focus()}else{var Je;(Je=U.afterOutsideRef.current)==null||Je.focus()}}})]})}let Gg=0;function m7(){const t=/iP(hone|ad|od)|iOS/.test(V1()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var l,u;const d=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(d))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let oO=()=>{};const g7=Q.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return mr(()=>{if(r)return Gg++,Gg===1&&(oO=m7()),()=>{Gg--,Gg===0&&oO()}},[r]),f.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function aO(t){return Zr(t.target)&&t.target.tagName==="BUTTON"}function lO(t){return H1(t)}function X1(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:l="click",toggle:u=!0,ignoreMouse:d=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,b=Q.useRef(),x=Q.useRef(!1),_=Q.useMemo(()=>({onPointerDown(N){b.current=N.pointerType},onMouseDown(N){const I=b.current;N.button===0&&l!=="click"&&(Ah(I,!0)&&d||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,N.nativeEvent,"click"):(N.preventDefault(),r(!0,N.nativeEvent,"click"))))},onClick(N){const I=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}Ah(I,!0)&&d||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,N.nativeEvent,"click"):r(!0,N.nativeEvent,"click"))},onKeyDown(N){b.current=void 0,!(N.defaultPrevented||!p||aO(N))&&(N.key===" "&&!lO(s)&&(N.preventDefault(),x.current=!0),N.key==="Enter"&&r(!(n&&u),N.nativeEvent,"click"))},onKeyUp(N){N.defaultPrevented||!p||aO(N)||lO(s)||N.key===" "&&x.current&&(x.current=!1,r(!(n&&u),N.nativeEvent,"click"))}}),[i,s,l,d,p,r,n,h,u]);return Q.useMemo(()=>o?{reference:_}:{},[o,_])}const y7={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},b7={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},cO=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function eN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:b=!1,bubbles:x,capture:_}=e,N=df(),I=Fi(typeof u=="function"?u:()=>!1),R=typeof u=="function"?I:u,T=Q.useRef(!1),O=Q.useRef(!1),{escapeKey:A,outsidePress:D}=cO(x),{escapeKey:M,outsidePress:W}=cO(_),P=Q.useRef(!1),j=Fi(ee=>{var Z;if(!n||!o||!l||ee.key!=="Escape"||P.current)return;const le=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,se=N?Od(N.nodesRef.current,le):[];if(!A&&(ee.stopPropagation(),se.length>0)){let te=!0;if(se.forEach(oe=>{var X;if((X=oe.context)!=null&&X.open&&!oe.context.dataRef.current.__escapeKeyBubbles){te=!1;return}}),!te)return}r(!1,B9(ee)?ee.nativeEvent:ee,"escape-key")}),L=Fi(ee=>{var Z;const le=()=>{var se;j(ee),(se=jl(ee))==null||se.removeEventListener("keydown",le)};(Z=jl(ee))==null||Z.addEventListener("keydown",le)}),F=Fi(ee=>{var Z;const le=T.current;T.current=!1;const se=O.current;if(O.current=!1,d==="click"&&se||le||typeof R=="function"&&!R(ee))return;const te=jl(ee),oe="["+su("inert")+"]",X=pi(i.floating).querySelectorAll(oe);let ue=sr(te)?te:null;for(;ue&&!Da(ue);){const Ne=Ua(ue);if(Da(Ne)||!sr(Ne))break;ue=Ne}if(X.length&&sr(te)&&!z9(te)&&!fi(te,i.floating)&&Array.from(X).every(Ne=>!fi(ue,Ne)))return;if(Zr(te)&&z){const Ne=Da(te),ze=oo(te),Oe=/auto|scroll/,De=Ne||Oe.test(ze.overflowX),Je=Ne||Oe.test(ze.overflowY),Xe=De&&te.clientWidth>0&&te.scrollWidth>te.clientWidth,Ve=Je&&te.clientHeight>0&&te.scrollHeight>te.clientHeight,ct=ze.direction==="rtl",_t=Ve&&(ct?ee.offsetX<=te.offsetWidth-te.clientWidth:ee.offsetX>te.clientWidth),Tt=Xe&&ee.offsetY>te.clientHeight;if(_t||Tt)return}const de=(Z=s.current.floatingContext)==null?void 0:Z.nodeId,ye=N&&Od(N.nodesRef.current,de).some(Ne=>{var ze;return n0(ee,(ze=Ne.context)==null?void 0:ze.elements.floating)});if(n0(ee,i.floating)||n0(ee,i.domReference)||ye)return;const we=N?Od(N.nodesRef.current,de):[];if(we.length>0){let Ne=!0;if(we.forEach(ze=>{var Oe;if((Oe=ze.context)!=null&&Oe.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ne=!1;return}}),!Ne)return}r(!1,ee,"outside-press")}),V=Fi(ee=>{var Z;const le=()=>{var se;F(ee),(se=jl(ee))==null||se.removeEventListener(d,le)};(Z=jl(ee))==null||Z.addEventListener(d,le)});Q.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=A,s.current.__outsidePressBubbles=D;let ee=-1;function Z(X){r(!1,X,"ancestor-scroll")}function le(){window.clearTimeout(ee),P.current=!0}function se(){ee=window.setTimeout(()=>{P.current=!1},qv()?5:0)}const te=pi(i.floating);l&&(te.addEventListener("keydown",M?L:j,M),te.addEventListener("compositionstart",le),te.addEventListener("compositionend",se)),R&&te.addEventListener(d,W?V:F,W);let oe=[];return b&&(sr(i.domReference)&&(oe=$l(i.domReference)),sr(i.floating)&&(oe=oe.concat($l(i.floating))),!sr(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat($l(i.reference.contextElement)))),oe=oe.filter(X=>{var ue;return X!==((ue=te.defaultView)==null?void 0:ue.visualViewport)}),oe.forEach(X=>{X.addEventListener("scroll",Z,{passive:!0})}),()=>{l&&(te.removeEventListener("keydown",M?L:j,M),te.removeEventListener("compositionstart",le),te.removeEventListener("compositionend",se)),R&&te.removeEventListener(d,W?V:F,W),oe.forEach(X=>{X.removeEventListener("scroll",Z)}),window.clearTimeout(ee)}},[s,i,l,R,d,n,r,b,o,A,D,j,M,L,F,W,V]),Q.useEffect(()=>{T.current=!1},[R,d]);const U=Q.useMemo(()=>({onKeyDown:j,...p&&{[y7[h]]:ee=>{r(!1,ee.nativeEvent,"reference-press")},...h!=="click"&&{onClick(ee){r(!1,ee.nativeEvent,"reference-press")}}}}),[j,r,p,h]),z=Q.useMemo(()=>({onKeyDown:j,onMouseDown(){O.current=!0},onMouseUp(){O.current=!0},[b7[d]]:()=>{T.current=!0}}),[j,d]);return Q.useMemo(()=>o?{reference:U,floating:z}:{},[o,U,z])}function v7(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=Z1(),s=Q.useRef({}),[o]=Q.useState(()=>ZF()),l=ym()!=null,[u,d]=Q.useState(r.reference),p=Fi((x,_,N)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:N,nested:l}),n?.(x,_,N)}),h=Q.useMemo(()=>({setPositionReference:d}),[]),b=Q.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return Q.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:b,events:o,floatingId:i,refs:h}),[e,p,b,o,i,h])}function tN(t){t===void 0&&(t={});const{nodeId:e}=t,n=v7({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=Q.useState(null),[l,u]=Q.useState(null),p=i?.domReference||s,h=Q.useRef(null),b=df();mr(()=>{p&&(h.current=p)},[p]);const x=WQ({...t,elements:{...i,...l&&{reference:l}}}),_=Q.useCallback(O=>{const A=sr(O)?{getBoundingClientRect:()=>O.getBoundingClientRect(),contextElement:O}:O;u(A),x.refs.setReference(A)},[x.refs]),N=Q.useCallback(O=>{(sr(O)||O===null)&&(h.current=O,o(O)),(sr(x.refs.reference.current)||x.refs.reference.current===null||O!==null&&!sr(O))&&x.refs.setReference(O)},[x.refs]),I=Q.useMemo(()=>({...x.refs,setReference:N,setPositionReference:_,domReference:h}),[x.refs,N,_]),R=Q.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),T=Q.useMemo(()=>({...x,...r,refs:I,elements:R,nodeId:e}),[x,I,R,e,r]);return mr(()=>{r.dataRef.current.floatingContext=T;const O=b?.nodesRef.current.find(A=>A.id===e);O&&(O.context=T)}),Q.useMemo(()=>({...x,context:T,refs:I,elements:R}),[x,I,R,T])}function x7(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:l=!0,visibleOnly:u=!0}=e,d=Q.useRef(!1),p=Q.useRef(),h=Q.useRef(!0);Q.useEffect(()=>{if(!l)return;const x=us(o.domReference);function _(){!n&&Zr(o.domReference)&&o.domReference===No(pi(o.domReference))&&(d.current=!0)}function N(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",N,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",N,!0)}},[o.domReference,n,l]),Q.useEffect(()=>{if(!l)return;function x(_){let{reason:N}=_;(N==="reference-press"||N==="escape-key")&&(d.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,l]),Q.useEffect(()=>()=>{clearTimeout(p.current)},[]);const b=Q.useMemo(()=>({onPointerDown(x){U1(x.nativeEvent)||(h.current=!1)},onMouseLeave(){d.current=!1},onFocus(x){if(d.current)return;const _=jl(x.nativeEvent);if(u&&sr(_))try{if(OF()&&M9())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!H1(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){d.current=!1;const _=x.relatedTarget,N=x.nativeEvent,I=sr(_)&&_.hasAttribute(su("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var R;const T=No(o.domReference?o.domReference.ownerDocument:document);!_&&T===o.domReference||fi((R=s.current.floatingContext)==null?void 0:R.refs.floating.current,T)||fi(o.domReference,T)||I||r(!1,N,"focus")})}}),[s,o.domReference,r,u]);return Q.useMemo(()=>l?{reference:b}:{},[l,b])}const uO="active",dO="selected";function c0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[uO]:o,[dO]:l,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[SE]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(u=>{let[d,p]=u;if(!(i&&[uO,dO].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var h;(h=r.get(d))==null||h.push(p),o[d]=function(){for(var b,x=arguments.length,_=new Array(x),N=0;N<x;N++)_[N]=arguments[N];return(b=r.get(d))==null?void 0:b.map(I=>I(..._)).find(I=>I!==void 0)}}}else o[d]=p}),o),{})}}function nN(t){t===void 0&&(t=[]);const e=t.map(l=>l?.reference),n=t.map(l=>l?.floating),r=t.map(l=>l?.item),i=Q.useCallback(l=>c0(l,t,"reference"),e),s=Q.useCallback(l=>c0(l,t,"floating"),n),o=Q.useCallback(l=>c0(l,t,"item"),r);return Q.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Lv(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function fO(t,e){return Lv(e,t===J1||t===gm,t===Bl||t===zl)}function u0(t,e,n){return Lv(e,t===gm,n?t===Bl:t===zl)||t==="Enter"||t===" "||t===""}function w7(t,e,n){return Lv(e,n?t===Bl:t===zl,t===gm)}function pO(t,e,n){return Lv(e,n?t===zl:t===Bl,t===J1)}function _7(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:d=null,allowEscape:p=!1,loop:h=!1,nested:b=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:N="auto",focusItemOnHover:I=!0,openOnArrowKeyDown:R=!0,disabledIndices:T=void 0,orientation:O="vertical",cols:A=1,scrollItemIntoView:D=!0,virtualItemRef:M,itemSizes:W,dense:P=!1}=e,j=EE(i.floating),L=Di(j),F=ym(),V=df(),U=Fi(()=>{l(Z.current===-1?null:Z.current)}),z=jF(i.domReference),ee=Q.useRef(N),Z=Q.useRef(d??-1),le=Q.useRef(null),se=Q.useRef(!0),te=Q.useRef(U),oe=Q.useRef(!!i.floating),X=Q.useRef(n),ue=Q.useRef(!1),de=Q.useRef(!1),ye=Di(T),we=Di(n),Ne=Di(D),ze=Di(d),[Oe,De]=Q.useState(),[Je,Xe]=Q.useState(),Ve=Fi(()=>{function be(Ue){_?(De(Ue.id),V?.events.emit("virtualfocus",Ue),M&&(M.current=Ue)):Oc(Ue,{sync:ue.current,preventScroll:!0})}const ke=s.current[Z.current];ke&&be(ke),(ue.current?Ue=>Ue():requestAnimationFrame)(()=>{const Ue=s.current[Z.current]||ke;if(!Ue)return;ke||be(Ue);const rt=Ne.current;rt&&_t&&(de.current||!se.current)&&(Ue.scrollIntoView==null||Ue.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});mr(()=>{u&&(n&&i.floating?ee.current&&d!=null&&(de.current=!0,Z.current=d,U()):oe.current&&(Z.current=-1,te.current()))},[u,n,i.floating,d,U]),mr(()=>{if(u&&n&&i.floating)if(o==null){if(ue.current=!1,ze.current!=null)return;if(oe.current&&(Z.current=-1,Ve()),(!X.current||!oe.current)&&ee.current&&(le.current!=null||ee.current===!0&&le.current==null)){let be=0;const ke=()=>{s.current[0]==null?(be<2&&(be?requestAnimationFrame:queueMicrotask)(ke),be++):(Z.current=le.current==null||u0(le.current,O,x)||b?s0(s,ye.current):GR(s,ye.current),le.current=null,U())};ke()}}else nh(s,o)||(Z.current=o,Ve(),de.current=!1)},[u,n,i.floating,o,ze,b,s,O,x,U,Ve,ye]),mr(()=>{var be;if(!u||i.floating||!V||_||!oe.current)return;const ke=V.nodesRef.current,Ae=(be=ke.find(Me=>Me.id===F))==null||(be=be.context)==null?void 0:be.elements.floating,Ue=No(pi(i.floating)),rt=ke.some(Me=>Me.context&&fi(Me.context.elements.floating,Ue));Ae&&!rt&&se.current&&Ae.focus({preventScroll:!0})},[u,i.floating,V,F,_]),mr(()=>{if(!u||!V||!_||F)return;function be(ke){Xe(ke.id),M&&(M.current=ke)}return V.events.on("virtualfocus",be),()=>{V.events.off("virtualfocus",be)}},[u,V,_,F,M]),mr(()=>{te.current=U,X.current=n,oe.current=!!i.floating}),mr(()=>{n||(le.current=null)},[n]);const ct=o!=null,_t=Q.useMemo(()=>{function be(Ae){if(!n)return;const Ue=s.current.indexOf(Ae);Ue!==-1&&Z.current!==Ue&&(Z.current=Ue,U())}return{onFocus(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,be(Ue)},onClick:Ae=>{let{currentTarget:Ue}=Ae;return Ue.focus({preventScroll:!0})},...I&&{onMouseMove(Ae){let{currentTarget:Ue}=Ae;ue.current=!0,de.current=!1,be(Ue)},onPointerLeave(Ae){let{pointerType:Ue}=Ae;if(!(!se.current||Ue==="touch")&&(ue.current=!0,Z.current=-1,U(),!_)){var rt;(rt=L.current)==null||rt.focus({preventScroll:!0})}}}}},[n,L,I,s,U,_]),Tt=Fi(be=>{if(se.current=!1,ue.current=!0,be.which===229||!we.current&&be.currentTarget===L.current)return;if(b&&pO(be.key,O,x)){qi(be),r(!1,be.nativeEvent,"list-navigation"),Zr(i.domReference)&&(_?V?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const ke=Z.current,Ae=s0(s,T),Ue=GR(s,T);if(z||(be.key==="Home"&&(qi(be),Z.current=Ae,U()),be.key==="End"&&(qi(be),Z.current=Ue,U())),A>1){const rt=W||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=GQ(rt,A,P),ut=Me.findIndex(hn=>hn!=null&&!Oy(s.current,hn,T)),Kt=Me.reduce((hn,or,Ln)=>or!=null&&!Oy(s.current,or,T)?Ln:hn,-1),Gt=Me[KQ({current:Me.map(hn=>hn!=null?s.current[hn]:null)},{event:be,orientation:O,loop:h,rtl:x,cols:A,disabledIndices:ZQ([...T||s.current.map((hn,or)=>Oy(s.current,or)?or:void 0),void 0],Me),minIndex:ut,maxIndex:Kt,prevIndex:JQ(Z.current>Ue?Ae:Z.current,rt,Me,A,be.key===gm?"bl":be.key===(x?Bl:zl)?"tr":"tl"),stopEvent:!0})];if(Gt!=null&&(Z.current=Gt,U()),O==="both")return}if(fO(be.key,O)){if(qi(be),n&&!_&&No(be.currentTarget.ownerDocument)===be.currentTarget){Z.current=u0(be.key,O,x)?Ae:Ue,U();return}u0(be.key,O,x)?h?Z.current=ke>=Ue?p&&ke!==s.current.length?-1:Ae:wi(s,{startingIndex:ke,disabledIndices:T}):Z.current=Math.min(Ue,wi(s,{startingIndex:ke,disabledIndices:T})):h?Z.current=ke<=Ae?p&&ke!==-1?s.current.length:Ue:wi(s,{startingIndex:ke,decrement:!0,disabledIndices:T}):Z.current=Math.max(Ae,wi(s,{startingIndex:ke,decrement:!0,disabledIndices:T})),nh(s,Z.current)&&(Z.current=-1),U()}}),Ut=Q.useMemo(()=>_&&n&&ct&&{"aria-activedescendant":Je||Oe},[_,n,ct,Je,Oe]),rn=Q.useMemo(()=>({"aria-orientation":O==="both"?void 0:O,...z?{}:Ut,onKeyDown:Tt,onPointerMove(){se.current=!0}}),[Ut,Tt,O,z]),xe=Q.useMemo(()=>{function be(Ae){N==="auto"&&RF(Ae.nativeEvent)&&(ee.current=!0)}function ke(Ae){ee.current=N,N==="auto"&&U1(Ae.nativeEvent)&&(ee.current=!0)}return{...Ut,onKeyDown(Ae){se.current=!1;const Ue=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ue||rt,ut=w7(Ae.key,O,x),Kt=pO(Ae.key,O,x),Gt=fO(Ae.key,O),hn=(b?ut:Gt)||Ae.key==="Enter"||Ae.key.trim()==="";if(_&&n){const Ti=V?.nodesRef.current.find(Jt=>Jt.parentId==null),_r=V&&Ti?s7(V.nodesRef.current,Ti.id):null;if(Me&&_r&&M){const Jt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ut||Kt){var or,Ln;const Ui=((or=_r.context)==null?void 0:or.elements.domReference)===Ae.currentTarget,Hi=Kt&&!Ui?(Ln=_r.context)==null?void 0:Ln.elements.domReference:ut?s.current.find(Qi=>Qi?.id===Oe):null;Hi&&(qi(Ae),Hi.dispatchEvent(Jt),Xe(void 0))}if((Gt||rt)&&_r.context&&_r.context.open&&_r.parentId&&Ae.currentTarget!==_r.context.elements.domReference){var Hr;qi(Ae),(Hr=_r.context.elements.domReference)==null||Hr.dispatchEvent(Jt);return}}return Tt(Ae)}if(!(!n&&!R&&Ue)){if(hn&&(le.current=b&&Gt?null:Ae.key),b){ut&&(qi(Ae),n?(Z.current=s0(s,ye.current),U()):r(!0,Ae.nativeEvent,"list-navigation"));return}Gt&&(d!=null&&(Z.current=d),qi(Ae),!n&&R?r(!0,Ae.nativeEvent,"list-navigation"):Tt(Ae),n&&U())}},onFocus(){n&&!_&&(Z.current=-1,U())},onPointerDown:ke,onPointerEnter:ke,onMouseDown:be,onClick:be}},[Oe,Ut,Tt,ye,N,s,b,U,r,n,R,O,x,d,V,_,M]);return Q.useMemo(()=>u?{reference:xe,floating:rn,item:_t}:{},[u,xe,rn,_t])}const hO=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Zu(t,e){return typeof t=="function"?t(e):t}function S7(t,e){const[n,r]=Q.useState(t);return t&&!n&&r(!0),Q.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function E7(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[l,u]=Q.useState("unmounted"),d=S7(n,o);return!d&&l==="close"&&u("unmounted"),mr(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:d,status:l}}function rN(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,l=t.placement,u=l.split("-")[0],d=Q.useMemo(()=>({side:u,placement:l}),[u,l]),p=typeof o=="number",h=(p?o:o.open)||0,b=(p?o:o.close)||0,[x,_]=Q.useState(()=>({...Zu(s,d),...Zu(n,d)})),{isMounted:N,status:I}=E7(t,{duration:o}),R=Di(n),T=Di(r),O=Di(i),A=Di(s);return mr(()=>{const D=Zu(R.current,d),M=Zu(O.current,d),W=Zu(A.current,d),P=Zu(T.current,d)||Object.keys(D).reduce((j,L)=>(j[L]="",j),{});if(I==="initial"&&_(j=>({transitionProperty:j.transitionProperty,...W,...D})),I==="open"&&_({transitionProperty:Object.keys(P).map(hO).join(","),transitionDuration:h+"ms",...W,...P}),I==="close"){const j=M||D;_({transitionProperty:Object.keys(j).map(hO).join(","),transitionDuration:b+"ms",...W,...j})}},[b,O,R,T,A,h,I,d]),{isMounted:N,styles:x}}const N7=Q.createContext({close(){}}),k7=gn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),I7=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:l=k7,css:u,children:d})=>{const[p,h]=Q.useState(!1),{refs:b,floatingStyles:x,context:_}=tN({open:p,onOpenChange:h,placement:"top",whileElementsMounted:HF,middleware:[KF(10),GF({fallbackAxisSideDirection:"start"}),VQ()],...s}),{getReferenceProps:N,getFloatingProps:I}=nN([i7(_,{enabled:e==="hover",delay:i}),X1(_,{enabled:e==="click"}),x7(_),eN(_)]),{isMounted:R,styles:T}=rN(_),O=l({mounted:R,...o,css:u}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",ref:b.setReference,...N(),disabled:n,className:O.target(),children:t}),f.jsx(Y1,{children:f.jsx("div",{ref:b.setFloating,style:{...x,...T},className:O.portal(),...I(),onClick:r?()=>{h(!1)}:void 0,children:f.jsx(N7.Provider,{value:{close(){h(!1)}},children:d})})})]})},aD="icon-[system-uicons--menu-hamburger]",lD=gn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),Xt=({icon:t,variant:e,tva:n=lD,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?f.jsx("div",{className:s.base({css:[t]}),...i}):null},C7=gn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),dr=({icon:t=aD,iconProps:e,children:n,variant:r,tva:i=C7,css:s,...o})=>{const l=i({...r,css:s}).slots;return f.jsx(r7,{children:f.jsx(I7,{action:"click",target:f.jsx(Xt,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:f.jsx("div",{className:l.base(),children:n})})})},cD="icon-[svg-spinners--90-ring-with-bg]",T7=gn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),bm=({iconEnabled:t,iconDisabled:e,iconLoading:n=cD,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:l=T7,css:u,children:d,...p})=>{const h=l({disabled:r,loading:i,...o,css:u}).slots;return f.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?f.jsx(Xt,{icon:i?n:e??t}):f.jsx(Xt,{icon:i?n:t}),d]})},iN="icon-[iconamoon--close-light]",Mv=Q.createContext(void 0),R7=gn({slot:{base:["bg-slate-500","bg-opacity-75","backdrop-blur-sm","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),ff=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:l,tva:u=R7,children:d})=>{const[p,h]=Q.useState(i),b=t7(),{refs:x,context:_}=tN({nodeId:b,open:p,onOpenChange:h}),N=X1(_),I=eN(_,{outsidePress:s}),{getReferenceProps:R,getFloatingProps:T}=nN([N,I]),{isMounted:O,styles:A}=rN(_),D=u({disabled:r,...o,css:l}).slots;return f.jsxs(Mv.Provider,{value:{close(){h(!1)}},children:[f.jsx("div",{ref:x.setReference,...R({disabled:r}),className:D.target(),children:t}),f.jsx(n7,{id:b,children:O&&f.jsx(f.Fragment,{children:f.jsx(Y1,{children:f.jsx(g7,{lockScroll:!0,style:A,className:D.base(),children:f.jsx(oD,{context:_,children:f.jsxs("div",{ref:x.setFloating,...T(),className:D.modal(),children:[f.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[f.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(_v(e)?f.jsx(Xt,{icon:e,variant:{size:"xl"}}):e),n&&f.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),f.jsx(bm,{iconEnabled:iN,onClick:()=>h(!1)})]}),j9(d)?f.jsx(d,{close:()=>h(!1)}):d]})})})})})})]})},O7=gn({use:kF,slot:{},variant:{},defaults:{}}),In=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=O7,css:l,...u})=>{const d=o({...s,disabled:r,css:l}).slots;return i?null:f.jsxs("div",{className:d.base(),children:[_v(t)?f.jsx(Xt,{icon:t,...e}):t,f.jsx(ff,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},j7=gn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),ki=({variant:t,tva:e=j7,css:n,...r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),...r})},NE="icon-[material-symbols-light--check-small]",q7="icon-[material-symbols-light--close-small]",A7="icon-[material-symbols-light--check-indeterminate-small]",P7=gn({use:lD,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),$v=({value:t,checkIcon:e=NE,unCheckIcon:n=q7,undefinedIcon:r=A7,tva:i=P7,...s})=>t==null?f.jsx(Xt,{icon:r,tva:i,...s}):f.jsx(Xt,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),F7=gn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),uD=({value:t,onChange:e,variant:n,tva:r=F7,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx("div",{className:o.base(),children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:l=>{e(l.target.checked)},...s}),f.jsx("div",{className:o.switch()})]})})},D7=gn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded","transition-all"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),wn=({iconEnabled:t,iconDisabled:e,iconLoading:n=cD,iconProps:r,loading:i,variant:s,tva:o=D7,css:l,children:u,...d})=>{const p=o({disabled:d.disabled,...s,css:l}).slots;return f.jsxs("button",{type:"button",className:p.base({disabled:d.disabled}),...d,children:[d.disabled?f.jsx(Xt,{icon:i===!0?n:e,variant:{size:"xl"},...r}):f.jsx(Xt,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},sN=Q.createContext({inline:!1}),L7=gn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),M7=({inline:t,label:e,value:n,variant:r,tva:i=L7,css:s})=>{const o=Q.useContext(sN),l=t??o?.inline,u=i({inline:l,...r,css:s}).slots;return f.jsxs("div",{className:u.base(),children:[e?f.jsx("div",{className:u.label(),children:e}):null,f.jsx("div",{className:u.value(),children:n})]})},$7=gn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),dD=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=$7,css:o,inline:l=!1})=>{const u=s({inline:l,...i,css:o}).slots;return f.jsx(sN.Provider,{value:{inline:l},children:f.jsx("div",{className:u.base(),children:t.filter(({id:d})=>!e.includes(d)).map(({id:d,render:p,...h})=>f.jsx(M7,{value:f.jsx(p,{entity:r}),...n,...h},d))})})},B7=gn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),mO="icon-[tabler--dots]",z7=gn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),W7=gn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),d0=({pages:t,page:e,onPage:n,variant:r,tva:i=W7,css:s})=>{const o=i({...r,css:s}).slots;return f.jsx("nav",{className:o.base(),children:f.jsx("ul",{className:o.list(),children:t.map((l,u)=>f.jsx("li",{className:o.page({current:e===l-1}),onClick:()=>n(l-1),children:l},`page-${l}-${u}`))})})},V7=gn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded","focus:border-sky-400","focus:outline-none","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded","border","border-slate-300","bg-white","shadow-lg","focus:outline-none"],item:["focus:outline-none","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),fD=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:l,onChange:u,value:d,variant:p,tva:h=V7,css:b})=>{const[x,_]=Q.useState(!1),[N,I]=Q.useState(null),[R,T]=Q.useState(t.findIndex(te=>te.id===n));Q.useEffect(()=>{T(t.findIndex(te=>te.id===d))},[d]);const{refs:O,floatingStyles:A,context:D}=tN({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:HF,middleware:[KF(5),GF({padding:10}),UQ({apply({rects:te,elements:oe,availableHeight:X}){Object.assign(oe.floating.style,{maxHeight:`${X}px`,minWidth:`${te.reference.width}px`})},padding:10})]}),M=Q.useRef([]),W=Q.useRef(!1),P=X1(D,{event:"mousedown"}),j=eN(D),L=_7(D,{listRef:M,activeIndex:N,selectedIndex:R,onNavigate:I,loop:!0}),{getReferenceProps:F,getFloatingProps:V,getItemProps:U}=nN([j,L,P]),{isMounted:z,styles:ee}=rN(D),Z=te=>{T(te),_(!1);const oe=t[te];oe&&o?.(oe),l?.(oe),u?.(oe?.id)},le=R===null?void 0:t[R],se=h({disabled:s,...p,css:b}).slots;return f.jsxs(f.Fragment,{children:[f.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:O.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:F(),className:se.base(),children:f.jsxs("div",{className:se.input(),children:[e?f.jsx(Xt,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?f.jsx(r,{entity:le}):i||na.rich("Select item"),f.jsx(Xt,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),z&&f.jsx(Y1,{children:f.jsx(oD,{context:D,modal:!1,children:f.jsx("div",{ref:O.setFloating,style:{...A,...ee},className:se.popup(),...V(),children:t.map((te,oe)=>f.jsxs("div",{ref:X=>{M.current[oe]=X},role:"option",tabIndex:oe===N?0:-1,"aria-selected":oe===R&&oe===N,className:se.item({selected:oe===R,active:oe===N}),...U({onClick(){Z(oe)},onKeyDown(X){X.key==="Enter"&&(X.preventDefault(),Z(oe)),X.key===" "&&!W.current&&(X.preventDefault(),Z(oe))}}),children:[f.jsx(r,{entity:te}),oe===R&&f.jsx(Xt,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},te.id))})})})]})},U7=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>f.jsx(fD,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),gO=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=z7,css:l})=>{const u=Q.useMemo(()=>w9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),d=o({...s,css:l}).slots;return f.jsxs("div",{className:d.base(),children:[u.total>1?f.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&f.jsxs(f.Fragment,{children:[f.jsx(d0,{page:t.page,pages:u.start,onPage:r}),f.jsx(Xt,{icon:mO})]}),f.jsx(d0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&f.jsxs(f.Fragment,{children:[f.jsx(Xt,{icon:mO}),f.jsx(d0,{page:t.page,pages:u.end,onPage:r})]})]}):null,f.jsxs("div",{className:d.sums(),children:[f.jsx("div",{children:n}),f.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&f.jsxs(f.Fragment,{children:[f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-semibold",children:e.where})]})]}),f.jsx(U7,{size:t.size,onSize:i})]})},yO="function",fd="64e10b34-2bf7-4616-9668-f99de5aa046e",H7="get",Q7="has",K7="set",{isArray:jy}=Array;let{SharedArrayBuffer:Fb,window:G7}=globalThis,{notify:pD,wait:hD,waitAsync:Db}=Atomics,mD=null;Db||(Db=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new Fb(4)}catch{Fb=ArrayBuffer;const e=new WeakMap;if(G7){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[fd];if(!jy(o)){s.stopImmediatePropagation();const{id:l,sb:u}=o;n.get(l)(u)}};mD=function(s,...o){const l=s?.[fd];if(jy(l)){const[u,d]=l;e.set(d,u),this.addEventListener("message",i)}return r.call(this,s,...o)},Db=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let l=0;l<o.length;l++)s[l]=o[l];return"ok"})})}else{const n=(r,i)=>({[fd]:{id:r,sb:i}});pD=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[fd];if(jy(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:kE,Map:bO,Uint16Array:IE}=globalThis,{BYTES_PER_ELEMENT:vO}=kE,{BYTES_PER_ELEMENT:J7}=IE,Z7=(t,e,n)=>{for(;hD(t,0,0,e)==="timed-out";)n()},CE=new WeakSet,f0=new WeakMap,Y7={value:{then:t=>t()}};let X7=0;const oN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!f0.has(t)){const s=mD||t.postMessage,o=(b,...x)=>s.call(t,{[fd]:x},{transfer:b}),l=typeof i===yO?i:i?.handler,u=i?.delay||42,d=new TextDecoder("utf-16"),p=(b,x)=>b?Db(x,0):(l?Z7(x,u,l):hD(x,0),Y7);let h=!1;f0.set(t,new Proxy(new bO,{[Q7]:(b,x)=>typeof x=="string"&&!x.startsWith("_"),[H7]:(b,x)=>x==="then"?null:(..._)=>{const N=X7++;let I=new kE(new Fb(vO*2)),R=[];CE.has(_.at(-1)||R)&&CE.delete(R=_.pop()),o(R,N,I,x,r?_.map(r):_);const T=t!==globalThis;let O=0;return h&&T&&(O=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${x}(...args) is awaited`)),p(T,I).value.then(()=>{clearTimeout(O);const A=I[1];if(!A)return;const D=J7*A;return I=new kE(new Fb(D+D%vO)),o([],N,I),p(T,I).value.then(()=>e(d.decode(new IE(I.buffer).slice(0,A))))})},[K7](b,x,_){const N=typeof _;if(N!==yO)throw new Error(`Unable to assign ${x} as ${N}`);if(!b.size){const I=new bO;t.addEventListener("message",async R=>{const T=R.data?.[fd];if(jy(T)){R.stopImmediatePropagation();const[O,A,...D]=T;let M;if(D.length){const[W,P]=D;if(b.has(W)){h=!0;try{const j=await b.get(W)(...P);if(j!==void 0){const L=n(r?r(j):j);I.set(O,L),A[1]=L.length}}catch(j){M=j}finally{h=!1}}else M=new Error(`Unsupported action: ${W}`);A[0]=1}else{const W=I.get(O);I.delete(O);for(let P=new IE(A.buffer),j=0;j<W.length;j++)P[j]=W.charCodeAt(j)}if(pD(A,0),M)throw M}})}return!!b.set(x,_)}}))}return f0.get(t)};oN.transfer=(...t)=>(CE.add(t),t);var aN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,y)=>{i=g,s=y}),l=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const d=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,d.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",b="";function x(g){return r.locateFile?r.locateFile(g,b):b+g}var _,N;(l||u)&&(u?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(N=g=>{var y=new XMLHttpRequest;return y.open("GET",g,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),_=g=>fetch(g,{credentials:"same-origin"}).then(y=>y.ok?y.arrayBuffer():Promise.reject(new Error(y.status+" : "+y.url))));var I=r.print||console.log.bind(console),R=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var T=r.wasmBinary,O,A=!1,D,M,W,P,j,L;function F(){var g=O.buffer;r.HEAP8=D=new Int8Array(g),r.HEAP16=W=new Int16Array(g),r.HEAPU8=M=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=j=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=L=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)O=r.wasmMemory;else{var V=r.INITIAL_MEMORY||0x1000000;O=new WebAssembly.Memory({initial:V/65536,maximum:32768})}F();var U=[],z=[],ee=[];function Z(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)te(r.preRun.shift());xe(U)}function le(){!r.noFSInit&&!H.initialized&&H.init(),H.ignorePermissions=!1,xe(z)}function se(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)X(r.postRun.shift());xe(ee)}function te(g){U.unshift(g)}function oe(g){z.unshift(g)}function X(g){ee.unshift(g)}var ue=0,de=null;function ye(g){return g}function we(g){ue++,r.monitorRunDependencies?.(ue)}function Ne(g){if(ue--,r.monitorRunDependencies?.(ue),ue==0&&de){var y=de;de=null,y()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",R(g),A=!0,g+=". Build with -sASSERTIONS for more info.";var y=new WebAssembly.RuntimeError(g);throw s(y),y}var Oe="data:application/octet-stream;base64,",De=g=>g.startsWith(Oe);function Je(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ve(g){if(g==Xe&&T)return new Uint8Array(T);if(N)return N(g);throw"both async and sync fetching of the wasm failed"}function ct(g){return T?Promise.resolve().then(()=>Ve(g)):_(g).then(y=>new Uint8Array(y),()=>Ve(g))}function _t(g,y,S){return ct(g).then(E=>WebAssembly.instantiate(E,y)).then(S,E=>{R(`failed to asynchronously prepare wasm: ${E}`),ze(E)})}function Tt(g,y,S,E){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(C=>{var B=WebAssembly.instantiateStreaming(C,S);return B.then(E,function(fe){return R(`wasm streaming compile failed: ${fe}`),R("falling back to ArrayBuffer instantiation"),_t(y,S,E)})}):_t(y,S,E)}function Ut(){return{env:Pf,wasi_snapshot_preview1:Pf}}function rn(){var g=Ut();function y(E,C){return he=E.exports,oe(he.__wasm_call_ctors),Ne(),he}we();function S(E){y(E.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,y)}catch(E){R(`Module.instantiateWasm callback failed with error: ${E}`),s(E)}return Xe||(Xe=Je()),Tt(T,Xe,g,S).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var be={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(g).slice(1)},normalizeArray:(g,y)=>{for(var S=0,E=g.length-1;E>=0;E--){var C=g[E];C==="."?g.splice(E,1):C===".."?(g.splice(E,1),S++):S&&(g.splice(E,1),S--)}if(y)for(;S;S--)g.unshift("..");return g},normalize:g=>{var y=be.isAbs(g),S=g.substr(-1)==="/";return g=be.normalizeArray(g.split("/").filter(E=>!!E),!y).join("/"),!g&&!y&&(g="."),g&&S&&(g+="/"),(y?"/":"")+g},dirname:g=>{var y=be.splitPath(g),S=y[0],E=y[1];return!S&&!E?".":(E&&(E=E.substr(0,E.length-1)),S+E)},basename:g=>{if(g==="/")return"/";g=be.normalize(g),g=g.replace(/\/$/,"");var y=g.lastIndexOf("/");return y===-1?g:g.substr(y+1)},join:(...g)=>be.normalize(g.join("/")),join2:(g,y)=>be.normalize(g+"/"+y)},ke=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=ke())(g),Ue={resolve:(...g)=>{for(var y="",S=!1,E=g.length-1;E>=-1&&!S;E--){var C=E>=0?g[E]:H.cwd();if(typeof C!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!C)return"";y=C+"/"+y,S=be.isAbs(C)}return y=be.normalizeArray(y.split("/").filter(B=>!!B),!S).join("/"),(S?"/":"")+y||"."},relative:(g,y)=>{g=Ue.resolve(g).substr(1),y=Ue.resolve(y).substr(1);function S(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var E=S(g.split("/")),C=S(y.split("/")),B=Math.min(E.length,C.length),fe=B,me=0;me<B;me++)if(E[me]!==C[me]){fe=me;break}for(var Qe=[],me=fe;me<E.length;me++)Qe.push("..");return Qe=Qe.concat(C.slice(fe)),Qe.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,y,S)=>{for(var E=y+S,C=y;g[C]&&!(C>=E);)++C;if(C-y>16&&g.buffer&&rt)return rt.decode(g.subarray(y,C));for(var B="";y<C;){var fe=g[y++];if(!(fe&128)){B+=String.fromCharCode(fe);continue}var me=g[y++]&63;if((fe&224)==192){B+=String.fromCharCode((fe&31)<<6|me);continue}var Qe=g[y++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Qe:fe=(fe&7)<<18|me<<12|Qe<<6|g[y++]&63,fe<65536)B+=String.fromCharCode(fe);else{var tt=fe-65536;B+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return B},ut=[],Kt=g=>{for(var y=0,S=0;S<g.length;++S){var E=g.charCodeAt(S);E<=127?y++:E<=2047?y+=2:E>=55296&&E<=57343?(y+=4,++S):y+=3}return y},Gt=(g,y,S,E)=>{if(!(E>0))return 0;for(var C=S,B=S+E-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Qe=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Qe&1023}if(me<=127){if(S>=B)break;y[S++]=me}else if(me<=2047){if(S+1>=B)break;y[S++]=192|me>>6,y[S++]=128|me&63}else if(me<=65535){if(S+2>=B)break;y[S++]=224|me>>12,y[S++]=128|me>>6&63,y[S++]=128|me&63}else{if(S+3>=B)break;y[S++]=240|me>>18,y[S++]=128|me>>12&63,y[S++]=128|me>>6&63,y[S++]=128|me&63}}return y[S]=0,S-C};function hn(g,y,S){var E=Kt(g)+1,C=new Array(E),B=Gt(g,C,0,C.length);return C.length=B,C}var or=()=>{if(!ut.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ut=hn(g)}return ut.shift()},Ln={ttys:[],init(){},shutdown(){},register(g,y){Ln.ttys[g]={input:[],output:[],ops:y},H.registerDevice(g,Ln.stream_ops)},stream_ops:{open(g){var y=Ln.ttys[g.node.rdev];if(!y)throw new H.ErrnoError(43);g.tty=y,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,y,S,E,C){if(!g.tty||!g.tty.ops.get_char)throw new H.ErrnoError(60);for(var B=0,fe=0;fe<E;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new H.ErrnoError(29)}if(me===void 0&&B===0)throw new H.ErrnoError(6);if(me==null)break;B++,y[S+fe]=me}return B&&(g.node.timestamp=Date.now()),B},write(g,y,S,E,C){if(!g.tty||!g.tty.ops.put_char)throw new H.ErrnoError(60);try{for(var B=0;B<E;B++)g.tty.ops.put_char(g.tty,y[S+B])}catch{throw new H.ErrnoError(29)}return E&&(g.node.timestamp=Date.now()),B}},default_tty_ops:{get_char(g){return or()},put_char(g,y){y===null||y===10?(I(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(I(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,y,S){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,y){y===null||y===10?(R(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(R(Me(g.output,0)),g.output=[])}}},Hr=(g,y)=>(M.fill(0,g,g+y),g),Ti=(g,y)=>Math.ceil(g/y)*y,_r=g=>{g=Ti(g,65536);var y=Ff(65536,g);return y?Hr(y,g):0},Jt={ops_table:null,mount(g){return Jt.createNode(null,"/",16895,0)},createNode(g,y,S,E){if(H.isBlkdev(S)||H.isFIFO(S))throw new H.ErrnoError(63);Jt.ops_table||={dir:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,lookup:Jt.node_ops.lookup,mknod:Jt.node_ops.mknod,rename:Jt.node_ops.rename,unlink:Jt.node_ops.unlink,rmdir:Jt.node_ops.rmdir,readdir:Jt.node_ops.readdir,symlink:Jt.node_ops.symlink},stream:{llseek:Jt.stream_ops.llseek}},file:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:{llseek:Jt.stream_ops.llseek,read:Jt.stream_ops.read,write:Jt.stream_ops.write,allocate:Jt.stream_ops.allocate,mmap:Jt.stream_ops.mmap,msync:Jt.stream_ops.msync}},link:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,readlink:Jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:H.chrdev_stream_ops}};var C=H.createNode(g,y,S,E);return H.isDir(C.mode)?(C.node_ops=Jt.ops_table.dir.node,C.stream_ops=Jt.ops_table.dir.stream,C.contents={}):H.isFile(C.mode)?(C.node_ops=Jt.ops_table.file.node,C.stream_ops=Jt.ops_table.file.stream,C.usedBytes=0,C.contents=null):H.isLink(C.mode)?(C.node_ops=Jt.ops_table.link.node,C.stream_ops=Jt.ops_table.link.stream):H.isChrdev(C.mode)&&(C.node_ops=Jt.ops_table.chrdev.node,C.stream_ops=Jt.ops_table.chrdev.stream),C.timestamp=Date.now(),g&&(g.contents[y]=C,g.timestamp=C.timestamp),C},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,y){var S=g.contents?g.contents.length:0;if(!(S>=y)){var E=1024*1024;y=Math.max(y,S*(S<E?2:1.125)>>>0),S!=0&&(y=Math.max(y,256));var C=g.contents;g.contents=new Uint8Array(y),g.usedBytes>0&&g.contents.set(C.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,y){if(g.usedBytes!=y)if(y==0)g.contents=null,g.usedBytes=0;else{var S=g.contents;g.contents=new Uint8Array(y),S&&g.contents.set(S.subarray(0,Math.min(y,g.usedBytes))),g.usedBytes=y}},node_ops:{getattr(g){var y={};return y.dev=H.isChrdev(g.mode)?g.id:1,y.ino=g.id,y.mode=g.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=g.rdev,H.isDir(g.mode)?y.size=4096:H.isFile(g.mode)?y.size=g.usedBytes:H.isLink(g.mode)?y.size=g.link.length:y.size=0,y.atime=new Date(g.timestamp),y.mtime=new Date(g.timestamp),y.ctime=new Date(g.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr(g,y){y.mode!==void 0&&(g.mode=y.mode),y.timestamp!==void 0&&(g.timestamp=y.timestamp),y.size!==void 0&&Jt.resizeFileStorage(g,y.size)},lookup(g,y){throw H.genericErrors[44]},mknod(g,y,S,E){return Jt.createNode(g,y,S,E)},rename(g,y,S){if(H.isDir(g.mode)){var E;try{E=H.lookupNode(y,S)}catch{}if(E)for(var C in E.contents)throw new H.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=S,y.contents[S]=g,y.timestamp=g.parent.timestamp},unlink(g,y){delete g.contents[y],g.timestamp=Date.now()},rmdir(g,y){var S=H.lookupNode(g,y);for(var E in S.contents)throw new H.ErrnoError(55);delete g.contents[y],g.timestamp=Date.now()},readdir(g){var y=[".",".."];for(var S of Object.keys(g.contents))y.push(S);return y},symlink(g,y,S){var E=Jt.createNode(g,y,41471,0);return E.link=S,E},readlink(g){if(!H.isLink(g.mode))throw new H.ErrnoError(28);return g.link}},stream_ops:{read(g,y,S,E,C){var B=g.node.contents;if(C>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-C,E);if(fe>8&&B.subarray)y.set(B.subarray(C,C+fe),S);else for(var me=0;me<fe;me++)y[S+me]=B[C+me];return fe},write(g,y,S,E,C,B){if(y.buffer===D.buffer&&(B=!1),!E)return 0;var fe=g.node;if(fe.timestamp=Date.now(),y.subarray&&(!fe.contents||fe.contents.subarray)){if(B)return fe.contents=y.subarray(S,S+E),fe.usedBytes=E,E;if(fe.usedBytes===0&&C===0)return fe.contents=y.slice(S,S+E),fe.usedBytes=E,E;if(C+E<=fe.usedBytes)return fe.contents.set(y.subarray(S,S+E),C),E}if(Jt.expandFileStorage(fe,C+E),fe.contents.subarray&&y.subarray)fe.contents.set(y.subarray(S,S+E),C);else for(var me=0;me<E;me++)fe.contents[C+me]=y[S+me];return fe.usedBytes=Math.max(fe.usedBytes,C+E),E},llseek(g,y,S){var E=y;if(S===1?E+=g.position:S===2&&H.isFile(g.node.mode)&&(E+=g.node.usedBytes),E<0)throw new H.ErrnoError(28);return E},allocate(g,y,S){Jt.expandFileStorage(g.node,y+S),g.node.usedBytes=Math.max(g.node.usedBytes,y+S)},mmap(g,y,S,E,C){if(!H.isFile(g.node.mode))throw new H.ErrnoError(43);var B,fe,me=g.node.contents;if(!(C&2)&&me&&me.buffer===D.buffer)fe=!1,B=me.byteOffset;else{if(fe=!0,B=_r(y),!B)throw new H.ErrnoError(48);me&&((S>0||S+y<me.length)&&(me.subarray?me=me.subarray(S,S+y):me=Array.prototype.slice.call(me,S,S+y)),D.set(me,B))}return{ptr:B,allocated:fe}},msync(g,y,S,E,C){return Jt.stream_ops.write(g,y,0,E,S,!1),0}}},Ui=(g,y,S,E)=>{var C=`al ${g}`;_(g).then(B=>{y(new Uint8Array(B)),C&&Ne()},B=>{if(S)S();else throw`Loading data file "${g}" failed.`}),C&&we()},Hi=(g,y,S,E,C,B)=>{H.createDataFile(g,y,S,E,C,B)},Qi=r.preloadPlugins||[],fo=(g,y,S,E)=>{typeof Browser<"u"&&Browser.init();var C=!1;return Qi.forEach(B=>{C||B.canHandle(y)&&(B.handle(g,y,S,E),C=!0)}),C},da=(g,y,S,E,C,B,fe,me,Qe,tt)=>{var at=y?Ue.resolve(be.join2(g,y)):g;function mt(Be){function je(et){tt?.(),me||Hi(g,y,et,E,C,Qe),B?.(),Ne()}fo(Be,at,je,()=>{fe?.(),Ne()})||je(Be)}we(),typeof S=="string"?Ui(S,mt,fe):mt(S)},ac=g=>{var y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},S=y[g];if(typeof S>"u")throw new Error(`Unknown file open mode: ${g}`);return S},$s=(g,y)=>{var S=0;return g&&(S|=365),y&&(S|=146),S},H={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,y,S,E){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=H.nextInode++,this.name=y,this.mode=S,this.node_ops={},this.stream_ops={},this.rdev=E,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return H.isDir(this.mode)}get isDevice(){return H.isChrdev(this.mode)}},lookupPath(g,y={}){if(g=Ue.resolve(g),!g)return{path:"",node:null};var S={follow_mount:!0,recurse_count:0};if(y=Object.assign(S,y),y.recurse_count>8)throw new H.ErrnoError(32);for(var E=g.split("/").filter(mt=>!!mt),C=H.root,B="/",fe=0;fe<E.length;fe++){var me=fe===E.length-1;if(me&&y.parent)break;if(C=H.lookupNode(C,E[fe]),B=be.join2(B,E[fe]),H.isMountpoint(C)&&(!me||me&&y.follow_mount)&&(C=C.mounted.root),!me||y.follow)for(var Qe=0;H.isLink(C.mode);){var tt=H.readlink(B);B=Ue.resolve(be.dirname(B),tt);var at=H.lookupPath(B,{recurse_count:y.recurse_count+1});if(C=at.node,Qe++>40)throw new H.ErrnoError(32)}}return{path:B,node:C}},getPath(g){for(var y;;){if(H.isRoot(g)){var S=g.mount.mountpoint;return y?S[S.length-1]!=="/"?`${S}/${y}`:S+y:S}y=y?`${g.name}/${y}`:g.name,g=g.parent}},hashName(g,y){for(var S=0,E=0;E<y.length;E++)S=(S<<5)-S+y.charCodeAt(E)|0;return(g+S>>>0)%H.nameTable.length},hashAddNode(g){var y=H.hashName(g.parent.id,g.name);g.name_next=H.nameTable[y],H.nameTable[y]=g},hashRemoveNode(g){var y=H.hashName(g.parent.id,g.name);if(H.nameTable[y]===g)H.nameTable[y]=g.name_next;else for(var S=H.nameTable[y];S;){if(S.name_next===g){S.name_next=g.name_next;break}S=S.name_next}},lookupNode(g,y){var S=H.mayLookup(g);if(S)throw new H.ErrnoError(S);for(var E=H.hashName(g.id,y),C=H.nameTable[E];C;C=C.name_next){var B=C.name;if(C.parent.id===g.id&&B===y)return C}return H.lookup(g,y)},createNode(g,y,S,E){var C=new H.FSNode(g,y,S,E);return H.hashAddNode(C),C},destroyNode(g){H.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var y=["r","w","rw"][g&3];return g&512&&(y+="w"),y},nodePermissions(g,y){return H.ignorePermissions?0:y.includes("r")&&!(g.mode&292)||y.includes("w")&&!(g.mode&146)||y.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!H.isDir(g.mode))return 54;var y=H.nodePermissions(g,"x");return y||(g.node_ops.lookup?0:2)},mayCreate(g,y){try{var S=H.lookupNode(g,y);return 20}catch{}return H.nodePermissions(g,"wx")},mayDelete(g,y,S){var E;try{E=H.lookupNode(g,y)}catch(B){return B.errno}var C=H.nodePermissions(g,"wx");if(C)return C;if(S){if(!H.isDir(E.mode))return 54;if(H.isRoot(E)||H.getPath(E)===H.cwd())return 10}else if(H.isDir(E.mode))return 31;return 0},mayOpen(g,y){return g?H.isLink(g.mode)?32:H.isDir(g.mode)&&(H.flagsToPermissionString(y)!=="r"||y&512)?31:H.nodePermissions(g,H.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=H.MAX_OPEN_FDS;g++)if(!H.streams[g])return g;throw new H.ErrnoError(33)},getStreamChecked(g){var y=H.getStream(g);if(!y)throw new H.ErrnoError(8);return y},getStream:g=>H.streams[g],createStream(g,y=-1){return g=Object.assign(new H.FSStream,g),y==-1&&(y=H.nextfd()),g.fd=y,H.streams[y]=g,g},closeStream(g){H.streams[g]=null},dupStream(g,y=-1){var S=H.createStream(g,y);return S.stream_ops?.dup?.(S),S},chrdev_stream_ops:{open(g){var y=H.getDevice(g.node.rdev);g.stream_ops=y.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new H.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,y)=>g<<8|y,registerDevice(g,y){H.devices[g]={stream_ops:y}},getDevice:g=>H.devices[g],getMounts(g){for(var y=[],S=[g];S.length;){var E=S.pop();y.push(E),S.push(...E.mounts)}return y},syncfs(g,y){typeof g=="function"&&(y=g,g=!1),H.syncFSRequests++,H.syncFSRequests>1&&R(`warning: ${H.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var S=H.getMounts(H.root.mount),E=0;function C(fe){return H.syncFSRequests--,y(fe)}function B(fe){if(fe)return B.errored?void 0:(B.errored=!0,C(fe));++E>=S.length&&C(null)}S.forEach(fe=>{if(!fe.type.syncfs)return B(null);fe.type.syncfs(fe,g,B)})},mount(g,y,S){var E=S==="/",C=!S,B;if(E&&H.root)throw new H.ErrnoError(10);if(!E&&!C){var fe=H.lookupPath(S,{follow_mount:!1});if(S=fe.path,B=fe.node,H.isMountpoint(B))throw new H.ErrnoError(10);if(!H.isDir(B.mode))throw new H.ErrnoError(54)}var me={type:g,opts:y,mountpoint:S,mounts:[]},Qe=g.mount(me);return Qe.mount=me,me.root=Qe,E?H.root=Qe:B&&(B.mounted=me,B.mount&&B.mount.mounts.push(me)),Qe},unmount(g){var y=H.lookupPath(g,{follow_mount:!1});if(!H.isMountpoint(y.node))throw new H.ErrnoError(28);var S=y.node,E=S.mounted,C=H.getMounts(E);Object.keys(H.nameTable).forEach(fe=>{for(var me=H.nameTable[fe];me;){var Qe=me.name_next;C.includes(me.mount)&&H.destroyNode(me),me=Qe}}),S.mounted=null;var B=S.mount.mounts.indexOf(E);S.mount.mounts.splice(B,1)},lookup(g,y){return g.node_ops.lookup(g,y)},mknod(g,y,S){var E=H.lookupPath(g,{parent:!0}),C=E.node,B=be.basename(g);if(!B||B==="."||B==="..")throw new H.ErrnoError(28);var fe=H.mayCreate(C,B);if(fe)throw new H.ErrnoError(fe);if(!C.node_ops.mknod)throw new H.ErrnoError(63);return C.node_ops.mknod(C,B,y,S)},create(g,y){return y=y!==void 0?y:438,y&=4095,y|=32768,H.mknod(g,y,0)},mkdir(g,y){return y=y!==void 0?y:511,y&=1023,y|=16384,H.mknod(g,y,0)},mkdirTree(g,y){for(var S=g.split("/"),E="",C=0;C<S.length;++C)if(S[C]){E+="/"+S[C];try{H.mkdir(E,y)}catch(B){if(B.errno!=20)throw B}}},mkdev(g,y,S){return typeof S>"u"&&(S=y,y=438),y|=8192,H.mknod(g,y,S)},symlink(g,y){if(!Ue.resolve(g))throw new H.ErrnoError(44);var S=H.lookupPath(y,{parent:!0}),E=S.node;if(!E)throw new H.ErrnoError(44);var C=be.basename(y),B=H.mayCreate(E,C);if(B)throw new H.ErrnoError(B);if(!E.node_ops.symlink)throw new H.ErrnoError(63);return E.node_ops.symlink(E,C,g)},rename(g,y){var S=be.dirname(g),E=be.dirname(y),C=be.basename(g),B=be.basename(y),fe,me,Qe;if(fe=H.lookupPath(g,{parent:!0}),me=fe.node,fe=H.lookupPath(y,{parent:!0}),Qe=fe.node,!me||!Qe)throw new H.ErrnoError(44);if(me.mount!==Qe.mount)throw new H.ErrnoError(75);var tt=H.lookupNode(me,C),at=Ue.relative(g,E);if(at.charAt(0)!==".")throw new H.ErrnoError(28);if(at=Ue.relative(y,S),at.charAt(0)!==".")throw new H.ErrnoError(55);var mt;try{mt=H.lookupNode(Qe,B)}catch{}if(tt!==mt){var Be=H.isDir(tt.mode),je=H.mayDelete(me,C,Be);if(je)throw new H.ErrnoError(je);if(je=mt?H.mayDelete(Qe,B,Be):H.mayCreate(Qe,B),je)throw new H.ErrnoError(je);if(!me.node_ops.rename)throw new H.ErrnoError(63);if(H.isMountpoint(tt)||mt&&H.isMountpoint(mt))throw new H.ErrnoError(10);if(Qe!==me&&(je=H.nodePermissions(me,"w"),je))throw new H.ErrnoError(je);H.hashRemoveNode(tt);try{me.node_ops.rename(tt,Qe,B),tt.parent=Qe}catch(et){throw et}finally{H.hashAddNode(tt)}}},rmdir(g){var y=H.lookupPath(g,{parent:!0}),S=y.node,E=be.basename(g),C=H.lookupNode(S,E),B=H.mayDelete(S,E,!0);if(B)throw new H.ErrnoError(B);if(!S.node_ops.rmdir)throw new H.ErrnoError(63);if(H.isMountpoint(C))throw new H.ErrnoError(10);S.node_ops.rmdir(S,E),H.destroyNode(C)},readdir(g){var y=H.lookupPath(g,{follow:!0}),S=y.node;if(!S.node_ops.readdir)throw new H.ErrnoError(54);return S.node_ops.readdir(S)},unlink(g){var y=H.lookupPath(g,{parent:!0}),S=y.node;if(!S)throw new H.ErrnoError(44);var E=be.basename(g),C=H.lookupNode(S,E),B=H.mayDelete(S,E,!1);if(B)throw new H.ErrnoError(B);if(!S.node_ops.unlink)throw new H.ErrnoError(63);if(H.isMountpoint(C))throw new H.ErrnoError(10);S.node_ops.unlink(S,E),H.destroyNode(C)},readlink(g){var y=H.lookupPath(g),S=y.node;if(!S)throw new H.ErrnoError(44);if(!S.node_ops.readlink)throw new H.ErrnoError(28);return Ue.resolve(H.getPath(S.parent),S.node_ops.readlink(S))},stat(g,y){var S=H.lookupPath(g,{follow:!y}),E=S.node;if(!E)throw new H.ErrnoError(44);if(!E.node_ops.getattr)throw new H.ErrnoError(63);return E.node_ops.getattr(E)},lstat(g){return H.stat(g,!0)},chmod(g,y,S){var E;if(typeof g=="string"){var C=H.lookupPath(g,{follow:!S});E=C.node}else E=g;if(!E.node_ops.setattr)throw new H.ErrnoError(63);E.node_ops.setattr(E,{mode:y&4095|E.mode&-4096,timestamp:Date.now()})},lchmod(g,y){H.chmod(g,y,!0)},fchmod(g,y){var S=H.getStreamChecked(g);H.chmod(S.node,y)},chown(g,y,S,E){var C;if(typeof g=="string"){var B=H.lookupPath(g,{follow:!E});C=B.node}else C=g;if(!C.node_ops.setattr)throw new H.ErrnoError(63);C.node_ops.setattr(C,{timestamp:Date.now()})},lchown(g,y,S){H.chown(g,y,S,!0)},fchown(g,y,S){var E=H.getStreamChecked(g);H.chown(E.node,y,S)},truncate(g,y){if(y<0)throw new H.ErrnoError(28);var S;if(typeof g=="string"){var E=H.lookupPath(g,{follow:!0});S=E.node}else S=g;if(!S.node_ops.setattr)throw new H.ErrnoError(63);if(H.isDir(S.mode))throw new H.ErrnoError(31);if(!H.isFile(S.mode))throw new H.ErrnoError(28);var C=H.nodePermissions(S,"w");if(C)throw new H.ErrnoError(C);S.node_ops.setattr(S,{size:y,timestamp:Date.now()})},ftruncate(g,y){var S=H.getStreamChecked(g);if(!(S.flags&2097155))throw new H.ErrnoError(28);H.truncate(S.node,y)},utime(g,y,S){var E=H.lookupPath(g,{follow:!0}),C=E.node;C.node_ops.setattr(C,{timestamp:Math.max(y,S)})},open(g,y,S){if(g==="")throw new H.ErrnoError(44);y=typeof y=="string"?ac(y):y,y&64?(S=typeof S>"u"?438:S,S=S&4095|32768):S=0;var E;if(typeof g=="object")E=g;else{g=be.normalize(g);try{var C=H.lookupPath(g,{follow:!(y&131072)});E=C.node}catch{}}var B=!1;if(y&64)if(E){if(y&128)throw new H.ErrnoError(20)}else E=H.mknod(g,S,0),B=!0;if(!E)throw new H.ErrnoError(44);if(H.isChrdev(E.mode)&&(y&=-513),y&65536&&!H.isDir(E.mode))throw new H.ErrnoError(54);if(!B){var fe=H.mayOpen(E,y);if(fe)throw new H.ErrnoError(fe)}y&512&&!B&&H.truncate(E,0),y&=-131713;var me=H.createStream({node:E,path:H.getPath(E),flags:y,seekable:!0,position:0,stream_ops:E.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(y&1)&&(H.readFiles||(H.readFiles={}),g in H.readFiles||(H.readFiles[g]=1)),me},close(g){if(H.isClosed(g))throw new H.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(y){throw y}finally{H.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,y,S){if(H.isClosed(g))throw new H.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new H.ErrnoError(70);if(S!=0&&S!=1&&S!=2)throw new H.ErrnoError(28);return g.position=g.stream_ops.llseek(g,y,S),g.ungotten=[],g.position},read(g,y,S,E,C){if(E<0||C<0)throw new H.ErrnoError(28);if(H.isClosed(g))throw new H.ErrnoError(8);if((g.flags&2097155)===1)throw new H.ErrnoError(8);if(H.isDir(g.node.mode))throw new H.ErrnoError(31);if(!g.stream_ops.read)throw new H.ErrnoError(28);var B=typeof C<"u";if(!B)C=g.position;else if(!g.seekable)throw new H.ErrnoError(70);var fe=g.stream_ops.read(g,y,S,E,C);return B||(g.position+=fe),fe},write(g,y,S,E,C,B){if(E<0||C<0)throw new H.ErrnoError(28);if(H.isClosed(g))throw new H.ErrnoError(8);if(!(g.flags&2097155))throw new H.ErrnoError(8);if(H.isDir(g.node.mode))throw new H.ErrnoError(31);if(!g.stream_ops.write)throw new H.ErrnoError(28);g.seekable&&g.flags&1024&&H.llseek(g,0,2);var fe=typeof C<"u";if(!fe)C=g.position;else if(!g.seekable)throw new H.ErrnoError(70);var me=g.stream_ops.write(g,y,S,E,C,B);return fe||(g.position+=me),me},allocate(g,y,S){if(H.isClosed(g))throw new H.ErrnoError(8);if(y<0||S<=0)throw new H.ErrnoError(28);if(!(g.flags&2097155))throw new H.ErrnoError(8);if(!H.isFile(g.node.mode)&&!H.isDir(g.node.mode))throw new H.ErrnoError(43);if(!g.stream_ops.allocate)throw new H.ErrnoError(138);g.stream_ops.allocate(g,y,S)},mmap(g,y,S,E,C){if(E&2&&!(C&2)&&(g.flags&2097155)!==2)throw new H.ErrnoError(2);if((g.flags&2097155)===1)throw new H.ErrnoError(2);if(!g.stream_ops.mmap)throw new H.ErrnoError(43);if(!y)throw new H.ErrnoError(28);return g.stream_ops.mmap(g,y,S,E,C)},msync(g,y,S,E,C){return g.stream_ops.msync?g.stream_ops.msync(g,y,S,E,C):0},ioctl(g,y,S){if(!g.stream_ops.ioctl)throw new H.ErrnoError(59);return g.stream_ops.ioctl(g,y,S)},readFile(g,y={}){if(y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error(`Invalid encoding type "${y.encoding}"`);var S,E=H.open(g,y.flags),C=H.stat(g),B=C.size,fe=new Uint8Array(B);return H.read(E,fe,0,B,0),y.encoding==="utf8"?S=Me(fe,0):y.encoding==="binary"&&(S=fe),H.close(E),S},writeFile(g,y,S={}){S.flags=S.flags||577;var E=H.open(g,S.flags,S.mode);if(typeof y=="string"){var C=new Uint8Array(Kt(y)+1),B=Gt(y,C,0,C.length);H.write(E,C,0,B,void 0,S.canOwn)}else if(ArrayBuffer.isView(y))H.write(E,y,0,y.byteLength,void 0,S.canOwn);else throw new Error("Unsupported data type");H.close(E)},cwd:()=>H.currentPath,chdir(g){var y=H.lookupPath(g,{follow:!0});if(y.node===null)throw new H.ErrnoError(44);if(!H.isDir(y.node.mode))throw new H.ErrnoError(54);var S=H.nodePermissions(y.node,"x");if(S)throw new H.ErrnoError(S);H.currentPath=y.path},createDefaultDirectories(){H.mkdir("/tmp"),H.mkdir("/home"),H.mkdir("/home/web_user")},createDefaultDevices(){H.mkdir("/dev"),H.registerDevice(H.makedev(1,3),{read:()=>0,write:(E,C,B,fe,me)=>fe}),H.mkdev("/dev/null",H.makedev(1,3)),Ln.register(H.makedev(5,0),Ln.default_tty_ops),Ln.register(H.makedev(6,0),Ln.default_tty1_ops),H.mkdev("/dev/tty",H.makedev(5,0)),H.mkdev("/dev/tty1",H.makedev(6,0));var g=new Uint8Array(1024),y=0,S=()=>(y===0&&(y=Ae(g).byteLength),g[--y]);H.createDevice("/dev","random",S),H.createDevice("/dev","urandom",S),H.mkdir("/dev/shm"),H.mkdir("/dev/shm/tmp")},createSpecialDirectories(){H.mkdir("/proc");var g=H.mkdir("/proc/self");H.mkdir("/proc/self/fd"),H.mount({mount(){var y=H.createNode(g,"fd",16895,73);return y.node_ops={lookup(S,E){var C=+E,B=H.getStreamChecked(C),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>B.path}};return fe.parent=fe,fe}},y}},{},"/proc/self/fd")},createStandardStreams(g,y,S){g?H.createDevice("/dev","stdin",g):H.symlink("/dev/tty","/dev/stdin"),y?H.createDevice("/dev","stdout",null,y):H.symlink("/dev/tty","/dev/stdout"),S?H.createDevice("/dev","stderr",null,S):H.symlink("/dev/tty1","/dev/stderr"),H.open("/dev/stdin",0),H.open("/dev/stdout",1),H.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{H.genericErrors[g]=new H.ErrnoError(g),H.genericErrors[g].stack="<generic error, no stack>"}),H.nameTable=new Array(4096),H.mount(Jt,{},"/"),H.createDefaultDirectories(),H.createDefaultDevices(),H.createSpecialDirectories(),H.filesystems={MEMFS:Jt}},init(g,y,S){H.initialized=!0,g??=r.stdin,y??=r.stdout,S??=r.stderr,H.createStandardStreams(g,y,S)},quit(){H.initialized=!1;for(var g=0;g<H.streams.length;g++){var y=H.streams[g];y&&H.close(y)}},findObject(g,y){var S=H.analyzePath(g,y);return S.exists?S.object:null},analyzePath(g,y){try{var S=H.lookupPath(g,{follow:!y});g=S.path}catch{}var E={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var S=H.lookupPath(g,{parent:!0});E.parentExists=!0,E.parentPath=S.path,E.parentObject=S.node,E.name=be.basename(g),S=H.lookupPath(g,{follow:!y}),E.exists=!0,E.path=S.path,E.object=S.node,E.name=S.node.name,E.isRoot=S.path==="/"}catch(C){E.error=C.errno}return E},createPath(g,y,S,E){g=typeof g=="string"?g:H.getPath(g);for(var C=y.split("/").reverse();C.length;){var B=C.pop();if(B){var fe=be.join2(g,B);try{H.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,y,S,E,C){var B=be.join2(typeof g=="string"?g:H.getPath(g),y),fe=$s(E,C);return H.create(B,fe)},createDataFile(g,y,S,E,C,B){var fe=y;g&&(g=typeof g=="string"?g:H.getPath(g),fe=y?be.join2(g,y):g);var me=$s(E,C),Qe=H.create(fe,me);if(S){if(typeof S=="string"){for(var tt=new Array(S.length),at=0,mt=S.length;at<mt;++at)tt[at]=S.charCodeAt(at);S=tt}H.chmod(Qe,me|146);var Be=H.open(Qe,577);H.write(Be,S,0,S.length,0,B),H.close(Be),H.chmod(Qe,me)}},createDevice(g,y,S,E){var C=be.join2(typeof g=="string"?g:H.getPath(g),y),B=$s(!!S,!!E);H.createDevice.major||(H.createDevice.major=64);var fe=H.makedev(H.createDevice.major++,0);return H.registerDevice(fe,{open(me){me.seekable=!1},close(me){E?.buffer?.length&&E(10)},read(me,Qe,tt,at,mt){for(var Be=0,je=0;je<at;je++){var et;try{et=S()}catch{throw new H.ErrnoError(29)}if(et===void 0&&Be===0)throw new H.ErrnoError(6);if(et==null)break;Be++,Qe[tt+je]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Qe,tt,at,mt){for(var Be=0;Be<at;Be++)try{E(Qe[tt+Be])}catch{throw new H.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),H.mkdev(C,B,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=N(g.url),g.usedBytes=g.contents.length}catch{throw new H.ErrnoError(29)}},createLazyFile(g,y,S,E,C){class B{constructor(){this.lengthKnown=!1,this.chunks=[]}get(je){if(!(je>this.length-1||je<0)){var et=je%this.chunkSize,ve=je/this.chunkSize|0;return this.getter(ve)[et]}}setDataGetter(je){this.getter=je}cacheLength(){var je=new XMLHttpRequest;if(je.open("HEAD",S,!1),je.send(null),!(je.status>=200&&je.status<300||je.status===304))throw new Error("Couldn't load "+S+". Status: "+je.status);var et=Number(je.getResponseHeader("Content-length")),ve,Ie=(ve=je.getResponseHeader("Accept-Ranges"))&&ve==="bytes",Te=(ve=je.getResponseHeader("Content-Encoding"))&&ve==="gzip",Ze=1024*1024;Ie||(Ze=et);var Ge=(Ke,St)=>{if(Ke>St)throw new Error("invalid range ("+Ke+", "+St+") or no bytes requested!");if(St>et-1)throw new Error("only "+et+" bytes available! programmer error!");var Y=new XMLHttpRequest;if(Y.open("GET",S,!1),et!==Ze&&Y.setRequestHeader("Range","bytes="+Ke+"-"+St),Y.responseType="arraybuffer",Y.overrideMimeType&&Y.overrideMimeType("text/plain; charset=x-user-defined"),Y.send(null),!(Y.status>=200&&Y.status<300||Y.status===304))throw new Error("Couldn't load "+S+". Status: "+Y.status);return Y.response!==void 0?new Uint8Array(Y.response||[]):hn(Y.responseText||"")},Re=this;Re.setDataGetter(Ke=>{var St=Ke*Ze,Y=(Ke+1)*Ze-1;if(Y=Math.min(Y,et-1),typeof Re.chunks[Ke]>"u"&&(Re.chunks[Ke]=Ge(St,Y)),typeof Re.chunks[Ke]>"u")throw new Error("doXHR failed!");return Re.chunks[Ke]}),(Te||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new B,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:S};var Qe=H.createFile(g,y,me,E,C);me.contents?Qe.contents=me.contents:me.url&&(Qe.contents=null,Qe.url=me.url),Object.defineProperties(Qe,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Qe.stream_ops);at.forEach(Be=>{var je=Qe.stream_ops[Be];tt[Be]=(...et)=>(H.forceLoadFile(Qe),je(...et))});function mt(Be,je,et,ve,Ie){var Te=Be.node.contents;if(Ie>=Te.length)return 0;var Ze=Math.min(Te.length-Ie,ve);if(Te.slice)for(var Ge=0;Ge<Ze;Ge++)je[et+Ge]=Te[Ie+Ge];else for(var Ge=0;Ge<Ze;Ge++)je[et+Ge]=Te.get(Ie+Ge);return Ze}return tt.read=(Be,je,et,ve,Ie)=>(H.forceLoadFile(Qe),mt(Be,je,et,ve,Ie)),tt.mmap=(Be,je,et,ve,Ie)=>{H.forceLoadFile(Qe);var Te=_r(je);if(!Te)throw new H.ErrnoError(48);return mt(Be,D,Te,je,et),{ptr:Te,allocated:!0}},Qe.stream_ops=tt,Qe}},pu=(g,y)=>g?Me(M,g,y):"",un={DEFAULT_POLLMASK:5,calculateAt(g,y,S){if(be.isAbs(y))return y;var E;if(g===-100)E=H.cwd();else{var C=un.getStreamFromFD(g);E=C.path}if(y.length==0){if(!S)throw new H.ErrnoError(44);return E}return be.join2(E,y)},doStat(g,y,S){var E=g(y);P[S>>2]=E.dev,P[S+4>>2]=E.mode,j[S+8>>2]=E.nlink,P[S+12>>2]=E.uid,P[S+16>>2]=E.gid,P[S+20>>2]=E.rdev,L[S+24>>3]=BigInt(E.size),P[S+32>>2]=4096,P[S+36>>2]=E.blocks;var C=E.atime.getTime(),B=E.mtime.getTime(),fe=E.ctime.getTime();return L[S+40>>3]=BigInt(Math.floor(C/1e3)),j[S+48>>2]=C%1e3*1e3*1e3,L[S+56>>3]=BigInt(Math.floor(B/1e3)),j[S+64>>2]=B%1e3*1e3*1e3,L[S+72>>3]=BigInt(Math.floor(fe/1e3)),j[S+80>>2]=fe%1e3*1e3*1e3,L[S+88>>3]=BigInt(E.ino),0},doMsync(g,y,S,E,C){if(!H.isFile(y.node.mode))throw new H.ErrnoError(43);if(E&2)return 0;var B=M.slice(g,g+S);H.msync(y,B,C,S,E)},getStreamFromFD(g){var y=H.getStreamChecked(g);return y},varargs:void 0,getStr(g){var y=pu(g);return y}};function hu(g,y){try{return g=un.getStr(g),H.chmod(g,y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function mu(g,y,S,E){try{if(y=un.getStr(y),y=un.calculateAt(g,y),S&-8)return-28;var C=H.lookupPath(y,{follow:!0}),B=C.node;if(!B)return-44;var fe="";return S&4&&(fe+="r"),S&2&&(fe+="w"),S&1&&(fe+="x"),fe&&H.nodePermissions(B,fe)?-2:0}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function gu(g,y){try{return H.fchmod(g,y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function lc(g,y,S){try{return H.fchown(g,y,S),0}catch(E){if(typeof H>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function fa(){var g=P[+un.varargs>>2];return un.varargs+=4,g}var Ki=fa;function cc(g,y,S){un.varargs=S;try{var E=un.getStreamFromFD(g);switch(y){case 0:{var C=fa();if(C<0)return-28;for(;H.streams[C];)C++;var B;return B=H.dupStream(E,C),B.fd}case 1:case 2:return 0;case 3:return E.flags;case 4:{var C=fa();return E.flags|=C,0}case 12:{var C=Ki(),fe=0;return W[C+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function pa(g,y){try{var S=un.getStreamFromFD(g);return un.doStat(H.stat,S.path,y)}catch(E){if(typeof H>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}var wf=0x20000000000000,ha=-0x20000000000000,Bs=g=>g<ha||g>wf?NaN:Number(g);function Ja(g,y){y=Bs(y);try{return isNaN(y)?61:(H.ftruncate(g,y),0)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var zs=(g,y,S)=>Gt(g,M,y,S);function _f(g,y){try{if(y===0)return-28;var S=H.cwd(),E=Kt(S)+1;return y<E?-68:(zs(S,g,y),E)}catch(C){if(typeof H>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}function Sf(g,y,S){un.varargs=S;try{var E=un.getStreamFromFD(g);switch(y){case 21509:return E.tty?0:-59;case 21505:{if(!E.tty)return-59;if(E.tty.ops.ioctl_tcgets){var C=E.tty.ops.ioctl_tcgets(E),B=Ki();P[B>>2]=C.c_iflag||0,P[B+4>>2]=C.c_oflag||0,P[B+8>>2]=C.c_cflag||0,P[B+12>>2]=C.c_lflag||0;for(var fe=0;fe<32;fe++)D[B+fe+17]=C.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return E.tty?0:-59;case 21506:case 21507:case 21508:{if(!E.tty)return-59;if(E.tty.ops.ioctl_tcsets){for(var B=Ki(),me=P[B>>2],Qe=P[B+4>>2],tt=P[B+8>>2],at=P[B+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(D[B+fe+17]);return E.tty.ops.ioctl_tcsets(E.tty,y,{c_iflag:me,c_oflag:Qe,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!E.tty)return-59;var B=Ki();return P[B>>2]=0,0}case 21520:return E.tty?-28:-59;case 21531:{var B=Ki();return H.ioctl(E,y,B)}case 21523:{if(!E.tty)return-59;if(E.tty.ops.ioctl_tiocgwinsz){var Be=E.tty.ops.ioctl_tiocgwinsz(E.tty),B=Ki();W[B>>1]=Be[0],W[B+2>>1]=Be[1]}return 0}case 21524:return E.tty?0:-59;case 21515:return E.tty?0:-59;default:return-28}}catch(je){if(typeof H>"u"||je.name!=="ErrnoError")throw je;return-je.errno}}function yu(g,y){try{return g=un.getStr(g),un.doStat(H.lstat,g,y)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Ws(g,y,S){try{return y=un.getStr(y),y=un.calculateAt(g,y),y=be.normalize(y),y[y.length-1]==="/"&&(y=y.substr(0,y.length-1)),H.mkdir(y,S,0),0}catch(E){if(typeof H>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function bu(g,y,S,E){try{y=un.getStr(y);var C=E&256,B=E&4096;return E=E&-6401,y=un.calculateAt(g,y,B),un.doStat(C?H.lstat:H.stat,y,S)}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function vu(g,y,S,E){un.varargs=E;try{y=un.getStr(y),y=un.calculateAt(g,y);var C=E?fa():0;return H.open(y,S,C).fd}catch(B){if(typeof H>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function Ef(g,y,S,E){try{if(y=un.getStr(y),y=un.calculateAt(g,y),E<=0)return-28;var C=H.readlink(y),B=Math.min(E,Kt(C)),fe=D[S+B];return zs(C,S,E+1),D[S+B]=fe,B}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function xu(g){try{return g=un.getStr(g),H.rmdir(g),0}catch(y){if(typeof H>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function wu(g,y){try{return g=un.getStr(g),un.doStat(H.stat,g,y)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function _u(g,y,S){try{return y=un.getStr(y),y=un.calculateAt(g,y),S===0?H.unlink(y):S===512?H.rmdir(y):ze("Invalid flags passed to unlinkat"),0}catch(E){if(typeof H>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}var uc=g=>j[g>>2]+P[g+4>>2]*0x100000000;function Su(g,y,S,E){try{y=un.getStr(y),y=un.calculateAt(g,y,!0);var C=Date.now(),B,fe;if(!S)B=C,fe=C;else{var me=uc(S),Qe=P[S+8>>2];Qe==0x3fffffff?B=C:Qe==0x3ffffffe?B=-1:B=me*1e3+Qe/(1e3*1e3),S+=16,me=uc(S),Qe=P[S+8>>2],Qe==0x3fffffff?fe=C:Qe==0x3ffffffe?fe=-1:fe=me*1e3+Qe/(1e3*1e3)}return(fe!=-1||B!=-1)&&H.utime(y,B,fe),0}catch(tt){if(typeof H>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var Nf=1,ar=()=>Nf,kf=g=>g%4===0&&(g%100!==0||g%400===0),dc=[0,31,60,91,121,152,182,213,244,274,305,335],Eu=[0,31,59,90,120,151,181,212,243,273,304,334],Za=g=>{var y=kf(g.getFullYear()),S=y?dc:Eu,E=S[g.getMonth()]+g.getDate()-1;return E};function If(g,y){g=Bs(g);var S=new Date(g*1e3);P[y>>2]=S.getSeconds(),P[y+4>>2]=S.getMinutes(),P[y+8>>2]=S.getHours(),P[y+12>>2]=S.getDate(),P[y+16>>2]=S.getMonth(),P[y+20>>2]=S.getFullYear()-1900,P[y+24>>2]=S.getDay();var E=Za(S)|0;P[y+28>>2]=E,P[y+36>>2]=-(S.getTimezoneOffset()*60);var C=new Date(S.getFullYear(),0,1),B=new Date(S.getFullYear(),6,1).getTimezoneOffset(),fe=C.getTimezoneOffset(),me=(B!=fe&&S.getTimezoneOffset()==Math.min(fe,B))|0;P[y+32>>2]=me}function fc(g,y,S,E,C,B,fe){C=Bs(C);try{if(isNaN(C))return 61;var me=un.getStreamFromFD(E),Qe=H.mmap(me,g,C,y,S),tt=Qe.ptr;return P[B>>2]=Qe.allocated,j[fe>>2]=tt,0}catch(at){if(typeof H>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function Ya(g,y,S,E,C,B){B=Bs(B);try{var fe=un.getStreamFromFD(C);S&2&&un.doMsync(g,fe,y,E,B)}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var Gi=(g,y,S,E)=>{var C=new Date().getFullYear(),B=new Date(C,0,1),fe=new Date(C,6,1),me=B.getTimezoneOffset(),Qe=fe.getTimezoneOffset(),tt=Math.max(me,Qe);j[g>>2]=tt*60,P[y>>2]=+(me!=Qe);var at=je=>{var et=je>=0?"-":"+",ve=Math.abs(je),Ie=String(Math.floor(ve/60)).padStart(2,"0"),Te=String(ve%60).padStart(2,"0");return`UTC${et}${Ie}${Te}`},mt=at(me),Be=at(Qe);Qe<me?(zs(mt,S,17),zs(Be,E,17)):(zs(mt,E,17),zs(Be,S,17))},Cf=()=>Date.now(),gi;gi=()=>performance.now();var Tf=()=>0x80000000,Rf=g=>{var y=O.buffer,S=(g-y.byteLength+65535)/65536;try{return O.grow(S),F(),1}catch{}},Of=g=>{var y=M.length;g>>>=0;var S=Tf();if(g>S)return!1;for(var E=1;E<=4;E*=2){var C=y*(1+.2/E);C=Math.min(C,g+0x6000000);var B=Math.min(S,Ti(Math.max(g,C),65536)),fe=Rf(B);if(fe)return!0}return!1},$o={},Xa=()=>h||"./this.program",Ri=()=>{if(!Ri.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:Xa()};for(var S in $o)$o[S]===void 0?delete y[S]:y[S]=$o[S];var E=[];for(var S in y)E.push(`${S}=${y[S]}`);Ri.strings=E}return Ri.strings},el=(g,y)=>{for(var S=0;S<g.length;++S)D[y++]=g.charCodeAt(S);D[y]=0},lx=(g,y)=>{var S=0;return Ri().forEach((E,C)=>{var B=y+S;j[g+C*4>>2]=B,el(E,B),S+=E.length+1}),0},cx=(g,y)=>{var S=Ri();j[g>>2]=S.length;var E=0;return S.forEach(C=>E+=C.length+1),j[y>>2]=E,0};function jf(g){try{var y=un.getStreamFromFD(g);return H.close(y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return S.errno}}function Pm(g,y){try{var S=0,E=0,C=0,B=un.getStreamFromFD(g),fe=B.tty?2:H.isDir(B.mode)?3:H.isLink(B.mode)?7:4;return D[y]=fe,W[y+2>>1]=C,L[y+8>>3]=BigInt(S),L[y+16>>3]=BigInt(E),0}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var qf=(g,y,S,E)=>{for(var C=0,B=0;B<S;B++){var fe=j[y>>2],me=j[y+4>>2];y+=8;var Qe=H.read(g,D,fe,me,E);if(Qe<0)return-1;if(C+=Qe,Qe<me)break}return C};function pc(g,y,S,E){try{var C=un.getStreamFromFD(g),B=qf(C,y,S);return j[E>>2]=B,0}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function ux(g,y,S,E){y=Bs(y);try{if(isNaN(y))return 61;var C=un.getStreamFromFD(g);return H.llseek(C,y,S),L[E>>3]=BigInt(C.position),C.getdents&&y===0&&S===0&&(C.getdents=null),0}catch(B){if(typeof H>"u"||B.name!=="ErrnoError")throw B;return B.errno}}function Af(g){try{var y=un.getStreamFromFD(g);return y.stream_ops?.fsync?y.stream_ops.fsync(y):0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return S.errno}}var Mn=(g,y,S,E)=>{for(var C=0,B=0;B<S;B++){var fe=j[y>>2],me=j[y+4>>2];y+=8;var Qe=H.write(g,D,fe,me,E);if(Qe<0)return-1;if(C+=Qe,Qe<me)break}return C};function Fm(g,y,S,E){try{var C=un.getStreamFromFD(g),B=Mn(C,y,S);return j[E>>2]=B,0}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}H.createPreloadedFile=da,H.staticInit();var Pf={__syscall_chmod:hu,__syscall_faccessat:mu,__syscall_fchmod:gu,__syscall_fchown32:lc,__syscall_fcntl64:cc,__syscall_fstat64:pa,__syscall_ftruncate64:Ja,__syscall_getcwd:_f,__syscall_ioctl:Sf,__syscall_lstat64:yu,__syscall_mkdirat:Ws,__syscall_newfstatat:bu,__syscall_openat:vu,__syscall_readlinkat:Ef,__syscall_rmdir:xu,__syscall_stat64:wu,__syscall_unlinkat:_u,__syscall_utimensat:Su,_emscripten_get_now_is_monotonic:ar,_localtime_js:If,_mmap_js:fc,_munmap_js:Ya,_tzset_js:Gi,emscripten_date_now:Cf,emscripten_get_now:gi,emscripten_resize_heap:Of,environ_get:lx,environ_sizes_get:cx,fd_close:jf,fd_fdstat_get:Pm,fd_read:pc,fd_seek:ux,fd_sync:Af,fd_write:Fm,memory:O},he=rn();r._sqlite3_status64=(g,y,S,E)=>(r._sqlite3_status64=he.sqlite3_status64)(g,y,S,E),r._sqlite3_status=(g,y,S,E)=>(r._sqlite3_status=he.sqlite3_status)(g,y,S,E),r._sqlite3_db_status=(g,y,S,E,C)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,y,S,E,C),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,y)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,y),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,y)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,y),r._sqlite3_realloc64=(g,y)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,y),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,y)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,y),r._sqlite3_stricmp=(g,y)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,y),r._sqlite3_strnicmp=(g,y,S)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,y,S),r._sqlite3_uri_parameter=(g,y)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,y),r._sqlite3_uri_boolean=(g,y,S)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,y,S),r._sqlite3_serialize=(g,y,S,E)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,y,S,E),r._sqlite3_prepare_v2=(g,y,S,E,C)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,y,S,E,C),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,y)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,y),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,y,S,E,C)=>(r._sqlite3_exec=he.sqlite3_exec)(g,y,S,E,C),r._sqlite3_column_int=(g,y)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,y),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,y,S,E)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,y,S,E),r._sqlite3_column_name=(g,y)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,y),r._sqlite3_column_text=(g,y)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,y),r._sqlite3_column_type=(g,y)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,y),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,y,S,E,C,B)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,y,S,E,C,B),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,y)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,y),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,y,S,E)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,y,S,E),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,y)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,y),r._sqlite3_result_error=(g,y,S)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,y,S),r._sqlite3_result_int=(g,y)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,y),r._sqlite3_result_int64=(g,y)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,y),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,y,S,E)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,y,S,E),r._sqlite3_result_subtype=(g,y)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,y),r._sqlite3_result_text=(g,y,S,E)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,y,S,E),r._sqlite3_result_zeroblob=(g,y)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,y),r._sqlite3_result_zeroblob64=(g,y)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,y),r._sqlite3_result_error_code=(g,y)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,y),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,y)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,y),r._sqlite3_vtab_in_next=(g,y)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,y),r._sqlite3_aggregate_context=(g,y)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,y),r._sqlite3_get_auxdata=(g,y)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,y),r._sqlite3_set_auxdata=(g,y,S,E)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,y,S,E),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,y)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,y),r._sqlite3_column_bytes=(g,y)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,y),r._sqlite3_column_double=(g,y)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,y),r._sqlite3_column_value=(g,y)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,y),r._sqlite3_column_decltype=(g,y)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,y),r._sqlite3_bind_blob=(g,y,S,E,C)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,y,S,E,C),r._sqlite3_bind_double=(g,y,S)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,y,S),r._sqlite3_bind_int=(g,y,S)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,y,S),r._sqlite3_bind_int64=(g,y,S)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,y,S),r._sqlite3_bind_null=(g,y)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,y),r._sqlite3_bind_pointer=(g,y,S,E,C)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,y,S,E,C),r._sqlite3_bind_text=(g,y,S,E,C)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,y,S,E,C),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,y)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,y),r._sqlite3_bind_parameter_index=(g,y)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,y),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,y)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,y),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,y,S)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,y,S),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,y,S)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,y,S),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,y,S)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,y,S),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,y,S)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,y,S),r._sqlite3_strglob=(g,y)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,y),r._sqlite3_strlike=(g,y,S)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,y,S),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,y,S,E,C,B)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,y,S,E,C,B),r._sqlite3_create_module=(g,y,S,E)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,y,S,E),r._sqlite3_create_module_v2=(g,y,S,E,C)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,y,S,E,C),r._sqlite3_drop_modules=(g,y)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,y),r._sqlite3_declare_vtab=(g,y)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,y),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,y)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,y),r._sqlite3_vtab_in=(g,y,S)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,y,S),r._sqlite3_vtab_rhs_value=(g,y,S)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,y,S),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,y,S)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,y,S),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,y)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,y),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,y)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,y),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,y)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,y),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,y,S)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,y,S),r._sqlite3_progress_handler=(g,y,S,E)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,y,S,E),r._sqlite3_busy_timeout=(g,y)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,y),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,y,S,E,C,B,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,y,S,E,C,B,fe,me),r._sqlite3_create_function_v2=(g,y,S,E,C,B,fe,me,Qe)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,y,S,E,C,B,fe,me,Qe),r._sqlite3_create_window_function=(g,y,S,E,C,B,fe,me,Qe,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,y,S,E,C,B,fe,me,Qe,tt),r._sqlite3_overload_function=(g,y,S)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,y,S),r._sqlite3_trace_v2=(g,y,S,E)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,y,S,E),r._sqlite3_commit_hook=(g,y,S)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,y,S),r._sqlite3_update_hook=(g,y,S)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,y,S),r._sqlite3_rollback_hook=(g,y,S)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,y,S),r._sqlite3_preupdate_hook=(g,y,S)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,y,S),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,y,S)=>(r._sqlite3_limit=he.sqlite3_limit)(g,y,S),r._sqlite3_open=(g,y)=>(r._sqlite3_open=he.sqlite3_open)(g,y),r._sqlite3_open_v2=(g,y,S,E)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,y,S,E),r._sqlite3_create_collation=(g,y,S,E,C)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,y,S,E,C),r._sqlite3_create_collation_v2=(g,y,S,E,C,B)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,y,S,E,C,B),r._sqlite3_collation_needed=(g,y,S)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,y,S),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,y,S,E,C,B,fe,me,Qe)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,y,S,E,C,B,fe,me,Qe),r._sqlite3_extended_result_codes=(g,y)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,y),r._sqlite3_uri_key=(g,y)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,y),r._sqlite3_uri_int64=(g,y,S)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,y,S),r._sqlite3_db_name=(g,y)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,y),r._sqlite3_db_filename=(g,y)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,y),r._sqlite3_db_readonly=(g,y)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,y),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,y,S,E)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,y,S,E),r._sqlite3session_attach=(g,y)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,y),r._sqlite3session_create=(g,y,S)=>(r._sqlite3session_create=he.sqlite3session_create)(g,y,S),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,y,S)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,y,S),r._sqlite3session_changeset=(g,y,S)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,y,S),r._sqlite3session_changeset_strm=(g,y,S)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,y,S),r._sqlite3session_patchset_strm=(g,y,S)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,y,S),r._sqlite3session_patchset=(g,y,S)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,y,S),r._sqlite3session_enable=(g,y)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,y),r._sqlite3session_indirect=(g,y)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,y),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,y,S)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,y,S),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,y,S)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,y,S),r._sqlite3changeset_start_v2=(g,y,S,E)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,y,S,E),r._sqlite3changeset_start_strm=(g,y,S)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,y,S),r._sqlite3changeset_start_v2_strm=(g,y,S,E)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,y,S,E),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,y,S,E,C)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,y,S,E,C),r._sqlite3changeset_pk=(g,y,S)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,y,S),r._sqlite3changeset_old=(g,y,S)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,y,S),r._sqlite3changeset_new=(g,y,S)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,y,S),r._sqlite3changeset_conflict=(g,y,S)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,y,S),r._sqlite3changeset_fk_conflicts=(g,y)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,y),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,y,S,E)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,y,S,E),r._sqlite3changeset_invert_strm=(g,y,S,E)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,y,S,E),r._sqlite3changeset_apply_v2=(g,y,S,E,C,B,fe,me,Qe)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,y,S,E,C,B,fe,me,Qe),r._sqlite3changeset_apply=(g,y,S,E,C,B)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,y,S,E,C,B),r._sqlite3changeset_apply_v2_strm=(g,y,S,E,C,B,fe,me,Qe)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,y,S,E,C,B,fe,me,Qe),r._sqlite3changeset_apply_strm=(g,y,S,E,C,B)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,y,S,E,C,B),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,y,S)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,y,S),r._sqlite3changegroup_output=(g,y,S)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,y,S),r._sqlite3changegroup_add_strm=(g,y,S)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,y,S),r._sqlite3changegroup_output_strm=(g,y,S)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,y,S),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,y,S,E,C,B)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,y,S,E,C,B),r._sqlite3changeset_concat_strm=(g,y,S,E,C,B)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,y,S,E,C,B),r._sqlite3session_config=(g,y)=>(r._sqlite3session_config=he.sqlite3session_config)(g,y),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,y,S)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,y,S),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,y)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,y),r._sqlite3__wasm_db_vfs=(g,y)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,y),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,y)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,y),r._sqlite3__wasm_db_serialize=(g,y,S,E,C)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,y,S,E,C),r._sqlite3__wasm_vfs_create_file=(g,y,S,E)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,y,S,E),r._sqlite3__wasm_posix_create_file=(g,y,S)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,y,S),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,y)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,y),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,y,S)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,y,S),r._sqlite3__wasm_db_config_ip=(g,y,S,E)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,y,S,E),r._sqlite3__wasm_db_config_pii=(g,y,S,E,C)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,y,S,E,C),r._sqlite3__wasm_db_config_s=(g,y,S)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,y,S),r._sqlite3__wasm_config_i=(g,y)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,y),r._sqlite3__wasm_config_ii=(g,y,S)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,y,S),r._sqlite3__wasm_config_j=(g,y)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,y),r._sqlite3__wasm_qfmt_token=(g,y)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,y),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,y)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,y),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,y)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,y),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,y)=>(r._realloc=he.realloc)(g,y);var Ff=(g,y)=>(Ff=he.emscripten_builtin_memalign)(g,y);r.wasmMemory=O;var hc;de=function g(){hc||Df(),hc||(de=g)};function Df(){if(ue>0||(Z(),ue>0))return;function g(){hc||(hc=!0,r.calledRun=!0,!A&&(le(),i(r),r.onRuntimeInitialized?.(),se()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Df(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function y(S=globalThis.sqlite3ApiConfig||y.defaultConfig){if(y.sqlite3)return(y.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),y.sqlite3;const E=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},S||{});Object.assign(E,{allocExportName:E.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:E.useStdAlloc?"free":"sqlite3_free",reallocExportName:E.useStdAlloc?"realloc":"sqlite3_realloc"},E),["exports","memory","wasmfsOpfsDir"].forEach(K=>{typeof E[K]=="function"&&(E[K]=E[K]())}),delete globalThis.sqlite3ApiConfig,delete y.defaultConfig;const C=Object.create(null),B=Object.create(null),fe=K=>C.sqlite3_js_rc_str&&C.sqlite3_js_rc_str(K)||"Unknown result code #"+K,me=K=>typeof K=="number"&&K===(K|0);class Qe extends Error{constructor(...re){let ie;if(re.length)if(me(re[0]))if(ie=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(ie);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=ie||C.SQLITE_ERROR,this.name="SQLite3Error"}}Qe.toss=(...K)=>{throw new Qe(...K)};const tt=Qe.toss;E.wasmfsOpfsDir&&!/^\/[^/]+$/.test(E.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=K=>typeof K!="bigint"&&K===(K|0)&&K<=0x7fffffff&&K>=-0x80000000,mt=function K(re){return K._max||(K._max=BigInt("0x7fffffffffffffff"),K._min=~K._max),re>=K._min&&re<=K._max},Be=K=>K>=-2147483647n-1n&&K<=2147483647n,je=function K(re){return K._min||(K._min=Number.MIN_SAFE_INTEGER,K._max=Number.MAX_SAFE_INTEGER),re>=K._min&&re<=K._max},et=K=>K&&K.constructor&&at(K.constructor.BYTES_PER_ELEMENT)?K:!1,ve=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ie=K=>K.buffer instanceof ve,Te=(K,re,ie)=>Ie(K)?K.slice(re,ie):K.subarray(re,ie),Ze=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),Ge=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),Re=K=>Ze(K)||tt("Value is not of a supported TypedArray type."),Ke=new TextDecoder("utf-8"),St=function(K,re,ie){return Ke.decode(Te(K,re,ie))},Y=function(K){return Ge(K)?St(K instanceof ArrayBuffer?new Uint8Array(K):K):Array.isArray(K)?K.join(""):(B.isPtr(K)&&(K=B.cstrToJs(K)),K)};class ce extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=C.SQLITE_NOMEM,this.name="WasmAllocError"}}ce.toss=(...K)=>{throw new ce(...K)},Object.assign(C,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(K,re,ie,Le,it,Rt,Wt,Zt,lt)=>{},sqlite3_create_function:(K,re,ie,Le,it,Rt,Wt,Zt)=>{},sqlite3_create_window_function:(K,re,ie,Le,it,Rt,Wt,Zt,lt,_e)=>{},sqlite3_prepare_v3:(K,re,ie,Le,it,Rt)=>{},sqlite3_prepare_v2:(K,re,ie,Le,it)=>{},sqlite3_exec:(K,re,ie,Le,it)=>{},sqlite3_randomness:(K,re)=>{}});const Ee={affirmBindableTypedArray:Re,flexibleString:Y,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:je,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Ge,isTypedArray:et,typedArrayToString:St,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:Ie,toss:function(...K){throw new Error(K.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re="SQLite format 3";re.length>K.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let ie=0;ie<re.length;++ie)re.charCodeAt(ie)!==K[ie]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re=K.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(K)}};Object.assign(B,{ptrSizeof:E.wasmPtrSizeof||4,ptrIR:E.wasmPtrIR||"i32",bigIntEnabled:!!E.bigIntEnabled,exports:E.exports||tt("Missing API config.exports (WASM module exports)."),memory:E.memory||E.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),B.allocFromTypedArray=function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K)),Re(K);const re=B.alloc(K.byteLength||1);return B.heapForSize(K.constructor).set(K.byteLength?K:[0],re),re};{const K=E.allocExportName,re=E.deallocExportName,ie=E.reallocExportName;for(const Le of[K,re,ie])B.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");B.alloc=function Le(it){return Le.impl(it)||ce.toss("Failed to allocate",it," bytes.")},B.alloc.impl=B.exports[K],B.realloc=function Le(it,Rt){const Wt=Le.impl(it,Rt);return Rt?Wt||ce.toss("Failed to reallocate",Rt," bytes."):0},B.realloc.impl=B.exports[ie],B.dealloc=B.exports[re]}B.compileOptionUsed=function K(re){if(arguments.length){if(Array.isArray(re)){const ie={};return re.forEach(Le=>{ie[Le]=C.sqlite3_compileoption_used(Le)}),ie}else if(typeof re=="object")return Object.keys(re).forEach(ie=>{re[ie]=C.sqlite3_compileoption_used(ie)}),re}else{if(K._result)return K._result;K._opt||(K._rx=/^([^=]+)=(.+)/,K._rxInt=/^-?\d+$/,K._opt=function(Wt,Zt){const lt=K._rx.exec(Wt);Zt[0]=lt?lt[1]:Wt,Zt[1]=lt?K._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const ie={},Le=[0,0];let it=0,Rt;for(;Rt=C.sqlite3_compileoption_get(it++);)K._opt(Rt,Le),ie[Le[0]]=Le[1];return K._result=ie}return typeof re=="string"?!!C.sqlite3_compileoption_used(re):!1},B.pstack=Object.assign(Object.create(null),{restore:B.exports.sqlite3__wasm_pstack_restore,alloc:function(K){return typeof K=="string"&&!(K=B.sizeofIR(K))&&ce.toss("Invalid value for pstack.alloc(",arguments[0],")"),B.exports.sqlite3__wasm_pstack_alloc(K)||ce.toss("Could not allocate",K,"bytes from the pstack.")},allocChunks:function(K,re){typeof re=="string"&&!(re=B.sizeofIR(re))&&ce.toss("Invalid size value for allocChunks(",arguments[1],")");const ie=B.pstack.alloc(K*re),Le=[];let it=0,Rt=0;for(;it<K;++it,Rt+=re)Le.push(ie+Rt);return Le},allocPtr:(K=1,re=!0)=>K===1?B.pstack.alloc(re?8:B.ptrSizeof):B.pstack.allocChunks(K,re?8:B.ptrSizeof),call:function(K){const re=B.pstack.pointer;try{return K(pe)}finally{B.pstack.restore(re)}}}),Object.defineProperties(B.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_remaining}}),C.sqlite3_randomness=(...K)=>{if(K.length===1&&Ee.isTypedArray(K[0])&&K[0].BYTES_PER_ELEMENT===1){const re=K[0];if(re.byteLength===0)return B.exports.sqlite3_randomness(0,0),re;const ie=B.pstack.pointer;try{let Le=re.byteLength,it=0;const Rt=B.exports.sqlite3_randomness,Wt=B.heap8u(),Zt=Le<512?Le:512,lt=B.pstack.alloc(Zt);do{const _e=Le>Zt?Zt:Le;Rt(_e,lt),re.set(Te(Wt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{B.pstack.restore(ie)}return re}B.exports.sqlite3_randomness(...K)};let st;if(C.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const K=E.wasmfsOpfsDir;if(!K||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return K&&B.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],K)===0?st=K:st=""}catch{return st=""}},C.sqlite3_wasmfs_filename_is_persistent=function(K){const re=C.sqlite3_wasmfs_opfs_dir();return re&&K?K.startsWith(re+"/"):!1},C.sqlite3_js_db_uses_vfs=function(K,re,ie=0){try{const Le=C.sqlite3_vfs_find(re);return Le?K?Le===C.sqlite3_js_db_vfs(K,ie)?Le:!1:Le===C.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},C.sqlite3_js_vfs_list=function(){const K=[];let re=C.sqlite3_vfs_find(0);for(;re;){const ie=new C.sqlite3_vfs(re);K.push(B.cstrToJs(ie.$zName)),re=ie.$pNext,ie.dispose()}return K},C.sqlite3_js_db_export=function(K,re=0){K=B.xWrap.testConvertArg("sqlite3*",K),K||tt("Invalid sqlite3* argument."),B.bigIntEnabled||tt("BigInt64 support is not enabled.");const ie=B.scopedAllocPush();let Le;try{const it=B.scopedAlloc(8+B.ptrSizeof),Rt=it+8,Wt=re?B.isPtr(re)?re:B.scopedAllocCString(""+re):0;let Zt=B.exports.sqlite3__wasm_db_serialize(K,Wt,Rt,it,0);Zt&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(Zt)),Le=B.peekPtr(Rt);const lt=B.peek(it,"i64");return Zt=lt?B.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,Zt}finally{Le&&B.exports.sqlite3_free(Le),B.scopedAllocPop(ie)}},C.sqlite3_js_db_vfs=(K,re=0)=>Ee.sqlite3__wasm_db_vfs(K,re),C.sqlite3_js_aggregate_context=(K,re)=>C.sqlite3_aggregate_context(K,re)||(re?ce.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),C.sqlite3_js_posix_create_file=function(K,re,ie){let Le;re&&B.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=B.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(ie)||ie<0)&&(ie=re.byteLength)):Qe.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(ie)||ie<0)&&Qe.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(K,Le,ie);it&&Qe.toss("Creation of file failed with sqlite3 result code",C.sqlite3_js_rc_str(it))}finally{B.dealloc(Le)}},C.sqlite3_js_vfs_create_file=function(K,re,ie,Le){E.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;ie?(B.isPtr(ie)?it=ie:ie instanceof ArrayBuffer&&(ie=new Uint8Array(ie)),ie instanceof Uint8Array?(it=B.allocFromTypedArray(ie),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=ie.byteLength)):Qe.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&(B.dealloc(it),Qe.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Rt=Ee.sqlite3__wasm_vfs_create_file(K,re,it,Le);Rt&&Qe.toss("Creation of file failed with sqlite3 result code",C.sqlite3_js_rc_str(Rt))}finally{B.dealloc(it)}},C.sqlite3_js_sql_to_string=K=>{if(typeof K=="string")return K;const re=Y(v);return re===v?void 0:re},Ee.isUIThread()){const K=function(re){const ie=Object.create(null);return ie.prefix="kvvfs-"+re,ie.stores=[],(re==="session"||re==="")&&ie.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&ie.stores.push(globalThis.localStorage),ie};C.sqlite3_js_kvvfs_clear=function(re=""){let ie=0;const Le=K(re);return Le.stores.forEach(it=>{const Rt=[];let Wt;for(Wt=0;Wt<it.length;++Wt){const Zt=it.key(Wt);Zt.startsWith(Le.prefix)&&Rt.push(Zt)}Rt.forEach(Zt=>it.removeItem(Zt)),ie+=Rt.length}),ie},C.sqlite3_js_kvvfs_size=function(re=""){let ie=0;const Le=K(re);return Le.stores.forEach(it=>{let Rt;for(Rt=0;Rt<it.length;++Rt){const Wt=it.key(Rt);Wt.startsWith(Le.prefix)&&(ie+=Wt.length,ie+=it.getItem(Wt).length)}}),ie*2}}C.sqlite3_db_config=function(K,re,...ie){switch(this.s||(this.s=B.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=B.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=B.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case C.SQLITE_DBCONFIG_ENABLE_FKEY:case C.SQLITE_DBCONFIG_ENABLE_TRIGGER:case C.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case C.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case C.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case C.SQLITE_DBCONFIG_ENABLE_QPSG:case C.SQLITE_DBCONFIG_TRIGGER_EQP:case C.SQLITE_DBCONFIG_RESET_DATABASE:case C.SQLITE_DBCONFIG_DEFENSIVE:case C.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case C.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case C.SQLITE_DBCONFIG_DQS_DML:case C.SQLITE_DBCONFIG_DQS_DDL:case C.SQLITE_DBCONFIG_ENABLE_VIEW:case C.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case C.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case C.SQLITE_DBCONFIG_STMT_SCANSTATUS:case C.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(K,re,ie[0],ie[1]||0);case C.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(K,re,ie[0],ie[1],ie[2]);case C.SQLITE_DBCONFIG_MAINDBNAME:return this.s(K,re,ie[0]);default:return C.SQLITE_MISUSE}}.bind(Object.create(null)),C.sqlite3_value_to_js=function(K,re=!0){let ie;const Le=C.sqlite3_value_type(K);switch(Le){case C.SQLITE_INTEGER:B.bigIntEnabled?(ie=C.sqlite3_value_int64(K),Ee.bigIntFitsDouble(ie)&&(ie=Number(ie))):ie=C.sqlite3_value_double(K);break;case C.SQLITE_FLOAT:ie=C.sqlite3_value_double(K);break;case C.SQLITE_TEXT:ie=C.sqlite3_value_text(K);break;case C.SQLITE_BLOB:{const it=C.sqlite3_value_bytes(K),Rt=C.sqlite3_value_blob(K);it&&!Rt&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),ie=it?B.heap8u().slice(Rt,Rt+Number(it)):null;break}case C.SQLITE_NULL:ie=null;break;default:re&&tt(C.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),ie=void 0}return ie},C.sqlite3_values_to_js=function(K,re,ie=!0){let Le;const it=[];for(Le=0;Le<K;++Le)it.push(C.sqlite3_value_to_js(B.peekPtr(re+B.ptrSizeof*Le),ie));return it},C.sqlite3_result_error_js=function(K,re){re instanceof ce?C.sqlite3_result_error_nomem(K):C.sqlite3_result_error(K,""+re,-1)},C.sqlite3_result_js=function(K,re){if(re instanceof Error){C.sqlite3_result_error_js(K,re);return}try{switch(typeof re){case"undefined":break;case"boolean":C.sqlite3_result_int(K,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?C.sqlite3_result_int(K,Number(re)):Ee.bigIntFitsDouble(re)?C.sqlite3_result_double(K,Number(re)):B.bigIntEnabled?Ee.bigIntFits64(re)?C.sqlite3_result_int64(K,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let ie;Ee.isInt32(re)?ie=C.sqlite3_result_int:B.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?ie=C.sqlite3_result_int64:ie=C.sqlite3_result_double,ie(K,re);break}case"string":{const[ie,Le]=B.allocCString(re,!0);C.sqlite3_result_text(K,ie,Le,C.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){C.sqlite3_result_null(K);break}else if(Ee.isBindableTypedArray(re)){const ie=B.allocFromTypedArray(re);C.sqlite3_result_blob(K,ie,re.byteLength,C.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(ie){C.sqlite3_result_error_js(K,ie)}},C.sqlite3_column_js=function(K,re,ie=!0){const Le=C.sqlite3_column_value(K,re);return Le===0?void 0:C.sqlite3_value_to_js(Le,ie)};const ae=function(K,re,ie){ie=C[ie],this.ptr?B.pokePtr(this.ptr,0):this.ptr=B.allocPtr();const Le=ie(K,re,this.ptr);if(Le)return Qe.toss(Le,arguments[2]+"() failed with code "+Le);const it=B.peekPtr(this.ptr);return it?C.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));C.sqlite3_preupdate_new_js=(K,re)=>ae(K,re,"sqlite3_preupdate_new"),C.sqlite3_preupdate_old_js=(K,re)=>ae(K,re,"sqlite3_preupdate_old"),C.sqlite3changeset_new_js=(K,re)=>ae(K,re,"sqlite3changeset_new"),C.sqlite3changeset_old_js=(K,re)=>ae(K,re,"sqlite3changeset_old");const pe={WasmAllocError:ce,SQLite3Error:Qe,capi:C,util:Ee,wasm:B,config:E,version:Object.create(null),client:void 0,asyncPostInit:async function K(){if(K.isReady instanceof Promise)return K.isReady;let re=y.initializersAsync;delete y.initializersAsync;const ie=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=Rt=>{throw E.error("an async sqlite3 initializer failed:",Rt),Rt};if(!re||!re.length)return K.isReady=ie().catch(Le);re=re.map(Rt=>Rt instanceof Function?async Wt=>Rt(pe):Rt),re.push(ie);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return K.isReady=it.catch(Le)},scriptInfo:void 0};try{y.initializers.forEach(K=>{K(pe)})}catch(K){throw console.error("sqlite3 bootstrap initializer threw:",K),K}return delete y.initializers,y.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(y){y.bigIntEnabled===void 0&&(y.bigIntEnabled=!!globalThis.BigInt64Array);const S=(...Y)=>{throw new Error(Y.join(" "))};y.exports||Object.defineProperty(y,"exports",{enumerable:!0,configurable:!0,get:()=>y.instance&&y.instance.exports});const E=y.pointerIR||"i32",C=y.ptrSizeof=E==="i32"?4:E==="i64"?8:S("Unhandled ptrSizeof:",E),B=Object.create(null);B.heapSize=0,B.memory=null,B.freeFuncIndexes=[],B.scopedAlloc=[],B.utf8Decoder=new TextDecoder,B.utf8Encoder=new TextEncoder("utf-8"),y.sizeofIR=Y=>{switch(Y){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return C;default:return(""+Y).endsWith("*")?C:void 0}};const fe=function(){if(!B.memory)B.memory=y.memory instanceof WebAssembly.Memory?y.memory:y.exports.memory;else if(B.heapSize===B.memory.buffer.byteLength)return B;const Y=B.memory.buffer;return B.HEAP8=new Int8Array(Y),B.HEAP8U=new Uint8Array(Y),B.HEAP16=new Int16Array(Y),B.HEAP16U=new Uint16Array(Y),B.HEAP32=new Int32Array(Y),B.HEAP32U=new Uint32Array(Y),y.bigIntEnabled&&(B.HEAP64=new BigInt64Array(Y),B.HEAP64U=new BigUint64Array(Y)),B.HEAP32F=new Float32Array(Y),B.HEAP64F=new Float64Array(Y),B.heapSize=Y.byteLength,B};y.heap8=()=>fe().HEAP8,y.heap8u=()=>fe().HEAP8U,y.heap16=()=>fe().HEAP16,y.heap16u=()=>fe().HEAP16U,y.heap32=()=>fe().HEAP32,y.heap32u=()=>fe().HEAP32U,y.heapForSize=function(Y,ce=!0){const Ee=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe();switch(Y){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ce?Ee.HEAP8U:Ee.HEAP8;case 16:return ce?Ee.HEAP16U:Ee.HEAP16;case 32:return ce?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ce?Ee.HEAP64U:Ee.HEAP64;break;default:if(y.bigIntEnabled){if(Y===globalThis.BigUint64Array)return Ee.HEAP64U;if(Y===globalThis.BigInt64Array)return Ee.HEAP64;break}}S("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},y.functionTable=function(){return y.exports.__indirect_function_table},y.functionEntry=function(Y){const ce=y.functionTable();return Y<ce.length?ce.get(Y):void 0},y.jsFuncToWasm=function Y(ce,Ee){if(Y._||(Y._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,K,re){re<128?pe[K](re):pe[K](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const K=Y._.rxJSig.exec(pe);return K?K[2]:pe.substr(1)},letterType:pe=>Y._.sigTypes[pe]||S("Invalid signature letter:",pe),pushSigType:(pe,K)=>pe.push(Y._.typeCodes[Y._.letterType(K)])}),typeof ce=="string"){const pe=Ee;Ee=ce,ce=pe}const st=Y._.sigParams(Ee),ae=[1,96];Y._.uleb128Encode(ae,"push",st.length);for(const pe of st)Y._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),Y._.pushSigType(ae,Ee[0])),Y._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ce}}).exports.f};const me=function(ce,Ee,st){if(st&&!B.scopedAlloc.length&&S("No scopedAllocPush() scope is active."),typeof ce=="string"){const re=Ee;Ee=ce,ce=re}(typeof Ee!="string"||!(ce instanceof Function))&&S("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=y.functionTable(),pe=ae.length;let K;for(;B.freeFuncIndexes.length&&(K=B.freeFuncIndexes.pop(),ae.get(K));){K=null;continue}K||(K=pe,ae.grow(1));try{return ae.set(K,ce),st&&B.scopedAlloc[B.scopedAlloc.length-1].push(K),K}catch(re){if(!(re instanceof TypeError))throw K===pe&&B.freeFuncIndexes.push(pe),re}try{const re=y.jsFuncToWasm(ce,Ee);ae.set(K,re),st&&B.scopedAlloc[B.scopedAlloc.length-1].push(K)}catch(re){throw K===pe&&B.freeFuncIndexes.push(pe),re}return K};y.installFunction=(Y,ce)=>me(Y,ce,!1),y.scopedInstallFunction=(Y,ce)=>me(Y,ce,!0),y.uninstallFunction=function(Y){if(!Y&&Y!==0)return;const ce=B.freeFuncIndexes,Ee=y.functionTable();ce.push(Y);const st=Ee.get(Y);return Ee.set(Y,null),st},y.peek=function(ce,Ee="i8"){Ee.endsWith("*")&&(Ee=E);const st=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe(),ae=Array.isArray(ce)?[]:void 0;let pe;do{switch(ae&&(ce=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ce>>0];break;case"i16":pe=st.HEAP16[ce>>1];break;case"i32":pe=st.HEAP32[ce>>2];break;case"float":case"f32":pe=st.HEAP32F[ce>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ce>>3]);break;case"i64":if(y.bigIntEnabled){pe=BigInt(st.HEAP64[ce>>3]);break}default:S("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},y.poke=function(Y,ce,Ee="i8"){Ee.endsWith("*")&&(Ee=E);const st=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe();for(const ae of Array.isArray(Y)?Y:[Y])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ce;continue;case"i16":st.HEAP16[ae>>1]=ce;continue;case"i32":st.HEAP32[ae>>2]=ce;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ce;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ce;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ce);continue}default:S("Invalid type for poke(): "+Ee)}return this},y.peekPtr=(...Y)=>y.peek(Y.length===1?Y[0]:Y,E),y.pokePtr=(Y,ce=0)=>y.poke(Y,ce,E),y.peek8=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i8"),y.poke8=(Y,ce)=>y.poke(Y,ce,"i8"),y.peek16=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i16"),y.poke16=(Y,ce)=>y.poke(Y,ce,"i16"),y.peek32=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i32"),y.poke32=(Y,ce)=>y.poke(Y,ce,"i32"),y.peek64=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"i64"),y.poke64=(Y,ce)=>y.poke(Y,ce,"i64"),y.peek32f=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"f32"),y.poke32f=(Y,ce)=>y.poke(Y,ce,"f32"),y.peek64f=(...Y)=>y.peek(Y.length===1?Y[0]:Y,"f64"),y.poke64f=(Y,ce)=>y.poke(Y,ce,"f64"),y.getMemValue=y.peek,y.getPtrValue=y.peekPtr,y.setMemValue=y.poke,y.setPtrValue=y.pokePtr,y.isPtr32=Y=>typeof Y=="number"&&Y===(Y|0)&&Y>=0,y.isPtr=y.isPtr32,y.cstrlen=function(Y){if(!Y||!y.isPtr(Y))return null;const ce=fe().HEAP8U;let Ee=Y;for(;ce[Ee]!==0;++Ee);return Ee-Y};const Qe=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(Y,ce,Ee){return B.utf8Decoder.decode(Y.buffer instanceof Qe?Y.slice(ce,Ee):Y.subarray(ce,Ee))};y.cstrToJs=function(Y){const ce=y.cstrlen(Y);return ce?tt(fe().HEAP8U,Y,Y+ce):ce===null?ce:""},y.jstrlen=function(Y){if(typeof Y!="string")return null;const ce=Y.length;let Ee=0;for(let st=0;st<ce;++st){let ae=Y.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|Y.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},y.jstrcpy=function(Y,ce,Ee=0,st=-1,ae=!0){if((!ce||!(ce instanceof Int8Array)&&!(ce instanceof Uint8Array))&&S("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ce.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,K=Y.length;const re=Ee,ie=Ee+st-(ae?1:0);for(;pe<K&&Ee<ie;++pe){let Le=Y.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|Y.charCodeAt(++pe)&1023),Le<=127){if(Ee>=ie)break;ce[Ee++]=Le}else if(Le<=2047){if(Ee+1>=ie)break;ce[Ee++]=192|Le>>6,ce[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=ie)break;ce[Ee++]=224|Le>>12,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}else{if(Ee+3>=ie)break;ce[Ee++]=240|Le>>18,ce[Ee++]=128|Le>>12&63,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}}return ae&&(ce[Ee++]=0),Ee-re},y.cstrncpy=function(Y,ce,Ee){if((!Y||!ce)&&S("cstrncpy() does not accept NULL strings."),Ee<0)Ee=y.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=y.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ce+ae]);++ae)st[Y+ae]=pe;return ae<Ee&&(st[Y+ae++]=0),ae},y.jstrToUintArray=(Y,ce=!1)=>B.utf8Encoder.encode(ce?Y+"\0":Y);const at=(Y,ce)=>{(!(Y.alloc instanceof Function)||!(Y.dealloc instanceof Function))&&S("Object is missing alloc() and/or dealloc() function(s)","required by",ce+"().")},mt=function(Y,ce,Ee,st){if(at(y,st),typeof Y!="string")return null;{const ae=B.utf8Encoder.encode(Y),pe=Ee(ae.length+1),K=fe().HEAP8U;return K.set(ae,pe),K[pe+ae.length]=0,ce?[pe,ae.length]:pe}};y.allocCString=(Y,ce=!1)=>mt(Y,ce,y.alloc,"allocCString()"),y.scopedAllocPush=function(){at(y,"scopedAllocPush");const Y=[];return B.scopedAlloc.push(Y),Y},y.scopedAllocPop=function(Y){at(y,"scopedAllocPop");const ce=arguments.length?B.scopedAlloc.indexOf(Y):B.scopedAlloc.length-1;ce<0&&S("Invalid state object for scopedAllocPop()."),arguments.length===0&&(Y=B.scopedAlloc[ce]),B.scopedAlloc.splice(ce,1);for(let Ee;Ee=Y.pop();)y.functionEntry(Ee)?y.uninstallFunction(Ee):y.dealloc(Ee)},y.scopedAlloc=function(Y){B.scopedAlloc.length||S("No scopedAllocPush() scope is active.");const ce=y.alloc(Y);return B.scopedAlloc[B.scopedAlloc.length-1].push(ce),ce},Object.defineProperty(y.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>B.scopedAlloc.length,set:()=>S("The 'active' property is read-only.")}),y.scopedAllocCString=(Y,ce=!1)=>mt(Y,ce,y.scopedAlloc,"scopedAllocCString()");const Be=function(Y,ce){const Ee=y[Y?"scopedAlloc":"alloc"]((ce.length+1)*y.ptrSizeof);let st=0;return ce.forEach(ae=>{y.pokePtr(Ee+y.ptrSizeof*st++,y[Y?"scopedAllocCString":"allocCString"](""+ae))}),y.pokePtr(Ee+y.ptrSizeof*st,0),Ee};y.scopedAllocMainArgv=Y=>Be(!0,Y),y.allocMainArgv=Y=>Be(!1,Y),y.cArgvToJs=(Y,ce)=>{const Ee=[];for(let st=0;st<Y;++st){const ae=y.peekPtr(ce+y.ptrSizeof*st);Ee.push(ae?y.cstrToJs(ae):null)}return Ee},y.scopedAllocCall=function(Y){y.scopedAllocPush();try{return Y()}finally{y.scopedAllocPop()}};const je=function(Y,ce,Ee){at(y,Ee);const st=ce?"i64":E;let ae=y[Ee](Y*(ce?8:C));if(y.poke(ae,0,st),Y===1)return ae;const pe=[ae];for(let K=1;K<Y;++K)ae+=ce?8:C,pe[K]=ae,y.poke(ae,0,st);return pe};y.allocPtr=(Y=1,ce=!0)=>je(Y,ce,"alloc"),y.scopedAllocPtr=(Y=1,ce=!0)=>je(Y,ce,"scopedAlloc"),y.xGet=function(Y){return y.exports[Y]||S("Cannot find exported symbol:",Y)};const et=(Y,ce)=>S(Y+"() requires",ce,"argument(s).");y.xCall=function(Y,...ce){const Ee=Y instanceof Function?Y:y.xGet(Y);return Ee instanceof Function||S("Exported symbol",Y,"is not a function."),Ee.length!==ce.length&&et(Ee===Y?Ee.name:Y,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ce)},B.xWrap=Object.create(null),B.xWrap.convert=Object.create(null),B.xWrap.convert.arg=new Map,B.xWrap.convert.result=new Map;const ve=B.xWrap.convert.arg,Ie=B.xWrap.convert.result;y.bigIntEnabled&&ve.set("i64",Y=>BigInt(Y));const Te=E==="i32"?Y=>Y|0:Y=>BigInt(Y)|BigInt(0);ve.set("i32",Te).set("i16",Y=>(Y|0)&65535).set("i8",Y=>(Y|0)&255).set("f32",Y=>Number(Y).valueOf()).set("float",ve.get("f32")).set("f64",ve.get("f32")).set("double",ve.get("f64")).set("int",ve.get("i32")).set("null",Y=>Y).set(null,ve.get("null")).set("**",Te).set("*",Te),Ie.set("*",Te).set("pointer",Te).set("number",Y=>Number(Y)).set("void",Y=>{}).set("null",Y=>Y).set(null,Ie.get("null"));{const Y=["i8","i16","i32","int","f32","float","f64","double"];y.bigIntEnabled&&Y.push("i64");const ce=ve.get(E);for(const Ee of Y)ve.set(Ee+"*",ce),Ie.set(Ee+"*",ce),Ie.set(Ee,ve.get(Ee)||S("Missing arg converter:",Ee))}const Ze=function(Y){return typeof Y=="string"?y.scopedAllocCString(Y):Y?Te(Y):null};ve.set("string",Ze).set("utf8",Ze).set("pointer",Ze),Ie.set("string",Y=>y.cstrToJs(Y)).set("utf8",Ie.get("string")).set("string:dealloc",Y=>{try{return Y?y.cstrToJs(Y):null}finally{y.dealloc(Y)}}).set("utf8:dealloc",Ie.get("string:dealloc")).set("json",Y=>JSON.parse(y.cstrToJs(Y))).set("json:dealloc",Y=>{try{return Y?JSON.parse(y.cstrToJs(Y)):null}finally{y.dealloc(Y)}});const Ge=class{constructor(Y){this.name=Y.name||"unnamed adapter"}convertArg(Y,ce,Ee){S("AbstractArgAdapter must be subclassed.")}};ve.FuncPtrAdapter=class ja extends Ge{constructor(ce){super(ce),ve.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ce),this.name=ce.name||"unnamed",this.signature=ce.signature,ce.contextKey instanceof Function&&(this.contextKey=ce.contextKey,ce.bindScope||(ce.bindScope="context")),this.bindScope=ce.bindScope||S("FuncPtrAdapter options requires a bindScope (explicit or implied)."),ja.bindScopes.indexOf(ce.bindScope)<0&&S("Invalid options.bindScope ("+ce.bindMod+") for FuncPtrAdapter. Expecting one of: ("+ja.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ce.callProxy instanceof Function?ce.callProxy:void 0}contextKey(ce,Ee){return this}contextMap(ce){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ce);return st===void 0&&Ee.set(ce,st=[]),st}convertArg(ce,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ce)return ae[1];if(ce instanceof Function){this.callProxy&&(ce=this.callProxy(ce));const pe=me(ce,this.signature,this.isTransient);if(ja.debugFuncInstall&&ja.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ce),ae){if(ae[1]){ja.debugFuncInstall&&ja.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{B.scopedAlloc[B.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ce,ae[1]=pe}return pe}else if(y.isPtr(ce)||ce===null||ce===void 0){if(ae&&ae[1]&&ae[1]!==ce){ja.debugFuncInstall&&ja.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{B.scopedAlloc[B.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ce|0}return ce||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ve.FuncPtrAdapter.warnOnUse=!1,ve.FuncPtrAdapter.debugFuncInstall=!1,ve.FuncPtrAdapter.debugOut=console.debug.bind(console),ve.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Re=Y=>ve.get(Y)||S("Argument adapter not found:",Y),Ke=Y=>Ie.get(Y)||S("Result adapter not found:",Y);B.xWrap.convertArg=(Y,...ce)=>Re(Y)(...ce),B.xWrap.convertArgNoCheck=(Y,...ce)=>ve.get(Y)(...ce),B.xWrap.convertResult=(Y,ce)=>Y===null?ce:Y?Ke(Y)(ce):void 0,B.xWrap.convertResultNoCheck=(Y,ce)=>Y===null?ce:Y?Ie.get(Y)(ce):void 0,y.xWrap=function(Y,ce,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),y.isPtr(Y)&&(Y=y.functionEntry(Y)||S("Function pointer not found in WASM function table."));const st=Y instanceof Function,ae=st?Y:y.xGet(Y);if(st&&(Y=ae.name||"unnamed function"),Ee.length!==ae.length&&et(Y,ae.length),ce===null&&ae.length===0)return ae;ce!=null&&Ke(ce);for(const K of Ee)K instanceof Ge?ve.set(K,(...re)=>K.convertArg(...re)):Re(K);const pe=B.xWrap;return ae.length===0?(...K)=>K.length?et(Y,ae.length):pe.convertResult(ce,ae.call(null)):function(...K){K.length!==ae.length&&et(Y,ae.length);const re=y.scopedAllocPush();try{let ie=0;for(;ie<K.length;++ie)K[ie]=pe.convertArgNoCheck(Ee[ie],K[ie],K,ie);return pe.convertResultNoCheck(ce,ae.apply(null,K))}finally{y.scopedAllocPop(re)}}};const St=function(Y,ce,Ee,st,ae,pe){if(typeof Ee=="string"){if(ce===1)return pe.get(Ee);if(ce===2){if(st)st instanceof Function||S(ae,"requires a function argument.");else return delete pe.get(Ee),Y;return pe.set(Ee,st),Y}}S("Invalid arguments to",ae)};return y.xWrap.resultAdapter=function Y(ce,Ee){return St(Y,arguments.length,ce,Ee,"resultAdapter()",Ie)},y.xWrap.argAdapter=function Y(ce,Ee){return St(Y,arguments.length,ce,Ee,"argAdapter()",ve)},y.xWrap.FuncPtrAdapter=ve.FuncPtrAdapter,y.xCallWrapped=function(Y,ce,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),y.xWrap(Y,ce,Ee||[]).apply(null,st||[])},y.xWrap.testConvertArg=B.xWrap.convertArg,y.xWrap.testConvertResult=B.xWrap.convertResult,y},globalThis.WhWasmUtilInstaller.yawl=function(y){const S=()=>fetch(y.uri,{credentials:"same-origin"}),E=this,C=function(fe){if(y.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Qe=y.wasmUtilTarget;if(Qe.module=fe.module,Qe.instance=fe.instance,Qe.instance.exports.memory||(Qe.memory=y.imports&&y.imports.env&&y.imports.env.memory||me("Missing 'memory' object!")),!Qe.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Qe.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Qe.dealloc=function(at){tt.free(at)}}E(Qe)}return y.onload&&y.onload(fe,y),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(S(),y.imports||{}).then(C)}:function(){return S().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,y.imports||{})).then(C)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function y(S){const E=(...We)=>{throw new Error(We.join(" "))};!(S.heap instanceof WebAssembly.Memory)&&!(S.heap instanceof Function)&&E("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){S[We]instanceof Function||E("Config option '"+We+"' must be a function.")});const C=y,B=S.heap instanceof Function?S.heap:()=>new Uint8Array(S.heap.buffer),fe=S.alloc,me=S.dealloc,Qe=S.log||console.log.bind(console),tt=S.memberPrefix||"",at=S.memberSuffix||"",mt=S.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!S.bigIntEnabled,Be=globalThis.BigInt,je=globalThis.BigInt64Array,et=S.ptrSizeof||4,ve=S.ptrIR||"i32";C.debugFlags||(C.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const bt=function wt(kt){return arguments.length===0?wt.__flags:(kt<0?(delete wt.__flags.getter,delete wt.__flags.setter,delete wt.__flags.alloc,delete wt.__flags.dealloc):(wt.__flags.getter=(1&kt)!==0,wt.__flags.setter=(2&kt)!==0,wt.__flags.alloc=(4&kt)!==0,wt.__flags.dealloc=(8&kt)!==0),wt._flags)};return Object.defineProperty(bt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||bt(0),bt},C.debugFlags=C.__makeDebugFlags());const Ie=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Ze=We=>We==="P",Ge=We=>Te(We)?"p":We[0],Re=function(We){switch(Ge(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ve;case"j":return"i64";case"f":return"float";case"d":return"double"}E("Unhandled signature IR:",We)},Ke=je?()=>!0:()=>E("BigInt64Array is not available."),St=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Ke()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Ke()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}E("Unhandled DataView getter for signature:",We)},Y=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Ke()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Ke()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}E("Unhandled DataView setter for signature:",We)},ce=function(We){switch(Ge(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Ke()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Ke()&&Be}break}E("Unhandled DataView set wrapper for signature:",We)},Ee=(We,bt)=>We+"::"+bt,st=function(We,bt){return()=>E(Ee(We,bt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",K=function(We,bt,wt){if(wt||(wt=ae.get(bt)),wt){if(ae.delete(bt),Array.isArray(bt.ondispose)){let kt;for(;kt=bt.ondispose.shift();)try{kt instanceof Function?kt.call(bt):kt instanceof Bt?kt.dispose():typeof kt=="number"&&me(kt)}catch(yn){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",yn)}}else if(bt.ondispose instanceof Function)try{bt.ondispose()}catch(kt){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",kt)}delete bt.ondispose,We.debugFlags.__flags.dealloc&&Qe("debug.dealloc:",bt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),bt[pe]||me(wt)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),ie=function(We,bt,wt){let kt=!wt;wt?Object.defineProperty(bt,pe,re(wt)):(wt=fe(We.structInfo.sizeof),wt||E("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Qe("debug.alloc:",kt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),kt&&B().fill(0,wt,wt+We.structInfo.sizeof),ae.set(bt,wt)}catch(yn){throw K(We,bt,wt),yn}},Le=function(){const We=this.pointer;return We?new Uint8Array(B().slice(We,We+this.structInfo.sizeof)):null},Rt=re(We=>tt+We+at),Wt=function(We,bt,wt=!0){let kt=We.members[bt];if(!kt&&(tt||at)){for(const yn of Object.values(We.members))if(yn.key===bt){kt=yn;break}!kt&&wt&&E(Ee(We.name,bt),"is not a mapped struct member.")}return kt},Zt=function We(bt,wt,kt=!1){We._||(We._=Qn=>Qn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const yn=Wt(bt.structInfo,wt,!0);return kt?We._(yn.signature):yn.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>E("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const bt of Object.keys(this.structInfo.members))We.push(this.memberKey(bt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Dt=function(We,bt,wt){return Pe.decode(We.buffer instanceof pt?We.slice(bt,wt):We.subarray(bt,wt))},Yt=function(We,bt,wt=!1){const kt=Wt(We.structInfo,bt,wt);return kt&&kt.signature.length===1&&kt.signature[0]==="s"?kt:!1},qe=function(We){We.signature!=="s"&&E("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(bt,wt){const kt=Wt(bt.structInfo,wt,!0);qe(kt);const yn=bt[kt.key];if(!yn)return null;let Qn=yn;const zn=B();for(;zn[Qn]!==0;++Qn);return yn===Qn?"":Dt(zn,yn,Qn)},dt=function(We,...bt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...bt)},Nt=function(We){const bt=ot.encode(We),wt=fe(bt.length+1);wt||E("Allocation error while duplicating string:",We);const kt=B();return kt.set(bt,wt),kt[wt+bt.length]=0,wt},xt=function(We,bt,wt){const kt=Wt(We.structInfo,bt,!0);qe(kt);const yn=Nt(wt);return We[kt.key]=yn,dt(We,yn),We},Bt=function(bt,wt){arguments[2]!==re&&E("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(bt),structInfo:re(wt)})};Bt.prototype=Object.create(null,{dispose:re(function(){K(this.constructor,this)}),lookupMember:re(function(We,bt=!0){return Wt(this.structInfo,We,bt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,bt=!0){return Yt(this,We,bt)}),memberKey:Rt,memberKeys:_e,memberSignature:re(function(We,bt=!1){return Zt(this,We,bt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,bt){return xt(this,We,bt)})}),Object.assign(Bt.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(Bt,{allocCString:re(Nt),isA:re(We=>We instanceof Bt),hasExternalPointer:re(We=>We instanceof Bt&&!!We[pe]),memberKey:Rt});const mn=We=>Number.isFinite(We)||We instanceof(Be||Number),Ot=function We(bt,wt,kt){if(!We._){We._={getters:{},setters:{},sw:{}};const li=["i","c","C","p","P","s","f","d","v()"];mt&&li.push("j"),li.forEach(function(Vs){We._.getters[Vs]=St(Vs),We._.setters[Vs]=Y(Vs),We._.sw[Vs]=ce(Vs)});const dx=/^[ipPsjfdcC]$/,fx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Vs,px,Dm,Lf){Object.prototype.hasOwnProperty.call(Vs,Dm)&&E(Vs.structName,"already has a property named",Dm+"."),dx.test(Lf)||fx.test(Lf)||E("Malformed signature for",Ee(Vs.structName,px)+":",Lf)}}const yn=bt.memberKey(wt);We.sigCheck(bt.prototype,wt,yn,kt.signature),kt.key=yn,kt.name=wt;const Qn=Ge(kt.signature),zn=Ee(bt.prototype.structName,yn),Hn=bt.prototype.debugFlags.__flags,ma=Object.create(null);ma.configurable=!1,ma.enumerable=!1,ma.get=function(){Hn.getter&&Qe("debug.getter:",We._.getters[Qn],"for",Re(Qn),zn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof);let li=new DataView(B().buffer,this.pointer+kt.offset,kt.sizeof)[We._.getters[Qn]](0,Ie);return Hn.getter&&Qe("debug.getter:",zn,"result =",li),li},kt.readOnly?ma.set=st(bt.prototype.structName,yn):ma.set=function(li){if(Hn.setter&&Qe("debug.setter:",We._.setters[Qn],"for",Re(Qn),zn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof,li),this.pointer||E("Cannot set struct property on disposed instance."),li===null)li=0;else for(;!mn(li);){if(Ze(kt.signature)&&li instanceof Bt){li=li.pointer||0,Hn.setter&&Qe("debug.setter:",zn,"resolved to",li);break}E("Invalid value for pointer-type",zn+".")}new DataView(B().buffer,this.pointer+kt.offset,kt.sizeof)[We._.setters[Qn]](0,We._.sw[Qn](li),Ie)},Object.defineProperty(bt.prototype,yn,ma)},Sr=function We(bt,wt){arguments.length===1?(wt=bt,bt=wt.name):wt.name||(wt.name=bt),bt||E("Struct name is required.");let kt=!1;Object.keys(wt.members).forEach(zn=>{const Hn=wt.members[zn];Hn.sizeof?Hn.sizeof===1?Hn.signature==="c"||Hn.signature==="C"||E("Unexpected sizeof==1 member",Ee(wt.name,zn),"with signature",Hn.signature):(Hn.sizeof%4!==0&&(console.warn("Invalid struct member description =",Hn,"from",wt),E(bt,"member",zn,"sizeof is not aligned. sizeof="+Hn.sizeof)),Hn.offset%4!==0&&(console.warn("Invalid struct member description =",Hn,"from",wt),E(bt,"member",zn,"offset is not aligned. offset="+Hn.offset))):E(bt,"member",zn,"is missing sizeof."),(!kt||kt.offset<Hn.offset)&&(kt=Hn)}),kt?wt.sizeof<kt.offset+kt.sizeof&&E("Invalid struct config:",bt,"max member offset ("+kt.offset+") ","extends past end of struct (sizeof="+wt.sizeof+")."):E("No member property descriptions found.");const yn=re(C.__makeDebugFlags(We.debugFlags)),Qn=function zn(Hn){this instanceof zn?arguments.length?((Hn!==(Hn|0)||Hn<=0)&&E("Invalid pointer value for",bt,"constructor."),ie(zn,this,Hn)):ie(zn,this):E("The",bt,"constructor may only be called via 'new'.")};return Object.defineProperties(Qn,{debugFlags:yn,isA:re(zn=>zn instanceof Qn),memberKey:Rt,memberKeys:_e,methodInfoForKey:re(function(zn){}),structInfo:re(wt),structName:re(bt)}),Qn.prototype=new Bt(bt,wt,re),Object.defineProperties(Qn.prototype,{debugFlags:yn,constructor:re(Qn)}),Object.keys(wt.members).forEach(zn=>Ot(Qn,zn,wt.members[zn])),Qn};return Sr.StructType=Bt,Sr.config=S,Sr.allocCString=Nt,Sr.debugFlags||(Sr.debugFlags=C.__makeDebugFlags(C.debugFlags)),Sr},globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ve)=>{throw new Error(ve.join(" "))};y.SQLite3Error.toss;const E=y.capi,C=y.wasm,B=y.util;if(globalThis.WhWasmUtilInstaller(C),delete globalThis.WhWasmUtilInstaller,C.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ve,Ie)=>ve[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new C.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ve=>{let Ie;return(Te,Ze,Ge,Re)=>{try{const Ke=C.cArgvToJs(Ze,Ge);return Ie||(Ie=C.cArgvToJs(Ze,Re)),ve(Ke,Ie)|0}catch(Ke){return Ke.resultCode||E.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ve=>ve[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new C.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ve,Ie)=>ve[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new C.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ve,Ie)=>ve[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],C.exports.sqlite3_progress_handler&&C.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new C.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ve,Ie)=>ve[0]}),"*"]]),C.exports.sqlite3_stmt_explain&&C.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),C.exports.sqlite3_set_authorizer&&C.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ve,Ie)=>ve[0],callProxy:ve=>(Ie,Te,Ze,Ge,Re,Ke)=>{try{return Ze=Ze&&C.cstrToJs(Ze),Ge=Ge&&C.cstrToJs(Ge),Re=Re&&C.cstrToJs(Re),Ke=Ke&&C.cstrToJs(Ke),ve(Ie,Te,Ze,Ge,Re,Ke)||0}catch(St){return St.resultCode||E.SQLITE_ERROR}}}),"*"]]),C.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ve=>ve[0],callProxy:ve=>(Ie,Te,Ze,Ge,Re)=>{ve(Ie,Te,C.cstrToJs(Ze),C.cstrToJs(Ge),Re)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],C.bigIntEnabled&&C.exports.sqlite3_declare_vtab&&C.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),C.bigIntEnabled&&C.exports.sqlite3_preupdate_hook&&C.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ve=>ve[0],callProxy:ve=>(Ie,Te,Ze,Ge,Re,Ke,St)=>{ve(Ie,Te,Ze,C.cstrToJs(Ge),C.cstrToJs(Re),Ke,St)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),C.bigIntEnabled&&C.exports.sqlite3changegroup_add&&C.exports.sqlite3session_create&&C.exports.sqlite3_preupdate_hook){const ve={signature:"i(ps)",callProxy:Ie=>(Te,Ze)=>{try{return Ie(Te,C.cstrToJs(Ze))|0}catch(Ge){return Ge.resultCode||E.SQLITE_ERROR}}};C.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ve}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new C.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xFilter",...ve,contextKey:(Ie,Te)=>Ie[0]}),"*"]])}C.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],y.StructBinder=globalThis.Jaccwabyt({heap:C.heap8u,alloc:C.alloc,dealloc:C.dealloc,bigIntEnabled:C.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ve=C.xWrap.argAdapter("string");C.xWrap.argAdapter("string:flexible",Re=>ve(B.flexibleString(Re))),C.xWrap.argAdapter("string:static",function(Re){return C.isPtr(Re)?Re:(Re=""+Re,this[Re]||(this[Re]=C.allocCString(Re)))}.bind(Object.create(null)));const Ie=C.xWrap.argAdapter("*"),Te=function(){};C.xWrap.argAdapter("sqlite3_filename",Ie)("sqlite3_context*",Ie)("sqlite3_value*",Ie)("void*",Ie)("sqlite3_changegroup*",Ie)("sqlite3_changeset_iter*",Ie)("sqlite3_session*",Ie)("sqlite3_stmt*",Re=>Ie(Re instanceof(y?.oo1?.Stmt||Te)?Re.pointer:Re))("sqlite3*",Re=>Ie(Re instanceof(y?.oo1?.DB||Te)?Re.pointer:Re))("sqlite3_vfs*",Re=>typeof Re=="string"?E.sqlite3_vfs_find(Re)||y.SQLite3Error.toss(E.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",Re):Ie(Re instanceof(E.sqlite3_vfs||Te)?Re.pointer:Re)),C.exports.sqlite3_declare_vtab&&C.xWrap.argAdapter("sqlite3_index_info*",Re=>Ie(Re instanceof(E.sqlite3_index_info||Te)?Re.pointer:Re))("sqlite3_module*",Re=>Ie(Re instanceof(E.sqlite3_module||Te)?Re.pointer:Re));const Ze=C.xWrap.resultAdapter("*");C.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),C.exports.sqlite3_step.length===0&&(C.xWrap.doArgcCheck=!1,y.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const Re of C.bindingSignatures)E[Re[0]]=C.xWrap.apply(null,Re);for(const Re of C.bindingSignatures.wasmInternal)B[Re[0]]=C.xWrap.apply(null,Re);const Ge=function(Re){return()=>S(Re+"() is unavailable due to lack","of BigInt support in this build.")};for(const Re of C.bindingSignatures.int64)E[Re[0]]=C.bigIntEnabled?C.xWrap.apply(null,Re):Ge(Re[0]);if(delete C.bindingSignatures,C.exports.sqlite3__wasm_db_error){const Re=C.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");B.sqlite3__wasm_db_error=function(Ke,St,Y){return St instanceof y.WasmAllocError?(St=E.SQLITE_NOMEM,Y=0):St instanceof Error&&(Y=Y||""+St,St=St.resultCode||E.SQLITE_ERROR),Ke?Re(Ke,St,Y):St}}else B.sqlite3__wasm_db_error=function(Re,Ke,St){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Ke}}{const ve=C.xCall("sqlite3__wasm_enum_json");ve||S("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),C.ctype=JSON.parse(C.cstrToJs(ve));const Ie=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];C.bigIntEnabled&&Ie.push("serialize","session","vtab");for(const Ge of Ie)for(const Re of Object.entries(C.ctype[Ge]))E[Re[0]]=Re[1];C.functionEntry(E.SQLITE_WASM_DEALLOC)||S("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+E.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Ge of["resultCodes"])for(const Re of Object.entries(C.ctype[Ge]))Te[Re[1]]=Re[0];E.sqlite3_js_rc_str=Ge=>Te[Ge];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!B.isUIThread(),sqlite3_index_info:!C.bigIntEnabled,sqlite3_index_constraint:!C.bigIntEnabled,sqlite3_index_orderby:!C.bigIntEnabled,sqlite3_index_constraint_usage:!C.bigIntEnabled});for(const Ge of C.ctype.structs)Ze[Ge.name]||(E[Ge.name]=y.StructBinder(Ge));if(E.sqlite3_index_info){for(const Ge of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])E.sqlite3_index_info[Ge]=E[Ge],delete E[Ge];E.sqlite3_vtab_config=C.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(ve,Ie,Te)=>B.sqlite3__wasm_db_error(ve,E.SQLITE_MISUSE,Ie+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=ve=>B.sqlite3__wasm_db_error(ve,E.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Qe=ve=>C.xWrap.argAdapter("sqlite3*")(ve),tt=ve=>C.isPtr(ve)?C.cstrToJs(ve):ve,at=function(ve,Ie){ve=Qe(ve);let Te=this.dbMap.get(ve);if(Ie)!Te&&Ie>0&&this.dbMap.set(ve,Te=Object.create(null));else return this.dbMap.delete(ve),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(ve,Ie){const Te=at(ve,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(Ie).toLowerCase())},at._addUDF=function(ve,Ie,Te,Ze){Ie=tt(Ie).toLowerCase();let Ge=Ze.get(Ie);Ge||Ze.set(Ie,Ge=new Set),Ge.add(Te<0?-1:Te)},at.addFunction=function(ve,Ie,Te){const Ze=at(ve,1);Ze.udf||(Ze.udf=new Map),this._addUDF(ve,Ie,Te,Ze.udf)},C.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(ve,Ie,Te){const Ze=at(ve,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(ve,Ie,Te,Ze.wudf)}),at.cleanup=function(ve){ve=Qe(ve);const Ie=[ve];for(const Ge of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const Re=C.exports[Ge];if(Re){Ie.length=Re.length;try{E[Ge](...Ie)}catch(Ke){y.config.warn("close-time call of",Ge+"(",Ie,") threw:",Ke)}}}const Te=at(ve,0);if(!Te)return;if(Te.collation){for(const Ge of Te.collation)try{E.sqlite3_create_collation_v2(ve,Ge,E.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Ge=Ze?Te.wudf:Te.udf;if(!Ge)continue;const Re=Ze?E.sqlite3_create_window_function:E.sqlite3_create_function_v2;for(const Ke of Ge){const St=Ke[0],Y=Ke[1],ce=[ve,St,0,E.SQLITE_UTF8,0,0,0,0,0];Ze&&ce.push(0);for(const Ee of Y)try{ce[2]=Ee,Re.apply(null,ce)}catch{}Y.clear()}Ge.clear()}delete Te.udf,delete Te.wudf};{const ve=C.xWrap("sqlite3_close_v2","int","sqlite3*");E.sqlite3_close_v2=function(Ie){if(arguments.length!==1)return fe(Ie,"sqlite3_close_v2",1);if(Ie)try{at.cleanup(Ie)}catch{}return ve(Ie)}}if(E.sqlite3session_create){const ve=C.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);E.sqlite3session_delete=function(Ie){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);Ie&&E.sqlite3session_table_filter(Ie,0,0),ve(Ie)}}{const ve=(Te,Ze)=>"argv["+Ze+"]:"+Te[0]+":"+C.cstrToJs(Te[1]).toLowerCase(),Ie=C.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new C.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ve}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ve})]);E.sqlite3_create_collation_v2=function(Te,Ze,Ge,Re,Ke,St){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Ge&15))Ge|=E.SQLITE_UTF8;else if(E.SQLITE_UTF8!==(Ge&15))return me(Te);try{const Y=Ie(Te,Ze,Ge,Re,Ke,St);return Y===0&&Ke instanceof Function&&at.addCollation(Te,Ze),Y}catch(Y){return B.sqlite3__wasm_db_error(Te,Y)}},E.sqlite3_create_collation=(Te,Ze,Ge,Re,Ke)=>arguments.length===5?E.sqlite3_create_collation_v2(Te,Ze,Ge,Re,Ke,0):fe(Te,"sqlite3_create_collation",5)}{const ve=function(Ge,Re){return Ge[0]+":"+(Ge[2]<0?-1:Ge[2])+":"+Re+":"+C.cstrToJs(Ge[1]).toLowerCase()},Ie=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(Re,Ke,St)=>{try{Ge(Re,...E.sqlite3_values_to_js(Ke,St))}catch(Y){E.sqlite3_result_error_js(Re,Y)}}},xFinalAndValue:{signature:"v(p)",contextKey:ve,callProxy:Ge=>Re=>{try{E.sqlite3_result_js(Re,Ge(Re))}catch(Ke){E.sqlite3_result_error_js(Re,Ke)}}},xFunc:{signature:"v(pip)",contextKey:ve,callProxy:Ge=>(Re,Ke,St)=>{try{E.sqlite3_result_js(Re,Ge(Re,...E.sqlite3_values_to_js(Ke,St)))}catch(Y){E.sqlite3_result_error_js(Re,Y)}}},xDestroy:{signature:"v(p)",contextKey:ve,callProxy:Ge=>Re=>{try{Ge(Re)}catch(Ke){console.error("UDF xDestroy method threw:",Ke)}}}}),Te=C.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new C.xWrap.FuncPtrAdapter({name:"xFunc",...Ie.xFunc}),new C.xWrap.FuncPtrAdapter({name:"xStep",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xFinal",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",...Ie.xDestroy})]),Ze=C.exports.sqlite3_create_window_function?C.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new C.xWrap.FuncPtrAdapter({name:"xStep",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xFinal",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xValue",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xInverse",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",...Ie.xDestroy})]):void 0;E.sqlite3_create_function_v2=function Ge(Re,Ke,St,Y,ce,Ee,st,ae,pe){if(Ge.length!==arguments.length)return fe(Re,"sqlite3_create_function_v2",Ge.length);if(!(Y&15))Y|=E.SQLITE_UTF8;else if(E.SQLITE_UTF8!==(Y&15))return me(Re);try{const K=Te(Re,Ke,St,Y,ce,Ee,st,ae,pe);return K===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(Re,Ke,St),K}catch(K){return console.error("sqlite3_create_function_v2() setup threw:",K),B.sqlite3__wasm_db_error(Re,K,"Creation of UDF threw: "+K)}},E.sqlite3_create_function=function Ge(Re,Ke,St,Y,ce,Ee,st,ae){return Ge.length===arguments.length?E.sqlite3_create_function_v2(Re,Ke,St,Y,ce,Ee,st,ae,0):fe(Re,"sqlite3_create_function",Ge.length)},Ze?E.sqlite3_create_window_function=function Ge(Re,Ke,St,Y,ce,Ee,st,ae,pe,K){if(Ge.length!==arguments.length)return fe(Re,"sqlite3_create_window_function",Ge.length);if(!(Y&15))Y|=E.SQLITE_UTF8;else if(E.SQLITE_UTF8!==(Y&15))return me(Re);try{const re=Ze(Re,Ke,St,Y,ce,Ee,st,ae,pe,K);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||K instanceof Function)&&at.addWindowFunc(Re,Ke,St),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),B.sqlite3__wasm_db_error(Re,re,"Creation of UDF threw: "+re)}}:delete E.sqlite3_create_window_function,E.sqlite3_create_function_v2.udfSetResult=E.sqlite3_create_function.udfSetResult=E.sqlite3_result_js,E.sqlite3_create_window_function&&(E.sqlite3_create_window_function.udfSetResult=E.sqlite3_result_js),E.sqlite3_create_function_v2.udfConvertArgs=E.sqlite3_create_function.udfConvertArgs=E.sqlite3_values_to_js,E.sqlite3_create_window_function&&(E.sqlite3_create_window_function.udfConvertArgs=E.sqlite3_values_to_js),E.sqlite3_create_function_v2.udfSetError=E.sqlite3_create_function.udfSetError=E.sqlite3_result_error_js,E.sqlite3_create_window_function&&(E.sqlite3_create_window_function.udfSetError=E.sqlite3_result_error_js)}{const ve=(Te,Ze)=>(typeof Te=="string"?Ze=-1:B.isSQLableTypedArray(Te)?(Ze=Te.byteLength,Te=B.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Ze=-1),[Te,Ze]),Ie={basic:C.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:C.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};E.sqlite3_prepare_v3=function Te(Ze,Ge,Re,Ke,St,Y){if(Te.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",Te.length);const[ce,Ee]=ve(Ge,Re);switch(typeof ce){case"string":return Ie.basic(Ze,ce,Ee,Ke,St,null);case"number":return Ie.full(Ze,ce,Ee,Ke,St,Y);default:return B.sqlite3__wasm_db_error(Ze,E.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},E.sqlite3_prepare_v2=function Te(Ze,Ge,Re,Ke,St){return Te.length===arguments.length?E.sqlite3_prepare_v3(Ze,Ge,Re,0,Ke,St):fe(Ze,"sqlite3_prepare_v2",Te.length)}}{const ve=C.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),Ie=C.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);E.sqlite3_bind_text=function Te(Ze,Ge,Re,Ke,St){if(Te.length!==arguments.length)return fe(E.sqlite3_db_handle(Ze),"sqlite3_bind_text",Te.length);if(C.isPtr(Re)||Re===null)return ve(Ze,Ge,Re,Ke,St);Re instanceof ArrayBuffer?Re=new Uint8Array(Re):Array.isArray(pMem)&&(Re=pMem.join(""));let Y,ce;try{if(B.isSQLableTypedArray(Re))Y=C.allocFromTypedArray(Re),ce=Re.byteLength;else if(typeof Re=="string")[Y,ce]=C.allocCString(Re);else return B.sqlite3__wasm_db_error(E.sqlite3_db_handle(Ze),E.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ve(Ze,Ge,Y,ce,E.SQLITE_WASM_DEALLOC)}catch(Ee){return C.dealloc(Y),B.sqlite3__wasm_db_error(E.sqlite3_db_handle(Ze),Ee)}},E.sqlite3_bind_blob=function Te(Ze,Ge,Re,Ke,St){if(Te.length!==arguments.length)return fe(E.sqlite3_db_handle(Ze),"sqlite3_bind_blob",Te.length);if(C.isPtr(Re)||Re===null)return Ie(Ze,Ge,Re,Ke,St);Re instanceof ArrayBuffer?Re=new Uint8Array(Re):Array.isArray(Re)&&(Re=Re.join(""));let Y,ce;try{if(B.isBindableTypedArray(Re))Y=C.allocFromTypedArray(Re),ce=Ke>=0?Ke:Re.byteLength;else if(typeof Re=="string")[Y,ce]=C.allocCString(Re);else return B.sqlite3__wasm_db_error(E.sqlite3_db_handle(Ze),E.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return Ie(Ze,Ge,Y,ce,E.SQLITE_WASM_DEALLOC)}catch(Ee){return C.dealloc(Y),B.sqlite3__wasm_db_error(E.sqlite3_db_handle(Ze),Ee)}}}E.sqlite3_config=function(ve,...Ie){if(arguments.length<2)return E.SQLITE_MISUSE;switch(ve){case E.SQLITE_CONFIG_COVERING_INDEX_SCAN:case E.SQLITE_CONFIG_MEMSTATUS:case E.SQLITE_CONFIG_SMALL_MALLOC:case E.SQLITE_CONFIG_SORTERREF_SIZE:case E.SQLITE_CONFIG_STMTJRNL_SPILL:case E.SQLITE_CONFIG_URI:return C.exports.sqlite3__wasm_config_i(ve,Ie[0]);case E.SQLITE_CONFIG_LOOKASIDE:return C.exports.sqlite3__wasm_config_ii(ve,Ie[0],Ie[1]);case E.SQLITE_CONFIG_MEMDB_MAXSIZE:return C.exports.sqlite3__wasm_config_j(ve,Ie[0]);case E.SQLITE_CONFIG_GETMALLOC:case E.SQLITE_CONFIG_GETMUTEX:case E.SQLITE_CONFIG_GETPCACHE2:case E.SQLITE_CONFIG_GETPCACHE:case E.SQLITE_CONFIG_HEAP:case E.SQLITE_CONFIG_LOG:case E.SQLITE_CONFIG_MALLOC:case E.SQLITE_CONFIG_MMAP_SIZE:case E.SQLITE_CONFIG_MULTITHREAD:case E.SQLITE_CONFIG_MUTEX:case E.SQLITE_CONFIG_PAGECACHE:case E.SQLITE_CONFIG_PCACHE2:case E.SQLITE_CONFIG_PCACHE:case E.SQLITE_CONFIG_PCACHE_HDRSZ:case E.SQLITE_CONFIG_PMASZ:case E.SQLITE_CONFIG_SERIALIZED:case E.SQLITE_CONFIG_SINGLETHREAD:case E.SQLITE_CONFIG_SQLLOG:case E.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return E.SQLITE_NOTFOUND}};{const ve=new Set;E.sqlite3_auto_extension=function(Ie){if(Ie instanceof Function)Ie=C.installFunction("i(ppp)",Ie);else if(arguments.length!==1||!C.isPtr(Ie))return E.SQLITE_MISUSE;const Te=C.exports.sqlite3_auto_extension(Ie);return Ie!==arguments[0]&&(Te===0?ve.add(Ie):C.uninstallFunction(Ie)),Te},E.sqlite3_cancel_auto_extension=function(Ie){return!Ie||arguments.length!==1||!C.isPtr(Ie)?0:C.exports.sqlite3_cancel_auto_extension(Ie)},E.sqlite3_reset_auto_extension=function(){C.exports.sqlite3_reset_auto_extension();for(const Ie of ve)C.uninstallFunction(Ie);ve.clear()}}const mt=E.sqlite3_vfs_find("kvvfs");if(mt)if(B.isUIThread()){const ve=new E.sqlite3_kvvfs_methods(C.exports.sqlite3__wasm_kvvfs_methods());delete E.sqlite3_kvvfs_methods;const Ie=C.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=C.pstack,Ze=Re=>C.peek(Re)===115?sessionStorage:localStorage,Ge={xRead:(Re,Ke,St,Y)=>{const ce=Te.pointer,Ee=C.scopedAllocPush();try{const st=Ie(Re,Ke);if(!st)return-3;const ae=C.cstrToJs(st),pe=Ze(Re).getItem(ae);if(!pe)return-1;const K=pe.length;if(Y<=0)return K;if(Y===1)return C.poke(St,0),K;const re=C.scopedAllocCString(pe);return Y>K+1&&(Y=K+1),C.heap8u().copyWithin(St,re,re+Y-1),C.poke(St+Y-1,0),Y-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ce),C.scopedAllocPop(Ee)}},xWrite:(Re,Ke,St)=>{const Y=Te.pointer;try{const ce=Ie(Re,Ke);if(!ce)return 1;const Ee=C.cstrToJs(ce);return Ze(Re).setItem(Ee,C.cstrToJs(St)),0}catch(ce){return console.error("kvstorageWrite()",ce),E.SQLITE_IOERR}finally{Te.restore(Y)}},xDelete:(Re,Ke)=>{const St=Te.pointer;try{const Y=Ie(Re,Ke);return Y?(Ze(Re).removeItem(C.cstrToJs(Y)),0):1}catch(Y){return console.error("kvstorageDelete()",Y),E.SQLITE_IOERR}finally{Te.restore(St)}}};for(const Re of Object.keys(Ge))ve[ve.memberKey(Re)]=C.installFunction(ve.memberSignature(Re),Ge[Re])}else E.sqlite3_vfs_unregister(mt);C.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=y.StructBinder,je=function ve(Ie,Te,Ze,Ge=ve.installMethodArgcCheck){if(Ie instanceof Be.StructType?!(Ze instanceof Function)&&!C.isPtr(Ze)&&S("Usage errror: expecting a Function or WASM pointer to one."):S("Usage error: target object is-not-a StructType."),arguments.length===1)return(Y,ce)=>ve(Ie,Y,ce,Ge);ve.argcProxy||(ve.argcProxy=function(Y,ce,Ee,st){return function(...ae){return Ee.length!==arguments.length&&S("Argument mismatch for",Y.structInfo.name+"::"+ce+": Native signature is:",st),Ee.apply(this,ae)}},ve.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((Y,ce)=>{if(typeof Y=="number")try{C.uninstallFunction(Y)}catch{}}),delete this.ondispose.__removeFuncList)});const Re=Ie.memberSignature(Te);Re.length<2&&S("Member",Te,"does not have a function pointer signature:",Re);const Ke=Ie.memberKey(Te),St=Ge&&!C.isPtr(Ze)?ve.argcProxy(Ie,Ke,Ze,Re):Ze;if(C.isPtr(St))St&&!C.functionEntry(St)&&S("Pointer",St,"is not a WASM function table entry."),Ie[Ke]=St;else{const Y=C.installFunction(St,Ie.memberSignature(Te,!0));Ie[Ke]=Y,(!Ie.ondispose||!Ie.ondispose.__removeFuncList)&&(Ie.addOnDispose("ondispose.__removeFuncList handler",ve.removeFuncList),Ie.ondispose.__removeFuncList=[]),Ie.ondispose.__removeFuncList.push(Ke,Y)}return(Y,ce)=>ve(Ie,Y,ce,Ge)};je.installMethodArgcCheck=!1;const et=function(ve,Ie,Te=je.installMethodArgcCheck){const Ze=new Map;for(const Ge of Object.keys(Ie)){const Re=Ie[Ge],Ke=Ze.get(Re);if(Ke){const St=ve.memberKey(Ge);ve[St]=ve[ve.memberKey(Ke)]}else je(ve,Ge,Re,Te),Ze.set(Re,Ge)}return ve};Be.StructType.prototype.installMethod=function(Ie,Te,Ze=je.installMethodArgcCheck){return arguments.length<3&&Ie&&typeof Ie=="object"?et(this,...arguments):je(this,...arguments)},Be.StructType.prototype.installMethods=function(ve,Ie=je.installMethodArgcCheck){return et(this,ve,Ie)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){y.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ae)=>{throw new y.SQLite3Error(...ae)},E=y.capi,C=y.wasm,B=y.util,fe=new WeakMap,me=new WeakMap,Qe=(ae,pe,K)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:K},tt=function(ae,pe){return pe&&(ae instanceof je&&(ae=ae.pointer),S(pe,"sqlite3 result code",pe+":",ae?E.sqlite3_errmsg(ae):E.sqlite3_errstr(pe))),arguments[0]},at=C.installFunction("i(ippp)",function(ae,pe,K,re){E.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",C.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>S("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const K=ae.normalizeArgs(...pe);let re=K.filename,ie=K.vfs,Le=K.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||ie&&typeof ie!="string"&&typeof ie!="number")&&(y.config.error("Invalid DB ctor args",K,arguments),S("Invalid arguments for DB constructor."));let it=typeof re=="number"?C.cstrToJs(re):re;const Rt=ae._name2vfs[it];Rt&&(ie=Rt.vfs,re=it=Rt.filename(it));let Wt,Zt=0;Le.indexOf("c")>=0&&(Zt|=E.SQLITE_OPEN_CREATE|E.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(Zt|=E.SQLITE_OPEN_READWRITE),Zt===0&&(Zt|=E.SQLITE_OPEN_READONLY),Zt|=E.SQLITE_OPEN_EXRESCODE;const lt=C.pstack.pointer;try{const _e=C.pstack.allocPtr();let Pe=E.sqlite3_open_v2(re,_e,Zt,ie||0);Wt=C.peekPtr(_e),tt(Wt,Pe),E.sqlite3_extended_result_codes(Wt,1),Le.indexOf("t")>=0&&E.sqlite3_trace_v2(Wt,E.SQLITE_TRACE_STMT,at,Wt)}catch(_e){throw Wt&&E.sqlite3_close_v2(Wt),_e}finally{C.pstack.restore(lt)}this.filename=it,fe.set(this,Wt),me.set(this,Object.create(null));try{const _e=E.sqlite3_js_db_vfs(Wt)||S("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,y):tt(Wt,E.sqlite3_exec(Wt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||S("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",K=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=K),re};const je=function(...ae){Be.apply(this,ae)};je.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,C.bigIntEnabled&&(et.bigint=et.number);const ve=function(){et!==arguments[2]&&S(E.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=E.sqlite3_bind_parameter_count(this.pointer)},Ie=function(ae){return ae.pointer||S("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&S("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const K=Object.create(null);switch(K.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||B.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?K.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(K.opt=pe[0],K.sql=K.opt.sql);break;case 2:K.sql=pe[0],K.opt=pe[1];break;default:S("Invalid argument count for exec().")}K.sql=B.flexibleString(K.sql),typeof K.sql!="string"&&S("Missing SQL argument or unsupported SQL value type.");const re=K.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),K.returnVal=()=>re.saveSql;break;case void 0:case"this":K.returnVal=()=>ae;break;default:S("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":K.cbArg=(ie,Le)=>{Le.columnNames||(Le.columnNames=ie.getColumnNames([]));const it=ie.get([]),Rt=Object.create(null);for(const Wt in Le.columnNames)Rt[Le.columnNames[Wt]]=it[Wt];return Rt};break;case"array":K.cbArg=ie=>ie.get([]);break;case"stmt":Array.isArray(re.resultRows)&&S("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),K.cbArg=ie=>ie;break;default:if(B.isInt32(re.rowMode)){K.cbArg=ie=>ie.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const ie=re.rowMode.substr(1);K.cbArg=Le=>{const it=Le.get(Object.create(null))[ie];return it===void 0?S(E.SQLITE_NOTFOUND,"exec(): unknown result column:",ie):it};break}S("Invalid rowMode:",re.rowMode)}return K},Ge=(ae,pe,K,...re)=>{const ie=ae.prepare(pe);try{const Le=ie.bind(K).step()?ie.get(...re):void 0;return ie.reset(),Le}finally{ie.finalize()}},Re=(ae,pe,K,re)=>ae.exec({sql:pe,bind:K,rowMode:re,returnValue:"resultRows"});je.checkRc=(ae,pe)=>tt(ae,pe),je.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return Ie(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,K)=>{if(K&&K.pointer)try{K.finalize()}catch{}}),fe.delete(this),me.delete(this),E.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const K=Ie(this).pointer;return ae?pe?E.sqlite3_total_changes64(K):E.sqlite3_total_changes(K):pe?E.sqlite3_changes64(K):E.sqlite3_changes(K)},dbFilename:function(ae="main"){return E.sqlite3_db_filename(Ie(this).pointer,ae)},dbName:function(ae=0){return E.sqlite3_db_name(Ie(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const K=E.sqlite3_js_db_vfs(Ie(this).pointer,ae);if(K){const re=new E.sqlite3_vfs(K);try{pe=C.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){Ie(this);const pe=C.pstack.pointer;let K,re;try{K=C.pstack.alloc(8),je.checkRc(this,E.sqlite3_prepare_v2(this.pointer,ae,-1,K,null)),re=C.peekPtr(K)}finally{C.pstack.restore(pe)}re||S("Cannot prepare empty SQL.");const ie=new ve(this,re,et);return me.get(this)[re]=ie,ie},exec:function(){Ie(this);const ae=Ze(this,arguments);if(!ae.sql)return S("exec() requires an SQL string.");const pe=ae.opt,K=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let ie,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const Rt=C.scopedAllocPush(),Wt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const Zt=B.isSQLableTypedArray(ae.sql);let lt=Zt?ae.sql.byteLength:C.jstrlen(ae.sql);const _e=C.scopedAlloc(2*C.ptrSizeof+(lt+1)),Pe=_e+C.ptrSizeof;let ot=Pe+C.ptrSizeof;const pt=ot+lt;for(Zt?C.heap8().set(ae.sql,ot):C.jstrcpy(ae.sql,C.heap8(),ot,lt,!1),C.poke(ot+lt,0);ot&&C.peek(ot,"i8");){C.pokePtr([_e,Pe],0),je.checkRc(this,E.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Dt=C.peekPtr(_e);if(ot=C.peekPtr(Pe),lt=pt-ot,!!Dt){if(Wt&&Wt.push(E.sqlite3_sql(Dt).trim()),ie=new ve(this,Dt,et),Le&&ie.parameterCount&&(ie.bind(Le),Le=null),it&&ie.columnCount){let Yt=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const qe=Object.create(null);for(;ie.step();ie._lockedByExec=!1){Yt++===0&&ie.getColumnNames(qe.columnNames=pe.columnNames||[]),ie._lockedByExec=!0;const nt=ae.cbArg(ie,qe);if(re&&re.push(nt),K&&K.call(pe,nt,ie)===!1)break}ie._lockedByExec=!1}Yt===0&&ie.getColumnNames(pe.columnNames)}else ie.step();ie.reset().finalize(),ie=null}}}finally{C.scopedAllocPop(Rt),ie&&(delete ie._lockedByExec,ie.finalize())}return ae.returnVal()},createFunction:function(pe,K,re){const ie=qe=>qe instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,K=re.xFunc||0;break;case 2:ie(K)||(re=K,K=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&S("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const Rt=re.xValue||0,Wt=re.xInverse||0;let Zt;ie(K)?(Zt=!1,(ie(Le)||ie(it))&&S("Ambiguous arguments: scalar or aggregate?"),Le=it=null):ie(Le)?(ie(it)||S("Missing xFinal() callback for aggregate or window UDF."),K=null):ie(it)?S("Missing xStep() callback for aggregate or window UDF."):S("Missing function-type properties."),Zt===!1?(ie(Rt)||ie(Wt))&&S("xValue and xInverse are not permitted for non-window UDFs."):ie(Rt)?(ie(Wt)||S("xInverse must be provided if xValue is."),Zt=!0):ie(Wt)&&S("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!B.isInt32(lt))&&S("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!ie(_e)&&S("xDestroy property must be a function.");let Pe=0;Qe(re,"deterministic")&&(Pe|=E.SQLITE_DETERMINISTIC),Qe(re,"directOnly")&&(Pe|=E.SQLITE_DIRECTONLY),Qe(re,"innocuous")&&(Pe|=E.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=K||Le,pt=Qe(re,"arity"),Dt=typeof pt=="number"?pt:ot.length?ot.length-1:0;let Yt;return Zt?Yt=E.sqlite3_create_window_function(this.pointer,pe,Dt,E.SQLITE_UTF8|Pe,lt||0,Le,it,Rt,Wt,_e):Yt=E.sqlite3_create_function_v2(this.pointer,pe,Dt,E.SQLITE_UTF8|Pe,lt||0,K,Le,it,_e),je.checkRc(this,Yt),this},selectValue:function(ae,pe,K){return Ge(this,ae,pe,0,K)},selectValues:function(ae,pe,K){const re=this.prepare(ae),ie=[];try{for(re.bind(pe);re.step();)ie.push(re.get(0,K));re.reset()}finally{re.finalize()}return ie},selectArray:function(ae,pe){return Ge(this,ae,pe,[])},selectObject:function(ae,pe){return Ge(this,ae,pe,{})},selectArrays:function(ae,pe){return Re(this,ae,pe,"array")},selectObjects:function(ae,pe){return Re(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&S(E.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),Ie(this).exec(pe);try{const K=ae(this);return this.exec("COMMIT"),K}catch(K){throw this.exec("ROLLBACK"),K}},savepoint:function(ae){Ie(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Ke=function(ae){return ae.pointer||S("Stmt has been closed."),ae},St=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(C.bigIntEnabled)return pe;default:return B.isBindableTypedArray(ae)?et.blob:void 0}},Y=function(ae){return St(ae)||S("Unsupported bind() argument type:",typeof ae)},ce=function(ae,pe){const K=typeof pe=="number"?pe:E.sqlite3_bind_parameter_index(ae.pointer,pe);return K===0||!B.isInt32(K)?S("Invalid bind() parameter name: "+pe):(K<1||K>ae.parameterCount)&&S("Bind index",pe,"is out of range."),K},Ee=function(ae,pe){return ae._lockedByExec&&S("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,K,re,ie){Ee(Ke(pe),"bind()"),ae._||(ae._tooBigInt=it=>S("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,Rt,Wt,Zt){const[lt,_e]=C.allocCString(Wt,!0);return(Zt?E.sqlite3_bind_blob:E.sqlite3_bind_text)(it.pointer,Rt,lt,_e,E.SQLITE_WASM_DEALLOC)}}),Y(ie),K=ce(pe,K);let Le=0;switch(ie==null?et.null:re){case et.null:Le=E.sqlite3_bind_null(pe.pointer,K);break;case et.string:Le=ae._.string(pe,K,ie,!1);break;case et.number:{let it;B.isInt32(ie)?it=E.sqlite3_bind_int:typeof ie=="bigint"?B.bigIntFits64(ie)?C.bigIntEnabled?it=E.sqlite3_bind_int64:B.bigIntFitsDouble(ie)?(ie=Number(ie),it=E.sqlite3_bind_double):ae._tooBigInt(ie):ae._tooBigInt(ie):(ie=Number(ie),C.bigIntEnabled&&Number.isInteger(ie)?it=E.sqlite3_bind_int64:it=E.sqlite3_bind_double),Le=it(pe.pointer,K,ie);break}case et.boolean:Le=E.sqlite3_bind_int(pe.pointer,K,ie?1:0);break;case et.blob:{if(typeof ie=="string"){Le=ae._.string(pe,K,ie,!0);break}else ie instanceof ArrayBuffer?ie=new Uint8Array(ie):B.isBindableTypedArray(ie)||S("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=C.alloc(ie.byteLength||1);C.heap8().set(ie.byteLength?ie:[0],it),Le=E.sqlite3_bind_blob(pe.pointer,K,it,ie.byteLength,E.SQLITE_WASM_DEALLOC);break}default:y.config.warn("Unsupported bind() argument type:",ie),S("Unsupported bind() argument type: "+typeof ie)}return Le&&je.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};ve.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=E.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Ke(this),"clearBindings()"),E.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=E.sqlite3_reset(Ke(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Ke(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:S("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||S("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&S("When binding an array, an index argument is not permitted."),pe.forEach((K,re)=>st(this,re+1,Y(K),K)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!B.isBindableTypedArray(pe)?(arguments.length!==1&&S("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(K=>st(this,K,Y(pe[K]),pe[K])),this):st(this,ae,Y(pe),pe)))},bindAsBlob:function(ae,pe){Ke(this),arguments.length===1&&(pe=ae,ae=1);const K=Y(pe);return et.string!==K&&et.blob!==K&&et.null!==K&&S("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=E.sqlite3_step(Ke(this).pointer);switch(ae){case E.SQLITE_DONE:return this._mayGet=!1;case E.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,y.config.warn("sqlite3_step() rc=",ae,E.sqlite3_js_rc_str(ae),"SQL =",E.sqlite3_sql(this.pointer)),je.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Ke(this)._mayGet||S("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let K=0;const re=this.columnCount;for(;K<re;)ae[K]=this.get(K++);return ae}else if(ae&&typeof ae=="object"){let K=0;const re=this.columnCount;for(;K<re;)ae[E.sqlite3_column_name(this.pointer,K)]=this.get(K++);return ae}switch(Te(this,ae),pe===void 0?E.sqlite3_column_type(this.pointer,ae):pe){case E.SQLITE_NULL:return null;case E.SQLITE_INTEGER:if(C.bigIntEnabled){const K=E.sqlite3_column_int64(this.pointer,ae);return K>=Number.MIN_SAFE_INTEGER&&K<=Number.MAX_SAFE_INTEGER?Number(K).valueOf():K}else{const K=E.sqlite3_column_double(this.pointer,ae);return(K>Number.MAX_SAFE_INTEGER||K<Number.MIN_SAFE_INTEGER)&&S("Integer is out of range for JS integer range: "+K),B.isInt32(K)?K|0:K}case E.SQLITE_FLOAT:return E.sqlite3_column_double(this.pointer,ae);case E.SQLITE_TEXT:return E.sqlite3_column_text(this.pointer,ae);case E.SQLITE_BLOB:{const K=E.sqlite3_column_bytes(this.pointer,ae),re=E.sqlite3_column_blob(this.pointer,ae),ie=new Uint8Array(K);return K&&ie.set(C.heap8u().slice(re,re+K),0),K&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(ie.buffer),ie}default:S("Don't know how to translate","type of result column #"+ae+".")}S("Not reached.")},getInt:function(ae){return this.get(ae,E.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,E.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,E.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,E.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,E.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return E.sqlite3_column_name(Te(Ke(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Ke(this),0);const pe=this.columnCount;for(let K=0;K<pe;++K)ae.push(E.sqlite3_column_name(this.pointer,K));return ae},getParamIndex:function(ae){return Ke(this).parameterCount?E.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Ke(this).parameterCount?E.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return E.sqlite3_stmt_busy(Ke(this))!==0},isReadOnly:function(){return E.sqlite3_stmt_readonly(Ke(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>S("The pointer property is read-only.")};Object.defineProperty(ve.prototype,"pointer",ae),Object.defineProperty(je.prototype,"pointer",ae)}if(Object.defineProperty(ve.prototype,"columnCount",{enumerable:!1,get:function(){return E.sqlite3_column_count(this.pointer)},set:()=>S("The columnCount property is read-only.")}),y.oo1={DB:je,Stmt:ve},B.isUIThread()){y.oo1.JsStorageDb=function(pe="session"){const K=Be.normalizeArgs(...arguments);pe=K.filename,pe!=="session"&&pe!=="local"&&S("JsStorageDb db name must be one of 'session' or 'local'."),K.vfs="kvvfs",Be.call(this,K)};const ae=y.oo1.JsStorageDb;ae.prototype=Object.create(je.prototype),ae.clearStorage=E.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(Ie(this).filename)},ae.storageSize=E.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(Ie(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util;y.initWorker1API=function(){const E=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||E("initWorker1API() must be run from a Worker thread.");const C=this.sqlite3||E("Missing this.sqlite3 object."),B=C.oo1.DB,fe=function(Be){let je=me.idMap.get(Be);return je||(je="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,je),je)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const je=new B(Be);return this.dbs[fe(je)]=je,this.dbList.indexOf(je)<0&&this.dbList.push(je),je},close:function(Be,je){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,ve=S.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const Ie=this.dbList.indexOf(Be);Ie>=0&&this.dbList.splice(Ie,1),je&&et&&ve&&S.sqlite3__wasm_vfs_unlink(ve,et)}},post:function(Be,je){je&&je.length?(globalThis.postMessage(Be,Array.from(je)),je.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,je=!0){return this.dbs[Be]||(je?E("Unknown (or closed) DB ID:",Be):void 0)}},Qe=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:E("DB is not opened.")},tt=function(Be,je=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return je?Qe(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const je=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&E("Throwing because of simulateError flag.");const ve=Object.create(null);je.vfs=et.vfs,je.filename=et.filename||"";const Ie=me.open(je);return ve.filename=Ie.filename,ve.persistent=!!C.capi.sqlite3_js_db_uses_vfs(Ie.pointer,"opfs"),ve.dbId=fe(Ie),ve.vfs=Ie.dbVfsName(),ve},close:function(Be){const je=tt(Be,!1),et={filename:je&&je.filename};if(je){const ve=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(je,ve)}return et},exec:function(Be){const je=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);je.rowMode==="stmt"?E("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):je.sql||E("'exec' requires input SQL.");const et=tt(Be);(je.callback||Array.isArray(je.resultRows))&&(et._blobXfer=me.xfer);const ve=je.callback;let Ie=0;const Te=!!je.columnNames;typeof ve=="string"&&(Te||(je.columnNames=[]),je.callback=function(Ze,Ge){me.post({type:ve,columnNames:je.columnNames,rowNumber:++Ie,row:Ze},me.xfer)});try{const Ze=je.countChanges?et.changes(!0,je.countChanges===64):void 0;et.exec(je),Ze!==void 0&&(je.changeCount=et.changes(!0,je.countChanges===64)-Ze),je.callback instanceof Function&&(je.callback=ve,me.post({type:ve,columnNames:je.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,je.callback&&(je.callback=ve)}return je},"config-get":function(){const Be=Object.create(null),je=C.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(je,et)&&(Be[et]=je[et])}),Be.version=C.version,Be.vfsList=C.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const je=tt(Be),et={byteArray:C.capi.sqlite3_js_db_export(je.pointer),filename:je.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){E("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let je,et=Be.dbId,ve=Be.type;const Ie=performance.now();try{mt.hasOwnProperty(ve)&&mt[ve]instanceof Function?je=await mt[ve](Be):E("Unknown db worker message type:",Be.type)}catch(Te){ve="error",je={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(je.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=je.dbId||at()),me.post({type:ve,dbId:et,messageId:Be.messageId,workerReceivedTime:Ie,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:je},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:y})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.wasm,E=y.capi,C=y.util.toss3,B=Object.create(null);y.vfs=B,E.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof y.capi.sqlite3_vfs||C("Expecting a sqlite3_vfs-type argument.");const me=E.sqlite3_vfs_register(this,fe?1:0);return me&&C("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==E.sqlite3_vfs_find(this.$zName)&&C("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},B.installVfs=function(fe){let me=0;const Qe=["io","vfs"];for(const tt of Qe){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=S.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||C("Misuse: installVfs() options object requires at least","one of:",Qe),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){if(!y.wasm.exports.sqlite3_declare_vtab)return;const S=y.wasm,E=y.capi,C=y.util.toss3,B=Object.create(null);y.vtab=B;const fe=E.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;S.isPtr(mt)||y.SQLite3Error.toss("Invalid argument to",tt+"()");let je=this.get(mt);return Be&&this.delete(mt),je}.bind(new Map)},Qe=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const je=mt();return S.pokePtr(Be,je.pointer),je},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const je=mt(Be,!0);je&&je.dispose()}})};B.xVtab=Qe("xVtab",E.sqlite3_vtab),B.xCursor=Qe("xCursor",E.sqlite3_vtab_cursor),B.xIndexInfo=tt=>new E.sqlite3_index_info(tt),B.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let je;return mt instanceof y.WasmAllocError?je=E.SQLITE_NOMEM:arguments.length>2?je=Be:mt instanceof y.SQLite3Error&&(je=mt.resultCode),je||E.SQLITE_ERROR},B.xError.errorReporter=console.error.bind(console),B.xRowid=(tt,at)=>S.poke(tt,at,"i64"),B.setupModule=function(tt){let at=!1;const mt=this instanceof E.sqlite3_module?this:tt.struct||(at=new E.sqlite3_module);try{const Be=tt.methods||C("Missing 'methods' object.");for(const je of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=je[0],ve=je[1];Be[et]===!0?Be[et]=Be[ve]:Be[ve]===!0&&(Be[ve]=Be[et])}if(tt.catchExceptions){const je=function(Ie,Te){return["xConnect","xCreate"].indexOf(Ie)>=0?function(Ze,Ge,Re,Ke,St,Y){try{return Te(...arguments)||0}catch(ce){return ce instanceof y.WasmAllocError||(S.dealloc(S.peekPtr(Y)),S.pokePtr(Y,S.allocCString(ce.message))),B.xError(Ie,ce)}}:function(...Ze){try{return Te(...Ze)||0}catch(Ge){return B.xError(Ie,Ge)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ve=Object.create(null);for(const Ie of et){const Te=Be[Ie];if(Te instanceof Function)Ie==="xConnect"&&Be.xCreate===Te?ve[Ie]=Be.xCreate:Ie==="xCreate"&&Be.xConnect===Te?ve[Ie]=Be.xConnect:ve[Ie]=je(Ie,Te);else continue}mt.installMethods(ve,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let je;typeof tt.iVersion=="number"?je=tt.iVersion:mt.$xShadowName?je=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?je=2:je=1,mt.$iVersion=je}}catch(Be){throw at&&at.dispose(),Be}return mt},E.sqlite3_module.prototype.setupModule=function(tt){return B.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=function E(C){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!C||typeof C!="object")&&(C=Object.create(null));const B=new URL(globalThis.location.href).searchParams;return B.has("opfs-disable")?Promise.resolve(y):(C.verbose===void 0&&(C.verbose=B.has("opfs-verbose")?+B.get("opfs-verbose")||2:1),C.sanityChecks===void 0&&(C.sanityChecks=B.has("opfs-sanity-check")),C.proxyUri===void 0&&(C.proxyUri=E.defaultProxyUri),typeof C.proxyUri=="function"&&(C.proxyUri=C.proxyUri()),new Promise(function(me,Qe){const tt=[y.config.error,y.config.warn,y.config.log],at=(qe,...nt)=>{C.verbose>qe&&tt[qe]("OPFS syncer:",...nt)},mt=(...qe)=>at(2,...qe),Be=(...qe)=>at(1,...qe),je=(...qe)=>at(0,...qe),et=y.util.toss,ve=y.capi,Ie=y.util,Te=y.wasm,Ze=ve.sqlite3_vfs,Ge=ve.sqlite3_file,Re=ve.sqlite3_io_methods,Ke=Object.create(null),St=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Ke.metrics={dump:function(){let qe,nt=0,dt=0,Nt=0;for(qe in ie.opIds){const xt=Le[qe];nt+=xt.count,dt+=xt.time,Nt+=xt.wait,xt.avgTime=xt.count&&xt.time?xt.time/xt.count:0,xt.avgWait=xt.count&&xt.wait?xt.wait/xt.count:0}y.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+Nt+" ms of waiting on the async side)"),y.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let qe;const nt=Nt=>Nt.count=Nt.time=Nt.wait=0;for(qe in ie.opIds)nt(Le[qe]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const Y=new Re,ce=new Ze().addOnDispose(()=>Y.dispose());let Ee;const st=qe=>(Ee=!0,ce.dispose(),Qe(qe)),ae=()=>(Ee=!1,me(y)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(qe){je("Error initializing OPFS asyncer:",qe),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const K=ve.sqlite3_vfs_find(null),re=K?new Ze(K):null;Y.$iVersion=1,ce.$iVersion=2,ce.$szOsFile=ve.sqlite3_file.structInfo.sizeof,ce.$mxPathname=1024,ce.$zName=Te.allocCString("opfs"),ce.$xDlOpen=ce.$xDlError=ce.$xDlSym=ce.$xDlClose=null,ce.addOnDispose("$zName",ce.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const ie=Object.create(null);ie.verbose=C.verbose,ie.littleEndian=(()=>{const qe=new ArrayBuffer(2);return new DataView(qe).setInt16(0,256,!0),new Int16Array(qe)[0]===256})(),ie.asyncIdleWaitTime=150,ie.asyncS11nExceptions=1,ie.fileBufferSize=1024*64,ie.sabS11nOffset=ie.fileBufferSize,ie.sabS11nSize=ce.$mxPathname*2,ie.sabIO=new SharedArrayBuffer(ie.fileBufferSize+ie.sabS11nSize),ie.opIds=Object.create(null);const Le=Object.create(null);{let qe=0;ie.opIds.whichOp=qe++,ie.opIds.rc=qe++,ie.opIds.xAccess=qe++,ie.opIds.xClose=qe++,ie.opIds.xDelete=qe++,ie.opIds.xDeleteNoWait=qe++,ie.opIds.xFileSize=qe++,ie.opIds.xLock=qe++,ie.opIds.xOpen=qe++,ie.opIds.xRead=qe++,ie.opIds.xSleep=qe++,ie.opIds.xSync=qe++,ie.opIds.xTruncate=qe++,ie.opIds.xUnlock=qe++,ie.opIds.xWrite=qe++,ie.opIds.mkdir=qe++,ie.opIds["opfs-async-metrics"]=qe++,ie.opIds["opfs-async-shutdown"]=qe++,ie.opIds.retry=qe++,ie.sabOP=new SharedArrayBuffer(qe*4),Ke.metrics.reset()}ie.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(qe=>{(ie.sq3Codes[qe]=ve[qe])===void 0&&et("Maintenance required: not found:",qe)}),ie.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(qe,...nt)=>{const dt=ie.opIds[qe]||et("Invalid op ID:",qe);ie.s11n.serialize(...nt),Atomics.store(ie.sabOPView,ie.opIds.rc,-1),Atomics.store(ie.sabOPView,ie.opIds.whichOp,dt),Atomics.notify(ie.sabOPView,ie.opIds.whichOp);const Nt=performance.now();for(;Atomics.wait(ie.sabOPView,ie.opIds.rc,-1)!=="not-equal";);const xt=Atomics.load(ie.sabOPView,ie.opIds.rc);if(Le[qe].wait+=performance.now()-Nt,xt&&ie.asyncS11nExceptions){const Bt=ie.s11n.deserialize();Bt&&je(qe+"() async error:",...Bt)}return xt};Ke.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const Rt=()=>{if(ie.s11n)return ie.s11n;const qe=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize),Nt=new DataView(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize);ie.s11n=Object.create(null);const xt=Object.create(null);xt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},xt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},xt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},xt.string={id:4};const Bt=Ot=>xt[typeof Ot]||et("Maintenance required: this value type cannot be serialized.",Ot),mn=Ot=>{switch(Ot){case xt.number.id:return xt.number;case xt.bigint.id:return xt.bigint;case xt.boolean.id:return xt.boolean;case xt.string.id:return xt.string;default:et("Invalid type ID:",Ot)}};return ie.s11n.deserialize=function(Ot=!1){++Le.s11n.deserialize.count;const Sr=performance.now(),We=dt[0],bt=We?[]:null;if(We){const wt=[];let kt=1,yn,Qn,zn;for(yn=0;yn<We;++yn,++kt)wt.push(mn(dt[kt]));for(yn=0;yn<We;++yn){const Hn=wt[yn];Hn.getter?(zn=Nt[Hn.getter](kt,ie.littleEndian),kt+=Hn.size):(Qn=Nt.getInt32(kt,ie.littleEndian),kt+=4,zn=qe.decode(dt.slice(kt,kt+Qn)),kt+=Qn),bt.push(zn)}}return Ot&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-Sr,bt},ie.s11n.serialize=function(...Ot){const Sr=performance.now();if(++Le.s11n.serialize.count,Ot.length){const We=[];let bt=0,wt=1;for(dt[0]=Ot.length&255;bt<Ot.length;++bt,++wt)We.push(Bt(Ot[bt])),dt[wt]=We[bt].id;for(bt=0;bt<Ot.length;++bt){const kt=We[bt];if(kt.setter)Nt[kt.setter](wt,Ot[bt],ie.littleEndian),wt+=kt.size;else{const yn=nt.encode(Ot[bt]);Nt.setInt32(wt,yn.byteLength,ie.littleEndian),wt+=4,dt.set(yn,wt),wt+=yn.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-Sr},ie.s11n},Wt=function qe(nt=16){qe._chars||(qe._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",qe._n=qe._chars.length);const dt=[];let Nt=0;for(;Nt<nt;++Nt){const xt=Math.random()*(qe._n*64)%qe._n|0;dt[Nt]=qe._chars[xt]}return dt.join("")},Zt=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=qe=>{lt.start=performance.now(),lt.op=qe,++Le[qe].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(qe,nt){return Te.poke(nt,0,"i32"),0},xClose:function(qe){_e("xClose");let nt=0;const dt=Zt[qe];return dt&&(delete Zt[qe],nt=it("xClose",qe),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(qe){return ve.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(qe,nt,dt){return ve.SQLITE_NOTFOUND},xFileSize:function(qe,nt){_e("xFileSize");let dt=it("xFileSize",qe);if(dt==0)try{const Nt=ie.s11n.deserialize()[0];Te.poke(nt,Nt,"i64")}catch(Nt){je("Unexpected error reading xFileSize() result:",Nt),dt=ie.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(qe,nt){_e("xLock");const dt=Zt[qe];let Nt=0;return dt.lockType?dt.lockType=nt:(Nt=it("xLock",qe,nt),Nt===0&&(dt.lockType=nt)),Pe(),Nt},xRead:function(qe,nt,dt,Nt){_e("xRead");const xt=Zt[qe];let Bt;try{Bt=it("xRead",qe,dt,Number(Nt)),(Bt===0||ve.SQLITE_IOERR_SHORT_READ===Bt)&&Te.heap8u().set(xt.sabView.subarray(0,dt),nt)}catch(mn){je("xRead(",arguments,") failed:",mn,xt),Bt=ve.SQLITE_IOERR_READ}return Pe(),Bt},xSync:function(qe,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",qe,nt);return Pe(),dt},xTruncate:function(qe,nt){_e("xTruncate");const dt=it("xTruncate",qe,Number(nt));return Pe(),dt},xUnlock:function(qe,nt){_e("xUnlock");const dt=Zt[qe];let Nt=0;return ve.SQLITE_LOCK_NONE===nt&&dt.lockType&&(Nt=it("xUnlock",qe,nt)),Nt===0&&(dt.lockType=nt),Pe(),Nt},xWrite:function(qe,nt,dt,Nt){_e("xWrite");const xt=Zt[qe];let Bt;try{xt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),Bt=it("xWrite",qe,dt,Number(Nt))}catch(mn){je("xWrite(",arguments,") failed:",mn,xt),Bt=ve.SQLITE_IOERR_WRITE}return Pe(),Bt}},pt={xAccess:function(qe,nt,dt,Nt){_e("xAccess");const xt=it("xAccess",Te.cstrToJs(nt));return Te.poke(Nt,xt?0:1,"i32"),Pe(),0},xCurrentTime:function(qe,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(qe,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(qe,nt,dt){_e("xDelete");const Nt=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),Nt},xFullPathname:function(qe,nt,dt,Nt){return Te.cstrncpy(Nt,nt,dt)<dt?0:ve.SQLITE_CANTOPEN},xGetLastError:function(qe,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,Nt,xt,Bt){_e("xOpen");let mn=0;dt===0?dt=Wt():Te.isPtr(dt)&&(ve.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(mn|=ie.opfsFlags.OPFS_UNLOCK_ASAP),ve.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(mn|=ie.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const Ot=Object.create(null);Ot.fid=Nt,Ot.filename=dt,Ot.sab=new SharedArrayBuffer(ie.fileBufferSize),Ot.flags=xt,Ot.readOnly=!(y.SQLITE_OPEN_CREATE&xt)&&!!(xt&ve.SQLITE_OPEN_READONLY);const Sr=it("xOpen",Nt,dt,xt,mn);return Sr||(Ot.readOnly&&Te.poke(Bt,ve.SQLITE_OPEN_READONLY,"i32"),Zt[Nt]=Ot,Ot.sabView=ie.sabFileBufView,Ot.sq3File=new Ge(Nt),Ot.sq3File.$pMethods=Y.pointer,Ot.lockType=ve.SQLITE_LOCK_NONE),Pe(),Sr}};re&&(ce.$xRandomness=re.$xRandomness,ce.$xSleep=re.$xSleep),ce.$xRandomness||(pt.xRandomness=function(qe,nt,dt){const Nt=Te.heap8u();let xt=0;for(;xt<nt;++xt)Nt[dt+xt]=Math.random()*255e3&255;return xt}),ce.$xSleep||(pt.xSleep=function(qe,nt){return Atomics.wait(ie.sabOPView,ie.opIds.xSleep,0,nt),0}),Ke.getResolvedPath=function(qe,nt){const dt=new URL(qe,"file://irrelevant").pathname;return nt?dt.split("/").filter(Nt=>!!Nt):dt},Ke.getDirForFilename=async function(nt,dt=!1){const Nt=Ke.getResolvedPath(nt,!0),xt=Nt.pop();let Bt=Ke.rootDirectory;for(const mn of Nt)mn&&(Bt=await Bt.getDirectoryHandle(mn,{create:!!dt}));return[Bt,xt]},Ke.mkdir=async function(qe){try{return await Ke.getDirForFilename(qe+"/filepart",!0),!0}catch{return!1}},Ke.entryExists=async function(qe){try{const[nt,dt]=await Ke.getDirForFilename(qe);return await nt.getFileHandle(dt),!0}catch{return!1}},Ke.randomFilename=Wt,Ke.treeList=async function(){const qe=async function dt(Nt,xt){xt.name=Nt.name,xt.dirs=[],xt.files=[];for await(const Bt of Nt.values())if(Bt.kind==="directory"){const mn=Object.create(null);xt.dirs.push(mn),await dt(Bt,mn)}else xt.files.push(Bt.name)},nt=Object.create(null);return await qe(Ke.rootDirectory,nt),nt},Ke.rmfr=async function(){const qe=Ke.rootDirectory,nt={recurse:!0};for await(const dt of qe.values())qe.removeEntry(dt.name,nt)},Ke.unlink=async function(qe,nt=!1,dt=!1){try{const[Nt,xt]=await Ke.getDirForFilename(qe,!1);return await Nt.removeEntry(xt,{recursive:nt}),!0}catch(Nt){if(dt)throw new Error("unlink(",arguments[0],") failed: "+Nt.message,{cause:Nt});return!1}},Ke.traverse=async function(qe){const nt={recursive:!0,directory:Ke.rootDirectory};typeof qe=="function"&&(qe={callback:qe}),qe=Object.assign(nt,qe||{}),async function Nt(xt,Bt){for await(const mn of xt.values()){if(qe.callback(mn,xt,Bt)===!1)return!1;if(qe.recursive&&mn.kind==="directory"&&await Nt(mn,Bt+1)===!1)break}}(qe.directory,0)};const Dt=async function(qe,nt){const[dt,Nt]=await Ke.getDirForFilename(qe,!0);let Bt=await (await dt.getFileHandle(Nt,{create:!0})).createSyncAccessHandle(),mn=0,Ot,Sr=!1;try{for(Bt.truncate(0);(Ot=await nt())!==void 0;)Ot instanceof ArrayBuffer&&(Ot=new Uint8Array(Ot)),mn===0&&Ot.byteLength>=15&&(Ie.affirmDbHeader(Ot),Sr=!0),Bt.write(Ot,{at:mn}),mn+=Ot.byteLength;if((mn<512||mn%512!==0)&&et("Input size",mn,"is not correct for an SQLite database."),!Sr){const We=new Uint8Array(20);Bt.read(We,{at:0}),Ie.affirmDbHeader(We)}return Bt.write(new Uint8Array([1,1]),{at:18}),mn}catch(We){throw await Bt.close(),Bt=void 0,await dt.removeEntry(Nt).catch(()=>{}),We}finally{Bt&&await Bt.close()}};if(Ke.importDb=async function(qe,nt){if(nt instanceof Function)return Dt(qe,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),Ie.affirmIsDb(nt);const dt=nt.byteLength,[Nt,xt]=await Ke.getDirForFilename(qe,!0);let Bt,mn=0;try{return Bt=await (await Nt.getFileHandle(xt,{create:!0})).createSyncAccessHandle(),Bt.truncate(0),mn=Bt.write(nt,{at:0}),mn!=dt&&et("Expected to write "+dt+" bytes but wrote "+mn+"."),Bt.write(new Uint8Array([1,1]),{at:18}),mn}catch(Ot){throw Bt&&(await Bt.close(),Bt=void 0),await Nt.removeEntry(xt).catch(()=>{}),Ot}finally{Bt&&await Bt.close()}},y.oo1){const qe=function(...nt){const dt=y.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ce.$zName,y.oo1.DB.dbCtorHelper.call(this,dt)};qe.prototype=Object.create(y.oo1.DB.prototype),y.oo1.OpfsDb=qe,qe.importDb=Ke.importDb,y.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ce.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const Yt=function(){const qe=Te.scopedAllocPush(),nt=new Ge;try{const dt=nt.pointer,Nt=ve.SQLITE_OPEN_CREATE|ve.SQLITE_OPEN_READWRITE|ve.SQLITE_OPEN_MAIN_DB,xt=Te.scopedAlloc(8),Bt="/sanity/check/file"+Wt(8),mn=Te.scopedAllocCString(Bt);let Ot;if(ie.s11n.serialize("This is \xe4 string."),Ot=ie.s11n.deserialize(),mt("deserialize() says:",Ot),Ot[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ce.pointer,mn,0,xt),Ot=Te.peek(xt,"i32"),mt("xAccess(",Bt,") exists ?=",Ot),Ot=pt.xOpen(ce.pointer,mn,dt,Nt,xt),mt("open rc =",Ot,"state.sabOPView[xOpen] =",ie.sabOPView[ie.opIds.xOpen]),Ot!==0){je("open failed with code",Ot);return}pt.xAccess(ce.pointer,mn,0,xt),Ot=Te.peek(xt,"i32"),Ot||et("xAccess() failed to detect file."),Ot=ot.xSync(nt.pointer,0),Ot&&et("sync failed w/ rc",Ot),Ot=ot.xTruncate(nt.pointer,1024),Ot&&et("truncate failed w/ rc",Ot),Te.poke(xt,0,"i64"),Ot=ot.xFileSize(nt.pointer,xt),Ot&&et("xFileSize failed w/ rc",Ot),mt("xFileSize says:",Te.peek(xt,"i64")),Ot=ot.xWrite(nt.pointer,mn,10,1),Ot&&et("xWrite() failed!");const Sr=Te.scopedAlloc(16);Ot=ot.xRead(nt.pointer,Sr,6,2),Te.poke(Sr+6,0);let We=Te.cstrToJs(Sr);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ce.pointer,2e3),mt("waking up from xSleep()")),Ot=ot.xClose(dt),mt("xClose rc =",Ot,"sabOPView =",ie.sabOPView),mt("Deleting file:",Bt),pt.xDelete(ce.pointer,mn,4660),pt.xAccess(ce.pointer,mn,0,xt),Ot=Te.peek(xt,"i32"),Ot&&et("Expecting 0 from xAccess(",Bt,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(qe)}};pe.onmessage=function({data:qe}){switch(qe.type){case"opfs-unavailable":st(new Error(qe.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:ie});break;case"opfs-async-inited":{if(Ee===!0)break;try{y.vfs.installVfs({io:{struct:Y,methods:ot},vfs:{struct:ce,methods:pt}}),ie.sabOPView=new Int32Array(ie.sabOP),ie.sabFileBufView=new Uint8Array(ie.sabIO,0,ie.fileBufferSize),ie.sabS11nView=new Uint8Array(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize),Rt(),C.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),Yt()),St()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,y.opfs=Ke,Ke.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ce),ae()}).catch(st):ae()}catch(nt){je(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(qe);je(nt),st(new Error(nt));break}}}}))};S.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async E=>{try{let C=S.defaultProxyUri;return E.scriptInfo.sqlite3Dir&&(S.defaultProxyUri=E.scriptInfo.sqlite3Dir+C),S().catch(B=>{E.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",B.message)})}catch(C){return E.config.error("installOpfsVfs() exception:",C),Promise.reject(C)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util.toss,E=y.util.toss3,C=Object.create(null),B=y.capi,fe=y.util,me=y.wasm,Qe=4096,tt=512,at=4,mt=8,Be=tt+at,je=tt,et=Be,ve=Qe,Ie=B.SQLITE_OPEN_MAIN_DB|B.SQLITE_OPEN_MAIN_JOURNAL|B.SQLITE_OPEN_SUPER_JOURNAL|B.SQLITE_OPEN_WAL,Te=".opaque",Ze=()=>Math.random().toString(36).slice(2),Ge=new TextDecoder,Re=new TextEncoder,Ke=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),St=[y.config.error,y.config.warn,y.config.log];y.config.log;const Y=y.config.warn;y.config.error;const ce=new Map,Ee=lt=>ce.get(lt),st=(lt,_e)=>{_e?ce.set(lt,_e):ce.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),K=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&B.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,B.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return B.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return B.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-ve;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Dt=pt.getOFileForS3File(lt);pt.log(`xRead ${Dt.path} ${Pe} @ ${ot}`);try{const Yt=Dt.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Yt<Pe?(me.heap8u().fill(0,_e+Yt,_e+Pe),B.SQLITE_IOERR_SHORT_READ):0}catch(Yt){return pt.storeErr(Yt,B.SQLITE_IOERR)}},xSectorSize:function(lt){return Qe},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,B.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(ve+Number(_e)),0}catch(pt){return Pe.storeErr(pt,B.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Dt=pt.getOFileForS3File(lt);pt.log(`xWrite ${Dt.path} ${Pe} ${ot}`);try{const Yt=Dt.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:ve+Number(ot)});return Pe===Yt?0:S("Unknown write() failure.")}catch(Yt){return pt.storeErr(Yt,B.SQLITE_IOERR)}}},ie=new B.sqlite3_io_methods;ie.$iVersion=1,y.vfs.installVfs({io:{struct:ie,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Dt=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Dt)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),B.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:B.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Dt=me.scopedAllocPush();try{const[Yt,qe]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,Yt,_e),qe>_e&&me.poke8(Pe+_e-1,0)}catch{return B.SQLITE_NOMEM}finally{me.scopedAllocPop(Dt)}}return pt?pt.sqlite3Rc||B.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Dt){const Yt=Ee(_e);try{Yt.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const qe=Pe&&me.peek8(Pe)?Yt.getPath(Pe):Ze();let nt=Yt.getSAHForPath(qe);!nt&&pt&B.SQLITE_OPEN_CREATE&&(Yt.getFileCount()<Yt.getCapacity()?(nt=Yt.nextAvailableSAH(),Yt.setAssociatedPath(nt,qe,pt)):S("SAH pool is full. Cannot create file",qe)),nt||S("file not found:",qe);const dt={path:qe,flags:pt,sah:nt};Yt.mapS3FileToOFile(ot,dt),dt.lockType=B.SQLITE_LOCK_NONE;const Nt=new B.sqlite3_file(ot);return Nt.$pMethods=ie.pointer,Nt.dispose(),me.poke32(Dt,pt),0}catch(qe){return Yt.storeErr(qe),B.SQLITE_CANTOPEN}}},it=function(lt){y.capi.sqlite3_vfs_find(lt)&&E("VFS name is already registered:",lt);const _e=new B.sqlite3_vfs,Pe=B.sqlite3_vfs_find(null),ot=Pe?new B.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=B.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Dt,Yt){const qe=me.heap8u();let nt=0;for(;nt<Dt;++nt)qe[Yt+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Dt)=>0),y.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class Rt{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#c;#l;#u;constructor(_e=Object.create(null)){this.#u=_e.verbosity??Ke.verbosity,this.vfsName=_e.name||Ke.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#c=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Ke.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Ke.initialCapacity)})}#d(_e,...Pe){this.#u>_e&&St[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Dt=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Dt,ot),this.setAssociatedPath(Dt,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Dt=await pt.createSyncAccessHandle();if(this.#r.set(Dt,ot),_e)Dt.truncate(ve),this.setAssociatedPath(Dt,"",0);else{const Yt=this.getAssociatedPath(Dt);Yt?this.#i.set(Yt,Dt):this.#s.add(Dt)}}catch(Dt){throw this.storeErr(Dt),this.releaseAccessHandles(),Dt}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#c.getUint32(je);if(this.#a[0]&&(Pe&B.SQLITE_OPEN_DELETEONCLOSE||!(Pe&Ie)))return Y(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Dt,Yt)=>Dt===pt[Yt])){const Dt=this.#a.findIndex(Yt=>Yt===0);return Dt===0&&_e.truncate(ve),Dt?Ge.decode(this.#a.subarray(0,Dt)):""}else return Y("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=Re.encodeInto(Pe,this.#a);tt<=pt.written+1&&S("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#c.setUint32(je,ot);const Dt=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Dt,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(ve),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||B.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),K(_e,this)):(this.#o.delete(_e),K(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;B.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete C[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){y.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||S("File not found:",_e),ot=Pe.getSize()-ve,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Dt=Pe.read(pt,{at:ve});Dt!=ot&&S("Expected to read "+ot+" bytes but read "+Dt+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to.");ot.truncate(0);let pt=0,Dt,Yt=!1;try{for(;(Dt=await Pe())!==void 0;)Dt instanceof ArrayBuffer&&(Dt=new Uint8Array(Dt)),pt===0&&Dt.byteLength>=15&&(fe.affirmDbHeader(Dt),Yt=!0),ot.write(Dt,{at:ve+pt}),pt+=Dt.byteLength;if((pt<512||pt%512!==0)&&S("Input size",pt,"is not correct for an SQLite database."),!Yt){const qe=new Uint8Array(20);ot.read(qe,{at:0}),fe.affirmDbHeader(qe)}ot.write(new Uint8Array([1,1]),{at:ve+18})}catch(qe){throw this.setAssociatedPath(ot,"",0),qe}return this.setAssociatedPath(ot,_e,B.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&S("Byte array size is invalid for an SQLite db.");const Dt="SQLite format 3";for(let qe=0;qe<Dt.length;++qe)Dt.charCodeAt(qe)!==Pe[qe]&&S("Input does not contain an SQLite database header.");const Yt=ot.write(Pe,{at:ve});return Yt!=pt?(this.setAssociatedPath(ot,"",0),S("Expected to write "+pt+" bytes but wrote "+Yt+".")):(ot.write(new Uint8Array([1,1]),{at:ve+18}),this.setAssociatedPath(ot,_e,B.SQLITE_OPEN_MAIN_DB)),Yt}}class Wt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const Zt=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&S("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};y.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Ke,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(C[_e])try{return await C[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete C[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?C[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):C[_e]=Zt().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new Rt(lt);return Pe.isReady.then(async()=>{const ot=new Wt(Pe);if(y.oo1){const pt=y.oo1,Dt=Pe.getVfs(),Yt=function(...qe){const nt=pt.DB.dbCtorHelper.normalizeArgs(...qe);nt.vfs=Dt.$zName,pt.DB.dbCtorHelper.call(this,nt)};Yt.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=Yt}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>C[_e]=Promise.reject(Pe))}}),typeof g<"u"){const y=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=y;let S;try{S=globalThis.sqlite3ApiBootstrap()}catch(E){throw console.error("sqlite3ApiBootstrap() error:",E),E}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=S}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const eK=function(){const t=aN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();aN=eK;const tK=aN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let d,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let b=n[h.messageId];if(!b){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(b=n[h.type],b&&b.onrow){b.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":b.reject(h);return;case"open":d||(d=h.dbId);break;case"close":h.dbId===d&&(d=void 0);break}try{b.resolve(h)}catch(x){b.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=d),h.messageId=l(h),h.departureTime=performance.now();const b=Object.create(null);b.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",b.onrow=h.args.callback,h.args.callback=x,n[x]=b):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(N,I){b.resolve=N,b.reject=I,n[h.messageId]=b,s("Posting",h.type,"message to Worker dbId="+(d||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function xO(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function p0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function gD(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function TE(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const l=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(l);let d=0;return s.forEach(p=>{u.set(p,d),d+=p.length}),u}}else return n}class nK{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:xO()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:xO()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,l=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await tK()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,l),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,l),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=p0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let l of r.statements){const u=p0(o,l);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)p0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],d=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:d,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let l;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?l=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:l=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:l}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const l=await TE(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,l)}else{const l=await TE(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(l);this.pointers.push(u);const d=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,l.byteLength,l.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(d),this.execInitStatements()}}catch(l){this.emitMessage({type:"error",error:l,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:l,tempFileNames:u}=gD(this.config.databasePath),d=await o(),p=[l,...u];this.destroy(),await Promise.all(p.map(async h=>d.removeEntry(h).catch(b=>{if(!(b instanceof DOMException&&b.name==="NotFoundError"))throw b})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:oN(globalThis);this.proxy=n,this.init("initial")}}function Lb(t,...e){return{sql:t.join("?"),params:e}}function rK(t){return!t.some(e=>!Array.isArray(e))}function h0(t,e){let n;return rK(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function iK(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function sK(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function oK(t){if(typeof t=="function"&&(t=t(Lb)),iK(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!sK(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function m0(){return crypto.randomUUID()}function wO(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=Lb(t,...e),n}async function Jg(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class aK{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const l=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(l.type){case"success":case"data":case"buffer":case"info":case"error":if(l.queryKey&&u.has(l.queryKey)){const[p,h]=u.get(l.queryKey);l.type==="error"?h(l.error):p(l),u.delete(l.queryKey)}else if(l.type==="error")throw l.error;break;case"callback":const d=this.userCallbacks.get(l.name);d&&d(...l.args??[]);break;case"event":this.config.onConnect?.(l.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Jg("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const l=m0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:l},[o.database]);break;default:this.processor.postMessage({...o,queryKey:l});break}return new Promise((u,d)=>{this.queriesInProgress.set(l,[u,d])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l,u="all",d)=>{const p=await this.createQuery({type:"query",transactionKey:d,sql:o,params:l,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return l.type==="data"&&l.data.forEach((d,p)=>{u[p]=d}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...l)=>{const u=wO(o,l),{rows:d,columns:p}=await this.exec(u.sql,u.params,"all");return h0(d,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=o(Lb);return(await this.execBatch(l)).map(({rows:d,columns:p})=>h0(d,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=m0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const l=async h=>{const b=oK(h),{rows:x,columns:_}=await this.exec(b.sql,b.params,"all",o);return h0(x,_)};return{query:l,sql:async(h,...b)=>{const x=wO(h,b);return await l(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Jg("exclusive",!1,this.config,async()=>{let l;this.bypassMutationLock=!0;try{l=await this.beginTransaction();const u=await o({sql:l.sql,query:l.query});return await l.commit(),u}catch(u){throw await l?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,l)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=l),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=l)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,l;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const d=gD(this.config.databasePath),{directories:p,getDirectoryHandle:h}=d;o=d.fileName;const b=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${b}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();l=await (await (await _.getFileHandle(b)).getFile()).arrayBuffer(),await _.removeEntry(b)}else{const d=await this.createQuery({type:"export"});if(d.type==="buffer")o="database.sqlite3",l=d.buffer;else throw new Error("The database failed to export.")}return new File([l],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await Jg("exclusive",!1,this.config,async()=>{try{const u=await TE(o);await this.createQuery({type:"import",database:u}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Jg("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=m0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=oN(this.processor)):(this.processor=new nK(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(Lb)??[]}})}}class lK extends aK{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new cH,createDriver:()=>new cK(this),createIntrospector:e=>new lH(e),createQueryCompiler:()=>new sH}})}}class cK{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new uK(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class uK{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const dK=({database:t,bootstrap:e})=>{const{dialect:n}=new lK({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new L1({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},zi=gn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),fK="icon-[material-symbols--error-outline]",pK=gn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),Ci=({error:t,variant:e,tva:n=pK,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?f.jsxs("div",{className:i.base(),children:[f.jsx(Xt,{icon:fK}),f.jsx("span",{children:na.rich(t.message)})]}):null},hK=gn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),Cn=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:l=hK,css:u})=>{const d=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return f.jsxs("div",{className:d.base(),children:[f.jsxs("div",{className:"flex flex-row justify-between",children:[t?f.jsx("label",{htmlFor:i,children:t}):null,f.jsx(Ci,{variant:{compact:!0},error:r.errors[i]})]}),e?f.jsx("div",{className:"text-sm italic",children:e}):null,f.jsx("div",{className:d.input(),children:s})]})},Ds=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{B1({error:i,errors:[x1({error:i,schema:$1,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function mK(t,e,n,r={leading:!1}){const[i,s]=Q.useState(t),[o,l]=Q.useState(t),u=Q.useRef(null),d=Q.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);Q.useEffect(()=>p,[]),Q.useEffect(()=>{e(i)},[i]),Q.useEffect(()=>{l(t),s(t)},[t]);const h=Q.useCallback(b=>{l(b),p(),d.current&&r.leading?s(b):u.current=window.setTimeout(()=>{d.current=!0,s(b)},n),d.current=!1},[r.leading]);return[o,h]}const gK=gn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded","focus:border-sky-400","focus:outline-none","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),yD=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=gK,css:s})=>{const o=i({...r,css:s}).slots,[l,u]=mK(t,d=>{e(d||"")},500);return f.jsxs("div",{className:o.base(),children:[f.jsx("div",{className:o.search(),children:f.jsx(Xt,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),f.jsx("input",{value:l||"",className:o.input(),type:"text",placeholder:n||na.text("Fulltext (placeholder)"),onChange:d=>{u(d.target.value)}}),t&&f.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:f.jsx(Xt,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},Bi="icon-[pajamas--go-back]",Mb="icon-[line-md--confirm-circle]",bD="icon-[mage--edit]",yK="icon-[arcticons--nothing-x]",bK="icon-[tabler--filter-plus]",_O="icon-[tabler--filter-minus]",Bv="icon-[ph--list-dashes-thin]",vK="icon-[svg-spinners--3-dots-scale]",lN="icon-[material-symbols-light--logout-sharp]",xK="icon-[fluent--shape-intersect-20-regular]",zv="icon-[fluent--checkbox-unchecked-20-regular]",Wv="icon-[fluent--checkbox-checked-20-regular]",Ph="icon-[teenyicons--tag-outline]",ai="icon-[ph--trash]",wK="icon-[clarity--upload-cloud-line]",cN="icon-[ph--user]",_K=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Un=t=>{const e=iv(),n=Fo();return async()=>{await _K({keys:t,queryClient:e}),await n.invalidate()}};var g0={exports:{}},y0,SO;function SK(){if(SO)return y0;SO=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return y0=t,y0}var b0,EO;function EK(){if(EO)return b0;EO=1;var t=SK();function e(){}function n(){}return n.resetWarningCache=e,b0=function(){function r(o,l,u,d,p,h){if(h!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},b0}var NO;function NK(){return NO||(NO=1,g0.exports=EK()()),g0.exports}var kK=NK();const Xn=lo(kK);function fu(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{d(r.next(p))}catch(h){o(h)}}function u(p){try{d(r.throw(p))}catch(h){o(h)}}function d(p){p.done?s(p.value):i(p.value).then(l,u)}d((r=r.apply(t,e||[])).next())})}const IK=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Vd(t,e,n){const r=CK(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&kO(r,"path",s),kO(r,"relativePath",s),r}function CK(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=IK.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function kO(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const TK=[".DS_Store","Thumbs.db"];function RK(t){return fu(this,void 0,void 0,function*(){return $b(t)&&OK(t.dataTransfer)?PK(t.dataTransfer,t.type):jK(t)?qK(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?AK(t):[]})}function OK(t){return $b(t)}function jK(t){return $b(t)&&$b(t.target)}function $b(t){return typeof t=="object"&&t!==null}function qK(t){return RE(t.target.files).map(e=>Vd(e))}function AK(t){return fu(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Vd(n))})}function PK(t,e){return fu(this,void 0,void 0,function*(){if(t.items){const n=RE(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(FK));return IO(vD(r))}return IO(RE(t.files).map(n=>Vd(n)))})}function IO(t){return t.filter(e=>TK.indexOf(e.name)===-1)}function RE(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function FK(t){if(typeof t.webkitGetAsEntry!="function")return CO(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?xD(e):CO(t,e)}function vD(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?vD(n):[n]],[])}function CO(t,e){return fu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Vd(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Vd(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function DK(t){return fu(this,void 0,void 0,function*(){return t.isDirectory?xD(t):LK(t)})}function xD(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>fu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(DK));i.push(l),s()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}s()})}function LK(t){return fu(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Vd(r,t.fullPath);e(i)},r=>{n(r)})})})}var Zg={},TO;function MK(){return TO||(TO=1,Zg.__esModule=!0,Zg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0}),Zg}var $K=MK();const v0=lo($K);function RO(t){return WK(t)||zK(t)||_D(t)||BK()}function BK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WK(t){if(Array.isArray(t))return OE(t)}function OO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OO(Object(n),!0).forEach(function(r){wD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fh(t,e){return HK(t)||UK(t,e)||_D(t,e)||VK()}function VK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _D(t,e){if(t){if(typeof t=="string")return OE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OE(t,e)}}function OE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UK(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function HK(t){if(Array.isArray(t))return t}var QK=typeof v0=="function"?v0:v0.default,SD="file-invalid-type",ED="file-too-large",ND="file-too-small",kD="too-many-files",KK={FileInvalidType:SD,FileTooLarge:ED,FileTooSmall:ND,TooManyFiles:kD},GK=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:SD,message:"File type must be ".concat(r)}},qO=function(e){return{code:ED,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},AO=function(e){return{code:ND,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},JK={code:kD,message:"Too many files"};function ID(t,e){var n=t.type==="application/x-moz-file"||QK(t,e);return[n,n?null:GK(e)]}function CD(t,e,n){if(Fc(t.size))if(Fc(e)&&Fc(n)){if(t.size>n)return[!1,qO(n)];if(t.size<e)return[!1,AO(e)]}else{if(Fc(e)&&t.size<e)return[!1,AO(e)];if(Fc(n)&&t.size>n)return[!1,qO(n)]}return[!0,null]}function Fc(t){return t!=null}function ZK(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,l=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var d=ID(u,n),p=Fh(d,1),h=p[0],b=CD(u,r,i),x=Fh(b,1),_=x[0],N=l?l(u):null;return h&&_&&!N})}function Bb(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Yg(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function PO(t){t.preventDefault()}function YK(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function XK(t){return t.indexOf("Edge/")!==-1}function eG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return YK(t)||XK(t)}function Ho(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(l){return!Bb(r)&&l&&l.apply(void 0,[r].concat(s)),Bb(r)})}}function tG(){return"showOpenFilePicker"in window}function nG(t){if(Fc(t)){var e=Object.entries(t).filter(function(n){var r=Fh(n,2),i=r[0],s=r[1],o=!0;return TD(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(RD))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Fh(r,2),s=i[0],o=i[1];return jO(jO({},n),{},wD({},s,o))},{});return[{description:"Files",accept:e}]}return t}function rG(t){if(Fc(t))return Object.entries(t).reduce(function(e,n){var r=Fh(n,2),i=r[0],s=r[1];return[].concat(RO(e),[i],RO(s))},[]).filter(function(e){return TD(e)||RD(e)}).join(",")}function iG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function sG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function TD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function RD(t){return/^.*\.[\w]+$/.test(t)}var oG=["children"],aG=["open"],lG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],cG=["refKey","onChange","onClick"];function uG(t){return pG(t)||fG(t)||OD(t)||dG()}function dG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pG(t){if(Array.isArray(t))return jE(t)}function x0(t,e){return gG(t)||mG(t,e)||OD(t,e)||hG()}function hG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OD(t,e){if(t){if(typeof t=="string")return jE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jE(t,e)}}function jE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function gG(t){if(Array.isArray(t))return t}function FO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(n),!0).forEach(function(r){qE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zb(t,e){if(t==null)return{};var n=yG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Vv=Q.forwardRef(function(t,e){var n=t.children,r=zb(t,oG),i=qD(r),s=i.open,o=zb(i,aG);return Q.useImperativeHandle(e,function(){return{open:s}},[s]),Bn.createElement(Q.Fragment,null,n(kr(kr({},o),{},{open:s})))});Vv.displayName="Dropzone";var jD={disabled:!1,getFilesFromEvent:RK,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Vv.defaultProps=jD;Vv.propTypes={children:Xn.func,accept:Xn.objectOf(Xn.arrayOf(Xn.string)),multiple:Xn.bool,preventDropOnDocument:Xn.bool,noClick:Xn.bool,noKeyboard:Xn.bool,noDrag:Xn.bool,noDragEventsBubbling:Xn.bool,minSize:Xn.number,maxSize:Xn.number,maxFiles:Xn.number,disabled:Xn.bool,getFilesFromEvent:Xn.func,onFileDialogCancel:Xn.func,onFileDialogOpen:Xn.func,useFsAccessApi:Xn.bool,autoFocus:Xn.bool,onDragEnter:Xn.func,onDragLeave:Xn.func,onDragOver:Xn.func,onDrop:Xn.func,onDropAccepted:Xn.func,onDropRejected:Xn.func,onError:Xn.func,validator:Xn.func};var AE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function qD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=kr(kr({},jD),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,d=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,b=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,N=e.onFileDialogCancel,I=e.onFileDialogOpen,R=e.useFsAccessApi,T=e.autoFocus,O=e.preventDropOnDocument,A=e.noClick,D=e.noKeyboard,M=e.noDrag,W=e.noDragEventsBubbling,P=e.onError,j=e.validator,L=Q.useMemo(function(){return rG(n)},[n]),F=Q.useMemo(function(){return nG(n)},[n]),V=Q.useMemo(function(){return typeof I=="function"?I:DO},[I]),U=Q.useMemo(function(){return typeof N=="function"?N:DO},[N]),z=Q.useRef(null),ee=Q.useRef(null),Z=Q.useReducer(bG,AE),le=x0(Z,2),se=le[0],te=le[1],oe=se.isFocused,X=se.isFileDialogActive,ue=Q.useRef(typeof window<"u"&&window.isSecureContext&&R&&tG()),de=function(){!ue.current&&X&&setTimeout(function(){if(ee.current){var ut=ee.current.files;ut.length||(te({type:"closeDialog"}),U())}},300)};Q.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[ee,X,U,ue]);var ye=Q.useRef([]),we=function(ut){z.current&&z.current.contains(ut.target)||(ut.preventDefault(),ye.current=[])};Q.useEffect(function(){return O&&(document.addEventListener("dragover",PO,!1),document.addEventListener("drop",we,!1)),function(){O&&(document.removeEventListener("dragover",PO),document.removeEventListener("drop",we))}},[z,O]),Q.useEffect(function(){return!r&&T&&z.current&&z.current.focus(),function(){}},[z,T,r]);var Ne=Q.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me),ye.current=[].concat(uG(ye.current),[Me.target]),Yg(Me)&&Promise.resolve(i(Me)).then(function(ut){if(!(Bb(Me)&&!W)){var Kt=ut.length,Gt=Kt>0&&ZK({files:ut,accept:L,minSize:o,maxSize:s,multiple:l,maxFiles:u,validator:j}),hn=Kt>0&&!Gt;te({isDragAccept:Gt,isDragReject:hn,isDragActive:!0,type:"setDraggedFiles"}),d&&d(Me)}}).catch(function(ut){return Ne(ut)})},[i,d,Ne,W,L,o,s,l,u,j]),Oe=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me);var ut=Yg(Me);if(ut&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ut&&h&&h(Me),!1},[h,W]),De=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me);var ut=ye.current.filter(function(Gt){return z.current&&z.current.contains(Gt)}),Kt=ut.indexOf(Me.target);Kt!==-1&&ut.splice(Kt,1),ye.current=ut,!(ut.length>0)&&(te({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Yg(Me)&&p&&p(Me))},[z,p,W]),Je=Q.useCallback(function(Me,ut){var Kt=[],Gt=[];Me.forEach(function(hn){var or=ID(hn,L),Ln=x0(or,2),Hr=Ln[0],Ti=Ln[1],_r=CD(hn,o,s),Jt=x0(_r,2),Ui=Jt[0],Hi=Jt[1],Qi=j?j(hn):null;if(Hr&&Ui&&!Qi)Kt.push(hn);else{var fo=[Ti,Hi];Qi&&(fo=fo.concat(Qi)),Gt.push({file:hn,errors:fo.filter(function(da){return da})})}}),(!l&&Kt.length>1||l&&u>=1&&Kt.length>u)&&(Kt.forEach(function(hn){Gt.push({file:hn,errors:[JK]})}),Kt.splice(0)),te({acceptedFiles:Kt,fileRejections:Gt,isDragReject:Gt.length>0,type:"setFiles"}),b&&b(Kt,Gt,ut),Gt.length>0&&_&&_(Gt,ut),Kt.length>0&&x&&x(Kt,ut)},[te,l,L,o,s,u,b,x,_,j]),Xe=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me),ye.current=[],Yg(Me)&&Promise.resolve(i(Me)).then(function(ut){Bb(Me)&&!W||Je(ut,Me)}).catch(function(ut){return Ne(ut)}),te({type:"reset"})},[i,Je,Ne,W]),Ve=Q.useCallback(function(){if(ue.current){te({type:"openDialog"}),V();var Me={multiple:l,types:F};window.showOpenFilePicker(Me).then(function(ut){return i(ut)}).then(function(ut){Je(ut,null),te({type:"closeDialog"})}).catch(function(ut){iG(ut)?(U(ut),te({type:"closeDialog"})):sG(ut)?(ue.current=!1,ee.current?(ee.current.value=null,ee.current.click()):Ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ne(ut)});return}ee.current&&(te({type:"openDialog"}),V(),ee.current.value=null,ee.current.click())},[te,V,U,R,Je,Ne,F,l]),ct=Q.useCallback(function(Me){!z.current||!z.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ve())},[z,Ve]),_t=Q.useCallback(function(){te({type:"focus"})},[]),Tt=Q.useCallback(function(){te({type:"blur"})},[]),Ut=Q.useCallback(function(){A||(eG()?setTimeout(Ve,0):Ve())},[A,Ve]),rn=function(ut){return r?null:ut},xe=function(ut){return D?null:rn(ut)},be=function(ut){return M?null:rn(ut)},ke=function(ut){W&&ut.stopPropagation()},Ae=Q.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Kt=ut===void 0?"ref":ut,Gt=Me.role,hn=Me.onKeyDown,or=Me.onFocus,Ln=Me.onBlur,Hr=Me.onClick,Ti=Me.onDragEnter,_r=Me.onDragOver,Jt=Me.onDragLeave,Ui=Me.onDrop,Hi=zb(Me,lG);return kr(kr(qE({onKeyDown:xe(Ho(hn,ct)),onFocus:xe(Ho(or,_t)),onBlur:xe(Ho(Ln,Tt)),onClick:rn(Ho(Hr,Ut)),onDragEnter:be(Ho(Ti,ze)),onDragOver:be(Ho(_r,Oe)),onDragLeave:be(Ho(Jt,De)),onDrop:be(Ho(Ui,Xe)),role:typeof Gt=="string"&&Gt!==""?Gt:"presentation"},Kt,z),!r&&!D?{tabIndex:0}:{}),Hi)}},[z,ct,_t,Tt,Ut,ze,Oe,De,Xe,D,M,r]),Ue=Q.useCallback(function(Me){Me.stopPropagation()},[]),rt=Q.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Kt=ut===void 0?"ref":ut,Gt=Me.onChange,hn=Me.onClick,or=zb(Me,cG),Ln=qE({accept:L,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:rn(Ho(Gt,Xe)),onClick:rn(Ho(hn,Ue)),tabIndex:-1},Kt,ee);return kr(kr({},Ln),or)}},[ee,n,l,Xe,r]);return kr(kr({},se),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:z,inputRef:ee,open:rn(Ve)})}function bG(t,e){switch(e.type){case"focus":return kr(kr({},t),{},{isFocused:!0});case"blur":return kr(kr({},t),{},{isFocused:!1});case"openDialog":return kr(kr({},AE),{},{isFileDialogActive:!0});case"closeDialog":return kr(kr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return kr(kr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return kr(kr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return kr({},AE);default:return t}}function DO(){}const vG=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:KK,default:Vv,useDropzone:qD},Symbol.toStringTag,{value:"Module"})),xG=gn({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:wG}=vG,_G=({id:t,accept:e,text:n,variant:r,tva:i=xG,css:s,...o})=>{const{getRootProps:l,getInputProps:u,isDragActive:d,isDragReject:p}=wG({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:d,rejected:p,...r,css:s}).slots;return f.jsx("div",{...l(),className:h.base(),children:f.jsxs("label",{htmlFor:t,className:h.label(),children:[f.jsxs("div",{className:h.zone(),children:[f.jsx(Xt,{icon:wK,variant:{size:"4xl"}}),f.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||na.rich("Drag 'n' drop a file here")}),n?.message?f.jsx("p",{className:"text-xs",children:n.message}):null]}),f.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},SG=gn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-sm","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["flex-grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),AD=({logo:t,menu:e,actions:n,variant:r,tva:i=SG,css:s,children:o})=>{const l=i({...r,css:s}).slots;return f.jsxs("div",{className:l.base(),children:[f.jsx(_z,{position:"top-right"}),f.jsxs("div",{className:l.header(),children:[f.jsx("div",{children:t}),f.jsx("div",{className:"flex-grow",children:e}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),f.jsx("div",{className:l.content(),children:o??f.jsx(co,{})})]})},EG=gn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded","px-1","py-0.5","hover:text-blue-700","focus:outline-none","w-fit"]},variant:{},defaults:{}}),NG=Q.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=EG,css:i,children:s,...o},l)=>{const u=r({...n,css:i}).slots;return f.jsxs("a",{...o,ref:l,className:u.base(),children:[t&&f.jsx(Xt,{icon:t,...e}),s]})}),kG=L3(NG),At=t=>f.jsx(kG,{preload:"intent",...t}),IG=gn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-[10]","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-sm","pointer-events-auto"]}},defaults:{show:!0}}),CG=({show:t=!0,variant:e,tva:n=IG,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?f.jsx("div",{className:i.base(),children:f.jsx(Xt,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var qy={exports:{}},TG=qy.exports,LO;function RG(){return LO||(LO=1,function(t,e){(function(n,r){t.exports=r()})(TG,()=>(()=>{var n={d:(_,N)=>{for(var I in N)n.o(N,I)&&!n.o(_,I)&&Object.defineProperty(_,I,{enumerable:!0,get:N[I]})},o:(_,N)=>Object.prototype.hasOwnProperty.call(_,N)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,l;const u=()=>{if(!o){o=!0;try{l=h.storage||localStorage,l.getItem("")}catch{l=(()=>{const _={getItem:I=>N[I]||null,setItem:(I,R)=>{N[I]=R},removeItem:I=>{N[I]=void 0},clear:()=>{N={__proto__:_}}};let N={__proto__:_};return N})()}b()}},d="\0",p=(_,N,I=!0)=>I?[...JSON.stringify(_)].map(R=>String.fromCharCode(R.charCodeAt(0)+N)).join(""):JSON.parse([..._].map(R=>String.fromCharCode(R.charCodeAt(0)-N)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,N)=>p(_,N,!1),secret:75,storage:void 0};Object.seal(h);const b=(_=!1)=>{u();for(const N of Object.keys(l)){const I=l.getItem(N);let R;try{R=JSON.parse(I||"")}catch{continue}s(R)&&d in R&&(Date.now()>R.ttl||_)&&l.removeItem(N)}},x={config:h,set:(_,N,I={})=>{u();const R={...h,...I,encrypt:I.encrypt!==!1&&(I.encrypt||h.encrypt),ttl:I.ttl===null?null:I.ttl||h.ttl};try{const T=R.ttl&&!isNaN(R.ttl)&&R.ttl>0;let O=T?{[d]:N,ttl:Date.now()+1e3*R.ttl}:N;R.encrypt&&(T?O[d]=(R.encrypter||i)(O[d],R.secret):O=(R.encrypter||i)(O,R.secret)),l.setItem(_,JSON.stringify(O))}catch{return!1}},get:(_,N={})=>{u();const I=l.getItem(_),R={...h,...N,encrypt:N.encrypt!==!1&&(N.encrypt||h.encrypt),ttl:N.ttl===null?null:N.ttl||h.ttl};let T,O;try{T=JSON.parse(I||""),O=s(T)&&d in T,(R.decrypt||R.encrypt)&&(O?T[d]=(R.decrypter||i)(T[d],R.secret):T=(R.decrypter||i)(T,R.secret))}catch{}return O?Date.now()>T.ttl?(l.removeItem(_),null):T[d]:T!==void 0?T:I},flush:b,clear:()=>{u(),l.clear()},remove:_=>{u(),l.removeItem(_)}};return r.default})())}(qy)),qy.exports}var OG=RG();const jG=lo(OG),pf=jG,qG=gn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),nc=({variant:t,tva:e=qG,css:n,children:r})=>{const i=e({...t,css:n}).slots;return f.jsx("div",{className:i.base(),children:r})},PD=gn({slot:{base:["flex","flex-row","gap-2","items-center","rounded","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),AG=Q.forwardRef(({icon:t=null,variant:e,tva:n=PD,css:r,children:i,...s},o)=>{const l=n({...e,css:r}).slots;return f.jsxs("a",{...s,className:l.base(),ref:o,children:[_v(t)?f.jsx(Xt,{icon:t}):t,i]})}),PG=L3(AG),Yn=({match:t=[],variant:e,tva:n=PD,css:r,...i})=>{const s=E4(),o=t.some(l=>!!s(l));return f.jsx(PG,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},FG=gn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),Ud=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=FG,css:l})=>{const u=i?n.slice(0,i):n,d=o({...s,css:l}).slots;return f.jsxs("div",{className:d.base(),children:[n.length?null:e,u.map(p=>f.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&f.jsx(ff,{textTitle:t,target:f.jsx(bm,{iconEnabled:aD}),outside:!0,children:f.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>f.jsx(r,{entity:p},`items-${p.id}`))})})]})},DG=gn({slot:{base:[]},variant:{},defaults:{}}),ne=({label:t,fallback:e,variant:n,tva:r=DG,css:i})=>{const s=r({...n,css:i}).slots;return f.jsx("div",{className:s.base(),children:na.rich(t,e)})},FD=gn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),LG=gn({use:FD,slot:{},variant:{},defaults:{}}),MG=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:d,onChange:p,variant:h,tva:b=LG,css:x})=>{const _=b({...h,css:x}).slots,[N,I]=Q.useState(0),[R,T]=Q.useState(15),[O,A]=Q.useState(d||[]),[D,M]=Q.useState(void 0),W=eb({queryKey:[l,"PopupMultiSelect","data",{fulltext:D,page:N,size:R}],async queryFn(){return u({filter:{fulltext:D},cursor:{page:N,size:R}})}}),P=eb({queryKey:[l,"PopupMultiSelect","selected",{value:d}],async queryFn(){return u({filter:{idIn:d}})},enabled:!!d});return f.jsx(ff,{icon:t,target:f.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[f.jsx(Xt,{icon:P.data?.data?.length?Wv:zv}),P.data&&P.data.data.length?f.jsx(s,{entities:P.data.data}):n||f.jsx(ne,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:f.jsxs("div",{className:_.base(),children:[f.jsx("div",{className:_.content(),children:f.jsx(i,{cursor:{cursor:{page:N,size:R},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(ne,{label:"Total count of items (label)"}),onPage(j){I(j)},onSize(j){T(j),I(0)}},fulltext:{value:D,set(j){M(j),I(0)}},table:{data:W.data?.data??[],selection:{type:"multi",value:O,set(j){A(j)}}}})}),f.jsx(Mv.Consumer,{children:j=>f.jsxs("div",{className:_.footer(),children:[f.jsx(wn,{iconEnabled:Bi,iconDisabled:Bi,onClick:()=>{j?.close()},variant:{variant:"subtle"},children:f.jsx(ne,{label:"Close (label)"})}),f.jsx(wn,{iconEnabled:Mb,iconDisabled:Mb,disabled:!O.length&&!o,onClick:()=>{p(O),j?.close()},children:f.jsx(ne,{label:"Confirm selection (label)"})})]})})]})})},DD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:d,onChange:p,variant:h,tva:b=FD,css:x})=>{const _=b({...h,css:x}).slots,[N,I]=Q.useState(0),[R,T]=Q.useState(15),[O,A]=Q.useState(d?[d]:[]),[D,M]=Q.useState(void 0),W=eb({queryKey:[l,"PopupSelect","data",{fulltext:D,page:N,size:R}],async queryFn(){return u({filter:{fulltext:D},cursor:{page:N,size:R}})}}),P=eb({queryKey:[l,"PopupSelect","selected",{value:d}],async queryFn(){return u({filter:{id:d||void 0}})},enabled:!!d});return f.jsx(ff,{icon:t,target:f.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[f.jsx(Xt,{icon:P.data?.data?.[0]?Wv:zv}),P.data?.data?.[0]?f.jsx(s,{entity:P.data?.data?.[0]}):n||f.jsx(ne,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:f.jsxs("div",{className:_.base(),children:[f.jsx("div",{className:_.content(),children:f.jsx(i,{cursor:{cursor:{page:N,size:R},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:f.jsx(ne,{label:"Total count of items (label)"}),onPage(j){I(j)},onSize(j){T(j),I(0)}},fulltext:{value:D,set(j){M(j),I(0)}},table:{data:W.data?.data??[],selection:{type:"single",value:O,set(j){A(j)}}}})}),f.jsx(Mv.Consumer,{children:j=>f.jsxs("div",{className:_.footer(),children:[f.jsx(wn,{iconEnabled:Bi,iconDisabled:Bi,onClick:()=>{j?.close()},variant:{variant:"subtle"},children:f.jsx(ne,{label:"Close (label)"})}),f.jsx(wn,{iconEnabled:Mb,iconDisabled:Mb,disabled:!O.length&&!o,onClick:()=>{p(O?.[0]),j?.close()},children:f.jsx(ne,{label:"Confirm selection (label)"})})]})})]})})},$G=gn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),hf=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=$G,css:l})=>{const u=o({...s,css:l}).slots;return f.jsx(sN.Provider,{value:{inline:!0},children:f.jsx("div",{className:u.base(),children:f.jsxs("div",{className:u.container(),children:[f.jsx("div",{className:u.title(),children:f.jsx(e,{entity:t})}),f.jsx("div",{className:u.links(),children:f.jsx(n,{entity:t})}),f.jsx("div",{className:u.actions(),children:f.jsx(r,{entity:t})}),f.jsx("div",{className:u.extra(),children:f.jsx(i,{entity:t})})]})})})},BG=gn({slot:{base:["w-full","bg-slate-200","rounded","transition-all"],progress:["h-full","bg-blue-400","rounded","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),mf=({value:t,variant:e,tva:n=BG,css:r})=>{const i=n({...e,css:r}).slots;return f.jsx("div",{className:i.base(),children:f.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},zG=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},WG=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},Mr=t=>({onPage:zG(t),onSize:WG(t)}),$r=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Br=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},Ls=t=>e=>{t({search(n){return{...n,selection:e}}})},Pr=t=>({loading:f.jsx(ne,{label:`${t} - Loading (label)`}),success:f.jsx(ne,{label:`${t} - Success (label)`}),error:f.jsx(ne,{label:`${t} - Error (label)`})}),VG=gn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),Ms=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=VG,css:l})=>{const u=o({...s,css:l}).slots,d=Q.useContext(Mv),p=nn({async mutationFn(){return Sz.promise(n(),Pr(e))},async onSuccess(){await i?.(),d?.close()}});return f.jsxs("div",{className:u.base(),children:[f.jsx("div",{className:u.content(),children:t}),f.jsxs("div",{className:u.footer(),children:[f.jsx(wn,{variant:{variant:"subtle",size:"sm"},iconEnabled:Bi,onClick:()=>{d?.close(),r?.()},children:f.jsx(ne,{label:"Cancel (button)"})}),f.jsx(wn,{variant:{variant:"danger",size:"md"},iconEnabled:ai,onClick:()=>{p.mutate()},children:f.jsx(ne,{label:"Delete (button)"})})]})]})},UG=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),ca=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),ri=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=l=>{let u=l;return s&&(u=l.limit(s.size).offset(s.page*s.size)),u};return $.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},vr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await ri({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await UG({select:t,where:i,filter:r,query:e})}),xr=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},Xg=(t,e)=>$.custom().pipe(t.catch(e)),zr=({filter:t},{size:e=30}={size:30})=>$.object({filter:Xg(t.optional(),void 0),cursor:Xg(b9,{page:0,size:e}).default({page:0,size:e}),sort:Xg($.any().optional(),[]).default([]),selection:Xg($.array($.string()),[]).default([])}),HG=gn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),LD=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=HG,css:o,children:l})=>{const u=s({...i,css:o}).slots;return f.jsxs("div",{className:u.base(),children:[n?f.jsx(Xt,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,f.jsx("div",{className:u.title(),children:t}),f.jsx("div",{className:u.message(),children:e}),f.jsx("div",{className:u.body(),children:l})]})},uN=gn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),QG=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=uN,css:o})=>{const l=e.def.render,u=s({...i,css:o}).slots;return f.jsx("td",{className:u.td(),children:f.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[f.jsx(l,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?f.jsx(Xt,{icon:bK,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},KG=({table:t,row:e,action:n,variant:r,tva:i=uN,css:s})=>{const o=i({...r,css:s}).slots,l=n?.table,u=n?.row;return f.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[l||u||t.selection.enabled?f.jsx("td",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(Xt,{icon:t.selection.isSelected(e)?Wv:zv,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?f.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(d=>f.jsx(QG,{table:t,cell:d,variant:r,tva:i,css:s},`${e.id}-${d.column.id}`)),f.jsx("td",{})]})},Wr=({table:t,fulltext:e,cursor:n,empty:r=()=>f.jsx(LD,{icon:yK,textTitle:f.jsx(ne,{label:"Nothing here"}),textMessage:f.jsx(ne,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=uN,css:l})=>{const u=o({...s,css:l}).slots,d=i?.table,p=i?.row;return f.jsxs("div",{className:u.base(),children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?f.jsx(yD,{value:e.value,onFulltext:e.set}):null}),f.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[f.jsx(gO,{...n}),t.filter.is()&&f.jsx(bm,{iconEnabled:_O,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),f.jsx("div",{className:"relative overflow-x-auto",children:f.jsxs("table",{className:u.table(),children:[f.jsx("thead",{className:u.thead(),children:f.jsxs("tr",{children:[d||p||t.selection.enabled?f.jsx("th",{className:"w-0",children:f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?f.jsx(Xt,{icon:t.selection.isAll()?Wv:t.selection.isAny()?xK:zv,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,d?f.jsx(d,{table:t}):null]})}):null,t.visible.map(h=>{const b=h.def.header||(()=>null);return f.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx(b,{table:t}),f.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&f.jsx(Xt,{icon:_O,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),f.jsx("th",{})]})}),t.isEmpty?null:f.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>f.jsx(KG,{row:h,table:t,action:i,variant:s,tva:o,css:l},h.id))})]})}),t.isEmpty?f.jsx(r,{}):null,f.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[f.jsx("div",{}),f.jsx(gO,{...n})]})]})},di=[];for(let t=0;t<256;++t)di.push((t+256).toString(16).slice(1));function GG(t,e=0){return(di[t[e+0]]+di[t[e+1]]+di[t[e+2]]+di[t[e+3]]+"-"+di[t[e+4]]+di[t[e+5]]+"-"+di[t[e+6]]+di[t[e+7]]+"-"+di[t[e+8]]+di[t[e+9]]+"-"+di[t[e+10]]+di[t[e+11]]+di[t[e+12]]+di[t[e+13]]+di[t[e+14]]+di[t[e+15]]).toLowerCase()}let w0;const JG=new Uint8Array(16);function ZG(){if(!w0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");w0=crypto.getRandomValues.bind(crypto)}return w0(JG)}const YG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),MO={randomUUID:YG};function $O(t,e,n){if(MO.randomUUID&&!t)return MO.randomUUID();t=t||{};const r=t.random??t.rng?.()??ZG();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,GG(r)}const Vr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:l})=>{const u={...s?.value||{}},d=BR(u),p=new Set(o?.value),h=t.map(x=>({id:$O(),def:x,filter:x.filter?{is(){return x.filter?d.get(x.filter.path)!==void 0:!1},reset(){x.filter&&d.set(x.filter.path,void 0),s?.set({...u})},shallow(_,N){x.filter&&d.set(_,N),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),b=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const N=e.indexOf(x.def.name),I=e.indexOf(_.def.name);return(N===-1?1/0:N)-(I===-1?1/0:I)});return{columns:h,visible:b,rows:i?.map(x=>({id:$O(),data:x,cells:b.map(_=>({column:_,data:x,value:BR(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){d.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:l}},Ur=()=>t=>t,MD=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return f.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>f.jsx(ki,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||f.jsx(ne,{label:"No tags (label)"})})},XG=gn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),gf=({icon:t,title:e,subtitle:n,variant:r,tva:i=XG,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return f.jsxs("div",{className:o.base(),children:[f.jsxs("div",{className:o.title(),children:[t?f.jsx(Xt,{icon:t}):null,e]}),n?f.jsx("div",{className:o.subtitle(),children:n}):null]})};var ey={},BO;function eJ(){if(BO)return ey;BO=1;var t=D3();return ey.createRoot=t.createRoot,ey.hydrateRoot=t.hydrateRoot,ey}var tJ=eJ();const nJ=lo(tJ),dN=c4()({component:()=>f.jsxs(f.Fragment,{children:[f.jsx(O4,{}),f.jsx(co,{})]})}),rJ="modulepreload",iJ=function(t){return"/"+t},zO={},WO=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=iJ(u),u in zO)return;zO[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":rJ,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((b,x)=>{h.addEventListener("load",b),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},sJ=zt("/$locale")({component:co,loader:async({params:{locale:t}})=>{try{na.push((await oJ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function oJ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return WO(()=>import("./cs-94p7kLiB.js"),[]);case"../translation/en":case"../translation/en.yaml":return WO(()=>import("./en-BPkDWk6Z.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const $D="cs",aJ=[$D,"en"],lJ=zt("/")({loader:async()=>{throw Zh({to:"/$locale",params:{locale:b5({available:aJ,fallback:$D})}})}}),cJ=zt("/$locale/")({component:()=>{const{locale:t}=sn({from:"/$locale"});return f.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:f.jsxs("div",{className:"rounded bg-slate-50 p-4 shadow-md border border-slate-300",children:[f.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),f.jsx("ul",{children:f.jsx("li",{children:f.jsx(At,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:jt,bootstrap:uJ}=dK({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(gr`CURRENT_TIMESTAMP`).notNull()).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute(),await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).execute(),await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Route_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("routeId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] routeId",["routeId"],"Route",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addColumn("amount","float4").addColumn("priority","integer",r=>r.notNull().defaultTo(0)).execute()}}}),dJ=zt("/$locale/apps/derivean")({loader:uJ}),BD="icon-[proicons--game]",fJ=gn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),zD=({variant:t,tva:e=fJ,css:n})=>{const r=e({...t,css:n}).slots;return f.jsx("div",{className:r.base(),children:"DeRivean"})},rc="icon-[fluent--building-shop-20-regular]",Fn="icon-[hugeicons--resources-add]",pJ=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsxs(nc,{...t,children:[f.jsx(Yn,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:f.jsx(ne,{label:"Editor (menu)"})}),f.jsx(Yn,{icon:rc,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:f.jsx(ne,{label:"Blueprint list (menu)"})}),f.jsx(Yn,{icon:Fn,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(ne,{label:"Resource list (menu)"})}),f.jsx(Yn,{icon:cN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],children:f.jsx(ne,{label:"User list (menu)"})}),f.jsx(Yn,{icon:Ph,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:f.jsx(ne,{label:"Tag list (menu)"})})]})},vm=$.object({id:$.string(),name:$.string(),login:$.string()}),hJ=zt("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return vm.parse(pf.get("session"))}catch{throw Zh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=sn({from:"/$locale"}),{session:e}=hi({from:"/$locale/apps/derivean/root"});return f.jsx(AD,{logo:f.jsx(At,{to:"/$locale/apps/derivean/root",params:{locale:t},children:f.jsx(zD,{})}),menu:f.jsx(pJ,{}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(At,{icon:BD,to:"/$locale/apps/derivean/game",params:{locale:t}}),f.jsx(At,{icon:lN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}});function Xr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Xr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var mJ={value:()=>{}};function Uv(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ay(n)}function Ay(t){this._=t}function gJ(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ay.prototype=Uv.prototype={constructor:Ay,on:function(t,e){var n=this._,r=gJ(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=yJ(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=VO(n[i],t.name,e);else if(e==null)for(i in n)n[i]=VO(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ay(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function yJ(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function VO(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=mJ,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var PE="http://www.w3.org/1999/xhtml";const UO={svg:"http://www.w3.org/2000/svg",xhtml:PE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hv(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),UO.hasOwnProperty(e)?{space:UO[e],local:t}:t}function bJ(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===PE&&e.documentElement.namespaceURI===PE?e.createElement(t):e.createElementNS(n,t)}}function vJ(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function WD(t){var e=Hv(t);return(e.local?vJ:bJ)(e)}function xJ(){}function fN(t){return t==null?xJ:function(){return this.querySelector(t)}}function wJ(t){typeof t!="function"&&(t=fN(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,d,p=0;p<o;++p)(u=s[p])&&(d=t.call(u,u.__data__,p,s))&&("__data__"in u&&(d.__data__=u.__data__),l[p]=d);return new As(r,this._parents)}function _J(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function SJ(){return[]}function VD(t){return t==null?SJ:function(){return this.querySelectorAll(t)}}function EJ(t){return function(){return _J(t.apply(this,arguments))}}function NJ(t){typeof t=="function"?t=EJ(t):t=VD(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(t.call(u,u.__data__,d,o)),i.push(u));return new As(r,i)}function UD(t){return function(){return this.matches(t)}}function HD(t){return function(e){return e.matches(t)}}var kJ=Array.prototype.find;function IJ(t){return function(){return kJ.call(this.children,t)}}function CJ(){return this.firstElementChild}function TJ(t){return this.select(t==null?CJ:IJ(typeof t=="function"?t:HD(t)))}var RJ=Array.prototype.filter;function OJ(){return Array.from(this.children)}function jJ(t){return function(){return RJ.call(this.children,t)}}function qJ(t){return this.selectAll(t==null?OJ:jJ(typeof t=="function"?t:HD(t)))}function AJ(t){typeof t!="function"&&(t=UD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&l.push(u);return new As(r,this._parents)}function QD(t){return new Array(t.length)}function PJ(){return new As(this._enter||this._groups.map(QD),this._parents)}function Wb(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Wb.prototype={constructor:Wb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function FJ(t){return function(){return t}}function DJ(t,e,n,r,i,s){for(var o=0,l,u=e.length,d=s.length;o<d;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Wb(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function LJ(t,e,n,r,i,s,o){var l,u,d=new Map,p=e.length,h=s.length,b=new Array(p),x;for(l=0;l<p;++l)(u=e[l])&&(b[l]=x=o.call(u,u.__data__,l,e)+"",d.has(x)?i[l]=u:d.set(x,u));for(l=0;l<h;++l)x=o.call(t,s[l],l,s)+"",(u=d.get(x))?(r[l]=u,u.__data__=s[l],d.delete(x)):n[l]=new Wb(t,s[l]);for(l=0;l<p;++l)(u=e[l])&&d.get(b[l])===u&&(i[l]=u)}function MJ(t){return t.__data__}function $J(t,e){if(!arguments.length)return Array.from(this,MJ);var n=e?LJ:DJ,r=this._parents,i=this._groups;typeof t!="function"&&(t=FJ(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var p=r[d],h=i[d],b=h.length,x=BJ(t.call(p,p&&p.__data__,d,r)),_=x.length,N=l[d]=new Array(_),I=o[d]=new Array(_),R=u[d]=new Array(b);n(p,h,N,I,R,x,e);for(var T=0,O=0,A,D;T<_;++T)if(A=N[T]){for(T>=O&&(O=T+1);!(D=I[O])&&++O<_;);A._next=D||null}}return o=new As(o,r),o._enter=l,o._exit=u,o}function BJ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zJ(){return new As(this._exit||this._groups.map(QD),this._parents)}function WJ(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function VJ(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],p=r[u],h=d.length,b=l[u]=new Array(h),x,_=0;_<h;++_)(x=d[_]||p[_])&&(b[_]=x);for(;u<i;++u)l[u]=n[u];return new As(l,this._parents)}function UJ(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function HJ(t){t||(t=QJ);function e(h,b){return h&&b?t(h.__data__,b.__data__):!h-!b}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,p=0;p<l;++p)(d=o[p])&&(u[p]=d);u.sort(e)}return new As(i,this._parents).order()}function QJ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function KJ(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function GJ(){return Array.from(this)}function JJ(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ZJ(){let t=0;for(const e of this)++t;return t}function YJ(){return!this.node()}function XJ(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function eZ(t){return function(){this.removeAttribute(t)}}function tZ(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nZ(t,e){return function(){this.setAttribute(t,e)}}function rZ(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function iZ(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function sZ(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function oZ(t,e){var n=Hv(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?tZ:eZ:typeof e=="function"?n.local?sZ:iZ:n.local?rZ:nZ)(n,e))}function KD(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function aZ(t){return function(){this.style.removeProperty(t)}}function lZ(t,e,n){return function(){this.style.setProperty(t,e,n)}}function cZ(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function uZ(t,e,n){return arguments.length>1?this.each((e==null?aZ:typeof e=="function"?cZ:lZ)(t,e,n??"")):Hd(this.node(),t)}function Hd(t,e){return t.style.getPropertyValue(e)||KD(t).getComputedStyle(t,null).getPropertyValue(e)}function dZ(t){return function(){delete this[t]}}function fZ(t,e){return function(){this[t]=e}}function pZ(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function hZ(t,e){return arguments.length>1?this.each((e==null?dZ:typeof e=="function"?pZ:fZ)(t,e)):this.node()[t]}function GD(t){return t.trim().split(/^|\s+/)}function pN(t){return t.classList||new JD(t)}function JD(t){this._node=t,this._names=GD(t.getAttribute("class")||"")}JD.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ZD(t,e){for(var n=pN(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function YD(t,e){for(var n=pN(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function mZ(t){return function(){ZD(this,t)}}function gZ(t){return function(){YD(this,t)}}function yZ(t,e){return function(){(e.apply(this,arguments)?ZD:YD)(this,t)}}function bZ(t,e){var n=GD(t+"");if(arguments.length<2){for(var r=pN(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?yZ:e?mZ:gZ)(n,e))}function vZ(){this.textContent=""}function xZ(t){return function(){this.textContent=t}}function wZ(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _Z(t){return arguments.length?this.each(t==null?vZ:(typeof t=="function"?wZ:xZ)(t)):this.node().textContent}function SZ(){this.innerHTML=""}function EZ(t){return function(){this.innerHTML=t}}function NZ(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function kZ(t){return arguments.length?this.each(t==null?SZ:(typeof t=="function"?NZ:EZ)(t)):this.node().innerHTML}function IZ(){this.nextSibling&&this.parentNode.appendChild(this)}function CZ(){return this.each(IZ)}function TZ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function RZ(){return this.each(TZ)}function OZ(t){var e=typeof t=="function"?t:WD(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function jZ(){return null}function qZ(t,e){var n=typeof t=="function"?t:WD(t),r=e==null?jZ:typeof e=="function"?e:fN(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function AZ(){var t=this.parentNode;t&&t.removeChild(this)}function PZ(){return this.each(AZ)}function FZ(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function DZ(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function LZ(t){return this.select(t?DZ:FZ)}function MZ(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $Z(t){return function(e){t.call(this,e,this.__data__)}}function BZ(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function zZ(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function WZ(t,e,n){return function(){var r=this.__on,i,s=$Z(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function VZ(t,e,n){var r=BZ(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,p;u<d;++u)for(i=0,p=l[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?WZ:zZ,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function XD(t,e,n){var r=KD(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function UZ(t,e){return function(){return XD(this,t,e)}}function HZ(t,e){return function(){return XD(this,t,e.apply(this,arguments))}}function QZ(t,e){return this.each((typeof e=="function"?HZ:UZ)(t,e))}function*KZ(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var e2=[null];function As(t,e){this._groups=t,this._parents=e}function xm(){return new As([[document.documentElement]],e2)}function GZ(){return this}As.prototype=xm.prototype={constructor:As,select:wJ,selectAll:NJ,selectChild:TJ,selectChildren:qJ,filter:AJ,data:$J,enter:PJ,exit:zJ,join:WJ,merge:VJ,selection:GZ,order:UJ,sort:HJ,call:KJ,nodes:GJ,node:JJ,size:ZJ,empty:YJ,each:XJ,attr:oZ,style:uZ,property:hZ,classed:bZ,text:_Z,html:kZ,raise:CZ,lower:RZ,append:OZ,insert:qZ,remove:PZ,clone:LZ,datum:MZ,on:VZ,dispatch:QZ,[Symbol.iterator]:KZ};function Is(t){return typeof t=="string"?new As([[document.querySelector(t)]],[document.documentElement]):new As([[t]],e2)}function JZ(t){let e;for(;e=t.sourceEvent;)t=e;return t}function So(t,e){if(t=JZ(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const ZZ={passive:!1},Dh={capture:!0,passive:!1};function _0(t){t.stopImmediatePropagation()}function jd(t){t.preventDefault(),t.stopImmediatePropagation()}function t2(t){var e=t.document.documentElement,n=Is(t).on("dragstart.drag",jd,Dh);"onselectstart"in e?n.on("selectstart.drag",jd,Dh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function n2(t,e){var n=t.document.documentElement,r=Is(t).on("dragstart.drag",null);e&&(r.on("click.drag",jd,Dh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ty=t=>()=>t;function FE(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}FE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function YZ(t){return!t.ctrlKey&&!t.button}function XZ(){return this.parentNode}function eY(t,e){return e??{x:t.x,y:t.y}}function tY(){return navigator.maxTouchPoints||"ontouchstart"in this}function r2(){var t=YZ,e=XZ,n=eY,r=tY,i={},s=Uv("start","drag","end"),o=0,l,u,d,p,h=0;function b(A){A.on("mousedown.drag",x).filter(r).on("touchstart.drag",I).on("touchmove.drag",R,ZZ).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(A,D){if(!(p||!t.call(this,A,D))){var M=O(this,e.call(this,A,D),A,D,"mouse");M&&(Is(A.view).on("mousemove.drag",_,Dh).on("mouseup.drag",N,Dh),t2(A.view),_0(A),d=!1,l=A.clientX,u=A.clientY,M("start",A))}}function _(A){if(jd(A),!d){var D=A.clientX-l,M=A.clientY-u;d=D*D+M*M>h}i.mouse("drag",A)}function N(A){Is(A.view).on("mousemove.drag mouseup.drag",null),n2(A.view,d),jd(A),i.mouse("end",A)}function I(A,D){if(t.call(this,A,D)){var M=A.changedTouches,W=e.call(this,A,D),P=M.length,j,L;for(j=0;j<P;++j)(L=O(this,W,A,D,M[j].identifier,M[j]))&&(_0(A),L("start",A,M[j]))}}function R(A){var D=A.changedTouches,M=D.length,W,P;for(W=0;W<M;++W)(P=i[D[W].identifier])&&(jd(A),P("drag",A,D[W]))}function T(A){var D=A.changedTouches,M=D.length,W,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),W=0;W<M;++W)(P=i[D[W].identifier])&&(_0(A),P("end",A,D[W]))}function O(A,D,M,W,P,j){var L=s.copy(),F=So(j||M,D),V,U,z;if((z=n.call(A,new FE("beforestart",{sourceEvent:M,target:b,identifier:P,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:L}),W))!=null)return V=z.x-F[0]||0,U=z.y-F[1]||0,function ee(Z,le,se){var te=F,oe;switch(Z){case"start":i[P]=ee,oe=o++;break;case"end":delete i[P],--o;case"drag":F=So(se||le,D),oe=o;break}L.call(Z,A,new FE(Z,{sourceEvent:le,subject:z,target:b,identifier:P,active:oe,x:F[0]+V,y:F[1]+U,dx:F[0]-te[0],dy:F[1]-te[1],dispatch:L}),W)}}return b.filter=function(A){return arguments.length?(t=typeof A=="function"?A:ty(!!A),b):t},b.container=function(A){return arguments.length?(e=typeof A=="function"?A:ty(A),b):e},b.subject=function(A){return arguments.length?(n=typeof A=="function"?A:ty(A),b):n},b.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:ty(!!A),b):r},b.on=function(){var A=s.on.apply(s,arguments);return A===s?b:A},b.clickDistance=function(A){return arguments.length?(h=(A=+A)*A,b):Math.sqrt(h)},b}function hN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function i2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wm(){}var Lh=.7,Vb=1/Lh,qd="\\s*([+-]?\\d+)\\s*",Mh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nY=/^#([0-9a-f]{3,8})$/,rY=new RegExp(`^rgb\\(${qd},${qd},${qd}\\)$`),iY=new RegExp(`^rgb\\(${ea},${ea},${ea}\\)$`),sY=new RegExp(`^rgba\\(${qd},${qd},${qd},${Mh}\\)$`),oY=new RegExp(`^rgba\\(${ea},${ea},${ea},${Mh}\\)$`),aY=new RegExp(`^hsl\\(${Mh},${ea},${ea}\\)$`),lY=new RegExp(`^hsla\\(${Mh},${ea},${ea},${Mh}\\)$`),HO={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};hN(wm,$h,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:QO,formatHex:QO,formatHex8:cY,formatHsl:uY,formatRgb:KO,toString:KO});function QO(){return this.rgb().formatHex()}function cY(){return this.rgb().formatHex8()}function uY(){return s2(this).formatHsl()}function KO(){return this.rgb().formatRgb()}function $h(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nY.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?GO(e):n===3?new as(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ny(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ny(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rY.exec(t))?new as(e[1],e[2],e[3],1):(e=iY.exec(t))?new as(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sY.exec(t))?ny(e[1],e[2],e[3],e[4]):(e=oY.exec(t))?ny(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aY.exec(t))?YO(e[1],e[2]/100,e[3]/100,1):(e=lY.exec(t))?YO(e[1],e[2]/100,e[3]/100,e[4]):HO.hasOwnProperty(t)?GO(HO[t]):t==="transparent"?new as(NaN,NaN,NaN,0):null}function GO(t){return new as(t>>16&255,t>>8&255,t&255,1)}function ny(t,e,n,r){return r<=0&&(t=e=n=NaN),new as(t,e,n,r)}function dY(t){return t instanceof wm||(t=$h(t)),t?(t=t.rgb(),new as(t.r,t.g,t.b,t.opacity)):new as}function DE(t,e,n,r){return arguments.length===1?dY(t):new as(t,e,n,r??1)}function as(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}hN(as,DE,i2(wm,{brighter(t){return t=t==null?Vb:Math.pow(Vb,t),new as(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lh:Math.pow(Lh,t),new as(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new as(Kc(this.r),Kc(this.g),Kc(this.b),Ub(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JO,formatHex:JO,formatHex8:fY,formatRgb:ZO,toString:ZO}));function JO(){return`#${Wc(this.r)}${Wc(this.g)}${Wc(this.b)}`}function fY(){return`#${Wc(this.r)}${Wc(this.g)}${Wc(this.b)}${Wc((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZO(){const t=Ub(this.opacity);return`${t===1?"rgb(":"rgba("}${Kc(this.r)}, ${Kc(this.g)}, ${Kc(this.b)}${t===1?")":`, ${t})`}`}function Ub(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wc(t){return t=Kc(t),(t<16?"0":"")+t.toString(16)}function YO(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ko(t,e,n,r)}function s2(t){if(t instanceof ko)return new ko(t.h,t.s,t.l,t.opacity);if(t instanceof wm||(t=$h(t)),!t)return new ko;if(t instanceof ko)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new ko(o,l,u,t.opacity)}function pY(t,e,n,r){return arguments.length===1?s2(t):new ko(t,e,n,r??1)}function ko(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}hN(ko,pY,i2(wm,{brighter(t){return t=t==null?Vb:Math.pow(Vb,t),new ko(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lh:Math.pow(Lh,t),new ko(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new as(S0(t>=240?t-240:t+120,i,r),S0(t,i,r),S0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ko(XO(this.h),ry(this.s),ry(this.l),Ub(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ub(this.opacity);return`${t===1?"hsl(":"hsla("}${XO(this.h)}, ${ry(this.s)*100}%, ${ry(this.l)*100}%${t===1?")":`, ${t})`}`}}));function XO(t){return t=(t||0)%360,t<0?t+360:t}function ry(t){return Math.max(0,Math.min(1,t||0))}function S0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const o2=t=>()=>t;function hY(t,e){return function(n){return t+n*e}}function mY(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gY(t){return(t=+t)==1?a2:function(e,n){return n-e?mY(e,n,t):o2(isNaN(e)?n:e)}}function a2(t,e){var n=e-t;return n?hY(t,n):o2(isNaN(t)?e:t)}const ej=function t(e){var n=gY(e);function r(i,s){var o=n((i=DE(i)).r,(s=DE(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=a2(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=d(p),i+""}}return r.gamma=t,r}(1);function kl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var LE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,E0=new RegExp(LE.source,"g");function yY(t){return function(){return t}}function bY(t){return function(e){return t(e)+""}}function vY(t,e){var n=LE.lastIndex=E0.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=LE.exec(t))&&(i=E0.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:kl(r,i)})),n=E0.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?bY(u[0].x):yY(e):(e=u.length,function(d){for(var p=0,h;p<e;++p)l[(h=u[p]).i]=h.x(d);return l.join("")})}var tj=180/Math.PI,ME={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l2(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*tj,skewX:Math.atan(u)*tj,scaleX:o,scaleY:l}}var iy;function xY(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ME:l2(e.a,e.b,e.c,e.d,e.e,e.f)}function wY(t){return t==null||(iy||(iy=document.createElementNS("http://www.w3.org/2000/svg","g")),iy.setAttribute("transform",t),!(t=iy.transform.baseVal.consolidate()))?ME:(t=t.matrix,l2(t.a,t.b,t.c,t.d,t.e,t.f))}function c2(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,p,h,b,x,_){if(d!==h||p!==b){var N=x.push("translate(",null,e,null,n);_.push({i:N-4,x:kl(d,h)},{i:N-2,x:kl(p,b)})}else(h||b)&&x.push("translate("+h+e+b+n)}function o(d,p,h,b){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),b.push({i:h.push(i(h)+"rotate(",null,r)-2,x:kl(d,p)})):p&&h.push(i(h)+"rotate("+p+r)}function l(d,p,h,b){d!==p?b.push({i:h.push(i(h)+"skewX(",null,r)-2,x:kl(d,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(d,p,h,b,x,_){if(d!==h||p!==b){var N=x.push(i(x)+"scale(",null,",",null,")");_.push({i:N-4,x:kl(d,h)},{i:N-2,x:kl(p,b)})}else(h!==1||b!==1)&&x.push(i(x)+"scale("+h+","+b+")")}return function(d,p){var h=[],b=[];return d=t(d),p=t(p),s(d.translateX,d.translateY,p.translateX,p.translateY,h,b),o(d.rotate,p.rotate,h,b),l(d.skewX,p.skewX,h,b),u(d.scaleX,d.scaleY,p.scaleX,p.scaleY,h,b),d=p=null,function(x){for(var _=-1,N=b.length,I;++_<N;)h[(I=b[_]).i]=I.x(x);return h.join("")}}}var _Y=c2(xY,"px, ","px)","deg)"),SY=c2(wY,", ",")",")"),EY=1e-12;function nj(t){return((t=Math.exp(t))+1/t)/2}function NY(t){return((t=Math.exp(t))-1/t)/2}function kY(t){return((t=Math.exp(2*t))-1)/(t+1)}const IY=function t(e,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],p=o[0],h=o[1],b=o[2],x=p-l,_=h-u,N=x*x+_*_,I,R;if(N<EY)R=Math.log(b/d)/e,I=function(W){return[l+W*x,u+W*_,d*Math.exp(e*W*R)]};else{var T=Math.sqrt(N),O=(b*b-d*d+r*N)/(2*d*n*T),A=(b*b-d*d-r*N)/(2*b*n*T),D=Math.log(Math.sqrt(O*O+1)-O),M=Math.log(Math.sqrt(A*A+1)-A);R=(M-D)/e,I=function(W){var P=W*R,j=nj(D),L=d/(n*T)*(j*kY(e*P+D)-NY(D));return[l+L*x,u+L*_,d*j/nj(e*P+D)]}}return I.duration=R*1e3*e/Math.SQRT2,I}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4);var Qd=0,qp=0,gp=0,u2=1e3,Hb,Ap,Qb=0,ou=0,Qv=0,Bh=typeof performance=="object"&&performance.now?performance:Date,d2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mN(){return ou||(d2(CY),ou=Bh.now()+Qv)}function CY(){ou=0}function Kb(){this._call=this._time=this._next=null}Kb.prototype=f2.prototype={constructor:Kb,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?mN():+n)+(e==null?0:+e),!this._next&&Ap!==this&&(Ap?Ap._next=this:Hb=this,Ap=this),this._call=t,this._time=n,$E()},stop:function(){this._call&&(this._call=null,this._time=1/0,$E())}};function f2(t,e,n){var r=new Kb;return r.restart(t,e,n),r}function TY(){mN(),++Qd;for(var t=Hb,e;t;)(e=ou-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Qd}function rj(){ou=(Qb=Bh.now())+Qv,Qd=qp=0;try{TY()}finally{Qd=0,OY(),ou=0}}function RY(){var t=Bh.now(),e=t-Qb;e>u2&&(Qv-=e,Qb=t)}function OY(){for(var t,e=Hb,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Hb=n);Ap=t,$E(r)}function $E(t){if(!Qd){qp&&(qp=clearTimeout(qp));var e=t-ou;e>24?(t<1/0&&(qp=setTimeout(rj,t-Bh.now()-Qv)),gp&&(gp=clearInterval(gp))):(gp||(Qb=Bh.now(),gp=setInterval(RY,u2)),Qd=1,d2(rj))}}function ij(t,e,n){var r=new Kb;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var jY=Uv("start","end","cancel","interrupt"),qY=[],p2=0,sj=1,BE=2,Py=3,oj=4,zE=5,Fy=6;function Kv(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;AY(t,n,{name:e,index:r,group:i,on:jY,tween:qY,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:p2})}function gN(t,e){var n=Lo(t,e);if(n.state>p2)throw new Error("too late; already scheduled");return n}function ua(t,e){var n=Lo(t,e);if(n.state>Py)throw new Error("too late; already running");return n}function Lo(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function AY(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=f2(s,0,n.time);function s(d){n.state=sj,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var p,h,b,x;if(n.state!==sj)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===Py)return ij(o);x.state===oj?(x.state=Fy,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=Fy,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(ij(function(){n.state===Py&&(n.state=oj,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=BE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===BE){for(n.state=Py,i=new Array(b=n.tween.length),p=0,h=-1;p<b;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function l(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=zE,1),h=-1,b=i.length;++h<b;)i[h].call(t,p);n.state===zE&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Fy,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function Dy(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>BE&&r.state<zE,r.state=Fy,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function PY(t){return this.each(function(){Dy(this,t)})}function FY(t,e){var n,r;return function(){var i=ua(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function DY(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ua(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===e){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function LY(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Lo(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?FY:DY)(n,t,e))}function yN(t,e,n){var r=t._id;return t.each(function(){var i=ua(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Lo(i,r).value[e]}}function h2(t,e){var n;return(typeof e=="number"?kl:e instanceof $h?ej:(n=$h(e))?(e=n,ej):vY)(t,e)}function MY(t){return function(){this.removeAttribute(t)}}function $Y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BY(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function zY(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function WY(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function VY(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function UY(t,e){var n=Hv(t),r=n==="transform"?SY:h2;return this.attrTween(t,typeof e=="function"?(n.local?VY:WY)(n,r,yN(this,"attr."+t,e)):e==null?(n.local?$Y:MY)(n):(n.local?zY:BY)(n,r,e))}function HY(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function QY(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function KY(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&QY(t,s)),n}return i._value=e,i}function GY(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&HY(t,s)),n}return i._value=e,i}function JY(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Hv(t);return this.tween(n,(r.local?KY:GY)(r,e))}function ZY(t,e){return function(){gN(this,t).delay=+e.apply(this,arguments)}}function YY(t,e){return e=+e,function(){gN(this,t).delay=e}}function XY(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ZY:YY)(e,t)):Lo(this.node(),e).delay}function eX(t,e){return function(){ua(this,t).duration=+e.apply(this,arguments)}}function tX(t,e){return e=+e,function(){ua(this,t).duration=e}}function nX(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eX:tX)(e,t)):Lo(this.node(),e).duration}function rX(t,e){if(typeof e!="function")throw new Error;return function(){ua(this,t).ease=e}}function iX(t){var e=this._id;return arguments.length?this.each(rX(e,t)):Lo(this.node(),e).ease}function sX(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ua(this,t).ease=n}}function oX(t){if(typeof t!="function")throw new Error;return this.each(sX(this._id,t))}function aX(t){typeof t!="function"&&(t=UD(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&l.push(u);return new Ha(r,this._parents,this._name,this._id)}function lX(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],d=n[l],p=u.length,h=o[l]=new Array(p),b,x=0;x<p;++x)(b=u[x]||d[x])&&(h[x]=b);for(;l<r;++l)o[l]=e[l];return new Ha(o,this._parents,this._name,this._id)}function cX(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function uX(t,e,n){var r,i,s=cX(e)?gN:ua;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function dX(t,e){var n=this._id;return arguments.length<2?Lo(this.node(),n).on.on(t):this.each(uX(n,t,e))}function fX(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function pX(){return this.on("end.remove",fX(this._id))}function hX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fN(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),p,h,b=0;b<u;++b)(p=l[b])&&(h=t.call(p,p.__data__,b,l))&&("__data__"in p&&(h.__data__=p.__data__),d[b]=h,Kv(d[b],e,n,b,d,Lo(p,n)));return new Ha(s,this._parents,e,n)}function mX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=VD(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,p,h=0;h<d;++h)if(p=u[h]){for(var b=t.call(p,p.__data__,h,u),x,_=Lo(p,n),N=0,I=b.length;N<I;++N)(x=b[N])&&Kv(x,e,n,N,b,_);s.push(b),o.push(p)}return new Ha(s,o,e,n)}var gX=xm.prototype.constructor;function yX(){return new gX(this._groups,this._parents)}function bX(t,e){var n,r,i;return function(){var s=Hd(this,t),o=(this.style.removeProperty(t),Hd(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function m2(t){return function(){this.style.removeProperty(t)}}function vX(t,e,n){var r,i=n+"",s;return function(){var o=Hd(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function xX(t,e,n){var r,i,s;return function(){var o=Hd(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Hd(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function wX(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=ua(this,t),d=u.on,p=u.value[s]==null?l||(l=m2(e)):void 0;(d!==n||i!==p)&&(r=(n=d).copy()).on(o,i=p),u.on=r}}function _X(t,e,n){var r=(t+="")=="transform"?_Y:h2;return e==null?this.styleTween(t,bX(t,r)).on("end.style."+t,m2(t)):typeof e=="function"?this.styleTween(t,xX(t,r,yN(this,"style."+t,e))).each(wX(this._id,t)):this.styleTween(t,vX(t,r,e),n).on("end.style."+t,null)}function SX(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function EX(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&SX(t,o,n)),r}return s._value=e,s}function NX(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,EX(t,e,n??""))}function kX(t){return function(){this.textContent=t}}function IX(t){return function(){var e=t(this);this.textContent=e??""}}function CX(t){return this.tween("text",typeof t=="function"?IX(yN(this,"text",t)):kX(t==null?"":t+""))}function TX(t){return function(e){this.textContent=t.call(this,e)}}function RX(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&TX(i)),e}return r._value=t,r}function OX(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,RX(t))}function jX(){for(var t=this._name,e=this._id,n=g2(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var p=Lo(u,e);Kv(u,t,n,d,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Ha(r,this._parents,t,n)}function qX(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=ua(this,r),p=d.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),d.on=e}),i===0&&s()})}var AX=0;function Ha(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function g2(){return++AX}var Ca=xm.prototype;Ha.prototype={constructor:Ha,select:hX,selectAll:mX,selectChild:Ca.selectChild,selectChildren:Ca.selectChildren,filter:aX,merge:lX,selection:yX,transition:jX,call:Ca.call,nodes:Ca.nodes,node:Ca.node,size:Ca.size,empty:Ca.empty,each:Ca.each,on:dX,attr:UY,attrTween:JY,style:_X,styleTween:NX,text:CX,textTween:OX,remove:pX,tween:LY,delay:XY,duration:nX,ease:iX,easeVarying:oX,end:qX,[Symbol.iterator]:Ca[Symbol.iterator]};function PX(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var FX={time:null,delay:0,duration:250,ease:PX};function DX(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function LX(t){var e,n;t instanceof Ha?(e=t._id,t=t._name):(e=g2(),(n=FX).time=mN(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&Kv(u,t,e,d,o,n||DX(u,e));return new Ha(r,this._parents,t,e)}xm.prototype.interrupt=PY;xm.prototype.transition=LX;const sy=t=>()=>t;function MX(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Pa(t,e,n){this.k=t,this.x=e,this.y=n}Pa.prototype={constructor:Pa,scale:function(t){return t===1?this:new Pa(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Pa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Gv=new Pa(1,0,0);y2.prototype=Pa.prototype;function y2(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Gv;return t.__zoom}function N0(t){t.stopImmediatePropagation()}function yp(t){t.preventDefault(),t.stopImmediatePropagation()}function $X(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function BX(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function aj(){return this.__zoom||Gv}function zX(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function WX(){return navigator.maxTouchPoints||"ontouchstart"in this}function VX(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function b2(){var t=$X,e=BX,n=VX,r=zX,i=WX,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=IY,d=Uv("start","zoom","end"),p,h,b,x=500,_=150,N=0,I=10;function R(z){z.property("__zoom",aj).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",L).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}R.transform=function(z,ee,Z,le){var se=z.selection?z.selection():z;se.property("__zoom",aj),z!==se?D(z,ee,Z,le):se.interrupt().each(function(){M(this,arguments).event(le).start().zoom(null,typeof ee=="function"?ee.apply(this,arguments):ee).end()})},R.scaleBy=function(z,ee,Z,le){R.scaleTo(z,function(){var se=this.__zoom.k,te=typeof ee=="function"?ee.apply(this,arguments):ee;return se*te},Z,le)},R.scaleTo=function(z,ee,Z,le){R.transform(z,function(){var se=e.apply(this,arguments),te=this.__zoom,oe=Z==null?A(se):typeof Z=="function"?Z.apply(this,arguments):Z,X=te.invert(oe),ue=typeof ee=="function"?ee.apply(this,arguments):ee;return n(O(T(te,ue),oe,X),se,o)},Z,le)},R.translateBy=function(z,ee,Z,le){R.transform(z,function(){return n(this.__zoom.translate(typeof ee=="function"?ee.apply(this,arguments):ee,typeof Z=="function"?Z.apply(this,arguments):Z),e.apply(this,arguments),o)},null,le)},R.translateTo=function(z,ee,Z,le,se){R.transform(z,function(){var te=e.apply(this,arguments),oe=this.__zoom,X=le==null?A(te):typeof le=="function"?le.apply(this,arguments):le;return n(Gv.translate(X[0],X[1]).scale(oe.k).translate(typeof ee=="function"?-ee.apply(this,arguments):-ee,typeof Z=="function"?-Z.apply(this,arguments):-Z),te,o)},le,se)};function T(z,ee){return ee=Math.max(s[0],Math.min(s[1],ee)),ee===z.k?z:new Pa(ee,z.x,z.y)}function O(z,ee,Z){var le=ee[0]-Z[0]*z.k,se=ee[1]-Z[1]*z.k;return le===z.x&&se===z.y?z:new Pa(z.k,le,se)}function A(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function D(z,ee,Z,le){z.on("start.zoom",function(){M(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(le).end()}).tween("zoom",function(){var se=this,te=arguments,oe=M(se,te).event(le),X=e.apply(se,te),ue=Z==null?A(X):typeof Z=="function"?Z.apply(se,te):Z,de=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),ye=se.__zoom,we=typeof ee=="function"?ee.apply(se,te):ee,Ne=u(ye.invert(ue).concat(de/ye.k),we.invert(ue).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var Oe=Ne(ze),De=de/Oe[2];ze=new Pa(De,ue[0]-Oe[0]*De,ue[1]-Oe[1]*De)}oe.zoom(null,ze)}})}function M(z,ee,Z){return!Z&&z.__zooming||new W(z,ee)}function W(z,ee){this.that=z,this.args=ee,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,ee),this.taps=0}W.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,ee){return this.mouse&&z!=="mouse"&&(this.mouse[1]=ee.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=ee.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=ee.invert(this.touch1[0])),this.that.__zoom=ee,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var ee=Is(this.that).datum();d.call(z,this.that,new MX(z,{sourceEvent:this.sourceEvent,target:R,type:z,transform:this.that.__zoom,dispatch:d}),ee)}};function P(z,...ee){if(!t.apply(this,arguments))return;var Z=M(this,ee).event(z),le=this.__zoom,se=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),te=So(z);if(Z.wheel)(Z.mouse[0][0]!==te[0]||Z.mouse[0][1]!==te[1])&&(Z.mouse[1]=le.invert(Z.mouse[0]=te)),clearTimeout(Z.wheel);else{if(le.k===se)return;Z.mouse=[te,le.invert(te)],Dy(this),Z.start()}yp(z),Z.wheel=setTimeout(oe,_),Z.zoom("mouse",n(O(T(le,se),Z.mouse[0],Z.mouse[1]),Z.extent,o));function oe(){Z.wheel=null,Z.end()}}function j(z,...ee){if(b||!t.apply(this,arguments))return;var Z=z.currentTarget,le=M(this,ee,!0).event(z),se=Is(z.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),te=So(z,Z),oe=z.clientX,X=z.clientY;t2(z.view),N0(z),le.mouse=[te,this.__zoom.invert(te)],Dy(this),le.start();function ue(ye){if(yp(ye),!le.moved){var we=ye.clientX-oe,Ne=ye.clientY-X;le.moved=we*we+Ne*Ne>N}le.event(ye).zoom("mouse",n(O(le.that.__zoom,le.mouse[0]=So(ye,Z),le.mouse[1]),le.extent,o))}function de(ye){se.on("mousemove.zoom mouseup.zoom",null),n2(ye.view,le.moved),yp(ye),le.event(ye).end()}}function L(z,...ee){if(t.apply(this,arguments)){var Z=this.__zoom,le=So(z.changedTouches?z.changedTouches[0]:z,this),se=Z.invert(le),te=Z.k*(z.shiftKey?.5:2),oe=n(O(T(Z,te),le,se),e.apply(this,ee),o);yp(z),l>0?Is(this).transition().duration(l).call(D,oe,le,z):Is(this).call(R.transform,oe,le,z)}}function F(z,...ee){if(t.apply(this,arguments)){var Z=z.touches,le=Z.length,se=M(this,ee,z.changedTouches.length===le).event(z),te,oe,X,ue;for(N0(z),oe=0;oe<le;++oe)X=Z[oe],ue=So(X,this),ue=[ue,this.__zoom.invert(ue),X.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ue[2]&&(se.touch1=ue,se.taps=0):(se.touch0=ue,te=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),te&&(se.taps<2&&(h=ue[0],p=setTimeout(function(){p=null},x)),Dy(this),se.start())}}function V(z,...ee){if(this.__zooming){var Z=M(this,ee).event(z),le=z.changedTouches,se=le.length,te,oe,X,ue;for(yp(z),te=0;te<se;++te)oe=le[te],X=So(oe,this),Z.touch0&&Z.touch0[2]===oe.identifier?Z.touch0[0]=X:Z.touch1&&Z.touch1[2]===oe.identifier&&(Z.touch1[0]=X);if(oe=Z.that.__zoom,Z.touch1){var de=Z.touch0[0],ye=Z.touch0[1],we=Z.touch1[0],Ne=Z.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,Oe=(Oe=Ne[0]-ye[0])*Oe+(Oe=Ne[1]-ye[1])*Oe;oe=T(oe,Math.sqrt(ze/Oe)),X=[(de[0]+we[0])/2,(de[1]+we[1])/2],ue=[(ye[0]+Ne[0])/2,(ye[1]+Ne[1])/2]}else if(Z.touch0)X=Z.touch0[0],ue=Z.touch0[1];else return;Z.zoom("touch",n(O(oe,X,ue),Z.extent,o))}}function U(z,...ee){if(this.__zooming){var Z=M(this,ee).event(z),le=z.changedTouches,se=le.length,te,oe;for(N0(z),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),te=0;te<se;++te)oe=le[te],Z.touch0&&Z.touch0[2]===oe.identifier?delete Z.touch0:Z.touch1&&Z.touch1[2]===oe.identifier&&delete Z.touch1;if(Z.touch1&&!Z.touch0&&(Z.touch0=Z.touch1,delete Z.touch1),Z.touch0)Z.touch0[1]=this.__zoom.invert(Z.touch0[0]);else if(Z.end(),Z.taps===2&&(oe=So(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<I)){var X=Is(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return R.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:sy(+z),R):r},R.filter=function(z){return arguments.length?(t=typeof z=="function"?z:sy(!!z),R):t},R.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:sy(!!z),R):i},R.extent=function(z){return arguments.length?(e=typeof z=="function"?z:sy([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),R):e},R.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],R):[s[0],s[1]]},R.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],R):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},R.constrain=function(z){return arguments.length?(n=z,R):n},R.duration=function(z){return arguments.length?(l=+z,R):l},R.interpolate=function(z){return arguments.length?(u=z,R):u},R.on=function(){var z=d.on.apply(d,arguments);return z===d?R:z},R.clickDistance=function(z){return arguments.length?(N=(z=+z)*z,R):Math.sqrt(N)},R.tapDistance=function(z){return arguments.length?(I=+z,R):I},R}const Qa={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},zh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],v2=["Enter"," ","Escape"];var Kd;(function(t){t.Strict="strict",t.Loose="loose"})(Kd||(Kd={}));var Gc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Gc||(Gc={}));var Wh;(function(t){t.Partial="partial",t.Full="full"})(Wh||(Wh={}));const x2={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ql;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ql||(ql={}));var Vh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Vh||(Vh={}));var Lt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Lt||(Lt={}));const lj={[Lt.Left]:Lt.Right,[Lt.Right]:Lt.Left,[Lt.Top]:Lt.Bottom,[Lt.Bottom]:Lt.Top};function w2(t){return t===null?null:t?"valid":"invalid"}const _2=t=>"id"in t&&"source"in t&&"target"in t,UX=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),bN=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),_m=(t,e=[0,0])=>{const{width:n,height:r}=Ka(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},HX=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):bN(i)?i:e.nodeLookup.get(i.id));const l=o?Gb(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Jv(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Zv(n)},Sm=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=Gb(r);n=Jv(n,i)}}),Zv(n)},S2=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Em(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const d of t.values()){const{measured:p,selectable:h=!0,hidden:b=!1}=d;if(o&&!h||b)continue;const x=p.width??d.width??d.initialWidth??null,_=p.height??d.height??d.initialHeight??null,N=Uh(l,Jd(d)),I=(x??0)*(_??0),R=s&&N>0;(!d.internals.handleBounds||R||N>=I||d.dragging)&&u.push(d)}return u},QX=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function WE(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function VE({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const l=Sm(t),u=vN(l,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function E2({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Qa.error005());else{const x=l.measured.width,_=l.measured.height;x&&_&&(h=[[u,d],[u+x,d+_]])}else l&&Zd(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const b=Zd(h)?au(e,h,o.measured):e;return{position:{x:b.x-u+o.measured.width*p[0],y:b.y-d+o.measured.height*p[1]},positionAbsolute:b}}async function KX({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(b=>b.id)),o=[];for(const b of n){if(b.deletable===!1)continue;const x=s.has(b.id),_=!x&&b.parentId&&o.find(N=>N.id===b.parentId);(x||_)&&o.push(b)}const l=new Set(e.map(b=>b.id)),u=r.filter(b=>b.deletable!==!1),p=QX(o,u);for(const b of u)l.has(b.id)&&!p.find(_=>_.id===b.id)&&p.push(b);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const Gd=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),au=(t={x:0,y:0},e,n)=>({x:Gd(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Gd(t.y,e[0][1],e[1][1]-(n?.height??0))});function N2(t,e,n){const{width:r,height:i}=Ka(n),{x:s,y:o}=n.internals.positionAbsolute;return au(t,[[s,o],[s+r,o+i]],e)}const cj=(t,e,n)=>t<e?Gd(Math.abs(t-e),1,e)/e:t>n?-Gd(Math.abs(t-n),1,e)/e:0,k2=(t,e,n=15,r=40)=>{const i=cj(t.x,r,e.width-r)*n,s=cj(t.y,r,e.height-r)*n;return[i,s]},Jv=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),UE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Zv=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Jd=(t,e=[0,0])=>{const{x:n,y:r}=bN(t)?t.internals.positionAbsolute:_m(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Gb=(t,e=[0,0])=>{const{x:n,y:r}=bN(t)?t.internals.positionAbsolute:_m(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},I2=(t,e)=>Zv(Jv(UE(t),UE(e))),Uh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},uj=t=>Ro(t.width)&&Ro(t.height)&&Ro(t.x)&&Ro(t.y),Ro=t=>!isNaN(t)&&isFinite(t),GX=(t,e)=>{},Yv=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Em=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?Yv(l,o):l},C2=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),vN=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),l=n/(t.height*(1+s)),u=Math.min(o,l),d=Gd(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,b=e/2-p*d,x=n/2-h*d;return{x:b,y:x,zoom:d}},Jb=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Zd(t){return t!==void 0&&t!=="parent"}function Ka(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function T2(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function R2(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function dj(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function ih(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=La(t),l=Em({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Yv(l,e):l;return{xSnapped:u,ySnapped:d,...l}}const Xv=t=>({width:t.offsetWidth,height:t.offsetHeight}),O2=t=>t?.getRootNode?.()||window?.document,JX=["INPUT","SELECT","TEXTAREA"];function HE(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:JX.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const j2=t=>"clientX"in t,La=(t,e)=>{const n=j2(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},fj=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...Xv(o)}})};function q2({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,d=e*.125+s*.375+l*.375+r*.125,p=Math.abs(u-t),h=Math.abs(d-e);return[u,d,p,h]}function oy(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function pj({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Lt.Left:return[e-oy(e-r,s),n];case Lt.Right:return[e+oy(r-e,s),n];case Lt.Top:return[e,n-oy(n-i,s)];case Lt.Bottom:return[e,n+oy(i-n,s)]}}function xN({sourceX:t,sourceY:e,sourcePosition:n=Lt.Bottom,targetX:r,targetY:i,targetPosition:s=Lt.Top,curvature:o=.25}){const[l,u]=pj({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[d,p]=pj({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,b,x,_]=q2({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${t},${e} C${l},${u} ${d},${p} ${r},${i}`,h,b,x,_]}function A2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function ZX({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function YX({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=Jv(Gb(t),Gb(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Uh(o,Zv(s))>0}const XX=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,eee=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),tee=(t,e)=>{if(!t.source||!t.target)return e;let n;return _2(t)?n={...t}:n={...t,id:XX(t)},eee(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function P2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=A2({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const hj={[Lt.Left]:{x:-1,y:0},[Lt.Right]:{x:1,y:0},[Lt.Top]:{x:0,y:-1},[Lt.Bottom]:{x:0,y:1}},nee=({source:t,sourcePosition:e=Lt.Bottom,target:n})=>e===Lt.Left||e===Lt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},mj=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function ree({source:t,sourcePosition:e=Lt.Bottom,target:n,targetPosition:r=Lt.Top,center:i,offset:s}){const o=hj[e],l=hj[r],u={x:t.x+o.x*s,y:t.y+o.y*s},d={x:n.x+l.x*s,y:n.y+l.y*s},p=nee({source:u,sourcePosition:e,target:d}),h=p.x!==0?"x":"y",b=p[h];let x=[],_,N;const I={x:0,y:0},R={x:0,y:0},[T,O,A,D]=A2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){_=i.x??T,N=i.y??O;const W=[{x:_,y:u.y},{x:_,y:d.y}],P=[{x:u.x,y:N},{x:d.x,y:N}];o[h]===b?x=h==="x"?W:P:x=h==="x"?P:W}else{const W=[{x:u.x,y:d.y}],P=[{x:d.x,y:u.y}];if(h==="x"?x=o.x===b?P:W:x=o.y===b?W:P,e===r){const U=Math.abs(t[h]-n[h]);if(U<=s){const z=Math.min(s-1,s-U);o[h]===b?I[h]=(u[h]>t[h]?-1:1)*z:R[h]=(d[h]>n[h]?-1:1)*z}}if(e!==r){const U=h==="x"?"y":"x",z=o[h]===l[U],ee=u[U]>d[U],Z=u[U]<d[U];(o[h]===1&&(!z&&ee||z&&Z)||o[h]!==1&&(!z&&Z||z&&ee))&&(x=h==="x"?W:P)}const j={x:u.x+I.x,y:u.y+I.y},L={x:d.x+R.x,y:d.y+R.y},F=Math.max(Math.abs(j.x-x[0].x),Math.abs(L.x-x[0].x)),V=Math.max(Math.abs(j.y-x[0].y),Math.abs(L.y-x[0].y));F>=V?(_=(j.x+L.x)/2,N=x[0].y):(_=x[0].x,N=(j.y+L.y)/2)}return[[t,{x:u.x+I.x,y:u.y+I.y},...x,{x:d.x+R.x,y:d.y+R.y},n],_,N,A,D]}function iee(t,e,n,r){const i=Math.min(mj(t,e)/2,mj(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const d=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function QE({sourceX:t,sourceY:e,sourcePosition:n=Lt.Bottom,targetX:r,targetY:i,targetPosition:s=Lt.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20}){const[p,h,b,x,_]=ree({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d});return[p.reduce((I,R,T)=>{let O="";return T>0&&T<p.length-1?O=iee(p[T-1],R,p[T+1],o):O=`${T===0?"M":"L"}${R.x} ${R.y}`,I+=O,I},""),h,b,x,_]}function gj(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function see(t){const{sourceNode:e,targetNode:n}=t;if(!gj(e)||!gj(n))return null;const r=e.internals.handleBounds||yj(e.handles),i=n.internals.handleBounds||yj(n.handles),s=bj(r?.source??[],t.sourceHandle),o=bj(t.connectionMode===Kd.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Qa.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Lt.Bottom,u=o?.position||Lt.Top,d=Hh(e,s,l),p=Hh(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function yj(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Hh(t,e,n=Lt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Ka(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Lt.Top:return{x:i+o/2,y:s};case Lt.Right:return{x:i+o,y:s+l/2};case Lt.Bottom:return{x:i+o/2,y:s+l};case Lt.Left:return{x:i,y:s+l/2}}}function bj(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function KE(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function oee(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=KE(u,e);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const wN={nodeOrigin:[0,0],nodeExtent:zh,elevateNodesOnSelect:!0,defaults:{}},aee={...wN,checkEquality:!0};function _N(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function lee(t,e,n){const r=_N(wN,n);for(const i of t.values())if(i.parentId)SN(i,t,e,r);else{const s=_m(i,r.nodeOrigin),o=Zd(i.extent)?i.extent:r.nodeExtent,l=au(s,o,Ka(i));i.internals.positionAbsolute=l}}function GE(t,e,n,r){const i=_N(aee,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const l of t){let u=s.get(l.id);if(i.checkEquality&&l===u?.internals.userNode)e.set(l.id,u);else{const d=_m(l,i.nodeOrigin),p=Zd(l.extent)?l.extent:i.nodeExtent,h=au(d,p,Ka(l));u={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:l.measured?u?.internals.handleBounds:void 0,z:F2(l,o),userNode:l}},e.set(l.id,u)}l.parentId&&SN(u,e,n,r)}}function cee(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function SN(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=_N(wN,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}cee(t,n);const d=i?1e3:0,{x:p,y:h,z:b}=uee(t,u,s,o,d),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:b}})}function F2(t,e){return(Ro(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function uee(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=Ka(t),u=_m(t,n),d=Zd(t.extent)?au(u,t.extent,l):u;let p=au({x:s+d.x,y:o+d.y},r,l);t.extent==="parent"&&(p=N2(p,l,e));const h=F2(t,i),b=e.internals.z??0;return{x:p.x,y:p.y,z:b>h?b:h}}function EN(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Jd(l),d=I2(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,p=Ka(l),h=l.origin??r,b=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,x=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),N=Math.max(p.height,Math.round(o.height)),I=(_-p.width)*h[0],R=(N-p.height)*h[1];(b>0||x>0||I||R)&&(i.push({id:u,type:"position",position:{x:l.position.x-b+I,y:l.position.y-x+R}}),n.get(u)?.forEach(T=>{t.some(O=>O.id===T.id)||i.push({id:T.id,type:"position",position:{x:T.position.x+b,y:T.position.y+x}})})),(p.width<o.width||p.height<o.height||b||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?h[0]*b-I:0),height:N+(x?h[1]*x-R:0)}})}),i}function dee(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const b of t.values()){const x=e.get(b.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),l=!0;continue}const _=Xv(b.nodeElement),N=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(N||!x.internals.handleBounds||b.force))){const R=b.nodeElement.getBoundingClientRect(),T=Zd(x.extent)?x.extent:s;let{positionAbsolute:O}=x.internals;x.parentId&&x.extent==="parent"?O=N2(O,_,e.get(x.parentId)):T&&(O=au(O,T,_));const A={...x,measured:_,internals:{...x.internals,positionAbsolute:O,handleBounds:{source:fj("source",b.nodeElement,R,p,x.id),target:fj("target",b.nodeElement,R,p,x.id)}}};e.set(x.id,A),x.parentId&&SN(A,e,n,{nodeOrigin:i}),l=!0,N&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:Jd(A,i)}))}}if(h.length>0){const b=EN(h,e,n,i);u.push(...b)}return{changes:u,updatedInternals:l}}async function fee({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function vj(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,e))}}function D2(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,p=`${s}-${l}--${i}-${o}`;vj("source",u,p,t,i,o),vj("target",u,d,t,s,l),e.set(r.id,r)}}function L2(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:L2(n,e):!1}function xj(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function pee(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!L2(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function k0({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function hee({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},p=null,h=!1,b=null,x=!1;function _({noDragClassName:I,handleSelector:R,domNode:T,isSelectable:O,nodeId:A,nodeClickDistance:D=0}){b=Is(T);function M({x:L,y:F},V){const{nodeLookup:U,nodeExtent:z,snapGrid:ee,snapToGrid:Z,nodeOrigin:le,onNodeDrag:se,onSelectionDrag:te,onError:oe,updateNodePositions:X}=e();s={x:L,y:F};let ue=!1,de={x:0,y:0,x2:0,y2:0};if(l.size>1&&z){const ye=Sm(l);de=UE(ye)}for(const[ye,we]of l){if(!U.has(ye))continue;let Ne={x:L-we.distance.x,y:F-we.distance.y};Z&&(Ne=Yv(Ne,ee));let ze=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(l.size>1&&z&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+z[0][0],Ve=Je.x+we.measured.width-de.x2+z[1][0],ct=Je.y-de.y+z[0][1],_t=Je.y+we.measured.height-de.y2+z[1][1];ze=[[Xe,ct],[Ve,_t]]}const{position:Oe,positionAbsolute:De}=E2({nodeId:ye,nextPosition:Ne,nodeLookup:U,nodeExtent:ze,nodeOrigin:le,onError:oe});ue=ue||we.position.x!==Oe.x||we.position.y!==Oe.y,we.position=Oe,we.internals.positionAbsolute=De}if(ue&&(X(l,!0),V&&(r||se||!A&&te))){const[ye,we]=k0({nodeId:A,dragItems:l,nodeLookup:U});r?.(V,l,ye,we),se?.(V,ye,we),A||te?.(V,we)}}async function W(){if(!p)return;const{transform:L,panBy:F,autoPanSpeed:V}=e(),[U,z]=k2(d,p,V);(U!==0||z!==0)&&(s.x=(s.x??0)-U/L[2],s.y=(s.y??0)-z/L[2],await F({x:U,y:z})&&M(s,null)),o=requestAnimationFrame(W)}function P(L){const{nodeLookup:F,multiSelectionActive:V,nodesDraggable:U,transform:z,snapGrid:ee,snapToGrid:Z,selectNodesOnDrag:le,onNodeDragStart:se,onSelectionDragStart:te,unselectNodesAndEdges:oe}=e();h=!0,(!le||!O)&&!V&&A&&(F.get(A)?.selected||oe()),O&&le&&A&&t?.(A);const X=ih(L.sourceEvent,{transform:z,snapGrid:ee,snapToGrid:Z,containerBounds:p});if(s=X,l=pee(F,U,X,A),l.size>0&&(n||se||!A&&te)){const[ue,de]=k0({nodeId:A,dragItems:l,nodeLookup:F});n?.(L.sourceEvent,l,ue,de),se?.(L.sourceEvent,ue,de),A||te?.(L.sourceEvent,de)}}const j=r2().clickDistance(D).on("start",L=>{const{domNode:F,nodeDragThreshold:V,transform:U,snapGrid:z,snapToGrid:ee}=e();p=F?.getBoundingClientRect()||null,x=!1,V===0&&P(L),s=ih(L.sourceEvent,{transform:U,snapGrid:z,snapToGrid:ee,containerBounds:p}),d=La(L.sourceEvent,p)}).on("drag",L=>{const{autoPanOnNodeDrag:F,transform:V,snapGrid:U,snapToGrid:z,nodeDragThreshold:ee,nodeLookup:Z}=e(),le=ih(L.sourceEvent,{transform:V,snapGrid:U,snapToGrid:z,containerBounds:p});if((L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||A&&!Z.has(A))&&(x=!0),!x){if(!u&&F&&h&&(u=!0,W()),!h){const se=le.xSnapped-(s.x??0),te=le.ySnapped-(s.y??0);Math.sqrt(se*se+te*te)>ee&&P(L)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&l&&h&&(d=La(L.sourceEvent,p),M(le,L.sourceEvent))}}).on("end",L=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:V,onNodeDragStop:U,onSelectionDragStop:z}=e();if(V(l,!1),i||U||!A&&z){const[ee,Z]=k0({nodeId:A,dragItems:l,nodeLookup:F,dragging:!1});i?.(L.sourceEvent,l,ee,Z),U?.(L.sourceEvent,ee,Z),A||z?.(L.sourceEvent,Z)}}}).filter(L=>{const F=L.target;return!L.button&&(!I||!xj(F,`.${I}`,T))&&(!R||xj(F,R,T))});b.call(j)}function N(){b?.on(".drag",null)}return{update:_,destroy:N}}function mee(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Uh(i,Jd(s))>0&&r.push(s);return r}const gee=250;function yee(t,e,n,r){let i=[],s=1/0;const o=mee(t,n,e+gee);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:p,y:h}=Hh(l,d,d.position,!0),b=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));b>e||(b<s?(i=[{...d,x:p,y:h}],s=b):b===s&&i.push({...d,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function M2(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...Hh(o,u,u.position,!0)}:u}function $2(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function bee(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const B2=()=>!0;function vee(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:p,flowId:h,panBy:b,cancelConnection:x,onConnectStart:_,onConnect:N,onConnectEnd:I,isValidConnection:R=B2,onReconnectEnd:T,updateConnection:O,getTransform:A,getFromHandle:D,autoPanSpeed:M}){const W=O2(t.target);let P=0,j;const{x:L,y:F}=La(t),V=W?.elementFromPoint(L,F),U=$2(s,V),z=l?.getBoundingClientRect();if(!z||!U)return;const ee=M2(i,U,r,u,e);if(!ee)return;let Z=La(t,z),le=!1,se=null,te=!1,oe=null;function X(){if(!p||!z)return;const[De,Je]=k2(Z,z,M);b({x:De,y:Je}),P=requestAnimationFrame(X)}const ue={...ee,nodeId:i,type:U,position:ee.position},de=u.get(i),we={inProgress:!0,isValid:null,from:Hh(de,ue,Lt.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:de,to:Z,toHandle:null,toPosition:lj[ue.position],toNode:null};O(we);let Ne=we;_?.(t,{nodeId:i,handleId:r,handleType:U});function ze(De){if(!D()||!ue){Oe(De);return}const Je=A();Z=La(De,z),j=yee(Em(Z,Je,!1,[1,1]),n,u,ue),le||(X(),le=!0);const Xe=z2(De,{handle:j,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:R,doc:W,lib:d,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,se=Xe.connection,te=bee(!!j,Xe.isValid);const Ve={...Ne,isValid:te,to:j&&te?C2({x:j.x,y:j.y},Je):Z,toHandle:Xe.toHandle,toPosition:te&&Xe.toHandle?Xe.toHandle.position:lj[ue.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};te&&j&&Ne.toHandle&&Ve.toHandle&&Ne.toHandle.type===Ve.toHandle.type&&Ne.toHandle.nodeId===Ve.toHandle.nodeId&&Ne.toHandle.id===Ve.toHandle.id&&Ne.to.x===Ve.to.x&&Ne.to.y===Ve.to.y||(O(Ve),Ne=Ve)}function Oe(De){(j||oe)&&se&&te&&N?.(se);const{inProgress:Je,...Xe}=Ne,Ve={...Xe,toPosition:Ne.toHandle?Ne.toPosition:null};I?.(De,Ve),s&&T?.(De,Ve),x(),cancelAnimationFrame(P),le=!1,te=!1,se=null,oe=null,W.removeEventListener("mousemove",ze),W.removeEventListener("mouseup",Oe),W.removeEventListener("touchmove",ze),W.removeEventListener("touchend",Oe)}W.addEventListener("mousemove",ze),W.addEventListener("mouseup",Oe),W.addEventListener("touchmove",ze),W.addEventListener("touchend",Oe)}function z2(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=B2,nodeLookup:p}){const h=s==="target",b=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=La(t),N=o.elementFromPoint(x,_),I=N?.classList.contains(`${l}-flow__handle`)?N:b,R={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const T=$2(void 0,I),O=I.getAttribute("data-nodeid"),A=I.getAttribute("data-handleid"),D=I.classList.contains("connectable"),M=I.classList.contains("connectableend");if(!O||!T)return R;const W={source:h?O:r,sourceHandle:h?A:i,target:h?r:O,targetHandle:h?i:A};R.connection=W;const j=D&&M&&(n===Kd.Strict?h&&T==="source"||!h&&T==="target":O!==r||A!==i);R.isValid=j&&d(W),R.toHandle=M2(O,T,A,p,n,!1)}return R}const JE={onPointerDown:vee,isValid:z2};function xee({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Is(t);function s({translateExtent:l,width:u,height:d,zoomStep:p=10,pannable:h=!0,zoomable:b=!0,inversePan:x=!1}){const _=O=>{const A=n();if(O.sourceEvent.type!=="wheel"||!e)return;const D=-O.sourceEvent.deltaY*(O.sourceEvent.deltaMode===1?.05:O.sourceEvent.deltaMode?1:.002)*p,M=A[2]*Math.pow(2,D);e.scaleTo(M)};let N=[0,0];const I=O=>{(O.sourceEvent.type==="mousedown"||O.sourceEvent.type==="touchstart")&&(N=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY])},R=O=>{const A=n();if(O.sourceEvent.type!=="mousemove"&&O.sourceEvent.type!=="touchmove"||!e)return;const D=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY],M=[D[0]-N[0],D[1]-N[1]];N=D;const W=r()*Math.max(A[2],Math.log(A[2]))*(x?-1:1),P={x:A[0]-M[0]*W,y:A[1]-M[1]*W},j=[[0,0],[u,d]];e.setViewportConstrained({x:P.x,y:P.y,zoom:A[2]},j,l)},T=b2().on("start",I).on("zoom",h?R:null).on("zoom.wheel",b?_:null);i.call(T,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:So}}const wee=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ex=t=>({x:t.x,y:t.y,zoom:t.k}),I0=({x:t,y:e,zoom:n})=>Gv.translate(t,e).scale(n),pd=(t,e)=>t.target.closest(`.${e}`),W2=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),C0=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},V2=t=>{const e=t.ctrlKey&&Jb()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function _ee({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return p=>{if(pd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const I=So(p),R=V2(p),T=h*Math.pow(2,R);r.scaleTo(n,T,I,p);return}const b=p.deltaMode===1?20:1;let x=i===Gc.Vertical?0:p.deltaX*b,_=i===Gc.Horizontal?0:p.deltaY*b;!Jb()&&p.shiftKey&&i!==Gc.Vertical&&(x=p.deltaY*b,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const N=ex(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(p,N)),t.isPanScrolling&&(u?.(p,N),t.panScrollTimeout=setTimeout(()=>{d?.(p,N),t.isPanScrolling=!1},150))}}function See({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||pd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function Eee({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=ex(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Nee({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&W2(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,ex(s.transform))}}function kee({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&W2(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&wee(t.prevViewport,o.transform))){const l=ex(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Iee({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return p=>{const h=t||e,b=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(pd(p,`${d}-flow__node`)||pd(p,`${d}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||pd(p,l)&&p.type==="wheel"||pd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!b&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Cee({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),b=b2().clickDistance(!Ro(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=Is(t).call(b);O({x:s.x,y:s.y,zoom:Gd(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),N=x.on("dblclick.zoom");b.wheelDelta(V2);function I(V,U){return x?new Promise(z=>{b?.transform(C0(x,U?.duration,()=>z(!0)),V)}):Promise.resolve(!1)}function R({noWheelClassName:V,noPanClassName:U,onPaneContextMenu:z,userSelectionActive:ee,panOnScroll:Z,panOnDrag:le,panOnScrollMode:se,panOnScrollSpeed:te,preventScrolling:oe,zoomOnPinch:X,zoomOnScroll:ue,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ne}){ee&&!p.isZoomingOrPanning&&T();const Oe=Z&&!ye&&!ee?_ee({zoomPanValues:p,noWheelClassName:V,d3Selection:x,d3Zoom:b,panOnScrollMode:se,panOnScrollSpeed:te,zoomOnPinch:X,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):See({noWheelClassName:V,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",Oe,{passive:!1}),!ee){const Je=Eee({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:l});b.on("start",Je);const Xe=Nee({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:Ne});b.on("zoom",Xe);const Ve=kee({zoomPanValues:p,panOnDrag:le,panOnScroll:Z,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:d});b.on("end",Ve)}const De=Iee({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ue,panOnScroll:Z,zoomOnDoubleClick:de,zoomOnPinch:X,userSelectionActive:ee,noPanClassName:U,noWheelClassName:V,lib:we});b.filter(De),de?x.on("dblclick.zoom",N):x.on("dblclick.zoom",null)}function T(){b.on("zoom",null)}async function O(V,U,z){const ee=I0(V),Z=b?.constrain()(ee,U,z);return Z&&await I(Z),new Promise(le=>le(Z))}async function A(V,U){const z=I0(V);return await I(z,U),new Promise(ee=>ee(z))}function D(V){if(x){const U=I0(V),z=x.property("__zoom");(z.k!==V.zoom||z.x!==V.x||z.y!==V.y)&&b?.transform(x,U,null,{sync:!0})}}function M(){const V=x?y2(x.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function W(V,U){return x?new Promise(z=>{b?.scaleTo(C0(x,U?.duration,()=>z(!0)),V)}):Promise.resolve(!1)}function P(V,U){return x?new Promise(z=>{b?.scaleBy(C0(x,U?.duration,()=>z(!0)),V)}):Promise.resolve(!1)}function j(V){b?.scaleExtent(V)}function L(V){b?.translateExtent(V)}function F(V){const U=!Ro(V)||V<0?0:V;b?.clickDistance(U)}return{update:R,destroy:T,setViewport:A,setViewportConstrained:O,getViewport:M,scaleTo:W,scaleBy:P,setScaleExtent:j,setTranslateExtent:L,syncViewport:D,setClickDistance:F}}var sh;(function(t){t.Line="line",t.Handle="handle"})(sh||(sh={}));function Tee({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Ree(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function _l(t,e){return Math.max(0,e-t)}function Sl(t,e){return Math.max(0,t-e)}function ay(t,e,n){return Math.max(0,e-t,t-n)}function wj(t,e){return t?!e:e}function Oee(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=e;const{isHorizontal:p,isVertical:h}=e,b=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:N,maxWidth:I,minHeight:R,maxHeight:T}=r,{x:O,y:A,width:D,height:M,aspectRatio:W}=t;let P=Math.floor(p?x-t.pointerX:0),j=Math.floor(h?_-t.pointerY:0);const L=D+(u?-P:P),F=M+(d?-j:j),V=-s[0]*D,U=-s[1]*M;let z=ay(L,N,I),ee=ay(F,R,T);if(o){let se=0,te=0;u&&P<0?se=_l(O+P+V,o[0][0]):!u&&P>0&&(se=Sl(O+L+V,o[1][0])),d&&j<0?te=_l(A+j+U,o[0][1]):!d&&j>0&&(te=Sl(A+F+U,o[1][1])),z=Math.max(z,se),ee=Math.max(ee,te)}if(l){let se=0,te=0;u&&P>0?se=Sl(O+P,l[0][0]):!u&&P<0&&(se=_l(O+L,l[1][0])),d&&j>0?te=Sl(A+j,l[0][1]):!d&&j<0&&(te=_l(A+F,l[1][1])),z=Math.max(z,se),ee=Math.max(ee,te)}if(i){if(p){const se=ay(L/W,R,T)*W;if(z=Math.max(z,se),o){let te=0;!u&&!d||u&&!d&&b?te=Sl(A+U+L/W,o[1][1])*W:te=_l(A+U+(u?P:-P)/W,o[0][1])*W,z=Math.max(z,te)}if(l){let te=0;!u&&!d||u&&!d&&b?te=_l(A+L/W,l[1][1])*W:te=Sl(A+(u?P:-P)/W,l[0][1])*W,z=Math.max(z,te)}}if(h){const se=ay(F*W,N,I)/W;if(ee=Math.max(ee,se),o){let te=0;!u&&!d||d&&!u&&b?te=Sl(O+F*W+V,o[1][0])/W:te=_l(O+(d?j:-j)*W+V,o[0][0])/W,ee=Math.max(ee,te)}if(l){let te=0;!u&&!d||d&&!u&&b?te=_l(O+F*W,l[1][0])/W:te=Sl(O+(d?j:-j)*W,l[0][0])/W,ee=Math.max(ee,te)}}}j=j+(j<0?ee:-ee),P=P+(P<0?z:-z),i&&(b?L>F*W?j=(wj(u,d)?-P:P)/W:P=(wj(u,d)?-j:j)*W:p?(j=P/W,d=u):(P=j*W,u=d));const Z=u?O+P:O,le=d?A+j:A;return{width:D+(u?-P:P),height:M+(d?-j:j),x:s[0]*P*(u?-1:1)+Z,y:s[1]*j*(d?-1:1)+le}}const U2={width:0,height:0,x:0,y:0},jee={...U2,pointerX:0,pointerY:0,aspectRatio:1};function qee(t){return[[0,0],[t.measured.width,t.measured.height]]}function Aee(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Pee({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Is(t);function o({controlPosition:u,boundaries:d,keepAspectRatio:p,onResizeStart:h,onResize:b,onResizeEnd:x,shouldResize:_}){let N={...U2},I={...jee};const R=Ree(u);let T,O=null,A=[],D,M,W;const P=r2().on("start",j=>{const{nodeLookup:L,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:z,paneDomNode:ee}=n();if(T=L.get(e),!T)return;O=ee?.getBoundingClientRect()??null;const{xSnapped:Z,ySnapped:le}=ih(j.sourceEvent,{transform:F,snapGrid:V,snapToGrid:U,containerBounds:O});N={width:T.measured.width??0,height:T.measured.height??0,x:T.position.x??0,y:T.position.y??0},I={...N,pointerX:Z,pointerY:le,aspectRatio:N.width/N.height},D=void 0,T.parentId&&(T.extent==="parent"||T.expandParent)&&(D=L.get(T.parentId),M=D&&T.extent==="parent"?qee(D):void 0),A=[],W=void 0;for(const[se,te]of L)if(te.parentId===e&&(A.push({id:se,position:{...te.position},extent:te.extent}),te.extent==="parent"||te.expandParent)){const oe=Aee(te,T,te.origin??z);W?W=[[Math.min(oe[0][0],W[0][0]),Math.min(oe[0][1],W[0][1])],[Math.max(oe[1][0],W[1][0]),Math.max(oe[1][1],W[1][1])]]:W=oe}h?.(j,{...N})}).on("drag",j=>{const{transform:L,snapGrid:F,snapToGrid:V,nodeOrigin:U}=n(),z=ih(j.sourceEvent,{transform:L,snapGrid:F,snapToGrid:V,containerBounds:O}),ee=[];if(!T)return;const{x:Z,y:le,width:se,height:te}=N,oe={},X=T.origin??U,{width:ue,height:de,x:ye,y:we}=Oee(I,R,z,d,p,X,M,W),Ne=ue!==se,ze=de!==te,Oe=ye!==Z&&Ne,De=we!==le&&ze;if(!Oe&&!De&&!Ne&&!ze)return;if((Oe||De||X[0]===1||X[1]===1)&&(oe.x=Oe?ye:N.x,oe.y=De?we:N.y,N.x=oe.x,N.y=oe.y,A.length>0)){const ct=ye-Z,_t=we-le;for(const Tt of A)Tt.position={x:Tt.position.x-ct+X[0]*(ue-se),y:Tt.position.y-_t+X[1]*(de-te)},ee.push(Tt)}if((Ne||ze)&&(oe.width=Ne?ue:N.width,oe.height=ze?de:N.height,N.width=oe.width,N.height=oe.height),D&&T.expandParent){const ct=X[0]*(oe.width??0);oe.x&&oe.x<ct&&(N.x=ct,I.x=I.x-(oe.x-ct));const _t=X[1]*(oe.height??0);oe.y&&oe.y<_t&&(N.y=_t,I.y=I.y-(oe.y-_t))}const Je=Tee({width:N.width,prevWidth:se,height:N.height,prevHeight:te,affectsX:R.affectsX,affectsY:R.affectsY}),Xe={...N,direction:Je};_?.(j,Xe)!==!1&&(b?.(j,Xe),r(oe,ee))}).on("end",j=>{x?.(j,{...N}),i?.()});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const _j=t=>{let e;const n=new Set,r=(p,h)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const x=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},d=e=t(r,i,u);return u},Fee=t=>t?_j(t):_j,{useDebugValue:Dee}=Bn,{useSyncExternalStoreWithSelector:Lee}=RB,Mee=t=>t;function H2(t,e=Mee,n){const r=Lee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Dee(r),r}const Sj=(t,e)=>{const n=Fee(t),r=(i,s=e)=>H2(n,i,s);return Object.assign(r,n),r},$ee=(t,e)=>t?Sj(t,e):Sj;function Cr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const tx=Q.createContext(null),Bee=tx.Provider,Q2=Qa.error001();function Rn(t,e){const n=Q.useContext(tx);if(n===null)throw new Error(Q2);return H2(n,t,e)}function wr(){const t=Q.useContext(tx);if(t===null)throw new Error(Q2);return Q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Ej={display:"none"},zee={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},K2="react-flow__node-desc",G2="react-flow__edge-desc",Wee="react-flow__aria-live",Vee=t=>t.ariaLiveMessage;function Uee({rfId:t}){const e=Rn(Vee);return f.jsx("div",{id:`${Wee}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:zee,children:e})}function Hee({rfId:t,disableKeyboardA11y:e}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{id:`${K2}-${t}`,style:Ej,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),f.jsx("div",{id:`${G2}-${t}`,style:Ej,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&f.jsx(Uee,{rfId:t})]})}const Qee=t=>t.userSelectionActive?"none":"all",NN=Q.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=Rn(Qee),l=`${t}`.split("-");return f.jsx("div",{className:Xr(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function Kee({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:f.jsx(NN,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Gee=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},ly=t=>t.id;function Jee(t,e){return Cr(t.selectedNodes.map(ly),e.selectedNodes.map(ly))&&Cr(t.selectedEdges.map(ly),e.selectedEdges.map(ly))}function Zee({onSelectionChange:t}){const e=wr(),{selectedNodes:n,selectedEdges:r}=Rn(Gee,Jee);return Q.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Yee=t=>!!t.onSelectionChangeHandlers;function Xee({onSelectionChange:t}){const e=Rn(Yee);return t||e?f.jsx(Zee,{onSelectionChange:t}):null}const J2=[0,0],ete={x:0,y:0,zoom:1},tte=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Nj=[...tte,"rfId"],nte=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),kj={translateExtent:zh,nodeOrigin:J2,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function rte(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=Rn(nte,Cr),p=wr();Q.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=kj,l()}),[]);const h=Q.useRef(kj);return Q.useEffect(()=>{for(const b of Nj){const x=t[b],_=h.current[b];x!==_&&(typeof t[b]>"u"||(b==="nodes"?e(x):b==="edges"?n(x):b==="minZoom"?r(x):b==="maxZoom"?i(x):b==="translateExtent"?s(x):b==="nodeExtent"?o(x):b==="paneClickDistance"?d(x):b==="fitView"?p.setState({fitViewOnInit:x}):b==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[b]:x})))}h.current=t},Nj.map(b=>t[b])),null}function Ij(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ite(t){const[e,n]=Q.useState(t==="system"?null:t);return Q.useEffect(()=>{if(t!=="system"){n(t);return}const r=Ij(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:Ij()?.matches?"dark":"light"}const Cj=typeof document<"u"?document:null;function Qh(t=null,e={target:Cj,actInsideInputWithModifier:!0}){const[n,r]=Q.useState(!1),i=Q.useRef(!1),s=Q.useRef(new Set([])),[o,l]=Q.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=d.reduce((h,b)=>h.concat(...b),[]);return[d,p]}return[[],[]]},[t]);return Q.useEffect(()=>{const u=e?.target||Cj;if(t!==null){const d=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&HE(b))return!1;const _=Rj(b.code,l);s.current.add(b[_]),Tj(o,s.current,!1)&&(b.preventDefault(),r(!0))},p=b=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&HE(b))return!1;const _=Rj(b.code,l);Tj(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[_]),b.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",d),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",d),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function Tj(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function Rj(t,e){return e.includes(t)?"code":"key"}const ste=()=>{const t=wr();return Q.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const l=WE(n,e),{width:u,height:d}=Xv(o);return VE({nodes:l,width:u,height:d,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:l}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,d=i/2-e*u,p=s/2-n*u;return l?(await l.setViewport({x:d,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=vN(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:l}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-l};return Em(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=C2(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function Z2(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)ote(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function ote(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function kN(t,e){return Z2(t,e)}function Y2(t,e){return Z2(t,e)}function qc(t,e){return{id:t,type:"select",selected:e}}function hd(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(qc(s.id,o)))}return r}function Oj({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function jj(t){return{id:t.id,type:"remove"}}const qj=t=>UX(t),ate=t=>_2(t);function X2(t){return Q.forwardRef(t)}const lte=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function Aj(t){const[e,n]=Q.useState(BigInt(0)),[r]=Q.useState(()=>cte(()=>n(i=>i+BigInt(1))));return lte(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function cte(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const eL=Q.createContext(null);function ute({children:t}){const e=wr(),n=Q.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:p,onNodesChange:h,nodeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?d(x):h&&h(Oj({items:x,lookup:b}))},[]),r=Aj(n),i=Q.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?d(x):h&&h(Oj({items:x,lookup:b}))},[]),s=Aj(i),o=Q.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return f.jsx(eL.Provider,{value:o,children:t})}function dte(){const t=Q.useContext(eL);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const fte=t=>!!t.panZoom;function yf(){const t=ste(),e=wr(),n=dte(),r=Rn(fte),i=Q.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},l=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState(),_=qj(h)?h:b.get(h.id),N=_.parentId?R2(_.position,_.measured,_.parentId,b,x):_.position,I={..._,position:N,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return Jd(I)},d=(h,b,x={replace:!1})=>{o(_=>_.map(N=>{if(N.id===h){const I=typeof b=="function"?b(N):b;return x.replace&&qj(I)?I:{...N,...I}}return N}))},p=(h,b,x={replace:!1})=>{l(_=>_.map(N=>{if(N.id===h){const I=typeof b=="function"?b(N):b;return x.replace&&ate(I)?I:{...N,...I}}return N}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(b=>({...b}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:l,addNodes:h=>{const b=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...b])},addEdges:h=>{const b=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...b])},toObject:()=>{const{nodes:h=[],edges:b=[],transform:x}=e.getState(),[_,N,I]=x;return{nodes:h.map(R=>({...R})),edges:b.map(R=>({...R})),viewport:{x:_,y:N,zoom:I}}},deleteElements:async({nodes:h=[],edges:b=[]})=>{const{nodes:x,edges:_,onNodesDelete:N,onEdgesDelete:I,triggerNodeChanges:R,triggerEdgeChanges:T,onDelete:O,onBeforeDelete:A}=e.getState(),{nodes:D,edges:M}=await KX({nodesToRemove:h,edgesToRemove:b,nodes:x,edges:_,onBeforeDelete:A}),W=M.length>0,P=D.length>0;if(W){const j=M.map(jj);I?.(M),T(j)}if(P){const j=D.map(jj);N?.(D),R(j)}return(P||W)&&O?.({nodes:D,edges:M}),{deletedNodes:D,deletedEdges:M}},getIntersectingNodes:(h,b=!0,x)=>{const _=uj(h),N=_?h:u(h),I=x!==void 0;return N?(x||e.getState().nodes).filter(R=>{const T=e.getState().nodeLookup.get(R.id);if(T&&!_&&(R.id===h.id||!T.internals.positionAbsolute))return!1;const O=Jd(I?R:T),A=Uh(O,N);return b&&A>0||A>=N.width*N.height}):[]},isNodeIntersecting:(h,b,x=!0)=>{const N=uj(h)?h:u(h);if(!N)return!1;const I=Uh(N,b);return x&&I>0||I>=N.width*N.height},updateNode:d,updateNodeData:(h,b,x={replace:!1})=>{d(h,_=>{const N=typeof b=="function"?b(_):b;return x.replace?{..._,data:N}:{..._,data:{..._.data,...N}}},x)},updateEdge:p,updateEdgeData:(h,b,x={replace:!1})=>{p(h,_=>{const N=typeof b=="function"?b(_):b;return x.replace?{..._,data:N}:{..._,data:{..._.data,...N}}},x)},getNodesBounds:h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState();return HX(h,{nodeLookup:b,nodeOrigin:x})},getHandleConnections:({type:h,id:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?b?`-${h}-${b}`:`-${h}`:""}`)?.values()??[])}},[]);return Q.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const Pj=t=>t.selected,pte={actInsideInputWithModifier:!1},hte=typeof window<"u"?window:void 0;function mte({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=wr(),{deleteElements:r}=yf(),i=Qh(t,pte),s=Qh(e,{target:hte});Q.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(Pj),edges:o.filter(Pj)}),n.setState({nodesSelectionActive:!1})}},[i]),Q.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function gte(t){const e=wr();Q.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=Xv(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Qa.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const nx={position:"absolute",width:"100%",height:"100%",top:0,left:0},yte=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function bte({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Gc.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:p,maxZoom:h,zoomActivationKeyCode:b,preventScrolling:x=!0,children:_,noWheelClassName:N,noPanClassName:I,onViewportChange:R,isControlledViewport:T,paneClickDistance:O}){const A=wr(),D=Q.useRef(null),{userSelectionActive:M,lib:W}=Rn(yte,Cr),P=Qh(b),j=Q.useRef();gte(D);const L=Q.useCallback(F=>{R?.({x:F[0],y:F[1],zoom:F[2]}),T||A.setState({transform:F})},[R,T]);return Q.useEffect(()=>{if(D.current){j.current=Cee({domNode:D.current,minZoom:p,maxZoom:h,translateExtent:d,viewport:u,paneClickDistance:O,onDraggingChange:z=>A.setState({paneDragging:z}),onPanZoomStart:(z,ee)=>{const{onViewportChangeStart:Z,onMoveStart:le}=A.getState();le?.(z,ee),Z?.(ee)},onPanZoom:(z,ee)=>{const{onViewportChange:Z,onMove:le}=A.getState();le?.(z,ee),Z?.(ee)},onPanZoomEnd:(z,ee)=>{const{onViewportChangeEnd:Z,onMoveEnd:le}=A.getState();le?.(z,ee),Z?.(ee)}});const{x:F,y:V,zoom:U}=j.current.getViewport();return A.setState({panZoom:j.current,transform:[F,V,U],domNode:D.current.closest(".react-flow")}),()=>{j.current?.destroy()}}},[]),Q.useEffect(()=>{j.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:I,userSelectionActive:M,noWheelClassName:N,lib:W,onTransformChange:L})},[t,e,n,r,i,s,o,l,P,x,I,M,N,W,L]),f.jsx("div",{className:"react-flow__renderer",ref:D,style:nx,children:_})}const vte=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function xte(){const{userSelectionActive:t,userSelectionRect:e}=Rn(vte,Cr);return t&&e?f.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const T0=(t,e)=>n=>{n.target===e.current&&t?.(n)},wte=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function _te({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Wh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:b,children:x}){const _=wr(),{userSelectionActive:N,elementsSelectable:I,dragging:R}=Rn(wte,Cr),T=I&&(t||N),O=Q.useRef(null),A=Q.useRef(),D=Q.useRef(new Set),M=Q.useRef(new Set),W=Q.useRef(!1),P=Q.useRef(!1),j=Z=>{if(W.current){W.current=!1;return}l?.(Z),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},L=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}u?.(Z)},F=d?Z=>d(Z):void 0,V=Z=>{const{resetSelectedElements:le,domNode:se}=_.getState();if(A.current=se?.getBoundingClientRect(),!I||!t||Z.button!==0||Z.target!==O.current||!A.current)return;Z.target?.setPointerCapture?.(Z.pointerId),P.current=!0,W.current=!1;const{x:te,y:oe}=La(Z.nativeEvent,A.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:te,startY:oe,x:te,y:oe}}),s?.(Z)},U=Z=>{const{userSelectionRect:le,transform:se,nodeLookup:te,edgeLookup:oe,connectionLookup:X,triggerNodeChanges:ue,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!A.current||!le)return;W.current=!0;const{x:we,y:Ne}=La(Z.nativeEvent,A.current),{startX:ze,startY:Oe}=le,De={startX:ze,startY:Oe,x:we<ze?we:ze,y:Ne<Oe?Ne:Oe,width:Math.abs(we-ze),height:Math.abs(Ne-Oe)},Je=D.current,Xe=M.current;D.current=new Set(S2(te,De,se,n===Wh.Partial,!0).map(ct=>ct.id)),M.current=new Set;const Ve=ye?.selectable??!0;for(const ct of D.current){const _t=X.get(ct);if(_t)for(const{edgeId:Tt}of _t.values()){const Ut=oe.get(Tt);Ut&&(Ut.selectable??Ve)&&M.current.add(Tt)}}if(!dj(Je,D.current)){const ct=hd(te,D.current,!0);ue(ct)}if(!dj(Xe,M.current)){const ct=hd(oe,M.current);de(ct)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},z=Z=>{if(Z.button!==0||!P.current)return;Z.target?.releasePointerCapture?.(Z.pointerId);const{userSelectionRect:le}=_.getState();!N&&le&&Z.target===O.current&&j?.(Z),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:D.current.size>0}),o?.(Z),(e||i)&&(W.current=!1),P.current=!1},ee=r===!0||Array.isArray(r)&&r.includes(0);return f.jsxs("div",{className:Xr(["react-flow__pane",{draggable:ee,dragging:R,selection:t}]),onClick:T?void 0:T0(j,O),onContextMenu:T0(L,O),onWheel:T0(F,O),onPointerEnter:T?void 0:p,onPointerDown:T?V:h,onPointerMove:T?U:h,onPointerUp:T?z:void 0,onPointerLeave:b,ref:O,style:nx,children:[x,f.jsx(xte,{})]})}function ZE({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),d=l.get(t);if(!d){u?.("012",Qa.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function tL({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=wr(),[u,d]=Q.useState(!1),p=Q.useRef();return Q.useEffect(()=>{p.current=hee({getStoreItems:()=>l.getState(),onNodeMouseDown:h=>{ZE({id:h,store:l,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),Q.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const Ste=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function nL(){const t=wr();return Q.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:p}=t.getState(),h=new Map,b=Ste(o),x=i?s[0]:5,_=i?s[1]:5,N=n.direction.x*x*n.factor,I=n.direction.y*_*n.factor;for(const[,R]of d){if(!b(R))continue;let T={x:R.internals.positionAbsolute.x+N,y:R.internals.positionAbsolute.y+I};i&&(T=Yv(T,s));const{position:O,positionAbsolute:A}=E2({nodeId:R.id,nextPosition:T,nodeLookup:d,nodeExtent:r,nodeOrigin:p,onError:l});R.position=O,R.internals.positionAbsolute=A,h.set(R.id,R)}u(h)},[])}const IN=Q.createContext(null),Ete=IN.Provider;IN.Consumer;const rL=()=>Q.useContext(IN),Nte=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),kte=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Kd.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,valid:p&&d}};function Ite({type:t="source",position:e=Lt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:p,onTouchStart:h,...b},x){const _=o||null,N=t==="target",I=wr(),R=rL(),{connectOnClick:T,noPanClassName:O,rfId:A}=Rn(Nte,Cr),{connectingFrom:D,connectingTo:M,clickConnecting:W,isPossibleEndHandle:P,connectionInProcess:j,valid:L}=Rn(kte(R,_,t),Cr);R||I.getState().onError?.("010",Qa.error010());const F=z=>{const{defaultEdgeOptions:ee,onConnect:Z,hasDefaultEdges:le}=I.getState(),se={...ee,...z};if(le){const{edges:te,setEdges:oe}=I.getState();oe(tee(se,te))}Z?.(se),l?.(se)},V=z=>{if(!R)return;const ee=j2(z.nativeEvent);if(i&&(ee&&z.button===0||!ee)){const Z=I.getState();JE.onPointerDown(z.nativeEvent,{autoPanOnConnect:Z.autoPanOnConnect,connectionMode:Z.connectionMode,connectionRadius:Z.connectionRadius,domNode:Z.domNode,nodeLookup:Z.nodeLookup,lib:Z.lib,isTarget:N,handleId:_,nodeId:R,flowId:Z.rfId,panBy:Z.panBy,cancelConnection:Z.cancelConnection,onConnectStart:Z.onConnectStart,onConnectEnd:Z.onConnectEnd,updateConnection:Z.updateConnection,onConnect:F,isValidConnection:n||Z.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:Z.autoPanSpeed})}ee?p?.(z):h?.(z)},U=z=>{const{onClickConnectStart:ee,onClickConnectEnd:Z,connectionClickStartHandle:le,connectionMode:se,isValidConnection:te,lib:oe,rfId:X,nodeLookup:ue,connection:de}=I.getState();if(!R||!le&&!i)return;if(!le){ee?.(z.nativeEvent,{nodeId:R,handleId:_,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:R,type:t,id:_}});return}const ye=O2(z.target),we=n||te,{connection:Ne,isValid:ze}=JE.isValid(z.nativeEvent,{handle:{nodeId:R,id:_,type:t},connectionMode:se,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:X,doc:ye,lib:oe,nodeLookup:ue});ze&&Ne&&F(Ne);const Oe=structuredClone(de);delete Oe.inProgress,Oe.toPosition=Oe.toHandle?Oe.toHandle.position:null,Z?.(z,Oe),I.setState({connectionClickStartHandle:null})};return f.jsx("div",{"data-handleid":_,"data-nodeid":R,"data-handlepos":e,"data-id":`${A}-${R}-${_}-${t}`,className:Xr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",O,d,{source:!N,target:N,connectable:r,connectablestart:i,connectableend:s,clickconnecting:W,connectingfrom:D,connectingto:M,valid:L,connectionindicator:r&&(!j||P)&&(j?s:i)}]),onMouseDown:V,onTouchStart:V,onClick:T?U:void 0,ref:x,...b,children:u})}const ao=Q.memo(X2(Ite));function Cte({data:t,isConnectable:e,sourcePosition:n=Lt.Bottom}){return f.jsxs(f.Fragment,{children:[t?.label,f.jsx(ao,{type:"source",position:n,isConnectable:e})]})}function Tte({data:t,isConnectable:e,targetPosition:n=Lt.Top,sourcePosition:r=Lt.Bottom}){return f.jsxs(f.Fragment,{children:[f.jsx(ao,{type:"target",position:n,isConnectable:e}),t?.label,f.jsx(ao,{type:"source",position:r,isConnectable:e})]})}function Rte(){return null}function Ote({data:t,isConnectable:e,targetPosition:n=Lt.Top}){return f.jsxs(f.Fragment,{children:[f.jsx(ao,{type:"target",position:n,isConnectable:e}),t?.label]})}const Zb={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Fj={input:Cte,default:Tte,output:Ote,group:Rte};function jte(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const qte=t=>{const{width:e,height:n,x:r,y:i}=Sm(t.nodeLookup,{filter:s=>!!s.selected});return{width:Ro(e)?e:null,height:Ro(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Ate({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=wr(),{width:i,height:s,transformString:o,userSelectionActive:l}=Rn(qte,Cr),u=nL(),d=Q.useRef(null);if(Q.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),tL({nodeRef:d}),l||!i||!s)return null;const p=t?b=>{const x=r.getState().nodes.filter(_=>_.selected);t(b,x)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(Zb,b.key)&&(b.preventDefault(),u({direction:Zb[b.key],factor:b.shiftKey?4:1}))};return f.jsx("div",{className:Xr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:f.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const Dj=typeof window<"u"?window:void 0,Pte=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function iL({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:N,zoomActivationKeyCode:I,elementsSelectable:R,zoomOnScroll:T,zoomOnPinch:O,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:P,defaultViewport:j,translateExtent:L,minZoom:F,maxZoom:V,preventScrolling:U,onSelectionContextMenu:z,noWheelClassName:ee,noPanClassName:Z,disableKeyboardA11y:le,onViewportChange:se,isControlledViewport:te}){const{nodesSelectionActive:oe,userSelectionActive:X}=Rn(Pte),ue=Qh(d,{target:Dj}),de=Qh(N,{target:Dj}),ye=de||P,we=de||A,Ne=p&&ye!==!0,ze=ue||X||Ne;return mte({deleteKeyCode:u,multiSelectionKeyCode:_}),f.jsx(bte,{onPaneContextMenu:s,elementsSelectable:R,zoomOnScroll:T,zoomOnPinch:O,panOnScroll:we,panOnScrollSpeed:D,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:!ue&&ye,defaultViewport:j,translateExtent:L,minZoom:F,maxZoom:V,zoomActivationKeyCode:I,preventScrolling:U,noWheelClassName:ee,noPanClassName:Z,onViewportChange:se,isControlledViewport:te,paneClickDistance:l,children:f.jsxs(_te,{onSelectionStart:b,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ue,selectionOnDrag:Ne,children:[t,oe&&f.jsx(Ate,{onSelectionContextMenu:z,noPanClassName:Z,disableKeyboardA11y:le})]})})}iL.displayName="FlowRenderer";const Fte=Q.memo(iL),Dte=t=>e=>t?S2(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Lte(t){return Rn(Q.useCallback(Dte(t),[t]),Cr)}const Mte=t=>t.updateNodeInternals;function $te(){const t=Rn(Mte),[e]=Q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return Q.useEffect(()=>()=>{e?.disconnect()},[e]),e}function Bte({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=wr(),s=Q.useRef(null),o=Q.useRef(null),l=Q.useRef(t.sourcePosition),u=Q.useRef(t.targetPosition),d=Q.useRef(e),p=n&&!!t.internals.handleBounds;return Q.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),Q.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),Q.useEffect(()=>{if(s.current){const h=d.current!==e,b=l.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||b||x)&&(d.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function zte({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:p,resizeObserver:h,noDragClassName:b,noPanClassName:x,disableKeyboardA11y:_,rfId:N,nodeTypes:I,nodeExtent:R,nodeClickDistance:T,onError:O}){const{node:A,internals:D,isParent:M}=Rn(Oe=>{const De=Oe.nodeLookup.get(t),Je=Oe.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},Cr);let W=A.type||"default",P=I?.[W]||Fj[W];P===void 0&&(O?.("003",Qa.error003(W)),W="default",P=Fj.default);const j=!!(A.draggable||l&&typeof A.draggable>"u"),L=!!(A.selectable||u&&typeof A.selectable>"u"),F=!!(A.connectable||d&&typeof A.connectable>"u"),V=!!(A.focusable||p&&typeof A.focusable>"u"),U=wr(),z=T2(A),ee=Bte({node:A,nodeType:W,hasDimensions:z,resizeObserver:h}),Z=tL({nodeRef:ee,disabled:A.hidden||!j,noDragClassName:b,handleSelector:A.dragHandle,nodeId:t,isSelectable:L,nodeClickDistance:T}),le=nL();if(A.hidden)return null;const se=Ka(A),te=jte(A),oe=L||j||e||n||r||i,X=n?Oe=>n(Oe,{...D.userNode}):void 0,ue=r?Oe=>r(Oe,{...D.userNode}):void 0,de=i?Oe=>i(Oe,{...D.userNode}):void 0,ye=s?Oe=>s(Oe,{...D.userNode}):void 0,we=o?Oe=>o(Oe,{...D.userNode}):void 0,Ne=Oe=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=U.getState();L&&(!De||!j||Je>0)&&ZE({id:t,store:U,nodeRef:ee}),e&&e(Oe,{...D.userNode})},ze=Oe=>{if(!(HE(Oe.nativeEvent)||_))if(v2.includes(Oe.key)&&L){const De=Oe.key==="Escape";ZE({id:t,store:U,unselect:De,nodeRef:ee})}else j&&A.selected&&Object.prototype.hasOwnProperty.call(Zb,Oe.key)&&(Oe.preventDefault(),U.setState({ariaLiveMessage:`Moved selected node ${Oe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~D.positionAbsolute.x}, y: ${~~D.positionAbsolute.y}`}),le({direction:Zb[Oe.key],factor:Oe.shiftKey?4:1}))};return f.jsx("div",{className:Xr(["react-flow__node",`react-flow__node-${W}`,{[x]:j},A.className,{selected:A.selected,selectable:L,parent:M,draggable:j,dragging:Z}]),ref:ee,style:{zIndex:D.z,transform:`translate(${D.positionAbsolute.x}px,${D.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:z?"visible":"hidden",...A.style,...te},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:X,onMouseMove:ue,onMouseLeave:de,onContextMenu:ye,onClick:Ne,onDoubleClick:we,onKeyDown:V?ze:void 0,tabIndex:V?0:void 0,role:V?"button":void 0,"aria-describedby":_?void 0:`${K2}-${N}`,"aria-label":A.ariaLabel,children:f.jsx(Ete,{value:t,children:f.jsx(P,{id:t,data:A.data,type:W,positionAbsoluteX:D.positionAbsolute.x,positionAbsoluteY:D.positionAbsolute.y,selected:A.selected??!1,selectable:L,draggable:j,deletable:A.deletable??!0,isConnectable:F,sourcePosition:A.sourcePosition,targetPosition:A.targetPosition,dragging:Z,dragHandle:A.dragHandle,zIndex:D.z,parentId:A.parentId,...se})})})}const Wte=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function sL(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Rn(Wte,Cr),o=Lte(t.onlyRenderVisibleElements),l=$te();return f.jsx("div",{className:"react-flow__nodes",style:nx,children:o.map(u=>f.jsx(zte,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}sL.displayName="NodeRenderer";const Vte=Q.memo(sL);function Ute(t){return Rn(Q.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&YX({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Cr)}const Hte=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Qte=({color:t="none",strokeWidth:e=1})=>f.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Lj={[Vh.Arrow]:Hte,[Vh.ArrowClosed]:Qte};function Kte(t){const e=wr();return Q.useMemo(()=>Object.prototype.hasOwnProperty.call(Lj,t)?Lj[t]:(e.getState().onError?.("009",Qa.error009(t)),null),[t])}const Gte=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Kte(e);return u?f.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:f.jsx(u,{color:n,strokeWidth:o})}):null},oL=({defaultColor:t,rfId:e})=>{const n=Rn(s=>s.edges),r=Rn(s=>s.defaultEdgeOptions),i=Q.useMemo(()=>oee(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?f.jsx("svg",{className:"react-flow__marker",children:f.jsx("defs",{children:i.map(s=>f.jsx(Gte,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};oL.displayName="MarkerDefinitions";var Jte=Q.memo(oL);function aL({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...p}){const[h,b]=Q.useState({x:1,y:0,width:0,height:0}),x=Xr(["react-flow__edge-textwrapper",d]),_=Q.useRef(null);return Q.useEffect(()=>{if(_.current){const N=_.current.getBBox();b({x:N.x,y:N.y,width:N.width,height:N.height})}},[n]),typeof n>"u"||!n?null:f.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&f.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),f.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}aL.displayName="EdgeText";const Zte=Q.memo(aL);function Nm({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...p}){return f.jsxs(f.Fragment,{children:[f.jsx("path",{...p,d:t,fill:"none",className:Xr(["react-flow__edge-path",p.className])}),d&&f.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&Ro(e)&&Ro(n)?f.jsx(Zte,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function Mj({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Lt.Left||t===Lt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function rx({sourceX:t,sourceY:e,sourcePosition:n=Lt.Bottom,targetX:r,targetY:i,targetPosition:s=Lt.Top}){const[o,l]=Mj({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,d]=Mj({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,b,x]=q2({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${i}`,p,h,b,x]}function lL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Lt.Bottom,targetPosition:l=Lt.Top,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:N,markerStart:I,interactionWidth:R})=>{const[T,O,A]=rx({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),D=t.isInternal?void 0:e;return f.jsx(Nm,{id:D,path:T,labelX:O,labelY:A,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:N,markerStart:I,interactionWidth:R})})}const Yte=lL({isInternal:!1}),cL=lL({isInternal:!0});Yte.displayName="SimpleBezierEdge";cL.displayName="SimpleBezierEdgeInternal";function uL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,sourcePosition:x=Lt.Bottom,targetPosition:_=Lt.Top,markerEnd:N,markerStart:I,pathOptions:R,interactionWidth:T})=>{const[O,A,D]=QE({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:R?.borderRadius,offset:R?.offset}),M=t.isInternal?void 0:e;return f.jsx(Nm,{id:M,path:O,labelX:A,labelY:D,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:N,markerStart:I,interactionWidth:T})})}const dL=uL({isInternal:!1}),fL=uL({isInternal:!0});dL.displayName="SmoothStepEdge";fL.displayName="SmoothStepEdgeInternal";function pL(t){return Q.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return f.jsx(dL,{...n,id:r,pathOptions:Q.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Xte=pL({isInternal:!1}),hL=pL({isInternal:!0});Xte.displayName="StepEdge";hL.displayName="StepEdgeInternal";function mL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:N})=>{const[I,R,T]=P2({sourceX:n,sourceY:r,targetX:i,targetY:s}),O=t.isInternal?void 0:e;return f.jsx(Nm,{id:O,path:I,labelX:R,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:N})})}const ene=mL({isInternal:!1}),gL=mL({isInternal:!0});ene.displayName="StraightEdge";gL.displayName="StraightEdgeInternal";function yL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Lt.Bottom,targetPosition:l=Lt.Top,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:N,markerStart:I,pathOptions:R,interactionWidth:T})=>{const[O,A,D]=xN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:R?.curvature}),M=t.isInternal?void 0:e;return f.jsx(Nm,{id:M,path:O,labelX:A,labelY:D,label:u,labelStyle:d,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:N,markerStart:I,interactionWidth:T})})}const tne=yL({isInternal:!1}),bL=yL({isInternal:!0});tne.displayName="BezierEdge";bL.displayName="BezierEdgeInternal";const $j={default:bL,straight:gL,step:hL,smoothstep:fL,simplebezier:cL},Bj={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},nne=(t,e,n)=>n===Lt.Left?t-e:n===Lt.Right?t+e:t,rne=(t,e,n)=>n===Lt.Top?t-e:n===Lt.Bottom?t+e:t,zj="react-flow__edgeupdater";function Wj({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return f.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Xr([zj,`${zj}-${l}`]),cx:nne(e,r,t),cy:rne(n,r,t),r,stroke:"transparent",fill:"transparent"})}function ine({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:p,onReconnectEnd:h,setReconnecting:b,setUpdateHover:x}){const _=wr(),N=(A,D)=>{if(A.button!==0)return;const{autoPanOnConnect:M,domNode:W,isValidConnection:P,connectionMode:j,connectionRadius:L,lib:F,onConnectStart:V,onConnectEnd:U,cancelConnection:z,nodeLookup:ee,rfId:Z,panBy:le,updateConnection:se}=_.getState(),te=D.type==="target";b(!0),p?.(A,n,D.type);const oe=(ue,de)=>{b(!1),h?.(ue,n,D.type,de)},X=ue=>d?.(n,ue);JE.onPointerDown(A.nativeEvent,{autoPanOnConnect:M,connectionMode:j,connectionRadius:L,domNode:W,handleId:D.id,nodeId:D.nodeId,nodeLookup:ee,isTarget:te,edgeUpdaterType:D.type,lib:F,flowId:Z,cancelConnection:z,panBy:le,isValidConnection:P,onConnect:X,onConnectStart:V,onConnectEnd:U,onReconnectEnd:oe,updateConnection:se,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},I=A=>N(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),R=A=>N(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>x(!0),O=()=>x(!1);return f.jsxs(f.Fragment,{children:[(t===!0||t==="source")&&f.jsx(Wj,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:I,onMouseEnter:T,onMouseOut:O,type:"source"}),(t===!0||t==="target")&&f.jsx(Wj,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:R,onMouseEnter:T,onMouseOut:O,type:"target"})]})}function sne({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,rfId:_,edgeTypes:N,noPanClassName:I,onError:R,disableKeyboardA11y:T}){let O=Rn(Ve=>Ve.edgeLookup.get(t));const A=Rn(Ve=>Ve.defaultEdgeOptions);O=A?{...A,...O}:O;let D=O.type||"default",M=N?.[D]||$j[D];M===void 0&&(R?.("011",Qa.error011(D)),D="default",M=$j.default);const W=!!(O.focusable||e&&typeof O.focusable>"u"),P=typeof h<"u"&&(O.reconnectable||n&&typeof O.reconnectable>"u"),j=!!(O.selectable||r&&typeof O.selectable>"u"),L=Q.useRef(null),[F,V]=Q.useState(!1),[U,z]=Q.useState(!1),ee=wr(),{zIndex:Z,sourceX:le,sourceY:se,targetX:te,targetY:oe,sourcePosition:X,targetPosition:ue}=Rn(Q.useCallback(Ve=>{const ct=Ve.nodeLookup.get(O.source),_t=Ve.nodeLookup.get(O.target);if(!ct||!_t)return{zIndex:O.zIndex,...Bj};const Tt=see({id:t,sourceNode:ct,targetNode:_t,sourceHandle:O.sourceHandle||null,targetHandle:O.targetHandle||null,connectionMode:Ve.connectionMode,onError:R});return{zIndex:ZX({selected:O.selected,zIndex:O.zIndex,sourceNode:ct,targetNode:_t,elevateOnSelect:Ve.elevateEdgesOnSelect}),...Tt||Bj}},[O.source,O.target,O.sourceHandle,O.targetHandle,O.selected,O.zIndex]),Cr),de=Q.useMemo(()=>O.markerStart?`url('#${KE(O.markerStart,_)}')`:void 0,[O.markerStart,_]),ye=Q.useMemo(()=>O.markerEnd?`url('#${KE(O.markerEnd,_)}')`:void 0,[O.markerEnd,_]);if(O.hidden||le===null||se===null||te===null||oe===null)return null;const we=Ve=>{const{addSelectedEdges:ct,unselectNodesAndEdges:_t,multiSelectionActive:Tt}=ee.getState();j&&(ee.setState({nodesSelectionActive:!1}),O.selected&&Tt?(_t({nodes:[],edges:[O]}),L.current?.blur()):ct([t])),i&&i(Ve,O)},Ne=s?Ve=>{s(Ve,{...O})}:void 0,ze=o?Ve=>{o(Ve,{...O})}:void 0,Oe=l?Ve=>{l(Ve,{...O})}:void 0,De=u?Ve=>{u(Ve,{...O})}:void 0,Je=d?Ve=>{d(Ve,{...O})}:void 0,Xe=Ve=>{if(!T&&v2.includes(Ve.key)&&j){const{unselectNodesAndEdges:ct,addSelectedEdges:_t}=ee.getState();Ve.key==="Escape"?(L.current?.blur(),ct({edges:[O]})):_t([t])}};return f.jsx("svg",{style:{zIndex:Z},children:f.jsxs("g",{className:Xr(["react-flow__edge",`react-flow__edge-${D}`,O.className,I,{selected:O.selected,animated:O.animated,inactive:!j&&!i,updating:F,selectable:j}]),onClick:we,onDoubleClick:Ne,onContextMenu:ze,onMouseEnter:Oe,onMouseMove:De,onMouseLeave:Je,onKeyDown:W?Xe:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":O.ariaLabel===null?void 0:O.ariaLabel||`Edge from ${O.source} to ${O.target}`,"aria-describedby":W?`${G2}-${_}`:void 0,ref:L,children:[!U&&f.jsx(M,{id:t,source:O.source,target:O.target,type:O.type,selected:O.selected,animated:O.animated,selectable:j,deletable:O.deletable??!0,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,sourceX:le,sourceY:se,targetX:te,targetY:oe,sourcePosition:X,targetPosition:ue,data:O.data,style:O.style,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth}),P&&f.jsx(ine,{edge:O,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,sourceX:le,sourceY:se,targetX:te,targetY:oe,sourcePosition:X,targetPosition:ue,setUpdateHover:V,setReconnecting:z})]})})}const one=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function vL({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:N}){const{edgesFocusable:I,edgesReconnectable:R,elementsSelectable:T,onError:O}=Rn(one,Cr),A=Ute(e);return f.jsxs("div",{className:"react-flow__edges",children:[f.jsx(Jte,{defaultColor:t,rfId:n}),A.map(D=>f.jsx(sne,{id:D,edgesFocusable:I,edgesReconnectable:R,elementsSelectable:T,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:p,reconnectRadius:h,onDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:O,edgeTypes:r,disableKeyboardA11y:N},D))]})}vL.displayName="EdgeRenderer";const ane=Q.memo(vL),lne=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function cne({children:t}){const e=Rn(lne);return f.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function une(t){const e=yf(),n=Q.useRef(!1);Q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const dne=t=>t.panZoom?.syncViewport;function fne(t){const e=Rn(dne),n=wr();return Q.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function pne(t){return t.connection.inProgress?{...t.connection,to:Em(t.connection.to,t.transform)}:{...t.connection}}function hne(t){return pne}function xL(t){const e=hne();return Rn(e,Cr)}const mne=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function gne({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Rn(mne,Cr);return!(s&&i&&u)?null:f.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:f.jsx("g",{className:Xr(["react-flow__connection",w2(l)]),children:f.jsx(wL,{style:e,type:n,CustomComponent:r,isValid:l})})})}const wL=({style:t,type:e=ql.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:p,toHandle:h,toPosition:b}=xL();if(!i)return;if(n)return f.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:b,connectionStatus:w2(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:b};switch(e){case ql.Bezier:[x]=xN(_);break;case ql.SimpleBezier:[x]=rx(_);break;case ql.Step:[x]=QE({..._,borderRadius:0});break;case ql.SmoothStep:[x]=QE(_);break;default:[x]=P2(_)}return f.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};wL.displayName="ConnectionLine";const yne={};function Vj(t=yne){Q.useRef(t),wr(),Q.useEffect(()=>{},[t])}function bne(){wr(),Q.useRef(!1),Q.useEffect(()=>{},[])}function _L({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:b,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:N,connectionLineComponent:I,connectionLineContainerStyle:R,selectionKeyCode:T,selectionOnDrag:O,selectionMode:A,multiSelectionKeyCode:D,panActivationKeyCode:M,zoomActivationKeyCode:W,deleteKeyCode:P,onlyRenderVisibleElements:j,elementsSelectable:L,defaultViewport:F,translateExtent:V,minZoom:U,maxZoom:z,preventScrolling:ee,defaultMarkerColor:Z,zoomOnScroll:le,zoomOnPinch:se,panOnScroll:te,panOnScrollSpeed:oe,panOnScrollMode:X,zoomOnDoubleClick:ue,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneScroll:Oe,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Tt,reconnectRadius:Ut,onReconnect:rn,onReconnectStart:xe,onReconnectEnd:be,noDragClassName:ke,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut,viewport:Kt,onViewportChange:Gt}){return Vj(t),Vj(e),bne(),une(n),fne(Kt),f.jsx(Fte,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:Oe,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:T,selectionOnDrag:O,selectionMode:A,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:D,panActivationKeyCode:M,zoomActivationKeyCode:W,elementsSelectable:L,zoomOnScroll:le,zoomOnPinch:se,zoomOnDoubleClick:ue,panOnScroll:te,panOnScrollSpeed:oe,panOnScrollMode:X,panOnDrag:de,defaultViewport:F,translateExtent:V,minZoom:U,maxZoom:z,onSelectionContextMenu:h,preventScrolling:ee,noDragClassName:ke,noWheelClassName:Ae,noPanClassName:Ue,disableKeyboardA11y:rt,onViewportChange:Gt,isControlledViewport:!!Kt,children:f.jsxs(cne,{children:[f.jsx(ane,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:rn,onReconnectStart:xe,onReconnectEnd:be,onlyRenderVisibleElements:j,onEdgeContextMenu:Ve,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:Tt,reconnectRadius:Ut,defaultMarkerColor:Z,noPanClassName:Ue,disableKeyboardA11y:rt,rfId:ut}),f.jsx(gne,{style:N,type:_,component:I,containerStyle:R}),f.jsx("div",{className:"react-flow__edgelabel-renderer"}),f.jsx(Vte,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:j,noPanClassName:Ue,noDragClassName:ke,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut}),f.jsx("div",{className:"react-flow__viewport-portal"})]})})}_L.displayName="GraphView";const vne=Q.memo(_L),Uj=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=>{const d=new Map,p=new Map,h=new Map,b=new Map,x=r??e??[],_=n??t??[],N=l??[0,0],I=u??zh;D2(h,b,x),GE(_,d,p,{nodeOrigin:N,nodeExtent:I,elevateNodesOnSelect:!1});let R=[0,0,1];if(o&&i&&s){const T=Sm(d,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:O,y:A,zoom:D}=vN(T,i,s,.5,2,.1);R=[O,A,D]}return{rfId:"1",width:0,height:0,transform:R,nodes:_,nodeLookup:d,parentLookup:p,edges:x,edgeLookup:b,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:zh,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Kd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...x2},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:GX,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},xne=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=>$ee((d,p)=>({...Uj({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:N}=p();GE(h,b,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:N,checkEquality:!0}),d({nodes:h})},setEdges:h=>{const{connectionLookup:b,edgeLookup:x}=p();D2(b,x,h),d({edges:h})},setDefaultNodesAndEdges:(h,b)=>{if(h){const{setNodes:x}=p();x(h),d({hasDefaultNodes:!0})}if(b){const{setEdges:x}=p();x(b),d({hasDefaultEdges:!0})}},updateNodeInternals:(h,b={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:N,fitViewOnInit:I,fitViewDone:R,fitViewOnInitOptions:T,domNode:O,nodeOrigin:A,nodeExtent:D,debug:M,fitViewSync:W}=p(),{changes:P,updatedInternals:j}=dee(h,_,N,O,A,D);if(j){if(lee(_,N,{nodeOrigin:A,nodeExtent:D}),b.triggerFitView){let L=R;!R&&I&&(L=W({...T,nodes:T?.nodes})),d({fitViewDone:L})}else d({});P?.length>0&&(M&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,b=!1)=>{const x=[],_=[];for(const[N,I]of h){const R=!!(I?.expandParent&&I?.parentId&&I?.position),T={id:N,type:"position",position:R?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:b};R&&x.push({id:N,parentId:I.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width,height:I.measured.height}}),_.push(T)}if(x.length>0){const{nodeLookup:N,parentLookup:I,nodeOrigin:R}=p(),T=EN(x,N,I,R);_.push(...T)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:b,setNodes:x,nodes:_,hasDefaultNodes:N,debug:I}=p();if(h?.length){if(N){const R=kN(h,_);x(R)}I&&console.log("React Flow: trigger node changes",h),b?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:b,setEdges:x,edges:_,hasDefaultEdges:N,debug:I}=p();if(h?.length){if(N){const R=Y2(h,_);x(R)}I&&console.log("React Flow: trigger edge changes",h),b?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:N,triggerEdgeChanges:I}=p();if(b){const R=h.map(T=>qc(T,!0));N(R);return}N(hd(_,new Set([...h]),!0)),I(hd(x))},addSelectedEdges:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:N,triggerEdgeChanges:I}=p();if(b){const R=h.map(T=>qc(T,!0));I(R);return}I(hd(x,new Set([...h]))),N(hd(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:b}={})=>{const{edges:x,nodes:_,nodeLookup:N,triggerNodeChanges:I,triggerEdgeChanges:R}=p(),T=h||_,O=b||x,A=T.map(M=>{const W=N.get(M.id);return W&&(W.selected=!1),qc(M.id,!1)}),D=O.map(M=>qc(M.id,!1));I(A),R(D)},setMinZoom:h=>{const{panZoom:b,maxZoom:x}=p();b?.setScaleExtent([h,x]),d({minZoom:h})},setMaxZoom:h=>{const{panZoom:b,minZoom:x}=p();b?.setScaleExtent([x,h]),d({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),d({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),N=b.reduce((R,T)=>T.selected?[...R,qc(T.id,!1)]:R,[]),I=h.reduce((R,T)=>T.selected?[...R,qc(T.id,!1)]:R,[]);x(N),_(I)},setNodeExtent:h=>{const{nodes:b,nodeLookup:x,parentLookup:_,nodeOrigin:N,elevateNodesOnSelect:I,nodeExtent:R}=p();h[0][0]===R[0][0]&&h[0][1]===R[0][1]&&h[1][0]===R[1][0]&&h[1][1]===R[1][1]||(GE(b,x,_,{nodeOrigin:N,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!1}),d({nodeExtent:h}))},panBy:h=>{const{transform:b,width:x,height:_,panZoom:N,translateExtent:I}=p();return fee({delta:h,panZoom:N,transform:b,translateExtent:I,width:x,height:_})},fitView:h=>{const{panZoom:b,width:x,height:_,minZoom:N,maxZoom:I,nodeLookup:R}=p();if(!b)return Promise.resolve(!1);const T=WE(R,h);return VE({nodes:T,width:x,height:_,panZoom:b,minZoom:N,maxZoom:I},h)},fitViewSync:h=>{const{panZoom:b,width:x,height:_,minZoom:N,maxZoom:I,nodeLookup:R}=p();if(!b)return!1;const T=WE(R,h);return VE({nodes:T,width:x,height:_,panZoom:b,minZoom:N,maxZoom:I},h),T.size>0},cancelConnection:()=>{d({connection:{...x2}})},updateConnection:h=>{d({connection:h})},reset:()=>d({...Uj()})}),Object.is);function SL({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:d}){const[p]=Q.useState(()=>xne({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return f.jsx(Bee,{value:p,children:f.jsx(ute,{children:d})})}function wne({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:d}){return Q.useContext(tx)?f.jsx(f.Fragment,{children:t}):f.jsx(SL,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:d,children:t})}const _ne={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Sne({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:p,onMoveStart:h,onMoveEnd:b,onConnect:x,onConnectStart:_,onConnectEnd:N,onClickConnectStart:I,onClickConnectEnd:R,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:M,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:j,onNodesDelete:L,onEdgesDelete:F,onDelete:V,onSelectionChange:U,onSelectionDragStart:z,onSelectionDrag:ee,onSelectionDragStop:Z,onSelectionContextMenu:le,onSelectionStart:se,onSelectionEnd:te,onBeforeDelete:oe,connectionMode:X,connectionLineType:ue=ql.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ne="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:Oe=!1,selectionMode:De=Wh.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=Jb()?"Meta":"Control",zoomActivationKeyCode:Ve=Jb()?"Meta":"Control",snapToGrid:ct,snapGrid:_t,onlyRenderVisibleElements:Tt=!1,selectNodesOnDrag:Ut,nodesDraggable:rn,nodesConnectable:xe,nodesFocusable:be,nodeOrigin:ke=J2,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt=!0,defaultViewport:Me=ete,minZoom:ut=.5,maxZoom:Kt=2,translateExtent:Gt=zh,preventScrolling:hn=!0,nodeExtent:or,defaultMarkerColor:Ln="#b1b1b7",zoomOnScroll:Hr=!0,zoomOnPinch:Ti=!0,panOnScroll:_r=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Ui=Gc.Free,zoomOnDoubleClick:Hi=!0,panOnDrag:Qi=!0,onPaneClick:fo,onPaneMouseEnter:da,onPaneMouseMove:ac,onPaneMouseLeave:$s,onPaneScroll:H,onPaneContextMenu:pu,paneClickDistance:un=0,nodeClickDistance:hu=0,children:mu,onReconnect:gu,onReconnectStart:lc,onReconnectEnd:fa,onEdgeContextMenu:Ki,onEdgeDoubleClick:cc,onEdgeMouseEnter:pa,onEdgeMouseMove:wf,onEdgeMouseLeave:ha,reconnectRadius:Bs=10,onNodesChange:Ja,onEdgesChange:zs,noDragClassName:_f="nodrag",noWheelClassName:Sf="nowheel",noPanClassName:yu="nopan",fitView:Ws,fitViewOptions:bu,connectOnClick:vu,attributionPosition:Ef,proOptions:xu,defaultEdgeOptions:wu,elevateNodesOnSelect:_u,elevateEdgesOnSelect:uc,disableKeyboardA11y:Su=!1,autoPanOnConnect:Nf,autoPanOnNodeDrag:ar,autoPanSpeed:kf,connectionRadius:dc,isValidConnection:Eu,onError:Za,style:If,id:fc,nodeDragThreshold:Ya,viewport:Gi,onViewportChange:Cf,width:gi,height:Tf,colorMode:Rf="light",debug:Of,...$o},Xa){const Ri=fc||"1",el=ite(Rf);return f.jsx("div",{"data-testid":"rf__wrapper",...$o,style:{...If,..._ne},ref:Xa,className:Xr(["react-flow",i,el]),id:fc,children:f.jsxs(wne,{nodes:t,edges:e,width:gi,height:Tf,fitView:Ws,nodeOrigin:ke,nodeExtent:or,children:[f.jsx(vne,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:ue,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:Oe,selectionMode:De,deleteKeyCode:Ne,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:Tt,defaultViewport:Me,translateExtent:Gt,minZoom:ut,maxZoom:Kt,preventScrolling:hn,zoomOnScroll:Hr,zoomOnPinch:Ti,zoomOnDoubleClick:Hi,panOnScroll:_r,panOnScrollSpeed:Jt,panOnScrollMode:Ui,panOnDrag:Qi,onPaneClick:fo,onPaneMouseEnter:da,onPaneMouseMove:ac,onPaneMouseLeave:$s,onPaneScroll:H,onPaneContextMenu:pu,paneClickDistance:un,nodeClickDistance:hu,onSelectionContextMenu:le,onSelectionStart:se,onSelectionEnd:te,onReconnect:gu,onReconnectStart:lc,onReconnectEnd:fa,onEdgeContextMenu:Ki,onEdgeDoubleClick:cc,onEdgeMouseEnter:pa,onEdgeMouseMove:wf,onEdgeMouseLeave:ha,reconnectRadius:Bs,defaultMarkerColor:Ln,noDragClassName:_f,noWheelClassName:Sf,noPanClassName:yu,rfId:Ri,disableKeyboardA11y:Su,nodeExtent:or,viewport:Gi,onViewportChange:Cf}),f.jsx(rte,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:N,onClickConnectStart:I,onClickConnectEnd:R,nodesDraggable:rn,nodesConnectable:xe,nodesFocusable:be,edgesFocusable:Ae,edgesReconnectable:Ue,elementsSelectable:rt,elevateNodesOnSelect:_u,elevateEdgesOnSelect:uc,minZoom:ut,maxZoom:Kt,nodeExtent:or,onNodesChange:Ja,onEdgesChange:zs,snapToGrid:ct,snapGrid:_t,connectionMode:X,translateExtent:Gt,connectOnClick:vu,defaultEdgeOptions:wu,fitView:Ws,fitViewOptions:bu,onNodesDelete:L,onEdgesDelete:F,onDelete:V,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:j,onSelectionDrag:ee,onSelectionDragStart:z,onSelectionDragStop:Z,onMove:p,onMoveStart:h,onMoveEnd:b,noPanClassName:yu,nodeOrigin:ke,rfId:Ri,autoPanOnConnect:Nf,autoPanOnNodeDrag:ar,autoPanSpeed:kf,onError:Za,connectionRadius:dc,isValidConnection:Eu,selectNodesOnDrag:Ut,nodeDragThreshold:Ya,onBeforeDelete:oe,paneClickDistance:un,debug:Of}),f.jsx(Xee,{onSelectionChange:U}),mu,f.jsx(Kee,{proOptions:xu,position:Ef}),f.jsx(Hee,{rfId:Ri,disableKeyboardA11y:Su})]})})}var EL=X2(Sne);const Ene=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Nne({children:t}){const e=Rn(Ene);return e?lv.createPortal(t,e):null}function kne(t){const[e,n]=Q.useState(t),r=Q.useCallback(i=>n(s=>kN(i,s)),[]);return[e,n,r]}function Ine(t){const[e,n]=Q.useState(t),r=Q.useCallback(i=>n(s=>Y2(i,s)),[]);return[e,n,r]}function Hj(t){return Rn(Q.useCallback(n=>n.nodeLookup.get(t),[t]),Cr)}function Cne({dimensions:t,lineWidth:e,variant:n,className:r}){return f.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Xr(["react-flow__background-pattern",n,r])})}function Tne({radius:t,className:e}){return f.jsx("circle",{cx:t,cy:t,r:t,className:Xr(["react-flow__background-pattern","dots",e])})}var ta;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ta||(ta={}));const Rne={[ta.Dots]:1,[ta.Lines]:1,[ta.Cross]:6},One=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function NL({id:t,variant:e=ta.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:p}){const h=Q.useRef(null),{transform:b,patternId:x}=Rn(One,Cr),_=r||Rne[e],N=e===ta.Dots,I=e===ta.Cross,R=Array.isArray(n)?n:[n,n],T=[R[0]*b[2]||1,R[1]*b[2]||1],O=_*b[2],A=Array.isArray(s)?s:[s,s],D=I?[O,O]:T,M=[A[0]*b[2]||1+D[0]/2,A[1]*b[2]||1+D[1]/2],W=`${x}${t||""}`;return f.jsxs("svg",{className:Xr(["react-flow__background",d]),style:{...u,...nx,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[f.jsx("pattern",{id:W,x:b[0]%T[0],y:b[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:N?f.jsx(Tne,{radius:O/2,className:p}):f.jsx(Cne,{dimensions:D,lineWidth:i,variant:e,className:p})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}NL.displayName="Background";const kL=Q.memo(NL);function jne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function qne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ane(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Pne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Fne(){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function cy({children:t,className:e,...n}){return f.jsx("button",{type:"button",className:Xr(["react-flow__controls-button",e]),...n,children:t})}const Dne=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function IL({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:p,position:h="bottom-left",orientation:b="vertical","aria-label":x="React Flow controls"}){const _=wr(),{isInteractive:N,minZoomReached:I,maxZoomReached:R}=Rn(Dne,Cr),{zoomIn:T,zoomOut:O,fitView:A}=yf(),D=()=>{T(),s?.()},M=()=>{O(),o?.()},W=()=>{A(i),l?.()},P=()=>{_.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),u?.(!N)},j=b==="horizontal"?"horizontal":"vertical";return f.jsxs(NN,{className:Xr(["react-flow__controls",j,d]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&f.jsxs(f.Fragment,{children:[f.jsx(cy,{onClick:D,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:R,children:f.jsx(jne,{})}),f.jsx(cy,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:f.jsx(qne,{})})]}),n&&f.jsx(cy,{className:"react-flow__controls-fitview",onClick:W,title:"fit view","aria-label":"fit view",children:f.jsx(Ane,{})}),r&&f.jsx(cy,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:N?f.jsx(Fne,{}):f.jsx(Pne,{})}),p]})}IL.displayName="Controls";const CL=Q.memo(IL);function Lne({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:p,shapeRendering:h,selected:b,onClick:x}){const{background:_,backgroundColor:N}=s||{},I=o||_||N;return f.jsx("rect",{className:Xr(["react-flow__minimap-node",{selected:b},d]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:I,stroke:l,strokeWidth:u},shapeRendering:h,onClick:x?R=>x(R,t):void 0})}const Mne=Q.memo(Lne),$ne=t=>t.nodes.map(e=>e.id),R0=t=>t instanceof Function?t:()=>t;function Bne({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Mne,onClick:o}){const l=Rn($ne,Cr),u=R0(e),d=R0(t),p=R0(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return f.jsx(f.Fragment,{children:l.map(b=>f.jsx(Wne,{id:b,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},b))})}function zne({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:p,y:h,width:b,height:x}=Rn(_=>{const N=_.nodeLookup.get(t),{x:I,y:R}=N.internals.positionAbsolute,{width:T,height:O}=Ka(N);return{node:N,x:I,y:R,width:T,height:O}},Cr);return!d||d.hidden||!T2(d)?null:f.jsx(l,{x:p,y:h,width:b,height:x,style:d.style,selected:!!d.selected,className:r(d),color:e(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const Wne=Q.memo(zne);var Vne=Q.memo(Bne);const Une=200,Hne=150,Qne=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?I2(Sm(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},Kne="react-flow__minimap-desc";function TL({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:p,maskStrokeWidth:h,position:b="bottom-right",onClick:x,onNodeClick:_,pannable:N=!1,zoomable:I=!1,ariaLabel:R="React Flow mini map",inversePan:T,zoomStep:O=10,offsetScale:A=5}){const D=wr(),M=Q.useRef(null),{boundingRect:W,viewBB:P,rfId:j,panZoom:L,translateExtent:F,flowWidth:V,flowHeight:U}=Rn(Qne,Cr),z=t?.width??Une,ee=t?.height??Hne,Z=W.width/z,le=W.height/ee,se=Math.max(Z,le),te=se*z,oe=se*ee,X=A*se,ue=W.x-(te-W.width)/2-X,de=W.y-(oe-W.height)/2-X,ye=te+X*2,we=oe+X*2,Ne=`${Kne}-${j}`,ze=Q.useRef(0),Oe=Q.useRef();ze.current=se,Q.useEffect(()=>{if(M.current&&L)return Oe.current=xee({domNode:M.current,panZoom:L,getTransform:()=>D.getState().transform,getViewScale:()=>ze.current}),()=>{Oe.current?.destroy()}},[L]),Q.useEffect(()=>{Oe.current?.update({translateExtent:F,width:V,height:U,inversePan:T,pannable:N,zoomStep:O,zoomable:I})},[N,I,T,O,F,V,U]);const De=x?Xe=>{const[Ve,ct]=Oe.current?.pointer(Xe)||[0,0];x(Xe,{x:Ve,y:ct})}:void 0,Je=_?Q.useCallback((Xe,Ve)=>{const ct=D.getState().nodeLookup.get(Ve);_(Xe,ct)},[]):void 0;return f.jsx(NN,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*se:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:Xr(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:f.jsxs("svg",{width:z,height:ee,viewBox:`${ue} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ne,ref:M,onClick:De,children:[R&&f.jsx("title",{id:Ne,children:R}),f.jsx(Vne,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),f.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-X},${de-X}h${ye+X*2}v${we+X*2}h${-ye-X*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}TL.displayName="MiniMap";const RL=Q.memo(TL);function Gne({nodeId:t,position:e,variant:n=sh.Handle,className:r,style:i={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:b,onResizeStart:x,onResize:_,onResizeEnd:N}){const I=rL(),R=typeof t=="string"?t:I,T=wr(),O=Q.useRef(null),A=n===sh.Line?"right":"bottom-right",D=e??A,M=Q.useRef(null);Q.useEffect(()=>{if(!(!O.current||!R))return M.current||(M.current=Pee({domNode:O.current,nodeId:R,getStoreItems:()=>{const{nodeLookup:L,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:z,domNode:ee}=T.getState();return{nodeLookup:L,transform:F,snapGrid:V,snapToGrid:U,nodeOrigin:z,paneDomNode:ee}},onChange:(L,F)=>{const{triggerNodeChanges:V,nodeLookup:U,parentLookup:z,nodeOrigin:ee}=T.getState(),Z=[],le={x:L.x,y:L.y},se=U.get(R);if(se&&se.expandParent&&se.parentId){const te=se.origin??ee,oe=L.width??se.measured.width,X=L.height??se.measured.height,ue={id:se.id,parentId:se.parentId,rect:{width:oe,height:X,...R2({x:L.x??se.position.x,y:L.y??se.position.y},{width:oe,height:X},se.parentId,U,te)}},de=EN([ue],U,z,ee);Z.push(...de),le.x=L.x?Math.max(te[0]*oe,L.x):void 0,le.y=L.y?Math.max(te[1]*X,L.y):void 0}if(le.x!==void 0&&le.y!==void 0){const te={id:R,type:"position",position:{...le}};Z.push(te)}if(L.width!==void 0&&L.height!==void 0){const te={id:R,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:L.width,height:L.height}};Z.push(te)}for(const te of F){const oe={...te,type:"position"};Z.push(oe)}V(Z)},onEnd:()=>{const L={id:R,type:"dimensions",resizing:!1};T.getState().triggerNodeChanges([L])}})),M.current.update({controlPosition:D,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:N,shouldResize:b}),()=>{M.current?.destroy()}},[D,l,u,d,p,h,x,_,N,b]);const W=D.split("-"),P=n===sh.Line?"borderColor":"backgroundColor",j=o?{...i,[P]:o}:i;return f.jsx("div",{className:Xr(["react-flow__resize-control","nodrag",...W,n,r]),ref:O,style:j,children:s})}Q.memo(Gne);const Jne=async({tx:t,userId:e})=>{const n=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id as buildingId","c.id","c.cycle","bl.cycles",r=>r.case().when(r.not(r.exists(r.selectFrom("Blueprint_Requirement as br").select(r.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(i=>i.not(i.exists(i.selectFrom("Inventory as i").select(i.lit(1).as("one")).where("i.id","in",i.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(r.lit(!0)).else(r.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();for await(const{id:r,cycle:i,cycles:s,buildingId:o}of n){if(await t.deleteFrom("Route").where("toId","=",o).execute(),i>=s){await t.deleteFrom("Construction").where("id","=",r).execute();continue}await t.updateTable("Construction").set("cycle",i+1).where("id","=",r).execute()}},Zne=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route_Resource as rr").select(["rr.id","rr.routeId","rr.resourceId"]).where("rr.routeId","in",t.selectFrom("Route as r").innerJoin("Building as b","b.id","r.toId").select("r.id").where("b.constructionId","is not",null).where("r.userId","=",e)).execute();for await(const{id:r,routeId:i,resourceId:s}of n){const o=await t.selectFrom("Blueprint_Requirement as br").select(["br.amount"]).where("br.resourceId","=",s).where("br.blueprintId","=",t.selectFrom("Route as r").innerJoin("Building as b","b.id","r.toId").select("b.blueprintId").where("r.id","=",i)).executeTakeFirst(),l=await t.selectFrom("Inventory as i").select(["i.amount"]).where("i.resourceId","=",s).where("i.id","in",t.selectFrom("Building_Inventory as bi").select(["bi.inventoryId"]).where("bi.buildingId","=",t.selectFrom("Route as r").select("r.toId").where("r.id","=",i))).executeTakeFirst();!o||!l||l.amount>=o.amount&&await t.deleteFrom("Route_Resource").where("id","=",r).execute()}},Qj=async({tx:t,userId:e,buildingId:n,blueprintProductionId:r})=>{const i=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",r).executeTakeFirstOrThrow(),s=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",r).execute();for await(const{resourceId:o,amount:l,passive:u}of s){const d=await t.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi","bi.inventoryId","i.id").select(["i.id","i.amount"]).where("bi.buildingId","=",n).where("i.resourceId","=",o).where("i.amount",">=",l).where("i.type","in",["storage"]).executeTakeFirstOrThrow();u||await t.updateTable("Inventory").set({amount:d.amount-l}).where("id","=",d.id).execute()}await t.insertInto("Production").values({id:Pn(),buildingId:n,blueprintProductionId:r,userId:e,cycle:0,cycles:i.cycles}).execute()},Yne=async({tx:t,userId:e})=>{const n=await t.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","p.cycle","p.cycles","bp.resourceId","r.name","bp.amount"]).where("userId","=",e).execute();for await(const{id:s,buildingId:o,resourceId:l,cycle:u,cycles:d,amount:p}of n){if(u<d){await t.updateTable("Production").set("cycle",u+1).where("id","=",s).execute();continue}const h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(h&&(!(h.limit>0)||h.amount+p<=h.limit)){await t.updateTable("Inventory").set({amount:h.amount+p}).where("id","=",h.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}const b=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",o)).where("i.resourceId","=",l).where("i.type","=","storage").executeTakeFirst();if(b&&(!(b.limit>0)||b.amount+p<=b.limit)){await t.updateTable("Inventory").set({amount:b.amount+p}).where("id","=",b.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",s).execute();continue}}const r=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();for await(const{buildingId:s,productionId:o}of r)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await Qj({tx:t,blueprintProductionId:o,buildingId:s,userId:e}),await t.updateTable("Building").set({productionId:null}).where("id","=",s).execute()}catch{}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();for await(const{buildingId:s,recurringProductionId:o}of i)try{const{count:l}=await t.selectFrom("Production as p").where("p.buildingId","=",s).select(u=>u.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(l>0)continue;await Qj({tx:t,blueprintProductionId:o,buildingId:s,userId:e})}catch{}},Xne=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route as r").innerJoin("Route_Resource as rr","rr.routeId","r.id").select(["r.id","r.toId","r.fromId"]).where("r.userId","=",e).orderBy("rr.priority","desc").execute();for await(const{id:r,fromId:i,toId:s}of n){const o=await t.selectFrom("Route_Resource as rr").select(["rr.amount","rr.resourceId","rr.type"]).where("rr.routeId","=",r).orderBy("rr.priority","desc").execute();for await(const{amount:l,resourceId:u,type:d}of o){const p=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).where("i.resourceId","=",u).where("i.type","=","storage").orderBy("i.amount","desc").executeTakeFirst(),h=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",u).where("i.type","=",d).orderBy("i.amount","asc").executeTakeFirst();if(!p||!h){console.log("Source or target is not compatible");continue}const b=Math.max(0,Math.min(Math.min(p.amount,l??p.amount),h.limit-h.amount));b>0&&(await t.updateTable("Inventory").set({amount:p.amount-b}).where("id","=",p.id).execute(),await t.updateTable("Inventory").set({amount:h.amount+b}).where("id","=",h.id).execute())}}},OL=async({tx:t,userId:e})=>{try{await t.insertInto("Cycle").values({id:Pn(),stamp:dn.now().toUTC().toSQLTime(),userId:e}).execute(),await Jne({tx:t,userId:e}),await Zne({tx:t,userId:e}),await Yne({tx:t,userId:e}),await Xne({tx:t,userId:e})}catch(n){throw console.error(n),n}},ere=({userId:t,...e})=>{const n=Un([["GameMap"]]),[r,i]=Q.useState(!1),s=nn({mutationKey:["useCycleMutation"],async mutationFn({userId:o}){return jt.transaction().execute(async l=>OL({userId:o,tx:l}))},async onSuccess(){await n()}});return Q.useEffect(()=>{if(r&&!s.isPending){const o=setInterval(()=>{s.mutate({userId:t})},1e3);return()=>clearInterval(o)}},[r]),f.jsx(wn,{iconEnabled:r?"icon-[fluent--pause-24-regular]":"icon-[hugeicons--play]",onClick:()=>{i(o=>!o)},loading:s.isPending,...e})},Kh="icon-[gala--clock]",jL=({userId:t,cycle:e,...n})=>{const r=Un([["Cycle"],["GameMap"],["Resource_Queue"],["Building_Queue"],["Building"],["User_Inventory"],["Inventory"],["Building_Base_Production"]]),i=nn({mutationKey:["useCycleMutation"],async mutationFn({userId:s}){return jt.transaction().execute(async o=>OL({userId:s,tx:o}))},async onSuccess(){await r()}});return f.jsxs(wn,{iconEnabled:Kh,iconDisabled:Kh,onClick:()=>{i.mutate({userId:t})},loading:i.isPending,...n,children:[f.jsx(ne,{css:{base:["font-bold"]},label:"New cycle (label)"}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx("div",{className:"font-light text-sm",children:xn({number:e})}),f.jsx(Xt,{icon:"icon-[solar--arrow-right-linear]"}),f.jsx("div",{className:"font-bold",children:xn({number:e+1})})]})]})},tre=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=rx({sourceX:t,sourceY:e,targetX:n,targetY:r});return f.jsx("g",{children:f.jsx("path",{style:i,fill:"none",d:s})})};function Kj(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Lt.Left:s>=r+n.measured.width-1?Lt.Right:o<=i+1?Lt.Top:o>=n.y+n.measured.height-1?Lt.Bottom:Lt.Top}function Gj(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,l=r/2,u=i.x+o,d=i.y+l,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,b=(p-u)/(2*o)-(h-d)/(2*l),x=(p-u)/(2*o)+(h-d)/(2*l),_=1/(Math.abs(b)+Math.abs(x)||1),N=_*b,I=_*x,R=o*(N+I)+u,T=l*(-N+I)+d;return{x:R,y:T}}function nre(t,e){const n=Gj(t,e),r=Gj(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:Kj(t,n),targetPos:Kj(e,r)}}const rre=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=Hj(e),o=Hj(n);if(!s||!o)return null;const{sx:l,sy:u,tx:d,ty:p}=nre(s,o),[h]=rx({sourceX:l,sourceY:u,targetX:d,targetY:p});return f.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},Ma="icon-[mingcute--inventory-line]",Ps="icon-[fluent-mdl2--production-floor-management]",ire=({id:t,data:e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-col gap-2 w-full h-full justify-between items-start",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx(At,{icon:rc,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:n,id:t},css:{base:["font-bold"]},children:e.name}),f.jsxs("div",{className:"flex flex-row gap-1 items-end",children:[f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:n,id:t},children:f.jsx(wn,{iconEnabled:Ma,variant:{variant:"subtle",size:"sm"}})}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:n,id:t},children:f.jsx(wn,{iconEnabled:Ps,variant:{variant:"subtle",size:"sm"}})}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:n,id:t},children:f.jsx(wn,{iconEnabled:"icon-[gis--route-end]",variant:{variant:"subtle",size:"sm"}})})]})]}),e.productionName?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[f.jsx(Xt,{icon:Fn,variant:{size:"xs"}})," ",f.jsx("div",{children:e.productionName})]}):e.recurringProductionName?f.jsxs("div",{className:"flex flex-row gap-2 text-xs text-slate-400",children:[f.jsx(Xt,{icon:"icon-[oui--refresh]",variant:{size:"xs"}}),f.jsx("div",{children:e.recurringProductionName})]}):null,e.production?f.jsx(mf,{value:100*e.production.cycle/e.production.cycles}):null,f.jsx(ao,{className:"hidden",position:Lt.Right,type:"source",isConnectable:!1}),f.jsx(ao,{className:"hidden",position:Lt.Left,type:"target",isConnectable:!1})]})},sre=({id:t,data:e})=>{const n=xL(),r=n.inProgress&&n.fromNode.id!==t;return f.jsxs("div",{className:"flex flex-row gap-2 w-full h-full items-center justify-center ",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-center text-xl",children:[f.jsx(Xt,{icon:"icon-[gis--route-end]",css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&f.jsx(ao,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Lt.Right,type:"source"}),(!n.inProgress||r)&&f.jsx(ao,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Lt.Left,type:"target",isConnectableStart:!1})]})]})},ore=({data:t})=>{const e=Un([["GameMap"]]),n=nn({async mutationFn({constructionId:r}){return jt.transaction().execute(i=>i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name})]}),f.jsx(wn,{iconEnabled:NE,iconDisabled:NE,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},are=({data:t})=>f.jsx("div",{children:f.jsx("div",{children:t.name})}),Yd="icon-[emojione-monotone--construction]",lre=({data:t})=>{const{locale:e}=sn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsx(At,{icon:Yd,to:"/$locale/apps/derivean/map/building/$id/construction/requirements",params:{locale:e,id:t.id},css:{base:["font-bold"]},children:t.name})}),f.jsx(mf,{value:100*t.cycle/t.cycles}),f.jsx(ao,{className:"hidden",position:Lt.Right,type:"source",isConnectable:!1}),f.jsx(ao,{className:"hidden",position:Lt.Left,type:"target",isConnectable:!1})]})},On="icon-[solar--home-outline]",bp=320,vp=128,xp=["bg-white","border-[4px]","border-slate-300","shadow-slate-200"],cre={stroke:"#DD44AA",strokeWidth:3},ure={land:are,construction:ore,queue:lre,building:ire,"building-route":sre},dre={route:rre},fre=({userId:t,cycle:e,construction:n,queue:r,building:i,route:s,zoomToId:o,routing:l})=>{const u=Un([["GameMap"]]),{locale:d}=sn({from:"/$locale"}),p=lu(),h=Q.useMemo(()=>[{id:"land",position:{x:0,y:0},width:1024*4,height:1024*4,selectable:!1,data:{id:"1",name:"Land"},type:"land",className:Sn(["bg-green-200","border-8","border-green-800","opacity-25","z-[-1]"])},...n.map(L=>({id:L.id,data:L,position:{x:L.x,y:L.y},type:"construction",width:bp,height:vp,selectable:!1,className:Sn(xp,["z-10",L.valid?["border-green-500"]:["border-red-500"]])})),...r.map(L=>l?{id:L.id,data:L,position:{x:L.x,y:L.y},type:"building-route",width:bp,height:vp,selectable:!1,className:Sn(xp,["border-amber-400","bg-amber-50","nodrag"])}:{id:L.id,data:L,position:{x:L.x,y:L.y},type:"queue",width:bp,height:vp,selectable:!1,className:Sn(xp,["border-amber-400","bg-amber-50","nodrag"])}),...i.map(L=>l?{id:L.id,data:L,position:{x:L.x,y:L.y},type:"building-route",width:bp,height:vp,selectable:!1,className:Sn(xp),extent:"parent",parentId:"land"}:{id:L.id,data:L,position:{x:L.x,y:L.y},type:"building",width:bp,height:vp,selectable:!1,className:Sn(xp),extent:"parent",parentId:"land"})],[n,r,i,l]),b=Q.useMemo(()=>[...s.map(L=>({id:L.id,source:L.fromId,target:L.toId,type:"route",animated:L.resourceCount>0,markerEnd:{type:Vh.ArrowClosed,color:L.resourceCount>0?"#b1b1b7":"#FF0000"},style:{stroke:L.resourceCount>0?void 0:"#FF0000",strokeWidth:2,pointerEvents:"all"}}))],[s]),[x,_]=kne(h),[N,I]=Ine(b),{updateNode:R,getIntersectingNodes:T,fitView:O}=yf();Q.useEffect(()=>{_(h)},[h]),Q.useEffect(()=>{I(b)},[b]),Q.useEffect(()=>{o&&setTimeout(()=>{O({nodes:[{id:o}],duration:750,minZoom:2,maxZoom:2})},250)},[O,o]);const A=nn({mutationKey:["Construction","position"],async mutationFn({buildingId:L,x:F,y:V,valid:U}){return jt.transaction().execute(async z=>{const ee=await z.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").select(["b.id","b.constructionId"]).where("c.plan","=",!0).where("b.id","=",L).executeTakeFirst();await z.updateTable("Building").set({x:F,y:V}).where("id","=",L).execute(),ee?.constructionId&&await z.updateTable("Construction").set({valid:U}).where("id","=",ee.constructionId).execute()})},async onSuccess(){await u()}}),D=Q.useCallback(L=>{_(F=>kN(L,F))},[_]),M=Q.useCallback((L,F)=>{},[T,R]),W=Q.useCallback((L,F)=>{const V=T(F).filter(U=>U.type!=="land").length>0;A.mutate({buildingId:F.id,x:F.position.x,y:F.position.y,valid:!V})},[T,A]),P=nn({async mutationFn({fromId:L,toId:F}){return jt.transaction().execute(async V=>V.insertInto("Route").values({id:Pn(),fromId:L,toId:F,userId:t}).execute())},async onSuccess(){await u()}}),j=Q.useCallback(({source:L,target:F})=>P.mutate({fromId:L,toId:F}),[P]);return f.jsx(f.Fragment,{children:f.jsxs("div",{className:"flex flex-row",children:[f.jsxs(EL,{nodes:x,edges:N,onNodesChange:D,onNodeDrag:M,onNodeDragStop:W,onConnect:j,className:"flex-grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:ure,edgeTypes:dre,connectionLineComponent:tre,connectionLineStyle:cre,maxZoom:2,minZoom:.1,onDoubleClick:()=>{p({search:{routing:!l}})},onEdgeClick:(L,F)=>{p({to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:d,id:F.source}})},zoomOnDoubleClick:!1,children:[f.jsx(jL,{userId:t,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-16"]},onDoubleClick:L=>{L.preventDefault(),L.stopPropagation()}}),f.jsx(ere,{userId:t,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),f.jsx(CL,{orientation:"horizontal",showZoom:!1,showFitView:!1}),f.jsx(RL,{zoomable:!0,draggable:!0,pannable:!0}),f.jsx(kL,{variant:ta.Lines,className:"bg-slate-50",gap:32,size:1}),f.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-sm",children:[f.jsx(At,{to:"/$locale/apps/derivean/game",params:{locale:d},children:f.jsx(wn,{iconEnabled:Bi,variant:{variant:"subtle"}})}),f.jsx(At,{to:"/$locale/apps/derivean/map/construction",params:{locale:d},children:f.jsx(wn,{iconEnabled:On,variant:{variant:"subtle"}})})]})]}),f.jsx(co,{})]})})},pre=({cycle:t,userId:e,construction:n,building:r,queue:i,route:s,zoomToId:o,routing:l})=>f.jsx(SL,{children:f.jsx(fre,{userId:e,cycle:t,construction:n,queue:i,building:r,route:s,zoomToId:o,routing:l})}),YE=zt("/$locale/apps/derivean/map")({validateSearch:xr($.object({zoomToId:$.string().optional(),routing:$.boolean().optional()})),async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return vm.parse(pf.get("session"))}catch{throw Zh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,construction:await t.ensureQueryData({queryKey:["GameMap","construction",r.id],async queryFn(){return e.transaction().execute(i=>ri({select:i.selectFrom("Building as bg").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.constructionId","bl.name","bg.x","bg.y","c.valid"]).where("c.plan","=",!0).where("c.userId","=",r.id),output:$.object({id:$.string().min(1),blueprintId:$.string().min(1),constructionId:$.string().min(1),name:$.string().min(1),x:$.number(),y:$.number(),valid:js()})}))}}),queue:await t.ensureQueryData({queryKey:["GameMap","queue",r.id],async queryFn(){return e.transaction().execute(i=>ri({select:i.selectFrom("Building as bg").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bl.name","bg.x","bg.y","c.valid","c.cycles","c.cycle"]).where("c.plan","=",!1).where("c.userId","=",r.id),output:$.object({id:$.string().min(1),blueprintId:$.string().min(1),name:$.string().min(1),x:$.number(),y:$.number(),cycles:$.number().int().nonnegative(),cycle:$.number().int().nonnegative(),valid:js()})}))}}),building:await t.ensureQueryData({queryKey:["GameMap","building",r.id],async queryFn(){return e.transaction().execute(i=>ri({select:i.selectFrom("Building as bg").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.productionId","bg.recurringProductionId",s=>s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),s=>s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),s=>s.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(o=>pF.jsonObject({id:o.ref("p.id"),name:o.ref("r.name"),cycle:o.ref("p.cycle"),cycles:o.ref("p.cycles")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("bg.userId","=",r.id),output:$.object({id:$.string().min(1),blueprintId:$.string().min(1),name:$.string().min(1),productionId:$.string().nullish(),recurringProductionId:$.string().nullish(),productionName:$.string().nullish(),recurringProductionName:$.string().nullish(),production:x9($.object({id:$.string().min(1),name:$.string().min(1),cycle:$.number().int().nonnegative(),cycles:$.number().int().nonnegative()})).nullish(),x:$.number(),y:$.number()})}))}}),route:await t.ensureQueryData({queryKey:["GameMap","route",r.id],async queryFn(){return e.transaction().execute(i=>ri({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName",s=>s.selectFrom("Route_Resource as rr").whereRef("rr.routeId","=","r.id").select(o=>o.fn.count("rr.id").as("resourceCount")).as("resourceCount")]).where("r.userId","=",r.id),output:$.object({id:$.string().min(1),fromId:$.string().min(1),toId:$.string().min(1),fromName:$.string().min(1),toName:$.string().min(1),resourceCount:$.number().int().nonnegative()})}))}}),cycle:await t.ensureQueryData({queryKey:["GameMap","Cycle",r.id],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,construction:e,queue:n,building:r,route:i,cycle:s}=YE.useLoaderData(),{zoomToId:o,routing:l}=YE.useSearch();return f.jsx(pre,{userId:t.id,cycle:s,construction:e,queue:n,building:r,route:i,zoomToId:o,routing:l})}}),hre=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsxs(nc,{...t,children:[f.jsx(Yn,{icon:"icon-[et--map]",to:"/$locale/apps/derivean/map",params:{locale:e},children:f.jsx(ne,{label:"Map (menu)"})}),f.jsx(Yn,{icon:On,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:f.jsx(ne,{label:"Blueprint list (menu)"})})]})},mre=zt("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return vm.parse(pf.get("session"))}catch{throw Zh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=sn({from:"/$locale"}),{session:e,cycle:n}=hi({from:"/$locale/apps/derivean/game"}),r=wB({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(i){return i.state.status}});return f.jsx(AD,{logo:f.jsx(At,{to:"/$locale/apps/derivean/game",params:{locale:t},children:f.jsx(zD,{})}),menu:f.jsxs("div",{className:"flex flex-row items-center gap-4",children:[f.jsx(hre,{}),f.jsx(jL,{cycle:n,userId:e.id})]}),actions:f.jsxs(f.Fragment,{children:[e.name,f.jsx(At,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),f.jsx(At,{icon:lN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:r.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:f.jsx(co,{})})}});var Ly={exports:{}},gre=Ly.exports,Jj;function yre(){return Jj||(Jj=1,function(t,e){(function(n,r){r()})(gre,function(){function n(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,p,h){var b=new XMLHttpRequest;b.open("GET",d),b.responseType="blob",b.onload=function(){u(b.response,p,h)},b.onerror=function(){console.error("could not download file")},b.send()}function i(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Dc=="object"&&Dc.global===Dc?Dc:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,p,h){var b=o.URL||o.webkitURL,x=document.createElement("a");p=p||d.name||"download",x.download=p,x.rel="noopener",typeof d=="string"?(x.href=d,x.origin===location.origin?s(x):i(x.href)?r(d,p,h):s(x,x.target="_blank")):(x.href=b.createObjectURL(d),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,h){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,h),p);else if(i(d))r(d,p,h);else{var b=document.createElement("a");b.href=d,b.target="_blank",setTimeout(function(){s(b)})}}:function(d,p,h,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof d=="string")return r(d,p,h);var x=d.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||x&&_||l)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var O=I.result;O=N?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=O:location=O,b=null},I.readAsDataURL(d)}else{var R=o.URL||o.webkitURL,T=R.createObjectURL(d);b?b.location=T:location.href=T,b=null,setTimeout(function(){R.revokeObjectURL(T)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}(Ly)),Ly.exports}var bre=yre();const vre=lo(bre),O0=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Blueprint_Inventory","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],xre=zt("/$locale/apps/derivean/root/")({component(){const t=nn({mutationKey:["export"],async mutationFn(){return Tn.promise((async()=>{const e=[];await jt.transaction().execute(async n=>{for await(const r of O0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),vre.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),Pr("Export game files"))}});return f.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[f.jsx(_G,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await gr`PRAGMA foreign_keys = OFF`.execute(jt),await Tn.promise(jt.transaction().execute(async i=>{for await(const{source:s}of r){const o=O0.find(l=>l===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const l=O0.find(u=>u===s);if(l)for await(const u of Object.values(o))await i.insertInto(l).values(u).execute()}}),Pr("Import game files")),await gr`PRAGMA foreign_keys = ON`.execute(jt)}}),f.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:f.jsx(wn,{iconEnabled:BD,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:f.jsx(ne,{label:"Export game files (label)"})})}),f.jsx("h2",{children:"TODO"}),f.jsxs("ul",{className:"flex flex-col gap-2",children:[f.jsx("li",{children:"Fetch production on building from production next to prod* ids on the building."}),f.jsx("li",{children:"Multi-type inventory stuff is quite crazy and buggy."}),f.jsx("li",{children:"Routes does not account target inventory type, so transport goes randomly. Bug, ugly one."}),f.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),f.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),f.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),f.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),f.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),f.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),f.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),f.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),f.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),f.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),f.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}}),wre=zt("/$locale/apps/derivean/map/")({}),_re=zt("/$locale/apps/derivean/game/")({component(){const{tva:t}=br({from:"__root__"}),e=t().slots;return f.jsx("div",{className:e.base(),children:f.jsx("div",{children:"management here"})})}});var j0,Zj;function CN(){if(Zj)return j0;Zj=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var b=arguments,x=this;return p.forEach(function(_){b.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var b=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(b),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(b),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var b=h;b!==void 0;b=this.parent(b))if(b===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var b of this.successors(p))x.add(b);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var b=this;Object.entries(this._nodes).forEach(function([N,I]){p(N)&&h.setNode(N,I)}),Object.values(this._edgeObjs).forEach(function(N){h.hasNode(N.v)&&h.hasNode(N.w)&&h.setEdge(N,b.edge(N))});var x={};function _(N){var I=b.parent(N);return I===void 0||h.hasNode(I)?(x[N]=I,I):I in x?x[I]:_(I)}return this._isCompound&&h.nodes().forEach(N=>h.setParent(N,_(N))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var b=this,x=arguments;return p.reduce(function(_,N){return x.length>1?b.setEdge(_,N,h):b.setEdge(_,N),N}),this}setEdge(){var p,h,b,x,_=!1,N=arguments[0];typeof N=="object"&&N!==null&&"v"in N?(p=N.v,h=N.w,b=N.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=N,h=arguments[1],b=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,b!==void 0&&(b=""+b);var I=o(this._isDirected,p,h,b);if(Object.hasOwn(this._edgeLabels,I))return _&&(this._edgeLabels[I]=x),this;if(b!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[I]=_?x:this._defaultEdgeLabelFn(p,h,b);var R=l(this._isDirected,p,h,b);return p=R.v,h=R.w,Object.freeze(R),this._edgeObjs[I]=R,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][I]=R,this._out[p][I]=R,this._edgeCount++,this}edge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var b=this._in[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var b=this._out[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var b=this.inEdges(p,h);if(b)return b.concat(this.outEdges(p,h))}}function i(d,p){d[p]?d[p]++:d[p]=1}function s(d,p){--d[p]||delete d[p]}function o(d,p,h,b){var x=""+p,_=""+h;if(!d&&x>_){var N=x;x=_,_=N}return x+n+_+n+(b===void 0?t:b)}function l(d,p,h,b){var x=""+p,_=""+h;if(!d&&x>_){var N=x;x=_,_=N}var I={v:x,w:_};return b&&(I.name=b),I}function u(d,p){return o(d,p.v,p.w,p.name)}return j0=r,j0}var q0,Yj;function Sre(){return Yj||(Yj=1,q0="2.2.4"),q0}var A0,Xj;function Ere(){return Xj||(Xj=1,A0={Graph:CN(),version:Sre()}),A0}var P0,eq;function Nre(){if(eq)return P0;eq=1;var t=CN();P0={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var l=s.node(o),u=s.parent(o),d={v:o};return l!==void 0&&(d.value=l),u!==void 0&&(d.parent=u),d})}function r(s){return s.edges().map(function(o){var l=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),l!==void 0&&(u.value=l),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),s.edges.forEach(function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return P0}var F0,tq;function kre(){if(tq)return F0;tq=1,F0=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return F0}var D0,nq;function qL(){if(nq)return D0;nq=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r}}return D0=t,D0}var L0,rq;function AL(){if(rq)return L0;rq=1;var t=qL();L0=n;var e=()=>1;function n(i,s,o,l){return r(i,String(s),o||e,l||function(u){return i.outEdges(u)})}function r(i,s,o,l){var u={},d=new t,p,h,b=function(x){var _=x.v!==p?x.v:x.w,N=u[_],I=o(x),R=h.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+I);R<N.distance&&(N.distance=R,N.predecessor=p,d.decrease(_,R))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},d.add(x,_)});d.size()>0&&(p=d.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(b);return u}return L0}var M0,iq;function Ire(){if(iq)return M0;iq=1;var t=AL();M0=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return M0}var $0,sq;function PL(){if(sq)return $0;sq=1,$0=t;function t(e){var n=0,r=[],i={},s=[];function o(l){var u=i[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),e.successors(l).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var d=[],p;do p=r.pop(),i[p].onStack=!1,d.push(p);while(l!==p);s.push(d)}}return e.nodes().forEach(function(l){Object.hasOwn(i,l)||o(l)}),s}return $0}var B0,oq;function Cre(){if(oq)return B0;oq=1;var t=PL();B0=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return B0}var z0,aq;function Tre(){if(aq)return z0;aq=1,z0=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},l=r.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(d){u!==d&&(o[u][d]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(d){var p=d.v===u?d.w:d.v,h=i(d);o[u][p]={distance:h,predecessor:u}})}),l.forEach(function(u){var d=o[u];l.forEach(function(p){var h=o[p];l.forEach(function(b){var x=h[u],_=d[b],N=h[b],I=x.distance+_.distance;I<N.distance&&(N.distance=I,N.predecessor=_.predecessor)})})}),o}return z0}var W0,lq;function FL(){if(lq)return W0;lq=1;function t(n){var r={},i={},s=[];function o(l){if(Object.hasOwn(i,l))throw new e;Object.hasOwn(r,l)||(i[l]=!0,r[l]=!0,n.predecessors(l).forEach(o),delete i[l],s.push(l))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return W0=t,t.CycleException=e,W0}var V0,cq;function Rre(){if(cq)return V0;cq=1;var t=FL();V0=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return V0}var U0,uq;function DL(){if(uq)return U0;uq=1,U0=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var l=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,d=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,l,p,d)}),d}function e(i,s,o,l){for(var u=[[i,!1]];u.length>0;){var d=u.pop();d[1]?l.push(d[0]):Object.hasOwn(o,d[0])||(o[d[0]]=!0,u.push([d[0],!0]),r(s(d[0]),p=>u.push([p,!1])))}}function n(i,s,o,l){for(var u=[i];u.length>0;){var d=u.pop();Object.hasOwn(o,d)||(o[d]=!0,l.push(d),r(s(d),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return U0}var H0,dq;function Ore(){if(dq)return H0;dq=1;var t=DL();H0=e;function e(n,r){return t(n,r,"post")}return H0}var Q0,fq;function jre(){if(fq)return Q0;fq=1;var t=DL();Q0=e;function e(n,r){return t(n,r,"pre")}return Q0}var K0,pq;function qre(){if(pq)return K0;pq=1;var t=CN(),e=qL();K0=n;function n(r,i){var s=new t,o={},l=new e,u;function d(h){var b=h.v===u?h.w:h.v,x=l.priority(b);if(x!==void 0){var _=i(h);_<x&&(o[b]=u,l.decrease(b,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(r.nodes()[0],0);for(var p=!1;l.size()>0;){if(u=l.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(d)}return s}return K0}var G0,hq;function Are(){return hq||(hq=1,G0={components:kre(),dijkstra:AL(),dijkstraAll:Ire(),findCycles:Cre(),floydWarshall:Tre(),isAcyclic:Rre(),postorder:Ore(),preorder:jre(),prim:qre(),tarjan:PL(),topsort:FL()}),G0}var J0,mq;function Po(){if(mq)return J0;mq=1;var t=Ere();return J0={Graph:t.Graph,json:Nre(),alg:Are(),version:t.version},J0}var Z0,gq;function Pre(){if(gq)return Z0;gq=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Z0=t,Z0}var Y0,yq;function Fre(){if(yq)return Y0;yq=1;let t=Po().Graph,e=Pre();Y0=r;let n=()=>1;function r(d,p){if(d.nodeCount()<=1)return[];let h=o(d,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>d.outEdges(x.v,x.w))}function i(d,p,h){let b=[],x=p[p.length-1],_=p[0],N;for(;d.nodeCount();){for(;N=_.dequeue();)s(d,p,h,N);for(;N=x.dequeue();)s(d,p,h,N);if(d.nodeCount()){for(let I=p.length-2;I>0;--I)if(N=p[I].dequeue(),N){b=b.concat(s(d,p,h,N,!0));break}}}return b}function s(d,p,h,b,x){let _=x?[]:void 0;return d.inEdges(b.v).forEach(N=>{let I=d.edge(N),R=d.node(N.v);x&&_.push({v:N.v,w:N.w}),R.out-=I,l(p,h,R)}),d.outEdges(b.v).forEach(N=>{let I=d.edge(N),R=N.w,T=d.node(R);T.in-=I,l(p,h,T)}),d.removeNode(b.v),_}function o(d,p){let h=new t,b=0,x=0;d.nodes().forEach(I=>{h.setNode(I,{v:I,in:0,out:0})}),d.edges().forEach(I=>{let R=h.edge(I.v,I.w)||0,T=p(I),O=R+T;h.setEdge(I.v,I.w,O),x=Math.max(x,h.node(I.v).out+=T),b=Math.max(b,h.node(I.w).in+=T)});let _=u(x+b+3).map(()=>new e),N=b+1;return h.nodes().forEach(I=>{l(_,N,h.node(I))}),{graph:h,buckets:_,zeroIdx:N}}function l(d,p,h){h.out?h.in?d[h.out-h.in+p].enqueue(h):d[d.length-1].enqueue(h):d[0].enqueue(h)}function u(d){const p=[];for(let h=0;h<d;h++)p.push(h);return p}return Y0}var X0,bq;function Yr(){if(bq)return X0;bq=1;let t=Po().Graph;X0={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:o,mapValues:M,maxRank:_,normalizeRanks:u,notime:R,partition:N,pick:D,predecessorWeights:s,range:A,removeEmptyRanks:d,simplify:n,successorWeights:i,time:I,uniqueId:O,zipObject:W};function e(P,j,L,F){let V;do V=O(F);while(P.hasNode(V));return L.dummy=j,P.setNode(V,L),V}function n(P){let j=new t().setGraph(P.graph());return P.nodes().forEach(L=>j.setNode(L,P.node(L))),P.edges().forEach(L=>{let F=j.edge(L.v,L.w)||{weight:0,minlen:1},V=P.edge(L);j.setEdge(L.v,L.w,{weight:F.weight+V.weight,minlen:Math.max(F.minlen,V.minlen)})}),j}function r(P){let j=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach(L=>{P.children(L).length||j.setNode(L,P.node(L))}),P.edges().forEach(L=>{j.setEdge(L,P.edge(L))}),j}function i(P){let j=P.nodes().map(L=>{let F={};return P.outEdges(L).forEach(V=>{F[V.w]=(F[V.w]||0)+P.edge(V).weight}),F});return W(P.nodes(),j)}function s(P){let j=P.nodes().map(L=>{let F={};return P.inEdges(L).forEach(V=>{F[V.v]=(F[V.v]||0)+P.edge(V).weight}),F});return W(P.nodes(),j)}function o(P,j){let L=P.x,F=P.y,V=j.x-L,U=j.y-F,z=P.width/2,ee=P.height/2;if(!V&&!U)throw new Error("Not possible to find intersection inside of the rectangle");let Z,le;return Math.abs(U)*z>Math.abs(V)*ee?(U<0&&(ee=-ee),Z=ee*V/U,le=ee):(V<0&&(z=-z),Z=z,le=z*U/V),{x:L+Z,y:F+le}}function l(P){let j=A(_(P)+1).map(()=>[]);return P.nodes().forEach(L=>{let F=P.node(L),V=F.rank;V!==void 0&&(j[V][F.order]=L)}),j}function u(P){let j=P.nodes().map(F=>{let V=P.node(F).rank;return V===void 0?Number.MAX_VALUE:V}),L=x(Math.min,j);P.nodes().forEach(F=>{let V=P.node(F);Object.hasOwn(V,"rank")&&(V.rank-=L)})}function d(P){let j=P.nodes().map(z=>P.node(z).rank),L=x(Math.min,j),F=[];P.nodes().forEach(z=>{let ee=P.node(z).rank-L;F[ee]||(F[ee]=[]),F[ee].push(z)});let V=0,U=P.graph().nodeRankFactor;Array.from(F).forEach((z,ee)=>{z===void 0&&ee%U!==0?--V:z!==void 0&&V&&z.forEach(Z=>P.node(Z).rank+=V)})}function p(P,j,L,F){let V={width:0,height:0};return arguments.length>=4&&(V.rank=L,V.order=F),e(P,"border",V,j)}function h(P,j=b){const L=[];for(let F=0;F<P.length;F+=j){const V=P.slice(F,F+j);L.push(V)}return L}const b=65535;function x(P,j){if(j.length>b){const L=h(j);return P.apply(null,L.map(F=>P.apply(null,F)))}else return P.apply(null,j)}function _(P){const L=P.nodes().map(F=>{let V=P.node(F).rank;return V===void 0?Number.MIN_VALUE:V});return x(Math.max,L)}function N(P,j){let L={lhs:[],rhs:[]};return P.forEach(F=>{j(F)?L.lhs.push(F):L.rhs.push(F)}),L}function I(P,j){let L=Date.now();try{return j()}finally{console.log(P+" time: "+(Date.now()-L)+"ms")}}function R(P,j){return j()}let T=0;function O(P){var j=++T;return toString(P)+j}function A(P,j,L=1){j==null&&(j=P,P=0);let F=U=>U<j;L<0&&(F=U=>j<U);const V=[];for(let U=P;F(U);U+=L)V.push(U);return V}function D(P,j){const L={};for(const F of j)P[F]!==void 0&&(L[F]=P[F]);return L}function M(P,j){let L=j;return typeof j=="string"&&(L=F=>F[j]),Object.entries(P).reduce((F,[V,U])=>(F[V]=L(U,V),F),{})}function W(P,j){return P.reduce((L,F,V)=>(L[F]=j[V],L),{})}return X0}var eS,vq;function Dre(){if(vq)return eS;vq=1;let t=Fre(),e=Yr().uniqueId;eS={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,l(s)):r(s)).forEach(u=>{let d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e("rev"))});function l(u){return d=>u.edge(d).weight}}function r(s){let o=[],l={},u={};function d(p){Object.hasOwn(u,p)||(u[p]=!0,l[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(l,h.w)?o.push(h):d(h.w)}),delete l[p])}return s.nodes().forEach(d),o}function i(s){s.edges().forEach(o=>{let l=s.edge(o);if(l.reversed){s.removeEdge(o);let u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return eS}var tS,xq;function Lre(){if(xq)return tS;xq=1;let t=Yr();tS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,l=i.node(o).rank,u=s.w,d=i.node(u).rank,p=s.name,h=i.edge(s),b=h.labelRank;if(d===l+1)return;i.removeEdge(s);let x,_,N;for(N=0,++l;l<d;++N,++l)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},x=t.addDummyNode(i,"edge",_,"_d"),l===b&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),N===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),l=o.edgeLabel,u;for(i.setEdge(o.edgeObj,l);o.dummy;)u=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=i.node(s)})}return tS}var nS,wq;function Yb(){if(wq)return nS;wq=1;const{applyWithChunking:t}=Yr();nS={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(Object.hasOwn(i,o))return l.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var d=t(Math.min,u);return d===Number.POSITIVE_INFINITY&&(d=0),l.rank=d}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return nS}var rS,_q;function LL(){if(_q)return rS;_q=1;var t=Po().Graph,e=Yb().slack;rS=n;function n(o){var l=new t({directed:!1}),u=o.nodes()[0],d=o.nodeCount();l.setNode(u,{});for(var p,h;r(l,o)<d;)p=i(l,o),h=l.hasNode(p.v)?e(o,p):-e(o,p),s(l,o,h);return l}function r(o,l){function u(d){l.nodeEdges(d).forEach(p=>{var h=p.v,b=d===h?p.w:h;!o.hasNode(b)&&!e(l,p)&&(o.setNode(b,{}),o.setEdge(d,b,{}),u(b))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,l){return l.edges().reduce((d,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(l,p)),h<d[0]?[h,p]:d},[Number.POSITIVE_INFINITY,null])[1]}function s(o,l,u){o.nodes().forEach(d=>l.node(d).rank+=u)}return rS}var iS,Sq;function Mre(){if(Sq)return iS;Sq=1;var t=LL(),e=Yb().slack,n=Yb().longestPath,r=Po().alg.preorder,i=Po().alg.postorder,s=Yr().simplify;iS=o,o.initLowLimValues=p,o.initCutValues=l,o.calcCutValue=d,o.leaveEdge=b,o.enterEdge=x,o.exchangeEdges=_;function o(T){T=s(T),n(T);var O=t(T);p(O),l(O,T);for(var A,D;A=b(O);)D=x(O,T,A),_(O,T,A,D)}function l(T,O){var A=i(T,T.nodes());A=A.slice(0,A.length-1),A.forEach(D=>u(T,O,D))}function u(T,O,A){var D=T.node(A),M=D.parent;T.edge(A,M).cutvalue=d(T,O,A)}function d(T,O,A){var D=T.node(A),M=D.parent,W=!0,P=O.edge(A,M),j=0;return P||(W=!1,P=O.edge(M,A)),j=P.weight,O.nodeEdges(A).forEach(L=>{var F=L.v===A,V=F?L.w:L.v;if(V!==M){var U=F===W,z=O.edge(L).weight;if(j+=U?z:-z,I(T,A,V)){var ee=T.edge(A,V).cutvalue;j+=U?-ee:ee}}}),j}function p(T,O){arguments.length<2&&(O=T.nodes()[0]),h(T,{},1,O)}function h(T,O,A,D,M){var W=A,P=T.node(D);return O[D]=!0,T.neighbors(D).forEach(j=>{Object.hasOwn(O,j)||(A=h(T,O,A,j,D))}),P.low=W,P.lim=A++,M?P.parent=M:delete P.parent,A}function b(T){return T.edges().find(O=>T.edge(O).cutvalue<0)}function x(T,O,A){var D=A.v,M=A.w;O.hasEdge(D,M)||(D=A.w,M=A.v);var W=T.node(D),P=T.node(M),j=W,L=!1;W.lim>P.lim&&(j=P,L=!0);var F=O.edges().filter(V=>L===R(T,T.node(V.v),j)&&L!==R(T,T.node(V.w),j));return F.reduce((V,U)=>e(O,U)<e(O,V)?U:V)}function _(T,O,A,D){var M=A.v,W=A.w;T.removeEdge(M,W),T.setEdge(D.v,D.w,{}),p(T),l(T,O),N(T,O)}function N(T,O){var A=T.nodes().find(M=>!O.node(M).parent),D=r(T,A);D=D.slice(1),D.forEach(M=>{var W=T.node(M).parent,P=O.edge(M,W),j=!1;P||(P=O.edge(W,M),j=!0),O.node(M).rank=O.node(W).rank+(j?P.minlen:-P.minlen)})}function I(T,O,A){return T.hasEdge(O,A)}function R(T,O,A){return A.low<=O.lim&&O.lim<=A.lim}return iS}var sS,Eq;function $re(){if(Eq)return sS;Eq=1;var t=Yb(),e=t.longestPath,n=LL(),r=Mre();sS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return sS}var oS,Nq;function Bre(){if(Nq)return oS;Nq=1,oS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),l=o.edgeObj,u=e(r,i,l.v,l.w),d=u.path,p=u.lca,h=0,b=d[h],x=!0;for(;s!==l.w;){if(o=r.node(s),x){for(;(b=d[h])!==p&&r.node(b).maxRank<o.rank;)h++;b===p&&(x=!1)}if(!x){for(;h<d.length-1&&r.node(b=d[h+1]).minRank<=o.rank;)h++;b=d[h]}r.setParent(s,b),s=r.successors(s)[0]}})}function e(r,i,s,o){let l=[],u=[],d=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,b;h=s;do h=r.parent(h),l.push(h);while(h&&(i[h].low>d||p>i[h].lim));for(b=h,h=o;(h=r.parent(h))!==b;)u.push(h);return{path:l.concat(u.reverse()),lca:b}}function n(r){let i={},s=0;function o(l){let u=s;r.children(l).forEach(o),i[l]={low:u,lim:s++}}return r.children().forEach(o),i}return oS}var aS,kq;function zre(){if(kq)return aS;kq=1;let t=Yr();aS={run:e,cleanup:s};function e(o){let l=t.addDummyNode(o,"root",{},"_root"),u=r(o),d=Object.values(u),p=t.applyWithChunking(Math.max,d)-1,h=2*p+1;o.graph().nestingRoot=l,o.edges().forEach(x=>o.edge(x).minlen*=h);let b=i(o)+1;o.children().forEach(x=>n(o,l,h,b,p,u,x)),o.graph().nodeRankFactor=h}function n(o,l,u,d,p,h,b){let x=o.children(b);if(!x.length){b!==l&&o.setEdge(l,b,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),N=t.addBorderNode(o,"_bb"),I=o.node(b);o.setParent(_,b),I.borderTop=_,o.setParent(N,b),I.borderBottom=N,x.forEach(R=>{n(o,l,u,d,p,h,R);let T=o.node(R),O=T.borderTop?T.borderTop:R,A=T.borderBottom?T.borderBottom:R,D=T.borderTop?d:2*d,M=O!==A?1:p-h[b]+1;o.setEdge(_,O,{weight:D,minlen:M,nestingEdge:!0}),o.setEdge(A,N,{weight:D,minlen:M,nestingEdge:!0})}),o.parent(b)||o.setEdge(l,_,{weight:0,minlen:p+h[b]})}function r(o){var l={};function u(d,p){var h=o.children(d);h&&h.length&&h.forEach(b=>u(b,p+1)),l[d]=p}return o.children().forEach(d=>u(d,1)),l}function i(o){return o.edges().reduce((l,u)=>l+o.edge(u).weight,0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,o.edges().forEach(u=>{var d=o.edge(u);d.nestingEdge&&o.removeEdge(u)})}return aS}var lS,Iq;function Wre(){if(Iq)return lS;Iq=1;let t=Yr();lS=e;function e(r){function i(s){let o=r.children(s),l=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let u=l.minRank,d=l.maxRank+1;u<d;++u)n(r,"borderLeft","_bl",s,l,u),n(r,"borderRight","_br",s,l,u)}}r.children().forEach(i)}function n(r,i,s,o,l,u){let d={width:0,height:0,rank:u,borderType:i},p=l[i][u-1],h=t.addDummyNode(r,"border",d,s);l[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return lS}var cS,Cq;function Vre(){if(Cq)return cS;Cq=1,cS={adjust:t,undo:e};function t(u){let d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(u)}function e(u){let d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&i(u),(d==="lr"||d==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(d=>r(u.node(d))),u.edges().forEach(d=>r(u.edge(d)))}function r(u){let d=u.width;u.width=u.height,u.height=d}function i(u){u.nodes().forEach(d=>s(u.node(d))),u.edges().forEach(d=>{let p=u.edge(d);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(d=>l(u.node(d))),u.edges().forEach(d=>{let p=u.edge(d);p.points.forEach(l),Object.hasOwn(p,"x")&&l(p)})}function l(u){let d=u.x;u.x=u.y,u.y=d}return cS}var uS,Tq;function Ure(){if(Tq)return uS;Tq=1;let t=Yr();uS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),l=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);l[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),l}return uS}var dS,Rq;function Hre(){if(Rq)return dS;Rq=1;let t=Yr().zipObject;dS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((b,x)=>x)),l=i.flatMap(b=>r.outEdges(b).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let d=2*u-1;u-=1;let p=new Array(d).fill(0),h=0;return l.forEach(b=>{let x=b.pos+u;p[x]+=b.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=b.weight;h+=b.weight*_}),h}return dS}var fS,Oq;function Qre(){if(Oq)return fS;Oq=1,fS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,l)=>{let u=e.edge(l),d=e.node(l.v);return{sum:o.sum+u.weight*d.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return fS}var pS,jq;function Kre(){if(jq)return pS;jq=1;let t=Yr();pS=e;function e(i,s){let o={};i.forEach((u,d)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let d=o[u.v],p=o[u.w];d!==void 0&&p!==void 0&&(p.indegree++,d.out.push(o[u.w]))});let l=Object.values(o).filter(u=>!u.indegree);return n(l)}function n(i){let s=[];function o(u){return d=>{d.merged||(d.barycenter===void 0||u.barycenter===void 0||d.barycenter>=u.barycenter)&&r(u,d)}}function l(u){return d=>{d.in.push(u),--d.indegree===0&&i.push(d)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(l(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return pS}var hS,qq;function Gre(){if(qq)return hS;qq=1;let t=Yr();hS=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),l=o.lhs,u=o.rhs.sort((_,N)=>N.i-_.i),d=[],p=0,h=0,b=0;l.sort(r(!!s)),b=n(d,u,b),l.forEach(_=>{b+=_.vs.length,d.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,b=n(d,u,b)});let x={vs:d.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let l;for(;s.length&&(l=s[s.length-1]).i<=o;)s.pop(),i.push(l.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return hS}var mS,Aq;function Jre(){if(Aq)return mS;Aq=1;let t=Qre(),e=Kre(),n=Gre();mS=r;function r(o,l,u,d){let p=o.children(l),h=o.node(l),b=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};b&&(p=p.filter(T=>T!==b&&T!==x));let N=t(o,p);N.forEach(T=>{if(o.children(T.v).length){let O=r(o,T.v,u,d);_[T.v]=O,Object.hasOwn(O,"barycenter")&&s(T,O)}});let I=e(N,u);i(I,_);let R=n(I,d);if(b&&(R.vs=[b,R.vs,x].flat(!0),o.predecessors(b).length)){let T=o.node(o.predecessors(b)[0]),O=o.node(o.predecessors(x)[0]);Object.hasOwn(R,"barycenter")||(R.barycenter=0,R.weight=0),R.barycenter=(R.barycenter*R.weight+T.order+O.order)/(R.weight+2),R.weight+=2}return R}function i(o,l){o.forEach(u=>{u.vs=u.vs.flatMap(d=>l[d]?l[d].vs:d)})}function s(o,l){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight):(o.barycenter=l.barycenter,o.weight=l.weight)}return mS}var gS,Pq;function Zre(){if(Pq)return gS;Pq=1;let t=Po().Graph,e=Yr();gS=n;function n(i,s,o){let l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(d=>i.node(d));return i.nodes().forEach(d=>{let p=i.node(d),h=i.parent(d);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(d),u.setParent(d,h||l),i[o](d).forEach(b=>{let x=b.v===d?b.w:b.v,_=u.edge(x,d),N=_!==void 0?_.weight:0;u.setEdge(x,d,{weight:i.edge(b).weight+N})}),Object.hasOwn(p,"minRank")&&u.setNode(d,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return gS}var yS,Fq;function Yre(){if(Fq)return yS;Fq=1,yS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let l=e.parent(o),u,d;for(;l;){if(u=e.parent(l),u?(d=i[u],i[u]=l):(d=s,s=l),d&&d!==l){n.setEdge(d,l);return}l=u}})}return yS}var bS,Dq;function Xre(){if(Dq)return bS;Dq=1;let t=Ure(),e=Hre(),n=Jre(),r=Zre(),i=Yre(),s=Po().Graph,o=Yr();bS=l;function l(h,b){if(b&&typeof b.customOrder=="function"){b.customOrder(h,l);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),N=u(h,o.range(x-1,-1,-1),"outEdges"),I=t(h);if(p(h,I),b&&b.disableOptimalOrderHeuristic)return;let R=Number.POSITIVE_INFINITY,T;for(let O=0,A=0;A<4;++O,++A){d(O%2?_:N,O%4>=2),I=o.buildLayerMatrix(h);let D=e(h,I);D<R&&(A=0,T=Object.assign({},I),R=D)}p(h,T)}function u(h,b,x){return b.map(function(_){return r(h,_,x)})}function d(h,b){let x=new s;h.forEach(function(_){let N=_.graph().root,I=n(_,N,x,b);I.vs.forEach((R,T)=>_.node(R).order=T),i(_,x,I.vs)})}function p(h,b){Object.values(b).forEach(x=>x.forEach((_,N)=>h.node(_).order=N))}return bS}var vS,Lq;function eie(){if(Lq)return vS;Lq=1;let t=Po().Graph,e=Yr();vS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:b};function n(I,R){let T={};function O(A,D){let M=0,W=0,P=A.length,j=D[D.length-1];return D.forEach((L,F)=>{let V=i(I,L),U=V?I.node(V).order:P;(V||L===j)&&(D.slice(W,F+1).forEach(z=>{I.predecessors(z).forEach(ee=>{let Z=I.node(ee),le=Z.order;(le<M||U<le)&&!(Z.dummy&&I.node(z).dummy)&&s(T,ee,z)})}),W=F+1,M=U)}),D}return R.length&&R.reduce(O),T}function r(I,R){let T={};function O(D,M,W,P,j){let L;e.range(M,W).forEach(F=>{L=D[F],I.node(L).dummy&&I.predecessors(L).forEach(V=>{let U=I.node(V);U.dummy&&(U.order<P||U.order>j)&&s(T,V,L)})})}function A(D,M){let W=-1,P,j=0;return M.forEach((L,F)=>{if(I.node(L).dummy==="border"){let V=I.predecessors(L);V.length&&(P=I.node(V[0]).order,O(M,j,F,W,P),j=F,W=P)}O(M,j,M.length,P,D.length)}),M}return R.length&&R.reduce(A),T}function i(I,R){if(I.node(R).dummy)return I.predecessors(R).find(T=>I.node(T).dummy)}function s(I,R,T){if(R>T){let A=R;R=T,T=A}let O=I[R];O||(I[R]=O={}),O[T]=!0}function o(I,R,T){if(R>T){let O=R;R=T,T=O}return!!I[R]&&Object.hasOwn(I[R],T)}function l(I,R,T,O){let A={},D={},M={};return R.forEach(W=>{W.forEach((P,j)=>{A[P]=P,D[P]=P,M[P]=j})}),R.forEach(W=>{let P=-1;W.forEach(j=>{let L=O(j);if(L.length){L=L.sort((V,U)=>M[V]-M[U]);let F=(L.length-1)/2;for(let V=Math.floor(F),U=Math.ceil(F);V<=U;++V){let z=L[V];D[j]===j&&P<M[z]&&!o(T,j,z)&&(D[z]=j,D[j]=A[j]=A[z],P=M[z])}}})}),{root:A,align:D}}function u(I,R,T,O,A){let D={},M=d(I,R,T,A),W=A?"borderLeft":"borderRight";function P(F,V){let U=M.nodes(),z=U.pop(),ee={};for(;z;)ee[z]?F(z):(ee[z]=!0,U.push(z),U=U.concat(V(z))),z=U.pop()}function j(F){D[F]=M.inEdges(F).reduce((V,U)=>Math.max(V,D[U.v]+M.edge(U)),0)}function L(F){let V=M.outEdges(F).reduce((z,ee)=>Math.min(z,D[ee.w]-M.edge(ee)),Number.POSITIVE_INFINITY),U=I.node(F);V!==Number.POSITIVE_INFINITY&&U.borderType!==W&&(D[F]=Math.max(D[F],V))}return P(j,M.predecessors.bind(M)),P(L,M.successors.bind(M)),Object.keys(O).forEach(F=>D[F]=D[T[F]]),D}function d(I,R,T,O){let A=new t,D=I.graph(),M=_(D.nodesep,D.edgesep,O);return R.forEach(W=>{let P;W.forEach(j=>{let L=T[j];if(A.setNode(L),P){var F=T[P],V=A.edge(F,L);A.setEdge(F,L,Math.max(M(I,j,P),V||0))}P=j})}),A}function p(I,R){return Object.values(R).reduce((T,O)=>{let A=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;Object.entries(O).forEach(([W,P])=>{let j=N(I,W)/2;A=Math.max(P+j,A),D=Math.min(P-j,D)});const M=A-D;return M<T[0]&&(T=[M,O]),T},[Number.POSITIVE_INFINITY,null])[1]}function h(I,R){let T=Object.values(R),O=e.applyWithChunking(Math.min,T),A=e.applyWithChunking(Math.max,T);["u","d"].forEach(D=>{["l","r"].forEach(M=>{let W=D+M,P=I[W];if(P===R)return;let j=Object.values(P),L=O-e.applyWithChunking(Math.min,j);M!=="l"&&(L=A-e.applyWithChunking(Math.max,j)),L&&(I[W]=e.mapValues(P,F=>F+L))})})}function b(I,R){return e.mapValues(I.ul,(T,O)=>{if(R)return I[R.toLowerCase()][O];{let A=Object.values(I).map(D=>D[O]).sort((D,M)=>D-M);return(A[1]+A[2])/2}})}function x(I){let R=e.buildLayerMatrix(I),T=Object.assign(n(I,R),r(I,R)),O={},A;["u","d"].forEach(M=>{A=M==="u"?R:Object.values(R).reverse(),["l","r"].forEach(W=>{W==="r"&&(A=A.map(F=>Object.values(F).reverse()));let P=(M==="u"?I.predecessors:I.successors).bind(I),j=l(I,A,T,P),L=u(I,A,j.root,j.align,W==="r");W==="r"&&(L=e.mapValues(L,F=>-F)),O[M+W]=L})});let D=p(I,O);return h(O,D),b(O,I.graph().align)}function _(I,R,T){return(O,A,D)=>{let M=O.node(A),W=O.node(D),P=0,j;if(P+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":j=-M.width/2;break;case"r":j=M.width/2;break}if(j&&(P+=T?j:-j),j=0,P+=(M.dummy?R:I)/2,P+=(W.dummy?R:I)/2,P+=W.width/2,Object.hasOwn(W,"labelpos"))switch(W.labelpos.toLowerCase()){case"l":j=W.width/2;break;case"r":j=-W.width/2;break}return j&&(P+=T?j:-j),j=0,P}}function N(I,R){return I.node(R).width}return vS}var xS,Mq;function tie(){if(Mq)return xS;Mq=1;let t=Yr(),e=eie().positionX;xS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,l=0;s.forEach(u=>{const d=u.reduce((p,h)=>{const b=i.node(h).height;return p>b?p:b},0);u.forEach(p=>i.node(p).y=l+d/2),l+=d+o})}return xS}var wS,$q;function nie(){if($q)return wS;$q=1;let t=Dre(),e=Lre(),n=$re(),r=Yr().normalizeRanks,i=Bre(),s=Yr().removeEmptyRanks,o=zre(),l=Wre(),u=Vre(),d=Xre(),p=tie(),h=Yr(),b=Po().Graph;wS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ne=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ne,we,ye)),we("  updateInputGraph",()=>N(de,Ne))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>j(de)),ye("    removeSelfEdges",()=>se(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>L(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>F(de)),ye("    removeEdgeLabelProxies",()=>V(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>l(de)),ye("    order",()=>d(de,we)),ye("    insertSelfEdges",()=>te(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>ee(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>U(de)),ye("    assignNodeIntersects",()=>z(de)),ye("    reversePoints",()=>Z(de)),ye("    acyclic.undo",()=>t.undo(de))}function N(de,ye){de.nodes().forEach(we=>{let Ne=de.node(we),ze=ye.node(we);Ne&&(Ne.x=ze.x,Ne.y=ze.y,Ne.rank=ze.rank,ye.children(we).length&&(Ne.width=ze.width,Ne.height=ze.height))}),de.edges().forEach(we=>{let Ne=de.edge(we),ze=ye.edge(we);Ne.points=ze.points,Object.hasOwn(ze,"x")&&(Ne.x=ze.x,Ne.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let I=["nodesep","edgesep","ranksep","marginx","marginy"],R={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},T=["acyclicer","ranker","rankdir","align"],O=["width","height"],A={width:0,height:0},D=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},W=["labelpos"];function P(de){let ye=new b({multigraph:!0,compound:!0}),we=ue(de.graph());return ye.setGraph(Object.assign({},R,X(we,I),h.pick(we,T))),de.nodes().forEach(Ne=>{let ze=ue(de.node(Ne));const Oe=X(ze,O);Object.keys(A).forEach(De=>{Oe[De]===void 0&&(Oe[De]=A[De])}),ye.setNode(Ne,Oe),ye.setParent(Ne,de.parent(Ne))}),de.edges().forEach(Ne=>{let ze=ue(de.edge(Ne));ye.setEdge(Ne,Object.assign({},M,X(ze,D),h.pick(ze,W)))}),ye}function j(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ne=de.edge(we);Ne.minlen*=2,Ne.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ne.width+=Ne.labeloffset:Ne.height+=Ne.labeloffset)})}function L(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ne=de.node(ye.v),Oe={rank:(de.node(ye.w).rank-Ne.rank)/2+Ne.rank,e:ye};h.addDummyNode(de,"edge-proxy",Oe,"_ep")}})}function F(de){let ye=0;de.nodes().forEach(we=>{let Ne=de.node(we);Ne.borderTop&&(Ne.minRank=de.node(Ne.borderTop).rank,Ne.maxRank=de.node(Ne.borderBottom).rank,ye=Math.max(ye,Ne.maxRank))}),de.graph().maxRank=ye}function V(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function U(de){let ye=Number.POSITIVE_INFINITY,we=0,Ne=Number.POSITIVE_INFINITY,ze=0,Oe=de.graph(),De=Oe.marginx||0,Je=Oe.marginy||0;function Xe(Ve){let ct=Ve.x,_t=Ve.y,Tt=Ve.width,Ut=Ve.height;ye=Math.min(ye,ct-Tt/2),we=Math.max(we,ct+Tt/2),Ne=Math.min(Ne,_t-Ut/2),ze=Math.max(ze,_t+Ut/2)}de.nodes().forEach(Ve=>Xe(de.node(Ve))),de.edges().forEach(Ve=>{let ct=de.edge(Ve);Object.hasOwn(ct,"x")&&Xe(ct)}),ye-=De,Ne-=Je,de.nodes().forEach(Ve=>{let ct=de.node(Ve);ct.x-=ye,ct.y-=Ne}),de.edges().forEach(Ve=>{let ct=de.edge(Ve);ct.points.forEach(_t=>{_t.x-=ye,_t.y-=Ne}),Object.hasOwn(ct,"x")&&(ct.x-=ye),Object.hasOwn(ct,"y")&&(ct.y-=Ne)}),Oe.width=we-ye+De,Oe.height=ze-Ne+Je}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ne=de.node(ye.v),ze=de.node(ye.w),Oe,De;we.points?(Oe=we.points[0],De=we.points[we.points.length-1]):(we.points=[],Oe=ze,De=Ne),we.points.unshift(h.intersectRect(Ne,Oe)),we.points.push(h.intersectRect(ze,De))})}function ee(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function Z(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ne=de.node(we.borderTop),ze=de.node(we.borderBottom),Oe=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-Oe.x),we.height=Math.abs(ze.y-Ne.y),we.x=Oe.x+we.width/2,we.y=Ne.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function se(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function te(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ne=0;we.forEach((ze,Oe)=>{var De=de.node(ze);De.order=Oe+Ne,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:Oe+ ++Ne,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ne=de.node(we.e.v),ze=Ne.x+Ne.width/2,Oe=Ne.y,De=we.x-ze,Je=Ne.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:Oe-Je},{x:ze+5*De/6,y:Oe-Je},{x:ze+De,y:Oe},{x:ze+5*De/6,y:Oe+Je},{x:ze+2*De/3,y:Oe+Je}],we.label.x=we.x,we.label.y=we.y}})}function X(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ue(de){var ye={};return de&&Object.entries(de).forEach(([we,Ne])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ne}),ye}return wS}var _S,Bq;function rie(){if(Bq)return _S;Bq=1;let t=Yr(),e=Po().Graph;_S={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,l)=>{let u="layer"+l;s.setNode(u,{rank:"same"}),o.reduce((d,p)=>(s.setEdge(d,p,{style:"invis"}),p))}),s}return _S}var SS,zq;function iie(){return zq||(zq=1,SS="1.1.4"),SS}var ES,Wq;function sie(){return Wq||(Wq=1,ES={graphlib:Po(),layout:nie(),debug:rie(),util:{time:Yr().time,notime:Yr().notime},version:iie()}),ES}var oie=sie();const ML=lo(oie);var km=t=>t.type==="checkbox",Vc=t=>t instanceof Date,Ai=t=>t==null;const $L=t=>typeof t=="object";var Fr=t=>!Ai(t)&&!Array.isArray(t)&&$L(t)&&!Vc(t),BL=t=>Fr(t)&&t.target?km(t.target)?t.target.checked:t.target.value:t,aie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,zL=(t,e)=>t.has(aie(e)),lie=t=>{const e=t.constructor&&t.constructor.prototype;return Fr(e)&&e.hasOwnProperty("isPrototypeOf")},TN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function rs(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(TN&&(t instanceof Blob||r))&&(n||Fr(t)))if(e=n?[]:{},!n&&!lie(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=rs(t[i]));else return t;return e}var ix=t=>Array.isArray(t)?t.filter(Boolean):[],qr=t=>t===void 0,Et=(t,e,n)=>{if(!e||!Fr(t))return n;const r=ix(e.split(/[,[\].]+?/)).reduce((i,s)=>Ai(i)?i:i[s],t);return qr(r)||r===t?qr(t[e])?n:t[e]:r},no=t=>typeof t=="boolean",RN=t=>/^\w*$/.test(t),WL=t=>ix(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Wn=(t,e,n)=>{let r=-1;const i=RN(e)?[e]:WL(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let u=n;if(r!==o){const d=t[l];u=Fr(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}return t};const Xb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Io={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ta={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},cie=Bn.createContext(null),ON=()=>Bn.useContext(cie);var VL=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Io.all&&(e._proxyFormState[o]=!r||Io.all),n&&(n[o]=!0),t[o]}});return i},is=t=>Fr(t)&&!Object.keys(t).length,UL=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return is(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Io.all))},oh=t=>Array.isArray(t)?t:[t],HL=(t,e,n)=>!t||!e||t===e||oh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function jN(t){const e=Bn.useRef(t);e.current=t,Bn.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function uie(t){const e=ON(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,l]=Bn.useState(n._formState),u=Bn.useRef(!0),d=Bn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Bn.useRef(i);return p.current=i,jN({disabled:r,next:h=>u.current&&HL(p.current,h.name,s)&&UL(h,d.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),Bn.useEffect(()=>(u.current=!0,d.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),Bn.useMemo(()=>VL(o,n,d.current,!1),[o,n])}var Zo=t=>typeof t=="string",QL=(t,e,n,r,i)=>Zo(t)?(r&&e.watch.add(t),Et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Et(n,s))):(r&&(e.watchAll=!0),n);function die(t){const e=ON(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,l=Bn.useRef(r);l.current=r,jN({disabled:s,subject:n._subjects.values,next:p=>{HL(l.current,p.name,o)&&d(rs(QL(l.current,n._names,p.values||n._formValues,!1,i)))}});const[u,d]=Bn.useState(n._getWatch(r,i));return Bn.useEffect(()=>n._removeUnmounted()),u}function fie(t){const e=ON(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=zL(i._names.array,n),l=die({control:i,name:n,defaultValue:Et(i._formValues,n,Et(i._defaultValues,n,t.defaultValue)),exact:!0}),u=uie({control:i,name:n,exact:!0}),d=Bn.useRef(i.register(n,{...t.rules,value:l,...no(t.disabled)?{disabled:t.disabled}:{}})),p=Bn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(u.validatingFields,n)},error:{enumerable:!0,get:()=>Et(u.errors,n)}}),[u,n]),h=Bn.useMemo(()=>({name:n,value:l,...no(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:b=>d.current.onChange({target:{value:BL(b),name:n},type:Xb.CHANGE}),onBlur:()=>d.current.onBlur({target:{value:Et(i._formValues,n),name:n},type:Xb.BLUR}),ref:b=>{const x=Et(i._fields,n);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})}}),[n,i._formValues,r,u.disabled,l,i._fields]);return Bn.useEffect(()=>{const b=i._options.shouldUnregister||s,x=(_,N)=>{const I=Et(i._fields,_);I&&I._f&&(I._f.mount=N)};if(x(n,!0),b){const _=rs(Et(i._options.defaultValues,n));Wn(i._defaultValues,n,_),qr(Et(i._formValues,n))&&Wn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?b&&!i._state.action:b)?i.unregister(n):x(n,!1)}},[n,i,o,s]),Bn.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),Bn.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const ds=t=>t.render(fie(t));var KL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Vq=t=>({isOnSubmit:!t||t===Io.onSubmit,isOnBlur:t===Io.onBlur,isOnChange:t===Io.onChange,isOnAll:t===Io.all,isOnTouch:t===Io.onTouched}),Uq=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ah=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Et(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(ah(l,e))break}else if(Fr(l)&&ah(l,e))break}}};var pie=(t,e,n)=>{const r=oh(Et(t,n));return Wn(r,"root",e[n]),Wn(t,n,r),t},qN=t=>t.type==="file",Go=t=>typeof t=="function",ev=t=>{if(!TN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},My=t=>Zo(t),AN=t=>t.type==="radio",tv=t=>t instanceof RegExp;const Hq={value:!1,isValid:!1},Qq={value:!0,isValid:!0};var GL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!qr(t[0].attributes.value)?qr(t[0].value)||t[0].value===""?Qq:{value:t[0].value,isValid:!0}:Qq:Hq}return Hq};const Kq={isValid:!1,value:null};var JL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Kq):Kq;function Gq(t,e,n="validate"){if(My(t)||Array.isArray(t)&&t.every(My)||no(t)&&!t)return{type:n,message:My(t)?t:"",ref:e}}var Yu=t=>Fr(t)&&!tv(t)?t:{value:t,message:""},Jq=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:u,maxLength:d,minLength:p,min:h,max:b,pattern:x,validate:_,name:N,valueAsNumber:I,mount:R}=t._f,T=Et(n,N);if(!R||e.has(N))return{};const O=l?l[0]:o,A=V=>{i&&O.reportValidity&&(O.setCustomValidity(no(V)?"":V||""),O.reportValidity())},D={},M=AN(o),W=km(o),P=M||W,j=(I||qN(o))&&qr(o.value)&&qr(T)||ev(o)&&o.value===""||T===""||Array.isArray(T)&&!T.length,L=KL.bind(null,N,r,D),F=(V,U,z,ee=Ta.maxLength,Z=Ta.minLength)=>{const le=V?U:z;D[N]={type:V?ee:Z,message:le,ref:o,...L(V?ee:Z,le)}};if(s?!Array.isArray(T)||!T.length:u&&(!P&&(j||Ai(T))||no(T)&&!T||W&&!GL(l).isValid||M&&!JL(l).isValid)){const{value:V,message:U}=My(u)?{value:!!u,message:u}:Yu(u);if(V&&(D[N]={type:Ta.required,message:U,ref:O,...L(Ta.required,U)},!r))return A(U),D}if(!j&&(!Ai(h)||!Ai(b))){let V,U;const z=Yu(b),ee=Yu(h);if(!Ai(T)&&!isNaN(T)){const Z=o.valueAsNumber||T&&+T;Ai(z.value)||(V=Z>z.value),Ai(ee.value)||(U=Z<ee.value)}else{const Z=o.valueAsDate||new Date(T),le=oe=>new Date(new Date().toDateString()+" "+oe),se=o.type=="time",te=o.type=="week";Zo(z.value)&&T&&(V=se?le(T)>le(z.value):te?T>z.value:Z>new Date(z.value)),Zo(ee.value)&&T&&(U=se?le(T)<le(ee.value):te?T<ee.value:Z<new Date(ee.value))}if((V||U)&&(F(!!V,z.message,ee.message,Ta.max,Ta.min),!r))return A(D[N].message),D}if((d||p)&&!j&&(Zo(T)||s&&Array.isArray(T))){const V=Yu(d),U=Yu(p),z=!Ai(V.value)&&T.length>+V.value,ee=!Ai(U.value)&&T.length<+U.value;if((z||ee)&&(F(z,V.message,U.message),!r))return A(D[N].message),D}if(x&&!j&&Zo(T)){const{value:V,message:U}=Yu(x);if(tv(V)&&!T.match(V)&&(D[N]={type:Ta.pattern,message:U,ref:o,...L(Ta.pattern,U)},!r))return A(U),D}if(_){if(Go(_)){const V=await _(T,n),U=Gq(V,O);if(U&&(D[N]={...U,...L(Ta.validate,U.message)},!r))return A(U.message),D}else if(Fr(_)){let V={};for(const U in _){if(!is(V)&&!r)break;const z=Gq(await _[U](T,n),O,U);z&&(V={...z,...L(U,z.message)},A(z.message),r&&(D[N]=V))}if(!is(V)&&(D[N]={ref:O,...V},!r))return D}}return A(!0),D};function hie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=qr(t)?r++:t[e[r++]];return t}function mie(t){for(const e in t)if(t.hasOwnProperty(e)&&!qr(t[e]))return!1;return!0}function ni(t,e){const n=Array.isArray(e)?e:RN(e)?[e]:WL(e),r=n.length===1?t:hie(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Fr(r)&&is(r)||Array.isArray(r)&&mie(r))&&ni(t,n.slice(0,-1)),t}var NS=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},XE=t=>Ai(t)||!$L(t);function Al(t,e){if(XE(t)||XE(e))return t===e;if(Vc(t)&&Vc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Vc(s)&&Vc(o)||Fr(s)&&Fr(o)||Array.isArray(s)&&Array.isArray(o)?!Al(s,o):s!==o)return!1}}return!0}var ZL=t=>t.type==="select-multiple",gie=t=>AN(t)||km(t),kS=t=>ev(t)&&t.isConnected,YL=t=>{for(const e in t)if(Go(t[e]))return!0;return!1};function nv(t,e={}){const n=Array.isArray(t);if(Fr(t)||n)for(const r in t)Array.isArray(t[r])||Fr(t[r])&&!YL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},nv(t[r],e[r])):Ai(t[r])||(e[r]=!0);return e}function XL(t,e,n){const r=Array.isArray(t);if(Fr(t)||r)for(const i in t)Array.isArray(t[i])||Fr(t[i])&&!YL(t[i])?qr(e)||XE(n[i])?n[i]=Array.isArray(t[i])?nv(t[i],[]):{...nv(t[i])}:XL(t[i],Ai(e)?{}:e[i],n[i]):n[i]=!Al(t[i],e[i]);return n}var wp=(t,e)=>XL(t,e,nv(e)),eM=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>qr(t)?t:e?t===""?NaN:t&&+t:n&&Zo(t)?new Date(t):r?r(t):t;function IS(t){const e=t.ref;return qN(e)?e.files:AN(e)?JL(t.refs).value:ZL(e)?[...e.selectedOptions].map(({value:n})=>n):km(e)?GL(t.refs).value:eM(qr(e.value)?t.ref.value:e.value,t)}var yie=(t,e,n,r)=>{const i={};for(const s of t){const o=Et(e,s);o&&Wn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},_p=t=>qr(t)?t:tv(t)?t.source:Fr(t)?tv(t.value)?t.value.source:t.value:t;const Zq="AsyncFunction";var bie=t=>!!t&&!!t.validate&&!!(Go(t.validate)&&t.validate.constructor.name===Zq||Fr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Zq)),vie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function Yq(t,e,n){const r=Et(t,n);if(r||RN(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Et(e,s),l=Et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var xie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,wie=(t,e)=>!ix(Et(t,e)).length&&ni(t,e);const _ie={mode:Io.onSubmit,reValidateMode:Io.onChange,shouldFocusError:!0};function Sie(t={}){let e={..._ie,...t},n={submitCount:0,isDirty:!1,isLoading:Go(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Fr(e.defaultValues)||Fr(e.values)?rs(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:rs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:NS(),array:NS(),state:NS()},b=Vq(e.mode),x=Vq(e.reValidateMode),_=e.criteriaMode===Io.all,N=xe=>be=>{clearTimeout(d),d=setTimeout(xe,be)},I=async xe=>{if(!e.disabled&&(p.isValid||xe)){const be=e.resolver?is((await P()).errors):await L(r,!0);be!==n.isValid&&h.state.next({isValid:be})}},R=(xe,be)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(l.mount)).forEach(ke=>{ke&&(be?Wn(n.validatingFields,ke,be):ni(n.validatingFields,ke))}),h.state.next({validatingFields:n.validatingFields,isValidating:!is(n.validatingFields)}))},T=(xe,be=[],ke,Ae,Ue=!0,rt=!0)=>{if(Ae&&ke&&!e.disabled){if(o.action=!0,rt&&Array.isArray(Et(r,xe))){const Me=ke(Et(r,xe),Ae.argA,Ae.argB);Ue&&Wn(r,xe,Me)}if(rt&&Array.isArray(Et(n.errors,xe))){const Me=ke(Et(n.errors,xe),Ae.argA,Ae.argB);Ue&&Wn(n.errors,xe,Me),wie(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(Et(n.touchedFields,xe))){const Me=ke(Et(n.touchedFields,xe),Ae.argA,Ae.argB);Ue&&Wn(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=wp(i,s)),h.state.next({name:xe,isDirty:V(xe,be),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Wn(s,xe,be)},O=(xe,be)=>{Wn(n.errors,xe,be),h.state.next({errors:n.errors})},A=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},D=(xe,be,ke,Ae)=>{const Ue=Et(r,xe);if(Ue){const rt=Et(s,xe,qr(ke)?Et(i,xe):ke);qr(rt)||Ae&&Ae.defaultChecked||be?Wn(s,xe,be?rt:IS(Ue._f)):ee(xe,rt),o.mount&&I()}},M=(xe,be,ke,Ae,Ue)=>{let rt=!1,Me=!1;const ut={name:xe};if(!e.disabled){const Kt=!!(Et(r,xe)&&Et(r,xe)._f&&Et(r,xe)._f.disabled);if(!ke||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ut.isDirty=V(),rt=Me!==ut.isDirty);const Gt=Kt||Al(Et(i,xe),be);Me=!!(!Kt&&Et(n.dirtyFields,xe)),Gt||Kt?ni(n.dirtyFields,xe):Wn(n.dirtyFields,xe,!0),ut.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Gt}if(ke){const Gt=Et(n.touchedFields,xe);Gt||(Wn(n.touchedFields,xe,ke),ut.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Gt!==ke)}rt&&Ue&&h.state.next(ut)}return rt?ut:{}},W=(xe,be,ke,Ae)=>{const Ue=Et(n.errors,xe),rt=p.isValid&&no(be)&&n.isValid!==be;if(e.delayError&&ke?(u=N(()=>O(xe,ke)),u(e.delayError)):(clearTimeout(d),u=null,ke?Wn(n.errors,xe,ke):ni(n.errors,xe)),(ke?!Al(Ue,ke):Ue)||!is(Ae)||rt){const Me={...Ae,...rt&&no(be)?{isValid:be}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{R(xe,!0);const be=await e.resolver(s,e.context,yie(xe||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return R(xe),be},j=async xe=>{const{errors:be}=await P(xe);if(xe)for(const ke of xe){const Ae=Et(be,ke);Ae?Wn(n.errors,ke,Ae):ni(n.errors,ke)}else n.errors=be;return be},L=async(xe,be,ke={valid:!0})=>{for(const Ae in xe){const Ue=xe[Ae];if(Ue){const{_f:rt,...Me}=Ue;if(rt){const ut=l.array.has(rt.name),Kt=Ue._f&&bie(Ue._f);Kt&&p.validatingFields&&R([Ae],!0);const Gt=await Jq(Ue,l.disabled,s,_,e.shouldUseNativeValidation&&!be,ut);if(Kt&&p.validatingFields&&R([Ae]),Gt[rt.name]&&(ke.valid=!1,be))break;!be&&(Et(Gt,rt.name)?ut?pie(n.errors,Gt,rt.name):Wn(n.errors,rt.name,Gt[rt.name]):ni(n.errors,rt.name))}!is(Me)&&await L(Me,be,ke)}}return ke.valid},F=()=>{for(const xe of l.unMount){const be=Et(r,xe);be&&(be._f.refs?be._f.refs.every(ke=>!kS(ke)):!kS(be._f.ref))&&Ne(xe)}l.unMount=new Set},V=(xe,be)=>!e.disabled&&(xe&&be&&Wn(s,xe,be),!Al(X(),i)),U=(xe,be,ke)=>QL(xe,l,{...o.mount?s:qr(be)?i:Zo(xe)?{[xe]:be}:be},ke,be),z=xe=>ix(Et(o.mount?s:i,xe,e.shouldUnregister?Et(i,xe,[]):[])),ee=(xe,be,ke={})=>{const Ae=Et(r,xe);let Ue=be;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&Wn(s,xe,eM(be,rt)),Ue=ev(rt.ref)&&Ai(be)?"":be,ZL(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ue.includes(Me.value)):rt.refs?km(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ue)?!!Ue.find(ut=>ut===Me.value):Ue===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ue):rt.refs.forEach(Me=>Me.checked=Me.value===Ue):qN(rt.ref)?rt.ref.value="":(rt.ref.value=Ue,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(ke.shouldDirty||ke.shouldTouch)&&M(xe,Ue,ke.shouldTouch,ke.shouldDirty,!0),ke.shouldValidate&&oe(xe)},Z=(xe,be,ke)=>{for(const Ae in be){const Ue=be[Ae],rt=`${xe}.${Ae}`,Me=Et(r,rt);(l.array.has(xe)||Fr(Ue)||Me&&!Me._f)&&!Vc(Ue)?Z(rt,Ue,ke):ee(rt,Ue,ke)}},le=(xe,be,ke={})=>{const Ae=Et(r,xe),Ue=l.array.has(xe),rt=rs(be);Wn(s,xe,rt),Ue?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&ke.shouldDirty&&h.state.next({name:xe,dirtyFields:wp(i,s),isDirty:V(xe,rt)})):Ae&&!Ae._f&&!Ai(rt)?Z(xe,rt,ke):ee(xe,rt,ke),Uq(xe,l)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},se=async xe=>{o.mount=!0;const be=xe.target;let ke=be.name,Ae=!0;const Ue=Et(r,ke),rt=()=>be.type?IS(Ue._f):BL(xe),Me=ut=>{Ae=Number.isNaN(ut)||Vc(ut)&&isNaN(ut.getTime())||Al(ut,Et(s,ke,ut))};if(Ue){let ut,Kt;const Gt=rt(),hn=xe.type===Xb.BLUR||xe.type===Xb.FOCUS_OUT,or=!vie(Ue._f)&&!e.resolver&&!Et(n.errors,ke)&&!Ue._f.deps||xie(hn,Et(n.touchedFields,ke),n.isSubmitted,x,b),Ln=Uq(ke,l,hn);Wn(s,ke,Gt),hn?(Ue._f.onBlur&&Ue._f.onBlur(xe),u&&u(0)):Ue._f.onChange&&Ue._f.onChange(xe);const Hr=M(ke,Gt,hn,!1),Ti=!is(Hr)||Ln;if(!hn&&h.values.next({name:ke,type:xe.type,values:{...s}}),or)return p.isValid&&(e.mode==="onBlur"&&hn?I():hn||I()),Ti&&h.state.next({name:ke,...Ln?{}:Hr});if(!hn&&Ln&&h.state.next({...n}),e.resolver){const{errors:_r}=await P([ke]);if(Me(Gt),Ae){const Jt=Yq(n.errors,r,ke),Ui=Yq(_r,r,Jt.name||ke);ut=Ui.error,ke=Ui.name,Kt=is(_r)}}else R([ke],!0),ut=(await Jq(Ue,l.disabled,s,_,e.shouldUseNativeValidation))[ke],R([ke]),Me(Gt),Ae&&(ut?Kt=!1:p.isValid&&(Kt=await L(r,!0)));Ae&&(Ue._f.deps&&oe(Ue._f.deps),W(ke,Kt,ut,Hr))}},te=(xe,be)=>{if(Et(n.errors,be)&&xe.focus)return xe.focus(),1},oe=async(xe,be={})=>{let ke,Ae;const Ue=oh(xe);if(e.resolver){const rt=await j(qr(xe)?xe:Ue);ke=is(rt),Ae=xe?!Ue.some(Me=>Et(rt,Me)):ke}else xe?(Ae=(await Promise.all(Ue.map(async rt=>{const Me=Et(r,rt);return await L(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&I()):Ae=ke=await L(r);return h.state.next({...!Zo(xe)||p.isValid&&ke!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:ke}:{},errors:n.errors}),be.shouldFocus&&!Ae&&ah(r,te,xe?Ue:l.mount),Ae},X=xe=>{const be={...o.mount?s:i};return qr(xe)?be:Zo(xe)?Et(be,xe):xe.map(ke=>Et(be,ke))},ue=(xe,be)=>({invalid:!!Et((be||n).errors,xe),isDirty:!!Et((be||n).dirtyFields,xe),error:Et((be||n).errors,xe),isValidating:!!Et(n.validatingFields,xe),isTouched:!!Et((be||n).touchedFields,xe)}),de=xe=>{xe&&oh(xe).forEach(be=>ni(n.errors,be)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,be,ke)=>{const Ae=(Et(r,xe,{_f:{}})._f||{}).ref,Ue=Et(n.errors,xe)||{},{ref:rt,message:Me,type:ut,...Kt}=Ue;Wn(n.errors,xe,{...Kt,...be,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),ke&&ke.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},we=(xe,be)=>Go(xe)?h.values.subscribe({next:ke=>xe(U(void 0,be),ke)}):U(xe,be,!0),Ne=(xe,be={})=>{for(const ke of xe?oh(xe):l.mount)l.mount.delete(ke),l.array.delete(ke),be.keepValue||(ni(r,ke),ni(s,ke)),!be.keepError&&ni(n.errors,ke),!be.keepDirty&&ni(n.dirtyFields,ke),!be.keepTouched&&ni(n.touchedFields,ke),!be.keepIsValidating&&ni(n.validatingFields,ke),!e.shouldUnregister&&!be.keepDefaultValue&&ni(i,ke);h.values.next({values:{...s}}),h.state.next({...n,...be.keepDirty?{isDirty:V()}:{}}),!be.keepIsValid&&I()},ze=({disabled:xe,name:be,field:ke,fields:Ae})=>{(no(xe)&&o.mount||xe||l.disabled.has(be))&&(xe?l.disabled.add(be):l.disabled.delete(be),M(be,IS(ke?ke._f:Et(Ae,be)._f),!1,!1,!0))},Oe=(xe,be={})=>{let ke=Et(r,xe);const Ae=no(be.disabled)||no(e.disabled);return Wn(r,xe,{...ke||{},_f:{...ke&&ke._f?ke._f:{ref:{name:xe}},name:xe,mount:!0,...be}}),l.mount.add(xe),ke?ze({field:ke,disabled:no(be.disabled)?be.disabled:e.disabled,name:xe}):D(xe,!0,be.value),{...Ae?{disabled:be.disabled||e.disabled}:{},...e.progressive?{required:!!be.required,min:_p(be.min),max:_p(be.max),minLength:_p(be.minLength),maxLength:_p(be.maxLength),pattern:_p(be.pattern)}:{},name:xe,onChange:se,onBlur:se,ref:Ue=>{if(Ue){Oe(xe,be),ke=Et(r,xe);const rt=qr(Ue.value)&&Ue.querySelectorAll&&Ue.querySelectorAll("input,select,textarea")[0]||Ue,Me=gie(rt),ut=ke._f.refs||[];if(Me?ut.find(Kt=>Kt===rt):rt===ke._f.ref)return;Wn(r,xe,{_f:{...ke._f,...Me?{refs:[...ut.filter(kS),rt,...Array.isArray(Et(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),D(xe,!1,void 0,rt)}else ke=Et(r,xe,{}),ke._f&&(ke._f.mount=!1),(e.shouldUnregister||be.shouldUnregister)&&!(zL(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},De=()=>e.shouldFocusError&&ah(r,te,l.mount),Je=xe=>{no(xe)&&(h.state.next({disabled:xe}),ah(r,(be,ke)=>{const Ae=Et(r,ke);Ae&&(be.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ue=>{Ue.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,be)=>async ke=>{let Ae;ke&&(ke.preventDefault&&ke.preventDefault(),ke.persist&&ke.persist());let Ue=rs(s);if(l.disabled.size)for(const rt of l.disabled)Wn(Ue,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ue=Me}else await L(r);if(ni(n.errors,"root"),is(n.errors)){h.state.next({errors:{}});try{await xe(Ue,ke)}catch(rt){Ae=rt}}else be&&await be({...n.errors},ke),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:is(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ve=(xe,be={})=>{Et(r,xe)&&(qr(be.defaultValue)?le(xe,rs(Et(i,xe))):(le(xe,be.defaultValue),Wn(i,xe,rs(be.defaultValue))),be.keepTouched||ni(n.touchedFields,xe),be.keepDirty||(ni(n.dirtyFields,xe),n.isDirty=be.defaultValue?V(xe,rs(Et(i,xe))):V()),be.keepError||(ni(n.errors,xe),p.isValid&&I()),h.state.next({...n}))},ct=(xe,be={})=>{const ke=xe?rs(xe):i,Ae=rs(ke),Ue=is(xe),rt=Ue?i:Ae;if(be.keepDefaultValues||(i=ke),!be.keepValues){if(be.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(wp(i,s))]);for(const ut of Array.from(Me))Et(n.dirtyFields,ut)?Wn(rt,ut,Et(s,ut)):le(ut,Et(rt,ut))}else{if(TN&&qr(xe))for(const Me of l.mount){const ut=Et(r,Me);if(ut&&ut._f){const Kt=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(ev(Kt)){const Gt=Kt.closest("form");if(Gt){Gt.reset();break}}}}r={}}s=e.shouldUnregister?be.keepDefaultValues?rs(i):{}:rs(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}l={mount:be.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!be.keepIsValid||!!be.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:be.keepSubmitCount?n.submitCount:0,isDirty:Ue?!1:be.keepDirty?n.isDirty:!!(be.keepDefaultValues&&!Al(xe,i)),isSubmitted:be.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ue?{}:be.keepDirtyValues?be.keepDefaultValues&&s?wp(i,s):n.dirtyFields:be.keepDefaultValues&&xe?wp(i,xe):be.keepDirty?n.dirtyFields:{},touchedFields:be.keepTouched?n.touchedFields:{},errors:be.keepErrors?n.errors:{},isSubmitSuccessful:be.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_t=(xe,be)=>ct(Go(xe)?xe(s):xe,be);return{control:{register:Oe,unregister:Ne,getFieldState:ue,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:U,_getDirty:V,_updateValid:I,_removeUnmounted:F,_updateFieldArray:T,_updateDisabledField:ze,_getFieldArray:z,_reset:ct,_resetDefaultValues:()=>Go(e.defaultValues)&&e.defaultValues().then(xe=>{_t(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:A,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:Oe,handleSubmit:Xe,watch:we,setValue:le,getValues:X,reset:_t,resetField:Ve,clearErrors:de,unregister:Ne,setError:ye,setFocus:(xe,be={})=>{const ke=Et(r,xe),Ae=ke&&ke._f;if(Ae){const Ue=Ae.refs?Ae.refs[0]:Ae.ref;Ue.focus&&(Ue.focus(),be.shouldSelect&&Go(Ue.select)&&Ue.select())}},getFieldState:ue}}function Wi(t={}){const e=Bn.useRef(void 0),n=Bn.useRef(void 0),[r,i]=Bn.useState({isDirty:!1,isValidating:!1,isLoading:Go(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Go(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Sie(t),formState:r});const s=e.current.control;return s._options=t,jN({subject:s._subjects.state,next:o=>{UL(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Bn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Bn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Bn.useEffect(()=>{t.values&&!Al(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Bn.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Bn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Bn.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=VL(r,s),e.current}const Xq=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},tM=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?Xq(r.ref,n,t):r.refs&&r.refs.forEach(i=>Xq(i,n,t))}},Eie=(t,e)=>{e.shouldUseNativeValidation&&tM(t,e);const n={};for(const r in t){const i=Et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(Nie(e.names||Object.keys(t),r)){const o=Object.assign({},Et(n,r));Wn(o,"root",s),Wn(n,r,o)}else Wn(n,r,s)}return n},Nie=(t,e)=>t.some(n=>n.startsWith(e+"."));var kie=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,d=u&&u[r.code];n[o]=KL(o,e,n,i,d?[].concat(d,r.message):r.message)}t.shift()}return n},Vi=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(d){return s.shouldUseNativeValidation&&tM({},s),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l?.errors)}(o))return{values:{},errors:Eie(kie(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Iie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({name:$.string().min(1),cycles:$.number().int(),sort:$.number().int(),limit:$.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),Cie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintId:$.string().min(1),conflictId:$.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),Tie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintId:$.string().min(1),dependencyId:$.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),Rie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintId:$.string().min(1),inventoryId:$.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),Oie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintId:$.string().min(1),resourceId:$.string().min(1),amount:$.number(),cycles:$.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),jie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintProductionId:$.string().min(1),blueprintId:$.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),qie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintProductionId:$.string().min(1),resourceId:$.string().min(1),amount:$.number(),passive:js()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),Aie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintProductionId:$.string().min(1),resourceId:$.string().min(1),amount:$.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),Pie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({blueprintId:$.string().min(1),resourceId:$.string().min(1),amount:$.number(),passive:js()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),Fie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({userId:$.string().min(1),blueprintId:$.string().min(1),constructionId:$.string().nullish(),productionId:$.string().nullish(),recurringProductionId:$.string().nullish(),x:$.number(),y:$.number()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","productionId","recurringProductionId","x","y"]}),Die=({shape:t,filter:e})=>ms({entity:ps.merge($.object({resourceId:$.string().min(1),amount:$.number(),limit:$.number(),type:$.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),Lie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({name:$.string().min(1),transport:$.number()})),shape:t,filter:e,sort:["id","name","transport"]}),Mie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({code:$.string().min(1),label:$.string().min(1),group:$.string().nullish(),sort:$.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),$ie=({shape:t,filter:e})=>ms({entity:ps.merge($.object({name:$.string().min(1),login:$.string().min(1),password:$.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),PN=Iie({shape:$.object({name:$.string().min(1),cycles:th(),sort:th(),limit:th()}),filter:hs.merge($.object({name:$.string().optional()}))}),rv=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(PN.shape),defaultValues:{cycles:1,sort:0,limit:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"name",label:f.jsx(ne,{label:"Building name (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),f.jsx(Cn,{formState:s.formState,name:"cycles",label:f.jsx(ne,{label:"Construction cycles (label)"}),hint:f.jsx(ne,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),f.jsx(Cn,{formState:s.formState,name:"limit",label:f.jsx(ne,{label:"Building limit (label)"}),hint:f.jsx(ne,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),f.jsx(Cn,{formState:s.formState,name:"sort",label:f.jsx(ne,{label:"Blueprint sort (label)"}),hint:f.jsx(ne,{label:"Sort blueprints by this number (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:On,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},Bie=({id:t,data:e,isConnectable:n})=>{const{locale:r}=sn({from:"/$locale"}),i=lu();return f.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[f.jsx(ao,{type:"target",position:Lt.Left,className:"w-4 h-4"}),f.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[f.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),f.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),f.jsx(At,{icon:Ps,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),f.jsx(At,{icon:bD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),f.jsx("div",{children:f.jsx(ff,{target:f.jsx(bm,{iconEnabled:ai,css:{base:["text-red-500"]}}),outside:!0,textTitle:f.jsx(ne,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Un([["Editor"]]);return f.jsx(Ms,{callback:async()=>jt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:f.jsx(ne,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),f.jsx(ao,{type:"source",position:Lt.Right,isConnectable:n,className:"w-4 h-4"})]})},zie=({nodeId:t})=>{const{fitView:e}=yf();return Q.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},Wie=({data:t,zoomTo:e})=>{const n=Un([]),r=nn({async mutationFn({blueprintId:i,dependencyId:s}){return jt.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Pn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return f.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:f.jsx("div",{style:{width:"95vw",height:"85vh"},children:f.jsxs(EL,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:Q.useMemo(()=>({blueprint(i){return f.jsx(Bie,{...i})}}),[]),edgeTypes:Q.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:l,targetY:u,sourcePosition:d,targetPosition:p,style:h={},markerEnd:b}){const{setEdges:x}=yf(),[_,N,I]=xN({sourceX:s,sourceY:o,sourcePosition:d,targetX:l,targetY:u,targetPosition:p}),R=Un([]),T=nn({async mutationFn({id:O}){return jt.transaction().execute(async A=>{await A.deleteFrom("Blueprint_Dependency").where("id","=",O).execute()})},async onSuccess(){x(O=>O.filter(A=>A.id!==i)),await R()}});return f.jsxs(f.Fragment,{children:[f.jsx(Nm,{path:_,markerEnd:b,style:h}),f.jsx(Nne,{children:f.jsx("div",{className:Sn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${N}px,${I}px)`},children:f.jsx(Xt,{icon:T.isPending?vK:iN,onClick:()=>{T.mutate({id:i})}})})})]})}}),[]),children:[f.jsx(zie,{nodeId:e}),f.jsx(CL,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:f.jsx(ff,{target:f.jsx(bm,{className:"react-flow__controls-button",iconEnabled:On}),outside:!1,textTitle:f.jsx(ne,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Un([["Editor"]]),{locale:o}=sn({from:"/$locale"}),l=lu();return f.jsx(rv,{mutation:nn({async mutationFn(u){return Tn.promise(jt.transaction().execute(d=>d.insertInto("Blueprint").values({id:Pn(),...u}).returningAll().executeTakeFirstOrThrow()),Pr("Create blueprint"))},async onSuccess(u){await s(),l({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),f.jsx(RL,{}),f.jsx(kL,{variant:ta.Dots,gap:12,size:1})]})})})},Vie=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),ML.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),e1=zt("/$locale/apps/derivean/root/editor")({validateSearch:xr($.object({zoomTo:$.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return Vie({graph:new ML.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=e1.useLoaderData(),{zoomTo:e}=e1.useSearch();return f.jsx(Wie,{data:t,zoomTo:e})}}),Uie=()=>nn({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return jt.transaction().execute(async r=>vm.parse(await r.insertInto("User").values({id:Pn(),name:e,login:t,password:hF.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}}),Hie=$.object({name:$.string().min(1),login:$.string().min(1),password1:$.string().min(1),password2:$.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),Qie=({onSuccess:t})=>{const e=Uie(),n=Wi({resolver:Vi(Hie)}),r=zi({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return f.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{B1({error:s,errors:[x1({error:s,schema:$1,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[f.jsx(Ci,{variant:{highlight:!0},error:n.formState.errors.root}),f.jsx(Cn,{formState:n.formState,name:"name",label:f.jsx(ne,{label:"Name (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),f.jsx(Cn,{formState:n.formState,name:"login",label:f.jsx(ne,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),f.jsx(Cn,{formState:n.formState,name:"password1",label:f.jsx(ne,{label:"Password 1 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),f.jsx(Cn,{formState:n.formState,name:"password2",label:f.jsx(ne,{label:"Password 2 (label)"}),children:f.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),f.jsx(wn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:f.jsx(ne,{label:"Register (submit)"})})]})},Kie=zt("/$locale/apps/derivean/public/register")({component:()=>{const t=lu();return f.jsx("div",{className:Sn(["flex","justify-center","h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(Qie,{onSuccess:async e=>{pf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),Gie=zt("/$locale/apps/derivean/public/logout")({pendingComponent(){return f.jsx("div",{className:Sn(["flex items-center justify-center h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:f.jsx(LD,{icon:lN,textTitle:f.jsx(ne,{label:"Logout (label)"}),textMessage:f.jsx(ne,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded"]}})})},async loader({params:{locale:t}}){throw pf.remove("session"),Zh({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),Jie=()=>nn({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return jt.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",hF.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),Zie=$.object({login:$.string().min(1),password:$.string().min(1)}),Yie=({onSuccess:t})=>{const{locale:e}=sn({from:"/$locale"}),n=Jie(),r=Wi({resolver:Vi(Zie)}),i=zi({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return f.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{B1({error:o,errors:[x1({error:o,schema:$1,onError:({data:l})=>{r.setError("root",{message:l.message})}})],onError:l=>{r.setError("root",{message:l.message})}})}}).catch(()=>{})),children:[f.jsx(Ci,{variant:{highlight:!0},error:r.formState.errors.root}),f.jsx(Cn,{formState:r.formState,name:"login",label:f.jsx(ne,{label:"Login (label)"}),children:f.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),f.jsx(Cn,{formState:r.formState,name:"password",label:f.jsx(ne,{label:"Password (label)"}),children:f.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),f.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[f.jsx(At,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:f.jsx(ne,{label:"Register (link)"})}),f.jsx(wn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:f.jsx(ne,{label:"Login (submit)"})})]})]})},Xie=zt("/$locale/apps/derivean/public/login")({component:()=>{const t=lu();return f.jsx("div",{className:Sn(["flex","justify-center","h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:f.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[f.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),f.jsx(Yie,{onSuccess:async e=>{pf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),ese=gn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),tse=async({blueprintId:t,userId:e,x:n,y:r,plan:i,valid:s})=>jt.transaction().execute(async o=>{const l=await o.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",t).executeTakeFirstOrThrow(),u=await o.insertInto("Building").values({id:Pn(),userId:e,blueprintId:t,constructionId:(await o.insertInto("Construction").values({id:Pn(),userId:e,cycle:0,cycles:l.cycles,plan:i,valid:s}).returning("id").executeTakeFirstOrThrow()).id,x:n,y:r}).returningAll().executeTakeFirstOrThrow(),d=await o.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",o.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",t)).execute();for await(const{amount:p,limit:h,resourceId:b,type:x}of d)await o.insertInto("Building_Inventory").values({id:Pn(),buildingId:u.id,inventoryId:(await o.insertInto("Inventory").values({id:Pn(),amount:p,limit:h,resourceId:b,type:x}).returning("id").executeTakeFirstOrThrow()).id}).execute();return u}),FN=({cycles:t})=>f.jsxs("div",{className:Sn(["flex","flex-row","items-center","gap-2"]),children:[f.jsx(Xt,{css:{base:["text-slate-400"]},icon:Kh}),f.jsx("div",{className:"font-bold text-md",children:xn({number:t})})]}),nse=({userId:t,entity:e,variant:n,tva:r=ese,css:i})=>{const{locale:s}=sn({from:"/$locale"}),o=lu(),l=Un([["GameMap"]]),u=nn({async mutationFn({blueprintId:p}){const h=await tse({userId:t,blueprintId:p,x:0,y:0,plan:!0,valid:!1});o({to:"/$locale/apps/derivean/map/construction",params:{locale:s},search:{zoomToId:h.id}})},async onSuccess(){await l()},onError(p){console.error(p)}}),d=r({...n,css:i}).slots;return f.jsx("div",{className:d.base(),children:f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsxs(ki,{children:["x",e.count]}),f.jsx(At,{to:"/$locale/apps/derivean/map/blueprint/$id/requirements",params:{locale:s,id:e.id},css:{base:["font-bold"]},children:e.name})]}),f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(FN,{cycles:e.cycles}),f.jsx(wn,{iconEnabled:Yd,iconDisabled:Yd,loading:u.isPending,onClick:()=>{u.mutate({blueprintId:e.id})}})]})]})})},rse=gn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-sm","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),uo=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=rse,css:s,children:o})=>{const{locale:l}=sn({from:"/$locale"}),u=i({...r,css:s}).slots;return f.jsxs("div",{className:u.base(),children:[f.jsxs("div",{className:u.title(),children:[f.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?f.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),f.jsx(At,{icon:iN,to:"/$locale/apps/derivean/map",params:{locale:l}})]}),f.jsx("div",{className:u.content(),children:o})]})},ise=({userId:t,blueprints:e,...n})=>f.jsx(uo,{icon:Yd,textTitle:f.jsx(ne,{label:"Construction (label)"}),...n,children:e.length>0?e.map(r=>f.jsx(nse,{userId:t,entity:r},r.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"There are no available blueprints (label)"})})}),nM=zt("/$locale/apps/derivean/map/construction")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,blueprints:await t.ensureQueryData({queryKey:["GameMap","construction","list",r.id],async queryFn(){return e.transaction().execute(async i=>ri({select:i.selectFrom(i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Building as bg").select(o=>o.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",r.id).as("count"),s=>s.case().when(s.not(s.exists(s.selectFrom("Blueprint_Dependency as bd").select(s.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(o=>o.not(o.exists(o.selectFrom("Building as b").select(o.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",r.id).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(s.lit(!0)).else(s.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",i.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",i.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",r.id))).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:$.object({id:$.string().min(1),name:$.string().min(1),count:$.number().int().nonnegative(),cycles:$.number().int().nonnegative(),sort:$.number().int().nonnegative(),withAvailableBuildings:js()})}))}})}},component(){const{user:t,blueprints:e}=nM.useLoaderData();return f.jsx(ise,{userId:t.id,blueprints:e})}}),rM=zt("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=rM.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let l=`z.never({message: '${i}'})`;switch(o){case"integer":{l="z.number().int()";break}case"float4":{l="z.number()";break}case"datetime":{l="z.string()";break}case"boolean":{l="withBoolSchema()";break}}return o.startsWith("varchar")&&(l=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${l}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return f.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),e3=Ur(),sse=[e3({name:"name",header(){return f.jsx(ne,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),e3({name:"login",header(){return f.jsx(ne,{label:"User login (label)"})},render({value:t}){return t},size:14})],ose=({table:t,...e})=>{const n=Un([["GameMap"],["Management"],["User_Inventory"]]),r=nn({async mutationFn({userId:i}){return jt.transaction().execute(async s=>{await s.deleteFrom("Building").where("userId","=",i).execute(),await s.deleteFrom("Production").where("userId","=",i).execute(),await s.deleteFrom("Construction").where("userId","=",i).execute(),await s.deleteFrom("Cycle").where("userId","=",i).execute()})},async onSuccess(){await n()}});return f.jsx(Wr,{table:Vr({...t,columns:sse}),action:{row({data:i}){return f.jsx(dr,{children:f.jsx(z1,{icon:ai,onClick:()=>{r.mutateAsync({userId:i.id})},children:f.jsx(ne,{label:"Reset game (menu)"})})})}},...e})},ase=$ie({shape:$.object({name:$.string().min(1),login:$.string().min(1),password:$.string().min(1)}),filter:hs.merge($.object({login:$.string().optional(),password:$.string().optional()}))}),$y=zt("/$locale/apps/derivean/root/user/list")({validateSearch:xr(zr(ase)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>vr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:$.object({id:$.string().min(1),name:$.string().min(1),login:$.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=$y.useLoaderData(),{filter:n,cursor:r,selection:i}=$y.useSearch(),s=$y.useNavigate(),{tva:o}=br({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(ose,{table:{data:t,filter:{value:n,set:$r(s)},selection:{type:"multi",value:i,set:Ls(s)}},fulltext:{value:n?.fulltext,set:Br(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of users (label)"}),...Mr(s)}})})}}),lse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsxs(nc,{...e,children:[f.jsx(Yn,{icon:cN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"View detail (menu)"})}),f.jsx(Yn,{icon:rc,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Building list (menu)"})})]})},cse=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsx(hf,{title:({entity:n})=>f.jsx(gf,{icon:cN,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(At,{icon:Bv,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:f.jsx(ne,{label:"User list (label)"})})}),...t})},iM=zt("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await ca({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:$.object({id:$.string().min(1),name:$.string().min(1)})})}))},component(){const{tva:t}=br({from:"__root__"}),{entity:e}=iM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(cse,{entity:e}),f.jsx(lse,{entity:e}),f.jsx(co,{})]})}}),Im=Mie({shape:$.object({code:$.string().min(1),label:$.string().min(1),group:$.string().nullish(),sort:th()}),filter:hs.merge($.object({code:$.string().optional(),group:$.string().optional()}))}),t3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(Im.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"code",label:f.jsx(ne,{label:"Tag code (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),f.jsx(Cn,{formState:s.formState,name:"label",label:f.jsx(ne,{label:"Tag label (label)"}),required:!0,children:f.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),f.jsx(Cn,{formState:s.formState,name:"group",label:f.jsx(ne,{label:"Tag group (label)"}),children:f.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),f.jsx(Cn,{formState:s.formState,name:"sort",label:f.jsx(ne,{label:"Tag sort (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Ph,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},CS=Ur(),use=[CS({name:"label",header(){return f.jsx(ne,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),CS({name:"code",header(){return f.jsx(ne,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),CS({name:"group",header(){return f.jsx(ne,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],sM=({group:t,table:e,...n})=>{const r=Un([["Tag"],["Resource"]]);return f.jsx(Wr,{table:Vr({...e,columns:use}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create tag (menu)"}),textTitle:f.jsx(ne,{label:"Create tag (modal)"}),icon:Ph,children:f.jsx(t3,{defaultValues:{group:t},mutation:nn({async mutationFn(i){return Tn.promise(jt.transaction().execute(s=>s.insertInto("Tag").values({id:Pn(),...i}).returningAll().executeTakeFirstOrThrow()),Pr("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit tag (modal)"}),icon:Ph,children:f.jsx(t3,{defaultValues:{group:t,...i},mutation:nn({async mutationFn(s){return Tn.promise(jt.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Pr("Edit tag"))},async onSuccess(){await r()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>{await jt.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:f.jsx(ne,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},By=zt("/$locale/apps/derivean/root/tag/list")({validateSearch:xr(zr(Im)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>vr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:$.object({id:$.string().min(1),code:$.string().min(1),label:$.string().min(1),group:$.string().nullish(),sort:$.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=By.useLoaderData(),{filter:n,cursor:r,selection:i}=By.useSearch(),s=By.useNavigate(),{tva:o}=br({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(sM,{table:{data:t,filter:{value:n,set:$r(s)},selection:{type:"multi",value:i,set:Ls(s)}},fulltext:{value:n?.fulltext,set:Br(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of items"}),...Mr(s)}})})}}),dse=({group:t,...e})=>f.jsx(MG,{icon:Ph,table:n=>f.jsx(sM,{group:t,...n}),render:({entities:n})=>f.jsx(MD,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>jt.transaction().execute(async i=>vr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:Im.entity,query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("t.id","=",o.id)),o?.idIn&&(l=l.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("t.code","like",u),d("t.group","like",u),d("t.label","like",u),d("t.id","like",u)]))}return l},filter:n,cursor:r})),...e}),oM=Lie({shape:$.object({name:$.string().min(1),transport:qs(),tagIds:$.array($.string()).optional()}),filter:hs.merge($.object({name:$.string().optional()}))}),n3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=zi,css:s})=>{const o=Wi({resolver:Vi(oM.shape),defaultValues:{transport:1,...n}}),l=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return f.jsxs("form",{className:l.base(),onSubmit:Ds({form:o,mutation:e}),children:[f.jsx(Ci,{variant:{highlight:!0},error:o.formState.errors.root}),f.jsx(Cn,{formState:o.formState,name:"name",label:f.jsx(ne,{label:"Resource name (label)"}),children:f.jsx("input",{type:"text",className:l.input(),...o.register("name")})}),f.jsx(Cn,{formState:o.formState,name:"transport",label:f.jsx(ne,{label:"Resource transport (label)"}),hint:f.jsx(ne,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:f.jsx("input",{type:"number",className:l.input(),min:.5,step:.5,...o.register("transport")})}),f.jsx(Cn,{formState:o.formState,name:"tagIds",label:f.jsx(ne,{label:"Resource tags (label)"}),children:f.jsx(ds,{control:o.control,name:"tagIds",render:({field:{ref:u,...d}})=>f.jsx(dse,{group:t,textTitle:f.jsx(ne,{label:"Select resource tags (title)"}),textSelect:f.jsx(ne,{label:"Select resource tags (label)"}),allowEmpty:!0,...d})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Fn,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},Xu=Ur(),fse=[Xu({name:"name",header(){return f.jsx(ne,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),Xu({name:"transport",header(){return f.jsx(ne,{label:"Resource transport (label)"})},render({value:t}){return xn({number:t})},size:12}),Xu({name:"countProduction",header(){return f.jsx(ne,{label:"Resource production count (label)"})},render({value:t}){return f.jsx(ki,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:xn({number:t})})},size:12}),Xu({name:"countRequirement",header(){return f.jsx(ne,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return f.jsx(ki,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:xn({number:e})})},size:12}),Xu({name:"countProductionRequirement",header(){return f.jsx(ne,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return f.jsx(ki,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:xn({number:e})})},size:18}),Xu({name:"tags",header(){return f.jsx(ne,{label:"Resource tags (label)"})},render({value:t}){return f.jsx(MD,{tags:t})},size:32})],aM=({group:t,table:e,...n})=>{const r=Un([["Resource"],["Resource_Tag"]]);return f.jsx(Wr,{table:Vr({...e,columns:fse}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create resource (menu)"}),textTitle:f.jsx(ne,{label:"Create resource (modal)"}),icon:Fn,children:({close:i})=>f.jsx(n3,{group:t,mutation:nn({async mutationFn({name:s,transport:o,tagIds:l=[]}){return jt.transaction().execute(async u=>{const d=await u.insertInto("Resource").values({id:Pn(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return l.length&&await u.insertInto("Resource_Tag").values(l.map(p=>({id:Pn(),resourceId:d.id,tagId:p}))).execute(),d})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit resource (modal)"}),icon:Fn,children:({close:s})=>f.jsx(n3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:nn({async mutationFn({tagIds:o,...l}){return Tn.promise(jt.transaction().execute(async u=>{const d=await u.updateTable("Resource").set(l).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",d.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:Pn(),resourceId:d.id,tagId:p}))).execute(),d}),Pr("Update resource"))},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},zy=zt("/$locale/apps/derivean/root/resource/list")({validateSearch:xr(zr(oM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>vr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>gr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("r.id","like",u),d("r.name","like",u),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:$.object({id:$.string().min(1),name:$.string().min(1),transport:qs(),countRequirement:$.number().nonnegative(),countProduction:$.number().nonnegative(),countProductionRequirement:$.number().nonnegative(),tags:cs(Im.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=zy.useLoaderData(),{filter:n,cursor:r,selection:i}=zy.useSearch(),s=zy.useNavigate(),{tva:o}=br({from:"__root__"}),l=o().slots;return f.jsx("div",{className:l.base(),children:f.jsx(aM,{table:{data:t,filter:{value:n,set:$r(s)},selection:{type:"multi",value:i,set:Ls(s)}},fulltext:{value:n?.fulltext,set:Br(s)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of items"}),...Mr(s)}})})}}),pse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsx(nc,{...e,children:f.jsx(Yn,{icon:Fn,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"View detail (menu)"})})})},hse=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsx(hf,{title:({entity:n})=>f.jsx(gf,{icon:Fn,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(At,{icon:Bv,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:f.jsx(ne,{label:"Resource list (label)"})})}),...t})},lM=zt("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await ca({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:$.object({id:$.string().min(1),name:$.string().min(1)})})}))}})},component:()=>{const{tva:t}=br({from:"__root__"}),{entity:e}=lM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(hse,{entity:e}),f.jsx(pse,{entity:e}),f.jsx(co,{})]})}}),mse=gn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),cM=({dependencies:t,variant:e,tva:n=mse,css:r,...i})=>{const s=n({...e,css:r}).slots;return f.jsx(Ud,{items:t,render:({entity:o})=>f.jsx("div",{className:s.item(),children:f.jsx("div",{children:o.name})}),...i})};var uy={},r3;function gse(){if(r3)return uy;r3=1;function t(r,i,s,o){var l=new Set;return function(u){if(!l.has(u)){var d=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var b=h[h.length-1],x=b.processed,_=b.node;if(x)h.pop(),p.pop(),d.delete(_),l.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(l.has(_)){h.pop();continue}else if(d.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}d.add(_),p.push(_);for(var N=r.get(_),I=N.length-1;I>=0;I--)h.push({node:N[I],processed:!1});b.processed=!0}}}}}var e=uy.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var l=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(d){l(d)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(d){return i.incomingEdges.get(d).length===0}).forEach(function(d){u(d)}),this.circular&&o.filter(function(d){return s.indexOf(d)===-1}).forEach(function(d){u(d)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=uy.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),uy}var uM=gse();const Cm=async({tx:t})=>{const e=new uM.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},Gh=async({tx:t})=>{const e=Cm({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},dM=async({tx:t,blueprintId:e})=>{await t.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const n=await t.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of n)await t.insertInto("Blueprint_Inventory").values({id:Pn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Pn(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await t.selectFrom(t.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(t.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await t.insertInto("Blueprint_Inventory").values({id:Pn(),blueprintId:e,inventoryId:(await t.insertInto("Inventory").values({id:Pn(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},yse=gn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),sx=({requirements:t,diff:e,variant:n,tva:r=yse,css:i,...s})=>{const o=r({...n,css:i}).slots;return f.jsx(Ud,{items:t,render:({entity:l})=>{const u=e?.find(p=>p.resourceId===l.resourceId),d=u?.amount?u.amount-l.amount:-l.amount;return f.jsxs("div",{className:o.item({css:!e||d>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:l.passive}),children:[f.jsx("div",{children:l.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",xn({number:l.amount})]}),e?d>=0?f.jsx(Xt,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):f.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[f.jsx(Xt,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",xn({number:d}),")"]}):null]})},...s})},Sp=Ur(),bse=[Sp({name:"name",header(){return f.jsx(ne,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(At,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),Sp({name:"dependencies",header(){return f.jsx(ne,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?f.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[f.jsx(cM,{textTitle:f.jsx(ne,{label:"Blueprint dependencies (title)"}),dependencies:t}),f.jsx("div",{className:"border-b border-slate-200"})]}):f.jsx(ne,{label:"No dependencies (label)"})},size:32}),Sp({name:"requirements",header(){return f.jsx(ne,{label:"Required resources (label)"})},render({value:t}){return f.jsx(sx,{textTitle:f.jsx(ne,{label:"Blueprint requirements (title)"}),textEmpty:f.jsx(ne,{label:"No requirements (label)"}),requirements:t})},size:32}),Sp({name:"cycles",header(){return f.jsx(ne,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(Xt,{icon:Kh}),xn({number:t})]})},size:8}),Sp({name:"limit",header(){return f.jsx(ne,{label:"Building limit (label)"})},render({value:t}){return xn({number:t})},size:8})],fM=({dependencies:t,table:e,...n})=>{const r=Un([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=nn({async mutationFn(){return jt.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:l}of o)await dM({tx:s,blueprintId:l})})},async onSuccess(){await r()},onError(s){console.error(s)}});return f.jsx(Wr,{table:Vr({...e,columns:bse,context:{dependencies:t}}),action:{table(){return f.jsxs(dr,{children:[f.jsx(z1,{icon:Ma,onClick:()=>{Tn.promise(i.mutateAsync(),Pr("Fill inventories"))},children:f.jsx(ne,{label:"Fill inventories (label)"})}),f.jsx(In,{label:f.jsx(ne,{label:"Create blueprint (menu)"}),textTitle:f.jsx(ne,{label:"Create blueprint (modal)"}),icon:On,children:({close:s})=>f.jsx(rv,{mutation:nn({async mutationFn(o){return Tn.promise(jt.transaction().execute(async l=>{const u=l.insertInto("Blueprint").values({id:Pn(),...o}).returningAll().executeTakeFirstOrThrow();return await Gh({tx:l}),u}),Pr("Create blueprint"))},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit blueprint (modal)"}),icon:On,children:({close:o})=>f.jsx(rv,{defaultValues:s,mutation:nn({async mutationFn(l){return Tn.promise(jt.transaction().execute(async u=>{const d=u.updateTable("Blueprint").set(l).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await Gh({tx:u}),d}),Pr("Update blueprint"))},async onSuccess(){await r(),o()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:f.jsx(ne,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},ic=Tie({shape:$.object({dependencyId:$.string().min(1)}),filter:hs.merge($.object({blueprintId:$.string().optional(),dependencyId:$.string().optional()}))}),bf=Pie({shape:$.object({resourceId:$.string().min(1),amount:qs(),passive:$.boolean()}),filter:hs.merge($.object({blueprintId:$.string().optional(),resourceId:$.string().optional()}))}),Wy=zt("/$locale/apps/derivean/root/blueprint/list")({validateSearch:xr(zr(PN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("br.id")},
                                                'amount', ${l.ref("br.amount")},
                                                'passive', ${l.ref("br.passive")},
                                                'resourceId', ${l.ref("br.resourceId")},
                                                'blueprintId', ${l.ref("br.blueprintId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(l=>gr`json_group_array(json_object(
                                                        'id', ${l.ref("bd.id")},
                                                        'dependencyId', ${l.ref("bd.dependencyId")},
                                                        'blueprintId', ${l.ref("bd.blueprintId")},
                                                        'name', ${l.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bl.id","=",l.id)),l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",d),p("bl.name","like",d)]))}return u},output:$.object({id:$.string().min(1),name:$.string().min(1),cycles:$.number().nonnegative(),sort:$.number().nonnegative(),limit:$.number().nonnegative(),requirements:cs(bf.entity.merge($.object({name:$.string().min(1)}))),dependencies:cs(ic.entity.merge($.object({name:$.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>Cm({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=Wy.useLoaderData(),{filter:r,cursor:i,selection:s}=Wy.useSearch(),o=Wy.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(fM,{dependencies:n,table:{data:t,filter:{value:r,set:$r(o)},selection:{type:"multi",value:s,set:Ls(o)}},fulltext:{value:r?.fulltext,set:Br(o)},cursor:{count:e,cursor:i,textTotal:f.jsx(ne,{label:"Number of blueprints"}),...Mr(o)}})})}}),vse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsxs(nc,{...e,children:[f.jsx(Yn,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"View detail (menu)"})}),f.jsx(Yn,{icon:rc,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Blueprint dependencies (menu)"})}),f.jsx(Yn,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Required resources (menu)"})}),f.jsx(Yn,{icon:Ps,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Resource production (menu)"})}),f.jsx(Yn,{icon:Ma,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Blueprint inventory (menu)"})}),f.jsx(Yn,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Blueprint conflicts (menu)"})}),f.jsx(Yn,{icon:bD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Edit (menu)"})})]})},xse=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsx(hf,{title:({entity:n})=>f.jsx(gf,{icon:On,title:n.name}),actions:({entity:n})=>f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bv,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:f.jsx(ne,{label:"Blueprint list (label)"})}),f.jsx(At,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:f.jsx(ne,{label:"Editor (label)"})})]}),...t})},pM=zt("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>ca({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>gr`json_group_array(json_object(
                                                  'id', ${o.ref("br.id")},
                                                  'amount', ${o.ref("br.amount")},
                                                  'passive', ${o.ref("br.passive")},
                                                  'resourceId', ${o.ref("br.resourceId")},
                                                  'blueprintId', ${o.ref("br.blueprintId")},
                                                  'name', ${o.ref("r.name")}
                                              ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>gr`json_group_array(json_object(
                                                          'id', ${o.ref("bd.id")},
                                                          'dependencyId', ${o.ref("bd.dependencyId")},
                                                          'blueprintId', ${o.ref("bd.blueprintId")},
                                                          'name', ${o.ref("bl2.name")}
                                                      ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("bl.id","like",u),d("bl.name","like",u),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:$.object({id:$.string().min(1),name:$.string().min(1),cycles:$.number().nonnegative(),sort:$.number().nonnegative(),requirements:cs(bf.entity.merge($.object({name:$.string().min(1)}))),dependencies:cs(ic.entity.merge($.object({name:$.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>Cm({tx:i}))}},component(){const{tva:t}=br({from:"__root__"}),{entity:e}=pM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(xse,{entity:e}),f.jsx(vse,{entity:e}),f.jsx(co,{})]})}}),wse=zt("/$locale/apps/derivean/map/route/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{route:await t.ensureQueryData({queryKey:["GameMap","route",n],async queryFn(){return e.transaction().execute(async r=>ca({select:r.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.id","=",n),output:$.object({id:$.string().min(1),fromId:$.string().min(1),toId:$.string().min(1),fromName:$.string().min(1),toName:$.string().min(1)})}))}})}}}),_se=zt("/$locale/apps/derivean/map/building/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap","building",n],async queryFn(){return e.transaction().execute(async r=>ca({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.productionId","b.recurringProductionId"]).where("b.id","=",n),output:$.object({id:$.string().min(1),name:$.string().min(1),productionId:$.string().nullish(),recurringProductionId:$.string().nullish()})}))}})}}}),Sse=zt("/$locale/apps/derivean/map/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n],async queryFn(){return e.transaction().execute(async r=>ca({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:$.object({id:$.string().min(1),name:$.string().min(1)})}))}})}}}),i3=Ur(),Ese=[i3({name:"name",header(){return f.jsx(ne,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(At,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),f.jsx(At,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),i3({name:"cycles",header(){return f.jsx(ne,{label:"Construction cycles (label)"})},render({value:t}){return f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx(Xt,{icon:Kh}),xn({number:t})]})},size:8})],Nse=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:Ese}),...e}),Vy=zt("/$locale/apps/derivean/game/blueprint/list")({validateSearch:xr(zr(PN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async l=>vr({select:l.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",l.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:d}){let p=u;if(d?.id&&(p=p.where("bl.id","=",d.id)),d?.fulltext){const h=`%${d.fulltext}%`.toLowerCase();p=p.where(b=>b.or([b("bl.id","like",h),b("bl.name","like",h)]))}return p},output:$.object({id:$.string().min(1),name:$.string().min(1),cycles:$.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=Vy.useLoaderData(),{filter:n,cursor:r}=Vy.useSearch(),i=Vy.useNavigate(),{tva:s}=br({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Nse,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of blueprints"}),...Mr(i)}})})}}),kse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsxs(nc,{...e,children:[f.jsx(Yn,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"View detail (menu)"})}),f.jsx(Yn,{icon:rc,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Blueprint dependencies (menu)"})}),f.jsx(Yn,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Required resources (menu)"})}),f.jsx(Yn,{icon:Ps,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Resource production (menu)"})}),f.jsx(Yn,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Blueprint conflicts (menu)"})})]})},Ise=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsx(hf,{title:({entity:n})=>f.jsx(gf,{icon:On,title:n.name}),actions:()=>f.jsx(f.Fragment,{children:f.jsx(At,{icon:Bv,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:f.jsx(ne,{label:"Blueprint list (label)"})})}),...t})},hM=zt("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>ca({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("bl.id","like",u),d("bl.name","like",u),d("bl.id","in",d.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),d("bl.id","in",d.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:$.object({id:$.string().min(1),name:$.string().min(1),cycles:$.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>Cm({tx:i}))}},component(){const{tva:t}=br({from:"__root__"}),{entity:e}=hM.useLoaderData(),n=t().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Ise,{entity:e}),f.jsx(kse,{entity:e}),f.jsx(co,{})]})}}),Cse=zt("/$locale/apps/derivean/root/user/$id/view")({component:()=>"yep"}),Tse=zt("/$locale/apps/derivean/root/resource/$id/view")({component:()=>f.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}),DN="icon-[carbon--document-requirements]",Rse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsxs(nc,{...e,children:[f.jsx(Yn,{icon:DN,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Production requirements (menu)"})}),f.jsx(Yn,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Production resource requirements (menu)"})}),f.jsx(Yn,{icon:On,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Production resource dependencies (menu)"})})]})},Ose=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsx(hf,{title:({entity:n})=>f.jsx(gf,{icon:Ps,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(ne,{label:"Building base detail (label)"})})}),...t})},mM=zt("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await ca({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:$.object({id:$.string().min(1),resource:$.string().min(1),blueprint:$.string().min(1),blueprintId:$.string().min(1),amount:$.number().nonnegative(),cycles:$.number().int().nonnegative()})})}))}})},component(){const{entity:t}=mM.useLoaderData(),{tva:e}=br({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(Ose,{entity:t}),f.jsx(Rse,{entity:t}),f.jsx(co,{})]})}}),jse=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return f.jsxs("div",{className:Sn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?f.jsx(Xt,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):f.jsx(Xt,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>f.jsx(ki,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},Pn())):f.jsx(ne,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof uM.DepGraphCycleError?f.jsxs("div",{className:Sn(["flex","flex-row","gap-2","items-center"]),children:[f.jsx(Xt,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>f.jsx(ki,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},Pn()))]}):"kaboom"}},qse=({dependencies:t,...e})=>f.jsx(dD,{items:[{id:"name",label:f.jsx(ne,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:f.jsx(ne,{label:"Construction cycles (label)"}),render({entity:n}){return xn({number:n.cycles})}},{id:"requirements",label:f.jsx(ne,{label:"Required resources (label)"}),render({entity:n}){return f.jsx(sx,{requirements:n.requirements,textEmpty:f.jsx(ne,{label:"No requirements (label)"})})}},{id:"dependencies",label:f.jsx(ne,{label:"Blueprint dependencies (label)"}),render({entity:n}){return f.jsx(cM,{dependencies:n.dependencies,textEmpty:f.jsx(ne,{label:"No dependencies (label)"})})}},{id:"deps",label:f.jsx(ne,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return f.jsx(jse,{graph:t,blueprintId:n.id})}}],...e}),gM=zt("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>Cm({tx:e}))}},component(){const{dependencies:t}=gM.useLoaderData(),{entity:e}=hi({from:"/$locale/apps/derivean/root/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(qse,{dependencies:t,entity:e})})}}),Tm=({group:t,...e})=>f.jsx(DD,{icon:Fn,textTitle:f.jsx(ne,{label:"Select resource (title)"}),textSelect:f.jsx(ne,{label:"Select resource (label)"}),table:n=>f.jsx(aM,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>jt.transaction().execute(async i=>vr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>gr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("r.id","like",u),d("r.name","like",u),d("r.id","in",d.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:$.object({id:$.string().min(1),name:$.string().min(1),transport:qs(),tags:cs(Im.entity),countRequirement:$.number().nonnegative(),countProduction:$.number().nonnegative(),countProductionRequirement:$.number().nonnegative()}),filter:n,cursor:r})),...e}),s3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(bf.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"resourceId",label:f.jsx(ne,{label:"Requirement (label)"}),children:f.jsx(ds,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>f.jsx(Tm,{allowEmpty:!0,...u})})}),f.jsx(Cn,{formState:s.formState,name:"amount",label:f.jsx(ne,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(Cn,{formState:s.formState,name:"passive",label:f.jsx(ne,{label:"Passive requirement (label)"}),hint:f.jsx(ne,{label:"Passive requirement (hint)"}),children:f.jsx(ds,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>f.jsx(uD,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Fn,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},TS=Ur(),Ase=[TS({name:"name",header(){return f.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),TS({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:10}),TS({name:"passive",header(){return f.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx($v,{value:t})},size:10})],Pse=({blueprintId:t,table:e,...n})=>{const r=Un([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return f.jsx(Wr,{table:Vr({...e,columns:Ase}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create requirement item (menu)"}),textTitle:f.jsx(ne,{label:"Create requirement item (modal)"}),icon:Fn,children:f.jsx(s3,{mutation:nn({async mutationFn(i){return jt.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Pn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit requirement item (modal)"}),icon:Fn,children:f.jsx(s3,{defaultValues:i,mutation:nn({async mutationFn(s){return jt.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Pp=zt("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:xr(zr(bf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),passive:js()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Pp.useLoaderData(),{filter:n,cursor:r,selection:i}=Pp.useSearch(),{id:s}=Pp.useParams(),o=Pp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Pse,{blueprintId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of requirements (label)"}),...Mr(o)}})})}}),LN=Oie({shape:$.object({resourceId:$.string().min(1),amount:qs(),cycles:th()}),filter:hs.merge($.object({blueprintId:$.string().optional(),resourceId:$.string().optional()}))}),o3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(LN.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"resourceId",label:f.jsx(ne,{label:"Resource name (label)"}),children:f.jsx(ds,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>f.jsx(Tm,{textTitle:f.jsx(ne,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),f.jsx(Cn,{formState:s.formState,name:"amount",label:f.jsx(ne,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(Cn,{formState:s.formState,name:"cycles",label:f.jsx(ne,{label:"Production cycles (label)"}),hint:f.jsx(ne,{label:"Production cycles (hint)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Ps,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},Rm=t=>f.jsx(DD,{icon:On,textTitle:f.jsx(ne,{label:"Select blueprint (title)"}),table:({table:e,...n})=>f.jsx(fM,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>jt.transaction().execute(async r=>vr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>gr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>gr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",l),u("b.name","like",l)]))}return o},output:$.object({id:$.string().min(1),name:$.string().min(1),cycles:$.number().nonnegative(),sort:$.number().nonnegative(),limit:$.number().nonnegative(),requirements:cs(bf.entity.merge($.object({name:$.string().min(1)}))),dependencies:cs(ic.entity.merge($.object({name:$.string().min(1)})))}),filter:e,cursor:n})),...t}),Fse=$.object({blueprintId:$.string().min(1)}),Dse=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(Fse),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"blueprintId",label:f.jsx(ne,{label:"Target blueprint (label)"}),children:f.jsx(ds,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>f.jsx(Rm,{allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:On,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},ed=Ur(),Lse=[ed({name:"name",header(){return f.jsx(ne,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:Ps,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),ed({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:8}),ed({name:"cycles",header(){return f.jsx(ne,{label:"Production cycles (label)"})},render({value:t}){return xn({number:t})},size:8}),ed({name:"requirements",header(){return f.jsx(ne,{label:"Required resources (label)"})},render({value:t}){return f.jsx(sx,{textTitle:f.jsx(ne,{label:"Resource requirements (title)"}),textEmpty:f.jsx(ne,{label:"No requirements (label)"}),requirements:t})},size:32}),ed({name:"resources",header(){return f.jsx(ne,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(Ud,{items:t,render:({entity:e})=>f.jsxs("div",{className:Sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",xn({number:e.amount})]})]})})},size:32}),ed({name:"dependencies",header(){return f.jsx(ne,{label:"Required production dependencies (label)"})},render({value:t}){return f.jsx(Ud,{items:t,render:({entity:e})=>f.jsx("div",{className:Sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:f.jsx("div",{children:e.name})})})},size:32})],Mse=({blueprintId:t,table:e,...n})=>{const r=Un([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return f.jsx(Wr,{table:Vr({...e,columns:Lse}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create blueprint production (menu)"}),textTitle:f.jsx(ne,{label:"Create blueprint production (modal)"}),icon:Ps,children:({close:i})=>f.jsx(o3,{mutation:nn({async mutationFn(s){return jt.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Pn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit blueprint production (modal)"}),icon:Ps,children:f.jsx(o3,{defaultValues:i,mutation:nn({async mutationFn(s){return jt.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),f.jsx(In,{label:f.jsx(ne,{label:"Move production to (menu)"}),textTitle:f.jsx(ne,{label:"Move production to (modal)"}),icon:Fn,children:({close:s})=>f.jsx(Dse,{mutation:nn({async mutationFn(o){return jt.transaction().execute(async l=>{await l.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},Om=jie({shape:$.object({blueprintId:$.string().min(1)}),filter:hs}),jm=qie({shape:$.object({resourceId:$.string().min(1),amount:qs(),passive:$.boolean()}),filter:hs.merge($.object({blueprintProductionId:$.string().optional(),resourceId:$.string().optional()}))}),qm=Aie({shape:$.object({resourceId:$.string().min(1),amount:qs()}),filter:hs.merge($.object({resourceId:$.string().optional()}))}),Fp=zt("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:xr(zr(LN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),cycles:$.number().nonnegative(),requirements:cs(jm.entity.merge($.object({name:$.string().min(1)}))),resources:cs(qm.entity.merge($.object({name:$.string().min(1)}))),dependencies:cs(Om.entity.merge($.object({name:$.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Fp.useLoaderData(),{filter:n,cursor:r,selection:i}=Fp.useSearch(),{id:s}=Fp.useParams(),o=Fp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Mse,{blueprintId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of productions (label)"}),...Mr(o)}})})}}),$se=({label:t,...e})=>f.jsx(ne,{label:`Inventory type - ${t}`,...e}),Bse=Die({shape:$.object({resourceId:$.string().min(1),amount:qs(),limit:qs(),type:$.enum(["storage","construction"])}),filter:hs.merge($.object({resourceId:$.string().optional(),type:$.enum(["storage","construction"]).optional()}))}),a3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(Bse.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"resourceId",label:f.jsx(ne,{label:"Resource name (label)"}),children:f.jsx(ds,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>f.jsx(Tm,{textTitle:f.jsx(ne,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),f.jsx(Cn,{formState:s.formState,name:"type",label:f.jsx(ne,{label:"Inventory type (label)"}),children:f.jsx(ds,{control:s.control,name:"type",render:({field:{ref:l,...u}})=>f.jsx(fD,{items:[{id:"storage",value:na.text("Inventory type - storage")},{id:"construction",value:na.text("Inventory type - construction")}],render:({entity:d})=>d.value,...u})})}),f.jsx(Cn,{formState:s.formState,name:"amount",label:f.jsx(ne,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(Cn,{formState:s.formState,name:"limit",label:f.jsx(ne,{label:"Inventory limit (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Ma,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},dy=Ur(),zse=[dy({name:"name",header(){return f.jsx(ne,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),dy({name:"type",header(){return f.jsx(ne,{label:"Inventory type (label)"})},render({value:t}){return f.jsx($se,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),dy({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:12}),dy({name:"limit",header(){return f.jsx(ne,{label:"Inventory limit (label)"})},render({value:t,data:e}){return f.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[f.jsx("div",{children:xn({number:t})}),f.jsx(mf,{value:100*e.amount/e.limit})]})},size:14})],Wse=({blueprintId:t,table:e,...n})=>{const r=Un([["Blueprint_Inventory"]]),i=nn({async mutationFn(){return jt.transaction().execute(async s=>dM({tx:s,blueprintId:t}))},async onSuccess(){await r()},onError(s){console.error(s)}});return f.jsx(Wr,{table:Vr({...e,columns:zse}),action:{table(){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Create inventory item (menu)"}),textTitle:f.jsx(ne,{label:"Create inventory item (modal)"}),icon:Ma,children:f.jsx(a3,{mutation:nn({async mutationFn(s){return Tn.promise(jt.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:Pn(),blueprintId:t,inventoryId:(await o.insertInto("Inventory").values({id:Pn(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),Pr("Create inventory item"))},async onSuccess(){await r()}})})}),f.jsx(z1,{icon:Ma,onClick:()=>{i.mutate()},children:f.jsx(ne,{label:"Fill inventory (label)"})})]})},row({data:s}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit inventory item (modal)"}),icon:Ma,children:f.jsx(a3,{defaultValues:s,mutation:nn({async mutationFn(o){return Tn.promise(jt.transaction().execute(async l=>l.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),Pr("Update inventory item"))},async onSuccess(){await r()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:f.jsx(ne,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},Vse=Rie({shape:$.object({blueprintId:$.string().min(1),inventoryId:$.string().min(1)}),filter:hs.merge($.object({blueprintId:$.string().optional(),inventoryId:$.string().optional()}))}),Dp=zt("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:xr(zr(Vse)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>vr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bi.id","=",l.id)),l?.idIn&&(u=u.where("bi.id","in",l.idIn)),l?.fulltext){const d=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${d}%`),p("r.id","like",`%${d}%`),p("r.name","like",`%${d}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",d),h("t.label","like",d),h("t.group","like",d)])))]))}return u},output:$.object({id:$.string().min(1),name:$.string().min(1),type:$.enum(["storage","construction"]),resourceId:$.string().min(1),blueprintId:$.string().min(1),inventoryId:$.string().min(1),amount:$.number().nonnegative(),limit:$.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Dp.useLoaderData(),{filter:n,cursor:r,selection:i}=Dp.useSearch(),{id:s}=Dp.useParams(),o=Dp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Wse,{blueprintId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of items"}),...Mr(o)}})})}}),yM=zt("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=hi({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=yM.useNavigate(),n=Un([["Blueprint"]]);return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(rv,{defaultValues:t,mutation:nn({async mutationFn(r){return Tn.promise(jt.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),Pr("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),l3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(ic.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"dependencyId",label:f.jsx(ne,{label:"Blueprint dependency (label)"}),children:f.jsx(ds,{control:s.control,name:"dependencyId",render:({field:{ref:l,...u}})=>f.jsx(Rm,{textTitle:f.jsx(ne,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:On,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},Use=Ur(),Hse=[Use({name:"name",header(){return f.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],Qse=({blueprintId:t,table:e,...n})=>{const r=Un([["Blueprint_Dependency"],["Blueprint"]]);return f.jsx(Wr,{table:Vr({...e,columns:Hse}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create blueprint dependency (menu)"}),textTitle:f.jsx(ne,{label:"Create blueprint dependency (modal)"}),icon:On,children:({close:i})=>f.jsx(l3,{mutation:nn({async mutationFn(s){return Tn.promise(jt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Dependency").values({id:Pn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Gh({tx:o}),l}),Pr("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit blueprint dependency (modal)"}),icon:On,children:({close:s})=>f.jsx(l3,{defaultValues:i,mutation:nn({async mutationFn(o){return Tn.promise(jt.transaction().execute(async l=>l.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Pr("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},Lp=zt("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:xr(zr(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1),dependencyId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Lp.useLoaderData(),{filter:n,cursor:r,selection:i}=Lp.useSearch(),{id:s}=Lp.useParams(),o=Lp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Qse,{blueprintId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of requirements (label)"}),...Mr(o)}})})}}),Kse=Cie({shape:$.object({conflictId:$.string().min(1)}),filter:hs}),c3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(Kse.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"conflictId",label:f.jsx(ne,{label:"Blueprint conflict (label)"}),hint:f.jsx(ne,{label:"Blueprint conflict (hint)"}),children:f.jsx(ds,{control:s.control,name:"conflictId",render:({field:{ref:l,...u}})=>f.jsx(Rm,{textTitle:f.jsx(ne,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:On,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},Gse=Ur(),Jse=[Gse({name:"name",header(){return f.jsx(ne,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Zse=({blueprintId:t,table:e,...n})=>{const r=Un([["Blueprint_Conflict"],["Blueprint"]]);return f.jsx(Wr,{table:Vr({...e,columns:Jse}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create blueprint conflict (menu)"}),textTitle:f.jsx(ne,{label:"Create blueprint conflict (modal)"}),icon:On,children:({close:i})=>f.jsx(c3,{mutation:nn({async mutationFn(s){return Tn.promise(jt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Conflict").values({id:Pn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Gh({tx:o}),l}),Pr("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit blueprint conflict (modal)"}),icon:On,children:({close:s})=>f.jsx(c3,{defaultValues:i,mutation:nn({async mutationFn(o){return Tn.promise(jt.transaction().execute(async l=>l.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Pr("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},Mp=zt("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:xr(zr(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1),conflictId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Mp.useLoaderData(),{filter:n,cursor:r,selection:i}=Mp.useSearch(),{id:s}=Mp.useParams(),o=Mp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Zse,{blueprintId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of conflicts (label)"}),...Mr(o)}})})}}),Yse=({routeId:t,inventory:e})=>{const n=Un([["GameMap"]]),r=nn({async mutationFn({routeId:i,resourceId:s,transport:o,type:l}){return jt.transaction().execute(async u=>u.insertInto("Route_Resource").values({id:Pn(),resourceId:s,routeId:i,amount:o,type:l,priority:0}).execute())},async onSuccess(){await n()}});return f.jsxs("div",{className:Sn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:Fn,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsx("div",{children:f.jsx(wn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,type:"storage",routeId:t})}})})]})},Xse=({resource:t})=>{const e=Un([["GameMap"]]),n=nn({async mutationFn({routeResourceId:r}){return jt.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:Sn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:Fn,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name}),f.jsxs(ki,{children:["x",xn({number:t.amount})]})]}),f.jsx("div",{children:f.jsx(wn,{variant:{variant:"secondary"},iconEnabled:ai,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},eoe=({route:t,resource:e,inventory:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return f.jsxs(uo,{icon:Fn,textTitle:f.jsx(ne,{label:"Route resources (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:i,id:t.fromId}}),f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx("div",{className:"font-light",children:t.fromName}),f.jsx(Xt,{icon:"icon-[cil--arrow-right]"}),f.jsx("div",{children:t.toName})]})]}),...r,children:[f.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"font-bold",children:f.jsx(ne,{label:"Transported resources (label)"})}),e.map(s=>f.jsx(Xse,{resource:s},s.id))]}):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"No route resources yet (label)"})})}),f.jsx("div",{className:"border-b border-slate-300 shadow-md"}),f.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"font-bold",children:f.jsx(ne,{label:"Available resources (label)"})}),n.map(s=>f.jsx(Yse,{inventory:s,routeId:t.id},s.id))]}):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"There are no available items for transport (label)"})})})]})},bM=zt("/$locale/apps/derivean/map/route/$id/resources")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{resource:await t.ensureQueryData({queryKey:["GameMap","building","routes",n,"resources"],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId","rr.type"]).where("rr.routeId","=",n).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),routeId:$.string().min(1),resourceId:$.string().min(1),name:$.string().min(1),amount:$.number().nonnegative(),type:$.enum(["storage","construction","input","output"])})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","route","inventory",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport","i.type"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("bi.inventoryId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n)).where("i.type","in",["storage"])).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",n)).where("i.type","in",["storage"])).where("r.id","not in",r.selectFrom("Route_Resource as rr").where("rr.routeId","=",n).select("rr.resourceId")).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),resourceId:$.string().min(1),name:$.string().min(1),transport:qs(),type:$.enum(["storage","construction","input","output"])})}))}})}},component(){const{route:t}=hi({from:"/$locale/apps/derivean/map/route/$id"}),{resource:e,inventory:n}=bM.useLoaderData();return f.jsx(eoe,{route:t,resource:e,inventory:n})}}),toe=({routeId:t,inventory:e})=>{const n=Un([["GameMap"]]),r=nn({async mutationFn({routeId:i,resourceId:s,transport:o}){return jt.transaction().execute(async l=>l.insertInto("Route_Resource").values({id:Pn(),resourceId:s,routeId:i,amount:o,type:"construction",priority:0}).execute())},async onSuccess(){await n()}});return f.jsxs("div",{className:Sn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:Fn,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:e.name})]}),f.jsx("div",{children:f.jsx(wn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,routeId:t})}})})]})},noe=({resource:t})=>{const e=Un([["GameMap"]]),n=nn({async mutationFn({routeResourceId:r}){return jt.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:Sn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:Fn,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold",children:t.name}),f.jsxs(ki,{children:["x",xn({number:t.amount})]})]}),f.jsx("div",{children:f.jsx(wn,{variant:{variant:"secondary"},iconEnabled:ai,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},roe=({route:t,resource:e,inventory:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return f.jsxs(uo,{icon:Yd,textTitle:f.jsx(ne,{label:"Construction resources (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:i,id:t.fromId}}),f.jsxs("div",{className:"flex flex-row items-center gap-2",children:[f.jsx("div",{className:"font-light",children:t.fromName}),f.jsx(Xt,{icon:"icon-[cil--arrow-right]"}),f.jsx("div",{children:t.toName})]})]}),...r,children:[f.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"font-bold",children:f.jsx(ne,{label:"Transported resources (label)"})}),e.map(s=>f.jsx(noe,{resource:s},s.id))]}):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"No route resources yet (label)"})})}),f.jsx("div",{className:"border-b border-slate-300 shadow-md"}),f.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"font-bold",children:f.jsx(ne,{label:"Available resources (label)"})}),n.map(s=>f.jsx(toe,{inventory:s,routeId:t.id},s.id))]}):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"There are no available items for transport (label)"})})})]})},vM=zt("/$locale/apps/derivean/map/route/$id/construction")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{resource:await t.ensureQueryData({queryKey:["GameMap","building","routes",n,"construction"],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId","rr.type"]).where("rr.routeId","=",n),output:$.object({id:$.string().min(1),routeId:$.string().min(1),resourceId:$.string().min(1),name:$.string().min(1),amount:$.number().nonnegative(),type:$.enum(["storage","construction","input","output"])})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","route","inventory",n,"construction"],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("bi.inventoryId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n)).where("i.type","=","construction")).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",n)).where("i.type","=","storage")).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n)).where("i.type","=","construction")).where("r.id","not in",r.selectFrom("Route_Resource as rr").where("rr.routeId","=",n).select("rr.resourceId")).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),resourceId:$.string().min(1),name:$.string().min(1),transport:qs()})}))}})}},component(){const{route:t}=hi({from:"/$locale/apps/derivean/map/route/$id"}),{resource:e,inventory:n}=vM.useLoaderData();return f.jsx(roe,{route:t,resource:e,inventory:n})}}),t1="icon-[heroicons--queue-list]",Ep=["p-4","border","border-slate-300","w-full","justify-start"],ioe=({building:t})=>{const{locale:e}=sn({from:"/$locale"});return f.jsxs(uo,{icon:rc,textTitle:t.name,children:[f.jsx(At,{icon:Ps,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:e,id:t.id},css:{base:Ep},children:f.jsx(ne,{label:"Building production (label)"})}),f.jsx(At,{icon:t1,to:"/$locale/apps/derivean/map/building/$id/production/queue",params:{locale:e,id:t.id},css:{base:Ep},children:f.jsx(ne,{label:"Production queue (label)"})}),f.jsx(At,{icon:Ma,to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:e,id:t.id},css:{base:Ep},children:f.jsx(ne,{label:"Building inventory (label)"})}),f.jsx(At,{icon:"icon-[gis--route-end]",to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:e,id:t.id},css:{base:Ep},children:f.jsx(ne,{label:"Building routes (label)"})}),f.jsx(At,{icon:"icon-[ph--queue-thin]",to:"/$locale/apps/derivean/map/building/$id/route/priority",params:{locale:e,id:t.id},css:{base:Ep},children:f.jsx(ne,{label:"Route priority (label)"})})]})},soe=zt("/$locale/apps/derivean/map/building/$id/view")({component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"});return f.jsx(ioe,{building:t})}}),ooe=({route:t})=>{const{locale:e}=sn({from:"/$locale"}),n=Un([["GameMap"]]),r=nn({async mutationFn({routeId:i}){return jt.transaction().execute(async s=>s.deleteFrom("Route").where("id","=",i).execute())},async onSuccess(){await n()}});return f.jsxs("div",{className:Sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.count>0?void 0:["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]]),children:[t.toConstructionId?f.jsx(At,{icon:Yd,to:"/$locale/apps/derivean/map/route/$id/construction",params:{locale:e,id:t.id},children:t.toName}):f.jsx(At,{icon:Fn,to:"/$locale/apps/derivean/map/route/$id/resources",params:{locale:e,id:t.id},children:t.toName}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(At,{icon:"icon-[cil--arrow-right]",to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:e,id:t.fromId},search:{zoomToId:t.toId},children:f.jsx(ki,{children:xn({number:t.count})})}),f.jsx(wn,{iconEnabled:ai,variant:{variant:"secondary"},loading:r.isPending,onClick:()=>{r.mutate({routeId:t.id})}})]})]})},aoe=({building:t,route:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return f.jsx(uo,{icon:"icon-[gis--route-end]",textTitle:f.jsx(ne,{label:"Routes (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(ooe,{route:i},i.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"No outcomming routes yet (label)"})})})},xM=zt("/$locale/apps/derivean/map/building/$id/routes")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{route:await t.ensureQueryData({queryKey:["GameMap","building","routes",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blt.name as toName","bt.constructionId as toConstructionId",i=>i.selectFrom("Route_Resource as rr").select(s=>s.fn.count("rr.id").as("count")).whereRef("rr.routeId","=","r.id").as("count")]).where("r.fromId","=",n),output:$.object({id:$.string().min(1),fromId:$.string().min(1),toId:$.string().min(1),toName:$.string().min(1),toConstructionId:$.string().nullish(),count:$.number().nonnegative()})}))}})}},component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"}),{route:e}=xM.useLoaderData();return f.jsx(aoe,{building:t,route:e})}}),loe=({inventory:t})=>f.jsxs("div",{className:Sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.limit>0&&t.amount>=t.limit?["border-red-400","bg-red-50","hover:bg-red-50","hover:border-red-600"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx("div",{className:"font-bold",children:t.name}),xn({number:t.amount})," /"," ",xn({number:t.limit})]}),t.limit>0?f.jsx(mf,{variant:{size:"md"},value:100*t.amount/t.limit,css:{progress:t.amount>=t.limit?["bg-red-500"]:void 0}}):null]}),coe=({inventory:t,fulltextProps:e,...n})=>f.jsxs(uo,{icon:Ma,textTitle:f.jsx(ne,{label:"Inventory (label)"}),...n,children:[f.jsx(yD,{...e}),f.jsx("div",{children:f.jsx(ne,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),t.length>0?t.map(r=>f.jsx(loe,{inventory:r},r.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"No inventory storage. (label)"})})]}),$p=zt("/$locale/apps/derivean/map/building/$id/inventory")({validateSearch:xr($.object({fulltext:$.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{id:r}}){return{inventory:await t.ensureQueryData({queryKey:["GameMap","building","inventory","input",r,{fulltext:n}],async queryFn(){return e.transaction().execute(async i=>ri({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).where("i.type","in",["storage"]).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(d=>d.or([d("r.name","like",u)]))}return l},output:$.object({id:$.string().min(1),amount:$.number().nonnegative(),limit:$.number().nonnegative(),name:$.string().min(1)}),filter:{fulltext:n}}))}})}},component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"}),{fulltext:e}=$p.useSearch(),{locale:n}=$p.useParams(),r=$p.useNavigate(),{inventory:i}=$p.useLoaderData();return f.jsx(coe,{inventory:i,textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:n,id:t.id}}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:n,id:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(s){r({search:{fulltext:s}})}}})}}),wM=({requirement:t})=>{const e=(t.available||0)>=t.amount;return f.jsxs("div",{className:Sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||e?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[f.jsx("div",{className:"font-bold",children:t.name}),t.available===void 0?f.jsxs(ki,{children:["x",xn({number:t.amount})]}):f.jsxs(ki,{css:{base:e?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[f.jsx("div",{className:"font-bold",children:xn({number:t.available})}),f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-light",children:xn({number:t.amount})})]})]})},uoe=({blueprint:t,requirement:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return f.jsx(uo,{icon:Fn,textTitle:f.jsx(ne,{label:"Building requirements (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/construction",params:{locale:r},css:{base:["font-bold"]}}),f.jsx(At,{to:"/$locale/apps/derivean/map/blueprint/$id/requirements",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(wM,{requirement:i},i.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(ne,{label:"There are no requirements. (label)"})})})},_M=zt("/$locale/apps/derivean/map/blueprint/$id/requirements")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","requirements",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",gr.lit("construction").as("type")]).where("br.blueprintId","=",n),output:$.object({id:$.string().min(1),name:$.string().min(1),amount:$.number().nonnegative(),passive:js(),type:$.enum(["storage","construction","input","output"])})}))}})}},component(){const{blueprint:t}=hi({from:"/$locale/apps/derivean/map/blueprint/$id"}),{requirement:e}=_M.useLoaderData();return f.jsx(uoe,{blueprint:t,requirement:e})}}),doe=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return f.jsxs(nc,{...e,children:[f.jsx(Yn,{icon:DN,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Production requirements (menu)"})}),f.jsx(Yn,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Production resource requirements (menu)"})}),f.jsx(Yn,{icon:On,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:f.jsx(ne,{label:"Production resource dependencies (menu)"})})]})},foe=t=>{const{locale:e}=sn({from:"/$locale"});return f.jsx(hf,{title:({entity:n})=>f.jsx(gf,{icon:Ps,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>f.jsx(f.Fragment,{children:f.jsx(At,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:f.jsx(ne,{label:"Building base detail (label)"})})}),...t})},SM=zt("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await ca({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:$.object({id:$.string().min(1),resource:$.string().min(1),blueprint:$.string().min(1),blueprintId:$.string().min(1),amount:$.number().nonnegative(),cycles:$.number().int().nonnegative()})})}))}})},component(){const{entity:t}=SM.useLoaderData(),{tva:e}=br({from:"__root__"}),n=e().slots;return f.jsxs("div",{className:n.base(),children:[f.jsx(foe,{entity:t}),f.jsx(doe,{entity:t}),f.jsx(co,{})]})}}),poe=t=>f.jsx(dD,{items:[{id:"name",label:f.jsx(ne,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:f.jsx(ne,{label:"Construction cycles (label)"}),render({entity:e}){return xn({number:e.cycles})}}],...t}),hoe=zt("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=hi({from:"/$locale/apps/derivean/game/blueprint/$id"});return f.jsx("div",{className:"w-1/2 mx-auto",children:f.jsx(poe,{entity:t})})}}),RS=Ur(),moe=[RS({name:"name",header(){return f.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),RS({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:10}),RS({name:"passive",header(){return f.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx($v,{value:t})},size:10})],goe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:moe}),...e}),Uy=zt("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:xr(zr(bf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),passive:js()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Uy.useLoaderData(),{filter:n,cursor:r}=Uy.useSearch(),i=Uy.useNavigate(),{tva:s}=br({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(goe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of requirements (label)"}),...Mr(i)}})})}}),td=Ur(),yoe=[td({name:"name",header(){return f.jsx(ne,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:Ps,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),td({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:8}),td({name:"cycles",header(){return f.jsx(ne,{label:"Production cycles (label)"})},render({value:t}){return xn({number:t})},size:8}),td({name:"requirements",header(){return f.jsx(ne,{label:"Required resources (label)"})},render({value:t}){return f.jsx(sx,{textTitle:f.jsx(ne,{label:"Resource requirements (title)"}),textEmpty:f.jsx(ne,{label:"No requirements (label)"}),requirements:t})},size:32}),td({name:"resources",header(){return f.jsx(ne,{label:"Required production resources (label)"})},render({value:t}){return f.jsx(Ud,{items:t,render:({entity:e})=>f.jsxs("div",{className:Sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:[f.jsx("div",{children:e.name}),f.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",xn({number:e.amount})]})]})})},size:32}),td({name:"dependencies",header(){return f.jsx(ne,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=sn({from:"/$locale"});return f.jsx(Ud,{items:t,render:({entity:n})=>f.jsx("div",{className:Sn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:f.jsx(At,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],boe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:yoe}),...e}),Hy=zt("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:xr(zr(LN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>gr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),cycles:$.number().nonnegative(),requirements:cs(jm.entity.merge($.object({name:$.string().min(1)}))),resources:cs(qm.entity.merge($.object({name:$.string().min(1)}))),dependencies:cs(Om.entity.merge($.object({name:$.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Hy.useLoaderData(),{filter:n,cursor:r}=Hy.useSearch(),i=Hy.useNavigate(),{tva:s}=br({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(boe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of productions (label)"}),...Mr(i)}})})}}),voe=Ur(),xoe=[voe({name:"name",header(){return f.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],woe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:xoe}),...e}),Qy=zt("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:xr(zr(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1),dependencyId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Qy.useLoaderData(),{filter:n,cursor:r}=Qy.useSearch(),i=Qy.useNavigate(),{tva:s}=br({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(woe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of dependencies (label)"}),...Mr(i)}})})}}),_oe=Ur(),Soe=[_oe({name:"name",header(){return f.jsx(ne,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:On,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Eoe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:Soe}),...e}),Ky=zt("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:xr(zr(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1),conflictId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ky.useLoaderData(),{filter:n,cursor:r}=Ky.useSearch(),i=Ky.useNavigate(),{tva:s}=br({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Eoe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of conflicts (label)"}),...Mr(i)}})})}}),EM=Fie({shape:$.object({blueprintId:$.string().min(1),constructionId:$.string().optional(),productionId:$.string().optional(),recurringProductionId:$.string().optional(),x:qs(),y:qs()}),filter:hs.merge($.object({userId:$.string().optional(),blueprintId:$.string().optional(),name:$.string().optional()}))}),u3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(EM.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"blueprintId",label:f.jsx(ne,{label:"Select blueprint (label)"}),children:f.jsx(ds,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>f.jsx(Rm,{allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:rc,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},Noe=Ur(),koe=[Noe({name:"name",header(){return f.jsx(ne,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsxs("div",{className:"flex flex-row gap-2",children:[f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],Ioe=({userId:t,table:e,...n})=>{const r=Un([["Building"]]);return f.jsx(Wr,{table:Vr({...e,columns:koe}),action:{table:t?()=>f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create building (menu)"}),textTitle:f.jsx(ne,{label:"Create building (modal)"}),icon:Fn,children:f.jsx(u3,{mutation:nn({async mutationFn(i){return Tn.promise(jt.transaction().execute(s=>s.insertInto("Building").values({id:Pn(),...i,userId:t}).returningAll().executeTakeFirstOrThrow()),Pr("Create building"))},async onSuccess(){await r()}})})})}):void 0,row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit building (modal)"}),icon:rc,children:f.jsx(u3,{defaultValues:i,mutation:nn({async mutationFn(s){return Tn.promise(jt.transaction().execute(o=>o.updateTable("Building").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Pr("Edit building"))},async onSuccess(){await r()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Building").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:r})})]})}},...n})},Bp=zt("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:xr(zr(EM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>vr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bp.useLoaderData(),{filter:n,cursor:r,selection:i}=Bp.useSearch(),{id:s}=Bp.useParams(),o=Bp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Ioe,{userId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of buildings (label)"}),...Mr(o)}})})}}),d3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(qm.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"resourceId",label:f.jsx(ne,{label:"Requirement (label)"}),children:f.jsx(ds,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>f.jsx(Tm,{allowEmpty:!0,...u})})}),f.jsx(Cn,{formState:s.formState,name:"amount",label:f.jsx(ne,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Fn,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},f3=Ur(),Coe=[f3({name:"name",header(){return f.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),f3({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:10})],Toe=({blueprintProductionId:t,table:e,...n})=>{const r=Un([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return f.jsx(Wr,{table:Vr({...e,columns:Coe}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create production resource requirement (menu)"}),textTitle:f.jsx(ne,{label:"Create production resource requirement (modal)"}),icon:Fn,children:({close:i})=>f.jsx(d3,{mutation:nn({async mutationFn(s){return jt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Pn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit production resource requirement (modal)"}),icon:Fn,children:({close:s})=>f.jsx(d3,{defaultValues:i,mutation:nn({async mutationFn(o){return jt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},zp=zt("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:xr(zr(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zp.useLoaderData(),{filter:n,cursor:r,selection:i}=zp.useSearch(),{id:s}=zp.useParams(),o=zp.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Toe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of production resource requirements (label)"}),...Mr(o)}})})}}),p3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(jm.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"resourceId",label:f.jsx(ne,{label:"Requirement (label)"}),children:f.jsx(ds,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>f.jsx(Tm,{allowEmpty:!0,...u})})}),f.jsx(Cn,{formState:s.formState,name:"amount",label:f.jsx(ne,{label:"Amount (label)"}),children:f.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),f.jsx(Cn,{formState:s.formState,name:"passive",label:f.jsx(ne,{label:"Passive requirement (label)"}),hint:f.jsx(ne,{label:"Passive requirement (hint)"}),children:f.jsx(ds,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>f.jsx(uD,{...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:Fn,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},OS=Ur(),Roe=[OS({name:"name",header(){return f.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),OS({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:10}),OS({name:"passive",header(){return f.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx($v,{value:t})},size:10})],Ooe=({blueprintProductionId:t,table:e,...n})=>{const r=Un([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return f.jsx(Wr,{table:Vr({...e,columns:Roe}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create production requirement (menu)"}),textTitle:f.jsx(ne,{label:"Create production requirement (modal)"}),icon:Fn,children:({close:i})=>f.jsx(p3,{mutation:nn({async mutationFn(s){return jt.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Pn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit production requirement (modal)"}),icon:Fn,children:({close:s})=>f.jsx(p3,{defaultValues:i,mutation:nn({async mutationFn(o){return jt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},Wp=zt("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:xr(zr(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),passive:js()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Wp.useLoaderData(),{filter:n,cursor:r,selection:i}=Wp.useSearch(),{id:s}=Wp.useParams(),o=Wp.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Ooe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of production requirements (label)"}),...Mr(o)}})})}}),h3=({mutation:t,defaultValues:e,variant:n,tva:r=zi,css:i})=>{const s=Wi({resolver:Vi(Om.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return f.jsxs("form",{className:o.base(),onSubmit:Ds({form:s,mutation:t}),children:[f.jsx(Ci,{variant:{highlight:!0},error:s.formState.errors.root}),f.jsx(Cn,{formState:s.formState,name:"blueprintId",label:f.jsx(ne,{label:"Blueprint dependency (label)"}),children:f.jsx(ds,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>f.jsx(Rm,{textTitle:f.jsx(ne,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),f.jsx("div",{className:"flex flex-row justify-between gap-8",children:f.jsx(wn,{iconEnabled:On,type:"submit",children:f.jsx(ne,{label:"Save (submit)"})})})]})},joe=Ur(),qoe=[joe({name:"name",header(){return f.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Aoe=({blueprintProductionId:t,table:e,...n})=>{const r=Un([["Blueprint_Production_Dependency"],["Blueprint"]]);return f.jsx(Wr,{table:Vr({...e,columns:qoe}),action:{table(){return f.jsx(dr,{children:f.jsx(In,{label:f.jsx(ne,{label:"Create blueprint production dependency (menu)"}),textTitle:f.jsx(ne,{label:"Create blueprint production dependency (modal)"}),icon:On,children:({close:i})=>f.jsx(h3,{mutation:nn({async mutationFn(s){return Tn.promise(jt.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Production_Dependency").values({id:Pn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await Gh({tx:o}),l}),Pr("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return f.jsxs(dr,{children:[f.jsx(In,{label:f.jsx(ne,{label:"Edit (menu)"}),textTitle:f.jsx(ne,{label:"Edit blueprint production dependency (modal)"}),icon:On,children:({close:s})=>f.jsx(h3,{defaultValues:i,mutation:nn({async mutationFn(o){return Tn.promise(jt.transaction().execute(async l=>l.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),Pr("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),f.jsx(In,{icon:ai,label:f.jsx(ne,{label:"Delete (menu)"}),textTitle:f.jsx(ne,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:f.jsx(Ms,{callback:async()=>jt.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:f.jsx(ne,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},Vp=zt("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:xr(zr(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Vp.useLoaderData(),{filter:n,cursor:r,selection:i}=Vp.useSearch(),{id:s}=Vp.useParams(),o=Vp.useNavigate(),{tva:l}=br({from:"__root__"}),u=l().slots;return f.jsx("div",{className:u.base(),children:f.jsx(Aoe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:$r(o)},selection:{type:"multi",value:i,set:Ls(o)}},fulltext:{value:n?.fulltext,set:Br(o)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of dependencies (label)"}),...Mr(o)}})})}}),Poe=({priority:t})=>{const e=Un([["GameMap"]]),n=nn({async mutationFn({routeResourceId:r,priority:i}){return jt.transaction().execute(async s=>s.updateTable("Route_Resource").set({priority:Math.max(0,i)}).where("id","=",r).execute())},async onSuccess(){await e()}});return f.jsxs("div",{className:Sn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",n.isPending?["pointer-events-none","opacity-50"]:void 0]),children:[f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(Xt,{icon:Fn,css:{base:["text-slate-500"]}}),f.jsx("div",{className:"font-bold text-sm",children:t.name}),f.jsx(Xt,{icon:"icon-[cil--arrow-right]"}),f.jsx("div",{className:"text-xs",children:t.toName})]}),f.jsx("div",{className:"flex flex-row gap-2 items-center text-slate-500",children:f.jsxs(ki,{children:["x",xn({number:t.amount})]})})]}),f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[f.jsx(ki,{children:xn({number:t.priority})}),f.jsx(wn,{variant:{variant:"secondary"},iconEnabled:"icon-[typcn--minus-outline]",onClick:()=>{n.mutate({routeResourceId:t.id,priority:t.priority-1})}}),f.jsx(wn,{variant:{variant:"secondary"},iconEnabled:"icon-[mingcute--plus-line]",onClick:()=>{n.mutate({routeResourceId:t.id,priority:t.priority+1})}})]})]})},Foe=({building:t,priority:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return f.jsx(uo,{icon:"icon-[ph--queue-thin]",textTitle:f.jsx(ne,{label:"Route priority (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/route/priority",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(Poe,{priority:i},i.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"There are no resources on the road. (label)"})})})},NM=zt("/$locale/apps/derivean/map/building/$id/route/priority")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{priority:await t.ensureQueryData({queryKey:["GameMap","building","route","priority",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Route_Resource as rr").innerJoin("Route as r","r.id","rr.routeId").innerJoin("Resource as re","re.id","rr.resourceId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["rr.id","rr.amount","re.name","rr.priority","blt.name as toName"]).where("r.fromId","=",n).orderBy("rr.priority","desc"),output:$.object({id:$.string().min(1),name:$.string().min(1),toName:$.string().min(1),amount:$.number().nonnegative(),priority:$.number().int().nonnegative()})}))}})}},component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"}),{priority:e}=NM.useLoaderData();return f.jsx(Foe,{building:t,priority:e})}}),Doe=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return f.jsxs("div",{className:Sn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[f.jsx("div",{className:"font-bold",children:t.name}),f.jsx("div",{className:"flex flex-row gap-2 items-center",children:f.jsxs(ki,{children:["x",xn({number:t.amount})]})}),f.jsx(FN,{cycles:t.cycles})]}),f.jsx(mf,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},Loe=({building:t,queue:e,inventory:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return f.jsx(uo,{icon:t1,textTitle:f.jsx(ne,{label:"Production queue (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:i,id:t.id}}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:i,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(s=>f.jsx(Doe,{queue:s,inventory:n},s.id)):f.jsxs("div",{className:Sn(["flex","flex-col","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[f.jsx(ne,{label:"Production queue is empty. (label)"}),f.jsx(At,{icon:t1,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:i,id:t.id},children:f.jsx(ne,{label:"Plan queue (label)"})})]})})},kM=zt("/$locale/apps/derivean/map/building/$id/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{queue:await t.ensureQueryData({queryKey:["GameMap","building","production","queue",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",n),output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),cycle:$.number().int().nonnegative(),cycles:$.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","inventory",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",n)).orderBy("r.name"),query({select:i,where:s}){let o=i;if(s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("r.name","like",l)]))}return o},output:$.object({id:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),limit:$.number().nonnegative(),name:$.string().min(1)})}))}})}},component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"}),{queue:e,inventory:n}=kM.useLoaderData();return f.jsx(Loe,{building:t,queue:e,inventory:n})}}),Moe=({building:t,production:e})=>{const{locale:n}=sn({from:"/$locale"}),r=Un([["GameMap"]]),i=nn({async mutationFn({blueprintProductionId:u,buildingId:d}){return jt.transaction().execute(async p=>p.updateTable("Building").set({productionId:u}).where("id","=",d).execute())},async onSuccess(){await r()}}),s=nn({async mutationFn({buildingId:u}){return jt.transaction().execute(async d=>d.updateTable("Building").set({productionId:null}).where("id","=",u).execute())},async onSuccess(){await r()}}),o=nn({async mutationFn({blueprintProductionId:u,buildingId:d}){return jt.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:u}).where("id","=",d).execute())},async onSuccess(){await r()}}),l=nn({async mutationFn({buildingId:u}){return jt.transaction().execute(async d=>d.updateTable("Building").set({recurringProductionId:null}).where("id","=",u).execute())},async onSuccess(){await r()}});return f.jsxs("div",{className:Sn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",e.withAvailableResources?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),children:[f.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?f.jsx(wn,{iconEnabled:"icon-[tabler--basket]",loading:s.isPending,onClick:()=>{s.mutate({buildingId:t.id})}}):f.jsx(wn,{iconEnabled:"icon-[solar--play-outline]",iconDisabled:"icon-[tabler--basket]",loading:i.isPending,onClick:()=>{i.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?f.jsx(wn,{iconEnabled:"icon-[tabler--basket]",loading:l.isPending,onClick:()=>{l.mutate({buildingId:t.id})}}):f.jsx(wn,{iconEnabled:"icon-[oui--refresh]",loading:o.isPending,onClick:()=>{o.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),f.jsxs(At,{to:"/$locale/apps/derivean/map/building/$id/production/$productionId/requirements",params:{locale:n,id:t.id,productionId:e.id},children:[e.name,f.jsxs(ki,{children:["x",xn({number:e.amount})]})]})]}),f.jsx(FN,{cycles:e.cycles})]})},$oe=({building:t,production:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return f.jsx(uo,{icon:Ps,textTitle:f.jsx(ne,{label:"Building production (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>f.jsx(Moe,{building:t,production:i},i.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:f.jsx(ne,{label:"This building does not produce anything. (label)"})})})},IM=zt("/$locale/apps/derivean/map/building/$id/production/list")({async loader({context:{queryClient:t,kysely:e,session:n},params:{id:r}}){const i=await n();return{production:await t.ensureQueryData({queryKey:["GameMap","building","production",r],async queryFn(){return e.transaction().execute(async s=>ri({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",o=>o.case().when(o.not(o.exists(o.selectFrom("Blueprint_Production_Requirement as bpr").select(o.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Inventory as i").select(l.lit(1).as("one")).where("i.id","in",l.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",r)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(o.lit(!0)).else(o.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",s.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",r)).where(o=>o.not(o.exists(o.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",i.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(o=>o.not(o.exists(o.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",l.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))),output:$.object({id:$.string().min(1),name:$.string().min(1),amount:$.number().nonnegative(),cycles:$.number().int().nonnegative(),withAvailableResources:js()})}))}})}},component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"}),{production:e}=IM.useLoaderData();return f.jsx($oe,{building:t,production:e})}}),Boe=zt("/$locale/apps/derivean/map/building/$id/production/$productionId")({async loader({context:{queryClient:t,kysely:e},params:{id:n,productionId:r}}){return{production:await t.ensureQueryData({queryKey:["GameMap","building",n,"production",r],async queryFn(){return e.transaction().execute(async i=>ca({select:i.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",r),output:$.object({id:$.string().min(1),amount:$.number().nonnegative(),name:$.string().min(1)})}))}})}}}),zoe=({requirement:t})=>{const e=t.available||0;return f.jsxs("div",{className:Sn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.amount>e?["border-red-400","bg-red-50","hover:border-red-600","hover:bg-red-50"]:void 0]),children:[f.jsxs("div",{className:"flex flex-row items-center justify-between",children:[f.jsx("div",{className:"font-bold",children:t.name}),f.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[f.jsx("div",{children:xn({number:e})}),f.jsx("div",{children:"/"}),f.jsx("div",{className:"font-bold",children:xn({number:t.amount})})]})]}),f.jsx(mf,{value:100*e/t.amount})]})},Woe=({requirement:t,...e})=>f.jsx(uo,{icon:DN,textTitle:f.jsx(ne,{label:"Construction requirements (label)"}),...e,children:t.length>0?t.map(n=>f.jsx(zoe,{requirement:n},n.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(ne,{label:"There are no construction requirements (label)"})})}),CM=zt("/$locale/apps/derivean/map/building/$id/construction/requirements")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","construction","requirement",n],async queryFn(){return e.transaction().execute(async r=>ri({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",i=>i.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",n)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",i=>i.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",n)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available")]).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),name:$.string().min(1),amount:$.number().nonnegative(),available:$.number().nonnegative().nullish(),passive:js()})}))}})}},component(){const{requirement:t}=CM.useLoaderData();return f.jsx(Woe,{requirement:t})}}),m3=Ur(),Voe=[m3({name:"name",header(){return f.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),m3({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:10})],Uoe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:Voe}),...e}),Gy=zt("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:xr(zr(qm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Gy.useLoaderData(),{filter:n,cursor:r}=Gy.useSearch(),i=Gy.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Uoe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of production resource requirements (label)"}),...Mr(i)}})})}}),jS=Ur(),Hoe=[jS({name:"name",header(){return f.jsx(ne,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),jS({name:"amount",header(){return f.jsx(ne,{label:"Amount (label)"})},render({value:t}){return xn({number:t})},size:10}),jS({name:"passive",header(){return f.jsx(ne,{label:"Passive requirement (label)"})},render({value:t}){return f.jsx($v,{value:t})},size:10})],Qoe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:Hoe}),...e}),Jy=zt("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:xr(zr(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),resourceId:$.string().min(1),amount:$.number().nonnegative(),passive:js()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Jy.useLoaderData(),{filter:n,cursor:r}=Jy.useSearch(),i=Jy.useNavigate();return f.jsx(f.Fragment,{children:f.jsx(Qoe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of production requirements (label)"}),...Mr(i)}})})}}),Koe=Ur(),Goe=[Koe({name:"name",header(){return f.jsx(ne,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return f.jsx(At,{icon:On,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Joe=({table:t,...e})=>f.jsx(Wr,{table:Vr({...t,columns:Goe}),...e}),Zy=zt("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:xr(zr(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>vr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:$.object({id:$.string().min(1),name:$.string().min(1),blueprintId:$.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Zy.useLoaderData(),{filter:n,cursor:r}=Zy.useSearch(),i=Zy.useNavigate(),{tva:s}=br({from:"__root__"}),o=s().slots;return f.jsx("div",{className:o.base(),children:f.jsx(Joe,{table:{data:t,filter:{value:n,set:$r(i)}},fulltext:{value:n?.fulltext,set:Br(i)},cursor:{count:e,cursor:r,textTotal:f.jsx(ne,{label:"Number of dependencies (label)"}),...Mr(i)}})})}}),Zoe=({building:t,production:e,requirement:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return f.jsx(uo,{icon:Fn,textTitle:f.jsx(ne,{label:"Production requirements (label)"}),textSubTitle:f.jsxs(f.Fragment,{children:[f.jsx(At,{icon:Bi,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:i,id:t.id}}),f.jsx(At,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:i,id:t.id},search:{zoomToId:t.id},children:t.name}),f.jsx("div",{children:e.name})]}),...r,children:n.length>0?n.map(s=>f.jsx(wM,{requirement:s},s.id)):f.jsx("div",{className:Sn(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:f.jsx(ne,{label:"There are no requirements. (label)"})})})},TM=zt("/$locale/apps/derivean/map/building/$id/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{id:n,productionId:r}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","production",r],async queryFn(){return e.transaction().execute(async i=>ri({select:i.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",s=>s.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",n)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",r).orderBy("r.name","asc"),output:$.object({id:$.string().min(1),name:$.string().min(1),amount:$.number().nonnegative(),available:$.number().nonnegative().nullish(),passive:js()})}))}})}},component(){const{building:t}=hi({from:"/$locale/apps/derivean/map/building/$id"}),{production:e}=hi({from:"/$locale/apps/derivean/map/building/$id/production/$productionId"}),{requirement:n}=TM.useLoaderData();return f.jsx(Zoe,{building:t,production:e,requirement:n})}}),MN=sJ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>dN}),Yoe=lJ.update({id:"/",path:"/",getParentRoute:()=>dN}),Xoe=cJ.update({id:"/",path:"/",getParentRoute:()=>MN}),sc=dJ.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>MN}),Mo=hJ.update({id:"/root",path:"/root",getParentRoute:()=>sc}),vf=YE.update({id:"/map",path:"/map",getParentRoute:()=>sc}),Am=mre.update({id:"/game",path:"/game",getParentRoute:()=>sc}),eae=xre.update({id:"/",path:"/",getParentRoute:()=>Mo}),tae=wre.update({id:"/",path:"/",getParentRoute:()=>vf}),nae=_re.update({id:"/",path:"/",getParentRoute:()=>Am}),rae=e1.update({id:"/editor",path:"/editor",getParentRoute:()=>Mo}),iae=Kie.update({id:"/public/register",path:"/public/register",getParentRoute:()=>sc}),sae=Gie.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>sc}),oae=Xie.update({id:"/public/login",path:"/public/login",getParentRoute:()=>sc}),aae=nM.update({id:"/construction",path:"/construction",getParentRoute:()=>vf}),lae=rM.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>sc}),cae=$y.update({id:"/user/list",path:"/user/list",getParentRoute:()=>Mo}),$N=iM.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>Mo}),uae=By.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>Mo}),dae=zy.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>Mo}),RM=lM.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>Mo}),fae=Wy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Mo}),oc=pM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Mo}),BN=wse.update({id:"/route/$id",path:"/route/$id",getParentRoute:()=>vf}),Ga=_se.update({id:"/building/$id",path:"/building/$id",getParentRoute:()=>vf}),OM=Sse.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>vf}),pae=Vy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Am}),xf=hM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Am}),hae=Cse.update({id:"/view",path:"/view",getParentRoute:()=>$N}),mae=Tse.update({id:"/view",path:"/view",getParentRoute:()=>RM}),ox=mM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Mo}),gae=gM.update({id:"/view",path:"/view",getParentRoute:()=>oc}),yae=Pp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>oc}),bae=Fp.update({id:"/production",path:"/production",getParentRoute:()=>oc}),vae=Dp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>oc}),xae=yM.update({id:"/edit",path:"/edit",getParentRoute:()=>oc}),wae=Lp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>oc}),_ae=Mp.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>oc}),Sae=bM.update({id:"/resources",path:"/resources",getParentRoute:()=>BN}),Eae=vM.update({id:"/construction",path:"/construction",getParentRoute:()=>BN}),Nae=soe.update({id:"/view",path:"/view",getParentRoute:()=>Ga}),kae=xM.update({id:"/routes",path:"/routes",getParentRoute:()=>Ga}),Iae=$p.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Ga}),Cae=_M.update({id:"/requirements",path:"/requirements",getParentRoute:()=>OM}),ax=SM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Am}),Tae=hoe.update({id:"/view",path:"/view",getParentRoute:()=>xf}),Rae=Uy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>xf}),Oae=Hy.update({id:"/production",path:"/production",getParentRoute:()=>xf}),jae=Qy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>xf}),qae=Ky.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>xf}),Aae=Bp.update({id:"/building/list",path:"/building/list",getParentRoute:()=>$N}),Pae=zp.update({id:"/resources",path:"/resources",getParentRoute:()=>ox}),Fae=Wp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ox}),Dae=Vp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>ox}),Lae=NM.update({id:"/route/priority",path:"/route/priority",getParentRoute:()=>Ga}),Mae=kM.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Ga}),$ae=IM.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Ga}),jM=Boe.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Ga}),Bae=CM.update({id:"/construction/requirements",path:"/construction/requirements",getParentRoute:()=>Ga}),zae=Gy.update({id:"/resources",path:"/resources",getParentRoute:()=>ax}),Wae=Jy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ax}),Vae=Zy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>ax}),Uae=TM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>jM}),Hae={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:qae,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:jae,LocaleAppsDeriveanGameBlueprintIdProductionRoute:Oae,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:Rae,LocaleAppsDeriveanGameBlueprintIdViewRoute:Tae},Qae=xf._addFileChildren(Hae),Kae={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:Vae,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:Wae,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:zae},Gae=ax._addFileChildren(Kae),Jae={LocaleAppsDeriveanGameIndexRoute:nae,LocaleAppsDeriveanGameBlueprintIdRoute:Qae,LocaleAppsDeriveanGameBlueprintListRoute:pae,LocaleAppsDeriveanGameBlueprintProductionIdRoute:Gae},Zae=Am._addFileChildren(Jae),Yae={LocaleAppsDeriveanMapBlueprintIdRequirementsRoute:Cae},Xae=OM._addFileChildren(Yae),ele={LocaleAppsDeriveanMapBuildingIdProductionProductionIdRequirementsRoute:Uae},tle=jM._addFileChildren(ele),nle={LocaleAppsDeriveanMapBuildingIdInventoryRoute:Iae,LocaleAppsDeriveanMapBuildingIdRoutesRoute:kae,LocaleAppsDeriveanMapBuildingIdViewRoute:Nae,LocaleAppsDeriveanMapBuildingIdConstructionRequirementsRoute:Bae,LocaleAppsDeriveanMapBuildingIdProductionProductionIdRoute:tle,LocaleAppsDeriveanMapBuildingIdProductionListRoute:$ae,LocaleAppsDeriveanMapBuildingIdProductionQueueRoute:Mae,LocaleAppsDeriveanMapBuildingIdRoutePriorityRoute:Lae},rle=Ga._addFileChildren(nle),ile={LocaleAppsDeriveanMapRouteIdConstructionRoute:Eae,LocaleAppsDeriveanMapRouteIdResourcesRoute:Sae},sle=BN._addFileChildren(ile),ole={LocaleAppsDeriveanMapConstructionRoute:aae,LocaleAppsDeriveanMapIndexRoute:tae,LocaleAppsDeriveanMapBlueprintIdRoute:Xae,LocaleAppsDeriveanMapBuildingIdRoute:rle,LocaleAppsDeriveanMapRouteIdRoute:sle},ale=vf._addFileChildren(ole),lle={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:_ae,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:wae,LocaleAppsDeriveanRootBlueprintIdEditRoute:xae,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:vae,LocaleAppsDeriveanRootBlueprintIdProductionRoute:bae,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:yae,LocaleAppsDeriveanRootBlueprintIdViewRoute:gae},cle=oc._addFileChildren(lle),ule={LocaleAppsDeriveanRootResourceIdViewRoute:mae},dle=RM._addFileChildren(ule),fle={LocaleAppsDeriveanRootUserIdViewRoute:hae,LocaleAppsDeriveanRootUserIdBuildingListRoute:Aae},ple=$N._addFileChildren(fle),hle={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:Dae,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:Fae,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:Pae},mle=ox._addFileChildren(hle),gle={LocaleAppsDeriveanRootEditorRoute:rae,LocaleAppsDeriveanRootIndexRoute:eae,LocaleAppsDeriveanRootBlueprintIdRoute:cle,LocaleAppsDeriveanRootBlueprintListRoute:fae,LocaleAppsDeriveanRootResourceIdRoute:dle,LocaleAppsDeriveanRootResourceListRoute:dae,LocaleAppsDeriveanRootTagListRoute:uae,LocaleAppsDeriveanRootUserIdRoute:ple,LocaleAppsDeriveanRootUserListRoute:cae,LocaleAppsDeriveanRootBlueprintProductionIdRoute:mle},yle=Mo._addFileChildren(gle),ble={LocaleAppsDeriveanGameRoute:Zae,LocaleAppsDeriveanMapRoute:ale,LocaleAppsDeriveanRootRoute:yle,LocaleAppsDeriveanDbSchemaRoute:lae,LocaleAppsDeriveanPublicLoginRoute:oae,LocaleAppsDeriveanPublicLogoutRoute:sae,LocaleAppsDeriveanPublicRegisterRoute:iae},vle=sc._addFileChildren(ble),xle={LocaleIndexRoute:Xoe,LocaleAppsDeriveanRoute:vle},wle=MN._addFileChildren(xle),_le={IndexRoute:Yoe,LocaleRoute:wle},Sle=dN._addFileChildren(_le)._addFileTypes(),qM=new rB({defaultOptions:{queries:{placeholderData:V$}}}),Ele=e4({routeTree:Sle,context:{queryClient:qM,tva:B7,async session(){return vm.parse(null)},kysely:jt},defaultPendingComponent:CG,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),g3=document.getElementById("app");oU({limit:{maxRequests:10,perMilliseconds:100}});g3.innerHTML||nJ.createRoot(g3).render(f.jsx(cB,{client:qM,children:f.jsx(k4,{router:Ele})}))})();