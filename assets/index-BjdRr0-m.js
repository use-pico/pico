(async()=>{function S7(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Kp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ol(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function E7(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var A3={exports:{}},g_={},C3={exports:{}},Gr={};var oO;function T7(){if(oO)return Gr;oO=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function h(Z){return Z===null||typeof Z!="object"?null:(Z=d&&Z[d]||Z["@@iterator"],typeof Z=="function"?Z:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function b(Z,fe,ge){this.props=Z,this.context=fe,this.refs=x,this.updater=ge||p}b.prototype.isReactComponent={},b.prototype.setState=function(Z,fe){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,fe,"setState")},b.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function y(){}y.prototype=b.prototype;function E(Z,fe,ge){this.props=Z,this.context=fe,this.refs=x,this.updater=ge||p}var T=E.prototype=new y;T.constructor=E,g(T,b.prototype),T.isPureReactComponent=!0;var I=Array.isArray,N=Object.prototype.hasOwnProperty,k={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function L(Z,fe,ge){var ce,ye={},be=null,Ee=null;if(fe!=null)for(ce in fe.ref!==void 0&&(Ee=fe.ref),fe.key!==void 0&&(be=""+fe.key),fe)N.call(fe,ce)&&!q.hasOwnProperty(ce)&&(ye[ce]=fe[ce]);var Me=arguments.length-2;if(Me===1)ye.children=ge;else if(1<Me){for(var qe=Array(Me),Ue=0;Ue<Me;Ue++)qe[Ue]=arguments[Ue+2];ye.children=qe}if(Z&&Z.defaultProps)for(ce in Me=Z.defaultProps,Me)ye[ce]===void 0&&(ye[ce]=Me[ce]);return{$$typeof:n,type:Z,key:be,ref:Ee,props:ye,_owner:k.current}}function R(Z,fe){return{$$typeof:n,type:Z.type,key:fe,ref:Z.ref,props:Z.props,_owner:Z._owner}}function P(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===n}function F(Z){var fe={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ge){return fe[ge]})}var z=/\/+/g;function V(Z,fe){return typeof Z=="object"&&Z!==null&&Z.key!=null?F(""+Z.key):fe.toString(36)}function W(Z,fe,ge,ce,ye){var be=typeof Z;(be==="undefined"||be==="boolean")&&(Z=null);var Ee=!1;if(Z===null)Ee=!0;else switch(be){case"string":case"number":Ee=!0;break;case"object":switch(Z.$$typeof){case n:case e:Ee=!0}}if(Ee)return Ee=Z,ye=ye(Ee),Z=ce===""?"."+V(Ee,0):ce,I(ye)?(ge="",Z!=null&&(ge=Z.replace(z,"$&/")+"/"),W(ye,fe,ge,"",function(Ue){return Ue})):ye!=null&&(P(ye)&&(ye=R(ye,ge+(!ye.key||Ee&&Ee.key===ye.key?"":(""+ye.key).replace(z,"$&/")+"/")+Z)),fe.push(ye)),1;if(Ee=0,ce=ce===""?".":ce+":",I(Z))for(var Me=0;Me<Z.length;Me++){be=Z[Me];var qe=ce+V(be,Me);Ee+=W(be,fe,ge,qe,ye)}else if(qe=h(Z),typeof qe=="function")for(Z=qe.call(Z),Me=0;!(be=Z.next()).done;)be=be.value,qe=ce+V(be,Me++),Ee+=W(be,fe,ge,qe,ye);else if(be==="object")throw fe=String(Z),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.");return Ee}function Q(Z,fe,ge){if(Z==null)return Z;var ce=[],ye=0;return W(Z,ce,"","",function(be){return fe.call(ge,be,ye++)}),ce}function X(Z){if(Z._status===-1){var fe=Z._result;fe=fe(),fe.then(function(ge){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ge)},function(ge){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ge)}),Z._status===-1&&(Z._status=0,Z._result=fe)}if(Z._status===1)return Z._result.default;throw Z._result}var re={current:null},G={transition:null},Y={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:G,ReactCurrentOwner:k};function te(){throw Error("act(...) is not supported in production builds of React.")}return Gr.Children={map:Q,forEach:function(Z,fe,ge){Q(Z,function(){fe.apply(this,arguments)},ge)},count:function(Z){var fe=0;return Q(Z,function(){fe++}),fe},toArray:function(Z){return Q(Z,function(fe){return fe})||[]},only:function(Z){if(!P(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Gr.Component=b,Gr.Fragment=t,Gr.Profiler=i,Gr.PureComponent=E,Gr.StrictMode=r,Gr.Suspense=l,Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Gr.act=te,Gr.cloneElement=function(Z,fe,ge){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var ce=g({},Z.props),ye=Z.key,be=Z.ref,Ee=Z._owner;if(fe!=null){if(fe.ref!==void 0&&(be=fe.ref,Ee=k.current),fe.key!==void 0&&(ye=""+fe.key),Z.type&&Z.type.defaultProps)var Me=Z.type.defaultProps;for(qe in fe)N.call(fe,qe)&&!q.hasOwnProperty(qe)&&(ce[qe]=fe[qe]===void 0&&Me!==void 0?Me[qe]:fe[qe])}var qe=arguments.length-2;if(qe===1)ce.children=ge;else if(1<qe){Me=Array(qe);for(var Ue=0;Ue<qe;Ue++)Me[Ue]=arguments[Ue+2];ce.children=Me}return{$$typeof:n,type:Z.type,key:ye,ref:be,props:ce,_owner:Ee}},Gr.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:s,_context:Z},Z.Consumer=Z},Gr.createElement=L,Gr.createFactory=function(Z){var fe=L.bind(null,Z);return fe.type=Z,fe},Gr.createRef=function(){return{current:null}},Gr.forwardRef=function(Z){return{$$typeof:a,render:Z}},Gr.isValidElement=P,Gr.lazy=function(Z){return{$$typeof:c,_payload:{_status:-1,_result:Z},_init:X}},Gr.memo=function(Z,fe){return{$$typeof:u,type:Z,compare:fe===void 0?null:fe}},Gr.startTransition=function(Z){var fe=G.transition;G.transition={};try{Z()}finally{G.transition=fe}},Gr.unstable_act=te,Gr.useCallback=function(Z,fe){return re.current.useCallback(Z,fe)},Gr.useContext=function(Z){return re.current.useContext(Z)},Gr.useDebugValue=function(){},Gr.useDeferredValue=function(Z){return re.current.useDeferredValue(Z)},Gr.useEffect=function(Z,fe){return re.current.useEffect(Z,fe)},Gr.useId=function(){return re.current.useId()},Gr.useImperativeHandle=function(Z,fe,ge){return re.current.useImperativeHandle(Z,fe,ge)},Gr.useInsertionEffect=function(Z,fe){return re.current.useInsertionEffect(Z,fe)},Gr.useLayoutEffect=function(Z,fe){return re.current.useLayoutEffect(Z,fe)},Gr.useMemo=function(Z,fe){return re.current.useMemo(Z,fe)},Gr.useReducer=function(Z,fe,ge){return re.current.useReducer(Z,fe,ge)},Gr.useRef=function(Z){return re.current.useRef(Z)},Gr.useState=function(Z){return re.current.useState(Z)},Gr.useSyncExternalStore=function(Z,fe,ge){return re.current.useSyncExternalStore(Z,fe,ge)},Gr.useTransition=function(){return re.current.useTransition()},Gr.version="18.3.1",Gr}var aO;function Om(){return aO||(aO=1,C3.exports=T7()),C3.exports}var lO;function M7(){if(lO)return g_;lO=1;var n=Om(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,d={},h=null,p=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:e,type:a,key:h,ref:p,props:d,_owner:i.current}}return g_.Fragment=t,g_.jsx=o,g_.jsxs=o,g_}var cO;function I7(){return cO||(cO=1,A3.exports=M7()),A3.exports}var S=I7(),pv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gm=typeof window>"u"||"Deno"in globalThis;function nc(){}function A7(n,e){return typeof n=="function"?n(e):n}function bC(n){return typeof n=="number"&&n>=0&&n!==1/0}function tU(n,e){return Math.max(n+(e||0)-Date.now(),0)}function My(n,e){return typeof n=="function"?n(e):n}function qc(n,e){return typeof n=="function"?n(e):n}function uO(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==sN(o,e.options))return!1}else if(!Rx(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function dO(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(ym(e.options.mutationKey)!==ym(s))return!1}else if(!Rx(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function sN(n,e){return(e?.queryKeyHashFn||ym)(n)}function ym(n){return JSON.stringify(n,(e,t)=>wC(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Rx(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Rx(n[t],e[t])):!1}function oN(n,e){if(n===e)return n;const t=fO(n)&&fO(e);if(t||wC(n)&&wC(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let u=0;u<o;u++){const c=t?u:s[u];(!t&&r.includes(c)||t)&&n[c]===void 0&&e[c]===void 0?(a[c]=void 0,l++):(a[c]=oN(n[c],e[c]),a[c]===n[c]&&n[c]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function TS(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function fO(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function wC(n){if(!hO(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!hO(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function hO(n){return Object.prototype.toString.call(n)==="[object Object]"}function C7(n){return new Promise(e=>{setTimeout(e,n)})}function SC(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?oN(n,e):e}function R7(n){return n}function N7(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function P7(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var aN=Symbol();function nU(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===aN?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var k7=class extends pv{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!gm&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},lN=new k7,O7=class extends pv{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!gm&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},MS=new O7;function EC(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function L7(n){return Math.min(1e3*2**n,3e4)}function rU(n){return(n??"online")==="online"?MS.isOnline():!0}var iU=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function R3(n){return n instanceof iU}function sU(n){let e=!1,t=0,r=!1,i;const s=EC(),o=x=>{r||(h(new iU(x)),n.abort?.())},a=()=>{e=!0},l=()=>{e=!1},u=()=>lN.isFocused()&&(n.networkMode==="always"||MS.isOnline())&&n.canRun(),c=()=>rU(n.networkMode)&&n.canRun(),d=x=>{r||(r=!0,n.onSuccess?.(x),i?.(),s.resolve(x))},h=x=>{r||(r=!0,n.onError?.(x),i?.(),s.reject(x))},p=()=>new Promise(x=>{i=b=>{(r||u())&&x(b)},n.onPause?.()}).then(()=>{i=void 0,r||n.onContinue?.()}),g=()=>{if(r)return;let x;const b=t===0?n.initialPromise:void 0;try{x=b??n.fn()}catch(y){x=Promise.reject(y)}Promise.resolve(x).then(d).catch(y=>{if(r)return;const E=n.retry??(gm?0:3),T=n.retryDelay??L7,I=typeof T=="function"?T(t,y):T,N=E===!0||typeof E=="number"&&t<E||typeof E=="function"&&E(t,y);if(e||!N){h(y);return}t++,n.onFail?.(t,y),C7(I).then(()=>u()?void 0:p()).then(()=>{e?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?g():p().then(g),s)}}function D7(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Ks=D7(),oU=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bC(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(gm?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},F7=class extends oU{#e;#t;#n;#r;#i;#c;#a;constructor(n){super(),this.#a=!1,this.#c=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#r=n.client,this.#n=this.#r.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=q7(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(n){this.options={...this.#c,...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(n,e){const t=SC(this.state.data,n,this.options);return this.#o({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#o({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#i?.promise;return this.#i?.cancel(n),e?e.then(nc).catch(nc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>qc(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!tU(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(n,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(n&&this.setOptions(n),!this.options.queryFn){const a=this.observers.find(l=>l.options.queryFn);a&&this.setOptions(a.options)}const t=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},i=()=>{const a=nU(this.options,e),l={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(l),this.#a=!1,this.options.persister?this.options.persister(a,l,this):a(l)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=a=>{R3(a)&&a.silent||this.#o({type:"error",error:a}),R3(a)||(this.#n.config.onError?.(a,this),this.#n.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#i=sU({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:t.abort.bind(t),onSuccess:a=>{if(a===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(l){o(l);return}this.#n.config.onSuccess?.(a,this),this.#n.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:o,onFail:(a,l)=>{this.#o({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#i.start()}#o(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...aU(t.data,this.options),fetchMeta:n.meta??null};case"success":return{...t,data:n.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=n.error;return R3(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),Ks.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:n})})}};function aU(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rU(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function q7(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var j7=class extends pv{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,i=e.queryHash??sN(r,e);let s=this.get(i);return s||(s=new F7({client:n,queryKey:r,queryHash:i,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(s)),s}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Ks.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>uO(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>uO(n,t)):e}notify(n){Ks.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Ks.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Ks.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},B7=class extends oU{#e;#t;#n;constructor(n){super(),this.mutationId=n.mutationId,this.#t=n.mutationCache,this.#e=[],this.state=n.state||lU(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#e.includes(n)||(this.#e.push(n),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#e=this.#e.filter(e=>e!==n),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){this.#n=sU({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",t=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:n,isPaused:t}),await this.#t.config.onMutate?.(n,this);const i=await this.options.onMutate?.(n);i!==this.state.context&&this.#r({type:"pending",context:i,variables:n,isPaused:t})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,n,this.state.context,this),await this.options.onSuccess?.(r,n,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,n,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,n,this.state.context,this),await this.options.onError?.(r,n,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,n,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ks.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(n)}),this.#t.notify({mutation:this,type:"updated",action:n})})}};function lU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var U7=class extends pv{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(n,e,t){const r=new B7({mutationCache:this,mutationId:++this.#n,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){this.#e.add(n);const e=hw(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=hw(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const r=t.indexOf(n);r!==-1&&t.splice(r,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=hw(n);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===n}else return!0}runNext(n){const e=hw(n);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==n&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ks.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>dO(e,t))}findAll(n={}){return this.getAll().filter(e=>dO(n,e))}notify(n){Ks.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Ks.batch(()=>Promise.all(n.map(e=>e.continue().catch(nc))))}};function hw(n){return n.options.scope?.id}function pO(n){return{onFetch:(e,t)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let c=!1;const d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?c=!0:e.signal.addEventListener("abort",()=>{c=!0}),e.signal)})},h=nU(e.options,e.fetchOptions),p=async(g,x,b)=>{if(c)return Promise.reject();if(x==null&&g.pages.length)return Promise.resolve(g);const y={client:e.client,queryKey:e.queryKey,pageParam:x,direction:b?"backward":"forward",meta:e.options.meta};d(y);const E=await h(y),{maxPages:T}=e.options,I=b?P7:N7;return{pages:I(g.pages,E,T),pageParams:I(g.pageParams,x,T)}};if(i&&s.length){const g=i==="backward",x=g?z7:mO,b={pages:s,pageParams:o},y=x(r,b);a=await p(b,y,g)}else{const g=n??s.length;do{const x=l===0?o[0]??r.initialPageParam:mO(r,a);if(l>0&&x==null)break;a=await p(a,x),l++}while(l<g)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=u}}}function mO(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function z7(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var V7=class{#e;#t;#n;#r;#i;#c;#a;#o;constructor(n={}){this.#e=n.queryCache||new j7,this.#t=n.mutationCache||new U7,this.#n=n.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#c=0}mount(){this.#c++,this.#c===1&&(this.#a=lN.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=MS.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#c--,this.#c===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(My(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=this.#e.get(r.queryHash)?.state.data,o=A7(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Ks.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Ks.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e,r={type:"active",...n};return Ks.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Ks.batch(()=>this.#e.findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(nc).catch(nc)}invalidateQueries(n,e={}){return Ks.batch(()=>{if(this.#e.findAll(n).forEach(r=>{r.invalidate()}),n?.refetchType==="none")return Promise.resolve();const t={...n,type:n?.refetchType??n?.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Ks.batch(()=>this.#e.findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(nc)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(nc)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(My(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(nc).catch(nc)}fetchInfiniteQuery(n){return n.behavior=pO(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(nc).catch(nc)}ensureInfiniteQueryData(n){return n.behavior=pO(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return MS.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#r.set(ym(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#r.values()],t={};return e.forEach(r=>{Rx(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){this.#i.set(ym(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#i.values()];let t={};return e.forEach(r=>{Rx(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=sN(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===aN&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},W7=class extends pv{constructor(n,e){super(),this.options=e,this.#e=n,this.#o=null,this.#a=EC(),this.options.experimental_prefetchInRender||this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#c;#a;#o;#u;#l;#s;#f;#g;#h;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),gO(this.#t,this.options)?this.#v():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return TC(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return TC(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#E(),this.#t.removeObserver(this)}setOptions(n,e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qc(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#y(),this.#t.setOptions(this.options),t._defaulted&&!TS(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&yO(this.#t,r,this.options,t)&&this.#v(),this.updateResult(e),i&&(this.#t!==r||qc(this.options.enabled,this.#t)!==qc(t.enabled,this.#t)||My(this.options.staleTime,this.#t)!==My(t.staleTime,this.#t))&&this.#m();const s=this.#x();i&&(this.#t!==r||qc(this.options.enabled,this.#t)!==qc(t.enabled,this.#t)||s!==this.#h)&&this.#b(s)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return H7(this,t)&&(this.#r=t,this.#c=this.options,this.#i=this.#t.state),t}getCurrentResult(){return this.#r}trackResult(n,e){const t={};return Object.keys(n).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),n[r])})}),t}trackProp(n){this.#p.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#v({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#v(n){this.#y();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(nc)),e}#m(){this.#w();const n=My(this.options.staleTime,this.#t);if(gm||this.#r.isStale||!bC(n))return;const t=tU(this.#r.dataUpdatedAt,n)+1;this.#f=setTimeout(()=>{this.#r.isStale||this.updateResult()},t)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(n){this.#E(),this.#h=n,!(gm||qc(this.options.enabled,this.#t)===!1||!bC(this.#h)||this.#h===0)&&(this.#g=setInterval(()=>{(this.options.refetchIntervalInBackground||lN.isFocused())&&this.#v()},this.#h))}#_(){this.#m(),this.#b(this.#x())}#w(){this.#f&&(clearTimeout(this.#f),this.#f=void 0)}#E(){this.#g&&(clearInterval(this.#g),this.#g=void 0)}createResult(n,e){const t=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#c,l=n!==t?n.state:this.#n,{state:u}=n;let c={...u},d=!1,h;if(e._optimisticResults){const q=this.hasListeners(),L=!q&&gO(n,e),R=q&&yO(n,t,e,r);(L||R)&&(c={...c,...aU(u.data,n.options)}),e._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:x}=c;if(e.select&&c.data!==void 0)if(i&&c.data===s?.data&&e.select===this.#u)h=this.#l;else try{this.#u=e.select,h=e.select(c.data),h=SC(i?.data,h,e),this.#l=h,this.#o=null}catch(q){this.#o=q}else h=c.data;if(e.placeholderData!==void 0&&h===void 0&&x==="pending"){let q;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)q=i.data;else if(q=typeof e.placeholderData=="function"?e.placeholderData(this.#s?.state.data,this.#s):e.placeholderData,e.select&&q!==void 0)try{q=e.select(q),this.#o=null}catch(L){this.#o=L}q!==void 0&&(x="success",h=SC(i?.data,q,e),d=!0)}this.#o&&(p=this.#o,h=this.#l,g=Date.now(),x="error");const b=c.fetchStatus==="fetching",y=x==="pending",E=x==="error",T=y&&b,I=h!==void 0,k={status:x,fetchStatus:c.fetchStatus,isPending:y,isSuccess:x==="success",isError:E,isInitialLoading:T,isLoading:T,data:h,dataUpdatedAt:c.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>l.dataUpdateCount||c.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!y,isLoadingError:E&&!I,isPaused:c.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:E&&I,isStale:cN(n,e),refetch:this.refetch,promise:this.#a};if(this.options.experimental_prefetchInRender){const q=P=>{k.status==="error"?P.reject(k.error):k.data!==void 0&&P.resolve(k.data)},L=()=>{const P=this.#a=k.promise=EC();q(P)},R=this.#a;switch(R.status){case"pending":n.queryHash===t.queryHash&&q(R);break;case"fulfilled":(k.status==="error"||k.data!==R.value)&&L();break;case"rejected":(k.status!=="error"||k.error!==R.reason)&&L();break}}return k}updateResult(n){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#c=this.options,this.#i.data!==void 0&&(this.#s=this.#t),TS(t,e))return;this.#r=t;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#p.size)return!0;const a=new Set(o??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(l=>{const u=l;return this.#r[u]!==e[u]&&a.has(u)})};n?.listeners!==!1&&i()&&(r.listeners=!0),this.#C({...r,...n})}#y(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#n=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#C(n){Ks.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function $7(n,e){return qc(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function gO(n,e){return $7(n,e)||n.state.data!==void 0&&TC(n,e,e.refetchOnMount)}function TC(n,e,t){if(qc(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&cN(n,e)}return!1}function yO(n,e,t,r){return(n!==e||qc(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&cN(n,t)}function cN(n,e){return qc(e.enabled,n)!==!1&&n.isStaleByTime(My(e.staleTime,n))}function H7(n,e){return!TS(n.getCurrentResult(),e)}var G7=class extends pv{#e;#t=void 0;#n;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),TS(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&ym(t.mutationKey)!==ym(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#c(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#c()}mutate(e,t){return this.#r=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??lU();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#c(e){Ks.batch(()=>{if(this.#r&&this.hasListeners()){const t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,r),this.#r.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,r),this.#r.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(t=>{t(this.#t)})})}},ie=Om();const di=ol(ie),X7=S7({__proto__:null,default:di},[ie]);var cU=ie.createContext(void 0),w2=n=>{const e=ie.useContext(cU);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},K7=({client:n,children:e})=>(ie.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),S.jsx(cU.Provider,{value:n,children:e})),uU=ie.createContext(!1),Q7=()=>ie.useContext(uU);uU.Provider;function Y7(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var J7=ie.createContext(Y7()),Z7=()=>ie.useContext(J7);function dU(n,e){return typeof n=="function"?n(...e):!!n}function MC(){}var e9=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},t9=n=>{ie.useEffect(()=>{n.clearReset()},[n])},n9=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(i&&n.data===void 0||dU(t,[n.error,r])),r9=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},i9=(n,e)=>n.isLoading&&n.isFetching&&!e,s9=(n,e)=>n?.suspense&&e.isPending,vO=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function o9(n,e,t){const r=w2(),i=Q7(),s=Z7(),o=r.defaultQueryOptions(n);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",r9(o),e9(o,s),t9(s);const a=!r.getQueryCache().get(o.queryHash),[l]=ie.useState(()=>new e(r,o)),u=l.getOptimisticResult(o),c=!i&&n.subscribed!==!1;if(ie.useSyncExternalStore(ie.useCallback(d=>{const h=c?l.subscribe(Ks.batchCalls(d)):MC;return l.updateResult(),h},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),ie.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),s9(o,u))throw vO(o,l,s);if(n9({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!gm&&i9(u,i)&&(a?vO(o,l,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(MC).finally(()=>{l.updateResult()}),o.notifyOnChangeProps?u:l.trackResult(u)}function IS(n,e){return o9(n,W7)}function _O(n,e){return n.findAll(e.filters).map(t=>e.select?e.select(t):t.state)}function a9(n={},e){const t=w2().getMutationCache(),r=ie.useRef(n),i=ie.useRef(null);return i.current||(i.current=_O(t,n)),ie.useEffect(()=>{r.current=n}),ie.useSyncExternalStore(ie.useCallback(s=>t.subscribe(()=>{const o=oN(i.current,_O(t,r.current));i.current!==o&&(i.current=o,Ks.schedule(s))}),[t]),()=>i.current,()=>i.current)}function or(n,e){const t=w2(),[r]=ie.useState(()=>new G7(t,n));ie.useEffect(()=>{r.setOptions(n)},[r,n]);const i=ie.useSyncExternalStore(ie.useCallback(o=>r.subscribe(Ks.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=ie.useCallback((o,a)=>{r.mutate(o,a).catch(MC)},[r]);if(i.error&&dU(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}var l9="Invariant failed";function Vc(n,e){if(!n)throw new Error(l9)}function Iy(n){const e=n.resolvedLocation,t=n.location,r=e?.pathname!==t.pathname,i=e?.href!==t.href,s=e?.hash!==t.hash;return{fromLocation:e,toLocation:t,pathChanged:r,hrefChanged:i,hashChanged:s}}const c9="Error preloading route! ☝️";function sx(n){return n[n.length-1]}function u9(n){return typeof n=="function"}function Qp(n,e){return u9(n)?n(e):n}function IC(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function ec(n,e){if(n===e)return n;const t=e,r=bO(n)&&bO(t);if(r||AS(n)&&AS(t)){const i=r?n:Object.keys(n),s=i.length,o=r?t:Object.keys(t),a=o.length,l=r?[]:{};let u=0;for(let c=0;c<a;c++){const d=r?c:o[c];(!r&&i.includes(d)||r)&&n[d]===void 0&&t[d]===void 0?(l[d]=void 0,u++):(l[d]=ec(n[d],t[d]),l[d]===n[d]&&n[d]!==void 0&&u++)}return s===a&&u===s?n:l}return t}function AS(n){if(!xO(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!xO(t)||!t.hasOwnProperty("isPrototypeOf"))}function xO(n){return Object.prototype.toString.call(n)==="[object Object]"}function bO(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function wO(n,e){let t=Object.keys(n);return e&&(t=t.filter(r=>n[r]!==void 0)),t}function Ay(n,e,t){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(AS(n)&&AS(e)){const r=t?.ignoreUndefined??!0,i=wO(n,r),s=wO(e,r);return!t?.partial&&i.length!==s.length?!1:s.every(o=>Ay(n[o],e[o],t))}return Array.isArray(n)&&Array.isArray(e)?n.length!==e.length?!1:!n.some((r,i)=>!Ay(r,e[i],t)):!1}function iy(n){let e,t;const r=new Promise((i,s)=>{e=i,t=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),n?.(i)},r.reject=i=>{r.status="rejected",t(i)},r}function Vd(n){return S2(n.filter(e=>e!==void 0).join("/"))}function S2(n){return n.replace(/\/{2,}/g,"/")}function uN(n){return n==="/"?n:n.replace(/^\/{1,}/,"")}function Yp(n){return n==="/"?n:n.replace(/\/{1,}$/,"")}function d9(n){return Yp(uN(n))}function CS(n,e){return n.endsWith("/")&&n!=="/"&&n!==`${e}/`?n.slice(0,-1):n}function f9(n,e,t){return CS(n,t)===CS(e,t)}function h9({basepath:n,base:e,to:t,trailingSlash:r="never",caseSensitive:i}){var s,o;e=RS(n,e,i),t=RS(n,t,i);let a=$y(e);const l=$y(t);a.length>1&&((s=sx(a))==null?void 0:s.value)==="/"&&a.pop(),l.forEach((c,d)=>{c.value==="/"?d?d===l.length-1&&a.push(c):a=[c]:c.value===".."?a.pop():c.value==="."||a.push(c)}),a.length>1&&(((o=sx(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const u=Vd([n,...a.map(c=>c.value)]);return S2(u)}function $y(n){if(!n)return[];n=S2(n);const e=[];if(n.slice(0,1)==="/"&&(n=n.substring(1),e.push({type:"pathname",value:"/"})),!n)return e;const t=n.split("/").filter(Boolean);return e.push(...t.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),n.slice(-1)==="/"&&(n=n.substring(1),e.push({type:"pathname",value:"/"})),e}function pw({path:n,params:e,leaveWildcards:t,leaveParams:r,decodeCharMap:i}){const s=$y(n);function o(u){const c=e[u],d=typeof c=="string";return["*","_splat"].includes(u)?d?encodeURI(c):c:d?p9(c,i):c}const a={},l=Vd(s.map(u=>{if(u.type==="wildcard"){a._splat=e._splat;const c=o("_splat");return t?`${u.value}${c??""}`:c}if(u.type==="param"){const c=u.value.substring(1);if(a[c]=e[c],r){const d=o(u.value);return`${u.value}${d??""}`}return o(c)??"undefined"}return u.value}));return{usedParams:a,interpolatedPath:l}}function p9(n,e){let t=encodeURIComponent(n);if(e)for(const[r,i]of e)t=t.replaceAll(r,i);return t}function mw(n,e,t){const r=m9(n,e,t);if(!(t.to&&!r))return r??{}}function RS(n,e,t=!1){const r=t?n:n.toLowerCase(),i=t?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<n.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(n.length);default:return e}}function m9(n,e,t){if(n!=="/"&&!e.startsWith(n))return;e=RS(n,e,t.caseSensitive);const r=RS(n,`${t.to??"$"}`,t.caseSensitive),i=$y(e),s=$y(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let l=0;l<Math.max(i.length,s.length);l++){const u=i[l],c=s[l],d=l>=i.length-1,h=l>=s.length-1;if(c){if(c.type==="wildcard"){const p=decodeURI(Vd(i.slice(l).map(g=>g.value)));return o["*"]=p,o._splat=p,!0}if(c.type==="pathname"){if(c.value==="/"&&!u?.value)return!0;if(u){if(t.caseSensitive){if(c.value!==u.value)return!1}else if(c.value.toLowerCase()!==u.value.toLowerCase())return!1}}if(!u)return!1;if(c.type==="param"){if(u.value==="/")return!1;u.value.charAt(0)!=="$"&&(o[c.value.substring(1)]=decodeURIComponent(u.value))}}if(!d&&h)return o["**"]=Vd(i.slice(l+1).map(p=>p.value)),!!t.fuzzy&&c?.value!=="/"}return!0})()?o:void 0}function g9(n,e){let t,r,i,s="";for(t in n)if((i=n[t])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(t)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(t)+"="+encodeURIComponent(i);return""+s}function SO(n){if(!n)return"";const e=decodeURIComponent(n);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function y9(n,e){let t,r;const i={},s=n.split("&");for(;t=s.shift();){const o=t.indexOf("=");if(o!==-1){r=t.slice(0,o),r=decodeURIComponent(r);const a=t.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],SO(a)):i[r]=SO(a)}else r=t,r=decodeURIComponent(r),i[r]=""}return i}const Ja="__root__",v9=x9(JSON.parse),_9=b9(JSON.stringify,JSON.parse);function x9(n){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const t=y9(e);for(const r in t){const i=t[r];if(typeof i=="string")try{t[r]=n(i)}catch{}}return t}}function b9(n,e){function t(r){if(typeof r=="object"&&r!==null)try{return n(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),n(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=t(o)});const i=g9(r).toString();return i?`?${i}`:""}}const uh="__TSR_index",EO="popstate",TO="beforeunload";function fU(n){let e=n.getLocation();const t=new Set,r=o=>{e=n.getLocation(),t.forEach(a=>a({location:e,action:o}))},i=o=>{n.notifyOnIndexChange??!0?r(o):e=n.getLocation()},s=async({task:o,navigateOpts:a,...l})=>{var u,c;if(a?.ignoreBlocker??!1){o();return}const h=((u=n.getBlockers)==null?void 0:u.call(n))??[],p=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&h.length&&p)for(const g of h){const x=Nx(l.path,l.state);if(await g.blockerFn({currentLocation:e,nextLocation:x,action:l.type})){(c=n.onBlocked)==null||c.call(n);return}}o()};return{get location(){return e},get length(){return n.getLength()},subscribers:t,subscribe:o=>(t.add(o),()=>{t.delete(o)}),push:(o,a,l)=>{const u=e.state[uh];a=AC(u+1,a),s({task:()=>{n.pushState(o,a),r({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:o,state:a})},replace:(o,a,l)=>{const u=e.state[uh];a=AC(u,a),s({task:()=>{n.replaceState(o,a),r({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:o,state:a})},go:(o,a)=>{s({task:()=>{n.go(o),i({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{s({task:()=>{n.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{n.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[uh]!==0,createHref:o=>n.createHref(o),block:o=>{var a;if(!n.setBlockers)return()=>{};const l=((a=n.getBlockers)==null?void 0:a.call(n))??[];return n.setBlockers([...l,o]),()=>{var u,c;const d=((u=n.getBlockers)==null?void 0:u.call(n))??[];(c=n.setBlockers)==null||c.call(n,d.filter(h=>h!==o))}},flush:()=>{var o;return(o=n.flush)==null?void 0:o.call(n)},destroy:()=>{var o;return(o=n.destroy)==null?void 0:o.call(n)},notify:r}}function AC(n,e){return e||(e={}),{...e,key:dN(),[uh]:n}}function w9(n){var e;const t=typeof document<"u"?window:void 0,r=t.history.pushState,i=t.history.replaceState;let s=[];const o=()=>s,a=R=>s=R,l=R=>R,u=()=>Nx(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);(e=t.history.state)!=null&&e.key||t.history.replaceState({[uh]:0,key:dN()},"");let c=u(),d,h=!1,p=!1,g=!1,x=!1;const b=()=>c;let y,E;const T=()=>{y&&(L._ignoreSubscribers=!0,(y.isPush?t.history.pushState:t.history.replaceState)(y.state,"",y.href),L._ignoreSubscribers=!1,y=void 0,E=void 0,d=void 0)},I=(R,P,F)=>{const z=l(P);E||(d=c),c=Nx(P,F),y={href:z,state:F,isPush:y?.isPush||R==="push"},E||(E=Promise.resolve().then(()=>T()))},N=R=>{c=u(),L.notify({type:R})},k=async()=>{if(p){p=!1;return}const R=u(),P=R.state[uh]-c.state[uh],F=P===1,z=P===-1,V=!F&&!z||h;h=!1;const W=V?"GO":z?"BACK":"FORWARD",Q=V?{type:"GO",index:P}:{type:z?"BACK":"FORWARD"};if(g)g=!1;else{const X=o();if(typeof document<"u"&&X.length){for(const re of X)if(await re.blockerFn({currentLocation:c,nextLocation:R,action:W})){p=!0,t.history.go(1),L.notify(Q);return}}}c=u(),L.notify(Q)},q=R=>{if(x){x=!1;return}let P=!1;const F=o();if(typeof document<"u"&&F.length)for(const z of F){const V=z.enableBeforeUnload??!0;if(V===!0){P=!0;break}if(typeof V=="function"&&V()===!0){P=!0;break}}if(P)return R.preventDefault(),R.returnValue=""},L=fU({getLocation:b,getLength:()=>t.history.length,pushState:(R,P)=>I("push",R,P),replaceState:(R,P)=>I("replace",R,P),back:R=>(R&&(g=!0),x=!0,t.history.back()),forward:R=>{R&&(g=!0),x=!0,t.history.forward()},go:R=>{h=!0,t.history.go(R)},createHref:R=>l(R),flush:T,destroy:()=>{t.history.pushState=r,t.history.replaceState=i,t.removeEventListener(TO,q,{capture:!0}),t.removeEventListener(EO,k)},onBlocked:()=>{d&&c!==d&&(c=d)},getBlockers:o,setBlockers:a,notifyOnIndexChange:!1});return t.addEventListener(TO,q,{capture:!0}),t.addEventListener(EO,k),t.history.pushState=function(...R){const P=r.apply(t.history,R);return L._ignoreSubscribers||N("PUSH"),P},t.history.replaceState=function(...R){const P=i.apply(t.history,R);return L._ignoreSubscribers||N("REPLACE"),P},L}function S9(n={initialEntries:["/"]}){const e=n.initialEntries;let t=n.initialIndex?Math.min(Math.max(n.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>AC(o,void 0));return fU({getLocation:()=>Nx(e[t],r[t]),getLength:()=>e.length,pushState:(s,o)=>{t<e.length-1&&(e.splice(t+1),r.splice(t+1)),r.push(o),e.push(s),t=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[t]=o,e[t]=s},back:()=>{t=Math.max(t-1,0)},forward:()=>{t=Math.min(t+1,e.length-1)},go:s=>{t=Math.min(Math.max(t+s,0),e.length-1)},createHref:s=>s})}function Nx(n,e){const t=n.indexOf("#"),r=n.indexOf("?");return{href:n,pathname:n.substring(0,t>0?r>0?Math.min(t,r):t:r>0?r:n.length),hash:t>-1?n.substring(t):"",search:r>-1?n.slice(r,t===-1?void 0:t):"",state:e||{[uh]:0,key:dN()}}}function dN(){return(Math.random()+1).toString(36).substring(7)}function fN(n){const e=n.errorComponent??E2;return S.jsx(E9,{getResetKey:n.getResetKey,onCatch:n.onCatch,children:({error:t,reset:r})=>t?ie.createElement(e,{error:t,reset:r}):n.children})}class E9 extends ie.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function E2({error:n}){const[e,t]=ie.useState(!1);return S.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[S.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),S.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>t(r=>!r),children:e?"Hide Error":"Show Error"})]}),S.jsx("div",{style:{height:".25rem"}}),e?S.jsx("div",{children:S.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:n.message?S.jsx("code",{children:n.message}):null})}):null]})}var N3={exports:{}},P3={},k3={exports:{}},O3={};var MO;function T9(){if(MO)return O3;MO=1;var n=Om();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(d,h){var p=h(),g=r({inst:{value:p,getSnapshot:h}}),x=g[0].inst,b=g[1];return s(function(){x.value=p,x.getSnapshot=h,l(x)&&b({inst:x})},[d,p,h]),i(function(){return l(x)&&b({inst:x}),d(function(){l(x)&&b({inst:x})})},[d]),o(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!t(d,p)}catch{return!0}}function u(d,h){return h()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return O3.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:c,O3}var IO;function M9(){return IO||(IO=1,k3.exports=T9()),k3.exports}var AO;function I9(){if(AO)return P3;AO=1;var n=Om(),e=M9();function t(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,a=n.useMemo,l=n.useDebugValue;return P3.useSyncExternalStoreWithSelector=function(u,c,d,h,p){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=a(function(){function y(k){if(!E){if(E=!0,T=k,k=h(k),p!==void 0&&x.hasValue){var q=x.value;if(p(q,k))return I=q}return I=k}if(q=I,r(T,k))return q;var L=h(k);return p!==void 0&&p(q,L)?(T=k,q):(T=k,I=L)}var E=!1,T,I,N=d===void 0?null:d;return[function(){return y(c())},N===null?void 0:function(){return y(N())}]},[c,d,h,p]);var b=i(u,g[0],g[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),l(b),b},P3}var CO;function A9(){return CO||(CO=1,N3.exports=I9()),N3.exports}var hU=A9();const C9=ol(hU),Cy=new WeakMap,L1=new WeakMap,NS={current:[]};let L3=!1,ox=0;const z_=new Set,gw=new Map;function pU(n){const e=Array.from(n).sort((t,r)=>t instanceof Ry&&t.options.deps.includes(r)?1:r instanceof Ry&&r.options.deps.includes(t)?-1:0);for(const t of e){if(NS.current.includes(t))continue;NS.current.push(t),t.recompute();const r=L1.get(t);if(r)for(const i of r){const s=Cy.get(i);s&&pU(s)}}}function R9(n){n.listeners.forEach(e=>e({prevVal:n.prevState,currentVal:n.state}))}function N9(n){n.listeners.forEach(e=>e({prevVal:n.prevState,currentVal:n.state}))}function mU(n){if(ox>0&&!gw.has(n)&&gw.set(n,n.prevState),z_.add(n),!(ox>0)&&!L3)try{for(L3=!0;z_.size>0;){const e=Array.from(z_);z_.clear();for(const t of e){const r=gw.get(t)??t.prevState;t.prevState=r,R9(t)}for(const t of e){const r=Cy.get(t);r&&(NS.current.push(t),pU(r))}for(const t of e){const r=Cy.get(t);if(r)for(const i of r)N9(i)}}}finally{L3=!1,NS.current=[],gw.clear()}}function D3(n){ox++;try{n()}finally{if(ox--,ox===0){const e=Array.from(z_)[0];e&&mU(e)}}}class CC{constructor(e,t){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),mU(this)},this.prevState=e,this.state=e,this.options=t}}class Ry{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const t=[],r=[];for(const i of this.options.deps)t.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:t,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var t,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(t=this.options).onUpdate)==null||r.call(t)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof Ry&&s.checkIfRecalculationNeededDeeply();let t=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){t=!0;break}t&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const t of this._subscriptions)t()}),this.subscribe=t=>{var r,i;this.listeners.add(t);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,t,this);return()=>{this.listeners.delete(t),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof Ry)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof CC){let r=Cy.get(t);r||(r=new Set,Cy.set(t,r)),r.add(this);let i=L1.get(this);i||(i=new Set,L1.set(this,i)),i.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof Ry)this.unregisterFromGraph(t.options.deps);else if(t instanceof CC){const r=Cy.get(t);r&&r.delete(this);const i=L1.get(this);i&&i.delete(t)}}}function P9(n,e=t=>t){return hU.useSyncExternalStoreWithSelector(n.subscribe,()=>n.state,()=>n.state,e,k9)}function k9(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,i]of n)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}const F3=ie.createContext(null);function gU(){return typeof document>"u"?F3:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=F3,F3)}function uc(n){const e=ie.useContext(gU());return n?.warn,e}function ra(n){const e=uc({warn:n?.router===void 0}),t=n?.router||e,r=ie.useRef(void 0);return P9(t.__store,i=>{if(n?.select){if(n.structuralSharing??t.options.defaultStructuralSharing){const s=ec(r.current,n.select(i));return r.current=s,s}return n.select(i)}return i})}const T2=ie.createContext(void 0),O9=ie.createContext(void 0);function _h(n){const e=ie.useContext(n.from?O9:T2);return ra({select:r=>{const i=r.matches.find(s=>n.from?n.from===s.routeId:s.id===e);if(Vc(!((n.shouldThrow??!0)&&!i),`Could not find ${n.from?`an active match from "${n.from}"`:"a nearest match!"}`),i!==void 0)return n.select?n.select(i):i},structuralSharing:n.structuralSharing})}function eo(n){return _h({from:n.from,strict:n.strict,structuralSharing:n.structuralSharing,select:e=>n.select?n.select(e.loaderData):e.loaderData})}function L9(n){const{select:e,...t}=n;return _h({...t,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function nr(n){return _h({from:n.from,strict:n.strict,structuralSharing:n.structuralSharing,select:e=>n.select?n.select(e.params):e.params})}function D9(n){return _h({from:n.from,strict:n.strict,structuralSharing:n.structuralSharing,select:e=>n.select?n.select(e.search):e.search})}function rc(n){return!!n?.isNotFound}function F9(n){const e=ra({select:t=>`not-found-${t.location.pathname}-${t.status}`});return S.jsx(fN,{getResetKey:()=>e,onCatch:(t,r)=>{var i;if(rc(t))(i=n.onCatch)==null||i.call(n,t,r);else throw t},errorComponent:({error:t})=>{var r;if(rc(t))return(r=n.fallback)==null?void 0:r.call(n,t);throw t},children:n.children})}function q9(){return S.jsx("p",{children:"Not Found"})}function Lm(n){const{navigate:e}=uc();return ie.useCallback(t=>e({...t}),[e])}let yU=class{constructor(e){this.init=t=>{var r,i;this.originalIndex=t.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Ja:Vc(this.parentRoute);let a=o?Ja:s.path;a&&a!=="/"&&(a=uN(a));const l=s?.id||a;let u=o?Ja:Vd([this.parentRoute.id===Ja?"":this.parentRoute.id,l]);a===Ja&&(a="/"),u!==Ja&&(u=Vd(["/",u]));const c=u===Ja?"/":Vd([this.parentRoute.fullPath,a]);this._path=a,this._id=u,this._fullPath=c,this._to=c,this._ssr=s?.ssr??t.defaultSsr??!0},this.updateLoader=t=>(Object.assign(this.options,t),this),this.update=t=>(Object.assign(this.options,t),this),this.lazy=t=>(this.lazyFn=t,this),this.useMatch=t=>_h({select:t?.select,from:this.id,structuralSharing:t?.structuralSharing}),this.useRouteContext=t=>_h({...t,from:this.id,select:r=>t?.select?t.select(r.context):r.context}),this.useSearch=t=>D9({select:t?.select,structuralSharing:t?.structuralSharing,from:this.id}),this.useParams=t=>nr({select:t?.select,structuralSharing:t?.structuralSharing,from:this.id}),this.useLoaderDeps=t=>L9({...t,from:this.id}),this.useLoaderData=t=>eo({...t,from:this.id}),this.useNavigate=()=>Lm({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Vc(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function j9(n){return new yU(n)}function B9(){return n=>z9(n)}class U9 extends yU{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function z9(n){return new U9(n)}function Ln(n){return new V9(n,{silent:!0}).createRoute}class V9{constructor(e,t){this.path=e,this.createRoute=r=>{this.silent;const i=j9(r);return i.isRoot=!1,i},this.silent=t?.silent}}function O0(n){if(n.isRedirect=!0,n.statusCode=n.statusCode||n.code||307,n.headers=n.headers||{},!n.reloadDocument){n.reloadDocument=!1;try{new URL(`${n.href}`),n.reloadDocument=!0}catch{}}if(n.throw)throw n;return n}function Fp(n){return!!n?.isRedirect}function q3(n){return!!n?.isRedirect&&n.href}function D1(n){return S.jsx(S.Fragment,{children:n.children})}function vU(n,e,t){return e.options.notFoundComponent?S.jsx(e.options.notFoundComponent,{data:t}):n.options.defaultNotFoundComponent?S.jsx(n.options.defaultNotFoundComponent,{data:t}):S.jsx(q9,{})}var j3,RO;function W9(){if(RO)return j3;RO=1;const n={},e=n.hasOwnProperty,t=(L,R)=>{for(const P in L)e.call(L,P)&&R(P,L[P])},r=(L,R)=>(R&&t(R,(P,F)=>{L[P]=F}),L),i=(L,R)=>{const P=L.length;let F=-1;for(;++F<P;)R(L[F])},s=L=>"\\u"+("0000"+L).slice(-4),o=(L,R)=>{let P=L.toString(16);return R?P:P.toUpperCase()},a=n.toString,l=Array.isArray,u=L=>typeof Buffer=="function"&&Buffer.isBuffer(L),c=L=>a.call(L)=="[object Object]",d=L=>typeof L=="string"||a.call(L)=="[object String]",h=L=>typeof L=="number"||a.call(L)=="[object Number]",p=L=>typeof L=="bigint",g=L=>typeof L=="function",x=L=>a.call(L)=="[object Map]",b=L=>a.call(L)=="[object Set]",y={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},E=/[\\\b\f\n\r\t]/,T=/[0-9]/,I=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,N=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,k=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,q=(L,R)=>{const P=()=>{re=X,++R.indentLevel,X=R.indent.repeat(R.indentLevel)},F={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},z=R&&R.json;z&&(F.quotes="double",F.wrap=!0),R=r(F,R),R.quotes!="single"&&R.quotes!="double"&&R.quotes!="backtick"&&(R.quotes="single");const V=R.quotes=="double"?'"':R.quotes=="backtick"?"`":"'",W=R.compact,Q=R.lowercaseHex;let X=R.indent.repeat(R.indentLevel),re="";const G=R.__inline1__,Y=R.__inline2__,te=W?"":`
`;let Z,fe=!0;const ge=R.numbers=="binary",ce=R.numbers=="octal",ye=R.numbers=="decimal",be=R.numbers=="hexadecimal";if(z&&L&&g(L.toJSON)&&(L=L.toJSON()),!d(L)){if(x(L))return L.size==0?"new Map()":(W||(R.__inline1__=!0,R.__inline2__=!1),"new Map("+q(Array.from(L),R)+")");if(b(L))return L.size==0?"new Set()":"new Set("+q(Array.from(L),R)+")";if(u(L))return L.length==0?"Buffer.from([])":"Buffer.from("+q(Array.from(L),R)+")";if(l(L))return Z=[],R.wrap=!0,G&&(R.__inline1__=!1,R.__inline2__=!0),Y||P(),i(L,Me=>{fe=!1,Y&&(R.__inline2__=!1),Z.push((W||Y?"":X)+q(Me,R))}),fe?"[]":Y?"["+Z.join(", ")+"]":"["+te+Z.join(","+te)+te+(W?"":re)+"]";if(h(L)||p(L)){if(z)return JSON.stringify(Number(L));let Me;if(ye)Me=String(L);else if(be){let qe=L.toString(16);Q||(qe=qe.toUpperCase()),Me="0x"+qe}else ge?Me="0b"+L.toString(2):ce&&(Me="0o"+L.toString(8));return p(L)?Me+"n":Me}else return p(L)?z?JSON.stringify(Number(L)):L+"n":c(L)?(Z=[],R.wrap=!0,P(),t(L,(Me,qe)=>{fe=!1,Z.push((W?"":X)+q(Me,R)+":"+(W?"":" ")+q(qe,R))}),fe?"{}":"{"+te+Z.join(","+te)+te+(W?"":re)+"}"):z?JSON.stringify(L)||"null":String(L)}const Ee=R.escapeEverything?N:k;return Z=L.replace(Ee,(Me,qe,Ue,Ye,Ne,ke)=>{if(qe){if(R.minimal)return qe;const ht=qe.charCodeAt(0),ct=qe.charCodeAt(1);if(R.es6){const Mt=(ht-55296)*1024+ct-56320+65536;return"\\u{"+o(Mt,Q)+"}"}return s(o(ht,Q))+s(o(ct,Q))}if(Ue)return s(o(Ue.charCodeAt(0),Q));if(Me=="\0"&&!z&&!T.test(ke.charAt(Ne+1)))return"\\0";if(Ye)return Ye==V||R.escapeEverything?"\\"+Ye:Ye;if(E.test(Me))return y[Me];if(R.minimal&&!I.test(Me))return Me;const me=o(Me.charCodeAt(0),Q);return z||me.length>2?s(me):"\\x"+("00"+me).slice(-2)}),V=="`"&&(Z=Z.replace(/\$\{/g,"\\${")),R.isScriptContext&&(Z=Z.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,z?"\\u003C!--":"\\x3C!--")),R.wrap&&(Z=V+Z+V),Z};return q.version="3.0.2",j3=q,j3}W9();function $9({children:n,log:e}){return typeof document<"u"?null:S.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[n,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}const PS="tsr-scroll-restoration-v1_3",H9=typeof window<"u"&&window.sessionStorage,G9=(n,e)=>{let t;return(...r)=>{t||(t=setTimeout(()=>{n(...r),t=null},e))}},dy=H9?{state:JSON.parse(window.sessionStorage.getItem(PS)||"null")||{},set:e=>(dy.state=Qp(e,dy.state)||dy.state,window.sessionStorage.setItem(PS,JSON.stringify(dy.state)))}:void 0,RC=n=>n.state.key||n.href;function X9(n){const e=[];let t;for(;t=n.parentNode;)e.unshift(`${n.tagName}:nth-child(${[].indexOf.call(t.children,n)+1})`),n=t;return`${e.join(" > ")}`.toLowerCase()}let kS=!1;function _U(n,e,t,r){var i;let s;try{s=JSON.parse(sessionStorage.getItem(n)||"{}")}catch(l){console.error(l);return}const o=e||((i=window.history.state)==null?void 0:i.key),a=s[o];kS=!0,(()=>{if(r&&a){for(const u in a){const c=a[u];if(u==="window")window.scrollTo({top:c.scrollY,left:c.scrollX,behavior:t});else if(u){const d=document.querySelector(u);d&&(d.scrollLeft=c.scrollX,d.scrollTop=c.scrollY)}}return}const l=window.location.hash.split("#")[1];if(l){const u=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(u){const c=document.getElementById(l);c&&c.scrollIntoView(u)}return}window.scrollTo({top:0,left:0,behavior:t})})(),kS=!1}function K9(n,e){if((n.options.scrollRestoration??!1)&&(n.isScrollRestoring=!0),typeof document>"u"||n.isScrollRestorationSetup)return;n.isScrollRestorationSetup=!0,kS=!1;const r=n.options.getScrollRestorationKey||RC;window.history.scrollRestoration="manual";const i=s=>{if(kS||!n.isScrollRestoring)return;let o="";if(s.target===document||s.target===window)o="window";else{const l=s.target.getAttribute("data-scroll-restoration-id");l?o=`[data-scroll-restoration-id="${l}"]`:o=X9(s.target)}const a=r(n.state.location);dy.set(l=>{const u=l[a]=l[a]||{},c=u[o]=u[o]||{};if(o==="window")c.scrollX=window.scrollX||0,c.scrollY=window.scrollY||0;else if(o){const d=document.querySelector(o);d&&(c.scrollX=d.scrollLeft||0,c.scrollY=d.scrollTop||0)}return l})};typeof document<"u"&&document.addEventListener("scroll",G9(i,100),!0),n.subscribe("onRendered",s=>{const o=r(s.toLocation);if(!n.resetNextScroll){n.resetNextScroll=!0;return}_U(PS,o,n.options.scrollRestorationBehavior,n.isScrollRestoring),n.isScrollRestoring&&dy.set(a=>(a[o]=a[o]||{},a))})}function Q9(){const n=uc(),t=(n.options.getScrollRestorationKey||RC)(n.latestLocation),r=t!==RC(n.latestLocation)?t:null;return!n.isScrollRestoring||!n.isServer?null:S.jsx($9,{children:`(${_U.toString()})(${JSON.stringify(PS)},${JSON.stringify(r)}, undefined, true)`,log:!1})}const xU=ie.memo(function({matchId:e}){var t,r;const i=uc(),s=ra({select:y=>{var E;return(E=y.matches.find(T=>T.id===e))==null?void 0:E.routeId}});Vc(s);const o=i.routesById[s],a=o.options.pendingComponent??i.options.defaultPendingComponent,l=a?S.jsx(a,{}):null,u=o.options.errorComponent??i.options.defaultErrorComponent,c=o.options.onCatch??i.options.defaultOnCatch,d=o.isRoot?o.options.notFoundComponent??((t=i.options.notFoundRoute)==null?void 0:t.options.component):o.options.notFoundComponent,h=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?ie.Suspense:D1,p=u?fN:D1,g=d?F9:D1,x=ra({select:y=>y.loadedAt}),b=ra({select:y=>{var E;const T=y.matches.findIndex(I=>I.id===e);return(E=y.matches[T-1])==null?void 0:E.routeId}});return S.jsxs(S.Fragment,{children:[S.jsx(T2.Provider,{value:e,children:S.jsx(h,{fallback:l,children:S.jsx(p,{getResetKey:()=>x,errorComponent:u||E2,onCatch:(y,E)=>{if(rc(y))throw y;c?.(y,E)},children:S.jsx(g,{fallback:y=>{if(!d||y.routeId&&y.routeId!==s||!y.routeId&&!o.isRoot)throw y;return ie.createElement(d,y)},children:S.jsx(J9,{matchId:e})})})})}),b===Ja?S.jsxs(S.Fragment,{children:[S.jsx(Y9,{}),S.jsx(Q9,{})]}):null]})});function Y9(){var n;const e=uc(),t=ie.useRef(void 0);return S.jsx("script",{suppressHydrationWarning:!0,ref:r=>{r?e.emit({type:"onRendered",...Iy(e.state)}):t.current=e.state.resolvedLocation}},(n=e.state.resolvedLocation)==null?void 0:n.state.key)}const J9=ie.memo(function({matchId:e}){var t,r,i;const s=uc(),{match:o,key:a,routeId:l}=ra({select:h=>{const p=h.matches.findIndex(T=>T.id===e),g=h.matches[p],x=g.routeId,b=s.routesById[x].options.remountDeps??s.options.defaultRemountDeps,y=b?.({routeId:x,loaderDeps:g.loaderDeps,params:g._strictParams,search:g._strictSearch});return{key:y?JSON.stringify(y):void 0,routeId:x,match:IC(g,["id","status","error"])}},structuralSharing:!0}),u=s.routesById[l],c=ie.useMemo(()=>{const h=u.options.component??s.options.defaultComponent;return h?S.jsx(h,{},a):S.jsx(dc,{})},[a,u.options.component,s.options.defaultComponent]),d=(u.options.errorComponent??s.options.defaultErrorComponent)||E2;if(o.status==="notFound")return Vc(rc(o.error)),vU(s,u,o.error);if(o.status==="redirected")throw Vc(Fp(o.error)),(t=s.getMatch(o.id))==null?void 0:t.loadPromise;if(o.status==="error"){if(s.isServer)return S.jsx(d,{error:o.error,reset:void 0,info:{componentStack:""}});throw o.error}if(o.status==="pending"){const h=u.options.pendingMinMs??s.options.defaultPendingMinMs;if(h&&!((r=s.getMatch(o.id))!=null&&r.minPendingPromise)&&!s.isServer){const p=iy();Promise.resolve().then(()=>{s.updateMatch(o.id,g=>({...g,minPendingPromise:p}))}),setTimeout(()=>{p.resolve(),s.updateMatch(o.id,g=>({...g,minPendingPromise:void 0}))},h)}throw(i=s.getMatch(o.id))==null?void 0:i.loadPromise}return c}),dc=ie.memo(function(){const e=uc(),t=ie.useContext(T2),r=ra({select:u=>{var c;return(c=u.matches.find(d=>d.id===t))==null?void 0:c.routeId}}),i=e.routesById[r],s=ra({select:u=>{const d=u.matches.find(h=>h.id===t);return Vc(d),d.globalNotFound}}),o=ra({select:u=>{var c;const d=u.matches,h=d.findIndex(p=>p.id===t);return(c=d[h+1])==null?void 0:c.id}});if(s)return vU(e,i,void 0);if(!o)return null;const a=S.jsx(xU,{matchId:o}),l=e.options.defaultPendingComponent?S.jsx(e.options.defaultPendingComponent,{}):null;return t===Ja?S.jsx(ie.Suspense,{fallback:l,children:a}):a});var B3={exports:{}},$a={},U3={exports:{}},z3={};var NO;function Z9(){return NO||(NO=1,function(n){function e(G,Y){var te=G.length;G.push(Y);e:for(;0<te;){var Z=te-1>>>1,fe=G[Z];if(0<i(fe,Y))G[Z]=Y,G[te]=fe,te=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],te=G.pop();if(te!==Y){G[0]=te;e:for(var Z=0,fe=G.length,ge=fe>>>1;Z<ge;){var ce=2*(Z+1)-1,ye=G[ce],be=ce+1,Ee=G[be];if(0>i(ye,te))be<fe&&0>i(Ee,ye)?(G[Z]=Ee,G[be]=te,Z=be):(G[Z]=ye,G[ce]=te,Z=ce);else if(be<fe&&0>i(Ee,te))G[Z]=Ee,G[be]=te,Z=be;else break e}}return Y}function i(G,Y){var te=G.sortIndex-Y.sortIndex;return te!==0?te:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,p=!1,g=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var Y=t(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function I(G){if(x=!1,T(G),!g)if(t(l)!==null)g=!0,X(N);else{var Y=t(u);Y!==null&&re(I,Y.startTime-G)}}function N(G,Y){g=!1,x&&(x=!1,y(L),L=-1),p=!0;var te=h;try{for(T(Y),d=t(l);d!==null&&(!(d.expirationTime>Y)||G&&!F());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var fe=Z(d.expirationTime<=Y);Y=n.unstable_now(),typeof fe=="function"?d.callback=fe:d===t(l)&&r(l),T(Y)}else r(l);d=t(l)}if(d!==null)var ge=!0;else{var ce=t(u);ce!==null&&re(I,ce.startTime-Y),ge=!1}return ge}finally{d=null,h=te,p=!1}}var k=!1,q=null,L=-1,R=5,P=-1;function F(){return!(n.unstable_now()-P<R)}function z(){if(q!==null){var G=n.unstable_now();P=G;var Y=!0;try{Y=q(!0,G)}finally{Y?V():(k=!1,q=null)}}else k=!1}var V;if(typeof E=="function")V=function(){E(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=z,V=function(){Q.postMessage(null)}}else V=function(){b(z,0)};function X(G){q=G,k||(k=!0,V())}function re(G,Y){L=b(function(){G(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,X(N))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var te=h;h=Y;try{return G()}finally{h=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=h;h=G;try{return Y()}finally{h=te}},n.unstable_scheduleCallback=function(G,Y,te){var Z=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Z+te:Z):te=Z,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=0x3fffffff;break;case 4:fe=1e4;break;default:fe=5e3}return fe=te+fe,G={id:c++,callback:Y,priorityLevel:G,startTime:te,expirationTime:fe,sortIndex:-1},te>Z?(G.sortIndex=te,e(u,G),t(l)===null&&G===t(u)&&(x?(y(L),L=-1):x=!0,re(I,te-Z))):(G.sortIndex=fe,e(l,G),g||p||(g=!0,X(N))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var Y=h;return function(){var te=h;h=Y;try{return G.apply(this,arguments)}finally{h=te}}}}(z3)),z3}var PO;function eG(){return PO||(PO=1,U3.exports=Z9()),U3.exports}var kO;function tG(){if(kO)return $a;kO=1;var n=Om(),e=eG();function t(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,M=1;M<arguments.length;M++)m+="&args[]="+encodeURIComponent(arguments[M]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(f,m){o(f,m),o(f+"Capture",m)}function o(f,m){for(i[f]=m,f=0;f<m.length;f++)r.add(m[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function h(f){return l.call(d,f)?!0:l.call(c,f)?!1:u.test(f)?d[f]=!0:(c[f]=!0,!1)}function p(f,m,M,D){if(M!==null&&M.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return D?!1:M!==null?!M.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function g(f,m,M,D){if(m===null||typeof m>"u"||p(f,m,M,D))return!0;if(D)return!1;if(M!==null)switch(M.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function x(f,m,M,D,$,J,pe){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=D,this.attributeNamespace=$,this.mustUseProperty=M,this.propertyName=f,this.type=m,this.sanitizeURL=J,this.removeEmptyString=pe}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){b[f]=new x(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];b[m]=new x(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){b[f]=new x(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){b[f]=new x(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){b[f]=new x(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){b[f]=new x(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){b[f]=new x(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){b[f]=new x(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){b[f]=new x(f,5,!1,f.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function E(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(y,E);b[m]=new x(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(y,E);b[m]=new x(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(y,E);b[m]=new x(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){b[f]=new x(f,1,!1,f.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){b[f]=new x(f,1,!1,f.toLowerCase(),null,!0,!0)});function T(f,m,M,D){var $=b.hasOwnProperty(m)?b[m]:null;($!==null?$.type!==0:D||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(g(m,M,$,D)&&(M=null),D||$===null?h(m)&&(M===null?f.removeAttribute(m):f.setAttribute(m,""+M)):$.mustUseProperty?f[$.propertyName]=M===null?$.type===3?!1:"":M:(m=$.attributeName,D=$.attributeNamespace,M===null?f.removeAttribute(m):($=$.type,M=$===3||$===4&&M===!0?"":""+M,D?f.setAttributeNS(D,m,M):f.setAttribute(m,M))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),k=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),F=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),G=Symbol.iterator;function Y(f){return f===null||typeof f!="object"?null:(f=G&&f[G]||f["@@iterator"],typeof f=="function"?f:null)}var te=Object.assign,Z;function fe(f){if(Z===void 0)try{throw Error()}catch(M){var m=M.stack.trim().match(/\n( *(at )?)/);Z=m&&m[1]||""}return`
`+Z+f}var ge=!1;function ce(f,m){if(!f||ge)return"";ge=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(bt){var D=bt}Reflect.construct(f,[],m)}else{try{m.call()}catch(bt){D=bt}f.call(m.prototype)}else{try{throw Error()}catch(bt){D=bt}f()}}catch(bt){if(bt&&D&&typeof bt.stack=="string"){for(var $=bt.stack.split(`
`),J=D.stack.split(`
`),pe=$.length-1,Ve=J.length-1;1<=pe&&0<=Ve&&$[pe]!==J[Ve];)Ve--;for(;1<=pe&&0<=Ve;pe--,Ve--)if($[pe]!==J[Ve]){if(pe!==1||Ve!==1)do if(pe--,Ve--,0>Ve||$[pe]!==J[Ve]){var Ke=`
`+$[pe].replace(" at new "," at ");return f.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",f.displayName)),Ke}while(1<=pe&&0<=Ve);break}}}finally{ge=!1,Error.prepareStackTrace=M}return(f=f?f.displayName||f.name:"")?fe(f):""}function ye(f){switch(f.tag){case 5:return fe(f.type);case 16:return fe("Lazy");case 13:return fe("Suspense");case 19:return fe("SuspenseList");case 0:case 2:case 15:return f=ce(f.type,!1),f;case 11:return f=ce(f.type.render,!1),f;case 1:return f=ce(f.type,!0),f;default:return""}}function be(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case q:return"Fragment";case k:return"Portal";case R:return"Profiler";case L:return"StrictMode";case V:return"Suspense";case W:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case F:return(f.displayName||"Context")+".Consumer";case P:return(f._context.displayName||"Context")+".Provider";case z:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case Q:return m=f.displayName||null,m!==null?m:be(f.type)||"Memo";case X:m=f._payload,f=f._init;try{return be(f(m))}catch{}}return null}function Ee(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(m);case 8:return m===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Me(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function qe(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ue(f){var m=qe(f)?"checked":"value",M=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),D=""+f[m];if(!f.hasOwnProperty(m)&&typeof M<"u"&&typeof M.get=="function"&&typeof M.set=="function"){var $=M.get,J=M.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return $.call(this)},set:function(pe){D=""+pe,J.call(this,pe)}}),Object.defineProperty(f,m,{enumerable:M.enumerable}),{getValue:function(){return D},setValue:function(pe){D=""+pe},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Ye(f){f._valueTracker||(f._valueTracker=Ue(f))}function Ne(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var M=m.getValue(),D="";return f&&(D=qe(f)?f.checked?"true":"false":f.value),f=D,f!==M?(m.setValue(f),!0):!1}function ke(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function me(f,m){var M=m.checked;return te({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:M??f._wrapperState.initialChecked})}function ht(f,m){var M=m.defaultValue==null?"":m.defaultValue,D=m.checked!=null?m.checked:m.defaultChecked;M=Me(m.value!=null?m.value:M),f._wrapperState={initialChecked:D,initialValue:M,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function ct(f,m){m=m.checked,m!=null&&T(f,"checked",m,!1)}function Mt(f,m){ct(f,m);var M=Me(m.value),D=m.type;if(M!=null)D==="number"?(M===0&&f.value===""||f.value!=M)&&(f.value=""+M):f.value!==""+M&&(f.value=""+M);else if(D==="submit"||D==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?Te(f,m.type,M):m.hasOwnProperty("defaultValue")&&Te(f,m.type,Me(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function xe(f,m,M){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var D=m.type;if(!(D!=="submit"&&D!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,M||m===f.value||(f.value=m),f.defaultValue=m}M=f.name,M!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,M!==""&&(f.name=M)}function Te(f,m,M){(m!=="number"||ke(f.ownerDocument)!==f)&&(M==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+M&&(f.defaultValue=""+M))}var Ae=Array.isArray;function le(f,m,M,D){if(f=f.options,m){m={};for(var $=0;$<M.length;$++)m["$"+M[$]]=!0;for(M=0;M<f.length;M++)$=m.hasOwnProperty("$"+f[M].value),f[M].selected!==$&&(f[M].selected=$),$&&D&&(f[M].defaultSelected=!0)}else{for(M=""+Me(M),m=null,$=0;$<f.length;$++){if(f[$].value===M){f[$].selected=!0,D&&(f[$].defaultSelected=!0);return}m!==null||f[$].disabled||(m=f[$])}m!==null&&(m.selected=!0)}}function se(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Oe(f,m){var M=m.value;if(M==null){if(M=m.children,m=m.defaultValue,M!=null){if(m!=null)throw Error(t(92));if(Ae(M)){if(1<M.length)throw Error(t(93));M=M[0]}m=M}m==null&&(m=""),M=m}f._wrapperState={initialValue:Me(M)}}function Ce(f,m){var M=Me(m.value),D=Me(m.defaultValue);M!=null&&(M=""+M,M!==f.value&&(f.value=M),m.defaultValue==null&&f.defaultValue!==M&&(f.defaultValue=M)),D!=null&&(f.defaultValue=""+D)}function Ge(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function at(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lt(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?at(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Dt,Jt=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,M,D,$){MSApp.execUnsafeLocalFunction(function(){return f(m,M,D,$)})}:f}(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Dt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function Cn(f,m){if(m){var M=f.firstChild;if(M&&M===f.lastChild&&M.nodeType===3){M.nodeValue=m;return}}f.textContent=m}var Vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hn=["Webkit","ms","Moz","O"];Object.keys(Vt).forEach(function(f){hn.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),Vt[m]=Vt[f]})});function vn(f,m,M){return m==null||typeof m=="boolean"||m===""?"":M||typeof m!="number"||m===0||Vt.hasOwnProperty(f)&&Vt[f]?(""+m).trim():m+"px"}function $t(f,m){f=f.style;for(var M in m)if(m.hasOwnProperty(M)){var D=M.indexOf("--")===0,$=vn(M,m[M],D);M==="float"&&(M="cssFloat"),D?f.setProperty(M,$):f[M]=$}}var un=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function He(f,m){if(m){if(un[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function At(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var on=null;function $e(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Kt=null,_t=null,ee=null;function gn(f){if(f=vc(f)){if(typeof Kt!="function")throw Error(t(280));var m=f.stateNode;m&&(m=ug(m),Kt(f.stateNode,f.type,m))}}function Ft(f){_t?ee?ee.push(f):ee=[f]:_t=f}function Hn(){if(_t){var f=_t,m=ee;if(ee=_t=null,gn(f),m)for(f=0;f<m.length;f++)gn(m[f])}}function Lr(f,m){return f(m)}function ai(){}var gr=!1;function hi(f,m,M){if(gr)return f(m,M);gr=!0;try{return Lr(f,m,M)}finally{gr=!1,(_t!==null||ee!==null)&&(ai(),Hn())}}function ui(f,m){var M=f.stateNode;if(M===null)return null;var D=ug(M);if(D===null)return null;M=D[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(f=f.type,D=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!D;break e;default:f=!1}if(f)return null;if(M&&typeof M!="function")throw Error(t(231,m,typeof M));return M}var Vl=!1;if(a)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{Vl=!1}function Wo(f,m,M,D,$,J,pe,Ve,Ke){var bt=Array.prototype.slice.call(arguments,3);try{m.apply(M,bt)}catch(Yt){this.onError(Yt)}}var To=!1,Mo=null,Io=!1,no=null,su={onError:function(f){To=!0,Mo=f}};function Wl(f,m,M,D,$,J,pe,Ve,Ke){To=!1,Mo=null,Wo.apply(su,arguments)}function hc(f,m,M,D,$,J,pe,Ve,Ke){if(Wl.apply(this,arguments),To){if(To){var bt=Mo;To=!1,Mo=null}else throw Error(t(198));Io||(Io=!0,no=bt)}}function Ao(f){var m=f,M=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,m.flags&4098&&(M=m.return),f=m.return;while(f)}return m.tag===3?M:null}function ou(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function au(f){if(Ao(f)!==f)throw Error(t(188))}function lu(f){var m=f.alternate;if(!m){if(m=Ao(f),m===null)throw Error(t(188));return m!==f?null:f}for(var M=f,D=m;;){var $=M.return;if($===null)break;var J=$.alternate;if(J===null){if(D=$.return,D!==null){M=D;continue}break}if($.child===J.child){for(J=$.child;J;){if(J===M)return au($),f;if(J===D)return au($),m;J=J.sibling}throw Error(t(188))}if(M.return!==D.return)M=$,D=J;else{for(var pe=!1,Ve=$.child;Ve;){if(Ve===M){pe=!0,M=$,D=J;break}if(Ve===D){pe=!0,D=$,M=J;break}Ve=Ve.sibling}if(!pe){for(Ve=J.child;Ve;){if(Ve===M){pe=!0,M=J,D=$;break}if(Ve===D){pe=!0,D=J,M=$;break}Ve=Ve.sibling}if(!pe)throw Error(t(189))}}if(M.alternate!==D)throw Error(t(190))}if(M.tag!==3)throw Error(t(188));return M.stateNode.current===M?f:m}function cu(f){return f=lu(f),f!==null?uu(f):null}function uu(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=uu(f);if(m!==null)return m;f=f.sibling}return null}var du=e.unstable_scheduleCallback,we=e.unstable_cancelCallback,nt=e.unstable_shouldYield,yt=e.unstable_requestPaint,ut=e.unstable_now,it=e.unstable_getCurrentPriorityLevel,Gt=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,_n=e.unstable_NormalPriority,Tn=e.unstable_LowPriority,Kn=e.unstable_IdlePriority,Wn=null,nn=null;function qn(f){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Wn,f,void 0,(f.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:yr,Tr=Math.log,Mr=Math.LN2;function yr(f){return f>>>=0,f===0?32:31-(Tr(f)/Mr|0)|0}var kn=64,Dr=4194304;function ar(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return f&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return f}}function ss(f,m){var M=f.pendingLanes;if(M===0)return 0;var D=0,$=f.suspendedLanes,J=f.pingedLanes,pe=M&0xfffffff;if(pe!==0){var Ve=pe&~$;Ve!==0?D=ar(Ve):(J&=pe,J!==0&&(D=ar(J)))}else pe=M&~$,pe!==0?D=ar(pe):J!==0&&(D=ar(J));if(D===0)return 0;if(m!==0&&m!==D&&!(m&$)&&($=D&-D,J=m&-m,$>=J||$===16&&(J&4194240)!==0))return m;if(D&4&&(D|=M&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=D;0<m;)M=31-Zn(m),$=1<<M,D|=f[M],m&=~$;return D}function fl(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function ds(f,m){for(var M=f.suspendedLanes,D=f.pingedLanes,$=f.expirationTimes,J=f.pendingLanes;0<J;){var pe=31-Zn(J),Ve=1<<pe,Ke=$[pe];Ke===-1?(!(Ve&M)||Ve&D)&&($[pe]=fl(Ve,m)):Ke<=m&&(f.expiredLanes|=Ve),J&=~Ve}}function qa(f){return f=f.pendingLanes&-0x40000001,f!==0?f:f&0x40000000?0x40000000:0}function Fr(){var f=kn;return kn<<=1,!(kn&4194240)&&(kn=64),f}function Bs(f){for(var m=[],M=0;31>M;M++)m.push(f);return m}function fs(f,m,M){f.pendingLanes|=m,m!==0x20000000&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Zn(m),f[m]=M}function As(f,m){var M=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var D=f.eventTimes;for(f=f.expirationTimes;0<M;){var $=31-Zn(M),J=1<<$;m[$]=0,D[$]=-1,f[$]=-1,M&=~J}}function Vi(f,m){var M=f.entangledLanes|=m;for(f=f.entanglements;M;){var D=31-Zn(M),$=1<<D;$&m|f[D]&m&&(f[D]|=m),M&=~$}}var Vr=0;function mo(f){return f&=-f,1<f?4<f?f&0xfffffff?16:0x20000000:4:1}var fu,je,Vh,pc,Ku,A=!1,C=[],B=null,U=null,H=null,oe=new Map,De=new Map,Be=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xt(f,m){switch(f){case"focusin":case"focusout":B=null;break;case"dragenter":case"dragleave":U=null;break;case"mouseover":case"mouseout":H=null;break;case"pointerover":case"pointerout":oe.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":De.delete(m.pointerId)}}function zt(f,m,M,D,$,J){return f===null||f.nativeEvent!==J?(f={blockedOn:m,domEventName:M,eventSystemFlags:D,nativeEvent:J,targetContainers:[$]},m!==null&&(m=vc(m),m!==null&&je(m)),f):(f.eventSystemFlags|=D,m=f.targetContainers,$!==null&&m.indexOf($)===-1&&m.push($),f)}function Qt(f,m,M,D,$){switch(m){case"focusin":return B=zt(B,f,m,M,D,$),!0;case"dragenter":return U=zt(U,f,m,M,D,$),!0;case"mouseover":return H=zt(H,f,m,M,D,$),!0;case"pointerover":var J=$.pointerId;return oe.set(J,zt(oe.get(J)||null,f,m,M,D,$)),!0;case"gotpointercapture":return J=$.pointerId,De.set(J,zt(De.get(J)||null,f,m,M,D,$)),!0}return!1}function mt(f){var m=yu(f.target);if(m!==null){var M=Ao(m);if(M!==null){if(m=M.tag,m===13){if(m=ou(M),m!==null){f.blockedOn=m,Ku(f.priority,function(){Vh(M)});return}}else if(m===3&&M.stateNode.current.memoizedState.isDehydrated){f.blockedOn=M.tag===3?M.stateNode.containerInfo:null;return}}}f.blockedOn=null}function rt(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var M=Re(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(M===null){M=f.nativeEvent;var D=new M.constructor(M.type,M);on=D,M.target.dispatchEvent(D),on=null}else return m=vc(M),m!==null&&je(m),f.blockedOn=M,!1;m.shift()}return!0}function Ct(f,m,M){rt(f)&&M.delete(m)}function ze(){A=!1,B!==null&&rt(B)&&(B=null),U!==null&&rt(U)&&(U=null),H!==null&&rt(H)&&(H=null),oe.forEach(Ct),De.forEach(Ct)}function Qe(f,m){f.blockedOn===m&&(f.blockedOn=null,A||(A=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ze)))}function Ze(f){function m($){return Qe($,f)}if(0<C.length){Qe(C[0],f);for(var M=1;M<C.length;M++){var D=C[M];D.blockedOn===f&&(D.blockedOn=null)}}for(B!==null&&Qe(B,f),U!==null&&Qe(U,f),H!==null&&Qe(H,f),oe.forEach(m),De.forEach(m),M=0;M<Be.length;M++)D=Be[M],D.blockedOn===f&&(D.blockedOn=null);for(;0<Be.length&&(M=Be[0],M.blockedOn===null);)mt(M),M.blockedOn===null&&Be.shift()}var wt=I.ReactCurrentBatchConfig,St=!0;function tt(f,m,M,D){var $=Vr,J=wt.transition;wt.transition=null;try{Vr=1,dn(f,m,M,D)}finally{Vr=$,wt.transition=J}}function Et(f,m,M,D){var $=Vr,J=wt.transition;wt.transition=null;try{Vr=4,dn(f,m,M,D)}finally{Vr=$,wt.transition=J}}function dn(f,m,M,D){if(St){var $=Re(f,m,M,D);if($===null)ig(f,m,D,ve,M),xt(f,D);else if(Qt($,f,m,M,D))D.stopPropagation();else if(xt(f,D),m&4&&-1<Tt.indexOf(f)){for(;$!==null;){var J=vc($);if(J!==null&&fu(J),J=Re(f,m,M,D),J===null&&ig(f,m,D,ve,M),J===$)break;$=J}$!==null&&D.stopPropagation()}else ig(f,m,D,null,M)}}var ve=null;function Re(f,m,M,D){if(ve=null,f=$e(D),f=yu(f),f!==null)if(m=Ao(f),m===null)f=null;else if(M=m.tag,M===13){if(f=ou(m),f!==null)return f;f=null}else if(M===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return ve=f,null}function Xe(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(it()){case Gt:return 1;case pn:return 4;case _n:case Tn:return 16;case Kn:return 0x20000000;default:return 16}default:return 16}}var qt=null,Ie=null,Le=null;function ue(){if(Le)return Le;var f,m=Ie,M=m.length,D,$="value"in qt?qt.value:qt.textContent,J=$.length;for(f=0;f<M&&m[f]===$[f];f++);var pe=M-f;for(D=1;D<=pe&&m[M-D]===$[J-D];D++);return Le=$.slice(f,1<D?1-D:void 0)}function _e(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function Se(){return!0}function dt(){return!1}function Ot(f){function m(M,D,$,J,pe){this._reactName=M,this._targetInst=$,this.type=D,this.nativeEvent=J,this.target=pe,this.currentTarget=null;for(var Ve in f)f.hasOwnProperty(Ve)&&(M=f[Ve],this[Ve]=M?M(J):J[Ve]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Se:dt,this.isPropagationStopped=dt,this}return te(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var M=this.nativeEvent;M&&(M.preventDefault?M.preventDefault():typeof M.returnValue!="unknown"&&(M.returnValue=!1),this.isDefaultPrevented=Se)},stopPropagation:function(){var M=this.nativeEvent;M&&(M.stopPropagation?M.stopPropagation():typeof M.cancelBubble!="unknown"&&(M.cancelBubble=!0),this.isPropagationStopped=Se)},persist:function(){},isPersistent:Se}),m}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jn=Ot(En),Jn=te({},En,{view:0,detail:0}),jt=Ot(Jn),We,lt,kt,Ht=te({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==kt&&(kt&&f.type==="mousemove"?(We=f.screenX-kt.screenX,lt=f.screenY-kt.screenY):lt=We=0,kt=f),We)},movementY:function(f){return"movementY"in f?f.movementY:lt}}),Rn=Ot(Ht),Vn=te({},Ht,{dataTransfer:0}),ot=Ot(Vn),Pt=te({},Jn,{relatedTarget:0}),Wt=Ot(Pt),mn=te({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),ln=Ot(mn),Bn=te({},En,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),pr=Ot(Bn),xn=te({},En,{data:0}),ki=Ot(xn),vt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},en={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},an={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cn(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=an[f])?!!m[f]:!1}function lr(){return cn}var ri=te({},Jn,{key:function(f){if(f.key){var m=vt[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=_e(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?en[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(f){return f.type==="keypress"?_e(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?_e(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Qr=Ot(ri),Rr=te({},Ht,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hs=Ot(Rr),Wi=te({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),hl=Ot(Wi),pl=te({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),Us=Ot(pl),Hm=te({},Ht,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),uf=Ot(Hm),Qu=[9,13,27,32],Co=a&&"CompositionEvent"in window,ro=null;a&&"documentMode"in document&&(ro=document.documentMode);var Oi=a&&"TextEvent"in window&&!ro,df=a&&(!Co||ro&&8<ro&&11>=ro),ja=" ",Nv=!1;function Pv(f,m){switch(f){case"keyup":return Qu.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gm(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var hu=!1;function Ab(f,m){switch(f){case"compositionend":return Gm(m);case"keypress":return m.which!==32?null:(Nv=!0,ja);case"textInput":return f=m.data,f===ja&&Nv?null:f;default:return null}}function Wh(f,m){if(hu)return f==="compositionend"||!Co&&Pv(f,m)?(f=ue(),Le=Ie=qt=null,hu=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return df&&m.locale!=="ko"?null:m.data;default:return null}}var ff={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xm(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!ff[f.type]:m==="textarea"}function hf(f,m,M,D){Ft(D),m=sg(m,"onChange"),0<m.length&&(M=new jn("onChange","change",null,M,D),f.push({event:M,listeners:m}))}var pu=null,pf=null;function Cb(f){vf(f,0)}function mc(f){var m=os(f);if(Ne(m))return f}function Rb(f,m){if(f==="change")return m}var mf=!1;if(a){var $o;if(a){var Yu="oninput"in document;if(!Yu){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),Yu=typeof Ju.oninput=="function"}$o=Yu}else $o=!1;mf=$o&&(!document.documentMode||9<document.documentMode)}function ml(){pu&&(pu.detachEvent("onpropertychange",Km),pf=pu=null)}function Km(f){if(f.propertyName==="value"&&mc(pf)){var m=[];hf(m,pf,f,$e(f)),hi(Cb,m)}}function gf(f,m,M){f==="focusin"?(ml(),pu=m,pf=M,pu.attachEvent("onpropertychange",Km)):f==="focusout"&&ml()}function Nb(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return mc(pf)}function kv(f,m){if(f==="click")return mc(m)}function $i(f,m){if(f==="input"||f==="change")return mc(m)}function Qm(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var ha=typeof Object.is=="function"?Object.is:Qm;function Zu(f,m){if(ha(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var M=Object.keys(f),D=Object.keys(m);if(M.length!==D.length)return!1;for(D=0;D<M.length;D++){var $=M[D];if(!l.call(m,$)||!ha(f[$],m[$]))return!1}return!0}function $h(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function pa(f,m){var M=$h(f);f=0;for(var D;M;){if(M.nodeType===3){if(D=f+M.textContent.length,f<=m&&D>=m)return{node:M,offset:m-f};f=D}e:{for(;M;){if(M.nextSibling){M=M.nextSibling;break e}M=M.parentNode}M=void 0}M=$h(M)}}function ed(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?ed(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function Hi(){for(var f=window,m=ke();m instanceof f.HTMLIFrameElement;){try{var M=typeof m.contentWindow.location.href=="string"}catch{M=!1}if(M)f=m.contentWindow;else break;m=ke(f.document)}return m}function zs(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function Vs(f){var m=Hi(),M=f.focusedElem,D=f.selectionRange;if(m!==M&&M&&M.ownerDocument&&ed(M.ownerDocument.documentElement,M)){if(D!==null&&zs(M)){if(m=D.start,f=D.end,f===void 0&&(f=m),"selectionStart"in M)M.selectionStart=m,M.selectionEnd=Math.min(f,M.value.length);else if(f=(m=M.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var $=M.textContent.length,J=Math.min(D.start,$);D=D.end===void 0?J:Math.min(D.end,$),!f.extend&&J>D&&($=D,D=J,J=$),$=pa(M,J);var pe=pa(M,D);$&&pe&&(f.rangeCount!==1||f.anchorNode!==$.node||f.anchorOffset!==$.offset||f.focusNode!==pe.node||f.focusOffset!==pe.offset)&&(m=m.createRange(),m.setStart($.node,$.offset),f.removeAllRanges(),J>D?(f.addRange(m),f.extend(pe.node,pe.offset)):(m.setEnd(pe.node,pe.offset),f.addRange(m)))}}for(m=[],f=M;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<m.length;M++)f=m[M],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Ym=a&&"documentMode"in document&&11>=document.documentMode,$l=null,td=null,Hh=null,Ws=!1;function Jm(f,m,M){var D=M.window===M?M.document:M.nodeType===9?M:M.ownerDocument;Ws||$l==null||$l!==ke(D)||(D=$l,"selectionStart"in D&&zs(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),Hh&&Zu(Hh,D)||(Hh=D,D=sg(td,"onSelect"),0<D.length&&(m=new jn("onSelect","select",null,m,M),f.push({event:m,listeners:D}),m.target=$l)))}function yf(f,m){var M={};return M[f.toLowerCase()]=m.toLowerCase(),M["Webkit"+f]="webkit"+m,M["Moz"+f]="moz"+m,M}var mu={animationend:yf("Animation","AnimationEnd"),animationiteration:yf("Animation","AnimationIteration"),animationstart:yf("Animation","AnimationStart"),transitionend:yf("Transition","TransitionEnd")},gl={},yl={};a&&(yl=document.createElement("div").style,"AnimationEvent"in window||(delete mu.animationend.animation,delete mu.animationiteration.animation,delete mu.animationstart.animation),"TransitionEvent"in window||delete mu.transitionend.transition);function Hl(f){if(gl[f])return gl[f];if(!mu[f])return f;var m=mu[f],M;for(M in m)if(m.hasOwnProperty(M)&&M in yl)return gl[f]=m[M];return f}var Gh=Hl("animationend"),Xh=Hl("animationiteration"),Ov=Hl("animationstart"),Lv=Hl("transitionend"),Dv=new Map,Fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gc(f,m){Dv.set(f,m),s(m,[f])}for(var Zm=0;Zm<Fv.length;Zm++){var Kh=Fv[Zm],Qh=Kh.toLowerCase(),Pb=Kh[0].toUpperCase()+Kh.slice(1);gc(Qh,"on"+Pb)}gc(Gh,"onAnimationEnd"),gc(Xh,"onAnimationIteration"),gc(Ov,"onAnimationStart"),gc("dblclick","onDoubleClick"),gc("focusin","onFocus"),gc("focusout","onBlur"),gc(Lv,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eg=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function tg(f,m,M){var D=f.type||"unknown-event";f.currentTarget=M,hc(D,m,void 0,f),f.currentTarget=null}function vf(f,m){m=(m&4)!==0;for(var M=0;M<f.length;M++){var D=f[M],$=D.event;D=D.listeners;e:{var J=void 0;if(m)for(var pe=D.length-1;0<=pe;pe--){var Ve=D[pe],Ke=Ve.instance,bt=Ve.currentTarget;if(Ve=Ve.listener,Ke!==J&&$.isPropagationStopped())break e;tg($,Ve,bt),J=Ke}else for(pe=0;pe<D.length;pe++){if(Ve=D[pe],Ke=Ve.instance,bt=Ve.currentTarget,Ve=Ve.listener,Ke!==J&&$.isPropagationStopped())break e;tg($,Ve,bt),J=Ke}}}if(Io)throw f=no,Io=!1,no=null,f}function _i(f,m){var M=m[id];M===void 0&&(M=m[id]=new Set);var D=f+"__bubble";M.has(D)||(rg(m,f,2,!1),M.add(D))}function ng(f,m,M){var D=0;m&&(D|=4),rg(M,f,D,m)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function _f(f){if(!f[Yh]){f[Yh]=!0,r.forEach(function(M){M!=="selectionchange"&&(eg.has(M)||ng(M,!1,f),ng(M,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[Yh]||(m[Yh]=!0,ng("selectionchange",!1,m))}}function rg(f,m,M,D){switch(Xe(m)){case 1:var $=tt;break;case 4:$=Et;break;default:$=dn}M=$.bind(null,m,M,f),$=void 0,!Vl||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||($=!0),D?$!==void 0?f.addEventListener(m,M,{capture:!0,passive:$}):f.addEventListener(m,M,!0):$!==void 0?f.addEventListener(m,M,{passive:$}):f.addEventListener(m,M,!1)}function ig(f,m,M,D,$){var J=D;if(!(m&1)&&!(m&2)&&D!==null)e:for(;;){if(D===null)return;var pe=D.tag;if(pe===3||pe===4){var Ve=D.stateNode.containerInfo;if(Ve===$||Ve.nodeType===8&&Ve.parentNode===$)break;if(pe===4)for(pe=D.return;pe!==null;){var Ke=pe.tag;if((Ke===3||Ke===4)&&(Ke=pe.stateNode.containerInfo,Ke===$||Ke.nodeType===8&&Ke.parentNode===$))return;pe=pe.return}for(;Ve!==null;){if(pe=yu(Ve),pe===null)return;if(Ke=pe.tag,Ke===5||Ke===6){D=J=pe;continue e}Ve=Ve.parentNode}}D=D.return}hi(function(){var bt=J,Yt=$e(M),Zt=[];e:{var Xt=Dv.get(f);if(Xt!==void 0){var Nn=jn,zn=f;switch(f){case"keypress":if(_e(M)===0)break e;case"keydown":case"keyup":Nn=Qr;break;case"focusin":zn="focus",Nn=Wt;break;case"focusout":zn="blur",Nn=Wt;break;case"beforeblur":case"afterblur":Nn=Wt;break;case"click":if(M.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nn=Rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nn=ot;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nn=hl;break;case Gh:case Xh:case Ov:Nn=ln;break;case Lv:Nn=Us;break;case"scroll":Nn=jt;break;case"wheel":Nn=uf;break;case"copy":case"cut":case"paste":Nn=pr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nn=hs}var $n=(m&4)!==0,Rs=!$n&&f==="scroll",ft=$n?Xt!==null?Xt+"Capture":null:Xt;$n=[];for(var Je=bt,pt;Je!==null;){pt=Je;var sn=pt.stateNode;if(pt.tag===5&&sn!==null&&(pt=sn,ft!==null&&(sn=ui(Je,ft),sn!=null&&$n.push(xf(Je,sn,pt)))),Rs)break;Je=Je.return}0<$n.length&&(Xt=new Nn(Xt,zn,null,M,Yt),Zt.push({event:Xt,listeners:$n}))}}if(!(m&7)){e:{if(Xt=f==="mouseover"||f==="pointerover",Nn=f==="mouseout"||f==="pointerout",Xt&&M!==on&&(zn=M.relatedTarget||M.fromElement)&&(yu(zn)||zn[ma]))break e;if((Nn||Xt)&&(Xt=Yt.window===Yt?Yt:(Xt=Yt.ownerDocument)?Xt.defaultView||Xt.parentWindow:window,Nn?(zn=M.relatedTarget||M.toElement,Nn=bt,zn=zn?yu(zn):null,zn!==null&&(Rs=Ao(zn),zn!==Rs||zn.tag!==5&&zn.tag!==6)&&(zn=null)):(Nn=null,zn=bt),Nn!==zn)){if($n=Rn,sn="onMouseLeave",ft="onMouseEnter",Je="mouse",(f==="pointerout"||f==="pointerover")&&($n=hs,sn="onPointerLeave",ft="onPointerEnter",Je="pointer"),Rs=Nn==null?Xt:os(Nn),pt=zn==null?Xt:os(zn),Xt=new $n(sn,Je+"leave",Nn,M,Yt),Xt.target=Rs,Xt.relatedTarget=pt,sn=null,yu(Yt)===bt&&($n=new $n(ft,Je+"enter",zn,M,Yt),$n.target=pt,$n.relatedTarget=Rs,sn=$n),Rs=sn,Nn&&zn)t:{for($n=Nn,ft=zn,Je=0,pt=$n;pt;pt=nd(pt))Je++;for(pt=0,sn=ft;sn;sn=nd(sn))pt++;for(;0<Je-pt;)$n=nd($n),Je--;for(;0<pt-Je;)ft=nd(ft),pt--;for(;Je--;){if($n===ft||ft!==null&&$n===ft.alternate)break t;$n=nd($n),ft=nd(ft)}$n=null}else $n=null;Nn!==null&&kb(Zt,Xt,Nn,$n,!1),zn!==null&&Rs!==null&&kb(Zt,Rs,zn,$n,!0)}}e:{if(Xt=bt?os(bt):window,Nn=Xt.nodeName&&Xt.nodeName.toLowerCase(),Nn==="select"||Nn==="input"&&Xt.type==="file")var Qn=Rb;else if(Xm(Xt))if(mf)Qn=$i;else{Qn=Nb;var rr=gf}else(Nn=Xt.nodeName)&&Nn.toLowerCase()==="input"&&(Xt.type==="checkbox"||Xt.type==="radio")&&(Qn=kv);if(Qn&&(Qn=Qn(f,bt))){hf(Zt,Qn,M,Yt);break e}rr&&rr(f,Xt,bt),f==="focusout"&&(rr=Xt._wrapperState)&&rr.controlled&&Xt.type==="number"&&Te(Xt,"number",Xt.value)}switch(rr=bt?os(bt):window,f){case"focusin":(Xm(rr)||rr.contentEditable==="true")&&($l=rr,td=bt,Hh=null);break;case"focusout":Hh=td=$l=null;break;case"mousedown":Ws=!0;break;case"contextmenu":case"mouseup":case"dragend":Ws=!1,Jm(Zt,M,Yt);break;case"selectionchange":if(Ym)break;case"keydown":case"keyup":Jm(Zt,M,Yt)}var ir;if(Co)e:{switch(f){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else hu?Pv(f,M)&&(mr="onCompositionEnd"):f==="keydown"&&M.keyCode===229&&(mr="onCompositionStart");mr&&(df&&M.locale!=="ko"&&(hu||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&hu&&(ir=ue()):(qt=Yt,Ie="value"in qt?qt.value:qt.textContent,hu=!0)),rr=sg(bt,mr),0<rr.length&&(mr=new ki(mr,f,null,M,Yt),Zt.push({event:mr,listeners:rr}),ir?mr.data=ir:(ir=Gm(M),ir!==null&&(mr.data=ir)))),(ir=Oi?Ab(f,M):Wh(f,M))&&(bt=sg(bt,"onBeforeInput"),0<bt.length&&(Yt=new ki("onBeforeInput","beforeinput",null,M,Yt),Zt.push({event:Yt,listeners:bt}),Yt.data=ir))}vf(Zt,m)})}function xf(f,m,M){return{instance:f,listener:m,currentTarget:M}}function sg(f,m){for(var M=m+"Capture",D=[];f!==null;){var $=f,J=$.stateNode;$.tag===5&&J!==null&&($=J,J=ui(f,M),J!=null&&D.unshift(xf(f,J,$)),J=ui(f,m),J!=null&&D.push(xf(f,J,$))),f=f.return}return D}function nd(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function kb(f,m,M,D,$){for(var J=m._reactName,pe=[];M!==null&&M!==D;){var Ve=M,Ke=Ve.alternate,bt=Ve.stateNode;if(Ke!==null&&Ke===D)break;Ve.tag===5&&bt!==null&&(Ve=bt,$?(Ke=ui(M,J),Ke!=null&&pe.unshift(xf(M,Ke,Ve))):$||(Ke=ui(M,J),Ke!=null&&pe.push(xf(M,Ke,Ve)))),M=M.return}pe.length!==0&&f.push({event:m,listeners:pe})}var t3=/\r\n?/g,Ob=/\u0000|\uFFFD/g;function qv(f){return(typeof f=="string"?f:""+f).replace(t3,`
`).replace(Ob,"")}function Jh(f,m,M){if(m=qv(m),qv(f)!==m&&M)throw Error(t(425))}function Zh(){}var bf=null,jv=null;function Bv(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Uv=typeof setTimeout=="function"?setTimeout:void 0,zv=typeof clearTimeout=="function"?clearTimeout:void 0,og=typeof Promise=="function"?Promise:void 0,n3=typeof queueMicrotask=="function"?queueMicrotask:typeof og<"u"?function(f){return og.resolve(null).then(f).catch(Lb)}:Uv;function Lb(f){setTimeout(function(){throw f})}function ag(f,m){var M=m,D=0;do{var $=M.nextSibling;if(f.removeChild(M),$&&$.nodeType===8)if(M=$.data,M==="/$"){if(D===0){f.removeChild($),Ze(m);return}D--}else M!=="$"&&M!=="$?"&&M!=="$!"||D++;M=$}while(M);Ze(m)}function yc(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function Vv(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var M=f.data;if(M==="$"||M==="$!"||M==="$?"){if(m===0)return f;m--}else M==="/$"&&m++}f=f.previousSibling}return null}var rd=Math.random().toString(36).slice(2),Cs="__reactFiber$"+rd,wf="__reactProps$"+rd,ma="__reactContainer$"+rd,id="__reactEvents$"+rd,lg="__reactListeners$"+rd,cg="__reactHandles$"+rd;function yu(f){var m=f[Cs];if(m)return m;for(var M=f.parentNode;M;){if(m=M[ma]||M[Cs]){if(M=m.alternate,m.child!==null||M!==null&&M.child!==null)for(f=Vv(f);f!==null;){if(M=f[Cs])return M;f=Vv(f)}return m}f=M,M=f.parentNode}return null}function vc(f){return f=f[Cs]||f[ma],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function os(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function ug(f){return f[wf]||null}var Wv=[],$s=-1;function Ki(f){return{current:f}}function xi(f){0>$s||(f.current=Wv[$s],Wv[$s]=null,$s--)}function yi(f,m){$s++,Wv[$s]=f.current,f.current=m}var _c={},io=Ki(_c),Ro=Ki(!1),xc=_c;function sd(f,m){var M=f.type.contextTypes;if(!M)return _c;var D=f.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===m)return D.__reactInternalMemoizedMaskedChildContext;var $={},J;for(J in M)$[J]=m[J];return D&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=$),$}function go(f){return f=f.childContextTypes,f!=null}function ep(){xi(Ro),xi(io)}function $v(f,m,M){if(io.current!==_c)throw Error(t(168));yi(io,m),yi(Ro,M)}function tp(f,m,M){var D=f.stateNode;if(m=m.childContextTypes,typeof D.getChildContext!="function")return M;D=D.getChildContext();for(var $ in D)if(!($ in m))throw Error(t(108,Ee(f)||"Unknown",$));return te({},M,D)}function od(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||_c,xc=io.current,yi(io,f),yi(Ro,Ro.current),!0}function Hv(f,m,M){var D=f.stateNode;if(!D)throw Error(t(169));M?(f=tp(f,m,xc),D.__reactInternalMemoizedMergedChildContext=f,xi(Ro),xi(io),yi(io,f)):xi(Ro),yi(Ro,M)}var vl=null,np=!1,dg=!1;function rp(f){vl===null?vl=[f]:vl.push(f)}function Db(f){np=!0,rp(f)}function Gl(){if(!dg&&vl!==null){dg=!0;var f=0,m=Vr;try{var M=vl;for(Vr=1;f<M.length;f++){var D=M[f];do D=D(!0);while(D!==null)}vl=null,np=!1}catch($){throw vl!==null&&(vl=vl.slice(f+1)),du(Gt,Gl),$}finally{Vr=m,dg=!1}}return null}var ad=[],Ho=0,fg=null,hg=0,No=[],Hs=0,ld=null,fn=1,Ba="";function bc(f,m){ad[Ho++]=hg,ad[Ho++]=fg,fg=f,hg=m}function Gv(f,m,M){No[Hs++]=fn,No[Hs++]=Ba,No[Hs++]=ld,ld=f;var D=fn;f=Ba;var $=32-Zn(D)-1;D&=~(1<<$),M+=1;var J=32-Zn(m)+$;if(30<J){var pe=$-$%5;J=(D&(1<<pe)-1).toString(32),D>>=pe,$-=pe,fn=1<<32-Zn(m)+$|M<<$|D,Ba=J+f}else fn=1<<J|M<<$|D,Ba=f}function Xv(f){f.return!==null&&(bc(f,1),Gv(f,1,0))}function wc(f){for(;f===fg;)fg=ad[--Ho],ad[Ho]=null,hg=ad[--Ho],ad[Ho]=null;for(;f===ld;)ld=No[--Hs],No[Hs]=null,Ba=No[--Hs],No[Hs]=null,fn=No[--Hs],No[Hs]=null}var so=null,Po=null,Ii=!1,Ua=null;function Kv(f,m){var M=Jl(5,null,null,0);M.elementType="DELETED",M.stateNode=m,M.return=f,m=f.deletions,m===null?(f.deletions=[M],f.flags|=16):m.push(M)}function Qv(f,m){switch(f.tag){case 5:var M=f.type;return m=m.nodeType!==1||M.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,so=f,Po=yc(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,so=f,Po=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(M=ld!==null?{id:fn,overflow:Ba}:null,f.memoizedState={dehydrated:m,treeContext:M,retryLane:0x40000000},M=Jl(18,null,null,0),M.stateNode=m,M.return=f,f.child=M,so=f,Po=null,!0):!1;default:return!1}}function pg(f){return(f.mode&1)!==0&&(f.flags&128)===0}function mg(f){if(Ii){var m=Po;if(m){var M=m;if(!Qv(f,m)){if(pg(f))throw Error(t(418));m=yc(M.nextSibling);var D=so;m&&Qv(f,m)?Kv(D,M):(f.flags=f.flags&-4097|2,Ii=!1,so=f)}}else{if(pg(f))throw Error(t(418));f.flags=f.flags&-4097|2,Ii=!1,so=f}}}function gg(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;so=f}function Sf(f){if(f!==so)return!1;if(!Ii)return gg(f),Ii=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!Bv(f.type,f.memoizedProps)),m&&(m=Po)){if(pg(f))throw Yv(),Error(t(418));for(;m;)Kv(f,m),m=yc(m.nextSibling)}if(gg(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var M=f.data;if(M==="/$"){if(m===0){Po=yc(f.nextSibling);break e}m--}else M!=="$"&&M!=="$!"&&M!=="$?"||m++}f=f.nextSibling}Po=null}}else Po=so?yc(f.stateNode.nextSibling):null;return!0}function Yv(){for(var f=Po;f;)f=yc(f.nextSibling)}function vu(){Po=so=null,Ii=!1}function Ef(f){Ua===null?Ua=[f]:Ua.push(f)}var r3=I.ReactCurrentBatchConfig;function ip(f,m,M){if(f=M.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(M._owner){if(M=M._owner,M){if(M.tag!==1)throw Error(t(309));var D=M.stateNode}if(!D)throw Error(t(147,f));var $=D,J=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===J?m.ref:(m=function(pe){var Ve=$.refs;pe===null?delete Ve[J]:Ve[J]=pe},m._stringRef=J,m)}if(typeof f!="string")throw Error(t(284));if(!M._owner)throw Error(t(290,f))}return f}function sp(f,m){throw f=Object.prototype.toString.call(m),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function Jv(f){var m=f._init;return m(f._payload)}function Zv(f){function m(ft,Je){if(f){var pt=ft.deletions;pt===null?(ft.deletions=[Je],ft.flags|=16):pt.push(Je)}}function M(ft,Je){if(!f)return null;for(;Je!==null;)m(ft,Je),Je=Je.sibling;return null}function D(ft,Je){for(ft=new Map;Je!==null;)Je.key!==null?ft.set(Je.key,Je):ft.set(Je.index,Je),Je=Je.sibling;return ft}function $(ft,Je){return ft=Lf(ft,Je),ft.index=0,ft.sibling=null,ft}function J(ft,Je,pt){return ft.index=pt,f?(pt=ft.alternate,pt!==null?(pt=pt.index,pt<Je?(ft.flags|=2,Je):pt):(ft.flags|=2,Je)):(ft.flags|=1048576,Je)}function pe(ft){return f&&ft.alternate===null&&(ft.flags|=2),ft}function Ve(ft,Je,pt,sn){return Je===null||Je.tag!==6?(Je=w3(pt,ft.mode,sn),Je.return=ft,Je):(Je=$(Je,pt),Je.return=ft,Je)}function Ke(ft,Je,pt,sn){var Qn=pt.type;return Qn===q?Yt(ft,Je,pt.props.children,sn,pt.key):Je!==null&&(Je.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===X&&Jv(Qn)===Je.type)?(sn=$(Je,pt.props),sn.ref=ip(ft,Je,pt),sn.return=ft,sn):(sn=sw(pt.type,pt.key,pt.props,null,ft.mode,sn),sn.ref=ip(ft,Je,pt),sn.return=ft,sn)}function bt(ft,Je,pt,sn){return Je===null||Je.tag!==4||Je.stateNode.containerInfo!==pt.containerInfo||Je.stateNode.implementation!==pt.implementation?(Je=S3(pt,ft.mode,sn),Je.return=ft,Je):(Je=$(Je,pt.children||[]),Je.return=ft,Je)}function Yt(ft,Je,pt,sn,Qn){return Je===null||Je.tag!==7?(Je=wp(pt,ft.mode,sn,Qn),Je.return=ft,Je):(Je=$(Je,pt),Je.return=ft,Je)}function Zt(ft,Je,pt){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Je=w3(""+Je,ft.mode,pt),Je.return=ft,Je;if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case N:return pt=sw(Je.type,Je.key,Je.props,null,ft.mode,pt),pt.ref=ip(ft,null,Je),pt.return=ft,pt;case k:return Je=S3(Je,ft.mode,pt),Je.return=ft,Je;case X:var sn=Je._init;return Zt(ft,sn(Je._payload),pt)}if(Ae(Je)||Y(Je))return Je=wp(Je,ft.mode,pt,null),Je.return=ft,Je;sp(ft,Je)}return null}function Xt(ft,Je,pt,sn){var Qn=Je!==null?Je.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Qn!==null?null:Ve(ft,Je,""+pt,sn);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case N:return pt.key===Qn?Ke(ft,Je,pt,sn):null;case k:return pt.key===Qn?bt(ft,Je,pt,sn):null;case X:return Qn=pt._init,Xt(ft,Je,Qn(pt._payload),sn)}if(Ae(pt)||Y(pt))return Qn!==null?null:Yt(ft,Je,pt,sn,null);sp(ft,pt)}return null}function Nn(ft,Je,pt,sn,Qn){if(typeof sn=="string"&&sn!==""||typeof sn=="number")return ft=ft.get(pt)||null,Ve(Je,ft,""+sn,Qn);if(typeof sn=="object"&&sn!==null){switch(sn.$$typeof){case N:return ft=ft.get(sn.key===null?pt:sn.key)||null,Ke(Je,ft,sn,Qn);case k:return ft=ft.get(sn.key===null?pt:sn.key)||null,bt(Je,ft,sn,Qn);case X:var rr=sn._init;return Nn(ft,Je,pt,rr(sn._payload),Qn)}if(Ae(sn)||Y(sn))return ft=ft.get(pt)||null,Yt(Je,ft,sn,Qn,null);sp(Je,sn)}return null}function zn(ft,Je,pt,sn){for(var Qn=null,rr=null,ir=Je,mr=Je=0,xo=null;ir!==null&&mr<pt.length;mr++){ir.index>mr?(xo=ir,ir=null):xo=ir.sibling;var li=Xt(ft,ir,pt[mr],sn);if(li===null){ir===null&&(ir=xo);break}f&&ir&&li.alternate===null&&m(ft,ir),Je=J(li,Je,mr),rr===null?Qn=li:rr.sibling=li,rr=li,ir=xo}if(mr===pt.length)return M(ft,ir),Ii&&bc(ft,mr),Qn;if(ir===null){for(;mr<pt.length;mr++)ir=Zt(ft,pt[mr],sn),ir!==null&&(Je=J(ir,Je,mr),rr===null?Qn=ir:rr.sibling=ir,rr=ir);return Ii&&bc(ft,mr),Qn}for(ir=D(ft,ir);mr<pt.length;mr++)xo=Nn(ir,ft,mr,pt[mr],sn),xo!==null&&(f&&xo.alternate!==null&&ir.delete(xo.key===null?mr:xo.key),Je=J(xo,Je,mr),rr===null?Qn=xo:rr.sibling=xo,rr=xo);return f&&ir.forEach(function(Df){return m(ft,Df)}),Ii&&bc(ft,mr),Qn}function $n(ft,Je,pt,sn){var Qn=Y(pt);if(typeof Qn!="function")throw Error(t(150));if(pt=Qn.call(pt),pt==null)throw Error(t(151));for(var rr=Qn=null,ir=Je,mr=Je=0,xo=null,li=pt.next();ir!==null&&!li.done;mr++,li=pt.next()){ir.index>mr?(xo=ir,ir=null):xo=ir.sibling;var Df=Xt(ft,ir,li.value,sn);if(Df===null){ir===null&&(ir=xo);break}f&&ir&&Df.alternate===null&&m(ft,ir),Je=J(Df,Je,mr),rr===null?Qn=Df:rr.sibling=Df,rr=Df,ir=xo}if(li.done)return M(ft,ir),Ii&&bc(ft,mr),Qn;if(ir===null){for(;!li.done;mr++,li=pt.next())li=Zt(ft,li.value,sn),li!==null&&(Je=J(li,Je,mr),rr===null?Qn=li:rr.sibling=li,rr=li);return Ii&&bc(ft,mr),Qn}for(ir=D(ft,ir);!li.done;mr++,li=pt.next())li=Nn(ir,ft,mr,li.value,sn),li!==null&&(f&&li.alternate!==null&&ir.delete(li.key===null?mr:li.key),Je=J(li,Je,mr),rr===null?Qn=li:rr.sibling=li,rr=li);return f&&ir.forEach(function(w7){return m(ft,w7)}),Ii&&bc(ft,mr),Qn}function Rs(ft,Je,pt,sn){if(typeof pt=="object"&&pt!==null&&pt.type===q&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case N:e:{for(var Qn=pt.key,rr=Je;rr!==null;){if(rr.key===Qn){if(Qn=pt.type,Qn===q){if(rr.tag===7){M(ft,rr.sibling),Je=$(rr,pt.props.children),Je.return=ft,ft=Je;break e}}else if(rr.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===X&&Jv(Qn)===rr.type){M(ft,rr.sibling),Je=$(rr,pt.props),Je.ref=ip(ft,rr,pt),Je.return=ft,ft=Je;break e}M(ft,rr);break}else m(ft,rr);rr=rr.sibling}pt.type===q?(Je=wp(pt.props.children,ft.mode,sn,pt.key),Je.return=ft,ft=Je):(sn=sw(pt.type,pt.key,pt.props,null,ft.mode,sn),sn.ref=ip(ft,Je,pt),sn.return=ft,ft=sn)}return pe(ft);case k:e:{for(rr=pt.key;Je!==null;){if(Je.key===rr)if(Je.tag===4&&Je.stateNode.containerInfo===pt.containerInfo&&Je.stateNode.implementation===pt.implementation){M(ft,Je.sibling),Je=$(Je,pt.children||[]),Je.return=ft,ft=Je;break e}else{M(ft,Je);break}else m(ft,Je);Je=Je.sibling}Je=S3(pt,ft.mode,sn),Je.return=ft,ft=Je}return pe(ft);case X:return rr=pt._init,Rs(ft,Je,rr(pt._payload),sn)}if(Ae(pt))return zn(ft,Je,pt,sn);if(Y(pt))return $n(ft,Je,pt,sn);sp(ft,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"?(pt=""+pt,Je!==null&&Je.tag===6?(M(ft,Je.sibling),Je=$(Je,pt),Je.return=ft,ft=Je):(M(ft,Je),Je=w3(pt,ft.mode,sn),Je.return=ft,ft=Je),pe(ft)):M(ft,Je)}return Rs}var cd=Zv(!0),op=Zv(!1),ud=Ki(null),dd=null,Sc=null,Tf=null;function fd(){Tf=Sc=dd=null}function ap(f){var m=ud.current;xi(ud),f._currentValue=m}function lp(f,m,M){for(;f!==null;){var D=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,D!==null&&(D.childLanes|=m)):D!==null&&(D.childLanes&m)!==m&&(D.childLanes|=m),f===M)break;f=f.return}}function _u(f,m){dd=f,Tf=Sc=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&m&&(Nr=!0),f.firstContext=null)}function ga(f){var m=f._currentValue;if(Tf!==f)if(f={context:f,memoizedValue:m,next:null},Sc===null){if(dd===null)throw Error(t(308));Sc=f,dd.dependencies={lanes:0,firstContext:f}}else Sc=Sc.next=f;return m}var Ec=null;function e_(f){Ec===null?Ec=[f]:Ec.push(f)}function cp(f,m,M,D){var $=m.interleaved;return $===null?(M.next=M,e_(m)):(M.next=$.next,$.next=M),m.interleaved=M,_l(f,D)}function _l(f,m){f.lanes|=m;var M=f.alternate;for(M!==null&&(M.lanes|=m),M=f,f=f.return;f!==null;)f.childLanes|=m,M=f.alternate,M!==null&&(M.childLanes|=m),M=f,f=f.return;return M.tag===3?M.stateNode:null}var pi=!1;function Ir(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function as(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function mi(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Li(f,m,M){var D=f.updateQueue;if(D===null)return null;if(D=D.shared,ii&2){var $=D.pending;return $===null?m.next=m:(m.next=$.next,$.next=m),D.pending=m,_l(f,M)}return $=D.interleaved,$===null?(m.next=m,e_(D)):(m.next=$.next,$.next=m),D.interleaved=m,_l(f,M)}function yo(f,m,M){if(m=m.updateQueue,m!==null&&(m=m.shared,(M&4194240)!==0)){var D=m.lanes;D&=f.pendingLanes,M|=D,m.lanes=M,Vi(f,M)}}function hd(f,m){var M=f.updateQueue,D=f.alternate;if(D!==null&&(D=D.updateQueue,M===D)){var $=null,J=null;if(M=M.firstBaseUpdate,M!==null){do{var pe={eventTime:M.eventTime,lane:M.lane,tag:M.tag,payload:M.payload,callback:M.callback,next:null};J===null?$=J=pe:J=J.next=pe,M=M.next}while(M!==null);J===null?$=J=m:J=J.next=m}else $=J=m;M={baseState:D.baseState,firstBaseUpdate:$,lastBaseUpdate:J,shared:D.shared,effects:D.effects},f.updateQueue=M;return}f=M.lastBaseUpdate,f===null?M.firstBaseUpdate=m:f.next=m,M.lastBaseUpdate=m}function Qi(f,m,M,D){var $=f.updateQueue;pi=!1;var J=$.firstBaseUpdate,pe=$.lastBaseUpdate,Ve=$.shared.pending;if(Ve!==null){$.shared.pending=null;var Ke=Ve,bt=Ke.next;Ke.next=null,pe===null?J=bt:pe.next=bt,pe=Ke;var Yt=f.alternate;Yt!==null&&(Yt=Yt.updateQueue,Ve=Yt.lastBaseUpdate,Ve!==pe&&(Ve===null?Yt.firstBaseUpdate=bt:Ve.next=bt,Yt.lastBaseUpdate=Ke))}if(J!==null){var Zt=$.baseState;pe=0,Yt=bt=Ke=null,Ve=J;do{var Xt=Ve.lane,Nn=Ve.eventTime;if((D&Xt)===Xt){Yt!==null&&(Yt=Yt.next={eventTime:Nn,lane:0,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null});e:{var zn=f,$n=Ve;switch(Xt=m,Nn=M,$n.tag){case 1:if(zn=$n.payload,typeof zn=="function"){Zt=zn.call(Nn,Zt,Xt);break e}Zt=zn;break e;case 3:zn.flags=zn.flags&-65537|128;case 0:if(zn=$n.payload,Xt=typeof zn=="function"?zn.call(Nn,Zt,Xt):zn,Xt==null)break e;Zt=te({},Zt,Xt);break e;case 2:pi=!0}}Ve.callback!==null&&Ve.lane!==0&&(f.flags|=64,Xt=$.effects,Xt===null?$.effects=[Ve]:Xt.push(Ve))}else Nn={eventTime:Nn,lane:Xt,tag:Ve.tag,payload:Ve.payload,callback:Ve.callback,next:null},Yt===null?(bt=Yt=Nn,Ke=Zt):Yt=Yt.next=Nn,pe|=Xt;if(Ve=Ve.next,Ve===null){if(Ve=$.shared.pending,Ve===null)break;Xt=Ve,Ve=Xt.next,Xt.next=null,$.lastBaseUpdate=Xt,$.shared.pending=null}}while(!0);if(Yt===null&&(Ke=Zt),$.baseState=Ke,$.firstBaseUpdate=bt,$.lastBaseUpdate=Yt,m=$.shared.interleaved,m!==null){$=m;do pe|=$.lane,$=$.next;while($!==m)}else J===null&&($.shared.lanes=0);vp|=pe,f.lanes=pe,f.memoizedState=Zt}}function Mf(f,m,M){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var D=f[m],$=D.callback;if($!==null){if(D.callback=null,D=M,typeof $!="function")throw Error(t(191,$));$.call(D)}}}var Xl={},ya=Ki(Xl),pd=Ki(Xl),Tc=Ki(Xl);function ps(f){if(f===Xl)throw Error(t(174));return f}function up(f,m){switch(yi(Tc,m),yi(pd,f),yi(ya,Xl),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Lt(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=Lt(m,f)}xi(ya),yi(ya,m)}function xu(){xi(ya),xi(pd),xi(Tc)}function md(f){ps(Tc.current);var m=ps(ya.current),M=Lt(m,f.type);m!==M&&(yi(pd,f),yi(ya,M))}function If(f){pd.current===f&&(xi(ya),xi(pd))}var Ai=Ki(0);function xl(f){for(var m=f;m!==null;){if(m.tag===13){var M=m.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||M.data==="$?"||M.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Af=[];function Kl(){for(var f=0;f<Af.length;f++)Af[f]._workInProgressVersionPrimary=null;Af.length=0}var gd=I.ReactCurrentDispatcher,yd=I.ReactCurrentBatchConfig,Mc=0,bi=null,Yi=null,Jr=null,bl=!1,vo=!1,bu=0,Go=0;function oo(){throw Error(t(321))}function dp(f,m){if(m===null)return!1;for(var M=0;M<m.length&&M<f.length;M++)if(!ha(f[M],m[M]))return!1;return!0}function fp(f,m,M,D,$,J){if(Mc=J,bi=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,gd.current=f===null||f.memoizedState===null?Vb:Wb,f=M(D,$),vo){J=0;do{if(vo=!1,bu=0,25<=J)throw Error(t(301));J+=1,Jr=Yi=null,m.updateQueue=null,gd.current=$b,f=M(D,$)}while(vo)}if(gd.current=Sg,m=Yi!==null&&Yi.next!==null,Mc=0,Jr=Yi=bi=null,bl=!1,m)throw Error(t(300));return f}function t_(){var f=bu!==0;return bu=0,f}function ao(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jr===null?bi.memoizedState=Jr=f:Jr=Jr.next=f,Jr}function va(){if(Yi===null){var f=bi.alternate;f=f!==null?f.memoizedState:null}else f=Yi.next;var m=Jr===null?bi.memoizedState:Jr.next;if(m!==null)Jr=m,Yi=f;else{if(f===null)throw Error(t(310));Yi=f,f={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Jr===null?bi.memoizedState=Jr=f:Jr=Jr.next=f}return Jr}function Cf(f,m){return typeof m=="function"?m(f):m}function hp(f){var m=va(),M=m.queue;if(M===null)throw Error(t(311));M.lastRenderedReducer=f;var D=Yi,$=D.baseQueue,J=M.pending;if(J!==null){if($!==null){var pe=$.next;$.next=J.next,J.next=pe}D.baseQueue=$=J,M.pending=null}if($!==null){J=$.next,D=D.baseState;var Ve=pe=null,Ke=null,bt=J;do{var Yt=bt.lane;if((Mc&Yt)===Yt)Ke!==null&&(Ke=Ke.next={lane:0,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),D=bt.hasEagerState?bt.eagerState:f(D,bt.action);else{var Zt={lane:Yt,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null};Ke===null?(Ve=Ke=Zt,pe=D):Ke=Ke.next=Zt,bi.lanes|=Yt,vp|=Yt}bt=bt.next}while(bt!==null&&bt!==J);Ke===null?pe=D:Ke.next=Ve,ha(D,m.memoizedState)||(Nr=!0),m.memoizedState=D,m.baseState=pe,m.baseQueue=Ke,M.lastRenderedState=D}if(f=M.interleaved,f!==null){$=f;do J=$.lane,bi.lanes|=J,vp|=J,$=$.next;while($!==f)}else $===null&&(M.lanes=0);return[m.memoizedState,M.dispatch]}function Ic(f){var m=va(),M=m.queue;if(M===null)throw Error(t(311));M.lastRenderedReducer=f;var D=M.dispatch,$=M.pending,J=m.memoizedState;if($!==null){M.pending=null;var pe=$=$.next;do J=f(J,pe.action),pe=pe.next;while(pe!==$);ha(J,m.memoizedState)||(Nr=!0),m.memoizedState=J,m.baseQueue===null&&(m.baseState=J),M.lastRenderedState=J}return[J,D]}function n_(){}function r_(f,m){var M=bi,D=va(),$=m(),J=!ha(D.memoizedState,$);if(J&&(D.memoizedState=$,Nr=!0),D=D.queue,o_(Fb.bind(null,M,D,f),[f]),D.getSnapshot!==m||J||Jr!==null&&Jr.memoizedState.tag&1){if(M.flags|=2048,wl(9,pp.bind(null,M,D,$,m),void 0,null),_o===null)throw Error(t(349));Mc&30||yg(M,m,$)}return $}function yg(f,m,M){f.flags|=16384,f={getSnapshot:m,value:M},m=bi.updateQueue,m===null?(m={lastEffect:null,stores:null},bi.updateQueue=m,m.stores=[f]):(M=m.stores,M===null?m.stores=[f]:M.push(f))}function pp(f,m,M,D){m.value=M,m.getSnapshot=D,qb(m)&&i_(f)}function Fb(f,m,M){return M(function(){qb(m)&&i_(f)})}function qb(f){var m=f.getSnapshot;f=f.value;try{var M=m();return!ha(f,M)}catch{return!0}}function i_(f){var m=_l(f,1);m!==null&&Pc(m,f,1,-1)}function s_(f){var m=ao();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cf,lastRenderedState:f},m.queue=f,f=f.dispatch=vd.bind(null,bi,f),[m.memoizedState,f]}function wl(f,m,M,D){return f={tag:f,create:m,destroy:M,deps:D,next:null},m=bi.updateQueue,m===null?(m={lastEffect:null,stores:null},bi.updateQueue=m,m.lastEffect=f.next=f):(M=m.lastEffect,M===null?m.lastEffect=f.next=f:(D=M.next,M.next=f,f.next=D,m.lastEffect=f)),f}function jb(){return va().memoizedState}function Ql(f,m,M,D){var $=ao();bi.flags|=f,$.memoizedState=wl(1|m,M,void 0,D===void 0?null:D)}function mp(f,m,M,D){var $=va();D=D===void 0?null:D;var J=void 0;if(Yi!==null){var pe=Yi.memoizedState;if(J=pe.destroy,D!==null&&dp(D,pe.deps)){$.memoizedState=wl(m,M,J,D);return}}bi.flags|=f,$.memoizedState=wl(1|m,M,J,D)}function ko(f,m){return Ql(8390656,8,f,m)}function o_(f,m){return mp(2048,8,f,m)}function a_(f,m){return mp(4,2,f,m)}function Bb(f,m){return mp(4,4,f,m)}function Ub(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function l_(f,m,M){return M=M!=null?M.concat([f]):null,mp(4,4,Ub.bind(null,m,f),M)}function vg(){}function zb(f,m){var M=va();m=m===void 0?null:m;var D=M.memoizedState;return D!==null&&m!==null&&dp(m,D[1])?D[0]:(M.memoizedState=[f,m],f)}function _a(f,m){var M=va();m=m===void 0?null:m;var D=M.memoizedState;return D!==null&&m!==null&&dp(m,D[1])?D[0]:(f=f(),M.memoizedState=[f,m],f)}function _g(f,m,M){return Mc&21?(ha(M,m)||(M=Fr(),bi.lanes|=M,vp|=M,f.baseState=!0),m):(f.baseState&&(f.baseState=!1,Nr=!0),f.memoizedState=M)}function i3(f,m){var M=Vr;Vr=M!==0&&4>M?M:4,f(!0);var D=yd.transition;yd.transition={};try{f(!1),m()}finally{Vr=M,yd.transition=D}}function Ac(){return va().memoizedState}function xg(f,m,M){var D=kf(f);if(M={lane:D,action:M,hasEagerState:!1,eagerState:null,next:null},gp(f))bg(m,M);else if(M=cp(f,m,M,D),M!==null){var $=ba();Pc(M,f,D,$),wg(M,m,D)}}function vd(f,m,M){var D=kf(f),$={lane:D,action:M,hasEagerState:!1,eagerState:null,next:null};if(gp(f))bg(m,$);else{var J=f.alternate;if(f.lanes===0&&(J===null||J.lanes===0)&&(J=m.lastRenderedReducer,J!==null))try{var pe=m.lastRenderedState,Ve=J(pe,M);if($.hasEagerState=!0,$.eagerState=Ve,ha(Ve,pe)){var Ke=m.interleaved;Ke===null?($.next=$,e_(m)):($.next=Ke.next,Ke.next=$),m.interleaved=$;return}}catch{}finally{}M=cp(f,m,$,D),M!==null&&($=ba(),Pc(M,f,D,$),wg(M,m,D))}}function gp(f){var m=f.alternate;return f===bi||m!==null&&m===bi}function bg(f,m){vo=bl=!0;var M=f.pending;M===null?m.next=m:(m.next=M.next,M.next=m),f.pending=m}function wg(f,m,M){if(M&4194240){var D=m.lanes;D&=f.pendingLanes,M|=D,m.lanes=M,Vi(f,M)}}var Sg={readContext:ga,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useInsertionEffect:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useSyncExternalStore:oo,useId:oo,unstable_isNewReconciler:!1},Vb={readContext:ga,useCallback:function(f,m){return ao().memoizedState=[f,m===void 0?null:m],f},useContext:ga,useEffect:ko,useImperativeHandle:function(f,m,M){return M=M!=null?M.concat([f]):null,Ql(4194308,4,Ub.bind(null,m,f),M)},useLayoutEffect:function(f,m){return Ql(4194308,4,f,m)},useInsertionEffect:function(f,m){return Ql(4,2,f,m)},useMemo:function(f,m){var M=ao();return m=m===void 0?null:m,f=f(),M.memoizedState=[f,m],f},useReducer:function(f,m,M){var D=ao();return m=M!==void 0?M(m):m,D.memoizedState=D.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},D.queue=f,f=f.dispatch=xg.bind(null,bi,f),[D.memoizedState,f]},useRef:function(f){var m=ao();return f={current:f},m.memoizedState=f},useState:s_,useDebugValue:vg,useDeferredValue:function(f){return ao().memoizedState=f},useTransition:function(){var f=s_(!1),m=f[0];return f=i3.bind(null,f[1]),ao().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,M){var D=bi,$=ao();if(Ii){if(M===void 0)throw Error(t(407));M=M()}else{if(M=m(),_o===null)throw Error(t(349));Mc&30||yg(D,m,M)}$.memoizedState=M;var J={value:M,getSnapshot:m};return $.queue=J,ko(Fb.bind(null,D,J,f),[f]),D.flags|=2048,wl(9,pp.bind(null,D,J,M,m),void 0,null),M},useId:function(){var f=ao(),m=_o.identifierPrefix;if(Ii){var M=Ba,D=fn;M=(D&~(1<<32-Zn(D)-1)).toString(32)+M,m=":"+m+"R"+M,M=bu++,0<M&&(m+="H"+M.toString(32)),m+=":"}else M=Go++,m=":"+m+"r"+M.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},Wb={readContext:ga,useCallback:zb,useContext:ga,useEffect:o_,useImperativeHandle:l_,useInsertionEffect:a_,useLayoutEffect:Bb,useMemo:_a,useReducer:hp,useRef:jb,useState:function(){return hp(Cf)},useDebugValue:vg,useDeferredValue:function(f){var m=va();return _g(m,Yi.memoizedState,f)},useTransition:function(){var f=hp(Cf)[0],m=va().memoizedState;return[f,m]},useMutableSource:n_,useSyncExternalStore:r_,useId:Ac,unstable_isNewReconciler:!1},$b={readContext:ga,useCallback:zb,useContext:ga,useEffect:o_,useImperativeHandle:l_,useInsertionEffect:a_,useLayoutEffect:Bb,useMemo:_a,useReducer:Ic,useRef:jb,useState:function(){return Ic(Cf)},useDebugValue:vg,useDeferredValue:function(f){var m=va();return Yi===null?m.memoizedState=f:_g(m,Yi.memoizedState,f)},useTransition:function(){var f=Ic(Cf)[0],m=va().memoizedState;return[f,m]},useMutableSource:n_,useSyncExternalStore:r_,useId:Ac,unstable_isNewReconciler:!1};function za(f,m){if(f&&f.defaultProps){m=te({},m),f=f.defaultProps;for(var M in f)m[M]===void 0&&(m[M]=f[M]);return m}return m}function yp(f,m,M,D){m=f.memoizedState,M=M(D,m),M=M==null?m:te({},m,M),f.memoizedState=M,f.lanes===0&&(f.updateQueue.baseState=M)}var Eg={isMounted:function(f){return(f=f._reactInternals)?Ao(f)===f:!1},enqueueSetState:function(f,m,M){f=f._reactInternals;var D=ba(),$=kf(f),J=mi(D,$);J.payload=m,M!=null&&(J.callback=M),m=Li(f,J,$),m!==null&&(Pc(m,f,$,D),yo(m,f,$))},enqueueReplaceState:function(f,m,M){f=f._reactInternals;var D=ba(),$=kf(f),J=mi(D,$);J.tag=1,J.payload=m,M!=null&&(J.callback=M),m=Li(f,J,$),m!==null&&(Pc(m,f,$,D),yo(m,f,$))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var M=ba(),D=kf(f),$=mi(M,D);$.tag=2,m!=null&&($.callback=m),m=Li(f,$,D),m!==null&&(Pc(m,f,D,M),yo(m,f,D))}};function Hb(f,m,M,D,$,J,pe){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(D,J,pe):m.prototype&&m.prototype.isPureReactComponent?!Zu(M,D)||!Zu($,J):!0}function _(f,m,M){var D=!1,$=_c,J=m.contextType;return typeof J=="object"&&J!==null?J=ga(J):($=go(m)?xc:io.current,D=m.contextTypes,J=(D=D!=null)?sd(f,$):_c),m=new m(M,J),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Eg,f.stateNode=m,m._reactInternals=f,D&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=$,f.__reactInternalMemoizedMaskedChildContext=J),m}function w(f,m,M,D){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(M,D),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(M,D),m.state!==f&&Eg.enqueueReplaceState(m,m.state,null)}function O(f,m,M,D){var $=f.stateNode;$.props=M,$.state=f.memoizedState,$.refs={},Ir(f);var J=m.contextType;typeof J=="object"&&J!==null?$.context=ga(J):(J=go(m)?xc:io.current,$.context=sd(f,J)),$.state=f.memoizedState,J=m.getDerivedStateFromProps,typeof J=="function"&&(yp(f,m,J,M),$.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(m=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),m!==$.state&&Eg.enqueueReplaceState($,$.state,null),Qi(f,M,$,D),$.state=f.memoizedState),typeof $.componentDidMount=="function"&&(f.flags|=4194308)}function j(f,m){try{var M="",D=m;do M+=ye(D),D=D.return;while(D);var $=M}catch(J){$=`
Error generating stack: `+J.message+`
`+J.stack}return{value:f,source:m,stack:$,digest:null}}function K(f,m,M){return{value:f,source:null,stack:M??null,digest:m??null}}function ae(f,m){try{console.error(m.value)}catch(M){setTimeout(function(){throw M})}}var Fe=typeof WeakMap=="function"?WeakMap:Map;function et(f,m,M){M=mi(-1,M),M.tag=3,M.payload={element:null};var D=m.value;return M.callback=function(){Zb||(Zb=!0,p3=D),ae(f,m)},M}function Nt(f,m,M){M=mi(-1,M),M.tag=3;var D=f.type.getDerivedStateFromError;if(typeof D=="function"){var $=m.value;M.payload=function(){return D($)},M.callback=function(){ae(f,m)}}var J=f.stateNode;return J!==null&&typeof J.componentDidCatch=="function"&&(M.callback=function(){ae(f,m),typeof D!="function"&&(Nf===null?Nf=new Set([this]):Nf.add(this));var pe=m.stack;this.componentDidCatch(m.value,{componentStack:pe!==null?pe:""})}),M}function rn(f,m,M){var D=f.pingCache;if(D===null){D=f.pingCache=new Fe;var $=new Set;D.set(m,$)}else $=D.get(m),$===void 0&&($=new Set,D.set(m,$));$.has(M)||($.add(M),f=d7.bind(null,f,m,M),m.then(f,f))}function Dn(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function vr(f,m,M,D,$){return f.mode&1?(f.flags|=65536,f.lanes=$,f):(f===m?f.flags|=65536:(f.flags|=128,M.flags|=131072,M.flags&=-52805,M.tag===1&&(M.alternate===null?M.tag=17:(m=mi(-1,1),m.tag=2,Li(M,m,1))),M.lanes|=1),f)}var tr=I.ReactCurrentOwner,Nr=!1;function Mn(f,m,M,D){m.child=f===null?op(m,null,M,D):cd(m,f.child,M,D)}function lo(f,m,M,D,$){M=M.render;var J=m.ref;return _u(m,$),D=fp(f,m,M,D,J,$),M=t_(),f!==null&&!Nr?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~$,_d(f,m,$)):(Ii&&M&&Xv(m),m.flags|=1,Mn(f,m,D,$),m.child)}function xa(f,m,M,D,$){if(f===null){var J=M.type;return typeof J=="function"&&!b3(J)&&J.defaultProps===void 0&&M.compare===null&&M.defaultProps===void 0?(m.tag=15,m.type=J,gt(f,m,J,D,$)):(f=sw(M.type,null,D,m,m.mode,$),f.ref=m.ref,f.return=m,m.child=f)}if(J=f.child,!(f.lanes&$)){var pe=J.memoizedProps;if(M=M.compare,M=M!==null?M:Zu,M(pe,D)&&f.ref===m.ref)return _d(f,m,$)}return m.flags|=1,f=Lf(J,D),f.ref=m.ref,f.return=m,m.child=f}function gt(f,m,M,D,$){if(f!==null){var J=f.memoizedProps;if(Zu(J,D)&&f.ref===m.ref)if(Nr=!1,m.pendingProps=D=J,(f.lanes&$)!==0)f.flags&131072&&(Nr=!0);else return m.lanes=f.lanes,_d(f,m,$)}return bn(f,m,M,D,$)}function st(f,m,M){var D=m.pendingProps,$=D.children,J=f!==null?f.memoizedState:null;if(D.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},yi(Mg,Sl),Sl|=M;else{if(!(M&0x40000000))return f=J!==null?J.baseLanes|M:M,m.lanes=m.childLanes=0x40000000,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,yi(Mg,Sl),Sl|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=J!==null?J.baseLanes:M,yi(Mg,Sl),Sl|=D}else J!==null?(D=J.baseLanes|M,m.memoizedState=null):D=M,yi(Mg,Sl),Sl|=D;return Mn(f,m,$,M),m.child}function It(f,m){var M=m.ref;(f===null&&M!==null||f!==null&&f.ref!==M)&&(m.flags|=512,m.flags|=2097152)}function bn(f,m,M,D,$){var J=go(M)?xc:io.current;return J=sd(m,J),_u(m,$),M=fp(f,m,M,D,J,$),D=t_(),f!==null&&!Nr?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~$,_d(f,m,$)):(Ii&&D&&Xv(m),m.flags|=1,Mn(f,m,M,$),m.child)}function Gn(f,m,M,D,$){if(go(M)){var J=!0;od(m)}else J=!1;if(_u(m,$),m.stateNode===null)Xb(f,m),_(m,M,D),O(m,M,D,$),D=!0;else if(f===null){var pe=m.stateNode,Ve=m.memoizedProps;pe.props=Ve;var Ke=pe.context,bt=M.contextType;typeof bt=="object"&&bt!==null?bt=ga(bt):(bt=go(M)?xc:io.current,bt=sd(m,bt));var Yt=M.getDerivedStateFromProps,Zt=typeof Yt=="function"||typeof pe.getSnapshotBeforeUpdate=="function";Zt||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Ve!==D||Ke!==bt)&&w(m,pe,D,bt),pi=!1;var Xt=m.memoizedState;pe.state=Xt,Qi(m,D,pe,$),Ke=m.memoizedState,Ve!==D||Xt!==Ke||Ro.current||pi?(typeof Yt=="function"&&(yp(m,M,Yt,D),Ke=m.memoizedState),(Ve=pi||Hb(m,M,Ve,D,Xt,Ke,bt))?(Zt||typeof pe.UNSAFE_componentWillMount!="function"&&typeof pe.componentWillMount!="function"||(typeof pe.componentWillMount=="function"&&pe.componentWillMount(),typeof pe.UNSAFE_componentWillMount=="function"&&pe.UNSAFE_componentWillMount()),typeof pe.componentDidMount=="function"&&(m.flags|=4194308)):(typeof pe.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=D,m.memoizedState=Ke),pe.props=D,pe.state=Ke,pe.context=bt,D=Ve):(typeof pe.componentDidMount=="function"&&(m.flags|=4194308),D=!1)}else{pe=m.stateNode,as(f,m),Ve=m.memoizedProps,bt=m.type===m.elementType?Ve:za(m.type,Ve),pe.props=bt,Zt=m.pendingProps,Xt=pe.context,Ke=M.contextType,typeof Ke=="object"&&Ke!==null?Ke=ga(Ke):(Ke=go(M)?xc:io.current,Ke=sd(m,Ke));var Nn=M.getDerivedStateFromProps;(Yt=typeof Nn=="function"||typeof pe.getSnapshotBeforeUpdate=="function")||typeof pe.UNSAFE_componentWillReceiveProps!="function"&&typeof pe.componentWillReceiveProps!="function"||(Ve!==Zt||Xt!==Ke)&&w(m,pe,D,Ke),pi=!1,Xt=m.memoizedState,pe.state=Xt,Qi(m,D,pe,$);var zn=m.memoizedState;Ve!==Zt||Xt!==zn||Ro.current||pi?(typeof Nn=="function"&&(yp(m,M,Nn,D),zn=m.memoizedState),(bt=pi||Hb(m,M,bt,D,Xt,zn,Ke)||!1)?(Yt||typeof pe.UNSAFE_componentWillUpdate!="function"&&typeof pe.componentWillUpdate!="function"||(typeof pe.componentWillUpdate=="function"&&pe.componentWillUpdate(D,zn,Ke),typeof pe.UNSAFE_componentWillUpdate=="function"&&pe.UNSAFE_componentWillUpdate(D,zn,Ke)),typeof pe.componentDidUpdate=="function"&&(m.flags|=4),typeof pe.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof pe.componentDidUpdate!="function"||Ve===f.memoizedProps&&Xt===f.memoizedState||(m.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Ve===f.memoizedProps&&Xt===f.memoizedState||(m.flags|=1024),m.memoizedProps=D,m.memoizedState=zn),pe.props=D,pe.state=zn,pe.context=Ke,D=bt):(typeof pe.componentDidUpdate!="function"||Ve===f.memoizedProps&&Xt===f.memoizedState||(m.flags|=4),typeof pe.getSnapshotBeforeUpdate!="function"||Ve===f.memoizedProps&&Xt===f.memoizedState||(m.flags|=1024),D=!1)}return Sr(f,m,M,D,J,$)}function Sr(f,m,M,D,$,J){It(f,m);var pe=(m.flags&128)!==0;if(!D&&!pe)return $&&Hv(m,M,!1),_d(f,m,J);D=m.stateNode,tr.current=m;var Ve=pe&&typeof M.getDerivedStateFromError!="function"?null:D.render();return m.flags|=1,f!==null&&pe?(m.child=cd(m,f.child,null,J),m.child=cd(m,null,Ve,J)):Mn(f,m,Ve,J),m.memoizedState=D.state,$&&Hv(m,M,!0),m.child}function _r(f){var m=f.stateNode;m.pendingContext?$v(f,m.pendingContext,m.pendingContext!==m.context):m.context&&$v(f,m.context,!1),up(f,m.containerInfo)}function Yr(f,m,M,D,$){return vu(),Ef($),m.flags|=256,Mn(f,m,M,D),m.child}var ms={dehydrated:null,treeContext:null,retryLane:0};function Kr(f){return{baseLanes:f,cachePool:null,transitions:null}}function Cc(f,m,M){var D=m.pendingProps,$=Ai.current,J=!1,pe=(m.flags&128)!==0,Ve;if((Ve=pe)||(Ve=f!==null&&f.memoizedState===null?!1:($&2)!==0),Ve?(J=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&($|=1),yi(Ai,$&1),f===null)return mg(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(m.mode&1?f.data==="$!"?m.lanes=8:m.lanes=0x40000000:m.lanes=1,null):(pe=D.children,f=D.fallback,J?(D=m.mode,J=m.child,pe={mode:"hidden",children:pe},!(D&1)&&J!==null?(J.childLanes=0,J.pendingProps=pe):J=ow(pe,D,0,null),f=wp(f,D,M,null),J.return=m,f.return=m,J.sibling=f,m.child=J,m.child.memoizedState=Kr(M),m.memoizedState=ms,f):c_(m,pe));if($=f.memoizedState,$!==null&&(Ve=$.dehydrated,Ve!==null))return ZH(f,m,pe,D,Ve,$,M);if(J){J=D.fallback,pe=m.mode,$=f.child,Ve=$.sibling;var Ke={mode:"hidden",children:D.children};return!(pe&1)&&m.child!==$?(D=m.child,D.childLanes=0,D.pendingProps=Ke,m.deletions=null):(D=Lf($,Ke),D.subtreeFlags=$.subtreeFlags&0xe00000),Ve!==null?J=Lf(Ve,J):(J=wp(J,pe,M,null),J.flags|=2),J.return=m,D.return=m,D.sibling=J,m.child=D,D=J,J=m.child,pe=f.child.memoizedState,pe=pe===null?Kr(M):{baseLanes:pe.baseLanes|M,cachePool:null,transitions:pe.transitions},J.memoizedState=pe,J.childLanes=f.childLanes&~M,m.memoizedState=ms,D}return J=f.child,f=J.sibling,D=Lf(J,{mode:"visible",children:D.children}),!(m.mode&1)&&(D.lanes=M),D.return=m,D.sibling=null,f!==null&&(M=m.deletions,M===null?(m.deletions=[f],m.flags|=16):M.push(f)),m.child=D,m.memoizedState=null,D}function c_(f,m){return m=ow({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function Gb(f,m,M,D){return D!==null&&Ef(D),cd(m,f.child,null,M),f=c_(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function ZH(f,m,M,D,$,J,pe){if(M)return m.flags&256?(m.flags&=-257,D=K(Error(t(422))),Gb(f,m,pe,D)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(J=D.fallback,$=m.mode,D=ow({mode:"visible",children:D.children},$,0,null),J=wp(J,$,pe,null),J.flags|=2,D.return=m,J.return=m,D.sibling=J,m.child=D,m.mode&1&&cd(m,f.child,null,pe),m.child.memoizedState=Kr(pe),m.memoizedState=ms,J);if(!(m.mode&1))return Gb(f,m,pe,null);if($.data==="$!"){if(D=$.nextSibling&&$.nextSibling.dataset,D)var Ve=D.dgst;return D=Ve,J=Error(t(419)),D=K(J,D,void 0),Gb(f,m,pe,D)}if(Ve=(pe&f.childLanes)!==0,Nr||Ve){if(D=_o,D!==null){switch(pe&-pe){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:$=32;break;case 0x20000000:$=0x10000000;break;default:$=0}$=$&(D.suspendedLanes|pe)?0:$,$!==0&&$!==J.retryLane&&(J.retryLane=$,_l(f,$),Pc(D,f,$,-1))}return x3(),D=K(Error(t(421))),Gb(f,m,pe,D)}return $.data==="$?"?(m.flags|=128,m.child=f.child,m=f7.bind(null,f),$._reactRetry=m,null):(f=J.treeContext,Po=yc($.nextSibling),so=m,Ii=!0,Ua=null,f!==null&&(No[Hs++]=fn,No[Hs++]=Ba,No[Hs++]=ld,fn=f.id,Ba=f.overflow,ld=m),m=c_(m,D.children),m.flags|=4096,m)}function Ck(f,m,M){f.lanes|=m;var D=f.alternate;D!==null&&(D.lanes|=m),lp(f.return,m,M)}function s3(f,m,M,D,$){var J=f.memoizedState;J===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:D,tail:M,tailMode:$}:(J.isBackwards=m,J.rendering=null,J.renderingStartTime=0,J.last=D,J.tail=M,J.tailMode=$)}function Rk(f,m,M){var D=m.pendingProps,$=D.revealOrder,J=D.tail;if(Mn(f,m,D.children,M),D=Ai.current,D&2)D=D&1|2,m.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Ck(f,M,m);else if(f.tag===19)Ck(f,M,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}D&=1}if(yi(Ai,D),!(m.mode&1))m.memoizedState=null;else switch($){case"forwards":for(M=m.child,$=null;M!==null;)f=M.alternate,f!==null&&xl(f)===null&&($=M),M=M.sibling;M=$,M===null?($=m.child,m.child=null):($=M.sibling,M.sibling=null),s3(m,!1,$,M,J);break;case"backwards":for(M=null,$=m.child,m.child=null;$!==null;){if(f=$.alternate,f!==null&&xl(f)===null){m.child=$;break}f=$.sibling,$.sibling=M,M=$,$=f}s3(m,!0,M,null,J);break;case"together":s3(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Xb(f,m){!(m.mode&1)&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function _d(f,m,M){if(f!==null&&(m.dependencies=f.dependencies),vp|=m.lanes,!(M&m.childLanes))return null;if(f!==null&&m.child!==f.child)throw Error(t(153));if(m.child!==null){for(f=m.child,M=Lf(f,f.pendingProps),m.child=M,M.return=m;f.sibling!==null;)f=f.sibling,M=M.sibling=Lf(f,f.pendingProps),M.return=m;M.sibling=null}return m.child}function e7(f,m,M){switch(m.tag){case 3:_r(m),vu();break;case 5:md(m);break;case 1:go(m.type)&&od(m);break;case 4:up(m,m.stateNode.containerInfo);break;case 10:var D=m.type._context,$=m.memoizedProps.value;yi(ud,D._currentValue),D._currentValue=$;break;case 13:if(D=m.memoizedState,D!==null)return D.dehydrated!==null?(yi(Ai,Ai.current&1),m.flags|=128,null):M&m.child.childLanes?Cc(f,m,M):(yi(Ai,Ai.current&1),f=_d(f,m,M),f!==null?f.sibling:null);yi(Ai,Ai.current&1);break;case 19:if(D=(M&m.childLanes)!==0,f.flags&128){if(D)return Rk(f,m,M);m.flags|=128}if($=m.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),yi(Ai,Ai.current),D)break;return null;case 22:case 23:return m.lanes=0,st(f,m,M)}return _d(f,m,M)}var Nk,o3,Pk,kk;Nk=function(f,m){for(var M=m.child;M!==null;){if(M.tag===5||M.tag===6)f.appendChild(M.stateNode);else if(M.tag!==4&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===m)break;for(;M.sibling===null;){if(M.return===null||M.return===m)return;M=M.return}M.sibling.return=M.return,M=M.sibling}},o3=function(){},Pk=function(f,m,M,D){var $=f.memoizedProps;if($!==D){f=m.stateNode,ps(ya.current);var J=null;switch(M){case"input":$=me(f,$),D=me(f,D),J=[];break;case"select":$=te({},$,{value:void 0}),D=te({},D,{value:void 0}),J=[];break;case"textarea":$=se(f,$),D=se(f,D),J=[];break;default:typeof $.onClick!="function"&&typeof D.onClick=="function"&&(f.onclick=Zh)}He(M,D);var pe;M=null;for(bt in $)if(!D.hasOwnProperty(bt)&&$.hasOwnProperty(bt)&&$[bt]!=null)if(bt==="style"){var Ve=$[bt];for(pe in Ve)Ve.hasOwnProperty(pe)&&(M||(M={}),M[pe]="")}else bt!=="dangerouslySetInnerHTML"&&bt!=="children"&&bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&bt!=="autoFocus"&&(i.hasOwnProperty(bt)?J||(J=[]):(J=J||[]).push(bt,null));for(bt in D){var Ke=D[bt];if(Ve=$?.[bt],D.hasOwnProperty(bt)&&Ke!==Ve&&(Ke!=null||Ve!=null))if(bt==="style")if(Ve){for(pe in Ve)!Ve.hasOwnProperty(pe)||Ke&&Ke.hasOwnProperty(pe)||(M||(M={}),M[pe]="");for(pe in Ke)Ke.hasOwnProperty(pe)&&Ve[pe]!==Ke[pe]&&(M||(M={}),M[pe]=Ke[pe])}else M||(J||(J=[]),J.push(bt,M)),M=Ke;else bt==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Ve=Ve?Ve.__html:void 0,Ke!=null&&Ve!==Ke&&(J=J||[]).push(bt,Ke)):bt==="children"?typeof Ke!="string"&&typeof Ke!="number"||(J=J||[]).push(bt,""+Ke):bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&(i.hasOwnProperty(bt)?(Ke!=null&&bt==="onScroll"&&_i("scroll",f),J||Ve===Ke||(J=[])):(J=J||[]).push(bt,Ke))}M&&(J=J||[]).push("style",M);var bt=J;(m.updateQueue=bt)&&(m.flags|=4)}},kk=function(f,m,M,D){M!==D&&(m.flags|=4)};function u_(f,m){if(!Ii)switch(f.tailMode){case"hidden":m=f.tail;for(var M=null;m!==null;)m.alternate!==null&&(M=m),m=m.sibling;M===null?f.tail=null:M.sibling=null;break;case"collapsed":M=f.tail;for(var D=null;M!==null;)M.alternate!==null&&(D=M),M=M.sibling;D===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:D.sibling=null}}function Xo(f){var m=f.alternate!==null&&f.alternate.child===f.child,M=0,D=0;if(m)for(var $=f.child;$!==null;)M|=$.lanes|$.childLanes,D|=$.subtreeFlags&0xe00000,D|=$.flags&0xe00000,$.return=f,$=$.sibling;else for($=f.child;$!==null;)M|=$.lanes|$.childLanes,D|=$.subtreeFlags,D|=$.flags,$.return=f,$=$.sibling;return f.subtreeFlags|=D,f.childLanes=M,m}function t7(f,m,M){var D=m.pendingProps;switch(wc(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(m),null;case 1:return go(m.type)&&ep(),Xo(m),null;case 3:return D=m.stateNode,xu(),xi(Ro),xi(io),Kl(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(f===null||f.child===null)&&(Sf(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Ua!==null&&(y3(Ua),Ua=null))),o3(f,m),Xo(m),null;case 5:If(m);var $=ps(Tc.current);if(M=m.type,f!==null&&m.stateNode!=null)Pk(f,m,M,D,$),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!D){if(m.stateNode===null)throw Error(t(166));return Xo(m),null}if(f=ps(ya.current),Sf(m)){D=m.stateNode,M=m.type;var J=m.memoizedProps;switch(D[Cs]=m,D[wf]=J,f=(m.mode&1)!==0,M){case"dialog":_i("cancel",D),_i("close",D);break;case"iframe":case"object":case"embed":_i("load",D);break;case"video":case"audio":for($=0;$<gu.length;$++)_i(gu[$],D);break;case"source":_i("error",D);break;case"img":case"image":case"link":_i("error",D),_i("load",D);break;case"details":_i("toggle",D);break;case"input":ht(D,J),_i("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!J.multiple},_i("invalid",D);break;case"textarea":Oe(D,J),_i("invalid",D)}He(M,J),$=null;for(var pe in J)if(J.hasOwnProperty(pe)){var Ve=J[pe];pe==="children"?typeof Ve=="string"?D.textContent!==Ve&&(J.suppressHydrationWarning!==!0&&Jh(D.textContent,Ve,f),$=["children",Ve]):typeof Ve=="number"&&D.textContent!==""+Ve&&(J.suppressHydrationWarning!==!0&&Jh(D.textContent,Ve,f),$=["children",""+Ve]):i.hasOwnProperty(pe)&&Ve!=null&&pe==="onScroll"&&_i("scroll",D)}switch(M){case"input":Ye(D),xe(D,J,!0);break;case"textarea":Ye(D),Ge(D);break;case"select":case"option":break;default:typeof J.onClick=="function"&&(D.onclick=Zh)}D=$,m.updateQueue=D,D!==null&&(m.flags|=4)}else{pe=$.nodeType===9?$:$.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=at(M)),f==="http://www.w3.org/1999/xhtml"?M==="script"?(f=pe.createElement("div"),f.innerHTML="<script></script>",f=f.removeChild(f.firstChild)):typeof D.is=="string"?f=pe.createElement(M,{is:D.is}):(f=pe.createElement(M),M==="select"&&(pe=f,D.multiple?pe.multiple=!0:D.size&&(pe.size=D.size))):f=pe.createElementNS(f,M),f[Cs]=m,f[wf]=D,Nk(f,m,!1,!1),m.stateNode=f;e:{switch(pe=At(M,D),M){case"dialog":_i("cancel",f),_i("close",f),$=D;break;case"iframe":case"object":case"embed":_i("load",f),$=D;break;case"video":case"audio":for($=0;$<gu.length;$++)_i(gu[$],f);$=D;break;case"source":_i("error",f),$=D;break;case"img":case"image":case"link":_i("error",f),_i("load",f),$=D;break;case"details":_i("toggle",f),$=D;break;case"input":ht(f,D),$=me(f,D),_i("invalid",f);break;case"option":$=D;break;case"select":f._wrapperState={wasMultiple:!!D.multiple},$=te({},D,{value:void 0}),_i("invalid",f);break;case"textarea":Oe(f,D),$=se(f,D),_i("invalid",f);break;default:$=D}He(M,$),Ve=$;for(J in Ve)if(Ve.hasOwnProperty(J)){var Ke=Ve[J];J==="style"?$t(f,Ke):J==="dangerouslySetInnerHTML"?(Ke=Ke?Ke.__html:void 0,Ke!=null&&Jt(f,Ke)):J==="children"?typeof Ke=="string"?(M!=="textarea"||Ke!=="")&&Cn(f,Ke):typeof Ke=="number"&&Cn(f,""+Ke):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?Ke!=null&&J==="onScroll"&&_i("scroll",f):Ke!=null&&T(f,J,Ke,pe))}switch(M){case"input":Ye(f),xe(f,D,!1);break;case"textarea":Ye(f),Ge(f);break;case"option":D.value!=null&&f.setAttribute("value",""+Me(D.value));break;case"select":f.multiple=!!D.multiple,J=D.value,J!=null?le(f,!!D.multiple,J,!1):D.defaultValue!=null&&le(f,!!D.multiple,D.defaultValue,!0);break;default:typeof $.onClick=="function"&&(f.onclick=Zh)}switch(M){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Xo(m),null;case 6:if(f&&m.stateNode!=null)kk(f,m,f.memoizedProps,D);else{if(typeof D!="string"&&m.stateNode===null)throw Error(t(166));if(M=ps(Tc.current),ps(ya.current),Sf(m)){if(D=m.stateNode,M=m.memoizedProps,D[Cs]=m,(J=D.nodeValue!==M)&&(f=so,f!==null))switch(f.tag){case 3:Jh(D.nodeValue,M,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Jh(D.nodeValue,M,(f.mode&1)!==0)}J&&(m.flags|=4)}else D=(M.nodeType===9?M:M.ownerDocument).createTextNode(D),D[Cs]=m,m.stateNode=D}return Xo(m),null;case 13:if(xi(Ai),D=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Ii&&Po!==null&&m.mode&1&&!(m.flags&128))Yv(),vu(),m.flags|=98560,J=!1;else if(J=Sf(m),D!==null&&D.dehydrated!==null){if(f===null){if(!J)throw Error(t(318));if(J=m.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(t(317));J[Cs]=m}else vu(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;Xo(m),J=!1}else Ua!==null&&(y3(Ua),Ua=null),J=!0;if(!J)return m.flags&65536?m:null}return m.flags&128?(m.lanes=M,m):(D=D!==null,D!==(f!==null&&f.memoizedState!==null)&&D&&(m.child.flags|=8192,m.mode&1&&(f===null||Ai.current&1?co===0&&(co=3):x3())),m.updateQueue!==null&&(m.flags|=4),Xo(m),null);case 4:return xu(),o3(f,m),f===null&&_f(m.stateNode.containerInfo),Xo(m),null;case 10:return ap(m.type._context),Xo(m),null;case 17:return go(m.type)&&ep(),Xo(m),null;case 19:if(xi(Ai),J=m.memoizedState,J===null)return Xo(m),null;if(D=(m.flags&128)!==0,pe=J.rendering,pe===null)if(D)u_(J,!1);else{if(co!==0||f!==null&&f.flags&128)for(f=m.child;f!==null;){if(pe=xl(f),pe!==null){for(m.flags|=128,u_(J,!1),D=pe.updateQueue,D!==null&&(m.updateQueue=D,m.flags|=4),m.subtreeFlags=0,D=M,M=m.child;M!==null;)J=M,f=D,J.flags&=0xe00002,pe=J.alternate,pe===null?(J.childLanes=0,J.lanes=f,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=pe.childLanes,J.lanes=pe.lanes,J.child=pe.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=pe.memoizedProps,J.memoizedState=pe.memoizedState,J.updateQueue=pe.updateQueue,J.type=pe.type,f=pe.dependencies,J.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),M=M.sibling;return yi(Ai,Ai.current&1|2),m.child}f=f.sibling}J.tail!==null&&ut()>Ig&&(m.flags|=128,D=!0,u_(J,!1),m.lanes=4194304)}else{if(!D)if(f=xl(pe),f!==null){if(m.flags|=128,D=!0,M=f.updateQueue,M!==null&&(m.updateQueue=M,m.flags|=4),u_(J,!0),J.tail===null&&J.tailMode==="hidden"&&!pe.alternate&&!Ii)return Xo(m),null}else 2*ut()-J.renderingStartTime>Ig&&M!==0x40000000&&(m.flags|=128,D=!0,u_(J,!1),m.lanes=4194304);J.isBackwards?(pe.sibling=m.child,m.child=pe):(M=J.last,M!==null?M.sibling=pe:m.child=pe,J.last=pe)}return J.tail!==null?(m=J.tail,J.rendering=m,J.tail=m.sibling,J.renderingStartTime=ut(),m.sibling=null,M=Ai.current,yi(Ai,D?M&1|2:M&1),m):(Xo(m),null);case 22:case 23:return _3(),D=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==D&&(m.flags|=8192),D&&m.mode&1?Sl&0x40000000&&(Xo(m),m.subtreeFlags&6&&(m.flags|=8192)):Xo(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function n7(f,m){switch(wc(m),m.tag){case 1:return go(m.type)&&ep(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return xu(),xi(Ro),xi(io),Kl(),f=m.flags,f&65536&&!(f&128)?(m.flags=f&-65537|128,m):null;case 5:return If(m),null;case 13:if(xi(Ai),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(t(340));vu()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return xi(Ai),null;case 4:return xu(),null;case 10:return ap(m.type._context),null;case 22:case 23:return _3(),null;case 24:return null;default:return null}}var Kb=!1,Ko=!1,r7=typeof WeakSet=="function"?WeakSet:Set,Un=null;function Tg(f,m){var M=f.ref;if(M!==null)if(typeof M=="function")try{M(null)}catch(D){gs(f,m,D)}else M.current=null}function a3(f,m,M){try{M()}catch(D){gs(f,m,D)}}var Ok=!1;function i7(f,m){if(bf=St,f=Hi(),zs(f)){if("selectionStart"in f)var M={start:f.selectionStart,end:f.selectionEnd};else e:{M=(M=f.ownerDocument)&&M.defaultView||window;var D=M.getSelection&&M.getSelection();if(D&&D.rangeCount!==0){M=D.anchorNode;var $=D.anchorOffset,J=D.focusNode;D=D.focusOffset;try{M.nodeType,J.nodeType}catch{M=null;break e}var pe=0,Ve=-1,Ke=-1,bt=0,Yt=0,Zt=f,Xt=null;t:for(;;){for(var Nn;Zt!==M||$!==0&&Zt.nodeType!==3||(Ve=pe+$),Zt!==J||D!==0&&Zt.nodeType!==3||(Ke=pe+D),Zt.nodeType===3&&(pe+=Zt.nodeValue.length),(Nn=Zt.firstChild)!==null;)Xt=Zt,Zt=Nn;for(;;){if(Zt===f)break t;if(Xt===M&&++bt===$&&(Ve=pe),Xt===J&&++Yt===D&&(Ke=pe),(Nn=Zt.nextSibling)!==null)break;Zt=Xt,Xt=Zt.parentNode}Zt=Nn}M=Ve===-1||Ke===-1?null:{start:Ve,end:Ke}}else M=null}M=M||{start:0,end:0}}else M=null;for(jv={focusedElem:f,selectionRange:M},St=!1,Un=m;Un!==null;)if(m=Un,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,Un=f;else for(;Un!==null;){m=Un;try{var zn=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(zn!==null){var $n=zn.memoizedProps,Rs=zn.memoizedState,ft=m.stateNode,Je=ft.getSnapshotBeforeUpdate(m.elementType===m.type?$n:za(m.type,$n),Rs);ft.__reactInternalSnapshotBeforeUpdate=Je}break;case 3:var pt=m.stateNode.containerInfo;pt.nodeType===1?pt.textContent="":pt.nodeType===9&&pt.documentElement&&pt.removeChild(pt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(sn){gs(m,m.return,sn)}if(f=m.sibling,f!==null){f.return=m.return,Un=f;break}Un=m.return}return zn=Ok,Ok=!1,zn}function d_(f,m,M){var D=m.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var $=D=D.next;do{if(($.tag&f)===f){var J=$.destroy;$.destroy=void 0,J!==void 0&&a3(m,M,J)}$=$.next}while($!==D)}}function Qb(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var M=m=m.next;do{if((M.tag&f)===f){var D=M.create;M.destroy=D()}M=M.next}while(M!==m)}}function l3(f){var m=f.ref;if(m!==null){var M=f.stateNode;switch(f.tag){case 5:f=M;break;default:f=M}typeof m=="function"?m(f):m.current=f}}function Lk(f){var m=f.alternate;m!==null&&(f.alternate=null,Lk(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[Cs],delete m[wf],delete m[id],delete m[lg],delete m[cg])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Dk(f){return f.tag===5||f.tag===3||f.tag===4}function Fk(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Dk(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function c3(f,m,M){var D=f.tag;if(D===5||D===6)f=f.stateNode,m?M.nodeType===8?M.parentNode.insertBefore(f,m):M.insertBefore(f,m):(M.nodeType===8?(m=M.parentNode,m.insertBefore(f,M)):(m=M,m.appendChild(f)),M=M._reactRootContainer,M!=null||m.onclick!==null||(m.onclick=Zh));else if(D!==4&&(f=f.child,f!==null))for(c3(f,m,M),f=f.sibling;f!==null;)c3(f,m,M),f=f.sibling}function u3(f,m,M){var D=f.tag;if(D===5||D===6)f=f.stateNode,m?M.insertBefore(f,m):M.appendChild(f);else if(D!==4&&(f=f.child,f!==null))for(u3(f,m,M),f=f.sibling;f!==null;)u3(f,m,M),f=f.sibling}var Oo=null,Rc=!1;function Rf(f,m,M){for(M=M.child;M!==null;)qk(f,m,M),M=M.sibling}function qk(f,m,M){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Wn,M)}catch{}switch(M.tag){case 5:Ko||Tg(M,m);case 6:var D=Oo,$=Rc;Oo=null,Rf(f,m,M),Oo=D,Rc=$,Oo!==null&&(Rc?(f=Oo,M=M.stateNode,f.nodeType===8?f.parentNode.removeChild(M):f.removeChild(M)):Oo.removeChild(M.stateNode));break;case 18:Oo!==null&&(Rc?(f=Oo,M=M.stateNode,f.nodeType===8?ag(f.parentNode,M):f.nodeType===1&&ag(f,M),Ze(f)):ag(Oo,M.stateNode));break;case 4:D=Oo,$=Rc,Oo=M.stateNode.containerInfo,Rc=!0,Rf(f,m,M),Oo=D,Rc=$;break;case 0:case 11:case 14:case 15:if(!Ko&&(D=M.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){$=D=D.next;do{var J=$,pe=J.destroy;J=J.tag,pe!==void 0&&(J&2||J&4)&&a3(M,m,pe),$=$.next}while($!==D)}Rf(f,m,M);break;case 1:if(!Ko&&(Tg(M,m),D=M.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=M.memoizedProps,D.state=M.memoizedState,D.componentWillUnmount()}catch(Ve){gs(M,m,Ve)}Rf(f,m,M);break;case 21:Rf(f,m,M);break;case 22:M.mode&1?(Ko=(D=Ko)||M.memoizedState!==null,Rf(f,m,M),Ko=D):Rf(f,m,M);break;default:Rf(f,m,M)}}function jk(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var M=f.stateNode;M===null&&(M=f.stateNode=new r7),m.forEach(function(D){var $=h7.bind(null,f,D);M.has(D)||(M.add(D),D.then($,$))})}}function Nc(f,m){var M=m.deletions;if(M!==null)for(var D=0;D<M.length;D++){var $=M[D];try{var J=f,pe=m,Ve=pe;e:for(;Ve!==null;){switch(Ve.tag){case 5:Oo=Ve.stateNode,Rc=!1;break e;case 3:Oo=Ve.stateNode.containerInfo,Rc=!0;break e;case 4:Oo=Ve.stateNode.containerInfo,Rc=!0;break e}Ve=Ve.return}if(Oo===null)throw Error(t(160));qk(J,pe,$),Oo=null,Rc=!1;var Ke=$.alternate;Ke!==null&&(Ke.return=null),$.return=null}catch(bt){gs($,m,bt)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)Bk(m,f),m=m.sibling}function Bk(f,m){var M=f.alternate,D=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Nc(m,f),wu(f),D&4){try{d_(3,f,f.return),Qb(3,f)}catch($n){gs(f,f.return,$n)}try{d_(5,f,f.return)}catch($n){gs(f,f.return,$n)}}break;case 1:Nc(m,f),wu(f),D&512&&M!==null&&Tg(M,M.return);break;case 5:if(Nc(m,f),wu(f),D&512&&M!==null&&Tg(M,M.return),f.flags&32){var $=f.stateNode;try{Cn($,"")}catch($n){gs(f,f.return,$n)}}if(D&4&&($=f.stateNode,$!=null)){var J=f.memoizedProps,pe=M!==null?M.memoizedProps:J,Ve=f.type,Ke=f.updateQueue;if(f.updateQueue=null,Ke!==null)try{Ve==="input"&&J.type==="radio"&&J.name!=null&&ct($,J),At(Ve,pe);var bt=At(Ve,J);for(pe=0;pe<Ke.length;pe+=2){var Yt=Ke[pe],Zt=Ke[pe+1];Yt==="style"?$t($,Zt):Yt==="dangerouslySetInnerHTML"?Jt($,Zt):Yt==="children"?Cn($,Zt):T($,Yt,Zt,bt)}switch(Ve){case"input":Mt($,J);break;case"textarea":Ce($,J);break;case"select":var Xt=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!J.multiple;var Nn=J.value;Nn!=null?le($,!!J.multiple,Nn,!1):Xt!==!!J.multiple&&(J.defaultValue!=null?le($,!!J.multiple,J.defaultValue,!0):le($,!!J.multiple,J.multiple?[]:"",!1))}$[wf]=J}catch($n){gs(f,f.return,$n)}}break;case 6:if(Nc(m,f),wu(f),D&4){if(f.stateNode===null)throw Error(t(162));$=f.stateNode,J=f.memoizedProps;try{$.nodeValue=J}catch($n){gs(f,f.return,$n)}}break;case 3:if(Nc(m,f),wu(f),D&4&&M!==null&&M.memoizedState.isDehydrated)try{Ze(m.containerInfo)}catch($n){gs(f,f.return,$n)}break;case 4:Nc(m,f),wu(f);break;case 13:Nc(m,f),wu(f),$=f.child,$.flags&8192&&(J=$.memoizedState!==null,$.stateNode.isHidden=J,!J||$.alternate!==null&&$.alternate.memoizedState!==null||(h3=ut())),D&4&&jk(f);break;case 22:if(Yt=M!==null&&M.memoizedState!==null,f.mode&1?(Ko=(bt=Ko)||Yt,Nc(m,f),Ko=bt):Nc(m,f),wu(f),D&8192){if(bt=f.memoizedState!==null,(f.stateNode.isHidden=bt)&&!Yt&&f.mode&1)for(Un=f,Yt=f.child;Yt!==null;){for(Zt=Un=Yt;Un!==null;){switch(Xt=Un,Nn=Xt.child,Xt.tag){case 0:case 11:case 14:case 15:d_(4,Xt,Xt.return);break;case 1:Tg(Xt,Xt.return);var zn=Xt.stateNode;if(typeof zn.componentWillUnmount=="function"){D=Xt,M=Xt.return;try{m=D,zn.props=m.memoizedProps,zn.state=m.memoizedState,zn.componentWillUnmount()}catch($n){gs(D,M,$n)}}break;case 5:Tg(Xt,Xt.return);break;case 22:if(Xt.memoizedState!==null){Vk(Zt);continue}}Nn!==null?(Nn.return=Xt,Un=Nn):Vk(Zt)}Yt=Yt.sibling}e:for(Yt=null,Zt=f;;){if(Zt.tag===5){if(Yt===null){Yt=Zt;try{$=Zt.stateNode,bt?(J=$.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none"):(Ve=Zt.stateNode,Ke=Zt.memoizedProps.style,pe=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null,Ve.style.display=vn("display",pe))}catch($n){gs(f,f.return,$n)}}}else if(Zt.tag===6){if(Yt===null)try{Zt.stateNode.nodeValue=bt?"":Zt.memoizedProps}catch($n){gs(f,f.return,$n)}}else if((Zt.tag!==22&&Zt.tag!==23||Zt.memoizedState===null||Zt===f)&&Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===f)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===f)break e;Yt===Zt&&(Yt=null),Zt=Zt.return}Yt===Zt&&(Yt=null),Zt.sibling.return=Zt.return,Zt=Zt.sibling}}break;case 19:Nc(m,f),wu(f),D&4&&jk(f);break;case 21:break;default:Nc(m,f),wu(f)}}function wu(f){var m=f.flags;if(m&2){try{e:{for(var M=f.return;M!==null;){if(Dk(M)){var D=M;break e}M=M.return}throw Error(t(160))}switch(D.tag){case 5:var $=D.stateNode;D.flags&32&&(Cn($,""),D.flags&=-33);var J=Fk(f);u3(f,J,$);break;case 3:case 4:var pe=D.stateNode.containerInfo,Ve=Fk(f);c3(f,Ve,pe);break;default:throw Error(t(161))}}catch(Ke){gs(f,f.return,Ke)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function s7(f,m,M){Un=f,Uk(f)}function Uk(f,m,M){for(var D=(f.mode&1)!==0;Un!==null;){var $=Un,J=$.child;if($.tag===22&&D){var pe=$.memoizedState!==null||Kb;if(!pe){var Ve=$.alternate,Ke=Ve!==null&&Ve.memoizedState!==null||Ko;Ve=Kb;var bt=Ko;if(Kb=pe,(Ko=Ke)&&!bt)for(Un=$;Un!==null;)pe=Un,Ke=pe.child,pe.tag===22&&pe.memoizedState!==null?Wk($):Ke!==null?(Ke.return=pe,Un=Ke):Wk($);for(;J!==null;)Un=J,Uk(J),J=J.sibling;Un=$,Kb=Ve,Ko=bt}zk(f)}else $.subtreeFlags&8772&&J!==null?(J.return=$,Un=J):zk(f)}}function zk(f){for(;Un!==null;){var m=Un;if(m.flags&8772){var M=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Ko||Qb(5,m);break;case 1:var D=m.stateNode;if(m.flags&4&&!Ko)if(M===null)D.componentDidMount();else{var $=m.elementType===m.type?M.memoizedProps:za(m.type,M.memoizedProps);D.componentDidUpdate($,M.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var J=m.updateQueue;J!==null&&Mf(m,J,D);break;case 3:var pe=m.updateQueue;if(pe!==null){if(M=null,m.child!==null)switch(m.child.tag){case 5:M=m.child.stateNode;break;case 1:M=m.child.stateNode}Mf(m,pe,M)}break;case 5:var Ve=m.stateNode;if(M===null&&m.flags&4){M=Ve;var Ke=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ke.autoFocus&&M.focus();break;case"img":Ke.src&&(M.src=Ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var bt=m.alternate;if(bt!==null){var Yt=bt.memoizedState;if(Yt!==null){var Zt=Yt.dehydrated;Zt!==null&&Ze(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ko||m.flags&512&&l3(m)}catch(Xt){gs(m,m.return,Xt)}}if(m===f){Un=null;break}if(M=m.sibling,M!==null){M.return=m.return,Un=M;break}Un=m.return}}function Vk(f){for(;Un!==null;){var m=Un;if(m===f){Un=null;break}var M=m.sibling;if(M!==null){M.return=m.return,Un=M;break}Un=m.return}}function Wk(f){for(;Un!==null;){var m=Un;try{switch(m.tag){case 0:case 11:case 15:var M=m.return;try{Qb(4,m)}catch(Ke){gs(m,M,Ke)}break;case 1:var D=m.stateNode;if(typeof D.componentDidMount=="function"){var $=m.return;try{D.componentDidMount()}catch(Ke){gs(m,$,Ke)}}var J=m.return;try{l3(m)}catch(Ke){gs(m,J,Ke)}break;case 5:var pe=m.return;try{l3(m)}catch(Ke){gs(m,pe,Ke)}}}catch(Ke){gs(m,m.return,Ke)}if(m===f){Un=null;break}var Ve=m.sibling;if(Ve!==null){Ve.return=m.return,Un=Ve;break}Un=m.return}}var o7=Math.ceil,Yb=I.ReactCurrentDispatcher,d3=I.ReactCurrentOwner,Yl=I.ReactCurrentBatchConfig,ii=0,_o=null,Gs=null,Lo=0,Sl=0,Mg=Ki(0),co=0,f_=null,vp=0,Jb=0,f3=0,h_=null,Va=null,h3=0,Ig=1/0,xd=null,Zb=!1,p3=null,Nf=null,ew=!1,Pf=null,tw=0,p_=0,m3=null,nw=-1,rw=0;function ba(){return ii&6?ut():nw!==-1?nw:nw=ut()}function kf(f){return f.mode&1?ii&2&&Lo!==0?Lo&-Lo:r3.transition!==null?(rw===0&&(rw=Fr()),rw):(f=Vr,f!==0||(f=window.event,f=f===void 0?16:Xe(f.type)),f):1}function Pc(f,m,M,D){if(50<p_)throw p_=0,m3=null,Error(t(185));fs(f,M,D),(!(ii&2)||f!==_o)&&(f===_o&&(!(ii&2)&&(Jb|=M),co===4&&Of(f,Lo)),Wa(f,D),M===1&&ii===0&&!(m.mode&1)&&(Ig=ut()+500,np&&Gl()))}function Wa(f,m){var M=f.callbackNode;ds(f,m);var D=ss(f,f===_o?Lo:0);if(D===0)M!==null&&we(M),f.callbackNode=null,f.callbackPriority=0;else if(m=D&-D,f.callbackPriority!==m){if(M!=null&&we(M),m===1)f.tag===0?Db(Hk.bind(null,f)):rp(Hk.bind(null,f)),n3(function(){!(ii&6)&&Gl()}),M=null;else{switch(mo(D)){case 1:M=Gt;break;case 4:M=pn;break;case 16:M=_n;break;case 0x20000000:M=Kn;break;default:M=_n}M=eO(M,$k.bind(null,f))}f.callbackPriority=m,f.callbackNode=M}}function $k(f,m){if(nw=-1,rw=0,ii&6)throw Error(t(327));var M=f.callbackNode;if(Ag()&&f.callbackNode!==M)return null;var D=ss(f,f===_o?Lo:0);if(D===0)return null;if(D&30||D&f.expiredLanes||m)m=iw(f,D);else{m=D;var $=ii;ii|=2;var J=Xk();(_o!==f||Lo!==m)&&(xd=null,Ig=ut()+500,xp(f,m));do try{c7();break}catch(Ve){Gk(f,Ve)}while(!0);fd(),Yb.current=J,ii=$,Gs!==null?m=0:(_o=null,Lo=0,m=co)}if(m!==0){if(m===2&&($=qa(f),$!==0&&(D=$,m=g3(f,$))),m===1)throw M=f_,xp(f,0),Of(f,D),Wa(f,ut()),M;if(m===6)Of(f,D);else{if($=f.current.alternate,!(D&30)&&!a7($)&&(m=iw(f,D),m===2&&(J=qa(f),J!==0&&(D=J,m=g3(f,J))),m===1))throw M=f_,xp(f,0),Of(f,D),Wa(f,ut()),M;switch(f.finishedWork=$,f.finishedLanes=D,m){case 0:case 1:throw Error(t(345));case 2:bp(f,Va,xd);break;case 3:if(Of(f,D),(D&0x7c00000)===D&&(m=h3+500-ut(),10<m)){if(ss(f,0)!==0)break;if($=f.suspendedLanes,($&D)!==D){ba(),f.pingedLanes|=f.suspendedLanes&$;break}f.timeoutHandle=Uv(bp.bind(null,f,Va,xd),m);break}bp(f,Va,xd);break;case 4:if(Of(f,D),(D&4194240)===D)break;for(m=f.eventTimes,$=-1;0<D;){var pe=31-Zn(D);J=1<<pe,pe=m[pe],pe>$&&($=pe),D&=~J}if(D=$,D=ut()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*o7(D/1960))-D,10<D){f.timeoutHandle=Uv(bp.bind(null,f,Va,xd),D);break}bp(f,Va,xd);break;case 5:bp(f,Va,xd);break;default:throw Error(t(329))}}}return Wa(f,ut()),f.callbackNode===M?$k.bind(null,f):null}function g3(f,m){var M=h_;return f.current.memoizedState.isDehydrated&&(xp(f,m).flags|=256),f=iw(f,m),f!==2&&(m=Va,Va=M,m!==null&&y3(m)),f}function y3(f){Va===null?Va=f:Va.push.apply(Va,f)}function a7(f){for(var m=f;;){if(m.flags&16384){var M=m.updateQueue;if(M!==null&&(M=M.stores,M!==null))for(var D=0;D<M.length;D++){var $=M[D],J=$.getSnapshot;$=$.value;try{if(!ha(J(),$))return!1}catch{return!1}}}if(M=m.child,m.subtreeFlags&16384&&M!==null)M.return=m,m=M;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Of(f,m){for(m&=~f3,m&=~Jb,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var M=31-Zn(m),D=1<<M;f[M]=-1,m&=~D}}function Hk(f){if(ii&6)throw Error(t(327));Ag();var m=ss(f,0);if(!(m&1))return Wa(f,ut()),null;var M=iw(f,m);if(f.tag!==0&&M===2){var D=qa(f);D!==0&&(m=D,M=g3(f,D))}if(M===1)throw M=f_,xp(f,0),Of(f,m),Wa(f,ut()),M;if(M===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,bp(f,Va,xd),Wa(f,ut()),null}function v3(f,m){var M=ii;ii|=1;try{return f(m)}finally{ii=M,ii===0&&(Ig=ut()+500,np&&Gl())}}function _p(f){Pf!==null&&Pf.tag===0&&!(ii&6)&&Ag();var m=ii;ii|=1;var M=Yl.transition,D=Vr;try{if(Yl.transition=null,Vr=1,f)return f()}finally{Vr=D,Yl.transition=M,ii=m,!(ii&6)&&Gl()}}function _3(){Sl=Mg.current,xi(Mg)}function xp(f,m){f.finishedWork=null,f.finishedLanes=0;var M=f.timeoutHandle;if(M!==-1&&(f.timeoutHandle=-1,zv(M)),Gs!==null)for(M=Gs.return;M!==null;){var D=M;switch(wc(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&ep();break;case 3:xu(),xi(Ro),xi(io),Kl();break;case 5:If(D);break;case 4:xu();break;case 13:xi(Ai);break;case 19:xi(Ai);break;case 10:ap(D.type._context);break;case 22:case 23:_3()}M=M.return}if(_o=f,Gs=f=Lf(f.current,null),Lo=Sl=m,co=0,f_=null,f3=Jb=vp=0,Va=h_=null,Ec!==null){for(m=0;m<Ec.length;m++)if(M=Ec[m],D=M.interleaved,D!==null){M.interleaved=null;var $=D.next,J=M.pending;if(J!==null){var pe=J.next;J.next=$,D.next=pe}M.pending=D}Ec=null}return f}function Gk(f,m){do{var M=Gs;try{if(fd(),gd.current=Sg,bl){for(var D=bi.memoizedState;D!==null;){var $=D.queue;$!==null&&($.pending=null),D=D.next}bl=!1}if(Mc=0,Jr=Yi=bi=null,vo=!1,bu=0,d3.current=null,M===null||M.return===null){co=1,f_=m,Gs=null;break}e:{var J=f,pe=M.return,Ve=M,Ke=m;if(m=Lo,Ve.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var bt=Ke,Yt=Ve,Zt=Yt.tag;if(!(Yt.mode&1)&&(Zt===0||Zt===11||Zt===15)){var Xt=Yt.alternate;Xt?(Yt.updateQueue=Xt.updateQueue,Yt.memoizedState=Xt.memoizedState,Yt.lanes=Xt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var Nn=Dn(pe);if(Nn!==null){Nn.flags&=-257,vr(Nn,pe,Ve,J,m),Nn.mode&1&&rn(J,bt,m),m=Nn,Ke=bt;var zn=m.updateQueue;if(zn===null){var $n=new Set;$n.add(Ke),m.updateQueue=$n}else zn.add(Ke);break e}else{if(!(m&1)){rn(J,bt,m),x3();break e}Ke=Error(t(426))}}else if(Ii&&Ve.mode&1){var Rs=Dn(pe);if(Rs!==null){!(Rs.flags&65536)&&(Rs.flags|=256),vr(Rs,pe,Ve,J,m),Ef(j(Ke,Ve));break e}}J=Ke=j(Ke,Ve),co!==4&&(co=2),h_===null?h_=[J]:h_.push(J),J=pe;do{switch(J.tag){case 3:J.flags|=65536,m&=-m,J.lanes|=m;var ft=et(J,Ke,m);hd(J,ft);break e;case 1:Ve=Ke;var Je=J.type,pt=J.stateNode;if(!(J.flags&128)&&(typeof Je.getDerivedStateFromError=="function"||pt!==null&&typeof pt.componentDidCatch=="function"&&(Nf===null||!Nf.has(pt)))){J.flags|=65536,m&=-m,J.lanes|=m;var sn=Nt(J,Ve,m);hd(J,sn);break e}}J=J.return}while(J!==null)}Qk(M)}catch(Qn){m=Qn,Gs===M&&M!==null&&(Gs=M=M.return);continue}break}while(!0)}function Xk(){var f=Yb.current;return Yb.current=Sg,f===null?Sg:f}function x3(){(co===0||co===3||co===2)&&(co=4),_o===null||!(vp&0xfffffff)&&!(Jb&0xfffffff)||Of(_o,Lo)}function iw(f,m){var M=ii;ii|=2;var D=Xk();(_o!==f||Lo!==m)&&(xd=null,xp(f,m));do try{l7();break}catch($){Gk(f,$)}while(!0);if(fd(),ii=M,Yb.current=D,Gs!==null)throw Error(t(261));return _o=null,Lo=0,co}function l7(){for(;Gs!==null;)Kk(Gs)}function c7(){for(;Gs!==null&&!nt();)Kk(Gs)}function Kk(f){var m=Zk(f.alternate,f,Sl);f.memoizedProps=f.pendingProps,m===null?Qk(f):Gs=m,d3.current=null}function Qk(f){var m=f;do{var M=m.alternate;if(f=m.return,m.flags&32768){if(M=n7(M,m),M!==null){M.flags&=32767,Gs=M;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{co=6,Gs=null;return}}else if(M=t7(M,m,Sl),M!==null){Gs=M;return}if(m=m.sibling,m!==null){Gs=m;return}Gs=m=f}while(m!==null);co===0&&(co=5)}function bp(f,m,M){var D=Vr,$=Yl.transition;try{Yl.transition=null,Vr=1,u7(f,m,M,D)}finally{Yl.transition=$,Vr=D}return null}function u7(f,m,M,D){do Ag();while(Pf!==null);if(ii&6)throw Error(t(327));M=f.finishedWork;var $=f.finishedLanes;if(M===null)return null;if(f.finishedWork=null,f.finishedLanes=0,M===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var J=M.lanes|M.childLanes;if(As(f,J),f===_o&&(Gs=_o=null,Lo=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||ew||(ew=!0,eO(_n,function(){return Ag(),null})),J=(M.flags&15990)!==0,M.subtreeFlags&15990||J){J=Yl.transition,Yl.transition=null;var pe=Vr;Vr=1;var Ve=ii;ii|=4,d3.current=null,i7(f,M),Bk(M,f),Vs(jv),St=!!bf,jv=bf=null,f.current=M,s7(M),yt(),ii=Ve,Vr=pe,Yl.transition=J}else f.current=M;if(ew&&(ew=!1,Pf=f,tw=$),J=f.pendingLanes,J===0&&(Nf=null),qn(M.stateNode),Wa(f,ut()),m!==null)for(D=f.onRecoverableError,M=0;M<m.length;M++)$=m[M],D($.value,{componentStack:$.stack,digest:$.digest});if(Zb)throw Zb=!1,f=p3,p3=null,f;return tw&1&&f.tag!==0&&Ag(),J=f.pendingLanes,J&1?f===m3?p_++:(p_=0,m3=f):p_=0,Gl(),null}function Ag(){if(Pf!==null){var f=mo(tw),m=Yl.transition,M=Vr;try{if(Yl.transition=null,Vr=16>f?16:f,Pf===null)var D=!1;else{if(f=Pf,Pf=null,tw=0,ii&6)throw Error(t(331));var $=ii;for(ii|=4,Un=f.current;Un!==null;){var J=Un,pe=J.child;if(Un.flags&16){var Ve=J.deletions;if(Ve!==null){for(var Ke=0;Ke<Ve.length;Ke++){var bt=Ve[Ke];for(Un=bt;Un!==null;){var Yt=Un;switch(Yt.tag){case 0:case 11:case 15:d_(8,Yt,J)}var Zt=Yt.child;if(Zt!==null)Zt.return=Yt,Un=Zt;else for(;Un!==null;){Yt=Un;var Xt=Yt.sibling,Nn=Yt.return;if(Lk(Yt),Yt===bt){Un=null;break}if(Xt!==null){Xt.return=Nn,Un=Xt;break}Un=Nn}}}var zn=J.alternate;if(zn!==null){var $n=zn.child;if($n!==null){zn.child=null;do{var Rs=$n.sibling;$n.sibling=null,$n=Rs}while($n!==null)}}Un=J}}if(J.subtreeFlags&2064&&pe!==null)pe.return=J,Un=pe;else e:for(;Un!==null;){if(J=Un,J.flags&2048)switch(J.tag){case 0:case 11:case 15:d_(9,J,J.return)}var ft=J.sibling;if(ft!==null){ft.return=J.return,Un=ft;break e}Un=J.return}}var Je=f.current;for(Un=Je;Un!==null;){pe=Un;var pt=pe.child;if(pe.subtreeFlags&2064&&pt!==null)pt.return=pe,Un=pt;else e:for(pe=Je;Un!==null;){if(Ve=Un,Ve.flags&2048)try{switch(Ve.tag){case 0:case 11:case 15:Qb(9,Ve)}}catch(Qn){gs(Ve,Ve.return,Qn)}if(Ve===pe){Un=null;break e}var sn=Ve.sibling;if(sn!==null){sn.return=Ve.return,Un=sn;break e}Un=Ve.return}}if(ii=$,Gl(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Wn,f)}catch{}D=!0}return D}finally{Vr=M,Yl.transition=m}}return!1}function Yk(f,m,M){m=j(M,m),m=et(f,m,1),f=Li(f,m,1),m=ba(),f!==null&&(fs(f,1,m),Wa(f,m))}function gs(f,m,M){if(f.tag===3)Yk(f,f,M);else for(;m!==null;){if(m.tag===3){Yk(m,f,M);break}else if(m.tag===1){var D=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Nf===null||!Nf.has(D))){f=j(M,f),f=Nt(m,f,1),m=Li(m,f,1),f=ba(),m!==null&&(fs(m,1,f),Wa(m,f));break}}m=m.return}}function d7(f,m,M){var D=f.pingCache;D!==null&&D.delete(m),m=ba(),f.pingedLanes|=f.suspendedLanes&M,_o===f&&(Lo&M)===M&&(co===4||co===3&&(Lo&0x7c00000)===Lo&&500>ut()-h3?xp(f,0):f3|=M),Wa(f,m)}function Jk(f,m){m===0&&(f.mode&1?(m=Dr,Dr<<=1,!(Dr&0x7c00000)&&(Dr=4194304)):m=1);var M=ba();f=_l(f,m),f!==null&&(fs(f,m,M),Wa(f,M))}function f7(f){var m=f.memoizedState,M=0;m!==null&&(M=m.retryLane),Jk(f,M)}function h7(f,m){var M=0;switch(f.tag){case 13:var D=f.stateNode,$=f.memoizedState;$!==null&&(M=$.retryLane);break;case 19:D=f.stateNode;break;default:throw Error(t(314))}D!==null&&D.delete(m),Jk(f,M)}var Zk;Zk=function(f,m,M){if(f!==null)if(f.memoizedProps!==m.pendingProps||Ro.current)Nr=!0;else{if(!(f.lanes&M)&&!(m.flags&128))return Nr=!1,e7(f,m,M);Nr=!!(f.flags&131072)}else Nr=!1,Ii&&m.flags&1048576&&Gv(m,hg,m.index);switch(m.lanes=0,m.tag){case 2:var D=m.type;Xb(f,m),f=m.pendingProps;var $=sd(m,io.current);_u(m,M),$=fp(null,m,D,f,$,M);var J=t_();return m.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,go(D)?(J=!0,od(m)):J=!1,m.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,Ir(m),$.updater=Eg,m.stateNode=$,$._reactInternals=m,O(m,D,f,M),m=Sr(null,m,D,!0,J,M)):(m.tag=0,Ii&&J&&Xv(m),Mn(null,m,$,M),m=m.child),m;case 16:D=m.elementType;e:{switch(Xb(f,m),f=m.pendingProps,$=D._init,D=$(D._payload),m.type=D,$=m.tag=m7(D),f=za(D,f),$){case 0:m=bn(null,m,D,f,M);break e;case 1:m=Gn(null,m,D,f,M);break e;case 11:m=lo(null,m,D,f,M);break e;case 14:m=xa(null,m,D,za(D.type,f),M);break e}throw Error(t(306,D,""))}return m;case 0:return D=m.type,$=m.pendingProps,$=m.elementType===D?$:za(D,$),bn(f,m,D,$,M);case 1:return D=m.type,$=m.pendingProps,$=m.elementType===D?$:za(D,$),Gn(f,m,D,$,M);case 3:e:{if(_r(m),f===null)throw Error(t(387));D=m.pendingProps,J=m.memoizedState,$=J.element,as(f,m),Qi(m,D,null,M);var pe=m.memoizedState;if(D=pe.element,J.isDehydrated)if(J={element:D,isDehydrated:!1,cache:pe.cache,pendingSuspenseBoundaries:pe.pendingSuspenseBoundaries,transitions:pe.transitions},m.updateQueue.baseState=J,m.memoizedState=J,m.flags&256){$=j(Error(t(423)),m),m=Yr(f,m,D,M,$);break e}else if(D!==$){$=j(Error(t(424)),m),m=Yr(f,m,D,M,$);break e}else for(Po=yc(m.stateNode.containerInfo.firstChild),so=m,Ii=!0,Ua=null,M=op(m,null,D,M),m.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(vu(),D===$){m=_d(f,m,M);break e}Mn(f,m,D,M)}m=m.child}return m;case 5:return md(m),f===null&&mg(m),D=m.type,$=m.pendingProps,J=f!==null?f.memoizedProps:null,pe=$.children,Bv(D,$)?pe=null:J!==null&&Bv(D,J)&&(m.flags|=32),It(f,m),Mn(f,m,pe,M),m.child;case 6:return f===null&&mg(m),null;case 13:return Cc(f,m,M);case 4:return up(m,m.stateNode.containerInfo),D=m.pendingProps,f===null?m.child=cd(m,null,D,M):Mn(f,m,D,M),m.child;case 11:return D=m.type,$=m.pendingProps,$=m.elementType===D?$:za(D,$),lo(f,m,D,$,M);case 7:return Mn(f,m,m.pendingProps,M),m.child;case 8:return Mn(f,m,m.pendingProps.children,M),m.child;case 12:return Mn(f,m,m.pendingProps.children,M),m.child;case 10:e:{if(D=m.type._context,$=m.pendingProps,J=m.memoizedProps,pe=$.value,yi(ud,D._currentValue),D._currentValue=pe,J!==null)if(ha(J.value,pe)){if(J.children===$.children&&!Ro.current){m=_d(f,m,M);break e}}else for(J=m.child,J!==null&&(J.return=m);J!==null;){var Ve=J.dependencies;if(Ve!==null){pe=J.child;for(var Ke=Ve.firstContext;Ke!==null;){if(Ke.context===D){if(J.tag===1){Ke=mi(-1,M&-M),Ke.tag=2;var bt=J.updateQueue;if(bt!==null){bt=bt.shared;var Yt=bt.pending;Yt===null?Ke.next=Ke:(Ke.next=Yt.next,Yt.next=Ke),bt.pending=Ke}}J.lanes|=M,Ke=J.alternate,Ke!==null&&(Ke.lanes|=M),lp(J.return,M,m),Ve.lanes|=M;break}Ke=Ke.next}}else if(J.tag===10)pe=J.type===m.type?null:J.child;else if(J.tag===18){if(pe=J.return,pe===null)throw Error(t(341));pe.lanes|=M,Ve=pe.alternate,Ve!==null&&(Ve.lanes|=M),lp(pe,M,m),pe=J.sibling}else pe=J.child;if(pe!==null)pe.return=J;else for(pe=J;pe!==null;){if(pe===m){pe=null;break}if(J=pe.sibling,J!==null){J.return=pe.return,pe=J;break}pe=pe.return}J=pe}Mn(f,m,$.children,M),m=m.child}return m;case 9:return $=m.type,D=m.pendingProps.children,_u(m,M),$=ga($),D=D($),m.flags|=1,Mn(f,m,D,M),m.child;case 14:return D=m.type,$=za(D,m.pendingProps),$=za(D.type,$),xa(f,m,D,$,M);case 15:return gt(f,m,m.type,m.pendingProps,M);case 17:return D=m.type,$=m.pendingProps,$=m.elementType===D?$:za(D,$),Xb(f,m),m.tag=1,go(D)?(f=!0,od(m)):f=!1,_u(m,M),_(m,D,$),O(m,D,$,M),Sr(null,m,D,!0,f,M);case 19:return Rk(f,m,M);case 22:return st(f,m,M)}throw Error(t(156,m.tag))};function eO(f,m){return du(f,m)}function p7(f,m,M,D){this.tag=f,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jl(f,m,M,D){return new p7(f,m,M,D)}function b3(f){return f=f.prototype,!(!f||!f.isReactComponent)}function m7(f){if(typeof f=="function")return b3(f)?1:0;if(f!=null){if(f=f.$$typeof,f===z)return 11;if(f===Q)return 14}return 2}function Lf(f,m){var M=f.alternate;return M===null?(M=Jl(f.tag,m,f.key,f.mode),M.elementType=f.elementType,M.type=f.type,M.stateNode=f.stateNode,M.alternate=f,f.alternate=M):(M.pendingProps=m,M.type=f.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=f.flags&0xe00000,M.childLanes=f.childLanes,M.lanes=f.lanes,M.child=f.child,M.memoizedProps=f.memoizedProps,M.memoizedState=f.memoizedState,M.updateQueue=f.updateQueue,m=f.dependencies,M.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},M.sibling=f.sibling,M.index=f.index,M.ref=f.ref,M}function sw(f,m,M,D,$,J){var pe=2;if(D=f,typeof f=="function")b3(f)&&(pe=1);else if(typeof f=="string")pe=5;else e:switch(f){case q:return wp(M.children,$,J,m);case L:pe=8,$|=8;break;case R:return f=Jl(12,M,m,$|2),f.elementType=R,f.lanes=J,f;case V:return f=Jl(13,M,m,$),f.elementType=V,f.lanes=J,f;case W:return f=Jl(19,M,m,$),f.elementType=W,f.lanes=J,f;case re:return ow(M,$,J,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case P:pe=10;break e;case F:pe=9;break e;case z:pe=11;break e;case Q:pe=14;break e;case X:pe=16,D=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return m=Jl(pe,M,m,$),m.elementType=f,m.type=D,m.lanes=J,m}function wp(f,m,M,D){return f=Jl(7,f,D,m),f.lanes=M,f}function ow(f,m,M,D){return f=Jl(22,f,D,m),f.elementType=re,f.lanes=M,f.stateNode={isHidden:!1},f}function w3(f,m,M){return f=Jl(6,f,null,m),f.lanes=M,f}function S3(f,m,M){return m=Jl(4,f.children!==null?f.children:[],f.key,m),m.lanes=M,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function g7(f,m,M,D,$){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bs(0),this.expirationTimes=Bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bs(0),this.identifierPrefix=D,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function E3(f,m,M,D,$,J,pe,Ve,Ke){return f=new g7(f,m,M,Ve,Ke),m===1?(m=1,J===!0&&(m|=8)):m=0,J=Jl(3,null,null,m),f.current=J,J.stateNode=f,J.memoizedState={element:D,isDehydrated:M,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ir(J),f}function y7(f,m,M){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:D==null?null:""+D,children:f,containerInfo:m,implementation:M}}function tO(f){if(!f)return _c;f=f._reactInternals;e:{if(Ao(f)!==f||f.tag!==1)throw Error(t(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(go(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(f.tag===1){var M=f.type;if(go(M))return tp(f,M,m)}return m}function nO(f,m,M,D,$,J,pe,Ve,Ke){return f=E3(M,D,!0,f,$,J,pe,Ve,Ke),f.context=tO(null),M=f.current,D=ba(),$=kf(M),J=mi(D,$),J.callback=m??null,Li(M,J,$),f.current.lanes=$,fs(f,$,D),Wa(f,D),f}function aw(f,m,M,D){var $=m.current,J=ba(),pe=kf($);return M=tO(M),m.context===null?m.context=M:m.pendingContext=M,m=mi(J,pe),m.payload={element:f},D=D===void 0?null:D,D!==null&&(m.callback=D),f=Li($,m,pe),f!==null&&(Pc(f,$,pe,J),yo(f,$,pe)),pe}function lw(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function rO(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var M=f.retryLane;f.retryLane=M!==0&&M<m?M:m}}function T3(f,m){rO(f,m),(f=f.alternate)&&rO(f,m)}function v7(){return null}var iO=typeof reportError=="function"?reportError:function(f){console.error(f)};function M3(f){this._internalRoot=f}cw.prototype.render=M3.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(t(409));aw(f,m,null,null)},cw.prototype.unmount=M3.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;_p(function(){aw(null,f,null,null)}),m[ma]=null}};function cw(f){this._internalRoot=f}cw.prototype.unstable_scheduleHydration=function(f){if(f){var m=pc();f={blockedOn:null,target:f,priority:m};for(var M=0;M<Be.length&&m!==0&&m<Be[M].priority;M++);Be.splice(M,0,f),M===0&&mt(f)}};function I3(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function uw(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function sO(){}function _7(f,m,M,D,$){if($){if(typeof D=="function"){var J=D;D=function(){var bt=lw(pe);J.call(bt)}}var pe=nO(m,D,f,0,null,!1,!1,"",sO);return f._reactRootContainer=pe,f[ma]=pe.current,_f(f.nodeType===8?f.parentNode:f),_p(),pe}for(;$=f.lastChild;)f.removeChild($);if(typeof D=="function"){var Ve=D;D=function(){var bt=lw(Ke);Ve.call(bt)}}var Ke=E3(f,0,!1,null,null,!1,!1,"",sO);return f._reactRootContainer=Ke,f[ma]=Ke.current,_f(f.nodeType===8?f.parentNode:f),_p(function(){aw(m,Ke,M,D)}),Ke}function dw(f,m,M,D,$){var J=M._reactRootContainer;if(J){var pe=J;if(typeof $=="function"){var Ve=$;$=function(){var Ke=lw(pe);Ve.call(Ke)}}aw(m,pe,f,$)}else pe=_7(M,m,f,$,D);return lw(pe)}fu=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var M=ar(m.pendingLanes);M!==0&&(Vi(m,M|1),Wa(m,ut()),!(ii&6)&&(Ig=ut()+500,Gl()))}break;case 13:_p(function(){var D=_l(f,1);if(D!==null){var $=ba();Pc(D,f,1,$)}}),T3(f,1)}},je=function(f){if(f.tag===13){var m=_l(f,0x8000000);if(m!==null){var M=ba();Pc(m,f,0x8000000,M)}T3(f,0x8000000)}},Vh=function(f){if(f.tag===13){var m=kf(f),M=_l(f,m);if(M!==null){var D=ba();Pc(M,f,m,D)}T3(f,m)}},pc=function(){return Vr},Ku=function(f,m){var M=Vr;try{return Vr=f,m()}finally{Vr=M}},Kt=function(f,m,M){switch(m){case"input":if(Mt(f,M),m=M.name,M.type==="radio"&&m!=null){for(M=f;M.parentNode;)M=M.parentNode;for(M=M.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<M.length;m++){var D=M[m];if(D!==f&&D.form===f.form){var $=ug(D);if(!$)throw Error(t(90));Ne(D),Mt(D,$)}}}break;case"textarea":Ce(f,M);break;case"select":m=M.value,m!=null&&le(f,!!M.multiple,m,!1)}},Lr=v3,ai=_p;var x7={usingClientEntryPoint:!1,Events:[vc,os,ug,Ft,Hn,v3]},m_={findFiberByHostInstance:yu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b7={bundleType:m_.bundleType,version:m_.version,rendererPackageName:m_.rendererPackageName,rendererConfig:m_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=cu(f),f===null?null:f.stateNode},findFiberByHostInstance:m_.findFiberByHostInstance||v7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fw.isDisabled&&fw.supportsFiber)try{Wn=fw.inject(b7),nn=fw}catch{}}return $a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x7,$a.createPortal=function(f,m){var M=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I3(m))throw Error(t(200));return y7(f,m,null,M)},$a.createRoot=function(f,m){if(!I3(f))throw Error(t(299));var M=!1,D="",$=iO;return m!=null&&(m.unstable_strictMode===!0&&(M=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onRecoverableError!==void 0&&($=m.onRecoverableError)),m=E3(f,1,!1,null,null,M,!1,D,$),f[ma]=m.current,_f(f.nodeType===8?f.parentNode:f),new M3(m)},$a.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=cu(m),f=f===null?null:f.stateNode,f},$a.flushSync=function(f){return _p(f)},$a.hydrate=function(f,m,M){if(!uw(m))throw Error(t(200));return dw(null,f,m,!0,M)},$a.hydrateRoot=function(f,m,M){if(!I3(f))throw Error(t(405));var D=M!=null&&M.hydratedSources||null,$=!1,J="",pe=iO;if(M!=null&&(M.unstable_strictMode===!0&&($=!0),M.identifierPrefix!==void 0&&(J=M.identifierPrefix),M.onRecoverableError!==void 0&&(pe=M.onRecoverableError)),m=nO(m,null,f,1,M??null,$,!1,J,pe),f[ma]=m.current,_f(f),D)for(f=0;f<D.length;f++)M=D[f],$=M._getVersion,$=$(M._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[M,$]:m.mutableSourceEagerHydrationData.push(M,$);return new cw(m)},$a.render=function(f,m,M){if(!uw(m))throw Error(t(200));return dw(null,f,m,!1,M)},$a.unmountComponentAtNode=function(f){if(!uw(f))throw Error(t(40));return f._reactRootContainer?(_p(function(){dw(null,null,f,!1,function(){f._reactRootContainer=null,f[ma]=null})}),!0):!1},$a.unstable_batchedUpdates=v3,$a.unstable_renderSubtreeIntoContainer=function(f,m,M,D){if(!uw(M))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return dw(f,m,M,!1,D)},$a.version="18.3.1-next-f1338f8080-20240426",$a}var OO;function bU(){if(OO)return B3.exports;OO=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),B3.exports=tG(),B3.exports}var M2=bU();const V_=typeof window<"u"?ie.useLayoutEffect:ie.useEffect;function V3(n){const e=ie.useRef({value:n,prev:null}),t=e.current.value;return n!==t&&(e.current={value:n,prev:t}),e.current.prev}function nG(n,e,t={},r={}){const i=ie.useRef(typeof IntersectionObserver=="function"),s=ie.useRef(null);return ie.useEffect(()=>{if(!(!n.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},t),s.current.observe(n.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,t,r.disabled,n]),s.current}function rG(n){const e=ie.useRef(null);return ie.useEffect(()=>{n&&(typeof n=="function"?n(e.current):n.current=e.current)}),e}function iG(n,e){const t=uc(),[r,i]=ie.useState(!1),s=ie.useRef(!1),o=rG(e),{activeProps:a=()=>({className:"active"}),inactiveProps:l=()=>({}),activeOptions:u,to:c,preload:d,preloadDelay:h,hashScrollIntoView:p,replace:g,startTransition:x,resetScroll:b,viewTransition:y,children:E,target:T,disabled:I,style:N,className:k,onClick:q,onFocus:L,onMouseEnter:R,onMouseLeave:P,onTouchStart:F,ignoreBlocker:z,...V}=n,{params:W,search:Q,hash:X,state:re,mask:G,reloadDocument:Y,...te}=V,Z=ie.useMemo(()=>{try{return new URL(`${c}`),"external"}catch{}return"internal"},[c]),fe=ra({select:Ae=>Ae.location.search,structuralSharing:!0});n={from:_h({strict:!1,select:Ae=>Ae.pathname}),...n};const ce=ie.useMemo(()=>t.buildLocation(n),[t,n,fe]),ye=ie.useMemo(()=>n.reloadDocument?!1:d??t.options.defaultPreload,[t.options.defaultPreload,d,n.reloadDocument]),be=h??t.options.defaultPreloadDelay??0,Ee=ra({select:Ae=>{if(u?.exact){if(!f9(Ae.location.pathname,ce.pathname,t.basepath))return!1}else{const le=CS(Ae.location.pathname,t.basepath).split("/");if(!CS(ce.pathname,t.basepath).split("/").every((Ce,Ge)=>Ce===le[Ge]))return!1}return(u?.includeSearch??!0)&&!Ay(Ae.location.search,ce.search,{partial:!u?.exact,ignoreUndefined:!u?.explicitUndefined})?!1:u?.includeHash?Ae.location.hash===ce.hash:!0}}),Me=ie.useCallback(()=>{t.preloadRoute(n).catch(Ae=>{console.warn(Ae),console.warn(c9)})},[n,t]),qe=ie.useCallback(Ae=>{Ae?.isIntersecting&&Me()},[Me]);if(nG(o,qe,{rootMargin:"100px"},{disabled:!!I||ye!=="viewport"}),V_(()=>{s.current||!I&&ye==="render"&&(Me(),s.current=!0)},[I,Me,ye]),Z==="external")return{...te,ref:o,type:Z,href:c,...E&&{children:E},...T&&{target:T},...I&&{disabled:I},...N&&{style:N},...k&&{className:k},...q&&{onClick:q},...L&&{onFocus:L},...R&&{onMouseEnter:R},...P&&{onMouseLeave:P},...F&&{onTouchStart:F}};const Ue=Ae=>{if(!I&&!oG(Ae)&&!Ae.defaultPrevented&&(!T||T==="_self")&&Ae.button===0){Ae.preventDefault(),M2.flushSync(()=>{i(!0)});const le=t.subscribe("onResolved",()=>{le(),i(!1)});return t.navigate({...n,replace:g,resetScroll:b,hashScrollIntoView:p,startTransition:x,viewTransition:y,ignoreBlocker:z})}},Ye=Ae=>{I||ye&&Me()},Ne=Ye,ke=Ae=>{if(I)return;const le=Ae.target||{};if(ye){if(le.preloadTimeout)return;le.preloadTimeout=setTimeout(()=>{le.preloadTimeout=null,Me()},be)}},me=Ae=>{if(I)return;const le=Ae.target||{};le.preloadTimeout&&(clearTimeout(le.preloadTimeout),le.preloadTimeout=null)},ht=Ae=>le=>{var se;(se=le.persist)==null||se.call(le),Ae.filter(Boolean).forEach(Oe=>{le.defaultPrevented||Oe(le)})},ct=Ee?Qp(a,{})??{}:{},Mt=Ee?{}:Qp(l,{}),xe=[k,ct.className,Mt.className].filter(Boolean).join(" "),Te={...N,...ct.style,...Mt.style};return{...te,...ct,...Mt,href:I?void 0:ce.maskedLocation?t.history.createHref(ce.maskedLocation.href):t.history.createHref(ce.href),ref:o,onClick:ht([q,Ue]),onFocus:ht([L,Ye]),onMouseEnter:ht([R,ke]),onMouseLeave:ht([P,me]),onTouchStart:ht([F,Ne]),disabled:!!I,target:T,...Object.keys(Te).length&&{style:Te},...xe&&{className:xe},...I&&{role:"link","aria-disabled":!0},...Ee&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function wU(n){return ie.forwardRef(function(t,r){return S.jsx(sG,{...t,_asChild:n,ref:r})})}const sG=ie.forwardRef((n,e)=>{const{_asChild:t,...r}=n,{type:i,ref:s,...o}=iG(r,e),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof t>"u"&&delete o.disabled,ie.createElement(t||"a",{...o,ref:s},a)});function oG(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aG(){const n=uc(),e=ie.useRef({router:n,mounted:!1}),t=ra({select:({isLoading:d})=>d}),[r,i]=ie.useState(!1),s=ra({select:d=>d.matches.some(h=>h.status==="pending"),structuralSharing:!0}),o=V3(t),a=t||r||s,l=V3(a),u=t||s,c=V3(u);return n.isServer||(n.startReactTransition=d=>{i(!0),ie.startTransition(()=>{d(),i(!1)})}),ie.useEffect(()=>{const d=n.history.subscribe(n.load),h=n.buildLocation({to:n.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return Yp(n.latestLocation.href)!==Yp(h.href)&&n.commitLocation({...h,replace:!0}),()=>{d()}},[n,n.history]),V_(()=>{if(typeof window<"u"&&n.clientSsr||e.current.router===n&&e.current.mounted)return;e.current={router:n,mounted:!0},(async()=>{try{await n.load()}catch(h){console.error(h)}})()},[n]),V_(()=>{o&&!t&&n.emit({type:"onLoad",...Iy(n.state)})},[o,n,t]),V_(()=>{c&&!u&&n.emit({type:"onBeforeRouteMount",...Iy(n.state)})},[u,c,n]),V_(()=>{l&&!a&&(n.emit({type:"onResolved",...Iy(n.state)}),n.__store.setState(d=>({...d,status:"idle",resolvedLocation:d.location})))},[a,l,n]),null}function lG(){const n=uc(),e=n.options.defaultPendingComponent?S.jsx(n.options.defaultPendingComponent,{}):null,t=n.isServer||typeof document<"u"&&n.clientSsr?D1:ie.Suspense,r=S.jsxs(t,{fallback:e,children:[S.jsx(aG,{}),S.jsx(cG,{})]});return n.options.InnerWrap?S.jsx(n.options.InnerWrap,{children:r}):r}function cG(){const n=ra({select:t=>{var r;return(r=t.matches[0])==null?void 0:r.id}}),e=ra({select:t=>t.loadedAt});return S.jsx(T2.Provider,{value:n,children:S.jsx(fN,{getResetKey:()=>e,errorComponent:E2,onCatch:t=>{t.message||t.toString()},children:n?S.jsx(xU,{matchId:n}):null})})}function uG(){const n=uc();return ra({select:e=>{var t;return[e.location.href,(t=e.resolvedLocation)==null?void 0:t.href,e.status]},structuralSharing:!0}),ie.useCallback(e=>{const{pending:t,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return n.matchRoute(o,{pending:t,caseSensitive:r,fuzzy:i,includeSearch:s})},[n])}const SU=["component","errorComponent","pendingComponent","notFoundComponent"];function dG(n){var e;for(const t of SU)if((e=n.options[t])!=null&&e.preload)return!0;return!1}function W3(n,e){if(n==null)return{};if("~standard"in n){const t=n["~standard"].validate(e);if(t instanceof Promise)throw new OS("Async validation not supported");if(t.issues)throw new OS(JSON.stringify(t.issues,void 0,2),{cause:t});return t.value}return"parse"in n?n.parse(e):typeof n=="function"?n(e):{}}function fG(n){return new hG(n)}class hG{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startReactTransition=t=>t(),this.update=t=>{var r;t.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...t},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||t.basepath&&t.basepath!==i.basepath)&&(t.basepath===void 0||t.basepath===""||t.basepath==="/"?this.basepath="/":this.basepath=`/${d9(t.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?S9({initialEntries:[this.basepath||"/"]}):w9()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new CC(mG(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}}),K9(this)),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const t=this.options.notFoundRoute;t&&(t.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[t.id]=t);const r=o=>{o.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const u=this.routesById[a.id];if(Vc(!u,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=Yp(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const c=a.children;c?.length&&r(c)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,a)=>{var l;if(o.isRoot||!o.path)return;const u=uN(o.fullPath),c=$y(u);for(;c.length>1&&((l=c[0])==null?void 0:l.value)==="/";)c.shift();const d=c.map(h=>h.value==="/"?.75:h.type==="param"?.5:h.type==="wildcard"?.25:1);i.push({child:o,trimmed:u,parsed:c,index:a,scores:d})}),this.flatRoutes=i.sort((o,a)=>{const l=Math.min(o.scores.length,a.scores.length);for(let u=0;u<l;u++)if(o.scores[u]!==a.scores[u])return a.scores[u]-o.scores[u];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let u=0;u<l;u++)if(o.parsed[u].value!==a.parsed[u].value)return o.parsed[u].value>a.parsed[u].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(t,r)=>{const i={eventType:t,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=t=>{this.subscribers.forEach(r=>{r.eventType===t.type&&r.fn(t)})},this.parseLocation=(t,r)=>{const i=({pathname:l,search:u,hash:c,state:d})=>{const h=this.options.parseSearch(u),p=this.options.stringifySearch(h);return{pathname:l,searchStr:p,search:ec(t?.search,h),hash:c.split("#").reverse()[0]??"",href:`${l}${p}${c}`,state:ec(t?.state,d)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:a}=s.state;if(o&&(!a||a===this.tempLocationKey)){const l=i(o);return l.state.key=s.state.key,delete l.state.__tempLocation,{...l,maskedLocation:s}}return s},this.resolvePathWithBase=(t,r)=>h9({basepath:this.basepath,base:t,to:S2(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(t,r)=>{let i={};const s=Yp(t.pathname),o=c=>mw(this.basepath,s,{to:c.fullPath,caseSensitive:c.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=r?.to!==void 0?this.routesByPath[r.to]:void 0;a?i=o(a):a=this.flatRoutes.find(c=>{const d=o(c);return d?(i=d,!0):!1});let l=a||this.routesById[Ja];const u=[l];for(;l.parentRoute;)l=l.parentRoute,u.unshift(l);return{matchedRoutes:u,routeParams:i,foundRoute:a}},this.cancelMatch=t=>{const r=this.getMatch(t);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var t;(t=this.state.pendingMatches)==null||t.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=t=>{const r=(s={},o)=>{var a,l,u,c,d,h;const p=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,g=s.from!=null?p.find(F=>mw(this.basepath,Yp(F.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,x=g?.pathname||this.latestLocation.pathname;Vc(s.from==null||g!=null,"Could not find match for from: "+s.from);const b=(a=this.state.pendingMatches)!=null&&a.length?(l=sx(this.state.pendingMatches))==null?void 0:l.search:((u=sx(p))==null?void 0:u.search)||this.latestLocation.search,y=o?.matchedRoutes.filter(F=>p.find(z=>z.routeId===F.id));let E;if(s.to)E=this.resolvePathWithBase(x,`${s.to}`);else{const F=this.routesById[(c=y?.find(z=>{const V=pw({path:z.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return Vd([this.basepath,V])===x}))==null?void 0:c.id];E=this.resolvePathWithBase(x,F?.to??x)}const T={...(d=sx(p))==null?void 0:d.params};let I=(s.params??!0)===!0?T:{...T,...Qp(s.params,T)};Object.keys(I).length>0&&o?.matchedRoutes.map(F=>{var z;return((z=F.options.params)==null?void 0:z.stringify)??F.options.stringifyParams}).filter(Boolean).forEach(F=>{I={...I,...F(I)}}),E=pw({path:E,params:I??{},leaveWildcards:!1,leaveParams:t.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let N=b;if(t._includeValidateSearch&&((h=this.options.search)!=null&&h.strict)){let F={};o?.matchedRoutes.forEach(z=>{try{z.options.validateSearch&&(F={...F,...W3(z.options.validateSearch,{...F,...N})??{}})}catch{}}),N=F}N=(F=>{const z=o?.matchedRoutes.reduce((Q,X)=>{var re;const G=[];if("search"in X.options)(re=X.options.search)!=null&&re.middlewares&&G.push(...X.options.search.middlewares);else if(X.options.preSearchFilters||X.options.postSearchFilters){const Y=({search:te,next:Z})=>{let fe=te;"preSearchFilters"in X.options&&X.options.preSearchFilters&&(fe=X.options.preSearchFilters.reduce((ce,ye)=>ye(ce),te));const ge=Z(fe);return"postSearchFilters"in X.options&&X.options.postSearchFilters?X.options.postSearchFilters.reduce((ce,ye)=>ye(ce),ge):ge};G.push(Y)}if(t._includeValidateSearch&&X.options.validateSearch){const Y=({search:te,next:Z})=>{try{const fe=Z(te);return{...fe,...W3(X.options.validateSearch,fe)??{}}}catch{}};G.push(Y)}return Q.concat(G)},[])??[],V=({search:Q})=>s.search?s.search===!0?Q:Qp(s.search,Q):{};z.push(V);const W=(Q,X)=>{if(Q>=z.length)return X;const re=z[Q];return re({search:X,next:Y=>W(Q+1,Y)})};return W(0,F)})(N),N=ec(b,N);const q=this.options.stringifySearch(N),L=s.hash===!0?this.latestLocation.hash:s.hash?Qp(s.hash,this.latestLocation.hash):void 0,R=L?`#${L}`:"";let P=s.state===!0?this.latestLocation.state:s.state?Qp(s.state,this.latestLocation.state):{};return P=ec(this.latestLocation.state,P),{pathname:E,search:N,searchStr:q,state:P,hash:L??"",href:`${E}${q}${R}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var a;const l=r(s);let u=o?r(o):void 0;if(!u){let h={};const p=(a=this.options.routeMasks)==null?void 0:a.find(g=>{const x=mw(this.basepath,l.pathname,{to:g.from,caseSensitive:!1,fuzzy:!1});return x?(h=x,!0):!1});if(p){const{from:g,...x}=p;o={...IC(t,["from"]),...x,params:h},u=r(o)}}const c=this.getMatchedRoutes(l,s),d=r(s,c);if(u){const h=this.getMatchedRoutes(u,o),p=r(o,h);d.maskedLocation=p}return d};return t.mask?i(t,{...IC(t,["from"]),...t.mask}):i(t)},this.commitLocation=({viewTransition:t,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const l=Ay(i.state,this.latestLocation.state);return delete i.state.key,l},o=this.latestLocation.href===i.href,a=this.commitLocationPromise;if(this.commitLocationPromise=iy(()=>{a?.resolve()}),o&&s())this.load();else{let{maskedLocation:l,hashScrollIntoView:u,...c}=i;l&&(c={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...c,search:c.searchStr,state:{...c.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(c.unmaskOnReload??this.options.unmaskOnReload??!1)&&(c.state.__tempKey=this.tempLocationKey)),c.state.__hashScrollIntoViewOptions=u??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=t,this.history[i.replace?"replace":"push"](c.href,c.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:t,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:a,...l}={})=>{if(a){const c=this.history.location.state.__TSR_index,d=Nx(a,{__TSR_index:t?c:c+1});l.to=d.pathname,l.search=this.options.parseSearch(d.search),l.hash=d.hash.slice(1)}const u=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...u,viewTransition:s,replace:t,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:t,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:t,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:t})},this.load=async t=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var a;try{const l=this.latestLocation,u=this.state.resolvedLocation;this.cancelMatches();let c;D3(()=>{c=this.matchRoutes(l),this.__store.setState(d=>({...d,status:"pending",isLoading:!0,location:l,pendingMatches:c,cachedMatches:d.cachedMatches.filter(h=>!c.find(p=>p.id===h.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...Iy({resolvedLocation:u,location:l})}),this.emit({type:"onBeforeLoad",...Iy({resolvedLocation:u,location:l})}),await this.loadMatches({sync:t?.sync,matches:c,location:l,onReady:async()=>{this.startViewTransition(async()=>{let d,h,p;D3(()=>{this.__store.setState(g=>{const x=g.matches,b=g.pendingMatches||g.matches;return d=x.filter(y=>!b.find(E=>E.id===y.id)),h=b.filter(y=>!x.find(E=>E.id===y.id)),p=x.filter(y=>b.find(E=>E.id===y.id)),{...g,isLoading:!1,loadedAt:Date.now(),matches:b,pendingMatches:void 0,cachedMatches:[...g.cachedMatches,...d.filter(y=>y.status!=="error")]}}),this.clearExpiredCache()}),[[d,"onLeave"],[h,"onEnter"],[p,"onStay"]].forEach(([g,x])=>{g.forEach(b=>{var y,E;(E=(y=this.looseRoutesById[b.routeId].options)[x])==null||E.call(y,b)})})})}})}catch(l){q3(l)?(r=l,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):rc(l)&&(i=l),this.__store.setState(u=>({...u,statusCode:r?r.statusCode:i?404:u.matches.some(c=>c.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((a=this.commitLocationPromise)==null||a.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=t=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:t,types:r.types}:i=t,document.startViewTransition(i)}else t()},this.updateMatch=(t,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(c=>c.id===t),a=this.state.matches.find(c=>c.id===t),l=this.state.cachedMatches.find(c=>c.id===t),u=o?"pendingMatches":a?"matches":l?"cachedMatches":"";return u&&this.__store.setState(c=>{var d;return{...c,[u]:(d=c[u])==null?void 0:d.map(h=>h.id===t?s=r(h):h)}}),s},this.getMatch=t=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===t),this.loadMatches=async({location:t,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:a})=>{let l,u=!1;const c=async()=>{u||(u=!0,await s?.())},d=p=>!!(i&&!this.state.matches.find(g=>g.id===p));!this.isServer&&!this.state.matches.length&&c();const h=(p,g)=>{var x,b,y,E;if(q3(g)&&!g.reloadDocument)throw g;if(Fp(g)||rc(g)){if(o(p.id,T=>({...T,status:Fp(g)?"redirected":rc(g)?"notFound":"error",isFetching:!1,error:g,beforeLoadPromise:void 0,loaderPromise:void 0})),g.routeId||(g.routeId=p.routeId),(x=p.beforeLoadPromise)==null||x.resolve(),(b=p.loaderPromise)==null||b.resolve(),(y=p.loadPromise)==null||y.resolve(),Fp(g))throw u=!0,g=this.resolveRedirect({...g,_fromLocation:t}),g;if(rc(g))throw this._handleNotFound(r,g,{updateMatch:o}),(E=this.serverSsr)==null||E.onMatchSettled({router:this,match:this.getMatch(p.id)}),g}};try{await new Promise((p,g)=>{(async()=>{var x,b,y;try{const E=(N,k,q)=>{var L,R;const{id:P,routeId:F}=r[N],z=this.looseRoutesById[F];if(k instanceof Promise)throw k;k.routerCode=q,l=l??N,h(this.getMatch(P),k);try{(R=(L=z.options).onError)==null||R.call(L,k)}catch(V){k=V,h(this.getMatch(P),k)}o(P,V=>{var W,Q;return(W=V.beforeLoadPromise)==null||W.resolve(),(Q=V.loadPromise)==null||Q.resolve(),{...V,error:k,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[N,{id:k,routeId:q}]of r.entries()){const L=this.getMatch(k),R=(x=r[N-1])==null?void 0:x.id,P=this.looseRoutesById[q],F=P.options.pendingMs??this.options.defaultPendingMs,z=!!(s&&!this.isServer&&!d(k)&&(P.options.loader||P.options.beforeLoad)&&typeof F=="number"&&F!==1/0&&(P.options.pendingComponent??this.options.defaultPendingComponent));let V=!0;if((L.beforeLoadPromise||L.loaderPromise)&&(z&&setTimeout(()=>{try{c()}catch{}},F),await L.beforeLoadPromise,V=this.getMatch(k).status!=="success"),V){try{o(k,be=>({...be,loadPromise:iy(()=>{var Ee;(Ee=be.loadPromise)==null||Ee.resolve()}),beforeLoadPromise:iy()}));const W=new AbortController;let Q;z&&(Q=setTimeout(()=>{try{c()}catch{}},F));const{paramsError:X,searchError:re}=this.getMatch(k);X&&E(N,X,"PARSE_PARAMS"),re&&E(N,re,"VALIDATE_SEARCH");const G=()=>R?this.getMatch(R).context:this.options.context??{};o(k,be=>({...be,isFetching:"beforeLoad",fetchCount:be.fetchCount+1,abortController:W,pendingTimeout:Q,context:{...G(),...be.__routeContext}}));const{search:Y,params:te,context:Z,cause:fe}=this.getMatch(k),ge=d(k),ce={search:Y,abortController:W,params:te,preload:ge,context:Z,location:t,navigate:be=>this.navigate({...be,_fromLocation:t}),buildLocation:this.buildLocation,cause:ge?"preload":fe,matches:r},ye=await ((y=(b=P.options).beforeLoad)==null?void 0:y.call(b,ce))??{};(Fp(ye)||rc(ye))&&E(N,ye,"BEFORE_LOAD"),o(k,be=>({...be,__beforeLoadContext:ye,context:{...G(),...be.__routeContext,...ye},abortController:W}))}catch(W){E(N,W,"BEFORE_LOAD")}o(k,W=>{var Q;return(Q=W.beforeLoadPromise)==null||Q.resolve(),{...W,beforeLoadPromise:void 0,isFetching:!1}})}}const T=r.slice(0,l),I=[];T.forEach(({id:N,routeId:k},q)=>{I.push((async()=>{const{loaderPromise:L}=this.getMatch(N);let R=!1,P=!1;if(L){await L;const F=this.getMatch(N);F.error&&h(F,F.error)}else{const F=I[q-1],z=this.looseRoutesById[k],V=()=>{const{params:fe,loaderDeps:ge,abortController:ce,context:ye,cause:be}=this.getMatch(N),Ee=d(N);return{params:fe,deps:ge,preload:!!Ee,parentMatchPromise:F,abortController:ce,context:ye,location:t,navigate:Me=>this.navigate({...Me,_fromLocation:t}),cause:Ee?"preload":be,route:z}},W=Date.now()-this.getMatch(N).updatedAt,Q=d(N),X=Q?z.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:z.options.staleTime??this.options.defaultStaleTime??0,re=z.options.shouldReload,G=typeof re=="function"?re(V()):re;o(N,fe=>({...fe,loaderPromise:iy(),preload:!!Q&&!this.state.matches.find(ge=>ge.id===N)}));const Y=async()=>{var fe,ge,ce,ye,be,Ee,Me,qe,Ue;try{const Ye=async()=>{const Ne=this.getMatch(N);Ne.minPendingPromise&&await Ne.minPendingPromise};try{this.loadRouteChunk(z),o(N,xe=>({...xe,isFetching:"loader"}));const Ne=await ((ge=(fe=z.options).loader)==null?void 0:ge.call(fe,V()));h(this.getMatch(N),Ne),await z._lazyPromise,await Ye();const ke=(ye=(ce=z.options).head)==null?void 0:ye.call(ce,{matches:r,match:this.getMatch(N),params:this.getMatch(N).params,loaderData:Ne}),me=ke?.meta,ht=ke?.links,ct=ke?.scripts,Mt=(Ee=(be=z.options).headers)==null?void 0:Ee.call(be,{loaderData:Ne});o(N,xe=>({...xe,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Ne,meta:me,links:ht,scripts:ct,headers:Mt}))}catch(Ne){let ke=Ne;await Ye(),h(this.getMatch(N),Ne);try{(qe=(Me=z.options).onError)==null||qe.call(Me,Ne)}catch(me){ke=me,h(this.getMatch(N),me)}o(N,me=>({...me,error:ke,status:"error",isFetching:!1}))}(Ue=this.serverSsr)==null||Ue.onMatchSettled({router:this,match:this.getMatch(N)}),await z._componentsPromise}catch(Ye){o(N,Ne=>({...Ne,loaderPromise:void 0})),h(this.getMatch(N),Ye)}},{status:te,invalid:Z}=this.getMatch(N);R=te==="success"&&(Z||(G??W>X)),Q&&z.options.preload===!1||(R&&!a?(P=!0,(async()=>{try{await Y();const{loaderPromise:fe,loadPromise:ge}=this.getMatch(N);fe?.resolve(),ge?.resolve(),o(N,ce=>({...ce,loaderPromise:void 0}))}catch(fe){q3(fe)&&await this.navigate(fe)}})()):(te!=="success"||R&&a)&&await Y())}if(!P){const{loaderPromise:F,loadPromise:z}=this.getMatch(N);F?.resolve(),z?.resolve()}return o(N,F=>({...F,isFetching:P?F.isFetching:!1,loaderPromise:P?F.loaderPromise:void 0,invalid:!1})),this.getMatch(N)})())}),await Promise.all(I),p()}catch(E){g(E)}})()}),await c()}catch(p){if(Fp(p)||rc(p))throw rc(p)&&!i&&await c(),p}return r},this.invalidate=t=>{const r=i=>{var s;return((s=t?.filter)==null?void 0:s.call(t,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:t?.sync})},this.resolveRedirect=t=>{const r=t;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=t=>{const r=t?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const t=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:t})},this.loadRouteChunk=t=>(t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(t.options,s)}):t._lazyPromise=Promise.resolve()),t._componentsPromise===void 0&&(t._componentsPromise=t._lazyPromise.then(()=>Promise.all(SU.map(async r=>{const i=t.options[r];i?.preload&&await i.preload()})))),t._componentsPromise),this.preloadRoute=async t=>{const r=this.buildLocation(t);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:t});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);D3(()=>{i.forEach(a=>{o.has(a.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(a,l)=>{s.has(a)?i=i.map(u=>u.id===a?l(u):u):this.updateMatch(a,l)}}),i}catch(a){if(Fp(a))return a.reloadDocument?void 0:await this.preloadRoute({...a,_fromLocation:r});rc(a)||console.error(a);return}},this.matchRoute=(t,r)=>{const i={...t,to:t.to?this.resolvePathWithBase(t.from||"",t.to):void 0,params:t.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,l=mw(this.basepath,a.pathname,{...r,to:s.pathname});return!l||t.params&&!Ay(l,t.params,{partial:!0})?!1:l&&(r?.includeSearch??!0)?Ay(a.search,s.search,{partial:!0})?l:!1:l},this._handleNotFound=(t,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(t.map(l=>[l.routeId,l]));let o=(r.global?this.looseRoutesById[Ja]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Ja];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Ja;)o=o.parentRoute,Vc(o);const a=s[o.id];Vc(a,"Could not find match for route: "+o.id),i(a.id,l=>({...l,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(t,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(t=>t.status==="notFound"||t.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??_9,parseSearch:e.parseSearch??v9}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,t,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:t},r):this.matchRoutesInternal(e,t)}matchRoutesInternal(e,t){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,t?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:Yp(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.children)return h.id}return Ja}})(),l=i.map(d=>{var h;let p;const g=((h=d.options.params)==null?void 0:h.parse)??d.options.parseParams;if(g)try{const x=g(s);Object.assign(s,x)}catch(x){if(p=new pG(x.message,{cause:x}),t?.throwOnError)throw p;return p}}),u=[],c=d=>d?.id?d.context??this.options.context??{}:this.options.context??{};return i.forEach((d,h)=>{var p,g,x,b;const y=u[h-1],[E,T,I]=(()=>{const Q=y?.search??e.search,X=y?._strictSearch??{};try{const re=W3(d.options.validateSearch,{...Q})??{};return[{...Q,...re},{...X,...re},void 0]}catch(re){let G=re;if(re instanceof OS||(G=new OS(re.message,{cause:re})),t?.throwOnError)throw G;return[Q,{},G]}})(),N=((g=(p=d.options).loaderDeps)==null?void 0:g.call(p,{search:E}))??"",k=N?JSON.stringify(N):"",{usedParams:q,interpolatedPath:L}=pw({path:d.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),R=pw({path:d.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+k,P=this.getMatch(R),F=this.state.matches.find(Q=>Q.routeId===d.id),z=F?"stay":"enter";let V;if(P)V={...P,cause:z,params:F?ec(F.params,s):s,_strictParams:q,search:ec(F?F.search:P.search,E),_strictSearch:T};else{const Q=d.options.loader||d.options.beforeLoad||d.lazyFn||dG(d)?"pending":"success";V={id:R,index:h,routeId:d.id,params:F?ec(F.params,s):s,_strictParams:q,pathname:Vd([this.basepath,L]),updatedAt:Date.now(),search:F?ec(F.search,E):E,_strictSearch:T,searchError:void 0,status:Q,isFetching:!1,error:void 0,paramsError:l[h],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:z,loaderDeps:F?ec(F.loaderDeps,N):N,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:d.options.staticData||{},loadPromise:iy(),fullPath:d.fullPath}}V.status==="success"&&(V.headers=(b=(x=d.options).headers)==null?void 0:b.call(x,{loaderData:V.loaderData})),t?.preload||(V.globalNotFound=a===d.id),V.searchError=I;const W=c(y);V.context={...W,...V.__routeContext,...V.__beforeLoadContext},u.push(V)}),u.forEach((d,h)=>{var p,g,x,b;const y=this.looseRoutesById[d.routeId];if(!this.getMatch(d.id)&&t?._buildLocation!==!0){const I=u[h-1],N=c(I),k={deps:d.loaderDeps,params:d.params,context:N,location:e,navigate:q=>this.navigate({...q,_fromLocation:e}),buildLocation:this.buildLocation,cause:d.cause,abortController:d.abortController,preload:!!d.preload,matches:u};d.__routeContext=((g=(p=y.options).context)==null?void 0:g.call(p,k))??{},d.context={...N,...d.__routeContext,...d.__beforeLoadContext}}const T=(b=(x=y.options).head)==null?void 0:b.call(x,{matches:u,match:d,params:d.params,loaderData:d.loaderData??void 0});d.links=T?.links,d.scripts=T?.scripts,d.meta=T?.meta}),u}}class OS extends Error{}class pG extends Error{}function mG(n){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:n,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function gG({router:n,children:e,...t}){n.update({...n.options,...t,context:{...n.options.context,...t.context}});const r=gU(),i=S.jsx(r.Provider,{value:n,children:e});return n.options.Wrap?S.jsx(n.options.Wrap,{children:i}):i}function yG({router:n,...e}){return S.jsx(gG,{router:n,...e,children:S.jsx(lG,{})})}function Ui(n){return _h({...n,select:e=>n.select?n.select(e.context):e.context})}let vG={data:""},_G=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||vG,xG=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,bG=/\/\*[^]*?\*\/|  +/g,LO=/\n+/g,nh=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?nh(o,s):s+"{"+nh(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=nh(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=nh.p?nh.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},bd={},EU=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+EU(n[t]);return e}return n},wG=(n,e,t,r,i)=>{let s=EU(n),o=bd[s]||(bd[s]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(s));if(!bd[o]){let l=s!==n?n:(u=>{let c,d,h=[{}];for(;c=xG.exec(u.replace(bG,""));)c[4]?h.shift():c[3]?(d=c[3].replace(LO," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][c[1]]=c[2].replace(LO," ").trim();return h[0]})(n);bd[o]=nh(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&bd.g?bd.g:null;return t&&(bd.g=bd[o]),((l,u,c,d)=>{d?u.data=u.data.replace(d,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(bd[o],e,r,a),o},SG=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":nh(a,""):a===!1?"":a}return r+i+(o??"")},"");function I2(n){let e=this||{},t=n.call?n(e.p):n;return wG(t.unshift?t.raw?SG(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,_G(e.target),e.g,e.o,e.k)}let TU,NC,PC;I2.bind({g:1});let Qd=I2.bind({k:1});function EG(n,e,t,r){nh.p=e,TU=n,NC=t,PC=r}function Ph(n,e){let t=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;t.p=Object.assign({theme:NC&&NC()},a),t.o=/ *go\d+/.test(l),a.className=I2.apply(t,r)+(l?" "+l:"");let u=n;return n[0]&&(u=a.as||n,delete a.as),PC&&u[0]&&PC(a),TU(u,a)}return e?e(i):i}}var TG=n=>typeof n=="function",LS=(n,e)=>TG(n)?n(e):n,MG=(()=>{let n=0;return()=>(++n).toString()})(),MU=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),IG=20,IU=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,IG)};case 1:return{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return IU(n,{type:n.toasts.find(s=>s.id===t.id)?1:0,toast:t});case 3:let{toastId:r}=e;return{...n,toasts:n.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},F1=[],q1={toasts:[],pausedAt:void 0},Dm=n=>{q1=IU(q1,n),F1.forEach(e=>{e(q1)})},AG={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CG=(n={})=>{let[e,t]=ie.useState(q1);ie.useEffect(()=>(F1.push(t),()=>{let i=F1.indexOf(t);i>-1&&F1.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,a;return{...n,...n[i.type],...i,removeDelay:i.removeDelay||((s=n[i.type])==null?void 0:s.removeDelay)||n?.removeDelay,duration:i.duration||((o=n[i.type])==null?void 0:o.duration)||n?.duration||AG[i.type],style:{...n.style,...(a=n[i.type])==null?void 0:a.style,...i.style}}});return{...e,toasts:r}},RG=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||MG()}),L0=n=>(e,t)=>{let r=RG(e,n,t);return Dm({type:2,toast:r}),r.id},ci=(n,e)=>L0("blank")(n,e);ci.error=L0("error");ci.success=L0("success");ci.loading=L0("loading");ci.custom=L0("custom");ci.dismiss=n=>{Dm({type:3,toastId:n})};ci.remove=n=>Dm({type:4,toastId:n});ci.promise=(n,e,t)=>{let r=ci.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let s=e.success?LS(e.success,i):void 0;return s?ci.success(s,{id:r,...t,...t?.success}):ci.dismiss(r),i}).catch(i=>{let s=e.error?LS(e.error,i):void 0;s?ci.error(s,{id:r,...t,...t?.error}):ci.dismiss(r)}),n};var NG=(n,e)=>{Dm({type:1,toast:{id:n,height:e}})},PG=()=>{Dm({type:5,time:Date.now()})},ax=new Map,kG=1e3,OG=(n,e=kG)=>{if(ax.has(n))return;let t=setTimeout(()=>{ax.delete(n),Dm({type:4,toastId:n})},e);ax.set(n,t)},LG=n=>{let{toasts:e,pausedAt:t}=CG(n);ie.useEffect(()=>{if(t)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&ci.dismiss(a.id);return}return setTimeout(()=>ci.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let r=ie.useCallback(()=>{t&&Dm({type:6,time:Date.now()})},[t]),i=ie.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:u}=o||{},c=e.filter(p=>(p.position||u)===(s.position||u)&&p.height),d=c.findIndex(p=>p.id===s.id),h=c.filter((p,g)=>g<d&&p.visible).length;return c.filter(p=>p.visible).slice(...a?[h+1]:[0,h]).reduce((p,g)=>p+(g.height||0)+l,0)},[e]);return ie.useEffect(()=>{e.forEach(s=>{if(s.dismissed)OG(s.id,s.removeDelay);else{let o=ax.get(s.id);o&&(clearTimeout(o),ax.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:NG,startPause:PG,endPause:r,calculateOffset:i}}},DG=Qd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,FG=Qd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qG=Qd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,jG=Ph("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DG} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${FG} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qG} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,BG=Qd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,UG=Ph("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${BG} 1s linear infinite;
`,zG=Qd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,VG=Qd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,WG=Ph("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zG} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${VG} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$G=Ph("div")`
  position: absolute;
`,HG=Ph("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,GG=Qd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XG=Ph("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${GG} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,KG=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?ie.createElement(XG,null,e):e:t==="blank"?null:ie.createElement(HG,null,ie.createElement(UG,{...r}),t!=="loading"&&ie.createElement($G,null,t==="error"?ie.createElement(jG,{...r}):ie.createElement(WG,{...r})))},QG=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,YG=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,JG="0%{opacity:0;} 100%{opacity:1;}",ZG="0%{opacity:1;} 100%{opacity:0;}",eX=Ph("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,tX=Ph("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nX=(n,e)=>{let t=n.includes("top")?1:-1,[r,i]=MU()?[JG,ZG]:[QG(t),YG(t)];return{animation:e?`${Qd(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qd(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},rX=ie.memo(({toast:n,position:e,style:t,children:r})=>{let i=n.height?nX(n.position||e||"top-center",n.visible):{opacity:0},s=ie.createElement(KG,{toast:n}),o=ie.createElement(tX,{...n.ariaProps},LS(n.message,n));return ie.createElement(eX,{className:n.className,style:{...i,...t,...n.style}},typeof r=="function"?r({icon:s,message:o}):ie.createElement(ie.Fragment,null,s,o))});EG(ie.createElement);var iX=({id:n,className:e,style:t,onHeightUpdate:r,children:i})=>{let s=ie.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(n,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return ie.createElement("div",{ref:s,className:e,style:t},i)},sX=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:MU()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...i}},oX=I2`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yw=16,AU=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=LG(t);return ie.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:yw,left:yw,right:yw,bottom:yw,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(u=>{let c=u.position||e,d=l.calculateOffset(u,{reverseOrder:n,gutter:r,defaultPosition:e}),h=sX(c,d);return ie.createElement(iX,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?oX:"",style:h},u.type==="custom"?LS(u.message,u):i?i(u):ie.createElement(rX,{toast:u,position:c}))}))},aX=ci;var $3,DO;function lX(){if(DO)return $3;DO=1;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(G,Y)=>{for(var te in Y)e(G,te,{get:Y[te],enumerable:!0})},a=(G,Y,te,Z)=>{if(Y&&typeof Y=="object"||typeof Y=="function")for(let fe of r(Y))!s.call(G,fe)&&fe!==te&&e(G,fe,{get:()=>Y[fe],enumerable:!(Z=t(Y,fe))||Z.enumerable});return G},l=(G,Y,te)=>(te=G!=null?n(i(G)):{},a(!G||!G.__esModule?e(te,"default",{value:G,enumerable:!0}):te,G)),u=G=>a(e({},"__esModule",{value:!0}),G),c={};o(c,{$dispatcherGuard:()=>L,$makeReadOnly:()=>P,$reset:()=>R,$structuralCheck:()=>re,c:()=>T,clearRenderCounterRegistry:()=>z,renderCounterRegistry:()=>F,useRenderCounter:()=>Q}),$3=u(c);var d=l(Om()),{useRef:h,useEffect:p,isValidElement:g}=d,x,b=(x=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE)!=null?x:d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.memo_cache_sentinel"),E,T=typeof((E=d.__COMPILER_RUNTIME)==null?void 0:E.c)=="function"?d.__COMPILER_RUNTIME.c:function(Y){return d.useMemo(()=>{const te=new Array(Y);for(let Z=0;Z<Y;Z++)te[Z]=y;return te[y]=!0,te},[])},I={};["readContext","useCallback","useContext","useEffect","useImperativeHandle","useInsertionEffect","useLayoutEffect","useMemo","useReducer","useRef","useState","useDebugValue","useDeferredValue","useTransition","useMutableSource","useSyncExternalStore","useId","unstable_isNewReconciler","getCacheSignal","getCacheForType","useCacheRefresh"].forEach(G=>{I[G]=()=>{throw new Error(`[React] Unexpected React hook call (${G}) from a React compiled function. Check that all hooks are called directly and named according to convention ('use[A-Z]') `)}});var N=null;I.useMemoCache=G=>{if(N==null)throw new Error("React Compiler internal invariant violation: unexpected null dispatcher");return N.useMemoCache(G)};function k(G){return b.ReactCurrentDispatcher.current=G,b.ReactCurrentDispatcher.current}var q=[];function L(G){const Y=b.ReactCurrentDispatcher.current;if(G===0){if(q.push(Y),q.length===1&&(N=Y),Y===I)throw new Error("[React] Unexpected call to custom hook or component from a React compiled function. Check that (1) all hooks are called directly and named according to convention ('use[A-Z]') and (2) components are returned as JSX instead of being directly invoked.");k(I)}else if(G===1){const te=q.pop();if(te==null)throw new Error("React Compiler internal error: unexpected null in guard stack");q.length===0&&(N=null),k(te)}else if(G===2)q.push(Y),k(N);else if(G===3){const te=q.pop();if(te==null)throw new Error("React Compiler internal error: unexpected null in guard stack");k(te)}else throw new Error("React Compiler internal error: unreachable block"+G)}function R(G){for(let Y=0;Y<G.length;Y++)G[Y]=y}function P(){throw new Error("TODO: implement $makeReadOnly in react-compiler-runtime")}var F=new Map;function z(){for(const G of F.values())G.forEach(Y=>{Y.count=0})}function V(G,Y){let te=F.get(G);te==null&&(te=new Set,F.set(G,te)),te.add(Y)}function W(G,Y){const te=F.get(G);te?.delete(Y)}function Q(G){const Y=h(null);Y.current!=null&&(Y.current.count+=1),p(()=>{if(Y.current==null){const te={count:0};V(G,te),Y.current=te}return()=>{Y.current!==null&&W(G,Y.current)}})}var X=new Set;function re(G,Y,te,Z,fe,ge){function ce(Ee,Me,qe,Ue){const Ye=`${Z}:${ge} [${fe}] ${te}${qe} changed from ${Ee} to ${Me} at depth ${Ue}`;X.has(Ye)||(X.add(Ye),console.error(Ye))}const ye=2;function be(Ee,Me,qe,Ue){if(!(Ue>ye)){if(Ee===Me)return;if(typeof Ee!=typeof Me)ce(`type ${typeof Ee}`,`type ${typeof Me}`,qe,Ue);else if(typeof Ee=="object"){const Ye=Array.isArray(Ee),Ne=Array.isArray(Me);if(Ee===null&&Me!==null)ce("null",`type ${typeof Me}`,qe,Ue);else if(Me===null)ce(`type ${typeof Ee}`,"null",qe,Ue);else if(Ee instanceof Map)if(!(Me instanceof Map))ce("Map instance","other value",qe,Ue);else if(Ee.size!==Me.size)ce(`Map instance with size ${Ee.size}`,`Map instance with size ${Me.size}`,qe,Ue);else for(const[ke,me]of Ee)Me.has(ke)?be(me,Me.get(ke),`${qe}.get(${ke})`,Ue+1):ce(`Map instance with key ${ke}`,`Map instance without key ${ke}`,qe,Ue);else if(Me instanceof Map)ce("other value","Map instance",qe,Ue);else if(Ee instanceof Set)if(!(Me instanceof Set))ce("Set instance","other value",qe,Ue);else if(Ee.size!==Me.size)ce(`Set instance with size ${Ee.size}`,`Set instance with size ${Me.size}`,qe,Ue);else for(const ke of Me)Ee.has(ke)||ce(`Set instance without element ${ke}`,`Set instance with element ${ke}`,qe,Ue);else if(Me instanceof Set)ce("other value","Set instance",qe,Ue);else if(Ye||Ne)if(Ye!==Ne)ce(`type ${Ye?"array":"object"}`,`type ${Ne?"array":"object"}`,qe,Ue);else if(Ee.length!==Me.length)ce(`array with length ${Ee.length}`,`array with length ${Me.length}`,qe,Ue);else for(let ke=0;ke<Ee.length;ke++)be(Ee[ke],Me[ke],`${qe}[${ke}]`,Ue+1);else if(g(Ee)||g(Me))g(Ee)!==g(Me)?ce(`type ${g(Ee)?"React element":"object"}`,`type ${g(Me)?"React element":"object"}`,qe,Ue):Ee.type!==Me.type?ce(`React element of type ${Ee.type}`,`React element of type ${Me.type}`,qe,Ue):be(Ee.props,Me.props,`[props of ${qe}]`,Ue+1);else{for(const ke in Me)ke in Ee||ce(`object without key ${ke}`,`object with key ${ke}`,qe,Ue);for(const ke in Ee)ke in Me?be(Ee[ke],Me[ke],`${qe}.${ke}`,Ue+1):ce(`object with key ${ke}`,`object without key ${ke}`,qe,Ue)}}else{if(typeof Ee=="function")return;isNaN(Ee)||isNaN(Me)?isNaN(Ee)!==isNaN(Me)&&ce(`${isNaN(Ee)?"NaN":"non-NaN value"}`,`${isNaN(Me)?"NaN":"non-NaN value"}`,qe,Ue):Ee!==Me&&ce(Ee,Me,qe,Ue)}}}be(G,Y,"",0)}return $3}var Bt=lX();function CU(n,e){return function(){return n.apply(e,arguments)}}const{toString:cX}=Object.prototype,{getPrototypeOf:hN}=Object,A2=(n=>e=>{const t=cX.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),eu=n=>(n=n.toLowerCase(),e=>A2(e)===n),C2=n=>e=>typeof e===n,{isArray:mv}=Array,Px=C2("undefined");function uX(n){return n!==null&&!Px(n)&&n.constructor!==null&&!Px(n.constructor)&&kl(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const RU=eu("ArrayBuffer");function dX(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&RU(n.buffer),e}const fX=C2("string"),kl=C2("function"),NU=C2("number"),R2=n=>n!==null&&typeof n=="object",hX=n=>n===!0||n===!1,j1=n=>{if(A2(n)!=="object")return!1;const e=hN(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},pX=eu("Date"),mX=eu("File"),gX=eu("Blob"),yX=eu("FileList"),vX=n=>R2(n)&&kl(n.pipe),_X=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||kl(n.append)&&((e=A2(n))==="formdata"||e==="object"&&kl(n.toString)&&n.toString()==="[object FormData]"))},xX=eu("URLSearchParams"),[bX,wX,SX,EX]=["ReadableStream","Request","Response","Headers"].map(eu),TX=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function D0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),mv(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function PU(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Jp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kU=n=>!Px(n)&&n!==Jp;function kC(){const{caseless:n}=kU(this)&&this||{},e={},t=(r,i)=>{const s=n&&PU(e,i)||i;j1(e[s])&&j1(r)?e[s]=kC(e[s],r):j1(r)?e[s]=kC({},r):mv(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&D0(arguments[r],t);return e}const MX=(n,e,t,{allOwnKeys:r}={})=>(D0(e,(i,s)=>{t&&kl(i)?n[s]=CU(i,t):n[s]=i},{allOwnKeys:r}),n),IX=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),AX=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},CX=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&hN(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},RX=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},NX=n=>{if(!n)return null;if(mv(n))return n;let e=n.length;if(!NU(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},PX=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&hN(Uint8Array)),kX=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},OX=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},LX=eu("HTMLFormElement"),DX=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),FO=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),FX=eu("RegExp"),OU=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};D0(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},qX=n=>{OU(n,(e,t)=>{if(kl(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(kl(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},jX=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return mv(n)?r(n):r(String(n).split(e)),t},BX=()=>{},UX=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,H3="abcdefghijklmnopqrstuvwxyz",qO="0123456789",LU={DIGIT:qO,ALPHA:H3,ALPHA_DIGIT:H3+H3.toUpperCase()+qO},zX=(n=16,e=LU.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function VX(n){return!!(n&&kl(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const WX=n=>{const e=new Array(10),t=(r,i)=>{if(R2(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=mv(r)?[]:{};return D0(r,(o,a)=>{const l=t(o,i+1);!Px(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},$X=eu("AsyncFunction"),HX=n=>n&&(R2(n)||kl(n))&&kl(n.then)&&kl(n.catch),DU=((n,e)=>n?setImmediate:e?((t,r)=>(Jp.addEventListener("message",({source:i,data:s})=>{i===Jp&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Jp.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",kl(Jp.postMessage)),GX=typeof queueMicrotask<"u"?queueMicrotask.bind(Jp):typeof process<"u"&&process.nextTick||DU,Rt={isArray:mv,isArrayBuffer:RU,isBuffer:uX,isFormData:_X,isArrayBufferView:dX,isString:fX,isNumber:NU,isBoolean:hX,isObject:R2,isPlainObject:j1,isReadableStream:bX,isRequest:wX,isResponse:SX,isHeaders:EX,isUndefined:Px,isDate:pX,isFile:mX,isBlob:gX,isRegExp:FX,isFunction:kl,isStream:vX,isURLSearchParams:xX,isTypedArray:PX,isFileList:yX,forEach:D0,merge:kC,extend:MX,trim:TX,stripBOM:IX,inherits:AX,toFlatObject:CX,kindOf:A2,kindOfTest:eu,endsWith:RX,toArray:NX,forEachEntry:kX,matchAll:OX,isHTMLForm:LX,hasOwnProperty:FO,hasOwnProp:FO,reduceDescriptors:OU,freezeMethods:qX,toObjectSet:jX,toCamelCase:DX,noop:BX,toFiniteNumber:UX,findKey:PU,global:Jp,isContextDefined:kU,ALPHABET:LU,generateString:zX,isSpecCompliantForm:VX,toJSONObject:WX,isAsyncFn:$X,isThenable:HX,setImmediate:DU,asap:GX};function kr(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Rt.inherits(kr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.status}}});const FU=kr.prototype,qU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{qU[n]={value:n}});Object.defineProperties(kr,qU);Object.defineProperty(FU,"isAxiosError",{value:!0});kr.from=(n,e,t,r,i,s)=>{const o=Object.create(FU);return Rt.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),kr.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const XX=null;function OC(n){return Rt.isPlainObject(n)||Rt.isArray(n)}function jU(n){return Rt.endsWith(n,"[]")?n.slice(0,-2):n}function jO(n,e,t){return n?n.concat(e).map(function(i,s){return i=jU(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function KX(n){return Rt.isArray(n)&&!n.some(OC)}const QX=Rt.toFlatObject(Rt,{},null,function(e){return/^is[A-Z]/.test(e)});function N2(n,e,t){if(!Rt.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Rt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,b){return!Rt.isUndefined(b[x])});const r=t.metaTokens,i=t.visitor||c,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(e);if(!Rt.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(Rt.isDate(g))return g.toISOString();if(!l&&Rt.isBlob(g))throw new kr("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(g)||Rt.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,x,b){let y=g;if(g&&!b&&typeof g=="object"){if(Rt.endsWith(x,"{}"))x=r?x:x.slice(0,-2),g=JSON.stringify(g);else if(Rt.isArray(g)&&KX(g)||(Rt.isFileList(g)||Rt.endsWith(x,"[]"))&&(y=Rt.toArray(g)))return x=jU(x),y.forEach(function(T,I){!(Rt.isUndefined(T)||T===null)&&e.append(o===!0?jO([x],I,s):o===null?x:x+"[]",u(T))}),!1}return OC(g)?!0:(e.append(jO(b,x,s),u(g)),!1)}const d=[],h=Object.assign(QX,{defaultVisitor:c,convertValue:u,isVisitable:OC});function p(g,x){if(!Rt.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+x.join("."));d.push(g),Rt.forEach(g,function(y,E){(!(Rt.isUndefined(y)||y===null)&&i.call(e,y,Rt.isString(E)?E.trim():E,x,h))===!0&&p(y,x?x.concat(E):[E])}),d.pop()}}if(!Rt.isObject(n))throw new TypeError("data must be an object");return p(n),e}function BO(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function pN(n,e){this._pairs=[],n&&N2(n,this,e)}const BU=pN.prototype;BU.append=function(e,t){this._pairs.push([e,t])};BU.toString=function(e){const t=e?function(r){return e.call(this,r,BO)}:BO;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function YX(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function UU(n,e,t){if(!e)return n;const r=t&&t.encode||YX;Rt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=Rt.isURLSearchParams(e)?e.toString():new pN(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class UO{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Rt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const zU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JX=typeof URLSearchParams<"u"?URLSearchParams:pN,ZX=typeof FormData<"u"?FormData:null,eK=typeof Blob<"u"?Blob:null,tK={isBrowser:!0,classes:{URLSearchParams:JX,FormData:ZX,Blob:eK},protocols:["http","https","file","blob","url","data"]},mN=typeof window<"u"&&typeof document<"u",LC=typeof navigator=="object"&&navigator||void 0,nK=mN&&(!LC||["ReactNative","NativeScript","NS"].indexOf(LC.product)<0),rK=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iK=mN&&window.location.href||"http://localhost",sK=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mN,hasStandardBrowserEnv:nK,hasStandardBrowserWebWorkerEnv:rK,navigator:LC,origin:iK},Symbol.toStringTag,{value:"Module"})),ta={...sK,...tK};function oK(n,e){return N2(n,new ta.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return ta.isNode&&Rt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function aK(n){return Rt.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lK(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function VU(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Rt.isArray(i)?i.length:o,l?(Rt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Rt.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&Rt.isArray(i[o])&&(i[o]=lK(i[o])),!a)}if(Rt.isFormData(n)&&Rt.isFunction(n.entries)){const t={};return Rt.forEachEntry(n,(r,i)=>{e(aK(r),i,t,0)}),t}return null}function cK(n,e,t){if(Rt.isString(n))try{return(e||JSON.parse)(n),Rt.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const F0={transitional:zU,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Rt.isObject(e);if(s&&Rt.isHTMLForm(e)&&(e=new FormData(e)),Rt.isFormData(e))return i?JSON.stringify(VU(e)):e;if(Rt.isArrayBuffer(e)||Rt.isBuffer(e)||Rt.isStream(e)||Rt.isFile(e)||Rt.isBlob(e)||Rt.isReadableStream(e))return e;if(Rt.isArrayBufferView(e))return e.buffer;if(Rt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return oK(e,this.formSerializer).toString();if((a=Rt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return N2(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),cK(e)):e}],transformResponse:[function(e){const t=this.transitional||F0.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Rt.isResponse(e)||Rt.isReadableStream(e))return e;if(e&&Rt.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?kr.from(a,kr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ta.classes.FormData,Blob:ta.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],n=>{F0.headers[n]={}});const uK=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dK=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&uK[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},zO=Symbol("internals");function y_(n){return n&&String(n).trim().toLowerCase()}function B1(n){return n===!1||n==null?n:Rt.isArray(n)?n.map(B1):String(n)}function fK(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const hK=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function G3(n,e,t,r,i){if(Rt.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!Rt.isString(e)){if(Rt.isString(r))return e.indexOf(r)!==-1;if(Rt.isRegExp(r))return r.test(e)}}function pK(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function mK(n,e){const t=Rt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let rl=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,u){const c=y_(l);if(!c)throw new Error("header name must be a non-empty string");const d=Rt.findKey(i,c);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=B1(a))}const o=(a,l)=>Rt.forEach(a,(u,c)=>s(u,c,l));if(Rt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Rt.isString(e)&&(e=e.trim())&&!hK(e))o(dK(e),t);else if(Rt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=y_(e),e){const r=Rt.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return fK(i);if(Rt.isFunction(t))return t.call(this,i,r);if(Rt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=y_(e),e){const r=Rt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||G3(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=y_(o),o){const a=Rt.findKey(r,o);a&&(!t||G3(r,r[a],a,t))&&(delete r[a],i=!0)}}return Rt.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||G3(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return Rt.forEach(this,(i,s)=>{const o=Rt.findKey(r,s);if(o){t[o]=B1(i),delete t[s];return}const a=e?pK(s):String(s).trim();a!==s&&delete t[s],t[a]=B1(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Rt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&Rt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[zO]=this[zO]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=y_(o);r[a]||(mK(i,o),r[a]=!0)}return Rt.isArray(e)?e.forEach(s):s(e),this}};rl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(rl.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Rt.freezeMethods(rl);function X3(n,e){const t=this||F0,r=e||t,i=rl.from(r.headers);let s=r.data;return Rt.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function WU(n){return!!(n&&n.__CANCEL__)}function gv(n,e,t){kr.call(this,n??"canceled",kr.ERR_CANCELED,e,t),this.name="CanceledError"}Rt.inherits(gv,kr,{__CANCEL__:!0});function $U(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new kr("Request failed with status code "+t.status,[kr.ERR_BAD_REQUEST,kr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function gK(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function yK(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),t[i]=l,r[i]=u;let d=s,h=0;for(;d!==i;)h+=t[d++],d=d%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),u-o<e)return;const p=c&&u-c;return p?Math.round(h*1e3/p):void 0}}function vK(n,e){let t=0,r=1e3/e,i,s;const o=(u,c=Date.now())=>{t=c,i=null,s&&(clearTimeout(s),s=null),n.apply(null,u)};return[(...u)=>{const c=Date.now(),d=c-t;d>=r?o(u,c):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const DS=(n,e,t=3)=>{let r=0;const i=yK(50,250);return vK(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,u=i(l),c=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(d)},t)},VO=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},WO=n=>(...e)=>Rt.asap(()=>n(...e)),_K=ta.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ta.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ta.origin),ta.navigator&&/(msie|trident)/i.test(ta.navigator.userAgent)):()=>!0,xK=ta.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];Rt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Rt.isString(r)&&o.push("path="+r),Rt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bK(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function wK(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function HU(n,e){return n&&!bK(e)?wK(n,e):e}const $O=n=>n instanceof rl?{...n}:n;function vm(n,e){e=e||{};const t={};function r(u,c,d,h){return Rt.isPlainObject(u)&&Rt.isPlainObject(c)?Rt.merge.call({caseless:h},u,c):Rt.isPlainObject(c)?Rt.merge({},c):Rt.isArray(c)?c.slice():c}function i(u,c,d,h){if(Rt.isUndefined(c)){if(!Rt.isUndefined(u))return r(void 0,u,d,h)}else return r(u,c,d,h)}function s(u,c){if(!Rt.isUndefined(c))return r(void 0,c)}function o(u,c){if(Rt.isUndefined(c)){if(!Rt.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,d){if(d in e)return r(u,c);if(d in n)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c,d)=>i($O(u),$O(c),d,!0)};return Rt.forEach(Object.keys(Object.assign({},n,e)),function(c){const d=l[c]||i,h=d(n[c],e[c],c);Rt.isUndefined(h)&&d!==a||(t[c]=h)}),t}const GU=n=>{const e=vm({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=rl.from(o),e.url=UU(HU(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Rt.isFormData(t)){if(ta.hasStandardBrowserEnv||ta.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(ta.hasStandardBrowserEnv&&(r&&Rt.isFunction(r)&&(r=r(e)),r||r!==!1&&_K(e.url))){const u=i&&s&&xK.read(s);u&&o.set(i,u)}return e},SK=typeof XMLHttpRequest<"u",EK=SK&&function(n){return new Promise(function(t,r){const i=GU(n);let s=i.data;const o=rl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,c,d,h,p,g;function x(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function y(){if(!b)return;const T=rl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:T,config:n,request:b};$U(function(q){t(q),x()},function(q){r(q),x()},N),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(r(new kr("Request aborted",kr.ECONNABORTED,n,b)),b=null)},b.onerror=function(){r(new kr("Network Error",kr.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let I=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||zU;i.timeoutErrorMessage&&(I=i.timeoutErrorMessage),r(new kr(I,N.clarifyTimeoutError?kr.ETIMEDOUT:kr.ECONNABORTED,n,b)),b=null},s===void 0&&o.setContentType(null),"setRequestHeader"in b&&Rt.forEach(o.toJSON(),function(I,N){b.setRequestHeader(N,I)}),Rt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),u&&([h,g]=DS(u,!0),b.addEventListener("progress",h)),l&&b.upload&&([d,p]=DS(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(c=T=>{b&&(r(!T||T.type?new gv(null,n,b):T),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const E=gK(i.url);if(E&&ta.protocols.indexOf(E)===-1){r(new kr("Unsupported protocol "+E+":",kr.ERR_BAD_REQUEST,n));return}b.send(s||null)})},TK=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const c=u instanceof Error?u:this.reason;r.abort(c instanceof kr?c:new gv(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,s(new kr(`timeout ${e} of ms exceeded`,kr.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Rt.asap(a),l}},MK=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},IK=async function*(n,e){for await(const t of AK(n))yield*MK(t,e)},AK=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},HO=(n,e,t,r)=>{const i=IK(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await i.next();if(u){a(),l.close();return}let d=c.byteLength;if(t){let h=s+=d;t(h)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},P2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",XU=P2&&typeof ReadableStream=="function",CK=P2&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),KU=(n,...e)=>{try{return!!n(...e)}catch{return!1}},RK=XU&&KU(()=>{let n=!1;const e=new Request(ta.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),GO=64*1024,DC=XU&&KU(()=>Rt.isReadableStream(new Response("").body)),FS={stream:DC&&(n=>n.body)};P2&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!FS[e]&&(FS[e]=Rt.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new kr(`Response type '${e}' is not supported`,kr.ERR_NOT_SUPPORT,r)})})})(new Response);const NK=async n=>{if(n==null)return 0;if(Rt.isBlob(n))return n.size;if(Rt.isSpecCompliantForm(n))return(await new Request(ta.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(n)||Rt.isArrayBuffer(n))return n.byteLength;if(Rt.isURLSearchParams(n)&&(n=n+""),Rt.isString(n))return(await CK(n)).byteLength},PK=async(n,e)=>{const t=Rt.toFiniteNumber(n.getContentLength());return t??NK(e)},kK=P2&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=GU(n);u=u?(u+"").toLowerCase():"text";let p=TK([i,s&&s.toAbortSignal()],o),g;const x=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(l&&RK&&t!=="get"&&t!=="head"&&(b=await PK(c,r))!==0){let N=new Request(e,{method:"POST",body:r,duplex:"half"}),k;if(Rt.isFormData(r)&&(k=N.headers.get("content-type"))&&c.setContentType(k),N.body){const[q,L]=VO(b,DS(WO(l)));r=HO(N.body,GO,q,L)}}Rt.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;g=new Request(e,{...h,signal:p,method:t.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let E=await fetch(g);const T=DC&&(u==="stream"||u==="response");if(DC&&(a||T&&x)){const N={};["status","statusText","headers"].forEach(R=>{N[R]=E[R]});const k=Rt.toFiniteNumber(E.headers.get("content-length")),[q,L]=a&&VO(k,DS(WO(a),!0))||[];E=new Response(HO(E.body,GO,q,()=>{L&&L(),x&&x()}),N)}u=u||"text";let I=await FS[Rt.findKey(FS,u)||"text"](E,n);return!T&&x&&x(),await new Promise((N,k)=>{$U(N,k,{data:I,headers:rl.from(E.headers),status:E.status,statusText:E.statusText,config:n,request:g})})}catch(y){throw x&&x(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new kr("Network Error",kr.ERR_NETWORK,n,g),{cause:y.cause||y}):kr.from(y,y&&y.code,n,g)}}),FC={http:XX,xhr:EK,fetch:kK};Rt.forEach(FC,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const XO=n=>`- ${n}`,OK=n=>Rt.isFunction(n)||n===null||n===!1,QU={getAdapter:n=>{n=Rt.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!OK(t)&&(r=FC[(o=String(t)).toLowerCase()],r===void 0))throw new kr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(XO).join(`
`):" "+XO(s[0]):"as no adapter specified";throw new kr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:FC};function K3(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new gv(null,n)}function KO(n){return K3(n),n.headers=rl.from(n.headers),n.data=X3.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),QU.getAdapter(n.adapter||F0.adapter)(n).then(function(r){return K3(n),r.data=X3.call(n,n.transformResponse,r),r.headers=rl.from(r.headers),r},function(r){return WU(r)||(K3(n),r&&r.response&&(r.response.data=X3.call(n,n.transformResponse,r.response),r.response.headers=rl.from(r.response.headers))),Promise.reject(r)})}const YU="1.7.9",k2={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{k2[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const QO={};k2.transitional=function(e,t,r){function i(s,o){return"[Axios v"+YU+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new kr(i(o," has been removed"+(t?" in "+t:"")),kr.ERR_DEPRECATED);return t&&!QO[o]&&(QO[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};k2.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function LK(n,e,t){if(typeof n!="object")throw new kr("options must be an object",kr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new kr("option "+s+" must be "+l,kr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new kr("Unknown option "+s,kr.ERR_BAD_OPTION)}}const U1={assertOptions:LK,validators:k2},Su=U1.validators;let om=class{constructor(e){this.defaults=e,this.interceptors={request:new UO,response:new UO}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=vm(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&U1.assertOptions(r,{silentJSONParsing:Su.transitional(Su.boolean),forcedJSONParsing:Su.transitional(Su.boolean),clarifyTimeoutError:Su.transitional(Su.boolean)},!1),i!=null&&(Rt.isFunction(i)?t.paramsSerializer={serialize:i}:U1.assertOptions(i,{encode:Su.function,serialize:Su.function},!0)),U1.assertOptions(t,{baseUrl:Su.spelling("baseURL"),withXsrfToken:Su.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Rt.merge(s.common,s[t.method]);s&&Rt.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=rl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(l=l&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let c,d=0,h;if(!l){const g=[KO.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,u),h=g.length,c=Promise.resolve(t);d<h;)c=c.then(g[d++],g[d++]);return c}h=a.length;let p=t;for(d=0;d<h;){const g=a[d++],x=a[d++];try{p=g(p)}catch(b){x.call(this,b);break}}try{c=KO.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=vm(this.defaults,e);const t=HU(e.baseURL,e.url);return UU(t,e.params,e.paramsSerializer)}};Rt.forEach(["delete","get","head","options"],function(e){om.prototype[e]=function(t,r){return this.request(vm(r||{},{method:e,url:t,data:(r||{}).data}))}});Rt.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(vm(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}om.prototype[e]=t(),om.prototype[e+"Form"]=t(!0)});let DK=class JU{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new gv(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new JU(function(i){e=i}),cancel:e}}};function FK(n){return function(t){return n.apply(null,t)}}function qK(n){return Rt.isObject(n)&&n.isAxiosError===!0}const qC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qC).forEach(([n,e])=>{qC[e]=n});function ZU(n){const e=new om(n),t=CU(om.prototype.request,e);return Rt.extend(t,om.prototype,e,{allOwnKeys:!0}),Rt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return ZU(vm(n,i))},t}const Fs=ZU(F0);Fs.Axios=om;Fs.CanceledError=gv;Fs.CancelToken=DK;Fs.isCancel=WU;Fs.VERSION=YU;Fs.toFormData=N2;Fs.AxiosError=kr;Fs.Cancel=Fs.CanceledError;Fs.all=function(e){return Promise.all(e)};Fs.spread=FK;Fs.isAxiosError=qK;Fs.mergeConfig=vm;Fs.AxiosHeaders=rl;Fs.formToJSON=n=>VU(Rt.isHTMLForm(n)?new FormData(n):n);Fs.getAdapter=QU.getAdapter;Fs.HttpStatusCode=qC;Fs.default=Fs;const{Axios:tTe,AxiosError:jK,CanceledError:nTe,isCancel:rTe,CancelToken:iTe,VERSION:sTe,all:oTe,Cancel:aTe,isAxiosError:lTe,spread:cTe,toFormData:uTe,AxiosHeaders:dTe,HttpStatusCode:fTe,formToJSON:hTe,getAdapter:pTe,mergeConfig:mTe}=Fs,gN=({error:n,schema:e,onError:t})=>{if(n instanceof jK){const i=e.safeParse(n.response?.data);return i.success&&t({error:n,data:i.data}),i.success}return!1};var Q3,YO;function BK(){if(YO)return Q3;YO=1;function n(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}n.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},n.prototype.getQueue=function(){return this.queue},n.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},n.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},n.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}n.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},n.prototype.handleResponse=function(r){return this.shift(),r},n.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},n.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},n.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function t(r,i){var s=new n(r);return s.setRateLimitOptions(i),r.getQueue=n.prototype.getQueue.bind(s),r.getMaxRPS=n.prototype.getMaxRPS.bind(s),r.setMaxRPS=n.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=n.prototype.setRateLimitOptions.bind(s),r}return Q3=t,Q3}var UK=BK();const zK=ol(UK),VK=({instance:n,limit:e}={})=>zK(n||Fs,e||{maxRequests:5,perMilliseconds:100}),yN="-",WK=n=>{const e=HK(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(yN);return a[0]===""&&a.length!==1&&a.shift(),e5(a,e)||$K(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},e5=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?e5(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=n.join(yN);return e.validators.find(({validator:o})=>o(s))?.classGroupId},JO=/^\[(.+)\]$/,$K=n=>{if(JO.test(n)){const e=JO.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},HK=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return XK(Object.entries(n.classGroups),t).forEach(([s,o])=>{jC(o,r,s,e)}),r},jC=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const s=i===""?e:ZO(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(GK(i)){jC(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,o])=>{jC(o,ZO(e,s),t,r)})})},ZO=(n,e)=>{let t=n;return e.split(yN).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},GK=n=>n.isThemeGetter,XK=(n,e)=>e?n.map(([t,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,i]}):n,KK=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){t.has(s)?t.set(s,o):i(s,o)}}},t5="!",QK=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,c=0,d;for(let b=0;b<a.length;b++){let y=a[b];if(u===0){if(y===i&&(r||a.slice(b,b+s)===e)){l.push(a.slice(c,b)),c=b+s;continue}if(y==="/"){d=b;continue}}y==="["?u++:y==="]"&&u--}const h=l.length===0?a:a.substring(c),p=h.startsWith(t5),g=p?h.substring(1):h,x=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:x}};return t?a=>t({className:a,parseClassName:o}):o},YK=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},JK=n=>({cache:KK(n.cacheSize),parseClassName:QK(n),...WK(n)}),ZK=/\s+/,eQ=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=n.trim().split(ZK);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:c,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=t(u);let g=!!p,x=r(g?h.substring(0,p):h);if(!x){if(!g){a=u+(a.length>0?" "+a:a);continue}if(x=r(h),!x){a=u+(a.length>0?" "+a:a);continue}g=!1}const b=YK(c).join(":"),y=d?b+t5:b,E=y+x;if(s.includes(E))continue;s.push(E);const T=i(x,g);for(let I=0;I<T.length;++I){const N=T[I];s.push(y+N)}a=u+(a.length>0?" "+a:a)}return a};function tQ(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=n5(e))&&(r&&(r+=" "),r+=t);return r}const n5=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=n5(n[r]))&&(t&&(t+=" "),t+=e);return t};function nQ(n,...e){let t,r,i,s=o;function o(l){const u=e.reduce((c,d)=>d(c),n());return t=JK(u),r=t.cache.get,i=t.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const c=eQ(l,t);return i(l,c),c}return function(){return s(tQ.apply(null,arguments))}}const Gi=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},r5=/^\[(?:([a-z-]+):)?(.+)\]$/i,rQ=/^\d+\/\d+$/,iQ=new Set(["px","full","screen"]),sQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wd=n=>Ny(n)||iQ.has(n)||rQ.test(n),Ff=n=>yv(n,"length",yQ),Ny=n=>!!n&&!Number.isNaN(Number(n)),Y3=n=>yv(n,"number",Ny),v_=n=>!!n&&Number.isInteger(Number(n)),uQ=n=>n.endsWith("%")&&Ny(n.slice(0,-1)),qr=n=>r5.test(n),qf=n=>sQ.test(n),dQ=new Set(["length","size","percentage"]),fQ=n=>yv(n,dQ,i5),hQ=n=>yv(n,"position",i5),pQ=new Set(["image","url"]),mQ=n=>yv(n,pQ,_Q),gQ=n=>yv(n,"",vQ),__=()=>!0,yv=(n,e,t)=>{const r=r5.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},yQ=n=>oQ.test(n)&&!aQ.test(n),i5=()=>!1,vQ=n=>lQ.test(n),_Q=n=>cQ.test(n),xQ=()=>{const n=Gi("colors"),e=Gi("spacing"),t=Gi("blur"),r=Gi("brightness"),i=Gi("borderColor"),s=Gi("borderRadius"),o=Gi("borderSpacing"),a=Gi("borderWidth"),l=Gi("contrast"),u=Gi("grayscale"),c=Gi("hueRotate"),d=Gi("invert"),h=Gi("gap"),p=Gi("gradientColorStops"),g=Gi("gradientColorStopPositions"),x=Gi("inset"),b=Gi("margin"),y=Gi("opacity"),E=Gi("padding"),T=Gi("saturate"),I=Gi("scale"),N=Gi("sepia"),k=Gi("skew"),q=Gi("space"),L=Gi("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",qr,e],z=()=>[qr,e],V=()=>["",wd,Ff],W=()=>["auto",Ny,qr],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",qr],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[Ny,qr];return{cacheSize:500,separator:":",theme:{colors:[__],spacing:[wd,Ff],blur:["none","",qf,qr],brightness:Z(),borderColor:[n],borderRadius:["none","","full",qf,qr],borderSpacing:z(),borderWidth:V(),contrast:Z(),grayscale:Y(),hueRotate:Z(),invert:Y(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[uQ,Ff],inset:F(),margin:F(),opacity:Z(),padding:z(),saturate:Z(),scale:Z(),sepia:Y(),skew:Z(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",qr]}],container:["container"],columns:[{columns:[qf]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),qr]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",v_,qr]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qr]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",v_,qr]}],"grid-cols":[{"grid-cols":[__]}],"col-start-end":[{col:["auto",{span:["full",v_,qr]},qr]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[__]}],"row-start-end":[{row:["auto",{span:[v_,qr]},qr]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qr]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[q]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[q]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qr,e]}],"min-w":[{"min-w":[qr,e,"min","max","fit"]}],"max-w":[{"max-w":[qr,e,"none","full","min","max","fit","prose",{screen:[qf]},qf]}],h:[{h:[qr,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qr,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qr,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qr,e,"auto","min","max","fit"]}],"font-size":[{text:["base",qf,Ff]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Y3]}],"font-family":[{font:[__]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qr]}],"line-clamp":[{"line-clamp":["none",Ny,Y3]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wd,qr]}],"list-image":[{"list-image":["none",qr]}],"list-style-type":[{list:["none","disc","decimal",qr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wd,Ff]}],"underline-offset":[{"underline-offset":["auto",wd,qr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),hQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mQ]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:X()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[wd,qr]}],"outline-w":[{outline:[wd,Ff]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[wd,Ff]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",qf,gQ]}],"shadow-color":[{shadow:[__]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",qf,qr]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[T]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qr]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",qr]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",qr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[v_,qr]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qr]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qr]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qr]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[wd,Ff,Y3]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},s5=nQ(xQ),BC=new Proxy(()=>BC,{get:()=>BC});function Cr({use:n,slot:e,variant:t,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(a,l)=>({css:u,...c}={})=>{const d=[],h=n,p={...h?.()?.config.defaults,...i,...o,...c};d.push(h?.(p)?.slots[l]?.(p)),d.push(Array.isArray(e[l])?e[l]:[e[l]]);for(const[g,x]of Object.entries(p)){const b=t[g]?.[x];b&&d.push(b)}for(const g of r)Object.entries(g.if).every(([x,b])=>b===p[x])&&d.push(g.then?.[l]);return d.push(s?.[l]),d.push(u),s5(d)}}),config:{defaults:{...n?.()?.config.defaults,...i},values:{...n?.()?.config.defaults,...i,...o}},type:BC()})}const fr=s5;var J3,eL;function o5(){return eL||(eL=1,J3=Object),J3}var Z3,tL;function bQ(){return tL||(tL=1,Z3=Error),Z3}var eM,nL;function wQ(){return nL||(nL=1,eM=EvalError),eM}var tM,rL;function SQ(){return rL||(rL=1,tM=RangeError),tM}var nM,iL;function EQ(){return iL||(iL=1,nM=ReferenceError),nM}var rM,sL;function TQ(){return sL||(sL=1,rM=SyntaxError),rM}var iM,oL;function a5(){return oL||(oL=1,iM=TypeError),iM}var sM,aL;function MQ(){return aL||(aL=1,sM=URIError),sM}var oM,lL;function IQ(){return lL||(lL=1,oM=Math.abs),oM}var aM,cL;function AQ(){return cL||(cL=1,aM=Math.floor),aM}var lM,uL;function CQ(){return uL||(uL=1,lM=Math.max),lM}var cM,dL;function RQ(){return dL||(dL=1,cM=Math.min),cM}var uM,fL;function NQ(){return fL||(fL=1,uM=Math.pow),uM}var dM,hL;function PQ(){return hL||(hL=1,dM=Math.round),dM}var fM,pL;function kQ(){return pL||(pL=1,fM=Number.isNaN||function(e){return e!==e}),fM}var hM,mL;function OQ(){if(mL)return hM;mL=1;var n=kQ();return hM=function(t){return n(t)||t===0?t:t<0?-1:1},hM}var pM,gL;function LQ(){return gL||(gL=1,pM=Object.getOwnPropertyDescriptor),pM}var mM,yL;function l5(){if(yL)return mM;yL=1;var n=LQ();if(n)try{n([],"length")}catch{n=null}return mM=n,mM}var gM,vL;function DQ(){if(vL)return gM;vL=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return gM=n,gM}var yM,_L;function c5(){return _L||(_L=1,yM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),yM}var vM,xL;function FQ(){if(xL)return vM;xL=1;var n=typeof Symbol<"u"&&Symbol,e=c5();return vM=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},vM}var _M,bL;function u5(){return bL||(bL=1,_M=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_M}var xM,wL;function d5(){if(wL)return xM;wL=1;var n=o5();return xM=n.getPrototypeOf||null,xM}var bM,SL;function qQ(){if(SL)return bM;SL=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(l,u){for(var c=[],d=0;d<l.length;d+=1)c[d]=l[d];for(var h=0;h<u.length;h+=1)c[h+l.length]=u[h];return c},s=function(l,u){for(var c=[],d=u,h=0;d<l.length;d+=1,h+=1)c[h]=l[d];return c},o=function(a,l){for(var u="",c=0;c<a.length;c+=1)u+=a[c],c+1<a.length&&(u+=l);return u};return bM=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==r)throw new TypeError(n+u);for(var c=s(arguments,1),d,h=function(){if(this instanceof d){var y=u.apply(this,i(c,arguments));return Object(y)===y?y:this}return u.apply(l,i(c,arguments))},p=t(0,u.length-c.length),g=[],x=0;x<p;x++)g[x]="$"+x;if(d=Function("binder","return function ("+o(g,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var b=function(){};b.prototype=u.prototype,d.prototype=new b,b.prototype=null}return d},bM}var wM,EL;function O2(){if(EL)return wM;EL=1;var n=qQ();return wM=Function.prototype.bind||n,wM}var SM,TL;function vN(){return TL||(TL=1,SM=Function.prototype.call),SM}var EM,ML;function f5(){return ML||(ML=1,EM=Function.prototype.apply),EM}var TM,IL;function jQ(){return IL||(IL=1,TM=typeof Reflect<"u"&&Reflect&&Reflect.apply),TM}var MM,AL;function BQ(){if(AL)return MM;AL=1;var n=O2(),e=f5(),t=vN(),r=jQ();return MM=r||n.call(t,e),MM}var IM,CL;function h5(){if(CL)return IM;CL=1;var n=O2(),e=a5(),t=vN(),r=BQ();return IM=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},IM}var AM,RL;function UQ(){if(RL)return AM;RL=1;var n=h5(),e=l5(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return AM=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,AM}var CM,NL;function zQ(){if(NL)return CM;NL=1;var n=u5(),e=d5(),t=UQ();return CM=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,CM}var RM,PL;function VQ(){if(PL)return RM;PL=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=O2();return RM=t.call(n,e),RM}var NM,kL;function WQ(){if(kL)return NM;kL=1;var n,e=o5(),t=bQ(),r=wQ(),i=SQ(),s=EQ(),o=TQ(),a=a5(),l=MQ(),u=IQ(),c=AQ(),d=CQ(),h=RQ(),p=NQ(),g=PQ(),x=OQ(),b=Function,y=function(qe){try{return b('"use strict"; return ('+qe+").constructor;")()}catch{}},E=l5(),T=DQ(),I=function(){throw new a},N=E?function(){try{return arguments.callee,I}catch{try{return E(arguments,"callee").get}catch{return I}}}():I,k=FQ()(),q=zQ(),L=d5(),R=u5(),P=f5(),F=vN(),z={},V=typeof Uint8Array>"u"||!q?n:q(Uint8Array),W={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":k&&q?q([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":z,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":k&&q?q(q([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!k||!q?n:q(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":E,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!k||!q?n:q(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":k&&q?q(""[Symbol.iterator]()):n,"%Symbol%":k?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":N,"%TypedArray%":V,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":P,"%Object.defineProperty%":T,"%Object.getPrototypeOf%":L,"%Math.abs%":u,"%Math.floor%":c,"%Math.max%":d,"%Math.min%":h,"%Math.pow%":p,"%Math.round%":g,"%Math.sign%":x,"%Reflect.getPrototypeOf%":R};if(q)try{null.error}catch(qe){var Q=q(q(qe));W["%Error.prototype%"]=Q}var X=function qe(Ue){var Ye;if(Ue==="%AsyncFunction%")Ye=y("async function () {}");else if(Ue==="%GeneratorFunction%")Ye=y("function* () {}");else if(Ue==="%AsyncGeneratorFunction%")Ye=y("async function* () {}");else if(Ue==="%AsyncGenerator%"){var Ne=qe("%AsyncGeneratorFunction%");Ne&&(Ye=Ne.prototype)}else if(Ue==="%AsyncIteratorPrototype%"){var ke=qe("%AsyncGenerator%");ke&&q&&(Ye=q(ke.prototype))}return W[Ue]=Ye,Ye},re={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},G=O2(),Y=VQ(),te=G.call(F,Array.prototype.concat),Z=G.call(P,Array.prototype.splice),fe=G.call(F,String.prototype.replace),ge=G.call(F,String.prototype.slice),ce=G.call(F,RegExp.prototype.exec),ye=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,be=/\\(\\)?/g,Ee=function(Ue){var Ye=ge(Ue,0,1),Ne=ge(Ue,-1);if(Ye==="%"&&Ne!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ne==="%"&&Ye!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ke=[];return fe(Ue,ye,function(me,ht,ct,Mt){ke[ke.length]=ct?fe(Mt,be,"$1"):ht||me}),ke},Me=function(Ue,Ye){var Ne=Ue,ke;if(Y(re,Ne)&&(ke=re[Ne],Ne="%"+ke[0]+"%"),Y(W,Ne)){var me=W[Ne];if(me===z&&(me=X(Ne)),typeof me>"u"&&!Ye)throw new a("intrinsic "+Ue+" exists, but is not available. Please file an issue!");return{alias:ke,name:Ne,value:me}}throw new o("intrinsic "+Ue+" does not exist!")};return NM=function(Ue,Ye){if(typeof Ue!="string"||Ue.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ye!="boolean")throw new a('"allowMissing" argument must be a boolean');if(ce(/^%?[^%]*%?$/,Ue)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ne=Ee(Ue),ke=Ne.length>0?Ne[0]:"",me=Me("%"+ke+"%",Ye),ht=me.name,ct=me.value,Mt=!1,xe=me.alias;xe&&(ke=xe[0],Z(Ne,te([0,1],xe)));for(var Te=1,Ae=!0;Te<Ne.length;Te+=1){var le=Ne[Te],se=ge(le,0,1),Oe=ge(le,-1);if((se==='"'||se==="'"||se==="`"||Oe==='"'||Oe==="'"||Oe==="`")&&se!==Oe)throw new o("property names with quotes must have matching quotes");if((le==="constructor"||!Ae)&&(Mt=!0),ke+="."+le,ht="%"+ke+"%",Y(W,ht))ct=W[ht];else if(ct!=null){if(!(le in ct)){if(!Ye)throw new a("base intrinsic for "+Ue+" exists, but the property is not available.");return}if(E&&Te+1>=Ne.length){var Ce=E(ct,le);Ae=!!Ce,Ae&&"get"in Ce&&!("originalValue"in Ce.get)?ct=Ce.get:ct=ct[le]}else Ae=Y(ct,le),ct=ct[le];Ae&&!Mt&&(W[ht]=ct)}}return ct},NM}var PM,OL;function $Q(){if(OL)return PM;OL=1;var n=WQ(),e=h5(),t=e([n("%String.prototype.indexOf%")]);return PM=function(i,s){var o=n(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e([o]):o},PM}var kM,LL;function HQ(){if(LL)return kM;LL=1;var n=c5();return kM=function(){return n()&&!!Symbol.toStringTag},kM}var OM,DL;function GQ(){if(DL)return OM;DL=1;var n=$Q(),e=n("String.prototype.valueOf"),t=function(a){try{return e(a),!0}catch{return!1}},r=n("Object.prototype.toString"),i="[object String]",s=HQ()();return OM=function(a){return typeof a=="string"?!0:!a||typeof a!="object"?!1:s?t(a):r(a)===i},OM}var XQ=GQ();const KQ=ol(XQ),q0=n=>KQ(n),QQ=(n,e,t={})=>{const r=[];return n.filter((s,o)=>{const a=t.regionLowerCase?s.toLowerCase():s;if(e.includes(a))return r.push({index:o,appLocale:a}),!0;const{isAvailable:l,appLocale:u}=YQ(a,e,t);return l&&r.push({index:o,appLocale:t.regionLowerCase?u.toLowerCase():u}),l}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},YQ=(n,e,t={})=>{t?.languageOnly||(t.languageOnly=!1);let r=n;return{isAvailable:e.some(s=>{if(!z1()&&!t.languageOnly&&n.split("-")[1]===void 0)return!1;const o=z1()?new Intl.Locale(n).minimize().language:n.split("-")[0],a=z1()?new Intl.Locale(s).minimize().language:s.split("-")[0],l=o===a;return l&&(r=s),l}),appLocale:r}},JQ=(n={})=>{n?.regionLowerCase||(n.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(t=>n.regionLowerCase?t.toLowerCase():t)},z1=()=>Intl&&"Locale"in Intl,ZQ=(n,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const t=n.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=z1()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:a}=s;let{region:l}=s;return e.regionLowerCase&&l&&(l=l.toLowerCase()),i.length>2?`${o}-${a}-${l}`:l?`${o}-${l}`:o});return[...new Set(t)]},eY=(n,e,t={})=>{t.regionLowerCase||(t.regionLowerCase=!1),t.languageOnly||(t.languageOnly=!1);const r=JQ(t),i=ZQ([...r,n],t);return QQ(i,e,t)[0]||n},tY=({available:n,fallback:e})=>eY(e,n,{languageOnly:!0});var LM={exports:{}};const nY={},rY=Object.freeze(Object.defineProperty({__proto__:null,default:nY},Symbol.toStringTag,{value:"Module"})),FL=E7(rY);var qL;function iY(){return qL||(qL=1,function(n){(function(){var e="input is invalid type",t=typeof window=="object",r=t?window:{};r.JS_SHA256_NO_WINDOW&&(t=!1);var i=!t&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Kp:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&n.exports,a=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[-0x80000000,8388608,32768,128],c=[24,16,8,0],d=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],h=["hex","array","digest","arrayBuffer"],p=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),a&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});var g=function(k,q){return function(L){return new T(q,!0).update(L)[k]()}},x=function(k){var q=g("hex",k);s&&(q=b(q,k)),q.create=function(){return new T(k)},q.update=function(P){return q.create().update(P)};for(var L=0;L<h.length;++L){var R=h[L];q[R]=g(R,k)}return q},b=function(k,q){var L=FL,R=FL.Buffer,P=q?"sha224":"sha256",F;R.from&&!r.JS_SHA256_NO_BUFFER_FROM?F=R.from:F=function(V){return new R(V)};var z=function(V){if(typeof V=="string")return L.createHash(P).update(V,"utf8").digest("hex");if(V==null)throw new Error(e);return V.constructor===ArrayBuffer&&(V=new Uint8Array(V)),Array.isArray(V)||ArrayBuffer.isView(V)||V.constructor===R?L.createHash(P).update(F(V)).digest("hex"):k(V)};return z},y=function(k,q){return function(L,R){return new I(L,q,!0).update(R)[k]()}},E=function(k){var q=y("hex",k);q.create=function(P){return new I(P,k)},q.update=function(P,F){return q.create(P).update(F)};for(var L=0;L<h.length;++L){var R=h[L];q[R]=y(R,k)}return q};function T(k,q){q?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=k}T.prototype.update=function(k){if(!this.finalized){var q,L=typeof k;if(L!=="string"){if(L==="object"){if(k===null)throw new Error(e);if(a&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!a||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);q=!0}for(var R,P=0,F,z=k.length,V=this.blocks;P<z;){if(this.hashed&&(this.hashed=!1,V[0]=this.block,this.block=V[16]=V[1]=V[2]=V[3]=V[4]=V[5]=V[6]=V[7]=V[8]=V[9]=V[10]=V[11]=V[12]=V[13]=V[14]=V[15]=0),q)for(F=this.start;P<z&&F<64;++P)V[F>>>2]|=k[P]<<c[F++&3];else for(F=this.start;P<z&&F<64;++P)R=k.charCodeAt(P),R<128?V[F>>>2]|=R<<c[F++&3]:R<2048?(V[F>>>2]|=(192|R>>>6)<<c[F++&3],V[F>>>2]|=(128|R&63)<<c[F++&3]):R<55296||R>=57344?(V[F>>>2]|=(224|R>>>12)<<c[F++&3],V[F>>>2]|=(128|R>>>6&63)<<c[F++&3],V[F>>>2]|=(128|R&63)<<c[F++&3]):(R=65536+((R&1023)<<10|k.charCodeAt(++P)&1023),V[F>>>2]|=(240|R>>>18)<<c[F++&3],V[F>>>2]|=(128|R>>>12&63)<<c[F++&3],V[F>>>2]|=(128|R>>>6&63)<<c[F++&3],V[F>>>2]|=(128|R&63)<<c[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=V[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,q=this.lastByteIndex;k[16]=this.block,k[q>>>2]|=u[q&3],this.block=k[16],q>=56&&(this.hashed||this.hash(),k[0]=this.block,k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0),k[14]=this.hBytes<<3|this.bytes>>>29,k[15]=this.bytes<<3,this.hash()}},T.prototype.hash=function(){var k=this.h0,q=this.h1,L=this.h2,R=this.h3,P=this.h4,F=this.h5,z=this.h6,V=this.h7,W=this.blocks,Q,X,re,G,Y,te,Z,fe,ge,ce,ye;for(Q=16;Q<64;++Q)Y=W[Q-15],X=(Y>>>7|Y<<25)^(Y>>>18|Y<<14)^Y>>>3,Y=W[Q-2],re=(Y>>>17|Y<<15)^(Y>>>19|Y<<13)^Y>>>10,W[Q]=W[Q-16]+X+W[Q-7]+re<<0;for(ye=q&L,Q=0;Q<64;Q+=4)this.first?(this.is224?(fe=300032,Y=W[0]-0x543c9a5b,V=Y-0x8f1a6c7<<0,R=Y+0x170e9b5<<0):(fe=0x2a01a605,Y=W[0]-0xc881298,V=Y-0x5ab00ac6<<0,R=Y+0x8909ae5<<0),this.first=!1):(X=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),re=(P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7),fe=k&q,G=fe^k&L^ye,Z=P&F^~P&z,Y=V+re+Z+d[Q]+W[Q],te=X+G,V=R+Y<<0,R=Y+te<<0),X=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),re=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),ge=R&k,G=ge^R&q^fe,Z=V&P^~V&F,Y=z+re+Z+d[Q+1]+W[Q+1],te=X+G,z=L+Y<<0,L=Y+te<<0,X=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),re=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),ce=L&R,G=ce^L&k^ge,Z=z&V^~z&P,Y=F+re+Z+d[Q+2]+W[Q+2],te=X+G,F=q+Y<<0,q=Y+te<<0,X=(q>>>2|q<<30)^(q>>>13|q<<19)^(q>>>22|q<<10),re=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),ye=q&L,G=ye^q&R^ce,Z=F&z^~F&V,Y=P+re+Z+d[Q+3]+W[Q+3],te=X+G,P=k+Y<<0,k=Y+te<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+k<<0,this.h1=this.h1+q<<0,this.h2=this.h2+L<<0,this.h3=this.h3+R<<0,this.h4=this.h4+P<<0,this.h5=this.h5+F<<0,this.h6=this.h6+z<<0,this.h7=this.h7+V<<0},T.prototype.hex=function(){this.finalize();var k=this.h0,q=this.h1,L=this.h2,R=this.h3,P=this.h4,F=this.h5,z=this.h6,V=this.h7,W=l[k>>>28&15]+l[k>>>24&15]+l[k>>>20&15]+l[k>>>16&15]+l[k>>>12&15]+l[k>>>8&15]+l[k>>>4&15]+l[k&15]+l[q>>>28&15]+l[q>>>24&15]+l[q>>>20&15]+l[q>>>16&15]+l[q>>>12&15]+l[q>>>8&15]+l[q>>>4&15]+l[q&15]+l[L>>>28&15]+l[L>>>24&15]+l[L>>>20&15]+l[L>>>16&15]+l[L>>>12&15]+l[L>>>8&15]+l[L>>>4&15]+l[L&15]+l[R>>>28&15]+l[R>>>24&15]+l[R>>>20&15]+l[R>>>16&15]+l[R>>>12&15]+l[R>>>8&15]+l[R>>>4&15]+l[R&15]+l[P>>>28&15]+l[P>>>24&15]+l[P>>>20&15]+l[P>>>16&15]+l[P>>>12&15]+l[P>>>8&15]+l[P>>>4&15]+l[P&15]+l[F>>>28&15]+l[F>>>24&15]+l[F>>>20&15]+l[F>>>16&15]+l[F>>>12&15]+l[F>>>8&15]+l[F>>>4&15]+l[F&15]+l[z>>>28&15]+l[z>>>24&15]+l[z>>>20&15]+l[z>>>16&15]+l[z>>>12&15]+l[z>>>8&15]+l[z>>>4&15]+l[z&15];return this.is224||(W+=l[V>>>28&15]+l[V>>>24&15]+l[V>>>20&15]+l[V>>>16&15]+l[V>>>12&15]+l[V>>>8&15]+l[V>>>4&15]+l[V&15]),W},T.prototype.toString=T.prototype.hex,T.prototype.digest=function(){this.finalize();var k=this.h0,q=this.h1,L=this.h2,R=this.h3,P=this.h4,F=this.h5,z=this.h6,V=this.h7,W=[k>>>24&255,k>>>16&255,k>>>8&255,k&255,q>>>24&255,q>>>16&255,q>>>8&255,q&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,z>>>24&255,z>>>16&255,z>>>8&255,z&255];return this.is224||W.push(V>>>24&255,V>>>16&255,V>>>8&255,V&255),W},T.prototype.array=T.prototype.digest,T.prototype.arrayBuffer=function(){this.finalize();var k=new ArrayBuffer(this.is224?28:32),q=new DataView(k);return q.setUint32(0,this.h0),q.setUint32(4,this.h1),q.setUint32(8,this.h2),q.setUint32(12,this.h3),q.setUint32(16,this.h4),q.setUint32(20,this.h5),q.setUint32(24,this.h6),this.is224||q.setUint32(28,this.h7),k};function I(k,q,L){var R,P=typeof k;if(P==="string"){var F=[],z=k.length,V=0,W;for(R=0;R<z;++R)W=k.charCodeAt(R),W<128?F[V++]=W:W<2048?(F[V++]=192|W>>>6,F[V++]=128|W&63):W<55296||W>=57344?(F[V++]=224|W>>>12,F[V++]=128|W>>>6&63,F[V++]=128|W&63):(W=65536+((W&1023)<<10|k.charCodeAt(++R)&1023),F[V++]=240|W>>>18,F[V++]=128|W>>>12&63,F[V++]=128|W>>>6&63,F[V++]=128|W&63);k=F}else if(P==="object"){if(k===null)throw new Error(e);if(a&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!a||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);k.length>64&&(k=new T(q,!0).update(k).array());var Q=[],X=[];for(R=0;R<64;++R){var re=k[R]||0;Q[R]=92^re,X[R]=54^re}T.call(this,q,L),this.update(X),this.oKeyPad=Q,this.inner=!0,this.sharedMemory=L}I.prototype=new T,I.prototype.finalize=function(){if(T.prototype.finalize.call(this),this.inner){this.inner=!1;var k=this.array();T.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(k),T.prototype.finalize.call(this)}};var N=x();N.sha256=N,N.sha224=x(!0),N.sha256.hmac=E(),N.sha224.hmac=E(!0),o?n.exports=N:(r.sha256=N.sha256,r.sha224=N.sha224)})()}(LM)),LM.exports}var UC=iY();const sY=UC.sha224,p5=({index:n,key:e,fallback:t})=>n[sY(e)]?.value??n[e]?.value??t??e,oY=({index:n,key:e,fallback:t})=>p5({index:n,key:e,fallback:t}),aY=({index:n,key:e,fallback:t})=>p5({index:n,key:e,fallback:t}),sl={index:{},push(n){this.index={...this.index,...n}},text:(n,e)=>oY({index:sl.index,key:n,fallback:e}),rich:(n,e)=>aY({index:sl.index,key:n,fallback:e})};function dh(n){return typeof n>"u"||n===void 0}function Dl(n){return typeof n=="string"}function L2(n){return typeof n=="number"}function qS(n){return typeof n=="boolean"}function _N(n){return n===null}function lY(n){return n instanceof Date}function xN(n){return typeof n=="bigint"}function Ul(n){return typeof n=="function"}function Mu(n){return typeof n=="object"&&n!==null}function de(n){return Object.freeze(n)}function vw(n){return Yd(n)?n:[n]}function Yd(n){return Array.isArray(n)}function fh(n){return n}const Ei=de({is(n){return n.kind==="AlterTableNode"},create(n){return de({kind:"AlterTableNode",table:n})},cloneWithTableProps(n,e){return de({...n,...e})},cloneWithColumnAlteration(n,e){return de({...n,columnAlterations:n.columnAlterations?[...n.columnAlterations,e]:[e]})}}),ts=de({is(n){return n.kind==="IdentifierNode"},create(n){return de({kind:"IdentifierNode",name:n})}}),kd=de({is(n){return n.kind==="CreateIndexNode"},create(n){return de({kind:"CreateIndexNode",name:ts.create(n)})},cloneWith(n,e){return de({...n,...e})},cloneWithColumns(n,e){return de({...n,columns:[...n.columns||[],...e]})}}),m5=de({is(n){return n.kind==="CreateSchemaNode"},create(n,e){return de({kind:"CreateSchemaNode",schema:ts.create(n),...e})},cloneWith(n,e){return de({...n,...e})}}),cY=["preserve rows","delete rows","drop"],Ml=de({is(n){return n.kind==="CreateTableNode"},create(n){return de({kind:"CreateTableNode",table:n,columns:de([])})},cloneWithColumn(n,e){return de({...n,columns:de([...n.columns,e])})},cloneWithConstraint(n,e){return de({...n,constraints:n.constraints?de([...n.constraints,e]):de([e])})},cloneWithFrontModifier(n,e){return de({...n,frontModifiers:n.frontModifiers?de([...n.frontModifiers,e]):de([e])})},cloneWithEndModifier(n,e){return de({...n,endModifiers:n.endModifiers?de([...n.endModifiers,e]):de([e])})},cloneWith(n,e){return de({...n,...e})}}),xh=de({is(n){return n.kind==="SchemableIdentifierNode"},create(n){return de({kind:"SchemableIdentifierNode",identifier:ts.create(n)})},createWithSchema(n,e){return de({kind:"SchemableIdentifierNode",schema:ts.create(n),identifier:ts.create(e)})}}),lx=de({is(n){return n.kind==="DropIndexNode"},create(n,e){return de({kind:"DropIndexNode",name:xh.create(n),...e})},cloneWith(n,e){return de({...n,...e})}}),zC=de({is(n){return n.kind==="DropSchemaNode"},create(n,e){return de({kind:"DropSchemaNode",schema:ts.create(n),...e})},cloneWith(n,e){return de({...n,...e})}}),VC=de({is(n){return n.kind==="DropTableNode"},create(n,e){return de({kind:"DropTableNode",table:n,...e})},cloneWith(n,e){return de({...n,...e})}}),kh=de({is(n){return n.kind==="AliasNode"},create(n,e){return de({kind:"AliasNode",node:n,alias:e})}}),hh=de({is(n){return n.kind==="TableNode"},create(n){return de({kind:"TableNode",table:xh.create(n)})},createWithSchema(n,e){return de({kind:"TableNode",table:xh.createWithSchema(n,e)})}});function al(n){return Mu(n)&&Ul(n.toOperationNode)}function uY(n){return Mu(n)&&"expressionType"in n&&al(n)}function dY(n){return Mu(n)&&"expression"in n&&Dl(n.alias)&&al(n)}const Sd=de({is(n){return n.kind==="SelectModifierNode"},create(n,e){return de({kind:"SelectModifierNode",modifier:n,of:e})},createWithExpression(n){return de({kind:"SelectModifierNode",rawModifier:n})}}),bh=de({is(n){return n.kind==="AndNode"},create(n,e){return de({kind:"AndNode",left:n,right:e})}}),vv=de({is(n){return n.kind==="OrNode"},create(n,e){return de({kind:"OrNode",left:n,right:e})}}),DM=de({is(n){return n.kind==="OnNode"},create(n){return de({kind:"OnNode",on:n})},cloneWithOperation(n,e,t){return de({...n,on:e==="And"?bh.create(n.on,t):vv.create(n.on,t)})}}),cx=de({is(n){return n.kind==="JoinNode"},create(n,e){return de({kind:"JoinNode",joinType:n,table:e,on:void 0})},createWithOn(n,e,t){return de({kind:"JoinNode",joinType:n,table:e,on:DM.create(t)})},cloneWithOn(n,e){return de({...n,on:n.on?DM.cloneWithOperation(n.on,"And",e):DM.create(e)})}}),Hy=de({is(n){return n.kind==="BinaryOperationNode"},create(n,e,t){return de({kind:"BinaryOperationNode",leftOperand:n,operator:e,rightOperand:t})}}),fY=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],hY=["+","-","*","/","%","^","&","|","#","<<",">>"],g5=["->","->>"],pY=[...fY,...hY,"&&","||"],mY=["exists","not exists"],gY=["not","-",...mY],yY=[...pY,...g5,...gY,"between","between symmetric"],wh=de({is(n){return n.kind==="OperatorNode"},create(n){return de({kind:"OperatorNode",operator:n})}});function jL(n){return Dl(n)&&g5.includes(n)}const qs=de({is(n){return n.kind==="ColumnNode"},create(n){return de({kind:"ColumnNode",column:ts.create(n)})}}),bN=de({is(n){return n.kind==="SelectAllNode"},create(){return de({kind:"SelectAllNode"})}}),D2=de({is(n){return n.kind==="ReferenceNode"},create(n,e){return de({kind:"ReferenceNode",table:e,column:n})},createSelectAll(n){return de({kind:"ReferenceNode",table:n,column:bN.create()})}});class vY{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return b5(this.#e)}}function y5(n){return Mu(n)&&al(n)&&Dl(n.dynamicReference)}const WC=de({is(n){return n.kind==="OrderByItemNode"},create(n,e){return de({kind:"OrderByItemNode",orderBy:n,direction:e})}}),ea=de({is(n){return n.kind==="RawNode"},create(n,e){return de({kind:"RawNode",sqlFragments:de(n),parameters:de(e)})},createWithSql(n){return ea.create([n],[])},createWithChild(n){return ea.create(["",""],[n])},createWithChildren(n){return ea.create(new Array(n.length+1).fill(""),n)}});function v5(n){return n==="asc"||n==="desc"}function j0(n){if(n.length===2)return[FM(n[0],n[1])];if(n.length===1){const[e]=n;return Array.isArray(e)?e.map(t=>FM(t)):[FM(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${n.length}`)}function FM(n,e){const t=_Y(n);if(WC.is(t)){if(e)throw new Error("Cannot specify direction twice!");return t}return WC.create(t,_5(e))}function _Y(n){if(W0(n))return Fm(n);if(y5(n))return n.toOperationNode();const[e,t]=n.split(" ");if(t){if(!v5(t))throw new Error(`Invalid order by direction: ${t}`);return WC.create(Jd(e),_5(t))}return Jd(n)}function _5(n){if(n)return n==="asc"||n==="desc"?ea.createWithSql(n):n.toOperationNode()}const jS=de({is(n){return n.kind==="JSONReferenceNode"},create(n,e){return de({kind:"JSONReferenceNode",reference:n,traversal:e})},cloneWithTraversal(n,e){return de({...n,traversal:e})}}),x5=de({is(n){return n.kind==="JSONOperatorChainNode"},create(n){return de({kind:"JSONOperatorChainNode",operator:n,values:de([])})},cloneWithValue(n,e){return de({...n,values:de([...n.values,e])})}}),ux=de({is(n){return n.kind==="JSONPathNode"},create(n){return de({kind:"JSONPathNode",inOperator:n,pathLegs:de([])})},cloneWithLeg(n,e){return de({...n,pathLegs:de([...n.pathLegs,e])})}});function b5(n){return Dl(n)?Jd(n):n.toOperationNode()}function kx(n){return Yd(n)?n.map(e=>Rl(e)):[Rl(n)]}function Rl(n){return W0(n)?Fm(n):b5(n)}function xY(n,e){const t=Jd(n);if(jL(e))return jS.create(t,x5.create(wh.create(e)));const r=e.slice(0,-1);if(jL(r))return jS.create(t,ux.create(wh.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function Jd(n){const e=".";if(!n.includes(e))return D2.create(qs.create(n));const t=n.split(e).map(wN);if(t.length===3)return wY(t);if(t.length===2)return SY(t);throw new Error(`invalid column reference ${n}`)}function bY(n){const e=" as ";if(n.includes(e)){const[t,r]=n.split(e).map(wN);return kh.create(Jd(t),ts.create(r))}else return Jd(n)}function w5(n){return qs.create(n)}function BS(n){const e=" ";if(n.includes(e)){const[t,r]=n.split(e).map(wN);if(!v5(r))throw new Error(`invalid order direction "${r}" next to "${t}"`);return j0([t,r])[0]}else return w5(n)}function wY(n){const[e,t,r]=n;return D2.create(qs.create(r),hh.createWithSchema(e,t))}function SY(n){const[e,t]=n;return D2.create(qs.create(t),hh.create(e))}function wN(n){return n.trim()}const S5=de({is(n){return n.kind==="PrimitiveValueListNode"},create(n){return de({kind:"PrimitiveValueListNode",values:de([...n])})}}),SN=de({is(n){return n.kind==="ValueListNode"},create(n){return de({kind:"ValueListNode",values:de(n)})}}),ju=de({is(n){return n.kind==="ValueNode"},create(n){return de({kind:"ValueNode",value:n})},createImmediate(n){return de({kind:"ValueNode",value:n,immediate:!0})}});function EY(n){return Yd(n)?TY(n):Qs(n)}function Qs(n){return W0(n)?Fm(n):ju.create(n)}function EN(n){return L2(n)||qS(n)||_N(n)}function TN(n){if(!EN(n))throw new Error(`unsafe immediate value ${JSON.stringify(n)}`);return ju.createImmediate(n)}function TY(n){return n.some(W0)?SN.create(n.map(e=>Qs(e))):S5.create(n)}const Gy=de({is(n){return n.kind==="ParensNode"},create(n){return de({kind:"ParensNode",node:n})}});function Uo(n){if(n.length===3)return MN(n[0],n[1],n[2]);if(n.length===1)return Qs(n[0]);throw new Error(`invalid arguments: ${JSON.stringify(n)}`)}function MN(n,e,t){return MY(e)&&E5(t)?Hy.create(Rl(n),$C(e),ju.createImmediate(t)):Hy.create(Rl(n),$C(e),EY(t))}function Bu(n,e,t){return Hy.create(Rl(n),$C(e),Rl(t))}function BL(n,e){return US(Object.entries(n).filter(([,t])=>!dh(t)).map(([t,r])=>MN(t,E5(r)?"is":"=",r)),e)}function US(n,e,t=!0){const r=e==="and"?bh.create:vv.create;if(n.length===0)return Hy.create(ju.createImmediate(1),wh.create("="),ju.createImmediate(e==="and"?1:0));let i=UL(n[0]);for(let s=1;s<n.length;++s)i=r(i,UL(n[s]));return n.length>1&&t?Gy.create(i):i}function MY(n){return n==="is"||n==="is not"}function E5(n){return _N(n)||qS(n)}function $C(n){if(Dl(n)&&yY.includes(n))return wh.create(n);if(al(n))return n.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(n)}`)}function UL(n){return al(n)?n.toOperationNode():n}const Sh=de({is(n){return n.kind==="OrderByNode"},create(n){return de({kind:"OrderByNode",items:de([...n])})},cloneWithItems(n,e){return de({...n,items:de([...n.items,...e])})}}),zL=de({is(n){return n.kind==="PartitionByNode"},create(n){return de({kind:"PartitionByNode",items:de(n)})},cloneWithItems(n,e){return de({...n,items:de([...n.items,...e])})}}),HC=de({is(n){return n.kind==="OverNode"},create(){return de({kind:"OverNode"})},cloneWithOrderByItems(n,e){return de({...n,orderBy:n.orderBy?Sh.cloneWithItems(n.orderBy,e):Sh.create(e)})},cloneWithPartitionByItems(n,e){return de({...n,partitionBy:n.partitionBy?zL.cloneWithItems(n.partitionBy,e):zL.create(e)})}}),zS=de({is(n){return n.kind==="FromNode"},create(n){return de({kind:"FromNode",froms:de(n)})},cloneWithFroms(n,e){return de({...n,froms:de([...n.froms,...e])})}}),VL=de({is(n){return n.kind==="GroupByNode"},create(n){return de({kind:"GroupByNode",items:de(n)})},cloneWithItems(n,e){return de({...n,items:de([...n.items,...e])})}}),WL=de({is(n){return n.kind==="HavingNode"},create(n){return de({kind:"HavingNode",having:n})},cloneWithOperation(n,e,t){return de({...n,having:e==="And"?bh.create(n.having,t):vv.create(n.having,t)})}}),Si=de({is(n){return n.kind==="SelectQueryNode"},create(n){return de({kind:"SelectQueryNode",...n&&{with:n}})},createFrom(n,e){return de({kind:"SelectQueryNode",from:zS.create(n),...e&&{with:e}})},cloneWithSelections(n,e){return de({...n,selections:n.selections?de([...n.selections,...e]):de(e)})},cloneWithDistinctOn(n,e){return de({...n,distinctOn:n.distinctOn?de([...n.distinctOn,...e]):de(e)})},cloneWithFrontModifier(n,e){return de({...n,frontModifiers:n.frontModifiers?de([...n.frontModifiers,e]):de([e])})},cloneWithOrderByItems(n,e){return de({...n,orderBy:n.orderBy?Sh.cloneWithItems(n.orderBy,e):Sh.create(e)})},cloneWithGroupByItems(n,e){return de({...n,groupBy:n.groupBy?VL.cloneWithItems(n.groupBy,e):VL.create(e)})},cloneWithLimit(n,e){return de({...n,limit:e})},cloneWithOffset(n,e){return de({...n,offset:e})},cloneWithFetch(n,e){return de({...n,fetch:e})},cloneWithHaving(n,e){return de({...n,having:n.having?WL.cloneWithOperation(n.having,"And",e):WL.create(e)})},cloneWithSetOperations(n,e){return de({...n,setOperations:n.setOperations?de([...n.setOperations,...e]):de([...e])})},cloneWithoutSelections(n){return de({...n,selections:[]})},cloneWithoutLimit(n){return de({...n,limit:void 0})},cloneWithoutOffset(n){return de({...n,offset:void 0})},cloneWithoutOrderBy(n){return de({...n,orderBy:void 0})},cloneWithoutGroupBy(n){return de({...n,groupBy:void 0})}});function zr(n,e){Object.defineProperties(n.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Py{#e;constructor(e){this.#e=de(e)}on(...e){return new Py({...this.#e,joinNode:cx.cloneWithOn(this.#e.joinNode,Uo(e))})}onRef(e,t,r){return new Py({...this.#e,joinNode:cx.cloneWithOn(this.#e.joinNode,Bu(e,t,r))})}onTrue(){return new Py({...this.#e,joinNode:cx.cloneWithOn(this.#e.joinNode,ea.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}zr(Py,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const IY=de({is(n){return n.kind==="PartitionByItemNode"},create(n){return de({kind:"PartitionByItemNode",partitionBy:n})}});function AY(n){return kx(n).map(IY.create)}class Ox{#e;constructor(e){this.#e=de(e)}orderBy(e,t){return new Ox({overNode:HC.cloneWithOrderByItems(this.#e.overNode,j0([e,t]))})}partitionBy(e){return new Ox({overNode:HC.cloneWithPartitionByItems(this.#e.overNode,AY(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}zr(Ox,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const dx=de({is(n){return n.kind==="SelectionNode"},create(n){return de({kind:"SelectionNode",selection:n})},createSelectAll(){return de({kind:"SelectionNode",selection:bN.create()})},createSelectAllFromTable(n){return de({kind:"SelectionNode",selection:D2.createSelectAll(n)})}});function Xc(n){return Ul(n)?Xc(n(xv())):Yd(n)?n.map(e=>$L(e)):[$L(n)]}function $L(n){return Dl(n)?dx.create(bY(n)):y5(n)?dx.create(n.toOperationNode()):dx.create(F5(n))}function Uu(n){return n?Array.isArray(n)?n.map(HL):[HL(n)]:[dx.createSelectAll()]}function HL(n){if(Dl(n))return dx.createSelectAllFromTable(Os(n));throw new Error(`invalid value selectAll expression: ${JSON.stringify(n)}`)}const CY=de({is(n){return n.kind==="ValuesNode"},create(n){return de({kind:"ValuesNode",values:de(n)})}}),RY=de({is(n){return n.kind==="DefaultInsertValueNode"},create(){return de({kind:"DefaultInsertValueNode"})}});function T5(n){const e=Ul(n)?n(xv()):n,t=Yd(e)?e:de([e]);return NY(t)}function NY(n){const e=PY(n);return[de([...e.keys()].map(qs.create)),CY.create(n.map(t=>kY(t,e)))]}function PY(n){const e=new Map;for(const t of n){const r=Object.keys(t);for(const i of r)!e.has(i)&&t[i]!==void 0&&e.set(i,e.size)}return e}function kY(n,e){const t=Object.keys(n),r=Array.from({length:e.size});let i=!1;for(const o of t){const a=e.get(o);if(dh(a))continue;const l=n[o];(dh(l)||W0(l))&&(i=!0),r[a]=l}if(t.length<e.size||i){const o=RY.create();return SN.create(r.map(a=>dh(a)?o:Qs(a)))}return S5.create(r)}const Al=de({is(n){return n.kind==="InsertQueryNode"},create(n,e,t){return de({kind:"InsertQueryNode",into:n,...e&&{with:e},replace:t})},createWithoutInto(){return de({kind:"InsertQueryNode"})},cloneWith(n,e){return de({...n,...e})}}),ky=de({is(n){return n.kind==="UpdateQueryNode"},create(n,e){return de({kind:"UpdateQueryNode",table:n,...e&&{with:e}})},createWithoutTable(){return de({kind:"UpdateQueryNode"})},cloneWithFromItems(n,e){return de({...n,from:n.from?zS.cloneWithFroms(n.from,e):zS.create(e)})},cloneWithUpdates(n,e){return de({...n,updates:n.updates?de([...n.updates,...e]):e})},cloneWithLimit(n,e){return de({...n,limit:e})}}),GL=de({is(n){return n.kind==="UsingNode"},create(n){return de({kind:"UsingNode",tables:de(n)})},cloneWithTables(n,e){return de({...n,tables:de([...n.tables,...e])})}}),$p=de({is(n){return n.kind==="DeleteQueryNode"},create(n,e){return de({kind:"DeleteQueryNode",from:zS.create(n),...e&&{with:e}})},cloneWithOrderByItems(n,e){return de({...n,orderBy:n.orderBy?Sh.cloneWithItems(n.orderBy,e):Sh.create(e)})},cloneWithoutOrderBy(n){return de({...n,orderBy:void 0})},cloneWithLimit(n,e){return de({...n,limit:e})},cloneWithoutLimit(n){return de({...n,limit:void 0})},cloneWithUsing(n,e){return de({...n,using:n.using!==void 0?GL.cloneWithTables(n.using,e):GL.create(e)})}}),Ya=de({is(n){return n.kind==="WhereNode"},create(n){return de({kind:"WhereNode",where:n})},cloneWithOperation(n,e,t){return de({...n,where:e==="And"?bh.create(n.where,t):vv.create(n.where,t)})}}),XL=de({is(n){return n.kind==="ReturningNode"},create(n){return de({kind:"ReturningNode",selections:de(n)})},cloneWithSelections(n,e){return de({...n,selections:n.selections?de([...n.selections,...e]):de(e)})}}),OY=de({is(n){return n.kind==="ExplainNode"},create(n,e){return de({kind:"ExplainNode",format:n,options:e})}}),B0=de({is(n){return n.kind==="WhenNode"},create(n){return de({kind:"WhenNode",condition:n})},cloneWithResult(n,e){return de({...n,result:e})}}),tl=de({is(n){return n.kind==="MergeQueryNode"},create(n,e){return de({kind:"MergeQueryNode",into:n,...e&&{with:e}})},cloneWithUsing(n,e){return de({...n,using:e})},cloneWithWhen(n,e){return de({...n,whens:n.whens?de([...n.whens,e]):de([e])})},cloneWithThen(n,e){return de({...n,whens:n.whens?de([...n.whens.slice(0,-1),B0.cloneWithResult(n.whens[n.whens.length-1],e)]):void 0})}}),KL=de({is(n){return n.kind==="OutputNode"},create(n){return de({kind:"OutputNode",selections:de(n)})},cloneWithSelections(n,e){return de({...n,selections:n.selections?de([...n.selections,...e]):de(e)})}}),Fn=de({is(n){return Si.is(n)||Al.is(n)||ky.is(n)||$p.is(n)||tl.is(n)},cloneWithEndModifier(n,e){return de({...n,endModifiers:n.endModifiers?de([...n.endModifiers,e]):de([e])})},cloneWithWhere(n,e){return de({...n,where:n.where?Ya.cloneWithOperation(n.where,"And",e):Ya.create(e)})},cloneWithJoin(n,e){return de({...n,joins:n.joins?de([...n.joins,e]):de([e])})},cloneWithReturning(n,e){return de({...n,returning:n.returning?XL.cloneWithSelections(n.returning,e):XL.create(e)})},cloneWithoutReturning(n){return de({...n,returning:void 0})},cloneWithoutWhere(n){return de({...n,where:void 0})},cloneWithExplain(n,e,t){return de({...n,explain:OY.create(e,t?.toOperationNode())})},cloneWithTop(n,e){return de({...n,top:e})},cloneWithOutput(n,e){return de({...n,output:n.output?KL.cloneWithSelections(n.output,e):KL.create(e)})}}),M5=de({is(n){return n.kind==="ColumnUpdateNode"},create(n,e){return de({kind:"ColumnUpdateNode",column:n,value:e})}});function LY(...n){return n.length===2?[M5.create(Rl(n[0]),Qs(n[1]))]:IN(n[0])}function IN(n){const e=Ul(n)?n(xv()):n;return Object.entries(e).filter(([t,r])=>r!==void 0).map(([t,r])=>M5.create(qs.create(t),Qs(r)))}const DY=de({is(n){return n.kind==="OnDuplicateKeyNode"},create(n){return de({kind:"OnDuplicateKeyNode",updates:n})}});class FY{insertId;numInsertedOrUpdatedRows;constructor(e,t){this.insertId=e,this.numInsertedOrUpdatedRows=t}}class U0 extends Error{node;constructor(e){super("no result"),this.node=e}}function z0(n){return Object.prototype.hasOwnProperty.call(n,"prototype")}const Il=de({is(n){return n.kind==="OnConflictNode"},create(){return de({kind:"OnConflictNode"})},cloneWith(n,e){return de({...n,...e})},cloneWithIndexWhere(n,e){return de({...n,indexWhere:n.indexWhere?Ya.cloneWithOperation(n.indexWhere,"And",e):Ya.create(e)})},cloneWithIndexOrWhere(n,e){return de({...n,indexWhere:n.indexWhere?Ya.cloneWithOperation(n.indexWhere,"Or",e):Ya.create(e)})},cloneWithUpdateWhere(n,e){return de({...n,updateWhere:n.updateWhere?Ya.cloneWithOperation(n.updateWhere,"And",e):Ya.create(e)})},cloneWithUpdateOrWhere(n,e){return de({...n,updateWhere:n.updateWhere?Ya.cloneWithOperation(n.updateWhere,"Or",e):Ya.create(e)})},cloneWithoutIndexWhere(n){return de({...n,indexWhere:void 0})},cloneWithoutUpdateWhere(n){return de({...n,updateWhere:void 0})}});class Tu{#e;constructor(e){this.#e=de(e)}column(e){const t=qs.create(e);return new Tu({...this.#e,onConflictNode:Il.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?de([...this.#e.onConflictNode.columns,t]):de([t])})})}columns(e){const t=e.map(qs.create);return new Tu({...this.#e,onConflictNode:Il.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?de([...this.#e.onConflictNode.columns,...t]):de(t)})})}constraint(e){return new Tu({...this.#e,onConflictNode:Il.cloneWith(this.#e.onConflictNode,{constraint:ts.create(e)})})}expression(e){return new Tu({...this.#e,onConflictNode:Il.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Tu({...this.#e,onConflictNode:Il.cloneWithIndexWhere(this.#e.onConflictNode,Uo(e))})}whereRef(e,t,r){return new Tu({...this.#e,onConflictNode:Il.cloneWithIndexWhere(this.#e.onConflictNode,Bu(e,t,r))})}clearWhere(){return new Tu({...this.#e,onConflictNode:Il.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new I5({...this.#e,onConflictNode:Il.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Oy({...this.#e,onConflictNode:Il.cloneWith(this.#e.onConflictNode,{updates:IN(e)})})}$call(e){return e(this)}}zr(Tu,"don't await OnConflictBuilder instances.");class I5{#e;constructor(e){this.#e=de(e)}toOperationNode(){return this.#e.onConflictNode}}zr(I5,"don't await OnConflictDoNothingBuilder instances.");class Oy{#e;constructor(e){this.#e=de(e)}where(...e){return new Oy({...this.#e,onConflictNode:Il.cloneWithUpdateWhere(this.#e.onConflictNode,Uo(e))})}whereRef(e,t,r){return new Oy({...this.#e,onConflictNode:Il.cloneWithUpdateWhere(this.#e.onConflictNode,Bu(e,t,r))})}clearWhere(){return new Oy({...this.#e,onConflictNode:Il.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}zr(Oy,"don't await OnConflictUpdateBuilder instances.");const qY=de({is(n){return n.kind==="TopNode"},create(n,e){return de({kind:"TopNode",expression:n,modifiers:e})}});function _v(n,e){if(!L2(n)&&!xN(n))throw new Error(`Invalid top expression: ${n}`);if(!dh(e)&&!jY(e))throw new Error(`Invalid top modifiers: ${e}`);return qY.create(n,e)}function jY(n){return n==="percent"||n==="with ties"||n==="percent with ties"}class Ji{#e;constructor(e){this.#e=de(e)}values(e){const[t,r]=T5(e);return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{columns:t,values:r})})}columns(e){return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{columns:de(e.map(qs.create))})})}expression(e){return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{values:Fm(e)})})}defaultValues(){return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new Ji({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,t){return new Ji({...this.#e,queryNode:Fn.cloneWithTop(this.#e.queryNode,_v(e,t))})}onConflict(e){return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{onConflict:e(new Tu({onConflictNode:Il.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new Ji({...this.#e,queryNode:Al.cloneWith(this.#e.queryNode,{onDuplicateKey:DY.create(IN(e))})})}returning(e){return new Ji({...this.#e,queryNode:Fn.cloneWithReturning(this.#e.queryNode,Xc(e))})}returningAll(){return new Ji({...this.#e,queryNode:Fn.cloneWithReturning(this.#e.queryNode,Uu())})}output(e){return new Ji({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Xc(e))})}outputAll(e){return new Ji({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Uu(e))})}clearReturning(){return new Ji({...this.#e,queryNode:Fn.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new Ji({...this.#e})}$castTo(){return new Ji(this.#e)}$narrowType(){return new Ji(this.#e)}$assertType(){return new Ji(this.#e)}withPlugin(e){return new Ji({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new FY(t.insertId,t.numAffectedRows??t.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=U0){const t=await this.executeTakeFirst();if(t===void 0)throw z0(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){const t=this.compile(),r=this.#e.executor.stream(t,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,t){return await new Ji({...this.#e,queryNode:Fn.cloneWithExplain(this.#e.queryNode,e,t)}).execute()}}zr(Ji,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class BY{numDeletedRows;constructor(e){this.numDeletedRows=e}}const AN=de({is(n){return n.kind==="LimitNode"},create(n){return de({kind:"LimitNode",limit:n})}});class wi{#e;constructor(e){this.#e=de(e)}where(...e){return new wi({...this.#e,queryNode:Fn.cloneWithWhere(this.#e.queryNode,Uo(e))})}whereRef(e,t,r){return new wi({...this.#e,queryNode:Fn.cloneWithWhere(this.#e.queryNode,Bu(e,t,r))})}clearWhere(){return new wi({...this.#e,queryNode:Fn.cloneWithoutWhere(this.#e.queryNode)})}top(e,t){return new wi({...this.#e,queryNode:Fn.cloneWithTop(this.#e.queryNode,_v(e,t))})}using(e){return new wi({...this.#e,queryNode:$p.cloneWithUsing(this.#e.queryNode,Fx(e))})}innerJoin(...e){return new wi({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("InnerJoin",e))})}leftJoin(...e){return new wi({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("LeftJoin",e))})}rightJoin(...e){return new wi({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("RightJoin",e))})}fullJoin(...e){return new wi({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("FullJoin",e))})}returning(e){return new wi({...this.#e,queryNode:Fn.cloneWithReturning(this.#e.queryNode,Xc(e))})}returningAll(e){return new wi({...this.#e,queryNode:Fn.cloneWithReturning(this.#e.queryNode,Uu(e))})}output(e){return new wi({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Xc(e))})}outputAll(e){return new wi({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Uu(e))})}clearReturning(){return new wi({...this.#e,queryNode:Fn.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new wi({...this.#e,queryNode:$p.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new wi({...this.#e,queryNode:$p.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,t){return new wi({...this.#e,queryNode:$p.cloneWithOrderByItems(this.#e.queryNode,j0([e,t]))})}limit(e){return new wi({...this.#e,queryNode:$p.cloneWithLimit(this.#e.queryNode,AN.create(Qs(e)))})}modifyEnd(e){return new wi({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,t){return e?t(this):new wi({...this.#e})}$castTo(){return new wi(this.#e)}$narrowType(){return new wi(this.#e)}$assertType(){return new wi(this.#e)}withPlugin(e){return new wi({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new BY(t.numAffectedRows??t.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=U0){const t=await this.executeTakeFirst();if(t===void 0)throw z0(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){const t=this.compile(),r=this.#e.executor.stream(t,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,t){return await new wi({...this.#e,queryNode:Fn.cloneWithExplain(this.#e.queryNode,e,t)}).execute()}}zr(wi,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class UY{numUpdatedRows;numChangedRows;constructor(e,t){this.numUpdatedRows=e,this.numChangedRows=t}}class Ri{#e;constructor(e){this.#e=de(e)}where(...e){return new Ri({...this.#e,queryNode:Fn.cloneWithWhere(this.#e.queryNode,Uo(e))})}whereRef(e,t,r){return new Ri({...this.#e,queryNode:Fn.cloneWithWhere(this.#e.queryNode,Bu(e,t,r))})}clearWhere(){return new Ri({...this.#e,queryNode:Fn.cloneWithoutWhere(this.#e.queryNode)})}top(e,t){return new Ri({...this.#e,queryNode:Fn.cloneWithTop(this.#e.queryNode,_v(e,t))})}from(e){return new Ri({...this.#e,queryNode:ky.cloneWithFromItems(this.#e.queryNode,Fx(e))})}innerJoin(...e){return new Ri({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("InnerJoin",e))})}leftJoin(...e){return new Ri({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("LeftJoin",e))})}rightJoin(...e){return new Ri({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("RightJoin",e))})}fullJoin(...e){return new Ri({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("FullJoin",e))})}limit(e){return new Ri({...this.#e,queryNode:ky.cloneWithLimit(this.#e.queryNode,AN.create(Qs(e)))})}set(...e){return new Ri({...this.#e,queryNode:ky.cloneWithUpdates(this.#e.queryNode,LY(...e))})}returning(e){return new Ri({...this.#e,queryNode:Fn.cloneWithReturning(this.#e.queryNode,Xc(e))})}returningAll(e){return new Ri({...this.#e,queryNode:Fn.cloneWithReturning(this.#e.queryNode,Uu(e))})}output(e){return new Ri({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Xc(e))})}outputAll(e){return new Ri({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Uu(e))})}modifyEnd(e){return new Ri({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new Ri({...this.#e,queryNode:Fn.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new Ri({...this.#e})}$castTo(){return new Ri(this.#e)}$narrowType(){return new Ri(this.#e)}$assertType(){return new Ri(this.#e)}withPlugin(e){return new Ri({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new UY(t.numAffectedRows??t.numUpdatedOrDeletedRows??BigInt(0),t.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=U0){const t=await this.executeTakeFirst();if(t===void 0)throw z0(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){const t=this.compile(),r=this.#e.executor.stream(t,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,t){return await new Ri({...this.#e,queryNode:Fn.cloneWithExplain(this.#e.queryNode,e,t)}).execute()}}zr(Ri,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const QL=de({is(n){return n.kind==="CommonTableExpressionNameNode"},create(n,e){return de({kind:"CommonTableExpressionNameNode",table:hh.create(n),columns:e?de(e.map(qs.create)):void 0})}}),VS=de({is(n){return n.kind==="CommonTableExpressionNode"},create(n,e){return de({kind:"CommonTableExpressionNode",name:n,expression:e})},cloneWith(n,e){return de({...n,...e})}});class Lx{#e;constructor(e){this.#e=de(e)}materialized(){return new Lx({...this.#e,node:VS.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new Lx({...this.#e,node:VS.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}zr(Lx,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function YL(n,e){const t=e(ZY()).toOperationNode();return Ul(n)?n(zY(t)).toOperationNode():VS.create(A5(n),t)}function zY(n){return e=>new Lx({node:VS.create(A5(e),n)})}function A5(n){if(n.includes("(")){const e=n.split(/[\(\)]/),t=e[0],r=e[1].split(",").map(i=>i.trim());return QL.create(t,r)}else return QL.create(n)}const _w=de({is(n){return n.kind==="WithNode"},create(n,e){return de({kind:"WithNode",expressions:de([n]),...e})},cloneWithExpression(n,e){return de({...n,expressions:de([...n.expressions,e])})}}),JL=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function VY(n){let e="";for(let t=0;t<n;++t)e+=WY();return e}function WY(){return JL[~~(Math.random()*JL.length)]}function Ti(){return new $Y}class $Y{#e;get queryId(){return this.#e===void 0&&(this.#e=VY(8)),this.#e}}class C5{nodeStack=[];#e=de({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const t=this.transformNodeImpl(e);return this.nodeStack.pop(),de(t)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&de(e.map(t=>this.transformNode(t)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:de([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const HY=de({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class GY extends C5{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const t=this.#c(e);for(const s of t)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of t)this.#n.delete(s);return i}transformSchemableIdentifier(e){const t=super.transformSchemableIdentifier(e);return t.schema||!this.#t.has(e.identifier.name)?t:{...t,schema:ts.create(this.#e)}}transformReferences(e){const t=super.transformReferences(e);return t.table.table.schema?t:{...t,table:hh.createWithSchema(this.#e,t.table.table.identifier.name)}}#r(e){return e.kind in HY}#i(e){const t=new Set;if("name"in e&&e.name&&xh.is(e.name)&&this.#o(e.name,t),"from"in e&&e.from)for(const r of e.from.froms)this.#a(r,t);if("into"in e&&e.into&&this.#a(e.into,t),"table"in e&&e.table&&this.#a(e.table,t),"joins"in e&&e.joins)for(const r of e.joins)this.#a(r.table,t);return"using"in e&&e.using&&this.#a(e.using,t),t}#c(e){const t=new Set;return"with"in e&&e.with&&this.#u(e.with,t),t}#a(e,t){const r=hh.is(e)?e:kh.is(e)&&hh.is(e.node)?e.node:null;r&&this.#o(r.table,t)}#o(e,t){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&t.add(r)}#u(e,t){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||t.add(i)}}}class V0{#e;constructor(e){this.#e=new GY(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const XY=de({is(n){return n.kind==="MatchedNode"},create(n,e=!1){return de({kind:"MatchedNode",not:n,bySource:e})}});function ZL(n,e,t){return B0.create(US([XY.create(!n.isMatched,n.bySource),...e&&e.length>0?[e.length===3&&t?Bu(e[0],e[1],e[2]):Uo(e)]:[]],"and",!1))}function fx(n){return Dl(n)?ea.create([n],[]):al(n)?n.toOperationNode():n}class eD{#e;#t;#n;constructor(){this.#e=new Promise((e,t)=>{this.#n=t,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const tD=new Set;function KY(n){tD.has(n)||(tD.add(n),console.log(n))}const QY=de([]);class R5{#e;constructor(e=QY){this.#e=e}get plugins(){return this.#e}transformQuery(e,t){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:t});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,t){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,t);return YY(i,s),s})}async *stream(e,t,r){const i=new eD,s=new eD;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));const o=await i.promise;try{for await(const a of o.streamQuery(e,t))yield await this.#t(a,r)}finally{s.resolve()}}async #t(e,t){for(const r of this.#e)e=await r.transformResult({result:e,queryId:t});return e}}function YY(n,e){const{numAffectedRows:t}=n;t===void 0&&n.numUpdatedOrDeletedRows===void 0||t!==void 0&&e.numAffectedRows!==void 0||KY("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class fy extends R5{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new fy([...this.plugins,e])}withPlugins(e){return new fy([...this.plugins,...e])}withPluginAtFront(e){return new fy([e,...this.plugins])}withoutPlugins(){return new fy([])}}const F2=new fy;class JY{numChangedRows;constructor(e){this.numChangedRows=e}}class Zp{#e;constructor(e){this.#e=de(e)}modifyEnd(e){return new Zp({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,t){return new Zp({...this.#e,queryNode:Fn.cloneWithTop(this.#e.queryNode,_v(e,t))})}using(...e){return new Nl({...this.#e,queryNode:tl.cloneWithUsing(this.#e.queryNode,Ia("Using",e))})}output(e){return new Zp({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Xc(e))})}outputAll(e){return new Zp({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Uu(e))})}}zr(Zp,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Nl{#e;constructor(e){this.#e=de(e)}modifyEnd(e){return new Nl({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,t){return new Nl({...this.#e,queryNode:Fn.cloneWithTop(this.#e.queryNode,_v(e,t))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,t,r){return this.#t([e,t,r],!0)}#t(e,t){return new GC({...this.#e,queryNode:tl.cloneWithWhen(this.#e.queryNode,ZL({isMatched:!0},e,t))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,t,r){return this.#n([e,t,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,t,r){return this.#n([e,t,r],!0,!0)}output(e){return new Nl({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Xc(e))})}outputAll(e){return new Nl({...this.#e,queryNode:Fn.cloneWithOutput(this.#e.queryNode,Uu(e))})}#n(e,t=!1,r=!1){const i={...this.#e,queryNode:tl.cloneWithWhen(this.#e.queryNode,ZL({isMatched:!1,bySource:r},e,t))},s=r?GC:N5;return new s(i)}$call(e){return e(this)}$if(e,t){return e?t(this):new Nl({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),t=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?t.rows:[new JY(t.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=U0){const t=await this.executeTakeFirst();if(t===void 0)throw z0(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}}zr(Nl,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class GC{#e;constructor(e){this.#e=de(e)}thenDelete(){return new Nl({...this.#e,queryNode:tl.cloneWithThen(this.#e.queryNode,fx("delete"))})}thenDoNothing(){return new Nl({...this.#e,queryNode:tl.cloneWithThen(this.#e.queryNode,fx("do nothing"))})}thenUpdate(e){return new Nl({...this.#e,queryNode:tl.cloneWithThen(this.#e.queryNode,fx(e(new Ri({queryId:this.#e.queryId,executor:F2,queryNode:ky.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(t=>t.set(...e))}}zr(GC,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class N5{#e;constructor(e){this.#e=de(e)}thenDoNothing(){return new Nl({...this.#e,queryNode:tl.cloneWithThen(this.#e.queryNode,fx("do nothing"))})}thenInsertValues(e){const[t,r]=T5(e);return new Nl({...this.#e,queryNode:tl.cloneWithThen(this.#e.queryNode,fx(Al.cloneWith(Al.createWithoutInto(),{columns:t,values:r})))})}}zr(N5,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class rh{#e;constructor(e){this.#e=de(e)}selectFrom(e){return XC({queryId:Ti(),executor:this.#e.executor,queryNode:Si.createFrom(Fx(e),this.#e.withNode)})}selectNoFrom(e){return XC({queryId:Ti(),executor:this.#e.executor,queryNode:Si.cloneWithSelections(Si.create(this.#e.withNode),Xc(e))})}insertInto(e){return new Ji({queryId:Ti(),executor:this.#e.executor,queryNode:Al.create(Os(e),this.#e.withNode)})}replaceInto(e){return new Ji({queryId:Ti(),executor:this.#e.executor,queryNode:Al.create(Os(e),this.#e.withNode,!0)})}deleteFrom(e){return new wi({queryId:Ti(),executor:this.#e.executor,queryNode:$p.create(Fx(e),this.#e.withNode)})}updateTable(e){return new Ri({queryId:Ti(),executor:this.#e.executor,queryNode:ky.create(qx(e),this.#e.withNode)})}mergeInto(e){return new Zp({queryId:Ti(),executor:this.#e.executor,queryNode:tl.create(q5(e),this.#e.withNode)})}with(e,t){const r=YL(e,t);return new rh({...this.#e,withNode:this.#e.withNode?_w.cloneWithExpression(this.#e.withNode,r):_w.create(r)})}withRecursive(e,t){const r=YL(e,t);return new rh({...this.#e,withNode:this.#e.withNode?_w.cloneWithExpression(this.#e.withNode,r):_w.create(r,{recursive:!0})})}withPlugin(e){return new rh({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new rh({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new rh({...this.#e,executor:this.#e.executor.withPluginAtFront(new V0(e))})}}function ZY(){return new rh({executor:F2})}function eJ(n,e){return new Py({joinNode:cx.create(n,qx(e))})}function tJ(){return new Ox({overNode:HC.create()})}function Ia(n,e){if(e.length===3)return rJ(n,e[0],e[1],e[2]);if(e.length===2)return nJ(n,e[0],e[1]);throw new Error("not implemented")}function nJ(n,e,t){return t(eJ(n,e)).toOperationNode()}function rJ(n,e,t,r){return cx.createWithOn(n,qx(e),Bu(t,"=",r))}const iJ=de({is(n){return n.kind==="OffsetNode"},create(n){return de({kind:"OffsetNode",offset:n})}}),sJ=de({is(n){return n.kind==="GroupByItemNode"},create(n){return de({kind:"GroupByItemNode",groupBy:n})}});function oJ(n){return n=Ul(n)?n(xv()):n,kx(n).map(sJ.create)}const P5=de({is(n){return n.kind==="SetOperationNode"},create(n,e,t){return de({kind:"SetOperationNode",operator:n,expression:e,all:t})}});function Cg(n,e,t){return Ul(e)&&(e=e(RN())),Yd(e)||(e=[e]),e.map(r=>P5.create(n,Fm(r),t))}class Ni{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new CN(this,e)}or(...e){return new WS(vv.create(this.#e,Uo(e)))}and(...e){return new $S(bh.create(this.#e,Uo(e)))}$castTo(){return new Ni(this.#e)}$notNull(){return new Ni(this.#e)}toOperationNode(){return this.#e}}class CN{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return kh.create(this.#e.toOperationNode(),al(this.#t)?this.#t.toOperationNode():ts.create(this.#t))}}class WS{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new CN(this,e)}or(...e){return new WS(vv.create(this.#e,Uo(e)))}$castTo(){return new WS(this.#e)}toOperationNode(){return Gy.create(this.#e)}}class $S{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new CN(this,e)}and(...e){return new $S(bh.create(this.#e,Uo(e)))}$castTo(){return new $S(this.#e)}toOperationNode(){return Gy.create(this.#e)}}const aJ={is(n){return n.kind==="FetchNode"},create(n,e){return{kind:"FetchNode",rowCount:ju.create(n),modifier:e}}};function lJ(n,e){if(!L2(n)&&!xN(n))throw new Error(`Invalid fetch row count: ${n}`);if(!cJ(e))throw new Error(`Invalid fetch modifier: ${e}`);return aJ.create(n,e)}function cJ(n){return n==="only"||n==="with ties"}class cr{#e;constructor(e){this.#e=de(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new cr({...this.#e,queryNode:Fn.cloneWithWhere(this.#e.queryNode,Uo(e))})}whereRef(e,t,r){return new cr({...this.#e,queryNode:Fn.cloneWithWhere(this.#e.queryNode,Bu(e,t,r))})}having(...e){return new cr({...this.#e,queryNode:Si.cloneWithHaving(this.#e.queryNode,Uo(e))})}havingRef(e,t,r){return new cr({...this.#e,queryNode:Si.cloneWithHaving(this.#e.queryNode,Bu(e,t,r))})}select(e){return new cr({...this.#e,queryNode:Si.cloneWithSelections(this.#e.queryNode,Xc(e))})}distinctOn(e){return new cr({...this.#e,queryNode:Si.cloneWithDistinctOn(this.#e.queryNode,kx(e))})}modifyFront(e){return new cr({...this.#e,queryNode:Si.cloneWithFrontModifier(this.#e.queryNode,Sd.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.createWithExpression(e.toOperationNode()))})}distinct(){return new cr({...this.#e,queryNode:Si.cloneWithFrontModifier(this.#e.queryNode,Sd.create("Distinct"))})}forUpdate(e){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.create("ForUpdate",e?vw(e).map(Os):void 0))})}forShare(e){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.create("ForShare",e?vw(e).map(Os):void 0))})}forKeyShare(e){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.create("ForKeyShare",e?vw(e).map(Os):void 0))})}forNoKeyUpdate(e){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.create("ForNoKeyUpdate",e?vw(e).map(Os):void 0))})}skipLocked(){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.create("SkipLocked"))})}noWait(){return new cr({...this.#e,queryNode:Fn.cloneWithEndModifier(this.#e.queryNode,Sd.create("NoWait"))})}selectAll(e){return new cr({...this.#e,queryNode:Si.cloneWithSelections(this.#e.queryNode,Uu(e))})}innerJoin(...e){return new cr({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("InnerJoin",e))})}leftJoin(...e){return new cr({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("LeftJoin",e))})}rightJoin(...e){return new cr({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("RightJoin",e))})}fullJoin(...e){return new cr({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("FullJoin",e))})}innerJoinLateral(...e){return new cr({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("LateralInnerJoin",e))})}leftJoinLateral(...e){return new cr({...this.#e,queryNode:Fn.cloneWithJoin(this.#e.queryNode,Ia("LateralLeftJoin",e))})}orderBy(...e){return new cr({...this.#e,queryNode:Si.cloneWithOrderByItems(this.#e.queryNode,j0(e))})}groupBy(e){return new cr({...this.#e,queryNode:Si.cloneWithGroupByItems(this.#e.queryNode,oJ(e))})}limit(e){return new cr({...this.#e,queryNode:Si.cloneWithLimit(this.#e.queryNode,AN.create(Qs(e)))})}offset(e){return new cr({...this.#e,queryNode:Si.cloneWithOffset(this.#e.queryNode,iJ.create(Qs(e)))})}fetch(e,t="only"){return new cr({...this.#e,queryNode:Si.cloneWithFetch(this.#e.queryNode,lJ(e,t))})}top(e,t){return new cr({...this.#e,queryNode:Fn.cloneWithTop(this.#e.queryNode,_v(e,t))})}union(e){return new cr({...this.#e,queryNode:Si.cloneWithSetOperations(this.#e.queryNode,Cg("union",e,!1))})}unionAll(e){return new cr({...this.#e,queryNode:Si.cloneWithSetOperations(this.#e.queryNode,Cg("union",e,!0))})}intersect(e){return new cr({...this.#e,queryNode:Si.cloneWithSetOperations(this.#e.queryNode,Cg("intersect",e,!1))})}intersectAll(e){return new cr({...this.#e,queryNode:Si.cloneWithSetOperations(this.#e.queryNode,Cg("intersect",e,!0))})}except(e){return new cr({...this.#e,queryNode:Si.cloneWithSetOperations(this.#e.queryNode,Cg("except",e,!1))})}exceptAll(e){return new cr({...this.#e,queryNode:Si.cloneWithSetOperations(this.#e.queryNode,Cg("except",e,!0))})}as(e){return new k5(this,e)}clearSelect(){return new cr({...this.#e,queryNode:Si.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new cr({...this.#e,queryNode:Fn.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new cr({...this.#e,queryNode:Si.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new cr({...this.#e,queryNode:Si.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new cr({...this.#e,queryNode:Si.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new cr({...this.#e,queryNode:Si.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new cr({...this.#e})}$castTo(){return new cr(this.#e)}$narrowType(){return new cr(this.#e)}$assertType(){return new cr(this.#e)}$asTuple(){return new Ni(this.toOperationNode())}withPlugin(e){return new cr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=U0){const t=await this.executeTakeFirst();if(t===void 0)throw z0(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){const t=this.compile(),r=this.#e.executor.stream(t,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,t){return await new cr({...this.#e,queryNode:Fn.cloneWithExplain(this.#e.queryNode,e,t)}).execute()}}zr(cr,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function XC(n){return new cr(n)}class k5{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return kh.create(this.#e.toOperationNode(),ts.create(this.#t))}}zr(k5,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const ih=de({is(n){return n.kind==="AggregateFunctionNode"},create(n,e=[]){return de({kind:"AggregateFunctionNode",func:n,aggregated:e})},cloneWithDistinct(n){return de({...n,distinct:!0})},cloneWithOrderBy(n,e){return de({...n,orderBy:n.orderBy?Sh.cloneWithItems(n.orderBy,e):Sh.create(e)})},cloneWithFilter(n,e){return de({...n,filter:n.filter?Ya.cloneWithOperation(n.filter,"And",e):Ya.create(e)})},cloneWithOrFilter(n,e){return de({...n,filter:n.filter?Ya.cloneWithOperation(n.filter,"Or",e):Ya.create(e)})},cloneWithOver(n,e){return de({...n,over:e})}}),nD=de({is(n){return n.kind==="FunctionNode"},create(n,e){return de({kind:"FunctionNode",func:n,arguments:e})}});class ic{#e;constructor(e){this.#e=de(e)}get expressionType(){}as(e){return new uJ(this,e)}distinct(){return new ic({...this.#e,aggregateFunctionNode:ih.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,t){return new ic({...this.#e,aggregateFunctionNode:ih.cloneWithOrderBy(this.#e.aggregateFunctionNode,j0([e,t]))})}filterWhere(...e){return new ic({...this.#e,aggregateFunctionNode:ih.cloneWithFilter(this.#e.aggregateFunctionNode,Uo(e))})}filterWhereRef(e,t,r){return new ic({...this.#e,aggregateFunctionNode:ih.cloneWithFilter(this.#e.aggregateFunctionNode,Bu(e,t,r))})}over(e){const t=tJ();return new ic({...this.#e,aggregateFunctionNode:ih.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(t):t).toOperationNode())})}$call(e){return e(this)}$castTo(){return new ic(this.#e)}$notNull(){return new ic(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}zr(ic,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class uJ{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return kh.create(this.#e.toOperationNode(),ts.create(this.#t))}}function O5(){const n=(t,r)=>new Ni(nD.create(t,kx(r??[]))),e=(t,r)=>new ic({aggregateFunctionNode:ih.create(t,r?kx(r):void 0)});return Object.assign(n,{agg:e,avg(t){return e("avg",[t])},coalesce(...t){return n("coalesce",t)},count(t){return e("count",[t])},countAll(t){return new ic({aggregateFunctionNode:ih.create("count",Uu(t))})},max(t){return e("max",[t])},min(t){return e("min",[t])},sum(t){return e("sum",[t])},any(t){return n("any",[t])},jsonAgg(t){return new ic({aggregateFunctionNode:ih.create("json_agg",[Dl(t)?Os(t):t.toOperationNode()])})},toJson(t){return new Ni(nD.create("to_json",[Dl(t)?Os(t):t.toOperationNode()]))}})}const dJ=de({is(n){return n.kind==="UnaryOperationNode"},create(n,e){return de({kind:"UnaryOperationNode",operator:n,operand:e})}});function fJ(n,e){return dJ.create(wh.create(n),Rl(e))}const Cu=de({is(n){return n.kind==="CaseNode"},create(n){return de({kind:"CaseNode",value:n})},cloneWithWhen(n,e){return de({...n,when:de(n.when?[...n.when,e]:[e])})},cloneWithThen(n,e){return de({...n,when:n.when?de([...n.when.slice(0,-1),B0.cloneWithResult(n.when[n.when.length-1],e)]):void 0})},cloneWith(n,e){return de({...n,...e})}});class L5{#e;constructor(e){this.#e=de(e)}when(...e){return new D5({...this.#e,node:Cu.cloneWithWhen(this.#e.node,B0.create(Uo(e)))})}}class D5{#e;constructor(e){this.#e=de(e)}then(e){return new hJ({...this.#e,node:Cu.cloneWithThen(this.#e.node,EN(e)?TN(e):Qs(e))})}}class hJ{#e;constructor(e){this.#e=de(e)}when(...e){return new D5({...this.#e,node:Cu.cloneWithWhen(this.#e.node,B0.create(Uo(e)))})}else(e){return new pJ({...this.#e,node:Cu.cloneWith(this.#e.node,{else:EN(e)?TN(e):Qs(e)})})}end(){return new Ni(Cu.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Ni(Cu.cloneWith(this.#e.node,{isStatement:!0}))}}class pJ{#e;constructor(e){this.#e=de(e)}end(){return new Ni(Cu.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Ni(Cu.cloneWith(this.#e.node,{isStatement:!0}))}}const rD=de({is(n){return n.kind==="JSONPathLegNode"},create(n,e){return de({kind:"JSONPathLegNode",type:n,value:e})}});class KC{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,t){return jS.is(this.#e)?new Dx(jS.cloneWithTraversal(this.#e,ux.is(this.#e.traversal)?ux.cloneWithLeg(this.#e.traversal,rD.create(e,t)):x5.cloneWithValue(this.#e.traversal,ju.createImmediate(t)))):new Dx(ux.cloneWithLeg(this.#e,rD.create(e,t)))}}class Dx extends KC{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new mJ(this,e)}$castTo(){return new Dx(this.#e)}$notNull(){return new Dx(this.#e)}toOperationNode(){return this.#e}}class mJ{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return kh.create(this.#e.toOperationNode(),al(this.#t)?this.#t.toOperationNode():ts.create(this.#t))}}const iD=de({is(n){return n.kind==="TupleNode"},create(n){return de({kind:"TupleNode",values:de(n)})}}),gJ=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],yJ=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],vJ=de({is(n){return n.kind==="DataTypeNode"},create(n){return de({kind:"DataTypeNode",dataType:n})}});function _J(n){return!!(gJ.includes(n)||yJ.some(e=>e.test(n)))}function _m(n){if(al(n))return n.toOperationNode();if(_J(n))return vJ.create(n);throw new Error(`invalid column data type ${JSON.stringify(n)}`)}const xJ=de({is(n){return n.kind==="CastNode"},create(n,e){return de({kind:"CastNode",expression:n,dataType:e})}});function RN(n=F2){function e(i,s,o){return new Ni(MN(i,s,o))}function t(i,s){return new Ni(fJ(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return XC({queryId:Ti(),executor:n,queryNode:Si.createFrom(Fx(i))})},case(i){return new L5({node:Cu.create(dh(i)?void 0:Rl(i))})},ref(i,s){return dh(s)?new Ni(Jd(i)):new KC(xY(i,s))},jsonPath(){return new KC(ux.create())},table(i){return new Ni(Os(i))},val(i){return new Ni(Qs(i))},refTuple(...i){return new Ni(iD.create(i.map(Rl)))},tuple(...i){return new Ni(iD.create(i.map(Qs)))},lit(i){return new Ni(TN(i))},unary:t,not(i){return t("not",i)},exists(i){return t("exists",i)},neg(i){return t("-",i)},between(i,s,o){return new Ni(Hy.create(Rl(i),wh.create("between"),bh.create(Qs(s),Qs(o))))},betweenSymmetric(i,s,o){return new Ni(Hy.create(Rl(i),wh.create("between symmetric"),bh.create(Qs(s),Qs(o))))},and(i){return Yd(i)?new Ni(US(i,"and")):new Ni(BL(i,"and"))},or(i){return Yd(i)?new Ni(US(i,"or")):new Ni(BL(i,"or"))},parens(...i){const s=Uo(i);return Gy.is(s)?new Ni(s):new Ni(Gy.create(s))},cast(i,s){return new Ni(xJ.create(Rl(i),_m(s)))},withSchema(i){return RN(n.withPluginAtFront(new V0(i)))}});return r.fn=O5(),r.eb=r,r}function xv(n){return RN()}function Fm(n){if(al(n))return n.toOperationNode();if(Ul(n))return n(xv()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(n)}`)}function F5(n){if(al(n))return n.toOperationNode();if(Ul(n))return n(xv()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(n)}`)}function W0(n){return uY(n)||dY(n)||Ul(n)}function Fx(n){return Yd(n)?n.map(e=>qx(e)):[qx(n)]}function qx(n){return Dl(n)?q5(n):F5(n)}function q5(n){const e=" as ";if(n.includes(e)){const[t,r]=n.split(e).map(j5);return kh.create(Os(t),ts.create(r))}else return Os(n)}function Os(n){const e=".";if(n.includes(e)){const[t,r]=n.split(e).map(j5);return hh.createWithSchema(t,r)}else return hh.create(n)}function j5(n){return n.trim()}const B5=de({is(n){return n.kind==="AddColumnNode"},create(n){return de({kind:"AddColumnNode",column:n})}}),Zi=de({is(n){return n.kind==="ColumnDefinitionNode"},create(n,e){return de({kind:"ColumnDefinitionNode",column:qs.create(n),dataType:e})},cloneWithFrontModifier(n,e){return de({...n,frontModifiers:n.frontModifiers?de([...n.frontModifiers,e]):[e]})},cloneWithEndModifier(n,e){return de({...n,endModifiers:n.endModifiers?de([...n.endModifiers,e]):[e]})},cloneWith(n,e){return de({...n,...e})}}),U5=de({is(n){return n.kind==="DropColumnNode"},create(n){return de({kind:"DropColumnNode",column:qs.create(n)})}}),z5=de({is(n){return n.kind==="RenameColumnNode"},create(n,e){return de({kind:"RenameColumnNode",column:qs.create(n),renameTo:qs.create(e)})}}),NN=de({is(n){return n.kind==="CheckConstraintNode"},create(n,e){return de({kind:"CheckConstraintNode",expression:n,name:e?ts.create(e):void 0})}}),bJ=["no action","restrict","cascade","set null","set default"],V1=de({is(n){return n.kind==="ReferencesNode"},create(n,e){return de({kind:"ReferencesNode",table:n,columns:de([...e])})},cloneWithOnDelete(n,e){return de({...n,onDelete:e})},cloneWithOnUpdate(n,e){return de({...n,onUpdate:e})}});function V5(n){return al(n)?n.toOperationNode():ju.createImmediate(n)}const xw=de({is(n){return n.kind==="GeneratedNode"},create(n){return de({kind:"GeneratedNode",...n})},createWithExpression(n){return de({kind:"GeneratedNode",always:!0,expression:n})},cloneWith(n,e){return de({...n,...e})}}),wJ=de({is(n){return n.kind==="DefaultValueNode"},create(n){return de({kind:"DefaultValueNode",defaultValue:n})}});function HS(n){if(bJ.includes(n))return n;throw new Error(`invalid OnModifyForeignAction ${n}`)}class Fi{#e;constructor(e){this.#e=e}autoIncrement(){return new Fi(Zi.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new Fi(Zi.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new Fi(Zi.cloneWith(this.#e,{primaryKey:!0}))}references(e){const t=Jd(e);if(!t.table||bN.is(t.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Fi(Zi.cloneWith(this.#e,{references:V1.create(t.table,[t.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new Fi(Zi.cloneWith(this.#e,{references:V1.cloneWithOnDelete(this.#e.references,HS(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new Fi(Zi.cloneWith(this.#e,{references:V1.cloneWithOnUpdate(this.#e.references,HS(e))}))}unique(){return new Fi(Zi.cloneWith(this.#e,{unique:!0}))}notNull(){return new Fi(Zi.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new Fi(Zi.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new Fi(Zi.cloneWith(this.#e,{defaultTo:wJ.create(V5(e))}))}check(e){return new Fi(Zi.cloneWith(this.#e,{check:NN.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Fi(Zi.cloneWith(this.#e,{generated:xw.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Fi(Zi.cloneWith(this.#e,{generated:xw.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Fi(Zi.cloneWith(this.#e,{generated:xw.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Fi(Zi.cloneWith(this.#e,{generated:xw.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new Fi(Zi.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new Fi(Zi.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new Fi(Zi.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new Fi(Zi.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}zr(Fi,"don't await ColumnDefinitionBuilder instances directly.");const W5=de({is(n){return n.kind==="ModifyColumnNode"},create(n){return de({kind:"ModifyColumnNode",column:n})}}),GS=de({is(n){return n.kind==="ForeignKeyConstraintNode"},create(n,e,t,r){return de({kind:"ForeignKeyConstraintNode",columns:n,references:V1.create(e,t),name:r?ts.create(r):void 0})},cloneWith(n,e){return de({...n,...e})}});class Xy{#e;constructor(e){this.#e=e}onDelete(e){return new Xy(GS.cloneWith(this.#e,{onDelete:HS(e)}))}onUpdate(e){return new Xy(GS.cloneWith(this.#e,{onUpdate:HS(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}zr(Xy,"don't await ForeignKeyConstraintBuilder instances directly.");const W1=de({is(n){return n.kind==="AddConstraintNode"},create(n){return de({kind:"AddConstraintNode",constraint:n})}}),PN=de({is(n){return n.kind==="UniqueConstraintNode"},create(n,e,t){return de({kind:"UniqueConstraintNode",columns:de(n.map(qs.create)),name:e?ts.create(e):void 0,nullsNotDistinct:t})},cloneWith(n,e){return de({...n,...e})}}),$1=de({is(n){return n.kind==="DropConstraintNode"},create(n){return de({kind:"DropConstraintNode",constraintName:ts.create(n)})},cloneWith(n,e){return de({...n,...e})}}),x_=de({is(n){return n.kind==="AlterColumnNode"},create(n,e,t){return de({kind:"AlterColumnNode",column:qs.create(n),[e]:t})}});class kN{#e;constructor(e){this.#e=e}setDataType(e){return new sy(x_.create(this.#e,"dataType",_m(e)))}setDefault(e){return new sy(x_.create(this.#e,"setDefault",V5(e)))}dropDefault(){return new sy(x_.create(this.#e,"dropDefault",!0))}setNotNull(){return new sy(x_.create(this.#e,"setNotNull",!0))}dropNotNull(){return new sy(x_.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}zr(kN,"don't await AlterColumnBuilder instances");class sy{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}zr(sy,"don't await AlteredColumnBuilder instances");class qp{#e;constructor(e){this.#e=de(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(qp,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class jx{#e;constructor(e){this.#e=de(e)}onDelete(e){return new jx({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new jx({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Ei.cloneWithTableProps(this.#e.node,{addConstraint:W1.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(jx,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Ly{#e;constructor(e){this.#e=de(e)}ifExists(){return new Ly({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{dropConstraint:$1.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Ly({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{dropConstraint:$1.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Ly({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{dropConstraint:$1.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Ly,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const $5=de({is(n){return n.kind==="PrimaryKeyConstraintNode"},create(n,e){return de({kind:"PrimaryKeyConstraintNode",columns:de(n.map(qs.create)),name:e?ts.create(e):void 0})}}),oy=de({is(n){return n.kind==="AddIndexNode"},create(n){return de({kind:"AddIndexNode",name:ts.create(n)})},cloneWith(n,e){return de({...n,...e})},cloneWithColumns(n,e){return de({...n,columns:[...n.columns||[],...e]})}});class sh{#e;constructor(e){this.#e=de(e)}unique(){return new sh({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addIndex:oy.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new sh({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addIndex:oy.cloneWithColumns(this.#e.node.addIndex,[BS(e)])})})}columns(e){return new sh({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addIndex:oy.cloneWithColumns(this.#e.node.addIndex,e.map(BS))})})}expression(e){return new sh({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addIndex:oy.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new sh({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addIndex:oy.cloneWith(this.#e.node.addIndex,{using:ea.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(sh,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class $0{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new $0(PN.cloneWith(this.#e,{nullsNotDistinct:!0}))}}zr($0,"don't await UniqueConstraintNodeBuilder instances directly.");class H5{#e;constructor(e){this.#e=de(e)}renameTo(e){return new qp({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{renameTo:Os(e)})})}setSchema(e){return new qp({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{setSchema:ts.create(e)})})}alterColumn(e,t){const r=t(new kN(e));return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,U5.create(e))})}renameColumn(e,t){return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,z5.create(e,t))})}addColumn(e,t,r=fh){const i=r(new Fi(Zi.create(e,_m(t))));return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,B5.create(i.toOperationNode()))})}modifyColumn(e,t,r=fh){const i=r(new Fi(Zi.create(e,_m(t))));return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,W5.create(i.toOperationNode()))})}addUniqueConstraint(e,t,r=fh){const i=r(new $0(PN.create(t,e)));return new qp({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addConstraint:W1.create(i.toOperationNode())})})}addCheckConstraint(e,t){return new qp({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addConstraint:W1.create(NN.create(t.toOperationNode(),e))})})}addForeignKeyConstraint(e,t,r,i){return new jx({...this.#e,constraintBuilder:new Xy(GS.create(t.map(qs.create),Os(r),i.map(qs.create),e))})}addPrimaryKeyConstraint(e,t){return new qp({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addConstraint:W1.create($5.create(t,e))})})}dropConstraint(e){return new Ly({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{dropConstraint:$1.create(e)})})}addIndex(e){return new sh({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{addIndex:oy.create(e)})})}dropIndex(e){return new qp({...this.#e,node:Ei.cloneWithTableProps(this.#e.node,{dropIndex:lx.create(e)})})}$call(e){return e(this)}}zr(H5,"don't await AlterTableBuilder instances");class oc{#e;constructor(e){this.#e=de(e)}alterColumn(e,t){const r=t(new kN(e));return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,U5.create(e))})}renameColumn(e,t){return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,z5.create(e,t))})}addColumn(e,t,r=fh){const i=r(new Fi(Zi.create(e,_m(t))));return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,B5.create(i.toOperationNode()))})}modifyColumn(e,t,r=fh){const i=r(new Fi(Zi.create(e,_m(t))));return new oc({...this.#e,node:Ei.cloneWithColumnAlteration(this.#e.node,W5.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(oc,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class G5 extends C5{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class tc{#e;constructor(e){this.#e=de(e)}ifNotExists(){return new tc({...this.#e,node:kd.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new tc({...this.#e,node:kd.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new tc({...this.#e,node:kd.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new tc({...this.#e,node:kd.cloneWith(this.#e.node,{table:Os(e)})})}column(e){return new tc({...this.#e,node:kd.cloneWithColumns(this.#e.node,[BS(e)])})}columns(e){return new tc({...this.#e,node:kd.cloneWithColumns(this.#e.node,e.map(BS))})}expression(e){return new tc({...this.#e,node:kd.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new tc({...this.#e,node:kd.cloneWith(this.#e.node,{using:ea.createWithSql(e)})})}where(...e){const t=new G5;return new tc({...this.#e,node:Fn.cloneWithWhere(this.#e.node,t.transformNode(Uo(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(tc,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class q2{#e;constructor(e){this.#e=de(e)}ifNotExists(){return new q2({...this.#e,node:m5.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(q2,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function SJ(n){if(cY.includes(n))return n;throw new Error(`invalid OnCommitAction ${n}`)}class Xa{#e;constructor(e){this.#e=de(e)}temporary(){return new Xa({...this.#e,node:Ml.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new Xa({...this.#e,node:Ml.cloneWith(this.#e.node,{onCommit:SJ(e)})})}ifNotExists(){return new Xa({...this.#e,node:Ml.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,t,r=fh){const i=r(new Fi(Zi.create(e,_m(t))));return new Xa({...this.#e,node:Ml.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,t){return new Xa({...this.#e,node:Ml.cloneWithConstraint(this.#e.node,$5.create(t,e))})}addUniqueConstraint(e,t,r=fh){const i=r(new $0(PN.create(t,e)));return new Xa({...this.#e,node:Ml.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,t){return new Xa({...this.#e,node:Ml.cloneWithConstraint(this.#e.node,NN.create(t.toOperationNode(),e))})}addForeignKeyConstraint(e,t,r,i,s=fh){const o=s(new Xy(GS.create(t.map(qs.create),Os(r),i.map(qs.create),e)));return new Xa({...this.#e,node:Ml.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new Xa({...this.#e,node:Ml.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new Xa({...this.#e,node:Ml.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new Xa({...this.#e,node:Ml.cloneWith(this.#e.node,{selectQuery:Fm(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Xa,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Dy{#e;constructor(e){this.#e=de(e)}on(e){return new Dy({...this.#e,node:lx.cloneWith(this.#e.node,{table:Os(e)})})}ifExists(){return new Dy({...this.#e,node:lx.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Dy({...this.#e,node:lx.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Dy,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class Bx{#e;constructor(e){this.#e=de(e)}ifExists(){return new Bx({...this.#e,node:zC.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Bx({...this.#e,node:zC.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Bx,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class Ux{#e;constructor(e){this.#e=de(e)}ifExists(){return new Ux({...this.#e,node:VC.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Ux({...this.#e,node:VC.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Ux,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Zf=de({is(n){return n.kind==="CreateViewNode"},create(n){return de({kind:"CreateViewNode",name:xh.create(n)})},cloneWith(n,e){return de({...n,...e})}});class EJ{#e=new G5;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Dd{#e;constructor(e){this.#e=de(e)}temporary(){return new Dd({...this.#e,node:Zf.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Dd({...this.#e,node:Zf.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Dd({...this.#e,node:Zf.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Dd({...this.#e,node:Zf.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Dd({...this.#e,node:Zf.cloneWith(this.#e.node,{columns:e.map(w5)})})}as(e){const t=e.withPlugin(new EJ).toOperationNode();return new Dd({...this.#e,node:Zf.cloneWith(this.#e.node,{as:t})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Dd,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const H1=de({is(n){return n.kind==="DropViewNode"},create(n){return de({kind:"DropViewNode",name:xh.create(n)})},cloneWith(n,e){return de({...n,...e})}});class Fy{#e;constructor(e){this.#e=de(e)}materialized(){return new Fy({...this.#e,node:H1.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Fy({...this.#e,node:H1.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Fy({...this.#e,node:H1.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(Fy,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const X5=de({is(n){return n.kind==="CreateTypeNode"},create(n){return de({kind:"CreateTypeNode",name:n})},cloneWithEnum(n,e){return de({...n,enum:SN.create(e.map(t=>ju.createImmediate(t)))})}});class j2{#e;constructor(e){this.#e=de(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new j2({...this.#e,node:X5.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(j2,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const K5=de({is(n){return n.kind==="DropTypeNode"},create(n){return de({kind:"DropTypeNode",name:n})},cloneWith(n,e){return de({...n,...e})}});class B2{#e;constructor(e){this.#e=de(e)}ifExists(){return new B2({...this.#e,node:K5.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}zr(B2,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function sD(n){const e=".";if(n.includes(e)){const t=n.split(e).map(TJ);if(t.length===2)return xh.createWithSchema(t[0],t[1]);throw new Error(`invalid schemable identifier ${n}`)}else return xh.create(n)}function TJ(n){return n.trim()}class hx{#e;constructor(e){this.#e=e}createTable(e){return new Xa({queryId:Ti(),executor:this.#e,node:Ml.create(Os(e))})}dropTable(e){return new Ux({queryId:Ti(),executor:this.#e,node:VC.create(Os(e))})}createIndex(e){return new tc({queryId:Ti(),executor:this.#e,node:kd.create(e)})}dropIndex(e){return new Dy({queryId:Ti(),executor:this.#e,node:lx.create(e)})}createSchema(e){return new q2({queryId:Ti(),executor:this.#e,node:m5.create(e)})}dropSchema(e){return new Bx({queryId:Ti(),executor:this.#e,node:zC.create(e)})}alterTable(e){return new H5({queryId:Ti(),executor:this.#e,node:Ei.create(Os(e))})}createView(e){return new Dd({queryId:Ti(),executor:this.#e,node:Zf.create(e)})}dropView(e){return new Fy({queryId:Ti(),executor:this.#e,node:H1.create(e)})}createType(e){return new j2({queryId:Ti(),executor:this.#e,node:X5.create(sD(e))})}dropType(e){return new B2({queryId:Ti(),executor:this.#e,node:K5.create(sD(e))})}withPlugin(e){return new hx(this.#e.withPlugin(e))}withoutPlugins(){return new hx(this.#e.withoutPlugins())}withSchema(e){return new hx(this.#e.withPluginAtFront(new V0(e)))}}class MJ{ref(e){return new vY(e)}}class IJ{#e;constructor(e){this.#e=e}async provideConnection(e){const t=await this.#e.acquireConnection();try{return await e(t)}finally{await this.#e.releaseConnection(t)}}}class Hp extends R5{#e;#t;#n;constructor(e,t,r,i=[]){super(i),this.#e=e,this.#t=t,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Hp(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Hp(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Hp(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Hp(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Hp(this.#e,this.#t,this.#n,[])}}function oD(){return typeof performance<"u"&&Ul(performance.now)?performance.now():Date.now()}class AJ{#e;#t;#n;#r;#i;#c=new WeakSet;constructor(e,t){this.#r=!1,this.#e=e,this.#t=t}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#c.has(e)||(this.#a()&&this.#o(e),this.#c.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,t){return this.#e.beginTransaction(e,t)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#a(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(e){const t=e.executeQuery;e.executeQuery=async r=>{let i;const s=oD();try{return await t.call(e,r)}catch(o){throw i=o,await this.#u(o,r,s),o}finally{i||await this.#l(r,s)}}}async #u(e,t,r){await this.#t.error(()=>({level:"error",error:e,query:t,queryDurationMillis:this.#s(r)}))}async #l(e,t){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#s(t)}))}#s(e){return oD()-e}}const CJ=()=>{};class Q5{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(CJ);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const RJ=["read uncommitted","read committed","repeatable read","serializable","snapshot"];de(["query","error"]);class NJ{#e;#t;constructor(e){Ul(e)?(this.#t=e,this.#e=de({query:!0,error:!0})):(this.#t=PJ,this.#e=de({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function PJ(n){n.level==="query"?(console.log(`kysely:query: ${n.query.sql}`),console.log(`kysely:query: duration: ${n.queryDurationMillis.toFixed(1)}ms`)):n.level==="error"&&(n.error instanceof Error?console.error(`kysely:error: ${n.error.stack??n.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:n.error,query:n.query.sql,queryDurationMillis:n.queryDurationMillis})}`))}function kJ(n){return Mu(n)&&Ul(n.compile)}let ON=class W_ extends rh{#e;constructor(e){let t,r;if(OJ(e))t={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),l=new NJ(e.log??[]),u=new AJ(s,l),c=new IJ(u),d=new Hp(o,a,c,e.plugins??[]);t={executor:d},r={config:e,executor:d,dialect:i,driver:u}}super(t),this.#e=de(r)}get schema(){return new hx(this.#e.executor)}get dynamic(){return new MJ}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new L5({node:Cu.create(dh(e)?void 0:Fm(e))})}get fn(){return O5()}transaction(){return new U2({...this.#e})}connection(){return new Y5({...this.#e})}withPlugin(e){return new W_({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new W_({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new W_({...this.#e,executor:this.#e.executor.withPluginAtFront(new V0(e))})}withTables(){return new W_({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,t=Ti()){const r=kJ(e)?e.compile():e;return this.getExecutor().executeQuery(r,t)}};class hy extends ON{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new hy({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new hy({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new hy({...this.#e,executor:this.#e.executor.withPluginAtFront(new V0(e))})}withTables(){return new hy({...this.#e})}}function OJ(n){return Mu(n)&&Mu(n.config)&&Mu(n.driver)&&Mu(n.executor)&&Mu(n.dialect)}class Y5{#e;constructor(e){this.#e=de(e)}async execute(e){return this.#e.executor.provideConnection(async t=>{const r=this.#e.executor.withConnectionProvider(new Q5(t)),i=new ON({...this.#e,executor:r});return await e(i)})}}zr(Y5,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class U2{#e;constructor(e){this.#e=de(e)}setIsolationLevel(e){return new U2({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:t,...r}=this.#e,i={isolationLevel:t};return LJ(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new Q5(s)),a=new hy({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const l=await e(a);return await this.#e.driver.commitTransaction(s),l}catch(l){throw await this.#e.driver.rollbackTransaction(s),l}})}}zr(U2,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function LJ(n){if(n.isolationLevel&&!RJ.includes(n.isolationLevel))throw new Error(`invalid transaction isolation level ${n.isolationLevel}`)}class qy{#e;constructor(e){this.#e=de(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new J5(this,e)}$castTo(){return new qy({...this.#e})}$notNull(){return new qy(this.#e)}withPlugin(e){return new qy({...this.#e,plugins:this.#e.plugins!==void 0?de([...this.#e.plugins,e]):de([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const t=this.#t(e);return t.executeQuery(this.#r(t),this.#e.queryId)}#t(e){const t=e!==void 0?e.getExecutor():F2;return this.#e.plugins!==void 0?t.withPlugins(this.#e.plugins):t}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function jf(n){return new qy(n)}zr(qy,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class J5{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return kh.create(this.#e.toOperationNode(),al(this.#t)?this.#t.toOperationNode():ts.create(this.#t))}}zr(J5,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const vs=Object.assign((n,...e)=>jf({queryId:Ti(),rawNode:ea.create(n,e?.map(aD)??[])}),{ref(n){return jf({queryId:Ti(),rawNode:ea.createWithChild(Jd(n))})},val(n){return jf({queryId:Ti(),rawNode:ea.createWithChild(Qs(n))})},value(n){return this.val(n)},table(n){return jf({queryId:Ti(),rawNode:ea.createWithChild(Os(n))})},id(...n){const e=new Array(n.length+1).fill(".");return e[0]="",e[e.length-1]="",jf({queryId:Ti(),rawNode:ea.create(e,n.map(ts.create))})},lit(n){return jf({queryId:Ti(),rawNode:ea.createWithChild(ju.createImmediate(n))})},literal(n){return this.lit(n)},raw(n){return jf({queryId:Ti(),rawNode:ea.createWithSql(n)})},join(n,e=vs`, `){const t=new Array(2*n.length-1),r=e.toOperationNode();for(let i=0;i<n.length;++i)t[2*i]=aD(n[i]),i!==n.length-1&&(t[2*i+1]=r);return jf({queryId:Ti(),rawNode:ea.createWithChildren(t)})}});function aD(n){return al(n)?n.toOperationNode():Qs(n)}class DJ{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=de({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class FJ extends DJ{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),de({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const t=this.parentNode!==void 0&&!Gy.is(this.parentNode)&&!Al.is(this.parentNode)&&!Ml.is(this.parentNode)&&!Zf.is(this.parentNode)&&!P5.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),t&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,t=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(t)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const t=this.nodeStack.find(Fn.is),r=t!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!tl.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!tl.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const t=this.nodeStack.find(Fn.is)!==e;!t&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Dl(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:t}=e;for(let r=0;r<t.length;++r)this.appendValue(t[r]),r!==t.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(jJ[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:t,parameters:r}=e;for(let i=0;i<t.length;++i)this.append(t[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const t=this.nodeStack.find(Fn.is),r=t!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!tl.is(t)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!tl.is(t)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),qS(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(qJ[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return wh.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const t of e.pathLegs)this.visitNode(t);this.append("'")}visitJSONPathLeg(e){const t=e.type==="ArrayLocation";this.append(t?"[":"."),this.append(String(e.value)),t&&this.append("]")}visitJSONOperatorChain(e){for(let t=0,r=e.values.length;t<r;t++)t===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[t])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const t=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===t?i+=t:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Dl(e))this.append(`'${e}'`);else if(L2(e)||qS(e))this.append(e.toString());else if(_N(e))this.append("null");else if(lY(e))this.appendImmediateValue(e.toISOString());else if(xN(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((t,r)=>t.modifier&&r.modifier?lD[t.modifier]-lD[r.modifier]:1),de(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const qJ=de({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),lD=de({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),jJ=de({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class BJ{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const UJ=/"/g;class zJ extends FJ{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(UJ,'""')}visitDefaultInsertValue(e){this.append("null")}}const VJ="kysely_migration",WJ="kysely_migration_lock";de({__noMigrations__:!0});class $J{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let t=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(t=t.where("name","!=",VJ).where("name","!=",WJ));const r=await t.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const t=this.#e,r=await t.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await t.selectFrom(vs`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class HJ extends BJ{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,t){}async releaseMigrationLock(e,t){}}const ph={jsonObject(n){const e=vs.join(Object.entries(n).map(([t,r])=>vs`${t}, ${r}`));return vs`json_object(${e})`},jsonGroupArray(n){return vs`json_group_array(${ph.jsonObject(n)})`}},Z5={hash(n){return UC.sha224(n)},verify(n,e){return UC.sha224(n)===e}};var ei;(function(n){n.assertEqual=i=>i;function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},n.getValidEnumValues=i=>{const s=n.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(s){return i[s]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},n.find=(i,s)=>{for(const o of i)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=r,n.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ei||(ei={}));var QC;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(QC||(QC={}));const On=ei.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fd=n=>{switch(typeof n){case"undefined":return On.undefined;case"string":return On.string;case"number":return isNaN(n)?On.nan:On.number;case"boolean":return On.boolean;case"function":return On.function;case"bigint":return On.bigint;case"symbol":return On.symbol;case"object":return Array.isArray(n)?On.array:n===null?On.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?On.promise:typeof Map<"u"&&n instanceof Map?On.map:typeof Set<"u"&&n instanceof Set?On.set:typeof Date<"u"&&n instanceof Date?On.date:On.object;default:return On.unknown}},tn=ei.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),GJ=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class Ol extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],l++}}};return i(this),r}static assert(e){if(!(e instanceof Ol))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ei.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ol.create=n=>new Ol(n);const Ky=(n,e)=>{let t;switch(n.code){case tn.invalid_type:n.received===On.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case tn.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,ei.jsonStringifyReplacer)}`;break;case tn.unrecognized_keys:t=`Unrecognized key(s) in object: ${ei.joinValues(n.keys,", ")}`;break;case tn.invalid_union:t="Invalid input";break;case tn.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ei.joinValues(n.options)}`;break;case tn.invalid_enum_value:t=`Invalid enum value. Expected ${ei.joinValues(n.options)}, received '${n.received}'`;break;case tn.invalid_arguments:t="Invalid function arguments";break;case tn.invalid_return_type:t="Invalid function return type";break;case tn.invalid_date:t="Invalid date";break;case tn.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:ei.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case tn.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case tn.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case tn.custom:t="Invalid input";break;case tn.invalid_intersection_types:t="Intersection results could not be merged";break;case tn.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case tn.not_finite:t="Number must be finite";break;default:t=e.defaultError,ei.assertNever(n)}return{message:t}};let ez=Ky;function XJ(n){ez=n}function XS(){return ez}const KS=n=>{const{data:e,path:t,errorMaps:r,issueData:i}=n,s=[...t,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)a=u(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},KJ=[];function Sn(n,e){const t=XS(),r=KS({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ky?void 0:Ky].filter(i=>!!i)});n.common.issues.push(r)}class aa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const i of t){if(i.status==="aborted")return dr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const i of t){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return aa.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const i of t){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return dr;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const dr=Object.freeze({status:"aborted"}),py=n=>({status:"dirty",value:n}),Oa=n=>({status:"valid",value:n}),YC=n=>n.status==="aborted",JC=n=>n.status==="dirty",xm=n=>n.status==="valid",zx=n=>typeof Promise<"u"&&n instanceof Promise;function QS(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function tz(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var Yn;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(Yn||(Yn={}));var $_,H_;class zu{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const cD=(n,e)=>{if(xm(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ol(n.common.issues);return this._error=t,this._error}}};function Or(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:i}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,u;const{message:c}=n;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(l=c??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(u=c??t)!==null&&u!==void 0?u:a.defaultError}},description:i}}class Wr{get description(){return this._def.description}_getType(e){return Fd(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new aa,ctx:{common:e.parent.common,data:e.data,parsedType:Fd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(zx(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fd(e)},s=this._parseSync({data:e,path:i.path,parent:i});return cD(i,s)}"~validate"(e){var t,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fd(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return xm(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(t=s?.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>xm(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fd(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (zx(i)?i:Promise.resolve(i));return cD(r,s)}refine(e,t){const r=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:tn.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof t=="function"?t(r,i):t),!1))}_refinement(e){return new Kc({schema:this,typeName:ur.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Pu.create(this,this._def)}nullable(){return Ih.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gc.create(this)}promise(){return Yy.create(this,this._def)}or(e){return Hx.create([this,e],this._def)}and(e){return Gx.create(this,e,this._def)}transform(e){return new Kc({...Or(this._def),schema:this,typeName:ur.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Jx({...Or(this._def),innerType:this,defaultValue:t,typeName:ur.ZodDefault})}brand(){return new LN({typeName:ur.ZodBranded,type:this,...Or(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Zx({...Or(this._def),innerType:this,catchValue:t,typeName:ur.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return H0.create(this,e)}readonly(){return e0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const QJ=/^c[^\s-]{8,}$/i,YJ=/^[0-9a-z]+$/,JJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ZJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eZ=/^[a-z0-9_-]{21}$/i,tZ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nZ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rZ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iZ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qM;const sZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oZ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,aZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,lZ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cZ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uZ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nz="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dZ=new RegExp(`^${nz}$`);function rz(n){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`),e}function fZ(n){return new RegExp(`^${rz(n)}$`)}function iz(n){let e=`${nz}T${rz(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function hZ(n,e){return!!((e==="v4"||!e)&&sZ.test(n)||(e==="v6"||!e)&&aZ.test(n))}function pZ(n,e){if(!tZ.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function mZ(n,e){return!!((e==="v4"||!e)&&oZ.test(n)||(e==="v6"||!e)&&lZ.test(n))}class Wc extends Wr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==On.string){const s=this._getOrReturnCtx(e);return Sn(s,{code:tn.invalid_type,expected:On.string,received:s.parsedType}),dr}const r=new aa;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Sn(i,{code:tn.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Sn(i,{code:tn.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")rZ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"email",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")qM||(qM=new RegExp(iZ,"u")),qM.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"emoji",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")ZJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"uuid",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")eZ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"nanoid",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")QJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"cuid",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")YJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"cuid2",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")JJ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"ulid",code:tn.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Sn(i,{validation:"url",code:tn.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"regex",code:tn.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?iz(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?dZ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?fZ(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?nZ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"duration",code:tn.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?hZ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"ip",code:tn.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?pZ(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"jwt",code:tn.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?mZ(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"cidr",code:tn.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?cZ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"base64",code:tn.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?uZ.test(e.data)||(i=this._getOrReturnCtx(e,i),Sn(i,{validation:"base64url",code:tn.invalid_string,message:s.message}),r.dirty()):ei.assertNever(s);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(i=>e.test(i),{validation:t,code:tn.invalid_string,...Yn.errToObj(r)})}_addCheck(e){return new Wc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Yn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Yn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Yn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Yn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Yn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Yn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Yn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Yn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Yn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Yn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Yn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Yn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Yn.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Yn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Yn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Yn.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Yn.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Yn.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Yn.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Yn.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Yn.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Yn.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Yn.errToObj(t)})}nonempty(e){return this.min(1,Yn.errToObj(e))}trim(){return new Wc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Wc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Wc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Wc.create=n=>{var e;return new Wc({checks:[],typeName:ur.ZodString,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...Or(n)})};function gZ(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=t>r?t:r,s=parseInt(n.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Eh extends Wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==On.number){const s=this._getOrReturnCtx(e);return Sn(s,{code:tn.invalid_type,expected:On.number,received:s.parsedType}),dr}let r;const i=new aa;for(const s of this._def.checks)s.kind==="int"?ei.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?gZ(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.not_finite,message:s.message}),i.dirty()):ei.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Yn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Yn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Yn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Yn.toString(t))}setLimit(e,t,r,i){return new Eh({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Yn.toString(i)}]})}_addCheck(e){return new Eh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Yn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Yn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Yn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Yn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Yn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Yn.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Yn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Yn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Yn.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ei.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Eh.create=n=>new Eh({checks:[],typeName:ur.ZodNumber,coerce:n?.coerce||!1,...Or(n)});class Th extends Wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==On.bigint)return this._getInvalidInput(e);let r;const i=new aa;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Sn(r,{code:tn.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ei.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Sn(t,{code:tn.invalid_type,expected:On.bigint,received:t.parsedType}),dr}gte(e,t){return this.setLimit("min",e,!0,Yn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Yn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Yn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Yn.toString(t))}setLimit(e,t,r,i){return new Th({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:Yn.toString(i)}]})}_addCheck(e){return new Th({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Yn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Yn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Yn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Yn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Yn.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Th.create=n=>{var e;return new Th({checks:[],typeName:ur.ZodBigInt,coerce:(e=n?.coerce)!==null&&e!==void 0?e:!1,...Or(n)})};class Vx extends Wr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==On.boolean){const r=this._getOrReturnCtx(e);return Sn(r,{code:tn.invalid_type,expected:On.boolean,received:r.parsedType}),dr}return Oa(e.data)}}Vx.create=n=>new Vx({typeName:ur.ZodBoolean,coerce:n?.coerce||!1,...Or(n)});class bm extends Wr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==On.date){const s=this._getOrReturnCtx(e);return Sn(s,{code:tn.invalid_type,expected:On.date,received:s.parsedType}),dr}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Sn(s,{code:tn.invalid_date}),dr}const r=new aa;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Sn(i,{code:tn.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ei.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new bm({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Yn.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Yn.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}bm.create=n=>new bm({checks:[],coerce:n?.coerce||!1,typeName:ur.ZodDate,...Or(n)});class YS extends Wr{_parse(e){if(this._getType(e)!==On.symbol){const r=this._getOrReturnCtx(e);return Sn(r,{code:tn.invalid_type,expected:On.symbol,received:r.parsedType}),dr}return Oa(e.data)}}YS.create=n=>new YS({typeName:ur.ZodSymbol,...Or(n)});class Wx extends Wr{_parse(e){if(this._getType(e)!==On.undefined){const r=this._getOrReturnCtx(e);return Sn(r,{code:tn.invalid_type,expected:On.undefined,received:r.parsedType}),dr}return Oa(e.data)}}Wx.create=n=>new Wx({typeName:ur.ZodUndefined,...Or(n)});class $x extends Wr{_parse(e){if(this._getType(e)!==On.null){const r=this._getOrReturnCtx(e);return Sn(r,{code:tn.invalid_type,expected:On.null,received:r.parsedType}),dr}return Oa(e.data)}}$x.create=n=>new $x({typeName:ur.ZodNull,...Or(n)});class Qy extends Wr{constructor(){super(...arguments),this._any=!0}_parse(e){return Oa(e.data)}}Qy.create=n=>new Qy({typeName:ur.ZodAny,...Or(n)});class am extends Wr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Oa(e.data)}}am.create=n=>new am({typeName:ur.ZodUnknown,...Or(n)});class Zd extends Wr{_parse(e){const t=this._getOrReturnCtx(e);return Sn(t,{code:tn.invalid_type,expected:On.never,received:t.parsedType}),dr}}Zd.create=n=>new Zd({typeName:ur.ZodNever,...Or(n)});class JS extends Wr{_parse(e){if(this._getType(e)!==On.undefined){const r=this._getOrReturnCtx(e);return Sn(r,{code:tn.invalid_type,expected:On.void,received:r.parsedType}),dr}return Oa(e.data)}}JS.create=n=>new JS({typeName:ur.ZodVoid,...Or(n)});class Gc extends Wr{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==On.array)return Sn(t,{code:tn.invalid_type,expected:On.array,received:t.parsedType}),dr;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Sn(t,{code:o?tn.too_big:tn.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Sn(t,{code:tn.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Sn(t,{code:tn.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new zu(t,o,t.path,a)))).then(o=>aa.mergeArray(r,o));const s=[...t.data].map((o,a)=>i.type._parseSync(new zu(t,o,t.path,a)));return aa.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new Gc({...this._def,minLength:{value:e,message:Yn.toString(t)}})}max(e,t){return new Gc({...this._def,maxLength:{value:e,message:Yn.toString(t)}})}length(e,t){return new Gc({...this._def,exactLength:{value:e,message:Yn.toString(t)}})}nonempty(e){return this.min(1,e)}}Gc.create=(n,e)=>new Gc({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ur.ZodArray,...Or(e)});function ay(n){if(n instanceof cs){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Pu.create(ay(r))}return new cs({...n._def,shape:()=>e})}else return n instanceof Gc?new Gc({...n._def,type:ay(n.element)}):n instanceof Pu?Pu.create(ay(n.unwrap())):n instanceof Ih?Ih.create(ay(n.unwrap())):n instanceof Vu?Vu.create(n.items.map(e=>ay(e))):n}class cs extends Wr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=ei.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==On.object){const u=this._getOrReturnCtx(e);return Sn(u,{code:tn.invalid_type,expected:On.object,received:u.parsedType}),dr}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Zd&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||a.push(u);const l=[];for(const u of o){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new zu(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Zd){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of a)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(Sn(i,{code:tn.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of a){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new zu(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,h=await c.value;u.push({key:d,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>aa.mergeObjectSync(r,u)):aa.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Yn.errToObj,new cs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,r).message)!==null&&o!==void 0?o:r.defaultError;return t.code==="unrecognized_keys"?{message:(a=Yn.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new cs({...this._def,unknownKeys:"strip"})}passthrough(){return new cs({...this._def,unknownKeys:"passthrough"})}extend(e){return new cs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new cs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ur.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new cs({...this._def,catchall:e})}pick(e){const t={};return ei.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new cs({...this._def,shape:()=>t})}omit(e){const t={};return ei.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new cs({...this._def,shape:()=>t})}deepPartial(){return ay(this)}partial(e){const t={};return ei.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()}),new cs({...this._def,shape:()=>t})}required(e){const t={};return ei.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Pu;)s=s._def.innerType;t[r]=s}}),new cs({...this._def,shape:()=>t})}keyof(){return sz(ei.objectKeys(this.shape))}}cs.create=(n,e)=>new cs({shape:()=>n,unknownKeys:"strip",catchall:Zd.create(),typeName:ur.ZodObject,...Or(e)});cs.strictCreate=(n,e)=>new cs({shape:()=>n,unknownKeys:"strict",catchall:Zd.create(),typeName:ur.ZodObject,...Or(e)});cs.lazycreate=(n,e)=>new cs({shape:n,unknownKeys:"strip",catchall:Zd.create(),typeName:ur.ZodObject,...Or(e)});class Hx extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Ol(a.ctx.common.issues));return Sn(t,{code:tn.invalid_union,unionErrors:o}),dr}if(t.common.async)return Promise.all(r.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const u={...t,common:{...t.common,issues:[]},parent:null},c=l._parseSync({data:t.data,path:t.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Ol(l));return Sn(t,{code:tn.invalid_union,unionErrors:a}),dr}}get options(){return this._def.options}}Hx.create=(n,e)=>new Hx({options:n,typeName:ur.ZodUnion,...Or(e)});const Od=n=>n instanceof Kx?Od(n.schema):n instanceof Kc?Od(n.innerType()):n instanceof Qx?[n.value]:n instanceof Mh?n.options:n instanceof Yx?ei.objectValues(n.enum):n instanceof Jx?Od(n._def.innerType):n instanceof Wx?[void 0]:n instanceof $x?[null]:n instanceof Pu?[void 0,...Od(n.unwrap())]:n instanceof Ih?[null,...Od(n.unwrap())]:n instanceof LN||n instanceof e0?Od(n.unwrap()):n instanceof Zx?Od(n._def.innerType):[];class z2 extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==On.object)return Sn(t,{code:tn.invalid_type,expected:On.object,received:t.parsedType}),dr;const r=this.discriminator,i=t.data[r],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Sn(t,{code:tn.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),dr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const s of t){const o=Od(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new z2({typeName:ur.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Or(r)})}}function ZC(n,e){const t=Fd(n),r=Fd(e);if(n===e)return{valid:!0,data:n};if(t===On.object&&r===On.object){const i=ei.objectKeys(e),s=ei.objectKeys(n).filter(a=>i.indexOf(a)!==-1),o={...n,...e};for(const a of s){const l=ZC(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===On.array&&r===On.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],l=ZC(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return t===On.date&&r===On.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Gx extends Wr{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(YC(s)||YC(o))return dr;const a=ZC(s.value,o.value);return a.valid?((JC(s)||JC(o))&&t.dirty(),{status:t.value,value:a.data}):(Sn(r,{code:tn.invalid_intersection_types}),dr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Gx.create=(n,e,t)=>new Gx({left:n,right:e,typeName:ur.ZodIntersection,...Or(t)});class Vu extends Wr{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==On.array)return Sn(r,{code:tn.invalid_type,expected:On.array,received:r.parsedType}),dr;if(r.data.length<this._def.items.length)return Sn(r,{code:tn.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),dr;!this._def.rest&&r.data.length>this._def.items.length&&(Sn(r,{code:tn.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new zu(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>aa.mergeArray(t,o)):aa.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Vu({...this._def,rest:e})}}Vu.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Vu({items:n,typeName:ur.ZodTuple,rest:null,...Or(e)})};class Xx extends Wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==On.object)return Sn(r,{code:tn.invalid_type,expected:On.object,received:r.parsedType}),dr;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new zu(r,a,r.path,a)),value:o._parse(new zu(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?aa.mergeObjectAsync(t,i):aa.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Wr?new Xx({keyType:e,valueType:t,typeName:ur.ZodRecord,...Or(r)}):new Xx({keyType:Wc.create(),valueType:e,typeName:ur.ZodRecord,...Or(t)})}}class ZS extends Wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==On.map)return Sn(r,{code:tn.invalid_type,expected:On.map,received:r.parsedType}),dr;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],u)=>({key:i._parse(new zu(r,a,r.path,[u,"key"])),value:s._parse(new zu(r,l,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return dr;(u.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(u.value,c.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return dr;(u.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(u.value,c.value)}return{status:t.value,value:a}}}}ZS.create=(n,e,t)=>new ZS({valueType:e,keyType:n,typeName:ur.ZodMap,...Or(t)});class wm extends Wr{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==On.set)return Sn(r,{code:tn.invalid_type,expected:On.set,received:r.parsedType}),dr;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Sn(r,{code:tn.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Sn(r,{code:tn.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return dr;c.status==="dirty"&&t.dirty(),u.add(c.value)}return{status:t.value,value:u}}const a=[...r.data.values()].map((l,u)=>s._parse(new zu(r,l,r.path,u)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new wm({...this._def,minSize:{value:e,message:Yn.toString(t)}})}max(e,t){return new wm({...this._def,maxSize:{value:e,message:Yn.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}wm.create=(n,e)=>new wm({valueType:n,minSize:null,maxSize:null,typeName:ur.ZodSet,...Or(e)});class jy extends Wr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==On.function)return Sn(t,{code:tn.invalid_type,expected:On.function,received:t.parsedType}),dr;function r(a,l){return KS({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,XS(),Ky].filter(u=>!!u),issueData:{code:tn.invalid_arguments,argumentsError:l}})}function i(a,l){return KS({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,XS(),Ky].filter(u=>!!u),issueData:{code:tn.invalid_return_type,returnTypeError:l}})}const s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Yy){const a=this;return Oa(async function(...l){const u=new Ol([]),c=await a._def.args.parseAsync(l,s).catch(p=>{throw u.addIssue(r(l,p)),u}),d=await Reflect.apply(o,this,c);return await a._def.returns._def.type.parseAsync(d,s).catch(p=>{throw u.addIssue(i(d,p)),u})})}else{const a=this;return Oa(function(...l){const u=a._def.args.safeParse(l,s);if(!u.success)throw new Ol([r(l,u.error)]);const c=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(c,s);if(!d.success)throw new Ol([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new jy({...this._def,args:Vu.create(e).rest(am.create())})}returns(e){return new jy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new jy({args:e||Vu.create([]).rest(am.create()),returns:t||am.create(),typeName:ur.ZodFunction,...Or(r)})}}class Kx extends Wr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Kx.create=(n,e)=>new Kx({getter:n,typeName:ur.ZodLazy,...Or(e)});class Qx extends Wr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Sn(t,{received:t.data,code:tn.invalid_literal,expected:this._def.value}),dr}return{status:"valid",value:e.data}}get value(){return this._def.value}}Qx.create=(n,e)=>new Qx({value:n,typeName:ur.ZodLiteral,...Or(e)});function sz(n,e){return new Mh({values:n,typeName:ur.ZodEnum,...Or(e)})}class Mh extends Wr{constructor(){super(...arguments),$_.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Sn(t,{expected:ei.joinValues(r),received:t.parsedType,code:tn.invalid_type}),dr}if(QS(this,$_)||tz(this,$_,new Set(this._def.values)),!QS(this,$_).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Sn(t,{received:t.data,code:tn.invalid_enum_value,options:r}),dr}return Oa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Mh.create(e,{...this._def,...t})}exclude(e,t=this._def){return Mh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}$_=new WeakMap;Mh.create=sz;class Yx extends Wr{constructor(){super(...arguments),H_.set(this,void 0)}_parse(e){const t=ei.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==On.string&&r.parsedType!==On.number){const i=ei.objectValues(t);return Sn(r,{expected:ei.joinValues(i),received:r.parsedType,code:tn.invalid_type}),dr}if(QS(this,H_)||tz(this,H_,new Set(ei.getValidEnumValues(this._def.values))),!QS(this,H_).has(e.data)){const i=ei.objectValues(t);return Sn(r,{received:r.data,code:tn.invalid_enum_value,options:i}),dr}return Oa(e.data)}get enum(){return this._def.values}}H_=new WeakMap;Yx.create=(n,e)=>new Yx({values:n,typeName:ur.ZodNativeEnum,...Or(e)});class Yy extends Wr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==On.promise&&t.common.async===!1)return Sn(t,{code:tn.invalid_type,expected:On.promise,received:t.parsedType}),dr;const r=t.parsedType===On.promise?t.data:Promise.resolve(t.data);return Oa(r.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Yy.create=(n,e)=>new Yy({type:n,typeName:ur.ZodPromise,...Or(e)});class Kc extends Wr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ur.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Sn(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return dr;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?dr:l.status==="dirty"||t.value==="dirty"?py(l.value):l});{if(t.value==="aborted")return dr;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?dr:a.status==="dirty"||t.value==="dirty"?py(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?dr:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?dr:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!xm(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>xm(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);ei.assertNever(i)}}Kc.create=(n,e,t)=>new Kc({schema:n,typeName:ur.ZodEffects,effect:e,...Or(t)});Kc.createWithPreprocess=(n,e,t)=>new Kc({schema:e,effect:{type:"preprocess",transform:n},typeName:ur.ZodEffects,...Or(t)});class Pu extends Wr{_parse(e){return this._getType(e)===On.undefined?Oa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pu.create=(n,e)=>new Pu({innerType:n,typeName:ur.ZodOptional,...Or(e)});class Ih extends Wr{_parse(e){return this._getType(e)===On.null?Oa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ih.create=(n,e)=>new Ih({innerType:n,typeName:ur.ZodNullable,...Or(e)});class Jx extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===On.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Jx.create=(n,e)=>new Jx({innerType:n,typeName:ur.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Or(e)});class Zx extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return zx(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ol(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ol(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Zx.create=(n,e)=>new Zx({innerType:n,typeName:ur.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Or(e)});class eE extends Wr{_parse(e){if(this._getType(e)!==On.nan){const r=this._getOrReturnCtx(e);return Sn(r,{code:tn.invalid_type,expected:On.nan,received:r.parsedType}),dr}return{status:"valid",value:e.data}}}eE.create=n=>new eE({typeName:ur.ZodNaN,...Or(n)});const yZ=Symbol("zod_brand");class LN extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class H0 extends Wr{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?dr:s.status==="dirty"?(t.dirty(),py(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?dr:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,t){return new H0({in:e,out:t,typeName:ur.ZodPipeline})}}class e0 extends Wr{_parse(e){const t=this._def.innerType._parse(e),r=i=>(xm(i)&&(i.value=Object.freeze(i.value)),i);return zx(t)?t.then(i=>r(i)):r(t)}unwrap(){return this._def.innerType}}e0.create=(n,e)=>new e0({innerType:n,typeName:ur.ZodReadonly,...Or(e)});function oz(n,e={},t){return n?Qy.create().superRefine((r,i)=>{var s,o;if(!n(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...u,fatal:l})}}):Qy.create()}const vZ={object:cs.lazycreate};var ur;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ur||(ur={}));const _Z=(n,e={message:`Input not instance of ${n.name}`})=>oz(t=>t instanceof n,e),az=Wc.create,lz=Eh.create,xZ=eE.create,bZ=Th.create,cz=Vx.create,wZ=bm.create,SZ=YS.create,EZ=Wx.create,TZ=$x.create,MZ=Qy.create,IZ=am.create,AZ=Zd.create,CZ=JS.create,RZ=Gc.create,NZ=cs.create,PZ=cs.strictCreate,kZ=Hx.create,OZ=z2.create,LZ=Gx.create,DZ=Vu.create,FZ=Xx.create,qZ=ZS.create,jZ=wm.create,BZ=jy.create,UZ=Kx.create,zZ=Qx.create,VZ=Mh.create,WZ=Yx.create,$Z=Yy.create,uD=Kc.create,HZ=Pu.create,GZ=Ih.create,XZ=Kc.createWithPreprocess,KZ=H0.create,QZ=()=>az().optional(),YZ=()=>lz().optional(),JZ=()=>cz().optional(),ZZ={string:n=>Wc.create({...n,coerce:!0}),number:n=>Eh.create({...n,coerce:!0}),boolean:n=>Vx.create({...n,coerce:!0}),bigint:n=>Th.create({...n,coerce:!0}),date:n=>bm.create({...n,coerce:!0})},eee=dr;var ne=Object.freeze({__proto__:null,defaultErrorMap:Ky,setErrorMap:XJ,getErrorMap:XS,makeIssue:KS,EMPTY_PATH:KJ,addIssueToContext:Sn,ParseStatus:aa,INVALID:dr,DIRTY:py,OK:Oa,isAborted:YC,isDirty:JC,isValid:xm,isAsync:zx,get util(){return ei},get objectUtil(){return QC},ZodParsedType:On,getParsedType:Fd,ZodType:Wr,datetimeRegex:iz,ZodString:Wc,ZodNumber:Eh,ZodBigInt:Th,ZodBoolean:Vx,ZodDate:bm,ZodSymbol:YS,ZodUndefined:Wx,ZodNull:$x,ZodAny:Qy,ZodUnknown:am,ZodNever:Zd,ZodVoid:JS,ZodArray:Gc,ZodObject:cs,ZodUnion:Hx,ZodDiscriminatedUnion:z2,ZodIntersection:Gx,ZodTuple:Vu,ZodRecord:Xx,ZodMap:ZS,ZodSet:wm,ZodFunction:jy,ZodLazy:Kx,ZodLiteral:Qx,ZodEnum:Mh,ZodNativeEnum:Yx,ZodPromise:Yy,ZodEffects:Kc,ZodTransformer:Kc,ZodOptional:Pu,ZodNullable:Ih,ZodDefault:Jx,ZodCatch:Zx,ZodNaN:eE,BRAND:yZ,ZodBranded:LN,ZodPipeline:H0,ZodReadonly:e0,custom:oz,Schema:Wr,ZodSchema:Wr,late:vZ,get ZodFirstPartyTypeKind(){return ur},coerce:ZZ,any:MZ,array:RZ,bigint:bZ,boolean:cz,date:wZ,discriminatedUnion:OZ,effect:uD,enum:VZ,function:BZ,instanceof:_Z,intersection:LZ,lazy:UZ,literal:zZ,map:qZ,nan:xZ,nativeEnum:WZ,never:AZ,null:TZ,nullable:GZ,number:lz,object:NZ,oboolean:JZ,onumber:YZ,optional:HZ,ostring:QZ,pipeline:KZ,preprocess:XZ,promise:$Z,record:FZ,set:jZ,strictObject:PZ,string:az,symbol:SZ,transformer:uD,tuple:DZ,undefined:EZ,union:kZ,unknown:IZ,void:CZ,NEVER:eee,ZodIssueCode:tn,quotelessJson:GJ,ZodError:Ol});const tee=ne.object({page:ne.number().gte(0,"Page must be greater than zero"),size:ne.number().gte(1,"Page size must be greater than one to get any data")}),la=ne.object({id:ne.string().min(1)}),DN=ne.object({message:ne.string()}),ca=ne.object({id:ne.string().optional(),idIn:ne.array(ne.string()).optional(),fulltext:ne.string().optional()}),nee=ne.enum(["asc","desc"]),fc=()=>ne.union([ne.boolean(),ne.number().int().refine(n=>n===0||n===1).transform(n=>typeof n=="boolean"?n:n===1)]),ef=()=>ne.union([ne.number(),ne.string().transform(n=>parseFloat(n)).refine(n=>!isNaN(n))]),ku=()=>ne.union([ne.number().int(),ne.string().transform(n=>parseInt(n,10)).refine(n=>!isNaN(n))]),jo=n=>ne.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>ne.array(n).parse(e)),dD=n=>ne.string().transform(e=>JSON.parse(e)).transform(e=>n.parse(e)),eR=new Proxy(()=>eR,{get:()=>eR}),ua=({entity:n,shape:e,filter:t,sort:r})=>{const i=eR();return{entity:n,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:t,"~filter":i,sort:ne.array(ne.object({name:ne.enum(r),sort:nee})),"~sort":i,"~sort-keyof":i}},Bf=(n,e)=>Array.from({length:e-n+1},(t,r)=>r+n),ree=({page:n,total:e,siblings:t=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(t*2+3+r*2>=i)return{type:"simple",page:n,total:e,pages:Bf(1,i),start:[],end:[]};const o=Math.max(n-t,r),a=Math.min(n+t,i-r),l=o>r+2,u=a<i-(r+1);return!l&&u?{type:"end",page:n,total:e,start:[],pages:Bf(1,t*2+r+2),end:Bf(e-(r-1),i)}:l&&!u?{type:"start",page:n,total:e,start:Bf(1,r),pages:Bf(e-(r+1+2*t),i),end:[]}:{type:"both",page:n,total:e,start:Bf(1,r),pages:Bf(o,a),end:Bf(i-r+1,i)}};var Rg={},Ed={},Di={},Uf={},fD;function uz(){if(fD)return Uf;fD=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.anumber=n,Uf.abytes=t,Uf.ahash=r,Uf.aexists=i,Uf.aoutput=s;function n(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function t(o,...a){if(!e(o))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(o.length))throw new Error("Uint8Array expected of length "+a+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");n(o.outputLen),n(o.blockLen)}function i(o,a=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(a&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,a){t(o);const l=a.outputLen;if(o.length<l)throw new Error("digestInto() expects output buffer of length at least "+l)}return Uf}var wr={},hD;function iee(){if(hD)return wr;hD=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.add5L=wr.add5H=wr.add4H=wr.add4L=wr.add3H=wr.add3L=wr.rotlBL=wr.rotlBH=wr.rotlSL=wr.rotlSH=wr.rotr32L=wr.rotr32H=wr.rotrBL=wr.rotrBH=wr.rotrSL=wr.rotrSH=wr.shrSL=wr.shrSH=wr.toBig=void 0,wr.fromBig=t,wr.split=r,wr.add=y;const n=BigInt(2**32-1),e=BigInt(32);function t(R,P=!1){return P?{h:Number(R&n),l:Number(R>>e&n)}:{h:Number(R>>e&n)|0,l:Number(R&n)|0}}function r(R,P=!1){let F=new Uint32Array(R.length),z=new Uint32Array(R.length);for(let V=0;V<R.length;V++){const{h:W,l:Q}=t(R[V],P);[F[V],z[V]]=[W,Q]}return[F,z]}const i=(R,P)=>BigInt(R>>>0)<<e|BigInt(P>>>0);wr.toBig=i;const s=(R,P,F)=>R>>>F;wr.shrSH=s;const o=(R,P,F)=>R<<32-F|P>>>F;wr.shrSL=o;const a=(R,P,F)=>R>>>F|P<<32-F;wr.rotrSH=a;const l=(R,P,F)=>R<<32-F|P>>>F;wr.rotrSL=l;const u=(R,P,F)=>R<<64-F|P>>>F-32;wr.rotrBH=u;const c=(R,P,F)=>R>>>F-32|P<<64-F;wr.rotrBL=c;const d=(R,P)=>P;wr.rotr32H=d;const h=(R,P)=>R;wr.rotr32L=h;const p=(R,P,F)=>R<<F|P>>>32-F;wr.rotlSH=p;const g=(R,P,F)=>P<<F|R>>>32-F;wr.rotlSL=g;const x=(R,P,F)=>P<<F-32|R>>>64-F;wr.rotlBH=x;const b=(R,P,F)=>R<<F-32|P>>>64-F;wr.rotlBL=b;function y(R,P,F,z){const V=(P>>>0)+(z>>>0);return{h:R+F+(V/2**32|0)|0,l:V|0}}const E=(R,P,F)=>(R>>>0)+(P>>>0)+(F>>>0);wr.add3L=E;const T=(R,P,F,z)=>P+F+z+(R/2**32|0)|0;wr.add3H=T;const I=(R,P,F,z)=>(R>>>0)+(P>>>0)+(F>>>0)+(z>>>0);wr.add4L=I;const N=(R,P,F,z,V)=>P+F+z+V+(R/2**32|0)|0;wr.add4H=N;const k=(R,P,F,z,V)=>(R>>>0)+(P>>>0)+(F>>>0)+(z>>>0)+(V>>>0);wr.add5L=k;const q=(R,P,F,z,V,W)=>P+F+z+V+W+(R/2**32|0)|0;wr.add5H=q;const L={fromBig:t,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:a,rotrSL:l,rotrBH:u,rotrBL:c,rotr32H:d,rotr32L:h,rotlSH:p,rotlSL:g,rotlBH:x,rotlBL:b,add:y,add3L:E,add3H:T,add4L:I,add4H:N,add5H:q,add5L:k};return wr.default=L,wr}var jM={},b_={},pD;function see(){return pD||(pD=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.crypto=void 0,b_.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),b_}var mD;function oee(){return mD||(mD=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Hash=n.nextTick=n.byteSwapIfBE=n.isLE=void 0,n.isBytes=r,n.u8=i,n.u32=s,n.createView=o,n.rotr=a,n.rotl=l,n.byteSwap=u,n.byteSwap32=c,n.bytesToHex=h,n.hexToBytes=x,n.asyncLoop=y,n.utf8ToBytes=E,n.toBytes=T,n.concatBytes=I,n.checkOpts=k,n.wrapConstructor=q,n.wrapConstructorWithOpts=L,n.wrapXOFConstructorWithOpts=R,n.randomBytes=P;const e=see(),t=uz();function r(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function i(F){return new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}function s(F){return new Uint32Array(F.buffer,F.byteOffset,Math.floor(F.byteLength/4))}function o(F){return new DataView(F.buffer,F.byteOffset,F.byteLength)}function a(F,z){return F<<32-z|F>>>z}function l(F,z){return F<<z|F>>>32-z>>>0}n.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function u(F){return F<<24&0xff000000|F<<8&0xff0000|F>>>8&65280|F>>>24&255}n.byteSwapIfBE=n.isLE?F=>F:F=>u(F);function c(F){for(let z=0;z<F.length;z++)F[z]=u(F[z])}const d=Array.from({length:256},(F,z)=>z.toString(16).padStart(2,"0"));function h(F){(0,t.abytes)(F);let z="";for(let V=0;V<F.length;V++)z+=d[F[V]];return z}const p={_0:48,_9:57,A:65,F:70,a:97,f:102};function g(F){if(F>=p._0&&F<=p._9)return F-p._0;if(F>=p.A&&F<=p.F)return F-(p.A-10);if(F>=p.a&&F<=p.f)return F-(p.a-10)}function x(F){if(typeof F!="string")throw new Error("hex string expected, got "+typeof F);const z=F.length,V=z/2;if(z%2)throw new Error("hex string expected, got unpadded hex of length "+z);const W=new Uint8Array(V);for(let Q=0,X=0;Q<V;Q++,X+=2){const re=g(F.charCodeAt(X)),G=g(F.charCodeAt(X+1));if(re===void 0||G===void 0){const Y=F[X]+F[X+1];throw new Error('hex string expected, got non-hex character "'+Y+'" at index '+X)}W[Q]=re*16+G}return W}const b=async()=>{};n.nextTick=b;async function y(F,z,V){let W=Date.now();for(let Q=0;Q<F;Q++){V(Q);const X=Date.now()-W;X>=0&&X<z||(await (0,n.nextTick)(),W+=X)}}function E(F){if(typeof F!="string")throw new Error("utf8ToBytes expected string, got "+typeof F);return new Uint8Array(new TextEncoder().encode(F))}function T(F){return typeof F=="string"&&(F=E(F)),(0,t.abytes)(F),F}function I(...F){let z=0;for(let W=0;W<F.length;W++){const Q=F[W];(0,t.abytes)(Q),z+=Q.length}const V=new Uint8Array(z);for(let W=0,Q=0;W<F.length;W++){const X=F[W];V.set(X,Q),Q+=X.length}return V}class N{clone(){return this._cloneInto()}}n.Hash=N;function k(F,z){if(z!==void 0&&{}.toString.call(z)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(F,z)}function q(F){const z=W=>F().update(T(W)).digest(),V=F();return z.outputLen=V.outputLen,z.blockLen=V.blockLen,z.create=()=>F(),z}function L(F){const z=(W,Q)=>F(Q).update(T(W)).digest(),V=F({});return z.outputLen=V.outputLen,z.blockLen=V.blockLen,z.create=W=>F(W),z}function R(F){const z=(W,Q)=>F(Q).update(T(W)).digest(),V=F({});return z.outputLen=V.outputLen,z.blockLen=V.blockLen,z.create=W=>F(W),z}function P(F=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(F));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(F);throw new Error("crypto.getRandomValues must be defined")}}(jM)),jM}var gD;function aee(){if(gD)return Di;gD=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.shake256=Di.shake128=Di.keccak_512=Di.keccak_384=Di.keccak_256=Di.keccak_224=Di.sha3_512=Di.sha3_384=Di.sha3_256=Di.sha3_224=Di.Keccak=void 0,Di.keccakP=b;const n=uz(),e=iee(),t=oee(),r=[],i=[],s=[],o=BigInt(0),a=BigInt(1),l=BigInt(2),u=BigInt(7),c=BigInt(256),d=BigInt(113);for(let I=0,N=a,k=1,q=0;I<24;I++){[k,q]=[q,(2*k+3*q)%5],r.push(2*(5*q+k)),i.push((I+1)*(I+2)/2%64);let L=o;for(let R=0;R<7;R++)N=(N<<a^(N>>u)*d)%c,N&l&&(L^=a<<(a<<BigInt(R))-a);s.push(L)}const[h,p]=(0,e.split)(s,!0),g=(I,N,k)=>k>32?(0,e.rotlBH)(I,N,k):(0,e.rotlSH)(I,N,k),x=(I,N,k)=>k>32?(0,e.rotlBL)(I,N,k):(0,e.rotlSL)(I,N,k);function b(I,N=24){const k=new Uint32Array(10);for(let q=24-N;q<24;q++){for(let P=0;P<10;P++)k[P]=I[P]^I[P+10]^I[P+20]^I[P+30]^I[P+40];for(let P=0;P<10;P+=2){const F=(P+8)%10,z=(P+2)%10,V=k[z],W=k[z+1],Q=g(V,W,1)^k[F],X=x(V,W,1)^k[F+1];for(let re=0;re<50;re+=10)I[P+re]^=Q,I[P+re+1]^=X}let L=I[2],R=I[3];for(let P=0;P<24;P++){const F=i[P],z=g(L,R,F),V=x(L,R,F),W=r[P];L=I[W],R=I[W+1],I[W]=z,I[W+1]=V}for(let P=0;P<50;P+=10){for(let F=0;F<10;F++)k[F]=I[P+F];for(let F=0;F<10;F++)I[P+F]^=~k[(F+2)%10]&k[(F+4)%10]}I[0]^=h[q],I[1]^=p[q]}k.fill(0)}class y extends t.Hash{constructor(N,k,q,L=!1,R=24){if(super(),this.blockLen=N,this.suffix=k,this.outputLen=q,this.enableXOF=L,this.rounds=R,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(q),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,t.u32)(this.state)}keccak(){t.isLE||(0,t.byteSwap32)(this.state32),b(this.state32,this.rounds),t.isLE||(0,t.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(N){(0,n.aexists)(this);const{blockLen:k,state:q}=this;N=(0,t.toBytes)(N);const L=N.length;for(let R=0;R<L;){const P=Math.min(k-this.pos,L-R);for(let F=0;F<P;F++)q[this.pos++]^=N[R++];this.pos===k&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:N,suffix:k,pos:q,blockLen:L}=this;N[q]^=k,k&128&&q===L-1&&this.keccak(),N[L-1]^=128,this.keccak()}writeInto(N){(0,n.aexists)(this,!1),(0,n.abytes)(N),this.finish();const k=this.state,{blockLen:q}=this;for(let L=0,R=N.length;L<R;){this.posOut>=q&&this.keccak();const P=Math.min(q-this.posOut,R-L);N.set(k.subarray(this.posOut,this.posOut+P),L),this.posOut+=P,L+=P}return N}xofInto(N){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(N)}xof(N){return(0,n.anumber)(N),this.xofInto(new Uint8Array(N))}digestInto(N){if((0,n.aoutput)(N,this),this.finished)throw new Error("digest() was already called");return this.writeInto(N),this.destroy(),N}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(N){const{blockLen:k,suffix:q,outputLen:L,rounds:R,enableXOF:P}=this;return N||(N=new y(k,q,L,P,R)),N.state32.set(this.state32),N.pos=this.pos,N.posOut=this.posOut,N.finished=this.finished,N.rounds=R,N.suffix=q,N.outputLen=L,N.enableXOF=P,N.destroyed=this.destroyed,N}}Di.Keccak=y;const E=(I,N,k)=>(0,t.wrapConstructor)(()=>new y(N,I,k));Di.sha3_224=E(6,144,224/8),Di.sha3_256=E(6,136,256/8),Di.sha3_384=E(6,104,384/8),Di.sha3_512=E(6,72,512/8),Di.keccak_224=E(1,144,224/8),Di.keccak_256=E(1,136,256/8),Di.keccak_384=E(1,104,384/8),Di.keccak_512=E(1,72,512/8);const T=(I,N,k)=>(0,t.wrapXOFConstructorWithOpts)((q={})=>new y(N,I,q.dkLen===void 0?k:q.dkLen,!0));return Di.shake128=T(31,168,128/8),Di.shake256=T(31,136,256/8),Di}var yD;function lee(){if(yD)return Ed;yD=1;const{sha3_512:n}=aee(),e=24,t=32,r=(g=4,x=Math.random)=>{let b="";for(;b.length<g;)b=b+Math.floor(x()*36).toString(36);return b};function i(g){let x=8n,b=0n;for(const y of g.values()){const E=BigInt(y);b=(b<<x)+E}return b}const s=(g="")=>i(n(g)).toString(36).slice(1),o=Array.from({length:26},(g,x)=>String.fromCharCode(x+97)),a=g=>o[Math.floor(g()*o.length)],l=({globalObj:g=typeof Kp<"u"?Kp:typeof window<"u"?window:{},random:x=Math.random}={})=>{const b=Object.keys(g).toString(),y=b.length?b+r(t,x):r(t,x);return s(y).substring(0,t)},u=g=>()=>g++,c=0x1c6b1f1f,d=({random:g=Math.random,counter:x=u(Math.floor(g()*c)),length:b=e,fingerprint:y=l({random:g})}={})=>function(){const T=a(g),I=Date.now().toString(36),N=x().toString(36),k=r(b,g),q=`${I+k+N+y}`;return`${T+s(q).substring(1,b)}`},h=d(),p=(g,{minLength:x=2,maxLength:b=t}={})=>{const y=g.length,E=/^[0-9a-z]+$/;try{if(typeof g=="string"&&y>=x&&y<=b&&E.test(g))return!0}finally{}return!1};return Ed.getConstants=()=>({defaultLength:e,bigLength:t}),Ed.init=d,Ed.createId=h,Ed.bufToBigInt=i,Ed.createCounter=u,Ed.createFingerprint=l,Ed.isCuid=p,Ed}var vD;function cee(){if(vD)return Rg;vD=1;const{createId:n,init:e,getConstants:t,isCuid:r}=lee();return Rg.createId=n,Rg.init=e,Rg.getConstants=t,Rg.isCuid=r,Rg}var uee=cee();const Xr=uee.createId;var BM,_D;function dee(){if(_D)return BM;_D=1;var n=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,t)}catch(E){E!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(T){try{var I=n.call(T);return i.test(I)}catch{return!1}},o=function(T){try{return s(T)?!1:(n.call(T),!0)}catch{return!1}},a=Object.prototype.toString,l="[object Object]",u="[object Function]",c="[object GeneratorFunction]",d="[object HTMLAllCollection]",h="[object HTML document.all class]",p="[object HTMLCollection]",g=typeof Symbol=="function"&&!!Symbol.toStringTag,x=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var y=document.all;a.call(y)===a.call(document.all)&&(b=function(T){if((x||!T)&&(typeof T>"u"||typeof T=="object"))try{var I=a.call(T);return(I===d||I===h||I===p||I===l)&&T("")==null}catch{}return!1})}return BM=e?function(T){if(b(T))return!0;if(!T||typeof T!="function"&&typeof T!="object")return!1;try{e(T,null,t)}catch(I){if(I!==r)return!1}return!s(T)&&o(T)}:function(T){if(b(T))return!0;if(!T||typeof T!="function"&&typeof T!="object")return!1;if(g)return o(T);if(s(T))return!1;var I=a.call(T);return I!==u&&I!==c&&!/^\[object HTML/.test(I)?!1:o(T)},BM}var fee=dee();const hee=ol(fee),pee=n=>hee(n);var G1={exports:{}},mee=G1.exports,xD;function gee(){return xD||(xD=1,function(n){(function(e,t){n.exports=t()})(mee,function(){var e=Object.prototype.toString;function t(d,h){return d==null?!1:Object.prototype.hasOwnProperty.call(d,h)}function r(d){if(!d||o(d)&&d.length===0)return!0;if(typeof d!="string"){for(var h in d)if(t(d,h))return!1;return!0}return!1}function i(d){return e.call(d)}function s(d){return typeof d=="object"&&i(d)==="[object Object]"}var o=Array.isArray||function(d){return e.call(d)==="[object Array]"};function a(d){return typeof d=="boolean"||i(d)==="[object Boolean]"}function l(d){var h=parseInt(d);return h.toString()===d?h:d}function u(d){d=d||{};var h=function(y){return Object.keys(h).reduce(function(E,T){return T==="create"||typeof h[T]=="function"&&(E[T]=h[T].bind(h,y)),E},{})},p;d.includeInheritedProps?p=function(){return!0}:p=function(y,E){return typeof E=="number"&&Array.isArray(y)||t(y,E)};function g(y,E){if(p(y,E))return y[E]}var x;d.includeInheritedProps?x=function(y,E){typeof E!="string"&&typeof E!="number"&&(E=String(E));var T=g(y,E);if(E==="__proto__"||E==="prototype"||E==="constructor"&&typeof T=="function")throw new Error("For security reasons, object's magic properties cannot be set");return T}:x=function(y,E){return g(y,E)};function b(y,E,T,I){if(typeof E=="number"&&(E=[E]),!E||E.length===0)return y;if(typeof E=="string")return b(y,E.split(".").map(l),T,I);var N=E[0],k=x(y,N);return E.length===1?((k===void 0||!I)&&(y[N]=T),k):(k===void 0&&(typeof E[1]=="number"?y[N]=[]:y[N]={}),b(y[N],E.slice(1),T,I))}return h.has=function(y,E){if(typeof E=="number"?E=[E]:typeof E=="string"&&(E=E.split(".")),!E||E.length===0)return!!y;for(var T=0;T<E.length;T++){var I=l(E[T]);if(typeof I=="number"&&o(y)&&I<y.length||(d.includeInheritedProps?I in Object(y):t(y,I)))y=y[I];else return!1}return!0},h.ensureExists=function(y,E,T){return b(y,E,T,!0)},h.set=function(y,E,T,I){return b(y,E,T,I)},h.insert=function(y,E,T,I){var N=h.get(y,E);I=~~I,o(N)||(N=[],h.set(y,E,N)),N.splice(I,0,T)},h.empty=function(y,E){if(!r(E)&&y!=null){var T,I;if(T=h.get(y,E)){if(typeof T=="string")return h.set(y,E,"");if(a(T))return h.set(y,E,!1);if(typeof T=="number")return h.set(y,E,0);if(o(T))T.length=0;else if(s(T))for(I in T)p(T,I)&&delete T[I];else return h.set(y,E,null)}}},h.push=function(y,E){var T=h.get(y,E);o(T)||(T=[],h.set(y,E,T)),T.push.apply(T,Array.prototype.slice.call(arguments,2))},h.coalesce=function(y,E,T){for(var I,N=0,k=E.length;N<k;N++)if((I=h.get(y,E[N]))!==void 0)return I;return T},h.get=function(y,E,T){if(typeof E=="number"&&(E=[E]),!E||E.length===0)return y;if(y==null)return T;if(typeof E=="string")return h.get(y,E.split("."),T);var I=l(E[0]),N=x(y,I);return N===void 0?T:E.length===1?N:h.get(y[I],E.slice(1),T)},h.del=function(E,T){if(typeof T=="number"&&(T=[T]),E==null||r(T))return E;if(typeof T=="string")return h.del(E,T.split("."));var I=l(T[0]);if(x(E,I),!p(E,I))return E;if(T.length===1)o(E)?E.splice(I,1):delete E[I];else return h.del(E[I],T.slice(1));return E},h}var c=u();return c.create=u,c.withInheritedProps=u({includeInheritedProps:!0}),c})}(G1)),G1.exports}var yee=gee();const bD=ol(yee);var UM={},zM={};var wD;function vee(){if(wD)return zM;wD=1;class n{constructor(t={}){const{label:r,startTimestamp:i,endTimestamp:s,currentStartTimestamp:o,pauseCount:a,accumulatedMs:l}=t,u=i>=0&&i<Date.now()?i:void 0,c=u>=0&&s>0&&s>u?s:void 0,d=o>=u&&(!c||o<c)?o:u,h=i>=0,p=o!==void 0,g=a>0,x=h&&!p&&g;this._label=r||"",this._startTimestamp=u,this._currentStartTimestamp=x?void 0:d,this._endTimestamp=c,this._pauseCount=a||0,this._accumulatedMs=l||0}getLabel(){return this._label}isStarted(){return this._startTimestamp>=0}isPaused(){return this.isStarted()&&this._currentStartTimestamp===void 0}isStopped(){return this._endTimestamp>0}isRunning(){return this.isStarted()&&!this.isPaused()&&!this.isStopped()}start(){return this.isStarted()&&!this.isStopped()?this:(this.clear(),this._startTimestamp=Date.now(),this._currentStartTimestamp=this._startTimestamp,this)}pause(){return this.isPaused()||!this.isStarted()||this.isStopped()?this:(this._pauseCount+=1,this._accumulatedMs+=Date.now()-this._currentStartTimestamp,this._currentStartTimestamp=void 0,this)}resume(){return!this.isPaused()||this.isStopped()?this:(this._currentStartTimestamp=Date.now(),this)}stop(){return this.isStarted()?(this._endTimestamp=Date.now(),this):this}ms(){return this.isStarted()?this.isPaused()?this._accumulatedMs:(this._endTimestamp||Date.now())-this._currentStartTimestamp+this._accumulatedMs:0}pauseMs(){return this.isStarted()?(this._endTimestamp||Date.now())-this._startTimestamp-this.ms():0}_getTime(t){const r=Math.floor(t/1e3),i=Math.floor(r/60),s=Math.floor(i/60),o=Math.floor(s/24);return{ms:t%1e3,s:r%60,m:i%60,h:s%24,d:o}}time(){return this._getTime(this.ms())}pauseTime(){return this._getTime(this.pauseMs())}pauseCount(){return this._pauseCount}startedAt(){return this._startTimestamp}stoppedAt(){return this._endTimestamp}format(t="%label%d d, %h h, %m m, %s s, %ms ms"){const r=this.time();return t.replace("%label",this._label?`${this._label}: `:"").replace("%ms",r.ms).replace("%s",r.s).replace("%m",r.m).replace("%h",r.h).replace("%d",r.d)}clear(){return this._startTimestamp=void 0,this._currentStartTimestamp=void 0,this._endTimestamp=void 0,this._accumulatedMs=0,this._pauseCount=0,this}serialize(){return JSON.stringify({startTimestamp:this._startTimestamp,currentStartTimestamp:this._currentStartTimestamp,endTimestamp:this._endTimestamp,accumulatedMs:this._accumulatedMs,pauseCount:this._pauseCount,label:this._label})}static deserialize(t){return new n(JSON.parse(t))}static benchmark(t){if(typeof t!="function")throw new Error("Timer.benchmark expects a function");const r=new n({label:t.name}).start();return t(),r.stop()}}return zM.Timer=n,zM}var SD;function _ee(){if(SD)return UM;SD=1;const{Timer:n}=vee();return UM.Timer=n,UM}var xee=_ee();function $r({number:n,empty:e="-",fraction:t=2}){if(n==null)return e;try{return n.toLocaleString(void 0,{maximumFractionDigits:t})}catch(r){return console.error("toHumanNumber",n,r),n.toFixed(2)}}const dz=async n=>new Promise((e,t)=>{const r=new FileReader;r.readAsDataURL(n),r.onload=()=>e(r.result),r.onerror=i=>t(i)}),FN=({error:n,errors:e,onError:t})=>{const r=e.some(s=>s),i=n instanceof Error;return!r&&i&&t(n),r||i},fz=Cr({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),bee=Cr({use:fz,slot:{},variant:{},defaults:{}}),qN=n=>{const e=Bt.c(20);let t,r,i,s,o,a,l;e[0]!==n?({icon:i,iconProps:s,variant:l,tva:a,css:r,children:t,...o}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7]);const u=a===void 0?bee:a;let c;e[8]!==r||e[9]!==u||e[10]!==l?(c=u({...l,css:r}).slots.base(),e[8]=r,e[9]=u,e[10]=l,e[11]=c):c=e[11];let d;e[12]!==i||e[13]!==s?(d=q0(i)?S.jsx(br,{icon:i,...s}):i,e[12]=i,e[13]=s,e[14]=d):d=e[14];let h;return e[15]!==t||e[16]!==o||e[17]!==c||e[18]!==d?(h=S.jsxs("div",{className:c,...o,children:[d,t]}),e[15]=t,e[16]=o,e[17]=c,e[18]=d,e[19]=h):h=e[19],h};function V2(){return typeof window<"u"}function Oh(n){return hz(n)?(n.nodeName||"").toLowerCase():"#document"}function il(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Wu(n){var e;return(e=(hz(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function hz(n){return V2()?n instanceof Node||n instanceof il(n).Node:!1}function qi(n){return V2()?n instanceof Element||n instanceof il(n).Element:!1}function Ys(n){return V2()?n instanceof HTMLElement||n instanceof il(n).HTMLElement:!1}function tR(n){return!V2()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof il(n).ShadowRoot}function G0(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=lc(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function wee(n){return["table","td","th"].includes(Oh(n))}function W2(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function jN(n){const e=$2(),t=qi(n)?lc(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function See(n){let e=tf(n);for(;Ys(e)&&!Wd(e);){if(jN(e))return e;if(W2(e))return null;e=tf(e)}return null}function $2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wd(n){return["html","body","#document"].includes(Oh(n))}function lc(n){return il(n).getComputedStyle(n)}function H2(n){return qi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function tf(n){if(Oh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||tR(n)&&n.host||Wu(n);return tR(e)?e.host:e}function pz(n){const e=tf(n);return Wd(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ys(e)&&G0(e)?e:pz(e)}function mh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=pz(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=il(i);if(s){const a=nR(o);return e.concat(o,o.visualViewport||[],G0(i)?i:[],a&&t?mh(a):[])}return e.concat(i,mh(i,[],t))}function nR(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function jc(n){let e=n.activeElement;for(;((t=e)==null||(t=t.shadowRoot)==null?void 0:t.activeElement)!=null;){var t;e=e.shadowRoot.activeElement}return e}function Fo(n,e){if(!n||!e)return!1;const t=e.getRootNode==null?void 0:e.getRootNode();if(n.contains(e))return!0;if(t&&tR(t)){let r=e;for(;r;){if(n===r)return!0;r=r.parentNode||r.host}}return!1}function BN(){const n=navigator.userAgentData;return n!=null&&n.platform?n.platform:navigator.platform}function mz(){const n=navigator.userAgentData;return n&&Array.isArray(n.brands)?n.brands.map(e=>{let{brand:t,version:r}=e;return t+"/"+r}).join(" "):navigator.userAgent}function gz(n){return n.mozInputSource===0&&n.isTrusted?!0:rR()&&n.pointerType?n.type==="click"&&n.buttons===1:n.detail===0&&!n.pointerType}function UN(n){return Tee()?!1:!rR()&&n.width===0&&n.height===0||rR()&&n.width===1&&n.height===1&&n.pressure===0&&n.detail===0&&n.pointerType==="mouse"||n.width<1&&n.height<1&&n.pressure===0&&n.detail===0&&n.pointerType==="touch"}function yz(){return/apple/i.test(navigator.vendor)}function rR(){const n=/android/i;return n.test(BN())||n.test(mz())}function Eee(){return BN().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Tee(){return mz().includes("jsdom/")}function t0(n,e){const t=["mouse","pen"];return e||t.push("",void 0),t.includes(n)}function Mee(n){return"nativeEvent"in n}function Iee(n){return n.matches("html,body")}function qo(n){return n?.ownerDocument||document}function VM(n,e){if(e==null)return!1;if("composedPath"in n)return n.composedPath().includes(e);const t=n;return t.target!=null&&e.contains(t.target)}function oh(n){return"composedPath"in n?n.composedPath()[0]:n.target}const Aee="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function zN(n){return Ys(n)&&n.matches(Aee)}function Ea(n){n.preventDefault(),n.stopPropagation()}function vz(n){return n?n.getAttribute("role")==="combobox"&&zN(n):!1}const Jy=Math.min,Cl=Math.max,tE=Math.round,my=Math.floor,Ou=n=>({x:n,y:n}),Cee={left:"right",right:"left",bottom:"top",top:"bottom"},Ree={start:"end",end:"start"};function ED(n,e,t){return Cl(n,Jy(e,t))}function X0(n,e){return typeof n=="function"?n(e):n}function Ah(n){return n.split("-")[0]}function K0(n){return n.split("-")[1]}function _z(n){return n==="x"?"y":"x"}function xz(n){return n==="y"?"height":"width"}function Sm(n){return["top","bottom"].includes(Ah(n))?"y":"x"}function bz(n){return _z(Sm(n))}function Nee(n,e,t){t===void 0&&(t=!1);const r=K0(n),i=bz(n),s=xz(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=nE(o)),[o,nE(o)]}function Pee(n){const e=nE(n);return[iR(n),e,iR(e)]}function iR(n){return n.replace(/start|end/g,e=>Ree[e])}function kee(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Oee(n,e,t,r){const i=K0(n);let s=kee(Ah(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(iR)))),s}function nE(n){return n.replace(/left|right|bottom|top/g,e=>Cee[e])}function Lee(n){return{top:0,right:0,bottom:0,left:0,...n}}function Dee(n){return typeof n!="number"?Lee(n):{top:n,right:n,bottom:n,left:n}}function rE(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}var Fee=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],iE=Fee.join(","),wz=typeof Element>"u",Zy=wz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,sE=!wz&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},oE=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||t&&e&&n(e.parentNode);return o},qee=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},jee=function(e,t,r){if(oE(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(iE));return t&&Zy.call(e,iE)&&i.unshift(e),i=i.filter(r),i},Bee=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!oE(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=n(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:o,candidates:u})}else{var c=Zy.call(o,iE);c&&r.filter(o)&&(t||!e.includes(o))&&i.push(o);var d=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),h=!oE(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(d&&h){var p=n(d===!0?o.children:d.children,!0,r);r.flatten?i.push.apply(i,p):i.push({scopeParent:o,candidates:p})}else s.unshift.apply(s,o.children)}}return i},Sz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ez=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||qee(e))&&!Sz(e)?0:e.tabIndex},Uee=function(e,t){var r=Ez(e);return r<0&&t&&!Sz(e)?0:r},zee=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Tz=function(e){return e.tagName==="INPUT"},Vee=function(e){return Tz(e)&&e.type==="hidden"},Wee=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},$ee=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Hee=function(e){if(!e.name)return!0;var t=e.form||sE(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=$ee(i,e.form);return!s||s===e},Gee=function(e){return Tz(e)&&e.type==="radio"},Xee=function(e){return Gee(e)&&!Hee(e)},Kee=function(e){var t,r=e&&sE(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var u,c,d;r=sE(i),i=(u=r)===null||u===void 0?void 0:u.host,s=!!((c=i)!==null&&c!==void 0&&(d=c.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return s},TD=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Qee=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Zy.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Zy.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,u=sE(e);if(l&&!l.shadowRoot&&i(l)===!0)return TD(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(Kee(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return TD(e);return!1},Yee=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Zy.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Jee=function(e,t){return!(t.disabled||oE(t)||Vee(t)||Qee(t,e)||Wee(t)||Yee(t))},sR=function(e,t){return!(Xee(t)||Ez(t)<0||!Jee(e,t))},Zee=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},ete=function n(e){var t=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=Uee(a,o),u=o?n(i.candidates):a;l===0?o?t.push.apply(t,u):t.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:u})}),r.sort(zee).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},G2=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Bee([e],t.includeContainer,{filter:sR.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Zee}):r=jee(e,t.includeContainer,sR.bind(null,t)),ete(r)},tte=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Zy.call(e,iE)===!1?!1:sR(t,e)};function MD(n,e,t){let{reference:r,floating:i}=n;const s=Sm(e),o=bz(e),a=xz(o),l=Ah(e),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:c,y:r.y-i.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(K0(e)){case"start":p[o]-=h*(t&&u?-1:1);break;case"end":p[o]+=h*(t&&u?-1:1);break}return p}const nte=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await (o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:d}=MD(u,r,l),h=r,p={},g=0;for(let x=0;x<a.length;x++){const{name:b,fn:y}=a[x],{x:E,y:T,data:I,reset:N}=await y({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:n,floating:e}});c=E??c,d=T??d,p={...p,[b]:{...p[b],...I}},N&&g<=50&&(g++,typeof N=="object"&&(N.placement&&(h=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):N.rects),{x:c,y:d}=MD(u,h,l)),x=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:p}};async function VN(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=X0(e,n),g=Dee(p),b=a[h?d==="floating"?"reference":"floating":d],y=rE(await s.getClippingRect({element:(t=await (s.isElement==null?void 0:s.isElement(b)))==null||t?b:b.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),E=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await (s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),I=await (s.isElement==null?void 0:s.isElement(T))?await (s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},N=rE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:T,strategy:l}):E);return{top:(y.top-N.top+g.top)/I.y,bottom:(N.bottom-y.bottom+g.bottom)/I.y,left:(y.left-N.left+g.left)/I.x,right:(N.right-y.right+g.right)/I.x}}const rte=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...b}=X0(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const y=Ah(i),E=Sm(a),T=Ah(a)===a,I=await (l.isRTL==null?void 0:l.isRTL(u.floating)),N=h||(T||!x?[nE(a)]:Pee(a)),k=g!=="none";!h&&k&&N.push(...Oee(a,x,g,I));const q=[a,...N],L=await VN(e,b),R=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(L[y]),d){const W=Nee(i,o,I);R.push(L[W[0]],L[W[1]])}if(P=[...P,{placement:i,overflows:R}],!R.every(W=>W<=0)){var F,z;const W=(((F=s.flip)==null?void 0:F.index)||0)+1,Q=q[W];if(Q)return{data:{index:W,overflows:P},reset:{placement:Q}};let X=(z=P.filter(re=>re.overflows[0]<=0).sort((re,G)=>re.overflows[1]-G.overflows[1])[0])==null?void 0:z.placement;if(!X)switch(p){case"bestFit":{var V;const re=(V=P.filter(G=>{if(k){const Y=Sm(G.placement);return Y===E||Y==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(Y=>Y>0).reduce((Y,te)=>Y+te,0)]).sort((G,Y)=>G[1]-Y[1])[0])==null?void 0:V[0];re&&(X=re);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};async function ite(n,e){const{placement:t,platform:r,elements:i}=n,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ah(t),a=K0(t),l=Sm(t)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=X0(e,n);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*c,y:h*u}:{x:h*u,y:p*c}}const ste=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await ite(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},ote=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:y,y:E}=b;return{x:y,y:E}}},...l}=X0(n,e),u={x:t,y:r},c=await VN(e,l),d=Sm(Ah(i)),h=_z(d);let p=u[h],g=u[d];if(s){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",E=p+c[b],T=p-c[y];p=ED(E,p,T)}if(o){const b=d==="y"?"top":"left",y=d==="y"?"bottom":"right",E=g+c[b],T=g-c[y];g=ED(E,g,T)}const x=a.fn({...e,[h]:p,[d]:g});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[h]:s,[d]:o}}}}}},ate=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...u}=X0(n,e),c=await VN(e,u),d=Ah(i),h=K0(i),p=Sm(i)==="y",{width:g,height:x}=s.floating;let b,y;d==="top"||d==="bottom"?(b=d,y=h===(await (o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,b=h==="end"?"top":"bottom");const E=x-c.top-c.bottom,T=g-c.left-c.right,I=Jy(x-c[b],E),N=Jy(g-c[y],T),k=!e.middlewareData.shift;let q=I,L=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(L=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(q=E),k&&!h){const P=Cl(c.left,0),F=Cl(c.right,0),z=Cl(c.top,0),V=Cl(c.bottom,0);p?L=g-2*(P!==0||F!==0?P+F:Cl(c.left,c.right)):q=x-2*(z!==0||V!==0?z+V:Cl(c.top,c.bottom))}await l({...e,availableWidth:L,availableHeight:q});const R=await o.getDimensions(a.floating);return g!==R.width||x!==R.height?{reset:{rects:!0}}:{}}}};function Mz(n){const e=lc(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ys(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=tE(t)!==s||tE(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function WN(n){return qi(n)?n:n.contextElement}function By(n){const e=WN(n);if(!Ys(e))return Ou(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Mz(e);let o=(s?tE(t.width):t.width)/r,a=(s?tE(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const lte=Ou(0);function Iz(n){const e=il(n);return!$2()||!e.visualViewport?lte:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cte(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==il(n)?!1:e}function Em(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=WN(n);let o=Ou(1);e&&(r?qi(r)&&(o=By(r)):o=By(n));const a=cte(s,t,r)?Iz(s):Ou(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const h=il(s),p=r&&qi(r)?il(r):r;let g=h,x=nR(g);for(;x&&r&&p!==g;){const b=By(x),y=x.getBoundingClientRect(),E=lc(x),T=y.left+(x.clientLeft+parseFloat(E.paddingLeft))*b.x,I=y.top+(x.clientTop+parseFloat(E.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,d*=b.y,l+=T,u+=I,g=il(x),x=nR(g)}}return rE({width:c,height:d,x:l,y:u})}function $N(n,e){const t=H2(n).scrollLeft;return e?e.left+t:Em(Wu(n)).left+t}function Az(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:$N(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function ute(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Wu(r),a=e?W2(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},u=Ou(1);const c=Ou(0),d=Ys(r);if((d||!d&&!s)&&((Oh(r)!=="body"||G0(o))&&(l=H2(r)),Ys(r))){const p=Em(r);u=By(r),c.x=p.x+r.clientLeft,c.y=p.y+r.clientTop}const h=o&&!d&&!s?Az(o,l,!0):Ou(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:t.y*u.y-l.scrollTop*u.y+c.y+h.y}}function dte(n){return Array.from(n.getClientRects())}function fte(n){const e=Wu(n),t=H2(n),r=n.ownerDocument.body,i=Cl(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Cl(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+$N(n);const a=-t.scrollTop;return lc(r).direction==="rtl"&&(o+=Cl(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function hte(n,e){const t=il(n),r=Wu(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=$2();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function pte(n,e){const t=Em(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Ys(n)?By(n):Ou(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function ID(n,e,t){let r;if(e==="viewport")r=hte(n,t);else if(e==="document")r=fte(Wu(n));else if(qi(e))r=pte(e,t);else{const i=Iz(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rE(r)}function Cz(n,e){const t=tf(n);return t===e||!qi(t)||Wd(t)?!1:lc(t).position==="fixed"||Cz(t,e)}function mte(n,e){const t=e.get(n);if(t)return t;let r=mh(n,[],!1).filter(a=>qi(a)&&Oh(a)!=="body"),i=null;const s=lc(n).position==="fixed";let o=s?tf(n):n;for(;qi(o)&&!Wd(o);){const a=lc(o),l=jN(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||G0(o)&&!l&&Cz(n,o))?r=r.filter(c=>c!==o):i=a,o=tf(o)}return e.set(n,r),r}function gte(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?W2(e)?[]:mte(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((u,c)=>{const d=ID(e,c,i);return u.top=Cl(d.top,u.top),u.right=Jy(d.right,u.right),u.bottom=Jy(d.bottom,u.bottom),u.left=Cl(d.left,u.left),u},ID(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function yte(n){const{width:e,height:t}=Mz(n);return{width:e,height:t}}function vte(n,e,t){const r=Ys(e),i=Wu(e),s=t==="fixed",o=Em(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ou(0);if(r||!r&&!s)if((Oh(e)!=="body"||G0(i))&&(a=H2(e)),r){const h=Em(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=$N(i));const u=i&&!r&&!s?Az(i,a):Ou(0),c=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:c,y:d,width:o.width,height:o.height}}function WM(n){return lc(n).position==="static"}function AD(n,e){if(!Ys(n)||lc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Wu(n)===t&&(t=t.ownerDocument.body),t}function Rz(n,e){const t=il(n);if(W2(n))return t;if(!Ys(n)){let i=tf(n);for(;i&&!Wd(i);){if(qi(i)&&!WM(i))return i;i=tf(i)}return t}let r=AD(n,e);for(;r&&wee(r)&&WM(r);)r=AD(r,e);return r&&Wd(r)&&WM(r)&&!jN(r)?t:r||See(n)||t}const _te=async function(n){const e=this.getOffsetParent||Rz,t=this.getDimensions,r=await t(n.floating);return{reference:vte(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xte(n){return lc(n).direction==="rtl"}const bte={convertOffsetParentRelativeRectToViewportRelativeRect:ute,getDocumentElement:Wu,getClippingRect:gte,getOffsetParent:Rz,getElementRects:_te,getClientRects:dte,getDimensions:yte,getScale:By,isElement:qi,isRTL:xte};function Nz(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function wte(n,e){let t=null,r;const i=Wu(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=n.getBoundingClientRect(),{left:c,top:d,width:h,height:p}=u;if(a||e(),!h||!p)return;const g=my(d),x=my(i.clientWidth-(c+h)),b=my(i.clientHeight-(d+p)),y=my(c),T={rootMargin:-g+"px "+-x+"px "+-b+"px "+-y+"px",threshold:Cl(0,Jy(1,l))||1};let I=!0;function N(k){const q=k[0].intersectionRatio;if(q!==l){if(!I)return o();q?o(!1,q):r=setTimeout(()=>{o(!1,1e-7)},1e3)}q===1&&!Nz(u,n.getBoundingClientRect())&&o(),I=!1}try{t=new IntersectionObserver(N,{...T,root:i.ownerDocument})}catch{t=new IntersectionObserver(N,T)}t.observe(n)}return o(!0),s}function Pz(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=WN(n),c=i||s?[...u?mh(u):[],...mh(e)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",t,{passive:!0}),s&&y.addEventListener("resize",t)});const d=u&&a?wte(u,t):null;let h=-1,p=null;o&&(p=new ResizeObserver(y=>{let[E]=y;E&&E.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var T;(T=p)==null||T.observe(e)})),t()}),u&&!l&&p.observe(u),p.observe(e));let g,x=l?Em(n):null;l&&b();function b(){const y=Em(n);x&&!Nz(x,y)&&t(),x=y,g=requestAnimationFrame(b)}return t(),()=>{var y;c.forEach(E=>{i&&E.removeEventListener("scroll",t),s&&E.removeEventListener("resize",t)}),d?.(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const Ste=ste,Ete=ote,Tte=rte,Mte=ate,Ite=(n,e,t)=>{const r=new Map,i={platform:bte,...t},s={...i.platform,_c:r};return nte(n,e,{...i,platform:s})};var X1=typeof document<"u"?ie.useLayoutEffect:ie.useEffect;function aE(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!aE(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!aE(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function kz(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function CD(n,e){const t=kz(n);return Math.round(e*t)/t}function $M(n){const e=ie.useRef(n);return X1(()=>{e.current=n}),e}function Ate(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=n,[c,d]=ie.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=ie.useState(r);aE(h,r)||p(r);const[g,x]=ie.useState(null),[b,y]=ie.useState(null),E=ie.useCallback(G=>{G!==k.current&&(k.current=G,x(G))},[]),T=ie.useCallback(G=>{G!==q.current&&(q.current=G,y(G))},[]),I=s||g,N=o||b,k=ie.useRef(null),q=ie.useRef(null),L=ie.useRef(c),R=l!=null,P=$M(l),F=$M(i),z=$M(u),V=ie.useCallback(()=>{if(!k.current||!q.current)return;const G={placement:e,strategy:t,middleware:h};F.current&&(G.platform=F.current),Ite(k.current,q.current,G).then(Y=>{const te={...Y,isPositioned:z.current!==!1};W.current&&!aE(L.current,te)&&(L.current=te,M2.flushSync(()=>{d(te)}))})},[h,e,t,F,z]);X1(()=>{u===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,d(G=>({...G,isPositioned:!1})))},[u]);const W=ie.useRef(!1);X1(()=>(W.current=!0,()=>{W.current=!1}),[]),X1(()=>{if(I&&(k.current=I),N&&(q.current=N),I&&N){if(P.current)return P.current(I,N,V);V()}},[I,N,V,P,R]);const Q=ie.useMemo(()=>({reference:k,floating:q,setReference:E,setFloating:T}),[E,T]),X=ie.useMemo(()=>({reference:I,floating:N}),[I,N]),re=ie.useMemo(()=>{const G={position:t,left:0,top:0};if(!X.floating)return G;const Y=CD(X.floating,c.x),te=CD(X.floating,c.y);return a?{...G,transform:"translate("+Y+"px, "+te+"px)",...kz(X.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Y,top:te}},[t,a,X.floating,c.x,c.y]);return ie.useMemo(()=>({...c,update:V,refs:Q,elements:X,floatingStyles:re}),[c,V,Q,X,re])}const Oz=(n,e)=>({...Ste(n),options:[n,e]}),Cte=(n,e)=>({...Ete(n),options:[n,e]}),Lz=(n,e)=>({...Tte(n),options:[n,e]}),Rte=(n,e)=>({...Mte(n),options:[n,e]});function RD(n){return ie.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})},n)}const Dz={...X7},Nte=Dz.useInsertionEffect,Pte=Nte||(n=>n());function Aa(n){const e=ie.useRef(()=>{});return Pte(()=>{e.current=n}),ie.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const HN="ArrowUp",Q0="ArrowDown",gh="ArrowLeft",yh="ArrowRight";function bw(n,e,t){return Math.floor(n/e)!==t}function px(n,e){return e<0||e>=n.current.length}function HM(n,e){return Zo(n,{disabledIndices:e})}function ND(n,e){return Zo(n,{decrement:!0,startingIndex:n.current.length,disabledIndices:e})}function Zo(n,e){let{startingIndex:t=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=n.current;let a=t;do a+=r?-s:s;while(a>=0&&a<=o.length-1&&K1(o,a,i));return a}function kte(n,e){let{event:t,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:a,minIndex:l,maxIndex:u,prevIndex:c,stopEvent:d=!1}=e,h=c;if(t.key===HN){if(d&&Ea(t),c===-1)h=u;else if(h=Zo(n,{startingIndex:h,amount:o,decrement:!0,disabledIndices:a}),i&&(c-o<l||h<0)){const p=c%o,g=u%o,x=u-(g-p);g===p?h=u:h=g>p?x:x-o}px(n,h)&&(h=c)}if(t.key===Q0&&(d&&Ea(t),c===-1?h=l:(h=Zo(n,{startingIndex:c,amount:o,disabledIndices:a}),i&&c+o>u&&(h=Zo(n,{startingIndex:c%o-o,amount:o,disabledIndices:a}))),px(n,h)&&(h=c)),r==="both"){const p=my(c/o);t.key===(s?gh:yh)&&(d&&Ea(t),c%o!==o-1?(h=Zo(n,{startingIndex:c,disabledIndices:a}),i&&bw(h,o,p)&&(h=Zo(n,{startingIndex:c-c%o-1,disabledIndices:a}))):i&&(h=Zo(n,{startingIndex:c-c%o-1,disabledIndices:a})),bw(h,o,p)&&(h=c)),t.key===(s?yh:gh)&&(d&&Ea(t),c%o!==0?(h=Zo(n,{startingIndex:c,decrement:!0,disabledIndices:a}),i&&bw(h,o,p)&&(h=Zo(n,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:a}))):i&&(h=Zo(n,{startingIndex:c+(o-c%o),decrement:!0,disabledIndices:a})),bw(h,o,p)&&(h=c));const g=my(u/o)===p;px(n,h)&&(i&&g?h=t.key===(s?yh:gh)?u:Zo(n,{startingIndex:c-c%o-1,disabledIndices:a}):h=c)}return h}function Ote(n,e,t){const r=[];let i=0;return n.forEach((s,o)=>{let{width:a,height:l}=s,u=!1;for(t&&(i=0);!u;){const c=[];for(let d=0;d<a;d++)for(let h=0;h<l;h++)c.push(i+d+h*e);i%e+a<=e&&c.every(d=>r[d]==null)?(c.forEach(d=>{r[d]=o}),u=!0):i++}}),[...r]}function Lte(n,e,t,r,i){if(n===-1)return-1;const s=t.indexOf(n),o=e[n];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return t.lastIndexOf(n)}}function Dte(n,e){return e.flatMap((t,r)=>n.includes(t)?[r]:[])}function K1(n,e,t){if(t)return t.includes(e);const r=n[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var es=typeof document<"u"?ie.useLayoutEffect:ie.useEffect;let PD=!1,Fte=0;const kD=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Fte++;function qte(){const[n,e]=ie.useState(()=>PD?kD():void 0);return es(()=>{n==null&&e(kD())},[]),ie.useEffect(()=>{PD=!0},[]),n}const jte=Dz.useId,GN=jte||qte;function Fz(){const n=new Map;return{emit(e,t){var r;(r=n.get(e))==null||r.forEach(i=>i(t))},on(e,t){n.set(e,[...n.get(e)||[],t])},off(e,t){var r;n.set(e,((r=n.get(e))==null?void 0:r.filter(i=>i!==t))||[])}}}const qz=ie.createContext(null),jz=ie.createContext(null),Y0=()=>{var n;return((n=ie.useContext(qz))==null?void 0:n.id)||null},bv=()=>ie.useContext(jz);function Bte(n){const e=GN(),t=bv(),i=Y0();return es(()=>{if(!e)return;const s={id:e,parentId:i};return t?.addNode(s),()=>{t?.removeNode(s)}},[t,e,i]),e}function Ute(n){const{children:e,id:t}=n,r=Y0();return S.jsx(qz.Provider,{value:ie.useMemo(()=>({id:t,parentId:r}),[t,r]),children:e})}function zte(n){const{children:e}=n,t=ie.useRef([]),r=ie.useCallback(o=>{t.current=[...t.current,o]},[]),i=ie.useCallback(o=>{t.current=t.current.filter(a=>a!==o)},[]),s=ie.useState(()=>Fz())[0];return S.jsx(jz.Provider,{value:ie.useMemo(()=>({nodesRef:t,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function Tm(n){return"data-floating-ui-"+n}function Ca(n){const e=ie.useRef(n);return es(()=>{e.current=n}),e}const OD=Tm("safe-polygon");function GM(n,e,t){return t&&!t0(t)?0:typeof n=="number"?n:n?.[e]}function Vte(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,dataRef:i,events:s,elements:o}=n,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:h=!0}=e,p=bv(),g=Y0(),x=Ca(u),b=Ca(l),y=Ca(t),E=ie.useRef(),T=ie.useRef(-1),I=ie.useRef(),N=ie.useRef(-1),k=ie.useRef(!0),q=ie.useRef(!1),L=ie.useRef(()=>{}),R=ie.useRef(!1),P=ie.useCallback(()=>{var re;const G=(re=i.current.openEvent)==null?void 0:re.type;return G?.includes("mouse")&&G!=="mousedown"},[i]);ie.useEffect(()=>{if(!a)return;function re(G){let{open:Y}=G;Y||(clearTimeout(T.current),clearTimeout(N.current),k.current=!0,R.current=!1)}return s.on("openchange",re),()=>{s.off("openchange",re)}},[a,s]),ie.useEffect(()=>{if(!a||!x.current||!t)return;function re(Y){P()&&r(!1,Y,"hover")}const G=qo(o.floating).documentElement;return G.addEventListener("mouseleave",re),()=>{G.removeEventListener("mouseleave",re)}},[o.floating,t,r,a,x,P]);const F=ie.useCallback(function(re,G,Y){G===void 0&&(G=!0),Y===void 0&&(Y="hover");const te=GM(b.current,"close",E.current);te&&!I.current?(clearTimeout(T.current),T.current=window.setTimeout(()=>r(!1,re,Y),te)):G&&(clearTimeout(T.current),r(!1,re,Y))},[b,r]),z=Aa(()=>{L.current(),I.current=void 0}),V=Aa(()=>{if(q.current){const re=qo(o.floating).body;re.style.pointerEvents="",re.removeAttribute(OD),q.current=!1}}),W=Aa(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);ie.useEffect(()=>{if(!a)return;function re(Z){if(clearTimeout(T.current),k.current=!1,c&&!t0(E.current)||d>0&&!GM(b.current,"open"))return;const fe=GM(b.current,"open",E.current);fe?T.current=window.setTimeout(()=>{y.current||r(!0,Z,"hover")},fe):t||r(!0,Z,"hover")}function G(Z){if(W())return;L.current();const fe=qo(o.floating);if(clearTimeout(N.current),R.current=!1,x.current&&i.current.floatingContext){t||clearTimeout(T.current),I.current=x.current({...i.current.floatingContext,tree:p,x:Z.clientX,y:Z.clientY,onClose(){V(),z(),W()||F(Z,!0,"safe-polygon")}});const ce=I.current;fe.addEventListener("mousemove",ce),L.current=()=>{fe.removeEventListener("mousemove",ce)};return}(E.current==="touch"?!Fo(o.floating,Z.relatedTarget):!0)&&F(Z)}function Y(Z){W()||i.current.floatingContext&&(x.current==null||x.current({...i.current.floatingContext,tree:p,x:Z.clientX,y:Z.clientY,onClose(){V(),z(),W()||F(Z)}})(Z))}if(qi(o.domReference)){var te;const Z=o.domReference;return t&&Z.addEventListener("mouseleave",Y),(te=o.floating)==null||te.addEventListener("mouseleave",Y),h&&Z.addEventListener("mousemove",re,{once:!0}),Z.addEventListener("mouseenter",re),Z.addEventListener("mouseleave",G),()=>{var fe;t&&Z.removeEventListener("mouseleave",Y),(fe=o.floating)==null||fe.removeEventListener("mouseleave",Y),h&&Z.removeEventListener("mousemove",re),Z.removeEventListener("mouseenter",re),Z.removeEventListener("mouseleave",G)}}},[o,a,n,c,d,h,F,z,V,r,t,y,p,b,x,i,W]),es(()=>{var re;if(a&&t&&(re=x.current)!=null&&re.__options.blockPointerEvents&&P()){q.current=!0;const Y=o.floating;if(qi(o.domReference)&&Y){var G;const te=qo(o.floating).body;te.setAttribute(OD,"");const Z=o.domReference,fe=p==null||(G=p.nodesRef.current.find(ge=>ge.id===g))==null||(G=G.context)==null?void 0:G.elements.floating;return fe&&(fe.style.pointerEvents=""),te.style.pointerEvents="none",Z.style.pointerEvents="auto",Y.style.pointerEvents="auto",()=>{te.style.pointerEvents="",Z.style.pointerEvents="",Y.style.pointerEvents=""}}}},[a,t,g,o,p,x,P]),es(()=>{t||(E.current=void 0,R.current=!1,z(),V())},[t,z,V]),ie.useEffect(()=>()=>{z(),clearTimeout(T.current),clearTimeout(N.current),V()},[a,o.domReference,z,V]);const Q=ie.useMemo(()=>{function re(G){E.current=G.pointerType}return{onPointerDown:re,onPointerEnter:re,onMouseMove(G){const{nativeEvent:Y}=G;function te(){!k.current&&!y.current&&r(!0,Y,"hover")}c&&!t0(E.current)||t||d===0||R.current&&G.movementX**2+G.movementY**2<2||(clearTimeout(N.current),E.current==="touch"?te():(R.current=!0,N.current=window.setTimeout(te,d)))}}},[c,r,t,y,d]),X=ie.useMemo(()=>({onMouseEnter(){clearTimeout(T.current)},onMouseLeave(re){W()||F(re.nativeEvent,!1)}}),[F,W]);return ie.useMemo(()=>a?{reference:Q,floating:X}:{},[a,Q,X])}let LD=0;function jp(n,e){e===void 0&&(e={});const{preventScroll:t=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(LD);const s=()=>n?.focus({preventScroll:t});i?s():LD=requestAnimationFrame(s)}function DD(n,e){var t;let r=[],i=(t=n.find(s=>s.id===e))==null?void 0:t.parentId;for(;i;){const s=n.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Uy(n,e){let t=n.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=t;for(;r.length;)r=n.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),t=t.concat(r);return t}function Wte(n,e){let t,r=-1;function i(s,o){o>r&&(t=s,r=o),Uy(n,s).forEach(l=>{i(l.id,o+1)})}return i(e,0),n.find(s=>s.id===t)}let Ng=new WeakMap,ww=new WeakSet,Sw={},XM=0;const $te=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Bz=n=>n&&(n.host||Bz(n.parentNode)),Hte=(n,e)=>e.map(t=>{if(n.contains(t))return t;const r=Bz(t);return n.contains(r)?r:null}).filter(t=>t!=null);function Gte(n,e,t,r){const i="data-floating-ui-inert",s=r?"inert":t?"aria-hidden":null,o=Hte(e,n),a=new Set,l=new Set(o),u=[];Sw[i]||(Sw[i]=new WeakMap);const c=Sw[i];o.forEach(d),h(e),a.clear();function d(p){!p||a.has(p)||(a.add(p),p.parentNode&&d(p.parentNode))}function h(p){!p||l.has(p)||[].forEach.call(p.children,g=>{if(Oh(g)!=="script")if(a.has(g))h(g);else{const x=s?g.getAttribute(s):null,b=x!==null&&x!=="false",y=Ng.get(g)||0,E=s?y+1:y,T=(c.get(g)||0)+1;Ng.set(g,E),c.set(g,T),u.push(g),E===1&&b&&ww.add(g),T===1&&g.setAttribute(i,""),!b&&s&&g.setAttribute(s,"true")}})}return XM++,()=>{u.forEach(p=>{const g=Ng.get(p)||0,x=s?g-1:g,b=(c.get(p)||0)-1;Ng.set(p,x),c.set(p,b),x||(!ww.has(p)&&s&&p.removeAttribute(s),ww.delete(p)),b||p.removeAttribute(i)}),XM--,XM||(Ng=new WeakMap,Ng=new WeakMap,ww=new WeakSet,Sw={})}}function FD(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=qo(n[0]).body;return Gte(n.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,t)}const X2=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Uz(n,e){const t=G2(n,X2());e==="prev"&&t.reverse();const r=t.indexOf(jc(qo(n)));return t.slice(r+1)[0]}function zz(){return Uz(document.body,"next")}function Vz(){return Uz(document.body,"prev")}function mx(n,e){const t=e||n.currentTarget,r=n.relatedTarget;return!r||!Fo(t,r)}function Xte(n){G2(n,X2()).forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")})}function qD(n){n.querySelectorAll("[data-tabindex]").forEach(t=>{const r=t.dataset.tabindex;delete t.dataset.tabindex,r?t.setAttribute("tabindex",r):t.removeAttribute("tabindex")})}const K2={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Kte;function jD(n){n.key==="Tab"&&(n.target,clearTimeout(Kte))}const lE=ie.forwardRef(function(e,t){const[r,i]=ie.useState();es(()=>(yz()&&i("button"),document.addEventListener("keydown",jD),()=>{document.removeEventListener("keydown",jD)}),[]);const s={ref:t,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Tm("focus-guard")]:"",style:K2};return S.jsx("span",{...e,...s})}),Wz=ie.createContext(null),BD=Tm("portal");function Qte(n){n===void 0&&(n={});const{id:e,root:t}=n,r=GN(),i=$z(),[s,o]=ie.useState(null),a=ie.useRef(null);return es(()=>()=>{s?.remove(),queueMicrotask(()=>{a.current=null})},[s]),es(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const u=document.createElement("div");u.id=r,u.setAttribute(BD,""),l.appendChild(u),a.current=u,o(u)},[e,r]),es(()=>{if(t===null||!r||a.current)return;let l=t||i?.portalNode;l&&!qi(l)&&(l=l.current),l=l||document.body;let u=null;e&&(u=document.createElement("div"),u.id=e,l.appendChild(u));const c=document.createElement("div");c.id=r,c.setAttribute(BD,""),l=u||l,l.appendChild(c),a.current=c,o(c)},[e,t,r,i]),s}function XN(n){const{children:e,id:t,root:r,preserveTabOrder:i=!0}=n,s=Qte({id:t,root:r}),[o,a]=ie.useState(null),l=ie.useRef(null),u=ie.useRef(null),c=ie.useRef(null),d=ie.useRef(null),h=o?.modal,p=o?.open,g=!!o&&!o.modal&&o.open&&i&&!!(r||s);return ie.useEffect(()=>{if(!s||!i||h)return;function x(b){s&&mx(b)&&(b.type==="focusin"?qD:Xte)(s)}return s.addEventListener("focusin",x,!0),s.addEventListener("focusout",x,!0),()=>{s.removeEventListener("focusin",x,!0),s.removeEventListener("focusout",x,!0)}},[s,i,h]),ie.useEffect(()=>{s&&(p||qD(s))},[p,s]),S.jsxs(Wz.Provider,{value:ie.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:c,afterInsideRef:d,portalNode:s,setFocusManagerState:a}),[i,s]),children:[g&&s&&S.jsx(lE,{"data-type":"outside",ref:l,onFocus:x=>{if(mx(x,s)){var b;(b=c.current)==null||b.focus()}else{const y=Vz()||o?.domReference;y?.focus()}}}),g&&s&&S.jsx("span",{"aria-owns":s.id,style:K2}),s&&M2.createPortal(e,s),g&&s&&S.jsx(lE,{"data-type":"outside",ref:u,onFocus:x=>{if(mx(x,s)){var b;(b=d.current)==null||b.focus()}else{const y=zz()||o?.domReference;y?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,x.nativeEvent,"focus-out")}}})]})}const $z=()=>ie.useContext(Wz),oR="data-floating-ui-focusable";function aR(n){return n?n.hasAttribute(oR)?n:n.querySelector("["+oR+"]")||n:null}const Yte=20;let Bp=[];function KM(n){Bp=Bp.filter(e=>e.isConnected),n&&Oh(n)!=="body"&&(Bp.push(n),Bp.length>Yte&&(Bp=Bp.slice(-20)))}function UD(){return Bp.slice().reverse().find(n=>n.isConnected)}function Jte(n){const e=X2();return tte(n,e)?n:G2(n,e)[0]||n}const Zte=ie.forwardRef(function(e,t){return S.jsx("button",{...e,type:"button",ref:t,tabIndex:-1,style:K2})});function Hz(n){const{context:e,children:t,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:a=!0,restoreFocus:l=!1,modal:u=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:d=!0,outsideElementsInert:h=!1}=n,{open:p,onOpenChange:g,events:x,dataRef:b,elements:{domReference:y,floating:E}}=e,T=Aa(()=>{var qe;return(qe=b.current.floatingContext)==null?void 0:qe.nodeId}),I=typeof o=="number"&&o<0,N=vz(y)&&I,k=$te(),q=k?s:!0,L=!q||k&&h,R=Ca(i),P=Ca(o),F=Ca(a),z=bv(),V=$z(),W=ie.useRef(null),Q=ie.useRef(null),X=ie.useRef(!1),re=ie.useRef(!1),G=ie.useRef(-1),Y=V!=null,te=aR(E),Z=Aa(function(qe){return qe===void 0&&(qe=te),qe?G2(qe,X2()):[]}),fe=Aa(qe=>{const Ue=Z(qe);return R.current.map(Ye=>y&&Ye==="reference"?y:te&&Ye==="floating"?te:Ue).filter(Boolean).flat()});ie.useEffect(()=>{if(r||!u)return;function qe(Ye){if(Ye.key==="Tab"){Fo(te,jc(qo(te)))&&Z().length===0&&!N&&Ea(Ye);const Ne=fe(),ke=oh(Ye);R.current[0]==="reference"&&ke===y&&(Ea(Ye),Ye.shiftKey?jp(Ne[Ne.length-1]):jp(Ne[1])),R.current[1]==="floating"&&ke===te&&Ye.shiftKey&&(Ea(Ye),jp(Ne[0]))}}const Ue=qo(te);return Ue.addEventListener("keydown",qe),()=>{Ue.removeEventListener("keydown",qe)}},[r,y,te,u,R,N,Z,fe]),ie.useEffect(()=>{if(r||!E)return;function qe(Ue){const Ye=oh(Ue),ke=Z().indexOf(Ye);ke!==-1&&(G.current=ke)}return E.addEventListener("focusin",qe),()=>{E.removeEventListener("focusin",qe)}},[r,E,Z]),ie.useEffect(()=>{if(r||!d)return;function qe(){re.current=!0,setTimeout(()=>{re.current=!1})}function Ue(Ye){const Ne=Ye.relatedTarget;queueMicrotask(()=>{const ke=T(),me=!(Fo(y,Ne)||Fo(E,Ne)||Fo(Ne,E)||Fo(V?.portalNode,Ne)||Ne!=null&&Ne.hasAttribute(Tm("focus-guard"))||z&&(Uy(z.nodesRef.current,ke).find(ht=>{var ct,Mt;return Fo((ct=ht.context)==null?void 0:ct.elements.floating,Ne)||Fo((Mt=ht.context)==null?void 0:Mt.elements.domReference,Ne)})||DD(z.nodesRef.current,ke).find(ht=>{var ct,Mt,xe;return[(ct=ht.context)==null?void 0:ct.elements.floating,aR((Mt=ht.context)==null?void 0:Mt.elements.floating)].includes(Ne)||((xe=ht.context)==null?void 0:xe.elements.domReference)===Ne})));if(l&&me&&jc(qo(te))===qo(te).body){Ys(te)&&te.focus();const ht=G.current,ct=Z(),Mt=ct[ht]||ct[ct.length-1]||te;Ys(Mt)&&Mt.focus()}(N||!u)&&Ne&&me&&!re.current&&Ne!==UD()&&(X.current=!0,g(!1,Ye,"focus-out"))})}if(E&&Ys(y))return y.addEventListener("focusout",Ue),y.addEventListener("pointerdown",qe),E.addEventListener("focusout",Ue),()=>{y.removeEventListener("focusout",Ue),y.removeEventListener("pointerdown",qe),E.removeEventListener("focusout",Ue)}},[r,y,E,te,u,z,V,g,d,l,Z,N,T]);const ge=ie.useRef(null),ce=ie.useRef(null),ye=RD([ge,V?.beforeInsideRef]),be=RD([ce,V?.afterInsideRef]);ie.useEffect(()=>{var qe;if(r||!E)return;const Ue=Array.from((V==null||(qe=V.portalNode)==null?void 0:qe.querySelectorAll("["+Tm("portal")+"]"))||[]),Ye=z&&!u?DD(z?.nodesRef.current,T()).map(me=>{var ht;return(ht=me.context)==null?void 0:ht.elements.floating}):[],Ne=[E,...Ue,...Ye,W.current,Q.current,ge.current,ce.current,V?.beforeOutsideRef.current,V?.afterOutsideRef.current,R.current.includes("reference")||N?y:null].filter(me=>me!=null),ke=u||N?FD(Ne,!L,L):FD(Ne);return()=>{ke()}},[r,y,E,u,R,V,N,q,L,z,T]),es(()=>{if(r||!Ys(te))return;const qe=qo(te),Ue=jc(qe);queueMicrotask(()=>{const Ye=fe(te),Ne=P.current,ke=(typeof Ne=="number"?Ye[Ne]:Ne.current)||te,me=Fo(te,Ue);!I&&!me&&p&&jp(ke,{preventScroll:ke===te})})},[r,p,te,I,fe,P]),es(()=>{if(r||!te)return;let qe=!1;const Ue=qo(te),Ye=jc(Ue);let ke=b.current.openEvent;KM(Ye);function me(Mt){let{open:xe,reason:Te,event:Ae,nested:le}=Mt;xe&&(ke=Ae),Te==="escape-key"&&y&&KM(y),["hover","safe-polygon"].includes(Te)&&Ae.type==="mouseleave"&&(X.current=!0),Te==="outside-press"&&(le?(X.current=!1,qe=!0):X.current=!(gz(Ae)||UN(Ae)))}x.on("openchange",me);const ht=Ue.createElement("span");ht.setAttribute("tabindex","-1"),ht.setAttribute("aria-hidden","true"),Object.assign(ht.style,K2),Y&&y&&y.insertAdjacentElement("afterend",ht);function ct(){return typeof F.current=="boolean"?UD()||ht:F.current.current||ht}return()=>{x.off("openchange",me);const Mt=jc(Ue),xe=Fo(E,Mt)||z&&Uy(z.nodesRef.current,T()).some(le=>{var se;return Fo((se=le.context)==null?void 0:se.elements.floating,Mt)});(xe||ke&&["click","mousedown"].includes(ke.type))&&y&&KM(y);const Ae=ct();queueMicrotask(()=>{const le=Jte(Ae);F.current&&!X.current&&Ys(le)&&(!(le!==Mt&&Mt!==Ue.body)||xe)&&le.focus({preventScroll:qe}),ht.remove()})}},[r,E,te,F,b,x,z,Y,y,T]),ie.useEffect(()=>{queueMicrotask(()=>{X.current=!1})},[r]),es(()=>{if(!r&&V)return V.setFocusManagerState({modal:u,closeOnFocusOut:d,open:p,onOpenChange:g,domReference:y}),()=>{V.setFocusManagerState(null)}},[r,V,u,p,g,d,y]),es(()=>{if(r||!te||typeof MutationObserver!="function"||I)return;const qe=()=>{const Ye=te.getAttribute("tabindex"),Ne=Z(),ke=jc(qo(E)),me=Ne.indexOf(ke);me!==-1&&(G.current=me),R.current.includes("floating")||ke!==y&&Ne.length===0?Ye!=="0"&&te.setAttribute("tabindex","0"):Ye!=="-1"&&te.setAttribute("tabindex","-1")};qe();const Ue=new MutationObserver(qe);return Ue.observe(te,{childList:!0,subtree:!0,attributes:!0}),()=>{Ue.disconnect()}},[r,E,te,y,R,Z,I]);function Ee(qe){return r||!c||!u?null:S.jsx(Zte,{ref:qe==="start"?W:Q,onClick:Ue=>g(!1,Ue.nativeEvent),children:typeof c=="string"?c:"Dismiss"})}const Me=!r&&q&&(u?!N:!0)&&(Y||u);return S.jsxs(S.Fragment,{children:[Me&&S.jsx(lE,{"data-type":"inside",ref:ye,onFocus:qe=>{if(u){const Ye=fe();jp(i[0]==="reference"?Ye[0]:Ye[Ye.length-1])}else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(X.current=!1,mx(qe,V.portalNode)){const Ye=zz()||y;Ye?.focus()}else{var Ue;(Ue=V.beforeOutsideRef.current)==null||Ue.focus()}}}),!N&&Ee("start"),t,Ee("end"),Me&&S.jsx(lE,{"data-type":"inside",ref:be,onFocus:qe=>{if(u)jp(fe()[0]);else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(d&&(X.current=!0),mx(qe,V.portalNode)){const Ye=Vz()||y;Ye?.focus()}else{var Ue;(Ue=V.afterOutsideRef.current)==null||Ue.focus()}}})]})}let Ew=0;function ene(){const n=/iP(hone|ad|od)|iOS/.test(BN()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),n){var a,l;const u=((a=window.visualViewport)==null?void 0:a.offsetLeft)||0,c=((l=window.visualViewport)==null?void 0:l.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(c))+"px",left:-(s-Math.floor(u))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),n&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let zD=()=>{};const tne=ie.forwardRef(function(e,t){const{lockScroll:r=!1,...i}=e;return es(()=>{if(r)return Ew++,Ew===1&&(zD=ene()),()=>{Ew--,Ew===0&&zD()}},[r]),S.jsx("div",{ref:t,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function VD(n){return Ys(n.target)&&n.target.tagName==="BUTTON"}function WD(n){return zN(n)}function KN(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,dataRef:i,elements:{domReference:s}}=n,{enabled:o=!0,event:a="click",toggle:l=!0,ignoreMouse:u=!1,keyboardHandlers:c=!0,stickIfOpen:d=!0}=e,h=ie.useRef(),p=ie.useRef(!1),g=ie.useMemo(()=>({onPointerDown(x){h.current=x.pointerType},onMouseDown(x){const b=h.current;x.button===0&&a!=="click"&&(t0(b,!0)&&u||(t&&l&&(!(i.current.openEvent&&d)||i.current.openEvent.type==="mousedown")?r(!1,x.nativeEvent,"click"):(x.preventDefault(),r(!0,x.nativeEvent,"click"))))},onClick(x){const b=h.current;if(a==="mousedown"&&h.current){h.current=void 0;return}t0(b,!0)&&u||(t&&l&&(!(i.current.openEvent&&d)||i.current.openEvent.type==="click")?r(!1,x.nativeEvent,"click"):r(!0,x.nativeEvent,"click"))},onKeyDown(x){h.current=void 0,!(x.defaultPrevented||!c||VD(x))&&(x.key===" "&&!WD(s)&&(x.preventDefault(),p.current=!0),x.key==="Enter"&&r(!(t&&l),x.nativeEvent,"click"))},onKeyUp(x){x.defaultPrevented||!c||VD(x)||WD(s)||x.key===" "&&p.current&&(p.current=!1,r(!(t&&l),x.nativeEvent,"click"))}}),[i,s,a,u,c,r,t,d,l]);return ie.useMemo(()=>o?{reference:g}:{},[o,g])}const nne={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},rne={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},$D=n=>{var e,t;return{escapeKey:typeof n=="boolean"?n:(e=n?.escapeKey)!=null?e:!1,outsidePress:typeof n=="boolean"?n:(t=n?.outsidePress)!=null?t:!0}};function QN(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,elements:i,dataRef:s}=n,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p,capture:g}=e,x=bv(),b=Aa(typeof l=="function"?l:()=>!1),y=typeof l=="function"?b:l,E=ie.useRef(!1),T=ie.useRef(!1),{escapeKey:I,outsidePress:N}=$D(p),{escapeKey:k,outsidePress:q}=$D(g),L=ie.useRef(!1),R=Aa(Q=>{var X;if(!t||!o||!a||Q.key!=="Escape"||L.current)return;const re=(X=s.current.floatingContext)==null?void 0:X.nodeId,G=x?Uy(x.nodesRef.current,re):[];if(!I&&(Q.stopPropagation(),G.length>0)){let Y=!0;if(G.forEach(te=>{var Z;if((Z=te.context)!=null&&Z.open&&!te.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,Mee(Q)?Q.nativeEvent:Q,"escape-key")}),P=Aa(Q=>{var X;const re=()=>{var G;R(Q),(G=oh(Q))==null||G.removeEventListener("keydown",re)};(X=oh(Q))==null||X.addEventListener("keydown",re)}),F=Aa(Q=>{var X;const re=E.current;E.current=!1;const G=T.current;if(T.current=!1,u==="click"&&G||re||typeof y=="function"&&!y(Q))return;const Y=oh(Q),te="["+Tm("inert")+"]",Z=qo(i.floating).querySelectorAll(te);let fe=qi(Y)?Y:null;for(;fe&&!Wd(fe);){const be=tf(fe);if(Wd(be)||!qi(be))break;fe=be}if(Z.length&&qi(Y)&&!Iee(Y)&&!Fo(Y,i.floating)&&Array.from(Z).every(be=>!Fo(fe,be)))return;if(Ys(Y)&&W){const be=Wd(Y),Ee=lc(Y),Me=/auto|scroll/,qe=be||Me.test(Ee.overflowX),Ue=be||Me.test(Ee.overflowY),Ye=qe&&Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,Ne=Ue&&Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight,ke=Ee.direction==="rtl",me=Ne&&(ke?Q.offsetX<=Y.offsetWidth-Y.clientWidth:Q.offsetX>Y.clientWidth),ht=Ye&&Q.offsetY>Y.clientHeight;if(me||ht)return}const ge=(X=s.current.floatingContext)==null?void 0:X.nodeId,ce=x&&Uy(x.nodesRef.current,ge).some(be=>{var Ee;return VM(Q,(Ee=be.context)==null?void 0:Ee.elements.floating)});if(VM(Q,i.floating)||VM(Q,i.domReference)||ce)return;const ye=x?Uy(x.nodesRef.current,ge):[];if(ye.length>0){let be=!0;if(ye.forEach(Ee=>{var Me;if((Me=Ee.context)!=null&&Me.open&&!Ee.context.dataRef.current.__outsidePressBubbles){be=!1;return}}),!be)return}r(!1,Q,"outside-press")}),z=Aa(Q=>{var X;const re=()=>{var G;F(Q),(G=oh(Q))==null||G.removeEventListener(u,re)};(X=oh(Q))==null||X.addEventListener(u,re)});ie.useEffect(()=>{if(!t||!o)return;s.current.__escapeKeyBubbles=I,s.current.__outsidePressBubbles=N;let Q=-1;function X(Z){r(!1,Z,"ancestor-scroll")}function re(){window.clearTimeout(Q),L.current=!0}function G(){Q=window.setTimeout(()=>{L.current=!1},$2()?5:0)}const Y=qo(i.floating);a&&(Y.addEventListener("keydown",k?P:R,k),Y.addEventListener("compositionstart",re),Y.addEventListener("compositionend",G)),y&&Y.addEventListener(u,q?z:F,q);let te=[];return h&&(qi(i.domReference)&&(te=mh(i.domReference)),qi(i.floating)&&(te=te.concat(mh(i.floating))),!qi(i.reference)&&i.reference&&i.reference.contextElement&&(te=te.concat(mh(i.reference.contextElement)))),te=te.filter(Z=>{var fe;return Z!==((fe=Y.defaultView)==null?void 0:fe.visualViewport)}),te.forEach(Z=>{Z.addEventListener("scroll",X,{passive:!0})}),()=>{a&&(Y.removeEventListener("keydown",k?P:R,k),Y.removeEventListener("compositionstart",re),Y.removeEventListener("compositionend",G)),y&&Y.removeEventListener(u,q?z:F,q),te.forEach(Z=>{Z.removeEventListener("scroll",X)}),window.clearTimeout(Q)}},[s,i,a,y,u,t,r,h,o,I,N,R,k,P,F,q,z]),ie.useEffect(()=>{E.current=!1},[y,u]);const V=ie.useMemo(()=>({onKeyDown:R,...c&&{[nne[d]]:Q=>{r(!1,Q.nativeEvent,"reference-press")},...d!=="click"&&{onClick(Q){r(!1,Q.nativeEvent,"reference-press")}}}}),[R,r,c,d]),W=ie.useMemo(()=>({onKeyDown:R,onMouseDown(){T.current=!0},onMouseUp(){T.current=!0},[rne[u]]:()=>{E.current=!0}}),[R,u]);return ie.useMemo(()=>o?{reference:V,floating:W}:{},[o,V,W])}function ine(n){const{open:e=!1,onOpenChange:t,elements:r}=n,i=GN(),s=ie.useRef({}),[o]=ie.useState(()=>Fz()),a=Y0()!=null,[l,u]=ie.useState(r.reference),c=Aa((p,g,x)=>{s.current.openEvent=p?g:void 0,o.emit("openchange",{open:p,event:g,reason:x,nested:a}),t?.(p,g,x)}),d=ie.useMemo(()=>({setPositionReference:u}),[]),h=ie.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return ie.useMemo(()=>({dataRef:s,open:e,onOpenChange:c,elements:h,events:o,floatingId:i,refs:d}),[e,c,h,o,i,d])}function YN(n){n===void 0&&(n={});const{nodeId:e}=n,t=ine({...n,elements:{reference:null,floating:null,...n.elements}}),r=n.rootContext||t,i=r.elements,[s,o]=ie.useState(null),[a,l]=ie.useState(null),c=i?.domReference||s,d=ie.useRef(null),h=bv();es(()=>{c&&(d.current=c)},[c]);const p=Ate({...n,elements:{...i,...a&&{reference:a}}}),g=ie.useCallback(T=>{const I=qi(T)?{getBoundingClientRect:()=>T.getBoundingClientRect(),contextElement:T}:T;l(I),p.refs.setReference(I)},[p.refs]),x=ie.useCallback(T=>{(qi(T)||T===null)&&(d.current=T,o(T)),(qi(p.refs.reference.current)||p.refs.reference.current===null||T!==null&&!qi(T))&&p.refs.setReference(T)},[p.refs]),b=ie.useMemo(()=>({...p.refs,setReference:x,setPositionReference:g,domReference:d}),[p.refs,x,g]),y=ie.useMemo(()=>({...p.elements,domReference:c}),[p.elements,c]),E=ie.useMemo(()=>({...p,...r,refs:b,elements:y,nodeId:e}),[p,b,y,e,r]);return es(()=>{r.dataRef.current.floatingContext=E;const T=h?.nodesRef.current.find(I=>I.id===e);T&&(T.context=E)}),ie.useMemo(()=>({...p,context:E,refs:b,elements:y}),[p,b,y,E])}function sne(n,e){e===void 0&&(e={});const{open:t,onOpenChange:r,events:i,dataRef:s,elements:o}=n,{enabled:a=!0,visibleOnly:l=!0}=e,u=ie.useRef(!1),c=ie.useRef(),d=ie.useRef(!0);ie.useEffect(()=>{if(!a)return;const p=il(o.domReference);function g(){!t&&Ys(o.domReference)&&o.domReference===jc(qo(o.domReference))&&(u.current=!0)}function x(){d.current=!0}return p.addEventListener("blur",g),p.addEventListener("keydown",x,!0),()=>{p.removeEventListener("blur",g),p.removeEventListener("keydown",x,!0)}},[o.domReference,t,a]),ie.useEffect(()=>{if(!a)return;function p(g){let{reason:x}=g;(x==="reference-press"||x==="escape-key")&&(u.current=!0)}return i.on("openchange",p),()=>{i.off("openchange",p)}},[i,a]),ie.useEffect(()=>()=>{clearTimeout(c.current)},[]);const h=ie.useMemo(()=>({onPointerDown(p){UN(p.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(p){if(u.current)return;const g=oh(p.nativeEvent);if(l&&qi(g))try{if(yz()&&Eee())throw Error();if(!g.matches(":focus-visible"))return}catch{if(!d.current&&!zN(g))return}r(!0,p.nativeEvent,"focus")},onBlur(p){u.current=!1;const g=p.relatedTarget,x=p.nativeEvent,b=qi(g)&&g.hasAttribute(Tm("focus-guard"))&&g.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const E=jc(o.domReference?o.domReference.ownerDocument:document);!g&&E===o.domReference||Fo((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,E)||Fo(o.domReference,E)||b||r(!1,x,"focus")})}}),[s,o.domReference,r,l]);return ie.useMemo(()=>a?{reference:h}:{},[a,h])}const HD="active",GD="selected";function QM(n,e,t){const r=new Map,i=t==="item";let s=n;if(i&&n){const{[HD]:o,[GD]:a,...l}=n;s=l}return{...t==="floating"&&{tabIndex:-1,[oR]:""},...s,...e.map(o=>{const a=o?o[t]:null;return typeof a=="function"?n?a(n):null:a}).concat(n).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[HD,GD].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),o[u]=function(){for(var h,p=arguments.length,g=new Array(p),x=0;x<p;x++)g[x]=arguments[x];return(h=r.get(u))==null?void 0:h.map(b=>b(...g)).find(b=>b!==void 0)}}}else o[u]=c}),o),{})}}function JN(n){n===void 0&&(n=[]);const e=n.map(a=>a?.reference),t=n.map(a=>a?.floating),r=n.map(a=>a?.item),i=ie.useCallback(a=>QM(a,n,"reference"),e),s=ie.useCallback(a=>QM(a,n,"floating"),t),o=ie.useCallback(a=>QM(a,n,"item"),r);return ie.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Q2(n,e,t){switch(n){case"vertical":return e;case"horizontal":return t;default:return e||t}}function XD(n,e){return Q2(e,n===HN||n===Q0,n===gh||n===yh)}function YM(n,e,t){return Q2(e,n===Q0,t?n===gh:n===yh)||n==="Enter"||n===" "||n===""}function one(n,e,t){return Q2(e,t?n===gh:n===yh,n===Q0)}function KD(n,e,t){return Q2(e,t?n===yh:n===gh,n===HN)}function ane(n,e){const{open:t,onOpenChange:r,elements:i}=n,{listRef:s,activeIndex:o,onNavigate:a=()=>{},enabled:l=!0,selectedIndex:u=null,allowEscape:c=!1,loop:d=!1,nested:h=!1,rtl:p=!1,virtual:g=!1,focusItemOnOpen:x="auto",focusItemOnHover:b=!0,openOnArrowKeyDown:y=!0,disabledIndices:E=void 0,orientation:T="vertical",cols:I=1,scrollItemIntoView:N=!0,virtualItemRef:k,itemSizes:q,dense:L=!1}=e,R=aR(i.floating),P=Ca(R),F=Y0(),z=bv(),V=Aa(()=>{a(X.current===-1?null:X.current)}),W=vz(i.domReference),Q=ie.useRef(x),X=ie.useRef(u??-1),re=ie.useRef(null),G=ie.useRef(!0),Y=ie.useRef(V),te=ie.useRef(!!i.floating),Z=ie.useRef(t),fe=ie.useRef(!1),ge=ie.useRef(!1),ce=Ca(E),ye=Ca(t),be=Ca(N),Ee=Ca(u),[Me,qe]=ie.useState(),[Ue,Ye]=ie.useState(),Ne=Aa(()=>{function Te(se){g?(qe(se.id),z?.events.emit("virtualfocus",se),k&&(k.current=se)):jp(se,{sync:fe.current,preventScroll:!0})}const Ae=s.current[X.current];Ae&&Te(Ae),(fe.current?se=>se():requestAnimationFrame)(()=>{const se=s.current[X.current]||Ae;if(!se)return;Ae||Te(se);const Oe=be.current;Oe&&me&&(ge.current||!G.current)&&(se.scrollIntoView==null||se.scrollIntoView(typeof Oe=="boolean"?{block:"nearest",inline:"nearest"}:Oe))})});es(()=>{l&&(t&&i.floating?Q.current&&u!=null&&(ge.current=!0,X.current=u,V()):te.current&&(X.current=-1,Y.current()))},[l,t,i.floating,u,V]),es(()=>{if(l&&t&&i.floating)if(o==null){if(fe.current=!1,Ee.current!=null)return;if(te.current&&(X.current=-1,Ne()),(!Z.current||!te.current)&&Q.current&&(re.current!=null||Q.current===!0&&re.current==null)){let Te=0;const Ae=()=>{s.current[0]==null?(Te<2&&(Te?requestAnimationFrame:queueMicrotask)(Ae),Te++):(X.current=re.current==null||YM(re.current,T,p)||h?HM(s,ce.current):ND(s,ce.current),re.current=null,V())};Ae()}}else px(s,o)||(X.current=o,Ne(),ge.current=!1)},[l,t,i.floating,o,Ee,h,s,T,p,V,Ne,ce]),es(()=>{var Te;if(!l||i.floating||!z||g||!te.current)return;const Ae=z.nodesRef.current,le=(Te=Ae.find(Ce=>Ce.id===F))==null||(Te=Te.context)==null?void 0:Te.elements.floating,se=jc(qo(i.floating)),Oe=Ae.some(Ce=>Ce.context&&Fo(Ce.context.elements.floating,se));le&&!Oe&&G.current&&le.focus({preventScroll:!0})},[l,i.floating,z,F,g]),es(()=>{if(!l||!z||!g||F)return;function Te(Ae){Ye(Ae.id),k&&(k.current=Ae)}return z.events.on("virtualfocus",Te),()=>{z.events.off("virtualfocus",Te)}},[l,z,g,F,k]),es(()=>{Y.current=V,Z.current=t,te.current=!!i.floating}),es(()=>{t||(re.current=null)},[t]);const ke=o!=null,me=ie.useMemo(()=>{function Te(le){if(!t)return;const se=s.current.indexOf(le);se!==-1&&X.current!==se&&(X.current=se,V())}return{onFocus(le){let{currentTarget:se}=le;fe.current=!0,Te(se)},onClick:le=>{let{currentTarget:se}=le;return se.focus({preventScroll:!0})},...b&&{onMouseMove(le){let{currentTarget:se}=le;fe.current=!0,ge.current=!1,Te(se)},onPointerLeave(le){let{pointerType:se}=le;if(!(!G.current||se==="touch")&&(fe.current=!0,X.current=-1,V(),!g)){var Oe;(Oe=P.current)==null||Oe.focus({preventScroll:!0})}}}}},[t,P,b,s,V,g]),ht=Aa(Te=>{if(G.current=!1,fe.current=!0,Te.which===229||!ye.current&&Te.currentTarget===P.current)return;if(h&&KD(Te.key,T,p)){Ea(Te),r(!1,Te.nativeEvent,"list-navigation"),Ys(i.domReference)&&(g?z?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const Ae=X.current,le=HM(s,E),se=ND(s,E);if(W||(Te.key==="Home"&&(Ea(Te),X.current=le,V()),Te.key==="End"&&(Ea(Te),X.current=se,V())),I>1){const Oe=q||Array.from({length:s.current.length},()=>({width:1,height:1})),Ce=Ote(Oe,I,L),Ge=Ce.findIndex(Dt=>Dt!=null&&!K1(s.current,Dt,E)),at=Ce.reduce((Dt,Jt,Cn)=>Jt!=null&&!K1(s.current,Jt,E)?Cn:Dt,-1),Lt=Ce[kte({current:Ce.map(Dt=>Dt!=null?s.current[Dt]:null)},{event:Te,orientation:T,loop:d,rtl:p,cols:I,disabledIndices:Dte([...E||s.current.map((Dt,Jt)=>K1(s.current,Jt)?Jt:void 0),void 0],Ce),minIndex:Ge,maxIndex:at,prevIndex:Lte(X.current>se?le:X.current,Oe,Ce,I,Te.key===Q0?"bl":Te.key===(p?gh:yh)?"tr":"tl"),stopEvent:!0})];if(Lt!=null&&(X.current=Lt,V()),T==="both")return}if(XD(Te.key,T)){if(Ea(Te),t&&!g&&jc(Te.currentTarget.ownerDocument)===Te.currentTarget){X.current=YM(Te.key,T,p)?le:se,V();return}YM(Te.key,T,p)?d?X.current=Ae>=se?c&&Ae!==s.current.length?-1:le:Zo(s,{startingIndex:Ae,disabledIndices:E}):X.current=Math.min(se,Zo(s,{startingIndex:Ae,disabledIndices:E})):d?X.current=Ae<=le?c&&Ae!==-1?s.current.length:se:Zo(s,{startingIndex:Ae,decrement:!0,disabledIndices:E}):X.current=Math.max(le,Zo(s,{startingIndex:Ae,decrement:!0,disabledIndices:E})),px(s,X.current)&&(X.current=-1),V()}}),ct=ie.useMemo(()=>g&&t&&ke&&{"aria-activedescendant":Ue||Me},[g,t,ke,Ue,Me]),Mt=ie.useMemo(()=>({"aria-orientation":T==="both"?void 0:T,...W?{}:ct,onKeyDown:ht,onPointerMove(){G.current=!0}}),[ct,ht,T,W]),xe=ie.useMemo(()=>{function Te(le){x==="auto"&&gz(le.nativeEvent)&&(Q.current=!0)}function Ae(le){Q.current=x,x==="auto"&&UN(le.nativeEvent)&&(Q.current=!0)}return{...ct,onKeyDown(le){G.current=!1;const se=le.key.startsWith("Arrow"),Oe=["Home","End"].includes(le.key),Ce=se||Oe,Ge=one(le.key,T,p),at=KD(le.key,T,p),Lt=XD(le.key,T),Dt=(h?Ge:Lt)||le.key==="Enter"||le.key.trim()==="";if(g&&t){const hn=z?.nodesRef.current.find($t=>$t.parentId==null),vn=z&&hn?Wte(z.nodesRef.current,hn.id):null;if(Ce&&vn&&k){const $t=new KeyboardEvent("keydown",{key:le.key,bubbles:!0});if(Ge||at){var Jt,Cn;const un=((Jt=vn.context)==null?void 0:Jt.elements.domReference)===le.currentTarget,He=at&&!un?(Cn=vn.context)==null?void 0:Cn.elements.domReference:Ge?s.current.find(At=>At?.id===Me):null;He&&(Ea(le),He.dispatchEvent($t),Ye(void 0))}if((Lt||Oe)&&vn.context&&vn.context.open&&vn.parentId&&le.currentTarget!==vn.context.elements.domReference){var Vt;Ea(le),(Vt=vn.context.elements.domReference)==null||Vt.dispatchEvent($t);return}}return ht(le)}if(!(!t&&!y&&se)){if(Dt&&(re.current=h&&Lt?null:le.key),h){Ge&&(Ea(le),t?(X.current=HM(s,ce.current),V()):r(!0,le.nativeEvent,"list-navigation"));return}Lt&&(u!=null&&(X.current=u),Ea(le),!t&&y?r(!0,le.nativeEvent,"list-navigation"):ht(le),t&&V())}},onFocus(){t&&!g&&(X.current=-1,V())},onPointerDown:Ae,onPointerEnter:Ae,onMouseDown:Te,onClick:Te}},[Me,ct,ht,ce,x,s,h,V,r,t,y,T,p,u,z,g,k]);return ie.useMemo(()=>l?{reference:xe,floating:Mt,item:me}:{},[l,xe,Mt,me])}const QD=n=>n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function Pg(n,e){return typeof n=="function"?n(e):n}function lne(n,e){const[t,r]=ie.useState(n);return n&&!t&&r(!0),ie.useEffect(()=>{if(!n&&t){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[n,t,e]),t}function cne(n,e){e===void 0&&(e={});const{open:t,elements:{floating:r}}=n,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[a,l]=ie.useState("unmounted"),u=lne(t,o);return!u&&a==="close"&&l("unmounted"),es(()=>{if(r){if(t){l("initial");const c=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(c)}}l("close")}},[t,r]),{isMounted:u,status:a}}function ZN(n,e){e===void 0&&(e={});const{initial:t={opacity:0},open:r,close:i,common:s,duration:o=250}=e,a=n.placement,l=a.split("-")[0],u=ie.useMemo(()=>({side:l,placement:a}),[l,a]),c=typeof o=="number",d=(c?o:o.open)||0,h=(c?o:o.close)||0,[p,g]=ie.useState(()=>({...Pg(s,u),...Pg(t,u)})),{isMounted:x,status:b}=cne(n,{duration:o}),y=Ca(t),E=Ca(r),T=Ca(i),I=Ca(s);return es(()=>{const N=Pg(y.current,u),k=Pg(T.current,u),q=Pg(I.current,u),L=Pg(E.current,u)||Object.keys(N).reduce((R,P)=>(R[P]="",R),{});if(b==="initial"&&g(R=>({transitionProperty:R.transitionProperty,...q,...N})),b==="open"&&g({transitionProperty:Object.keys(L).map(QD).join(","),transitionDuration:d+"ms",...q,...L}),b==="close"){const R=k||N;g({transitionProperty:Object.keys(R).map(QD).join(","),transitionDuration:h+"ms",...q,...R})}},[h,T,y,E,I,d,b,u]),{isMounted:x,styles:p}}const une=ie.createContext({close(){}}),dne=Cr({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),fne=n=>{const e=Bt.c(55),{target:t,action:r,disabled:i,closeOnClick:s,delay:o,float:a,variant:l,tva:u,css:c,children:d}=n,h=r===void 0?"hover":r,p=i===void 0?!1:i,g=s===void 0?!1:s,x=o===void 0?100:o,b=u===void 0?dne:u,[y,E]=ie.useState(!1);let T;e[0]===Symbol.for("react.memo_cache_sentinel")?(T=[Oz(10),Lz({fallbackAxisSideDirection:"start"}),Cte()],e[0]=T):T=e[0];let I;e[1]!==a||e[2]!==y?(I={open:y,onOpenChange:E,placement:"top",whileElementsMounted:Pz,middleware:T,...a},e[1]=a,e[2]=y,e[3]=I):I=e[3];const{refs:N,floatingStyles:k,context:q}=YN(I),L=h==="hover";let R;e[4]!==x||e[5]!==L?(R={enabled:L,delay:x},e[4]=x,e[5]=L,e[6]=R):R=e[6];const P=Vte(q,R),F=h==="click";let z;e[7]!==F?(z={enabled:F},e[7]=F,e[8]=z):z=e[8];const V=KN(q,z),W=sne(q),Q=QN(q);let X;e[9]!==P||e[10]!==V||e[11]!==W||e[12]!==Q?(X=[P,V,W,Q],e[9]=P,e[10]=V,e[11]=W,e[12]=Q,e[13]=X):X=e[13];const{getReferenceProps:re,getFloatingProps:G}=JN(X),{isMounted:Y,styles:te}=ZN(q);let Z,fe,ge,ce,ye;if(e[14]!==c||e[15]!==p||e[16]!==k||e[17]!==re||e[18]!==Y||e[19]!==N.setFloating||e[20]!==N.setReference||e[21]!==te||e[22]!==t||e[23]!==b||e[24]!==l){const ke=b({mounted:Y,...l,css:c}).slots,me=N.setReference;let ht;e[30]!==re?(ht=re(),e[30]=re,e[31]=ht):ht=e[31],ye=S.jsx("button",{type:"button",ref:me,...ht,disabled:p,className:ke.target(),children:t}),Z=XN,fe=N.setFloating,e[32]!==k||e[33]!==te?(ge={...k,...te},e[32]=k,e[33]=te,e[34]=ge):ge=e[34],ce=ke.portal(),e[14]=c,e[15]=p,e[16]=k,e[17]=re,e[18]=Y,e[19]=N.setFloating,e[20]=N.setReference,e[21]=te,e[22]=t,e[23]=b,e[24]=l,e[25]=Z,e[26]=fe,e[27]=ge,e[28]=ce,e[29]=ye}else Z=e[25],fe=e[26],ge=e[27],ce=e[28],ye=e[29];let be;e[35]!==G?(be=G(),e[35]=G,e[36]=be):be=e[36];let Ee;e[37]!==g?(Ee=g?()=>{E(!1)}:void 0,e[37]=g,e[38]=Ee):Ee=e[38];let Me;e[39]===Symbol.for("react.memo_cache_sentinel")?(Me={close(){E(!1)}},e[39]=Me):Me=e[39];let qe;e[40]!==d?(qe=S.jsx(une.Provider,{value:Me,children:d}),e[40]=d,e[41]=qe):qe=e[41];let Ue;e[42]!==fe||e[43]!==ge||e[44]!==ce||e[45]!==be||e[46]!==Ee||e[47]!==qe?(Ue=S.jsx("div",{ref:fe,style:ge,className:ce,...be,onClick:Ee,children:qe}),e[42]=fe,e[43]=ge,e[44]=ce,e[45]=be,e[46]=Ee,e[47]=qe,e[48]=Ue):Ue=e[48];let Ye;e[49]!==Z||e[50]!==Ue?(Ye=S.jsx(Z,{children:Ue}),e[49]=Z,e[50]=Ue,e[51]=Ye):Ye=e[51];let Ne;return e[52]!==ye||e[53]!==Ye?(Ne=S.jsxs(S.Fragment,{children:[ye,Ye]}),e[52]=ye,e[53]=Ye,e[54]=Ne):Ne=e[54],Ne},Gz="icon-[system-uicons--menu-hamburger]",Xz=Cr({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),br=ie.memo(n=>{const e=Bt.c(12);let t,r,i,s,o;e[0]!==n?({icon:r,variant:o,tva:s,css:t,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5]);const a=s===void 0?Xz:s;let l;if(e[6]!==t||e[7]!==r||e[8]!==i||e[9]!==a||e[10]!==o){const u=a({...o,css:t}).slots;l=r?S.jsx("div",{className:u.base({css:[r]}),...i}):null,e[6]=t,e[7]=r,e[8]=i,e[9]=a,e[10]=o,e[11]=l}else l=e[11];return l}),hne=Cr({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded-sm","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),Bi=n=>{const e=Bt.c(42);let t,r,i,s,o,a,l;e[0]!==n?({icon:o,iconProps:i,children:t,variant:l,tva:a,css:r,...s}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7]);const u=o===void 0?Gz:o,c=a===void 0?hne:a;let d,h,p,g,x,b,y,E,T;if(e[8]!==r||e[9]!==u||e[10]!==i||e[11]!==s||e[12]!==c||e[13]!==l){const q=c({...l,css:r}).slots;h=zte,d=fne,g="click",e[23]!==u||e[24]!==i?(x=S.jsx(br,{icon:u,...i}),e[23]=u,e[24]=i,e[25]=x):x=e[25],b=100,e[26]===Symbol.for("react.memo_cache_sentinel")?(y={placement:"bottom-start"},e[26]=y):y=e[26],E=!0,T=s,p=q.base(),e[8]=r,e[9]=u,e[10]=i,e[11]=s,e[12]=c,e[13]=l,e[14]=d,e[15]=h,e[16]=p,e[17]=g,e[18]=x,e[19]=b,e[20]=y,e[21]=E,e[22]=T}else d=e[14],h=e[15],p=e[16],g=e[17],x=e[18],b=e[19],y=e[20],E=e[21],T=e[22];let I;e[27]!==t||e[28]!==p?(I=S.jsx("div",{className:p,children:t}),e[27]=t,e[28]=p,e[29]=I):I=e[29];let N;e[30]!==d||e[31]!==I||e[32]!==g||e[33]!==x||e[34]!==b||e[35]!==y||e[36]!==E||e[37]!==T?(N=S.jsx(d,{action:g,target:x,delay:b,float:y,closeOnClick:E,...T,children:I}),e[30]=d,e[31]=I,e[32]=g,e[33]=x,e[34]=b,e[35]=y,e[36]=E,e[37]=T,e[38]=N):N=e[38];let k;return e[39]!==h||e[40]!==N?(k=S.jsx(h,{children:N}),e[39]=h,e[40]=N,e[41]=k):k=e[41],k},Kz="icon-[svg-spinners--90-ring-with-bg]",pne=Cr({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded-sm","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),J0=n=>{const e=Bt.c(30);let t,r,i,s,o,a,l,u,c,d,h;e[0]!==n?({iconEnabled:s,iconDisabled:i,iconLoading:l,disabled:u,loading:c,onClick:o,variant:h,tva:d,css:r,children:t,...a}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=h):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11]);const p=l===void 0?Kz:l,g=u===void 0?!1:u,x=c===void 0?!1:c,b=d===void 0?pne:d;let y;e[12]!==r||e[13]!==g||e[14]!==x||e[15]!==b||e[16]!==h?(y=b({disabled:g,loading:x,...h,css:r}).slots.base(),e[12]=r,e[13]=g,e[14]=x,e[15]=b,e[16]=h,e[17]=y):y=e[17];const E=g?void 0:o;let T;e[18]!==g||e[19]!==i||e[20]!==s||e[21]!==p||e[22]!==x?(T=g?S.jsx(br,{icon:x?p:i??s}):S.jsx(br,{icon:x?p:s}),e[18]=g,e[19]=i,e[20]=s,e[21]=p,e[22]=x,e[23]=T):T=e[23];let I;return e[24]!==t||e[25]!==a||e[26]!==y||e[27]!==E||e[28]!==T?(I=S.jsxs("div",{className:y,onClick:E,...a,children:[T,t]}),e[24]=t,e[25]=a,e[26]=y,e[27]=E,e[28]=T,e[29]=I):I=e[29],I},eP="icon-[iconamoon--close-light]",Y2=ie.createContext(void 0),mne=Cr({slot:{base:["bg-slate-400/75","backdrop-blur-xs","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded-lg","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),qm=n=>{const e=Bt.c(43),{target:t,icon:r,textTitle:i,disabled:s,defaultOpen:o,outside:a,variant:l,css:u,tva:c,children:d}=n,h=s===void 0?!1:s,p=o===void 0?!1:o,g=a===void 0?!1:a,x=c===void 0?mne:c,[b,y]=ie.useState(p),E=Bte();let T;e[0]!==b||e[1]!==E?(T={nodeId:E,open:b,onOpenChange:y},e[0]=b,e[1]=E,e[2]=T):T=e[2];const{refs:I,context:N}=YN(T),k=KN(N);let q;e[3]!==g?(q={outsidePress:g},e[3]=g,e[4]=q):q=e[4];const L=QN(N,q);let R;e[5]!==k||e[6]!==L?(R=[k,L],e[5]=k,e[6]=L,e[7]=R):R=e[7];const{getReferenceProps:P,getFloatingProps:F}=JN(R),{isMounted:z,styles:V}=ZN(N);let W,Q,X,re,G,Y;if(e[8]!==d||e[9]!==N||e[10]!==u||e[11]!==h||e[12]!==F||e[13]!==P||e[14]!==r||e[15]!==z||e[16]!==E||e[17]!==I.setFloating||e[18]!==I.setReference||e[19]!==V||e[20]!==t||e[21]!==i||e[22]!==x||e[23]!==l){const fe=x({disabled:h,...l,css:u}).slots;Q=Y2.Provider,e[30]===Symbol.for("react.memo_cache_sentinel")?(X={close(){y(!1)}},e[30]=X):X=e[30];const ge=I.setReference;let ce;e[31]!==h||e[32]!==P?(ce=P({disabled:h}),e[31]=h,e[32]=P,e[33]=ce):ce=e[33],re=S.jsx("div",{ref:ge,...ce,className:fe.target(),children:t}),W=Ute,G=E,Y=z&&S.jsx(S.Fragment,{children:S.jsx(XN,{children:S.jsx(tne,{lockScroll:!0,style:V,className:fe.base(),children:S.jsx(Hz,{context:N,children:S.jsxs("div",{ref:I.setFloating,...F(),className:fe.modal(),children:[S.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[S.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[r&&(q0(r)?S.jsx(br,{icon:r,variant:{size:"xl"}}):r),i&&S.jsx("div",{className:"text-lg font-semibold text-slate-700",children:i})]}),S.jsx(J0,{iconEnabled:eP,onClick:()=>y(!1)})]}),pee(d)?S.jsx(d,{close:()=>y(!1)}):d]})})})})}),e[8]=d,e[9]=N,e[10]=u,e[11]=h,e[12]=F,e[13]=P,e[14]=r,e[15]=z,e[16]=E,e[17]=I.setFloating,e[18]=I.setReference,e[19]=V,e[20]=t,e[21]=i,e[22]=x,e[23]=l,e[24]=W,e[25]=Q,e[26]=X,e[27]=re,e[28]=G,e[29]=Y}else W=e[24],Q=e[25],X=e[26],re=e[27],G=e[28],Y=e[29];let te;e[34]!==W||e[35]!==G||e[36]!==Y?(te=S.jsx(W,{id:G,children:Y}),e[34]=W,e[35]=G,e[36]=Y,e[37]=te):te=e[37];let Z;return e[38]!==Q||e[39]!==X||e[40]!==re||e[41]!==te?(Z=S.jsxs(Q,{value:X,children:[re,te]}),e[38]=Q,e[39]=X,e[40]=re,e[41]=te,e[42]=Z):Z=e[42],Z},gne=Cr({use:fz,slot:{},variant:{},defaults:{}}),Hr=n=>{const e=Bt.c(20);let t,r,i,s,o,a,l,u,c;e[0]!==n?({icon:r,iconProps:i,label:s,disabled:a,hidden:l,variant:c,tva:u,css:t,...o}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9]);const d=a===void 0?!1:a,h=l===void 0?!1:l,p=u===void 0?gne:u;let g;if(e[10]!==t||e[11]!==d||e[12]!==h||e[13]!==r||e[14]!==i||e[15]!==s||e[16]!==o||e[17]!==p||e[18]!==c){const x=p({...c,disabled:d,css:t}).slots;g=h?null:S.jsxs("div",{className:x.base(),children:[q0(r)?S.jsx(br,{icon:r,...i}):r,S.jsx(qm,{icon:r,target:s,disabled:d,css:{modal:["w-1/2"]},...o})]}),e[10]=t,e[11]=d,e[12]=h,e[13]=r,e[14]=i,e[15]=s,e[16]=o,e[17]=p,e[18]=c,e[19]=g}else g=e[19];return g},yne=Cr({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),ia=n=>{const e=Bt.c(12);let t,r,i,s;e[0]!==n?({variant:s,tva:i,css:t,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);const o=i===void 0?yne:i;let a;e[5]!==t||e[6]!==o||e[7]!==s?(a=o({...s,css:t}).slots.base(),e[5]=t,e[6]=o,e[7]=s,e[8]=a):a=e[8];let l;return e[9]!==r||e[10]!==a?(l=S.jsx("div",{className:a,...r}),e[9]=r,e[10]=a,e[11]=l):l=e[11],l},vne="icon-[material-symbols-light--check-small]",_ne="icon-[material-symbols-light--close-small]",xne="icon-[material-symbols-light--check-indeterminate-small]",bne=Cr({use:Xz,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),J2=n=>{const e=Bt.c(18);let t,r,i,s,o,a;e[0]!==n?({value:a,checkIcon:r,unCheckIcon:i,undefinedIcon:s,tva:o,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6]);const l=r===void 0?vne:r,u=i===void 0?_ne:i,c=s===void 0?xne:s,d=o===void 0?bne:o;if(a==null){let x;return e[7]!==t||e[8]!==d||e[9]!==c?(x=S.jsx(br,{icon:c,tva:d,...t}),e[7]=t,e[8]=d,e[9]=c,e[10]=x):x=e[10],x}const h=a?l:u;let p;e[11]!==d||e[12]!==a?(p=x=>d({...x,value:a}),e[11]=d,e[12]=a,e[13]=p):p=e[13];let g;return e[14]!==t||e[15]!==h||e[16]!==p?(g=S.jsx(br,{icon:h,tva:p,...t}),e[14]=t,e[15]=h,e[16]=p,e[17]=g):g=e[17],g},wne=Cr({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-hidden","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:rtl:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),Qz=n=>{const e=Bt.c(30);let t,r,i,s,o,a;e[0]!==n?({value:o,onChange:r,variant:a,tva:s,css:t,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6]);const l=s===void 0?wne:s;let u,c,d;if(e[7]!==t||e[8]!==r||e[9]!==i||e[10]!==l||e[11]!==o||e[12]!==a){const x=l({...a,css:t}).slots;d=x.base();let b;e[16]!==r?(b=y=>{r(y.target.checked)},e[16]=r,e[17]=b):b=e[17],e[18]!==i||e[19]!==b||e[20]!==o?(c=S.jsx("input",{type:"checkbox",checked:o,className:"sr-only peer",onChange:b,...i}),e[18]=i,e[19]=b,e[20]=o,e[21]=c):c=e[21],u=x.switch(),e[7]=t,e[8]=r,e[9]=i,e[10]=l,e[11]=o,e[12]=a,e[13]=u,e[14]=c,e[15]=d}else u=e[13],c=e[14],d=e[15];let h;e[22]!==u?(h=S.jsx("div",{className:u}),e[22]=u,e[23]=h):h=e[23];let p;e[24]!==c||e[25]!==h?(p=S.jsxs("label",{children:[c,h]}),e[24]=c,e[25]=h,e[26]=p):p=e[26];let g;return e[27]!==d||e[28]!==p?(g=S.jsx("div",{className:d,children:p}),e[27]=d,e[28]=p,e[29]=g):g=e[29],g},Sne=Cr({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded-sm","transition-all","cursor-pointer"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["border","bg-slate-50","border-slate-300","hover:border-slate-400","text-slate-600","hover:text-slate-800","hover:bg-slate-100"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),Br=ie.memo(n=>{const e=Bt.c(33);let t,r,i,s,o,a,l,u,c,d;e[0]!==n?({iconEnabled:s,iconDisabled:i,iconLoading:u,iconProps:o,loading:a,variant:d,tva:c,css:r,children:t,...l}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=d):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],d=e[10]);const h=u===void 0?Kz:u,p=c===void 0?Sne:c;let g,x,b;if(e[11]!==r||e[12]!==l.disabled||e[13]!==p||e[14]!==d){const T=p({disabled:l.disabled,...d,css:r}).slots;let I,N;e[18]===Symbol.for("react.memo_cache_sentinel")?(N={size:"xl"},e[18]=N):N=e[18],I=N,g=I,x="button",b=T.base({disabled:l.disabled}),e[11]=r,e[12]=l.disabled,e[13]=p,e[14]=d,e[15]=g,e[16]=x,e[17]=b}else g=e[15],x=e[16],b=e[17];let y;e[19]!==i||e[20]!==s||e[21]!==h||e[22]!==o||e[23]!==g||e[24]!==a||e[25]!==l.disabled?(y=l.disabled?S.jsx(br,{icon:a===!0?h:i,variant:g,...o}):S.jsx(br,{icon:a===!0?h:s,variant:g,...o}),e[19]=i,e[20]=s,e[21]=h,e[22]=o,e[23]=g,e[24]=a,e[25]=l.disabled,e[26]=y):y=e[26];let E;return e[27]!==t||e[28]!==l||e[29]!==x||e[30]!==b||e[31]!==y?(E=S.jsxs("button",{type:x,className:b,...l,children:[y,t]}),e[27]=t,e[28]=l,e[29]=x,e[30]=b,e[31]=y,e[32]=E):E=e[32],E}),tP=ie.createContext({inline:!1}),Ene=Cr({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),Tne=n=>{const e=Bt.c(15),{inline:t,label:r,value:i,variant:s,tva:o,css:a}=n,l=o===void 0?Ene:o,u=ie.useContext(tP),c=t??u?.inline;let d,h,p;if(e[0]!==a||e[1]!==c||e[2]!==r||e[3]!==l||e[4]!==s){const b=l({inline:c,...s,css:a}).slots;h=b.base(),p=r?S.jsx("div",{className:b.label(),children:r}):null,d=b.value(),e[0]=a,e[1]=c,e[2]=r,e[3]=l,e[4]=s,e[5]=d,e[6]=h,e[7]=p}else d=e[5],h=e[6],p=e[7];let g;e[8]!==d||e[9]!==i?(g=S.jsx("div",{className:d,children:i}),e[8]=d,e[9]=i,e[10]=g):g=e[10];let x;return e[11]!==h||e[12]!==p||e[13]!==g?(x=S.jsxs("div",{className:h,children:[p,g]}),e[11]=h,e[12]=p,e[13]=g,e[14]=x):x=e[14],x},Mne=Cr({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),Yz=n=>{const e=Bt.c(28),{items:t,hidden:r,valueOfProps:i,entity:s,variant:o,tva:a,css:l,inline:u}=n;let c;e[0]!==r?(c=r===void 0?[]:r,e[0]=r,e[1]=c):c=e[1];const d=c,h=a===void 0?Mne:a,p=u===void 0?!1:u;let g,x,b;if(e[2]!==l||e[3]!==p||e[4]!==h||e[5]!==o){const I=h({inline:p,...o,css:l}).slots;g=tP.Provider,e[9]!==p?(b={inline:p},e[9]=p,e[10]=b):b=e[10],x=I.base(),e[2]=l,e[3]=p,e[4]=h,e[5]=o,e[6]=g,e[7]=x,e[8]=b}else g=e[6],x=e[7],b=e[8];let y;if(e[11]!==s||e[12]!==d||e[13]!==t||e[14]!==i){let I;e[16]!==d?(I=k=>{const{id:q}=k;return!d.includes(q)},e[16]=d,e[17]=I):I=e[17];let N;e[18]!==s||e[19]!==i?(N=k=>{const{id:q,render:L,...R}=k;return S.jsx(Tne,{value:S.jsx(L,{entity:s}),...i,...R},q)},e[18]=s,e[19]=i,e[20]=N):N=e[20],y=t.filter(I).map(N),e[11]=s,e[12]=d,e[13]=t,e[14]=i,e[15]=y}else y=e[15];let E;e[21]!==x||e[22]!==y?(E=S.jsx("div",{className:x,children:y}),e[21]=x,e[22]=y,e[23]=E):E=e[23];let T;return e[24]!==g||e[25]!==b||e[26]!==E?(T=S.jsx(g,{value:b,children:E}),e[24]=g,e[25]=b,e[26]=E,e[27]=T):T=e[27],T},Ine=Cr({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),YD="icon-[tabler--dots]",Ane=Cr({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),Cne=Cr({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded-sm","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),JM=n=>{const e=Bt.c(15),{pages:t,page:r,onPage:i,variant:s,tva:o,css:a}=n,l=o===void 0?Cne:o;let u,c,d;if(e[0]!==a||e[1]!==i||e[2]!==r||e[3]!==t||e[4]!==l||e[5]!==s){const g=l({...s,css:a}).slots;d=g.base(),u=g.list(),c=t.map((x,b)=>S.jsx("li",{className:g.page({current:r===x-1}),onClick:()=>i(x-1),children:x},`page-${x}-${b}`)),e[0]=a,e[1]=i,e[2]=r,e[3]=t,e[4]=l,e[5]=s,e[6]=u,e[7]=c,e[8]=d}else u=e[6],c=e[7],d=e[8];let h;e[9]!==u||e[10]!==c?(h=S.jsx("ul",{className:u,children:c}),e[9]=u,e[10]=c,e[11]=h):h=e[11];let p;return e[12]!==d||e[13]!==h?(p=S.jsx("nav",{className:d,children:h}),e[12]=d,e[13]=h,e[14]=p):p=e[14],p},Rne=Cr({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded-sm","border","border-slate-300","bg-white","shadow-lg","focus:outline-hidden"],item:["focus:outline-hidden","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),Jz=({items:n,icon:e,defaultValue:t,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:a,onChange:l,value:u,variant:c,tva:d=Rne,css:h})=>{const[p,g]=ie.useState(!1),[x,b]=ie.useState(null),[y,E]=ie.useState(n.findIndex(Y=>Y.id===t));ie.useEffect(()=>{E(n.findIndex(Y=>Y.id===u))},[u]);const{refs:T,floatingStyles:I,context:N}=YN({placement:"bottom-start",open:p,onOpenChange:g,whileElementsMounted:Pz,middleware:[Oz(5),Lz({padding:10}),Rte({apply({rects:Y,elements:te,availableHeight:Z}){Object.assign(te.floating.style,{maxHeight:`${Z}px`,minWidth:`${Y.reference.width}px`})},padding:10})]}),k=ie.useRef([]),q=ie.useRef(!1),L=KN(N,{event:"mousedown"}),R=QN(N),P=ane(N,{listRef:k,activeIndex:x,selectedIndex:y,onNavigate:b,loop:!0}),{getReferenceProps:F,getFloatingProps:z,getItemProps:V}=JN([R,P,L]),{isMounted:W,styles:Q}=ZN(N),X=Y=>{E(Y),g(!1);const te=n[Y];te&&o?.(te),a?.(te),l?.(te?.id)},re=y===null?void 0:n[y],G=d({disabled:s,...c,css:h}).slots;return S.jsxs(S.Fragment,{children:[S.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:T.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:F(),className:G.base(),children:S.jsxs("div",{className:G.input(),children:[e?S.jsx(br,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,re?S.jsx(r,{entity:re}):i||sl.rich("Select item"),S.jsx(br,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!p&&"text-slate-400",p&&"text-slate-600","group-hover:text-slate-600"]}})]})}),W&&S.jsx(XN,{children:S.jsx(Hz,{context:N,modal:!1,children:S.jsx("div",{ref:T.setFloating,style:{...I,...Q},className:G.popup(),...z(),children:n.map((Y,te)=>S.jsxs("div",{ref:Z=>{k.current[te]=Z},role:"option",tabIndex:te===x?0:-1,"aria-selected":te===y&&te===x,className:G.item({selected:te===y,active:te===x}),...V({onClick(){X(te)},onKeyDown(Z){Z.key==="Enter"&&(Z.preventDefault(),X(te)),Z.key===" "&&!q.current&&(Z.preventDefault(),X(te))}}),children:[S.jsx(r,{entity:Y}),te===y&&S.jsx(br,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},Y.id))})})})]})},Nne=n=>{const e=Bt.c(18);let t,r,i,s;e[0]!==n?({sizes:s,size:i,onSize:t,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);let o;e[5]!==s?(o=s===void 0?[5,15,30,50,100]:s,e[5]=s,e[6]=o):o=e[6];const a=o;let l;e[7]!==a?(l=a.map(Pne),e[7]=a,e[8]=l):l=e[8];const u=`${i}`,c=`${i}`;let d;e[9]!==t?(d=g=>{const{size:x}=g;return t(x)},e[9]=t,e[10]=d):d=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h={base:["px-8","py-1"],item:["px-8","py-1"]},e[11]=h):h=e[11];let p;return e[12]!==r||e[13]!==l||e[14]!==u||e[15]!==c||e[16]!==d?(p=S.jsx(Jz,{items:l,defaultValue:u,value:c,onItem:d,render:kne,css:h,...r}),e[12]=r,e[13]=l,e[14]=u,e[15]=c,e[16]=d,e[17]=p):p=e[17],p};function Pne(n){return{id:`${n}`,size:n}}function kne(n){const{entity:e}=n,{size:t}=e;return t}const JD=n=>{const e=Bt.c(44),{cursor:t,count:r,textTotal:i,onPage:s,onSize:o,variant:a,tva:l,css:u}=n,c=l===void 0?Ane:l;let d;const h=t.page,p=Math.ceil(r.filter/t.size);let g;e[0]!==t.page||e[1]!==p?(g=ree({page:h,total:p,siblings:1,boundaries:1}),e[0]=t.page,e[1]=p,e[2]=g):g=e[2],d=g;const x=d;let b,y,E;if(e[3]!==x.end||e[4]!==x.pages||e[5]!==x.start||e[6]!==x.total||e[7]!==x.type||e[8]!==u||e[9]!==t.page||e[10]!==s||e[11]!==c||e[12]!==a){const R=c({...a,css:u}).slots;y=R.base(),e[16]!==x.end||e[17]!==x.pages||e[18]!==x.start||e[19]!==x.total||e[20]!==x.type||e[21]!==t.page||e[22]!==s?(E=x.total>1?S.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(x.type)&&S.jsxs(S.Fragment,{children:[S.jsx(JM,{page:t.page,pages:x.start,onPage:s}),S.jsx(br,{icon:YD})]}),S.jsx(JM,{page:t.page,pages:x.pages,onPage:s}),["both","end"].includes(x.type)&&S.jsxs(S.Fragment,{children:[S.jsx(br,{icon:YD}),S.jsx(JM,{page:t.page,pages:x.end,onPage:s})]})]}):null,e[16]=x.end,e[17]=x.pages,e[18]=x.start,e[19]=x.total,e[20]=x.type,e[21]=t.page,e[22]=s,e[23]=E):E=e[23],b=R.sums(),e[3]=x.end,e[4]=x.pages,e[5]=x.start,e[6]=x.total,e[7]=x.type,e[8]=u,e[9]=t.page,e[10]=s,e[11]=c,e[12]=a,e[13]=b,e[14]=y,e[15]=E}else b=e[13],y=e[14],E=e[15];let T;e[24]!==i?(T=S.jsx("div",{children:i}),e[24]=i,e[25]=T):T=e[25];let I;e[26]!==r.filter?(I=S.jsx("div",{className:"font-bold",children:r.filter}),e[26]=r.filter,e[27]=I):I=e[27];let N;e[28]!==r.filter||e[29]!==r.where?(N=r.filter!==r.where&&S.jsxs(S.Fragment,{children:[S.jsx("div",{children:"/"}),S.jsx("div",{className:"font-semibold",children:r.where})]}),e[28]=r.filter,e[29]=r.where,e[30]=N):N=e[30];let k;e[31]!==I||e[32]!==N||e[33]!==b||e[34]!==T?(k=S.jsxs("div",{className:b,children:[T,I,N]}),e[31]=I,e[32]=N,e[33]=b,e[34]=T,e[35]=k):k=e[35];let q;e[36]!==t.size||e[37]!==o?(q=S.jsx(Nne,{size:t.size,onSize:o}),e[36]=t.size,e[37]=o,e[38]=q):q=e[38];let L;return e[39]!==k||e[40]!==q||e[41]!==y||e[42]!==E?(L=S.jsxs("div",{className:y,children:[E,k,q]}),e[39]=k,e[40]=q,e[41]=y,e[42]=E,e[43]=L):L=e[43],L},ZD="function",gy="64e10b34-2bf7-4616-9668-f99de5aa046e",One="get",Lne="has",Dne="set",{isArray:Q1}=Array;let{SharedArrayBuffer:cE,window:Fne}=globalThis,{notify:Zz,wait:e6,waitAsync:uE}=Atomics,t6=null;uE||(uE=n=>({value:new Promise(e=>{let t=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");t.onmessage=e,t.postMessage(n)})}));try{new cE(4)}catch{cE=ArrayBuffer;const e=new WeakMap;if(Fne){const t=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[gy];if(!Q1(o)){s.stopImmediatePropagation();const{id:a,sb:l}=o;t.get(a)(l)}};t6=function(s,...o){const a=s?.[gy];if(Q1(a)){const[l,u]=a;e.set(u,l),this.addEventListener("message",i)}return r.call(this,s,...o)},uE=s=>({value:new Promise(o=>{t.set(e.get(s),o)}).then(o=>{t.delete(e.get(s)),e.delete(s);for(let a=0;a<o.length;a++)s[a]=o[a];return"ok"})})}else{const t=(r,i)=>({[gy]:{id:r,sb:i}});Zz=r=>{postMessage(t(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[gy];if(Q1(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:lR,Map:eF,Uint16Array:cR}=globalThis,{BYTES_PER_ELEMENT:tF}=lR,{BYTES_PER_ELEMENT:qne}=cR,jne=(n,e,t)=>{for(;e6(n,0,0,e)==="timed-out";)t()},uR=new WeakSet,ZM=new WeakMap,Bne={value:{then:n=>n()}};let Une=0;const nP=(n,{parse:e=JSON.parse,stringify:t=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!ZM.has(n)){const s=t6||n.postMessage,o=(h,...p)=>s.call(n,{[gy]:p},{transfer:h}),a=typeof i===ZD?i:i?.handler,l=i?.delay||42,u=new TextDecoder("utf-16"),c=(h,p)=>h?uE(p,0):(a?jne(p,l,a):e6(p,0),Bne);let d=!1;ZM.set(n,new Proxy(new eF,{[Lne]:(h,p)=>typeof p=="string"&&!p.startsWith("_"),[One]:(h,p)=>p==="then"?null:(...g)=>{const x=Une++;let b=new lR(new cE(tF*2)),y=[];uR.has(g.at(-1)||y)&&uR.delete(y=g.pop()),o(y,x,b,p,r?g.map(r):g);const E=n!==globalThis;let T=0;return d&&E&&(T=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${p}(...args) is awaited`)),c(E,b).value.then(()=>{clearTimeout(T);const I=b[1];if(!I)return;const N=qne*I;return b=new lR(new cE(N+N%tF)),o([],x,b),c(E,b).value.then(()=>e(u.decode(new cR(b.buffer).slice(0,I))))})},[Dne](h,p,g){const x=typeof g;if(x!==ZD)throw new Error(`Unable to assign ${p} as ${x}`);if(!h.size){const b=new eF;n.addEventListener("message",async y=>{const E=y.data?.[gy];if(Q1(E)){y.stopImmediatePropagation();const[T,I,...N]=E;let k;if(N.length){const[q,L]=N;if(h.has(q)){d=!0;try{const R=await h.get(q)(...L);if(R!==void 0){const P=t(r?r(R):R);b.set(T,P),I[1]=P.length}}catch(R){k=R}finally{d=!1}}else k=new Error(`Unsupported action: ${q}`);I[0]=1}else{const q=b.get(T);b.delete(T);for(let L=new cR(I.buffer),R=0;R<q.length;R++)L[R]=q.charCodeAt(R)}if(Zz(I,0),k)throw k}})}return!!h.set(p,g)}}))}return ZM.get(n)};nP.transfer=(...n)=>(uR.add(n),n);var rP=(()=>{var n=import.meta.url;return function(e={}){var t,r=e,i,s,o=new Promise((A,C)=>{i=A,s=C}),a=typeof window=="object",l=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const u=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,u.debugModule("globalThis.location =",globalThis.location);var c=Object.assign({},r),d="./this.program",h="";function p(A){return r.locateFile?r.locateFile(A,h):h+A}var g,x;(a||l)&&(l?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),n&&(h=n),h.startsWith("blob:")?h="":h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(x=A=>{var C=new XMLHttpRequest;return C.open("GET",A,!1),C.responseType="arraybuffer",C.send(null),new Uint8Array(C.response)}),g=A=>fetch(A,{credentials:"same-origin"}).then(C=>C.ok?C.arrayBuffer():Promise.reject(new Error(C.status+" : "+C.url))));var b=r.print||console.log.bind(console),y=r.printErr||console.error.bind(console);Object.assign(r,c),c=null,r.arguments&&r.arguments,r.thisProgram&&(d=r.thisProgram);var E=r.wasmBinary,T,I=!1,N,k,q,L,R,P;function F(){var A=T.buffer;r.HEAP8=N=new Int8Array(A),r.HEAP16=q=new Int16Array(A),r.HEAPU8=k=new Uint8Array(A),r.HEAPU16=new Uint16Array(A),r.HEAP32=L=new Int32Array(A),r.HEAPU32=R=new Uint32Array(A),r.HEAPF32=new Float32Array(A),r.HEAPF64=new Float64Array(A),r.HEAP64=P=new BigInt64Array(A),r.HEAPU64=new BigUint64Array(A)}if(r.wasmMemory)T=r.wasmMemory;else{var z=r.INITIAL_MEMORY||0x1000000;T=new WebAssembly.Memory({initial:z/65536,maximum:32768})}F();var V=[],W=[],Q=[];function X(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Y(r.preRun.shift());xe(V)}function re(){!r.noFSInit&&!ee.initialized&&ee.init(),ee.ignorePermissions=!1,xe(W)}function G(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Z(r.postRun.shift());xe(Q)}function Y(A){V.unshift(A)}function te(A){W.unshift(A)}function Z(A){Q.unshift(A)}var fe=0,ge=null;function ce(A){return A}function ye(A){fe++,r.monitorRunDependencies?.(fe)}function be(A){if(fe--,r.monitorRunDependencies?.(fe),fe==0&&ge){var C=ge;ge=null,C()}}function Ee(A){r.onAbort?.(A),A="Aborted("+A+")",y(A),I=!0,A+=". Build with -sASSERTIONS for more info.";var C=new WebAssembly.RuntimeError(A);throw s(C),C}var Me="data:application/octet-stream;base64,",qe=A=>A.startsWith(Me);function Ue(){if(r.locateFile){var A="sqlite3.wasm";return qe(A)?A:p(A)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Ye;function Ne(A){if(A==Ye&&E)return new Uint8Array(E);if(x)return x(A);throw"both async and sync fetching of the wasm failed"}function ke(A){return E?Promise.resolve().then(()=>Ne(A)):g(A).then(C=>new Uint8Array(C),()=>Ne(A))}function me(A,C,B){return ke(A).then(U=>WebAssembly.instantiate(U,C)).then(B,U=>{y(`failed to asynchronously prepare wasm: ${U}`),Ee(U)})}function ht(A,C,B,U){return!A&&typeof WebAssembly.instantiateStreaming=="function"&&!qe(C)&&typeof fetch=="function"?fetch(C,{credentials:"same-origin"}).then(H=>{var oe=WebAssembly.instantiateStreaming(H,B);return oe.then(U,function(De){return y(`wasm streaming compile failed: ${De}`),y("falling back to ArrayBuffer instantiation"),me(C,B,U)})}):me(C,B,U)}function ct(){return{env:fu,wasi_snapshot_preview1:fu}}function Mt(){var A=ct();function C(U,H){return je=U.exports,te(je.__wasm_call_ctors),be(),je}ye();function B(U){C(U.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(A,C)}catch(U){y(`Module.instantiateWasm callback failed with error: ${U}`),s(U)}return Ye||(Ye=Ue()),ht(E,Ye,A,B).catch(s),{}}var xe=A=>{for(;A.length>0;)A.shift()(r)};r.noExitRuntime;var Te={isAbs:A=>A.charAt(0)==="/",splitPath:A=>{var C=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return C.exec(A).slice(1)},normalizeArray:(A,C)=>{for(var B=0,U=A.length-1;U>=0;U--){var H=A[U];H==="."?A.splice(U,1):H===".."?(A.splice(U,1),B++):B&&(A.splice(U,1),B--)}if(C)for(;B;B--)A.unshift("..");return A},normalize:A=>{var C=Te.isAbs(A),B=A.substr(-1)==="/";return A=Te.normalizeArray(A.split("/").filter(U=>!!U),!C).join("/"),!A&&!C&&(A="."),A&&B&&(A+="/"),(C?"/":"")+A},dirname:A=>{var C=Te.splitPath(A),B=C[0],U=C[1];return!B&&!U?".":(U&&(U=U.substr(0,U.length-1)),B+U)},basename:A=>{if(A==="/")return"/";A=Te.normalize(A),A=A.replace(/\/$/,"");var C=A.lastIndexOf("/");return C===-1?A:A.substr(C+1)},join:(...A)=>Te.normalize(A.join("/")),join2:(A,C)=>Te.normalize(A+"/"+C)},Ae=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return A=>crypto.getRandomValues(A);Ee("initRandomDevice")},le=A=>(le=Ae())(A),se={resolve:(...A)=>{for(var C="",B=!1,U=A.length-1;U>=-1&&!B;U--){var H=U>=0?A[U]:ee.cwd();if(typeof H!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!H)return"";C=H+"/"+C,B=Te.isAbs(H)}return C=Te.normalizeArray(C.split("/").filter(oe=>!!oe),!B).join("/"),(B?"/":"")+C||"."},relative:(A,C)=>{A=se.resolve(A).substr(1),C=se.resolve(C).substr(1);function B(xt){for(var zt=0;zt<xt.length&&xt[zt]==="";zt++);for(var Qt=xt.length-1;Qt>=0&&xt[Qt]==="";Qt--);return zt>Qt?[]:xt.slice(zt,Qt-zt+1)}for(var U=B(A.split("/")),H=B(C.split("/")),oe=Math.min(U.length,H.length),De=oe,Be=0;Be<oe;Be++)if(U[Be]!==H[Be]){De=Be;break}for(var Tt=[],Be=De;Be<U.length;Be++)Tt.push("..");return Tt=Tt.concat(H.slice(De)),Tt.join("/")}},Oe=typeof TextDecoder<"u"?new TextDecoder:void 0,Ce=(A,C,B)=>{for(var U=C+B,H=C;A[H]&&!(H>=U);)++H;if(H-C>16&&A.buffer&&Oe)return Oe.decode(A.subarray(C,H));for(var oe="";C<H;){var De=A[C++];if(!(De&128)){oe+=String.fromCharCode(De);continue}var Be=A[C++]&63;if((De&224)==192){oe+=String.fromCharCode((De&31)<<6|Be);continue}var Tt=A[C++]&63;if((De&240)==224?De=(De&15)<<12|Be<<6|Tt:De=(De&7)<<18|Be<<12|Tt<<6|A[C++]&63,De<65536)oe+=String.fromCharCode(De);else{var xt=De-65536;oe+=String.fromCharCode(55296|xt>>10,56320|xt&1023)}}return oe},Ge=[],at=A=>{for(var C=0,B=0;B<A.length;++B){var U=A.charCodeAt(B);U<=127?C++:U<=2047?C+=2:U>=55296&&U<=57343?(C+=4,++B):C+=3}return C},Lt=(A,C,B,U)=>{if(!(U>0))return 0;for(var H=B,oe=B+U-1,De=0;De<A.length;++De){var Be=A.charCodeAt(De);if(Be>=55296&&Be<=57343){var Tt=A.charCodeAt(++De);Be=65536+((Be&1023)<<10)|Tt&1023}if(Be<=127){if(B>=oe)break;C[B++]=Be}else if(Be<=2047){if(B+1>=oe)break;C[B++]=192|Be>>6,C[B++]=128|Be&63}else if(Be<=65535){if(B+2>=oe)break;C[B++]=224|Be>>12,C[B++]=128|Be>>6&63,C[B++]=128|Be&63}else{if(B+3>=oe)break;C[B++]=240|Be>>18,C[B++]=128|Be>>12&63,C[B++]=128|Be>>6&63,C[B++]=128|Be&63}}return C[B]=0,B-H};function Dt(A,C,B){var U=at(A)+1,H=new Array(U),oe=Lt(A,H,0,H.length);return H.length=oe,H}var Jt=()=>{if(!Ge.length){var A=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(A=window.prompt("Input: "),A!==null&&(A+=`
`)),!A)return null;Ge=Dt(A)}return Ge.shift()},Cn={ttys:[],init(){},shutdown(){},register(A,C){Cn.ttys[A]={input:[],output:[],ops:C},ee.registerDevice(A,Cn.stream_ops)},stream_ops:{open(A){var C=Cn.ttys[A.node.rdev];if(!C)throw new ee.ErrnoError(43);A.tty=C,A.seekable=!1},close(A){A.tty.ops.fsync(A.tty)},fsync(A){A.tty.ops.fsync(A.tty)},read(A,C,B,U,H){if(!A.tty||!A.tty.ops.get_char)throw new ee.ErrnoError(60);for(var oe=0,De=0;De<U;De++){var Be;try{Be=A.tty.ops.get_char(A.tty)}catch{throw new ee.ErrnoError(29)}if(Be===void 0&&oe===0)throw new ee.ErrnoError(6);if(Be==null)break;oe++,C[B+De]=Be}return oe&&(A.node.timestamp=Date.now()),oe},write(A,C,B,U,H){if(!A.tty||!A.tty.ops.put_char)throw new ee.ErrnoError(60);try{for(var oe=0;oe<U;oe++)A.tty.ops.put_char(A.tty,C[B+oe])}catch{throw new ee.ErrnoError(29)}return U&&(A.node.timestamp=Date.now()),oe}},default_tty_ops:{get_char(A){return Jt()},put_char(A,C){C===null||C===10?(b(Ce(A.output,0)),A.output=[]):C!=0&&A.output.push(C)},fsync(A){A.output&&A.output.length>0&&(b(Ce(A.output,0)),A.output=[])},ioctl_tcgets(A){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(A,C,B){return 0},ioctl_tiocgwinsz(A){return[24,80]}},default_tty1_ops:{put_char(A,C){C===null||C===10?(y(Ce(A.output,0)),A.output=[]):C!=0&&A.output.push(C)},fsync(A){A.output&&A.output.length>0&&(y(Ce(A.output,0)),A.output=[])}}},Vt=(A,C)=>(k.fill(0,A,A+C),A),hn=(A,C)=>Math.ceil(A/C)*C,vn=A=>{A=hn(A,65536);var C=Vh(65536,A);return C?Vt(C,A):0},$t={ops_table:null,mount(A){return $t.createNode(null,"/",16895,0)},createNode(A,C,B,U){if(ee.isBlkdev(B)||ee.isFIFO(B))throw new ee.ErrnoError(63);$t.ops_table||={dir:{node:{getattr:$t.node_ops.getattr,setattr:$t.node_ops.setattr,lookup:$t.node_ops.lookup,mknod:$t.node_ops.mknod,rename:$t.node_ops.rename,unlink:$t.node_ops.unlink,rmdir:$t.node_ops.rmdir,readdir:$t.node_ops.readdir,symlink:$t.node_ops.symlink},stream:{llseek:$t.stream_ops.llseek}},file:{node:{getattr:$t.node_ops.getattr,setattr:$t.node_ops.setattr},stream:{llseek:$t.stream_ops.llseek,read:$t.stream_ops.read,write:$t.stream_ops.write,allocate:$t.stream_ops.allocate,mmap:$t.stream_ops.mmap,msync:$t.stream_ops.msync}},link:{node:{getattr:$t.node_ops.getattr,setattr:$t.node_ops.setattr,readlink:$t.node_ops.readlink},stream:{}},chrdev:{node:{getattr:$t.node_ops.getattr,setattr:$t.node_ops.setattr},stream:ee.chrdev_stream_ops}};var H=ee.createNode(A,C,B,U);return ee.isDir(H.mode)?(H.node_ops=$t.ops_table.dir.node,H.stream_ops=$t.ops_table.dir.stream,H.contents={}):ee.isFile(H.mode)?(H.node_ops=$t.ops_table.file.node,H.stream_ops=$t.ops_table.file.stream,H.usedBytes=0,H.contents=null):ee.isLink(H.mode)?(H.node_ops=$t.ops_table.link.node,H.stream_ops=$t.ops_table.link.stream):ee.isChrdev(H.mode)&&(H.node_ops=$t.ops_table.chrdev.node,H.stream_ops=$t.ops_table.chrdev.stream),H.timestamp=Date.now(),A&&(A.contents[C]=H,A.timestamp=H.timestamp),H},getFileDataAsTypedArray(A){return A.contents?A.contents.subarray?A.contents.subarray(0,A.usedBytes):new Uint8Array(A.contents):new Uint8Array(0)},expandFileStorage(A,C){var B=A.contents?A.contents.length:0;if(!(B>=C)){var U=1024*1024;C=Math.max(C,B*(B<U?2:1.125)>>>0),B!=0&&(C=Math.max(C,256));var H=A.contents;A.contents=new Uint8Array(C),A.usedBytes>0&&A.contents.set(H.subarray(0,A.usedBytes),0)}},resizeFileStorage(A,C){if(A.usedBytes!=C)if(C==0)A.contents=null,A.usedBytes=0;else{var B=A.contents;A.contents=new Uint8Array(C),B&&A.contents.set(B.subarray(0,Math.min(C,A.usedBytes))),A.usedBytes=C}},node_ops:{getattr(A){var C={};return C.dev=ee.isChrdev(A.mode)?A.id:1,C.ino=A.id,C.mode=A.mode,C.nlink=1,C.uid=0,C.gid=0,C.rdev=A.rdev,ee.isDir(A.mode)?C.size=4096:ee.isFile(A.mode)?C.size=A.usedBytes:ee.isLink(A.mode)?C.size=A.link.length:C.size=0,C.atime=new Date(A.timestamp),C.mtime=new Date(A.timestamp),C.ctime=new Date(A.timestamp),C.blksize=4096,C.blocks=Math.ceil(C.size/C.blksize),C},setattr(A,C){C.mode!==void 0&&(A.mode=C.mode),C.timestamp!==void 0&&(A.timestamp=C.timestamp),C.size!==void 0&&$t.resizeFileStorage(A,C.size)},lookup(A,C){throw ee.genericErrors[44]},mknod(A,C,B,U){return $t.createNode(A,C,B,U)},rename(A,C,B){if(ee.isDir(A.mode)){var U;try{U=ee.lookupNode(C,B)}catch{}if(U)for(var H in U.contents)throw new ee.ErrnoError(55)}delete A.parent.contents[A.name],A.parent.timestamp=Date.now(),A.name=B,C.contents[B]=A,C.timestamp=A.parent.timestamp},unlink(A,C){delete A.contents[C],A.timestamp=Date.now()},rmdir(A,C){var B=ee.lookupNode(A,C);for(var U in B.contents)throw new ee.ErrnoError(55);delete A.contents[C],A.timestamp=Date.now()},readdir(A){var C=[".",".."];for(var B of Object.keys(A.contents))C.push(B);return C},symlink(A,C,B){var U=$t.createNode(A,C,41471,0);return U.link=B,U},readlink(A){if(!ee.isLink(A.mode))throw new ee.ErrnoError(28);return A.link}},stream_ops:{read(A,C,B,U,H){var oe=A.node.contents;if(H>=A.node.usedBytes)return 0;var De=Math.min(A.node.usedBytes-H,U);if(De>8&&oe.subarray)C.set(oe.subarray(H,H+De),B);else for(var Be=0;Be<De;Be++)C[B+Be]=oe[H+Be];return De},write(A,C,B,U,H,oe){if(C.buffer===N.buffer&&(oe=!1),!U)return 0;var De=A.node;if(De.timestamp=Date.now(),C.subarray&&(!De.contents||De.contents.subarray)){if(oe)return De.contents=C.subarray(B,B+U),De.usedBytes=U,U;if(De.usedBytes===0&&H===0)return De.contents=C.slice(B,B+U),De.usedBytes=U,U;if(H+U<=De.usedBytes)return De.contents.set(C.subarray(B,B+U),H),U}if($t.expandFileStorage(De,H+U),De.contents.subarray&&C.subarray)De.contents.set(C.subarray(B,B+U),H);else for(var Be=0;Be<U;Be++)De.contents[H+Be]=C[B+Be];return De.usedBytes=Math.max(De.usedBytes,H+U),U},llseek(A,C,B){var U=C;if(B===1?U+=A.position:B===2&&ee.isFile(A.node.mode)&&(U+=A.node.usedBytes),U<0)throw new ee.ErrnoError(28);return U},allocate(A,C,B){$t.expandFileStorage(A.node,C+B),A.node.usedBytes=Math.max(A.node.usedBytes,C+B)},mmap(A,C,B,U,H){if(!ee.isFile(A.node.mode))throw new ee.ErrnoError(43);var oe,De,Be=A.node.contents;if(!(H&2)&&Be&&Be.buffer===N.buffer)De=!1,oe=Be.byteOffset;else{if(De=!0,oe=vn(C),!oe)throw new ee.ErrnoError(48);Be&&((B>0||B+C<Be.length)&&(Be.subarray?Be=Be.subarray(B,B+C):Be=Array.prototype.slice.call(Be,B,B+C)),N.set(Be,oe))}return{ptr:oe,allocated:De}},msync(A,C,B,U,H){return $t.stream_ops.write(A,C,0,U,B,!1),0}}},un=(A,C,B,U)=>{var H=`al ${A}`;g(A).then(oe=>{C(new Uint8Array(oe)),H&&be()},oe=>{if(B)B();else throw`Loading data file "${A}" failed.`}),H&&ye()},He=(A,C,B,U,H,oe)=>{ee.createDataFile(A,C,B,U,H,oe)},At=r.preloadPlugins||[],on=(A,C,B,U)=>{typeof Browser<"u"&&Browser.init();var H=!1;return At.forEach(oe=>{H||oe.canHandle(C)&&(oe.handle(A,C,B,U),H=!0)}),H},$e=(A,C,B,U,H,oe,De,Be,Tt,xt)=>{var zt=C?se.resolve(Te.join2(A,C)):A;function Qt(mt){function rt(Ct){xt?.(),Be||He(A,C,Ct,U,H,Tt),oe?.(),be()}on(mt,zt,rt,()=>{De?.(),be()})||rt(mt)}ye(),typeof B=="string"?un(B,Qt,De):Qt(B)},Kt=A=>{var C={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},B=C[A];if(typeof B>"u")throw new Error(`Unknown file open mode: ${A}`);return B},_t=(A,C)=>{var B=0;return A&&(B|=365),C&&(B|=146),B},ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(A){this.name="ErrnoError",this.errno=A}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(A){this.node=A}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(A){this.shared.flags=A}get position(){return this.shared.position}set position(A){this.shared.position=A}},FSNode:class{constructor(A,C,B,U){A||(A=this),this.parent=A,this.mount=A.mount,this.mounted=null,this.id=ee.nextInode++,this.name=C,this.mode=B,this.node_ops={},this.stream_ops={},this.rdev=U,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(A){A?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(A){A?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return ee.isDir(this.mode)}get isDevice(){return ee.isChrdev(this.mode)}},lookupPath(A,C={}){if(A=se.resolve(A),!A)return{path:"",node:null};var B={follow_mount:!0,recurse_count:0};if(C=Object.assign(B,C),C.recurse_count>8)throw new ee.ErrnoError(32);for(var U=A.split("/").filter(Qt=>!!Qt),H=ee.root,oe="/",De=0;De<U.length;De++){var Be=De===U.length-1;if(Be&&C.parent)break;if(H=ee.lookupNode(H,U[De]),oe=Te.join2(oe,U[De]),ee.isMountpoint(H)&&(!Be||Be&&C.follow_mount)&&(H=H.mounted.root),!Be||C.follow)for(var Tt=0;ee.isLink(H.mode);){var xt=ee.readlink(oe);oe=se.resolve(Te.dirname(oe),xt);var zt=ee.lookupPath(oe,{recurse_count:C.recurse_count+1});if(H=zt.node,Tt++>40)throw new ee.ErrnoError(32)}}return{path:oe,node:H}},getPath(A){for(var C;;){if(ee.isRoot(A)){var B=A.mount.mountpoint;return C?B[B.length-1]!=="/"?`${B}/${C}`:B+C:B}C=C?`${A.name}/${C}`:A.name,A=A.parent}},hashName(A,C){for(var B=0,U=0;U<C.length;U++)B=(B<<5)-B+C.charCodeAt(U)|0;return(A+B>>>0)%ee.nameTable.length},hashAddNode(A){var C=ee.hashName(A.parent.id,A.name);A.name_next=ee.nameTable[C],ee.nameTable[C]=A},hashRemoveNode(A){var C=ee.hashName(A.parent.id,A.name);if(ee.nameTable[C]===A)ee.nameTable[C]=A.name_next;else for(var B=ee.nameTable[C];B;){if(B.name_next===A){B.name_next=A.name_next;break}B=B.name_next}},lookupNode(A,C){var B=ee.mayLookup(A);if(B)throw new ee.ErrnoError(B);for(var U=ee.hashName(A.id,C),H=ee.nameTable[U];H;H=H.name_next){var oe=H.name;if(H.parent.id===A.id&&oe===C)return H}return ee.lookup(A,C)},createNode(A,C,B,U){var H=new ee.FSNode(A,C,B,U);return ee.hashAddNode(H),H},destroyNode(A){ee.hashRemoveNode(A)},isRoot(A){return A===A.parent},isMountpoint(A){return!!A.mounted},isFile(A){return(A&61440)===32768},isDir(A){return(A&61440)===16384},isLink(A){return(A&61440)===40960},isChrdev(A){return(A&61440)===8192},isBlkdev(A){return(A&61440)===24576},isFIFO(A){return(A&61440)===4096},isSocket(A){return(A&49152)===49152},flagsToPermissionString(A){var C=["r","w","rw"][A&3];return A&512&&(C+="w"),C},nodePermissions(A,C){return ee.ignorePermissions?0:C.includes("r")&&!(A.mode&292)||C.includes("w")&&!(A.mode&146)||C.includes("x")&&!(A.mode&73)?2:0},mayLookup(A){if(!ee.isDir(A.mode))return 54;var C=ee.nodePermissions(A,"x");return C||(A.node_ops.lookup?0:2)},mayCreate(A,C){try{var B=ee.lookupNode(A,C);return 20}catch{}return ee.nodePermissions(A,"wx")},mayDelete(A,C,B){var U;try{U=ee.lookupNode(A,C)}catch(oe){return oe.errno}var H=ee.nodePermissions(A,"wx");if(H)return H;if(B){if(!ee.isDir(U.mode))return 54;if(ee.isRoot(U)||ee.getPath(U)===ee.cwd())return 10}else if(ee.isDir(U.mode))return 31;return 0},mayOpen(A,C){return A?ee.isLink(A.mode)?32:ee.isDir(A.mode)&&(ee.flagsToPermissionString(C)!=="r"||C&512)?31:ee.nodePermissions(A,ee.flagsToPermissionString(C)):44},MAX_OPEN_FDS:4096,nextfd(){for(var A=0;A<=ee.MAX_OPEN_FDS;A++)if(!ee.streams[A])return A;throw new ee.ErrnoError(33)},getStreamChecked(A){var C=ee.getStream(A);if(!C)throw new ee.ErrnoError(8);return C},getStream:A=>ee.streams[A],createStream(A,C=-1){return A=Object.assign(new ee.FSStream,A),C==-1&&(C=ee.nextfd()),A.fd=C,ee.streams[C]=A,A},closeStream(A){ee.streams[A]=null},dupStream(A,C=-1){var B=ee.createStream(A,C);return B.stream_ops?.dup?.(B),B},chrdev_stream_ops:{open(A){var C=ee.getDevice(A.node.rdev);A.stream_ops=C.stream_ops,A.stream_ops.open?.(A)},llseek(){throw new ee.ErrnoError(70)}},major:A=>A>>8,minor:A=>A&255,makedev:(A,C)=>A<<8|C,registerDevice(A,C){ee.devices[A]={stream_ops:C}},getDevice:A=>ee.devices[A],getMounts(A){for(var C=[],B=[A];B.length;){var U=B.pop();C.push(U),B.push(...U.mounts)}return C},syncfs(A,C){typeof A=="function"&&(C=A,A=!1),ee.syncFSRequests++,ee.syncFSRequests>1&&y(`warning: ${ee.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var B=ee.getMounts(ee.root.mount),U=0;function H(De){return ee.syncFSRequests--,C(De)}function oe(De){if(De)return oe.errored?void 0:(oe.errored=!0,H(De));++U>=B.length&&H(null)}B.forEach(De=>{if(!De.type.syncfs)return oe(null);De.type.syncfs(De,A,oe)})},mount(A,C,B){var U=B==="/",H=!B,oe;if(U&&ee.root)throw new ee.ErrnoError(10);if(!U&&!H){var De=ee.lookupPath(B,{follow_mount:!1});if(B=De.path,oe=De.node,ee.isMountpoint(oe))throw new ee.ErrnoError(10);if(!ee.isDir(oe.mode))throw new ee.ErrnoError(54)}var Be={type:A,opts:C,mountpoint:B,mounts:[]},Tt=A.mount(Be);return Tt.mount=Be,Be.root=Tt,U?ee.root=Tt:oe&&(oe.mounted=Be,oe.mount&&oe.mount.mounts.push(Be)),Tt},unmount(A){var C=ee.lookupPath(A,{follow_mount:!1});if(!ee.isMountpoint(C.node))throw new ee.ErrnoError(28);var B=C.node,U=B.mounted,H=ee.getMounts(U);Object.keys(ee.nameTable).forEach(De=>{for(var Be=ee.nameTable[De];Be;){var Tt=Be.name_next;H.includes(Be.mount)&&ee.destroyNode(Be),Be=Tt}}),B.mounted=null;var oe=B.mount.mounts.indexOf(U);B.mount.mounts.splice(oe,1)},lookup(A,C){return A.node_ops.lookup(A,C)},mknod(A,C,B){var U=ee.lookupPath(A,{parent:!0}),H=U.node,oe=Te.basename(A);if(!oe||oe==="."||oe==="..")throw new ee.ErrnoError(28);var De=ee.mayCreate(H,oe);if(De)throw new ee.ErrnoError(De);if(!H.node_ops.mknod)throw new ee.ErrnoError(63);return H.node_ops.mknod(H,oe,C,B)},create(A,C){return C=C!==void 0?C:438,C&=4095,C|=32768,ee.mknod(A,C,0)},mkdir(A,C){return C=C!==void 0?C:511,C&=1023,C|=16384,ee.mknod(A,C,0)},mkdirTree(A,C){for(var B=A.split("/"),U="",H=0;H<B.length;++H)if(B[H]){U+="/"+B[H];try{ee.mkdir(U,C)}catch(oe){if(oe.errno!=20)throw oe}}},mkdev(A,C,B){return typeof B>"u"&&(B=C,C=438),C|=8192,ee.mknod(A,C,B)},symlink(A,C){if(!se.resolve(A))throw new ee.ErrnoError(44);var B=ee.lookupPath(C,{parent:!0}),U=B.node;if(!U)throw new ee.ErrnoError(44);var H=Te.basename(C),oe=ee.mayCreate(U,H);if(oe)throw new ee.ErrnoError(oe);if(!U.node_ops.symlink)throw new ee.ErrnoError(63);return U.node_ops.symlink(U,H,A)},rename(A,C){var B=Te.dirname(A),U=Te.dirname(C),H=Te.basename(A),oe=Te.basename(C),De,Be,Tt;if(De=ee.lookupPath(A,{parent:!0}),Be=De.node,De=ee.lookupPath(C,{parent:!0}),Tt=De.node,!Be||!Tt)throw new ee.ErrnoError(44);if(Be.mount!==Tt.mount)throw new ee.ErrnoError(75);var xt=ee.lookupNode(Be,H),zt=se.relative(A,U);if(zt.charAt(0)!==".")throw new ee.ErrnoError(28);if(zt=se.relative(C,B),zt.charAt(0)!==".")throw new ee.ErrnoError(55);var Qt;try{Qt=ee.lookupNode(Tt,oe)}catch{}if(xt!==Qt){var mt=ee.isDir(xt.mode),rt=ee.mayDelete(Be,H,mt);if(rt)throw new ee.ErrnoError(rt);if(rt=Qt?ee.mayDelete(Tt,oe,mt):ee.mayCreate(Tt,oe),rt)throw new ee.ErrnoError(rt);if(!Be.node_ops.rename)throw new ee.ErrnoError(63);if(ee.isMountpoint(xt)||Qt&&ee.isMountpoint(Qt))throw new ee.ErrnoError(10);if(Tt!==Be&&(rt=ee.nodePermissions(Be,"w"),rt))throw new ee.ErrnoError(rt);ee.hashRemoveNode(xt);try{Be.node_ops.rename(xt,Tt,oe),xt.parent=Tt}catch(Ct){throw Ct}finally{ee.hashAddNode(xt)}}},rmdir(A){var C=ee.lookupPath(A,{parent:!0}),B=C.node,U=Te.basename(A),H=ee.lookupNode(B,U),oe=ee.mayDelete(B,U,!0);if(oe)throw new ee.ErrnoError(oe);if(!B.node_ops.rmdir)throw new ee.ErrnoError(63);if(ee.isMountpoint(H))throw new ee.ErrnoError(10);B.node_ops.rmdir(B,U),ee.destroyNode(H)},readdir(A){var C=ee.lookupPath(A,{follow:!0}),B=C.node;if(!B.node_ops.readdir)throw new ee.ErrnoError(54);return B.node_ops.readdir(B)},unlink(A){var C=ee.lookupPath(A,{parent:!0}),B=C.node;if(!B)throw new ee.ErrnoError(44);var U=Te.basename(A),H=ee.lookupNode(B,U),oe=ee.mayDelete(B,U,!1);if(oe)throw new ee.ErrnoError(oe);if(!B.node_ops.unlink)throw new ee.ErrnoError(63);if(ee.isMountpoint(H))throw new ee.ErrnoError(10);B.node_ops.unlink(B,U),ee.destroyNode(H)},readlink(A){var C=ee.lookupPath(A),B=C.node;if(!B)throw new ee.ErrnoError(44);if(!B.node_ops.readlink)throw new ee.ErrnoError(28);return se.resolve(ee.getPath(B.parent),B.node_ops.readlink(B))},stat(A,C){var B=ee.lookupPath(A,{follow:!C}),U=B.node;if(!U)throw new ee.ErrnoError(44);if(!U.node_ops.getattr)throw new ee.ErrnoError(63);return U.node_ops.getattr(U)},lstat(A){return ee.stat(A,!0)},chmod(A,C,B){var U;if(typeof A=="string"){var H=ee.lookupPath(A,{follow:!B});U=H.node}else U=A;if(!U.node_ops.setattr)throw new ee.ErrnoError(63);U.node_ops.setattr(U,{mode:C&4095|U.mode&-4096,timestamp:Date.now()})},lchmod(A,C){ee.chmod(A,C,!0)},fchmod(A,C){var B=ee.getStreamChecked(A);ee.chmod(B.node,C)},chown(A,C,B,U){var H;if(typeof A=="string"){var oe=ee.lookupPath(A,{follow:!U});H=oe.node}else H=A;if(!H.node_ops.setattr)throw new ee.ErrnoError(63);H.node_ops.setattr(H,{timestamp:Date.now()})},lchown(A,C,B){ee.chown(A,C,B,!0)},fchown(A,C,B){var U=ee.getStreamChecked(A);ee.chown(U.node,C,B)},truncate(A,C){if(C<0)throw new ee.ErrnoError(28);var B;if(typeof A=="string"){var U=ee.lookupPath(A,{follow:!0});B=U.node}else B=A;if(!B.node_ops.setattr)throw new ee.ErrnoError(63);if(ee.isDir(B.mode))throw new ee.ErrnoError(31);if(!ee.isFile(B.mode))throw new ee.ErrnoError(28);var H=ee.nodePermissions(B,"w");if(H)throw new ee.ErrnoError(H);B.node_ops.setattr(B,{size:C,timestamp:Date.now()})},ftruncate(A,C){var B=ee.getStreamChecked(A);if(!(B.flags&2097155))throw new ee.ErrnoError(28);ee.truncate(B.node,C)},utime(A,C,B){var U=ee.lookupPath(A,{follow:!0}),H=U.node;H.node_ops.setattr(H,{timestamp:Math.max(C,B)})},open(A,C,B){if(A==="")throw new ee.ErrnoError(44);C=typeof C=="string"?Kt(C):C,C&64?(B=typeof B>"u"?438:B,B=B&4095|32768):B=0;var U;if(typeof A=="object")U=A;else{A=Te.normalize(A);try{var H=ee.lookupPath(A,{follow:!(C&131072)});U=H.node}catch{}}var oe=!1;if(C&64)if(U){if(C&128)throw new ee.ErrnoError(20)}else U=ee.mknod(A,B,0),oe=!0;if(!U)throw new ee.ErrnoError(44);if(ee.isChrdev(U.mode)&&(C&=-513),C&65536&&!ee.isDir(U.mode))throw new ee.ErrnoError(54);if(!oe){var De=ee.mayOpen(U,C);if(De)throw new ee.ErrnoError(De)}C&512&&!oe&&ee.truncate(U,0),C&=-131713;var Be=ee.createStream({node:U,path:ee.getPath(U),flags:C,seekable:!0,position:0,stream_ops:U.stream_ops,ungotten:[],error:!1});return Be.stream_ops.open&&Be.stream_ops.open(Be),r.logReadFiles&&!(C&1)&&(ee.readFiles||(ee.readFiles={}),A in ee.readFiles||(ee.readFiles[A]=1)),Be},close(A){if(ee.isClosed(A))throw new ee.ErrnoError(8);A.getdents&&(A.getdents=null);try{A.stream_ops.close&&A.stream_ops.close(A)}catch(C){throw C}finally{ee.closeStream(A.fd)}A.fd=null},isClosed(A){return A.fd===null},llseek(A,C,B){if(ee.isClosed(A))throw new ee.ErrnoError(8);if(!A.seekable||!A.stream_ops.llseek)throw new ee.ErrnoError(70);if(B!=0&&B!=1&&B!=2)throw new ee.ErrnoError(28);return A.position=A.stream_ops.llseek(A,C,B),A.ungotten=[],A.position},read(A,C,B,U,H){if(U<0||H<0)throw new ee.ErrnoError(28);if(ee.isClosed(A))throw new ee.ErrnoError(8);if((A.flags&2097155)===1)throw new ee.ErrnoError(8);if(ee.isDir(A.node.mode))throw new ee.ErrnoError(31);if(!A.stream_ops.read)throw new ee.ErrnoError(28);var oe=typeof H<"u";if(!oe)H=A.position;else if(!A.seekable)throw new ee.ErrnoError(70);var De=A.stream_ops.read(A,C,B,U,H);return oe||(A.position+=De),De},write(A,C,B,U,H,oe){if(U<0||H<0)throw new ee.ErrnoError(28);if(ee.isClosed(A))throw new ee.ErrnoError(8);if(!(A.flags&2097155))throw new ee.ErrnoError(8);if(ee.isDir(A.node.mode))throw new ee.ErrnoError(31);if(!A.stream_ops.write)throw new ee.ErrnoError(28);A.seekable&&A.flags&1024&&ee.llseek(A,0,2);var De=typeof H<"u";if(!De)H=A.position;else if(!A.seekable)throw new ee.ErrnoError(70);var Be=A.stream_ops.write(A,C,B,U,H,oe);return De||(A.position+=Be),Be},allocate(A,C,B){if(ee.isClosed(A))throw new ee.ErrnoError(8);if(C<0||B<=0)throw new ee.ErrnoError(28);if(!(A.flags&2097155))throw new ee.ErrnoError(8);if(!ee.isFile(A.node.mode)&&!ee.isDir(A.node.mode))throw new ee.ErrnoError(43);if(!A.stream_ops.allocate)throw new ee.ErrnoError(138);A.stream_ops.allocate(A,C,B)},mmap(A,C,B,U,H){if(U&2&&!(H&2)&&(A.flags&2097155)!==2)throw new ee.ErrnoError(2);if((A.flags&2097155)===1)throw new ee.ErrnoError(2);if(!A.stream_ops.mmap)throw new ee.ErrnoError(43);if(!C)throw new ee.ErrnoError(28);return A.stream_ops.mmap(A,C,B,U,H)},msync(A,C,B,U,H){return A.stream_ops.msync?A.stream_ops.msync(A,C,B,U,H):0},ioctl(A,C,B){if(!A.stream_ops.ioctl)throw new ee.ErrnoError(59);return A.stream_ops.ioctl(A,C,B)},readFile(A,C={}){if(C.flags=C.flags||0,C.encoding=C.encoding||"binary",C.encoding!=="utf8"&&C.encoding!=="binary")throw new Error(`Invalid encoding type "${C.encoding}"`);var B,U=ee.open(A,C.flags),H=ee.stat(A),oe=H.size,De=new Uint8Array(oe);return ee.read(U,De,0,oe,0),C.encoding==="utf8"?B=Ce(De,0):C.encoding==="binary"&&(B=De),ee.close(U),B},writeFile(A,C,B={}){B.flags=B.flags||577;var U=ee.open(A,B.flags,B.mode);if(typeof C=="string"){var H=new Uint8Array(at(C)+1),oe=Lt(C,H,0,H.length);ee.write(U,H,0,oe,void 0,B.canOwn)}else if(ArrayBuffer.isView(C))ee.write(U,C,0,C.byteLength,void 0,B.canOwn);else throw new Error("Unsupported data type");ee.close(U)},cwd:()=>ee.currentPath,chdir(A){var C=ee.lookupPath(A,{follow:!0});if(C.node===null)throw new ee.ErrnoError(44);if(!ee.isDir(C.node.mode))throw new ee.ErrnoError(54);var B=ee.nodePermissions(C.node,"x");if(B)throw new ee.ErrnoError(B);ee.currentPath=C.path},createDefaultDirectories(){ee.mkdir("/tmp"),ee.mkdir("/home"),ee.mkdir("/home/web_user")},createDefaultDevices(){ee.mkdir("/dev"),ee.registerDevice(ee.makedev(1,3),{read:()=>0,write:(U,H,oe,De,Be)=>De}),ee.mkdev("/dev/null",ee.makedev(1,3)),Cn.register(ee.makedev(5,0),Cn.default_tty_ops),Cn.register(ee.makedev(6,0),Cn.default_tty1_ops),ee.mkdev("/dev/tty",ee.makedev(5,0)),ee.mkdev("/dev/tty1",ee.makedev(6,0));var A=new Uint8Array(1024),C=0,B=()=>(C===0&&(C=le(A).byteLength),A[--C]);ee.createDevice("/dev","random",B),ee.createDevice("/dev","urandom",B),ee.mkdir("/dev/shm"),ee.mkdir("/dev/shm/tmp")},createSpecialDirectories(){ee.mkdir("/proc");var A=ee.mkdir("/proc/self");ee.mkdir("/proc/self/fd"),ee.mount({mount(){var C=ee.createNode(A,"fd",16895,73);return C.node_ops={lookup(B,U){var H=+U,oe=ee.getStreamChecked(H),De={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>oe.path}};return De.parent=De,De}},C}},{},"/proc/self/fd")},createStandardStreams(A,C,B){A?ee.createDevice("/dev","stdin",A):ee.symlink("/dev/tty","/dev/stdin"),C?ee.createDevice("/dev","stdout",null,C):ee.symlink("/dev/tty","/dev/stdout"),B?ee.createDevice("/dev","stderr",null,B):ee.symlink("/dev/tty1","/dev/stderr"),ee.open("/dev/stdin",0),ee.open("/dev/stdout",1),ee.open("/dev/stderr",1)},staticInit(){[44].forEach(A=>{ee.genericErrors[A]=new ee.ErrnoError(A),ee.genericErrors[A].stack="<generic error, no stack>"}),ee.nameTable=new Array(4096),ee.mount($t,{},"/"),ee.createDefaultDirectories(),ee.createDefaultDevices(),ee.createSpecialDirectories(),ee.filesystems={MEMFS:$t}},init(A,C,B){ee.initialized=!0,A??=r.stdin,C??=r.stdout,B??=r.stderr,ee.createStandardStreams(A,C,B)},quit(){ee.initialized=!1;for(var A=0;A<ee.streams.length;A++){var C=ee.streams[A];C&&ee.close(C)}},findObject(A,C){var B=ee.analyzePath(A,C);return B.exists?B.object:null},analyzePath(A,C){try{var B=ee.lookupPath(A,{follow:!C});A=B.path}catch{}var U={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var B=ee.lookupPath(A,{parent:!0});U.parentExists=!0,U.parentPath=B.path,U.parentObject=B.node,U.name=Te.basename(A),B=ee.lookupPath(A,{follow:!C}),U.exists=!0,U.path=B.path,U.object=B.node,U.name=B.node.name,U.isRoot=B.path==="/"}catch(H){U.error=H.errno}return U},createPath(A,C,B,U){A=typeof A=="string"?A:ee.getPath(A);for(var H=C.split("/").reverse();H.length;){var oe=H.pop();if(oe){var De=Te.join2(A,oe);try{ee.mkdir(De)}catch{}A=De}}return De},createFile(A,C,B,U,H){var oe=Te.join2(typeof A=="string"?A:ee.getPath(A),C),De=_t(U,H);return ee.create(oe,De)},createDataFile(A,C,B,U,H,oe){var De=C;A&&(A=typeof A=="string"?A:ee.getPath(A),De=C?Te.join2(A,C):A);var Be=_t(U,H),Tt=ee.create(De,Be);if(B){if(typeof B=="string"){for(var xt=new Array(B.length),zt=0,Qt=B.length;zt<Qt;++zt)xt[zt]=B.charCodeAt(zt);B=xt}ee.chmod(Tt,Be|146);var mt=ee.open(Tt,577);ee.write(mt,B,0,B.length,0,oe),ee.close(mt),ee.chmod(Tt,Be)}},createDevice(A,C,B,U){var H=Te.join2(typeof A=="string"?A:ee.getPath(A),C),oe=_t(!!B,!!U);ee.createDevice.major||(ee.createDevice.major=64);var De=ee.makedev(ee.createDevice.major++,0);return ee.registerDevice(De,{open(Be){Be.seekable=!1},close(Be){U?.buffer?.length&&U(10)},read(Be,Tt,xt,zt,Qt){for(var mt=0,rt=0;rt<zt;rt++){var Ct;try{Ct=B()}catch{throw new ee.ErrnoError(29)}if(Ct===void 0&&mt===0)throw new ee.ErrnoError(6);if(Ct==null)break;mt++,Tt[xt+rt]=Ct}return mt&&(Be.node.timestamp=Date.now()),mt},write(Be,Tt,xt,zt,Qt){for(var mt=0;mt<zt;mt++)try{U(Tt[xt+mt])}catch{throw new ee.ErrnoError(29)}return zt&&(Be.node.timestamp=Date.now()),mt}}),ee.mkdev(H,oe,De)},forceLoadFile(A){if(A.isDevice||A.isFolder||A.link||A.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{A.contents=x(A.url),A.usedBytes=A.contents.length}catch{throw new ee.ErrnoError(29)}},createLazyFile(A,C,B,U,H){class oe{constructor(){this.lengthKnown=!1,this.chunks=[]}get(rt){if(!(rt>this.length-1||rt<0)){var Ct=rt%this.chunkSize,ze=rt/this.chunkSize|0;return this.getter(ze)[Ct]}}setDataGetter(rt){this.getter=rt}cacheLength(){var rt=new XMLHttpRequest;if(rt.open("HEAD",B,!1),rt.send(null),!(rt.status>=200&&rt.status<300||rt.status===304))throw new Error("Couldn't load "+B+". Status: "+rt.status);var Ct=Number(rt.getResponseHeader("Content-length")),ze,Qe=(ze=rt.getResponseHeader("Accept-Ranges"))&&ze==="bytes",Ze=(ze=rt.getResponseHeader("Content-Encoding"))&&ze==="gzip",wt=1024*1024;Qe||(wt=Ct);var St=(Et,dn)=>{if(Et>dn)throw new Error("invalid range ("+Et+", "+dn+") or no bytes requested!");if(dn>Ct-1)throw new Error("only "+Ct+" bytes available! programmer error!");var ve=new XMLHttpRequest;if(ve.open("GET",B,!1),Ct!==wt&&ve.setRequestHeader("Range","bytes="+Et+"-"+dn),ve.responseType="arraybuffer",ve.overrideMimeType&&ve.overrideMimeType("text/plain; charset=x-user-defined"),ve.send(null),!(ve.status>=200&&ve.status<300||ve.status===304))throw new Error("Couldn't load "+B+". Status: "+ve.status);return ve.response!==void 0?new Uint8Array(ve.response||[]):Dt(ve.responseText||"")},tt=this;tt.setDataGetter(Et=>{var dn=Et*wt,ve=(Et+1)*wt-1;if(ve=Math.min(ve,Ct-1),typeof tt.chunks[Et]>"u"&&(tt.chunks[Et]=St(dn,ve)),typeof tt.chunks[Et]>"u")throw new Error("doXHR failed!");return tt.chunks[Et]}),(Ze||!Ct)&&(wt=Ct=1,Ct=this.getter(0).length,wt=Ct,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Ct,this._chunkSize=wt,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!l)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var De=new oe,Be={isDevice:!1,contents:De}}else var Be={isDevice:!1,url:B};var Tt=ee.createFile(A,C,Be,U,H);Be.contents?Tt.contents=Be.contents:Be.url&&(Tt.contents=null,Tt.url=Be.url),Object.defineProperties(Tt,{usedBytes:{get:function(){return this.contents.length}}});var xt={},zt=Object.keys(Tt.stream_ops);zt.forEach(mt=>{var rt=Tt.stream_ops[mt];xt[mt]=(...Ct)=>(ee.forceLoadFile(Tt),rt(...Ct))});function Qt(mt,rt,Ct,ze,Qe){var Ze=mt.node.contents;if(Qe>=Ze.length)return 0;var wt=Math.min(Ze.length-Qe,ze);if(Ze.slice)for(var St=0;St<wt;St++)rt[Ct+St]=Ze[Qe+St];else for(var St=0;St<wt;St++)rt[Ct+St]=Ze.get(Qe+St);return wt}return xt.read=(mt,rt,Ct,ze,Qe)=>(ee.forceLoadFile(Tt),Qt(mt,rt,Ct,ze,Qe)),xt.mmap=(mt,rt,Ct,ze,Qe)=>{ee.forceLoadFile(Tt);var Ze=vn(rt);if(!Ze)throw new ee.ErrnoError(48);return Qt(mt,N,Ze,rt,Ct),{ptr:Ze,allocated:!0}},Tt.stream_ops=xt,Tt}},gn=(A,C)=>A?Ce(k,A,C):"",Ft={DEFAULT_POLLMASK:5,calculateAt(A,C,B){if(Te.isAbs(C))return C;var U;if(A===-100)U=ee.cwd();else{var H=Ft.getStreamFromFD(A);U=H.path}if(C.length==0){if(!B)throw new ee.ErrnoError(44);return U}return Te.join2(U,C)},doStat(A,C,B){var U=A(C);L[B>>2]=U.dev,L[B+4>>2]=U.mode,R[B+8>>2]=U.nlink,L[B+12>>2]=U.uid,L[B+16>>2]=U.gid,L[B+20>>2]=U.rdev,P[B+24>>3]=BigInt(U.size),L[B+32>>2]=4096,L[B+36>>2]=U.blocks;var H=U.atime.getTime(),oe=U.mtime.getTime(),De=U.ctime.getTime();return P[B+40>>3]=BigInt(Math.floor(H/1e3)),R[B+48>>2]=H%1e3*1e3*1e3,P[B+56>>3]=BigInt(Math.floor(oe/1e3)),R[B+64>>2]=oe%1e3*1e3*1e3,P[B+72>>3]=BigInt(Math.floor(De/1e3)),R[B+80>>2]=De%1e3*1e3*1e3,P[B+88>>3]=BigInt(U.ino),0},doMsync(A,C,B,U,H){if(!ee.isFile(C.node.mode))throw new ee.ErrnoError(43);if(U&2)return 0;var oe=k.slice(A,A+B);ee.msync(C,oe,H,B,U)},getStreamFromFD(A){var C=ee.getStreamChecked(A);return C},varargs:void 0,getStr(A){var C=gn(A);return C}};function Hn(A,C){try{return A=Ft.getStr(A),ee.chmod(A,C),0}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function Lr(A,C,B,U){try{if(C=Ft.getStr(C),C=Ft.calculateAt(A,C),B&-8)return-28;var H=ee.lookupPath(C,{follow:!0}),oe=H.node;if(!oe)return-44;var De="";return B&4&&(De+="r"),B&2&&(De+="w"),B&1&&(De+="x"),De&&ee.nodePermissions(oe,De)?-2:0}catch(Be){if(typeof ee>"u"||Be.name!=="ErrnoError")throw Be;return-Be.errno}}function ai(A,C){try{return ee.fchmod(A,C),0}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function gr(A,C,B){try{return ee.fchown(A,C,B),0}catch(U){if(typeof ee>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}function hi(){var A=L[+Ft.varargs>>2];return Ft.varargs+=4,A}var ui=hi;function Vl(A,C,B){Ft.varargs=B;try{var U=Ft.getStreamFromFD(A);switch(C){case 0:{var H=hi();if(H<0)return-28;for(;ee.streams[H];)H++;var oe;return oe=ee.dupStream(U,H),oe.fd}case 1:case 2:return 0;case 3:return U.flags;case 4:{var H=hi();return U.flags|=H,0}case 12:{var H=ui(),De=0;return q[H+De>>1]=2,0}case 13:case 14:return 0}return-28}catch(Be){if(typeof ee>"u"||Be.name!=="ErrnoError")throw Be;return-Be.errno}}function Fa(A,C){try{var B=Ft.getStreamFromFD(A);return Ft.doStat(ee.stat,B.path,C)}catch(U){if(typeof ee>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}var Wo=0x20000000000000,To=-0x20000000000000,Mo=A=>A<To||A>Wo?NaN:Number(A);function Io(A,C){C=Mo(C);try{return isNaN(C)?61:(ee.ftruncate(A,C),0)}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}var no=(A,C,B)=>Lt(A,k,C,B);function su(A,C){try{if(C===0)return-28;var B=ee.cwd(),U=at(B)+1;return C<U?-68:(no(B,A,C),U)}catch(H){if(typeof ee>"u"||H.name!=="ErrnoError")throw H;return-H.errno}}function Wl(A,C,B){Ft.varargs=B;try{var U=Ft.getStreamFromFD(A);switch(C){case 21509:return U.tty?0:-59;case 21505:{if(!U.tty)return-59;if(U.tty.ops.ioctl_tcgets){var H=U.tty.ops.ioctl_tcgets(U),oe=ui();L[oe>>2]=H.c_iflag||0,L[oe+4>>2]=H.c_oflag||0,L[oe+8>>2]=H.c_cflag||0,L[oe+12>>2]=H.c_lflag||0;for(var De=0;De<32;De++)N[oe+De+17]=H.c_cc[De]||0;return 0}return 0}case 21510:case 21511:case 21512:return U.tty?0:-59;case 21506:case 21507:case 21508:{if(!U.tty)return-59;if(U.tty.ops.ioctl_tcsets){for(var oe=ui(),Be=L[oe>>2],Tt=L[oe+4>>2],xt=L[oe+8>>2],zt=L[oe+12>>2],Qt=[],De=0;De<32;De++)Qt.push(N[oe+De+17]);return U.tty.ops.ioctl_tcsets(U.tty,C,{c_iflag:Be,c_oflag:Tt,c_cflag:xt,c_lflag:zt,c_cc:Qt})}return 0}case 21519:{if(!U.tty)return-59;var oe=ui();return L[oe>>2]=0,0}case 21520:return U.tty?-28:-59;case 21531:{var oe=ui();return ee.ioctl(U,C,oe)}case 21523:{if(!U.tty)return-59;if(U.tty.ops.ioctl_tiocgwinsz){var mt=U.tty.ops.ioctl_tiocgwinsz(U.tty),oe=ui();q[oe>>1]=mt[0],q[oe+2>>1]=mt[1]}return 0}case 21524:return U.tty?0:-59;case 21515:return U.tty?0:-59;default:return-28}}catch(rt){if(typeof ee>"u"||rt.name!=="ErrnoError")throw rt;return-rt.errno}}function hc(A,C){try{return A=Ft.getStr(A),Ft.doStat(ee.lstat,A,C)}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function Ao(A,C,B){try{return C=Ft.getStr(C),C=Ft.calculateAt(A,C),C=Te.normalize(C),C[C.length-1]==="/"&&(C=C.substr(0,C.length-1)),ee.mkdir(C,B,0),0}catch(U){if(typeof ee>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}function ou(A,C,B,U){try{C=Ft.getStr(C);var H=U&256,oe=U&4096;return U=U&-6401,C=Ft.calculateAt(A,C,oe),Ft.doStat(H?ee.lstat:ee.stat,C,B)}catch(De){if(typeof ee>"u"||De.name!=="ErrnoError")throw De;return-De.errno}}function au(A,C,B,U){Ft.varargs=U;try{C=Ft.getStr(C),C=Ft.calculateAt(A,C);var H=U?hi():0;return ee.open(C,B,H).fd}catch(oe){if(typeof ee>"u"||oe.name!=="ErrnoError")throw oe;return-oe.errno}}function lu(A,C,B,U){try{if(C=Ft.getStr(C),C=Ft.calculateAt(A,C),U<=0)return-28;var H=ee.readlink(C),oe=Math.min(U,at(H)),De=N[B+oe];return no(H,B,U+1),N[B+oe]=De,oe}catch(Be){if(typeof ee>"u"||Be.name!=="ErrnoError")throw Be;return-Be.errno}}function cu(A){try{return A=Ft.getStr(A),ee.rmdir(A),0}catch(C){if(typeof ee>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}function uu(A,C){try{return A=Ft.getStr(A),Ft.doStat(ee.stat,A,C)}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function du(A,C,B){try{return C=Ft.getStr(C),C=Ft.calculateAt(A,C),B===0?ee.unlink(C):B===512?ee.rmdir(C):Ee("Invalid flags passed to unlinkat"),0}catch(U){if(typeof ee>"u"||U.name!=="ErrnoError")throw U;return-U.errno}}var we=A=>R[A>>2]+L[A+4>>2]*0x100000000;function nt(A,C,B,U){try{C=Ft.getStr(C),C=Ft.calculateAt(A,C,!0);var H=Date.now(),oe,De;if(!B)oe=H,De=H;else{var Be=we(B),Tt=L[B+8>>2];Tt==0x3fffffff?oe=H:Tt==0x3ffffffe?oe=-1:oe=Be*1e3+Tt/(1e3*1e3),B+=16,Be=we(B),Tt=L[B+8>>2],Tt==0x3fffffff?De=H:Tt==0x3ffffffe?De=-1:De=Be*1e3+Tt/(1e3*1e3)}return(De!=-1||oe!=-1)&&ee.utime(C,oe,De),0}catch(xt){if(typeof ee>"u"||xt.name!=="ErrnoError")throw xt;return-xt.errno}}var yt=1,ut=()=>yt,it=A=>A%4===0&&(A%100!==0||A%400===0),Gt=[0,31,60,91,121,152,182,213,244,274,305,335],pn=[0,31,59,90,120,151,181,212,243,273,304,334],_n=A=>{var C=it(A.getFullYear()),B=C?Gt:pn,U=B[A.getMonth()]+A.getDate()-1;return U};function Tn(A,C){A=Mo(A);var B=new Date(A*1e3);L[C>>2]=B.getSeconds(),L[C+4>>2]=B.getMinutes(),L[C+8>>2]=B.getHours(),L[C+12>>2]=B.getDate(),L[C+16>>2]=B.getMonth(),L[C+20>>2]=B.getFullYear()-1900,L[C+24>>2]=B.getDay();var U=_n(B)|0;L[C+28>>2]=U,L[C+36>>2]=-(B.getTimezoneOffset()*60);var H=new Date(B.getFullYear(),0,1),oe=new Date(B.getFullYear(),6,1).getTimezoneOffset(),De=H.getTimezoneOffset(),Be=(oe!=De&&B.getTimezoneOffset()==Math.min(De,oe))|0;L[C+32>>2]=Be}function Kn(A,C,B,U,H,oe,De){H=Mo(H);try{if(isNaN(H))return 61;var Be=Ft.getStreamFromFD(U),Tt=ee.mmap(Be,A,H,C,B),xt=Tt.ptr;return L[oe>>2]=Tt.allocated,R[De>>2]=xt,0}catch(zt){if(typeof ee>"u"||zt.name!=="ErrnoError")throw zt;return-zt.errno}}function Wn(A,C,B,U,H,oe){oe=Mo(oe);try{var De=Ft.getStreamFromFD(H);B&2&&Ft.doMsync(A,De,C,U,oe)}catch(Be){if(typeof ee>"u"||Be.name!=="ErrnoError")throw Be;return-Be.errno}}var nn=(A,C,B,U)=>{var H=new Date().getFullYear(),oe=new Date(H,0,1),De=new Date(H,6,1),Be=oe.getTimezoneOffset(),Tt=De.getTimezoneOffset(),xt=Math.max(Be,Tt);R[A>>2]=xt*60,L[C>>2]=+(Be!=Tt);var zt=rt=>{var Ct=rt>=0?"-":"+",ze=Math.abs(rt),Qe=String(Math.floor(ze/60)).padStart(2,"0"),Ze=String(ze%60).padStart(2,"0");return`UTC${Ct}${Qe}${Ze}`},Qt=zt(Be),mt=zt(Tt);Tt<Be?(no(Qt,B,17),no(mt,U,17)):(no(Qt,U,17),no(mt,B,17))},qn=()=>Date.now(),Zn;Zn=()=>performance.now();var Tr=()=>0x80000000,Mr=A=>{var C=T.buffer,B=(A-C.byteLength+65535)/65536;try{return T.grow(B),F(),1}catch{}},yr=A=>{var C=k.length;A>>>=0;var B=Tr();if(A>B)return!1;for(var U=1;U<=4;U*=2){var H=C*(1+.2/U);H=Math.min(H,A+0x6000000);var oe=Math.min(B,hn(Math.max(A,H),65536)),De=Mr(oe);if(De)return!0}return!1},kn={},Dr=()=>d||"./this.program",ar=()=>{if(!ar.strings){var A=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",C={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:A,_:Dr()};for(var B in kn)kn[B]===void 0?delete C[B]:C[B]=kn[B];var U=[];for(var B in C)U.push(`${B}=${C[B]}`);ar.strings=U}return ar.strings},ss=(A,C)=>{for(var B=0;B<A.length;++B)N[C++]=A.charCodeAt(B);N[C]=0},fl=(A,C)=>{var B=0;return ar().forEach((U,H)=>{var oe=C+B;R[A+H*4>>2]=oe,ss(U,oe),B+=U.length+1}),0},ds=(A,C)=>{var B=ar();R[A>>2]=B.length;var U=0;return B.forEach(H=>U+=H.length+1),R[C>>2]=U,0};function qa(A){try{var C=Ft.getStreamFromFD(A);return ee.close(C),0}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return B.errno}}function Fr(A,C){try{var B=0,U=0,H=0,oe=Ft.getStreamFromFD(A),De=oe.tty?2:ee.isDir(oe.mode)?3:ee.isLink(oe.mode)?7:4;return N[C]=De,q[C+2>>1]=H,P[C+8>>3]=BigInt(B),P[C+16>>3]=BigInt(U),0}catch(Be){if(typeof ee>"u"||Be.name!=="ErrnoError")throw Be;return Be.errno}}var Bs=(A,C,B,U)=>{for(var H=0,oe=0;oe<B;oe++){var De=R[C>>2],Be=R[C+4>>2];C+=8;var Tt=ee.read(A,N,De,Be,U);if(Tt<0)return-1;if(H+=Tt,Tt<Be)break}return H};function fs(A,C,B,U){try{var H=Ft.getStreamFromFD(A),oe=Bs(H,C,B);return R[U>>2]=oe,0}catch(De){if(typeof ee>"u"||De.name!=="ErrnoError")throw De;return De.errno}}function As(A,C,B,U){C=Mo(C);try{if(isNaN(C))return 61;var H=Ft.getStreamFromFD(A);return ee.llseek(H,C,B),P[U>>3]=BigInt(H.position),H.getdents&&C===0&&B===0&&(H.getdents=null),0}catch(oe){if(typeof ee>"u"||oe.name!=="ErrnoError")throw oe;return oe.errno}}function Vi(A){try{var C=Ft.getStreamFromFD(A);return C.stream_ops?.fsync?C.stream_ops.fsync(C):0}catch(B){if(typeof ee>"u"||B.name!=="ErrnoError")throw B;return B.errno}}var Vr=(A,C,B,U)=>{for(var H=0,oe=0;oe<B;oe++){var De=R[C>>2],Be=R[C+4>>2];C+=8;var Tt=ee.write(A,N,De,Be,U);if(Tt<0)return-1;if(H+=Tt,Tt<Be)break}return H};function mo(A,C,B,U){try{var H=Ft.getStreamFromFD(A),oe=Vr(H,C,B);return R[U>>2]=oe,0}catch(De){if(typeof ee>"u"||De.name!=="ErrnoError")throw De;return De.errno}}ee.createPreloadedFile=$e,ee.staticInit();var fu={__syscall_chmod:Hn,__syscall_faccessat:Lr,__syscall_fchmod:ai,__syscall_fchown32:gr,__syscall_fcntl64:Vl,__syscall_fstat64:Fa,__syscall_ftruncate64:Io,__syscall_getcwd:su,__syscall_ioctl:Wl,__syscall_lstat64:hc,__syscall_mkdirat:Ao,__syscall_newfstatat:ou,__syscall_openat:au,__syscall_readlinkat:lu,__syscall_rmdir:cu,__syscall_stat64:uu,__syscall_unlinkat:du,__syscall_utimensat:nt,_emscripten_get_now_is_monotonic:ut,_localtime_js:Tn,_mmap_js:Kn,_munmap_js:Wn,_tzset_js:nn,emscripten_date_now:qn,emscripten_get_now:Zn,emscripten_resize_heap:yr,environ_get:fl,environ_sizes_get:ds,fd_close:qa,fd_fdstat_get:Fr,fd_read:fs,fd_seek:As,fd_sync:Vi,fd_write:mo,memory:T},je=Mt();r._sqlite3_status64=(A,C,B,U)=>(r._sqlite3_status64=je.sqlite3_status64)(A,C,B,U),r._sqlite3_status=(A,C,B,U)=>(r._sqlite3_status=je.sqlite3_status)(A,C,B,U),r._sqlite3_db_status=(A,C,B,U,H)=>(r._sqlite3_db_status=je.sqlite3_db_status)(A,C,B,U,H),r._sqlite3_msize=A=>(r._sqlite3_msize=je.sqlite3_msize)(A),r._sqlite3_vfs_find=A=>(r._sqlite3_vfs_find=je.sqlite3_vfs_find)(A),r._sqlite3_initialize=()=>(r._sqlite3_initialize=je.sqlite3_initialize)(),r._sqlite3_malloc=A=>(r._sqlite3_malloc=je.sqlite3_malloc)(A),r._sqlite3_free=A=>(r._sqlite3_free=je.sqlite3_free)(A),r._sqlite3_vfs_register=(A,C)=>(r._sqlite3_vfs_register=je.sqlite3_vfs_register)(A,C),r._sqlite3_vfs_unregister=A=>(r._sqlite3_vfs_unregister=je.sqlite3_vfs_unregister)(A),r._sqlite3_malloc64=A=>(r._sqlite3_malloc64=je.sqlite3_malloc64)(A),r._sqlite3_realloc=(A,C)=>(r._sqlite3_realloc=je.sqlite3_realloc)(A,C),r._sqlite3_realloc64=(A,C)=>(r._sqlite3_realloc64=je.sqlite3_realloc64)(A,C),r._sqlite3_value_text=A=>(r._sqlite3_value_text=je.sqlite3_value_text)(A),r._sqlite3_randomness=(A,C)=>(r._sqlite3_randomness=je.sqlite3_randomness)(A,C),r._sqlite3_stricmp=(A,C)=>(r._sqlite3_stricmp=je.sqlite3_stricmp)(A,C),r._sqlite3_strnicmp=(A,C,B)=>(r._sqlite3_strnicmp=je.sqlite3_strnicmp)(A,C,B),r._sqlite3_uri_parameter=(A,C)=>(r._sqlite3_uri_parameter=je.sqlite3_uri_parameter)(A,C),r._sqlite3_uri_boolean=(A,C,B)=>(r._sqlite3_uri_boolean=je.sqlite3_uri_boolean)(A,C,B),r._sqlite3_serialize=(A,C,B,U)=>(r._sqlite3_serialize=je.sqlite3_serialize)(A,C,B,U),r._sqlite3_prepare_v2=(A,C,B,U,H)=>(r._sqlite3_prepare_v2=je.sqlite3_prepare_v2)(A,C,B,U,H),r._sqlite3_step=A=>(r._sqlite3_step=je.sqlite3_step)(A),r._sqlite3_column_int64=(A,C)=>(r._sqlite3_column_int64=je.sqlite3_column_int64)(A,C),r._sqlite3_reset=A=>(r._sqlite3_reset=je.sqlite3_reset)(A),r._sqlite3_exec=(A,C,B,U,H)=>(r._sqlite3_exec=je.sqlite3_exec)(A,C,B,U,H),r._sqlite3_column_int=(A,C)=>(r._sqlite3_column_int=je.sqlite3_column_int)(A,C),r._sqlite3_finalize=A=>(r._sqlite3_finalize=je.sqlite3_finalize)(A),r._sqlite3_file_control=(A,C,B,U)=>(r._sqlite3_file_control=je.sqlite3_file_control)(A,C,B,U),r._sqlite3_column_name=(A,C)=>(r._sqlite3_column_name=je.sqlite3_column_name)(A,C),r._sqlite3_column_text=(A,C)=>(r._sqlite3_column_text=je.sqlite3_column_text)(A,C),r._sqlite3_column_type=(A,C)=>(r._sqlite3_column_type=je.sqlite3_column_type)(A,C),r._sqlite3_errmsg=A=>(r._sqlite3_errmsg=je.sqlite3_errmsg)(A),r._sqlite3_deserialize=(A,C,B,U,H,oe)=>(r._sqlite3_deserialize=je.sqlite3_deserialize)(A,C,B,U,H,oe),r._sqlite3_clear_bindings=A=>(r._sqlite3_clear_bindings=je.sqlite3_clear_bindings)(A),r._sqlite3_value_blob=A=>(r._sqlite3_value_blob=je.sqlite3_value_blob)(A),r._sqlite3_value_bytes=A=>(r._sqlite3_value_bytes=je.sqlite3_value_bytes)(A),r._sqlite3_value_double=A=>(r._sqlite3_value_double=je.sqlite3_value_double)(A),r._sqlite3_value_int=A=>(r._sqlite3_value_int=je.sqlite3_value_int)(A),r._sqlite3_value_int64=A=>(r._sqlite3_value_int64=je.sqlite3_value_int64)(A),r._sqlite3_value_subtype=A=>(r._sqlite3_value_subtype=je.sqlite3_value_subtype)(A),r._sqlite3_value_pointer=(A,C)=>(r._sqlite3_value_pointer=je.sqlite3_value_pointer)(A,C),r._sqlite3_value_type=A=>(r._sqlite3_value_type=je.sqlite3_value_type)(A),r._sqlite3_value_nochange=A=>(r._sqlite3_value_nochange=je.sqlite3_value_nochange)(A),r._sqlite3_value_frombind=A=>(r._sqlite3_value_frombind=je.sqlite3_value_frombind)(A),r._sqlite3_value_dup=A=>(r._sqlite3_value_dup=je.sqlite3_value_dup)(A),r._sqlite3_value_free=A=>(r._sqlite3_value_free=je.sqlite3_value_free)(A),r._sqlite3_result_blob=(A,C,B,U)=>(r._sqlite3_result_blob=je.sqlite3_result_blob)(A,C,B,U),r._sqlite3_result_error_toobig=A=>(r._sqlite3_result_error_toobig=je.sqlite3_result_error_toobig)(A),r._sqlite3_result_error_nomem=A=>(r._sqlite3_result_error_nomem=je.sqlite3_result_error_nomem)(A),r._sqlite3_result_double=(A,C)=>(r._sqlite3_result_double=je.sqlite3_result_double)(A,C),r._sqlite3_result_error=(A,C,B)=>(r._sqlite3_result_error=je.sqlite3_result_error)(A,C,B),r._sqlite3_result_int=(A,C)=>(r._sqlite3_result_int=je.sqlite3_result_int)(A,C),r._sqlite3_result_int64=(A,C)=>(r._sqlite3_result_int64=je.sqlite3_result_int64)(A,C),r._sqlite3_result_null=A=>(r._sqlite3_result_null=je.sqlite3_result_null)(A),r._sqlite3_result_pointer=(A,C,B,U)=>(r._sqlite3_result_pointer=je.sqlite3_result_pointer)(A,C,B,U),r._sqlite3_result_subtype=(A,C)=>(r._sqlite3_result_subtype=je.sqlite3_result_subtype)(A,C),r._sqlite3_result_text=(A,C,B,U)=>(r._sqlite3_result_text=je.sqlite3_result_text)(A,C,B,U),r._sqlite3_result_zeroblob=(A,C)=>(r._sqlite3_result_zeroblob=je.sqlite3_result_zeroblob)(A,C),r._sqlite3_result_zeroblob64=(A,C)=>(r._sqlite3_result_zeroblob64=je.sqlite3_result_zeroblob64)(A,C),r._sqlite3_result_error_code=(A,C)=>(r._sqlite3_result_error_code=je.sqlite3_result_error_code)(A,C),r._sqlite3_user_data=A=>(r._sqlite3_user_data=je.sqlite3_user_data)(A),r._sqlite3_context_db_handle=A=>(r._sqlite3_context_db_handle=je.sqlite3_context_db_handle)(A),r._sqlite3_vtab_nochange=A=>(r._sqlite3_vtab_nochange=je.sqlite3_vtab_nochange)(A),r._sqlite3_vtab_in_first=(A,C)=>(r._sqlite3_vtab_in_first=je.sqlite3_vtab_in_first)(A,C),r._sqlite3_vtab_in_next=(A,C)=>(r._sqlite3_vtab_in_next=je.sqlite3_vtab_in_next)(A,C),r._sqlite3_aggregate_context=(A,C)=>(r._sqlite3_aggregate_context=je.sqlite3_aggregate_context)(A,C),r._sqlite3_get_auxdata=(A,C)=>(r._sqlite3_get_auxdata=je.sqlite3_get_auxdata)(A,C),r._sqlite3_set_auxdata=(A,C,B,U)=>(r._sqlite3_set_auxdata=je.sqlite3_set_auxdata)(A,C,B,U),r._sqlite3_column_count=A=>(r._sqlite3_column_count=je.sqlite3_column_count)(A),r._sqlite3_data_count=A=>(r._sqlite3_data_count=je.sqlite3_data_count)(A),r._sqlite3_column_blob=(A,C)=>(r._sqlite3_column_blob=je.sqlite3_column_blob)(A,C),r._sqlite3_column_bytes=(A,C)=>(r._sqlite3_column_bytes=je.sqlite3_column_bytes)(A,C),r._sqlite3_column_double=(A,C)=>(r._sqlite3_column_double=je.sqlite3_column_double)(A,C),r._sqlite3_column_value=(A,C)=>(r._sqlite3_column_value=je.sqlite3_column_value)(A,C),r._sqlite3_column_decltype=(A,C)=>(r._sqlite3_column_decltype=je.sqlite3_column_decltype)(A,C),r._sqlite3_bind_blob=(A,C,B,U,H)=>(r._sqlite3_bind_blob=je.sqlite3_bind_blob)(A,C,B,U,H),r._sqlite3_bind_double=(A,C,B)=>(r._sqlite3_bind_double=je.sqlite3_bind_double)(A,C,B),r._sqlite3_bind_int=(A,C,B)=>(r._sqlite3_bind_int=je.sqlite3_bind_int)(A,C,B),r._sqlite3_bind_int64=(A,C,B)=>(r._sqlite3_bind_int64=je.sqlite3_bind_int64)(A,C,B),r._sqlite3_bind_null=(A,C)=>(r._sqlite3_bind_null=je.sqlite3_bind_null)(A,C),r._sqlite3_bind_pointer=(A,C,B,U,H)=>(r._sqlite3_bind_pointer=je.sqlite3_bind_pointer)(A,C,B,U,H),r._sqlite3_bind_text=(A,C,B,U,H)=>(r._sqlite3_bind_text=je.sqlite3_bind_text)(A,C,B,U,H),r._sqlite3_bind_parameter_count=A=>(r._sqlite3_bind_parameter_count=je.sqlite3_bind_parameter_count)(A),r._sqlite3_bind_parameter_name=(A,C)=>(r._sqlite3_bind_parameter_name=je.sqlite3_bind_parameter_name)(A,C),r._sqlite3_bind_parameter_index=(A,C)=>(r._sqlite3_bind_parameter_index=je.sqlite3_bind_parameter_index)(A,C),r._sqlite3_db_handle=A=>(r._sqlite3_db_handle=je.sqlite3_db_handle)(A),r._sqlite3_stmt_readonly=A=>(r._sqlite3_stmt_readonly=je.sqlite3_stmt_readonly)(A),r._sqlite3_stmt_isexplain=A=>(r._sqlite3_stmt_isexplain=je.sqlite3_stmt_isexplain)(A),r._sqlite3_stmt_explain=(A,C)=>(r._sqlite3_stmt_explain=je.sqlite3_stmt_explain)(A,C),r._sqlite3_stmt_busy=A=>(r._sqlite3_stmt_busy=je.sqlite3_stmt_busy)(A),r._sqlite3_stmt_status=(A,C,B)=>(r._sqlite3_stmt_status=je.sqlite3_stmt_status)(A,C,B),r._sqlite3_sql=A=>(r._sqlite3_sql=je.sqlite3_sql)(A),r._sqlite3_expanded_sql=A=>(r._sqlite3_expanded_sql=je.sqlite3_expanded_sql)(A),r._sqlite3_preupdate_old=(A,C,B)=>(r._sqlite3_preupdate_old=je.sqlite3_preupdate_old)(A,C,B),r._sqlite3_preupdate_count=A=>(r._sqlite3_preupdate_count=je.sqlite3_preupdate_count)(A),r._sqlite3_preupdate_depth=A=>(r._sqlite3_preupdate_depth=je.sqlite3_preupdate_depth)(A),r._sqlite3_preupdate_blobwrite=A=>(r._sqlite3_preupdate_blobwrite=je.sqlite3_preupdate_blobwrite)(A),r._sqlite3_preupdate_new=(A,C,B)=>(r._sqlite3_preupdate_new=je.sqlite3_preupdate_new)(A,C,B),r._sqlite3_value_numeric_type=A=>(r._sqlite3_value_numeric_type=je.sqlite3_value_numeric_type)(A),r._sqlite3_set_authorizer=(A,C,B)=>(r._sqlite3_set_authorizer=je.sqlite3_set_authorizer)(A,C,B),r._sqlite3_strglob=(A,C)=>(r._sqlite3_strglob=je.sqlite3_strglob)(A,C),r._sqlite3_strlike=(A,C,B)=>(r._sqlite3_strlike=je.sqlite3_strlike)(A,C,B),r._sqlite3_auto_extension=A=>(r._sqlite3_auto_extension=je.sqlite3_auto_extension)(A),r._sqlite3_cancel_auto_extension=A=>(r._sqlite3_cancel_auto_extension=je.sqlite3_cancel_auto_extension)(A),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=je.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(A,C,B,U,H,oe)=>(r._sqlite3_prepare_v3=je.sqlite3_prepare_v3)(A,C,B,U,H,oe),r._sqlite3_create_module=(A,C,B,U)=>(r._sqlite3_create_module=je.sqlite3_create_module)(A,C,B,U),r._sqlite3_create_module_v2=(A,C,B,U,H)=>(r._sqlite3_create_module_v2=je.sqlite3_create_module_v2)(A,C,B,U,H),r._sqlite3_drop_modules=(A,C)=>(r._sqlite3_drop_modules=je.sqlite3_drop_modules)(A,C),r._sqlite3_declare_vtab=(A,C)=>(r._sqlite3_declare_vtab=je.sqlite3_declare_vtab)(A,C),r._sqlite3_vtab_on_conflict=A=>(r._sqlite3_vtab_on_conflict=je.sqlite3_vtab_on_conflict)(A),r._sqlite3_vtab_collation=(A,C)=>(r._sqlite3_vtab_collation=je.sqlite3_vtab_collation)(A,C),r._sqlite3_vtab_in=(A,C,B)=>(r._sqlite3_vtab_in=je.sqlite3_vtab_in)(A,C,B),r._sqlite3_vtab_rhs_value=(A,C,B)=>(r._sqlite3_vtab_rhs_value=je.sqlite3_vtab_rhs_value)(A,C,B),r._sqlite3_vtab_distinct=A=>(r._sqlite3_vtab_distinct=je.sqlite3_vtab_distinct)(A),r._sqlite3_keyword_name=(A,C,B)=>(r._sqlite3_keyword_name=je.sqlite3_keyword_name)(A,C,B),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=je.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(A,C)=>(r._sqlite3_keyword_check=je.sqlite3_keyword_check)(A,C),r._sqlite3_complete=A=>(r._sqlite3_complete=je.sqlite3_complete)(A),r._sqlite3_libversion=()=>(r._sqlite3_libversion=je.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=je.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=je.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=A=>(r._sqlite3_last_insert_rowid=je.sqlite3_last_insert_rowid)(A),r._sqlite3_set_last_insert_rowid=(A,C)=>(r._sqlite3_set_last_insert_rowid=je.sqlite3_set_last_insert_rowid)(A,C),r._sqlite3_changes64=A=>(r._sqlite3_changes64=je.sqlite3_changes64)(A),r._sqlite3_changes=A=>(r._sqlite3_changes=je.sqlite3_changes)(A),r._sqlite3_total_changes64=A=>(r._sqlite3_total_changes64=je.sqlite3_total_changes64)(A),r._sqlite3_total_changes=A=>(r._sqlite3_total_changes=je.sqlite3_total_changes)(A),r._sqlite3_txn_state=(A,C)=>(r._sqlite3_txn_state=je.sqlite3_txn_state)(A,C),r._sqlite3_close_v2=A=>(r._sqlite3_close_v2=je.sqlite3_close_v2)(A),r._sqlite3_busy_handler=(A,C,B)=>(r._sqlite3_busy_handler=je.sqlite3_busy_handler)(A,C,B),r._sqlite3_progress_handler=(A,C,B,U)=>(r._sqlite3_progress_handler=je.sqlite3_progress_handler)(A,C,B,U),r._sqlite3_busy_timeout=(A,C)=>(r._sqlite3_busy_timeout=je.sqlite3_busy_timeout)(A,C),r._sqlite3_interrupt=A=>(r._sqlite3_interrupt=je.sqlite3_interrupt)(A),r._sqlite3_is_interrupted=A=>(r._sqlite3_is_interrupted=je.sqlite3_is_interrupted)(A),r._sqlite3_create_function=(A,C,B,U,H,oe,De,Be)=>(r._sqlite3_create_function=je.sqlite3_create_function)(A,C,B,U,H,oe,De,Be),r._sqlite3_create_function_v2=(A,C,B,U,H,oe,De,Be,Tt)=>(r._sqlite3_create_function_v2=je.sqlite3_create_function_v2)(A,C,B,U,H,oe,De,Be,Tt),r._sqlite3_create_window_function=(A,C,B,U,H,oe,De,Be,Tt,xt)=>(r._sqlite3_create_window_function=je.sqlite3_create_window_function)(A,C,B,U,H,oe,De,Be,Tt,xt),r._sqlite3_overload_function=(A,C,B)=>(r._sqlite3_overload_function=je.sqlite3_overload_function)(A,C,B),r._sqlite3_trace_v2=(A,C,B,U)=>(r._sqlite3_trace_v2=je.sqlite3_trace_v2)(A,C,B,U),r._sqlite3_commit_hook=(A,C,B)=>(r._sqlite3_commit_hook=je.sqlite3_commit_hook)(A,C,B),r._sqlite3_update_hook=(A,C,B)=>(r._sqlite3_update_hook=je.sqlite3_update_hook)(A,C,B),r._sqlite3_rollback_hook=(A,C,B)=>(r._sqlite3_rollback_hook=je.sqlite3_rollback_hook)(A,C,B),r._sqlite3_preupdate_hook=(A,C,B)=>(r._sqlite3_preupdate_hook=je.sqlite3_preupdate_hook)(A,C,B),r._sqlite3_error_offset=A=>(r._sqlite3_error_offset=je.sqlite3_error_offset)(A),r._sqlite3_errcode=A=>(r._sqlite3_errcode=je.sqlite3_errcode)(A),r._sqlite3_extended_errcode=A=>(r._sqlite3_extended_errcode=je.sqlite3_extended_errcode)(A),r._sqlite3_errstr=A=>(r._sqlite3_errstr=je.sqlite3_errstr)(A),r._sqlite3_limit=(A,C,B)=>(r._sqlite3_limit=je.sqlite3_limit)(A,C,B),r._sqlite3_open=(A,C)=>(r._sqlite3_open=je.sqlite3_open)(A,C),r._sqlite3_open_v2=(A,C,B,U)=>(r._sqlite3_open_v2=je.sqlite3_open_v2)(A,C,B,U),r._sqlite3_create_collation=(A,C,B,U,H)=>(r._sqlite3_create_collation=je.sqlite3_create_collation)(A,C,B,U,H),r._sqlite3_create_collation_v2=(A,C,B,U,H,oe)=>(r._sqlite3_create_collation_v2=je.sqlite3_create_collation_v2)(A,C,B,U,H,oe),r._sqlite3_collation_needed=(A,C,B)=>(r._sqlite3_collation_needed=je.sqlite3_collation_needed)(A,C,B),r._sqlite3_get_autocommit=A=>(r._sqlite3_get_autocommit=je.sqlite3_get_autocommit)(A),r._sqlite3_table_column_metadata=(A,C,B,U,H,oe,De,Be,Tt)=>(r._sqlite3_table_column_metadata=je.sqlite3_table_column_metadata)(A,C,B,U,H,oe,De,Be,Tt),r._sqlite3_extended_result_codes=(A,C)=>(r._sqlite3_extended_result_codes=je.sqlite3_extended_result_codes)(A,C),r._sqlite3_uri_key=(A,C)=>(r._sqlite3_uri_key=je.sqlite3_uri_key)(A,C),r._sqlite3_uri_int64=(A,C,B)=>(r._sqlite3_uri_int64=je.sqlite3_uri_int64)(A,C,B),r._sqlite3_db_name=(A,C)=>(r._sqlite3_db_name=je.sqlite3_db_name)(A,C),r._sqlite3_db_filename=(A,C)=>(r._sqlite3_db_filename=je.sqlite3_db_filename)(A,C),r._sqlite3_db_readonly=(A,C)=>(r._sqlite3_db_readonly=je.sqlite3_db_readonly)(A,C),r._sqlite3_compileoption_used=A=>(r._sqlite3_compileoption_used=je.sqlite3_compileoption_used)(A),r._sqlite3_compileoption_get=A=>(r._sqlite3_compileoption_get=je.sqlite3_compileoption_get)(A),r._sqlite3session_diff=(A,C,B,U)=>(r._sqlite3session_diff=je.sqlite3session_diff)(A,C,B,U),r._sqlite3session_attach=(A,C)=>(r._sqlite3session_attach=je.sqlite3session_attach)(A,C),r._sqlite3session_create=(A,C,B)=>(r._sqlite3session_create=je.sqlite3session_create)(A,C,B),r._sqlite3session_delete=A=>(r._sqlite3session_delete=je.sqlite3session_delete)(A),r._sqlite3session_table_filter=(A,C,B)=>(r._sqlite3session_table_filter=je.sqlite3session_table_filter)(A,C,B),r._sqlite3session_changeset=(A,C,B)=>(r._sqlite3session_changeset=je.sqlite3session_changeset)(A,C,B),r._sqlite3session_changeset_strm=(A,C,B)=>(r._sqlite3session_changeset_strm=je.sqlite3session_changeset_strm)(A,C,B),r._sqlite3session_patchset_strm=(A,C,B)=>(r._sqlite3session_patchset_strm=je.sqlite3session_patchset_strm)(A,C,B),r._sqlite3session_patchset=(A,C,B)=>(r._sqlite3session_patchset=je.sqlite3session_patchset)(A,C,B),r._sqlite3session_enable=(A,C)=>(r._sqlite3session_enable=je.sqlite3session_enable)(A,C),r._sqlite3session_indirect=(A,C)=>(r._sqlite3session_indirect=je.sqlite3session_indirect)(A,C),r._sqlite3session_isempty=A=>(r._sqlite3session_isempty=je.sqlite3session_isempty)(A),r._sqlite3session_memory_used=A=>(r._sqlite3session_memory_used=je.sqlite3session_memory_used)(A),r._sqlite3session_object_config=(A,C,B)=>(r._sqlite3session_object_config=je.sqlite3session_object_config)(A,C,B),r._sqlite3session_changeset_size=A=>(r._sqlite3session_changeset_size=je.sqlite3session_changeset_size)(A),r._sqlite3changeset_start=(A,C,B)=>(r._sqlite3changeset_start=je.sqlite3changeset_start)(A,C,B),r._sqlite3changeset_start_v2=(A,C,B,U)=>(r._sqlite3changeset_start_v2=je.sqlite3changeset_start_v2)(A,C,B,U),r._sqlite3changeset_start_strm=(A,C,B)=>(r._sqlite3changeset_start_strm=je.sqlite3changeset_start_strm)(A,C,B),r._sqlite3changeset_start_v2_strm=(A,C,B,U)=>(r._sqlite3changeset_start_v2_strm=je.sqlite3changeset_start_v2_strm)(A,C,B,U),r._sqlite3changeset_next=A=>(r._sqlite3changeset_next=je.sqlite3changeset_next)(A),r._sqlite3changeset_op=(A,C,B,U,H)=>(r._sqlite3changeset_op=je.sqlite3changeset_op)(A,C,B,U,H),r._sqlite3changeset_pk=(A,C,B)=>(r._sqlite3changeset_pk=je.sqlite3changeset_pk)(A,C,B),r._sqlite3changeset_old=(A,C,B)=>(r._sqlite3changeset_old=je.sqlite3changeset_old)(A,C,B),r._sqlite3changeset_new=(A,C,B)=>(r._sqlite3changeset_new=je.sqlite3changeset_new)(A,C,B),r._sqlite3changeset_conflict=(A,C,B)=>(r._sqlite3changeset_conflict=je.sqlite3changeset_conflict)(A,C,B),r._sqlite3changeset_fk_conflicts=(A,C)=>(r._sqlite3changeset_fk_conflicts=je.sqlite3changeset_fk_conflicts)(A,C),r._sqlite3changeset_finalize=A=>(r._sqlite3changeset_finalize=je.sqlite3changeset_finalize)(A),r._sqlite3changeset_invert=(A,C,B,U)=>(r._sqlite3changeset_invert=je.sqlite3changeset_invert)(A,C,B,U),r._sqlite3changeset_invert_strm=(A,C,B,U)=>(r._sqlite3changeset_invert_strm=je.sqlite3changeset_invert_strm)(A,C,B,U),r._sqlite3changeset_apply_v2=(A,C,B,U,H,oe,De,Be,Tt)=>(r._sqlite3changeset_apply_v2=je.sqlite3changeset_apply_v2)(A,C,B,U,H,oe,De,Be,Tt),r._sqlite3changeset_apply=(A,C,B,U,H,oe)=>(r._sqlite3changeset_apply=je.sqlite3changeset_apply)(A,C,B,U,H,oe),r._sqlite3changeset_apply_v2_strm=(A,C,B,U,H,oe,De,Be,Tt)=>(r._sqlite3changeset_apply_v2_strm=je.sqlite3changeset_apply_v2_strm)(A,C,B,U,H,oe,De,Be,Tt),r._sqlite3changeset_apply_strm=(A,C,B,U,H,oe)=>(r._sqlite3changeset_apply_strm=je.sqlite3changeset_apply_strm)(A,C,B,U,H,oe),r._sqlite3changegroup_new=A=>(r._sqlite3changegroup_new=je.sqlite3changegroup_new)(A),r._sqlite3changegroup_add=(A,C,B)=>(r._sqlite3changegroup_add=je.sqlite3changegroup_add)(A,C,B),r._sqlite3changegroup_output=(A,C,B)=>(r._sqlite3changegroup_output=je.sqlite3changegroup_output)(A,C,B),r._sqlite3changegroup_add_strm=(A,C,B)=>(r._sqlite3changegroup_add_strm=je.sqlite3changegroup_add_strm)(A,C,B),r._sqlite3changegroup_output_strm=(A,C,B)=>(r._sqlite3changegroup_output_strm=je.sqlite3changegroup_output_strm)(A,C,B),r._sqlite3changegroup_delete=A=>(r._sqlite3changegroup_delete=je.sqlite3changegroup_delete)(A),r._sqlite3changeset_concat=(A,C,B,U,H,oe)=>(r._sqlite3changeset_concat=je.sqlite3changeset_concat)(A,C,B,U,H,oe),r._sqlite3changeset_concat_strm=(A,C,B,U,H,oe)=>(r._sqlite3changeset_concat_strm=je.sqlite3changeset_concat_strm)(A,C,B,U,H,oe),r._sqlite3session_config=(A,C)=>(r._sqlite3session_config=je.sqlite3session_config)(A,C),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=je.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=je.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=A=>(r._sqlite3__wasm_pstack_restore=je.sqlite3__wasm_pstack_restore)(A),r._sqlite3__wasm_pstack_alloc=A=>(r._sqlite3__wasm_pstack_alloc=je.sqlite3__wasm_pstack_alloc)(A),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=je.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=je.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(A,C,B)=>(r._sqlite3__wasm_db_error=je.sqlite3__wasm_db_error)(A,C,B),r._sqlite3__wasm_test_struct=A=>(r._sqlite3__wasm_test_struct=je.sqlite3__wasm_test_struct)(A),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=je.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(A,C)=>(r._sqlite3__wasm_vfs_unlink=je.sqlite3__wasm_vfs_unlink)(A,C),r._sqlite3__wasm_db_vfs=(A,C)=>(r._sqlite3__wasm_db_vfs=je.sqlite3__wasm_db_vfs)(A,C),r._sqlite3__wasm_db_reset=A=>(r._sqlite3__wasm_db_reset=je.sqlite3__wasm_db_reset)(A),r._sqlite3__wasm_db_export_chunked=(A,C)=>(r._sqlite3__wasm_db_export_chunked=je.sqlite3__wasm_db_export_chunked)(A,C),r._sqlite3__wasm_db_serialize=(A,C,B,U,H)=>(r._sqlite3__wasm_db_serialize=je.sqlite3__wasm_db_serialize)(A,C,B,U,H),r._sqlite3__wasm_vfs_create_file=(A,C,B,U)=>(r._sqlite3__wasm_vfs_create_file=je.sqlite3__wasm_vfs_create_file)(A,C,B,U),r._sqlite3__wasm_posix_create_file=(A,C,B)=>(r._sqlite3__wasm_posix_create_file=je.sqlite3__wasm_posix_create_file)(A,C,B),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(A,C)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=je.sqlite3__wasm_kvvfsMakeKeyOnPstack)(A,C),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=je.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(A,C,B)=>(r._sqlite3__wasm_vtab_config=je.sqlite3__wasm_vtab_config)(A,C,B),r._sqlite3__wasm_db_config_ip=(A,C,B,U)=>(r._sqlite3__wasm_db_config_ip=je.sqlite3__wasm_db_config_ip)(A,C,B,U),r._sqlite3__wasm_db_config_pii=(A,C,B,U,H)=>(r._sqlite3__wasm_db_config_pii=je.sqlite3__wasm_db_config_pii)(A,C,B,U,H),r._sqlite3__wasm_db_config_s=(A,C,B)=>(r._sqlite3__wasm_db_config_s=je.sqlite3__wasm_db_config_s)(A,C,B),r._sqlite3__wasm_config_i=(A,C)=>(r._sqlite3__wasm_config_i=je.sqlite3__wasm_config_i)(A,C),r._sqlite3__wasm_config_ii=(A,C,B)=>(r._sqlite3__wasm_config_ii=je.sqlite3__wasm_config_ii)(A,C,B),r._sqlite3__wasm_config_j=(A,C)=>(r._sqlite3__wasm_config_j=je.sqlite3__wasm_config_j)(A,C),r._sqlite3__wasm_qfmt_token=(A,C)=>(r._sqlite3__wasm_qfmt_token=je.sqlite3__wasm_qfmt_token)(A,C),r._sqlite3__wasm_init_wasmfs=A=>(r._sqlite3__wasm_init_wasmfs=je.sqlite3__wasm_init_wasmfs)(A),r._sqlite3__wasm_test_intptr=A=>(r._sqlite3__wasm_test_intptr=je.sqlite3__wasm_test_intptr)(A),r._sqlite3__wasm_test_voidptr=A=>(r._sqlite3__wasm_test_voidptr=je.sqlite3__wasm_test_voidptr)(A),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=je.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=je.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=A=>(r._sqlite3__wasm_test_int64_times2=je.sqlite3__wasm_test_int64_times2)(A),r._sqlite3__wasm_test_int64_minmax=(A,C)=>(r._sqlite3__wasm_test_int64_minmax=je.sqlite3__wasm_test_int64_minmax)(A,C),r._sqlite3__wasm_test_int64ptr=A=>(r._sqlite3__wasm_test_int64ptr=je.sqlite3__wasm_test_int64ptr)(A),r._sqlite3__wasm_test_stack_overflow=A=>(r._sqlite3__wasm_test_stack_overflow=je.sqlite3__wasm_test_stack_overflow)(A),r._sqlite3__wasm_test_str_hello=A=>(r._sqlite3__wasm_test_str_hello=je.sqlite3__wasm_test_str_hello)(A),r._sqlite3__wasm_SQLTester_strglob=(A,C)=>(r._sqlite3__wasm_SQLTester_strglob=je.sqlite3__wasm_SQLTester_strglob)(A,C),r._malloc=A=>(r._malloc=je.malloc)(A),r._free=A=>(r._free=je.free)(A),r._realloc=(A,C)=>(r._realloc=je.realloc)(A,C);var Vh=(A,C)=>(Vh=je.emscripten_builtin_memalign)(A,C);r.wasmMemory=T;var pc;ge=function A(){pc||Ku(),pc||(ge=A)};function Ku(){if(fe>0||(X(),fe>0))return;function A(){pc||(pc=!0,r.calledRun=!0,!I&&(re(),i(r),r.onRuntimeInitialized?.(),G()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),A()},1)):A()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Ku(),r.postRun||(r.postRun=[]),r.postRun.push(function(A){if(globalThis.sqlite3ApiBootstrap=function C(B=globalThis.sqlite3ApiConfig||C.defaultConfig){if(C.sqlite3)return(C.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),C.sqlite3;const U=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof A<"u"&&A.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},B||{});Object.assign(U,{allocExportName:U.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:U.useStdAlloc?"free":"sqlite3_free",reallocExportName:U.useStdAlloc?"realloc":"sqlite3_realloc"},U),["exports","memory","wasmfsOpfsDir"].forEach(ue=>{typeof U[ue]=="function"&&(U[ue]=U[ue]())}),delete globalThis.sqlite3ApiConfig,delete C.defaultConfig;const H=Object.create(null),oe=Object.create(null),De=ue=>H.sqlite3_js_rc_str&&H.sqlite3_js_rc_str(ue)||"Unknown result code #"+ue,Be=ue=>typeof ue=="number"&&ue===(ue|0);class Tt extends Error{constructor(..._e){let Se;if(_e.length)if(Be(_e[0]))if(Se=_e[0],_e.length===1)super(De(_e[0]));else{const dt=De(Se);typeof _e[1]=="object"?super(dt,_e[1]):(_e[0]=dt+":",super(_e.join(" ")))}else _e.length===2&&typeof _e[1]=="object"?super(..._e):super(_e.join(" "));this.resultCode=Se||H.SQLITE_ERROR,this.name="SQLite3Error"}}Tt.toss=(...ue)=>{throw new Tt(...ue)};const xt=Tt.toss;U.wasmfsOpfsDir&&!/^\/[^/]+$/.test(U.wasmfsOpfsDir)&&xt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const zt=ue=>typeof ue!="bigint"&&ue===(ue|0)&&ue<=0x7fffffff&&ue>=-0x80000000,Qt=function ue(_e){return ue._max||(ue._max=BigInt("0x7fffffffffffffff"),ue._min=~ue._max),_e>=ue._min&&_e<=ue._max},mt=ue=>ue>=-2147483647n-1n&&ue<=2147483647n,rt=function ue(_e){return ue._min||(ue._min=Number.MIN_SAFE_INTEGER,ue._max=Number.MAX_SAFE_INTEGER),_e>=ue._min&&_e<=ue._max},Ct=ue=>ue&&ue.constructor&&zt(ue.constructor.BYTES_PER_ELEMENT)?ue:!1,ze=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Qe=ue=>ue.buffer instanceof ze,Ze=(ue,_e,Se)=>Qe(ue)?ue.slice(_e,Se):ue.subarray(_e,Se),wt=ue=>ue&&(ue instanceof Uint8Array||ue instanceof Int8Array||ue instanceof ArrayBuffer),St=ue=>ue&&(ue instanceof Uint8Array||ue instanceof Int8Array||ue instanceof ArrayBuffer),tt=ue=>wt(ue)||xt("Value is not of a supported TypedArray type."),Et=new TextDecoder("utf-8"),dn=function(ue,_e,Se){return Et.decode(Ze(ue,_e,Se))},ve=function(ue){return St(ue)?dn(ue instanceof ArrayBuffer?new Uint8Array(ue):ue):Array.isArray(ue)?ue.join(""):(oe.isPtr(ue)&&(ue=oe.cstrToJs(ue)),ue)};class Re extends Error{constructor(..._e){_e.length===2&&typeof _e[1]=="object"?super(..._e):_e.length?super(_e.join(" ")):super("Allocation failed."),this.resultCode=H.SQLITE_NOMEM,this.name="WasmAllocError"}}Re.toss=(...ue)=>{throw new Re(...ue)},Object.assign(H,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(ue,_e,Se,dt,Ot,En,jn,Jn,jt)=>{},sqlite3_create_function:(ue,_e,Se,dt,Ot,En,jn,Jn)=>{},sqlite3_create_window_function:(ue,_e,Se,dt,Ot,En,jn,Jn,jt,We)=>{},sqlite3_prepare_v3:(ue,_e,Se,dt,Ot,En)=>{},sqlite3_prepare_v2:(ue,_e,Se,dt,Ot)=>{},sqlite3_exec:(ue,_e,Se,dt,Ot)=>{},sqlite3_randomness:(ue,_e)=>{}});const Xe={affirmBindableTypedArray:tt,flexibleString:ve,bigIntFits32:mt,bigIntFits64:Qt,bigIntFitsDouble:rt,isBindableTypedArray:wt,isInt32:zt,isSQLableTypedArray:St,isTypedArray:Ct,typedArrayToString:dn,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:Qe,toss:function(...ue){throw new Error(ue.join(" "))},toss3:xt,typedArrayPart:Ze,affirmDbHeader:function(ue){ue instanceof ArrayBuffer&&(ue=new Uint8Array(ue));const _e="SQLite format 3";_e.length>ue.byteLength&&xt("Input does not contain an SQLite3 database header.");for(let Se=0;Se<_e.length;++Se)_e.charCodeAt(Se)!==ue[Se]&&xt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(ue){ue instanceof ArrayBuffer&&(ue=new Uint8Array(ue));const _e=ue.byteLength;(_e<512||_e%512!==0)&&xt("Byte array size",_e,"is invalid for an SQLite3 db."),Xe.affirmDbHeader(ue)}};Object.assign(oe,{ptrSizeof:U.wasmPtrSizeof||4,ptrIR:U.wasmPtrIR||"i32",bigIntEnabled:!!U.bigIntEnabled,exports:U.exports||xt("Missing API config.exports (WASM module exports)."),memory:U.memory||U.exports.memory||xt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),oe.allocFromTypedArray=function(ue){ue instanceof ArrayBuffer&&(ue=new Uint8Array(ue)),tt(ue);const _e=oe.alloc(ue.byteLength||1);return oe.heapForSize(ue.constructor).set(ue.byteLength?ue:[0],_e),_e};{const ue=U.allocExportName,_e=U.deallocExportName,Se=U.reallocExportName;for(const dt of[ue,_e,Se])oe.exports[dt]instanceof Function||xt("Missing required exports[",dt,"] function.");oe.alloc=function dt(Ot){return dt.impl(Ot)||Re.toss("Failed to allocate",Ot," bytes.")},oe.alloc.impl=oe.exports[ue],oe.realloc=function dt(Ot,En){const jn=dt.impl(Ot,En);return En?jn||Re.toss("Failed to reallocate",En," bytes."):0},oe.realloc.impl=oe.exports[Se],oe.dealloc=oe.exports[_e]}oe.compileOptionUsed=function ue(_e){if(arguments.length){if(Array.isArray(_e)){const Se={};return _e.forEach(dt=>{Se[dt]=H.sqlite3_compileoption_used(dt)}),Se}else if(typeof _e=="object")return Object.keys(_e).forEach(Se=>{_e[Se]=H.sqlite3_compileoption_used(Se)}),_e}else{if(ue._result)return ue._result;ue._opt||(ue._rx=/^([^=]+)=(.+)/,ue._rxInt=/^-?\d+$/,ue._opt=function(jn,Jn){const jt=ue._rx.exec(jn);Jn[0]=jt?jt[1]:jn,Jn[1]=jt?ue._rxInt.test(jt[2])?+jt[2]:jt[2]:!0});const Se={},dt=[0,0];let Ot=0,En;for(;En=H.sqlite3_compileoption_get(Ot++);)ue._opt(En,dt),Se[dt[0]]=dt[1];return ue._result=Se}return typeof _e=="string"?!!H.sqlite3_compileoption_used(_e):!1},oe.pstack=Object.assign(Object.create(null),{restore:oe.exports.sqlite3__wasm_pstack_restore,alloc:function(ue){return typeof ue=="string"&&!(ue=oe.sizeofIR(ue))&&Re.toss("Invalid value for pstack.alloc(",arguments[0],")"),oe.exports.sqlite3__wasm_pstack_alloc(ue)||Re.toss("Could not allocate",ue,"bytes from the pstack.")},allocChunks:function(ue,_e){typeof _e=="string"&&!(_e=oe.sizeofIR(_e))&&Re.toss("Invalid size value for allocChunks(",arguments[1],")");const Se=oe.pstack.alloc(ue*_e),dt=[];let Ot=0,En=0;for(;Ot<ue;++Ot,En+=_e)dt.push(Se+En);return dt},allocPtr:(ue=1,_e=!0)=>ue===1?oe.pstack.alloc(_e?8:oe.ptrSizeof):oe.pstack.allocChunks(ue,_e?8:oe.ptrSizeof),call:function(ue){const _e=oe.pstack.pointer;try{return ue(Le)}finally{oe.pstack.restore(_e)}}}),Object.defineProperties(oe.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:oe.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:oe.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:oe.exports.sqlite3__wasm_pstack_remaining}}),H.sqlite3_randomness=(...ue)=>{if(ue.length===1&&Xe.isTypedArray(ue[0])&&ue[0].BYTES_PER_ELEMENT===1){const _e=ue[0];if(_e.byteLength===0)return oe.exports.sqlite3_randomness(0,0),_e;const Se=oe.pstack.pointer;try{let dt=_e.byteLength,Ot=0;const En=oe.exports.sqlite3_randomness,jn=oe.heap8u(),Jn=dt<512?dt:512,jt=oe.pstack.alloc(Jn);do{const We=dt>Jn?Jn:dt;En(We,jt),_e.set(Ze(jn,jt,jt+We),Ot),dt-=We,Ot+=We}while(dt>0)}catch(dt){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",dt)}finally{oe.pstack.restore(Se)}return _e}oe.exports.sqlite3_randomness(...ue)};let qt;if(H.sqlite3_wasmfs_opfs_dir=function(){if(qt!==void 0)return qt;const ue=U.wasmfsOpfsDir;if(!ue||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return qt="";try{return ue&&oe.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],ue)===0?qt=ue:qt=""}catch{return qt=""}},H.sqlite3_wasmfs_filename_is_persistent=function(ue){const _e=H.sqlite3_wasmfs_opfs_dir();return _e&&ue?ue.startsWith(_e+"/"):!1},H.sqlite3_js_db_uses_vfs=function(ue,_e,Se=0){try{const dt=H.sqlite3_vfs_find(_e);return dt?ue?dt===H.sqlite3_js_db_vfs(ue,Se)?dt:!1:dt===H.sqlite3_vfs_find(0)?dt:!1:!1}catch{return!1}},H.sqlite3_js_vfs_list=function(){const ue=[];let _e=H.sqlite3_vfs_find(0);for(;_e;){const Se=new H.sqlite3_vfs(_e);ue.push(oe.cstrToJs(Se.$zName)),_e=Se.$pNext,Se.dispose()}return ue},H.sqlite3_js_db_export=function(ue,_e=0){ue=oe.xWrap.testConvertArg("sqlite3*",ue),ue||xt("Invalid sqlite3* argument."),oe.bigIntEnabled||xt("BigInt64 support is not enabled.");const Se=oe.scopedAllocPush();let dt;try{const Ot=oe.scopedAlloc(8+oe.ptrSizeof),En=Ot+8,jn=_e?oe.isPtr(_e)?_e:oe.scopedAllocCString(""+_e):0;let Jn=oe.exports.sqlite3__wasm_db_serialize(ue,jn,En,Ot,0);Jn&&xt("Database serialization failed with code",Le.capi.sqlite3_js_rc_str(Jn)),dt=oe.peekPtr(En);const jt=oe.peek(Ot,"i64");return Jn=jt?oe.heap8u().slice(dt,dt+Number(jt)):new Uint8Array,Jn}finally{dt&&oe.exports.sqlite3_free(dt),oe.scopedAllocPop(Se)}},H.sqlite3_js_db_vfs=(ue,_e=0)=>Xe.sqlite3__wasm_db_vfs(ue,_e),H.sqlite3_js_aggregate_context=(ue,_e)=>H.sqlite3_aggregate_context(ue,_e)||(_e?Re.toss("Cannot allocate",_e,"bytes for sqlite3_aggregate_context()"):0),H.sqlite3_js_posix_create_file=function(ue,_e,Se){let dt;_e&&oe.isPtr(_e)?dt=_e:_e instanceof ArrayBuffer||_e instanceof Uint8Array?(dt=oe.allocFromTypedArray(_e),(arguments.length<3||!Xe.isInt32(Se)||Se<0)&&(Se=_e.byteLength)):Tt.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Xe.isInt32(Se)||Se<0)&&Tt.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const Ot=Xe.sqlite3__wasm_posix_create_file(ue,dt,Se);Ot&&Tt.toss("Creation of file failed with sqlite3 result code",H.sqlite3_js_rc_str(Ot))}finally{oe.dealloc(dt)}},H.sqlite3_js_vfs_create_file=function(ue,_e,Se,dt){U.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let Ot;Se?(oe.isPtr(Se)?Ot=Se:Se instanceof ArrayBuffer&&(Se=new Uint8Array(Se)),Se instanceof Uint8Array?(Ot=oe.allocFromTypedArray(Se),(arguments.length<4||!Xe.isInt32(dt)||dt<0)&&(dt=Se.byteLength)):Tt.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):Ot=0,(!Xe.isInt32(dt)||dt<0)&&(oe.dealloc(Ot),Tt.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const En=Xe.sqlite3__wasm_vfs_create_file(ue,_e,Ot,dt);En&&Tt.toss("Creation of file failed with sqlite3 result code",H.sqlite3_js_rc_str(En))}finally{oe.dealloc(Ot)}},H.sqlite3_js_sql_to_string=ue=>{if(typeof ue=="string")return ue;const _e=ve(v);return _e===v?void 0:_e},Xe.isUIThread()){const ue=function(_e){const Se=Object.create(null);return Se.prefix="kvvfs-"+_e,Se.stores=[],(_e==="session"||_e==="")&&Se.stores.push(globalThis.sessionStorage),(_e==="local"||_e==="")&&Se.stores.push(globalThis.localStorage),Se};H.sqlite3_js_kvvfs_clear=function(_e=""){let Se=0;const dt=ue(_e);return dt.stores.forEach(Ot=>{const En=[];let jn;for(jn=0;jn<Ot.length;++jn){const Jn=Ot.key(jn);Jn.startsWith(dt.prefix)&&En.push(Jn)}En.forEach(Jn=>Ot.removeItem(Jn)),Se+=En.length}),Se},H.sqlite3_js_kvvfs_size=function(_e=""){let Se=0;const dt=ue(_e);return dt.stores.forEach(Ot=>{let En;for(En=0;En<Ot.length;++En){const jn=Ot.key(En);jn.startsWith(dt.prefix)&&(Se+=jn.length,Se+=Ot.getItem(jn).length)}}),Se*2}}H.sqlite3_db_config=function(ue,_e,...Se){switch(this.s||(this.s=oe.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=oe.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=oe.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),_e){case H.SQLITE_DBCONFIG_ENABLE_FKEY:case H.SQLITE_DBCONFIG_ENABLE_TRIGGER:case H.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case H.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case H.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case H.SQLITE_DBCONFIG_ENABLE_QPSG:case H.SQLITE_DBCONFIG_TRIGGER_EQP:case H.SQLITE_DBCONFIG_RESET_DATABASE:case H.SQLITE_DBCONFIG_DEFENSIVE:case H.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case H.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case H.SQLITE_DBCONFIG_DQS_DML:case H.SQLITE_DBCONFIG_DQS_DDL:case H.SQLITE_DBCONFIG_ENABLE_VIEW:case H.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case H.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case H.SQLITE_DBCONFIG_STMT_SCANSTATUS:case H.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(ue,_e,Se[0],Se[1]||0);case H.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(ue,_e,Se[0],Se[1],Se[2]);case H.SQLITE_DBCONFIG_MAINDBNAME:return this.s(ue,_e,Se[0]);default:return H.SQLITE_MISUSE}}.bind(Object.create(null)),H.sqlite3_value_to_js=function(ue,_e=!0){let Se;const dt=H.sqlite3_value_type(ue);switch(dt){case H.SQLITE_INTEGER:oe.bigIntEnabled?(Se=H.sqlite3_value_int64(ue),Xe.bigIntFitsDouble(Se)&&(Se=Number(Se))):Se=H.sqlite3_value_double(ue);break;case H.SQLITE_FLOAT:Se=H.sqlite3_value_double(ue);break;case H.SQLITE_TEXT:Se=H.sqlite3_value_text(ue);break;case H.SQLITE_BLOB:{const Ot=H.sqlite3_value_bytes(ue),En=H.sqlite3_value_blob(ue);Ot&&!En&&Le.WasmAllocError.toss("Cannot allocate memory for blob argument of",Ot,"byte(s)"),Se=Ot?oe.heap8u().slice(En,En+Number(Ot)):null;break}case H.SQLITE_NULL:Se=null;break;default:_e&&xt(H.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",dt),Se=void 0}return Se},H.sqlite3_values_to_js=function(ue,_e,Se=!0){let dt;const Ot=[];for(dt=0;dt<ue;++dt)Ot.push(H.sqlite3_value_to_js(oe.peekPtr(_e+oe.ptrSizeof*dt),Se));return Ot},H.sqlite3_result_error_js=function(ue,_e){_e instanceof Re?H.sqlite3_result_error_nomem(ue):H.sqlite3_result_error(ue,""+_e,-1)},H.sqlite3_result_js=function(ue,_e){if(_e instanceof Error){H.sqlite3_result_error_js(ue,_e);return}try{switch(typeof _e){case"undefined":break;case"boolean":H.sqlite3_result_int(ue,_e?1:0);break;case"bigint":Xe.bigIntFits32(_e)?H.sqlite3_result_int(ue,Number(_e)):Xe.bigIntFitsDouble(_e)?H.sqlite3_result_double(ue,Number(_e)):oe.bigIntEnabled?Xe.bigIntFits64(_e)?H.sqlite3_result_int64(ue,_e):xt("BigInt value",_e.toString(),"is too BigInt for int64."):xt("BigInt value",_e.toString(),"is too BigInt.");break;case"number":{let Se;Xe.isInt32(_e)?Se=H.sqlite3_result_int:oe.bigIntEnabled&&Number.isInteger(_e)&&Xe.bigIntFits64(BigInt(_e))?Se=H.sqlite3_result_int64:Se=H.sqlite3_result_double,Se(ue,_e);break}case"string":{const[Se,dt]=oe.allocCString(_e,!0);H.sqlite3_result_text(ue,Se,dt,H.SQLITE_WASM_DEALLOC);break}case"object":if(_e===null){H.sqlite3_result_null(ue);break}else if(Xe.isBindableTypedArray(_e)){const Se=oe.allocFromTypedArray(_e);H.sqlite3_result_blob(ue,Se,_e.byteLength,H.SQLITE_WASM_DEALLOC);break}default:xt("Don't not how to handle this UDF result value:",typeof _e,_e)}}catch(Se){H.sqlite3_result_error_js(ue,Se)}},H.sqlite3_column_js=function(ue,_e,Se=!0){const dt=H.sqlite3_column_value(ue,_e);return dt===0?void 0:H.sqlite3_value_to_js(dt,Se)};const Ie=function(ue,_e,Se){Se=H[Se],this.ptr?oe.pokePtr(this.ptr,0):this.ptr=oe.allocPtr();const dt=Se(ue,_e,this.ptr);if(dt)return Tt.toss(dt,arguments[2]+"() failed with code "+dt);const Ot=oe.peekPtr(this.ptr);return Ot?H.sqlite3_value_to_js(Ot,!0):void 0}.bind(Object.create(null));H.sqlite3_preupdate_new_js=(ue,_e)=>Ie(ue,_e,"sqlite3_preupdate_new"),H.sqlite3_preupdate_old_js=(ue,_e)=>Ie(ue,_e,"sqlite3_preupdate_old"),H.sqlite3changeset_new_js=(ue,_e)=>Ie(ue,_e,"sqlite3changeset_new"),H.sqlite3changeset_old_js=(ue,_e)=>Ie(ue,_e,"sqlite3changeset_old");const Le={WasmAllocError:Re,SQLite3Error:Tt,capi:H,util:Xe,wasm:oe,config:U,version:Object.create(null),client:void 0,asyncPostInit:async function ue(){if(ue.isReady instanceof Promise)return ue.isReady;let _e=C.initializersAsync;delete C.initializersAsync;const Se=async()=>(Le.__isUnderTest||(delete Le.util,delete Le.StructBinder),Le),dt=En=>{throw U.error("an async sqlite3 initializer failed:",En),En};if(!_e||!_e.length)return ue.isReady=Se().catch(dt);_e=_e.map(En=>En instanceof Function?async jn=>En(Le):En),_e.push(Se);let Ot=Promise.resolve(Le);for(;_e.length;)Ot=Ot.then(_e.shift());return ue.isReady=Ot.catch(dt)},scriptInfo:void 0};try{C.initializers.forEach(ue=>{ue(Le)})}catch(ue){throw console.error("sqlite3 bootstrap initializer threw:",ue),ue}return delete C.initializers,C.sqlite3=Le,Le},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(C){C.bigIntEnabled===void 0&&(C.bigIntEnabled=!!globalThis.BigInt64Array);const B=(...ve)=>{throw new Error(ve.join(" "))};C.exports||Object.defineProperty(C,"exports",{enumerable:!0,configurable:!0,get:()=>C.instance&&C.instance.exports});const U=C.pointerIR||"i32",H=C.ptrSizeof=U==="i32"?4:U==="i64"?8:B("Unhandled ptrSizeof:",U),oe=Object.create(null);oe.heapSize=0,oe.memory=null,oe.freeFuncIndexes=[],oe.scopedAlloc=[],oe.utf8Decoder=new TextDecoder,oe.utf8Encoder=new TextEncoder("utf-8"),C.sizeofIR=ve=>{switch(ve){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return H;default:return(""+ve).endsWith("*")?H:void 0}};const De=function(){if(!oe.memory)oe.memory=C.memory instanceof WebAssembly.Memory?C.memory:C.exports.memory;else if(oe.heapSize===oe.memory.buffer.byteLength)return oe;const ve=oe.memory.buffer;return oe.HEAP8=new Int8Array(ve),oe.HEAP8U=new Uint8Array(ve),oe.HEAP16=new Int16Array(ve),oe.HEAP16U=new Uint16Array(ve),oe.HEAP32=new Int32Array(ve),oe.HEAP32U=new Uint32Array(ve),C.bigIntEnabled&&(oe.HEAP64=new BigInt64Array(ve),oe.HEAP64U=new BigUint64Array(ve)),oe.HEAP32F=new Float32Array(ve),oe.HEAP64F=new Float64Array(ve),oe.heapSize=ve.byteLength,oe};C.heap8=()=>De().HEAP8,C.heap8u=()=>De().HEAP8U,C.heap16=()=>De().HEAP16,C.heap16u=()=>De().HEAP16U,C.heap32=()=>De().HEAP32,C.heap32u=()=>De().HEAP32U,C.heapForSize=function(ve,Re=!0){const Xe=oe.memory&&oe.heapSize===oe.memory.buffer.byteLength?oe:De();switch(ve){case Int8Array:return Xe.HEAP8;case Uint8Array:return Xe.HEAP8U;case Int16Array:return Xe.HEAP16;case Uint16Array:return Xe.HEAP16U;case Int32Array:return Xe.HEAP32;case Uint32Array:return Xe.HEAP32U;case 8:return Re?Xe.HEAP8U:Xe.HEAP8;case 16:return Re?Xe.HEAP16U:Xe.HEAP16;case 32:return Re?Xe.HEAP32U:Xe.HEAP32;case 64:if(Xe.HEAP64)return Re?Xe.HEAP64U:Xe.HEAP64;break;default:if(C.bigIntEnabled){if(ve===globalThis.BigUint64Array)return Xe.HEAP64U;if(ve===globalThis.BigInt64Array)return Xe.HEAP64;break}}B("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},C.functionTable=function(){return C.exports.__indirect_function_table},C.functionEntry=function(ve){const Re=C.functionTable();return ve<Re.length?Re.get(ve):void 0},C.jsFuncToWasm=function ve(Re,Xe){if(ve._||(ve._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(Le,ue,_e){_e<128?Le[ue](_e):Le[ue](_e%128|128,_e>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(Le){const ue=ve._.rxJSig.exec(Le);return ue?ue[2]:Le.substr(1)},letterType:Le=>ve._.sigTypes[Le]||B("Invalid signature letter:",Le),pushSigType:(Le,ue)=>Le.push(ve._.typeCodes[ve._.letterType(ue)])}),typeof Re=="string"){const Le=Xe;Xe=Re,Re=Le}const qt=ve._.sigParams(Xe),Ie=[1,96];ve._.uleb128Encode(Ie,"push",qt.length);for(const Le of qt)ve._.pushSigType(Ie,Le);return Xe[0]==="v"?Ie.push(0):(Ie.push(1),ve._.pushSigType(Ie,Xe[0])),ve._.uleb128Encode(Ie,"unshift",Ie.length),Ie.unshift(0,97,115,109,1,0,0,0,1),Ie.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(Ie)),{e:{f:Re}}).exports.f};const Be=function(Re,Xe,qt){if(qt&&!oe.scopedAlloc.length&&B("No scopedAllocPush() scope is active."),typeof Re=="string"){const _e=Xe;Xe=Re,Re=_e}(typeof Xe!="string"||!(Re instanceof Function))&&B("Invalid arguments: expecting (function,signature) or (signature,function).");const Ie=C.functionTable(),Le=Ie.length;let ue;for(;oe.freeFuncIndexes.length&&(ue=oe.freeFuncIndexes.pop(),Ie.get(ue));){ue=null;continue}ue||(ue=Le,Ie.grow(1));try{return Ie.set(ue,Re),qt&&oe.scopedAlloc[oe.scopedAlloc.length-1].push(ue),ue}catch(_e){if(!(_e instanceof TypeError))throw ue===Le&&oe.freeFuncIndexes.push(Le),_e}try{const _e=C.jsFuncToWasm(Re,Xe);Ie.set(ue,_e),qt&&oe.scopedAlloc[oe.scopedAlloc.length-1].push(ue)}catch(_e){throw ue===Le&&oe.freeFuncIndexes.push(Le),_e}return ue};C.installFunction=(ve,Re)=>Be(ve,Re,!1),C.scopedInstallFunction=(ve,Re)=>Be(ve,Re,!0),C.uninstallFunction=function(ve){if(!ve&&ve!==0)return;const Re=oe.freeFuncIndexes,Xe=C.functionTable();Re.push(ve);const qt=Xe.get(ve);return Xe.set(ve,null),qt},C.peek=function(Re,Xe="i8"){Xe.endsWith("*")&&(Xe=U);const qt=oe.memory&&oe.heapSize===oe.memory.buffer.byteLength?oe:De(),Ie=Array.isArray(Re)?[]:void 0;let Le;do{switch(Ie&&(Re=arguments[0].shift()),Xe){case"i1":case"i8":Le=qt.HEAP8[Re>>0];break;case"i16":Le=qt.HEAP16[Re>>1];break;case"i32":Le=qt.HEAP32[Re>>2];break;case"float":case"f32":Le=qt.HEAP32F[Re>>2];break;case"double":case"f64":Le=Number(qt.HEAP64F[Re>>3]);break;case"i64":if(C.bigIntEnabled){Le=BigInt(qt.HEAP64[Re>>3]);break}default:B("Invalid type for peek():",Xe)}Ie&&Ie.push(Le)}while(Ie&&arguments[0].length);return Ie||Le},C.poke=function(ve,Re,Xe="i8"){Xe.endsWith("*")&&(Xe=U);const qt=oe.memory&&oe.heapSize===oe.memory.buffer.byteLength?oe:De();for(const Ie of Array.isArray(ve)?ve:[ve])switch(Xe){case"i1":case"i8":qt.HEAP8[Ie>>0]=Re;continue;case"i16":qt.HEAP16[Ie>>1]=Re;continue;case"i32":qt.HEAP32[Ie>>2]=Re;continue;case"float":case"f32":qt.HEAP32F[Ie>>2]=Re;continue;case"double":case"f64":qt.HEAP64F[Ie>>3]=Re;continue;case"i64":if(qt.HEAP64){qt.HEAP64[Ie>>3]=BigInt(Re);continue}default:B("Invalid type for poke(): "+Xe)}return this},C.peekPtr=(...ve)=>C.peek(ve.length===1?ve[0]:ve,U),C.pokePtr=(ve,Re=0)=>C.poke(ve,Re,U),C.peek8=(...ve)=>C.peek(ve.length===1?ve[0]:ve,"i8"),C.poke8=(ve,Re)=>C.poke(ve,Re,"i8"),C.peek16=(...ve)=>C.peek(ve.length===1?ve[0]:ve,"i16"),C.poke16=(ve,Re)=>C.poke(ve,Re,"i16"),C.peek32=(...ve)=>C.peek(ve.length===1?ve[0]:ve,"i32"),C.poke32=(ve,Re)=>C.poke(ve,Re,"i32"),C.peek64=(...ve)=>C.peek(ve.length===1?ve[0]:ve,"i64"),C.poke64=(ve,Re)=>C.poke(ve,Re,"i64"),C.peek32f=(...ve)=>C.peek(ve.length===1?ve[0]:ve,"f32"),C.poke32f=(ve,Re)=>C.poke(ve,Re,"f32"),C.peek64f=(...ve)=>C.peek(ve.length===1?ve[0]:ve,"f64"),C.poke64f=(ve,Re)=>C.poke(ve,Re,"f64"),C.getMemValue=C.peek,C.getPtrValue=C.peekPtr,C.setMemValue=C.poke,C.setPtrValue=C.pokePtr,C.isPtr32=ve=>typeof ve=="number"&&ve===(ve|0)&&ve>=0,C.isPtr=C.isPtr32,C.cstrlen=function(ve){if(!ve||!C.isPtr(ve))return null;const Re=De().HEAP8U;let Xe=ve;for(;Re[Xe]!==0;++Xe);return Xe-ve};const Tt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,xt=function(ve,Re,Xe){return oe.utf8Decoder.decode(ve.buffer instanceof Tt?ve.slice(Re,Xe):ve.subarray(Re,Xe))};C.cstrToJs=function(ve){const Re=C.cstrlen(ve);return Re?xt(De().HEAP8U,ve,ve+Re):Re===null?Re:""},C.jstrlen=function(ve){if(typeof ve!="string")return null;const Re=ve.length;let Xe=0;for(let qt=0;qt<Re;++qt){let Ie=ve.charCodeAt(qt);Ie>=55296&&Ie<=57343&&(Ie=65536+((Ie&1023)<<10)|ve.charCodeAt(++qt)&1023),Ie<=127?++Xe:Ie<=2047?Xe+=2:Ie<=65535?Xe+=3:Xe+=4}return Xe},C.jstrcpy=function(ve,Re,Xe=0,qt=-1,Ie=!0){if((!Re||!(Re instanceof Int8Array)&&!(Re instanceof Uint8Array))&&B("jstrcpy() target must be an Int8Array or Uint8Array."),qt<0&&(qt=Re.length-Xe),!(qt>0)||!(Xe>=0))return 0;let Le=0,ue=ve.length;const _e=Xe,Se=Xe+qt-(Ie?1:0);for(;Le<ue&&Xe<Se;++Le){let dt=ve.charCodeAt(Le);if(dt>=55296&&dt<=57343&&(dt=65536+((dt&1023)<<10)|ve.charCodeAt(++Le)&1023),dt<=127){if(Xe>=Se)break;Re[Xe++]=dt}else if(dt<=2047){if(Xe+1>=Se)break;Re[Xe++]=192|dt>>6,Re[Xe++]=128|dt&63}else if(dt<=65535){if(Xe+2>=Se)break;Re[Xe++]=224|dt>>12,Re[Xe++]=128|dt>>6&63,Re[Xe++]=128|dt&63}else{if(Xe+3>=Se)break;Re[Xe++]=240|dt>>18,Re[Xe++]=128|dt>>12&63,Re[Xe++]=128|dt>>6&63,Re[Xe++]=128|dt&63}}return Ie&&(Re[Xe++]=0),Xe-_e},C.cstrncpy=function(ve,Re,Xe){if((!ve||!Re)&&B("cstrncpy() does not accept NULL strings."),Xe<0)Xe=C.cstrlen(strPtr)+1;else if(!(Xe>0))return 0;const qt=C.heap8u();let Ie=0,Le;for(;Ie<Xe&&(Le=qt[Re+Ie]);++Ie)qt[ve+Ie]=Le;return Ie<Xe&&(qt[ve+Ie++]=0),Ie},C.jstrToUintArray=(ve,Re=!1)=>oe.utf8Encoder.encode(Re?ve+"\0":ve);const zt=(ve,Re)=>{(!(ve.alloc instanceof Function)||!(ve.dealloc instanceof Function))&&B("Object is missing alloc() and/or dealloc() function(s)","required by",Re+"().")},Qt=function(ve,Re,Xe,qt){if(zt(C,qt),typeof ve!="string")return null;{const Ie=oe.utf8Encoder.encode(ve),Le=Xe(Ie.length+1),ue=De().HEAP8U;return ue.set(Ie,Le),ue[Le+Ie.length]=0,Re?[Le,Ie.length]:Le}};C.allocCString=(ve,Re=!1)=>Qt(ve,Re,C.alloc,"allocCString()"),C.scopedAllocPush=function(){zt(C,"scopedAllocPush");const ve=[];return oe.scopedAlloc.push(ve),ve},C.scopedAllocPop=function(ve){zt(C,"scopedAllocPop");const Re=arguments.length?oe.scopedAlloc.indexOf(ve):oe.scopedAlloc.length-1;Re<0&&B("Invalid state object for scopedAllocPop()."),arguments.length===0&&(ve=oe.scopedAlloc[Re]),oe.scopedAlloc.splice(Re,1);for(let Xe;Xe=ve.pop();)C.functionEntry(Xe)?C.uninstallFunction(Xe):C.dealloc(Xe)},C.scopedAlloc=function(ve){oe.scopedAlloc.length||B("No scopedAllocPush() scope is active.");const Re=C.alloc(ve);return oe.scopedAlloc[oe.scopedAlloc.length-1].push(Re),Re},Object.defineProperty(C.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>oe.scopedAlloc.length,set:()=>B("The 'active' property is read-only.")}),C.scopedAllocCString=(ve,Re=!1)=>Qt(ve,Re,C.scopedAlloc,"scopedAllocCString()");const mt=function(ve,Re){const Xe=C[ve?"scopedAlloc":"alloc"]((Re.length+1)*C.ptrSizeof);let qt=0;return Re.forEach(Ie=>{C.pokePtr(Xe+C.ptrSizeof*qt++,C[ve?"scopedAllocCString":"allocCString"](""+Ie))}),C.pokePtr(Xe+C.ptrSizeof*qt,0),Xe};C.scopedAllocMainArgv=ve=>mt(!0,ve),C.allocMainArgv=ve=>mt(!1,ve),C.cArgvToJs=(ve,Re)=>{const Xe=[];for(let qt=0;qt<ve;++qt){const Ie=C.peekPtr(Re+C.ptrSizeof*qt);Xe.push(Ie?C.cstrToJs(Ie):null)}return Xe},C.scopedAllocCall=function(ve){C.scopedAllocPush();try{return ve()}finally{C.scopedAllocPop()}};const rt=function(ve,Re,Xe){zt(C,Xe);const qt=Re?"i64":U;let Ie=C[Xe](ve*(Re?8:H));if(C.poke(Ie,0,qt),ve===1)return Ie;const Le=[Ie];for(let ue=1;ue<ve;++ue)Ie+=Re?8:H,Le[ue]=Ie,C.poke(Ie,0,qt);return Le};C.allocPtr=(ve=1,Re=!0)=>rt(ve,Re,"alloc"),C.scopedAllocPtr=(ve=1,Re=!0)=>rt(ve,Re,"scopedAlloc"),C.xGet=function(ve){return C.exports[ve]||B("Cannot find exported symbol:",ve)};const Ct=(ve,Re)=>B(ve+"() requires",Re,"argument(s).");C.xCall=function(ve,...Re){const Xe=ve instanceof Function?ve:C.xGet(ve);return Xe instanceof Function||B("Exported symbol",ve,"is not a function."),Xe.length!==Re.length&&Ct(Xe===ve?Xe.name:ve,Xe.length),arguments.length===2&&Array.isArray(arguments[1])?Xe.apply(null,arguments[1]):Xe.apply(null,Re)},oe.xWrap=Object.create(null),oe.xWrap.convert=Object.create(null),oe.xWrap.convert.arg=new Map,oe.xWrap.convert.result=new Map;const ze=oe.xWrap.convert.arg,Qe=oe.xWrap.convert.result;C.bigIntEnabled&&ze.set("i64",ve=>BigInt(ve));const Ze=U==="i32"?ve=>ve|0:ve=>BigInt(ve)|BigInt(0);ze.set("i32",Ze).set("i16",ve=>(ve|0)&65535).set("i8",ve=>(ve|0)&255).set("f32",ve=>Number(ve).valueOf()).set("float",ze.get("f32")).set("f64",ze.get("f32")).set("double",ze.get("f64")).set("int",ze.get("i32")).set("null",ve=>ve).set(null,ze.get("null")).set("**",Ze).set("*",Ze),Qe.set("*",Ze).set("pointer",Ze).set("number",ve=>Number(ve)).set("void",ve=>{}).set("null",ve=>ve).set(null,Qe.get("null"));{const ve=["i8","i16","i32","int","f32","float","f64","double"];C.bigIntEnabled&&ve.push("i64");const Re=ze.get(U);for(const Xe of ve)ze.set(Xe+"*",Re),Qe.set(Xe+"*",Re),Qe.set(Xe,ze.get(Xe)||B("Missing arg converter:",Xe))}const wt=function(ve){return typeof ve=="string"?C.scopedAllocCString(ve):ve?Ze(ve):null};ze.set("string",wt).set("utf8",wt).set("pointer",wt),Qe.set("string",ve=>C.cstrToJs(ve)).set("utf8",Qe.get("string")).set("string:dealloc",ve=>{try{return ve?C.cstrToJs(ve):null}finally{C.dealloc(ve)}}).set("utf8:dealloc",Qe.get("string:dealloc")).set("json",ve=>JSON.parse(C.cstrToJs(ve))).set("json:dealloc",ve=>{try{return ve?JSON.parse(C.cstrToJs(ve)):null}finally{C.dealloc(ve)}});const St=class{constructor(ve){this.name=ve.name||"unnamed adapter"}convertArg(ve,Re,Xe){B("AbstractArgAdapter must be subclassed.")}};ze.FuncPtrAdapter=class Ld extends St{constructor(Re){super(Re),ze.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",Re),this.name=Re.name||"unnamed",this.signature=Re.signature,Re.contextKey instanceof Function&&(this.contextKey=Re.contextKey,Re.bindScope||(Re.bindScope="context")),this.bindScope=Re.bindScope||B("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Ld.bindScopes.indexOf(Re.bindScope)<0&&B("Invalid options.bindScope ("+Re.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Ld.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=Re.callProxy instanceof Function?Re.callProxy:void 0}contextKey(Re,Xe){return this}contextMap(Re){const Xe=this.__cmap||(this.__cmap=new Map);let qt=Xe.get(Re);return qt===void 0&&Xe.set(Re,qt=[]),qt}convertArg(Re,Xe,qt){let Ie=this.singleton;if(!Ie&&this.isContext&&(Ie=this.contextMap(this.contextKey(Xe,qt))),Ie&&Ie[0]===Re)return Ie[1];if(Re instanceof Function){this.callProxy&&(Re=this.callProxy(Re));const Le=Be(Re,this.signature,this.isTransient);if(Ld.debugFuncInstall&&Ld.debugOut("FuncPtrAdapter installed",this,this.contextKey(Xe,qt),"@"+Le,Re),Ie){if(Ie[1]){Ld.debugFuncInstall&&Ld.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Xe,qt),"@"+Ie[1],Re);try{oe.scopedAlloc[oe.scopedAlloc.length-1].push(Ie[1])}catch{}}Ie[0]=Re,Ie[1]=Le}return Le}else if(C.isPtr(Re)||Re===null||Re===void 0){if(Ie&&Ie[1]&&Ie[1]!==Re){Ld.debugFuncInstall&&Ld.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Xe,qt),"@"+Ie[1],Re);try{oe.scopedAlloc[oe.scopedAlloc.length-1].push(Ie[1])}catch{}Ie[0]=Ie[1]=Re|0}return Re||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},ze.FuncPtrAdapter.warnOnUse=!1,ze.FuncPtrAdapter.debugFuncInstall=!1,ze.FuncPtrAdapter.debugOut=console.debug.bind(console),ze.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const tt=ve=>ze.get(ve)||B("Argument adapter not found:",ve),Et=ve=>Qe.get(ve)||B("Result adapter not found:",ve);oe.xWrap.convertArg=(ve,...Re)=>tt(ve)(...Re),oe.xWrap.convertArgNoCheck=(ve,...Re)=>ze.get(ve)(...Re),oe.xWrap.convertResult=(ve,Re)=>ve===null?Re:ve?Et(ve)(Re):void 0,oe.xWrap.convertResultNoCheck=(ve,Re)=>ve===null?Re:ve?Qe.get(ve)(Re):void 0,C.xWrap=function(ve,Re,...Xe){arguments.length===3&&Array.isArray(arguments[2])&&(Xe=arguments[2]),C.isPtr(ve)&&(ve=C.functionEntry(ve)||B("Function pointer not found in WASM function table."));const qt=ve instanceof Function,Ie=qt?ve:C.xGet(ve);if(qt&&(ve=Ie.name||"unnamed function"),Xe.length!==Ie.length&&Ct(ve,Ie.length),Re===null&&Ie.length===0)return Ie;Re!=null&&Et(Re);for(const ue of Xe)ue instanceof St?ze.set(ue,(..._e)=>ue.convertArg(..._e)):tt(ue);const Le=oe.xWrap;return Ie.length===0?(...ue)=>ue.length?Ct(ve,Ie.length):Le.convertResult(Re,Ie.call(null)):function(...ue){ue.length!==Ie.length&&Ct(ve,Ie.length);const _e=C.scopedAllocPush();try{let Se=0;for(;Se<ue.length;++Se)ue[Se]=Le.convertArgNoCheck(Xe[Se],ue[Se],ue,Se);return Le.convertResultNoCheck(Re,Ie.apply(null,ue))}finally{C.scopedAllocPop(_e)}}};const dn=function(ve,Re,Xe,qt,Ie,Le){if(typeof Xe=="string"){if(Re===1)return Le.get(Xe);if(Re===2){if(qt)qt instanceof Function||B(Ie,"requires a function argument.");else return delete Le.get(Xe),ve;return Le.set(Xe,qt),ve}}B("Invalid arguments to",Ie)};return C.xWrap.resultAdapter=function ve(Re,Xe){return dn(ve,arguments.length,Re,Xe,"resultAdapter()",Qe)},C.xWrap.argAdapter=function ve(Re,Xe){return dn(ve,arguments.length,Re,Xe,"argAdapter()",ze)},C.xWrap.FuncPtrAdapter=ze.FuncPtrAdapter,C.xCallWrapped=function(ve,Re,Xe,...qt){return Array.isArray(arguments[3])&&(qt=arguments[3]),C.xWrap(ve,Re,Xe||[]).apply(null,qt||[])},C.xWrap.testConvertArg=oe.xWrap.convertArg,C.xWrap.testConvertResult=oe.xWrap.convertResult,C},globalThis.WhWasmUtilInstaller.yawl=function(C){const B=()=>fetch(C.uri,{credentials:"same-origin"}),U=this,H=function(De){if(C.wasmUtilTarget){const Be=(...xt)=>{throw new Error(xt.join(" "))},Tt=C.wasmUtilTarget;if(Tt.module=De.module,Tt.instance=De.instance,Tt.instance.exports.memory||(Tt.memory=C.imports&&C.imports.env&&C.imports.env.memory||Be("Missing 'memory' object!")),!Tt.alloc&&De.instance.exports.malloc){const xt=De.instance.exports;Tt.alloc=function(zt){return xt.malloc(zt)||Be("Allocation of",zt,"bytes failed.")},Tt.dealloc=function(zt){xt.free(zt)}}U(Tt)}return C.onload&&C.onload(De,C),De};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(B(),C.imports||{}).then(H)}:function(){return B().then(Be=>Be.arrayBuffer()).then(Be=>WebAssembly.instantiate(Be,C.imports||{})).then(H)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function C(B){const U=(...vt)=>{throw new Error(vt.join(" "))};!(B.heap instanceof WebAssembly.Memory)&&!(B.heap instanceof Function)&&U("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(vt){B[vt]instanceof Function||U("Config option '"+vt+"' must be a function.")});const H=C,oe=B.heap instanceof Function?B.heap:()=>new Uint8Array(B.heap.buffer),De=B.alloc,Be=B.dealloc,Tt=B.log||console.log.bind(console),xt=B.memberPrefix||"",zt=B.memberSuffix||"",Qt=B.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!B.bigIntEnabled,mt=globalThis.BigInt,rt=globalThis.BigInt64Array,Ct=B.ptrSizeof||4,ze=B.ptrIR||"i32";H.debugFlags||(H.__makeDebugFlags=function(vt=null){vt&&vt.__flags&&(vt=vt.__flags);const en=function an(cn){return arguments.length===0?an.__flags:(cn<0?(delete an.__flags.getter,delete an.__flags.setter,delete an.__flags.alloc,delete an.__flags.dealloc):(an.__flags.getter=(1&cn)!==0,an.__flags.setter=(2&cn)!==0,an.__flags.alloc=(4&cn)!==0,an.__flags.dealloc=(8&cn)!==0),an._flags)};return Object.defineProperty(en,"__flags",{iterable:!1,writable:!1,value:Object.create(vt)}),vt||en(0),en},H.debugFlags=H.__makeDebugFlags());const Qe=function(){const vt=new ArrayBuffer(2);return new DataView(vt).setInt16(0,256,!0),new Int16Array(vt)[0]===256}(),Ze=vt=>vt[1]==="(",wt=vt=>vt==="P",St=vt=>Ze(vt)?"p":vt[0],tt=function(vt){switch(St(vt)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return ze;case"j":return"i64";case"f":return"float";case"d":return"double"}U("Unhandled signature IR:",vt)},Et=rt?()=>!0:()=>U("BigInt64Array is not available."),dn=function(vt){switch(St(vt)){case"p":case"P":case"s":{switch(Ct){case 4:return"getInt32";case 8:return Et()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Et()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}U("Unhandled DataView getter for signature:",vt)},ve=function(vt){switch(St(vt)){case"p":case"P":case"s":{switch(Ct){case 4:return"setInt32";case 8:return Et()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Et()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}U("Unhandled DataView setter for signature:",vt)},Re=function(vt){switch(St(vt)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Et()&&mt;case"p":case"P":case"s":switch(Ct){case 4:return Number;case 8:return Et()&&mt}break}U("Unhandled DataView set wrapper for signature:",vt)},Xe=(vt,en)=>vt+"::"+en,qt=function(vt,en){return()=>U(Xe(vt,en),"is read-only.")},Ie=new WeakMap,Le="(pointer-is-external)",ue=function(vt,en,an){if(an||(an=Ie.get(en)),an){if(Ie.delete(en),Array.isArray(en.ondispose)){let cn;for(;cn=en.ondispose.shift();)try{cn instanceof Function?cn.call(en):cn instanceof Bn?cn.dispose():typeof cn=="number"&&Be(cn)}catch(lr){console.warn("ondispose() for",vt.structName,"@",an,"threw. NOT propagating it.",lr)}}else if(en.ondispose instanceof Function)try{en.ondispose()}catch(cn){console.warn("ondispose() for",vt.structName,"@",an,"threw. NOT propagating it.",cn)}delete en.ondispose,vt.debugFlags.__flags.dealloc&&Tt("debug.dealloc:",en[Le]?"EXTERNAL":"",vt.structName,"instance:",vt.structInfo.sizeof,"bytes @"+an),en[Le]||Be(an)}},_e=vt=>({configurable:!1,writable:!1,iterable:!1,value:vt}),Se=function(vt,en,an){let cn=!an;an?Object.defineProperty(en,Le,_e(an)):(an=De(vt.structInfo.sizeof),an||U("Allocation of",vt.structName,"structure failed."));try{vt.debugFlags.__flags.alloc&&Tt("debug.alloc:",cn?"":"EXTERNAL",vt.structName,"instance:",vt.structInfo.sizeof,"bytes @"+an),cn&&oe().fill(0,an,an+vt.structInfo.sizeof),Ie.set(en,an)}catch(lr){throw ue(vt,en,an),lr}},dt=function(){const vt=this.pointer;return vt?new Uint8Array(oe().slice(vt,vt+this.structInfo.sizeof)):null},En=_e(vt=>xt+vt+zt),jn=function(vt,en,an=!0){let cn=vt.members[en];if(!cn&&(xt||zt)){for(const lr of Object.values(vt.members))if(lr.key===en){cn=lr;break}!cn&&an&&U(Xe(vt.name,en),"is not a mapped struct member.")}return cn},Jn=function vt(en,an,cn=!1){vt._||(vt._=ri=>ri.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const lr=jn(en.structInfo,an,!0);return cn?vt._(lr.signature):lr.signature},jt={configurable:!1,enumerable:!1,get:function(){return Ie.get(this)},set:()=>U("Cannot assign the 'pointer' property of a struct.")},We=_e(function(){const vt=[];for(const en of Object.keys(this.structInfo.members))vt.push(this.memberKey(en));return vt}),lt=new TextDecoder("utf-8"),kt=new TextEncoder,Ht=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Rn=function(vt,en,an){return lt.decode(vt.buffer instanceof Ht?vt.slice(en,an):vt.subarray(en,an))},Vn=function(vt,en,an=!1){const cn=jn(vt.structInfo,en,an);return cn&&cn.signature.length===1&&cn.signature[0]==="s"?cn:!1},ot=function(vt){vt.signature!=="s"&&U("Invalid member type signature for C-string value:",JSON.stringify(vt))},Pt=function(en,an){const cn=jn(en.structInfo,an,!0);ot(cn);const lr=en[cn.key];if(!lr)return null;let ri=lr;const Qr=oe();for(;Qr[ri]!==0;++ri);return lr===ri?"":Rn(Qr,lr,ri)},Wt=function(vt,...en){vt.ondispose?Array.isArray(vt.ondispose)||(vt.ondispose=[vt.ondispose]):vt.ondispose=[],vt.ondispose.push(...en)},mn=function(vt){const en=kt.encode(vt),an=De(en.length+1);an||U("Allocation error while duplicating string:",vt);const cn=oe();return cn.set(en,an),cn[an+en.length]=0,an},ln=function(vt,en,an){const cn=jn(vt.structInfo,en,!0);ot(cn);const lr=mn(an);return vt[cn.key]=lr,Wt(vt,lr),vt},Bn=function(en,an){arguments[2]!==_e&&U("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:_e(en),structInfo:_e(an)})};Bn.prototype=Object.create(null,{dispose:_e(function(){ue(this.constructor,this)}),lookupMember:_e(function(vt,en=!0){return jn(this.structInfo,vt,en)}),memberToJsString:_e(function(vt){return Pt(this,vt)}),memberIsString:_e(function(vt,en=!0){return Vn(this,vt,en)}),memberKey:En,memberKeys:We,memberSignature:_e(function(vt,en=!1){return Jn(this,vt,en)}),memoryDump:_e(dt),pointer:jt,setMemberCString:_e(function(vt,en){return ln(this,vt,en)})}),Object.assign(Bn.prototype,{addOnDispose:function(...vt){return Wt(this,...vt),this}}),Object.defineProperties(Bn,{allocCString:_e(mn),isA:_e(vt=>vt instanceof Bn),hasExternalPointer:_e(vt=>vt instanceof Bn&&!!vt[Le]),memberKey:En});const pr=vt=>Number.isFinite(vt)||vt instanceof(mt||Number),xn=function vt(en,an,cn){if(!vt._){vt._={getters:{},setters:{},sw:{}};const Wi=["i","c","C","p","P","s","f","d","v()"];Qt&&Wi.push("j"),Wi.forEach(function(Us){vt._.getters[Us]=dn(Us),vt._.setters[Us]=ve(Us),vt._.sw[Us]=Re(Us)});const hl=/^[ipPsjfdcC]$/,pl=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;vt.sigCheck=function(Us,Hm,uf,Qu){Object.prototype.hasOwnProperty.call(Us,uf)&&U(Us.structName,"already has a property named",uf+"."),hl.test(Qu)||pl.test(Qu)||U("Malformed signature for",Xe(Us.structName,Hm)+":",Qu)}}const lr=en.memberKey(an);vt.sigCheck(en.prototype,an,lr,cn.signature),cn.key=lr,cn.name=an;const ri=St(cn.signature),Qr=Xe(en.prototype.structName,lr),Rr=en.prototype.debugFlags.__flags,hs=Object.create(null);hs.configurable=!1,hs.enumerable=!1,hs.get=function(){Rr.getter&&Tt("debug.getter:",vt._.getters[ri],"for",tt(ri),Qr,"@",this.pointer,"+",cn.offset,"sz",cn.sizeof);let Wi=new DataView(oe().buffer,this.pointer+cn.offset,cn.sizeof)[vt._.getters[ri]](0,Qe);return Rr.getter&&Tt("debug.getter:",Qr,"result =",Wi),Wi},cn.readOnly?hs.set=qt(en.prototype.structName,lr):hs.set=function(Wi){if(Rr.setter&&Tt("debug.setter:",vt._.setters[ri],"for",tt(ri),Qr,"@",this.pointer,"+",cn.offset,"sz",cn.sizeof,Wi),this.pointer||U("Cannot set struct property on disposed instance."),Wi===null)Wi=0;else for(;!pr(Wi);){if(wt(cn.signature)&&Wi instanceof Bn){Wi=Wi.pointer||0,Rr.setter&&Tt("debug.setter:",Qr,"resolved to",Wi);break}U("Invalid value for pointer-type",Qr+".")}new DataView(oe().buffer,this.pointer+cn.offset,cn.sizeof)[vt._.setters[ri]](0,vt._.sw[ri](Wi),Qe)},Object.defineProperty(en.prototype,lr,hs)},ki=function vt(en,an){arguments.length===1?(an=en,en=an.name):an.name||(an.name=en),en||U("Struct name is required.");let cn=!1;Object.keys(an.members).forEach(Qr=>{const Rr=an.members[Qr];Rr.sizeof?Rr.sizeof===1?Rr.signature==="c"||Rr.signature==="C"||U("Unexpected sizeof==1 member",Xe(an.name,Qr),"with signature",Rr.signature):(Rr.sizeof%4!==0&&(console.warn("Invalid struct member description =",Rr,"from",an),U(en,"member",Qr,"sizeof is not aligned. sizeof="+Rr.sizeof)),Rr.offset%4!==0&&(console.warn("Invalid struct member description =",Rr,"from",an),U(en,"member",Qr,"offset is not aligned. offset="+Rr.offset))):U(en,"member",Qr,"is missing sizeof."),(!cn||cn.offset<Rr.offset)&&(cn=Rr)}),cn?an.sizeof<cn.offset+cn.sizeof&&U("Invalid struct config:",en,"max member offset ("+cn.offset+") ","extends past end of struct (sizeof="+an.sizeof+")."):U("No member property descriptions found.");const lr=_e(H.__makeDebugFlags(vt.debugFlags)),ri=function Qr(Rr){this instanceof Qr?arguments.length?((Rr!==(Rr|0)||Rr<=0)&&U("Invalid pointer value for",en,"constructor."),Se(Qr,this,Rr)):Se(Qr,this):U("The",en,"constructor may only be called via 'new'.")};return Object.defineProperties(ri,{debugFlags:lr,isA:_e(Qr=>Qr instanceof ri),memberKey:En,memberKeys:We,methodInfoForKey:_e(function(Qr){}),structInfo:_e(an),structName:_e(en)}),ri.prototype=new Bn(en,an,_e),Object.defineProperties(ri.prototype,{debugFlags:lr,constructor:_e(ri)}),Object.keys(an.members).forEach(Qr=>xn(ri,Qr,an.members[Qr])),ri};return ki.StructType=Bn,ki.config=B,ki.allocCString=mn,ki.debugFlags||(ki.debugFlags=H.__makeDebugFlags(H.debugFlags)),ki},globalThis.sqlite3ApiBootstrap.initializers.push(function(C){const B=(...ze)=>{throw new Error(ze.join(" "))};C.SQLite3Error.toss;const U=C.capi,H=C.wasm,oe=C.util;if(globalThis.WhWasmUtilInstaller(H),delete globalThis.WhWasmUtilInstaller,H.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new H.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(ze,Qe)=>ze[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:ze=>ze[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new H.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:ze=>{let Qe;return(Ze,wt,St,tt)=>{try{const Et=H.cArgvToJs(wt,St);return Qe||(Qe=H.cArgvToJs(wt,tt)),ze(Et,Qe)|0}catch(Et){return Et.resultCode||U.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:ze=>ze[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new H.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(ze,Qe)=>ze[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new H.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(ze,Qe)=>ze[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],H.exports.sqlite3_progress_handler&&H.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new H.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(ze,Qe)=>ze[0]}),"*"]]),H.exports.sqlite3_stmt_explain&&H.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),H.exports.sqlite3_set_authorizer&&H.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(ze,Qe)=>ze[0],callProxy:ze=>(Qe,Ze,wt,St,tt,Et)=>{try{return wt=wt&&H.cstrToJs(wt),St=St&&H.cstrToJs(St),tt=tt&&H.cstrToJs(tt),Et=Et&&H.cstrToJs(Et),ze(Qe,Ze,wt,St,tt,Et)||0}catch(dn){return dn.resultCode||U.SQLITE_ERROR}}}),"*"]]),H.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:ze=>ze[0],callProxy:ze=>(Qe,Ze,wt,St,tt)=>{ze(Qe,Ze,H.cstrToJs(wt),H.cstrToJs(St),tt)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],H.bigIntEnabled&&H.exports.sqlite3_declare_vtab&&H.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),H.bigIntEnabled&&H.exports.sqlite3_preupdate_hook&&H.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:ze=>ze[0],callProxy:ze=>(Qe,Ze,wt,St,tt,Et,dn)=>{ze(Qe,Ze,wt,H.cstrToJs(St),H.cstrToJs(tt),Et,dn)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),H.bigIntEnabled&&H.exports.sqlite3changegroup_add&&H.exports.sqlite3session_create&&H.exports.sqlite3_preupdate_hook){const ze={signature:"i(ps)",callProxy:Qe=>(Ze,wt)=>{try{return Qe(Ze,H.cstrToJs(wt))|0}catch(St){return St.resultCode||U.SQLITE_ERROR}}};H.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new H.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new H.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new H.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ze}),new H.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new H.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ze}),new H.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new H.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ze}),new H.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new H.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new H.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...ze}),new H.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new H.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new H.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new H.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new H.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new H.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new H.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new H.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new H.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new H.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new H.xWrap.FuncPtrAdapter({name:"xFilter",...ze,contextKey:(Qe,Ze)=>Qe[0]}),"*"]])}H.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],C.StructBinder=globalThis.Jaccwabyt({heap:H.heap8u,alloc:H.alloc,dealloc:H.dealloc,bigIntEnabled:H.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const ze=H.xWrap.argAdapter("string");H.xWrap.argAdapter("string:flexible",tt=>ze(oe.flexibleString(tt))),H.xWrap.argAdapter("string:static",function(tt){return H.isPtr(tt)?tt:(tt=""+tt,this[tt]||(this[tt]=H.allocCString(tt)))}.bind(Object.create(null)));const Qe=H.xWrap.argAdapter("*"),Ze=function(){};H.xWrap.argAdapter("sqlite3_filename",Qe)("sqlite3_context*",Qe)("sqlite3_value*",Qe)("void*",Qe)("sqlite3_changegroup*",Qe)("sqlite3_changeset_iter*",Qe)("sqlite3_session*",Qe)("sqlite3_stmt*",tt=>Qe(tt instanceof(C?.oo1?.Stmt||Ze)?tt.pointer:tt))("sqlite3*",tt=>Qe(tt instanceof(C?.oo1?.DB||Ze)?tt.pointer:tt))("sqlite3_vfs*",tt=>typeof tt=="string"?U.sqlite3_vfs_find(tt)||C.SQLite3Error.toss(U.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",tt):Qe(tt instanceof(U.sqlite3_vfs||Ze)?tt.pointer:tt)),H.exports.sqlite3_declare_vtab&&H.xWrap.argAdapter("sqlite3_index_info*",tt=>Qe(tt instanceof(U.sqlite3_index_info||Ze)?tt.pointer:tt))("sqlite3_module*",tt=>Qe(tt instanceof(U.sqlite3_module||Ze)?tt.pointer:tt));const wt=H.xWrap.resultAdapter("*");H.xWrap.resultAdapter("sqlite3*",wt)("sqlite3_context*",wt)("sqlite3_stmt*",wt)("sqlite3_value*",wt)("sqlite3_vfs*",wt)("void*",wt),H.exports.sqlite3_step.length===0&&(H.xWrap.doArgcCheck=!1,C.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const tt of H.bindingSignatures)U[tt[0]]=H.xWrap.apply(null,tt);for(const tt of H.bindingSignatures.wasmInternal)oe[tt[0]]=H.xWrap.apply(null,tt);const St=function(tt){return()=>B(tt+"() is unavailable due to lack","of BigInt support in this build.")};for(const tt of H.bindingSignatures.int64)U[tt[0]]=H.bigIntEnabled?H.xWrap.apply(null,tt):St(tt[0]);if(delete H.bindingSignatures,H.exports.sqlite3__wasm_db_error){const tt=H.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");oe.sqlite3__wasm_db_error=function(Et,dn,ve){return dn instanceof C.WasmAllocError?(dn=U.SQLITE_NOMEM,ve=0):dn instanceof Error&&(ve=ve||""+dn,dn=dn.resultCode||U.SQLITE_ERROR),Et?tt(Et,dn,ve):dn}}else oe.sqlite3__wasm_db_error=function(tt,Et,dn){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Et}}{const ze=H.xCall("sqlite3__wasm_enum_json");ze||B("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),H.ctype=JSON.parse(H.cstrToJs(ze));const Qe=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];H.bigIntEnabled&&Qe.push("serialize","session","vtab");for(const St of Qe)for(const tt of Object.entries(H.ctype[St]))U[tt[0]]=tt[1];H.functionEntry(U.SQLITE_WASM_DEALLOC)||B("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+U.SQLITE_WASM_DEALLOC+").");const Ze=Object.create(null);for(const St of["resultCodes"])for(const tt of Object.entries(H.ctype[St]))Ze[tt[1]]=tt[0];U.sqlite3_js_rc_str=St=>Ze[St];const wt=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!oe.isUIThread(),sqlite3_index_info:!H.bigIntEnabled,sqlite3_index_constraint:!H.bigIntEnabled,sqlite3_index_orderby:!H.bigIntEnabled,sqlite3_index_constraint_usage:!H.bigIntEnabled});for(const St of H.ctype.structs)wt[St.name]||(U[St.name]=C.StructBinder(St));if(U.sqlite3_index_info){for(const St of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])U.sqlite3_index_info[St]=U[St],delete U[St];U.sqlite3_vtab_config=H.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const De=(ze,Qe,Ze)=>oe.sqlite3__wasm_db_error(ze,U.SQLITE_MISUSE,Qe+"() requires "+Ze+" argument"+(Ze===1?"":"s")+"."),Be=ze=>oe.sqlite3__wasm_db_error(ze,U.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Tt=ze=>H.xWrap.argAdapter("sqlite3*")(ze),xt=ze=>H.isPtr(ze)?H.cstrToJs(ze):ze,zt=function(ze,Qe){ze=Tt(ze);let Ze=this.dbMap.get(ze);if(Qe)!Ze&&Qe>0&&this.dbMap.set(ze,Ze=Object.create(null));else return this.dbMap.delete(ze),Ze;return Ze}.bind(Object.assign(Object.create(null),{dbMap:new Map}));zt.addCollation=function(ze,Qe){const Ze=zt(ze,1);Ze.collation||(Ze.collation=new Set),Ze.collation.add(xt(Qe).toLowerCase())},zt._addUDF=function(ze,Qe,Ze,wt){Qe=xt(Qe).toLowerCase();let St=wt.get(Qe);St||wt.set(Qe,St=new Set),St.add(Ze<0?-1:Ze)},zt.addFunction=function(ze,Qe,Ze){const wt=zt(ze,1);wt.udf||(wt.udf=new Map),this._addUDF(ze,Qe,Ze,wt.udf)},H.exports.sqlite3_create_window_function&&(zt.addWindowFunc=function(ze,Qe,Ze){const wt=zt(ze,1);wt.wudf||(wt.wudf=new Map),this._addUDF(ze,Qe,Ze,wt.wudf)}),zt.cleanup=function(ze){ze=Tt(ze);const Qe=[ze];for(const St of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const tt=H.exports[St];if(tt){Qe.length=tt.length;try{U[St](...Qe)}catch(Et){C.config.warn("close-time call of",St+"(",Qe,") threw:",Et)}}}const Ze=zt(ze,0);if(!Ze)return;if(Ze.collation){for(const St of Ze.collation)try{U.sqlite3_create_collation_v2(ze,St,U.SQLITE_UTF8,0,0,0)}catch{}delete Ze.collation}let wt;for(wt=0;wt<2;++wt){const St=wt?Ze.wudf:Ze.udf;if(!St)continue;const tt=wt?U.sqlite3_create_window_function:U.sqlite3_create_function_v2;for(const Et of St){const dn=Et[0],ve=Et[1],Re=[ze,dn,0,U.SQLITE_UTF8,0,0,0,0,0];wt&&Re.push(0);for(const Xe of ve)try{Re[2]=Xe,tt.apply(null,Re)}catch{}ve.clear()}St.clear()}delete Ze.udf,delete Ze.wudf};{const ze=H.xWrap("sqlite3_close_v2","int","sqlite3*");U.sqlite3_close_v2=function(Qe){if(arguments.length!==1)return De(Qe,"sqlite3_close_v2",1);if(Qe)try{zt.cleanup(Qe)}catch{}return ze(Qe)}}if(U.sqlite3session_create){const ze=H.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);U.sqlite3session_delete=function(Qe){if(arguments.length!==1)return De(pDb,"sqlite3session_delete",1);Qe&&U.sqlite3session_table_filter(Qe,0,0),ze(Qe)}}{const ze=(Ze,wt)=>"argv["+wt+"]:"+Ze[0]+":"+H.cstrToJs(Ze[1]).toLowerCase(),Qe=H.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new H.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:ze}),new H.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:ze})]);U.sqlite3_create_collation_v2=function(Ze,wt,St,tt,Et,dn){if(arguments.length!==6)return De(Ze,"sqlite3_create_collation_v2",6);if(!(St&15))St|=U.SQLITE_UTF8;else if(U.SQLITE_UTF8!==(St&15))return Be(Ze);try{const ve=Qe(Ze,wt,St,tt,Et,dn);return ve===0&&Et instanceof Function&&zt.addCollation(Ze,wt),ve}catch(ve){return oe.sqlite3__wasm_db_error(Ze,ve)}},U.sqlite3_create_collation=(Ze,wt,St,tt,Et)=>arguments.length===5?U.sqlite3_create_collation_v2(Ze,wt,St,tt,Et,0):De(Ze,"sqlite3_create_collation",5)}{const ze=function(St,tt){return St[0]+":"+(St[2]<0?-1:St[2])+":"+tt+":"+H.cstrToJs(St[1]).toLowerCase()},Qe=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:ze,callProxy:St=>(tt,Et,dn)=>{try{St(tt,...U.sqlite3_values_to_js(Et,dn))}catch(ve){U.sqlite3_result_error_js(tt,ve)}}},xFinalAndValue:{signature:"v(p)",contextKey:ze,callProxy:St=>tt=>{try{U.sqlite3_result_js(tt,St(tt))}catch(Et){U.sqlite3_result_error_js(tt,Et)}}},xFunc:{signature:"v(pip)",contextKey:ze,callProxy:St=>(tt,Et,dn)=>{try{U.sqlite3_result_js(tt,St(tt,...U.sqlite3_values_to_js(Et,dn)))}catch(ve){U.sqlite3_result_error_js(tt,ve)}}},xDestroy:{signature:"v(p)",contextKey:ze,callProxy:St=>tt=>{try{St(tt)}catch(Et){console.error("UDF xDestroy method threw:",Et)}}}}),Ze=H.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new H.xWrap.FuncPtrAdapter({name:"xFunc",...Qe.xFunc}),new H.xWrap.FuncPtrAdapter({name:"xStep",...Qe.xInverseAndStep}),new H.xWrap.FuncPtrAdapter({name:"xFinal",...Qe.xFinalAndValue}),new H.xWrap.FuncPtrAdapter({name:"xDestroy",...Qe.xDestroy})]),wt=H.exports.sqlite3_create_window_function?H.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new H.xWrap.FuncPtrAdapter({name:"xStep",...Qe.xInverseAndStep}),new H.xWrap.FuncPtrAdapter({name:"xFinal",...Qe.xFinalAndValue}),new H.xWrap.FuncPtrAdapter({name:"xValue",...Qe.xFinalAndValue}),new H.xWrap.FuncPtrAdapter({name:"xInverse",...Qe.xInverseAndStep}),new H.xWrap.FuncPtrAdapter({name:"xDestroy",...Qe.xDestroy})]):void 0;U.sqlite3_create_function_v2=function St(tt,Et,dn,ve,Re,Xe,qt,Ie,Le){if(St.length!==arguments.length)return De(tt,"sqlite3_create_function_v2",St.length);if(!(ve&15))ve|=U.SQLITE_UTF8;else if(U.SQLITE_UTF8!==(ve&15))return Be(tt);try{const ue=Ze(tt,Et,dn,ve,Re,Xe,qt,Ie,Le);return ue===0&&(Xe instanceof Function||qt instanceof Function||Ie instanceof Function||Le instanceof Function)&&zt.addFunction(tt,Et,dn),ue}catch(ue){return console.error("sqlite3_create_function_v2() setup threw:",ue),oe.sqlite3__wasm_db_error(tt,ue,"Creation of UDF threw: "+ue)}},U.sqlite3_create_function=function St(tt,Et,dn,ve,Re,Xe,qt,Ie){return St.length===arguments.length?U.sqlite3_create_function_v2(tt,Et,dn,ve,Re,Xe,qt,Ie,0):De(tt,"sqlite3_create_function",St.length)},wt?U.sqlite3_create_window_function=function St(tt,Et,dn,ve,Re,Xe,qt,Ie,Le,ue){if(St.length!==arguments.length)return De(tt,"sqlite3_create_window_function",St.length);if(!(ve&15))ve|=U.SQLITE_UTF8;else if(U.SQLITE_UTF8!==(ve&15))return Be(tt);try{const _e=wt(tt,Et,dn,ve,Re,Xe,qt,Ie,Le,ue);return _e===0&&(Xe instanceof Function||qt instanceof Function||Ie instanceof Function||Le instanceof Function||ue instanceof Function)&&zt.addWindowFunc(tt,Et,dn),_e}catch(_e){return console.error("sqlite3_create_window_function() setup threw:",_e),oe.sqlite3__wasm_db_error(tt,_e,"Creation of UDF threw: "+_e)}}:delete U.sqlite3_create_window_function,U.sqlite3_create_function_v2.udfSetResult=U.sqlite3_create_function.udfSetResult=U.sqlite3_result_js,U.sqlite3_create_window_function&&(U.sqlite3_create_window_function.udfSetResult=U.sqlite3_result_js),U.sqlite3_create_function_v2.udfConvertArgs=U.sqlite3_create_function.udfConvertArgs=U.sqlite3_values_to_js,U.sqlite3_create_window_function&&(U.sqlite3_create_window_function.udfConvertArgs=U.sqlite3_values_to_js),U.sqlite3_create_function_v2.udfSetError=U.sqlite3_create_function.udfSetError=U.sqlite3_result_error_js,U.sqlite3_create_window_function&&(U.sqlite3_create_window_function.udfSetError=U.sqlite3_result_error_js)}{const ze=(Ze,wt)=>(typeof Ze=="string"?wt=-1:oe.isSQLableTypedArray(Ze)?(wt=Ze.byteLength,Ze=oe.typedArrayToString(Ze instanceof ArrayBuffer?new Uint8Array(Ze):Ze)):Array.isArray(Ze)&&(Ze=Ze.join(""),wt=-1),[Ze,wt]),Qe={basic:H.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:H.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};U.sqlite3_prepare_v3=function Ze(wt,St,tt,Et,dn,ve){if(Ze.length!==arguments.length)return De(wt,"sqlite3_prepare_v3",Ze.length);const[Re,Xe]=ze(St,tt);switch(typeof Re){case"string":return Qe.basic(wt,Re,Xe,Et,dn,null);case"number":return Qe.full(wt,Re,Xe,Et,dn,ve);default:return oe.sqlite3__wasm_db_error(wt,U.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},U.sqlite3_prepare_v2=function Ze(wt,St,tt,Et,dn){return Ze.length===arguments.length?U.sqlite3_prepare_v3(wt,St,tt,0,Et,dn):De(wt,"sqlite3_prepare_v2",Ze.length)}}{const ze=H.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),Qe=H.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);U.sqlite3_bind_text=function Ze(wt,St,tt,Et,dn){if(Ze.length!==arguments.length)return De(U.sqlite3_db_handle(wt),"sqlite3_bind_text",Ze.length);if(H.isPtr(tt)||tt===null)return ze(wt,St,tt,Et,dn);tt instanceof ArrayBuffer?tt=new Uint8Array(tt):Array.isArray(pMem)&&(tt=pMem.join(""));let ve,Re;try{if(oe.isSQLableTypedArray(tt))ve=H.allocFromTypedArray(tt),Re=tt.byteLength;else if(typeof tt=="string")[ve,Re]=H.allocCString(tt);else return oe.sqlite3__wasm_db_error(U.sqlite3_db_handle(wt),U.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return ze(wt,St,ve,Re,U.SQLITE_WASM_DEALLOC)}catch(Xe){return H.dealloc(ve),oe.sqlite3__wasm_db_error(U.sqlite3_db_handle(wt),Xe)}},U.sqlite3_bind_blob=function Ze(wt,St,tt,Et,dn){if(Ze.length!==arguments.length)return De(U.sqlite3_db_handle(wt),"sqlite3_bind_blob",Ze.length);if(H.isPtr(tt)||tt===null)return Qe(wt,St,tt,Et,dn);tt instanceof ArrayBuffer?tt=new Uint8Array(tt):Array.isArray(tt)&&(tt=tt.join(""));let ve,Re;try{if(oe.isBindableTypedArray(tt))ve=H.allocFromTypedArray(tt),Re=Et>=0?Et:tt.byteLength;else if(typeof tt=="string")[ve,Re]=H.allocCString(tt);else return oe.sqlite3__wasm_db_error(U.sqlite3_db_handle(wt),U.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return Qe(wt,St,ve,Re,U.SQLITE_WASM_DEALLOC)}catch(Xe){return H.dealloc(ve),oe.sqlite3__wasm_db_error(U.sqlite3_db_handle(wt),Xe)}}}U.sqlite3_config=function(ze,...Qe){if(arguments.length<2)return U.SQLITE_MISUSE;switch(ze){case U.SQLITE_CONFIG_COVERING_INDEX_SCAN:case U.SQLITE_CONFIG_MEMSTATUS:case U.SQLITE_CONFIG_SMALL_MALLOC:case U.SQLITE_CONFIG_SORTERREF_SIZE:case U.SQLITE_CONFIG_STMTJRNL_SPILL:case U.SQLITE_CONFIG_URI:return H.exports.sqlite3__wasm_config_i(ze,Qe[0]);case U.SQLITE_CONFIG_LOOKASIDE:return H.exports.sqlite3__wasm_config_ii(ze,Qe[0],Qe[1]);case U.SQLITE_CONFIG_MEMDB_MAXSIZE:return H.exports.sqlite3__wasm_config_j(ze,Qe[0]);case U.SQLITE_CONFIG_GETMALLOC:case U.SQLITE_CONFIG_GETMUTEX:case U.SQLITE_CONFIG_GETPCACHE2:case U.SQLITE_CONFIG_GETPCACHE:case U.SQLITE_CONFIG_HEAP:case U.SQLITE_CONFIG_LOG:case U.SQLITE_CONFIG_MALLOC:case U.SQLITE_CONFIG_MMAP_SIZE:case U.SQLITE_CONFIG_MULTITHREAD:case U.SQLITE_CONFIG_MUTEX:case U.SQLITE_CONFIG_PAGECACHE:case U.SQLITE_CONFIG_PCACHE2:case U.SQLITE_CONFIG_PCACHE:case U.SQLITE_CONFIG_PCACHE_HDRSZ:case U.SQLITE_CONFIG_PMASZ:case U.SQLITE_CONFIG_SERIALIZED:case U.SQLITE_CONFIG_SINGLETHREAD:case U.SQLITE_CONFIG_SQLLOG:case U.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return U.SQLITE_NOTFOUND}};{const ze=new Set;U.sqlite3_auto_extension=function(Qe){if(Qe instanceof Function)Qe=H.installFunction("i(ppp)",Qe);else if(arguments.length!==1||!H.isPtr(Qe))return U.SQLITE_MISUSE;const Ze=H.exports.sqlite3_auto_extension(Qe);return Qe!==arguments[0]&&(Ze===0?ze.add(Qe):H.uninstallFunction(Qe)),Ze},U.sqlite3_cancel_auto_extension=function(Qe){return!Qe||arguments.length!==1||!H.isPtr(Qe)?0:H.exports.sqlite3_cancel_auto_extension(Qe)},U.sqlite3_reset_auto_extension=function(){H.exports.sqlite3_reset_auto_extension();for(const Qe of ze)H.uninstallFunction(Qe);ze.clear()}}const Qt=U.sqlite3_vfs_find("kvvfs");if(Qt)if(oe.isUIThread()){const ze=new U.sqlite3_kvvfs_methods(H.exports.sqlite3__wasm_kvvfs_methods());delete U.sqlite3_kvvfs_methods;const Qe=H.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Ze=H.pstack,wt=tt=>H.peek(tt)===115?sessionStorage:localStorage,St={xRead:(tt,Et,dn,ve)=>{const Re=Ze.pointer,Xe=H.scopedAllocPush();try{const qt=Qe(tt,Et);if(!qt)return-3;const Ie=H.cstrToJs(qt),Le=wt(tt).getItem(Ie);if(!Le)return-1;const ue=Le.length;if(ve<=0)return ue;if(ve===1)return H.poke(dn,0),ue;const _e=H.scopedAllocCString(Le);return ve>ue+1&&(ve=ue+1),H.heap8u().copyWithin(dn,_e,_e+ve-1),H.poke(dn+ve-1,0),ve-1}catch(qt){return console.error("kvstorageRead()",qt),-2}finally{Ze.restore(Re),H.scopedAllocPop(Xe)}},xWrite:(tt,Et,dn)=>{const ve=Ze.pointer;try{const Re=Qe(tt,Et);if(!Re)return 1;const Xe=H.cstrToJs(Re);return wt(tt).setItem(Xe,H.cstrToJs(dn)),0}catch(Re){return console.error("kvstorageWrite()",Re),U.SQLITE_IOERR}finally{Ze.restore(ve)}},xDelete:(tt,Et)=>{const dn=Ze.pointer;try{const ve=Qe(tt,Et);return ve?(wt(tt).removeItem(H.cstrToJs(ve)),0):1}catch(ve){return console.error("kvstorageDelete()",ve),U.SQLITE_IOERR}finally{Ze.restore(dn)}}};for(const tt of Object.keys(St))ze[ze.memberKey(tt)]=H.installFunction(ze.memberSignature(tt),St[tt])}else U.sqlite3_vfs_unregister(Qt);H.xWrap.FuncPtrAdapter.warnOnUse=!0;const mt=C.StructBinder,rt=function ze(Qe,Ze,wt,St=ze.installMethodArgcCheck){if(Qe instanceof mt.StructType?!(wt instanceof Function)&&!H.isPtr(wt)&&B("Usage errror: expecting a Function or WASM pointer to one."):B("Usage error: target object is-not-a StructType."),arguments.length===1)return(ve,Re)=>ze(Qe,ve,Re,St);ze.argcProxy||(ze.argcProxy=function(ve,Re,Xe,qt){return function(...Ie){return Xe.length!==arguments.length&&B("Argument mismatch for",ve.structInfo.name+"::"+Re+": Native signature is:",qt),Xe.apply(this,Ie)}},ze.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((ve,Re)=>{if(typeof ve=="number")try{H.uninstallFunction(ve)}catch{}}),delete this.ondispose.__removeFuncList)});const tt=Qe.memberSignature(Ze);tt.length<2&&B("Member",Ze,"does not have a function pointer signature:",tt);const Et=Qe.memberKey(Ze),dn=St&&!H.isPtr(wt)?ze.argcProxy(Qe,Et,wt,tt):wt;if(H.isPtr(dn))dn&&!H.functionEntry(dn)&&B("Pointer",dn,"is not a WASM function table entry."),Qe[Et]=dn;else{const ve=H.installFunction(dn,Qe.memberSignature(Ze,!0));Qe[Et]=ve,(!Qe.ondispose||!Qe.ondispose.__removeFuncList)&&(Qe.addOnDispose("ondispose.__removeFuncList handler",ze.removeFuncList),Qe.ondispose.__removeFuncList=[]),Qe.ondispose.__removeFuncList.push(Et,ve)}return(ve,Re)=>ze(Qe,ve,Re,St)};rt.installMethodArgcCheck=!1;const Ct=function(ze,Qe,Ze=rt.installMethodArgcCheck){const wt=new Map;for(const St of Object.keys(Qe)){const tt=Qe[St],Et=wt.get(tt);if(Et){const dn=ze.memberKey(St);ze[dn]=ze[ze.memberKey(Et)]}else rt(ze,St,tt,Ze),wt.set(tt,St)}return ze};mt.StructType.prototype.installMethod=function(Qe,Ze,wt=rt.installMethodArgcCheck){return arguments.length<3&&Qe&&typeof Qe=="object"?Ct(this,...arguments):rt(this,...arguments)},mt.StructType.prototype.installMethods=function(ze,Qe=rt.installMethodArgcCheck){return Ct(this,ze,Qe)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){C.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){const B=(...Ie)=>{throw new C.SQLite3Error(...Ie)},U=C.capi,H=C.wasm,oe=C.util,De=new WeakMap,Be=new WeakMap,Tt=(Ie,Le,ue)=>{const _e=Object.getOwnPropertyDescriptor(Ie,Le);return _e?_e.value:ue},xt=function(Ie,Le){return Le&&(Ie instanceof rt&&(Ie=Ie.pointer),B(Le,"sqlite3 result code",Le+":",Ie?U.sqlite3_errmsg(Ie):U.sqlite3_errstr(Le))),arguments[0]},zt=H.installFunction("i(ippp)",function(Ie,Le,ue,_e){U.SQLITE_TRACE_STMT===Ie&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+Le+":",H.cstrToJs(_e))}.bind({counter:0})),Qt=Object.create(null),mt=function Ie(...Le){if(!Ie._name2vfs){Ie._name2vfs=Object.create(null);const We=typeof importScripts=="function"?lt=>B("The VFS for",lt,"is only available in the main window thread."):!1;Ie._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:We||(()=>"local")},Ie._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:We||(()=>"session")}}const ue=Ie.normalizeArgs(...Le);let _e=ue.filename,Se=ue.vfs,dt=ue.flags;(typeof _e!="string"&&typeof _e!="number"||typeof dt!="string"||Se&&typeof Se!="string"&&typeof Se!="number")&&(C.config.error("Invalid DB ctor args",ue,arguments),B("Invalid arguments for DB constructor."));let Ot=typeof _e=="number"?H.cstrToJs(_e):_e;const En=Ie._name2vfs[Ot];En&&(Se=En.vfs,_e=Ot=En.filename(Ot));let jn,Jn=0;dt.indexOf("c")>=0&&(Jn|=U.SQLITE_OPEN_CREATE|U.SQLITE_OPEN_READWRITE),dt.indexOf("w")>=0&&(Jn|=U.SQLITE_OPEN_READWRITE),Jn===0&&(Jn|=U.SQLITE_OPEN_READONLY),Jn|=U.SQLITE_OPEN_EXRESCODE;const jt=H.pstack.pointer;try{const We=H.pstack.allocPtr();let lt=U.sqlite3_open_v2(_e,We,Jn,Se||0);jn=H.peekPtr(We),xt(jn,lt),U.sqlite3_extended_result_codes(jn,1),dt.indexOf("t")>=0&&U.sqlite3_trace_v2(jn,U.SQLITE_TRACE_STMT,zt,jn)}catch(We){throw jn&&U.sqlite3_close_v2(jn),We}finally{H.pstack.restore(jt)}this.filename=Ot,De.set(this,jn),Be.set(this,Object.create(null));try{const We=U.sqlite3_js_db_vfs(jn)||B("Internal error: cannot get VFS for new db handle."),lt=Qt[We];lt&&(lt instanceof Function?lt(this,C):xt(jn,U.sqlite3_exec(jn,lt,0,0,0)))}catch(We){throw this.close(),We}};mt.setVfsPostOpenCallback=function(Ie,Le){Le instanceof Function||B("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),Qt[Ie]=Le},mt.normalizeArgs=function(Ie=":memory:",Le="c",ue=null){const _e={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(_e,arguments[0]),_e.flags===void 0&&(_e.flags="c"),_e.vfs===void 0&&(_e.vfs=null),_e.filename===void 0&&(_e.filename=":memory:")):(_e.filename=Ie,_e.flags=Le,_e.vfs=ue),_e};const rt=function(...Ie){mt.apply(this,Ie)};rt.dbCtorHelper=mt;const Ct={null:1,number:2,string:3,boolean:4,blob:5};Ct.undefined==Ct.null,H.bigIntEnabled&&(Ct.bigint=Ct.number);const ze=function(){Ct!==arguments[2]&&B(U.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],De.set(this,arguments[1]),this.parameterCount=U.sqlite3_bind_parameter_count(this.pointer)},Qe=function(Ie){return Ie.pointer||B("DB has been closed."),Ie},Ze=function(Ie,Le){return(Le!==(Le|0)||Le<0||Le>=Ie.columnCount)&&B("Column index",Le,"is out of range."),Ie},wt=function(Ie,Le){const ue=Object.create(null);switch(ue.opt=Object.create(null),Le.length){case 1:typeof Le[0]=="string"||oe.isSQLableTypedArray(Le[0])||Array.isArray(Le[0])?ue.sql=Le[0]:Le[0]&&typeof Le[0]=="object"&&(ue.opt=Le[0],ue.sql=ue.opt.sql);break;case 2:ue.sql=Le[0],ue.opt=Le[1];break;default:B("Invalid argument count for exec().")}ue.sql=oe.flexibleString(ue.sql),typeof ue.sql!="string"&&B("Missing SQL argument or unsupported SQL value type.");const _e=ue.opt;switch(_e.returnValue){case"resultRows":_e.resultRows||(_e.resultRows=[]),ue.returnVal=()=>_e.resultRows;break;case"saveSql":_e.saveSql||(_e.saveSql=[]),ue.returnVal=()=>_e.saveSql;break;case void 0:case"this":ue.returnVal=()=>Ie;break;default:B("Invalid returnValue value:",_e.returnValue)}if(!_e.callback&&!_e.returnValue&&_e.rowMode!==void 0&&(_e.resultRows||(_e.resultRows=[]),ue.returnVal=()=>_e.resultRows),_e.callback||_e.resultRows)switch(_e.rowMode===void 0?"array":_e.rowMode){case"object":ue.cbArg=(Se,dt)=>{dt.columnNames||(dt.columnNames=Se.getColumnNames([]));const Ot=Se.get([]),En=Object.create(null);for(const jn in dt.columnNames)En[dt.columnNames[jn]]=Ot[jn];return En};break;case"array":ue.cbArg=Se=>Se.get([]);break;case"stmt":Array.isArray(_e.resultRows)&&B("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),ue.cbArg=Se=>Se;break;default:if(oe.isInt32(_e.rowMode)){ue.cbArg=Se=>Se.get(_e.rowMode);break}else if(typeof _e.rowMode=="string"&&_e.rowMode.length>1&&_e.rowMode[0]==="$"){const Se=_e.rowMode.substr(1);ue.cbArg=dt=>{const Ot=dt.get(Object.create(null))[Se];return Ot===void 0?B(U.SQLITE_NOTFOUND,"exec(): unknown result column:",Se):Ot};break}B("Invalid rowMode:",_e.rowMode)}return ue},St=(Ie,Le,ue,..._e)=>{const Se=Ie.prepare(Le);try{const dt=Se.bind(ue).step()?Se.get(..._e):void 0;return Se.reset(),dt}finally{Se.finalize()}},tt=(Ie,Le,ue,_e)=>Ie.exec({sql:Le,bind:ue,rowMode:_e,returnValue:"resultRows"});rt.checkRc=(Ie,Le)=>xt(Ie,Le),rt.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return Qe(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const Ie=this.pointer;if(Object.keys(Be.get(this)).forEach((Le,ue)=>{if(ue&&ue.pointer)try{ue.finalize()}catch{}}),De.delete(this),Be.delete(this),U.sqlite3_close_v2(Ie),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(Ie=!1,Le=!1){const ue=Qe(this).pointer;return Ie?Le?U.sqlite3_total_changes64(ue):U.sqlite3_total_changes(ue):Le?U.sqlite3_changes64(ue):U.sqlite3_changes(ue)},dbFilename:function(Ie="main"){return U.sqlite3_db_filename(Qe(this).pointer,Ie)},dbName:function(Ie=0){return U.sqlite3_db_name(Qe(this).pointer,Ie)},dbVfsName:function(Ie=0){let Le;const ue=U.sqlite3_js_db_vfs(Qe(this).pointer,Ie);if(ue){const _e=new U.sqlite3_vfs(ue);try{Le=H.cstrToJs(_e.$zName)}finally{_e.dispose()}}return Le},prepare:function(Ie){Qe(this);const Le=H.pstack.pointer;let ue,_e;try{ue=H.pstack.alloc(8),rt.checkRc(this,U.sqlite3_prepare_v2(this.pointer,Ie,-1,ue,null)),_e=H.peekPtr(ue)}finally{H.pstack.restore(Le)}_e||B("Cannot prepare empty SQL.");const Se=new ze(this,_e,Ct);return Be.get(this)[_e]=Se,Se},exec:function(){Qe(this);const Ie=wt(this,arguments);if(!Ie.sql)return B("exec() requires an SQL string.");const Le=Ie.opt,ue=Le.callback,_e=Array.isArray(Le.resultRows)?Le.resultRows:void 0;let Se,dt=Le.bind,Ot=!!(Ie.cbArg||Le.columnNames||_e);const En=H.scopedAllocPush(),jn=Array.isArray(Le.saveSql)?Le.saveSql:void 0;try{const Jn=oe.isSQLableTypedArray(Ie.sql);let jt=Jn?Ie.sql.byteLength:H.jstrlen(Ie.sql);const We=H.scopedAlloc(2*H.ptrSizeof+(jt+1)),lt=We+H.ptrSizeof;let kt=lt+H.ptrSizeof;const Ht=kt+jt;for(Jn?H.heap8().set(Ie.sql,kt):H.jstrcpy(Ie.sql,H.heap8(),kt,jt,!1),H.poke(kt+jt,0);kt&&H.peek(kt,"i8");){H.pokePtr([We,lt],0),rt.checkRc(this,U.sqlite3_prepare_v3(this.pointer,kt,jt,0,We,lt));const Rn=H.peekPtr(We);if(kt=H.peekPtr(lt),jt=Ht-kt,!!Rn){if(jn&&jn.push(U.sqlite3_sql(Rn).trim()),Se=new ze(this,Rn,Ct),dt&&Se.parameterCount&&(Se.bind(dt),dt=null),Ot&&Se.columnCount){let Vn=Array.isArray(Le.columnNames)?0:1;if(Ot=!1,Ie.cbArg||_e){const ot=Object.create(null);for(;Se.step();Se._lockedByExec=!1){Vn++===0&&Se.getColumnNames(ot.columnNames=Le.columnNames||[]),Se._lockedByExec=!0;const Pt=Ie.cbArg(Se,ot);if(_e&&_e.push(Pt),ue&&ue.call(Le,Pt,Se)===!1)break}Se._lockedByExec=!1}Vn===0&&Se.getColumnNames(Le.columnNames)}else Se.step();Se.reset().finalize(),Se=null}}}finally{H.scopedAllocPop(En),Se&&(delete Se._lockedByExec,Se.finalize())}return Ie.returnVal()},createFunction:function(Le,ue,_e){const Se=ot=>ot instanceof Function;switch(arguments.length){case 1:_e=Le,Le=_e.name,ue=_e.xFunc||0;break;case 2:Se(ue)||(_e=ue,ue=_e.xFunc||0);break}_e||(_e={}),typeof Le!="string"&&B("Invalid arguments: missing function name.");let dt=_e.xStep||0,Ot=_e.xFinal||0;const En=_e.xValue||0,jn=_e.xInverse||0;let Jn;Se(ue)?(Jn=!1,(Se(dt)||Se(Ot))&&B("Ambiguous arguments: scalar or aggregate?"),dt=Ot=null):Se(dt)?(Se(Ot)||B("Missing xFinal() callback for aggregate or window UDF."),ue=null):Se(Ot)?B("Missing xStep() callback for aggregate or window UDF."):B("Missing function-type properties."),Jn===!1?(Se(En)||Se(jn))&&B("xValue and xInverse are not permitted for non-window UDFs."):Se(En)?(Se(jn)||B("xInverse must be provided if xValue is."),Jn=!0):Se(jn)&&B("xValue must be provided if xInverse is.");const jt=_e.pApp;jt!=null&&(typeof jt!="number"||!oe.isInt32(jt))&&B("Invalid value for pApp property. Must be a legal WASM pointer value.");const We=_e.xDestroy||0;We&&!Se(We)&&B("xDestroy property must be a function.");let lt=0;Tt(_e,"deterministic")&&(lt|=U.SQLITE_DETERMINISTIC),Tt(_e,"directOnly")&&(lt|=U.SQLITE_DIRECTONLY),Tt(_e,"innocuous")&&(lt|=U.SQLITE_INNOCUOUS),Le=Le.toLowerCase();const kt=ue||dt,Ht=Tt(_e,"arity"),Rn=typeof Ht=="number"?Ht:kt.length?kt.length-1:0;let Vn;return Jn?Vn=U.sqlite3_create_window_function(this.pointer,Le,Rn,U.SQLITE_UTF8|lt,jt||0,dt,Ot,En,jn,We):Vn=U.sqlite3_create_function_v2(this.pointer,Le,Rn,U.SQLITE_UTF8|lt,jt||0,ue,dt,Ot,We),rt.checkRc(this,Vn),this},selectValue:function(Ie,Le,ue){return St(this,Ie,Le,0,ue)},selectValues:function(Ie,Le,ue){const _e=this.prepare(Ie),Se=[];try{for(_e.bind(Le);_e.step();)Se.push(_e.get(0,ue));_e.reset()}finally{_e.finalize()}return Se},selectArray:function(Ie,Le){return St(this,Ie,Le,[])},selectObject:function(Ie,Le){return St(this,Ie,Le,{})},selectArrays:function(Ie,Le){return tt(this,Ie,Le,"array")},selectObjects:function(Ie,Le){return tt(this,Ie,Le,"object")},openStatementCount:function(){return this.pointer?Object.keys(Be.get(this)).length:0},transaction:function(Ie){let Le="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&B(U.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),Le+=" "+arguments[0],Ie=arguments[1]),Qe(this).exec(Le);try{const ue=Ie(this);return this.exec("COMMIT"),ue}catch(ue){throw this.exec("ROLLBACK"),ue}},savepoint:function(Ie){Qe(this).exec("SAVEPOINT oo1");try{const Le=Ie(this);return this.exec("RELEASE oo1"),Le}catch(Le){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),Le}},checkRc:function(Ie){return xt(this,Ie)}};const Et=function(Ie){return Ie.pointer||B("Stmt has been closed."),Ie},dn=function(Ie){let Le=Ct[Ie==null?"null":typeof Ie];switch(Le){case Ct.boolean:case Ct.null:case Ct.number:case Ct.string:return Le;case Ct.bigint:if(H.bigIntEnabled)return Le;default:return oe.isBindableTypedArray(Ie)?Ct.blob:void 0}},ve=function(Ie){return dn(Ie)||B("Unsupported bind() argument type:",typeof Ie)},Re=function(Ie,Le){const ue=typeof Le=="number"?Le:U.sqlite3_bind_parameter_index(Ie.pointer,Le);return ue===0||!oe.isInt32(ue)?B("Invalid bind() parameter name: "+Le):(ue<1||ue>Ie.parameterCount)&&B("Bind index",Le,"is out of range."),ue},Xe=function(Ie,Le){return Ie._lockedByExec&&B("Operation is illegal when statement is locked:",Le),Ie},qt=function Ie(Le,ue,_e,Se){Xe(Et(Le),"bind()"),Ie._||(Ie._tooBigInt=Ot=>B("BigInt value is too big to store without precision loss:",Ot),Ie._={string:function(Ot,En,jn,Jn){const[jt,We]=H.allocCString(jn,!0);return(Jn?U.sqlite3_bind_blob:U.sqlite3_bind_text)(Ot.pointer,En,jt,We,U.SQLITE_WASM_DEALLOC)}}),ve(Se),ue=Re(Le,ue);let dt=0;switch(Se==null?Ct.null:_e){case Ct.null:dt=U.sqlite3_bind_null(Le.pointer,ue);break;case Ct.string:dt=Ie._.string(Le,ue,Se,!1);break;case Ct.number:{let Ot;oe.isInt32(Se)?Ot=U.sqlite3_bind_int:typeof Se=="bigint"?oe.bigIntFits64(Se)?H.bigIntEnabled?Ot=U.sqlite3_bind_int64:oe.bigIntFitsDouble(Se)?(Se=Number(Se),Ot=U.sqlite3_bind_double):Ie._tooBigInt(Se):Ie._tooBigInt(Se):(Se=Number(Se),H.bigIntEnabled&&Number.isInteger(Se)?Ot=U.sqlite3_bind_int64:Ot=U.sqlite3_bind_double),dt=Ot(Le.pointer,ue,Se);break}case Ct.boolean:dt=U.sqlite3_bind_int(Le.pointer,ue,Se?1:0);break;case Ct.blob:{if(typeof Se=="string"){dt=Ie._.string(Le,ue,Se,!0);break}else Se instanceof ArrayBuffer?Se=new Uint8Array(Se):oe.isBindableTypedArray(Se)||B("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const Ot=H.alloc(Se.byteLength||1);H.heap8().set(Se.byteLength?Se:[0],Ot),dt=U.sqlite3_bind_blob(Le.pointer,ue,Ot,Se.byteLength,U.SQLITE_WASM_DEALLOC);break}default:C.config.warn("Unsupported bind() argument type:",Se),B("Unsupported bind() argument type: "+typeof Se)}return dt&&rt.checkRc(Le.db.pointer,dt),Le._mayGet=!1,Le};ze.prototype={finalize:function(){if(this.pointer){Xe(this,"finalize()");const Ie=U.sqlite3_finalize(this.pointer);return delete Be.get(this.db)[this.pointer],De.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,Ie}},clearBindings:function(){return Xe(Et(this),"clearBindings()"),U.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(Ie){Xe(this,"reset()"),Ie&&this.clearBindings();const Le=U.sqlite3_reset(Et(this).pointer);return this._mayGet=!1,xt(this.db,Le),this},bind:function(){Et(this);let Ie,Le;switch(arguments.length){case 1:Ie=1,Le=arguments[0];break;case 2:Ie=arguments[0],Le=arguments[1];break;default:B("Invalid bind() arguments.")}return Le===void 0?this:(this.parameterCount||B("This statement has no bindable parameters."),this._mayGet=!1,Le===null?qt(this,Ie,Ct.null,Le):Array.isArray(Le)?(arguments.length!==1&&B("When binding an array, an index argument is not permitted."),Le.forEach((ue,_e)=>qt(this,_e+1,ve(ue),ue)),this):(Le instanceof ArrayBuffer&&(Le=new Uint8Array(Le)),typeof Le=="object"&&!oe.isBindableTypedArray(Le)?(arguments.length!==1&&B("When binding an object, an index argument is not permitted."),Object.keys(Le).forEach(ue=>qt(this,ue,ve(Le[ue]),Le[ue])),this):qt(this,Ie,ve(Le),Le)))},bindAsBlob:function(Ie,Le){Et(this),arguments.length===1&&(Le=Ie,Ie=1);const ue=ve(Le);return Ct.string!==ue&&Ct.blob!==ue&&Ct.null!==ue&&B("Invalid value type for bindAsBlob()"),qt(this,Ie,Ct.blob,Le)},step:function(){Xe(this,"step()");const Ie=U.sqlite3_step(Et(this).pointer);switch(Ie){case U.SQLITE_DONE:return this._mayGet=!1;case U.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,C.config.warn("sqlite3_step() rc=",Ie,U.sqlite3_js_rc_str(Ie),"SQL =",U.sqlite3_sql(this.pointer)),rt.checkRc(this.db.pointer,Ie)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const Ie=this.step();return this.reset(),Ie}finally{try{this.finalize()}catch{}}},get:function(Ie,Le){if(Et(this)._mayGet||B("Stmt.step() has not (recently) returned true."),Array.isArray(Ie)){let ue=0;const _e=this.columnCount;for(;ue<_e;)Ie[ue]=this.get(ue++);return Ie}else if(Ie&&typeof Ie=="object"){let ue=0;const _e=this.columnCount;for(;ue<_e;)Ie[U.sqlite3_column_name(this.pointer,ue)]=this.get(ue++);return Ie}switch(Ze(this,Ie),Le===void 0?U.sqlite3_column_type(this.pointer,Ie):Le){case U.SQLITE_NULL:return null;case U.SQLITE_INTEGER:if(H.bigIntEnabled){const ue=U.sqlite3_column_int64(this.pointer,Ie);return ue>=Number.MIN_SAFE_INTEGER&&ue<=Number.MAX_SAFE_INTEGER?Number(ue).valueOf():ue}else{const ue=U.sqlite3_column_double(this.pointer,Ie);return(ue>Number.MAX_SAFE_INTEGER||ue<Number.MIN_SAFE_INTEGER)&&B("Integer is out of range for JS integer range: "+ue),oe.isInt32(ue)?ue|0:ue}case U.SQLITE_FLOAT:return U.sqlite3_column_double(this.pointer,Ie);case U.SQLITE_TEXT:return U.sqlite3_column_text(this.pointer,Ie);case U.SQLITE_BLOB:{const ue=U.sqlite3_column_bytes(this.pointer,Ie),_e=U.sqlite3_column_blob(this.pointer,Ie),Se=new Uint8Array(ue);return ue&&Se.set(H.heap8u().slice(_e,_e+ue),0),ue&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(Se.buffer),Se}default:B("Don't know how to translate","type of result column #"+Ie+".")}B("Not reached.")},getInt:function(Ie){return this.get(Ie,U.SQLITE_INTEGER)},getFloat:function(Ie){return this.get(Ie,U.SQLITE_FLOAT)},getString:function(Ie){return this.get(Ie,U.SQLITE_TEXT)},getBlob:function(Ie){return this.get(Ie,U.SQLITE_BLOB)},getJSON:function(Ie){const Le=this.get(Ie,U.SQLITE_STRING);return Le===null?Le:JSON.parse(Le)},getColumnName:function(Ie){return U.sqlite3_column_name(Ze(Et(this),Ie).pointer,Ie)},getColumnNames:function(Ie=[]){Ze(Et(this),0);const Le=this.columnCount;for(let ue=0;ue<Le;++ue)Ie.push(U.sqlite3_column_name(this.pointer,ue));return Ie},getParamIndex:function(Ie){return Et(this).parameterCount?U.sqlite3_bind_parameter_index(this.pointer,Ie):void 0},getParamName:function(Ie){return Et(this).parameterCount?U.sqlite3_bind_parameter_name(this.pointer,Ie):void 0},isBusy:function(){return U.sqlite3_stmt_busy(Et(this))!==0},isReadOnly:function(){return U.sqlite3_stmt_readonly(Et(this))!==0}};{const Ie={enumerable:!0,get:function(){return De.get(this)},set:()=>B("The pointer property is read-only.")};Object.defineProperty(ze.prototype,"pointer",Ie),Object.defineProperty(rt.prototype,"pointer",Ie)}if(Object.defineProperty(ze.prototype,"columnCount",{enumerable:!1,get:function(){return U.sqlite3_column_count(this.pointer)},set:()=>B("The columnCount property is read-only.")}),C.oo1={DB:rt,Stmt:ze},oe.isUIThread()){C.oo1.JsStorageDb=function(Le="session"){const ue=mt.normalizeArgs(...arguments);Le=ue.filename,Le!=="session"&&Le!=="local"&&B("JsStorageDb db name must be one of 'session' or 'local'."),ue.vfs="kvvfs",mt.call(this,ue)};const Ie=C.oo1.JsStorageDb;Ie.prototype=Object.create(rt.prototype),Ie.clearStorage=U.sqlite3_js_kvvfs_clear,Ie.prototype.clearStorage=function(){return Ie.clearStorage(Qe(this).filename)},Ie.storageSize=U.sqlite3_js_kvvfs_size,Ie.prototype.storageSize=function(){return Ie.storageSize(Qe(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){const B=C.util;C.initWorker1API=function(){const U=(...mt)=>{throw new Error(mt.join(" "))};globalThis.WorkerGlobalScope instanceof Function||U("initWorker1API() must be run from a Worker thread.");const H=this.sqlite3||U("Missing this.sqlite3 object."),oe=H.oo1.DB,De=function(mt){let rt=Be.idMap.get(mt);return rt||(rt="db#"+ ++Be.idSeq+"@"+mt.pointer,Be.idMap.set(mt,rt),rt)},Be={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(mt){const rt=new oe(mt);return this.dbs[De(rt)]=rt,this.dbList.indexOf(rt)<0&&this.dbList.push(rt),rt},close:function(mt,rt){if(mt){delete this.dbs[De(mt)];const Ct=mt.filename,ze=B.sqlite3__wasm_db_vfs(mt.pointer,0);mt.close();const Qe=this.dbList.indexOf(mt);Qe>=0&&this.dbList.splice(Qe,1),rt&&Ct&&ze&&B.sqlite3__wasm_vfs_unlink(ze,Ct)}},post:function(mt,rt){rt&&rt.length?(globalThis.postMessage(mt,Array.from(rt)),rt.length=0):globalThis.postMessage(mt)},dbs:Object.create(null),getDb:function(mt,rt=!0){return this.dbs[mt]||(rt?U("Unknown (or closed) DB ID:",mt):void 0)}},Tt=function(mt=Be.dbList[0]){return mt&&mt.pointer?mt:U("DB is not opened.")},xt=function(mt,rt=!0){const Ct=Be.getDb(mt.dbId,!1)||Be.dbList[0];return rt?Tt(Ct):Ct},zt=function(){return Be.dbList[0]&&De(Be.dbList[0])},Qt={open:function(mt){const rt=Object.create(null),Ct=mt.args||Object.create(null);Ct.simulateError&&U("Throwing because of simulateError flag.");const ze=Object.create(null);rt.vfs=Ct.vfs,rt.filename=Ct.filename||"";const Qe=Be.open(rt);return ze.filename=Qe.filename,ze.persistent=!!H.capi.sqlite3_js_db_uses_vfs(Qe.pointer,"opfs"),ze.dbId=De(Qe),ze.vfs=Qe.dbVfsName(),ze},close:function(mt){const rt=xt(mt,!1),Ct={filename:rt&&rt.filename};if(rt){const ze=mt.args&&typeof mt.args=="object"?!!mt.args.unlink:!1;Be.close(rt,ze)}return Ct},exec:function(mt){const rt=typeof mt.args=="string"?{sql:mt.args}:mt.args||Object.create(null);rt.rowMode==="stmt"?U("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):rt.sql||U("'exec' requires input SQL.");const Ct=xt(mt);(rt.callback||Array.isArray(rt.resultRows))&&(Ct._blobXfer=Be.xfer);const ze=rt.callback;let Qe=0;const Ze=!!rt.columnNames;typeof ze=="string"&&(Ze||(rt.columnNames=[]),rt.callback=function(wt,St){Be.post({type:ze,columnNames:rt.columnNames,rowNumber:++Qe,row:wt},Be.xfer)});try{const wt=rt.countChanges?Ct.changes(!0,rt.countChanges===64):void 0;Ct.exec(rt),wt!==void 0&&(rt.changeCount=Ct.changes(!0,rt.countChanges===64)-wt),rt.callback instanceof Function&&(rt.callback=ze,Be.post({type:ze,columnNames:rt.columnNames,rowNumber:null,row:void 0}))}finally{delete Ct._blobXfer,rt.callback&&(rt.callback=ze)}return rt},"config-get":function(){const mt=Object.create(null),rt=H.config;return["bigIntEnabled"].forEach(function(Ct){Object.getOwnPropertyDescriptor(rt,Ct)&&(mt[Ct]=rt[Ct])}),mt.version=H.version,mt.vfsList=H.capi.sqlite3_js_vfs_list(),mt},export:function(mt){const rt=xt(mt),Ct={byteArray:H.capi.sqlite3_js_db_export(rt.pointer),filename:rt.filename,mimetype:"application/x-sqlite3"};return Be.xfer.push(Ct.byteArray.buffer),Ct},toss:function(mt){U("Testing worker exception")}};globalThis.onmessage=async function(mt){mt=mt.data;let rt,Ct=mt.dbId,ze=mt.type;const Qe=performance.now();try{Qt.hasOwnProperty(ze)&&Qt[ze]instanceof Function?rt=await Qt[ze](mt):U("Unknown db worker message type:",mt.type)}catch(Ze){ze="error",rt={operation:mt.type,message:Ze.message,errorClass:Ze.name,input:mt},Ze.stack&&(rt.stack=typeof Ze.stack=="string"?Ze.stack.split(/\n\s*/):Ze.stack)}Ct||(Ct=rt.dbId||zt()),Be.post({type:ze,dbId:Ct,messageId:mt.messageId,workerReceivedTime:Qe,workerRespondTime:performance.now(),departureTime:mt.departureTime,result:rt},Be.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:C})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){const B=C.wasm,U=C.capi,H=C.util.toss3,oe=Object.create(null);C.vfs=oe,U.sqlite3_vfs.prototype.registerVfs=function(De=!1){this instanceof C.capi.sqlite3_vfs||H("Expecting a sqlite3_vfs-type argument.");const Be=U.sqlite3_vfs_register(this,De?1:0);return Be&&H("sqlite3_vfs_register(",this,") failed with rc",Be),this.pointer!==U.sqlite3_vfs_find(this.$zName)&&H("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},oe.installVfs=function(De){let Be=0;const Tt=["io","vfs"];for(const xt of Tt){const zt=De[xt];zt&&(++Be,zt.struct.installMethods(zt.methods,!!zt.applyArgcCheck),xt==="vfs"&&(!zt.struct.$zName&&typeof zt.name=="string"&&zt.struct.addOnDispose(zt.struct.$zName=B.allocCString(zt.name)),zt.struct.registerVfs(!!zt.asDefault)))}return Be||H("Misuse: installVfs() options object requires at least","one of:",Tt),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){if(!C.wasm.exports.sqlite3_declare_vtab)return;const B=C.wasm,U=C.capi,H=C.util.toss3,oe=Object.create(null);C.vtab=oe;const De=U.sqlite3_index_info;De.prototype.nthConstraint=function(xt,zt=!1){if(xt<0||xt>=this.$nConstraint)return!1;const Qt=this.$aConstraint+De.sqlite3_index_constraint.structInfo.sizeof*xt;return zt?Qt:new De.sqlite3_index_constraint(Qt)},De.prototype.nthConstraintUsage=function(xt,zt=!1){if(xt<0||xt>=this.$nConstraint)return!1;const Qt=this.$aConstraintUsage+De.sqlite3_index_constraint_usage.structInfo.sizeof*xt;return zt?Qt:new De.sqlite3_index_constraint_usage(Qt)},De.prototype.nthOrderBy=function(xt,zt=!1){if(xt<0||xt>=this.$nOrderBy)return!1;const Qt=this.$aOrderBy+De.sqlite3_index_orderby.structInfo.sizeof*xt;return zt?Qt:new De.sqlite3_index_orderby(Qt)};const Be=function(xt,zt){return function(Qt,mt=!1){if(arguments.length===0&&(Qt=new zt),Qt instanceof zt)return this.set(Qt.pointer,Qt),Qt;B.isPtr(Qt)||C.SQLite3Error.toss("Invalid argument to",xt+"()");let rt=this.get(Qt);return mt&&this.delete(Qt),rt}.bind(new Map)},Tt=function(xt,zt){const Qt=Be(xt,zt);return Object.assign(Object.create(null),{StructType:zt,create:mt=>{const rt=Qt();return B.pokePtr(mt,rt.pointer),rt},get:mt=>Qt(mt),unget:mt=>Qt(mt,!0),dispose:mt=>{const rt=Qt(mt,!0);rt&&rt.dispose()}})};oe.xVtab=Tt("xVtab",U.sqlite3_vtab),oe.xCursor=Tt("xCursor",U.sqlite3_vtab_cursor),oe.xIndexInfo=xt=>new U.sqlite3_index_info(xt),oe.xError=function xt(zt,Qt,mt){if(xt.errorReporter instanceof Function)try{xt.errorReporter("sqlite3_module::"+zt+"(): "+Qt.message)}catch{}let rt;return Qt instanceof C.WasmAllocError?rt=U.SQLITE_NOMEM:arguments.length>2?rt=mt:Qt instanceof C.SQLite3Error&&(rt=Qt.resultCode),rt||U.SQLITE_ERROR},oe.xError.errorReporter=console.error.bind(console),oe.xRowid=(xt,zt)=>B.poke(xt,zt,"i64"),oe.setupModule=function(xt){let zt=!1;const Qt=this instanceof U.sqlite3_module?this:xt.struct||(zt=new U.sqlite3_module);try{const mt=xt.methods||H("Missing 'methods' object.");for(const rt of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const Ct=rt[0],ze=rt[1];mt[Ct]===!0?mt[Ct]=mt[ze]:mt[ze]===!0&&(mt[ze]=mt[Ct])}if(xt.catchExceptions){const rt=function(Qe,Ze){return["xConnect","xCreate"].indexOf(Qe)>=0?function(wt,St,tt,Et,dn,ve){try{return Ze(...arguments)||0}catch(Re){return Re instanceof C.WasmAllocError||(B.dealloc(B.peekPtr(ve)),B.pokePtr(ve,B.allocCString(Re.message))),oe.xError(Qe,Re)}}:function(...wt){try{return Ze(...wt)||0}catch(St){return oe.xError(Qe,St)}}},Ct=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ze=Object.create(null);for(const Qe of Ct){const Ze=mt[Qe];if(Ze instanceof Function)Qe==="xConnect"&&mt.xCreate===Ze?ze[Qe]=mt.xCreate:Qe==="xCreate"&&mt.xConnect===Ze?ze[Qe]=mt.xConnect:ze[Qe]=rt(Qe,Ze);else continue}Qt.installMethods(ze,!1)}else Qt.installMethods(mt,!!xt.applyArgcCheck);if(Qt.$iVersion===0){let rt;typeof xt.iVersion=="number"?rt=xt.iVersion:Qt.$xShadowName?rt=3:Qt.$xSavePoint||Qt.$xRelease||Qt.$xRollbackTo?rt=2:rt=1,Qt.$iVersion=rt}}catch(mt){throw zt&&zt.dispose(),mt}return Qt},U.sqlite3_module.prototype.setupModule=function(xt){return oe.setupModule.call(this,xt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){const B=function U(H){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!H||typeof H!="object")&&(H=Object.create(null));const oe=new URL(globalThis.location.href).searchParams;return oe.has("opfs-disable")?Promise.resolve(C):(H.verbose===void 0&&(H.verbose=oe.has("opfs-verbose")?+oe.get("opfs-verbose")||2:1),H.sanityChecks===void 0&&(H.sanityChecks=oe.has("opfs-sanity-check")),H.proxyUri===void 0&&(H.proxyUri=U.defaultProxyUri),typeof H.proxyUri=="function"&&(H.proxyUri=H.proxyUri()),new Promise(function(Be,Tt){const xt=[C.config.error,C.config.warn,C.config.log],zt=(ot,...Pt)=>{H.verbose>ot&&xt[ot]("OPFS syncer:",...Pt)},Qt=(...ot)=>zt(2,...ot),mt=(...ot)=>zt(1,...ot),rt=(...ot)=>zt(0,...ot),Ct=C.util.toss,ze=C.capi,Qe=C.util,Ze=C.wasm,wt=ze.sqlite3_vfs,St=ze.sqlite3_file,tt=ze.sqlite3_io_methods,Et=Object.create(null),dn=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Et.metrics={dump:function(){let ot,Pt=0,Wt=0,mn=0;for(ot in Se.opIds){const ln=dt[ot];Pt+=ln.count,Wt+=ln.time,mn+=ln.wait,ln.avgTime=ln.count&&ln.time?ln.time/ln.count:0,ln.avgWait=ln.count&&ln.wait?ln.wait/ln.count:0}C.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",dt,`
Total of`,Pt,"op(s) for",Wt,"ms (incl. "+mn+" ms of waiting on the async side)"),C.config.log("Serialization metrics:",dt.s11n),Le.postMessage({type:"opfs-async-metrics"})},reset:function(){let ot;const Pt=mn=>mn.count=mn.time=mn.wait=0;for(ot in Se.opIds)Pt(dt[ot]=Object.create(null));let Wt=dt.s11n=Object.create(null);Wt=Wt.serialize=Object.create(null),Wt.count=Wt.time=0,Wt=dt.s11n.deserialize=Object.create(null),Wt.count=Wt.time=0}};const ve=new tt,Re=new wt().addOnDispose(()=>ve.dispose());let Xe;const qt=ot=>(Xe=!0,Re.dispose(),Tt(ot)),Ie=()=>(Xe=!1,Be(C)),Le=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Xe===void 0&&qt(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),Le._originalOnError=Le.onerror,Le.onerror=function(ot){rt("Error initializing OPFS asyncer:",ot),qt(new Error("Loading OPFS async Worker failed for unknown reasons."))};const ue=ze.sqlite3_vfs_find(null),_e=ue?new wt(ue):null;ve.$iVersion=1,Re.$iVersion=2,Re.$szOsFile=ze.sqlite3_file.structInfo.sizeof,Re.$mxPathname=1024,Re.$zName=Ze.allocCString("opfs"),Re.$xDlOpen=Re.$xDlError=Re.$xDlSym=Re.$xDlClose=null,Re.addOnDispose("$zName",Re.$zName,"cleanup default VFS wrapper",()=>_e?_e.dispose():null);const Se=Object.create(null);Se.verbose=H.verbose,Se.littleEndian=(()=>{const ot=new ArrayBuffer(2);return new DataView(ot).setInt16(0,256,!0),new Int16Array(ot)[0]===256})(),Se.asyncIdleWaitTime=150,Se.asyncS11nExceptions=1,Se.fileBufferSize=1024*64,Se.sabS11nOffset=Se.fileBufferSize,Se.sabS11nSize=Re.$mxPathname*2,Se.sabIO=new SharedArrayBuffer(Se.fileBufferSize+Se.sabS11nSize),Se.opIds=Object.create(null);const dt=Object.create(null);{let ot=0;Se.opIds.whichOp=ot++,Se.opIds.rc=ot++,Se.opIds.xAccess=ot++,Se.opIds.xClose=ot++,Se.opIds.xDelete=ot++,Se.opIds.xDeleteNoWait=ot++,Se.opIds.xFileSize=ot++,Se.opIds.xLock=ot++,Se.opIds.xOpen=ot++,Se.opIds.xRead=ot++,Se.opIds.xSleep=ot++,Se.opIds.xSync=ot++,Se.opIds.xTruncate=ot++,Se.opIds.xUnlock=ot++,Se.opIds.xWrite=ot++,Se.opIds.mkdir=ot++,Se.opIds["opfs-async-metrics"]=ot++,Se.opIds["opfs-async-shutdown"]=ot++,Se.opIds.retry=ot++,Se.sabOP=new SharedArrayBuffer(ot*4),Et.metrics.reset()}Se.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(ot=>{(Se.sq3Codes[ot]=ze[ot])===void 0&&Ct("Maintenance required: not found:",ot)}),Se.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const Ot=(ot,...Pt)=>{const Wt=Se.opIds[ot]||Ct("Invalid op ID:",ot);Se.s11n.serialize(...Pt),Atomics.store(Se.sabOPView,Se.opIds.rc,-1),Atomics.store(Se.sabOPView,Se.opIds.whichOp,Wt),Atomics.notify(Se.sabOPView,Se.opIds.whichOp);const mn=performance.now();for(;Atomics.wait(Se.sabOPView,Se.opIds.rc,-1)!=="not-equal";);const ln=Atomics.load(Se.sabOPView,Se.opIds.rc);if(dt[ot].wait+=performance.now()-mn,ln&&Se.asyncS11nExceptions){const Bn=Se.s11n.deserialize();Bn&&rt(ot+"() async error:",...Bn)}return ln};Et.debug={asyncShutdown:()=>{mt("Shutting down OPFS async listener. The OPFS VFS will no longer work."),Ot("opfs-async-shutdown")},asyncRestart:()=>{mt("Attempting to restart OPFS VFS async listener. Might work, might not."),Le.postMessage({type:"opfs-async-restart"})}};const En=()=>{if(Se.s11n)return Se.s11n;const ot=new TextDecoder,Pt=new TextEncoder("utf-8"),Wt=new Uint8Array(Se.sabIO,Se.sabS11nOffset,Se.sabS11nSize),mn=new DataView(Se.sabIO,Se.sabS11nOffset,Se.sabS11nSize);Se.s11n=Object.create(null);const ln=Object.create(null);ln.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},ln.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},ln.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},ln.string={id:4};const Bn=xn=>ln[typeof xn]||Ct("Maintenance required: this value type cannot be serialized.",xn),pr=xn=>{switch(xn){case ln.number.id:return ln.number;case ln.bigint.id:return ln.bigint;case ln.boolean.id:return ln.boolean;case ln.string.id:return ln.string;default:Ct("Invalid type ID:",xn)}};return Se.s11n.deserialize=function(xn=!1){++dt.s11n.deserialize.count;const ki=performance.now(),vt=Wt[0],en=vt?[]:null;if(vt){const an=[];let cn=1,lr,ri,Qr;for(lr=0;lr<vt;++lr,++cn)an.push(pr(Wt[cn]));for(lr=0;lr<vt;++lr){const Rr=an[lr];Rr.getter?(Qr=mn[Rr.getter](cn,Se.littleEndian),cn+=Rr.size):(ri=mn.getInt32(cn,Se.littleEndian),cn+=4,Qr=ot.decode(Wt.slice(cn,cn+ri)),cn+=ri),en.push(Qr)}}return xn&&(Wt[0]=0),dt.s11n.deserialize.time+=performance.now()-ki,en},Se.s11n.serialize=function(...xn){const ki=performance.now();if(++dt.s11n.serialize.count,xn.length){const vt=[];let en=0,an=1;for(Wt[0]=xn.length&255;en<xn.length;++en,++an)vt.push(Bn(xn[en])),Wt[an]=vt[en].id;for(en=0;en<xn.length;++en){const cn=vt[en];if(cn.setter)mn[cn.setter](an,xn[en],Se.littleEndian),an+=cn.size;else{const lr=Pt.encode(xn[en]);mn.setInt32(an,lr.byteLength,Se.littleEndian),an+=4,Wt.set(lr,an),an+=lr.byteLength}}}else Wt[0]=0;dt.s11n.serialize.time+=performance.now()-ki},Se.s11n},jn=function ot(Pt=16){ot._chars||(ot._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",ot._n=ot._chars.length);const Wt=[];let mn=0;for(;mn<Pt;++mn){const ln=Math.random()*(ot._n*64)%ot._n|0;Wt[mn]=ot._chars[ln]}return Wt.join("")},Jn=Object.create(null),jt=Object.create(null);jt.op=void 0,jt.start=void 0;const We=ot=>{jt.start=performance.now(),jt.op=ot,++dt[ot].count},lt=()=>dt[jt.op].time+=performance.now()-jt.start,kt={xCheckReservedLock:function(ot,Pt){return Ze.poke(Pt,0,"i32"),0},xClose:function(ot){We("xClose");let Pt=0;const Wt=Jn[ot];return Wt&&(delete Jn[ot],Pt=Ot("xClose",ot),Wt.sq3File&&Wt.sq3File.dispose()),lt(),Pt},xDeviceCharacteristics:function(ot){return ze.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(ot,Pt,Wt){return ze.SQLITE_NOTFOUND},xFileSize:function(ot,Pt){We("xFileSize");let Wt=Ot("xFileSize",ot);if(Wt==0)try{const mn=Se.s11n.deserialize()[0];Ze.poke(Pt,mn,"i64")}catch(mn){rt("Unexpected error reading xFileSize() result:",mn),Wt=Se.sq3Codes.SQLITE_IOERR}return lt(),Wt},xLock:function(ot,Pt){We("xLock");const Wt=Jn[ot];let mn=0;return Wt.lockType?Wt.lockType=Pt:(mn=Ot("xLock",ot,Pt),mn===0&&(Wt.lockType=Pt)),lt(),mn},xRead:function(ot,Pt,Wt,mn){We("xRead");const ln=Jn[ot];let Bn;try{Bn=Ot("xRead",ot,Wt,Number(mn)),(Bn===0||ze.SQLITE_IOERR_SHORT_READ===Bn)&&Ze.heap8u().set(ln.sabView.subarray(0,Wt),Pt)}catch(pr){rt("xRead(",arguments,") failed:",pr,ln),Bn=ze.SQLITE_IOERR_READ}return lt(),Bn},xSync:function(ot,Pt){We("xSync"),++dt.xSync.count;const Wt=Ot("xSync",ot,Pt);return lt(),Wt},xTruncate:function(ot,Pt){We("xTruncate");const Wt=Ot("xTruncate",ot,Number(Pt));return lt(),Wt},xUnlock:function(ot,Pt){We("xUnlock");const Wt=Jn[ot];let mn=0;return ze.SQLITE_LOCK_NONE===Pt&&Wt.lockType&&(mn=Ot("xUnlock",ot,Pt)),mn===0&&(Wt.lockType=Pt),lt(),mn},xWrite:function(ot,Pt,Wt,mn){We("xWrite");const ln=Jn[ot];let Bn;try{ln.sabView.set(Ze.heap8u().subarray(Pt,Pt+Wt)),Bn=Ot("xWrite",ot,Wt,Number(mn))}catch(pr){rt("xWrite(",arguments,") failed:",pr,ln),Bn=ze.SQLITE_IOERR_WRITE}return lt(),Bn}},Ht={xAccess:function(ot,Pt,Wt,mn){We("xAccess");const ln=Ot("xAccess",Ze.cstrToJs(Pt));return Ze.poke(mn,ln?0:1,"i32"),lt(),0},xCurrentTime:function(ot,Pt){return Ze.poke(Pt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(ot,Pt){return Ze.poke(Pt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(ot,Pt,Wt){We("xDelete");const mn=Ot("xDelete",Ze.cstrToJs(Pt),Wt,!1);return lt(),mn},xFullPathname:function(ot,Pt,Wt,mn){return Ze.cstrncpy(mn,Pt,Wt)<Wt?0:ze.SQLITE_CANTOPEN},xGetLastError:function(ot,Pt,Wt){return mt("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(Pt,Wt,mn,ln,Bn){We("xOpen");let pr=0;Wt===0?Wt=jn():Ze.isPtr(Wt)&&(ze.sqlite3_uri_boolean(Wt,"opfs-unlock-asap",0)&&(pr|=Se.opfsFlags.OPFS_UNLOCK_ASAP),ze.sqlite3_uri_boolean(Wt,"delete-before-open",0)&&(pr|=Se.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),Wt=Ze.cstrToJs(Wt));const xn=Object.create(null);xn.fid=mn,xn.filename=Wt,xn.sab=new SharedArrayBuffer(Se.fileBufferSize),xn.flags=ln,xn.readOnly=!(C.SQLITE_OPEN_CREATE&ln)&&!!(ln&ze.SQLITE_OPEN_READONLY);const ki=Ot("xOpen",mn,Wt,ln,pr);return ki||(xn.readOnly&&Ze.poke(Bn,ze.SQLITE_OPEN_READONLY,"i32"),Jn[mn]=xn,xn.sabView=Se.sabFileBufView,xn.sq3File=new St(mn),xn.sq3File.$pMethods=ve.pointer,xn.lockType=ze.SQLITE_LOCK_NONE),lt(),ki}};_e&&(Re.$xRandomness=_e.$xRandomness,Re.$xSleep=_e.$xSleep),Re.$xRandomness||(Ht.xRandomness=function(ot,Pt,Wt){const mn=Ze.heap8u();let ln=0;for(;ln<Pt;++ln)mn[Wt+ln]=Math.random()*255e3&255;return ln}),Re.$xSleep||(Ht.xSleep=function(ot,Pt){return Atomics.wait(Se.sabOPView,Se.opIds.xSleep,0,Pt),0}),Et.getResolvedPath=function(ot,Pt){const Wt=new URL(ot,"file://irrelevant").pathname;return Pt?Wt.split("/").filter(mn=>!!mn):Wt},Et.getDirForFilename=async function(Pt,Wt=!1){const mn=Et.getResolvedPath(Pt,!0),ln=mn.pop();let Bn=Et.rootDirectory;for(const pr of mn)pr&&(Bn=await Bn.getDirectoryHandle(pr,{create:!!Wt}));return[Bn,ln]},Et.mkdir=async function(ot){try{return await Et.getDirForFilename(ot+"/filepart",!0),!0}catch{return!1}},Et.entryExists=async function(ot){try{const[Pt,Wt]=await Et.getDirForFilename(ot);return await Pt.getFileHandle(Wt),!0}catch{return!1}},Et.randomFilename=jn,Et.treeList=async function(){const ot=async function Wt(mn,ln){ln.name=mn.name,ln.dirs=[],ln.files=[];for await(const Bn of mn.values())if(Bn.kind==="directory"){const pr=Object.create(null);ln.dirs.push(pr),await Wt(Bn,pr)}else ln.files.push(Bn.name)},Pt=Object.create(null);return await ot(Et.rootDirectory,Pt),Pt},Et.rmfr=async function(){const ot=Et.rootDirectory,Pt={recurse:!0};for await(const Wt of ot.values())ot.removeEntry(Wt.name,Pt)},Et.unlink=async function(ot,Pt=!1,Wt=!1){try{const[mn,ln]=await Et.getDirForFilename(ot,!1);return await mn.removeEntry(ln,{recursive:Pt}),!0}catch(mn){if(Wt)throw new Error("unlink(",arguments[0],") failed: "+mn.message,{cause:mn});return!1}},Et.traverse=async function(ot){const Pt={recursive:!0,directory:Et.rootDirectory};typeof ot=="function"&&(ot={callback:ot}),ot=Object.assign(Pt,ot||{}),async function mn(ln,Bn){for await(const pr of ln.values()){if(ot.callback(pr,ln,Bn)===!1)return!1;if(ot.recursive&&pr.kind==="directory"&&await mn(pr,Bn+1)===!1)break}}(ot.directory,0)};const Rn=async function(ot,Pt){const[Wt,mn]=await Et.getDirForFilename(ot,!0);let Bn=await (await Wt.getFileHandle(mn,{create:!0})).createSyncAccessHandle(),pr=0,xn,ki=!1;try{for(Bn.truncate(0);(xn=await Pt())!==void 0;)xn instanceof ArrayBuffer&&(xn=new Uint8Array(xn)),pr===0&&xn.byteLength>=15&&(Qe.affirmDbHeader(xn),ki=!0),Bn.write(xn,{at:pr}),pr+=xn.byteLength;if((pr<512||pr%512!==0)&&Ct("Input size",pr,"is not correct for an SQLite database."),!ki){const vt=new Uint8Array(20);Bn.read(vt,{at:0}),Qe.affirmDbHeader(vt)}return Bn.write(new Uint8Array([1,1]),{at:18}),pr}catch(vt){throw await Bn.close(),Bn=void 0,await Wt.removeEntry(mn).catch(()=>{}),vt}finally{Bn&&await Bn.close()}};if(Et.importDb=async function(ot,Pt){if(Pt instanceof Function)return Rn(ot,Pt);Pt instanceof ArrayBuffer&&(Pt=new Uint8Array(Pt)),Qe.affirmIsDb(Pt);const Wt=Pt.byteLength,[mn,ln]=await Et.getDirForFilename(ot,!0);let Bn,pr=0;try{return Bn=await (await mn.getFileHandle(ln,{create:!0})).createSyncAccessHandle(),Bn.truncate(0),pr=Bn.write(Pt,{at:0}),pr!=Wt&&Ct("Expected to write "+Wt+" bytes but wrote "+pr+"."),Bn.write(new Uint8Array([1,1]),{at:18}),pr}catch(xn){throw Bn&&(await Bn.close(),Bn=void 0),await mn.removeEntry(ln).catch(()=>{}),xn}finally{Bn&&await Bn.close()}},C.oo1){const ot=function(...Pt){const Wt=C.oo1.DB.dbCtorHelper.normalizeArgs(...Pt);Wt.vfs=Re.$zName,C.oo1.DB.dbCtorHelper.call(this,Wt)};ot.prototype=Object.create(C.oo1.DB.prototype),C.oo1.OpfsDb=ot,ot.importDb=Et.importDb,C.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(Re.pointer,function(Pt,Wt){Wt.capi.sqlite3_busy_timeout(Pt,1e4)})}const Vn=function(){const ot=Ze.scopedAllocPush(),Pt=new St;try{const Wt=Pt.pointer,mn=ze.SQLITE_OPEN_CREATE|ze.SQLITE_OPEN_READWRITE|ze.SQLITE_OPEN_MAIN_DB,ln=Ze.scopedAlloc(8),Bn="/sanity/check/file"+jn(8),pr=Ze.scopedAllocCString(Bn);let xn;if(Se.s11n.serialize("This is \xe4 string."),xn=Se.s11n.deserialize(),Qt("deserialize() says:",xn),xn[0]!=="This is \xe4 string."&&Ct("String d13n error."),Ht.xAccess(Re.pointer,pr,0,ln),xn=Ze.peek(ln,"i32"),Qt("xAccess(",Bn,") exists ?=",xn),xn=Ht.xOpen(Re.pointer,pr,Wt,mn,ln),Qt("open rc =",xn,"state.sabOPView[xOpen] =",Se.sabOPView[Se.opIds.xOpen]),xn!==0){rt("open failed with code",xn);return}Ht.xAccess(Re.pointer,pr,0,ln),xn=Ze.peek(ln,"i32"),xn||Ct("xAccess() failed to detect file."),xn=kt.xSync(Pt.pointer,0),xn&&Ct("sync failed w/ rc",xn),xn=kt.xTruncate(Pt.pointer,1024),xn&&Ct("truncate failed w/ rc",xn),Ze.poke(ln,0,"i64"),xn=kt.xFileSize(Pt.pointer,ln),xn&&Ct("xFileSize failed w/ rc",xn),Qt("xFileSize says:",Ze.peek(ln,"i64")),xn=kt.xWrite(Pt.pointer,pr,10,1),xn&&Ct("xWrite() failed!");const ki=Ze.scopedAlloc(16);xn=kt.xRead(Pt.pointer,ki,6,2),Ze.poke(ki+6,0);let vt=Ze.cstrToJs(ki);Qt("xRead() got:",vt),vt!=="sanity"&&Ct("Unexpected xRead() value."),Ht.xSleep&&(Qt("xSleep()ing before close()ing..."),Ht.xSleep(Re.pointer,2e3),Qt("waking up from xSleep()")),xn=kt.xClose(Wt),Qt("xClose rc =",xn,"sabOPView =",Se.sabOPView),Qt("Deleting file:",Bn),Ht.xDelete(Re.pointer,pr,4660),Ht.xAccess(Re.pointer,pr,0,ln),xn=Ze.peek(ln,"i32"),xn&&Ct("Expecting 0 from xAccess(",Bn,") after xDelete()."),mt("End of OPFS sanity checks.")}finally{Pt.dispose(),Ze.scopedAllocPop(ot)}};Le.onmessage=function({data:ot}){switch(ot.type){case"opfs-unavailable":qt(new Error(ot.payload.join(" ")));break;case"opfs-async-loaded":Le.postMessage({type:"opfs-async-init",args:Se});break;case"opfs-async-inited":{if(Xe===!0)break;try{C.vfs.installVfs({io:{struct:ve,methods:kt},vfs:{struct:Re,methods:Ht}}),Se.sabOPView=new Int32Array(Se.sabOP),Se.sabFileBufView=new Uint8Array(Se.sabIO,0,Se.fileBufferSize),Se.sabS11nView=new Uint8Array(Se.sabIO,Se.sabS11nOffset,Se.sabS11nSize),En(),H.sanityChecks&&(mt("Running sanity checks because of opfs-sanity-check URL arg..."),Vn()),dn()?navigator.storage.getDirectory().then(Pt=>{Le.onerror=Le._originalOnError,delete Le._originalOnError,C.opfs=Et,Et.rootDirectory=Pt,Qt("End of OPFS sqlite3_vfs setup.",Re),Ie()}).catch(qt):Ie()}catch(Pt){rt(Pt),qt(Pt)}break}default:{const Pt="Unexpected message from the OPFS async worker: "+JSON.stringify(ot);rt(Pt),qt(new Error(Pt));break}}}}))};B.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async U=>{try{let H=B.defaultProxyUri;return U.scriptInfo.sqlite3Dir&&(B.defaultProxyUri=U.scriptInfo.sqlite3Dir+H),B().catch(oe=>{U.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",oe.message)})}catch(H){return U.config.error("installOpfsVfs() exception:",H),Promise.reject(H)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(C){const B=C.util.toss,U=C.util.toss3,H=Object.create(null),oe=C.capi,De=C.util,Be=C.wasm,Tt=4096,xt=512,zt=4,Qt=8,mt=xt+zt,rt=xt,Ct=mt,ze=Tt,Qe=oe.SQLITE_OPEN_MAIN_DB|oe.SQLITE_OPEN_MAIN_JOURNAL|oe.SQLITE_OPEN_SUPER_JOURNAL|oe.SQLITE_OPEN_WAL,Ze=".opaque",wt=()=>Math.random().toString(36).slice(2),St=new TextDecoder,tt=new TextEncoder,Et=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),dn=[C.config.error,C.config.warn,C.config.log];C.config.log;const ve=C.config.warn;C.config.error;const Re=new Map,Xe=jt=>Re.get(jt),qt=(jt,We)=>{We?Re.set(jt,We):Re.delete(jt)},Ie=new Map,Le=jt=>Ie.get(jt),ue=(jt,We)=>{We?Ie.set(jt,We):Ie.delete(jt)},_e={xCheckReservedLock:function(jt,We){const lt=Le(jt);return lt.log("xCheckReservedLock"),lt.storeErr(),Be.poke32(We,1),0},xClose:function(jt){const We=Le(jt);We.storeErr();const lt=We.getOFileForS3File(jt);if(lt)try{We.log(`xClose ${lt.path}`),We.mapS3FileToOFile(jt,!1),lt.sah.flush(),lt.flags&oe.SQLITE_OPEN_DELETEONCLOSE&&We.deletePath(lt.path)}catch(kt){return We.storeErr(kt,oe.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(jt){return oe.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(jt,We,lt){return oe.SQLITE_NOTFOUND},xFileSize:function(jt,We){const lt=Le(jt);lt.log("xFileSize");const Ht=lt.getOFileForS3File(jt).sah.getSize()-ze;return Be.poke64(We,BigInt(Ht)),0},xLock:function(jt,We){const lt=Le(jt);lt.log(`xLock ${We}`),lt.storeErr();const kt=lt.getOFileForS3File(jt);return kt.lockType=We,0},xRead:function(jt,We,lt,kt){const Ht=Le(jt);Ht.storeErr();const Rn=Ht.getOFileForS3File(jt);Ht.log(`xRead ${Rn.path} ${lt} @ ${kt}`);try{const Vn=Rn.sah.read(Be.heap8u().subarray(We,We+lt),{at:ze+Number(kt)});return Vn<lt?(Be.heap8u().fill(0,We+Vn,We+lt),oe.SQLITE_IOERR_SHORT_READ):0}catch(Vn){return Ht.storeErr(Vn,oe.SQLITE_IOERR)}},xSectorSize:function(jt){return Tt},xSync:function(jt,We){const lt=Le(jt);lt.log(`xSync ${We}`),lt.storeErr();const kt=lt.getOFileForS3File(jt);try{return kt.sah.flush(),0}catch(Ht){return lt.storeErr(Ht,oe.SQLITE_IOERR)}},xTruncate:function(jt,We){const lt=Le(jt);lt.log(`xTruncate ${We}`),lt.storeErr();const kt=lt.getOFileForS3File(jt);try{return kt.sah.truncate(ze+Number(We)),0}catch(Ht){return lt.storeErr(Ht,oe.SQLITE_IOERR)}},xUnlock:function(jt,We){const lt=Le(jt);lt.log("xUnlock");const kt=lt.getOFileForS3File(jt);return kt.lockType=We,0},xWrite:function(jt,We,lt,kt){const Ht=Le(jt);Ht.storeErr();const Rn=Ht.getOFileForS3File(jt);Ht.log(`xWrite ${Rn.path} ${lt} ${kt}`);try{const Vn=Rn.sah.write(Be.heap8u().subarray(We,We+lt),{at:ze+Number(kt)});return lt===Vn?0:B("Unknown write() failure.")}catch(Vn){return Ht.storeErr(Vn,oe.SQLITE_IOERR)}}},Se=new oe.sqlite3_io_methods;Se.$iVersion=1,C.vfs.installVfs({io:{struct:Se,methods:_e}});const dt={xAccess:function(jt,We,lt,kt){const Ht=Xe(jt);Ht.storeErr();try{const Rn=Ht.getPath(We);Be.poke32(kt,Ht.hasFilename(Rn)?1:0)}catch{Be.poke32(kt,0)}return 0},xCurrentTime:function(jt,We){return Be.poke(We,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(jt,We){return Be.poke(We,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(jt,We,lt){const kt=Xe(jt);kt.log(`xDelete ${Be.cstrToJs(We)}`),kt.storeErr();try{return kt.deletePath(kt.getPath(We)),0}catch(Ht){return kt.storeErr(Ht),oe.SQLITE_IOERR_DELETE}},xFullPathname:function(jt,We,lt,kt){return Be.cstrncpy(kt,We,lt)<lt?0:oe.SQLITE_CANTOPEN},xGetLastError:function(jt,We,lt){const kt=Xe(jt),Ht=kt.popErr();if(kt.log(`xGetLastError ${We} e =`,Ht),Ht){const Rn=Be.scopedAllocPush();try{const[Vn,ot]=Be.scopedAllocCString(Ht.message,!0);Be.cstrncpy(lt,Vn,We),ot>We&&Be.poke8(lt+We-1,0)}catch{return oe.SQLITE_NOMEM}finally{Be.scopedAllocPop(Rn)}}return Ht?Ht.sqlite3Rc||oe.SQLITE_IOERR:0},xOpen:function(We,lt,kt,Ht,Rn){const Vn=Xe(We);try{Vn.log(`xOpen ${Be.cstrToJs(lt)} ${Ht}`);const ot=lt&&Be.peek8(lt)?Vn.getPath(lt):wt();let Pt=Vn.getSAHForPath(ot);!Pt&&Ht&oe.SQLITE_OPEN_CREATE&&(Vn.getFileCount()<Vn.getCapacity()?(Pt=Vn.nextAvailableSAH(),Vn.setAssociatedPath(Pt,ot,Ht)):B("SAH pool is full. Cannot create file",ot)),Pt||B("file not found:",ot);const Wt={path:ot,flags:Ht,sah:Pt};Vn.mapS3FileToOFile(kt,Wt),Wt.lockType=oe.SQLITE_LOCK_NONE;const mn=new oe.sqlite3_file(kt);return mn.$pMethods=Se.pointer,mn.dispose(),Be.poke32(Rn,Ht),0}catch(ot){return Vn.storeErr(ot),oe.SQLITE_CANTOPEN}}},Ot=function(jt){C.capi.sqlite3_vfs_find(jt)&&U("VFS name is already registered:",jt);const We=new oe.sqlite3_vfs,lt=oe.sqlite3_vfs_find(null),kt=lt?new oe.sqlite3_vfs(lt):null;return We.$iVersion=2,We.$szOsFile=oe.sqlite3_file.structInfo.sizeof,We.$mxPathname=xt,We.addOnDispose(We.$zName=Be.allocCString(jt),()=>qt(We.pointer,0)),kt&&(We.$xRandomness=kt.$xRandomness,We.$xSleep=kt.$xSleep,kt.dispose()),!We.$xRandomness&&!dt.xRandomness&&(dt.xRandomness=function(Ht,Rn,Vn){const ot=Be.heap8u();let Pt=0;for(;Pt<Rn;++Pt)ot[Vn+Pt]=Math.random()*255e3&255;return Pt}),!We.$xSleep&&!dt.xSleep&&(dt.xSleep=(Ht,Rn)=>0),C.vfs.installVfs({vfs:{struct:We,methods:dt}}),We};class En{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#c=new Set;#a=new Map;#o=new Uint8Array(mt);#u;#l;#s;constructor(We=Object.create(null)){this.#s=We.verbosity??Et.verbosity,this.vfsName=We.name||Et.name,this.#l=Ot(this.vfsName),qt(this.#l.pointer,this),this.vfsDir=We.directory||"."+this.vfsName,this.#u=new DataView(this.#o.buffer,this.#o.byteOffset),this.isReady=this.reset(!!(We.clearOnInit??Et.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(We.initialCapacity||Et.initialCapacity)})}#f(We,...lt){this.#s>We&&dn[We](this.vfsName+":",...lt)}log(...We){this.#f(2,...We)}warn(...We){this.#f(1,...We)}error(...We){this.#f(0,...We)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const We=[],lt=this.#i.keys();for(const kt of lt)We.push(kt);return We}async addCapacity(We){for(let lt=0;lt<We;++lt){const kt=wt(),Rn=await (await this.#t.getFileHandle(kt,{create:!0})).createSyncAccessHandle();this.#r.set(Rn,kt),this.setAssociatedPath(Rn,"",0)}return this.getCapacity()}async reduceCapacity(We){let lt=0;for(const kt of Array.from(this.#c)){if(lt===We||this.getFileCount()===this.getCapacity())break;const Ht=this.#r.get(kt);kt.close(),await this.#t.removeEntry(Ht),this.#r.delete(kt),this.#c.delete(kt),++lt}return lt}releaseAccessHandles(){for(const We of this.#r.keys())We.close();this.#r.clear(),this.#i.clear(),this.#c.clear()}async acquireAccessHandles(We){const lt=[];for await(const[kt,Ht]of this.#t)Ht.kind==="file"&&lt.push([kt,Ht]);return Promise.all(lt.map(async([kt,Ht])=>{try{const Rn=await Ht.createSyncAccessHandle();if(this.#r.set(Rn,kt),We)Rn.truncate(ze),this.setAssociatedPath(Rn,"",0);else{const Vn=this.getAssociatedPath(Rn);Vn?this.#i.set(Vn,Rn):this.#c.add(Rn)}}catch(Rn){throw this.storeErr(Rn),this.releaseAccessHandles(),Rn}}))}getAssociatedPath(We){We.read(this.#o,{at:0});const lt=this.#u.getUint32(rt);if(this.#o[0]&&(lt&oe.SQLITE_OPEN_DELETEONCLOSE||!(lt&Qe)))return ve(`Removing file with unexpected flags ${lt.toString(16)}`,this.#o),this.setAssociatedPath(We,"",0),"";const kt=new Uint32Array(Qt/4);We.read(kt,{at:Ct});const Ht=this.computeDigest(this.#o);if(kt.every((Rn,Vn)=>Rn===Ht[Vn])){const Rn=this.#o.findIndex(Vn=>Vn===0);return Rn===0&&We.truncate(ze),Rn?St.decode(this.#o.subarray(0,Rn)):""}else return ve("Disassociating file with bad digest."),this.setAssociatedPath(We,"",0),""}setAssociatedPath(We,lt,kt){const Ht=tt.encodeInto(lt,this.#o);xt<=Ht.written+1&&B("Path too long:",lt),this.#o.fill(0,Ht.written,xt),this.#u.setUint32(rt,kt);const Rn=this.computeDigest(this.#o);We.write(this.#o,{at:0}),We.write(Rn,{at:Ct}),We.flush(),lt?(this.#i.set(lt,We),this.#c.delete(We)):(We.truncate(ze),this.#c.add(We))}computeDigest(We){let lt=0xdeadbeef,kt=0x41c6ce57;for(const Ht of We)lt=31*lt+Ht*307,kt=31*kt+Ht*307;return new Uint32Array([lt>>>0,kt>>>0])}async reset(We){await this.isReady;let lt=await navigator.storage.getDirectory(),kt;for(const Ht of this.vfsDir.split("/"))Ht&&(kt=lt,lt=await lt.getDirectoryHandle(Ht,{create:!0}));return this.#e=lt,this.#n=kt,this.#t=await this.#e.getDirectoryHandle(Ze,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(We)}getPath(We){return Be.isPtr(We)&&(We=Be.cstrToJs(We)),(We instanceof URL?We:new URL(We,"file://localhost/")).pathname}deletePath(We){const lt=this.#i.get(We);return lt&&(this.#i.delete(We),this.setAssociatedPath(lt,"",0)),!!lt}storeErr(We,lt){return We&&(We.sqlite3Rc=lt||oe.SQLITE_IOERR,this.error(We)),this.$error=We,lt}popErr(){const We=this.$error;return this.$error=void 0,We}nextAvailableSAH(){const[We]=this.#c.keys();return We}getOFileForS3File(We){return this.#a.get(We)}mapS3FileToOFile(We,lt){lt?(this.#a.set(We,lt),ue(We,this)):(this.#a.delete(We),ue(We,!1))}hasFilename(We){return this.#i.has(We)}getSAHForPath(We){return this.#i.get(We)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;oe.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete H[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Ze,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(We){C.config.error(this.vfsName,"removeVfs() failed:",We)}return!0}exportFile(We){const lt=this.#i.get(We)||B("File not found:",We),kt=lt.getSize()-ze,Ht=new Uint8Array(kt>0?kt:0);if(kt>0){const Rn=lt.read(Ht,{at:ze});Rn!=kt&&B("Expected to read "+kt+" bytes but read "+Rn+".")}return Ht}async importDbChunked(We,lt){const kt=this.#i.get(We)||this.nextAvailableSAH()||B("No available handles to import to.");kt.truncate(0);let Ht=0,Rn,Vn=!1;try{for(;(Rn=await lt())!==void 0;)Rn instanceof ArrayBuffer&&(Rn=new Uint8Array(Rn)),Ht===0&&Rn.byteLength>=15&&(De.affirmDbHeader(Rn),Vn=!0),kt.write(Rn,{at:ze+Ht}),Ht+=Rn.byteLength;if((Ht<512||Ht%512!==0)&&B("Input size",Ht,"is not correct for an SQLite database."),!Vn){const ot=new Uint8Array(20);kt.read(ot,{at:0}),De.affirmDbHeader(ot)}kt.write(new Uint8Array([1,1]),{at:ze+18})}catch(ot){throw this.setAssociatedPath(kt,"",0),ot}return this.setAssociatedPath(kt,We,oe.SQLITE_OPEN_MAIN_DB),Ht}importDb(We,lt){if(lt instanceof ArrayBuffer)lt=new Uint8Array(lt);else if(lt instanceof Function)return this.importDbChunked(We,lt);const kt=this.#i.get(We)||this.nextAvailableSAH()||B("No available handles to import to."),Ht=lt.byteLength;(Ht<512||Ht%512!=0)&&B("Byte array size is invalid for an SQLite db.");const Rn="SQLite format 3";for(let ot=0;ot<Rn.length;++ot)Rn.charCodeAt(ot)!==lt[ot]&&B("Input does not contain an SQLite database header.");const Vn=kt.write(lt,{at:ze});return Vn!=Ht?(this.setAssociatedPath(kt,"",0),B("Expected to write "+Ht+" bytes but wrote "+Vn+".")):(kt.write(new Uint8Array([1,1]),{at:ze+18}),this.setAssociatedPath(kt,We,oe.SQLITE_OPEN_MAIN_DB)),Vn}}class jn{#e;constructor(We){this.#e=We,this.vfsName=We.vfsName}async addCapacity(We){return this.#e.addCapacity(We)}async reduceCapacity(We){return this.#e.reduceCapacity(We)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(We){const lt=this.#e.getCapacity();return lt<We?this.#e.addCapacity(We-lt):lt}exportFile(We){return this.#e.exportFile(We)}importDb(We,lt){return this.#e.importDb(We,lt)}async wipeFiles(){return this.#e.reset(!0)}unlink(We){return this.#e.deletePath(We)}async removeVfs(){return this.#e.removeVfs()}}const Jn=async()=>{const jt=await navigator.storage.getDirectory(),We=".opfs-sahpool-sync-check-"+wt(),Ht=(await (await jt.getFileHandle(We,{create:!0})).createSyncAccessHandle()).close();return await Ht,await jt.removeEntry(We),Ht?.then&&B("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};C.installOpfsSAHPoolVfs=async function(jt=Object.create(null)){jt=Object.assign(Object.create(null),Et,jt||{});const We=jt.name;if(jt.$testThrowPhase1)throw jt.$testThrowPhase1;if(H[We])try{return await H[We]}catch(lt){if(jt.forceReinitIfPreviouslyFailed)delete H[We];else throw lt}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?H[We]=Promise.reject(new Error("Missing required OPFS APIs.")):H[We]=Jn().then(async function(){if(jt.$testThrowPhase2)throw jt.$testThrowPhase2;const lt=new En(jt);return lt.isReady.then(async()=>{const kt=new jn(lt);if(C.oo1){const Ht=C.oo1,Rn=lt.getVfs(),Vn=function(...ot){const Pt=Ht.DB.dbCtorHelper.normalizeArgs(...ot);Pt.vfs=Rn.$zName,Ht.DB.dbCtorHelper.call(this,Pt)};Vn.prototype=Object.create(Ht.DB.prototype),kt.OpfsSAHPoolDb=Vn}return lt.log("VFS initialized."),kt}).catch(async kt=>{throw await lt.removeVfs().catch(()=>{}),kt})}).catch(lt=>H[We]=Promise.reject(lt))}}),typeof A<"u"){const C=Object.assign(Object.create(null),{exports:typeof je>"u"?A.asm:je,memory:A.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=C;let B;try{B=globalThis.sqlite3ApiBootstrap()}catch(U){throw console.error("sqlite3ApiBootstrap() error:",U),U}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}A.sqlite3=B}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),t=o,t}})();const zne=function(){const n=rP;if(!n)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...t)=>console.warn("sqlite3.debugModule:",...t):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const t=e.moduleScript.src.split("/");t.pop(),e.sqlite3Dir=t.join("/")+"/"}if(globalThis.sqlite3InitModule=function t(...r){return n(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,t.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=n.ready,globalThis.sqlite3InitModuleState.moduleScript){const t=globalThis.sqlite3InitModuleState;let r=t.moduleScript.src.split("/");r.pop(),t.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();rP=zne;globalThis.sqlite3Worker1Promiser=function n(e=n.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const d=e;e=Object.assign(Object.create(null),n.defaultConfig),e.onready=d}else e=Object.assign(Object.create(null),n.defaultConfig,e);const t=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),a=e.generateMessageId||function(d){return d.type+"#"+(o[d.type]=(o[d.type]||0)+1)},l=(...d)=>{throw new Error(d.join(" "))};e.worker||(e.worker=n.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let u,c;return e.worker.onmessage=function(d){d=d.data,s("worker1.onmessage",d);let h=t[d.messageId];if(!h){if(d&&d.type==="sqlite3-api"&&d.result==="worker1-ready"){e.onready&&e.onready(c);return}if(h=t[d.type],h&&h.onrow){h.onrow(d);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",d);return}switch(delete t[d.messageId],d.type){case"error":h.reject(d);return;case"open":u||(u=d.dbId);break;case"close":d.dbId===u&&(u=void 0);break}try{h.resolve(d)}catch(p){h.reject(p)}},c=function(){let d;arguments.length===1?d=arguments[0]:arguments.length===2?(d=Object.create(null),d.type=arguments[0],d.args=arguments[1],d.dbId=d.args.dbId):l("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!d.dbId&&d.type!=="open"&&(d.dbId=u),d.messageId=a(d),d.departureTime=performance.now();const h=Object.create(null);h.message=d;let p;d.type==="exec"&&d.args&&(typeof d.args.callback=="function"?(p=d.messageId+":row",h.onrow=d.args.callback,d.args.callback=p,t[p]=h):typeof d.args.callback=="string"&&l("exec callback may not be a string when using the Promise interface."));let g=new Promise(function(x,b){h.resolve=x,h.reject=b,t[d.messageId]=h,s("Posting",d.type,"message to Worker dbId="+(u||"default")+":",d),e.worker.postMessage(d)});return p&&(g=g.finally(()=>delete t[p])),g}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...n)=>console.error("worker1 promiser error",...n)};sqlite3Worker1Promiser.v2=function(n){let e;typeof n=="function"?(e=n,n={}):typeof n?.onready=="function"&&(e=n.onready,delete n.onready);const t=Object.create(null);n=Object.assign(n||Object.create(null),{onready:async function(i){try{e&&await e(i),t.resolve(i)}catch(s){t.reject(s)}}});const r=new Promise(function(i,s){t.resolve=i,t.reject=s});try{this.original(n)}catch(i){t.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function nF(){let n,e;return{lock:async()=>{for(;n;)await n;n=new Promise(i=>{e=i})},unlock:async()=>{const i=e;n=void 0,e=void 0,i?.()}}}function eI(n,e){const t={rows:[],columns:[]},r=n.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:t.columns});switch(e.method){case"run":break;case"get":t.rows=r[0]??[];break;case"all":default:t.rows=r;break}return t}function n6(n){const e=n.split(/[\\/]/).filter(s=>s!==""),t=e.pop();if(!t)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${t}-${s}`);return{directories:e,fileName:t,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function dR(n,e){let t;if(n instanceof Blob?t=n.stream():t=n,t instanceof ReadableStream&&e){const i=t.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const c=await i.read();c.value&&s.push(c.value),o=c.done}const a=s.reduce((c,d)=>c+d.length,0),l=new Uint8Array(a);let u=0;return s.forEach(c=>{l.set(c,u),u+=c.length}),l}}else return t}class Vne{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:nF()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:nF()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,a=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await rP()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,a),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,a),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=l=>{this.config.clientKey!==l.data.clientKey&&this.init(l.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(l){this.emitMessage({type:"error",error:l,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=eI(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let a of r.statements){const l=eI(o,a);i.data.push(l)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)eI(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,l=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],u=typeof l=="number"?l:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:u,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let a;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?a=(...l)=>{this.emitMessage({type:"callback",name:i,args:l})}:a=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:a}),this.emitMessage({type:"success",queryKey:o})}catch(l){this.emitMessage({type:"error",error:l,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const a=await dR(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,a)}else{const a=await dR(s,"buffer"),l=this.sqlite3.wasm.allocFromTypedArray(a);this.pointers.push(l);const u=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",l,a.byteLength,a.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(u),this.execInitStatements()}}catch(a){this.emitMessage({type:"error",error:a,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:a,tempFileNames:l}=n6(this.config.databasePath),u=await o(),c=[a,...l];this.destroy(),await Promise.all(c.map(async d=>u.removeEntry(d).catch(h=>{if(!(h instanceof DOMException&&h.name==="NotFoundError"))throw h})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const t=e?globalThis:nP(globalThis);this.proxy=t,this.init("initial")}}function dE(n,...e){return{sql:n.join("?"),params:e}}function Wne(n){return!n.some(e=>!Array.isArray(e))}function tI(n,e){let t;return Wne(n)?t=n:t=[n],t.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function $ne(n){return typeof n=="object"&&n!==null&&"getSQL"in n&&typeof n.getSQL=="function"}function Hne(n){return typeof n=="object"&&n!==null&&"sql"in n&&typeof n.sql=="string"&&"params"in n}function Gne(n){if(typeof n=="function"&&(n=n(dE)),$ne(n))try{if(!("toSQL"in n&&typeof n.toSQL=="function"))throw 1;const r=n.toSQL();if(!Hne(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=n.sql;let t=[];return"params"in n?t=n.params:"parameters"in n&&(t=n.parameters),{sql:e,params:t}}function nI(){return crypto.randomUUID()}function rF(n,e){let t;return typeof n=="string"?t={sql:n,params:e}:t=dE(n,...e),t}async function Tw(n,e,t,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${t.databasePath})`,{mode:n},r):r()}class Xne{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const a=o instanceof MessageEvent?o.data:o,l=this.queriesInProgress;switch(a.type){case"success":case"data":case"buffer":case"info":case"error":if(a.queryKey&&l.has(a.queryKey)){const[c,d]=l.get(a.queryKey);a.type==="error"?d(a.error):c(a),l.delete(a.queryKey)}else if(a.type==="error")throw a.error;break;case"callback":const u=this.userCallbacks.get(a.name);u&&u(...a.args??[]);break;case"event":this.config.onConnect?.(a.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Tw("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const a=nI();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:a},[o.database]);break;default:this.processor.postMessage({...o,queryKey:a});break}return new Promise((l,u)=>{this.queriesInProgress.set(a,[l,u])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a,l="all",u)=>{const c=await this.createQuery({type:"query",transactionKey:u,sql:o,params:a,method:l}),d={rows:[],columns:[]};return c.type==="data"&&(d.rows=c.data[0]?.rows??[],d.columns=c.data[0]?.columns??[]),d}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const a=await this.createQuery({type:"batch",statements:o}),l=new Array(o.length).fill({rows:[],columns:[]});return a.type==="data"&&a.data.forEach((u,c)=>{l[c]=u}),l}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...a)=>{const l=rF(o,a),{rows:u,columns:c}=await this.exec(l.sql,l.params,"all");return tI(u,c)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const a=o(dE);return(await this.execBatch(a)).map(({rows:u,columns:c})=>tI(u,c))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=nI();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const a=async d=>{const h=Gne(d),{rows:p,columns:g}=await this.exec(h.sql,h.params,"all",o);return tI(p,g)};return{query:a,sql:async(d,...h)=>{const p=rF(d,h);return await a(p)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Tw("exclusive",!1,this.config,async()=>{let a;this.bypassMutationLock=!0;try{a=await this.beginTransaction();const l=await o({sql:a.sql,query:a.query});return await a.commit(),l}catch(l){throw await a?.rollback(),l}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,a)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{const l=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[l]=a),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[l]=a)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,a;const{storageType:l}=await this.getDatabaseInfo();if(l==="opfs"){const u=n6(this.config.databasePath),{directories:c,getDirectoryHandle:d}=u;o=u.fileName;const h=`backup-${Date.now()}--${o}`,p=`${c.join("/")}/${h}`;await this.exec("VACUUM INTO ?",[p]);const g=await d();a=await (await (await g.getFileHandle(h)).getFile()).arrayBuffer(),await g.removeEntry(h)}else{const u=await this.createQuery({type:"export"});if(u.type==="buffer")o="database.sqlite3",a=u.buffer;else throw new Error("The database failed to export.")}return new File([a],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,a)=>{await Tw("exclusive",!1,this.config,async()=>{try{const l=await dR(o);await this.createQuery({type:"import",database:l}),typeof a=="function"&&(this.bypassMutationLock=!0,await a()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Tw("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const t=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=t;this.config=t,this.clientKey=nI(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-BQlyML0U.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=nP(this.processor)):(this.processor=new Vne(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(dE)??[]}})}}class Kne extends Xne{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new HJ,createDriver:()=>new Qne(this),createIntrospector:e=>new $J(e),createQueryCompiler:()=>new zJ}})}}class Qne{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new Yne(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class Yne{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let t;return this.transaction===null?t=await this.client.sql(e.sql,...e.parameters):t=await this.transaction.query(e),{rows:t}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const Jne=({database:n,bootstrap:e})=>{const{dialect:t}=new Kne({databasePath:`${n}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`,i`PRAGMA journal_mode = WAL;`]}}),r=new ON({dialect:t,log:["error"]});return{kysely:r,async bootstrap(){return e({kysely:r})}}},wo=Cr({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),Zne="icon-[material-symbols--error-outline]",ere=Cr({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),po=n=>{const e=Bt.c(5),{error:t,variant:r,tva:i,css:s}=n,o=i===void 0?ere:i;let a;if(e[0]!==s||e[1]!==t||e[2]!==o||e[3]!==r){const l=o({...r,css:s}).slots;a=t?.message?S.jsxs("div",{className:l.base(),children:[S.jsx(br,{icon:Zne}),S.jsx("span",{children:sl.rich(t.message)})]}):null,e[0]=s,e[1]=t,e[2]=o,e[3]=r,e[4]=a}else a=e[4];return a},tre=Cr({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),xr=n=>{const e=Bt.c(34),{label:t,hint:r,required:i,formState:s,name:o,children:a,variant:l,tva:u,css:c}=n,d=i===void 0?!1:i,h=u===void 0?tre:u,p=s.isSubmitting,g=s.isLoading,x=!!s.errors[o];let b,y,E,T;if(e[0]!==c||e[1]!==s.errors||e[2]!==s.isLoading||e[3]!==s.isSubmitting||e[4]!==r||e[5]!==t||e[6]!==o||e[7]!==d||e[8]!==x||e[9]!==h||e[10]!==l){const k=h({isSubmitting:p,isLoading:g,isError:x,required:d,...l,css:c}).slots;y=k.base();let q;e[15]!==t||e[16]!==o?(q=t?S.jsx("label",{htmlFor:o,children:t}):null,e[15]=t,e[16]=o,e[17]=q):q=e[17];let L;e[18]===Symbol.for("react.memo_cache_sentinel")?(L={compact:!0},e[18]=L):L=e[18];const R=s.errors[o];let P;e[19]!==R?(P=S.jsx(po,{variant:L,error:R}),e[19]=R,e[20]=P):P=e[20],e[21]!==q||e[22]!==P?(E=S.jsxs("div",{className:"flex flex-row justify-between",children:[q,P]}),e[21]=q,e[22]=P,e[23]=E):E=e[23],e[24]!==r?(T=r?S.jsx("div",{className:"text-sm italic",children:r}):null,e[24]=r,e[25]=T):T=e[25],b=k.input(),e[0]=c,e[1]=s.errors,e[2]=s.isLoading,e[3]=s.isSubmitting,e[4]=r,e[5]=t,e[6]=o,e[7]=d,e[8]=x,e[9]=h,e[10]=l,e[11]=b,e[12]=y,e[13]=E,e[14]=T}else b=e[11],y=e[12],E=e[13],T=e[14];let I;e[26]!==a||e[27]!==b?(I=S.jsx("div",{className:b,children:a}),e[26]=a,e[27]=b,e[28]=I):I=e[28];let N;return e[29]!==I||e[30]!==y||e[31]!==E||e[32]!==T?(N=S.jsxs("div",{className:y,children:[E,T,I]}),e[29]=I,e[30]=y,e[31]=E,e[32]=T,e[33]=N):N=e[33],N},da=({form:n,mutation:e})=>{const t=n.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{FN({error:i,errors:[gN({error:i,schema:DN,onError:({data:s})=>{n.setError("root",{message:s.message})}})],onError:s=>{n.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),t(r)}};function nre(n,e,t,r={leading:!1}){const[i,s]=ie.useState(n),[o,a]=ie.useState(n),l=ie.useRef(null),u=ie.useRef(!0),c=()=>window.clearTimeout(l.current||void 0);ie.useEffect(()=>c,[]),ie.useEffect(()=>{e(i)},[i]),ie.useEffect(()=>{a(n),s(n)},[n]);const d=ie.useCallback(h=>{a(h),c(),u.current&&r.leading?s(h):l.current=window.setTimeout(()=>{u.current=!0,s(h)},t),u.current=!1},[r.leading]);return[o,d]}const rre=Cr({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded-sm","focus:border-sky-400","focus:outline-hidden","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),r6=n=>{const e=Bt.c(7),{value:t,onFulltext:r,textPlaceholder:i,variant:s,tva:o,css:a}=n,l=t===void 0?"":t,c=(o===void 0?rre:o)({...s,css:a}).slots;let d;e[0]!==r?(d=y=>{r(y||"")},e[0]=r,e[1]=d):d=e[1];const[h,p]=nre(l,d,500);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=S.jsx(br,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}}),e[2]=g):g=e[2];let x;e[3]!==i?(x=i||sl.text("Fulltext (placeholder)"),e[3]=i,e[4]=x):x=e[4];let b;return e[5]!==p?(b=y=>{p(y.target.value)},e[5]=p,e[6]=b):b=e[6],S.jsxs("div",{className:c.base(),children:[S.jsx("div",{className:c.search(),children:g}),S.jsx("input",{value:h||"",className:c.input(),type:"text",placeholder:x,onChange:b}),l&&S.jsx("div",{className:c.clear(),onClick:()=>{r("")},children:S.jsx(br,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},i6="icon-[fluent--arrow-down-12-regular]",s6="icon-[fluent--arrow-up-12-regular]",Fl="icon-[pajamas--go-back]",fE="icon-[line-md--confirm-circle]",o6="icon-[mage--edit]",ire="icon-[arcticons--nothing-x]",sre="icon-[tabler--filter-plus]",iF="icon-[tabler--filter-minus]",Z2="icon-[ph--list-dashes-thin]",ore="icon-[svg-spinners--3-dots-scale]",iP="icon-[material-symbols-light--logout-sharp]",are="icon-[fluent--shape-intersect-20-regular]",eT="icon-[fluent--checkbox-unchecked-20-regular]",tT="icon-[fluent--checkbox-checked-20-regular]",n0="icon-[teenyicons--tag-outline]",js="icon-[ph--trash]",lre="icon-[clarity--upload-cloud-line]",sP="icon-[ph--user]",cre=async({queryClient:n,keys:e})=>{for await(const t of e)await n.invalidateQueries({queryKey:t,refetchType:"all"})},ji=n=>{const e=Bt.c(4),t=w2(),r=uc();let i;return e[0]!==n||e[1]!==t||e[2]!==r?(i=async()=>{await cre({keys:n,queryClient:t}),await r.invalidate()},e[0]=n,e[1]=t,e[2]=r,e[3]=i):i=e[3],i};var rI={exports:{}},iI,sF;function ure(){if(sF)return iI;sF=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return iI=n,iI}var sI,oF;function dre(){if(oF)return sI;oF=1;var n=ure();function e(){}function t(){}return t.resetWarningCache=e,sI=function(){function r(o,a,l,u,c,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},sI}var aF;function fre(){return aF||(aF=1,rI.exports=dre()()),rI.exports}var hre=fre();const Ci=ol(hre);function jm(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}const pre=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function ev(n,e,t){const r=mre(n),{webkitRelativePath:i}=n,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${n.name}`;return typeof r.path!="string"&&lF(r,"path",s),lF(r,"relativePath",s),r}function mre(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const r=e.split(".").pop().toLowerCase(),i=pre.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}function lF(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const gre=[".DS_Store","Thumbs.db"];function yre(n){return jm(this,void 0,void 0,function*(){return hE(n)&&vre(n.dataTransfer)?wre(n.dataTransfer,n.type):_re(n)?xre(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?bre(n):[]})}function vre(n){return hE(n)}function _re(n){return hE(n)&&hE(n.target)}function hE(n){return typeof n=="object"&&n!==null}function xre(n){return fR(n.target.files).map(e=>ev(e))}function bre(n){return jm(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>ev(t))})}function wre(n,e){return jm(this,void 0,void 0,function*(){if(n.items){const t=fR(n.items).filter(i=>i.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(Sre));return cF(a6(r))}return cF(fR(n.files).map(t=>ev(t)))})}function cF(n){return n.filter(e=>gre.indexOf(e.name)===-1)}function fR(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const r=n[t];e.push(r)}return e}function Sre(n){if(typeof n.webkitGetAsEntry!="function")return uF(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?l6(e):uF(n,e)}function a6(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?a6(t):[t]],[])}function uF(n,e){return jm(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,ev(o)}}const r=n.getAsFile();if(!r)throw new Error(`${n} is not a File`);return ev(r,(t=e?.fullPath)!==null&&t!==void 0?t:void 0)})}function Ere(n){return jm(this,void 0,void 0,function*(){return n.isDirectory?l6(n):Tre(n)})}function l6(n){const e=n.createReader();return new Promise((t,r)=>{const i=[];function s(){e.readEntries(o=>jm(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(Ere));i.push(a),s()}else try{const a=yield Promise.all(i);t(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function Tre(n){return jm(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(r=>{const i=ev(r,n.fullPath);e(i)},r=>{t(r)})})})}var Mw={},dF;function Mre(){return dF||(dF=1,Mw.__esModule=!0,Mw.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),Mw}var Ire=Mre();const oI=ol(Ire);function fF(n){return Rre(n)||Cre(n)||u6(n)||Are()}function Are(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cre(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Rre(n){if(Array.isArray(n))return hR(n)}function hF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pF(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hF(Object(t),!0).forEach(function(r){c6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function c6(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r0(n,e){return kre(n)||Pre(n,e)||u6(n,e)||Nre()}function Nre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u6(n,e){if(n){if(typeof n=="string")return hR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return hR(n,e)}}function hR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Pre(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function kre(n){if(Array.isArray(n))return n}var Ore=typeof oI=="function"?oI:oI.default,d6="file-invalid-type",f6="file-too-large",h6="file-too-small",p6="too-many-files",Lre={FileInvalidType:d6,FileTooLarge:f6,FileTooSmall:h6,TooManyFiles:p6},Dre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:d6,message:"File type must be ".concat(r)}},mF=function(e){return{code:f6,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},gF=function(e){return{code:h6,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Fre={code:p6,message:"Too many files"};function m6(n,e){var t=n.type==="application/x-moz-file"||Ore(n,e);return[t,t?null:Dre(e)]}function g6(n,e,t){if(Gp(n.size))if(Gp(e)&&Gp(t)){if(n.size>t)return[!1,mF(t)];if(n.size<e)return[!1,gF(e)]}else{if(Gp(e)&&n.size<e)return[!1,gF(e)];if(Gp(t)&&n.size>t)return[!1,mF(t)]}return[!0,null]}function Gp(n){return n!=null}function qre(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles,a=n.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var u=m6(l,t),c=r0(u,1),d=c[0],h=g6(l,r,i),p=r0(h,1),g=p[0],x=a?a(l):null;return d&&g&&!x})}function pE(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Iw(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function yF(n){n.preventDefault()}function jre(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Bre(n){return n.indexOf("Edge/")!==-1}function Ure(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return jre(n)||Bre(n)}function Eu(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!pE(r)&&a&&a.apply(void 0,[r].concat(s)),pE(r)})}}function zre(){return"showOpenFilePicker"in window}function Vre(n){if(Gp(n)){var e=Object.entries(n).filter(function(t){var r=r0(t,2),i=r[0],s=r[1],o=!0;return y6(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(v6))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(t,r){var i=r0(r,2),s=i[0],o=i[1];return pF(pF({},t),{},c6({},s,o))},{});return[{description:"Files",accept:e}]}return n}function Wre(n){if(Gp(n))return Object.entries(n).reduce(function(e,t){var r=r0(t,2),i=r[0],s=r[1];return[].concat(fF(e),[i],fF(s))},[]).filter(function(e){return y6(e)||v6(e)}).join(",")}function $re(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Hre(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function y6(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function v6(n){return/^.*\.[\w]+$/.test(n)}var Gre=["children"],Xre=["open"],Kre=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Qre=["refKey","onChange","onClick"];function Yre(n){return eie(n)||Zre(n)||_6(n)||Jre()}function Jre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zre(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function eie(n){if(Array.isArray(n))return pR(n)}function aI(n,e){return rie(n)||nie(n,e)||_6(n,e)||tie()}function tie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _6(n,e){if(n){if(typeof n=="string")return pR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pR(n,e)}}function pR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function nie(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function rie(n){if(Array.isArray(n))return n}function vF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ls(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vF(Object(t),!0).forEach(function(r){mR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mE(n,e){if(n==null)return{};var t=iie(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function iie(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var nT=ie.forwardRef(function(n,e){var t=n.children,r=mE(n,Gre),i=b6(r),s=i.open,o=mE(i,Xre);return ie.useImperativeHandle(e,function(){return{open:s}},[s]),di.createElement(ie.Fragment,null,t(ls(ls({},o),{},{open:s})))});nT.displayName="Dropzone";var x6={disabled:!1,getFilesFromEvent:yre,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};nT.defaultProps=x6;nT.propTypes={children:Ci.func,accept:Ci.objectOf(Ci.arrayOf(Ci.string)),multiple:Ci.bool,preventDropOnDocument:Ci.bool,noClick:Ci.bool,noKeyboard:Ci.bool,noDrag:Ci.bool,noDragEventsBubbling:Ci.bool,minSize:Ci.number,maxSize:Ci.number,maxFiles:Ci.number,disabled:Ci.bool,getFilesFromEvent:Ci.func,onFileDialogCancel:Ci.func,onFileDialogOpen:Ci.func,useFsAccessApi:Ci.bool,autoFocus:Ci.bool,onDragEnter:Ci.func,onDragLeave:Ci.func,onDragOver:Ci.func,onDrop:Ci.func,onDropAccepted:Ci.func,onDropRejected:Ci.func,onError:Ci.func,validator:Ci.func};var gR={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function b6(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ls(ls({},x6),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,d=e.onDragOver,h=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,x=e.onFileDialogCancel,b=e.onFileDialogOpen,y=e.useFsAccessApi,E=e.autoFocus,T=e.preventDropOnDocument,I=e.noClick,N=e.noKeyboard,k=e.noDrag,q=e.noDragEventsBubbling,L=e.onError,R=e.validator,P=ie.useMemo(function(){return Wre(t)},[t]),F=ie.useMemo(function(){return Vre(t)},[t]),z=ie.useMemo(function(){return typeof b=="function"?b:_F},[b]),V=ie.useMemo(function(){return typeof x=="function"?x:_F},[x]),W=ie.useRef(null),Q=ie.useRef(null),X=ie.useReducer(sie,gR),re=aI(X,2),G=re[0],Y=re[1],te=G.isFocused,Z=G.isFileDialogActive,fe=ie.useRef(typeof window<"u"&&window.isSecureContext&&y&&zre()),ge=function(){!fe.current&&Z&&setTimeout(function(){if(Q.current){var Ge=Q.current.files;Ge.length||(Y({type:"closeDialog"}),V())}},300)};ie.useEffect(function(){return window.addEventListener("focus",ge,!1),function(){window.removeEventListener("focus",ge,!1)}},[Q,Z,V,fe]);var ce=ie.useRef([]),ye=function(Ge){W.current&&W.current.contains(Ge.target)||(Ge.preventDefault(),ce.current=[])};ie.useEffect(function(){return T&&(document.addEventListener("dragover",yF,!1),document.addEventListener("drop",ye,!1)),function(){T&&(document.removeEventListener("dragover",yF),document.removeEventListener("drop",ye))}},[W,T]),ie.useEffect(function(){return!r&&E&&W.current&&W.current.focus(),function(){}},[W,E,r]);var be=ie.useCallback(function(Ce){L?L(Ce):console.error(Ce)},[L]),Ee=ie.useCallback(function(Ce){Ce.preventDefault(),Ce.persist(),Ae(Ce),ce.current=[].concat(Yre(ce.current),[Ce.target]),Iw(Ce)&&Promise.resolve(i(Ce)).then(function(Ge){if(!(pE(Ce)&&!q)){var at=Ge.length,Lt=at>0&&qre({files:Ge,accept:P,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:R}),Dt=at>0&&!Lt;Y({isDragAccept:Lt,isDragReject:Dt,isDragActive:!0,type:"setDraggedFiles"}),u&&u(Ce)}}).catch(function(Ge){return be(Ge)})},[i,u,be,q,P,o,s,a,l,R]),Me=ie.useCallback(function(Ce){Ce.preventDefault(),Ce.persist(),Ae(Ce);var Ge=Iw(Ce);if(Ge&&Ce.dataTransfer)try{Ce.dataTransfer.dropEffect="copy"}catch{}return Ge&&d&&d(Ce),!1},[d,q]),qe=ie.useCallback(function(Ce){Ce.preventDefault(),Ce.persist(),Ae(Ce);var Ge=ce.current.filter(function(Lt){return W.current&&W.current.contains(Lt)}),at=Ge.indexOf(Ce.target);at!==-1&&Ge.splice(at,1),ce.current=Ge,!(Ge.length>0)&&(Y({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Iw(Ce)&&c&&c(Ce))},[W,c,q]),Ue=ie.useCallback(function(Ce,Ge){var at=[],Lt=[];Ce.forEach(function(Dt){var Jt=m6(Dt,P),Cn=aI(Jt,2),Vt=Cn[0],hn=Cn[1],vn=g6(Dt,o,s),$t=aI(vn,2),un=$t[0],He=$t[1],At=R?R(Dt):null;if(Vt&&un&&!At)at.push(Dt);else{var on=[hn,He];At&&(on=on.concat(At)),Lt.push({file:Dt,errors:on.filter(function($e){return $e})})}}),(!a&&at.length>1||a&&l>=1&&at.length>l)&&(at.forEach(function(Dt){Lt.push({file:Dt,errors:[Fre]})}),at.splice(0)),Y({acceptedFiles:at,fileRejections:Lt,isDragReject:Lt.length>0,type:"setFiles"}),h&&h(at,Lt,Ge),Lt.length>0&&g&&g(Lt,Ge),at.length>0&&p&&p(at,Ge)},[Y,a,P,o,s,l,h,p,g,R]),Ye=ie.useCallback(function(Ce){Ce.preventDefault(),Ce.persist(),Ae(Ce),ce.current=[],Iw(Ce)&&Promise.resolve(i(Ce)).then(function(Ge){pE(Ce)&&!q||Ue(Ge,Ce)}).catch(function(Ge){return be(Ge)}),Y({type:"reset"})},[i,Ue,be,q]),Ne=ie.useCallback(function(){if(fe.current){Y({type:"openDialog"}),z();var Ce={multiple:a,types:F};window.showOpenFilePicker(Ce).then(function(Ge){return i(Ge)}).then(function(Ge){Ue(Ge,null),Y({type:"closeDialog"})}).catch(function(Ge){$re(Ge)?(V(Ge),Y({type:"closeDialog"})):Hre(Ge)?(fe.current=!1,Q.current?(Q.current.value=null,Q.current.click()):be(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):be(Ge)});return}Q.current&&(Y({type:"openDialog"}),z(),Q.current.value=null,Q.current.click())},[Y,z,V,y,Ue,be,F,a]),ke=ie.useCallback(function(Ce){!W.current||!W.current.isEqualNode(Ce.target)||(Ce.key===" "||Ce.key==="Enter"||Ce.keyCode===32||Ce.keyCode===13)&&(Ce.preventDefault(),Ne())},[W,Ne]),me=ie.useCallback(function(){Y({type:"focus"})},[]),ht=ie.useCallback(function(){Y({type:"blur"})},[]),ct=ie.useCallback(function(){I||(Ure()?setTimeout(Ne,0):Ne())},[I,Ne]),Mt=function(Ge){return r?null:Ge},xe=function(Ge){return N?null:Mt(Ge)},Te=function(Ge){return k?null:Mt(Ge)},Ae=function(Ge){q&&Ge.stopPropagation()},le=ie.useMemo(function(){return function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ge=Ce.refKey,at=Ge===void 0?"ref":Ge,Lt=Ce.role,Dt=Ce.onKeyDown,Jt=Ce.onFocus,Cn=Ce.onBlur,Vt=Ce.onClick,hn=Ce.onDragEnter,vn=Ce.onDragOver,$t=Ce.onDragLeave,un=Ce.onDrop,He=mE(Ce,Kre);return ls(ls(mR({onKeyDown:xe(Eu(Dt,ke)),onFocus:xe(Eu(Jt,me)),onBlur:xe(Eu(Cn,ht)),onClick:Mt(Eu(Vt,ct)),onDragEnter:Te(Eu(hn,Ee)),onDragOver:Te(Eu(vn,Me)),onDragLeave:Te(Eu($t,qe)),onDrop:Te(Eu(un,Ye)),role:typeof Lt=="string"&&Lt!==""?Lt:"presentation"},at,W),!r&&!N?{tabIndex:0}:{}),He)}},[W,ke,me,ht,ct,Ee,Me,qe,Ye,N,k,r]),se=ie.useCallback(function(Ce){Ce.stopPropagation()},[]),Oe=ie.useMemo(function(){return function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ge=Ce.refKey,at=Ge===void 0?"ref":Ge,Lt=Ce.onChange,Dt=Ce.onClick,Jt=mE(Ce,Qre),Cn=mR({accept:P,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Mt(Eu(Lt,Ye)),onClick:Mt(Eu(Dt,se)),tabIndex:-1},at,Q);return ls(ls({},Cn),Jt)}},[Q,t,a,Ye,r]);return ls(ls({},G),{},{isFocused:te&&!r,getRootProps:le,getInputProps:Oe,rootRef:W,inputRef:Q,open:Mt(Ne)})}function sie(n,e){switch(e.type){case"focus":return ls(ls({},n),{},{isFocused:!0});case"blur":return ls(ls({},n),{},{isFocused:!1});case"openDialog":return ls(ls({},gR),{},{isFileDialogActive:!0});case"closeDialog":return ls(ls({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return ls(ls({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ls(ls({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ls({},gR);default:return n}}function _F(){}const oie=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:Lre,default:nT,useDropzone:b6},Symbol.toStringTag,{value:"Module"})),aie=Cr({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:lie}=oie,cie=n=>{const e=Bt.c(50);let t,r,i,s,o,a,l;e[0]!==n?({id:i,accept:t,text:a,variant:l,tva:o,css:r,...s}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7]);const u=o===void 0?aie:o;let c;e[8]!==t||e[9]!==s?(c={noClick:!0,multiple:!1,accept:t,maxFiles:1,minSize:0,maxSize:8388608,...s},e[8]=t,e[9]=s,e[10]=c):c=e[10];const{getRootProps:d,getInputProps:h,isDragActive:p,isDragReject:g}=lie(c);let x,b,y,E,T;if(e[11]!==r||e[12]!==d||e[13]!==i||e[14]!==p||e[15]!==g||e[16]!==u||e[17]!==l){const V=u({active:p,rejected:g,...l,css:r}).slots;e[23]!==d?(E=d(),e[23]=d,e[24]=E):E=e[24],T=V.base(),b=i,y=V.label(),x=V.zone(),e[11]=r,e[12]=d,e[13]=i,e[14]=p,e[15]=g,e[16]=u,e[17]=l,e[18]=x,e[19]=b,e[20]=y,e[21]=E,e[22]=T}else x=e[18],b=e[19],y=e[20],E=e[21],T=e[22];let I;e[25]===Symbol.for("react.memo_cache_sentinel")?(I=S.jsx(br,{icon:lre,variant:{size:"4xl"}}),e[25]=I):I=e[25];let N;e[26]!==a?.title?(N=a?.title||sl.rich("Drag 'n' drop a file here"),e[26]=a?.title,e[27]=N):N=e[27];let k;e[28]!==N?(k=S.jsx("p",{className:"mb-2 text-sm font-semibold",children:N}),e[28]=N,e[29]=k):k=e[29];let q;e[30]!==a?(q=a?.message?S.jsx("p",{className:"text-xs",children:a.message}):null,e[30]=a,e[31]=q):q=e[31];let L;e[32]!==k||e[33]!==q||e[34]!==x?(L=S.jsxs("div",{className:x,children:[I,k,q]}),e[32]=k,e[33]=q,e[34]=x,e[35]=L):L=e[35];let R;e[36]!==h?(R=h(),e[36]=h,e[37]=R):R=e[37];let P;e[38]!==i||e[39]!==R?(P=S.jsx("input",{id:i,type:"file",className:"hidden",...R}),e[38]=i,e[39]=R,e[40]=P):P=e[40];let F;e[41]!==L||e[42]!==P||e[43]!==b||e[44]!==y?(F=S.jsxs("label",{htmlFor:b,className:y,children:[L,P]}),e[41]=L,e[42]=P,e[43]=b,e[44]=y,e[45]=F):F=e[45];let z;return e[46]!==F||e[47]!==E||e[48]!==T?(z=S.jsx("div",{...E,className:T,children:F}),e[46]=F,e[47]=E,e[48]=T,e[49]=z):z=e[49],z},uie=Cr({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-xs","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),w6=n=>{const e=Bt.c(27),{logo:t,menu:r,actions:i,variant:s,tva:o,css:a,children:l}=n,u=o===void 0?uie:o;let c,d,h,p;if(e[0]!==i||e[1]!==a||e[2]!==t||e[3]!==r||e[4]!==u||e[5]!==s){const y=u({...s,css:a}).slots;d=y.base(),e[10]===Symbol.for("react.memo_cache_sentinel")?(h=S.jsx(AU,{position:"top-right"}),e[10]=h):h=e[10];let E;e[11]!==t?(E=S.jsx("div",{children:t}),e[11]=t,e[12]=E):E=e[12];let T;e[13]!==r?(T=S.jsx("div",{className:"grow",children:r}),e[13]=r,e[14]=T):T=e[14];let I;e[15]!==i?(I=S.jsx("div",{className:"flex flex-row gap-2 items-center",children:i}),e[15]=i,e[16]=I):I=e[16],p=S.jsxs("div",{className:y.header(),children:[E,T,I]}),c=y.content(),e[0]=i,e[1]=a,e[2]=t,e[3]=r,e[4]=u,e[5]=s,e[6]=c,e[7]=d,e[8]=h,e[9]=p}else c=e[6],d=e[7],h=e[8],p=e[9];let g;e[17]!==l?(g=l??S.jsx(dc,{}),e[17]=l,e[18]=g):g=e[18];let x;e[19]!==c||e[20]!==g?(x=S.jsx("div",{className:c,children:g}),e[19]=c,e[20]=g,e[21]=x):x=e[21];let b;return e[22]!==d||e[23]!==h||e[24]!==p||e[25]!==x?(b=S.jsxs("div",{className:d,children:[h,p,x]}),e[22]=d,e[23]=h,e[24]=p,e[25]=x,e[26]=b):b=e[26],b},die=Cr({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded-sm","px-1","py-0.5","hover:text-blue-700","focus:outline-hidden","w-fit"]},variant:{},defaults:{}}),fie=ie.forwardRef((n,e)=>{const t=Bt.c(25);let r,i,s,o,a,l,u;t[0]!==n?({icon:s,iconProps:o,variant:u,tva:l,css:i,children:r,...a}=n,t[0]=n,t[1]=r,t[2]=i,t[3]=s,t[4]=o,t[5]=a,t[6]=l,t[7]=u):(r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7]);const c=l===void 0?die:l;let d,h,p;if(t[8]!==i||t[9]!==a||t[10]!==e||t[11]!==c||t[12]!==u){const b=c({...u,css:i}).slots;d=a,h=e,p=b.base(),t[8]=i,t[9]=a,t[10]=e,t[11]=c,t[12]=u,t[13]=d,t[14]=h,t[15]=p}else d=t[13],h=t[14],p=t[15];let g;t[16]!==s||t[17]!==o?(g=q0(s)?S.jsx(br,{icon:s,...o}):s,t[16]=s,t[17]=o,t[18]=g):g=t[18];let x;return t[19]!==r||t[20]!==d||t[21]!==h||t[22]!==p||t[23]!==g?(x=S.jsxs("a",{...d,ref:h,className:p,children:[g,r]}),t[19]=r,t[20]=d,t[21]=h,t[22]=p,t[23]=g,t[24]=x):x=t[24],x}),hie=wU(fie),In=n=>{const e=Bt.c(2);let t;return e[0]!==n?(t=S.jsx(hie,{preload:"intent",...n}),e[0]=n,e[1]=t):t=e[1],t},pie=Cr({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-10","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-xs","pointer-events-auto"]}},defaults:{show:!0}}),mie=n=>{const e=Bt.c(5),{show:t,variant:r,tva:i,css:s}=n,o=t===void 0?!0:t,a=i===void 0?pie:i;let l;if(e[0]!==s||e[1]!==o||e[2]!==a||e[3]!==r){const u=a({show:o,...r,css:s}).slots;l=o?S.jsx("div",{className:u.base(),children:S.jsx(br,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null,e[0]=s,e[1]=o,e[2]=a,e[3]=r,e[4]=l}else l=e[4];return l};var Y1={exports:{}},gie=Y1.exports,xF;function yie(){return xF||(xF=1,function(n,e){(function(t,r){n.exports=r()})(gie,()=>(()=>{var t={d:(g,x)=>{for(var b in x)t.o(x,b)&&!t.o(g,b)&&Object.defineProperty(g,b,{enumerable:!0,get:x[b]})},o:(g,x)=>Object.prototype.hasOwnProperty.call(g,x)},r={};t.d(r,{default:()=>p});const i=(...g)=>{},s=g=>g!==null&&g?.constructor.name==="Object";let o,a;const l=()=>{if(!o){o=!0;try{a=d.storage||localStorage,a.getItem("")}catch{a=(()=>{const g={getItem:b=>x[b]||null,setItem:(b,y)=>{x[b]=y},removeItem:b=>{x[b]=void 0},clear:()=>{x={__proto__:g}}};let x={__proto__:g};return x})()}h()}},u="\0",c=(g,x,b=!0)=>b?[...JSON.stringify(g)].map(y=>String.fromCharCode(y.charCodeAt(0)+x)).join(""):JSON.parse([...g].map(y=>String.fromCharCode(y.charCodeAt(0)-x)).join("")),d={ttl:null,encrypt:!1,encrypter:c,decrypter:(g,x)=>c(g,x,!1),secret:75,storage:void 0};Object.seal(d);const h=(g=!1)=>{l();for(const x of Object.keys(a)){const b=a.getItem(x);let y;try{y=JSON.parse(b||"")}catch{continue}s(y)&&u in y&&(Date.now()>y.ttl||g)&&a.removeItem(x)}},p={config:d,set:(g,x,b={})=>{l();const y={...d,...b,encrypt:b.encrypt!==!1&&(b.encrypt||d.encrypt),ttl:b.ttl===null?null:b.ttl||d.ttl};try{const E=y.ttl&&!isNaN(y.ttl)&&y.ttl>0;let T=E?{[u]:x,ttl:Date.now()+1e3*y.ttl}:x;y.encrypt&&(E?T[u]=(y.encrypter||i)(T[u],y.secret):T=(y.encrypter||i)(T,y.secret)),a.setItem(g,JSON.stringify(T))}catch{return!1}},get:(g,x={})=>{l();const b=a.getItem(g),y={...d,...x,encrypt:x.encrypt!==!1&&(x.encrypt||d.encrypt),ttl:x.ttl===null?null:x.ttl||d.ttl};let E,T;try{E=JSON.parse(b||""),T=s(E)&&u in E,(y.decrypt||y.encrypt)&&(T?E[u]=(y.decrypter||i)(E[u],y.secret):E=(y.decrypter||i)(E,y.secret))}catch{}return T?Date.now()>E.ttl?(a.removeItem(g),null):E[u]:E!==void 0?E:b},flush:h,clear:()=>{l(),a.clear()},remove:g=>{l(),a.removeItem(g)}};return r.default})())}(Y1)),Y1.exports}var vie=yie();const _ie=ol(vie),wv=_ie,xie=Cr({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),Bm=ie.memo(n=>{const e=Bt.c(7),{variant:t,tva:r,css:i,children:s}=n,o=r===void 0?xie:r;let a;e[0]!==i||e[1]!==o||e[2]!==t?(a=o({...t,css:i}).slots.base(),e[0]=i,e[1]=o,e[2]=t,e[3]=a):a=e[3];let l;return e[4]!==s||e[5]!==a?(l=S.jsx("div",{className:a,children:s}),e[4]=s,e[5]=a,e[6]=l):l=e[6],l}),S6=Cr({slot:{base:["flex","flex-row","gap-2","items-center","rounded-sm","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),bie=ie.forwardRef((n,e)=>{const t=Bt.c(21);let r,i,s,o,a,l;t[0]!==n?({icon:o,variant:l,tva:a,css:i,children:r,...s}=n,t[0]=n,t[1]=r,t[2]=i,t[3]=s,t[4]=o,t[5]=a,t[6]=l):(r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6]);const u=o===void 0?null:o,c=a===void 0?S6:a;let d,h;if(t[7]!==i||t[8]!==s||t[9]!==c||t[10]!==l){const x=c({...l,css:i}).slots;d=s,h=x.base(),t[7]=i,t[8]=s,t[9]=c,t[10]=l,t[11]=d,t[12]=h}else d=t[11],h=t[12];let p;t[13]!==u?(p=q0(u)?S.jsx(br,{icon:u}):u,t[13]=u,t[14]=p):p=t[14];let g;return t[15]!==r||t[16]!==e||t[17]!==d||t[18]!==h||t[19]!==p?(g=S.jsxs("a",{...d,className:h,ref:e,children:[p,r]}),t[15]=r,t[16]=e,t[17]=d,t[18]=h,t[19]=p,t[20]=g):g=t[20],g}),wie=wU(bie),Pi=n=>{const e=Bt.c(26);let t,r,i,s,o;e[0]!==n?({match:i,variant:o,tva:s,css:t,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5]);let a;e[6]!==i?(a=i===void 0?[]:i,e[6]=i,e[7]=a):a=e[7];const l=a,u=s===void 0?S6:s,c=uG();let d;if(e[8]!==l||e[9]!==c){let y;e[11]!==c?(y=E=>!!c(E),e[11]=c,e[12]=y):y=e[12],d=l.some(y),e[8]=l,e[9]=c,e[10]=d}else d=e[10];const h=d;let p;e[13]!==h||e[14]!==c||e[15]!==r.params||e[16]!==r.to?(p=!!c({to:r.to,params:r.params})||h,e[13]=h,e[14]=c,e[15]=r.params,e[16]=r.to,e[17]=p):p=e[17];let g;e[18]!==p||e[19]!==o?(g={active:p,...o},e[18]=p,e[19]=o,e[20]=g):g=e[20];const x=r;let b;return e[21]!==t||e[22]!==g||e[23]!==x||e[24]!==u?(b=S.jsx(wie,{preload:"intent",variant:g,tva:u,css:t,...x}),e[21]=t,e[22]=g,e[23]=x,e[24]=u,e[25]=b):b=e[25],b},Sie=Cr({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),Ch=n=>{const e=Bt.c(22),{textTitle:t,textEmpty:r,items:i,render:s,limit:o,variant:a,tva:l,css:u}=n,c=l===void 0?Sie:l;let d;e[0]!==i||e[1]!==o?(d=o?i.slice(0,o):i,e[0]=i,e[1]=o,e[2]=d):d=e[2];const h=d;let p;e[3]!==u||e[4]!==c||e[5]!==a?(p=c({...a,css:u}).slots.base(),e[3]=u,e[4]=c,e[5]=a,e[6]=p):p=e[6];const g=i.length?null:r;let x;if(e[7]!==h||e[8]!==s){let E;e[10]!==s?(E=T=>S.jsx(s,{entity:T},`items-${T.id}`),e[10]=s,e[11]=E):E=e[11],x=h.map(E),e[7]=h,e[8]=s,e[9]=x}else x=e[9];let b;e[12]!==s||e[13]!==i||e[14]!==o||e[15]!==t?(b=o&&i.length>o&&S.jsx(qm,{textTitle:t,target:S.jsx(J0,{iconEnabled:Gz}),outside:!0,children:S.jsx("div",{className:"flex flex-col gap-2",children:i.map(E=>S.jsx(s,{entity:E},`items-${E.id}`))})}),e[12]=s,e[13]=i,e[14]=o,e[15]=t,e[16]=b):b=e[16];let y;return e[17]!==p||e[18]!==g||e[19]!==x||e[20]!==b?(y=S.jsxs("div",{className:p,children:[g,x,b]}),e[17]=p,e[18]=g,e[19]=x,e[20]=b,e[21]=y):y=e[21],y},Eie=Cr({slot:{base:[]},variant:{},defaults:{}}),he=ie.memo(n=>{const e=Bt.c(10),{label:t,fallback:r,variant:i,tva:s,css:o}=n,a=s===void 0?Eie:s;let l;e[0]!==o||e[1]!==a||e[2]!==i?(l=a({...i,css:o}).slots.base(),e[0]=o,e[1]=a,e[2]=i,e[3]=l):l=e[3];let u;e[4]!==r||e[5]!==t?(u=sl.rich(t,r),e[4]=r,e[5]=t,e[6]=u):u=e[6];let c;return e[7]!==l||e[8]!==u?(c=S.jsx("div",{className:l,children:u}),e[7]=l,e[8]=u,e[9]=c):c=e[9],c}),E6=Cr({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-hidden","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),Tie=Cr({use:E6,slot:{},variant:{},defaults:{}}),T6=n=>{const e=Bt.c(72),{icon:t,textTitle:r,textSelect:i,modalProps:s,table:o,render:a,allowEmpty:l,queryKey:u,query:c,value:d,onChange:h,variant:p,tva:g,css:x}=n,b=l===void 0?!1:l,E=(g===void 0?Tie:g)({...p,css:x}).slots,[T,I]=ie.useState(0),[N,k]=ie.useState(15);let q;e[0]!==d?(q=d||[],e[0]=d,e[1]=q):q=e[1];const[L,R]=ie.useState(q),[P,F]=ie.useState(void 0);let z;e[2]!==P||e[3]!==T||e[4]!==N?(z={fulltext:P,page:T,size:N},e[2]=P,e[3]=T,e[4]=N,e[5]=z):z=e[5];let V;e[6]!==u||e[7]!==z?(V=[u,"PopupMultiSelect","data",z],e[6]=u,e[7]=z,e[8]=V):V=e[8];let W;e[9]!==P||e[10]!==T||e[11]!==c||e[12]!==N||e[13]!==V?(W={queryKey:V,async queryFn(){return c({filter:{fulltext:P},cursor:{page:T,size:N}})}},e[9]=P,e[10]=T,e[11]=c,e[12]=N,e[13]=V,e[14]=W):W=e[14];const Q=IS(W);let X;e[15]!==d?(X={value:d},e[15]=d,e[16]=X):X=e[16];let re;e[17]!==u||e[18]!==X?(re=[u,"PopupMultiSelect","selected",X],e[17]=u,e[18]=X,e[19]=re):re=e[19];let G;e[20]!==c||e[21]!==re||e[22]!==d?(G={queryKey:re,async queryFn(){return c({filter:{idIn:d}})},enabled:!!d},e[20]=c,e[21]=re,e[22]=d,e[23]=G):G=e[23];const Y=IS(G),te=Y.data?.data?.length?tT:eT;let Z;e[24]!==te?(Z=S.jsx(br,{icon:te}),e[24]=te,e[25]=Z):Z=e[25];let fe;e[26]!==a||e[27]!==Y.data||e[28]!==i?(fe=Y.data&&Y.data.data.length?S.jsx(a,{entities:Y.data.data}):i||S.jsx(he,{label:"Select item (label)"}),e[26]=a,e[27]=Y.data,e[28]=i,e[29]=fe):fe=e[29];let ge;e[30]!==Q.isLoading?(ge={loading:Q.isLoading},e[30]=Q.isLoading,e[31]=ge):ge=e[31];const ce=Q.isLoading,ye=E.base(),be=E.content();let Ee;e[32]!==T||e[33]!==N?(Ee={page:T,size:N},e[32]=T,e[33]=N,e[34]=Ee):Ee=e[34];let Me;e[35]!==Q.data?(Me=Q.data?.count?Q.data.count:{filter:-1,total:-1,where:-1},e[35]=Q.data,e[36]=Me):Me=e[36];let qe;e[37]===Symbol.for("react.memo_cache_sentinel")?(qe=S.jsx(he,{label:"Total count of items (label)"}),e[37]=qe):qe=e[37];let Ue;e[38]!==I||e[39]!==k||e[40]!==Ee||e[41]!==Me?(Ue={cursor:Ee,count:Me,textTotal:qe,onPage(Te){I(Te)},onSize(Te){k(Te),I(0)}},e[38]=I,e[39]=k,e[40]=Ee,e[41]=Me,e[42]=Ue):Ue=e[42];let Ye;e[43]!==P||e[44]!==F||e[45]!==I?(Ye={value:P,set(Te){F(Te),I(0)}},e[43]=P,e[44]=F,e[45]=I,e[46]=Ye):Ye=e[46];let Ne;e[47]!==Q.data?.data?(Ne=Q.data?.data??[],e[47]=Q.data?.data,e[48]=Ne):Ne=e[48];let ke;e[49]!==L||e[50]!==R?(ke={type:"multi",value:L,set(Te){R(Te)}},e[49]=L,e[50]=R,e[51]=ke):ke=e[51];let me;e[52]!==Ne||e[53]!==ke?(me={data:Ne,selection:ke},e[52]=Ne,e[53]=ke,e[54]=me):me=e[54];let ht;e[55]!==o||e[56]!==Ue||e[57]!==Ye||e[58]!==me?(ht=S.jsx(o,{cursor:Ue,fulltext:Ye,table:me}),e[55]=o,e[56]=Ue,e[57]=Ye,e[58]=me,e[59]=ht):ht=e[59];let ct;e[60]!==be||e[61]!==ht?(ct=S.jsx("div",{className:be,children:ht}),e[60]=be,e[61]=ht,e[62]=ct):ct=e[62];let Mt;e[63]!==b||e[64]!==h||e[65]!==L||e[66]!==E?(Mt=S.jsx(Y2.Consumer,{children:Te=>S.jsxs("div",{className:E.footer(),children:[S.jsx(Br,{iconEnabled:Fl,iconDisabled:Fl,onClick:()=>{Te?.close()},variant:{variant:"subtle"},children:S.jsx(he,{label:"Close (label)"})}),S.jsx(Br,{iconEnabled:fE,iconDisabled:fE,disabled:!L.length&&!b,onClick:()=>{h(L),Te?.close()},children:S.jsx(he,{label:"Confirm selection (label)"})})]})}),e[63]=b,e[64]=h,e[65]=L,e[66]=E,e[67]=Mt):Mt=e[67];let xe;return e[68]!==ye||e[69]!==ct||e[70]!==Mt?(xe=S.jsxs("div",{className:ye,children:[ct,Mt]}),e[68]=ye,e[69]=ct,e[70]=Mt,e[71]=xe):xe=e[71],S.jsx(qm,{icon:t,target:S.jsxs("label",{className:E.input({loading:Y.isLoading,selected:!!Y.data?.data.length}),children:[Z,fe]}),textTitle:r,variant:ge,disabled:ce,...s,children:xe})},M6=n=>{const e=Bt.c(72),{icon:t,textTitle:r,textSelect:i,modalProps:s,table:o,render:a,allowEmpty:l,queryKey:u,query:c,value:d,onChange:h,variant:p,tva:g,css:x}=n,b=l===void 0?!1:l,E=(g===void 0?E6:g)({...p,css:x}).slots,[T,I]=ie.useState(0),[N,k]=ie.useState(15);let q;e[0]!==d?(q=d?[d]:[],e[0]=d,e[1]=q):q=e[1];const[L,R]=ie.useState(q),[P,F]=ie.useState(void 0);let z;e[2]!==P||e[3]!==T||e[4]!==N?(z={fulltext:P,page:T,size:N},e[2]=P,e[3]=T,e[4]=N,e[5]=z):z=e[5];let V;e[6]!==u||e[7]!==z?(V=[u,"PopupSelect","data",z],e[6]=u,e[7]=z,e[8]=V):V=e[8];let W;e[9]!==P||e[10]!==T||e[11]!==c||e[12]!==N||e[13]!==V?(W={queryKey:V,async queryFn(){return c({filter:{fulltext:P},cursor:{page:T,size:N}})}},e[9]=P,e[10]=T,e[11]=c,e[12]=N,e[13]=V,e[14]=W):W=e[14];const Q=IS(W);let X;e[15]!==d?(X={value:d},e[15]=d,e[16]=X):X=e[16];let re;e[17]!==u||e[18]!==X?(re=[u,"PopupSelect","selected",X],e[17]=u,e[18]=X,e[19]=re):re=e[19];let G;e[20]!==c||e[21]!==re||e[22]!==d?(G={queryKey:re,async queryFn(){return c({filter:{id:d||void 0}})},enabled:!!d},e[20]=c,e[21]=re,e[22]=d,e[23]=G):G=e[23];const Y=IS(G),te=Y.data?.data?.[0]?tT:eT;let Z;e[24]!==te?(Z=S.jsx(br,{icon:te}),e[24]=te,e[25]=Z):Z=e[25];let fe;e[26]!==a||e[27]!==Y.data?.data||e[28]!==i?(fe=Y.data?.data?.[0]?S.jsx(a,{entity:Y.data?.data?.[0]}):i||S.jsx(he,{label:"Select item (label)"}),e[26]=a,e[27]=Y.data?.data,e[28]=i,e[29]=fe):fe=e[29];let ge;e[30]!==Q.isLoading?(ge={loading:Q.isLoading},e[30]=Q.isLoading,e[31]=ge):ge=e[31];const ce=Q.isLoading,ye=E.base(),be=E.content();let Ee;e[32]!==T||e[33]!==N?(Ee={page:T,size:N},e[32]=T,e[33]=N,e[34]=Ee):Ee=e[34];let Me;e[35]!==Q.data?(Me=Q.data?.count?Q.data.count:{filter:-1,total:-1,where:-1},e[35]=Q.data,e[36]=Me):Me=e[36];let qe;e[37]===Symbol.for("react.memo_cache_sentinel")?(qe=S.jsx(he,{label:"Total count of items (label)"}),e[37]=qe):qe=e[37];let Ue;e[38]!==I||e[39]!==k||e[40]!==Ee||e[41]!==Me?(Ue={cursor:Ee,count:Me,textTotal:qe,onPage(Te){I(Te)},onSize(Te){k(Te),I(0)}},e[38]=I,e[39]=k,e[40]=Ee,e[41]=Me,e[42]=Ue):Ue=e[42];let Ye;e[43]!==P||e[44]!==F||e[45]!==I?(Ye={value:P,set(Te){F(Te),I(0)}},e[43]=P,e[44]=F,e[45]=I,e[46]=Ye):Ye=e[46];let Ne;e[47]!==Q.data?.data?(Ne=Q.data?.data??[],e[47]=Q.data?.data,e[48]=Ne):Ne=e[48];let ke;e[49]!==L||e[50]!==R?(ke={type:"single",value:L,set(Te){R(Te)}},e[49]=L,e[50]=R,e[51]=ke):ke=e[51];let me;e[52]!==Ne||e[53]!==ke?(me={data:Ne,selection:ke},e[52]=Ne,e[53]=ke,e[54]=me):me=e[54];let ht;e[55]!==o||e[56]!==Ue||e[57]!==Ye||e[58]!==me?(ht=S.jsx(o,{cursor:Ue,fulltext:Ye,table:me}),e[55]=o,e[56]=Ue,e[57]=Ye,e[58]=me,e[59]=ht):ht=e[59];let ct;e[60]!==be||e[61]!==ht?(ct=S.jsx("div",{className:be,children:ht}),e[60]=be,e[61]=ht,e[62]=ct):ct=e[62];let Mt;e[63]!==b||e[64]!==h||e[65]!==L||e[66]!==E?(Mt=S.jsx(Y2.Consumer,{children:Te=>S.jsxs("div",{className:E.footer(),children:[S.jsx(Br,{iconEnabled:Fl,iconDisabled:Fl,onClick:()=>{Te?.close()},variant:{variant:"subtle"},children:S.jsx(he,{label:"Close (label)"})}),S.jsx(Br,{iconEnabled:fE,iconDisabled:fE,disabled:!L.length&&!b,onClick:()=>{h(L?.[0]),Te?.close()},children:S.jsx(he,{label:"Confirm selection (label)"})})]})}),e[63]=b,e[64]=h,e[65]=L,e[66]=E,e[67]=Mt):Mt=e[67];let xe;return e[68]!==ye||e[69]!==ct||e[70]!==Mt?(xe=S.jsxs("div",{className:ye,children:[ct,Mt]}),e[68]=ye,e[69]=ct,e[70]=Mt,e[71]=xe):xe=e[71],S.jsx(qm,{icon:t,target:S.jsxs("label",{className:E.input({loading:Y.isLoading,selected:!!Y.data?.data?.length}),children:[Z,fe]}),textTitle:r,variant:ge,disabled:ce,...s,children:xe})},Mie=Cr({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),Sv=n=>{const e=Bt.c(44),{entity:t,title:r,links:i,actions:s,extra:o,variant:a,tva:l,css:u}=n,c=r===void 0?Iie:r,d=i===void 0?Aie:i,h=s===void 0?Cie:s,p=o===void 0?Rie:o,g=l===void 0?Mie:l;let x,b,y,E,T,I,N,k;if(e[0]!==h||e[1]!==d||e[2]!==c||e[3]!==u||e[4]!==t||e[5]!==g||e[6]!==a){const z=g({...a,css:u}).slots;x=tP.Provider,e[15]===Symbol.for("react.memo_cache_sentinel")?(E={inline:!0},e[15]=E):E=e[15],y=z.base(),I=z.container();let V;e[16]!==c||e[17]!==t?(V=S.jsx(c,{entity:t}),e[16]=c,e[17]=t,e[18]=V):V=e[18],N=S.jsx("div",{className:z.title(),children:V});let W;e[19]!==d||e[20]!==t?(W=S.jsx(d,{entity:t}),e[19]=d,e[20]=t,e[21]=W):W=e[21],k=S.jsx("div",{className:z.links(),children:W});let Q;e[22]!==h||e[23]!==t?(Q=S.jsx(h,{entity:t}),e[22]=h,e[23]=t,e[24]=Q):Q=e[24],b=S.jsx("div",{className:z.actions(),children:Q}),T=z.extra(),e[0]=h,e[1]=d,e[2]=c,e[3]=u,e[4]=t,e[5]=g,e[6]=a,e[7]=x,e[8]=b,e[9]=y,e[10]=E,e[11]=T,e[12]=I,e[13]=N,e[14]=k}else x=e[7],b=e[8],y=e[9],E=e[10],T=e[11],I=e[12],N=e[13],k=e[14];let q;e[25]!==p||e[26]!==t?(q=S.jsx(p,{entity:t}),e[25]=p,e[26]=t,e[27]=q):q=e[27];let L;e[28]!==q||e[29]!==T?(L=S.jsx("div",{className:T,children:q}),e[28]=q,e[29]=T,e[30]=L):L=e[30];let R;e[31]!==b||e[32]!==L||e[33]!==I||e[34]!==N||e[35]!==k?(R=S.jsxs("div",{className:I,children:[N,k,b,L]}),e[31]=b,e[32]=L,e[33]=I,e[34]=N,e[35]=k,e[36]=R):R=e[36];let P;e[37]!==y||e[38]!==R?(P=S.jsx("div",{className:y,children:R}),e[37]=y,e[38]=R,e[39]=P):P=e[39];let F;return e[40]!==x||e[41]!==E||e[42]!==P?(F=S.jsx(x,{value:E,children:P}),e[40]=x,e[41]=E,e[42]=P,e[43]=F):F=e[43],F};function Iie(){return null}function Aie(){return null}function Cie(){return null}function Rie(){return null}const Nie=Cr({slot:{base:["w-full","bg-slate-200","rounded-sm","transition-all"],progress:["h-full","bg-blue-400","rounded-sm","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),rT=ie.memo(n=>{const e=Bt.c(15),{value:t,variant:r,tva:i,css:s}=n,o=i===void 0?Nie:i;let a,l,u;if(e[0]!==s||e[1]!==o||e[2]!==t||e[3]!==r){const h=o({...r,css:s}).slots;u=h.base();const p=`${t}%`;e[7]!==p?(a={width:p},e[7]=p,e[8]=a):a=e[8],l=h.progress(),e[0]=s,e[1]=o,e[2]=t,e[3]=r,e[4]=a,e[5]=l,e[6]=u}else a=e[4],l=e[5],u=e[6];let c;e[9]!==a||e[10]!==l?(c=S.jsx("div",{style:a,className:l}),e[9]=a,e[10]=l,e[11]=c):c=e[11];let d;return e[12]!==u||e[13]!==c?(d=S.jsx("div",{className:u,children:c}),e[12]=u,e[13]=c,e[14]=d):d=e[14],d}),Pie=n=>e=>{n({search:({cursor:t,...r})=>({...r,cursor:{...t,page:e}})})},kie=n=>e=>{n({search:({cursor:t,...r})=>({...r,cursor:{...t,size:e,page:0}})})},bs=n=>({onPage:Pie(n),onSize:kie(n)}),ws=n=>e=>n({search:({cursor:t,...r})=>({...r,filter:e,cursor:{...t,page:0}})}),Ss=n=>e=>{n({search:({cursor:t,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...t,page:e?0:t.page}}),replace:!!e})},ll=n=>e=>{n({search(t){return{...t,selection:e}}})},zo=n=>({loading:S.jsx(he,{label:`${n} - Loading (label)`}),success:S.jsx(he,{label:`${n} - Success (label)`}),error:S.jsx(he,{label:`${n} - Error (label)`})}),Oie=Cr({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),cl=n=>{const e=Bt.c(22),{textContent:t,textToast:r,callback:i,onCancel:s,invalidator:o,variant:a,tva:l,css:u}=n,d=(l===void 0?Oie:l)({...a,css:u}).slots,h=ie.useContext(Y2);let p;e[0]!==i||e[1]!==o||e[2]!==h||e[3]!==r?(p={async mutationFn(){return aX.promise(i(),zo(r))},async onSuccess(){await o?.(),h?.close()}},e[0]=i,e[1]=o,e[2]=h,e[3]=r,e[4]=p):p=e[4];const g=or(p),x=d.base(),b=d.footer();let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y={variant:"subtle",size:"sm"},e[5]=y):y=e[5];let E;e[6]!==h||e[7]!==s?(E=()=>{h?.close(),s?.()},e[6]=h,e[7]=s,e[8]=E):E=e[8];let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Cancel (button)"}),e[9]=T):T=e[9];let I;e[10]!==E?(I=S.jsx(Br,{variant:y,iconEnabled:Fl,onClick:E,children:T}),e[10]=E,e[11]=I):I=e[11];let N;e[12]===Symbol.for("react.memo_cache_sentinel")?(N={variant:"danger",size:"md"},e[12]=N):N=e[12];let k;e[13]!==g?(k=()=>{g.mutate()},e[13]=g,e[14]=k):k=e[14];let q;e[15]===Symbol.for("react.memo_cache_sentinel")?(q=S.jsx(he,{label:"Delete (button)"}),e[15]=q):q=e[15];let L;e[16]!==k?(L=S.jsx(Br,{variant:N,iconEnabled:js,onClick:k,children:q}),e[16]=k,e[17]=L):L=e[17];let R;return e[18]!==L||e[19]!==b||e[20]!==I?(R=S.jsxs("div",{className:b,children:[I,L]}),e[18]=L,e[19]=b,e[20]=I,e[21]=R):R=e[21],S.jsxs("div",{className:x,children:[S.jsx("div",{className:d.content(),children:t}),R]})},Lie=async({select:n,query:e=()=>n,filter:t,where:r})=>({total:(await n.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:n,where:r}),where:t}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:n,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),tu=async({select:n,query:e=()=>n,output:t,filter:r,where:i})=>t.parse(await e({select:e({select:n,where:i}),where:r}).executeTakeFirstOrThrow()),Vo=async({select:n,query:e=()=>n,output:t,filter:r,where:i,cursor:s})=>{const o=a=>{let l=a;return s&&(l=a.limit(s.size).offset(s.page*s.size)),l};return ne.array(t).parse(await o(e({select:e({select:n,where:i}),where:r})).execute())},zi=async({select:n,query:e=()=>n,output:t,filter:r,where:i,cursor:s})=>({data:await Vo({select:n,output:t,where:i,filter:r,query:e,cursor:s}),count:await Lie({select:n,where:i,filter:r,query:e})}),rs=n=>{const e="input"in n?n.input:"input",t="output"in n?n.output:"output",r="schema"in n?n.schema._input:n._input,i="schema"in n?n.schema._output:n._output;return{types:{input:e==="output"?i:r,output:t==="input"?r:i},parse:s=>"schema"in n?n.schema.parse(s):n.parse(s)}},Aw=(n,e)=>ne.custom().pipe(n.catch(e)),Es=({filter:n},{size:e=30}={size:30})=>ne.object({filter:Aw(n.optional(),void 0),cursor:Aw(tee,{page:0,size:e}).default({page:0,size:e}),sort:Aw(ne.any().optional(),[]).default([]),selection:Aw(ne.array(ne.string()),[]).default([])}),Die=Cr({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),I6=n=>{const e=Bt.c(24),{textTitle:t,textMessage:r,icon:i,iconProps:s,variant:o,tva:a,css:l,children:u}=n,c=a===void 0?Die:a;let d,h,p,g,x;if(e[0]!==l||e[1]!==i||e[2]!==s||e[3]!==r||e[4]!==t||e[5]!==c||e[6]!==o){const E=c({...o,css:l}).slots;h=E.base(),e[12]!==i||e[13]!==s?(p=i?S.jsx(br,{icon:i,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...s}):null,e[12]=i,e[13]=s,e[14]=p):p=e[14],g=S.jsx("div",{className:E.title(),children:t}),x=S.jsx("div",{className:E.message(),children:r}),d=E.body(),e[0]=l,e[1]=i,e[2]=s,e[3]=r,e[4]=t,e[5]=c,e[6]=o,e[7]=d,e[8]=h,e[9]=p,e[10]=g,e[11]=x}else d=e[7],h=e[8],p=e[9],g=e[10],x=e[11];let b;e[15]!==u||e[16]!==d?(b=S.jsx("div",{className:d,children:u}),e[15]=u,e[16]=d,e[17]=b):b=e[17];let y;return e[18]!==h||e[19]!==p||e[20]!==g||e[21]!==x||e[22]!==b?(y=S.jsxs("div",{className:h,children:[p,g,x,b]}),e[18]=h,e[19]=p,e[20]=g,e[21]=x,e[22]=b,e[23]=y):y=e[23],y},oP=Cr({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),Fie=n=>{const e=Bt.c(19),{table:t,cell:r,variant:i,tva:s,css:o}=n,{column:a,data:l,value:u}=r,c=s===void 0?oP:s,d=a.def.render;let h;e[0]!==o||e[1]!==c||e[2]!==i?(h=c({...i,css:o}).slots.td(),e[0]=o,e[1]=c,e[2]=i,e[3]=h):h=e[3];let p;e[4]!==d||e[5]!==l||e[6]!==t||e[7]!==u?(p=S.jsx(d,{table:t,data:l,value:u,context:t.context}),e[4]=d,e[5]=l,e[6]=t,e[7]=u,e[8]=p):p=e[8];let g;e[9]!==a.def.filter||e[10]!==a.filter||e[11]!==l?(g=a.filter&&!a.filter.is()?S.jsx(br,{icon:sre,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{a.filter&&(a.def.filter?.onFilter({data:l,filter:a.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null,e[9]=a.def.filter,e[10]=a.filter,e[11]=l,e[12]=g):g=e[12];let x;e[13]!==p||e[14]!==g?(x=S.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[p,g]}),e[13]=p,e[14]=g,e[15]=x):x=e[15];let b;return e[16]!==h||e[17]!==x?(b=S.jsx("td",{className:h,children:x}),e[16]=h,e[17]=x,e[18]=b):b=e[18],b},qie=n=>{const e=Bt.c(27),{table:t,row:r,action:i,variant:s,tva:o,css:a}=n,l=o===void 0?oP:o;let u,c;if(e[0]!==i?.row||e[1]!==i?.table||e[2]!==a||e[3]!==r||e[4]!==t||e[5]!==l||e[6]!==s){const g=l({...s,css:a}).slots,x=i?.table,b=i?.row;u=g.tr({selected:t.selection.isSelected(r)}),c=x||b||t.selection.enabled?S.jsx("td",{className:"w-0",children:S.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?S.jsx(br,{icon:t.selection.isSelected(r)?tT:eT,css:{base:g.select({selected:t.selection.isSelected(r)})},onClick:t.selection.withRowHandler(r)}):null,b?S.jsx(b,{table:t,data:r.data}):null]})}):null,e[0]=i?.row,e[1]=i?.table,e[2]=a,e[3]=r,e[4]=t,e[5]=l,e[6]=s,e[7]=u,e[8]=c}else u=e[7],c=e[8];let d;if(e[9]!==a||e[10]!==r.cells||e[11]!==r.id||e[12]!==t||e[13]!==l||e[14]!==s){let g;e[16]!==a||e[17]!==r.id||e[18]!==t||e[19]!==l||e[20]!==s?(g=x=>S.jsx(Fie,{table:t,cell:x,variant:s,tva:l,css:a},`${r.id}-${x.column.id}`),e[16]=a,e[17]=r.id,e[18]=t,e[19]=l,e[20]=s,e[21]=g):g=e[21],d=r.cells.map(g),e[9]=a,e[10]=r.cells,e[11]=r.id,e[12]=t,e[13]=l,e[14]=s,e[15]=d}else d=e[15];let h;e[22]===Symbol.for("react.memo_cache_sentinel")?(h=S.jsx("td",{}),e[22]=h):h=e[22];let p;return e[23]!==u||e[24]!==c||e[25]!==d?(p=S.jsxs("tr",{className:u,children:[c,d,h]}),e[23]=u,e[24]=c,e[25]=d,e[26]=p):p=e[26],p},Ts=({table:n,fulltext:e,cursor:t,empty:r=()=>S.jsx(I6,{icon:ire,textTitle:S.jsx(he,{label:"Nothing here"}),textMessage:S.jsx(he,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=oP,css:a})=>{const l=o({...s,css:a}).slots,u=i?.table,c=i?.row;return S.jsxs("div",{className:l.base(),children:[S.jsxs("div",{className:"flex items-center justify-between",children:[S.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?S.jsx(r6,{value:e.value,onFulltext:e.set}):null}),S.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[S.jsx(JD,{...t}),n.filter.is()&&S.jsx(J0,{iconEnabled:iF,css:{base:["text-amber-500"]},onClick:()=>n.filter.reset()})]})]}),S.jsx("div",{className:"relative overflow-x-auto",children:S.jsxs("table",{className:l.table(),children:[S.jsx("thead",{className:l.thead(),children:S.jsxs("tr",{children:[u||c||n.selection.enabled?S.jsx("th",{className:"w-0",children:S.jsxs("div",{className:"flex flex-row items-center gap-2",children:[n.selection.enabled?S.jsx(br,{icon:n.selection.isAll()?tT:n.selection.isAny()?are:eT,variant:{disabled:n.selection.isSingle},css:{base:l.select({selected:n.selection.isAny()})},onClick:n.selection.withAllHandler()}):null,u?S.jsx(u,{table:n}):null]})}):null,n.visible.map(d=>{const h=d.def.header||(()=>null);return S.jsx("th",{className:l.th(),style:d.def.size?{width:`${d.def.size}rem`}:void 0,children:S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[S.jsx(h,{table:n}),S.jsx("div",{className:"flex flex-row items-center gap-2",children:d.filter?.is()&&S.jsx(br,{icon:iF,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{d.filter?.reset()}})})]})},d.id)}),S.jsx("th",{})]})}),n.isEmpty?null:S.jsx("tbody",{className:l.tbody(),children:n.rows?.map(d=>S.jsx(qie,{row:d,table:n,action:i,variant:s,tva:o,css:a},d.id))})]})}),n.isEmpty?S.jsx(r,{}):null,S.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[S.jsx("div",{}),S.jsx(JD,{...t})]})]})},Do=[];for(let n=0;n<256;++n)Do.push((n+256).toString(16).slice(1));function jie(n,e=0){return(Do[n[e+0]]+Do[n[e+1]]+Do[n[e+2]]+Do[n[e+3]]+"-"+Do[n[e+4]]+Do[n[e+5]]+"-"+Do[n[e+6]]+Do[n[e+7]]+"-"+Do[n[e+8]]+Do[n[e+9]]+"-"+Do[n[e+10]]+Do[n[e+11]]+Do[n[e+12]]+Do[n[e+13]]+Do[n[e+14]]+Do[n[e+15]]).toLowerCase()}let lI;const Bie=new Uint8Array(16);function Uie(){if(!lI){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");lI=crypto.getRandomValues.bind(crypto)}return lI(Bie)}const zie=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bF={randomUUID:zie};function wF(n,e,t){if(bF.randomUUID&&!n)return bF.randomUUID();n=n||{};const r=n.random??n.rng?.()??Uie();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jie(r)}const Ms=({columns:n,order:e=n.map(l=>l.name),hidden:t=[],visible:r=n.map(l=>l.name),data:i,filter:s,selection:o,context:a})=>{const l={...s?.value||{}},u=bD(l||{}),c=new Set(o?.value),d=n.map(p=>({id:wF(),def:p,filter:p.filter?{is(){return p.filter?u.get(p.filter.path)!==void 0:!1},reset(){p.filter&&u.set(p.filter.path,void 0),s?.set({...l})},shallow(g,x){p.filter&&u.set(g,x),s?.set({...l})},set(g){s?.set({...g})}}:void 0})),h=d.filter(p=>r.includes(p.def.name)&&!t.includes(p.def.name)).sort((p,g)=>{const x=e.indexOf(p.def.name),b=e.indexOf(g.def.name);return(x===-1?1/0:x)-(b===-1?1/0:b)});return{columns:d,visible:h,rows:i?.map(p=>({id:wF(),data:p,cells:h.map(g=>({column:g,data:p,value:bD(p).get(g.def.name)}))})),isEmpty:i.length===0,filter:{is(){return d.some(p=>p.filter?.is())},reset(){s?.set({})},set(p){s?.set({...p})},shallow(p,g){u.set(p,g)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(c),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:p}){return c.has(p.id)||!1},isAll(){return i.every(p=>c.has(p.id))},isAny(){return i.some(p=>c.has(p.id))},withRowHandler({data:p}){return()=>{if(o?.type==="single"){const g=c.has(p.id);c.clear(),g?c.delete(p.id):c.add(p.id)}else c.has(p.id)?c.delete(p.id):c.add(p.id);o?.set(Array.from(c))}},withAllHandler(){return()=>{i.every(p=>c.has(p.id))?c.clear():i.forEach(({id:p})=>c.add(p)),o?.set(Array.from(c))}}},context:a}},Is=()=>n=>n,A6=({tags:n=[],render:e=({tag:i})=>i.label,onClick:t,textEmpty:r})=>{const i=n.filter(Boolean).sort((s,o)=>s.sort-o.sort);return S.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>S.jsx(ia,{onClick:()=>t?.(s),children:e({tag:s})},s.id)):r||S.jsx(he,{label:"No tags (label)"})})},Vie=Cr({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),Ev=n=>{const e=Bt.c(10),{icon:t,title:r,subtitle:i,variant:s,tva:o,css:a}=n,l=o===void 0?Vie:o,u=!!i;let c;if(e[0]!==a||e[1]!==t||e[2]!==i||e[3]!==u||e[4]!==r||e[5]!==l||e[6]!==s){const d=l({withSubtitle:u,...s,css:a}).slots;let h;e[8]!==t?(h=t?S.jsx(br,{icon:t}):null,e[8]=t,e[9]=h):h=e[9],c=S.jsxs("div",{className:d.base(),children:[S.jsxs("div",{className:d.title(),children:[h,r]}),i?S.jsx("div",{className:d.subtitle(),children:i}):null]}),e[0]=a,e[1]=t,e[2]=i,e[3]=u,e[4]=r,e[5]=l,e[6]=s,e[7]=c}else c=e[7];return c};var Cw={},SF;function Wie(){if(SF)return Cw;SF=1;var n=bU();return Cw.createRoot=n.createRoot,Cw.hydrateRoot=n.hydrateRoot,Cw}var $ie=Wie();const Hie=ol($ie),aP=B9()({}),Gie="modulepreload",Xie=function(n){return"/"+n},EF={},TF=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(t.map(l=>{if(l=Xie(l),l in EF)return;EF[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Gie,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Kie=Ln("/$locale")({component:dc,loader:async({params:{locale:n}})=>{try{sl.push((await Qie(`../translation/${n}.yaml`)).default)}catch(e){console.error(e)}}});function Qie(n){switch(n){case"../translation/cs":case"../translation/cs.yaml":return TF(()=>import("./cs-BUpUyNKP.js"),[]);case"../translation/en":case"../translation/en.yaml":return TF(()=>import("./en-CvMFGEQe.js"),[]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+n)))})}}const C6="cs",Yie=[C6,"en"],Jie=Ln("/")({loader:async()=>{throw O0({to:"/$locale",params:{locale:tY({available:Yie,fallback:C6})}})}}),Zie=Ln("/$locale/")({component:()=>{const{locale:n}=nr({from:"/$locale"});return S.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:S.jsxs("div",{className:"rounded-sm bg-slate-50 p-4 shadow-md border border-slate-300",children:[S.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),S.jsx("ul",{children:S.jsx("li",{children:S.jsx(In,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:n},children:"DeRivean"})})})]})})}}),{kysely:An,bootstrap:ese}=Jne({database:"derivean",async bootstrap({kysely:n}){const e="varchar(36)";try{await n.selectFrom("User").select(t=>t.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await n.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await n.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await n.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("weight","integer",r=>r.notNull().defaultTo(1)).addColumn("image","text").addUniqueConstraint("[Resource] name",["name"]).execute(),await n.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute();for await(const r of["resourceId","tagId"])await n.schema.createIndex(`[Resource_Tag] ${r}`).on("Resource_Tag").columns([r]).execute();await n.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await n.schema.createIndex("[Inventory] resourceId").on("Inventory").columns(["resourceId"]).execute(),await n.schema.createTable("Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(128)",r=>r.notNull()).addColumn("probability","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull()).addColumn("image","text").execute(),await n.schema.createTable("Region_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Region_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("minAmount","float4",r=>r.notNull()).addColumn("maxAmount","float4",r=>r.notNull()).addColumn("minLimit","float4",r=>r.notNull()).addColumn("maxLimit","float4",r=>r.notNull()).addUniqueConstraint("[Region_Inventory] regionId-resourceId",["regionId","resourceId"]).execute();for await(const r of["regionId","resourceId"])await n.schema.createIndex(`[Region_Inventory] ${r}`).on("Region_Inventory").columns([r]).execute();await n.schema.createTable("Map").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Map] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("name","varchar(128)",r=>r.notNull()).addUniqueConstraint("[Map] userId-name",["userId","name"]).execute(),await n.schema.createIndex("[Map] userId").on("Map").columns(["userId"]).execute(),await n.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(vs`CURRENT_TIMESTAMP`).notNull()).execute();for await(const r of["userId","mapId"])await n.schema.createIndex(`[Cycle] ${r}`).on("Cycle").columns([r]).execute();await n.schema.createTable("Land").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Land] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("position","integer",r=>r.notNull()).execute();for await(const r of["mapId","regionId"])await n.schema.createIndex(`[Land] ${r}`).on("Land").columns([r]).execute();await n.schema.createTable("Land_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Land_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Land_Inventory] landId-inventoryId",["landId","inventoryId"]).execute();for await(const r of["landId","inventoryId"])await n.schema.createIndex(`[Land_Inventory] ${r}`).on("Land_Inventory").columns([r]).execute();await n.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addColumn("image","text").addUniqueConstraint("[Blueprint] name",["name"]).execute(),await n.schema.createTable("Blueprint_Region").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("regionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Region] regionId",["regionId"],"Region",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Region] blueprintId-regionId",["blueprintId","regionId"]).execute(),await n.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await n.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await n.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await n.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await n.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await n.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await n.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await n.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await n.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await n.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("cycles","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await n.schema.createTable("Plot").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Plot] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Plot] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Plot] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("position","integer",r=>r.notNull()).execute(),await n.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plotId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] plotId",["plotId"],"Plot",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("landId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] landId",["landId"],"Land",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).execute();for await(const r of["userId","blueprintId","constructionId","landId","productionId","recurringProductionId"])await n.schema.createIndex(`[Building] ${r}`).on("Building").columns([r]).execute();await n.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await n.schema.createTable("Building_To_Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("linkId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_To_Building] linkId",["linkId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_To_Building] buildingId-linkId",["buildingId","linkId"]).execute();for await(const r of["userId","mapId","buildingId","linkId"])await n.schema.createIndex(`[Building_To_Building] ${r}`).on("Building_To_Building").columns([r]).execute();await n.schema.createTable("Road").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("plotId",e,r=>r.notNull()).addForeignKeyConstraint("[Road] plotId",["plotId"],"Plot",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).execute(),await n.schema.createTable("Supply").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Supply] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Supply] buildingId-resourceId",["buildingId","resourceId"]).execute(),await n.schema.createTable("Demand").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Demand] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("priority","integer",r=>r.notNull().defaultTo(0)).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).addUniqueConstraint("[Demand] buildingId-resourceId",["buildingId","resourceId"]).execute(),await n.schema.createTable("Transport").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("mapId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] mapId",["mapId"],"Map",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("roadId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] roadId",["roadId"],"Road",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("sourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] sourceId",["sourceId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("targetId",e,r=>r.notNull()).addForeignKeyConstraint("[Transport] targetId",["targetId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute();for await(const r of["userId","mapId","resourceId","roadId","sourceId","targetId"])await n.schema.createIndex(`[Transport] ${r}`).on("Transport").columns([r]).execute()}}}),tse=Ln("/$locale/apps/derivean")({async loader({context:{queryClient:n,kysely:e}}){return await ese(),{image:await n.ensureQueryData({queryKey:["GameMap","image"],async queryFn(){return e.transaction().execute(async t=>Vo({select:t.selectFrom("Blueprint as b").select(["b.id","b.image"]).where("b.image","is not",null).union(t.selectFrom("Region as r").select(["r.id","r.image"]).where("r.image","is not",null)).union(t.selectFrom("Resource as r").select(["r.id","r.image"]).where("r.image","is not",null)),output:ne.object({id:ne.string().min(1),image:ne.string()})}))}})}}}),R6="icon-[proicons--game]",nse=Cr({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded-sm","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),N6=n=>{const e=Bt.c(6),{variant:t,tva:r,css:i}=n,s=r===void 0?nse:r;let o;e[0]!==i||e[1]!==s||e[2]!==t?(o=s({...t,css:i}).slots.base(),e[0]=i,e[1]=s,e[2]=t,e[3]=o):o=e[3];let a;return e[4]!==o?(a=S.jsx("div",{className:o,children:"DeRivean"}),e[4]=o,e[5]=a):a=e[5],a},ql="icon-[fluent--building-shop-20-regular]",gE="icon-[oui--vis-map-region]",ns="icon-[hugeicons--resources-add]",rse=n=>{const e=Bt.c(41);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i={locale:r},e[1]=r,e[2]=i):i=e[2];let s;e[3]===Symbol.for("react.memo_cache_sentinel")?(s=S.jsx(he,{label:"Editor (menu)"}),e[3]=s):s=e[3];let o;e[4]!==i?(o=S.jsx(Pi,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:i,children:s}),e[4]=i,e[5]=o):o=e[5];let a;e[6]!==r?(a={locale:r},e[6]=r,e[7]=a):a=e[7];let l,u;e[8]===Symbol.for("react.memo_cache_sentinel")?(l=[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],u=S.jsx(he,{label:"Blueprint list (menu)"}),e[8]=l,e[9]=u):(l=e[8],u=e[9]);let c;e[10]!==a?(c=S.jsx(Pi,{icon:ql,to:"/$locale/apps/derivean/root/blueprint/list",params:a,match:l,children:u}),e[10]=a,e[11]=c):c=e[11];let d;e[12]!==r?(d={locale:r},e[12]=r,e[13]=d):d=e[13];let h;e[14]===Symbol.for("react.memo_cache_sentinel")?(h=S.jsx(he,{label:"Region list (menu)"}),e[14]=h):h=e[14];let p;e[15]!==d?(p=S.jsx(Pi,{icon:gE,to:"/$locale/apps/derivean/root/region/list",params:d,children:h}),e[15]=d,e[16]=p):p=e[16];let g;e[17]!==r?(g={locale:r},e[17]=r,e[18]=g):g=e[18];let x;e[19]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Resource list (menu)"}),e[19]=x):x=e[19];let b;e[20]!==g?(b=S.jsx(Pi,{icon:ns,to:"/$locale/apps/derivean/root/resource/list",params:g,children:x}),e[20]=g,e[21]=b):b=e[21];let y;e[22]!==r?(y={locale:r},e[22]=r,e[23]=y):y=e[23];let E,T;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"}],T=S.jsx(he,{label:"User list (menu)"}),e[24]=E,e[25]=T):(E=e[24],T=e[25]);let I;e[26]!==y?(I=S.jsx(Pi,{icon:sP,to:"/$locale/apps/derivean/root/user/list",params:y,match:E,children:T}),e[26]=y,e[27]=I):I=e[27];let N;e[28]!==r?(N={locale:r},e[28]=r,e[29]=N):N=e[29];let k;e[30]===Symbol.for("react.memo_cache_sentinel")?(k=S.jsx(he,{label:"Tag list (menu)"}),e[30]=k):k=e[30];let q;e[31]!==N?(q=S.jsx(Pi,{icon:n0,to:"/$locale/apps/derivean/root/tag/list",params:N,children:k}),e[31]=N,e[32]=q):q=e[32];let L;return e[33]!==n||e[34]!==p||e[35]!==b||e[36]!==I||e[37]!==q||e[38]!==o||e[39]!==c?(L=S.jsxs(Bm,{...n,children:[o,c,p,b,I,q]}),e[33]=n,e[34]=p,e[35]=b,e[36]=I,e[37]=q,e[38]=o,e[39]=c,e[40]=L):L=e[40],L},Z0=ne.object({id:ne.string(),name:ne.string(),login:ne.string()}),ise=Ln("/$locale/apps/derivean/root")({async beforeLoad({context:n,params:{locale:e}}){return{...n,async session(){try{return Z0.parse(wv.get("session"))}catch{throw O0({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:n}}){return{session:await n()}},component:()=>{const{locale:n}=nr({from:"/$locale"}),{session:e}=eo({from:"/$locale/apps/derivean/root"});return S.jsx(w6,{logo:S.jsx(In,{to:"/$locale/apps/derivean/root",params:{locale:n},children:S.jsx(N6,{})}),menu:S.jsx(rse,{}),actions:S.jsxs(S.Fragment,{children:[e.name,S.jsx(In,{icon:R6,to:"/$locale/apps/derivean/game",params:{locale:n}}),S.jsx(In,{icon:iP,to:"/$locale/apps/derivean/public/logout",params:{locale:n},preload:!1})]})})}}),sse=Ln("/$locale/apps/derivean/map")({async beforeLoad({context:n,params:{locale:e}}){return{...n,async session(){try{return Z0.parse(wv.get("session"))}catch{throw O0({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},component(){return S.jsxs(S.Fragment,{children:[S.jsx(AU,{position:"top-right"}),S.jsx(dc,{})]})}}),ose=Ln("/$locale/apps/derivean/game")({async beforeLoad({context:n,params:{locale:e}}){return{...n,async session(){try{return Z0.parse(wv.get("session"))}catch{throw O0({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:n,kysely:e,session:t}}){const r=await t();return{session:r,cycle:await n.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:n}=nr({from:"/$locale"}),{session:e}=eo({from:"/$locale/apps/derivean/game"}),t=a9({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(r){return r.state.status}});return S.jsx(w6,{logo:S.jsx(In,{to:"/$locale/apps/derivean/game",params:{locale:n},children:S.jsx(N6,{})}),actions:S.jsxs(S.Fragment,{children:[e.name,S.jsx(In,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:n}}),S.jsx(In,{icon:iP,to:"/$locale/apps/derivean/public/logout",params:{locale:n},preload:!1})]}),css:{base:t.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:S.jsx(dc,{})})}});var J1={exports:{}},ase=J1.exports,MF;function lse(){return MF||(MF=1,function(n,e){(function(t,r){r()})(ase,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,d){var h=new XMLHttpRequest;h.open("GET",u),h.responseType="blob",h.onload=function(){l(h.response,c,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Kp=="object"&&Kp.global===Kp?Kp:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,c,d){var h=o.URL||o.webkitURL,p=document.createElement("a");c=c||u.name||"download",p.download=c,p.rel="noopener",typeof u=="string"?(p.href=u,p.origin===location.origin?s(p):i(p.href)?r(u,c,d):s(p,p.target="_blank")):(p.href=h.createObjectURL(u),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){s(p)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,d){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,d),c);else if(i(u))r(u,c,d);else{var h=document.createElement("a");h.href=u,h.target="_blank",setTimeout(function(){s(h)})}}:function(u,c,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,d);var p=u.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||p&&g||a)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var T=b.result;T=x?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=T:location=T,h=null},b.readAsDataURL(u)}else{var y=o.URL||o.webkitURL,E=y.createObjectURL(u);h?h.location=E:location.href=E,h=null,setTimeout(function(){y.revokeObjectURL(E)},4e4)}});o.saveAs=l.saveAs=l,n.exports=l})}(J1)),J1.exports}var cse=lse();const use=ol(cse),cI=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Region","Region_Inventory","Blueprint_Inventory","Blueprint_Region","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource"],dse=Ln("/$locale/apps/derivean/root/")({component(){const n=or({mutationKey:["export"],async mutationFn(){return ci.promise((async()=>{const e=[];await An.transaction().execute(async t=>{for await(const r of cI)e.push({source:r,entities:await t.selectFrom(r).selectAll().execute()})}),use.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),zo("Export game files"))}});return S.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[S.jsx(cie,{maxSize:250*1024**2,onDrop:async e=>{const[t]=e;if(!t)return;const r=JSON.parse(await t.text());await vs`PRAGMA foreign_keys = OFF`.execute(An),await ci.promise(An.transaction().execute(async i=>{for await(const{source:s}of r){const o=cI.find(a=>a===s);o&&await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const a=cI.find(l=>l===s);if(a)for await(const l of Object.values(o))await i.insertInto(a).values(l).execute()}await vs`
                                    DELETE FROM Inventory
                                    WHERE NOT EXISTS (
                                        SELECT 1 FROM Blueprint_Inventory 
                                        WHERE Blueprint_Inventory.inventoryId = Inventory.id
                                    )
                                `.execute(i)}),zo("Import game files")),await vs`PRAGMA foreign_keys = ON`.execute(An)}}),S.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:S.jsx(Br,{iconEnabled:R6,loading:n.isPending,onClick:()=>n.mutate(),variant:{variant:"subtle"},children:S.jsx(he,{label:"Export game files (label)"})})}),S.jsx("h2",{children:"TODO"}),S.jsxs("ul",{className:"flex flex-col gap-2",children:[S.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),S.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),S.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),S.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),S.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),S.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),S.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),S.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),S.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),S.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),S.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."})]})]})}});var eb=n=>n.type==="checkbox",em=n=>n instanceof Date,Ta=n=>n==null;const P6=n=>typeof n=="object";var Ds=n=>!Ta(n)&&!Array.isArray(n)&&P6(n)&&!em(n),k6=n=>Ds(n)&&n.target?eb(n.target)?n.target.checked:n.target.value:n,fse=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,O6=(n,e)=>n.has(fse(e)),hse=n=>{const e=n.constructor&&n.constructor.prototype;return Ds(e)&&e.hasOwnProperty("isPrototypeOf")},lP=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ka(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(n instanceof Set)e=new Set(n);else if(!(lP&&(n instanceof Blob||r))&&(t||Ds(n)))if(e=t?[]:{},!t&&!hse(n))e=n;else for(const i in n)n.hasOwnProperty(i)&&(e[i]=Ka(n[i]));else return n;return e}var iT=n=>Array.isArray(n)?n.filter(Boolean):[],Ps=n=>n===void 0,yn=(n,e,t)=>{if(!e||!Ds(n))return t;const r=iT(e.split(/[,[\].]+?/)).reduce((i,s)=>Ta(i)?i:i[s],n);return Ps(r)||r===n?Ps(n[e])?t:n[e]:r},sc=n=>typeof n=="boolean",cP=n=>/^\w*$/.test(n),L6=n=>iT(n.replace(/["|']|\]/g,"").split(/\.|\[/)),gi=(n,e,t)=>{let r=-1;const i=cP(e)?[e]:L6(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=t;if(r!==o){const u=n[a];l=Ds(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=l,n=n[a]}return n};const yE={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Uc={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Td={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},pse=di.createContext(null),uP=()=>di.useContext(pse);var D6=(n,e,t,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in n)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Uc.all&&(e._proxyFormState[o]=!r||Uc.all),t&&(t[o]=!0),n[o]}});return i},Qa=n=>Ds(n)&&!Object.keys(n).length,F6=(n,e,t,r)=>{t(n);const{name:i,...s}=n;return Qa(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Uc.all))},gx=n=>Array.isArray(n)?n:[n],q6=(n,e,t)=>!n||!e||n===e||gx(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r)));function dP(n){const e=di.useRef(n);e.current=n,di.useEffect(()=>{const t=!n.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{t&&t.unsubscribe()}},[n.disabled])}function mse(n){const e=uP(),{control:t=e.control,disabled:r,name:i,exact:s}=n||{},[o,a]=di.useState(t._formState),l=di.useRef(!0),u=di.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=di.useRef(i);return c.current=i,dP({disabled:r,next:d=>l.current&&q6(c.current,d.name,s)&&F6(d,u.current,t._updateFormState)&&a({...t._formState,...d}),subject:t._subjects.state}),di.useEffect(()=>(l.current=!0,u.current.isValid&&t._updateValid(!0),()=>{l.current=!1}),[t]),di.useMemo(()=>D6(o,t,u.current,!1),[o,t])}var Ru=n=>typeof n=="string",j6=(n,e,t,r,i)=>Ru(n)?(r&&e.watch.add(n),yn(t,n,i)):Array.isArray(n)?n.map(s=>(r&&e.watch.add(s),yn(t,s))):(r&&(e.watchAll=!0),t);function gse(n){const e=uP(),{control:t=e.control,name:r,defaultValue:i,disabled:s,exact:o}=n||{},a=di.useRef(r);a.current=r,dP({disabled:s,subject:t._subjects.values,next:c=>{q6(a.current,c.name,o)&&u(Ka(j6(a.current,t._names,c.values||t._formValues,!1,i)))}});const[l,u]=di.useState(t._getWatch(r,i));return di.useEffect(()=>t._removeUnmounted()),l}function yse(n){const e=uP(),{name:t,disabled:r,control:i=e.control,shouldUnregister:s}=n,o=O6(i._names.array,t),a=gse({control:i,name:t,defaultValue:yn(i._formValues,t,yn(i._defaultValues,t,n.defaultValue)),exact:!0}),l=mse({control:i,name:t,exact:!0}),u=di.useRef(i.register(t,{...n.rules,value:a,...sc(n.disabled)?{disabled:n.disabled}:{}})),c=di.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!yn(l.errors,t)},isDirty:{enumerable:!0,get:()=>!!yn(l.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!yn(l.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!yn(l.validatingFields,t)},error:{enumerable:!0,get:()=>yn(l.errors,t)}}),[l,t]),d=di.useMemo(()=>({name:t,value:a,...sc(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:h=>u.current.onChange({target:{value:k6(h),name:t},type:yE.CHANGE}),onBlur:()=>u.current.onBlur({target:{value:yn(i._formValues,t),name:t},type:yE.BLUR}),ref:h=>{const p=yn(i._fields,t);p&&h&&(p._f.ref={focus:()=>h.focus(),select:()=>h.select(),setCustomValidity:g=>h.setCustomValidity(g),reportValidity:()=>h.reportValidity()})}}),[t,i._formValues,r,l.disabled,a,i._fields]);return di.useEffect(()=>{const h=i._options.shouldUnregister||s,p=(g,x)=>{const b=yn(i._fields,g);b&&b._f&&(b._f.mount=x)};if(p(t,!0),h){const g=Ka(yn(i._options.defaultValues,t));gi(i._defaultValues,t,g),Ps(yn(i._formValues,t))&&gi(i._formValues,t,g)}return!o&&i.register(t),()=>{(o?h&&!i._state.action:h)?i.unregister(t):p(t,!1)}},[t,i,o,s]),di.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:t})},[r,t,i]),di.useMemo(()=>({field:d,formState:l,fieldState:c}),[d,l,c])}const La=n=>n.render(yse(n));var B6=(n,e,t,r,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:i||!0}}:{},IF=n=>({isOnSubmit:!n||n===Uc.onSubmit,isOnBlur:n===Uc.onBlur,isOnChange:n===Uc.onChange,isOnAll:n===Uc.all,isOnTouch:n===Uc.onTouched}),AF=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const yx=(n,e,t,r)=>{for(const i of t||Object.keys(n)){const s=yn(n,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(yx(a,e))break}else if(Ds(a)&&yx(a,e))break}}};var vse=(n,e,t)=>{const r=gx(yn(n,t));return gi(r,"root",e[t]),gi(n,t,r),n},fP=n=>n.type==="file",Iu=n=>typeof n=="function",vE=n=>{if(!lP)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Z1=n=>Ru(n),hP=n=>n.type==="radio",_E=n=>n instanceof RegExp;const CF={value:!1,isValid:!1},RF={value:!0,isValid:!0};var U6=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Ps(n[0].attributes.value)?Ps(n[0].value)||n[0].value===""?RF:{value:n[0].value,isValid:!0}:RF:CF}return CF};const NF={isValid:!1,value:null};var z6=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,NF):NF;function PF(n,e,t="validate"){if(Z1(n)||Array.isArray(n)&&n.every(Z1)||sc(n)&&!n)return{type:t,message:Z1(n)?n:"",ref:e}}var kg=n=>Ds(n)&&!_E(n)?n:{value:n,message:""},kF=async(n,e,t,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:u,minLength:c,min:d,max:h,pattern:p,validate:g,name:x,valueAsNumber:b,mount:y}=n._f,E=yn(t,x);if(!y||e.has(x))return{};const T=a?a[0]:o,I=z=>{i&&T.reportValidity&&(T.setCustomValidity(sc(z)?"":z||""),T.reportValidity())},N={},k=hP(o),q=eb(o),L=k||q,R=(b||fP(o))&&Ps(o.value)&&Ps(E)||vE(o)&&o.value===""||E===""||Array.isArray(E)&&!E.length,P=B6.bind(null,x,r,N),F=(z,V,W,Q=Td.maxLength,X=Td.minLength)=>{const re=z?V:W;N[x]={type:z?Q:X,message:re,ref:o,...P(z?Q:X,re)}};if(s?!Array.isArray(E)||!E.length:l&&(!L&&(R||Ta(E))||sc(E)&&!E||q&&!U6(a).isValid||k&&!z6(a).isValid)){const{value:z,message:V}=Z1(l)?{value:!!l,message:l}:kg(l);if(z&&(N[x]={type:Td.required,message:V,ref:T,...P(Td.required,V)},!r))return I(V),N}if(!R&&(!Ta(d)||!Ta(h))){let z,V;const W=kg(h),Q=kg(d);if(!Ta(E)&&!isNaN(E)){const X=o.valueAsNumber||E&&+E;Ta(W.value)||(z=X>W.value),Ta(Q.value)||(V=X<Q.value)}else{const X=o.valueAsDate||new Date(E),re=te=>new Date(new Date().toDateString()+" "+te),G=o.type=="time",Y=o.type=="week";Ru(W.value)&&E&&(z=G?re(E)>re(W.value):Y?E>W.value:X>new Date(W.value)),Ru(Q.value)&&E&&(V=G?re(E)<re(Q.value):Y?E<Q.value:X<new Date(Q.value))}if((z||V)&&(F(!!z,W.message,Q.message,Td.max,Td.min),!r))return I(N[x].message),N}if((u||c)&&!R&&(Ru(E)||s&&Array.isArray(E))){const z=kg(u),V=kg(c),W=!Ta(z.value)&&E.length>+z.value,Q=!Ta(V.value)&&E.length<+V.value;if((W||Q)&&(F(W,z.message,V.message),!r))return I(N[x].message),N}if(p&&!R&&Ru(E)){const{value:z,message:V}=kg(p);if(_E(z)&&!E.match(z)&&(N[x]={type:Td.pattern,message:V,ref:o,...P(Td.pattern,V)},!r))return I(V),N}if(g){if(Iu(g)){const z=await g(E,t),V=PF(z,T);if(V&&(N[x]={...V,...P(Td.validate,V.message)},!r))return I(V.message),N}else if(Ds(g)){let z={};for(const V in g){if(!Qa(z)&&!r)break;const W=PF(await g[V](E,t),T,V);W&&(z={...W,...P(V,W.message)},I(W.message),r&&(N[x]=z))}if(!Qa(z)&&(N[x]={ref:T,...z},!r))return N}}return I(!0),N};function _se(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Ps(n)?r++:n[e[r++]];return n}function xse(n){for(const e in n)if(n.hasOwnProperty(e)&&!Ps(n[e]))return!1;return!0}function uo(n,e){const t=Array.isArray(e)?e:cP(e)?[e]:L6(e),r=t.length===1?n:_se(n,t),i=t.length-1,s=t[i];return r&&delete r[s],i!==0&&(Ds(r)&&Qa(r)||Array.isArray(r)&&xse(r))&&uo(n,t.slice(0,-1)),n}var uI=()=>{let n=[];return{get observers(){return n},next:i=>{for(const s of n)s.next&&s.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(s=>s!==i)}}),unsubscribe:()=>{n=[]}}},yR=n=>Ta(n)||!P6(n);function ah(n,e){if(yR(n)||yR(e))return n===e;if(em(n)&&em(e))return n.getTime()===e.getTime();const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(const i of t){const s=n[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(em(s)&&em(o)||Ds(s)&&Ds(o)||Array.isArray(s)&&Array.isArray(o)?!ah(s,o):s!==o)return!1}}return!0}var V6=n=>n.type==="select-multiple",bse=n=>hP(n)||eb(n),dI=n=>vE(n)&&n.isConnected,W6=n=>{for(const e in n)if(Iu(n[e]))return!0;return!1};function xE(n,e={}){const t=Array.isArray(n);if(Ds(n)||t)for(const r in n)Array.isArray(n[r])||Ds(n[r])&&!W6(n[r])?(e[r]=Array.isArray(n[r])?[]:{},xE(n[r],e[r])):Ta(n[r])||(e[r]=!0);return e}function $6(n,e,t){const r=Array.isArray(n);if(Ds(n)||r)for(const i in n)Array.isArray(n[i])||Ds(n[i])&&!W6(n[i])?Ps(e)||yR(t[i])?t[i]=Array.isArray(n[i])?xE(n[i],[]):{...xE(n[i])}:$6(n[i],Ta(e)?{}:e[i],t[i]):t[i]=!ah(n[i],e[i]);return t}var w_=(n,e)=>$6(n,e,xE(e)),H6=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Ps(n)?n:e?n===""?NaN:n&&+n:t&&Ru(n)?new Date(n):r?r(n):n;function fI(n){const e=n.ref;return fP(e)?e.files:hP(e)?z6(n.refs).value:V6(e)?[...e.selectedOptions].map(({value:t})=>t):eb(e)?U6(n.refs).value:H6(Ps(e.value)?n.ref.value:e.value,n)}var wse=(n,e,t,r)=>{const i={};for(const s of n){const o=yn(e,s);o&&gi(i,s,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:r}},S_=n=>Ps(n)?n:_E(n)?n.source:Ds(n)?_E(n.value)?n.value.source:n.value:n;const OF="AsyncFunction";var Sse=n=>!!n&&!!n.validate&&!!(Iu(n.validate)&&n.validate.constructor.name===OF||Ds(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===OF)),Ese=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate);function LF(n,e,t){const r=yn(n,t);if(r||cP(t))return{error:r,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),o=yn(e,s),a=yn(n,s);if(o&&!Array.isArray(o)&&t!==s)return{name:t};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:t}}var Tse=(n,e,t,r,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?r.isOnBlur:i.isOnBlur)?!n:(t?r.isOnChange:i.isOnChange)?n:!0,Mse=(n,e)=>!iT(yn(n,e)).length&&uo(n,e);const Ise={mode:Uc.onSubmit,reValidateMode:Uc.onChange,shouldFocusError:!0};function Ase(n={}){let e={...Ise,...n},t={submitCount:0,isDirty:!1,isLoading:Iu(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Ds(e.defaultValues)||Ds(e.values)?Ka(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ka(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:uI(),array:uI(),state:uI()},h=IF(e.mode),p=IF(e.reValidateMode),g=e.criteriaMode===Uc.all,x=xe=>Te=>{clearTimeout(u),u=setTimeout(xe,Te)},b=async xe=>{if(!e.disabled&&(c.isValid||xe)){const Te=e.resolver?Qa((await L()).errors):await P(r,!0);Te!==t.isValid&&d.state.next({isValid:Te})}},y=(xe,Te)=>{!e.disabled&&(c.isValidating||c.validatingFields)&&((xe||Array.from(a.mount)).forEach(Ae=>{Ae&&(Te?gi(t.validatingFields,Ae,Te):uo(t.validatingFields,Ae))}),d.state.next({validatingFields:t.validatingFields,isValidating:!Qa(t.validatingFields)}))},E=(xe,Te=[],Ae,le,se=!0,Oe=!0)=>{if(le&&Ae&&!e.disabled){if(o.action=!0,Oe&&Array.isArray(yn(r,xe))){const Ce=Ae(yn(r,xe),le.argA,le.argB);se&&gi(r,xe,Ce)}if(Oe&&Array.isArray(yn(t.errors,xe))){const Ce=Ae(yn(t.errors,xe),le.argA,le.argB);se&&gi(t.errors,xe,Ce),Mse(t.errors,xe)}if(c.touchedFields&&Oe&&Array.isArray(yn(t.touchedFields,xe))){const Ce=Ae(yn(t.touchedFields,xe),le.argA,le.argB);se&&gi(t.touchedFields,xe,Ce)}c.dirtyFields&&(t.dirtyFields=w_(i,s)),d.state.next({name:xe,isDirty:z(xe,Te),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else gi(s,xe,Te)},T=(xe,Te)=>{gi(t.errors,xe,Te),d.state.next({errors:t.errors})},I=xe=>{t.errors=xe,d.state.next({errors:t.errors,isValid:!1})},N=(xe,Te,Ae,le)=>{const se=yn(r,xe);if(se){const Oe=yn(s,xe,Ps(Ae)?yn(i,xe):Ae);Ps(Oe)||le&&le.defaultChecked||Te?gi(s,xe,Te?Oe:fI(se._f)):Q(xe,Oe),o.mount&&b()}},k=(xe,Te,Ae,le,se)=>{let Oe=!1,Ce=!1;const Ge={name:xe};if(!e.disabled){const at=!!(yn(r,xe)&&yn(r,xe)._f&&yn(r,xe)._f.disabled);if(!Ae||le){c.isDirty&&(Ce=t.isDirty,t.isDirty=Ge.isDirty=z(),Oe=Ce!==Ge.isDirty);const Lt=at||ah(yn(i,xe),Te);Ce=!!(!at&&yn(t.dirtyFields,xe)),Lt||at?uo(t.dirtyFields,xe):gi(t.dirtyFields,xe,!0),Ge.dirtyFields=t.dirtyFields,Oe=Oe||c.dirtyFields&&Ce!==!Lt}if(Ae){const Lt=yn(t.touchedFields,xe);Lt||(gi(t.touchedFields,xe,Ae),Ge.touchedFields=t.touchedFields,Oe=Oe||c.touchedFields&&Lt!==Ae)}Oe&&se&&d.state.next(Ge)}return Oe?Ge:{}},q=(xe,Te,Ae,le)=>{const se=yn(t.errors,xe),Oe=c.isValid&&sc(Te)&&t.isValid!==Te;if(e.delayError&&Ae?(l=x(()=>T(xe,Ae)),l(e.delayError)):(clearTimeout(u),l=null,Ae?gi(t.errors,xe,Ae):uo(t.errors,xe)),(Ae?!ah(se,Ae):se)||!Qa(le)||Oe){const Ce={...le,...Oe&&sc(Te)?{isValid:Te}:{},errors:t.errors,name:xe};t={...t,...Ce},d.state.next(Ce)}},L=async xe=>{y(xe,!0);const Te=await e.resolver(s,e.context,wse(xe||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(xe),Te},R=async xe=>{const{errors:Te}=await L(xe);if(xe)for(const Ae of xe){const le=yn(Te,Ae);le?gi(t.errors,Ae,le):uo(t.errors,Ae)}else t.errors=Te;return Te},P=async(xe,Te,Ae={valid:!0})=>{for(const le in xe){const se=xe[le];if(se){const{_f:Oe,...Ce}=se;if(Oe){const Ge=a.array.has(Oe.name),at=se._f&&Sse(se._f);at&&c.validatingFields&&y([le],!0);const Lt=await kF(se,a.disabled,s,g,e.shouldUseNativeValidation&&!Te,Ge);if(at&&c.validatingFields&&y([le]),Lt[Oe.name]&&(Ae.valid=!1,Te))break;!Te&&(yn(Lt,Oe.name)?Ge?vse(t.errors,Lt,Oe.name):gi(t.errors,Oe.name,Lt[Oe.name]):uo(t.errors,Oe.name))}!Qa(Ce)&&await P(Ce,Te,Ae)}}return Ae.valid},F=()=>{for(const xe of a.unMount){const Te=yn(r,xe);Te&&(Te._f.refs?Te._f.refs.every(Ae=>!dI(Ae)):!dI(Te._f.ref))&&be(xe)}a.unMount=new Set},z=(xe,Te)=>!e.disabled&&(xe&&Te&&gi(s,xe,Te),!ah(Z(),i)),V=(xe,Te,Ae)=>j6(xe,a,{...o.mount?s:Ps(Te)?i:Ru(xe)?{[xe]:Te}:Te},Ae,Te),W=xe=>iT(yn(o.mount?s:i,xe,e.shouldUnregister?yn(i,xe,[]):[])),Q=(xe,Te,Ae={})=>{const le=yn(r,xe);let se=Te;if(le){const Oe=le._f;Oe&&(!Oe.disabled&&gi(s,xe,H6(Te,Oe)),se=vE(Oe.ref)&&Ta(Te)?"":Te,V6(Oe.ref)?[...Oe.ref.options].forEach(Ce=>Ce.selected=se.includes(Ce.value)):Oe.refs?eb(Oe.ref)?Oe.refs.length>1?Oe.refs.forEach(Ce=>(!Ce.defaultChecked||!Ce.disabled)&&(Ce.checked=Array.isArray(se)?!!se.find(Ge=>Ge===Ce.value):se===Ce.value)):Oe.refs[0]&&(Oe.refs[0].checked=!!se):Oe.refs.forEach(Ce=>Ce.checked=Ce.value===se):fP(Oe.ref)?Oe.ref.value="":(Oe.ref.value=se,Oe.ref.type||d.values.next({name:xe,values:{...s}})))}(Ae.shouldDirty||Ae.shouldTouch)&&k(xe,se,Ae.shouldTouch,Ae.shouldDirty,!0),Ae.shouldValidate&&te(xe)},X=(xe,Te,Ae)=>{for(const le in Te){const se=Te[le],Oe=`${xe}.${le}`,Ce=yn(r,Oe);(a.array.has(xe)||Ds(se)||Ce&&!Ce._f)&&!em(se)?X(Oe,se,Ae):Q(Oe,se,Ae)}},re=(xe,Te,Ae={})=>{const le=yn(r,xe),se=a.array.has(xe),Oe=Ka(Te);gi(s,xe,Oe),se?(d.array.next({name:xe,values:{...s}}),(c.isDirty||c.dirtyFields)&&Ae.shouldDirty&&d.state.next({name:xe,dirtyFields:w_(i,s),isDirty:z(xe,Oe)})):le&&!le._f&&!Ta(Oe)?X(xe,Oe,Ae):Q(xe,Oe,Ae),AF(xe,a)&&d.state.next({...t}),d.values.next({name:o.mount?xe:void 0,values:{...s}})},G=async xe=>{o.mount=!0;const Te=xe.target;let Ae=Te.name,le=!0;const se=yn(r,Ae),Oe=()=>Te.type?fI(se._f):k6(xe),Ce=Ge=>{le=Number.isNaN(Ge)||em(Ge)&&isNaN(Ge.getTime())||ah(Ge,yn(s,Ae,Ge))};if(se){let Ge,at;const Lt=Oe(),Dt=xe.type===yE.BLUR||xe.type===yE.FOCUS_OUT,Jt=!Ese(se._f)&&!e.resolver&&!yn(t.errors,Ae)&&!se._f.deps||Tse(Dt,yn(t.touchedFields,Ae),t.isSubmitted,p,h),Cn=AF(Ae,a,Dt);gi(s,Ae,Lt),Dt?(se._f.onBlur&&se._f.onBlur(xe),l&&l(0)):se._f.onChange&&se._f.onChange(xe);const Vt=k(Ae,Lt,Dt,!1),hn=!Qa(Vt)||Cn;if(!Dt&&d.values.next({name:Ae,type:xe.type,values:{...s}}),Jt)return c.isValid&&(e.mode==="onBlur"&&Dt?b():Dt||b()),hn&&d.state.next({name:Ae,...Cn?{}:Vt});if(!Dt&&Cn&&d.state.next({...t}),e.resolver){const{errors:vn}=await L([Ae]);if(Ce(Lt),le){const $t=LF(t.errors,r,Ae),un=LF(vn,r,$t.name||Ae);Ge=un.error,Ae=un.name,at=Qa(vn)}}else y([Ae],!0),Ge=(await kF(se,a.disabled,s,g,e.shouldUseNativeValidation))[Ae],y([Ae]),Ce(Lt),le&&(Ge?at=!1:c.isValid&&(at=await P(r,!0)));le&&(se._f.deps&&te(se._f.deps),q(Ae,at,Ge,Vt))}},Y=(xe,Te)=>{if(yn(t.errors,Te)&&xe.focus)return xe.focus(),1},te=async(xe,Te={})=>{let Ae,le;const se=gx(xe);if(e.resolver){const Oe=await R(Ps(xe)?xe:se);Ae=Qa(Oe),le=xe?!se.some(Ce=>yn(Oe,Ce)):Ae}else xe?(le=(await Promise.all(se.map(async Oe=>{const Ce=yn(r,Oe);return await P(Ce&&Ce._f?{[Oe]:Ce}:Ce)}))).every(Boolean),!(!le&&!t.isValid)&&b()):le=Ae=await P(r);return d.state.next({...!Ru(xe)||c.isValid&&Ae!==t.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:Ae}:{},errors:t.errors}),Te.shouldFocus&&!le&&yx(r,Y,xe?se:a.mount),le},Z=xe=>{const Te={...o.mount?s:i};return Ps(xe)?Te:Ru(xe)?yn(Te,xe):xe.map(Ae=>yn(Te,Ae))},fe=(xe,Te)=>({invalid:!!yn((Te||t).errors,xe),isDirty:!!yn((Te||t).dirtyFields,xe),error:yn((Te||t).errors,xe),isValidating:!!yn(t.validatingFields,xe),isTouched:!!yn((Te||t).touchedFields,xe)}),ge=xe=>{xe&&gx(xe).forEach(Te=>uo(t.errors,Te)),d.state.next({errors:xe?t.errors:{}})},ce=(xe,Te,Ae)=>{const le=(yn(r,xe,{_f:{}})._f||{}).ref,se=yn(t.errors,xe)||{},{ref:Oe,message:Ce,type:Ge,...at}=se;gi(t.errors,xe,{...at,...Te,ref:le}),d.state.next({name:xe,errors:t.errors,isValid:!1}),Ae&&Ae.shouldFocus&&le&&le.focus&&le.focus()},ye=(xe,Te)=>Iu(xe)?d.values.subscribe({next:Ae=>xe(V(void 0,Te),Ae)}):V(xe,Te,!0),be=(xe,Te={})=>{for(const Ae of xe?gx(xe):a.mount)a.mount.delete(Ae),a.array.delete(Ae),Te.keepValue||(uo(r,Ae),uo(s,Ae)),!Te.keepError&&uo(t.errors,Ae),!Te.keepDirty&&uo(t.dirtyFields,Ae),!Te.keepTouched&&uo(t.touchedFields,Ae),!Te.keepIsValidating&&uo(t.validatingFields,Ae),!e.shouldUnregister&&!Te.keepDefaultValue&&uo(i,Ae);d.values.next({values:{...s}}),d.state.next({...t,...Te.keepDirty?{isDirty:z()}:{}}),!Te.keepIsValid&&b()},Ee=({disabled:xe,name:Te,field:Ae,fields:le})=>{(sc(xe)&&o.mount||xe||a.disabled.has(Te))&&(xe?a.disabled.add(Te):a.disabled.delete(Te),k(Te,fI(Ae?Ae._f:yn(le,Te)._f),!1,!1,!0))},Me=(xe,Te={})=>{let Ae=yn(r,xe);const le=sc(Te.disabled)||sc(e.disabled);return gi(r,xe,{...Ae||{},_f:{...Ae&&Ae._f?Ae._f:{ref:{name:xe}},name:xe,mount:!0,...Te}}),a.mount.add(xe),Ae?Ee({field:Ae,disabled:sc(Te.disabled)?Te.disabled:e.disabled,name:xe}):N(xe,!0,Te.value),{...le?{disabled:Te.disabled||e.disabled}:{},...e.progressive?{required:!!Te.required,min:S_(Te.min),max:S_(Te.max),minLength:S_(Te.minLength),maxLength:S_(Te.maxLength),pattern:S_(Te.pattern)}:{},name:xe,onChange:G,onBlur:G,ref:se=>{if(se){Me(xe,Te),Ae=yn(r,xe);const Oe=Ps(se.value)&&se.querySelectorAll&&se.querySelectorAll("input,select,textarea")[0]||se,Ce=bse(Oe),Ge=Ae._f.refs||[];if(Ce?Ge.find(at=>at===Oe):Oe===Ae._f.ref)return;gi(r,xe,{_f:{...Ae._f,...Ce?{refs:[...Ge.filter(dI),Oe,...Array.isArray(yn(i,xe))?[{}]:[]],ref:{type:Oe.type,name:xe}}:{ref:Oe}}}),N(xe,!1,void 0,Oe)}else Ae=yn(r,xe,{}),Ae._f&&(Ae._f.mount=!1),(e.shouldUnregister||Te.shouldUnregister)&&!(O6(a.array,xe)&&o.action)&&a.unMount.add(xe)}}},qe=()=>e.shouldFocusError&&yx(r,Y,a.mount),Ue=xe=>{sc(xe)&&(d.state.next({disabled:xe}),yx(r,(Te,Ae)=>{const le=yn(r,Ae);le&&(Te.disabled=le._f.disabled||xe,Array.isArray(le._f.refs)&&le._f.refs.forEach(se=>{se.disabled=le._f.disabled||xe}))},0,!1))},Ye=(xe,Te)=>async Ae=>{let le;Ae&&(Ae.preventDefault&&Ae.preventDefault(),Ae.persist&&Ae.persist());let se=Ka(s);if(a.disabled.size)for(const Oe of a.disabled)gi(se,Oe,void 0);if(d.state.next({isSubmitting:!0}),e.resolver){const{errors:Oe,values:Ce}=await L();t.errors=Oe,se=Ce}else await P(r);if(uo(t.errors,"root"),Qa(t.errors)){d.state.next({errors:{}});try{await xe(se,Ae)}catch(Oe){le=Oe}}else Te&&await Te({...t.errors},Ae),qe(),setTimeout(qe);if(d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qa(t.errors)&&!le,submitCount:t.submitCount+1,errors:t.errors}),le)throw le},Ne=(xe,Te={})=>{yn(r,xe)&&(Ps(Te.defaultValue)?re(xe,Ka(yn(i,xe))):(re(xe,Te.defaultValue),gi(i,xe,Ka(Te.defaultValue))),Te.keepTouched||uo(t.touchedFields,xe),Te.keepDirty||(uo(t.dirtyFields,xe),t.isDirty=Te.defaultValue?z(xe,Ka(yn(i,xe))):z()),Te.keepError||(uo(t.errors,xe),c.isValid&&b()),d.state.next({...t}))},ke=(xe,Te={})=>{const Ae=xe?Ka(xe):i,le=Ka(Ae),se=Qa(xe),Oe=se?i:le;if(Te.keepDefaultValues||(i=Ae),!Te.keepValues){if(Te.keepDirtyValues){const Ce=new Set([...a.mount,...Object.keys(w_(i,s))]);for(const Ge of Array.from(Ce))yn(t.dirtyFields,Ge)?gi(Oe,Ge,yn(s,Ge)):re(Ge,yn(Oe,Ge))}else{if(lP&&Ps(xe))for(const Ce of a.mount){const Ge=yn(r,Ce);if(Ge&&Ge._f){const at=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(vE(at)){const Lt=at.closest("form");if(Lt){Lt.reset();break}}}}r={}}s=e.shouldUnregister?Te.keepDefaultValues?Ka(i):{}:Ka(Oe),d.array.next({values:{...Oe}}),d.values.next({values:{...Oe}})}a={mount:Te.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!c.isValid||!!Te.keepIsValid||!!Te.keepDirtyValues,o.watch=!!e.shouldUnregister,d.state.next({submitCount:Te.keepSubmitCount?t.submitCount:0,isDirty:se?!1:Te.keepDirty?t.isDirty:!!(Te.keepDefaultValues&&!ah(xe,i)),isSubmitted:Te.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:se?{}:Te.keepDirtyValues?Te.keepDefaultValues&&s?w_(i,s):t.dirtyFields:Te.keepDefaultValues&&xe?w_(i,xe):Te.keepDirty?t.dirtyFields:{},touchedFields:Te.keepTouched?t.touchedFields:{},errors:Te.keepErrors?t.errors:{},isSubmitSuccessful:Te.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},me=(xe,Te)=>ke(Iu(xe)?xe(s):xe,Te);return{control:{register:Me,unregister:be,getFieldState:fe,handleSubmit:Ye,setError:ce,_executeSchema:L,_getWatch:V,_getDirty:z,_updateValid:b,_removeUnmounted:F,_updateFieldArray:E,_updateDisabledField:Ee,_getFieldArray:W,_reset:ke,_resetDefaultValues:()=>Iu(e.defaultValues)&&e.defaultValues().then(xe=>{me(xe,e.resetOptions),d.state.next({isLoading:!1})}),_updateFormState:xe=>{t={...t,...xe}},_disableForm:Ue,_subjects:d,_proxyFormState:c,_setErrors:I,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return a},set _names(xe){a=xe},get _formState(){return t},set _formState(xe){t=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:te,register:Me,handleSubmit:Ye,watch:ye,setValue:re,getValues:Z,reset:me,resetField:Ne,clearErrors:ge,unregister:be,setError:ce,setFocus:(xe,Te={})=>{const Ae=yn(r,xe),le=Ae&&Ae._f;if(le){const se=le.refs?le.refs[0]:le.ref;se.focus&&(se.focus(),Te.shouldSelect&&Iu(se.select)&&se.select())}},getFieldState:fe}}function So(n={}){const e=di.useRef(void 0),t=di.useRef(void 0),[r,i]=di.useState({isDirty:!1,isValidating:!1,isLoading:Iu(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,defaultValues:Iu(n.defaultValues)?void 0:n.defaultValues});e.current||(e.current={...Ase(n),formState:r});const s=e.current.control;return s._options=n,dP({subject:s._subjects.state,next:o=>{F6(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),di.useEffect(()=>s._disableForm(n.disabled),[s,n.disabled]),di.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),di.useEffect(()=>{n.values&&!ah(n.values,t.current)?(s._reset(n.values,s._options.resetOptions),t.current=n.values,i(o=>({...o}))):s._resetDefaultValues()},[n.values,s]),di.useEffect(()=>{n.errors&&s._setErrors(n.errors)},[n.errors,s]),di.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),di.useEffect(()=>{n.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[n.shouldUnregister,s]),e.current.formState=D6(r,s),e.current}const DF=(n,e,t)=>{if(n&&"reportValidity"in n){const r=yn(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},G6=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?DF(r.ref,t,n):r.refs&&r.refs.forEach(i=>DF(i,t,n))}},Cse=(n,e)=>{e.shouldUseNativeValidation&&G6(n,e);const t={};for(const r in n){const i=yn(e.fields,r),s=Object.assign(n[r]||{},{ref:i&&i.ref});if(Rse(e.names||Object.keys(n),r)){const o=Object.assign({},yn(t,r));gi(o,"root",s),gi(t,r,o)}else gi(t,r,s)}return t},Rse=(n,e)=>n.some(t=>t.startsWith(e+"."));var Nse=function(n,e){for(var t={};n.length;){var r=n[0],i=r.code,s=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(c){return c.errors.forEach(function(d){return n.push(d)})}),e){var l=t[o].types,u=l&&l[r.code];t[o]=B6(o,e,t,i,u?[].concat(u,r.message):r.message)}n.shift()}return t},Eo=function(n,e,t){return t===void 0&&(t={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return s.shouldUseNativeValidation&&G6({},s),{errors:{},values:t.raw?r:u}})}catch(u){return a(u)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a?.errors)}(o))return{values:{},errors:Cse(Nse(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Pse="icon-[cil--arrow-right]",X6="icon-[et--map]",kse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({name:ne.string().min(1),cycles:ne.number().int(),sort:ne.number().int(),limit:ne.number().int(),image:ne.string().nullish()})),shape:n,filter:e,sort:["id","name","cycles","sort","limit","image"]}),Ose=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintId:ne.string().min(1),conflictId:ne.string().min(1)})),shape:n,filter:e,sort:["id","blueprintId","conflictId"]}),Lse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintId:ne.string().min(1),dependencyId:ne.string().min(1)})),shape:n,filter:e,sort:["id","blueprintId","dependencyId"]}),Dse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintId:ne.string().min(1),inventoryId:ne.string().min(1)})),shape:n,filter:e,sort:["id","blueprintId","inventoryId"]}),Fse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number(),cycles:ne.number().int()})),shape:n,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),qse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintProductionId:ne.string().min(1),blueprintId:ne.string().min(1)})),shape:n,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),jse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintProductionId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number(),passive:fc()})),shape:n,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),Bse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintProductionId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number()})),shape:n,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),Use=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({blueprintId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number(),passive:fc()})),shape:n,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),zse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({userId:ne.string().min(1),plotId:ne.string().min(1),blueprintId:ne.string().min(1),constructionId:ne.string().nullish(),landId:ne.string().min(1),productionId:ne.string().nullish(),recurringProductionId:ne.string().nullish(),valid:fc()})),shape:n,filter:e,sort:["id","userId","plotId","blueprintId","constructionId","landId","productionId","recurringProductionId","valid"]}),Vse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({resourceId:ne.string().min(1),amount:ne.number(),limit:ne.number(),type:ne.string().min(1)})),shape:n,filter:e,sort:["id","resourceId","amount","limit","type"]}),Wse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({userId:ne.string().min(1),name:ne.string().min(1)})),shape:n,filter:e,sort:["id","userId","name"]}),$se=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({name:ne.string().min(1),probability:ne.number().int(),limit:ne.number().int(),image:ne.string().nullish()})),shape:n,filter:e,sort:["id","name","probability","limit","image"]}),Hse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({name:ne.string().min(1),weight:ne.number().int(),image:ne.string().nullish()})),shape:n,filter:e,sort:["id","name","weight","image"]}),Gse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({code:ne.string().min(1),label:ne.string().min(1),group:ne.string().nullish(),sort:ne.number().int()})),shape:n,filter:e,sort:["id","code","label","group","sort"]}),Xse=({shape:n,filter:e})=>ua({entity:la.merge(ne.object({name:ne.string().min(1),login:ne.string().min(1),password:ne.string().min(1)})),shape:n,filter:e,sort:["id","name","login","password"]}),Kse=Wse({shape:ne.object({name:ne.string().min(1)}),filter:ca});function Qse(n){return Math.random()<n/100}const Yse=async({tx:n,userId:e,name:t})=>{const r=await n.insertInto("Map").values({id:Xr(),userId:e,name:t}).returning("id").executeTakeFirstOrThrow(),i=await n.selectFrom("Region").selectAll().execute(),s=1,o=4096*4;let a=0;for(;a<s&&a<=o;)for await(const{id:l,probability:u,name:c}of i){if(console.log("		-- Region",{id:l,probability:u,landId:a,world:s}),a>=s){console.log("		-- Finished");break}if(!Qse(u)){console.log("			-- Won't generate");continue}console.log("		-- New land",{name:c,landId:a});const d=await n.insertInto("Land").values({id:Xr(),regionId:l,mapId:r.id,position:a}).returningAll().executeTakeFirstOrThrow();await n.insertInto("Plot").values(Array.from({length:1},(h,p)=>({id:Xr(),mapId:r.id,userId:e,landId:d.id,position:p}))).execute(),a+=1}return r},Jse=n=>{const e=Bt.c(44),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(Kse.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{name:"",...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const P=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;h=P.base(),e[18]!==c||e[19]!==t?(p=da({form:c,mutation:t}),e[18]=c,e[19]=t,e[20]=p):p=e[20];let F;e[21]===Symbol.for("react.memo_cache_sentinel")?(F={highlight:!0},e[21]=F):F=e[21],e[22]!==c.formState.errors.root?(g=S.jsx(po,{variant:F,error:c.formState.errors.root}),e[22]=c.formState.errors.root,e[23]=g):g=e[23],d=xr,y=c.formState,E="name",e[24]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Map name (label)"}),e[24]=T):T=e[24],I=!0,x="text",b=P.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17];let N;e[25]!==c?(N=c.register("name"),e[25]=c,e[26]=N):N=e[26];let k;e[27]!==N||e[28]!==x||e[29]!==b?(k=S.jsx("input",{type:x,className:b,...N}),e[27]=N,e[28]=x,e[29]=b,e[30]=k):k=e[30];let q;e[31]!==d||e[32]!==k||e[33]!==y||e[34]!==E||e[35]!==T||e[36]!==I?(q=S.jsx(d,{formState:y,name:E,label:T,required:I,children:k}),e[31]=d,e[32]=k,e[33]=y,e[34]=E,e[35]=T,e[36]=I,e[37]=q):q=e[37];let L;e[38]===Symbol.for("react.memo_cache_sentinel")?(L=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:X6,type:"submit",children:S.jsx(he,{label:"Create map (submit)"})})}),e[38]=L):L=e[38];let R;return e[39]!==h||e[40]!==p||e[41]!==g||e[42]!==q?(R=S.jsxs("form",{className:h,onSubmit:p,children:[g,q,L]}),e[39]=h,e[40]=p,e[41]=g,e[42]=q,e[43]=R):R=e[43],R},K6=Ln("/$locale/apps/derivean/game/")({async loader({context:{queryClient:n,kysely:e,session:t}}){const r=await t();return{user:r,map:await n.ensureQueryData({queryKey:["GameMap","map",r.id],async queryFn(){return e.transaction().execute(i=>Vo({select:i.selectFrom("Map as m").select(["m.id","m.name"]).where("m.userId","=",r.id),output:ne.object({id:ne.string().min(1),name:ne.string().min(1)})}))}})}},component(){const{user:n,map:e}=K6.useLoaderData(),{tva:t}=Ui({from:"__root__"}),r=t().slots,i=ji([["GameMap"]]),{locale:s}=nr({from:"/$locale"}),o=Lm(),a=or({async mutationFn({id:l}){return An.transaction().execute(async u=>u.deleteFrom("Map").where("id","=",l).where("userId","=",n.id).execute())},async onSuccess(){await i()}});return S.jsxs("div",{className:r.base({css:["w-1/2","mx-auto","mt-24","flex","flex-col","gap-6"]}),children:[S.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:S.jsx(he,{label:"Map list (label)"})}),e.length>0?e.map(l=>S.jsxs("div",{className:fr(["flex","flex-row","gap-2","items-center","justify-between","p-4","border","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[S.jsx(In,{icon:Pse,to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:l.id},children:l.name}),S.jsx("div",{children:S.jsx(Br,{iconEnabled:js,variant:{variant:"danger"},loading:a.isPending,onClick:()=>{a.mutate({id:l.id})}})})]},l.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"There are no maps (label)"})}),S.jsx("div",{className:"font-bold text-lg border-b border-slate-300",children:S.jsx(he,{label:"New map (label)"})}),S.jsx("div",{children:S.jsx(Jse,{mutation:or({async mutationFn(l){return ci.promise(An.transaction().execute(u=>Yse({tx:u,userId:n.id,...l})),zo("Map generator"))},async onSuccess(l){o({to:"/$locale/apps/derivean/map/$mapId/view",params:{locale:s,mapId:l.id}}),await i()}})})})]})}});var hI,FF;function pP(){if(FF)return hI;FF=1;var n="\0",e="\0",t="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(c){c&&(this._isDirected=Object.hasOwn(c,"directed")?c.directed:!0,this._isMultigraph=Object.hasOwn(c,"multigraph")?c.multigraph:!1,this._isCompound=Object.hasOwn(c,"compound")?c.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(c){return this._label=c,this}graph(){return this._label}setDefaultNodeLabel(c){return this._defaultNodeLabelFn=c,typeof c!="function"&&(this._defaultNodeLabelFn=()=>c),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var c=this;return this.nodes().filter(d=>Object.keys(c._in[d]).length===0)}sinks(){var c=this;return this.nodes().filter(d=>Object.keys(c._out[d]).length===0)}setNodes(c,d){var h=arguments,p=this;return c.forEach(function(g){h.length>1?p.setNode(g,d):p.setNode(g)}),this}setNode(c,d){return Object.hasOwn(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=e,this._children[c]={},this._children[e][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)}node(c){return this._nodes[c]}hasNode(c){return Object.hasOwn(this._nodes,c)}removeNode(c){var d=this;if(Object.hasOwn(this._nodes,c)){var h=p=>d.removeEdge(d._edgeObjs[p]);delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],this.children(c).forEach(function(p){d.setParent(p)}),delete this._children[c]),Object.keys(this._in[c]).forEach(h),delete this._in[c],delete this._preds[c],Object.keys(this._out[c]).forEach(h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this}setParent(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(d===void 0)d=e;else{d+="";for(var h=d;h!==void 0;h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this}_removeFromParentsChildList(c){delete this._children[this._parent[c]][c]}parent(c){if(this._isCompound){var d=this._parent[c];if(d!==e)return d}}children(c=e){if(this._isCompound){var d=this._children[c];if(d)return Object.keys(d)}else{if(c===e)return this.nodes();if(this.hasNode(c))return[]}}predecessors(c){var d=this._preds[c];if(d)return Object.keys(d)}successors(c){var d=this._sucs[c];if(d)return Object.keys(d)}neighbors(c){var d=this.predecessors(c);if(d){const p=new Set(d);for(var h of this.successors(c))p.add(h);return Array.from(p.values())}}isLeaf(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0}filterNodes(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;Object.entries(this._nodes).forEach(function([x,b]){c(x)&&d.setNode(x,b)}),Object.values(this._edgeObjs).forEach(function(x){d.hasNode(x.v)&&d.hasNode(x.w)&&d.setEdge(x,h.edge(x))});var p={};function g(x){var b=h.parent(x);return b===void 0||d.hasNode(b)?(p[x]=b,b):b in p?p[b]:g(b)}return this._isCompound&&d.nodes().forEach(x=>d.setParent(x,g(x))),d}setDefaultEdgeLabel(c){return this._defaultEdgeLabelFn=c,typeof c!="function"&&(this._defaultEdgeLabelFn=()=>c),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(c,d){var h=this,p=arguments;return c.reduce(function(g,x){return p.length>1?h.setEdge(g,x,d):h.setEdge(g,x),x}),this}setEdge(){var c,d,h,p,g=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(c=x.v,d=x.w,h=x.name,arguments.length===2&&(p=arguments[1],g=!0)):(c=x,d=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],g=!0)),c=""+c,d=""+d,h!==void 0&&(h=""+h);var b=o(this._isDirected,c,d,h);if(Object.hasOwn(this._edgeLabels,b))return g&&(this._edgeLabels[b]=p),this;if(h!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[b]=g?p:this._defaultEdgeLabelFn(c,d,h);var y=a(this._isDirected,c,d,h);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[b]=y,i(this._preds[d],c),i(this._sucs[c],d),this._in[d][b]=y,this._out[c][b]=y,this._edgeCount++,this}edge(c,d,h){var p=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return this._edgeLabels[p]}edgeAsObj(){const c=this.edge(...arguments);return typeof c!="object"?{label:c}:c}hasEdge(c,d,h){var p=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,d,h);return Object.hasOwn(this._edgeLabels,p)}removeEdge(c,d,h){var p=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,c,d,h),g=this._edgeObjs[p];return g&&(c=g.v,d=g.w,delete this._edgeLabels[p],delete this._edgeObjs[p],s(this._preds[d],c),s(this._sucs[c],d),delete this._in[d][p],delete this._out[c][p],this._edgeCount--),this}inEdges(c,d){var h=this._in[c];if(h){var p=Object.values(h);return d?p.filter(g=>g.v===d):p}}outEdges(c,d){var h=this._out[c];if(h){var p=Object.values(h);return d?p.filter(g=>g.w===d):p}}nodeEdges(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))}}function i(u,c){u[c]?u[c]++:u[c]=1}function s(u,c){--u[c]||delete u[c]}function o(u,c,d,h){var p=""+c,g=""+d;if(!u&&p>g){var x=p;p=g,g=x}return p+t+g+t+(h===void 0?n:h)}function a(u,c,d,h){var p=""+c,g=""+d;if(!u&&p>g){var x=p;p=g,g=x}var b={v:p,w:g};return h&&(b.name=h),b}function l(u,c){return o(u,c.v,c.w,c.name)}return hI=r,hI}var pI,qF;function Zse(){return qF||(qF=1,pI="2.2.4"),pI}var mI,jF;function eoe(){return jF||(jF=1,mI={Graph:pP(),version:Zse()}),mI}var gI,BF;function toe(){if(BF)return gI;BF=1;var n=pP();gI={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:t(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function t(s){return s.nodes().map(function(o){var a=s.node(o),l=s.parent(o),u={v:o};return a!==void 0&&(u.value=a),l!==void 0&&(u.parent=l),u})}function r(s){return s.edges().map(function(o){var a=s.edge(o),l={v:o.v,w:o.w};return o.name!==void 0&&(l.name=o.name),a!==void 0&&(l.value=a),l})}function i(s){var o=new n(s.options).setGraph(s.value);return s.nodes.forEach(function(a){o.setNode(a.v,a.value),a.parent&&o.setParent(a.v,a.parent)}),s.edges.forEach(function(a){o.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),o}return gI}var yI,UF;function noe(){if(UF)return yI;UF=1,yI=n;function n(e){var t={},r=[],i;function s(o){Object.hasOwn(t,o)||(t[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return yI}var vI,zF;function Q6(){if(zF)return vI;zF=1;class n{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var r=this._keyIndices[t];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,r){var i=this._keyIndices;if(t=String(t),!Object.hasOwn(i,t)){var s=this._arr,o=s.length;return i[t]=o,s.push({key:t,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,r){var i=this._keyIndices[t];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(t){var r=this._arr,i=2*t,s=i+1,o=t;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==t&&(this._swap(t,o),this._heapify(o)))}_decrease(t){for(var r=this._arr,i=r[t].priority,s;t!==0&&(s=t>>1,!(r[s].priority<i));)this._swap(t,s),t=s}_swap(t,r){var i=this._arr,s=this._keyIndices,o=i[t],a=i[r];i[t]=a,i[r]=o,s[a.key]=t,s[o.key]=r}}return vI=n,vI}var _I,VF;function Y6(){if(VF)return _I;VF=1;var n=Q6();_I=t;var e=()=>1;function t(i,s,o,a){return r(i,String(s),o||e,a||function(l){return i.outEdges(l)})}function r(i,s,o,a){var l={},u=new n,c,d,h=function(p){var g=p.v!==c?p.v:p.w,x=l[g],b=o(p),y=d.distance+b;if(b<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+b);y<x.distance&&(x.distance=y,x.predecessor=c,u.decrease(g,y))};for(i.nodes().forEach(function(p){var g=p===s?0:Number.POSITIVE_INFINITY;l[p]={distance:g},u.add(p,g)});u.size()>0&&(c=u.removeMin(),d=l[c],d.distance!==Number.POSITIVE_INFINITY);)a(c).forEach(h);return l}return _I}var xI,WF;function roe(){if(WF)return xI;WF=1;var n=Y6();xI=e;function e(t,r,i){return t.nodes().reduce(function(s,o){return s[o]=n(t,o,r,i),s},{})}return xI}var bI,$F;function J6(){if($F)return bI;$F=1,bI=n;function n(e){var t=0,r=[],i={},s=[];function o(a){var l=i[a]={onStack:!0,lowlink:t,index:t++};if(r.push(a),e.successors(a).forEach(function(d){Object.hasOwn(i,d)?i[d].onStack&&(l.lowlink=Math.min(l.lowlink,i[d].index)):(o(d),l.lowlink=Math.min(l.lowlink,i[d].lowlink))}),l.lowlink===l.index){var u=[],c;do c=r.pop(),i[c].onStack=!1,u.push(c);while(a!==c);s.push(u)}}return e.nodes().forEach(function(a){Object.hasOwn(i,a)||o(a)}),s}return bI}var wI,HF;function ioe(){if(HF)return wI;HF=1;var n=J6();wI=e;function e(t){return n(t).filter(function(r){return r.length>1||r.length===1&&t.hasEdge(r[0],r[0])})}return wI}var SI,GF;function soe(){if(GF)return SI;GF=1,SI=e;var n=()=>1;function e(r,i,s){return t(r,i||n,s||function(o){return r.outEdges(o)})}function t(r,i,s){var o={},a=r.nodes();return a.forEach(function(l){o[l]={},o[l][l]={distance:0},a.forEach(function(u){l!==u&&(o[l][u]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(u){var c=u.v===l?u.w:u.v,d=i(u);o[l][c]={distance:d,predecessor:l}})}),a.forEach(function(l){var u=o[l];a.forEach(function(c){var d=o[c];a.forEach(function(h){var p=d[l],g=u[h],x=d[h],b=p.distance+g.distance;b<x.distance&&(x.distance=b,x.predecessor=g.predecessor)})})}),o}return SI}var EI,XF;function Z6(){if(XF)return EI;XF=1;function n(t){var r={},i={},s=[];function o(a){if(Object.hasOwn(i,a))throw new e;Object.hasOwn(r,a)||(i[a]=!0,r[a]=!0,t.predecessors(a).forEach(o),delete i[a],s.push(a))}if(t.sinks().forEach(o),Object.keys(r).length!==t.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return EI=n,n.CycleException=e,EI}var TI,KF;function ooe(){if(KF)return TI;KF=1;var n=Z6();TI=e;function e(t){try{n(t)}catch(r){if(r instanceof n.CycleException)return!1;throw r}return!0}return TI}var MI,QF;function e8(){if(QF)return MI;QF=1,MI=n;function n(i,s,o){Array.isArray(s)||(s=[s]);var a=i.isDirected()?d=>i.successors(d):d=>i.neighbors(d),l=o==="post"?e:t,u=[],c={};return s.forEach(d=>{if(!i.hasNode(d))throw new Error("Graph does not have node: "+d);l(d,a,c,u)}),u}function e(i,s,o,a){for(var l=[[i,!1]];l.length>0;){var u=l.pop();u[1]?a.push(u[0]):Object.hasOwn(o,u[0])||(o[u[0]]=!0,l.push([u[0],!0]),r(s(u[0]),c=>l.push([c,!1])))}}function t(i,s,o,a){for(var l=[i];l.length>0;){var u=l.pop();Object.hasOwn(o,u)||(o[u]=!0,a.push(u),r(s(u),c=>l.push(c)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return MI}var II,YF;function aoe(){if(YF)return II;YF=1;var n=e8();II=e;function e(t,r){return n(t,r,"post")}return II}var AI,JF;function loe(){if(JF)return AI;JF=1;var n=e8();AI=e;function e(t,r){return n(t,r,"pre")}return AI}var CI,ZF;function coe(){if(ZF)return CI;ZF=1;var n=pP(),e=Q6();CI=t;function t(r,i){var s=new n,o={},a=new e,l;function u(d){var h=d.v===l?d.w:d.v,p=a.priority(h);if(p!==void 0){var g=i(d);g<p&&(o[h]=l,a.decrease(h,g))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(d){a.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),a.decrease(r.nodes()[0],0);for(var c=!1;a.size()>0;){if(l=a.removeMin(),Object.hasOwn(o,l))s.setEdge(l,o[l]);else{if(c)throw new Error("Input graph is not connected: "+r);c=!0}r.nodeEdges(l).forEach(u)}return s}return CI}var RI,e4;function uoe(){return e4||(e4=1,RI={components:noe(),dijkstra:Y6(),dijkstraAll:roe(),findCycles:ioe(),floydWarshall:soe(),isAcyclic:ooe(),postorder:aoe(),preorder:loe(),prim:coe(),tarjan:J6(),topsort:Z6()}),RI}var NI,t4;function Qc(){if(t4)return NI;t4=1;var n=eoe();return NI={Graph:n.Graph,json:toe(),alg:uoe(),version:n.version},NI}var PI,n4;function doe(){if(n4)return PI;n4=1;class n{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,t)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function t(r,i){if(r!=="_next"&&r!=="_prev")return i}return PI=n,PI}var kI,r4;function foe(){if(r4)return kI;r4=1;let n=Qc().Graph,e=doe();kI=r;let t=()=>1;function r(u,c){if(u.nodeCount()<=1)return[];let d=o(u,c||t);return i(d.graph,d.buckets,d.zeroIdx).flatMap(p=>u.outEdges(p.v,p.w))}function i(u,c,d){let h=[],p=c[c.length-1],g=c[0],x;for(;u.nodeCount();){for(;x=g.dequeue();)s(u,c,d,x);for(;x=p.dequeue();)s(u,c,d,x);if(u.nodeCount()){for(let b=c.length-2;b>0;--b)if(x=c[b].dequeue(),x){h=h.concat(s(u,c,d,x,!0));break}}}return h}function s(u,c,d,h,p){let g=p?[]:void 0;return u.inEdges(h.v).forEach(x=>{let b=u.edge(x),y=u.node(x.v);p&&g.push({v:x.v,w:x.w}),y.out-=b,a(c,d,y)}),u.outEdges(h.v).forEach(x=>{let b=u.edge(x),y=x.w,E=u.node(y);E.in-=b,a(c,d,E)}),u.removeNode(h.v),g}function o(u,c){let d=new n,h=0,p=0;u.nodes().forEach(b=>{d.setNode(b,{v:b,in:0,out:0})}),u.edges().forEach(b=>{let y=d.edge(b.v,b.w)||0,E=c(b),T=y+E;d.setEdge(b.v,b.w,T),p=Math.max(p,d.node(b.v).out+=E),h=Math.max(h,d.node(b.w).in+=E)});let g=l(p+h+3).map(()=>new e),x=h+1;return d.nodes().forEach(b=>{a(g,x,d.node(b))}),{graph:d,buckets:g,zeroIdx:x}}function a(u,c,d){d.out?d.in?u[d.out-d.in+c].enqueue(d):u[u.length-1].enqueue(d):u[0].enqueue(d)}function l(u){const c=[];for(let d=0;d<u;d++)c.push(d);return c}return kI}var OI,i4;function Zs(){if(i4)return OI;i4=1;let n=Qc().Graph;OI={addBorderNode:c,addDummyNode:e,applyWithChunking:p,asNonCompoundGraph:r,buildLayerMatrix:a,intersectRect:o,mapValues:k,maxRank:g,normalizeRanks:l,notime:y,partition:x,pick:N,predecessorWeights:s,range:I,removeEmptyRanks:u,simplify:t,successorWeights:i,time:b,uniqueId:T,zipObject:q};function e(L,R,P,F){let z;do z=T(F);while(L.hasNode(z));return P.dummy=R,L.setNode(z,P),z}function t(L){let R=new n().setGraph(L.graph());return L.nodes().forEach(P=>R.setNode(P,L.node(P))),L.edges().forEach(P=>{let F=R.edge(P.v,P.w)||{weight:0,minlen:1},z=L.edge(P);R.setEdge(P.v,P.w,{weight:F.weight+z.weight,minlen:Math.max(F.minlen,z.minlen)})}),R}function r(L){let R=new n({multigraph:L.isMultigraph()}).setGraph(L.graph());return L.nodes().forEach(P=>{L.children(P).length||R.setNode(P,L.node(P))}),L.edges().forEach(P=>{R.setEdge(P,L.edge(P))}),R}function i(L){let R=L.nodes().map(P=>{let F={};return L.outEdges(P).forEach(z=>{F[z.w]=(F[z.w]||0)+L.edge(z).weight}),F});return q(L.nodes(),R)}function s(L){let R=L.nodes().map(P=>{let F={};return L.inEdges(P).forEach(z=>{F[z.v]=(F[z.v]||0)+L.edge(z).weight}),F});return q(L.nodes(),R)}function o(L,R){let P=L.x,F=L.y,z=R.x-P,V=R.y-F,W=L.width/2,Q=L.height/2;if(!z&&!V)throw new Error("Not possible to find intersection inside of the rectangle");let X,re;return Math.abs(V)*W>Math.abs(z)*Q?(V<0&&(Q=-Q),X=Q*z/V,re=Q):(z<0&&(W=-W),X=W,re=W*V/z),{x:P+X,y:F+re}}function a(L){let R=I(g(L)+1).map(()=>[]);return L.nodes().forEach(P=>{let F=L.node(P),z=F.rank;z!==void 0&&(R[z][F.order]=P)}),R}function l(L){let R=L.nodes().map(F=>{let z=L.node(F).rank;return z===void 0?Number.MAX_VALUE:z}),P=p(Math.min,R);L.nodes().forEach(F=>{let z=L.node(F);Object.hasOwn(z,"rank")&&(z.rank-=P)})}function u(L){let R=L.nodes().map(W=>L.node(W).rank),P=p(Math.min,R),F=[];L.nodes().forEach(W=>{let Q=L.node(W).rank-P;F[Q]||(F[Q]=[]),F[Q].push(W)});let z=0,V=L.graph().nodeRankFactor;Array.from(F).forEach((W,Q)=>{W===void 0&&Q%V!==0?--z:W!==void 0&&z&&W.forEach(X=>L.node(X).rank+=z)})}function c(L,R,P,F){let z={width:0,height:0};return arguments.length>=4&&(z.rank=P,z.order=F),e(L,"border",z,R)}function d(L,R=h){const P=[];for(let F=0;F<L.length;F+=R){const z=L.slice(F,F+R);P.push(z)}return P}const h=65535;function p(L,R){if(R.length>h){const P=d(R);return L.apply(null,P.map(F=>L.apply(null,F)))}else return L.apply(null,R)}function g(L){const P=L.nodes().map(F=>{let z=L.node(F).rank;return z===void 0?Number.MIN_VALUE:z});return p(Math.max,P)}function x(L,R){let P={lhs:[],rhs:[]};return L.forEach(F=>{R(F)?P.lhs.push(F):P.rhs.push(F)}),P}function b(L,R){let P=Date.now();try{return R()}finally{console.log(L+" time: "+(Date.now()-P)+"ms")}}function y(L,R){return R()}let E=0;function T(L){var R=++E;return toString(L)+R}function I(L,R,P=1){R==null&&(R=L,L=0);let F=V=>V<R;P<0&&(F=V=>R<V);const z=[];for(let V=L;F(V);V+=P)z.push(V);return z}function N(L,R){const P={};for(const F of R)L[F]!==void 0&&(P[F]=L[F]);return P}function k(L,R){let P=R;return typeof R=="string"&&(P=F=>F[R]),Object.entries(L).reduce((F,[z,V])=>(F[z]=P(V,z),F),{})}function q(L,R){return L.reduce((P,F,z)=>(P[F]=R[z],P),{})}return OI}var LI,s4;function hoe(){if(s4)return LI;s4=1;let n=foe(),e=Zs().uniqueId;LI={run:t,undo:i};function t(s){(s.graph().acyclicer==="greedy"?n(s,a(s)):r(s)).forEach(l=>{let u=s.edge(l);s.removeEdge(l),u.forwardName=l.name,u.reversed=!0,s.setEdge(l.w,l.v,u,e("rev"))});function a(l){return u=>l.edge(u).weight}}function r(s){let o=[],a={},l={};function u(c){Object.hasOwn(l,c)||(l[c]=!0,a[c]=!0,s.outEdges(c).forEach(d=>{Object.hasOwn(a,d.w)?o.push(d):u(d.w)}),delete a[c])}return s.nodes().forEach(u),o}function i(s){s.edges().forEach(o=>{let a=s.edge(o);if(a.reversed){s.removeEdge(o);let l=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,l)}})}return LI}var DI,o4;function poe(){if(o4)return DI;o4=1;let n=Zs();DI={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>t(i,s))}function t(i,s){let o=s.v,a=i.node(o).rank,l=s.w,u=i.node(l).rank,c=s.name,d=i.edge(s),h=d.labelRank;if(u===a+1)return;i.removeEdge(s);let p,g,x;for(x=0,++a;a<u;++x,++a)d.points=[],g={width:0,height:0,edgeLabel:d,edgeObj:s,rank:a},p=n.addDummyNode(i,"edge",g,"_d"),a===h&&(g.width=d.width,g.height=d.height,g.dummy="edge-label",g.labelpos=d.labelpos),i.setEdge(o,p,{weight:d.weight},c),x===0&&i.graph().dummyChains.push(p),o=p;i.setEdge(o,l,{weight:d.weight},c)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),a=o.edgeLabel,l;for(i.setEdge(o.edgeObj,a);o.dummy;)l=i.successors(s)[0],i.removeNode(s),a.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),s=l,o=i.node(s)})}return DI}var FI,a4;function bE(){if(a4)return FI;a4=1;const{applyWithChunking:n}=Zs();FI={longestPath:e,slack:t};function e(r){var i={};function s(o){var a=r.node(o);if(Object.hasOwn(i,o))return a.rank;i[o]=!0;let l=r.outEdges(o).map(c=>c==null?Number.POSITIVE_INFINITY:s(c.w)-r.edge(c).minlen);var u=n(Math.min,l);return u===Number.POSITIVE_INFINITY&&(u=0),a.rank=u}r.sources().forEach(s)}function t(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return FI}var qI,l4;function t8(){if(l4)return qI;l4=1;var n=Qc().Graph,e=bE().slack;qI=t;function t(o){var a=new n({directed:!1}),l=o.nodes()[0],u=o.nodeCount();a.setNode(l,{});for(var c,d;r(a,o)<u;)c=i(a,o),d=a.hasNode(c.v)?e(o,c):-e(o,c),s(a,o,d);return a}function r(o,a){function l(u){a.nodeEdges(u).forEach(c=>{var d=c.v,h=u===d?c.w:d;!o.hasNode(h)&&!e(a,c)&&(o.setNode(h,{}),o.setEdge(u,h,{}),l(h))})}return o.nodes().forEach(l),o.nodeCount()}function i(o,a){return a.edges().reduce((u,c)=>{let d=Number.POSITIVE_INFINITY;return o.hasNode(c.v)!==o.hasNode(c.w)&&(d=e(a,c)),d<u[0]?[d,c]:u},[Number.POSITIVE_INFINITY,null])[1]}function s(o,a,l){o.nodes().forEach(u=>a.node(u).rank+=l)}return qI}var jI,c4;function moe(){if(c4)return jI;c4=1;var n=t8(),e=bE().slack,t=bE().longestPath,r=Qc().alg.preorder,i=Qc().alg.postorder,s=Zs().simplify;jI=o,o.initLowLimValues=c,o.initCutValues=a,o.calcCutValue=u,o.leaveEdge=h,o.enterEdge=p,o.exchangeEdges=g;function o(E){E=s(E),t(E);var T=n(E);c(T),a(T,E);for(var I,N;I=h(T);)N=p(T,E,I),g(T,E,I,N)}function a(E,T){var I=i(E,E.nodes());I=I.slice(0,I.length-1),I.forEach(N=>l(E,T,N))}function l(E,T,I){var N=E.node(I),k=N.parent;E.edge(I,k).cutvalue=u(E,T,I)}function u(E,T,I){var N=E.node(I),k=N.parent,q=!0,L=T.edge(I,k),R=0;return L||(q=!1,L=T.edge(k,I)),R=L.weight,T.nodeEdges(I).forEach(P=>{var F=P.v===I,z=F?P.w:P.v;if(z!==k){var V=F===q,W=T.edge(P).weight;if(R+=V?W:-W,b(E,I,z)){var Q=E.edge(I,z).cutvalue;R+=V?-Q:Q}}}),R}function c(E,T){arguments.length<2&&(T=E.nodes()[0]),d(E,{},1,T)}function d(E,T,I,N,k){var q=I,L=E.node(N);return T[N]=!0,E.neighbors(N).forEach(R=>{Object.hasOwn(T,R)||(I=d(E,T,I,R,N))}),L.low=q,L.lim=I++,k?L.parent=k:delete L.parent,I}function h(E){return E.edges().find(T=>E.edge(T).cutvalue<0)}function p(E,T,I){var N=I.v,k=I.w;T.hasEdge(N,k)||(N=I.w,k=I.v);var q=E.node(N),L=E.node(k),R=q,P=!1;q.lim>L.lim&&(R=L,P=!0);var F=T.edges().filter(z=>P===y(E,E.node(z.v),R)&&P!==y(E,E.node(z.w),R));return F.reduce((z,V)=>e(T,V)<e(T,z)?V:z)}function g(E,T,I,N){var k=I.v,q=I.w;E.removeEdge(k,q),E.setEdge(N.v,N.w,{}),c(E),a(E,T),x(E,T)}function x(E,T){var I=E.nodes().find(k=>!T.node(k).parent),N=r(E,I);N=N.slice(1),N.forEach(k=>{var q=E.node(k).parent,L=T.edge(k,q),R=!1;L||(L=T.edge(q,k),R=!0),T.node(k).rank=T.node(q).rank+(R?L.minlen:-L.minlen)})}function b(E,T,I){return E.hasEdge(T,I)}function y(E,T,I){return I.low<=T.lim&&T.lim<=I.lim}return jI}var BI,u4;function goe(){if(u4)return BI;u4=1;var n=bE(),e=n.longestPath,t=t8(),r=moe();BI=i;function i(l){switch(l.graph().ranker){case"network-simplex":a(l);break;case"tight-tree":o(l);break;case"longest-path":s(l);break;default:a(l)}}var s=e;function o(l){e(l),t(l)}function a(l){r(l)}return BI}var UI,d4;function yoe(){if(d4)return UI;d4=1,UI=n;function n(r){let i=t(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),a=o.edgeObj,l=e(r,i,a.v,a.w),u=l.path,c=l.lca,d=0,h=u[d],p=!0;for(;s!==a.w;){if(o=r.node(s),p){for(;(h=u[d])!==c&&r.node(h).maxRank<o.rank;)d++;h===c&&(p=!1)}if(!p){for(;d<u.length-1&&r.node(h=u[d+1]).minRank<=o.rank;)d++;h=u[d]}r.setParent(s,h),s=r.successors(s)[0]}})}function e(r,i,s,o){let a=[],l=[],u=Math.min(i[s].low,i[o].low),c=Math.max(i[s].lim,i[o].lim),d,h;d=s;do d=r.parent(d),a.push(d);while(d&&(i[d].low>u||c>i[d].lim));for(h=d,d=o;(d=r.parent(d))!==h;)l.push(d);return{path:a.concat(l.reverse()),lca:h}}function t(r){let i={},s=0;function o(a){let l=s;r.children(a).forEach(o),i[a]={low:l,lim:s++}}return r.children().forEach(o),i}return UI}var zI,f4;function voe(){if(f4)return zI;f4=1;let n=Zs();zI={run:e,cleanup:s};function e(o){let a=n.addDummyNode(o,"root",{},"_root"),l=r(o),u=Object.values(l),c=n.applyWithChunking(Math.max,u)-1,d=2*c+1;o.graph().nestingRoot=a,o.edges().forEach(p=>o.edge(p).minlen*=d);let h=i(o)+1;o.children().forEach(p=>t(o,a,d,h,c,l,p)),o.graph().nodeRankFactor=d}function t(o,a,l,u,c,d,h){let p=o.children(h);if(!p.length){h!==a&&o.setEdge(a,h,{weight:0,minlen:l});return}let g=n.addBorderNode(o,"_bt"),x=n.addBorderNode(o,"_bb"),b=o.node(h);o.setParent(g,h),b.borderTop=g,o.setParent(x,h),b.borderBottom=x,p.forEach(y=>{t(o,a,l,u,c,d,y);let E=o.node(y),T=E.borderTop?E.borderTop:y,I=E.borderBottom?E.borderBottom:y,N=E.borderTop?u:2*u,k=T!==I?1:c-d[h]+1;o.setEdge(g,T,{weight:N,minlen:k,nestingEdge:!0}),o.setEdge(I,x,{weight:N,minlen:k,nestingEdge:!0})}),o.parent(h)||o.setEdge(a,g,{weight:0,minlen:c+d[h]})}function r(o){var a={};function l(u,c){var d=o.children(u);d&&d.length&&d.forEach(h=>l(h,c+1)),a[u]=c}return o.children().forEach(u=>l(u,1)),a}function i(o){return o.edges().reduce((a,l)=>a+o.edge(l).weight,0)}function s(o){var a=o.graph();o.removeNode(a.nestingRoot),delete a.nestingRoot,o.edges().forEach(l=>{var u=o.edge(l);u.nestingEdge&&o.removeEdge(l)})}return zI}var VI,h4;function _oe(){if(h4)return VI;h4=1;let n=Zs();VI=e;function e(r){function i(s){let o=r.children(s),a=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let l=a.minRank,u=a.maxRank+1;l<u;++l)t(r,"borderLeft","_bl",s,a,l),t(r,"borderRight","_br",s,a,l)}}r.children().forEach(i)}function t(r,i,s,o,a,l){let u={width:0,height:0,rank:l,borderType:i},c=a[i][l-1],d=n.addDummyNode(r,"border",u,s);a[i][l]=d,r.setParent(d,o),c&&r.setEdge(c,d,{weight:1})}return VI}var WI,p4;function xoe(){if(p4)return WI;p4=1,WI={adjust:n,undo:e};function n(l){let u=l.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&t(l)}function e(l){let u=l.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&i(l),(u==="lr"||u==="rl")&&(o(l),t(l))}function t(l){l.nodes().forEach(u=>r(l.node(u))),l.edges().forEach(u=>r(l.edge(u)))}function r(l){let u=l.width;l.width=l.height,l.height=u}function i(l){l.nodes().forEach(u=>s(l.node(u))),l.edges().forEach(u=>{let c=l.edge(u);c.points.forEach(s),Object.hasOwn(c,"y")&&s(c)})}function s(l){l.y=-l.y}function o(l){l.nodes().forEach(u=>a(l.node(u))),l.edges().forEach(u=>{let c=l.edge(u);c.points.forEach(a),Object.hasOwn(c,"x")&&a(c)})}function a(l){let u=l.x;l.x=l.y,l.y=u}return WI}var $I,m4;function boe(){if(m4)return $I;m4=1;let n=Zs();$I=e;function e(t){let r={},i=t.nodes().filter(c=>!t.children(c).length),s=i.map(c=>t.node(c).rank),o=n.applyWithChunking(Math.max,s),a=n.range(o+1).map(()=>[]);function l(c){if(r[c])return;r[c]=!0;let d=t.node(c);a[d.rank].push(c),t.successors(c).forEach(l)}return i.sort((c,d)=>t.node(c).rank-t.node(d).rank).forEach(l),a}return $I}var HI,g4;function woe(){if(g4)return HI;g4=1;let n=Zs().zipObject;HI=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=t(r,i[o-1],i[o]);return s}function t(r,i,s){let o=n(s,s.map((h,p)=>p)),a=i.flatMap(h=>r.outEdges(h).map(p=>({pos:o[p.w],weight:r.edge(p).weight})).sort((p,g)=>p.pos-g.pos)),l=1;for(;l<s.length;)l<<=1;let u=2*l-1;l-=1;let c=new Array(u).fill(0),d=0;return a.forEach(h=>{let p=h.pos+l;c[p]+=h.weight;let g=0;for(;p>0;)p%2&&(g+=c[p+1]),p=p-1>>1,c[p]+=h.weight;d+=h.weight*g}),d}return HI}var GI,y4;function Soe(){if(y4)return GI;y4=1,GI=n;function n(e,t=[]){return t.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,a)=>{let l=e.edge(a),u=e.node(a.v);return{sum:o.sum+l.weight*u.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return GI}var XI,v4;function Eoe(){if(v4)return XI;v4=1;let n=Zs();XI=e;function e(i,s){let o={};i.forEach((l,u)=>{let c=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};l.barycenter!==void 0&&(c.barycenter=l.barycenter,c.weight=l.weight)}),s.edges().forEach(l=>{let u=o[l.v],c=o[l.w];u!==void 0&&c!==void 0&&(c.indegree++,u.out.push(o[l.w]))});let a=Object.values(o).filter(l=>!l.indegree);return t(a)}function t(i){let s=[];function o(l){return u=>{u.merged||(u.barycenter===void 0||l.barycenter===void 0||u.barycenter>=l.barycenter)&&r(l,u)}}function a(l){return u=>{u.in.push(l),--u.indegree===0&&i.push(u)}}for(;i.length;){let l=i.pop();s.push(l),l.in.reverse().forEach(o(l)),l.out.forEach(a(l))}return s.filter(l=>!l.merged).map(l=>n.pick(l,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return XI}var KI,_4;function Toe(){if(_4)return KI;_4=1;let n=Zs();KI=e;function e(i,s){let o=n.partition(i,g=>Object.hasOwn(g,"barycenter")),a=o.lhs,l=o.rhs.sort((g,x)=>x.i-g.i),u=[],c=0,d=0,h=0;a.sort(r(!!s)),h=t(u,l,h),a.forEach(g=>{h+=g.vs.length,u.push(g.vs),c+=g.barycenter*g.weight,d+=g.weight,h=t(u,l,h)});let p={vs:u.flat(!0)};return d&&(p.barycenter=c/d,p.weight=d),p}function t(i,s,o){let a;for(;s.length&&(a=s[s.length-1]).i<=o;)s.pop(),i.push(a.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return KI}var QI,x4;function Moe(){if(x4)return QI;x4=1;let n=Soe(),e=Eoe(),t=Toe();QI=r;function r(o,a,l,u){let c=o.children(a),d=o.node(a),h=d?d.borderLeft:void 0,p=d?d.borderRight:void 0,g={};h&&(c=c.filter(E=>E!==h&&E!==p));let x=n(o,c);x.forEach(E=>{if(o.children(E.v).length){let T=r(o,E.v,l,u);g[E.v]=T,Object.hasOwn(T,"barycenter")&&s(E,T)}});let b=e(x,l);i(b,g);let y=t(b,u);if(h&&(y.vs=[h,y.vs,p].flat(!0),o.predecessors(h).length)){let E=o.node(o.predecessors(h)[0]),T=o.node(o.predecessors(p)[0]);Object.hasOwn(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+E.order+T.order)/(y.weight+2),y.weight+=2}return y}function i(o,a){o.forEach(l=>{l.vs=l.vs.flatMap(u=>a[u]?a[u].vs:u)})}function s(o,a){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight)}return QI}var YI,b4;function Ioe(){if(b4)return YI;b4=1;let n=Qc().Graph,e=Zs();YI=t;function t(i,s,o){let a=r(i),l=new n({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(u=>i.node(u));return i.nodes().forEach(u=>{let c=i.node(u),d=i.parent(u);(c.rank===s||c.minRank<=s&&s<=c.maxRank)&&(l.setNode(u),l.setParent(u,d||a),i[o](u).forEach(h=>{let p=h.v===u?h.w:h.v,g=l.edge(p,u),x=g!==void 0?g.weight:0;l.setEdge(p,u,{weight:i.edge(h).weight+x})}),Object.hasOwn(c,"minRank")&&l.setNode(u,{borderLeft:c.borderLeft[s],borderRight:c.borderRight[s]}))}),l}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return YI}var JI,w4;function Aoe(){if(w4)return JI;w4=1,JI=n;function n(e,t,r){let i={},s;r.forEach(o=>{let a=e.parent(o),l,u;for(;a;){if(l=e.parent(a),l?(u=i[l],i[l]=a):(u=s,s=a),u&&u!==a){t.setEdge(u,a);return}a=l}})}return JI}var ZI,S4;function Coe(){if(S4)return ZI;S4=1;let n=boe(),e=woe(),t=Moe(),r=Ioe(),i=Aoe(),s=Qc().Graph,o=Zs();ZI=a;function a(d,h){if(h&&typeof h.customOrder=="function"){h.customOrder(d,a);return}let p=o.maxRank(d),g=l(d,o.range(1,p+1),"inEdges"),x=l(d,o.range(p-1,-1,-1),"outEdges"),b=n(d);if(c(d,b),h&&h.disableOptimalOrderHeuristic)return;let y=Number.POSITIVE_INFINITY,E;for(let T=0,I=0;I<4;++T,++I){u(T%2?g:x,T%4>=2),b=o.buildLayerMatrix(d);let N=e(d,b);N<y&&(I=0,E=Object.assign({},b),y=N)}c(d,E)}function l(d,h,p){return h.map(function(g){return r(d,g,p)})}function u(d,h){let p=new s;d.forEach(function(g){let x=g.graph().root,b=t(g,x,p,h);b.vs.forEach((y,E)=>g.node(y).order=E),i(g,p,b.vs)})}function c(d,h){Object.values(h).forEach(p=>p.forEach((g,x)=>d.node(g).order=x))}return ZI}var eA,E4;function Roe(){if(E4)return eA;E4=1;let n=Qc().Graph,e=Zs();eA={positionX:p,findType1Conflicts:t,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:a,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:c,balance:h};function t(b,y){let E={};function T(I,N){let k=0,q=0,L=I.length,R=N[N.length-1];return N.forEach((P,F)=>{let z=i(b,P),V=z?b.node(z).order:L;(z||P===R)&&(N.slice(q,F+1).forEach(W=>{b.predecessors(W).forEach(Q=>{let X=b.node(Q),re=X.order;(re<k||V<re)&&!(X.dummy&&b.node(W).dummy)&&s(E,Q,W)})}),q=F+1,k=V)}),N}return y.length&&y.reduce(T),E}function r(b,y){let E={};function T(N,k,q,L,R){let P;e.range(k,q).forEach(F=>{P=N[F],b.node(P).dummy&&b.predecessors(P).forEach(z=>{let V=b.node(z);V.dummy&&(V.order<L||V.order>R)&&s(E,z,P)})})}function I(N,k){let q=-1,L,R=0;return k.forEach((P,F)=>{if(b.node(P).dummy==="border"){let z=b.predecessors(P);z.length&&(L=b.node(z[0]).order,T(k,R,F,q,L),R=F,q=L)}T(k,R,k.length,L,N.length)}),k}return y.length&&y.reduce(I),E}function i(b,y){if(b.node(y).dummy)return b.predecessors(y).find(E=>b.node(E).dummy)}function s(b,y,E){if(y>E){let I=y;y=E,E=I}let T=b[y];T||(b[y]=T={}),T[E]=!0}function o(b,y,E){if(y>E){let T=y;y=E,E=T}return!!b[y]&&Object.hasOwn(b[y],E)}function a(b,y,E,T){let I={},N={},k={};return y.forEach(q=>{q.forEach((L,R)=>{I[L]=L,N[L]=L,k[L]=R})}),y.forEach(q=>{let L=-1;q.forEach(R=>{let P=T(R);if(P.length){P=P.sort((z,V)=>k[z]-k[V]);let F=(P.length-1)/2;for(let z=Math.floor(F),V=Math.ceil(F);z<=V;++z){let W=P[z];N[R]===R&&L<k[W]&&!o(E,R,W)&&(N[W]=R,N[R]=I[R]=I[W],L=k[W])}}})}),{root:I,align:N}}function l(b,y,E,T,I){let N={},k=u(b,y,E,I),q=I?"borderLeft":"borderRight";function L(F,z){let V=k.nodes(),W=V.pop(),Q={};for(;W;)Q[W]?F(W):(Q[W]=!0,V.push(W),V=V.concat(z(W))),W=V.pop()}function R(F){N[F]=k.inEdges(F).reduce((z,V)=>Math.max(z,N[V.v]+k.edge(V)),0)}function P(F){let z=k.outEdges(F).reduce((W,Q)=>Math.min(W,N[Q.w]-k.edge(Q)),Number.POSITIVE_INFINITY),V=b.node(F);z!==Number.POSITIVE_INFINITY&&V.borderType!==q&&(N[F]=Math.max(N[F],z))}return L(R,k.predecessors.bind(k)),L(P,k.successors.bind(k)),Object.keys(T).forEach(F=>N[F]=N[E[F]]),N}function u(b,y,E,T){let I=new n,N=b.graph(),k=g(N.nodesep,N.edgesep,T);return y.forEach(q=>{let L;q.forEach(R=>{let P=E[R];if(I.setNode(P),L){var F=E[L],z=I.edge(F,P);I.setEdge(F,P,Math.max(k(b,R,L),z||0))}L=R})}),I}function c(b,y){return Object.values(y).reduce((E,T)=>{let I=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;Object.entries(T).forEach(([q,L])=>{let R=x(b,q)/2;I=Math.max(L+R,I),N=Math.min(L-R,N)});const k=I-N;return k<E[0]&&(E=[k,T]),E},[Number.POSITIVE_INFINITY,null])[1]}function d(b,y){let E=Object.values(y),T=e.applyWithChunking(Math.min,E),I=e.applyWithChunking(Math.max,E);["u","d"].forEach(N=>{["l","r"].forEach(k=>{let q=N+k,L=b[q];if(L===y)return;let R=Object.values(L),P=T-e.applyWithChunking(Math.min,R);k!=="l"&&(P=I-e.applyWithChunking(Math.max,R)),P&&(b[q]=e.mapValues(L,F=>F+P))})})}function h(b,y){return e.mapValues(b.ul,(E,T)=>{if(y)return b[y.toLowerCase()][T];{let I=Object.values(b).map(N=>N[T]).sort((N,k)=>N-k);return(I[1]+I[2])/2}})}function p(b){let y=e.buildLayerMatrix(b),E=Object.assign(t(b,y),r(b,y)),T={},I;["u","d"].forEach(k=>{I=k==="u"?y:Object.values(y).reverse(),["l","r"].forEach(q=>{q==="r"&&(I=I.map(F=>Object.values(F).reverse()));let L=(k==="u"?b.predecessors:b.successors).bind(b),R=a(b,I,E,L),P=l(b,I,R.root,R.align,q==="r");q==="r"&&(P=e.mapValues(P,F=>-F)),T[k+q]=P})});let N=c(b,T);return d(T,N),h(T,b.graph().align)}function g(b,y,E){return(T,I,N)=>{let k=T.node(I),q=T.node(N),L=0,R;if(L+=k.width/2,Object.hasOwn(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":R=-k.width/2;break;case"r":R=k.width/2;break}if(R&&(L+=E?R:-R),R=0,L+=(k.dummy?y:b)/2,L+=(q.dummy?y:b)/2,L+=q.width/2,Object.hasOwn(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":R=q.width/2;break;case"r":R=-q.width/2;break}return R&&(L+=E?R:-R),R=0,L}}function x(b,y){return b.node(y).width}return eA}var tA,T4;function Noe(){if(T4)return tA;T4=1;let n=Zs(),e=Roe().positionX;tA=t;function t(i){i=n.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=n.buildLayerMatrix(i),o=i.graph().ranksep,a=0;s.forEach(l=>{const u=l.reduce((c,d)=>{const h=i.node(d).height;return c>h?c:h},0);l.forEach(c=>i.node(c).y=a+u/2),a+=u+o})}return tA}var nA,M4;function Poe(){if(M4)return nA;M4=1;let n=hoe(),e=poe(),t=goe(),r=Zs().normalizeRanks,i=yoe(),s=Zs().removeEmptyRanks,o=voe(),a=_oe(),l=xoe(),u=Coe(),c=Noe(),d=Zs(),h=Qc().Graph;nA=p;function p(ge,ce){let ye=ce&&ce.debugTiming?d.time:d.notime;ye("layout",()=>{let be=ye("  buildLayoutGraph",()=>L(ge));ye("  runLayout",()=>g(be,ye,ce)),ye("  updateInputGraph",()=>x(ge,be))})}function g(ge,ce,ye){ce("    makeSpaceForEdgeLabels",()=>R(ge)),ce("    removeSelfEdges",()=>G(ge)),ce("    acyclic",()=>n.run(ge)),ce("    nestingGraph.run",()=>o.run(ge)),ce("    rank",()=>t(d.asNonCompoundGraph(ge))),ce("    injectEdgeLabelProxies",()=>P(ge)),ce("    removeEmptyRanks",()=>s(ge)),ce("    nestingGraph.cleanup",()=>o.cleanup(ge)),ce("    normalizeRanks",()=>r(ge)),ce("    assignRankMinMax",()=>F(ge)),ce("    removeEdgeLabelProxies",()=>z(ge)),ce("    normalize.run",()=>e.run(ge)),ce("    parentDummyChains",()=>i(ge)),ce("    addBorderSegments",()=>a(ge)),ce("    order",()=>u(ge,ye)),ce("    insertSelfEdges",()=>Y(ge)),ce("    adjustCoordinateSystem",()=>l.adjust(ge)),ce("    position",()=>c(ge)),ce("    positionSelfEdges",()=>te(ge)),ce("    removeBorderNodes",()=>re(ge)),ce("    normalize.undo",()=>e.undo(ge)),ce("    fixupEdgeLabelCoords",()=>Q(ge)),ce("    undoCoordinateSystem",()=>l.undo(ge)),ce("    translateGraph",()=>V(ge)),ce("    assignNodeIntersects",()=>W(ge)),ce("    reversePoints",()=>X(ge)),ce("    acyclic.undo",()=>n.undo(ge))}function x(ge,ce){ge.nodes().forEach(ye=>{let be=ge.node(ye),Ee=ce.node(ye);be&&(be.x=Ee.x,be.y=Ee.y,be.rank=Ee.rank,ce.children(ye).length&&(be.width=Ee.width,be.height=Ee.height))}),ge.edges().forEach(ye=>{let be=ge.edge(ye),Ee=ce.edge(ye);be.points=Ee.points,Object.hasOwn(Ee,"x")&&(be.x=Ee.x,be.y=Ee.y)}),ge.graph().width=ce.graph().width,ge.graph().height=ce.graph().height}let b=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],T=["width","height"],I={width:0,height:0},N=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},q=["labelpos"];function L(ge){let ce=new h({multigraph:!0,compound:!0}),ye=fe(ge.graph());return ce.setGraph(Object.assign({},y,Z(ye,b),d.pick(ye,E))),ge.nodes().forEach(be=>{let Ee=fe(ge.node(be));const Me=Z(Ee,T);Object.keys(I).forEach(qe=>{Me[qe]===void 0&&(Me[qe]=I[qe])}),ce.setNode(be,Me),ce.setParent(be,ge.parent(be))}),ge.edges().forEach(be=>{let Ee=fe(ge.edge(be));ce.setEdge(be,Object.assign({},k,Z(Ee,N),d.pick(Ee,q)))}),ce}function R(ge){let ce=ge.graph();ce.ranksep/=2,ge.edges().forEach(ye=>{let be=ge.edge(ye);be.minlen*=2,be.labelpos.toLowerCase()!=="c"&&(ce.rankdir==="TB"||ce.rankdir==="BT"?be.width+=be.labeloffset:be.height+=be.labeloffset)})}function P(ge){ge.edges().forEach(ce=>{let ye=ge.edge(ce);if(ye.width&&ye.height){let be=ge.node(ce.v),Me={rank:(ge.node(ce.w).rank-be.rank)/2+be.rank,e:ce};d.addDummyNode(ge,"edge-proxy",Me,"_ep")}})}function F(ge){let ce=0;ge.nodes().forEach(ye=>{let be=ge.node(ye);be.borderTop&&(be.minRank=ge.node(be.borderTop).rank,be.maxRank=ge.node(be.borderBottom).rank,ce=Math.max(ce,be.maxRank))}),ge.graph().maxRank=ce}function z(ge){ge.nodes().forEach(ce=>{let ye=ge.node(ce);ye.dummy==="edge-proxy"&&(ge.edge(ye.e).labelRank=ye.rank,ge.removeNode(ce))})}function V(ge){let ce=Number.POSITIVE_INFINITY,ye=0,be=Number.POSITIVE_INFINITY,Ee=0,Me=ge.graph(),qe=Me.marginx||0,Ue=Me.marginy||0;function Ye(Ne){let ke=Ne.x,me=Ne.y,ht=Ne.width,ct=Ne.height;ce=Math.min(ce,ke-ht/2),ye=Math.max(ye,ke+ht/2),be=Math.min(be,me-ct/2),Ee=Math.max(Ee,me+ct/2)}ge.nodes().forEach(Ne=>Ye(ge.node(Ne))),ge.edges().forEach(Ne=>{let ke=ge.edge(Ne);Object.hasOwn(ke,"x")&&Ye(ke)}),ce-=qe,be-=Ue,ge.nodes().forEach(Ne=>{let ke=ge.node(Ne);ke.x-=ce,ke.y-=be}),ge.edges().forEach(Ne=>{let ke=ge.edge(Ne);ke.points.forEach(me=>{me.x-=ce,me.y-=be}),Object.hasOwn(ke,"x")&&(ke.x-=ce),Object.hasOwn(ke,"y")&&(ke.y-=be)}),Me.width=ye-ce+qe,Me.height=Ee-be+Ue}function W(ge){ge.edges().forEach(ce=>{let ye=ge.edge(ce),be=ge.node(ce.v),Ee=ge.node(ce.w),Me,qe;ye.points?(Me=ye.points[0],qe=ye.points[ye.points.length-1]):(ye.points=[],Me=Ee,qe=be),ye.points.unshift(d.intersectRect(be,Me)),ye.points.push(d.intersectRect(Ee,qe))})}function Q(ge){ge.edges().forEach(ce=>{let ye=ge.edge(ce);if(Object.hasOwn(ye,"x"))switch((ye.labelpos==="l"||ye.labelpos==="r")&&(ye.width-=ye.labeloffset),ye.labelpos){case"l":ye.x-=ye.width/2+ye.labeloffset;break;case"r":ye.x+=ye.width/2+ye.labeloffset;break}})}function X(ge){ge.edges().forEach(ce=>{let ye=ge.edge(ce);ye.reversed&&ye.points.reverse()})}function re(ge){ge.nodes().forEach(ce=>{if(ge.children(ce).length){let ye=ge.node(ce),be=ge.node(ye.borderTop),Ee=ge.node(ye.borderBottom),Me=ge.node(ye.borderLeft[ye.borderLeft.length-1]),qe=ge.node(ye.borderRight[ye.borderRight.length-1]);ye.width=Math.abs(qe.x-Me.x),ye.height=Math.abs(Ee.y-be.y),ye.x=Me.x+ye.width/2,ye.y=be.y+ye.height/2}}),ge.nodes().forEach(ce=>{ge.node(ce).dummy==="border"&&ge.removeNode(ce)})}function G(ge){ge.edges().forEach(ce=>{if(ce.v===ce.w){var ye=ge.node(ce.v);ye.selfEdges||(ye.selfEdges=[]),ye.selfEdges.push({e:ce,label:ge.edge(ce)}),ge.removeEdge(ce)}})}function Y(ge){var ce=d.buildLayerMatrix(ge);ce.forEach(ye=>{var be=0;ye.forEach((Ee,Me)=>{var qe=ge.node(Ee);qe.order=Me+be,(qe.selfEdges||[]).forEach(Ue=>{d.addDummyNode(ge,"selfedge",{width:Ue.label.width,height:Ue.label.height,rank:qe.rank,order:Me+ ++be,e:Ue.e,label:Ue.label},"_se")}),delete qe.selfEdges})})}function te(ge){ge.nodes().forEach(ce=>{var ye=ge.node(ce);if(ye.dummy==="selfedge"){var be=ge.node(ye.e.v),Ee=be.x+be.width/2,Me=be.y,qe=ye.x-Ee,Ue=be.height/2;ge.setEdge(ye.e,ye.label),ge.removeNode(ce),ye.label.points=[{x:Ee+2*qe/3,y:Me-Ue},{x:Ee+5*qe/6,y:Me-Ue},{x:Ee+qe,y:Me},{x:Ee+5*qe/6,y:Me+Ue},{x:Ee+2*qe/3,y:Me+Ue}],ye.label.x=ye.x,ye.label.y=ye.y}})}function Z(ge,ce){return d.mapValues(d.pick(ge,ce),Number)}function fe(ge){var ce={};return ge&&Object.entries(ge).forEach(([ye,be])=>{typeof ye=="string"&&(ye=ye.toLowerCase()),ce[ye]=be}),ce}return nA}var rA,I4;function koe(){if(I4)return rA;I4=1;let n=Zs(),e=Qc().Graph;rA={debugOrdering:t};function t(r){let i=n.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,a)=>{let l="layer"+a;s.setNode(l,{rank:"same"}),o.reduce((u,c)=>(s.setEdge(u,c,{style:"invis"}),c))}),s}return rA}var iA,A4;function Ooe(){return A4||(A4=1,iA="1.1.4"),iA}var sA,C4;function Loe(){return C4||(C4=1,sA={graphlib:Qc(),layout:Poe(),debug:koe(),util:{time:Zs().time,notime:Zs().notime},version:Ooe()}),sA}var Doe=Loe();const n8=ol(Doe);function to(n){if(typeof n=="string"||typeof n=="number")return""+n;let e="";if(Array.isArray(n))for(let t=0,r;t<n.length;t++)(r=to(n[t]))!==""&&(e+=(e&&" ")+r);else for(let t in n)n[t]&&(e+=(e&&" ")+t);return e}var Foe={value:()=>{}};function sT(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new eS(t)}function eS(n){this._=n}function qoe(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}eS.prototype=sT.prototype={constructor:eS,on:function(n,e){var t=this._,r=qoe(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=joe(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=R4(t[i],n.name,e);else if(e==null)for(i in t)t[i]=R4(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new eS(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function joe(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function R4(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=Foe,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var vR="http://www.w3.org/1999/xhtml";const N4={svg:"http://www.w3.org/2000/svg",xhtml:vR,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oT(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),N4.hasOwnProperty(e)?{space:N4[e],local:n}:n}function Boe(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===vR&&e.documentElement.namespaceURI===vR?e.createElement(n):e.createElementNS(t,n)}}function Uoe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function r8(n){var e=oT(n);return(e.local?Uoe:Boe)(e)}function zoe(){}function mP(n){return n==null?zoe:function(){return this.querySelector(n)}}function Voe(n){typeof n!="function"&&(n=mP(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=n.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new jl(r,this._parents)}function Woe(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function $oe(){return[]}function i8(n){return n==null?$oe:function(){return this.querySelectorAll(n)}}function Hoe(n){return function(){return Woe(n.apply(this,arguments))}}function Goe(n){typeof n=="function"?n=Hoe(n):n=i8(n);for(var e=this._groups,t=e.length,r=[],i=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(n.call(l,l.__data__,u,o)),i.push(l));return new jl(r,i)}function s8(n){return function(){return this.matches(n)}}function o8(n){return function(e){return e.matches(n)}}var Xoe=Array.prototype.find;function Koe(n){return function(){return Xoe.call(this.children,n)}}function Qoe(){return this.firstElementChild}function Yoe(n){return this.select(n==null?Qoe:Koe(typeof n=="function"?n:o8(n)))}var Joe=Array.prototype.filter;function Zoe(){return Array.from(this.children)}function eae(n){return function(){return Joe.call(this.children,n)}}function tae(n){return this.selectAll(n==null?Zoe:eae(typeof n=="function"?n:o8(n)))}function nae(n){typeof n!="function"&&(n=s8(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&a.push(l);return new jl(r,this._parents)}function a8(n){return new Array(n.length)}function rae(){return new jl(this._enter||this._groups.map(a8),this._parents)}function wE(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}wE.prototype={constructor:wE,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function iae(n){return function(){return n}}function sae(n,e,t,r,i,s){for(var o=0,a,l=e.length,u=s.length;o<u;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new wE(n,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function oae(n,e,t,r,i,s,o){var a,l,u=new Map,c=e.length,d=s.length,h=new Array(c),p;for(a=0;a<c;++a)(l=e[a])&&(h[a]=p=o.call(l,l.__data__,a,e)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<d;++a)p=o.call(n,s[a],a,s)+"",(l=u.get(p))?(r[a]=l,l.__data__=s[a],u.delete(p)):t[a]=new wE(n,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(h[a])===l&&(i[a]=l)}function aae(n){return n.__data__}function lae(n,e){if(!arguments.length)return Array.from(this,aae);var t=e?oae:sae,r=this._parents,i=this._groups;typeof n!="function"&&(n=iae(n));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],h=d.length,p=cae(n.call(c,c&&c.__data__,u,r)),g=p.length,x=a[u]=new Array(g),b=o[u]=new Array(g),y=l[u]=new Array(h);t(c,d,x,b,y,p,e);for(var E=0,T=0,I,N;E<g;++E)if(I=x[E]){for(E>=T&&(T=E+1);!(N=b[T])&&++T<g;);I._next=N||null}}return o=new jl(o,r),o._enter=a,o._exit=l,o}function cae(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function uae(){return new jl(this._exit||this._groups.map(a8),this._parents)}function dae(n,e,t){var r=this.enter(),i=this,s=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?s.remove():t(s),r&&i?r.merge(i).order():i}function fae(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=t[l],c=r[l],d=u.length,h=a[l]=new Array(d),p,g=0;g<d;++g)(p=u[g]||c[g])&&(h[g]=p);for(;l<i;++l)a[l]=t[l];return new jl(a,this._parents)}function hae(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function pae(n){n||(n=mae);function e(d,h){return d&&h?n(d.__data__,h.__data__):!d-!h}for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new jl(i,this._parents).order()}function mae(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function gae(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function yae(){return Array.from(this)}function vae(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function _ae(){let n=0;for(const e of this)++n;return n}function xae(){return!this.node()}function bae(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,o=i.length,a;s<o;++s)(a=i[s])&&n.call(a,a.__data__,s,i);return this}function wae(n){return function(){this.removeAttribute(n)}}function Sae(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Eae(n,e){return function(){this.setAttribute(n,e)}}function Tae(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Mae(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function Iae(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function Aae(n,e){var t=oT(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?Sae:wae:typeof e=="function"?t.local?Iae:Mae:t.local?Tae:Eae)(t,e))}function l8(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Cae(n){return function(){this.style.removeProperty(n)}}function Rae(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Nae(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function Pae(n,e,t){return arguments.length>1?this.each((e==null?Cae:typeof e=="function"?Nae:Rae)(n,e,t??"")):tv(this.node(),n)}function tv(n,e){return n.style.getPropertyValue(e)||l8(n).getComputedStyle(n,null).getPropertyValue(e)}function kae(n){return function(){delete this[n]}}function Oae(n,e){return function(){this[n]=e}}function Lae(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function Dae(n,e){return arguments.length>1?this.each((e==null?kae:typeof e=="function"?Lae:Oae)(n,e)):this.node()[n]}function c8(n){return n.trim().split(/^|\s+/)}function gP(n){return n.classList||new u8(n)}function u8(n){this._node=n,this._names=c8(n.getAttribute("class")||"")}u8.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function d8(n,e){for(var t=gP(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function f8(n,e){for(var t=gP(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Fae(n){return function(){d8(this,n)}}function qae(n){return function(){f8(this,n)}}function jae(n,e){return function(){(e.apply(this,arguments)?d8:f8)(this,n)}}function Bae(n,e){var t=c8(n+"");if(arguments.length<2){for(var r=gP(this.node()),i=-1,s=t.length;++i<s;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?jae:e?Fae:qae)(t,e))}function Uae(){this.textContent=""}function zae(n){return function(){this.textContent=n}}function Vae(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Wae(n){return arguments.length?this.each(n==null?Uae:(typeof n=="function"?Vae:zae)(n)):this.node().textContent}function $ae(){this.innerHTML=""}function Hae(n){return function(){this.innerHTML=n}}function Gae(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Xae(n){return arguments.length?this.each(n==null?$ae:(typeof n=="function"?Gae:Hae)(n)):this.node().innerHTML}function Kae(){this.nextSibling&&this.parentNode.appendChild(this)}function Qae(){return this.each(Kae)}function Yae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jae(){return this.each(Yae)}function Zae(n){var e=typeof n=="function"?n:r8(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ele(){return null}function tle(n,e){var t=typeof n=="function"?n:r8(n),r=e==null?ele:typeof e=="function"?e:mP(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function nle(){var n=this.parentNode;n&&n.removeChild(this)}function rle(){return this.each(nle)}function ile(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function sle(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function ole(n){return this.select(n?sle:ile)}function ale(n){return arguments.length?this.property("__data__",n):this.node().__data__}function lle(n){return function(e){n.call(this,e,this.__data__)}}function cle(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function ule(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,s;t<i;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function dle(n,e,t){return function(){var r=this.__on,i,s=lle(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=t),i.value=e;return}}this.addEventListener(n.type,s,t),i={type:n.type,name:n.name,value:e,listener:s,options:t},r?r.push(i):this.__on=[i]}}function fle(n,e,t){var r=cle(n+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?dle:ule,i=0;i<s;++i)this.each(a(r[i],e,t));return this}function h8(n,e,t){var r=l8(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function hle(n,e){return function(){return h8(this,n,e)}}function ple(n,e){return function(){return h8(this,n,e.apply(this,arguments))}}function mle(n,e){return this.each((typeof e=="function"?ple:hle)(n,e))}function*gle(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var p8=[null];function jl(n,e){this._groups=n,this._parents=e}function tb(){return new jl([[document.documentElement]],p8)}function yle(){return this}jl.prototype=tb.prototype={constructor:jl,select:Voe,selectAll:Goe,selectChild:Yoe,selectChildren:tae,filter:nae,data:lae,enter:rae,exit:uae,join:dae,merge:fae,selection:yle,order:hae,sort:pae,call:gae,nodes:yae,node:vae,size:_ae,empty:xae,each:bae,attr:Aae,style:Pae,property:Dae,classed:Bae,text:Wae,html:Xae,raise:Qae,lower:Jae,append:Zae,insert:tle,remove:rle,clone:ole,datum:ale,on:fle,dispatch:mle,[Symbol.iterator]:gle};function Pl(n){return typeof n=="string"?new jl([[document.querySelector(n)]],[document.documentElement]):new jl([[n]],p8)}function vle(n){let e;for(;e=n.sourceEvent;)n=e;return n}function Fc(n,e){if(n=vle(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}const _le={passive:!1},i0={capture:!0,passive:!1};function oA(n){n.stopImmediatePropagation()}function zy(n){n.preventDefault(),n.stopImmediatePropagation()}function m8(n){var e=n.document.documentElement,t=Pl(n).on("dragstart.drag",zy,i0);"onselectstart"in e?t.on("selectstart.drag",zy,i0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function g8(n,e){var t=n.document.documentElement,r=Pl(n).on("dragstart.drag",null);e&&(r.on("click.drag",zy,i0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Rw=n=>()=>n;function _R(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:s,x:o,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}_R.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function xle(n){return!n.ctrlKey&&!n.button}function ble(){return this.parentNode}function wle(n,e){return e??{x:n.x,y:n.y}}function Sle(){return navigator.maxTouchPoints||"ontouchstart"in this}function y8(){var n=xle,e=ble,t=wle,r=Sle,i={},s=sT("start","drag","end"),o=0,a,l,u,c,d=0;function h(I){I.on("mousedown.drag",p).filter(r).on("touchstart.drag",b).on("touchmove.drag",y,_le).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(I,N){if(!(c||!n.call(this,I,N))){var k=T(this,e.call(this,I,N),I,N,"mouse");k&&(Pl(I.view).on("mousemove.drag",g,i0).on("mouseup.drag",x,i0),m8(I.view),oA(I),u=!1,a=I.clientX,l=I.clientY,k("start",I))}}function g(I){if(zy(I),!u){var N=I.clientX-a,k=I.clientY-l;u=N*N+k*k>d}i.mouse("drag",I)}function x(I){Pl(I.view).on("mousemove.drag mouseup.drag",null),g8(I.view,u),zy(I),i.mouse("end",I)}function b(I,N){if(n.call(this,I,N)){var k=I.changedTouches,q=e.call(this,I,N),L=k.length,R,P;for(R=0;R<L;++R)(P=T(this,q,I,N,k[R].identifier,k[R]))&&(oA(I),P("start",I,k[R]))}}function y(I){var N=I.changedTouches,k=N.length,q,L;for(q=0;q<k;++q)(L=i[N[q].identifier])&&(zy(I),L("drag",I,N[q]))}function E(I){var N=I.changedTouches,k=N.length,q,L;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),q=0;q<k;++q)(L=i[N[q].identifier])&&(oA(I),L("end",I,N[q]))}function T(I,N,k,q,L,R){var P=s.copy(),F=Fc(R||k,N),z,V,W;if((W=t.call(I,new _R("beforestart",{sourceEvent:k,target:h,identifier:L,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:P}),q))!=null)return z=W.x-F[0]||0,V=W.y-F[1]||0,function Q(X,re,G){var Y=F,te;switch(X){case"start":i[L]=Q,te=o++;break;case"end":delete i[L],--o;case"drag":F=Fc(G||re,N),te=o;break}P.call(X,I,new _R(X,{sourceEvent:re,subject:W,target:h,identifier:L,active:te,x:F[0]+z,y:F[1]+V,dx:F[0]-Y[0],dy:F[1]-Y[1],dispatch:P}),q)}}return h.filter=function(I){return arguments.length?(n=typeof I=="function"?I:Rw(!!I),h):n},h.container=function(I){return arguments.length?(e=typeof I=="function"?I:Rw(I),h):e},h.subject=function(I){return arguments.length?(t=typeof I=="function"?I:Rw(I),h):t},h.touchable=function(I){return arguments.length?(r=typeof I=="function"?I:Rw(!!I),h):r},h.on=function(){var I=s.on.apply(s,arguments);return I===s?h:I},h.clickDistance=function(I){return arguments.length?(d=(I=+I)*I,h):Math.sqrt(d)},h}function yP(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function v8(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function nb(){}var s0=.7,SE=1/s0,Vy="\\s*([+-]?\\d+)\\s*",o0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ele=/^#([0-9a-f]{3,8})$/,Tle=new RegExp(`^rgb\\(${Vy},${Vy},${Vy}\\)$`),Mle=new RegExp(`^rgb\\(${Lu},${Lu},${Lu}\\)$`),Ile=new RegExp(`^rgba\\(${Vy},${Vy},${Vy},${o0}\\)$`),Ale=new RegExp(`^rgba\\(${Lu},${Lu},${Lu},${o0}\\)$`),Cle=new RegExp(`^hsl\\(${o0},${Lu},${Lu}\\)$`),Rle=new RegExp(`^hsla\\(${o0},${Lu},${Lu},${o0}\\)$`),P4={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};yP(nb,a0,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:k4,formatHex:k4,formatHex8:Nle,formatHsl:Ple,formatRgb:O4,toString:O4});function k4(){return this.rgb().formatHex()}function Nle(){return this.rgb().formatHex8()}function Ple(){return _8(this).formatHsl()}function O4(){return this.rgb().formatRgb()}function a0(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Ele.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?L4(e):t===3?new nl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Nw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Nw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tle.exec(n))?new nl(e[1],e[2],e[3],1):(e=Mle.exec(n))?new nl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ile.exec(n))?Nw(e[1],e[2],e[3],e[4]):(e=Ale.exec(n))?Nw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cle.exec(n))?q4(e[1],e[2]/100,e[3]/100,1):(e=Rle.exec(n))?q4(e[1],e[2]/100,e[3]/100,e[4]):P4.hasOwnProperty(n)?L4(P4[n]):n==="transparent"?new nl(NaN,NaN,NaN,0):null}function L4(n){return new nl(n>>16&255,n>>8&255,n&255,1)}function Nw(n,e,t,r){return r<=0&&(n=e=t=NaN),new nl(n,e,t,r)}function kle(n){return n instanceof nb||(n=a0(n)),n?(n=n.rgb(),new nl(n.r,n.g,n.b,n.opacity)):new nl}function xR(n,e,t,r){return arguments.length===1?kle(n):new nl(n,e,t,r??1)}function nl(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}yP(nl,xR,v8(nb,{brighter(n){return n=n==null?SE:Math.pow(SE,n),new nl(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?s0:Math.pow(s0,n),new nl(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new nl(lm(this.r),lm(this.g),lm(this.b),EE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D4,formatHex:D4,formatHex8:Ole,formatRgb:F4,toString:F4}));function D4(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}`}function Ole(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}${tm((isNaN(this.opacity)?1:this.opacity)*255)}`}function F4(){const n=EE(this.opacity);return`${n===1?"rgb(":"rgba("}${lm(this.r)}, ${lm(this.g)}, ${lm(this.b)}${n===1?")":`, ${n})`}`}function EE(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function lm(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function tm(n){return n=lm(n),(n<16?"0":"")+n.toString(16)}function q4(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new zc(n,e,t,r)}function _8(n){if(n instanceof zc)return new zc(n.h,n.s,n.l,n.opacity);if(n instanceof nb||(n=a0(n)),!n)return new zc;if(n instanceof zc)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new zc(o,a,l,n.opacity)}function Lle(n,e,t,r){return arguments.length===1?_8(n):new zc(n,e,t,r??1)}function zc(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}yP(zc,Lle,v8(nb,{brighter(n){return n=n==null?SE:Math.pow(SE,n),new zc(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?s0:Math.pow(s0,n),new zc(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new nl(aA(n>=240?n-240:n+120,i,r),aA(n,i,r),aA(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new zc(j4(this.h),Pw(this.s),Pw(this.l),EE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=EE(this.opacity);return`${n===1?"hsl(":"hsla("}${j4(this.h)}, ${Pw(this.s)*100}%, ${Pw(this.l)*100}%${n===1?")":`, ${n})`}`}}));function j4(n){return n=(n||0)%360,n<0?n+360:n}function Pw(n){return Math.max(0,Math.min(1,n||0))}function aA(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const x8=n=>()=>n;function Dle(n,e){return function(t){return n+t*e}}function Fle(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function qle(n){return(n=+n)==1?b8:function(e,t){return t-e?Fle(e,t,n):x8(isNaN(e)?t:e)}}function b8(n,e){var t=e-n;return t?Dle(n,t):x8(isNaN(n)?e:n)}const B4=function n(e){var t=qle(e);function r(i,s){var o=t((i=xR(i)).r,(s=xR(s)).r),a=t(i.g,s.g),l=t(i.b,s.b),u=b8(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=n,r}(1);function eh(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var bR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lA=new RegExp(bR.source,"g");function jle(n){return function(){return n}}function Ble(n){return function(e){return n(e)+""}}function Ule(n,e){var t=bR.lastIndex=lA.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(n=n+"",e=e+"";(r=bR.exec(n))&&(i=lA.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:eh(r,i)})),t=lA.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Ble(l[0].x):jle(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var U4=180/Math.PI,wR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function w8(n,e,t,r,i,s){var o,a,l;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),n*r<e*t&&(n=-n,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,n)*U4,skewX:Math.atan(l)*U4,scaleX:o,scaleY:a}}var kw;function zle(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?wR:w8(e.a,e.b,e.c,e.d,e.e,e.f)}function Vle(n){return n==null||(kw||(kw=document.createElementNS("http://www.w3.org/2000/svg","g")),kw.setAttribute("transform",n),!(n=kw.transform.baseVal.consolidate()))?wR:(n=n.matrix,w8(n.a,n.b,n.c,n.d,n.e,n.f))}function S8(n,e,t,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,h,p,g){if(u!==d||c!==h){var x=p.push("translate(",null,e,null,t);g.push({i:x-4,x:eh(u,d)},{i:x-2,x:eh(c,h)})}else(d||h)&&p.push("translate("+d+e+h+t)}function o(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:eh(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,h){u!==c?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:eh(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,h,p,g){if(u!==d||c!==h){var x=p.push(i(p)+"scale(",null,",",null,")");g.push({i:x-4,x:eh(u,d)},{i:x-2,x:eh(c,h)})}else(d!==1||h!==1)&&p.push(i(p)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=n(u),c=n(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,h),o(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(p){for(var g=-1,x=h.length,b;++g<x;)d[(b=h[g]).i]=b.x(p);return d.join("")}}}var Wle=S8(zle,"px, ","px)","deg)"),$le=S8(Vle,", ",")",")"),Hle=1e-12;function z4(n){return((n=Math.exp(n))+1/n)/2}function Gle(n){return((n=Math.exp(n))-1/n)/2}function Xle(n){return((n=Math.exp(2*n))-1)/(n+1)}const Kle=function n(e,t,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],h=o[2],p=c-a,g=d-l,x=p*p+g*g,b,y;if(x<Hle)y=Math.log(h/u)/e,b=function(q){return[a+q*p,l+q*g,u*Math.exp(e*q*y)]};else{var E=Math.sqrt(x),T=(h*h-u*u+r*x)/(2*u*t*E),I=(h*h-u*u-r*x)/(2*h*t*E),N=Math.log(Math.sqrt(T*T+1)-T),k=Math.log(Math.sqrt(I*I+1)-I);y=(k-N)/e,b=function(q){var L=q*y,R=z4(N),P=u/(t*E)*(R*Xle(e*L+N)-Gle(N));return[a+P*p,l+P*g,u*R/z4(e*L+N)]}}return b.duration=y*1e3*e/Math.SQRT2,b}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return n(o,a,l)},i}(Math.SQRT2,2,4);var nv=0,G_=0,E_=0,E8=1e3,TE,X_,ME=0,Mm=0,aT=0,l0=typeof performance=="object"&&performance.now?performance:Date,T8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function vP(){return Mm||(T8(Qle),Mm=l0.now()+aT)}function Qle(){Mm=0}function IE(){this._call=this._time=this._next=null}IE.prototype=M8.prototype={constructor:IE,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?vP():+t)+(e==null?0:+e),!this._next&&X_!==this&&(X_?X_._next=this:TE=this,X_=this),this._call=n,this._time=t,SR()},stop:function(){this._call&&(this._call=null,this._time=1/0,SR())}};function M8(n,e,t){var r=new IE;return r.restart(n,e,t),r}function Yle(){vP(),++nv;for(var n=TE,e;n;)(e=Mm-n._time)>=0&&n._call.call(void 0,e),n=n._next;--nv}function V4(){Mm=(ME=l0.now())+aT,nv=G_=0;try{Yle()}finally{nv=0,Zle(),Mm=0}}function Jle(){var n=l0.now(),e=n-ME;e>E8&&(aT-=e,ME=n)}function Zle(){for(var n,e=TE,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:TE=t);X_=n,SR(r)}function SR(n){if(!nv){G_&&(G_=clearTimeout(G_));var e=n-Mm;e>24?(n<1/0&&(G_=setTimeout(V4,n-l0.now()-aT)),E_&&(E_=clearInterval(E_))):(E_||(ME=l0.now(),E_=setInterval(Jle,E8)),nv=1,T8(V4))}}function W4(n,e,t){var r=new IE;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var ece=sT("start","end","cancel","interrupt"),tce=[],I8=0,$4=1,ER=2,tS=3,H4=4,TR=5,nS=6;function lT(n,e,t,r,i,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;nce(n,t,{name:e,index:r,group:i,on:ece,tween:tce,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:I8})}function _P(n,e){var t=nu(n,e);if(t.state>I8)throw new Error("too late; already scheduled");return t}function $u(n,e){var t=nu(n,e);if(t.state>tS)throw new Error("too late; already running");return t}function nu(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function nce(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=M8(s,0,t.time);function s(u){t.state=$4,t.timer.restart(o,t.delay,t.time),t.delay<=u&&o(u-t.delay)}function o(u){var c,d,h,p;if(t.state!==$4)return l();for(c in r)if(p=r[c],p.name===t.name){if(p.state===tS)return W4(o);p.state===H4?(p.state=nS,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=nS,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete r[c])}if(W4(function(){t.state===tS&&(t.state=H4,t.timer.restart(a,t.delay,t.time),a(u))}),t.state=ER,t.on.call("start",n,n.__data__,t.index,t.group),t.state===ER){for(t.state=tS,i=new Array(h=t.tween.length),c=0,d=-1;c<h;++c)(p=t.tween[c].value.call(n,n.__data__,t.index,t.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var c=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=TR,1),d=-1,h=i.length;++d<h;)i[d].call(n,c);t.state===TR&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=nS,t.timer.stop(),delete r[e];for(var u in r)return;delete n.__transition}}function rS(n,e){var t=n.__transition,r,i,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}i=r.state>ER&&r.state<TR,r.state=nS,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[o]}s&&delete n.__transition}}function rce(n){return this.each(function(){rS(this,n)})}function ice(n,e){var t,r;return function(){var i=$u(this,n),s=i.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sce(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var s=$u(this,n),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:t},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function oce(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=nu(this.node(),t).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===n)return o.value;return null}return this.each((e==null?ice:sce)(t,n,e))}function xP(n,e,t){var r=n._id;return n.each(function(){var i=$u(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return nu(i,r).value[e]}}function A8(n,e){var t;return(typeof e=="number"?eh:e instanceof a0?B4:(t=a0(e))?(e=t,B4):Ule)(n,e)}function ace(n){return function(){this.removeAttribute(n)}}function lce(n){return function(){this.removeAttributeNS(n.space,n.local)}}function cce(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttribute(n);return o===i?null:o===r?s:s=e(r=o,t)}}function uce(n,e,t){var r,i=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===i?null:o===r?s:s=e(r=o,t)}}function dce(n,e,t){var r,i,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(n):(o=this.getAttribute(n),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function fce(n,e,t){var r,i,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function hce(n,e){var t=oT(n),r=t==="transform"?$le:A8;return this.attrTween(n,typeof e=="function"?(t.local?fce:dce)(t,r,xP(this,"attr."+n,e)):e==null?(t.local?lce:ace)(t):(t.local?uce:cce)(t,r,e))}function pce(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function mce(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function gce(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&mce(n,s)),t}return i._value=e,i}function yce(n,e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&pce(n,s)),t}return i._value=e,i}function vce(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=oT(n);return this.tween(t,(r.local?gce:yce)(r,e))}function _ce(n,e){return function(){_P(this,n).delay=+e.apply(this,arguments)}}function xce(n,e){return e=+e,function(){_P(this,n).delay=e}}function bce(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?_ce:xce)(e,n)):nu(this.node(),e).delay}function wce(n,e){return function(){$u(this,n).duration=+e.apply(this,arguments)}}function Sce(n,e){return e=+e,function(){$u(this,n).duration=e}}function Ece(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?wce:Sce)(e,n)):nu(this.node(),e).duration}function Tce(n,e){if(typeof e!="function")throw new Error;return function(){$u(this,n).ease=e}}function Mce(n){var e=this._id;return arguments.length?this.each(Tce(e,n)):nu(this.node(),e).ease}function Ice(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;$u(this,n).ease=t}}function Ace(n){if(typeof n!="function")throw new Error;return this.each(Ice(this._id,n))}function Cce(n){typeof n!="function"&&(n=s8(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&n.call(l,l.__data__,u,s)&&a.push(l);return new nf(r,this._parents,this._name,this._id)}function Rce(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],u=t[a],c=l.length,d=o[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(d[p]=h);for(;a<r;++a)o[a]=e[a];return new nf(o,this._parents,this._name,this._id)}function Nce(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Pce(n,e,t){var r,i,s=Nce(e)?_P:$u;return function(){var o=s(this,n),a=o.on;a!==r&&(i=(r=a).copy()).on(e,t),o.on=i}}function kce(n,e){var t=this._id;return arguments.length<2?nu(this.node(),t).on.on(n):this.each(Pce(t,n,e))}function Oce(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function Lce(){return this.on("end.remove",Oce(this._id))}function Dce(n){var e=this._name,t=this._id;typeof n!="function"&&(n=mP(n));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=n.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,lT(u[h],e,t,h,u,nu(c,t)));return new nf(s,this._parents,e,t)}function Fce(n){var e=this._name,t=this._id;typeof n!="function"&&(n=i8(n));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=n.call(c,c.__data__,d,l),p,g=nu(c,t),x=0,b=h.length;x<b;++x)(p=h[x])&&lT(p,e,t,x,h,g);s.push(h),o.push(c)}return new nf(s,o,e,t)}var qce=tb.prototype.constructor;function jce(){return new qce(this._groups,this._parents)}function Bce(n,e){var t,r,i;return function(){var s=tv(this,n),o=(this.style.removeProperty(n),tv(this,n));return s===o?null:s===t&&o===r?i:i=e(t=s,r=o)}}function C8(n){return function(){this.style.removeProperty(n)}}function Uce(n,e,t){var r,i=t+"",s;return function(){var o=tv(this,n);return o===i?null:o===r?s:s=e(r=o,t)}}function zce(n,e,t){var r,i,s;return function(){var o=tv(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),tv(this,n))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function Vce(n,e){var t,r,i,s="style."+e,o="end."+s,a;return function(){var l=$u(this,n),u=l.on,c=l.value[s]==null?a||(a=C8(e)):void 0;(u!==t||i!==c)&&(r=(t=u).copy()).on(o,i=c),l.on=r}}function Wce(n,e,t){var r=(n+="")=="transform"?Wle:A8;return e==null?this.styleTween(n,Bce(n,r)).on("end.style."+n,C8(n)):typeof e=="function"?this.styleTween(n,zce(n,r,xP(this,"style."+n,e))).each(Vce(this._id,n)):this.styleTween(n,Uce(n,r,e),t).on("end.style."+n,null)}function $ce(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function Hce(n,e,t){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&$ce(n,o,t)),r}return s._value=e,s}function Gce(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hce(n,e,t??""))}function Xce(n){return function(){this.textContent=n}}function Kce(n){return function(){var e=n(this);this.textContent=e??""}}function Qce(n){return this.tween("text",typeof n=="function"?Kce(xP(this,"text",n)):Xce(n==null?"":n+""))}function Yce(n){return function(e){this.textContent=n.call(this,e)}}function Jce(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&Yce(i)),e}return r._value=n,r}function Zce(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,Jce(n))}function eue(){for(var n=this._name,e=this._id,t=R8(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=nu(l,e);lT(l,n,t,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new nf(r,this._parents,n,t)}function tue(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};t.each(function(){var u=$u(this,r),c=u.on;c!==n&&(e=(n=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&s()})}var nue=0;function nf(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function R8(){return++nue}var Md=tb.prototype;nf.prototype={constructor:nf,select:Dce,selectAll:Fce,selectChild:Md.selectChild,selectChildren:Md.selectChildren,filter:Cce,merge:Rce,selection:jce,transition:eue,call:Md.call,nodes:Md.nodes,node:Md.node,size:Md.size,empty:Md.empty,each:Md.each,on:kce,attr:hce,attrTween:vce,style:Wce,styleTween:Gce,text:Qce,textTween:Zce,remove:Lce,tween:oce,delay:bce,duration:Ece,ease:Mce,easeVarying:Ace,end:tue,[Symbol.iterator]:Md[Symbol.iterator]};function rue(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var iue={time:null,delay:0,duration:250,ease:rue};function sue(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function oue(n){var e,t;n instanceof nf?(e=n._id,n=n._name):(e=R8(),(t=iue).time=vP(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&lT(l,n,e,u,o,t||sue(l,e));return new nf(r,this._parents,n,e)}tb.prototype.interrupt=rce;tb.prototype.transition=oue;const Ow=n=>()=>n;function aue(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ud(n,e,t){this.k=n,this.x=e,this.y=t}Ud.prototype={constructor:Ud,scale:function(n){return n===1?this:new Ud(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Ud(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cT=new Ud(1,0,0);N8.prototype=Ud.prototype;function N8(n){for(;!n.__zoom;)if(!(n=n.parentNode))return cT;return n.__zoom}function cA(n){n.stopImmediatePropagation()}function T_(n){n.preventDefault(),n.stopImmediatePropagation()}function lue(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function cue(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function G4(){return this.__zoom||cT}function uue(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function due(){return navigator.maxTouchPoints||"ontouchstart"in this}function fue(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function P8(){var n=lue,e=cue,t=fue,r=uue,i=due,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Kle,u=sT("start","zoom","end"),c,d,h,p=500,g=150,x=0,b=10;function y(W){W.property("__zoom",G4).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(W,Q,X,re){var G=W.selection?W.selection():W;G.property("__zoom",G4),W!==G?N(W,Q,X,re):G.interrupt().each(function(){k(this,arguments).event(re).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},y.scaleBy=function(W,Q,X,re){y.scaleTo(W,function(){var G=this.__zoom.k,Y=typeof Q=="function"?Q.apply(this,arguments):Q;return G*Y},X,re)},y.scaleTo=function(W,Q,X,re){y.transform(W,function(){var G=e.apply(this,arguments),Y=this.__zoom,te=X==null?I(G):typeof X=="function"?X.apply(this,arguments):X,Z=Y.invert(te),fe=typeof Q=="function"?Q.apply(this,arguments):Q;return t(T(E(Y,fe),te,Z),G,o)},X,re)},y.translateBy=function(W,Q,X,re){y.transform(W,function(){return t(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof X=="function"?X.apply(this,arguments):X),e.apply(this,arguments),o)},null,re)},y.translateTo=function(W,Q,X,re,G){y.transform(W,function(){var Y=e.apply(this,arguments),te=this.__zoom,Z=re==null?I(Y):typeof re=="function"?re.apply(this,arguments):re;return t(cT.translate(Z[0],Z[1]).scale(te.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof X=="function"?-X.apply(this,arguments):-X),Y,o)},re,G)};function E(W,Q){return Q=Math.max(s[0],Math.min(s[1],Q)),Q===W.k?W:new Ud(Q,W.x,W.y)}function T(W,Q,X){var re=Q[0]-X[0]*W.k,G=Q[1]-X[1]*W.k;return re===W.x&&G===W.y?W:new Ud(W.k,re,G)}function I(W){return[(+W[0][0]+ +W[1][0])/2,(+W[0][1]+ +W[1][1])/2]}function N(W,Q,X,re){W.on("start.zoom",function(){k(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(re).end()}).tween("zoom",function(){var G=this,Y=arguments,te=k(G,Y).event(re),Z=e.apply(G,Y),fe=X==null?I(Z):typeof X=="function"?X.apply(G,Y):X,ge=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),ce=G.__zoom,ye=typeof Q=="function"?Q.apply(G,Y):Q,be=l(ce.invert(fe).concat(ge/ce.k),ye.invert(fe).concat(ge/ye.k));return function(Ee){if(Ee===1)Ee=ye;else{var Me=be(Ee),qe=ge/Me[2];Ee=new Ud(qe,fe[0]-Me[0]*qe,fe[1]-Me[1]*qe)}te.zoom(null,Ee)}})}function k(W,Q,X){return!X&&W.__zooming||new q(W,Q)}function q(W,Q){this.that=W,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=e.apply(W,Q),this.taps=0}q.prototype={event:function(W){return W&&(this.sourceEvent=W),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(W,Q){return this.mouse&&W!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&W!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&W!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(W){var Q=Pl(this.that).datum();u.call(W,this.that,new aue(W,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),Q)}};function L(W,...Q){if(!n.apply(this,arguments))return;var X=k(this,Q).event(W),re=this.__zoom,G=Math.max(s[0],Math.min(s[1],re.k*Math.pow(2,r.apply(this,arguments)))),Y=Fc(W);if(X.wheel)(X.mouse[0][0]!==Y[0]||X.mouse[0][1]!==Y[1])&&(X.mouse[1]=re.invert(X.mouse[0]=Y)),clearTimeout(X.wheel);else{if(re.k===G)return;X.mouse=[Y,re.invert(Y)],rS(this),X.start()}T_(W),X.wheel=setTimeout(te,g),X.zoom("mouse",t(T(E(re,G),X.mouse[0],X.mouse[1]),X.extent,o));function te(){X.wheel=null,X.end()}}function R(W,...Q){if(h||!n.apply(this,arguments))return;var X=W.currentTarget,re=k(this,Q,!0).event(W),G=Pl(W.view).on("mousemove.zoom",fe,!0).on("mouseup.zoom",ge,!0),Y=Fc(W,X),te=W.clientX,Z=W.clientY;m8(W.view),cA(W),re.mouse=[Y,this.__zoom.invert(Y)],rS(this),re.start();function fe(ce){if(T_(ce),!re.moved){var ye=ce.clientX-te,be=ce.clientY-Z;re.moved=ye*ye+be*be>x}re.event(ce).zoom("mouse",t(T(re.that.__zoom,re.mouse[0]=Fc(ce,X),re.mouse[1]),re.extent,o))}function ge(ce){G.on("mousemove.zoom mouseup.zoom",null),g8(ce.view,re.moved),T_(ce),re.event(ce).end()}}function P(W,...Q){if(n.apply(this,arguments)){var X=this.__zoom,re=Fc(W.changedTouches?W.changedTouches[0]:W,this),G=X.invert(re),Y=X.k*(W.shiftKey?.5:2),te=t(T(E(X,Y),re,G),e.apply(this,Q),o);T_(W),a>0?Pl(this).transition().duration(a).call(N,te,re,W):Pl(this).call(y.transform,te,re,W)}}function F(W,...Q){if(n.apply(this,arguments)){var X=W.touches,re=X.length,G=k(this,Q,W.changedTouches.length===re).event(W),Y,te,Z,fe;for(cA(W),te=0;te<re;++te)Z=X[te],fe=Fc(Z,this),fe=[fe,this.__zoom.invert(fe),Z.identifier],G.touch0?!G.touch1&&G.touch0[2]!==fe[2]&&(G.touch1=fe,G.taps=0):(G.touch0=fe,Y=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),Y&&(G.taps<2&&(d=fe[0],c=setTimeout(function(){c=null},p)),rS(this),G.start())}}function z(W,...Q){if(this.__zooming){var X=k(this,Q).event(W),re=W.changedTouches,G=re.length,Y,te,Z,fe;for(T_(W),Y=0;Y<G;++Y)te=re[Y],Z=Fc(te,this),X.touch0&&X.touch0[2]===te.identifier?X.touch0[0]=Z:X.touch1&&X.touch1[2]===te.identifier&&(X.touch1[0]=Z);if(te=X.that.__zoom,X.touch1){var ge=X.touch0[0],ce=X.touch0[1],ye=X.touch1[0],be=X.touch1[1],Ee=(Ee=ye[0]-ge[0])*Ee+(Ee=ye[1]-ge[1])*Ee,Me=(Me=be[0]-ce[0])*Me+(Me=be[1]-ce[1])*Me;te=E(te,Math.sqrt(Ee/Me)),Z=[(ge[0]+ye[0])/2,(ge[1]+ye[1])/2],fe=[(ce[0]+be[0])/2,(ce[1]+be[1])/2]}else if(X.touch0)Z=X.touch0[0],fe=X.touch0[1];else return;X.zoom("touch",t(T(te,Z,fe),X.extent,o))}}function V(W,...Q){if(this.__zooming){var X=k(this,Q).event(W),re=W.changedTouches,G=re.length,Y,te;for(cA(W),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),Y=0;Y<G;++Y)te=re[Y],X.touch0&&X.touch0[2]===te.identifier?delete X.touch0:X.touch1&&X.touch1[2]===te.identifier&&delete X.touch1;if(X.touch1&&!X.touch0&&(X.touch0=X.touch1,delete X.touch1),X.touch0)X.touch0[1]=this.__zoom.invert(X.touch0[0]);else if(X.end(),X.taps===2&&(te=Fc(te,this),Math.hypot(d[0]-te[0],d[1]-te[1])<b)){var Z=Pl(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return y.wheelDelta=function(W){return arguments.length?(r=typeof W=="function"?W:Ow(+W),y):r},y.filter=function(W){return arguments.length?(n=typeof W=="function"?W:Ow(!!W),y):n},y.touchable=function(W){return arguments.length?(i=typeof W=="function"?W:Ow(!!W),y):i},y.extent=function(W){return arguments.length?(e=typeof W=="function"?W:Ow([[+W[0][0],+W[0][1]],[+W[1][0],+W[1][1]]]),y):e},y.scaleExtent=function(W){return arguments.length?(s[0]=+W[0],s[1]=+W[1],y):[s[0],s[1]]},y.translateExtent=function(W){return arguments.length?(o[0][0]=+W[0][0],o[1][0]=+W[1][0],o[0][1]=+W[0][1],o[1][1]=+W[1][1],y):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},y.constrain=function(W){return arguments.length?(t=W,y):t},y.duration=function(W){return arguments.length?(a=+W,y):a},y.interpolate=function(W){return arguments.length?(l=W,y):l},y.on=function(){var W=u.on.apply(u,arguments);return W===u?y:W},y.clickDistance=function(W){return arguments.length?(x=(W=+W)*W,y):Math.sqrt(x)},y.tapDistance=function(W){return arguments.length?(b=+W,y):b},y}const lf={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:n=>`Node type "${n}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:n=>`The old edge with id=${n} does not exist.`,error009:n=>`Marker type "${n}" doesn't exist.`,error008:(n,{id:e,sourceHandle:t,targetHandle:r})=>`Couldn't create edge for ${n} handle id: "${n==="source"?t:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:n=>`Edge type "${n}" not found. Using fallback type "default".`,error012:n=>`Node with id "${n}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(n="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${n}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},c0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],k8=["Enter"," ","Escape"];var rv;(function(n){n.Strict="strict",n.Loose="loose"})(rv||(rv={}));var cm;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(cm||(cm={}));var u0;(function(n){n.Partial="partial",n.Full="full"})(u0||(u0={}));const O8={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var lh;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(lh||(lh={}));var AE;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(AE||(AE={}));var er;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(er||(er={}));const X4={[er.Left]:er.Right,[er.Right]:er.Left,[er.Top]:er.Bottom,[er.Bottom]:er.Top};function L8(n){return n===null?null:n?"valid":"invalid"}const D8=n=>"id"in n&&"source"in n&&"target"in n,hue=n=>"id"in n&&"position"in n&&!("source"in n)&&!("target"in n),bP=n=>"id"in n&&"internals"in n&&!("source"in n)&&!("target"in n),rb=(n,e=[0,0])=>{const{width:t,height:r}=cf(n),i=n.origin??e,s=t*i[0],o=r*i[1];return{x:n.position.x-s,y:n.position.y-o}},pue=(n,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const t=n.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):bP(i)?i:e.nodeLookup.get(i.id));const a=o?CE(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return uT(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dT(t)},ib=(n,e={})=>{if(n.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=CE(r);t=uT(t,i)}}),dT(t)},F8=(n,e,[t,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...sb(e,[t,r,i]),width:e.width/i,height:e.height/i},l=[];for(const u of n.values()){const{measured:c,selectable:d=!0,hidden:h=!1}=u;if(o&&!d||h)continue;const p=c.width??u.width??u.initialWidth??null,g=c.height??u.height??u.initialHeight??null,x=d0(a,sv(u)),b=(p??0)*(g??0),y=s&&x>0;(!u.internals.handleBounds||y||x>=b||u.dragging)&&l.push(u)}return l},mue=(n,e)=>{const t=new Set;return n.forEach(r=>{t.add(r.id)}),e.filter(r=>t.has(r.source)||t.has(r.target))};function MR(n,e){const t=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return n.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&t.set(i.id,i)}),t}async function IR({nodes:n,width:e,height:t,panZoom:r,minZoom:i,maxZoom:s},o){if(n.size===0)return Promise.resolve(!1);const a=ib(n),l=wP(a,e,t,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(l,{duration:o?.duration}),Promise.resolve(!0)}function q8({nodeId:n,nextPosition:e,nodeLookup:t,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=t.get(n),a=o.parentId?t.get(o.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=o.origin??r;let d=i;if(o.extent==="parent"&&!o.expandParent)if(!a)s?.("005",lf.error005());else{const p=a.measured.width,g=a.measured.height;p&&g&&(d=[[l,u],[l+p,u+g]])}else a&&ov(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+u],[o.extent[1][0]+l,o.extent[1][1]+u]]);const h=ov(d)?Im(e,d,o.measured):e;return{position:{x:h.x-l+o.measured.width*c[0],y:h.y-u+o.measured.height*c[1]},positionAbsolute:h}}async function gue({nodesToRemove:n=[],edgesToRemove:e=[],nodes:t,edges:r,onBeforeDelete:i}){const s=new Set(n.map(h=>h.id)),o=[];for(const h of t){if(h.deletable===!1)continue;const p=s.has(h.id),g=!p&&h.parentId&&o.find(x=>x.id===h.parentId);(p||g)&&o.push(h)}const a=new Set(e.map(h=>h.id)),l=r.filter(h=>h.deletable!==!1),c=mue(o,l);for(const h of l)a.has(h.id)&&!c.find(g=>g.id===h.id)&&c.push(h);if(!i)return{edges:c,nodes:o};const d=await i({nodes:o,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:o}:{edges:[],nodes:[]}:d}const iv=(n,e=0,t=1)=>Math.min(Math.max(n,e),t),Im=(n={x:0,y:0},e,t)=>({x:iv(n.x,e[0][0],e[1][0]-(t?.width??0)),y:iv(n.y,e[0][1],e[1][1]-(t?.height??0))});function j8(n,e,t){const{width:r,height:i}=cf(t),{x:s,y:o}=t.internals.positionAbsolute;return Im(n,[[s,o],[s+r,o+i]],e)}const K4=(n,e,t)=>n<e?iv(Math.abs(n-e),1,e)/e:n>t?-iv(Math.abs(n-t),1,e)/e:0,B8=(n,e,t=15,r=40)=>{const i=K4(n.x,r,e.width-r)*t,s=K4(n.y,r,e.height-r)*t;return[i,s]},uT=(n,e)=>({x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x2,e.x2),y2:Math.max(n.y2,e.y2)}),AR=({x:n,y:e,width:t,height:r})=>({x:n,y:e,x2:n+t,y2:e+r}),dT=({x:n,y:e,x2:t,y2:r})=>({x:n,y:e,width:t-n,height:r-e}),sv=(n,e=[0,0])=>{const{x:t,y:r}=bP(n)?n.internals.positionAbsolute:rb(n,e);return{x:t,y:r,width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}},CE=(n,e=[0,0])=>{const{x:t,y:r}=bP(n)?n.internals.positionAbsolute:rb(n,e);return{x:t,y:r,x2:t+(n.measured?.width??n.width??n.initialWidth??0),y2:r+(n.measured?.height??n.height??n.initialHeight??0)}},U8=(n,e)=>dT(uT(AR(n),AR(e))),d0=(n,e)=>{const t=Math.max(0,Math.min(n.x+n.width,e.x+e.width)-Math.max(n.x,e.x)),r=Math.max(0,Math.min(n.y+n.height,e.y+e.height)-Math.max(n.y,e.y));return Math.ceil(t*r)},Q4=n=>$c(n.width)&&$c(n.height)&&$c(n.x)&&$c(n.y),$c=n=>!isNaN(n)&&isFinite(n),yue=(n,e)=>{},fT=(n,e=[1,1])=>({x:e[0]*Math.round(n.x/e[0]),y:e[1]*Math.round(n.y/e[1])}),sb=({x:n,y:e},[t,r,i],s=!1,o=[1,1])=>{const a={x:(n-t)/i,y:(e-r)/i};return s?fT(a,o):a},z8=({x:n,y:e},[t,r,i])=>({x:n*i+t,y:e*i+r}),wP=(n,e,t,r,i,s)=>{const o=e/(n.width*(1+s)),a=t/(n.height*(1+s)),l=Math.min(o,a),u=iv(l,r,i),c=n.x+n.width/2,d=n.y+n.height/2,h=e/2-c*u,p=t/2-d*u;return{x:h,y:p,zoom:u}},RE=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ov(n){return n!==void 0&&n!=="parent"}function cf(n){return{width:n.measured?.width??n.width??n.initialWidth??0,height:n.measured?.height??n.height??n.initialHeight??0}}function V8(n){return(n.measured?.width??n.width??n.initialWidth)!==void 0&&(n.measured?.height??n.height??n.initialHeight)!==void 0}function W8(n,e={width:0,height:0},t,r,i){const s={...n},o=r.get(t);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*a[1]}return s}function Y4(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function vx(n,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:r,containerBounds:i}){const{x:s,y:o}=$d(n),a=sb({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:l,y:u}=t?fT(a,e):a;return{xSnapped:l,ySnapped:u,...a}}const hT=n=>({width:n.offsetWidth,height:n.offsetHeight}),$8=n=>n?.getRootNode?.()||window?.document,vue=["INPUT","SELECT","TEXTAREA"];function CR(n){const e=n.composedPath?.()?.[0]||n.target;return e?.nodeType!==1?!1:vue.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const H8=n=>"clientX"in n,$d=(n,e)=>{const t=H8(n),r=t?n.clientX:n.touches?.[0].clientX,i=t?n.clientY:n.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},J4=(n,e,t,r,i)=>{const s=e.querySelectorAll(`.${n}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:n,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-t.left)/r,y:(a.top-t.top)/r,...hT(o)}})};function G8({sourceX:n,sourceY:e,targetX:t,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const l=n*.125+i*.375+o*.375+t*.125,u=e*.125+s*.375+a*.375+r*.125,c=Math.abs(l-n),d=Math.abs(u-e);return[l,u,c,d]}function Lw(n,e){return n>=0?.5*n:e*25*Math.sqrt(-n)}function Z4({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}){switch(n){case er.Left:return[e-Lw(e-r,s),t];case er.Right:return[e+Lw(r-e,s),t];case er.Top:return[e,t-Lw(t-i,s)];case er.Bottom:return[e,t+Lw(i-t,s)]}}function SP({sourceX:n,sourceY:e,sourcePosition:t=er.Bottom,targetX:r,targetY:i,targetPosition:s=er.Top,curvature:o=.25}){const[a,l]=Z4({pos:t,x1:n,y1:e,x2:r,y2:i,c:o}),[u,c]=Z4({pos:s,x1:r,y1:i,x2:n,y2:e,c:o}),[d,h,p,g]=G8({sourceX:n,sourceY:e,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${n},${e} C${a},${l} ${u},${c} ${r},${i}`,d,h,p,g]}function X8({sourceX:n,sourceY:e,targetX:t,targetY:r}){const i=Math.abs(t-n)/2,s=t<n?t+i:t-i,o=Math.abs(r-e)/2,a=r<e?r+o:r-o;return[s,a,i,o]}function _ue({sourceNode:n,targetNode:e,selected:t=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=t||e.selected||n.selected,o=Math.max(n.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function xue({sourceNode:n,targetNode:e,width:t,height:r,transform:i}){const s=uT(CE(n),CE(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:t/i[2],height:r/i[2]};return d0(o,dT(s))>0}const bue=({source:n,sourceHandle:e,target:t,targetHandle:r})=>`xy-edge__${n}${e||""}-${t}${r||""}`,wue=(n,e)=>e.some(t=>t.source===n.source&&t.target===n.target&&(t.sourceHandle===n.sourceHandle||!t.sourceHandle&&!n.sourceHandle)&&(t.targetHandle===n.targetHandle||!t.targetHandle&&!n.targetHandle)),Sue=(n,e)=>{if(!n.source||!n.target)return e;let t;return D8(n)?t={...n}:t={...n,id:bue(n)},wue(t,e)?e:(t.sourceHandle===null&&delete t.sourceHandle,t.targetHandle===null&&delete t.targetHandle,e.concat(t))};function K8({sourceX:n,sourceY:e,targetX:t,targetY:r}){const[i,s,o,a]=X8({sourceX:n,sourceY:e,targetX:t,targetY:r});return[`M ${n},${e}L ${t},${r}`,i,s,o,a]}const eq={[er.Left]:{x:-1,y:0},[er.Right]:{x:1,y:0},[er.Top]:{x:0,y:-1},[er.Bottom]:{x:0,y:1}},Eue=({source:n,sourcePosition:e=er.Bottom,target:t})=>e===er.Left||e===er.Right?n.x<t.x?{x:1,y:0}:{x:-1,y:0}:n.y<t.y?{x:0,y:1}:{x:0,y:-1},tq=(n,e)=>Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));function Tue({source:n,sourcePosition:e=er.Bottom,target:t,targetPosition:r=er.Top,center:i,offset:s}){const o=eq[e],a=eq[r],l={x:n.x+o.x*s,y:n.y+o.y*s},u={x:t.x+a.x*s,y:t.y+a.y*s},c=Eue({source:l,sourcePosition:e,target:u}),d=c.x!==0?"x":"y",h=c[d];let p=[],g,x;const b={x:0,y:0},y={x:0,y:0},[E,T,I,N]=X8({sourceX:n.x,sourceY:n.y,targetX:t.x,targetY:t.y});if(o[d]*a[d]===-1){g=i.x??E,x=i.y??T;const q=[{x:g,y:l.y},{x:g,y:u.y}],L=[{x:l.x,y:x},{x:u.x,y:x}];o[d]===h?p=d==="x"?q:L:p=d==="x"?L:q}else{const q=[{x:l.x,y:u.y}],L=[{x:u.x,y:l.y}];if(d==="x"?p=o.x===h?L:q:p=o.y===h?q:L,e===r){const V=Math.abs(n[d]-t[d]);if(V<=s){const W=Math.min(s-1,s-V);o[d]===h?b[d]=(l[d]>n[d]?-1:1)*W:y[d]=(u[d]>t[d]?-1:1)*W}}if(e!==r){const V=d==="x"?"y":"x",W=o[d]===a[V],Q=l[V]>u[V],X=l[V]<u[V];(o[d]===1&&(!W&&Q||W&&X)||o[d]!==1&&(!W&&X||W&&Q))&&(p=d==="x"?q:L)}const R={x:l.x+b.x,y:l.y+b.y},P={x:u.x+y.x,y:u.y+y.y},F=Math.max(Math.abs(R.x-p[0].x),Math.abs(P.x-p[0].x)),z=Math.max(Math.abs(R.y-p[0].y),Math.abs(P.y-p[0].y));F>=z?(g=(R.x+P.x)/2,x=p[0].y):(g=p[0].x,x=(R.y+P.y)/2)}return[[n,{x:l.x+b.x,y:l.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},t],g,x,I,N]}function Mue(n,e,t,r){const i=Math.min(tq(n,e)/2,tq(e,t)/2,r),{x:s,y:o}=e;if(n.x===s&&s===t.x||n.y===o&&o===t.y)return`L${s} ${o}`;if(n.y===o){const u=n.x<t.x?-1:1,c=n.y<t.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*c}`}const a=n.x<t.x?1:-1,l=n.y<t.y?-1:1;return`L ${s},${o+i*l}Q ${s},${o} ${s+i*a},${o}`}function RR({sourceX:n,sourceY:e,sourcePosition:t=er.Bottom,targetX:r,targetY:i,targetPosition:s=er.Top,borderRadius:o=5,centerX:a,centerY:l,offset:u=20}){const[c,d,h,p,g]=Tue({source:{x:n,y:e},sourcePosition:t,target:{x:r,y:i},targetPosition:s,center:{x:a,y:l},offset:u});return[c.reduce((b,y,E)=>{let T="";return E>0&&E<c.length-1?T=Mue(c[E-1],y,c[E+1],o):T=`${E===0?"M":"L"}${y.x} ${y.y}`,b+=T,b},""),d,h,p,g]}function nq(n){return n&&!!(n.internals.handleBounds||n.handles?.length)&&!!(n.measured.width||n.width||n.initialWidth)}function Iue(n){const{sourceNode:e,targetNode:t}=n;if(!nq(e)||!nq(t))return null;const r=e.internals.handleBounds||rq(e.handles),i=t.internals.handleBounds||rq(t.handles),s=iq(r?.source??[],n.sourceHandle),o=iq(n.connectionMode===rv.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),n.targetHandle);if(!s||!o)return n.onError?.("008",lf.error008(s?"target":"source",{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const a=s?.position||er.Bottom,l=o?.position||er.Top,u=f0(e,s,a),c=f0(t,o,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function rq(n){if(!n)return null;const e=[],t=[];for(const r of n)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&t.push(r);return{source:e,target:t}}function f0(n,e,t=er.Left,r=!1){const i=(e?.x??0)+n.internals.positionAbsolute.x,s=(e?.y??0)+n.internals.positionAbsolute.y,{width:o,height:a}=e??cf(n);if(r)return{x:i+o/2,y:s+a/2};switch(e?.position??t){case er.Top:return{x:i+o/2,y:s};case er.Right:return{x:i+o,y:s+a/2};case er.Bottom:return{x:i+o/2,y:s+a};case er.Left:return{x:i,y:s+a/2}}}function iq(n,e){return n&&(e?n.find(t=>t.id===e):n[0])||null}function NR(n,e){return n?typeof n=="string"?n:`${e?`${e}__`:""}${Object.keys(n).sort().map(r=>`${r}=${n[r]}`).join("&")}`:""}function Aue(n,{id:e,defaultColor:t,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return n.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const u=NR(l,e);s.has(u)||(o.push({id:u,color:l.color||t,...l}),s.add(u))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const EP={nodeOrigin:[0,0],nodeExtent:c0,elevateNodesOnSelect:!0,defaults:{}},Cue={...EP,checkEquality:!0};function TP(n,e){const t={...n};for(const r in e)e[r]!==void 0&&(t[r]=e[r]);return t}function Rue(n,e,t){const r=TP(EP,t);for(const i of n.values())if(i.parentId)MP(i,n,e,r);else{const s=rb(i,r.nodeOrigin),o=ov(i.extent)?i.extent:r.nodeExtent,a=Im(s,o,cf(i));i.internals.positionAbsolute=a}}function PR(n,e,t,r){const i=TP(Cue,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const a of n){let l=s.get(a.id);if(i.checkEquality&&a===l?.internals.userNode)e.set(a.id,l);else{const u=rb(a,i.nodeOrigin),c=ov(a.extent)?a.extent:i.nodeExtent,d=Im(u,c,cf(a));l={...i.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:d,handleBounds:a.measured?l?.internals.handleBounds:void 0,z:Q8(a,o),userNode:a}},e.set(a.id,l)}a.parentId&&MP(l,e,t,r)}}function Nue(n,e){if(!n.parentId)return;const t=e.get(n.parentId);t?t.set(n.id,n):e.set(n.parentId,new Map([[n.id,n]]))}function MP(n,e,t,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=TP(EP,r),a=n.parentId,l=e.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Nue(n,t);const u=i?1e3:0,{x:c,y:d,z:h}=Pue(n,l,s,o,u),{positionAbsolute:p}=n.internals,g=c!==p.x||d!==p.y;(g||h!==n.internals.z)&&e.set(n.id,{...n,internals:{...n.internals,positionAbsolute:g?{x:c,y:d}:p,z:h}})}function Q8(n,e){return($c(n.zIndex)?n.zIndex:0)+(n.selected?e:0)}function Pue(n,e,t,r,i){const{x:s,y:o}=e.internals.positionAbsolute,a=cf(n),l=rb(n,t),u=ov(n.extent)?Im(l,n.extent,a):l;let c=Im({x:s+u.x,y:o+u.y},r,a);n.extent==="parent"&&(c=j8(c,a,e));const d=Q8(n,i),h=e.internals.z??0;return{x:c.x,y:c.y,z:h>d?h:d}}function IP(n,e,t,r=[0,0]){const i=[],s=new Map;for(const o of n){const a=e.get(o.parentId);if(!a)continue;const l=s.get(o.parentId)?.expandedRect??sv(a),u=U8(l,o.rect);s.set(o.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:o,parent:a},l)=>{const u=a.internals.positionAbsolute,c=cf(a),d=a.origin??r,h=o.x<u.x?Math.round(Math.abs(u.x-o.x)):0,p=o.y<u.y?Math.round(Math.abs(u.y-o.y)):0,g=Math.max(c.width,Math.round(o.width)),x=Math.max(c.height,Math.round(o.height)),b=(g-c.width)*d[0],y=(x-c.height)*d[1];(h>0||p>0||b||y)&&(i.push({id:l,type:"position",position:{x:a.position.x-h+b,y:a.position.y-p+y}}),t.get(l)?.forEach(E=>{n.some(T=>T.id===E.id)||i.push({id:E.id,type:"position",position:{x:E.position.x+h,y:E.position.y+p}})})),(c.width<o.width||c.height<o.height||h||p)&&i.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:g+(h?d[0]*h-b:0),height:x+(p?d[1]*p-y:0)}})}),i}function kue(n,e,t,r,i,s){const o=r?.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const h of n.values()){const p=e.get(h.id);if(!p)continue;if(p.hidden){e.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),a=!0;continue}const g=hT(h.nodeElement),x=p.measured.width!==g.width||p.measured.height!==g.height;if(!!(g.width&&g.height&&(x||!p.internals.handleBounds||h.force))){const y=h.nodeElement.getBoundingClientRect(),E=ov(p.extent)?p.extent:s;let{positionAbsolute:T}=p.internals;p.parentId&&p.extent==="parent"?T=j8(T,g,e.get(p.parentId)):E&&(T=Im(T,E,g));const I={...p,measured:g,internals:{...p.internals,positionAbsolute:T,handleBounds:{source:J4("source",h.nodeElement,y,c,p.id),target:J4("target",h.nodeElement,y,c,p.id)}}};e.set(p.id,I),p.parentId&&MP(I,e,t,{nodeOrigin:i}),a=!0,x&&(l.push({id:p.id,type:"dimensions",dimensions:g}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:sv(I,i)}))}}if(d.length>0){const h=IP(d,e,t,i);l.push(...h)}return{changes:l,updatedInternals:a}}async function Oue({delta:n,panZoom:e,transform:t,translateExtent:r,width:i,height:s}){if(!e||!n.x&&!n.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:t[0]+n.x,y:t[1]+n.y,zoom:t[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==t[0]||o.y!==t[1]||o.k!==t[2]);return Promise.resolve(a)}function sq(n,e,t,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(t,e)),o=`${i}-${n}`;const l=r.get(o)||new Map;if(r.set(o,l.set(t,e)),s){o=`${i}-${n}-${s}`;const u=r.get(o)||new Map;r.set(o,u.set(t,e))}}function Y8(n,e,t){n.clear(),e.clear();for(const r of t){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,l={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},u=`${i}-${o}--${s}-${a}`,c=`${s}-${a}--${i}-${o}`;sq("source",l,c,n,i,o),sq("target",l,u,n,s,a),e.set(r.id,r)}}function J8(n,e){if(!n.parentId)return!1;const t=e.get(n.parentId);return t?t.selected?!0:J8(t,e):!1}function oq(n,e,t){let r=n;do{if(r?.matches?.(e))return!0;if(r===t)return!1;r=r?.parentElement}while(r);return!1}function Lue(n,e,t,r){const i=new Map;for(const[s,o]of n)if((o.selected||o.id===r)&&(!o.parentId||!J8(o,n))&&(o.draggable||e&&typeof o.draggable>"u")){const a=n.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:t.x-a.internals.positionAbsolute.x,y:t.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function uA({nodeId:n,dragItems:e,nodeLookup:t,dragging:r=!0}){const i=[];for(const[o,a]of e){const l=t.get(o)?.internals.userNode;l&&i.push({...l,position:a.position,dragging:r})}if(!n)return[i[0],i];const s=t.get(n)?.internals.userNode;return[s?{...s,position:e.get(n)?.position||s.position,dragging:r}:i[0],i]}function Due({onNodeMouseDown:n,getStoreItems:e,onDragStart:t,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,l=!1,u={x:0,y:0},c=null,d=!1,h=null,p=!1;function g({noDragClassName:b,handleSelector:y,domNode:E,isSelectable:T,nodeId:I,nodeClickDistance:N=0}){h=Pl(E);function k({x:P,y:F},z){const{nodeLookup:V,nodeExtent:W,snapGrid:Q,snapToGrid:X,nodeOrigin:re,onNodeDrag:G,onSelectionDrag:Y,onError:te,updateNodePositions:Z}=e();s={x:P,y:F};let fe=!1,ge={x:0,y:0,x2:0,y2:0};if(a.size>1&&W){const ce=ib(a);ge=AR(ce)}for(const[ce,ye]of a){if(!V.has(ce))continue;let be={x:P-ye.distance.x,y:F-ye.distance.y};X&&(be=fT(be,Q));let Ee=[[W[0][0],W[0][1]],[W[1][0],W[1][1]]];if(a.size>1&&W&&!ye.extent){const{positionAbsolute:Ue}=ye.internals,Ye=Ue.x-ge.x+W[0][0],Ne=Ue.x+ye.measured.width-ge.x2+W[1][0],ke=Ue.y-ge.y+W[0][1],me=Ue.y+ye.measured.height-ge.y2+W[1][1];Ee=[[Ye,ke],[Ne,me]]}const{position:Me,positionAbsolute:qe}=q8({nodeId:ce,nextPosition:be,nodeLookup:V,nodeExtent:Ee,nodeOrigin:re,onError:te});fe=fe||ye.position.x!==Me.x||ye.position.y!==Me.y,ye.position=Me,ye.internals.positionAbsolute=qe}if(fe&&(Z(a,!0),z&&(r||G||!I&&Y))){const[ce,ye]=uA({nodeId:I,dragItems:a,nodeLookup:V});r?.(z,a,ce,ye),G?.(z,ce,ye),I||Y?.(z,ye)}}async function q(){if(!c)return;const{transform:P,panBy:F,autoPanSpeed:z}=e(),[V,W]=B8(u,c,z);(V!==0||W!==0)&&(s.x=(s.x??0)-V/P[2],s.y=(s.y??0)-W/P[2],await F({x:V,y:W})&&k(s,null)),o=requestAnimationFrame(q)}function L(P){const{nodeLookup:F,multiSelectionActive:z,nodesDraggable:V,transform:W,snapGrid:Q,snapToGrid:X,selectNodesOnDrag:re,onNodeDragStart:G,onSelectionDragStart:Y,unselectNodesAndEdges:te}=e();d=!0,(!re||!T)&&!z&&I&&(F.get(I)?.selected||te()),T&&re&&I&&n?.(I);const Z=vx(P.sourceEvent,{transform:W,snapGrid:Q,snapToGrid:X,containerBounds:c});if(s=Z,a=Lue(F,V,Z,I),a.size>0&&(t||G||!I&&Y)){const[fe,ge]=uA({nodeId:I,dragItems:a,nodeLookup:F});t?.(P.sourceEvent,a,fe,ge),G?.(P.sourceEvent,fe,ge),I||Y?.(P.sourceEvent,ge)}}const R=y8().clickDistance(N).on("start",P=>{const{domNode:F,nodeDragThreshold:z,transform:V,snapGrid:W,snapToGrid:Q}=e();c=F?.getBoundingClientRect()||null,p=!1,z===0&&L(P),s=vx(P.sourceEvent,{transform:V,snapGrid:W,snapToGrid:Q,containerBounds:c}),u=$d(P.sourceEvent,c)}).on("drag",P=>{const{autoPanOnNodeDrag:F,transform:z,snapGrid:V,snapToGrid:W,nodeDragThreshold:Q,nodeLookup:X}=e(),re=vx(P.sourceEvent,{transform:z,snapGrid:V,snapToGrid:W,containerBounds:c});if((P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||I&&!X.has(I))&&(p=!0),!p){if(!l&&F&&d&&(l=!0,q()),!d){const G=re.xSnapped-(s.x??0),Y=re.ySnapped-(s.y??0);Math.sqrt(G*G+Y*Y)>Q&&L(P)}(s.x!==re.xSnapped||s.y!==re.ySnapped)&&a&&d&&(u=$d(P.sourceEvent,c),k(re,P.sourceEvent))}}).on("end",P=>{if(!(!d||p)&&(l=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:F,updateNodePositions:z,onNodeDragStop:V,onSelectionDragStop:W}=e();if(z(a,!1),i||V||!I&&W){const[Q,X]=uA({nodeId:I,dragItems:a,nodeLookup:F,dragging:!1});i?.(P.sourceEvent,a,Q,X),V?.(P.sourceEvent,Q,X),I||W?.(P.sourceEvent,X)}}}).filter(P=>{const F=P.target;return!P.button&&(!b||!oq(F,`.${b}`,E))&&(!y||oq(F,y,E))});h.call(R)}function x(){h?.on(".drag",null)}return{update:g,destroy:x}}function Fue(n,e,t){const r=[],i={x:n.x-t,y:n.y-t,width:t*2,height:t*2};for(const s of e.values())d0(i,sv(s))>0&&r.push(s);return r}const que=250;function jue(n,e,t,r){let i=[],s=1/0;const o=Fue(n,t,e+que);for(const a of o){const l=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const u of l){if(r.nodeId===u.nodeId&&r.type===u.type&&r.id===u.id)continue;const{x:c,y:d}=f0(a,u,u.position,!0),h=Math.sqrt(Math.pow(c-n.x,2)+Math.pow(d-n.y,2));h>e||(h<s?(i=[{...u,x:c,y:d}],s=h):h===s&&i.push({...u,x:c,y:d}))}}if(!i.length)return null;if(i.length>1){const a=r.type==="source"?"target":"source";return i.find(l=>l.type===a)??i[0]}return i[0]}function Z8(n,e,t,r,i,s=!1){const o=r.get(n);if(!o)return null;const a=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],l=(t?a?.find(u=>u.id===t):a?.[0])??null;return l&&s?{...l,...f0(o,l,l.position,!0)}:l}function eV(n,e){return n||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Bue(n,e){let t=null;return e?t=!0:n&&!e&&(t=!1),t}const tV=()=>!0;function Uue(n,{connectionMode:e,connectionRadius:t,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:h,cancelConnection:p,onConnectStart:g,onConnect:x,onConnectEnd:b,isValidConnection:y=tV,onReconnectEnd:E,updateConnection:T,getTransform:I,getFromHandle:N,autoPanSpeed:k}){const q=$8(n.target);let L=0,R;const{x:P,y:F}=$d(n),z=q?.elementFromPoint(P,F),V=eV(s,z),W=a?.getBoundingClientRect();if(!W||!V)return;const Q=Z8(i,V,r,l,e);if(!Q)return;let X=$d(n,W),re=!1,G=null,Y=!1,te=null;function Z(){if(!c||!W)return;const[qe,Ue]=B8(X,W,k);h({x:qe,y:Ue}),L=requestAnimationFrame(Z)}const fe={...Q,nodeId:i,type:V,position:Q.position},ge=l.get(i),ye={inProgress:!0,isValid:null,from:f0(ge,fe,er.Left,!0),fromHandle:fe,fromPosition:fe.position,fromNode:ge,to:X,toHandle:null,toPosition:X4[fe.position],toNode:null};T(ye);let be=ye;g?.(n,{nodeId:i,handleId:r,handleType:V});function Ee(qe){if(!N()||!fe){Me(qe);return}const Ue=I();X=$d(qe,W),R=jue(sb(X,Ue,!1,[1,1]),t,l,fe),re||(Z(),re=!0);const Ye=nV(qe,{handle:R,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:y,doc:q,lib:u,flowId:d,nodeLookup:l});te=Ye.handleDomNode,G=Ye.connection,Y=Bue(!!R,Ye.isValid);const Ne={...be,isValid:Y,to:R&&Y?z8({x:R.x,y:R.y},Ue):X,toHandle:Ye.toHandle,toPosition:Y&&Ye.toHandle?Ye.toHandle.position:X4[fe.position],toNode:Ye.toHandle?l.get(Ye.toHandle.nodeId):null};Y&&R&&be.toHandle&&Ne.toHandle&&be.toHandle.type===Ne.toHandle.type&&be.toHandle.nodeId===Ne.toHandle.nodeId&&be.toHandle.id===Ne.toHandle.id&&be.to.x===Ne.to.x&&be.to.y===Ne.to.y||(T(Ne),be=Ne)}function Me(qe){(R||te)&&G&&Y&&x?.(G);const{inProgress:Ue,...Ye}=be,Ne={...Ye,toPosition:be.toHandle?be.toPosition:null};b?.(qe,Ne),s&&E?.(qe,Ne),p(),cancelAnimationFrame(L),re=!1,Y=!1,G=null,te=null,q.removeEventListener("mousemove",Ee),q.removeEventListener("mouseup",Me),q.removeEventListener("touchmove",Ee),q.removeEventListener("touchend",Me)}q.addEventListener("mousemove",Ee),q.addEventListener("mouseup",Me),q.addEventListener("touchmove",Ee),q.addEventListener("touchend",Me)}function nV(n,{handle:e,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:l,isValidConnection:u=tV,nodeLookup:c}){const d=s==="target",h=e?o.querySelector(`.${a}-flow__handle[data-id="${l}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:p,y:g}=$d(n),x=o.elementFromPoint(p,g),b=x?.classList.contains(`${a}-flow__handle`)?x:h,y={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const E=eV(void 0,b),T=b.getAttribute("data-nodeid"),I=b.getAttribute("data-handleid"),N=b.classList.contains("connectable"),k=b.classList.contains("connectableend");if(!T||!E)return y;const q={source:d?T:r,sourceHandle:d?I:i,target:d?r:T,targetHandle:d?i:I};y.connection=q;const R=N&&k&&(t===rv.Strict?d&&E==="source"||!d&&E==="target":T!==r||I!==i);y.isValid=R&&u(q),y.toHandle=Z8(T,E,I,c,t,!1)}return y}const kR={onPointerDown:Uue,isValid:nV};function zue({domNode:n,panZoom:e,getTransform:t,getViewScale:r}){const i=Pl(n);function s({translateExtent:a,width:l,height:u,zoomStep:c=10,pannable:d=!0,zoomable:h=!0,inversePan:p=!1}){const g=T=>{const I=t();if(T.sourceEvent.type!=="wheel"||!e)return;const N=-T.sourceEvent.deltaY*(T.sourceEvent.deltaMode===1?.05:T.sourceEvent.deltaMode?1:.002)*c,k=I[2]*Math.pow(2,N);e.scaleTo(k)};let x=[0,0];const b=T=>{(T.sourceEvent.type==="mousedown"||T.sourceEvent.type==="touchstart")&&(x=[T.sourceEvent.clientX??T.sourceEvent.touches[0].clientX,T.sourceEvent.clientY??T.sourceEvent.touches[0].clientY])},y=T=>{const I=t();if(T.sourceEvent.type!=="mousemove"&&T.sourceEvent.type!=="touchmove"||!e)return;const N=[T.sourceEvent.clientX??T.sourceEvent.touches[0].clientX,T.sourceEvent.clientY??T.sourceEvent.touches[0].clientY],k=[N[0]-x[0],N[1]-x[1]];x=N;const q=r()*Math.max(I[2],Math.log(I[2]))*(p?-1:1),L={x:I[0]-k[0]*q,y:I[1]-k[1]*q},R=[[0,0],[l,u]];e.setViewportConstrained({x:L.x,y:L.y,zoom:I[2]},R,a)},E=P8().on("start",b).on("zoom",d?y:null).on("zoom.wheel",h?g:null);i.call(E,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Fc}}const Vue=(n,e)=>n.x!==e.x||n.y!==e.y||n.zoom!==e.k,pT=n=>({x:n.x,y:n.y,zoom:n.k}),dA=({x:n,y:e,zoom:t})=>cT.translate(n,e).scale(t),yy=(n,e)=>n.target.closest(`.${e}`),rV=(n,e)=>e===2&&Array.isArray(n)&&n.includes(2),fA=(n,e=0,t=()=>{})=>{const r=typeof e=="number"&&e>0;return r||t(),r?n.transition().duration(e).on("end",t):n},iV=n=>{const e=n.ctrlKey&&RE()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*e};function Wue({zoomPanValues:n,noWheelClassName:e,d3Selection:t,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(yy(c,e))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=t.property("__zoom").k||1;if(c.ctrlKey&&o){const b=Fc(c),y=iV(c),E=d*Math.pow(2,y);r.scaleTo(t,E,b,c);return}const h=c.deltaMode===1?20:1;let p=i===cm.Vertical?0:c.deltaX*h,g=i===cm.Horizontal?0:c.deltaY*h;!RE()&&c.shiftKey&&i!==cm.Vertical&&(p=c.deltaY*h,g=0),r.translateBy(t,-(p/d)*s,-(g/d)*s,{internal:!0});const x=pT(t.property("__zoom"));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,a?.(c,x)),n.isPanScrolling&&(l?.(c,x),n.panScrollTimeout=setTimeout(()=>{u?.(c,x),n.isPanScrolling=!1},150))}}function $ue({noWheelClassName:n,preventScrolling:e,d3ZoomHandler:t}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||yy(r,n))return null;r.preventDefault(),t.call(this,r,i)}}function Hue({zoomPanValues:n,onDraggingChange:e,onPanZoomStart:t}){return r=>{if(r.sourceEvent?.internal)return;const i=pT(r.transform);n.mouseButton=r.sourceEvent?.button||0,n.isZoomingOrPanning=!0,n.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),t&&t?.(r.sourceEvent,i)}}function Gue({zoomPanValues:n,panOnDrag:e,onPaneContextMenu:t,onTransformChange:r,onPanZoom:i}){return s=>{n.usedRightMouseButton=!!(t&&rV(e,n.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,pT(s.transform))}}function Xue({zoomPanValues:n,panOnDrag:e,panOnScroll:t,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(n.isZoomingOrPanning=!1,s&&rV(e,n.mouseButton??0)&&!n.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),n.usedRightMouseButton=!1,r(!1),i&&Vue(n.prevViewport,o.transform))){const a=pT(o.transform);n.prevViewport=a,clearTimeout(n.timerId),n.timerId=setTimeout(()=>{i?.(o.sourceEvent,a)},t?150:0)}}}function Kue({zoomActivationKeyPressed:n,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:l,lib:u}){return c=>{const d=n||e,h=t&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(yy(c,`${u}-flow__node`)||yy(c,`${u}-flow__edge`)))return!0;if(!r&&!d&&!i&&!s&&!t||o||yy(c,a)&&c.type==="wheel"||yy(c,l)&&(c.type!=="wheel"||i&&c.type==="wheel"&&!n)||!t&&c.ctrlKey&&c.type==="wheel")return!1;if(!t&&c.type==="touchstart"&&c.touches?.length>1)return c.preventDefault(),!1;if(!d&&!i&&!h&&c.type==="wheel"||!r&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(r)&&!r.includes(c.button)&&c.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&p}}function Que({domNode:n,minZoom:e,maxZoom:t,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=n.getBoundingClientRect(),h=P8().clickDistance(!$c(r)||r<0?0:r).scaleExtent([e,t]).translateExtent(i),p=Pl(n).call(h);T({x:s.x,y:s.y,zoom:iv(s.zoom,e,t)},[[0,0],[d.width,d.height]],i);const g=p.on("wheel.zoom"),x=p.on("dblclick.zoom");h.wheelDelta(iV);function b(z,V){return p?new Promise(W=>{h?.transform(fA(p,V?.duration,()=>W(!0)),z)}):Promise.resolve(!1)}function y({noWheelClassName:z,noPanClassName:V,onPaneContextMenu:W,userSelectionActive:Q,panOnScroll:X,panOnDrag:re,panOnScrollMode:G,panOnScrollSpeed:Y,preventScrolling:te,zoomOnPinch:Z,zoomOnScroll:fe,zoomOnDoubleClick:ge,zoomActivationKeyPressed:ce,lib:ye,onTransformChange:be}){Q&&!c.isZoomingOrPanning&&E();const Me=X&&!ce&&!Q?Wue({zoomPanValues:c,noWheelClassName:z,d3Selection:p,d3Zoom:h,panOnScrollMode:G,panOnScrollSpeed:Y,zoomOnPinch:Z,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:l}):$ue({noWheelClassName:z,preventScrolling:te,d3ZoomHandler:g});if(p.on("wheel.zoom",Me,{passive:!1}),!Q){const Ue=Hue({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:a});h.on("start",Ue);const Ye=Gue({zoomPanValues:c,panOnDrag:re,onPaneContextMenu:!!W,onPanZoom:o,onTransformChange:be});h.on("zoom",Ye);const Ne=Xue({zoomPanValues:c,panOnDrag:re,panOnScroll:X,onPaneContextMenu:W,onPanZoomEnd:l,onDraggingChange:u});h.on("end",Ne)}const qe=Kue({zoomActivationKeyPressed:ce,panOnDrag:re,zoomOnScroll:fe,panOnScroll:X,zoomOnDoubleClick:ge,zoomOnPinch:Z,userSelectionActive:Q,noPanClassName:V,noWheelClassName:z,lib:ye});h.filter(qe),ge?p.on("dblclick.zoom",x):p.on("dblclick.zoom",null)}function E(){h.on("zoom",null)}async function T(z,V,W){const Q=dA(z),X=h?.constrain()(Q,V,W);return X&&await b(X),new Promise(re=>re(X))}async function I(z,V){const W=dA(z);return await b(W,V),new Promise(Q=>Q(W))}function N(z){if(p){const V=dA(z),W=p.property("__zoom");(W.k!==z.zoom||W.x!==z.x||W.y!==z.y)&&h?.transform(p,V,null,{sync:!0})}}function k(){const z=p?N8(p.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function q(z,V){return p?new Promise(W=>{h?.scaleTo(fA(p,V?.duration,()=>W(!0)),z)}):Promise.resolve(!1)}function L(z,V){return p?new Promise(W=>{h?.scaleBy(fA(p,V?.duration,()=>W(!0)),z)}):Promise.resolve(!1)}function R(z){h?.scaleExtent(z)}function P(z){h?.translateExtent(z)}function F(z){const V=!$c(z)||z<0?0:z;h?.clickDistance(V)}return{update:y,destroy:E,setViewport:I,setViewportConstrained:T,getViewport:k,scaleTo:q,scaleBy:L,setScaleExtent:R,setTranslateExtent:P,syncViewport:N,setClickDistance:F}}var _x;(function(n){n.Line="line",n.Handle="handle"})(_x||(_x={}));function Yue({width:n,prevWidth:e,height:t,prevHeight:r,affectsX:i,affectsY:s}){const o=n-e,a=t-r,l=[o>0?1:o<0?-1:0,a>0?1:a<0?-1:0];return o&&i&&(l[0]=l[0]*-1),a&&s&&(l[1]=l[1]*-1),l}function Jue(n){const e=n.includes("right")||n.includes("left"),t=n.includes("bottom")||n.includes("top"),r=n.includes("left"),i=n.includes("top");return{isHorizontal:e,isVertical:t,affectsX:r,affectsY:i}}function zf(n,e){return Math.max(0,e-n)}function Vf(n,e){return Math.max(0,n-e)}function Dw(n,e,t){return Math.max(0,e-n,n-t)}function aq(n,e){return n?!e:e}function Zue(n,e,t,r,i,s,o,a){let{affectsX:l,affectsY:u}=e;const{isHorizontal:c,isVertical:d}=e,h=c&&d,{xSnapped:p,ySnapped:g}=t,{minWidth:x,maxWidth:b,minHeight:y,maxHeight:E}=r,{x:T,y:I,width:N,height:k,aspectRatio:q}=n;let L=Math.floor(c?p-n.pointerX:0),R=Math.floor(d?g-n.pointerY:0);const P=N+(l?-L:L),F=k+(u?-R:R),z=-s[0]*N,V=-s[1]*k;let W=Dw(P,x,b),Q=Dw(F,y,E);if(o){let G=0,Y=0;l&&L<0?G=zf(T+L+z,o[0][0]):!l&&L>0&&(G=Vf(T+P+z,o[1][0])),u&&R<0?Y=zf(I+R+V,o[0][1]):!u&&R>0&&(Y=Vf(I+F+V,o[1][1])),W=Math.max(W,G),Q=Math.max(Q,Y)}if(a){let G=0,Y=0;l&&L>0?G=Vf(T+L,a[0][0]):!l&&L<0&&(G=zf(T+P,a[1][0])),u&&R>0?Y=Vf(I+R,a[0][1]):!u&&R<0&&(Y=zf(I+F,a[1][1])),W=Math.max(W,G),Q=Math.max(Q,Y)}if(i){if(c){const G=Dw(P/q,y,E)*q;if(W=Math.max(W,G),o){let Y=0;!l&&!u||l&&!u&&h?Y=Vf(I+V+P/q,o[1][1])*q:Y=zf(I+V+(l?L:-L)/q,o[0][1])*q,W=Math.max(W,Y)}if(a){let Y=0;!l&&!u||l&&!u&&h?Y=zf(I+P/q,a[1][1])*q:Y=Vf(I+(l?L:-L)/q,a[0][1])*q,W=Math.max(W,Y)}}if(d){const G=Dw(F*q,x,b)/q;if(Q=Math.max(Q,G),o){let Y=0;!l&&!u||u&&!l&&h?Y=Vf(T+F*q+z,o[1][0])/q:Y=zf(T+(u?R:-R)*q+z,o[0][0])/q,Q=Math.max(Q,Y)}if(a){let Y=0;!l&&!u||u&&!l&&h?Y=zf(T+F*q,a[1][0])/q:Y=Vf(T+(u?R:-R)*q,a[0][0])/q,Q=Math.max(Q,Y)}}}R=R+(R<0?Q:-Q),L=L+(L<0?W:-W),i&&(h?P>F*q?R=(aq(l,u)?-L:L)/q:L=(aq(l,u)?-R:R)*q:c?(R=L/q,u=l):(L=R*q,l=u));const X=l?T+L:T,re=u?I+R:I;return{width:N+(l?-L:L),height:k+(u?-R:R),x:s[0]*L*(l?-1:1)+X,y:s[1]*R*(u?-1:1)+re}}const sV={width:0,height:0,x:0,y:0},ede={...sV,pointerX:0,pointerY:0,aspectRatio:1};function tde(n){return[[0,0],[n.measured.width,n.measured.height]]}function nde(n,e,t){const r=e.position.x+n.position.x,i=e.position.y+n.position.y,s=n.measured.width??0,o=n.measured.height??0,a=t[0]*s,l=t[1]*o;return[[r-a,i-l],[r+s-a,i+o-l]]}function rde({domNode:n,nodeId:e,getStoreItems:t,onChange:r,onEnd:i}){const s=Pl(n);function o({controlPosition:l,boundaries:u,keepAspectRatio:c,onResizeStart:d,onResize:h,onResizeEnd:p,shouldResize:g}){let x={...sV},b={...ede};const y=Jue(l);let E,T=null,I=[],N,k,q;const L=y8().on("start",R=>{const{nodeLookup:P,transform:F,snapGrid:z,snapToGrid:V,nodeOrigin:W,paneDomNode:Q}=t();if(E=P.get(e),!E)return;T=Q?.getBoundingClientRect()??null;const{xSnapped:X,ySnapped:re}=vx(R.sourceEvent,{transform:F,snapGrid:z,snapToGrid:V,containerBounds:T});x={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},b={...x,pointerX:X,pointerY:re,aspectRatio:x.width/x.height},N=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(N=P.get(E.parentId),k=N&&E.extent==="parent"?tde(N):void 0),I=[],q=void 0;for(const[G,Y]of P)if(Y.parentId===e&&(I.push({id:G,position:{...Y.position},extent:Y.extent}),Y.extent==="parent"||Y.expandParent)){const te=nde(Y,E,Y.origin??W);q?q=[[Math.min(te[0][0],q[0][0]),Math.min(te[0][1],q[0][1])],[Math.max(te[1][0],q[1][0]),Math.max(te[1][1],q[1][1])]]:q=te}d?.(R,{...x})}).on("drag",R=>{const{transform:P,snapGrid:F,snapToGrid:z,nodeOrigin:V}=t(),W=vx(R.sourceEvent,{transform:P,snapGrid:F,snapToGrid:z,containerBounds:T}),Q=[];if(!E)return;const{x:X,y:re,width:G,height:Y}=x,te={},Z=E.origin??V,{width:fe,height:ge,x:ce,y:ye}=Zue(b,y,W,u,c,Z,k,q),be=fe!==G,Ee=ge!==Y,Me=ce!==X&&be,qe=ye!==re&&Ee;if(!Me&&!qe&&!be&&!Ee)return;if((Me||qe||Z[0]===1||Z[1]===1)&&(te.x=Me?ce:x.x,te.y=qe?ye:x.y,x.x=te.x,x.y=te.y,I.length>0)){const ke=ce-X,me=ye-re;for(const ht of I)ht.position={x:ht.position.x-ke+Z[0]*(fe-G),y:ht.position.y-me+Z[1]*(ge-Y)},Q.push(ht)}if((be||Ee)&&(te.width=be?fe:x.width,te.height=Ee?ge:x.height,x.width=te.width,x.height=te.height),N&&E.expandParent){const ke=Z[0]*(te.width??0);te.x&&te.x<ke&&(x.x=ke,b.x=b.x-(te.x-ke));const me=Z[1]*(te.height??0);te.y&&te.y<me&&(x.y=me,b.y=b.y-(te.y-me))}const Ue=Yue({width:x.width,prevWidth:G,height:x.height,prevHeight:Y,affectsX:y.affectsX,affectsY:y.affectsY}),Ye={...x,direction:Ue};g?.(R,Ye)!==!1&&(h?.(R,Ye),r(te,Q))}).on("end",R=>{p?.(R,{...x}),i?.()});s.call(L)}function a(){s.on(".drag",null)}return{update:o,destroy:a}}const ide={},lq=n=>{let e;const t=new Set,r=(c,d)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const p=e;e=d??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(g=>g(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(t.add(c),()=>t.delete(c)),destroy:()=>{(ide?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},sde=n=>n?lq(n):lq,{useDebugValue:ode}=di,{useSyncExternalStoreWithSelector:ade}=C9,lde=n=>n;function oV(n,e=lde,t){const r=ade(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return ode(r),r}const cq=(n,e)=>{const t=sde(n),r=(i,s=e)=>oV(t,i,s);return Object.assign(r,t),r},cde=(n,e)=>n?cq(n,e):cq;function xs(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[r,i]of n)if(!Object.is(i,e.get(r)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const r of n)if(!e.has(r))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const r of t)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(n[r],e[r]))return!1;return!0}const mT=ie.createContext(null),ude=mT.Provider,aV=lf.error001();function ti(n,e){const t=ie.useContext(mT);if(t===null)throw new Error(aV);return oV(t,n,e)}function is(){const n=ie.useContext(mT);if(n===null)throw new Error(aV);return ie.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const uq={display:"none"},dde={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lV="react-flow__node-desc",cV="react-flow__edge-desc",fde="react-flow__aria-live",hde=n=>n.ariaLiveMessage;function pde({rfId:n}){const e=ti(hde);return S.jsx("div",{id:`${fde}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:dde,children:e})}function mde({rfId:n,disableKeyboardA11y:e}){return S.jsxs(S.Fragment,{children:[S.jsxs("div",{id:`${lV}-${n}`,style:uq,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),S.jsx("div",{id:`${cV}-${n}`,style:uq,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&S.jsx(pde,{rfId:n})]})}const gde=n=>n.userSelectionActive?"none":"all",AP=ie.forwardRef(({position:n="top-left",children:e,className:t,style:r,...i},s)=>{const o=ti(gde),a=`${n}`.split("-");return S.jsx("div",{className:to(["react-flow__panel",t,...a]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function yde({proOptions:n,position:e="bottom-right"}){return n?.hideAttribution?null:S.jsx(AP,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:S.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const vde=n=>{const e=[],t=[];for(const[,r]of n.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of n.edgeLookup)r.selected&&t.push(r);return{selectedNodes:e,selectedEdges:t}},Fw=n=>n.id;function _de(n,e){return xs(n.selectedNodes.map(Fw),e.selectedNodes.map(Fw))&&xs(n.selectedEdges.map(Fw),e.selectedEdges.map(Fw))}function xde({onSelectionChange:n}){const e=is(),{selectedNodes:t,selectedEdges:r}=ti(vde,_de);return ie.useEffect(()=>{const i={nodes:t,edges:r};n?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[t,r,n]),null}const bde=n=>!!n.onSelectionChangeHandlers;function wde({onSelectionChange:n}){const e=ti(bde);return n||e?S.jsx(xde,{onSelectionChange:n}):null}const uV=[0,0],Sde={x:0,y:0,zoom:1},Ede=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],dq=[...Ede,"rfId"],Tde=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),fq={translateExtent:c0,nodeOrigin:uV,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Mde(n){const{setNodes:e,setEdges:t,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:a,setDefaultNodesAndEdges:l,setPaneClickDistance:u}=ti(Tde,xs),c=is();ie.useEffect(()=>(l(n.defaultNodes,n.defaultEdges),()=>{d.current=fq,a()}),[]);const d=ie.useRef(fq);return ie.useEffect(()=>{for(const h of dq){const p=n[h],g=d.current[h];p!==g&&(typeof n[h]>"u"||(h==="nodes"?e(p):h==="edges"?t(p):h==="minZoom"?r(p):h==="maxZoom"?i(p):h==="translateExtent"?s(p):h==="nodeExtent"?o(p):h==="paneClickDistance"?u(p):h==="fitView"?c.setState({fitViewOnInit:p}):h==="fitViewOptions"?c.setState({fitViewOnInitOptions:p}):c.setState({[h]:p})))}d.current=n},dq.map(h=>n[h])),null}function hq(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ide(n){const[e,t]=ie.useState(n==="system"?null:n);return ie.useEffect(()=>{if(n!=="system"){t(n);return}const r=hq(),i=()=>t(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[n]),e!==null?e:hq()?.matches?"dark":"light"}const pq=typeof document<"u"?document:null;function h0(n=null,e={target:pq,actInsideInputWithModifier:!0}){const[t,r]=ie.useState(!1),i=ie.useRef(!1),s=ie.useRef(new Set([])),[o,a]=ie.useMemo(()=>{if(n!==null){const u=(Array.isArray(n)?n:[n]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=u.reduce((d,h)=>d.concat(...h),[]);return[u,c]}return[[],[]]},[n]);return ie.useEffect(()=>{const l=e?.target||pq;if(n!==null){const u=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&CR(h))return!1;const g=gq(h.code,a);s.current.add(h[g]),mq(o,s.current,!1)&&(h.preventDefault(),r(!0))},c=h=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&CR(h))return!1;const g=gq(h.code,a);mq(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[g]),h.key==="Meta"&&s.current.clear(),i.current=!1},d=()=>{s.current.clear(),r(!1)};return l?.addEventListener("keydown",u),l?.addEventListener("keyup",c),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{l?.removeEventListener("keydown",u),l?.removeEventListener("keyup",c),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[n,r]),t}function mq(n,e,t){return n.filter(r=>t||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function gq(n,e){return e.includes(n)?"code":"key"}const Ade=()=>{const n=is();return ie.useMemo(()=>({zoomIn:e=>{const{panZoom:t}=n.getState();return t?t.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:t}=n.getState();return t?t.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,t)=>{const{panZoom:r}=n.getState();return r?r.scaleTo(e,{duration:t?.duration}):Promise.resolve(!1)},getZoom:()=>n.getState().transform[2],setViewport:async(e,t)=>{const{transform:[r,i,s],panZoom:o}=n.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:t?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,t,r]=n.getState().transform;return{x:e,y:t,zoom:r}},fitView:e=>{const{nodeLookup:t,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=n.getState();if(!s||!o)return Promise.resolve(!1);const a=MR(t,e),{width:l,height:u}=hT(o);return IR({nodes:a,width:l,height:u,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,t,r)=>{const{width:i,height:s,maxZoom:o,panZoom:a}=n.getState(),l=typeof r?.zoom<"u"?r.zoom:o,u=i/2-e*l,c=s/2-t*l;return a?(await a.setViewport({x:u,y:c,zoom:l},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,t)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:a}=n.getState(),l=wP(e,r,i,s,o,t?.padding??.1);return a?(await a.setViewport(l,{duration:t?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,t={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=n.getState();if(!s)return e;const{x:o,y:a}=s.getBoundingClientRect(),l={x:e.x-o,y:e.y-a};return sb(l,r,t.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:t,domNode:r}=n.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=z8(e,t);return{x:o.x+i,y:o.y+s}}}),[])};function dV(n,e){const t=[],r=new Map,i=[];for(const s of n)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){t.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){t.push({...o[0].item});continue}const a={...s};for(const l of o)Cde(l,a);t.push(a)}return i.length&&i.forEach(s=>{s.index!==void 0?t.splice(s.index,0,{...s.item}):t.push({...s.item})}),t}function Cde(n,e){switch(n.type){case"select":{e.selected=n.selected;break}case"position":{typeof n.position<"u"&&(e.position=n.position),typeof n.dragging<"u"&&(e.dragging=n.dragging);break}case"dimensions":{typeof n.dimensions<"u"&&(e.measured??={},e.measured.width=n.dimensions.width,e.measured.height=n.dimensions.height,n.setAttributes&&(e.width=n.dimensions.width,e.height=n.dimensions.height)),typeof n.resizing=="boolean"&&(e.resizing=n.resizing);break}}}function Rde(n,e){return dV(n,e)}function Nde(n,e){return dV(n,e)}function Up(n,e){return{id:n,type:"select",selected:e}}function vy(n,e=new Set,t=!1){const r=[];for(const[i,s]of n){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(t&&(s.selected=o),r.push(Up(s.id,o)))}return r}function yq({items:n=[],lookup:e}){const t=[],r=new Map(n.map(i=>[i.id,i]));for(const[i,s]of n.entries()){const o=e.get(s.id),a=o?.internals?.userNode??o;a!==void 0&&a!==s&&t.push({id:s.id,item:s,type:"replace"}),a===void 0&&t.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&t.push({id:i,type:"remove"});return t}function vq(n){return{id:n.id,type:"remove"}}const _q=n=>hue(n),Pde=n=>D8(n);function fV(n){return ie.forwardRef(n)}const kde=typeof window<"u"?ie.useLayoutEffect:ie.useEffect;function xq(n){const[e,t]=ie.useState(BigInt(0)),[r]=ie.useState(()=>Ode(()=>t(i=>i+BigInt(1))));return kde(()=>{const i=r.get();i.length&&(n(i),r.reset())},[e]),r}function Ode(n){let e=[];return{get:()=>e,reset:()=>{e=[]},push:t=>{e.push(t),n()}}}const hV=ie.createContext(null);function Lde({children:n}){const e=is(),t=ie.useCallback(a=>{const{nodes:l=[],setNodes:u,hasDefaultNodes:c,onNodesChange:d,nodeLookup:h}=e.getState();let p=l;for(const g of a)p=typeof g=="function"?g(p):g;c?u(p):d&&d(yq({items:p,lookup:h}))},[]),r=xq(t),i=ie.useCallback(a=>{const{edges:l=[],setEdges:u,hasDefaultEdges:c,onEdgesChange:d,edgeLookup:h}=e.getState();let p=l;for(const g of a)p=typeof g=="function"?g(p):g;c?u(p):d&&d(yq({items:p,lookup:h}))},[]),s=xq(i),o=ie.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return S.jsx(hV.Provider,{value:o,children:n})}function Dde(){const n=ie.useContext(hV);if(!n)throw new Error("useBatchContext must be used within a BatchProvider");return n}const Fde=n=>!!n.panZoom;function ob(){const n=Ade(),e=is(),t=Dde(),r=ti(Fde),i=ie.useMemo(()=>{const s=d=>e.getState().nodeLookup.get(d),o=d=>{t.nodeQueue.push(d)},a=d=>{t.edgeQueue.push(d)},l=d=>{const{nodeLookup:h,nodeOrigin:p}=e.getState(),g=_q(d)?d:h.get(d.id),x=g.parentId?W8(g.position,g.measured,g.parentId,h,p):g.position,b={...g,position:x,width:g.measured?.width??g.width,height:g.measured?.height??g.height};return sv(b)},u=(d,h,p={replace:!1})=>{o(g=>g.map(x=>{if(x.id===d){const b=typeof h=="function"?h(x):h;return p.replace&&_q(b)?b:{...x,...b}}return x}))},c=(d,h,p={replace:!1})=>{a(g=>g.map(x=>{if(x.id===d){const b=typeof h=="function"?h(x):h;return p.replace&&Pde(b)?b:{...x,...b}}return x}))};return{getNodes:()=>e.getState().nodes.map(d=>({...d})),getNode:d=>s(d)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:d=[]}=e.getState();return d.map(h=>({...h}))},getEdge:d=>e.getState().edgeLookup.get(d),setNodes:o,setEdges:a,addNodes:d=>{const h=Array.isArray(d)?d:[d];t.nodeQueue.push(p=>[...p,...h])},addEdges:d=>{const h=Array.isArray(d)?d:[d];t.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:d=[],edges:h=[],transform:p}=e.getState(),[g,x,b]=p;return{nodes:d.map(y=>({...y})),edges:h.map(y=>({...y})),viewport:{x:g,y:x,zoom:b}}},deleteElements:async({nodes:d=[],edges:h=[]})=>{const{nodes:p,edges:g,onNodesDelete:x,onEdgesDelete:b,triggerNodeChanges:y,triggerEdgeChanges:E,onDelete:T,onBeforeDelete:I}=e.getState(),{nodes:N,edges:k}=await gue({nodesToRemove:d,edgesToRemove:h,nodes:p,edges:g,onBeforeDelete:I}),q=k.length>0,L=N.length>0;if(q){const R=k.map(vq);b?.(k),E(R)}if(L){const R=N.map(vq);x?.(N),y(R)}return(L||q)&&T?.({nodes:N,edges:k}),{deletedNodes:N,deletedEdges:k}},getIntersectingNodes:(d,h=!0,p)=>{const g=Q4(d),x=g?d:l(d),b=p!==void 0;return x?(p||e.getState().nodes).filter(y=>{const E=e.getState().nodeLookup.get(y.id);if(E&&!g&&(y.id===d.id||!E.internals.positionAbsolute))return!1;const T=sv(b?y:E),I=d0(T,x);return h&&I>0||I>=x.width*x.height}):[]},isNodeIntersecting:(d,h,p=!0)=>{const x=Q4(d)?d:l(d);if(!x)return!1;const b=d0(x,h);return p&&b>0||b>=x.width*x.height},updateNode:u,updateNodeData:(d,h,p={replace:!1})=>{u(d,g=>{const x=typeof h=="function"?h(g):h;return p.replace?{...g,data:x}:{...g,data:{...g.data,...x}}},p)},updateEdge:c,updateEdgeData:(d,h,p={replace:!1})=>{c(d,g=>{const x=typeof h=="function"?h(g):h;return p.replace?{...g,data:x}:{...g,data:{...g.data,...x}}},p)},getNodesBounds:d=>{const{nodeLookup:h,nodeOrigin:p}=e.getState();return pue(d,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:d,id:h,nodeId:p})=>Array.from(e.getState().connectionLookup.get(`${p}-${d}${h?`-${h}`:""}`)?.values()??[]),getNodeConnections:({type:d,handleId:h,nodeId:p})=>Array.from(e.getState().connectionLookup.get(`${p}${d?h?`-${d}-${h}`:`-${d}`:""}`)?.values()??[])}},[]);return ie.useMemo(()=>({...i,...n,viewportInitialized:r}),[r])}const bq=n=>n.selected,qde={actInsideInputWithModifier:!1},jde=typeof window<"u"?window:void 0;function Bde({deleteKeyCode:n,multiSelectionKeyCode:e}){const t=is(),{deleteElements:r}=ob(),i=h0(n,qde),s=h0(e,{target:jde});ie.useEffect(()=>{if(i){const{edges:o,nodes:a}=t.getState();r({nodes:a.filter(bq),edges:o.filter(bq)}),t.setState({nodesSelectionActive:!1})}},[i]),ie.useEffect(()=>{t.setState({multiSelectionActive:s})},[s])}function Ude(n){const e=is();ie.useEffect(()=>{const t=()=>{if(!n.current)return!1;const r=hT(n.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",lf.error004()),e.setState({width:r.width||500,height:r.height||500})};if(n.current){t(),window.addEventListener("resize",t);const r=new ResizeObserver(()=>t());return r.observe(n.current),()=>{window.removeEventListener("resize",t),r&&n.current&&r.unobserve(n.current)}}},[])}const gT={position:"absolute",width:"100%",height:"100%",top:0,left:0},zde=n=>({userSelectionActive:n.userSelectionActive,lib:n.lib});function Vde({onPaneContextMenu:n,zoomOnScroll:e=!0,zoomOnPinch:t=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=cm.Free,zoomOnDoubleClick:o=!0,panOnDrag:a=!0,defaultViewport:l,translateExtent:u,minZoom:c,maxZoom:d,zoomActivationKeyCode:h,preventScrolling:p=!0,children:g,noWheelClassName:x,noPanClassName:b,onViewportChange:y,isControlledViewport:E,paneClickDistance:T}){const I=is(),N=ie.useRef(null),{userSelectionActive:k,lib:q}=ti(zde,xs),L=h0(h),R=ie.useRef();Ude(N);const P=ie.useCallback(F=>{y?.({x:F[0],y:F[1],zoom:F[2]}),E||I.setState({transform:F})},[y,E]);return ie.useEffect(()=>{if(N.current){R.current=Que({domNode:N.current,minZoom:c,maxZoom:d,translateExtent:u,viewport:l,paneClickDistance:T,onDraggingChange:W=>I.setState({paneDragging:W}),onPanZoomStart:(W,Q)=>{const{onViewportChangeStart:X,onMoveStart:re}=I.getState();re?.(W,Q),X?.(Q)},onPanZoom:(W,Q)=>{const{onViewportChange:X,onMove:re}=I.getState();re?.(W,Q),X?.(Q)},onPanZoomEnd:(W,Q)=>{const{onViewportChangeEnd:X,onMoveEnd:re}=I.getState();re?.(W,Q),X?.(Q)}});const{x:F,y:z,zoom:V}=R.current.getViewport();return I.setState({panZoom:R.current,transform:[F,z,V],domNode:N.current.closest(".react-flow")}),()=>{R.current?.destroy()}}},[]),ie.useEffect(()=>{R.current?.update({onPaneContextMenu:n,zoomOnScroll:e,zoomOnPinch:t,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:a,zoomActivationKeyPressed:L,preventScrolling:p,noPanClassName:b,userSelectionActive:k,noWheelClassName:x,lib:q,onTransformChange:P})},[n,e,t,r,i,s,o,a,L,p,b,k,x,q,P]),S.jsx("div",{className:"react-flow__renderer",ref:N,style:gT,children:g})}const Wde=n=>({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function $de(){const{userSelectionActive:n,userSelectionRect:e}=ti(Wde,xs);return n&&e?S.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const hA=(n,e)=>t=>{t.target===e.current&&n?.(t)},Hde=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging});function Gde({isSelecting:n,selectionKeyPressed:e,selectionMode:t=u0.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:u,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:h,children:p}){const g=is(),{userSelectionActive:x,elementsSelectable:b,dragging:y}=ti(Hde,xs),E=b&&(n||x),T=ie.useRef(null),I=ie.useRef(),N=ie.useRef(new Set),k=ie.useRef(new Set),q=ie.useRef(!1),L=ie.useRef(!1),R=X=>{if(q.current){q.current=!1;return}a?.(X),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},P=X=>{if(Array.isArray(r)&&r?.includes(2)){X.preventDefault();return}l?.(X)},F=u?X=>u(X):void 0,z=X=>{const{resetSelectedElements:re,domNode:G}=g.getState();if(I.current=G?.getBoundingClientRect(),!b||!n||X.button!==0||X.target!==T.current||!I.current)return;X.target?.setPointerCapture?.(X.pointerId),L.current=!0,q.current=!1;const{x:Y,y:te}=$d(X.nativeEvent,I.current);re(),g.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:te,x:Y,y:te}}),s?.(X)},V=X=>{const{userSelectionRect:re,transform:G,nodeLookup:Y,edgeLookup:te,connectionLookup:Z,triggerNodeChanges:fe,triggerEdgeChanges:ge,defaultEdgeOptions:ce}=g.getState();if(!I.current||!re)return;q.current=!0;const{x:ye,y:be}=$d(X.nativeEvent,I.current),{startX:Ee,startY:Me}=re,qe={startX:Ee,startY:Me,x:ye<Ee?ye:Ee,y:be<Me?be:Me,width:Math.abs(ye-Ee),height:Math.abs(be-Me)},Ue=N.current,Ye=k.current;N.current=new Set(F8(Y,qe,G,t===u0.Partial,!0).map(ke=>ke.id)),k.current=new Set;const Ne=ce?.selectable??!0;for(const ke of N.current){const me=Z.get(ke);if(me)for(const{edgeId:ht}of me.values()){const ct=te.get(ht);ct&&(ct.selectable??Ne)&&k.current.add(ht)}}if(!Y4(Ue,N.current)){const ke=vy(Y,N.current,!0);fe(ke)}if(!Y4(Ye,k.current)){const ke=vy(te,k.current);ge(ke)}g.setState({userSelectionRect:qe,userSelectionActive:!0,nodesSelectionActive:!1})},W=X=>{if(X.button!==0||!L.current)return;X.target?.releasePointerCapture?.(X.pointerId);const{userSelectionRect:re}=g.getState();!x&&re&&X.target===T.current&&R?.(X),g.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:N.current.size>0}),o?.(X),(e||i)&&(q.current=!1),L.current=!1},Q=r===!0||Array.isArray(r)&&r.includes(0);return S.jsxs("div",{className:to(["react-flow__pane",{draggable:Q,dragging:y,selection:n}]),onClick:E?void 0:hA(R,T),onContextMenu:hA(P,T),onWheel:hA(F,T),onPointerEnter:E?void 0:c,onPointerDown:E?z:d,onPointerMove:E?V:d,onPointerUp:E?W:void 0,onPointerLeave:h,ref:T,style:gT,children:[p,S.jsx($de,{})]})}function OR({id:n,store:e,unselect:t=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:a,onError:l}=e.getState(),u=a.get(n);if(!u){l?.("012",lf.error012(n));return}e.setState({nodesSelectionActive:!1}),u.selected?(t||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([n])}function pV({nodeRef:n,disabled:e=!1,noDragClassName:t,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const a=is(),[l,u]=ie.useState(!1),c=ie.useRef();return ie.useEffect(()=>{c.current=Due({getStoreItems:()=>a.getState(),onNodeMouseDown:d=>{OR({id:d,store:a,nodeRef:n})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),ie.useEffect(()=>{if(e)c.current?.destroy();else if(n.current)return c.current?.update({noDragClassName:t,handleSelector:r,domNode:n.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{c.current?.destroy()}},[t,r,e,s,n,i]),l}const Xde=n=>e=>e.selected&&(e.draggable||n&&typeof e.draggable>"u");function mV(){const n=is();return ie.useCallback(t=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:a,updateNodePositions:l,nodeLookup:u,nodeOrigin:c}=n.getState(),d=new Map,h=Xde(o),p=i?s[0]:5,g=i?s[1]:5,x=t.direction.x*p*t.factor,b=t.direction.y*g*t.factor;for(const[,y]of u){if(!h(y))continue;let E={x:y.internals.positionAbsolute.x+x,y:y.internals.positionAbsolute.y+b};i&&(E=fT(E,s));const{position:T,positionAbsolute:I}=q8({nodeId:y.id,nextPosition:E,nodeLookup:u,nodeExtent:r,nodeOrigin:c,onError:a});y.position=T,y.internals.positionAbsolute=I,d.set(y.id,y)}l(d)},[])}const CP=ie.createContext(null),Kde=CP.Provider;CP.Consumer;const gV=()=>ie.useContext(CP),Qde=n=>({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),Yde=(n,e,t)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:a,toHandle:l,isValid:u}=o,c=l?.nodeId===n&&l?.id===e&&l?.type===t;return{connectingFrom:a?.nodeId===n&&a?.id===e&&a?.type===t,connectingTo:c,clickConnecting:i?.nodeId===n&&i?.id===e&&i?.type===t,isPossibleEndHandle:s===rv.Strict?a?.type!==t:n!==a?.nodeId||e!==a?.id,connectionInProcess:!!a,valid:c&&u}};function Jde({type:n="source",position:e=er.Top,isValidConnection:t,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:d,...h},p){const g=o||null,x=n==="target",b=is(),y=gV(),{connectOnClick:E,noPanClassName:T,rfId:I}=ti(Qde,xs),{connectingFrom:N,connectingTo:k,clickConnecting:q,isPossibleEndHandle:L,connectionInProcess:R,valid:P}=ti(Yde(y,g,n),xs);y||b.getState().onError?.("010",lf.error010());const F=W=>{const{defaultEdgeOptions:Q,onConnect:X,hasDefaultEdges:re}=b.getState(),G={...Q,...W};if(re){const{edges:Y,setEdges:te}=b.getState();te(Sue(G,Y))}X?.(G),a?.(G)},z=W=>{if(!y)return;const Q=H8(W.nativeEvent);if(i&&(Q&&W.button===0||!Q)){const X=b.getState();kR.onPointerDown(W.nativeEvent,{autoPanOnConnect:X.autoPanOnConnect,connectionMode:X.connectionMode,connectionRadius:X.connectionRadius,domNode:X.domNode,nodeLookup:X.nodeLookup,lib:X.lib,isTarget:x,handleId:g,nodeId:y,flowId:X.rfId,panBy:X.panBy,cancelConnection:X.cancelConnection,onConnectStart:X.onConnectStart,onConnectEnd:X.onConnectEnd,updateConnection:X.updateConnection,onConnect:F,isValidConnection:t||X.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:X.autoPanSpeed})}Q?c?.(W):d?.(W)},V=W=>{const{onClickConnectStart:Q,onClickConnectEnd:X,connectionClickStartHandle:re,connectionMode:G,isValidConnection:Y,lib:te,rfId:Z,nodeLookup:fe,connection:ge}=b.getState();if(!y||!re&&!i)return;if(!re){Q?.(W.nativeEvent,{nodeId:y,handleId:g,handleType:n}),b.setState({connectionClickStartHandle:{nodeId:y,type:n,id:g}});return}const ce=$8(W.target),ye=t||Y,{connection:be,isValid:Ee}=kR.isValid(W.nativeEvent,{handle:{nodeId:y,id:g,type:n},connectionMode:G,fromNodeId:re.nodeId,fromHandleId:re.id||null,fromType:re.type,isValidConnection:ye,flowId:Z,doc:ce,lib:te,nodeLookup:fe});Ee&&be&&F(be);const Me=structuredClone(ge);delete Me.inProgress,Me.toPosition=Me.toHandle?Me.toHandle.position:null,X?.(W,Me),b.setState({connectionClickStartHandle:null})};return S.jsx("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":e,"data-id":`${I}-${y}-${g}-${n}`,className:to(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",T,u,{source:!x,target:x,connectable:r,connectablestart:i,connectableend:s,clickconnecting:q,connectingfrom:N,connectingto:k,valid:P,connectionindicator:r&&(!R||L)&&(R?s:i)}]),onMouseDown:z,onTouchStart:z,onClick:E?V:void 0,ref:p,...h,children:l})}const av=ie.memo(fV(Jde));function Zde({data:n,isConnectable:e,sourcePosition:t=er.Bottom}){return S.jsxs(S.Fragment,{children:[n?.label,S.jsx(av,{type:"source",position:t,isConnectable:e})]})}function efe({data:n,isConnectable:e,targetPosition:t=er.Top,sourcePosition:r=er.Bottom}){return S.jsxs(S.Fragment,{children:[S.jsx(av,{type:"target",position:t,isConnectable:e}),n?.label,S.jsx(av,{type:"source",position:r,isConnectable:e})]})}function tfe(){return null}function nfe({data:n,isConnectable:e,targetPosition:t=er.Top}){return S.jsxs(S.Fragment,{children:[S.jsx(av,{type:"target",position:t,isConnectable:e}),n?.label]})}const NE={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},wq={input:Zde,default:efe,output:nfe,group:tfe};function rfe(n){return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??n.style?.width,height:n.height??n.initialHeight??n.style?.height}:{width:n.width??n.style?.width,height:n.height??n.style?.height}}const ife=n=>{const{width:e,height:t,x:r,y:i}=ib(n.nodeLookup,{filter:s=>!!s.selected});return{width:$c(e)?e:null,height:$c(t)?t:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${r}px,${i}px)`}};function sfe({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const r=is(),{width:i,height:s,transformString:o,userSelectionActive:a}=ti(ife,xs),l=mV(),u=ie.useRef(null);if(ie.useEffect(()=>{t||u.current?.focus({preventScroll:!0})},[t]),pV({nodeRef:u}),a||!i||!s)return null;const c=n?h=>{const p=r.getState().nodes.filter(g=>g.selected);n(h,p)}:void 0,d=h=>{Object.prototype.hasOwnProperty.call(NE,h.key)&&(h.preventDefault(),l({direction:NE[h.key],factor:h.shiftKey?4:1}))};return S.jsx("div",{className:to(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:S.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:c,tabIndex:t?void 0:-1,onKeyDown:t?void 0:d,style:{width:i,height:s}})})}const Sq=typeof window<"u"?window:void 0,ofe=n=>({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function yV({children:n,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:a,deleteKeyCode:l,selectionKeyCode:u,selectionOnDrag:c,selectionMode:d,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:g,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:y,zoomOnScroll:E,zoomOnPinch:T,panOnScroll:I,panOnScrollSpeed:N,panOnScrollMode:k,zoomOnDoubleClick:q,panOnDrag:L,defaultViewport:R,translateExtent:P,minZoom:F,maxZoom:z,preventScrolling:V,onSelectionContextMenu:W,noWheelClassName:Q,noPanClassName:X,disableKeyboardA11y:re,onViewportChange:G,isControlledViewport:Y}){const{nodesSelectionActive:te,userSelectionActive:Z}=ti(ofe),fe=h0(u,{target:Sq}),ge=h0(x,{target:Sq}),ce=ge||L,ye=ge||I,be=c&&ce!==!0,Ee=fe||Z||be;return Bde({deleteKeyCode:l,multiSelectionKeyCode:g}),S.jsx(Vde,{onPaneContextMenu:s,elementsSelectable:y,zoomOnScroll:E,zoomOnPinch:T,panOnScroll:ye,panOnScrollSpeed:N,panOnScrollMode:k,zoomOnDoubleClick:q,panOnDrag:!fe&&ce,defaultViewport:R,translateExtent:P,minZoom:F,maxZoom:z,zoomActivationKeyCode:b,preventScrolling:V,noWheelClassName:Q,noPanClassName:X,onViewportChange:G,isControlledViewport:Y,paneClickDistance:a,children:S.jsxs(Gde,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ce,isSelecting:!!Ee,selectionMode:d,selectionKeyPressed:fe,selectionOnDrag:be,children:[n,te&&S.jsx(sfe,{onSelectionContextMenu:W,noPanClassName:X,disableKeyboardA11y:re})]})})}yV.displayName="FlowRenderer";const afe=ie.memo(yV),lfe=n=>e=>n?F8(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(t=>t.id):Array.from(e.nodeLookup.keys());function cfe(n){return ti(ie.useCallback(lfe(n),[n]),xs)}const ufe=n=>n.updateNodeInternals;function dfe(){const n=ti(ufe),[e]=ie.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(t=>{const r=new Map;t.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),n(r)}));return ie.useEffect(()=>()=>{e?.disconnect()},[e]),e}function ffe({node:n,nodeType:e,hasDimensions:t,resizeObserver:r}){const i=is(),s=ie.useRef(null),o=ie.useRef(null),a=ie.useRef(n.sourcePosition),l=ie.useRef(n.targetPosition),u=ie.useRef(e),c=t&&!!n.internals.handleBounds;return ie.useEffect(()=>{s.current&&!n.hidden&&(!c||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[c,n.hidden]),ie.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),ie.useEffect(()=>{if(s.current){const d=u.current!==e,h=a.current!==n.sourcePosition,p=l.current!==n.targetPosition;(d||h||p)&&(u.current=e,a.current=n.sourcePosition,l.current=n.targetPosition,i.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:s.current,force:!0}]])))}},[n.id,e,n.sourcePosition,n.targetPosition]),s}function hfe({id:n,onClick:e,onMouseEnter:t,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:a,elementsSelectable:l,nodesConnectable:u,nodesFocusable:c,resizeObserver:d,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:g,rfId:x,nodeTypes:b,nodeExtent:y,nodeClickDistance:E,onError:T}){const{node:I,internals:N,isParent:k}=ti(Me=>{const qe=Me.nodeLookup.get(n),Ue=Me.parentLookup.has(n);return{node:qe,internals:qe.internals,isParent:Ue}},xs);let q=I.type||"default",L=b?.[q]||wq[q];L===void 0&&(T?.("003",lf.error003(q)),q="default",L=wq.default);const R=!!(I.draggable||a&&typeof I.draggable>"u"),P=!!(I.selectable||l&&typeof I.selectable>"u"),F=!!(I.connectable||u&&typeof I.connectable>"u"),z=!!(I.focusable||c&&typeof I.focusable>"u"),V=is(),W=V8(I),Q=ffe({node:I,nodeType:q,hasDimensions:W,resizeObserver:d}),X=pV({nodeRef:Q,disabled:I.hidden||!R,noDragClassName:h,handleSelector:I.dragHandle,nodeId:n,isSelectable:P,nodeClickDistance:E}),re=mV();if(I.hidden)return null;const G=cf(I),Y=rfe(I),te=P||R||e||t||r||i,Z=t?Me=>t(Me,{...N.userNode}):void 0,fe=r?Me=>r(Me,{...N.userNode}):void 0,ge=i?Me=>i(Me,{...N.userNode}):void 0,ce=s?Me=>s(Me,{...N.userNode}):void 0,ye=o?Me=>o(Me,{...N.userNode}):void 0,be=Me=>{const{selectNodesOnDrag:qe,nodeDragThreshold:Ue}=V.getState();P&&(!qe||!R||Ue>0)&&OR({id:n,store:V,nodeRef:Q}),e&&e(Me,{...N.userNode})},Ee=Me=>{if(!(CR(Me.nativeEvent)||g))if(k8.includes(Me.key)&&P){const qe=Me.key==="Escape";OR({id:n,store:V,unselect:qe,nodeRef:Q})}else R&&I.selected&&Object.prototype.hasOwnProperty.call(NE,Me.key)&&(Me.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${Me.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~N.positionAbsolute.x}, y: ${~~N.positionAbsolute.y}`}),re({direction:NE[Me.key],factor:Me.shiftKey?4:1}))};return S.jsx("div",{className:to(["react-flow__node",`react-flow__node-${q}`,{[p]:R},I.className,{selected:I.selected,selectable:P,parent:k,draggable:R,dragging:X}]),ref:Q,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:te?"all":"none",visibility:W?"visible":"hidden",...I.style,...Y},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Z,onMouseMove:fe,onMouseLeave:ge,onContextMenu:ce,onClick:be,onDoubleClick:ye,onKeyDown:z?Ee:void 0,tabIndex:z?0:void 0,role:z?"button":void 0,"aria-describedby":g?void 0:`${lV}-${x}`,"aria-label":I.ariaLabel,children:S.jsx(Kde,{value:n,children:S.jsx(L,{id:n,data:I.data,type:q,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:I.selected??!1,selectable:P,draggable:R,deletable:I.deletable??!0,isConnectable:F,sourcePosition:I.sourcePosition,targetPosition:I.targetPosition,dragging:X,dragHandle:I.dragHandle,zIndex:N.z,parentId:I.parentId,...G})})})}const pfe=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function vV(n){const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:r,elementsSelectable:i,onError:s}=ti(pfe,xs),o=cfe(n.onlyRenderVisibleElements),a=dfe();return S.jsx("div",{className:"react-flow__nodes",style:gT,children:o.map(l=>S.jsx(hfe,{id:l,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:a,nodesDraggable:e,nodesConnectable:t,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:n.nodeClickDistance,onError:s},l))})}vV.displayName="NodeRenderer";const mfe=ie.memo(vV);function gfe(n){return ti(ie.useCallback(t=>{if(!n)return t.edges.map(i=>i.id);const r=[];if(t.width&&t.height)for(const i of t.edges){const s=t.nodeLookup.get(i.source),o=t.nodeLookup.get(i.target);s&&o&&xue({sourceNode:s,targetNode:o,width:t.width,height:t.height,transform:t.transform})&&r.push(i.id)}return r},[n]),xs)}const yfe=({color:n="none",strokeWidth:e=1})=>S.jsx("polyline",{style:{stroke:n,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),vfe=({color:n="none",strokeWidth:e=1})=>S.jsx("polyline",{style:{stroke:n,fill:n,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Eq={[AE.Arrow]:yfe,[AE.ArrowClosed]:vfe};function _fe(n){const e=is();return ie.useMemo(()=>Object.prototype.hasOwnProperty.call(Eq,n)?Eq[n]:(e.getState().onError?.("009",lf.error009(n)),null),[n])}const xfe=({id:n,type:e,color:t,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const l=_fe(e);return l?S.jsx("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:S.jsx(l,{color:t,strokeWidth:o})}):null},_V=({defaultColor:n,rfId:e})=>{const t=ti(s=>s.edges),r=ti(s=>s.defaultEdgeOptions),i=ie.useMemo(()=>Aue(t,{id:e,defaultColor:n,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[t,r,e,n]);return i.length?S.jsx("svg",{className:"react-flow__marker",children:S.jsx("defs",{children:i.map(s=>S.jsx(xfe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};_V.displayName="MarkerDefinitions";var bfe=ie.memo(_V);function xV({x:n,y:e,label:t,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c}){const[d,h]=ie.useState({x:1,y:0,width:0,height:0}),p=to(["react-flow__edge-textwrapper",u]),g=ie.useRef(null);return ie.useEffect(()=>{if(g.current){const x=g.current.getBBox();h({x:x.x,y:x.y,width:x.width,height:x.height})}},[t]),typeof t>"u"||!t?null:S.jsxs("g",{transform:`translate(${n-d.width/2} ${e-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...c,children:[i&&S.jsx("rect",{width:d.width+2*o[0],x:-o[0],y:-o[1],height:d.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),S.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:t}),l]})}xV.displayName="EdgeText";const wfe=ie.memo(xV);function ab({path:n,labelX:e,labelY:t,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l,interactionWidth:u=20,...c}){return S.jsxs(S.Fragment,{children:[S.jsx("path",{...c,d:n,fill:"none",className:to(["react-flow__edge-path",c.className])}),u&&S.jsx("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&$c(e)&&$c(t)?S.jsx(wfe,{x:e,y:t,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:a,labelBgBorderRadius:l}):null]})}function Tq({pos:n,x1:e,y1:t,x2:r,y2:i}){return n===er.Left||n===er.Right?[.5*(e+r),t]:[e,.5*(t+i)]}function bV({sourceX:n,sourceY:e,sourcePosition:t=er.Bottom,targetX:r,targetY:i,targetPosition:s=er.Top}){const[o,a]=Tq({pos:t,x1:n,y1:e,x2:r,y2:i}),[l,u]=Tq({pos:s,x1:r,y1:i,x2:n,y2:e}),[c,d,h,p]=G8({sourceX:n,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${n},${e} C${o},${a} ${l},${u} ${r},${i}`,c,d,h,p]}function wV(n){return ie.memo(({id:e,sourceX:t,sourceY:r,targetX:i,targetY:s,sourcePosition:o=er.Bottom,targetPosition:a=er.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:b,interactionWidth:y})=>{const[E,T,I]=bV({sourceX:t,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a}),N=n.isInternal?void 0:e;return S.jsx(ab,{id:N,path:E,labelX:T,labelY:I,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:b,interactionWidth:y})})}const Sfe=wV({isInternal:!1}),SV=wV({isInternal:!0});Sfe.displayName="SimpleBezierEdge";SV.displayName="SimpleBezierEdgeInternal";function EV(n){return ie.memo(({id:e,sourceX:t,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,sourcePosition:p=er.Bottom,targetPosition:g=er.Top,markerEnd:x,markerStart:b,pathOptions:y,interactionWidth:E})=>{const[T,I,N]=RR({sourceX:t,sourceY:r,sourcePosition:p,targetX:i,targetY:s,targetPosition:g,borderRadius:y?.borderRadius,offset:y?.offset}),k=n.isInternal?void 0:e;return S.jsx(ab,{id:k,path:T,labelX:I,labelY:N,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:x,markerStart:b,interactionWidth:E})})}const TV=EV({isInternal:!1}),MV=EV({isInternal:!0});TV.displayName="SmoothStepEdge";MV.displayName="SmoothStepEdgeInternal";function IV(n){return ie.memo(({id:e,...t})=>{const r=n.isInternal?void 0:e;return S.jsx(TV,{...t,id:r,pathOptions:ie.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])})})}const Efe=IV({isInternal:!1}),AV=IV({isInternal:!0});Efe.displayName="StepEdge";AV.displayName="StepEdgeInternal";function CV(n){return ie.memo(({id:e,sourceX:t,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[b,y,E]=K8({sourceX:t,sourceY:r,targetX:i,targetY:s}),T=n.isInternal?void 0:e;return S.jsx(ab,{id:T,path:b,labelX:y,labelY:E,label:o,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:g,interactionWidth:x})})}const Tfe=CV({isInternal:!1}),RV=CV({isInternal:!0});Tfe.displayName="StraightEdge";RV.displayName="StraightEdgeInternal";function NV(n){return ie.memo(({id:e,sourceX:t,sourceY:r,targetX:i,targetY:s,sourcePosition:o=er.Bottom,targetPosition:a=er.Top,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:b,pathOptions:y,interactionWidth:E})=>{const[T,I,N]=SP({sourceX:t,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:a,curvature:y?.curvature}),k=n.isInternal?void 0:e;return S.jsx(ab,{id:k,path:T,labelX:I,labelY:N,label:l,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:x,markerStart:b,interactionWidth:E})})}const Mfe=NV({isInternal:!1}),PV=NV({isInternal:!0});Mfe.displayName="BezierEdge";PV.displayName="BezierEdgeInternal";const Mq={default:PV,straight:RV,step:AV,smoothstep:MV,simplebezier:SV},Iq={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ife=(n,e,t)=>t===er.Left?n-e:t===er.Right?n+e:n,Afe=(n,e,t)=>t===er.Top?n-e:t===er.Bottom?n+e:n,Aq="react-flow__edgeupdater";function Cq({position:n,centerX:e,centerY:t,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a}){return S.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:to([Aq,`${Aq}-${a}`]),cx:Ife(e,r,n),cy:Afe(t,r,n),r,stroke:"transparent",fill:"transparent"})}function Cfe({isReconnectable:n,reconnectRadius:e,edge:t,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:a,targetPosition:l,onReconnect:u,onReconnectStart:c,onReconnectEnd:d,setReconnecting:h,setUpdateHover:p}){const g=is(),x=(I,N)=>{if(I.button!==0)return;const{autoPanOnConnect:k,domNode:q,isValidConnection:L,connectionMode:R,connectionRadius:P,lib:F,onConnectStart:z,onConnectEnd:V,cancelConnection:W,nodeLookup:Q,rfId:X,panBy:re,updateConnection:G}=g.getState(),Y=N.type==="target";h(!0),c?.(I,t,N.type);const te=(fe,ge)=>{h(!1),d?.(fe,t,N.type,ge)},Z=fe=>u?.(t,fe);kR.onPointerDown(I.nativeEvent,{autoPanOnConnect:k,connectionMode:R,connectionRadius:P,domNode:q,handleId:N.id,nodeId:N.nodeId,nodeLookup:Q,isTarget:Y,edgeUpdaterType:N.type,lib:F,flowId:X,cancelConnection:W,panBy:re,isValidConnection:L,onConnect:Z,onConnectStart:z,onConnectEnd:V,onReconnectEnd:te,updateConnection:G,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},b=I=>x(I,{nodeId:t.target,id:t.targetHandle??null,type:"target"}),y=I=>x(I,{nodeId:t.source,id:t.sourceHandle??null,type:"source"}),E=()=>p(!0),T=()=>p(!1);return S.jsxs(S.Fragment,{children:[(n===!0||n==="source")&&S.jsx(Cq,{position:a,centerX:r,centerY:i,radius:e,onMouseDown:b,onMouseEnter:E,onMouseOut:T,type:"source"}),(n===!0||n==="target")&&S.jsx(Cq,{position:l,centerX:s,centerY:o,radius:e,onMouseDown:y,onMouseEnter:E,onMouseOut:T,type:"target"})]})}function Rfe({id:n,edgesFocusable:e,edgesReconnectable:t,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,reconnectRadius:c,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,rfId:g,edgeTypes:x,noPanClassName:b,onError:y,disableKeyboardA11y:E}){let T=ti(Ne=>Ne.edgeLookup.get(n));const I=ti(Ne=>Ne.defaultEdgeOptions);T=I?{...I,...T}:T;let N=T.type||"default",k=x?.[N]||Mq[N];k===void 0&&(y?.("011",lf.error011(N)),N="default",k=Mq.default);const q=!!(T.focusable||e&&typeof T.focusable>"u"),L=typeof d<"u"&&(T.reconnectable||t&&typeof T.reconnectable>"u"),R=!!(T.selectable||r&&typeof T.selectable>"u"),P=ie.useRef(null),[F,z]=ie.useState(!1),[V,W]=ie.useState(!1),Q=is(),{zIndex:X,sourceX:re,sourceY:G,targetX:Y,targetY:te,sourcePosition:Z,targetPosition:fe}=ti(ie.useCallback(Ne=>{const ke=Ne.nodeLookup.get(T.source),me=Ne.nodeLookup.get(T.target);if(!ke||!me)return{zIndex:T.zIndex,...Iq};const ht=Iue({id:n,sourceNode:ke,targetNode:me,sourceHandle:T.sourceHandle||null,targetHandle:T.targetHandle||null,connectionMode:Ne.connectionMode,onError:y});return{zIndex:_ue({selected:T.selected,zIndex:T.zIndex,sourceNode:ke,targetNode:me,elevateOnSelect:Ne.elevateEdgesOnSelect}),...ht||Iq}},[T.source,T.target,T.sourceHandle,T.targetHandle,T.selected,T.zIndex]),xs),ge=ie.useMemo(()=>T.markerStart?`url('#${NR(T.markerStart,g)}')`:void 0,[T.markerStart,g]),ce=ie.useMemo(()=>T.markerEnd?`url('#${NR(T.markerEnd,g)}')`:void 0,[T.markerEnd,g]);if(T.hidden||re===null||G===null||Y===null||te===null)return null;const ye=Ne=>{const{addSelectedEdges:ke,unselectNodesAndEdges:me,multiSelectionActive:ht}=Q.getState();R&&(Q.setState({nodesSelectionActive:!1}),T.selected&&ht?(me({nodes:[],edges:[T]}),P.current?.blur()):ke([n])),i&&i(Ne,T)},be=s?Ne=>{s(Ne,{...T})}:void 0,Ee=o?Ne=>{o(Ne,{...T})}:void 0,Me=a?Ne=>{a(Ne,{...T})}:void 0,qe=l?Ne=>{l(Ne,{...T})}:void 0,Ue=u?Ne=>{u(Ne,{...T})}:void 0,Ye=Ne=>{if(!E&&k8.includes(Ne.key)&&R){const{unselectNodesAndEdges:ke,addSelectedEdges:me}=Q.getState();Ne.key==="Escape"?(P.current?.blur(),ke({edges:[T]})):me([n])}};return S.jsx("svg",{style:{zIndex:X},children:S.jsxs("g",{className:to(["react-flow__edge",`react-flow__edge-${N}`,T.className,b,{selected:T.selected,animated:T.animated,inactive:!R&&!i,updating:F,selectable:R}]),onClick:ye,onDoubleClick:be,onContextMenu:Ee,onMouseEnter:Me,onMouseMove:qe,onMouseLeave:Ue,onKeyDown:q?Ye:void 0,tabIndex:q?0:void 0,role:q?"button":"img","data-id":n,"data-testid":`rf__edge-${n}`,"aria-label":T.ariaLabel===null?void 0:T.ariaLabel||`Edge from ${T.source} to ${T.target}`,"aria-describedby":q?`${cV}-${g}`:void 0,ref:P,children:[!V&&S.jsx(k,{id:n,source:T.source,target:T.target,type:T.type,selected:T.selected,animated:T.animated,selectable:R,deletable:T.deletable??!0,label:T.label,labelStyle:T.labelStyle,labelShowBg:T.labelShowBg,labelBgStyle:T.labelBgStyle,labelBgPadding:T.labelBgPadding,labelBgBorderRadius:T.labelBgBorderRadius,sourceX:re,sourceY:G,targetX:Y,targetY:te,sourcePosition:Z,targetPosition:fe,data:T.data,style:T.style,sourceHandleId:T.sourceHandle,targetHandleId:T.targetHandle,markerStart:ge,markerEnd:ce,pathOptions:"pathOptions"in T?T.pathOptions:void 0,interactionWidth:T.interactionWidth}),L&&S.jsx(Cfe,{edge:T,isReconnectable:L,reconnectRadius:c,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,sourceX:re,sourceY:G,targetX:Y,targetY:te,sourcePosition:Z,targetPosition:fe,setUpdateHover:z,setReconnecting:W})]})})}const Nfe=n=>({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function kV({defaultMarkerColor:n,onlyRenderVisibleElements:e,rfId:t,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,reconnectRadius:d,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:g,disableKeyboardA11y:x}){const{edgesFocusable:b,edgesReconnectable:y,elementsSelectable:E,onError:T}=ti(Nfe,xs),I=gfe(e);return S.jsxs("div",{className:"react-flow__edges",children:[S.jsx(bfe,{defaultColor:n,rfId:t}),I.map(N=>S.jsx(Rfe,{id:N,edgesFocusable:b,edgesReconnectable:y,elementsSelectable:E,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:u,onClick:c,reconnectRadius:d,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:g,rfId:t,onError:T,edgeTypes:r,disableKeyboardA11y:x},N))]})}kV.displayName="EdgeRenderer";const Pfe=ie.memo(kV),kfe=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function Ofe({children:n}){const e=ti(kfe);return S.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:n})}function Lfe(n){const e=ob(),t=ie.useRef(!1);ie.useEffect(()=>{!t.current&&e.viewportInitialized&&n&&(setTimeout(()=>n(e),1),t.current=!0)},[n,e.viewportInitialized])}const Dfe=n=>n.panZoom?.syncViewport;function Ffe(n){const e=ti(Dfe),t=is();return ie.useEffect(()=>{n&&(e?.(n),t.setState({transform:[n.x,n.y,n.zoom]}))},[n,e]),null}function qfe(n){return n.connection.inProgress?{...n.connection,to:sb(n.connection.to,n.transform)}:{...n.connection}}function jfe(n){return qfe}function Bfe(n){const e=jfe();return ti(e,xs)}const Ufe=n=>({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function zfe({containerStyle:n,style:e,type:t,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:a,inProgress:l}=ti(Ufe,xs);return!(s&&i&&l)?null:S.jsx("svg",{style:n,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:S.jsx("g",{className:to(["react-flow__connection",L8(a)]),children:S.jsx(OV,{style:e,type:t,CustomComponent:r,isValid:a})})})}const OV=({style:n,type:e=lh.Bezier,CustomComponent:t,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:a,fromPosition:l,to:u,toNode:c,toHandle:d,toPosition:h}=Bfe();if(!i)return;if(t)return S.jsx(t,{connectionLineType:e,connectionLineStyle:n,fromNode:o,fromHandle:a,fromX:s.x,fromY:s.y,toX:u.x,toY:u.y,fromPosition:l,toPosition:h,connectionStatus:L8(r),toNode:c,toHandle:d});let p="";const g={sourceX:s.x,sourceY:s.y,sourcePosition:l,targetX:u.x,targetY:u.y,targetPosition:h};switch(e){case lh.Bezier:[p]=SP(g);break;case lh.SimpleBezier:[p]=bV(g);break;case lh.Step:[p]=RR({...g,borderRadius:0});break;case lh.SmoothStep:[p]=RR(g);break;default:[p]=K8(g)}return S.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:n})};OV.displayName="ConnectionLine";const Vfe={};function Rq(n=Vfe){ie.useRef(n),is(),ie.useEffect(()=>{},[n])}function Wfe(){is(),ie.useRef(!1),ie.useEffect(()=>{},[])}function LV({nodeTypes:n,edgeTypes:e,onInit:t,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,onSelectionContextMenu:d,onSelectionStart:h,onSelectionEnd:p,connectionLineType:g,connectionLineStyle:x,connectionLineComponent:b,connectionLineContainerStyle:y,selectionKeyCode:E,selectionOnDrag:T,selectionMode:I,multiSelectionKeyCode:N,panActivationKeyCode:k,zoomActivationKeyCode:q,deleteKeyCode:L,onlyRenderVisibleElements:R,elementsSelectable:P,defaultViewport:F,translateExtent:z,minZoom:V,maxZoom:W,preventScrolling:Q,defaultMarkerColor:X,zoomOnScroll:re,zoomOnPinch:G,panOnScroll:Y,panOnScrollSpeed:te,panOnScrollMode:Z,zoomOnDoubleClick:fe,panOnDrag:ge,onPaneClick:ce,onPaneMouseEnter:ye,onPaneMouseMove:be,onPaneMouseLeave:Ee,onPaneScroll:Me,onPaneContextMenu:qe,paneClickDistance:Ue,nodeClickDistance:Ye,onEdgeContextMenu:Ne,onEdgeMouseEnter:ke,onEdgeMouseMove:me,onEdgeMouseLeave:ht,reconnectRadius:ct,onReconnect:Mt,onReconnectStart:xe,onReconnectEnd:Te,noDragClassName:Ae,noWheelClassName:le,noPanClassName:se,disableKeyboardA11y:Oe,nodeExtent:Ce,rfId:Ge,viewport:at,onViewportChange:Lt}){return Rq(n),Rq(e),Wfe(),Lfe(t),Ffe(at),S.jsx(afe,{onPaneClick:ce,onPaneMouseEnter:ye,onPaneMouseMove:be,onPaneMouseLeave:Ee,onPaneContextMenu:qe,onPaneScroll:Me,paneClickDistance:Ue,deleteKeyCode:L,selectionKeyCode:E,selectionOnDrag:T,selectionMode:I,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:N,panActivationKeyCode:k,zoomActivationKeyCode:q,elementsSelectable:P,zoomOnScroll:re,zoomOnPinch:G,zoomOnDoubleClick:fe,panOnScroll:Y,panOnScrollSpeed:te,panOnScrollMode:Z,panOnDrag:ge,defaultViewport:F,translateExtent:z,minZoom:V,maxZoom:W,onSelectionContextMenu:d,preventScrolling:Q,noDragClassName:Ae,noWheelClassName:le,noPanClassName:se,disableKeyboardA11y:Oe,onViewportChange:Lt,isControlledViewport:!!at,children:S.jsxs(Ofe,{children:[S.jsx(Pfe,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Mt,onReconnectStart:xe,onReconnectEnd:Te,onlyRenderVisibleElements:R,onEdgeContextMenu:Ne,onEdgeMouseEnter:ke,onEdgeMouseMove:me,onEdgeMouseLeave:ht,reconnectRadius:ct,defaultMarkerColor:X,noPanClassName:se,disableKeyboardA11y:Oe,rfId:Ge}),S.jsx(zfe,{style:x,type:g,component:b,containerStyle:y}),S.jsx("div",{className:"react-flow__edgelabel-renderer"}),S.jsx(mfe,{nodeTypes:n,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:l,onNodeMouseLeave:u,onNodeContextMenu:c,nodeClickDistance:Ye,onlyRenderVisibleElements:R,noPanClassName:se,noDragClassName:Ae,disableKeyboardA11y:Oe,nodeExtent:Ce,rfId:Ge}),S.jsx("div",{className:"react-flow__viewport-portal"})]})})}LV.displayName="GraphView";const $fe=ie.memo(LV),Nq=({nodes:n,edges:e,defaultNodes:t,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l}={})=>{const u=new Map,c=new Map,d=new Map,h=new Map,p=r??e??[],g=t??n??[],x=a??[0,0],b=l??c0;Y8(d,h,p),PR(g,u,c,{nodeOrigin:x,nodeExtent:b,elevateNodesOnSelect:!1});let y=[0,0,1];if(o&&i&&s){const E=ib(u,{filter:k=>!!((k.width||k.initialWidth)&&(k.height||k.initialHeight))}),{x:T,y:I,zoom:N}=wP(E,i,s,.5,2,.1);y=[T,I,N]}return{rfId:"1",width:0,height:0,transform:y,nodes:g,nodeLookup:u,parentLookup:c,edges:p,edgeLookup:h,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:t!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:c0,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:rv.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...O8},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:yue,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Hfe=({nodes:n,edges:e,defaultNodes:t,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l})=>cde((u,c)=>({...Nq({nodes:n,edges:e,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l,defaultNodes:t,defaultEdges:r}),setNodes:d=>{const{nodeLookup:h,parentLookup:p,nodeOrigin:g,elevateNodesOnSelect:x}=c();PR(d,h,p,{nodeOrigin:g,nodeExtent:l,elevateNodesOnSelect:x,checkEquality:!0}),u({nodes:d})},setEdges:d=>{const{connectionLookup:h,edgeLookup:p}=c();Y8(h,p,d),u({edges:d})},setDefaultNodesAndEdges:(d,h)=>{if(d){const{setNodes:p}=c();p(d),u({hasDefaultNodes:!0})}if(h){const{setEdges:p}=c();p(h),u({hasDefaultEdges:!0})}},updateNodeInternals:(d,h={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:g,parentLookup:x,fitViewOnInit:b,fitViewDone:y,fitViewOnInitOptions:E,domNode:T,nodeOrigin:I,nodeExtent:N,debug:k,fitViewSync:q}=c(),{changes:L,updatedInternals:R}=kue(d,g,x,T,I,N);if(R){if(Rue(g,x,{nodeOrigin:I,nodeExtent:N}),h.triggerFitView){let P=y;!y&&b&&(P=q({...E,nodes:E?.nodes})),u({fitViewDone:P})}else u({});L?.length>0&&(k&&console.log("React Flow: trigger node changes",L),p?.(L))}},updateNodePositions:(d,h=!1)=>{const p=[],g=[];for(const[x,b]of d){const y=!!(b?.expandParent&&b?.parentId&&b?.position),E={id:x,type:"position",position:y?{x:Math.max(0,b.position.x),y:Math.max(0,b.position.y)}:b.position,dragging:h};y&&p.push({id:x,parentId:b.parentId,rect:{...b.internals.positionAbsolute,width:b.measured.width,height:b.measured.height}}),g.push(E)}if(p.length>0){const{nodeLookup:x,parentLookup:b,nodeOrigin:y}=c(),E=IP(p,x,b,y);g.push(...E)}c().triggerNodeChanges(g)},triggerNodeChanges:d=>{const{onNodesChange:h,setNodes:p,nodes:g,hasDefaultNodes:x,debug:b}=c();if(d?.length){if(x){const y=Rde(d,g);p(y)}b&&console.log("React Flow: trigger node changes",d),h?.(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:h,setEdges:p,edges:g,hasDefaultEdges:x,debug:b}=c();if(d?.length){if(x){const y=Nde(d,g);p(y)}b&&console.log("React Flow: trigger edge changes",d),h?.(d)}},addSelectedNodes:d=>{const{multiSelectionActive:h,edgeLookup:p,nodeLookup:g,triggerNodeChanges:x,triggerEdgeChanges:b}=c();if(h){const y=d.map(E=>Up(E,!0));x(y);return}x(vy(g,new Set([...d]),!0)),b(vy(p))},addSelectedEdges:d=>{const{multiSelectionActive:h,edgeLookup:p,nodeLookup:g,triggerNodeChanges:x,triggerEdgeChanges:b}=c();if(h){const y=d.map(E=>Up(E,!0));b(y);return}b(vy(p,new Set([...d]))),x(vy(g,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:h}={})=>{const{edges:p,nodes:g,nodeLookup:x,triggerNodeChanges:b,triggerEdgeChanges:y}=c(),E=d||g,T=h||p,I=E.map(k=>{const q=x.get(k.id);return q&&(q.selected=!1),Up(k.id,!1)}),N=T.map(k=>Up(k.id,!1));b(I),y(N)},setMinZoom:d=>{const{panZoom:h,maxZoom:p}=c();h?.setScaleExtent([d,p]),u({minZoom:d})},setMaxZoom:d=>{const{panZoom:h,minZoom:p}=c();h?.setScaleExtent([p,d]),u({maxZoom:d})},setTranslateExtent:d=>{c().panZoom?.setTranslateExtent(d),u({translateExtent:d})},setPaneClickDistance:d=>{c().panZoom?.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:h,triggerNodeChanges:p,triggerEdgeChanges:g}=c(),x=h.reduce((y,E)=>E.selected?[...y,Up(E.id,!1)]:y,[]),b=d.reduce((y,E)=>E.selected?[...y,Up(E.id,!1)]:y,[]);p(x),g(b)},setNodeExtent:d=>{const{nodes:h,nodeLookup:p,parentLookup:g,nodeOrigin:x,elevateNodesOnSelect:b,nodeExtent:y}=c();d[0][0]===y[0][0]&&d[0][1]===y[0][1]&&d[1][0]===y[1][0]&&d[1][1]===y[1][1]||(PR(h,p,g,{nodeOrigin:x,nodeExtent:d,elevateNodesOnSelect:b,checkEquality:!1}),u({nodeExtent:d}))},panBy:d=>{const{transform:h,width:p,height:g,panZoom:x,translateExtent:b}=c();return Oue({delta:d,panZoom:x,transform:h,translateExtent:b,width:p,height:g})},fitView:d=>{const{panZoom:h,width:p,height:g,minZoom:x,maxZoom:b,nodeLookup:y}=c();if(!h)return Promise.resolve(!1);const E=MR(y,d);return IR({nodes:E,width:p,height:g,panZoom:h,minZoom:x,maxZoom:b},d)},fitViewSync:d=>{const{panZoom:h,width:p,height:g,minZoom:x,maxZoom:b,nodeLookup:y}=c();if(!h)return!1;const E=MR(y,d);return IR({nodes:E,width:p,height:g,panZoom:h,minZoom:x,maxZoom:b},d),E.size>0},cancelConnection:()=>{u({connection:{...O8}})},updateConnection:d=>{u({connection:d})},reset:()=>u({...Nq()})}),Object.is);function Gfe({initialNodes:n,initialEdges:e,defaultNodes:t,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:a,nodeExtent:l,children:u}){const[c]=ie.useState(()=>Hfe({nodes:n,edges:e,defaultNodes:t,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:a,nodeExtent:l}));return S.jsx(ude,{value:c,children:S.jsx(Lde,{children:u})})}function Xfe({children:n,nodes:e,edges:t,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:a,nodeOrigin:l,nodeExtent:u}){return ie.useContext(mT)?S.jsx(S.Fragment,{children:n}):S.jsx(Gfe,{initialNodes:e,initialEdges:t,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:a,nodeOrigin:l,nodeExtent:u,children:n})}const Kfe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Qfe({nodes:n,edges:e,defaultNodes:t,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:E,onNodeMouseMove:T,onNodeMouseLeave:I,onNodeContextMenu:N,onNodeDoubleClick:k,onNodeDragStart:q,onNodeDrag:L,onNodeDragStop:R,onNodesDelete:P,onEdgesDelete:F,onDelete:z,onSelectionChange:V,onSelectionDragStart:W,onSelectionDrag:Q,onSelectionDragStop:X,onSelectionContextMenu:re,onSelectionStart:G,onSelectionEnd:Y,onBeforeDelete:te,connectionMode:Z,connectionLineType:fe=lh.Bezier,connectionLineStyle:ge,connectionLineComponent:ce,connectionLineContainerStyle:ye,deleteKeyCode:be="Backspace",selectionKeyCode:Ee="Shift",selectionOnDrag:Me=!1,selectionMode:qe=u0.Full,panActivationKeyCode:Ue="Space",multiSelectionKeyCode:Ye=RE()?"Meta":"Control",zoomActivationKeyCode:Ne=RE()?"Meta":"Control",snapToGrid:ke,snapGrid:me,onlyRenderVisibleElements:ht=!1,selectNodesOnDrag:ct,nodesDraggable:Mt,nodesConnectable:xe,nodesFocusable:Te,nodeOrigin:Ae=uV,edgesFocusable:le,edgesReconnectable:se,elementsSelectable:Oe=!0,defaultViewport:Ce=Sde,minZoom:Ge=.5,maxZoom:at=2,translateExtent:Lt=c0,preventScrolling:Dt=!0,nodeExtent:Jt,defaultMarkerColor:Cn="#b1b1b7",zoomOnScroll:Vt=!0,zoomOnPinch:hn=!0,panOnScroll:vn=!1,panOnScrollSpeed:$t=.5,panOnScrollMode:un=cm.Free,zoomOnDoubleClick:He=!0,panOnDrag:At=!0,onPaneClick:on,onPaneMouseEnter:$e,onPaneMouseMove:Kt,onPaneMouseLeave:_t,onPaneScroll:ee,onPaneContextMenu:gn,paneClickDistance:Ft=0,nodeClickDistance:Hn=0,children:Lr,onReconnect:ai,onReconnectStart:gr,onReconnectEnd:hi,onEdgeContextMenu:ui,onEdgeDoubleClick:Vl,onEdgeMouseEnter:Fa,onEdgeMouseMove:Wo,onEdgeMouseLeave:To,reconnectRadius:Mo=10,onNodesChange:Io,onEdgesChange:no,noDragClassName:su="nodrag",noWheelClassName:Wl="nowheel",noPanClassName:hc="nopan",fitView:Ao,fitViewOptions:ou,connectOnClick:au,attributionPosition:lu,proOptions:cu,defaultEdgeOptions:uu,elevateNodesOnSelect:du,elevateEdgesOnSelect:we,disableKeyboardA11y:nt=!1,autoPanOnConnect:yt,autoPanOnNodeDrag:ut,autoPanSpeed:it,connectionRadius:Gt,isValidConnection:pn,onError:_n,style:Tn,id:Kn,nodeDragThreshold:Wn,viewport:nn,onViewportChange:qn,width:Zn,height:Tr,colorMode:Mr="light",debug:yr,...kn},Dr){const ar=Kn||"1",ss=Ide(Mr);return S.jsx("div",{"data-testid":"rf__wrapper",...kn,style:{...Tn,...Kfe},ref:Dr,className:to(["react-flow",i,ss]),id:Kn,children:S.jsxs(Xfe,{nodes:n,edges:e,width:Zn,height:Tr,fitView:Ao,nodeOrigin:Ae,nodeExtent:Jt,children:[S.jsx($fe,{onInit:u,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:E,onNodeMouseMove:T,onNodeMouseLeave:I,onNodeContextMenu:N,onNodeDoubleClick:k,nodeTypes:s,edgeTypes:o,connectionLineType:fe,connectionLineStyle:ge,connectionLineComponent:ce,connectionLineContainerStyle:ye,selectionKeyCode:Ee,selectionOnDrag:Me,selectionMode:qe,deleteKeyCode:be,multiSelectionKeyCode:Ye,panActivationKeyCode:Ue,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:ht,defaultViewport:Ce,translateExtent:Lt,minZoom:Ge,maxZoom:at,preventScrolling:Dt,zoomOnScroll:Vt,zoomOnPinch:hn,zoomOnDoubleClick:He,panOnScroll:vn,panOnScrollSpeed:$t,panOnScrollMode:un,panOnDrag:At,onPaneClick:on,onPaneMouseEnter:$e,onPaneMouseMove:Kt,onPaneMouseLeave:_t,onPaneScroll:ee,onPaneContextMenu:gn,paneClickDistance:Ft,nodeClickDistance:Hn,onSelectionContextMenu:re,onSelectionStart:G,onSelectionEnd:Y,onReconnect:ai,onReconnectStart:gr,onReconnectEnd:hi,onEdgeContextMenu:ui,onEdgeDoubleClick:Vl,onEdgeMouseEnter:Fa,onEdgeMouseMove:Wo,onEdgeMouseLeave:To,reconnectRadius:Mo,defaultMarkerColor:Cn,noDragClassName:su,noWheelClassName:Wl,noPanClassName:hc,rfId:ar,disableKeyboardA11y:nt,nodeExtent:Jt,viewport:nn,onViewportChange:qn}),S.jsx(Mde,{nodes:n,edges:e,defaultNodes:t,defaultEdges:r,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:Mt,nodesConnectable:xe,nodesFocusable:Te,edgesFocusable:le,edgesReconnectable:se,elementsSelectable:Oe,elevateNodesOnSelect:du,elevateEdgesOnSelect:we,minZoom:Ge,maxZoom:at,nodeExtent:Jt,onNodesChange:Io,onEdgesChange:no,snapToGrid:ke,snapGrid:me,connectionMode:Z,translateExtent:Lt,connectOnClick:au,defaultEdgeOptions:uu,fitView:Ao,fitViewOptions:ou,onNodesDelete:P,onEdgesDelete:F,onDelete:z,onNodeDragStart:q,onNodeDrag:L,onNodeDragStop:R,onSelectionDrag:Q,onSelectionDragStart:W,onSelectionDragStop:X,onMove:c,onMoveStart:d,onMoveEnd:h,noPanClassName:hc,nodeOrigin:Ae,rfId:ar,autoPanOnConnect:yt,autoPanOnNodeDrag:ut,autoPanSpeed:it,onError:_n,connectionRadius:Gt,isValidConnection:pn,selectNodesOnDrag:ct,nodeDragThreshold:Wn,onBeforeDelete:te,paneClickDistance:Ft,debug:yr}),S.jsx(wde,{onSelectionChange:V}),Lr,S.jsx(yde,{proOptions:cu,position:lu}),S.jsx(mde,{rfId:ar,disableKeyboardA11y:nt})]})})}var Yfe=fV(Qfe);const Jfe=n=>n.domNode?.querySelector(".react-flow__edgelabel-renderer");function Zfe({children:n}){const e=ti(Jfe);return e?M2.createPortal(n,e):null}function ehe({dimensions:n,lineWidth:e,variant:t,className:r}){return S.jsx("path",{strokeWidth:e,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:to(["react-flow__background-pattern",t,r])})}function the({radius:n,className:e}){return S.jsx("circle",{cx:n,cy:n,r:n,className:to(["react-flow__background-pattern","dots",e])})}var Hd;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Hd||(Hd={}));const nhe={[Hd.Dots]:1,[Hd.Lines]:1,[Hd.Cross]:6},rhe=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function DV({id:n,variant:e=Hd.Dots,gap:t=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:a,style:l,className:u,patternClassName:c}){const d=ie.useRef(null),{transform:h,patternId:p}=ti(rhe,xs),g=r||nhe[e],x=e===Hd.Dots,b=e===Hd.Cross,y=Array.isArray(t)?t:[t,t],E=[y[0]*h[2]||1,y[1]*h[2]||1],T=g*h[2],I=Array.isArray(s)?s:[s,s],N=b?[T,T]:E,k=[I[0]*h[2]||1+N[0]/2,I[1]*h[2]||1+N[1]/2],q=`${p}${n||""}`;return S.jsxs("svg",{className:to(["react-flow__background",u]),style:{...l,...gT,"--xy-background-color-props":a,"--xy-background-pattern-color-props":o},ref:d,"data-testid":"rf__background",children:[S.jsx("pattern",{id:q,x:h[0]%E[0],y:h[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`,children:x?S.jsx(the,{radius:T/2,className:c}):S.jsx(ehe,{dimensions:N,lineWidth:i,variant:e,className:c})}),S.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${q})`})]})}DV.displayName="Background";const ihe=ie.memo(DV);function she(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:S.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ohe(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:S.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ahe(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:S.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function lhe(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function che(){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:S.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function qw({children:n,className:e,...t}){return S.jsx("button",{type:"button",className:to(["react-flow__controls-button",e]),...t,children:n})}const uhe=n=>({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]<=n.minZoom,maxZoomReached:n.transform[2]>=n.maxZoom});function FV({style:n,showZoom:e=!0,showFitView:t=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:l,className:u,children:c,position:d="bottom-left",orientation:h="vertical","aria-label":p="React Flow controls"}){const g=is(),{isInteractive:x,minZoomReached:b,maxZoomReached:y}=ti(uhe,xs),{zoomIn:E,zoomOut:T,fitView:I}=ob(),N=()=>{E(),s?.()},k=()=>{T(),o?.()},q=()=>{I(i),a?.()},L=()=>{g.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),l?.(!x)},R=h==="horizontal"?"horizontal":"vertical";return S.jsxs(AP,{className:to(["react-flow__controls",R,u]),position:d,style:n,"data-testid":"rf__controls","aria-label":p,children:[e&&S.jsxs(S.Fragment,{children:[S.jsx(qw,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y,children:S.jsx(she,{})}),S.jsx(qw,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:S.jsx(ohe,{})})]}),t&&S.jsx(qw,{className:"react-flow__controls-fitview",onClick:q,title:"fit view","aria-label":"fit view",children:S.jsx(ahe,{})}),r&&S.jsx(qw,{className:"react-flow__controls-interactive",onClick:L,title:"toggle interactivity","aria-label":"toggle interactivity",children:x?S.jsx(che,{}):S.jsx(lhe,{})}),c]})}FV.displayName="Controls";const dhe=ie.memo(FV);function fhe({id:n,x:e,y:t,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,selected:h,onClick:p}){const{background:g,backgroundColor:x}=s||{},b=o||g||x;return S.jsx("rect",{className:to(["react-flow__minimap-node",{selected:h},u]),x:e,y:t,rx:c,ry:c,width:r,height:i,style:{fill:b,stroke:a,strokeWidth:l},shapeRendering:d,onClick:p?y=>p(y,n):void 0})}const hhe=ie.memo(fhe),phe=n=>n.nodes.map(e=>e.id),pA=n=>n instanceof Function?n:()=>n;function mhe({nodeStrokeColor:n,nodeColor:e,nodeClassName:t="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=hhe,onClick:o}){const a=ti(phe,xs),l=pA(e),u=pA(n),c=pA(t),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return S.jsx(S.Fragment,{children:a.map(h=>S.jsx(yhe,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:u,nodeClassNameFunc:c,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:d},h))})}function ghe({id:n,nodeColorFunc:e,nodeStrokeColorFunc:t,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:a,onClick:l}){const{node:u,x:c,y:d,width:h,height:p}=ti(g=>{const x=g.nodeLookup.get(n),{x:b,y}=x.internals.positionAbsolute,{width:E,height:T}=cf(x);return{node:x,x:b,y,width:E,height:T}},xs);return!u||u.hidden||!V8(u)?null:S.jsx(a,{x:c,y:d,width:h,height:p,style:u.style,selected:!!u.selected,className:r(u),color:e(u),borderRadius:i,strokeColor:t(u),strokeWidth:s,shapeRendering:o,onClick:l,id:u.id})}const yhe=ie.memo(ghe);var vhe=ie.memo(mhe);const _he=200,xhe=150,bhe=n=>{const e={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:e,boundingRect:n.nodeLookup.size>0?U8(ib(n.nodeLookup),e):e,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},whe="react-flow__minimap-desc";function qV({style:n,className:e,nodeStrokeColor:t,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:a,bgColor:l,maskColor:u,maskStrokeColor:c,maskStrokeWidth:d,position:h="bottom-right",onClick:p,onNodeClick:g,pannable:x=!1,zoomable:b=!1,ariaLabel:y="React Flow mini map",inversePan:E,zoomStep:T=10,offsetScale:I=5}){const N=is(),k=ie.useRef(null),{boundingRect:q,viewBB:L,rfId:R,panZoom:P,translateExtent:F,flowWidth:z,flowHeight:V}=ti(bhe,xs),W=n?.width??_he,Q=n?.height??xhe,X=q.width/W,re=q.height/Q,G=Math.max(X,re),Y=G*W,te=G*Q,Z=I*G,fe=q.x-(Y-q.width)/2-Z,ge=q.y-(te-q.height)/2-Z,ce=Y+Z*2,ye=te+Z*2,be=`${whe}-${R}`,Ee=ie.useRef(0),Me=ie.useRef();Ee.current=G,ie.useEffect(()=>{if(k.current&&P)return Me.current=zue({domNode:k.current,panZoom:P,getTransform:()=>N.getState().transform,getViewScale:()=>Ee.current}),()=>{Me.current?.destroy()}},[P]),ie.useEffect(()=>{Me.current?.update({translateExtent:F,width:z,height:V,inversePan:E,pannable:x,zoomStep:T,zoomable:b})},[x,b,E,T,F,z,V]);const qe=p?Ye=>{const[Ne,ke]=Me.current?.pointer(Ye)||[0,0];p(Ye,{x:Ne,y:ke})}:void 0,Ue=g?ie.useCallback((Ye,Ne)=>{const ke=N.getState().nodeLookup.get(Ne);g(Ye,ke)},[]):void 0;return S.jsx(AP,{position:h,style:{...n,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*G:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof t=="string"?t:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:to(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:S.jsxs("svg",{width:W,height:Q,viewBox:`${fe} ${ge} ${ce} ${ye}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":be,ref:k,onClick:qe,children:[y&&S.jsx("title",{id:be,children:y}),S.jsx(vhe,{onClick:Ue,nodeColor:r,nodeStrokeColor:t,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),S.jsx("path",{className:"react-flow__minimap-mask",d:`M${fe-Z},${ge-Z}h${ce+Z*2}v${ye+Z*2}h${-ce-Z*2}z
        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}qV.displayName="MiniMap";const She=ie.memo(qV);function Ehe({nodeId:n,position:e,variant:t=_x.Handle,className:r,style:i={},children:s,color:o,minWidth:a=10,minHeight:l=10,maxWidth:u=Number.MAX_VALUE,maxHeight:c=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:h,onResizeStart:p,onResize:g,onResizeEnd:x}){const b=gV(),y=typeof n=="string"?n:b,E=is(),T=ie.useRef(null),I=t===_x.Line?"right":"bottom-right",N=e??I,k=ie.useRef(null);ie.useEffect(()=>{if(!(!T.current||!y))return k.current||(k.current=rde({domNode:T.current,nodeId:y,getStoreItems:()=>{const{nodeLookup:P,transform:F,snapGrid:z,snapToGrid:V,nodeOrigin:W,domNode:Q}=E.getState();return{nodeLookup:P,transform:F,snapGrid:z,snapToGrid:V,nodeOrigin:W,paneDomNode:Q}},onChange:(P,F)=>{const{triggerNodeChanges:z,nodeLookup:V,parentLookup:W,nodeOrigin:Q}=E.getState(),X=[],re={x:P.x,y:P.y},G=V.get(y);if(G&&G.expandParent&&G.parentId){const Y=G.origin??Q,te=P.width??G.measured.width,Z=P.height??G.measured.height,fe={id:G.id,parentId:G.parentId,rect:{width:te,height:Z,...W8({x:P.x??G.position.x,y:P.y??G.position.y},{width:te,height:Z},G.parentId,V,Y)}},ge=IP([fe],V,W,Q);X.push(...ge),re.x=P.x?Math.max(Y[0]*te,P.x):void 0,re.y=P.y?Math.max(Y[1]*Z,P.y):void 0}if(re.x!==void 0&&re.y!==void 0){const Y={id:y,type:"position",position:{...re}};X.push(Y)}if(P.width!==void 0&&P.height!==void 0){const Y={id:y,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:P.width,height:P.height}};X.push(Y)}for(const Y of F){const te={...Y,type:"position"};X.push(te)}z(X)},onEnd:()=>{const P={id:y,type:"dimensions",resizing:!1};E.getState().triggerNodeChanges([P])}})),k.current.update({controlPosition:N,boundaries:{minWidth:a,minHeight:l,maxWidth:u,maxHeight:c},keepAspectRatio:d,onResizeStart:p,onResize:g,onResizeEnd:x,shouldResize:h}),()=>{k.current?.destroy()}},[N,a,l,u,c,d,p,g,x,h]);const q=N.split("-"),L=t===_x.Line?"borderColor":"backgroundColor",R=o?{...i,[L]:o}:i;return S.jsx("div",{className:to(["react-flow__resize-control","nodrag",...q,t,r]),ref:T,style:R,children:s})}ie.memo(Ehe);const fi="icon-[solar--home-outline]",RP=$se({shape:ne.object({name:ne.string().min(1),probability:ku(),limit:ku(),image:ne.instanceof(FileList,{message:"You must upload a file."}).transform(n=>n[0]).refine(n=>(n&&n.size<5*1024*1024,!0),{message:sl.text("File size must be less than 5MB")}).refine(n=>n?["image/png","image/jpeg","image/webp"].includes(n.type):!0,{message:"Only PNG/JPEG/WEBP files are allowed."}).optional()}),filter:ca}),Pq=n=>{const e=Bt.c(73),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(RP.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{name:"",limit:32,probability:100,...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I,N,k,q,L;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const W=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;p=W.base(),e[22]!==c||e[23]!==t?(g=da({form:c,mutation:t}),e[22]=c,e[23]=t,e[24]=g):g=e[24];let Q;e[25]===Symbol.for("react.memo_cache_sentinel")?(Q={highlight:!0},e[25]=Q):Q=e[25],e[26]!==c.formState.errors.root?(x=S.jsx(po,{variant:Q,error:c.formState.errors.root}),e[26]=c.formState.errors.root,e[27]=x):x=e[27];const X=c.formState;let re;e[28]===Symbol.for("react.memo_cache_sentinel")?(re=S.jsx(he,{label:"Region name (label)"}),e[28]=re):re=e[28];const G=W.input();let Y;e[29]!==c?(Y=c.register("name"),e[29]=c,e[30]=Y):Y=e[30];const te=S.jsx("input",{type:"text",className:G,...Y});e[31]!==c.formState||e[32]!==te?(b=S.jsx(xr,{formState:X,name:"name",label:re,children:te}),e[31]=c.formState,e[32]=te,e[33]=b):b=e[33];const Z=c.formState;let fe,ge;e[34]===Symbol.for("react.memo_cache_sentinel")?(fe=S.jsx(he,{label:"Region image (label)"}),ge=S.jsx(he,{label:"Region image (hint)"}),e[34]=fe,e[35]=ge):(fe=e[34],ge=e[35]);const ce=W.input();let ye;e[36]!==c?(ye=c.register("image"),e[36]=c,e[37]=ye):ye=e[37];const be=S.jsx("input",{type:"file",className:ce,...ye});e[38]!==c.formState||e[39]!==be?(y=S.jsx(xr,{formState:Z,name:"image",label:fe,hint:ge,children:be}),e[38]=c.formState,e[39]=be,e[40]=y):y=e[40];const Ee=c.formState;let Me,qe;e[41]===Symbol.for("react.memo_cache_sentinel")?(Me=S.jsx(he,{label:"Region spawn probability (label)"}),qe=S.jsx(he,{label:"Region spawn probability (hint)"}),e[41]=Me,e[42]=qe):(Me=e[41],qe=e[42]);const Ue=W.input();let Ye;e[43]!==c?(Ye=c.register("probability"),e[43]=c,e[44]=Ye):Ye=e[44];const Ne=S.jsx("input",{type:"number",className:Ue,min:.5,max:100,step:.5,...Ye});e[45]!==c.formState||e[46]!==Ne?(E=S.jsx(xr,{formState:Ee,name:"probability",label:Me,hint:qe,required:!0,children:Ne}),e[45]=c.formState,e[46]=Ne,e[47]=E):E=e[47],d=xr,N=c.formState,k="limit",e[48]===Symbol.for("react.memo_cache_sentinel")?(q=S.jsx(he,{label:"Region limit (label)"}),L=S.jsx(he,{label:"Region limit (hint)"}),e[48]=q,e[49]=L):(q=e[48],L=e[49]),h=!0,T="number",I=W.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I,e[18]=N,e[19]=k,e[20]=q,e[21]=L}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17],N=e[18],k=e[19],q=e[20],L=e[21];let R;e[50]!==c?(R=c.register("limit"),e[50]=c,e[51]=R):R=e[51];let P;e[52]!==R||e[53]!==T||e[54]!==I?(P=S.jsx("input",{type:T,className:I,min:1,step:1,...R}),e[52]=R,e[53]=T,e[54]=I,e[55]=P):P=e[55];let F;e[56]!==d||e[57]!==h||e[58]!==P||e[59]!==N||e[60]!==k||e[61]!==q||e[62]!==L?(F=S.jsx(d,{formState:N,name:k,label:q,hint:L,required:h,children:P}),e[56]=d,e[57]=h,e[58]=P,e[59]=N,e[60]=k,e[61]=q,e[62]=L,e[63]=F):F=e[63];let z;e[64]===Symbol.for("react.memo_cache_sentinel")?(z=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:X6,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[64]=z):z=e[64];let V;return e[65]!==p||e[66]!==g||e[67]!==x||e[68]!==b||e[69]!==y||e[70]!==E||e[71]!==F?(V=S.jsxs("form",{className:p,onSubmit:g,children:[x,b,y,E,F,z]}),e[65]=p,e[66]=g,e[67]=x,e[68]=b,e[69]=y,e[70]=E,e[71]=F,e[72]=V):V=e[72],V},lv=async n=>new Promise((e,t)=>{const r=new Image;r.src=URL.createObjectURL(n),r.onload=()=>{const i=document.createElement("canvas");i.width=r.width,i.height=r.height;const s=i.getContext("2d");if(s)return s.drawImage(r,0,0),e(i.toDataURL("image/webp",1));t(new Error("Failed to convert image to WebP-64"))},r.onerror=()=>{t(new Error("Failed to load image"))}}),mA=Is(),The=[mA({name:"name",header(){return S.jsx(he,{label:"Region name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{to:"/$locale/apps/derivean/root/region/$id/view",params:{locale:t,id:n.id},children:e})},size:18}),mA({name:"probability",header(){return S.jsx(he,{label:"Region probability (label)"})},render({value:n}){return S.jsxs(ia,{children:[$r({number:n}),"%"]})},size:14}),mA({name:"limit",header(){return S.jsx(he,{label:"Region limit (label)"})},render({value:n}){return $r({number:n})},size:18})],jV=({table:n,...e})=>{const t=ji([["Region"]]);return S.jsx(Ts,{table:Ms({...n,columns:The}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create region (menu)"}),textTitle:S.jsx(he,{label:"Create region (modal)"}),icon:gE,children:({close:r})=>S.jsx(Pq,{mutation:or({async mutationFn({image:i,...s}){return An.transaction().execute(async o=>o.insertInto("Region").values({id:Xr(),...s,image:i?await lv(i):null}).execute())},async onSuccess(){await t(),r()}})})})})},row({data:r}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit region (modal)"}),icon:gE,children:({close:i})=>S.jsx(Pq,{defaultValues:r,mutation:or({async mutationFn({image:s,...o}){return An.transaction().execute(async a=>a.updateTable("Region").set({...o,image:s?await lv(s):null}).where("id","=",r.id).execute())},async onSuccess(){await t(),i()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete region (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async i=>i.deleteFrom("Region").where("id","=",r.id).execute()),textContent:S.jsx(he,{label:"Delete region (content)"}),textToast:"Delete region",invalidator:t})})]})}},...e})},Mhe=n=>{const e=Bt.c(3);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=S.jsx(he,{label:"Select regions (title)"}),e[0]=t):t=e[0];let r;return e[1]!==n?(r=S.jsx(T6,{icon:gE,table:jV,textTitle:t,render:Ahe,queryKey:"Region",query:Che,...n}),e[1]=n,e[2]=r):r=e[2],r};function Ihe(n){const{entity:e}=n;return S.jsx("div",{className:fr(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:e.name})}function Ahe(n){const{entities:e}=n;return S.jsx(Ch,{items:e,css:{base:["flex","flex-row","gap-2"]},render:Ihe})}async function Che(n){const{filter:e,cursor:t}=n;return An.transaction().execute(async r=>zi({select:r.selectFrom("Region as r").selectAll(),output:RP.entity,query(i){const{select:s,where:o}=i;let a=s;if(o?.id&&(a=a.where("r.id","=",o.id)),o?.idIn&&(a=a.where("r.id","in",o.idIn)),o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("r.id","like",l),u("r.name","like",l)]))}return a},filter:e,cursor:t}))}const NP=kse({shape:ne.object({name:ne.string().min(1),cycles:ku(),sort:ku(),limit:ku(),regionIds:ne.array(ne.string()).optional(),image:ne.instanceof(FileList,{message:"You must upload a file."}).transform(n=>n[0]).refine(n=>(n&&n.size<5*1024*1024,!0),{message:sl.text("File size must be less than 5MB")}).refine(n=>n?["image/png","image/jpeg","image/webp"].includes(n.type):!0,{message:"Only PNG/JPEG/WEBP files are allowed."}).optional()}),filter:ca.merge(ne.object({name:ne.string().optional()}))}),PE=n=>{const e=Bt.c(89),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(NP.shape),e[0]=l):l=e[0];let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[1]=u):u=e[1];let c;e[2]!==r?(c={resolver:l,defaultValues:{cycles:1,sort:0,limit:1,regionIds:u,...r}},e[2]=r,e[3]=c):c=e[3];const d=So(c);let h,p,g,x,b,y,E,T,I,N,k,q,L,R,P;if(e[4]!==o||e[5]!==d||e[6]!==t||e[7]!==a||e[8]!==i){const X=a({...i,isLoading:d.formState.isLoading,isSubmitting:d.formState.isSubmitting,css:o}).slots;g=X.base(),e[24]!==d||e[25]!==t?(x=da({form:d,mutation:t}),e[24]=d,e[25]=t,e[26]=x):x=e[26];let re;e[27]===Symbol.for("react.memo_cache_sentinel")?(re={highlight:!0},e[27]=re):re=e[27],e[28]!==d.formState.errors.root?(b=S.jsx(po,{variant:re,error:d.formState.errors.root}),e[28]=d.formState.errors.root,e[29]=b):b=e[29];const G=d.formState;let Y;e[30]===Symbol.for("react.memo_cache_sentinel")?(Y=S.jsx(he,{label:"Building name (label)"}),e[30]=Y):Y=e[30];const te=X.input();let Z;e[31]!==d?(Z=d.register("name"),e[31]=d,e[32]=Z):Z=e[32];const fe=S.jsx("input",{type:"text",className:te,...Z});e[33]!==d.formState||e[34]!==fe?(y=S.jsx(xr,{formState:G,name:"name",label:Y,required:!0,children:fe}),e[33]=d.formState,e[34]=fe,e[35]=y):y=e[35];const ge=d.formState;let ce,ye;e[36]===Symbol.for("react.memo_cache_sentinel")?(ce=S.jsx(he,{label:"Construction cycles (label)"}),ye=S.jsx(he,{label:"Amount of cycles to build this building (hint)"}),e[36]=ce,e[37]=ye):(ce=e[36],ye=e[37]);const be=X.input();let Ee;e[38]!==d?(Ee=d.register("cycles"),e[38]=d,e[39]=Ee):Ee=e[39];const Me=S.jsx("input",{type:"number",className:be,min:1,...Ee});e[40]!==d.formState||e[41]!==Me?(E=S.jsx(xr,{formState:ge,name:"cycles",label:ce,hint:ye,required:!0,children:Me}),e[40]=d.formState,e[41]=Me,e[42]=E):E=e[42];const qe=d.formState;let Ue,Ye;e[43]===Symbol.for("react.memo_cache_sentinel")?(Ue=S.jsx(he,{label:"Building limit (label)"}),Ye=S.jsx(he,{label:"Maximum number of building a player can build (hint)"}),e[43]=Ue,e[44]=Ye):(Ue=e[43],Ye=e[44]);const Ne=X.input();let ke;e[45]!==d?(ke=d.register("limit"),e[45]=d,e[46]=ke):ke=e[46];const me=S.jsx("input",{type:"number",className:Ne,min:1,...ke});e[47]!==d.formState||e[48]!==me?(T=S.jsx(xr,{formState:qe,name:"limit",label:Ue,hint:Ye,required:!0,children:me}),e[47]=d.formState,e[48]=me,e[49]=T):T=e[49];const ht=d.formState;let ct,Mt;e[50]===Symbol.for("react.memo_cache_sentinel")?(ct=S.jsx(he,{label:"Blueprint sort (label)"}),Mt=S.jsx(he,{label:"Sort blueprints by this number (hint)"}),e[50]=ct,e[51]=Mt):(ct=e[50],Mt=e[51]);const xe=X.input();let Te;e[52]!==d?(Te=d.register("sort"),e[52]=d,e[53]=Te):Te=e[53];const Ae=S.jsx("input",{type:"number",className:xe,min:0,...Te});e[54]!==d.formState||e[55]!==Ae?(I=S.jsx(xr,{formState:ht,name:"sort",label:ct,hint:Mt,required:!0,children:Ae}),e[54]=d.formState,e[55]=Ae,e[56]=I):I=e[56];let le;e[57]===Symbol.for("react.memo_cache_sentinel")?(le=S.jsx(he,{label:"Regions (label)"}),e[57]=le):le=e[57];let se;e[58]!==d.control?(se=S.jsx(La,{control:d.control,name:"regionIds",render:Rhe}),e[58]=d.control,e[59]=se):se=e[59],e[60]!==d.formState||e[61]!==se?(N=S.jsx(xr,{formState:d.formState,name:"regionIds",label:le,children:se}),e[60]=d.formState,e[61]=se,e[62]=N):N=e[62],h=xr,L=d.formState,R="image",e[63]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsx(he,{label:"Building image (label)"}),p=S.jsx(he,{label:"Building image (hint)"}),e[63]=p,e[64]=P):(p=e[63],P=e[64]),k="file",q=X.input(),e[4]=o,e[5]=d,e[6]=t,e[7]=a,e[8]=i,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I,e[18]=N,e[19]=k,e[20]=q,e[21]=L,e[22]=R,e[23]=P}else h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17],N=e[18],k=e[19],q=e[20],L=e[21],R=e[22],P=e[23];let F;e[65]!==d?(F=d.register("image"),e[65]=d,e[66]=F):F=e[66];let z;e[67]!==F||e[68]!==k||e[69]!==q?(z=S.jsx("input",{type:k,className:q,...F}),e[67]=F,e[68]=k,e[69]=q,e[70]=z):z=e[70];let V;e[71]!==h||e[72]!==p||e[73]!==z||e[74]!==L||e[75]!==R||e[76]!==P?(V=S.jsx(h,{formState:L,name:R,label:P,hint:p,children:z}),e[71]=h,e[72]=p,e[73]=z,e[74]=L,e[75]=R,e[76]=P,e[77]=V):V=e[77];let W;e[78]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:fi,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[78]=W):W=e[78];let Q;return e[79]!==g||e[80]!==x||e[81]!==b||e[82]!==y||e[83]!==E||e[84]!==T||e[85]!==I||e[86]!==N||e[87]!==V?(Q=S.jsxs("form",{className:g,onSubmit:x,children:[b,y,E,T,I,N,V,W]}),e[79]=g,e[80]=x,e[81]=b,e[82]=y,e[83]=E,e[84]=T,e[85]=I,e[86]=N,e[87]=V,e[88]=Q):Q=e[88],Q};function Rhe(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Mhe,{...r})}const cc="icon-[fluent-mdl2--production-floor-management]",Nhe=({id:n,data:e,isConnectable:t})=>{const{locale:r}=nr({from:"/$locale"}),i=Lm();return S.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:n}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:n}})},children:[S.jsx(av,{type:"target",position:er.Left,className:"w-4 h-4"}),S.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[S.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:n},children:e.name})}),S.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded-sm w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[S.jsxs("div",{className:"flex flex-row gap-2",children:[S.jsx(In,{icon:ns,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:n}}),S.jsx(In,{icon:cc,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:n}}),S.jsx(In,{icon:o6,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:n}})]}),S.jsx("div",{children:S.jsx(qm,{target:S.jsx(J0,{iconEnabled:js,css:{base:["text-red-500"]}}),outside:!0,textTitle:S.jsx(he,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=ji([["Editor"]]);return S.jsx(cl,{callback:async()=>An.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:S.jsx(he,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),S.jsx(av,{type:"source",position:er.Right,isConnectable:t,className:"w-4 h-4"})]})},Phe=n=>{const e=Bt.c(5),{nodeId:t}=n,{fitView:r}=ob();let i;e[0]!==r||e[1]!==t?(i=()=>{t&&setTimeout(()=>{r({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},e[0]=r,e[1]=t,e[2]=i):i=e[2];let s;return e[3]!==t?(s=[t],e[3]=t,e[4]=s):s=e[4],ie.useEffect(i,s),null},khe=({data:n,zoomTo:e})=>{const t=ji([]),r=or({async mutationFn({blueprintId:i,dependencyId:s}){return An.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Xr(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await t()}});return S.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:S.jsx("div",{style:{width:"95vw",height:"85vh"},children:S.jsxs(Yfe,{nodes:n.nodes,edges:n.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:ie.useMemo(()=>({blueprint(i){return S.jsx(Nhe,{...i})}}),[]),edgeTypes:ie.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:a,targetY:l,sourcePosition:u,targetPosition:c,style:d={},markerEnd:h}){const{setEdges:p}=ob(),[g,x,b]=SP({sourceX:s,sourceY:o,sourcePosition:u,targetX:a,targetY:l,targetPosition:c}),y=ji([]),E=or({async mutationFn({id:T}){return An.transaction().execute(async I=>{await I.deleteFrom("Blueprint_Dependency").where("id","=",T).execute()})},async onSuccess(){p(T=>T.filter(I=>I.id!==i)),await y()}});return S.jsxs(S.Fragment,{children:[S.jsx(ab,{path:g,markerEnd:h,style:d}),S.jsx(Zfe,{children:S.jsx("div",{className:fr("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${x}px,${b}px)`},children:S.jsx(br,{icon:E.isPending?ore:eP,onClick:()=>{E.mutate({id:i})}})})})]})}}),[]),children:[S.jsx(Phe,{nodeId:e}),S.jsx(dhe,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:S.jsx(qm,{target:S.jsx(J0,{className:"react-flow__controls-button",iconEnabled:fi}),outside:!1,textTitle:S.jsx(he,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=ji([["Editor"]]),{locale:o}=nr({from:"/$locale"}),a=Lm();return S.jsx(PE,{mutation:or({async mutationFn({image:l,regionIds:u,...c}){return An.transaction().execute(async d=>{const h=await d.insertInto("Blueprint").values({id:Xr(),...c,image:l?await dz(l):null}).returningAll().executeTakeFirstOrThrow();return u?.length&&await d.insertInto("Blueprint_Region").values(u.map(p=>({id:Xr(),blueprintId:h.id,regionId:p}))).execute(),h})},async onSuccess(l){await s(),a({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:l.id}}),i()}})})}})}),S.jsx(She,{}),S.jsx(ihe,{variant:Hd.Dots,gap:12,size:1})]})})})},Ohe=({graph:n,nodes:e,edges:t,size:r={width:344,height:36}})=>(n.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{n.setNode(i.id,{width:r.width,height:r.height})}),t.forEach(i=>{n.setEdge(i.source,i.target)}),n8.layout(n,{}),{nodes:e.map(i=>{const s=n.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:t}),LR=Ln("/$locale/apps/derivean/root/editor")({validateSearch:rs(ne.object({zoomTo:ne.string().optional()})),async loader({context:{kysely:n}}){const e=(await n.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),t=(await n.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return Ohe({graph:new n8.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...t]})},component(){const n=LR.useLoaderData(),{zoomTo:e}=LR.useSearch();return S.jsx(khe,{data:n,zoomTo:e})}}),Lhe=()=>{const n=Bt.c(1);let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationKey:["useRegisterMutation"],async mutationFn(t){const{login:r,name:i,password1:s}=t;return An.transaction().execute(async o=>Z0.parse(await o.insertInto("User").values({id:Xr(),name:i,login:r,password:Z5.hash(s)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow()))}},n[0]=e):e=n[0],or(e)},Dhe=ne.object({name:ne.string().min(1),login:ne.string().min(1),password1:ne.string().min(1),password2:ne.string().min(1)}).refine(n=>n.password1===n.password2,{message:"Passwords must match",path:["password1"]}),Fhe=n=>{const e=Bt.c(59),{onSuccess:t}=n,r=Lhe();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={resolver:Eo(Dhe)},e[0]=i):i=e[0];const s=So(i);let o,a,l,u,c,d,h,p,g,x,b,y;if(e[1]!==s||e[2]!==r||e[3]!==t){const q=wo({isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting}).slots;x=q.base(),b=s.handleSubmit(async ce=>r.mutateAsync(ce,{onSuccess:t,onError:ye=>{FN({error:ye,errors:[gN({error:ye,schema:DN,onError:be=>{const{data:Ee}=be;s.setError("root",{message:Ee.message})}})],onError:be=>{s.setError("root",{message:be.message})}})}}).catch(qhe));let L;e[16]===Symbol.for("react.memo_cache_sentinel")?(L={highlight:!0},e[16]=L):L=e[16],e[17]!==s.formState.errors.root?(y=S.jsx(po,{variant:L,error:s.formState.errors.root}),e[17]=s.formState.errors.root,e[18]=y):y=e[18];const R=s.formState;let P;e[19]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsx(he,{label:"Name (label)"}),e[19]=P):P=e[19];const F=q.input();let z;e[20]!==s?(z=s.register("name"),e[20]=s,e[21]=z):z=e[21];const V=S.jsx("input",{type:"text",className:F,...z});e[22]!==s.formState||e[23]!==V?(a=S.jsx(xr,{formState:R,name:"name",label:P,children:V}),e[22]=s.formState,e[23]=V,e[24]=a):a=e[24];const W=s.formState;let Q;e[25]===Symbol.for("react.memo_cache_sentinel")?(Q=S.jsx(he,{label:"Login (label)"}),e[25]=Q):Q=e[25];const X=q.input();let re;e[26]!==s?(re=s.register("login"),e[26]=s,e[27]=re):re=e[27];const G=S.jsx("input",{type:"text",className:X,...re});e[28]!==s.formState||e[29]!==G?(l=S.jsx(xr,{formState:W,name:"login",label:Q,children:G}),e[28]=s.formState,e[29]=G,e[30]=l):l=e[30];const Y=s.formState;let te;e[31]===Symbol.for("react.memo_cache_sentinel")?(te=S.jsx(he,{label:"Password 1 (label)"}),e[31]=te):te=e[31];const Z=q.input();let fe;e[32]!==s?(fe=s.register("password1"),e[32]=s,e[33]=fe):fe=e[33];const ge=S.jsx("input",{type:"password",className:Z,...fe});e[34]!==s.formState||e[35]!==ge?(u=S.jsx(xr,{formState:Y,name:"password1",label:te,children:ge}),e[34]=s.formState,e[35]=ge,e[36]=u):u=e[36],o=xr,h=s.formState,p="password2",e[37]===Symbol.for("react.memo_cache_sentinel")?(g=S.jsx(he,{label:"Password 2 (label)"}),e[37]=g):g=e[37],c="password",d=q.input(),e[1]=s,e[2]=r,e[3]=t,e[4]=o,e[5]=a,e[6]=l,e[7]=u,e[8]=c,e[9]=d,e[10]=h,e[11]=p,e[12]=g,e[13]=x,e[14]=b,e[15]=y}else o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],p=e[11],g=e[12],x=e[13],b=e[14],y=e[15];let E;e[38]!==s?(E=s.register("password2"),e[38]=s,e[39]=E):E=e[39];let T;e[40]!==E||e[41]!==c||e[42]!==d?(T=S.jsx("input",{type:c,className:d,...E}),e[40]=E,e[41]=c,e[42]=d,e[43]=T):T=e[43];let I;e[44]!==o||e[45]!==T||e[46]!==h||e[47]!==p||e[48]!==g?(I=S.jsx(o,{formState:h,name:p,label:g,children:T}),e[44]=o,e[45]=T,e[46]=h,e[47]=p,e[48]=g,e[49]=I):I=e[49];let N;e[50]===Symbol.for("react.memo_cache_sentinel")?(N=S.jsx(Br,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:S.jsx(he,{label:"Register (submit)"})}),e[50]=N):N=e[50];let k;return e[51]!==a||e[52]!==l||e[53]!==u||e[54]!==I||e[55]!==x||e[56]!==b||e[57]!==y?(k=S.jsxs("form",{className:x,onSubmit:b,children:[y,a,l,u,I,N]}),e[51]=a,e[52]=l,e[53]=u,e[54]=I,e[55]=x,e[56]=b,e[57]=y,e[58]=k):k=e[58],k};function qhe(){}const jhe=Ln("/$locale/apps/derivean/public/register")({component:()=>{const n=Lm();return S.jsx("div",{className:fr(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:S.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[S.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),S.jsx(Fhe,{onSuccess:async e=>{wv.set("session",e),await n({to:"/$locale/apps/derivean/game"})}})]})})}}),Bhe=Ln("/$locale/apps/derivean/public/logout")({pendingComponent(){return S.jsx("div",{className:fr(["flex items-center justify-center h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:S.jsx(I6,{icon:iP,textTitle:S.jsx(he,{label:"Logout (label)"}),textMessage:S.jsx(he,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded-sm"]}})})},async loader({params:{locale:n}}){throw wv.remove("session"),O0({to:"/$locale/apps/derivean/public/login",params:{locale:n}})}}),Uhe=()=>{const n=Bt.c(1);let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationKey:["useLoginMutation"],async mutationFn(t){const{login:r,password:i}=t;return An.transaction().execute(async s=>{const o=await s.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",r).where("u.password","=",Z5.hash(i)).executeTakeFirstOrThrow();return{id:o.id,login:o.login,name:o.name}})}},n[0]=e):e=n[0],or(e)},zhe=ne.object({login:ne.string().min(1),password:ne.string().min(1)}),Vhe=n=>{const e=Bt.c(52),{onSuccess:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={from:"/$locale"},e[0]=r):r=e[0];const{locale:i}=nr(r),s=Uhe();let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={resolver:Eo(zhe)},e[1]=o):o=e[1];const a=So(o);let l,u,c,d,h,p,g,x,b,y;if(e[2]!==a||e[3]!==s||e[4]!==t){const F=wo({isLoading:a.formState.isLoading,isSubmitting:a.formState.isSubmitting}).slots;b=F.base(),y=a.handleSubmit(async G=>s.mutateAsync(G,{onSuccess:t,onError:Y=>{FN({error:Y,errors:[gN({error:Y,schema:DN,onError:te=>{const{data:Z}=te;a.setError("root",{message:Z.message})}})],onError:te=>{a.setError("root",{message:te.message})}})}}).catch(Whe));let z;e[15]===Symbol.for("react.memo_cache_sentinel")?(z={highlight:!0},e[15]=z):z=e[15],e[16]!==a.formState.errors.root?(u=S.jsx(po,{variant:z,error:a.formState.errors.root}),e[16]=a.formState.errors.root,e[17]=u):u=e[17];const V=a.formState;let W;e[18]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsx(he,{label:"Login (label)"}),e[18]=W):W=e[18];const Q=F.input();let X;e[19]!==a?(X=a.register("login"),e[19]=a,e[20]=X):X=e[20];const re=S.jsx("input",{type:"text",className:Q,...X});e[21]!==a.formState||e[22]!==re?(c=S.jsx(xr,{formState:V,name:"login",label:W,children:re}),e[21]=a.formState,e[22]=re,e[23]=c):c=e[23],l=xr,p=a.formState,g="password",e[24]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Password (label)"}),e[24]=x):x=e[24],d="password",h=F.input(),e[2]=a,e[3]=s,e[4]=t,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y}else l=e[5],u=e[6],c=e[7],d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14];let E;e[25]!==a?(E=a.register("password"),e[25]=a,e[26]=E):E=e[26];let T;e[27]!==E||e[28]!==d||e[29]!==h?(T=S.jsx("input",{type:d,className:h,...E}),e[27]=E,e[28]=d,e[29]=h,e[30]=T):T=e[30];let I;e[31]!==l||e[32]!==T||e[33]!==p||e[34]!==g||e[35]!==x?(I=S.jsx(l,{formState:p,name:g,label:x,children:T}),e[31]=l,e[32]=T,e[33]=p,e[34]=g,e[35]=x,e[36]=I):I=e[36];let N;e[37]!==i?(N={locale:i},e[37]=i,e[38]=N):N=e[38];let k;e[39]===Symbol.for("react.memo_cache_sentinel")?(k=S.jsx(he,{label:"Register (link)"}),e[39]=k):k=e[39];let q;e[40]!==N?(q=S.jsx(In,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:N,children:k}),e[40]=N,e[41]=q):q=e[41];let L;e[42]===Symbol.for("react.memo_cache_sentinel")?(L=S.jsx(Br,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:S.jsx(he,{label:"Login (submit)"})}),e[42]=L):L=e[42];let R;e[43]!==q?(R=S.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[q,L]}),e[43]=q,e[44]=R):R=e[44];let P;return e[45]!==u||e[46]!==c||e[47]!==I||e[48]!==R||e[49]!==b||e[50]!==y?(P=S.jsxs("form",{className:b,onSubmit:y,children:[u,c,I,R]}),e[45]=u,e[46]=c,e[47]=I,e[48]=R,e[49]=b,e[50]=y,e[51]=P):P=e[51],P};function Whe(){}const $he=Ln("/$locale/apps/derivean/public/login")({component:()=>{const n=Lm();return S.jsx("div",{className:fr(["flex","justify-center","h-screen","bg-linear-to-tr","from-blue-700","to-blue-400"]),children:S.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[S.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),S.jsx(Vhe,{onSuccess:async e=>{wv.set("session",e),await n({to:"/$locale/apps/derivean/game"})}})]})})}}),BV=16,UV=16,Hhe=UV*BV,Ghe={plotSize:BV,plotCount:UV,chunkSize:Hhe};function kE(){return kE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kE.apply(null,arguments)}const yT="173",th={ROTATE:0,DOLLY:1,PAN:2},zp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zV=0,DR=1,VV=2,Xhe=3,WV=0,vT=1,xx=2,Dc=3,rf=0,Pa=1,Au=2,Gd=0,um=1,FR=2,qR=3,jR=4,$V=5,ch=100,HV=101,GV=102,XV=103,KV=104,QV=200,YV=201,JV=202,ZV=203,OE=204,LE=205,eW=206,tW=207,nW=208,rW=209,iW=210,sW=211,oW=212,aW=213,lW=214,DE=0,FE=1,qE=2,Am=3,jE=4,BE=5,UE=6,zE=7,lb=0,cW=1,uW=2,Du=0,dW=1,fW=2,hW=3,_T=4,pW=5,mW=6,gW=7,BR="attached",yW="detached",xT=300,sf=301,Rh=302,p0=303,m0=304,Tv=306,g0=1e3,ac=1001,y0=1002,Bo=1003,PP=1004,Khe=1004,_y=1005,Qhe=1005,Ls=1006,bx=1007,Yhe=1007,Nu=1008,Jhe=1008,Yc=1009,kP=1010,OP=1011,cv=1012,bT=1013,of=1014,Na=1015,Um=1016,wT=1017,ST=1018,Cm=1020,LP=35902,DP=1021,FP=1022,na=1023,qP=1024,jP=1025,dm=1026,Rm=1027,ET=1028,cb=1029,BP=1030,TT=1031,Zhe=1032,MT=1033,wx=33776,Sx=33777,Ex=33778,Tx=33779,VE=35840,WE=35841,$E=35842,HE=35843,GE=36196,XE=37492,KE=37496,QE=37808,YE=37809,JE=37810,ZE=37811,e2=37812,t2=37813,n2=37814,r2=37815,i2=37816,s2=37817,o2=37818,a2=37819,l2=37820,c2=37821,Mx=36492,u2=36494,d2=36495,UP=36283,f2=36284,h2=36285,p2=36286,vW=2200,_W=2201,xW=2202,v0=2300,m2=2301,iS=2302,nm=2400,rm=2401,_0=2402,IT=2500,zP=2501,epe=0,tpe=1,npe=2,bW=3200,wW=3201,rpe=3202,ipe=3203,Lh=0,SW=1,jd="",Za="srgb",Nm="srgb-linear",x0="linear",vi="srgb",spe=0,Vp=7680,ope=7681,ape=7682,lpe=7683,cpe=34055,upe=34056,dpe=5386,fpe=512,hpe=513,ppe=514,mpe=515,gpe=516,ype=517,vpe=518,UR=519,EW=512,TW=513,MW=514,VP=515,IW=516,AW=517,CW=518,RW=519,b0=35044,_pe=35048,xpe=35040,bpe=35045,wpe=35049,Spe=35041,Epe=35046,Tpe=35050,Mpe=35042,Ipe="100",zR="300 es",Hc=2e3,w0=2001,Ape={COMPUTE:"compute",RENDER:"render"};let Hu=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Qo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kq=1234567;const fm=Math.PI/180,uv=180/Math.PI;function Ll(){const n=Math.random()*0xffffffff|0,e=Math.random()*0xffffffff|0,t=Math.random()*0xffffffff|0,r=Math.random()*0xffffffff|0;return(Qo[n&255]+Qo[n>>8&255]+Qo[n>>16&255]+Qo[n>>24&255]+"-"+Qo[e&255]+Qo[e>>8&255]+"-"+Qo[e>>16&15|64]+Qo[e>>24&255]+"-"+Qo[t&63|128]+Qo[t>>8&255]+"-"+Qo[t>>16&255]+Qo[t>>24&255]+Qo[r&255]+Qo[r>>8&255]+Qo[r>>16&255]+Qo[r>>24&255]).toLowerCase()}function Er(n,e,t){return Math.max(e,Math.min(t,n))}function WP(n,e){return(n%e+e)%e}function Cpe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Rpe(n,e,t){return n!==e?(t-n)/(e-n):0}function Ix(n,e,t){return(1-t)*n+t*e}function Npe(n,e,t,r){return Ix(n,e,1-Math.exp(-t*r))}function Ppe(n,e=1){return e-Math.abs(WP(n,e*2)-e)}function kpe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Ope(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Lpe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Dpe(n,e){return n+Math.random()*(e-n)}function Fpe(n){return n*(.5-Math.random())}function qpe(n){n!==void 0&&(kq=n);let e=kq+=0x6d2b79f5;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/0x100000000}function jpe(n){return n*fm}function Bpe(n){return n*uv}function Upe(n){return(n&n-1)===0&&n!==0}function zpe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Vpe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Wpe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),d=s((e-r)/2),h=o((e-r)/2),p=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*d,l*h,a*u);break;case"YZY":n.set(l*h,a*c,l*d,a*u);break;case"ZXZ":n.set(l*d,l*h,a*c,a*u);break;case"XZX":n.set(a*c,l*g,l*p,a*u);break;case"YXY":n.set(l*p,a*c,l*g,a*u);break;case"ZYZ":n.set(l*g,l*p,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ra(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/0xffffffff;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/0x7fffffff,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Pr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*0xffffffff);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*0x7fffffff);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const $pe={DEG2RAD:fm,RAD2DEG:uv,generateUUID:Ll,clamp:Er,euclideanModulo:WP,mapLinear:Cpe,inverseLerp:Rpe,lerp:Ix,damp:Npe,pingpong:Ppe,smoothstep:kpe,smootherstep:Ope,randInt:Lpe,randFloat:Dpe,randFloatSpread:Fpe,seededRandom:qpe,degToRad:jpe,radToDeg:Bpe,isPowerOfTwo:Upe,ceilPowerOfTwo:zpe,floorPowerOfTwo:Vpe,setQuaternionFromProperEuler:Wpe,normalize:Pr,denormalize:Ra};class Ut{constructor(e=0,t=0){Ut.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Er(this.x,e.x,t.x),this.y=Er(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Er(this.x,e,t),this.y=Er(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Er(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Er(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ar{constructor(e,t,r,i,s,o,a,l,u){Ar.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],d=r[7],h=r[2],p=r[5],g=r[8],x=i[0],b=i[3],y=i[6],E=i[1],T=i[4],I=i[7],N=i[2],k=i[5],q=i[8];return s[0]=o*x+a*E+l*N,s[3]=o*b+a*T+l*k,s[6]=o*y+a*I+l*q,s[1]=u*x+c*E+d*N,s[4]=u*b+c*T+d*k,s[7]=u*y+c*I+d*q,s[2]=h*x+p*E+g*N,s[5]=h*b+p*T+g*k,s[8]=h*y+p*I+g*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=c*o-a*u,h=a*l-c*s,p=u*s-o*l,g=t*d+r*h+i*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return e[0]=d*x,e[1]=(i*u-c*r)*x,e[2]=(a*r-i*o)*x,e[3]=h*x,e[4]=(c*t-i*l)*x,e[5]=(i*s-a*t)*x,e[6]=p*x,e[7]=(r*l-u*t)*x,e[8]=(o*t-r*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(gA.makeScale(e,t)),this}rotate(e){return this.premultiply(gA.makeRotation(-e)),this}translate(e,t){return this.premultiply(gA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const gA=new Ar;function NW(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Hpe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xy(n,e){return new Hpe[n](e)}function S0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function PW(){const n=S0("canvas");return n.style.display="block",n}const Oq={};function ly(n){n in Oq||(Oq[n]=!0,console.warn(n))}function Gpe(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function Xpe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Kpe(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Lq=new Ar().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Dq=new Ar().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Qpe(){const n={enabled:!0,workingColorSpace:Nm,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===vi&&(i.r=Xd(i.r),i.g=Xd(i.g),i.b=Xd(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===vi&&(i.r=Wy(i.r),i.g=Wy(i.g),i.b=Wy(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===jd?x0:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[Nm]:{primaries:e,whitePoint:r,transfer:x0,toXYZ:Lq,fromXYZ:Dq,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Za},outputColorSpaceConfig:{drawingBufferColorSpace:Za}},[Za]:{primaries:e,whitePoint:r,transfer:vi,toXYZ:Lq,fromXYZ:Dq,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Za}}}),n}const Zr=Qpe();function Xd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Wy(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Og;class kW{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Og===void 0&&(Og=S0("canvas")),Og.width=e.width,Og.height=e.height;const r=Og.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Og}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=S0("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Xd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Xd(t[r]/255)*255):t[r]=Xd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ype=0;class im{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ype++}),this.uuid=Ll(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(yA(i[o].image)):s.push(yA(i[o]))}else s=yA(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function yA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?kW.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Jpe=0;class _s extends Hu{constructor(e=_s.DEFAULT_IMAGE,t=_s.DEFAULT_MAPPING,r=ac,i=ac,s=Ls,o=Nu,a=na,l=Yc,u=_s.DEFAULT_ANISOTROPY,c=jd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Jpe++}),this.uuid=Ll(),this.name="",this.source=new im(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ut(0,0),this.repeat=new Ut(1,1),this.center=new Ut(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ar,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case g0:e.x=e.x-Math.floor(e.x);break;case ac:e.x=e.x<0?0:1;break;case y0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case g0:e.y=e.y-Math.floor(e.y);break;case ac:e.y=e.y<0?0:1;break;case y0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}_s.DEFAULT_IMAGE=null;_s.DEFAULT_MAPPING=xT;_s.DEFAULT_ANISOTROPY=1;class oi{constructor(e=0,t=0,r=0,i=1){oi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],d=l[8],h=l[1],p=l[5],g=l[9],x=l[2],b=l[6],y=l[10];if(Math.abs(c-h)<.01&&Math.abs(d-x)<.01&&Math.abs(g-b)<.01){if(Math.abs(c+h)<.1&&Math.abs(d+x)<.1&&Math.abs(g+b)<.1&&Math.abs(u+p+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(u+1)/2,I=(p+1)/2,N=(y+1)/2,k=(c+h)/4,q=(d+x)/4,L=(g+b)/4;return T>I&&T>N?T<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(T),i=k/r,s=q/r):I>N?I<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(I),r=k/i,s=L/i):N<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(N),r=q/s,i=L/s),this.set(r,i,s,t),this}let E=Math.sqrt((b-g)*(b-g)+(d-x)*(d-x)+(h-c)*(h-c));return Math.abs(E)<.001&&(E=1),this.x=(b-g)/E,this.y=(d-x)/E,this.z=(h-c)/E,this.w=Math.acos((u+p+y-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Er(this.x,e.x,t.x),this.y=Er(this.y,e.y,t.y),this.z=Er(this.z,e.z,t.z),this.w=Er(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Er(this.x,e,t),this.y=Er(this.y,e,t),this.z=Er(this.z,e,t),this.w=Er(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Er(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class AT extends Hu{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new oi(0,0,e,t),this.scissorTest=!1,this.viewport=new oi(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ls,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new _s(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new im(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jc extends AT{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class ub extends _s{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bo,this.minFilter=Bo,this.wrapR=ac,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Zpe extends Jc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ub(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class CT extends _s{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Bo,this.minFilter=Bo,this.wrapR=ac,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eme extends Jc{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new CT(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class sa{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],d=r[i+3];const h=s[o+0],p=s[o+1],g=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=p,e[t+2]=g,e[t+3]=x;return}if(d!==x||l!==h||u!==p||c!==g){let b=1-a;const y=l*h+u*p+c*g+d*x,E=y>=0?1:-1,T=1-y*y;if(T>Number.EPSILON){const N=Math.sqrt(T),k=Math.atan2(N,y*E);b=Math.sin(b*k)/N,a=Math.sin(a*k)/N}const I=a*E;if(l=l*b+h*I,u=u*b+p*I,c=c*b+g*I,d=d*b+x*I,b===1-a){const N=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=N,u*=N,c*=N,d*=N}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],d=s[o],h=s[o+1],p=s[o+2],g=s[o+3];return e[t]=a*g+c*d+l*p-u*h,e[t+1]=l*g+c*h+u*d-a*p,e[t+2]=u*g+c*p+a*h-l*d,e[t+3]=c*g-a*d-l*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),d=a(s/2),h=l(r/2),p=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=h*c*d+u*p*g,this._y=u*p*d-h*c*g,this._z=u*c*g+h*p*d,this._w=u*c*d-h*p*g;break;case"YXZ":this._x=h*c*d+u*p*g,this._y=u*p*d-h*c*g,this._z=u*c*g-h*p*d,this._w=u*c*d+h*p*g;break;case"ZXY":this._x=h*c*d-u*p*g,this._y=u*p*d+h*c*g,this._z=u*c*g+h*p*d,this._w=u*c*d-h*p*g;break;case"ZYX":this._x=h*c*d-u*p*g,this._y=u*p*d+h*c*g,this._z=u*c*g-h*p*d,this._w=u*c*d+h*p*g;break;case"YZX":this._x=h*c*d+u*p*g,this._y=u*p*d+h*c*g,this._z=u*c*g-h*p*d,this._w=u*c*d-h*p*g;break;case"XZY":this._x=h*c*d-u*p*g,this._y=u*p*d-h*c*g,this._z=u*c*g+h*p*d,this._w=u*c*d+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],d=t[10],h=r+a+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(c-l)*p,this._y=(s-u)*p,this._z=(o-i)*p}else if(r>a&&r>d){const p=2*Math.sqrt(1+r-a-d);this._w=(c-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+u)/p}else if(a>d){const p=2*Math.sqrt(1+a-r-d);this._w=(s-u)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+c)/p}else{const p=2*Math.sqrt(1+d-r-a);this._w=(o-i)/p,this._x=(s+u)/p,this._y=(l+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Er(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),d=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Pe{constructor(e=0,t=0,r=0){Pe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Fq.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Fq.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*i-a*r),c=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*u+o*d-a*c,this.y=r+l*c+a*u-s*d,this.z=i+l*d+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Er(this.x,e.x,t.x),this.y=Er(this.y,e.y,t.y),this.z=Er(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Er(this.x,e,t),this.y=Er(this.y,e,t),this.z=Er(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Er(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return vA.copy(this).projectOnVector(e),this.sub(vA)}reflect(e){return this.sub(vA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Er(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vA=new Pe,Fq=new sa;class ka{constructor(e=new Pe(1/0,1/0,1/0),t=new Pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(kc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(kc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=kc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,kc):kc.fromBufferAttribute(s,o),kc.applyMatrix4(e.matrixWorld),this.expandByPoint(kc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),jw.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),jw.copy(r.boundingBox)),jw.applyMatrix4(e.matrixWorld),this.union(jw)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,kc),kc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(M_),Bw.subVectors(this.max,M_),Lg.subVectors(e.a,M_),Dg.subVectors(e.b,M_),Fg.subVectors(e.c,M_),Wf.subVectors(Dg,Lg),$f.subVectors(Fg,Dg),Sp.subVectors(Lg,Fg);let t=[0,-Wf.z,Wf.y,0,-$f.z,$f.y,0,-Sp.z,Sp.y,Wf.z,0,-Wf.x,$f.z,0,-$f.x,Sp.z,0,-Sp.x,-Wf.y,Wf.x,0,-$f.y,$f.x,0,-Sp.y,Sp.x,0];return!_A(t,Lg,Dg,Fg,Bw)||(t=[1,0,0,0,1,0,0,0,1],!_A(t,Lg,Dg,Fg,Bw))?!1:(Uw.crossVectors(Wf,$f),t=[Uw.x,Uw.y,Uw.z],_A(t,Lg,Dg,Fg,Bw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(kc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Id[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Id[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Id[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Id[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Id[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Id[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Id[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Id[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Id),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Id=[new Pe,new Pe,new Pe,new Pe,new Pe,new Pe,new Pe,new Pe],kc=new Pe,jw=new ka,Lg=new Pe,Dg=new Pe,Fg=new Pe,Wf=new Pe,$f=new Pe,Sp=new Pe,M_=new Pe,Bw=new Pe,Uw=new Pe,Ep=new Pe;function _A(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ep.fromArray(n,s);const a=i.x*Math.abs(Ep.x)+i.y*Math.abs(Ep.y)+i.z*Math.abs(Ep.z),l=e.dot(Ep),u=t.dot(Ep),c=r.dot(Ep);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const tme=new ka,I_=new Pe,xA=new Pe;class oa{constructor(e=new Pe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):tme.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;I_.subVectors(e,this.center);const t=I_.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(I_,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(I_.copy(e.center).add(xA)),this.expandByPoint(I_.copy(e.center).sub(xA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ad=new Pe,bA=new Pe,zw=new Pe,Hf=new Pe,wA=new Pe,Vw=new Pe,SA=new Pe;class zm{constructor(e=new Pe,t=new Pe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ad)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ad.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ad.copy(this.origin).addScaledVector(this.direction,t),Ad.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){bA.copy(e).add(t).multiplyScalar(.5),zw.copy(t).sub(e).normalize(),Hf.copy(this.origin).sub(bA);const s=e.distanceTo(t)*.5,o=-this.direction.dot(zw),a=Hf.dot(this.direction),l=-Hf.dot(zw),u=Hf.lengthSq(),c=Math.abs(1-o*o);let d,h,p,g;if(c>0)if(d=o*l-a,h=o*a-l,g=s*c,d>=0)if(h>=-g)if(h<=g){const x=1/c;d*=x,h*=x,p=d*(d+o*h+2*a)+h*(o*d+h+2*l)+u}else h=s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+u;else h=-s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+u;else h<=-g?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+u):h<=g?(d=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+u):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+u);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(bA).addScaledVector(zw,h),p}intersectSphere(e,t){Ad.subVectors(e.center,this.origin);const r=Ad.dot(this.direction),i=Ad.dot(Ad)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ad)!==null}intersectTriangle(e,t,r,i,s){wA.subVectors(t,e),Vw.subVectors(r,e),SA.crossVectors(wA,Vw);let o=this.direction.dot(SA),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Hf.subVectors(this.origin,e);const l=a*this.direction.dot(Vw.crossVectors(Hf,Vw));if(l<0)return null;const u=a*this.direction.dot(wA.cross(Hf));if(u<0||l+u>o)return null;const c=-a*Hf.dot(SA);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class hr{constructor(e,t,r,i,s,o,a,l,u,c,d,h,p,g,x,b){hr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,c,d,h,p,g,x,b)}set(e,t,r,i,s,o,a,l,u,c,d,h,p,g,x,b){const y=this.elements;return y[0]=e,y[4]=t,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=u,y[6]=c,y[10]=d,y[14]=h,y[3]=p,y[7]=g,y[11]=x,y[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new hr().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/qg.setFromMatrixColumn(e,0).length(),s=1/qg.setFromMatrixColumn(e,1).length(),o=1/qg.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*c,p=o*d,g=a*c,x=a*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=p+g*u,t[5]=h-x*u,t[9]=-a*l,t[2]=x-h*u,t[6]=g+p*u,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,p=l*d,g=u*c,x=u*d;t[0]=h+x*a,t[4]=g*a-p,t[8]=o*u,t[1]=o*d,t[5]=o*c,t[9]=-a,t[2]=p*a-g,t[6]=x+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,p=l*d,g=u*c,x=u*d;t[0]=h-x*a,t[4]=-o*d,t[8]=g+p*a,t[1]=p+g*a,t[5]=o*c,t[9]=x-h*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,p=o*d,g=a*c,x=a*d;t[0]=l*c,t[4]=g*u-p,t[8]=h*u+x,t[1]=l*d,t[5]=x*u+h,t[9]=p*u-g,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*u,g=a*l,x=a*u;t[0]=l*c,t[4]=x-h*d,t[8]=g*d+p,t[1]=d,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=p*d+g,t[10]=h-x*d}else if(e.order==="XZY"){const h=o*l,p=o*u,g=a*l,x=a*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=h*d+x,t[5]=o*c,t[9]=p*d-g,t[2]=g*d-p,t[6]=a*c,t[10]=x*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nme,e,rme)}lookAt(e,t,r){const i=this.elements;return El.subVectors(e,t),El.lengthSq()===0&&(El.z=1),El.normalize(),Gf.crossVectors(r,El),Gf.lengthSq()===0&&(Math.abs(r.z)===1?El.x+=1e-4:El.z+=1e-4,El.normalize(),Gf.crossVectors(r,El)),Gf.normalize(),Ww.crossVectors(El,Gf),i[0]=Gf.x,i[4]=Ww.x,i[8]=El.x,i[1]=Gf.y,i[5]=Ww.y,i[9]=El.y,i[2]=Gf.z,i[6]=Ww.z,i[10]=El.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],d=r[5],h=r[9],p=r[13],g=r[2],x=r[6],b=r[10],y=r[14],E=r[3],T=r[7],I=r[11],N=r[15],k=i[0],q=i[4],L=i[8],R=i[12],P=i[1],F=i[5],z=i[9],V=i[13],W=i[2],Q=i[6],X=i[10],re=i[14],G=i[3],Y=i[7],te=i[11],Z=i[15];return s[0]=o*k+a*P+l*W+u*G,s[4]=o*q+a*F+l*Q+u*Y,s[8]=o*L+a*z+l*X+u*te,s[12]=o*R+a*V+l*re+u*Z,s[1]=c*k+d*P+h*W+p*G,s[5]=c*q+d*F+h*Q+p*Y,s[9]=c*L+d*z+h*X+p*te,s[13]=c*R+d*V+h*re+p*Z,s[2]=g*k+x*P+b*W+y*G,s[6]=g*q+x*F+b*Q+y*Y,s[10]=g*L+x*z+b*X+y*te,s[14]=g*R+x*V+b*re+y*Z,s[3]=E*k+T*P+I*W+N*G,s[7]=E*q+T*F+I*Q+N*Y,s[11]=E*L+T*z+I*X+N*te,s[15]=E*R+T*V+I*re+N*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],d=e[6],h=e[10],p=e[14],g=e[3],x=e[7],b=e[11],y=e[15];return g*(+s*l*d-i*u*d-s*a*h+r*u*h+i*a*p-r*l*p)+x*(+t*l*p-t*u*h+s*o*h-i*o*p+i*u*c-s*l*c)+b*(+t*u*d-t*a*p-s*o*d+r*o*p+s*a*c-r*u*c)+y*(-i*a*c-t*l*d+t*a*h+i*o*d-r*o*h+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],d=e[9],h=e[10],p=e[11],g=e[12],x=e[13],b=e[14],y=e[15],E=d*b*u-x*h*u+x*l*p-a*b*p-d*l*y+a*h*y,T=g*h*u-c*b*u-g*l*p+o*b*p+c*l*y-o*h*y,I=c*x*u-g*d*u+g*a*p-o*x*p-c*a*y+o*d*y,N=g*d*l-c*x*l-g*a*h+o*x*h+c*a*b-o*d*b,k=t*E+r*T+i*I+s*N;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const q=1/k;return e[0]=E*q,e[1]=(x*h*s-d*b*s-x*i*p+r*b*p+d*i*y-r*h*y)*q,e[2]=(a*b*s-x*l*s+x*i*u-r*b*u-a*i*y+r*l*y)*q,e[3]=(d*l*s-a*h*s-d*i*u+r*h*u+a*i*p-r*l*p)*q,e[4]=T*q,e[5]=(c*b*s-g*h*s+g*i*p-t*b*p-c*i*y+t*h*y)*q,e[6]=(g*l*s-o*b*s-g*i*u+t*b*u+o*i*y-t*l*y)*q,e[7]=(o*h*s-c*l*s+c*i*u-t*h*u-o*i*p+t*l*p)*q,e[8]=I*q,e[9]=(g*d*s-c*x*s-g*r*p+t*x*p+c*r*y-t*d*y)*q,e[10]=(o*x*s-g*a*s+g*r*u-t*x*u-o*r*y+t*a*y)*q,e[11]=(c*a*s-o*d*s-c*r*u+t*d*u+o*r*p-t*a*p)*q,e[12]=N*q,e[13]=(c*x*i-g*d*i+g*r*h-t*x*h-c*r*b+t*d*b)*q,e[14]=(g*a*i-o*x*i-g*r*l+t*x*l+o*r*b-t*a*b)*q,e[15]=(o*d*i-c*a*i+c*r*l-t*d*l-o*r*h+t*a*h)*q,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,d=a+a,h=s*u,p=s*c,g=s*d,x=o*c,b=o*d,y=a*d,E=l*u,T=l*c,I=l*d,N=r.x,k=r.y,q=r.z;return i[0]=(1-(x+y))*N,i[1]=(p+I)*N,i[2]=(g-T)*N,i[3]=0,i[4]=(p-I)*k,i[5]=(1-(h+y))*k,i[6]=(b+E)*k,i[7]=0,i[8]=(g+T)*q,i[9]=(b-E)*q,i[10]=(1-(h+x))*q,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=qg.set(i[0],i[1],i[2]).length();const o=qg.set(i[4],i[5],i[6]).length(),a=qg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Oc.copy(this);const u=1/s,c=1/o,d=1/a;return Oc.elements[0]*=u,Oc.elements[1]*=u,Oc.elements[2]*=u,Oc.elements[4]*=c,Oc.elements[5]*=c,Oc.elements[6]*=c,Oc.elements[8]*=d,Oc.elements[9]*=d,Oc.elements[10]*=d,t.setFromRotationMatrix(Oc),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Hc){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),d=(t+e)/(t-e),h=(r+i)/(r-i);let p,g;if(a===Hc)p=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===w0)p=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Hc){const l=this.elements,u=1/(t-e),c=1/(r-i),d=1/(o-s),h=(t+e)*u,p=(r+i)*c;let g,x;if(a===Hc)g=(o+s)*d,x=-2*d;else if(a===w0)g=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=x,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const qg=new Pe,Oc=new hr,nme=new Pe(0,0,0),rme=new Pe(1,1,1),Gf=new Pe,Ww=new Pe,El=new Pe,qq=new hr,jq=new sa;class Bl{constructor(e=0,t=0,r=0,i=Bl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],d=i[2],h=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(Er(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Er(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Er(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Er(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Er(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Er(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return qq.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qq,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jq.setFromEuler(this),this.setFromQuaternion(jq,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Bl.DEFAULT_ORDER="XYZ";class hm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ime=0;const Bq=new Pe,jg=new sa,Cd=new hr,$w=new Pe,A_=new Pe,sme=new Pe,ome=new sa,Uq=new Pe(1,0,0),zq=new Pe(0,1,0),Vq=new Pe(0,0,1),Wq={type:"added"},ame={type:"removed"},Bg={type:"childadded",child:null},EA={type:"childremoved",child:null};class ni extends Hu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ime++}),this.uuid=Ll(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ni.DEFAULT_UP.clone();const e=new Pe,t=new Bl,r=new sa,i=new Pe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new hr},normalMatrix:{value:new Ar}}),this.matrix=new hr,this.matrixWorld=new hr,this.matrixAutoUpdate=ni.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return jg.setFromAxisAngle(e,t),this.quaternion.multiply(jg),this}rotateOnWorldAxis(e,t){return jg.setFromAxisAngle(e,t),this.quaternion.premultiply(jg),this}rotateX(e){return this.rotateOnAxis(Uq,e)}rotateY(e){return this.rotateOnAxis(zq,e)}rotateZ(e){return this.rotateOnAxis(Vq,e)}translateOnAxis(e,t){return Bq.copy(e).applyQuaternion(this.quaternion),this.position.add(Bq.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Uq,e)}translateY(e){return this.translateOnAxis(zq,e)}translateZ(e){return this.translateOnAxis(Vq,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Cd.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?$w.copy(e):$w.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),A_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cd.lookAt(A_,$w,this.up):Cd.lookAt($w,A_,this.up),this.quaternion.setFromRotationMatrix(Cd),i&&(Cd.extractRotation(i.matrixWorld),jg.setFromRotationMatrix(Cd),this.quaternion.premultiply(jg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Wq),Bg.child=e,this.dispatchEvent(Bg),Bg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ame),EA.child=e,this.dispatchEvent(EA),EA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Cd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Cd.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Wq),Bg.child=e,this.dispatchEvent(Bg),Bg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(A_,e,sme),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(A_,ome,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ni.DEFAULT_UP=new Pe(0,1,0);ni.DEFAULT_MATRIX_AUTO_UPDATE=!0;ni.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Lc=new Pe,Rd=new Pe,TA=new Pe,Nd=new Pe,Ug=new Pe,zg=new Pe,$q=new Pe,MA=new Pe,IA=new Pe,AA=new Pe,CA=new oi,RA=new oi,NA=new oi;class el{constructor(e=new Pe,t=new Pe,r=new Pe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Lc.subVectors(e,t),i.cross(Lc);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Lc.subVectors(i,t),Rd.subVectors(r,t),TA.subVectors(e,t);const o=Lc.dot(Lc),a=Lc.dot(Rd),l=Lc.dot(TA),u=Rd.dot(Rd),c=Rd.dot(TA),d=o*u-a*a;if(d===0)return s.set(0,0,0),null;const h=1/d,p=(u*l-a*c)*h,g=(o*c-a*l)*h;return s.set(1-p-g,g,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Nd)===null?!1:Nd.x>=0&&Nd.y>=0&&Nd.x+Nd.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Nd)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Nd.x),l.addScaledVector(o,Nd.y),l.addScaledVector(a,Nd.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return CA.setScalar(0),RA.setScalar(0),NA.setScalar(0),CA.fromBufferAttribute(e,t),RA.fromBufferAttribute(e,r),NA.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(CA,s.x),o.addScaledVector(RA,s.y),o.addScaledVector(NA,s.z),o}static isFrontFacing(e,t,r,i){return Lc.subVectors(r,t),Rd.subVectors(e,t),Lc.cross(Rd).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Lc.subVectors(this.c,this.b),Rd.subVectors(this.a,this.b),Lc.cross(Rd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return el.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return el.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return el.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return el.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return el.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Ug.subVectors(i,r),zg.subVectors(s,r),MA.subVectors(e,r);const l=Ug.dot(MA),u=zg.dot(MA);if(l<=0&&u<=0)return t.copy(r);IA.subVectors(e,i);const c=Ug.dot(IA),d=zg.dot(IA);if(c>=0&&d<=c)return t.copy(i);const h=l*d-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(Ug,o);AA.subVectors(e,s);const p=Ug.dot(AA),g=zg.dot(AA);if(g>=0&&p<=g)return t.copy(s);const x=p*u-l*g;if(x<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(r).addScaledVector(zg,a);const b=c*g-p*d;if(b<=0&&d-c>=0&&p-g>=0)return $q.subVectors(s,i),a=(d-c)/(d-c+(p-g)),t.copy(i).addScaledVector($q,a);const y=1/(b+x+h);return o=x*y,a=h*y,t.copy(r).addScaledVector(Ug,o).addScaledVector(zg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const OW={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},Xf={h:0,s:0,l:0},Hw={h:0,s:0,l:0};function PA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Pn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Za){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Zr.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Zr.workingColorSpace){return this.r=e,this.g=t,this.b=r,Zr.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Zr.workingColorSpace){if(e=WP(e,1),t=Er(t,0,1),r=Er(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=PA(o,s,e+1/3),this.g=PA(o,s,e),this.b=PA(o,s,e-1/3)}return Zr.toWorkingColorSpace(this,i),this}setStyle(e,t=Za){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Za){const r=OW[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xd(e.r),this.g=Xd(e.g),this.b=Xd(e.b),this}copyLinearToSRGB(e){return this.r=Wy(e.r),this.g=Wy(e.g),this.b=Wy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Za){return Zr.fromWorkingColorSpace(Yo.copy(this),e),Math.round(Er(Yo.r*255,0,255))*65536+Math.round(Er(Yo.g*255,0,255))*256+Math.round(Er(Yo.b*255,0,255))}getHexString(e=Za){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zr.workingColorSpace){Zr.fromWorkingColorSpace(Yo.copy(this),t);const r=Yo.r,i=Yo.g,s=Yo.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=c<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Zr.workingColorSpace){return Zr.fromWorkingColorSpace(Yo.copy(this),t),e.r=Yo.r,e.g=Yo.g,e.b=Yo.b,e}getStyle(e=Za){Zr.fromWorkingColorSpace(Yo.copy(this),e);const t=Yo.r,r=Yo.g,i=Yo.b;return e!==Za?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Xf),this.setHSL(Xf.h+e,Xf.s+t,Xf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Xf),e.getHSL(Hw);const r=Ix(Xf.h,Hw.h,t),i=Ix(Xf.s,Hw.s,t),s=Ix(Xf.l,Hw.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Yo=new Pn;Pn.NAMES=OW;let lme=0;class fa extends Hu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lme++}),this.uuid=Ll(),this.name="",this.type="Material",this.blending=um,this.side=rf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=OE,this.blendDst=LE,this.blendEquation=ch,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Pn(0,0,0),this.blendAlpha=0,this.depthFunc=Am,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=UR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vp,this.stencilZFail=Vp,this.stencilZPass=Vp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==um&&(r.blending=this.blending),this.side!==rf&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==OE&&(r.blendSrc=this.blendSrc),this.blendDst!==LE&&(r.blendDst=this.blendDst),this.blendEquation!==ch&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Am&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==UR&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vp&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Vp&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Vp&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Dh extends fa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pn(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.combine=lb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bd=cme();function cme(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=0x38800000,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=0x38000000+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=0x47800000,o[32]=0x80000000;for(let l=33;l<63;++l)o[l]=0x80000000+(l-32<<23);o[63]=0xc7800000;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ga(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Er(n,-65504,65504),Bd.floatView[0]=n;const e=Bd.uint32View[0],t=e>>23&511;return Bd.baseTable[t]+((e&8388607)>>Bd.shiftTable[t])}function K_(n){const e=n>>10;return Bd.uint32View[0]=Bd.mantissaTable[Bd.offsetTable[e]+(n&1023)]+Bd.exponentTable[e],Bd.floatView[0]}const ume={toHalfFloat:Ga,fromHalfFloat:K_},Xs=new Pe,Gw=new Ut;let dme=0;class Mi{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:dme++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=b0,this.updateRanges=[],this.gpuType=Na,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Gw.fromBufferAttribute(this,t),Gw.applyMatrix3(e),this.setXY(t,Gw.x,Gw.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.applyMatrix3(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.applyMatrix4(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.applyNormalMatrix(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Xs.fromBufferAttribute(this,t),Xs.transformDirection(e),this.setXYZ(t,Xs.x,Xs.y,Xs.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Ra(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Pr(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ra(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ra(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ra(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ra(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array),i=Pr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array),i=Pr(i,this.array),s=Pr(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==b0&&(e.usage=this.usage),e}}class fme extends Mi{constructor(e,t,r){super(new Int8Array(e),t,r)}}class hme extends Mi{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class pme extends Mi{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class mme extends Mi{constructor(e,t,r){super(new Int16Array(e),t,r)}}class $P extends Mi{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class gme extends Mi{constructor(e,t,r){super(new Int32Array(e),t,r)}}class HP extends Mi{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class yme extends Mi{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=K_(this.array[e*this.itemSize]);return this.normalized&&(t=Ra(t,this.array)),t}setX(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize]=Ga(t),this}getY(e){let t=K_(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ra(t,this.array)),t}setY(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+1]=Ga(t),this}getZ(e){let t=K_(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ra(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+2]=Ga(t),this}getW(e){let t=K_(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ra(t,this.array)),t}setW(e,t){return this.normalized&&(t=Pr(t,this.array)),this.array[e*this.itemSize+3]=Ga(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array)),this.array[e+0]=Ga(t),this.array[e+1]=Ga(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array),i=Pr(i,this.array)),this.array[e+0]=Ga(t),this.array[e+1]=Ga(r),this.array[e+2]=Ga(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array),i=Pr(i,this.array),s=Pr(s,this.array)),this.array[e+0]=Ga(t),this.array[e+1]=Ga(r),this.array[e+2]=Ga(i),this.array[e+3]=Ga(s),this}}class Xn extends Mi{constructor(e,t,r){super(new Float32Array(e),t,r)}}let vme=0;const Zl=new hr,kA=new ni,Vg=new Pe,Tl=new ka,C_=new ka,bo=new Pe;class Ur extends Hu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vme++}),this.uuid=Ll(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(NW(e)?HP:$P)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Ar().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zl.makeRotationFromQuaternion(e),this.applyMatrix4(Zl),this}rotateX(e){return Zl.makeRotationX(e),this.applyMatrix4(Zl),this}rotateY(e){return Zl.makeRotationY(e),this.applyMatrix4(Zl),this}rotateZ(e){return Zl.makeRotationZ(e),this.applyMatrix4(Zl),this}translate(e,t,r){return Zl.makeTranslation(e,t,r),this.applyMatrix4(Zl),this}scale(e,t,r){return Zl.makeScale(e,t,r),this.applyMatrix4(Zl),this}lookAt(e){return kA.lookAt(e),kA.updateMatrix(),this.applyMatrix4(kA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vg).negate(),this.translate(Vg.x,Vg.y,Vg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Xn(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ka);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Pe(-1/0,-1/0,-1/0),new Pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Tl.setFromBufferAttribute(s),this.morphTargetsRelative?(bo.addVectors(this.boundingBox.min,Tl.min),this.boundingBox.expandByPoint(bo),bo.addVectors(this.boundingBox.max,Tl.max),this.boundingBox.expandByPoint(bo)):(this.boundingBox.expandByPoint(Tl.min),this.boundingBox.expandByPoint(Tl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Pe,1/0);return}if(e){const r=this.boundingSphere.center;if(Tl.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];C_.setFromBufferAttribute(a),this.morphTargetsRelative?(bo.addVectors(Tl.min,C_.min),Tl.expandByPoint(bo),bo.addVectors(Tl.max,C_.max),Tl.expandByPoint(bo)):(Tl.expandByPoint(C_.min),Tl.expandByPoint(C_.max))}Tl.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)bo.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(bo));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)bo.fromBufferAttribute(a,u),l&&(Vg.fromBufferAttribute(e,u),bo.add(Vg)),i=Math.max(i,r.distanceToSquared(bo))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mi(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<r.count;L++)a[L]=new Pe,l[L]=new Pe;const u=new Pe,c=new Pe,d=new Pe,h=new Ut,p=new Ut,g=new Ut,x=new Pe,b=new Pe;function y(L,R,P){u.fromBufferAttribute(r,L),c.fromBufferAttribute(r,R),d.fromBufferAttribute(r,P),h.fromBufferAttribute(s,L),p.fromBufferAttribute(s,R),g.fromBufferAttribute(s,P),c.sub(u),d.sub(u),p.sub(h),g.sub(h);const F=1/(p.x*g.y-g.x*p.y);isFinite(F)&&(x.copy(c).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(F),b.copy(d).multiplyScalar(p.x).addScaledVector(c,-g.x).multiplyScalar(F),a[L].add(x),a[R].add(x),a[P].add(x),l[L].add(b),l[R].add(b),l[P].add(b))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let L=0,R=E.length;L<R;++L){const P=E[L],F=P.start,z=P.count;for(let V=F,W=F+z;V<W;V+=3)y(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const T=new Pe,I=new Pe,N=new Pe,k=new Pe;function q(L){N.fromBufferAttribute(i,L),k.copy(N);const R=a[L];T.copy(R),T.sub(N.multiplyScalar(N.dot(R))).normalize(),I.crossVectors(k,R);const F=I.dot(l[L])<0?-1:1;o.setXYZW(L,T.x,T.y,T.z,F)}for(let L=0,R=E.length;L<R;++L){const P=E[L],F=P.start,z=P.count;for(let V=F,W=F+z;V<W;V+=3)q(e.getX(V+0)),q(e.getX(V+1)),q(e.getX(V+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Mi(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,p=r.count;h<p;h++)r.setXYZ(h,0,0,0);const i=new Pe,s=new Pe,o=new Pe,a=new Pe,l=new Pe,u=new Pe,c=new Pe,d=new Pe;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),x=e.getX(h+1),b=e.getX(h+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,b),c.subVectors(o,s),d.subVectors(i,s),c.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,x),u.fromBufferAttribute(r,b),a.add(c),l.add(c),u.add(c),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(b,u.x,u.y,u.z)}else for(let h=0,p=t.count;h<p;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,s),d.subVectors(i,s),c.cross(d),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)bo.fromBufferAttribute(e,t),bo.normalize(),e.setXYZ(t,bo.x,bo.y,bo.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,d=a.normalized,h=new u.constructor(l.length*c);let p=0,g=0;for(let x=0,b=l.length;x<b;x++){a.isInterleavedBufferAttribute?p=l[x]*a.data.stride+a.offset:p=l[x]*c;for(let y=0;y<c;y++)h[g++]=u[p++]}return new Mi(h,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ur,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,d=u.length;c<d;c++){const h=u[c],p=e(h,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,h=u.length;d<h;d++){const p=u[d];c.push(p.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],d=s[u];for(let h=0,p=d.length;h<p;h++)c.push(d[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hq=new hr,Tp=new zm,Xw=new oa,Gq=new Pe,Kw=new Pe,Qw=new Pe,Yw=new Pe,OA=new Pe,Jw=new Pe,Xq=new Pe,Zw=new Pe;class Js extends ni{constructor(e=new Ur,t=new Dh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Jw.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],d=s[l];c!==0&&(OA.fromBufferAttribute(d,e),o?Jw.addScaledVector(OA,c):Jw.addScaledVector(OA.sub(t),c))}t.add(Jw)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Xw.copy(r.boundingSphere),Xw.applyMatrix4(s),Tp.copy(e.ray).recast(e.near),!(Xw.containsPoint(Tp.origin)===!1&&(Tp.intersectSphere(Xw,Gq)===null||Tp.origin.distanceToSquared(Gq)>(e.far-e.near)**2))&&(Hq.copy(s).invert(),Tp.copy(e.ray).applyMatrix4(Hq),!(r.boundingBox!==null&&Tp.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Tp)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,x=h.length;g<x;g++){const b=h[g],y=o[b.materialIndex],E=Math.max(b.start,p.start),T=Math.min(a.count,Math.min(b.start+b.count,p.start+p.count));for(let I=E,N=T;I<N;I+=3){const k=a.getX(I),q=a.getX(I+1),L=a.getX(I+2);i=e1(this,y,e,r,u,c,d,k,q,L),i&&(i.faceIndex=Math.floor(I/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),x=Math.min(a.count,p.start+p.count);for(let b=g,y=x;b<y;b+=3){const E=a.getX(b),T=a.getX(b+1),I=a.getX(b+2);i=e1(this,o,e,r,u,c,d,E,T,I),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,x=h.length;g<x;g++){const b=h[g],y=o[b.materialIndex],E=Math.max(b.start,p.start),T=Math.min(l.count,Math.min(b.start+b.count,p.start+p.count));for(let I=E,N=T;I<N;I+=3){const k=I,q=I+1,L=I+2;i=e1(this,y,e,r,u,c,d,k,q,L),i&&(i.faceIndex=Math.floor(I/3),i.face.materialIndex=b.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),x=Math.min(l.count,p.start+p.count);for(let b=g,y=x;b<y;b+=3){const E=b,T=b+1,I=b+2;i=e1(this,o,e,r,u,c,d,E,T,I),i&&(i.faceIndex=Math.floor(b/3),t.push(i))}}}}function _me(n,e,t,r,i,s,o,a){let l;if(e.side===Pa?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===rf,a),l===null)return null;Zw.copy(a),Zw.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Zw);return u<t.near||u>t.far?null:{distance:u,point:Zw.clone(),object:n}}function e1(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,Kw),n.getVertexPosition(l,Qw),n.getVertexPosition(u,Yw);const c=_me(n,e,t,r,Kw,Qw,Yw,Xq);if(c){const d=new Pe;el.getBarycoord(Xq,Kw,Qw,Yw,d),i&&(c.uv=el.getInterpolatedAttribute(i,a,l,u,d,new Ut)),s&&(c.uv1=el.getInterpolatedAttribute(s,a,l,u,d,new Ut)),o&&(c.normal=el.getInterpolatedAttribute(o,a,l,u,d,new Pe),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new Pe,materialIndex:0};el.getNormal(Kw,Qw,Yw,h.normal),c.face=h,c.barycoord=d}return c}class Vm extends Ur{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],d=[];let h=0,p=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Xn(u,3)),this.setAttribute("normal",new Xn(c,3)),this.setAttribute("uv",new Xn(d,2));function g(x,b,y,E,T,I,N,k,q,L,R){const P=I/q,F=N/L,z=I/2,V=N/2,W=k/2,Q=q+1,X=L+1;let re=0,G=0;const Y=new Pe;for(let te=0;te<X;te++){const Z=te*F-V;for(let fe=0;fe<Q;fe++){const ge=fe*P-z;Y[x]=ge*E,Y[b]=Z*T,Y[y]=W,u.push(Y.x,Y.y,Y.z),Y[x]=0,Y[b]=0,Y[y]=k>0?1:-1,c.push(Y.x,Y.y,Y.z),d.push(fe/q),d.push(1-te/L),re+=1}}for(let te=0;te<L;te++)for(let Z=0;Z<q;Z++){const fe=h+Z+Q*te,ge=h+Z+Q*(te+1),ce=h+(Z+1)+Q*(te+1),ye=h+(Z+1)+Q*te;l.push(fe,ge,ye),l.push(ge,ce,ye),G+=6}a.addGroup(p,G,R),p+=G,h+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dv(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Sa(n){const e={};for(let t=0;t<n.length;t++){const r=dv(n[t]);for(const i in r)e[i]=r[i]}return e}function xme(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function LW(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Zr.workingColorSpace}const DW={clone:dv,merge:Sa};var bme=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wme=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Zc extends fa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=bme,this.fragmentShader=wme,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dv(e.uniforms),this.uniformsGroups=xme(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class db extends ni{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new hr,this.projectionMatrix=new hr,this.projectionMatrixInverse=new hr,this.coordinateSystem=Hc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Kf=new Pe,Kq=new Ut,Qq=new Ut;class ks extends db{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(fm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uv*2*Math.atan(Math.tan(fm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Kf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Kf.x,Kf.y).multiplyScalar(-e/Kf.z),Kf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Kf.x,Kf.y).multiplyScalar(-e/Kf.z)}getViewSize(e,t){return this.getViewBounds(e,Kq,Qq),t.subVectors(Qq,Kq)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(fm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Wg=-90,$g=1;class FW extends ni{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ks(Wg,$g,e,t);i.layers=this.layers,this.add(i);const s=new ks(Wg,$g,e,t);s.layers=this.layers,this.add(s);const o=new ks(Wg,$g,e,t);o.layers=this.layers,this.add(o);const a=new ks(Wg,$g,e,t);a.layers=this.layers,this.add(a);const l=new ks(Wg,$g,e,t);l.layers=this.layers,this.add(l);const u=new ks(Wg,$g,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Hc)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===w0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(d,h,p),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class fb extends _s{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:sf,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class qW extends Jc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new fb(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ls}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Vm(5,5,5),s=new Zc({name:"CubemapFromEquirect",uniforms:dv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Pa,blending:Gd});s.uniforms.tEquirect.value=t;const o=new Js(i,s),a=t.minFilter;return t.minFilter===Nu&&(t.minFilter=Ls),new FW(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class by extends ni{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Sme={type:"move"};class sS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new by,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new by,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new by,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,r),y=this._getHandJoint(u,x);b!==null&&(y.matrix.fromArray(b.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=b.radius),y.visible=b!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],h=c.position.distanceTo(d.position),p=.02,g=.005;u.inputState.pinching&&h>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Sme)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new by;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class RT{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Pn(e),this.density=t}clone(){return new RT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class NT{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Pn(e),this.near=t,this.far=r}clone(){return new NT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class GP extends ni{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Bl,this.environmentIntensity=1,this.environmentRotation=new Bl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class PT{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=b0,this.updateRanges=[],this.version=0,this.uuid=Ll()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wa=new Pe;class Pm{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)wa.fromBufferAttribute(this,t),wa.applyMatrix4(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)wa.fromBufferAttribute(this,t),wa.applyNormalMatrix(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)wa.fromBufferAttribute(this,t),wa.transformDirection(e),this.setXYZ(t,wa.x,wa.y,wa.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=Ra(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Pr(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Pr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Pr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Pr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Pr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ra(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ra(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ra(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ra(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array),i=Pr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Pr(t,this.array),r=Pr(r,this.array),i=Pr(i,this.array),s=Pr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Mi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pm(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class XP extends fa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Pn(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Hg;const R_=new Pe,Gg=new Pe,Xg=new Pe,Kg=new Ut,N_=new Ut,jW=new hr,t1=new Pe,P_=new Pe,n1=new Pe,Yq=new Ut,LA=new Ut,Jq=new Ut;class BW extends ni{constructor(e=new XP){if(super(),this.isSprite=!0,this.type="Sprite",Hg===void 0){Hg=new Ur;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new PT(t,5);Hg.setIndex([0,1,2,0,2,3]),Hg.setAttribute("position",new Pm(r,3,0,!1)),Hg.setAttribute("uv",new Pm(r,2,3,!1))}this.geometry=Hg,this.material=e,this.center=new Ut(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gg.setFromMatrixScale(this.matrixWorld),jW.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Xg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gg.multiplyScalar(-Xg.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;r1(t1.set(-.5,-.5,0),Xg,o,Gg,i,s),r1(P_.set(.5,-.5,0),Xg,o,Gg,i,s),r1(n1.set(.5,.5,0),Xg,o,Gg,i,s),Yq.set(0,0),LA.set(1,0),Jq.set(1,1);let a=e.ray.intersectTriangle(t1,P_,n1,!1,R_);if(a===null&&(r1(P_.set(-.5,.5,0),Xg,o,Gg,i,s),LA.set(0,1),a=e.ray.intersectTriangle(t1,n1,P_,!1,R_),a===null))return;const l=e.ray.origin.distanceTo(R_);l<e.near||l>e.far||t.push({distance:l,point:R_.clone(),uv:el.getInterpolation(R_,t1,P_,n1,Yq,LA,Jq,new Ut),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function r1(n,e,t,r,i,s){Kg.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(N_.x=s*Kg.x-i*Kg.y,N_.y=i*Kg.x+s*Kg.y):N_.copy(Kg),n.copy(e),n.x+=N_.x,n.y+=N_.y,n.applyMatrix4(jW)}const i1=new Pe,Zq=new Pe;class UW extends ni{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){i1.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(i1);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){i1.setFromMatrixPosition(e.matrixWorld),Zq.setFromMatrixPosition(this.matrixWorld);const r=i1.distanceTo(Zq)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const ej=new Pe,tj=new oi,nj=new oi,Eme=new Pe,rj=new hr,s1=new Pe,DA=new oa,ij=new hr,FA=new zm;class zW extends Js{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=BR,this.bindMatrix=new hr,this.bindMatrixInverse=new hr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ka),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,s1),this.boundingBox.expandByPoint(s1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new oa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,s1),this.boundingSphere.expandByPoint(s1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),DA.copy(this.boundingSphere),DA.applyMatrix4(i),e.ray.intersectsSphere(DA)!==!1&&(ij.copy(i).invert(),FA.copy(e.ray).applyMatrix4(ij),!(this.boundingBox!==null&&FA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,FA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new oi,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===BR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===yW?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;tj.fromBufferAttribute(i.attributes.skinIndex,e),nj.fromBufferAttribute(i.attributes.skinWeight,e),ej.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=nj.getComponent(s);if(o!==0){const a=tj.getComponent(s);rj.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Eme.copy(ej).applyMatrix4(rj),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class KP extends ni{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fu extends _s{constructor(e=null,t=1,r=1,i,s,o,a,l,u=Bo,c=Bo,d,h){super(null,o,a,l,u,c,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const sj=new hr,Tme=new hr;class kT{constructor(e=[],t=[]){this.uuid=Ll(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new hr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new hr;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Tme;sj.multiplyMatrices(a,t[s]),sj.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new kT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Fu(t,e,e,na,Na);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new KP),this.bones.push(o),this.boneInverses.push(new hr().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class fv extends Mi{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qg=new hr,oj=new hr,o1=[],aj=new ka,Mme=new hr,k_=new Js,O_=new oa;class VW extends Js{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new fv(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Mme)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ka),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Qg),aj.copy(e.boundingBox).applyMatrix4(Qg),this.boundingBox.union(aj)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new oa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Qg),O_.copy(e.boundingSphere).applyMatrix4(Qg),this.boundingSphere.union(O_)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(k_.geometry=this.geometry,k_.material=this.material,k_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),O_.copy(this.boundingSphere),O_.applyMatrix4(r),e.ray.intersectsSphere(O_)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Qg),oj.multiplyMatrices(r,Qg),k_.matrixWorld=oj,k_.raycast(e,o1);for(let o=0,a=o1.length;o<a;o++){const l=o1[o];l.instanceId=s,l.object=this,t.push(l)}o1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new fv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Fu(new Float32Array(i*this.count),i,this.count,ET,Na));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<r.length;u++)o+=r[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const qA=new Pe,Ime=new Pe,Ame=new Ar;class qd{constructor(e=new Pe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=qA.subVectors(r,t).cross(Ime.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(qA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Ame.getNormalMatrix(e),i=this.coplanarPoint(qA).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Mp=new oa,a1=new Pe;class hb{constructor(e=new qd,t=new qd,r=new qd,i=new qd,s=new qd,o=new qd){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Hc){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],d=i[6],h=i[7],p=i[8],g=i[9],x=i[10],b=i[11],y=i[12],E=i[13],T=i[14],I=i[15];if(r[0].setComponents(l-s,h-u,b-p,I-y).normalize(),r[1].setComponents(l+s,h+u,b+p,I+y).normalize(),r[2].setComponents(l+o,h+c,b+g,I+E).normalize(),r[3].setComponents(l-o,h-c,b-g,I-E).normalize(),r[4].setComponents(l-a,h-d,b-x,I-T).normalize(),t===Hc)r[5].setComponents(l+a,h+d,b+x,I+T).normalize();else if(t===w0)r[5].setComponents(a,d,x,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Mp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Mp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Mp)}intersectsSprite(e){return Mp.center.set(0,0,0),Mp.radius=.7071067811865476,Mp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Mp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(a1.x=i.normal.x>0?e.max.x:e.min.x,a1.y=i.normal.y>0?e.max.y:e.min.y,a1.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(a1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function jA(n,e){return n-e}function Cme(n,e){return n.z-e.z}function Rme(n,e){return e.z-n.z}class Nme{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Ha=new hr,Pme=new Pn(1,1,1),BA=new hb,l1=new ka,Ip=new oa,L_=new Pe,lj=new Pe,kme=new Pe,UA=new Nme,Jo=new Js,c1=[];function Ome(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function Ap(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class WW extends Js{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,r=t*2,i){super(new Ur,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Fu(t,e,e,na,Na);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new Fu(t,e,e,cb,of);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new Fu(t,e,e,na,Na);r.colorSpace=Zr.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(r*l),d=new Mi(c,l,u);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Mi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ka);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Ha),this.getBoundingBoxAt(s,l1).applyMatrix4(Ha),e.union(l1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Ha),this.getBoundingSphereAt(s,Ip).applyMatrix4(Ha),e.union(Ip)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(jA),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Ha.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Pme.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(jA),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in r.attributes){const d=t.getAttribute(c),h=r.getAttribute(c);Ome(d,h,l);const p=d.itemSize;for(let g=d.count,x=u;g<x;g++){const b=l+g;for(let y=0;y<p;y++)h.setComponent(b,y,0)}h.needsUpdate=!0,h.addUpdateRange(l*p,u*p)}if(i){const c=a.indexStart,d=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let h=0;h<o.count;h++)s.setX(c+h,l+o.getX(h));for(let h=o.count,p=d;h<p;h++)s.setX(c+h,l);s.needsUpdate=!0,s.addUpdateRange(c,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].active&&r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],u=r[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:d,reservedIndexCount:h}=u,p=s.index,g=p.array,x=e-d;for(let b=c;b<c+h;b++)g[b]=g[b]+x;p.array.copyWithin(t,c,c+h),p.addUpdateRange(t,h),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:d}=u,h=s.attributes;for(const p in h){const g=h[p],{array:x,itemSize:b}=g;x.copyWithin(e*b,c*b,(c+d)*b),g.addUpdateRange(e*b,d*b)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new ka,o=r.index,a=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let c=l;o&&(c=o.getX(c)),s.expandByPoint(L_.fromBufferAttribute(a,c))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new oa;this.getBoundingBoxAt(e,l1),l1.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let u=i.start,c=i.start+i.count;u<c;u++){let d=u;o&&(d=o.getX(d)),L_.fromBufferAttribute(a,d),l=Math.max(l,s.center.distanceToSquared(L_))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(jA);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Ap(this._multiDrawCounts,i),Ap(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ap(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ap(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Ap(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ur,this._initializeGeometry(s));const o=this.geometry;s.index&&Ap(s.index.array,o.index.array);for(const a in s.attributes)Ap(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Jo.material=this.material,Jo.geometry.index=o.index,Jo.geometry.attributes=o.attributes,Jo.geometry.boundingBox===null&&(Jo.geometry.boundingBox=new ka),Jo.geometry.boundingSphere===null&&(Jo.geometry.boundingSphere=new oa);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const u=r[a].geometryIndex,c=i[u];Jo.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,Jo.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Jo.geometry.boundingBox),this.getBoundingSphereAt(u,Jo.geometry.boundingSphere),Jo.raycast(e,c1);for(let d=0,h=c1.length;d<h;d++){const p=c1[d];p.object=this,p.batchId=a,t.push(p)}c1.length=0}Jo.material=null,Jo.geometry.index=null,Jo.geometry.attributes={},Jo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,d=this._geometryInfo,h=this.perObjectFrustumCulled,p=this._indirectTexture,g=p.image.data;h&&(Ha.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),BA.setFromProjectionMatrix(Ha,e.coordinateSystem));let x=0;if(this.sortObjects){Ha.copy(this.matrixWorld).invert(),L_.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Ha),lj.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Ha);for(let E=0,T=l.length;E<T;E++)if(l[E].visible&&l[E].active){const I=l[E].geometryIndex;this.getMatrixAt(E,Ha),this.getBoundingSphereAt(I,Ip).applyMatrix4(Ha);let N=!1;if(h&&(N=!BA.intersectsSphere(Ip)),!N){const k=d[I],q=kme.subVectors(Ip.center,L_).dot(lj);UA.push(k.start,k.count,q,E)}}const b=UA.list,y=this.customSort;y===null?b.sort(s.transparent?Rme:Cme):y.call(this,b,r);for(let E=0,T=b.length;E<T;E++){const I=b[E];u[x]=I.start*a,c[x]=I.count,g[x]=I.index,x++}UA.reset()}else for(let b=0,y=l.length;b<y;b++)if(l[b].visible&&l[b].active){const E=l[b].geometryIndex;let T=!1;if(h&&(this.getMatrixAt(b,Ha),this.getBoundingSphereAt(E,Ip).applyMatrix4(Ha),T=!BA.intersectsSphere(Ip)),!T){const I=d[E];u[x]=I.start*a,c[x]=I.count,g[x]=b,x++}}p.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Da extends fa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pn(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const g2=new Pe,y2=new Pe,cj=new hr,D_=new zm,u1=new oa,zA=new Pe,uj=new Pe;class Nh extends ni{constructor(e=new Ur,t=new Da){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)g2.fromBufferAttribute(t,i-1),y2.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=g2.distanceTo(y2);e.setAttribute("lineDistance",new Xn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),u1.copy(r.boundingSphere),u1.applyMatrix4(i),u1.radius+=s,e.ray.intersectsSphere(u1)===!1)return;cj.copy(i).invert(),D_.copy(e.ray).applyMatrix4(cj);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=r.index,h=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let x=p,b=g-1;x<b;x+=u){const y=c.getX(x),E=c.getX(x+1),T=d1(this,e,D_,l,y,E,x);T&&t.push(T)}if(this.isLineLoop){const x=c.getX(g-1),b=c.getX(p),y=d1(this,e,D_,l,x,b,g-1);y&&t.push(y)}}else{const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let x=p,b=g-1;x<b;x+=u){const y=d1(this,e,D_,l,x,x+1,x);y&&t.push(y)}if(this.isLineLoop){const x=d1(this,e,D_,l,g-1,p,g-1);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function d1(n,e,t,r,i,s,o){const a=n.geometry.attributes.position;if(g2.fromBufferAttribute(a,i),y2.fromBufferAttribute(a,s),t.distanceSqToSegment(g2,y2,zA,uj)>r)return;zA.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(zA);if(!(u<e.near||u>e.far))return{distance:u,point:uj.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const dj=new Pe,fj=new Pe;class Gu extends Nh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)dj.fromBufferAttribute(t,i),fj.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+dj.distanceTo(fj);e.setAttribute("lineDistance",new Xn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $W extends Nh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class QP extends fa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pn(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const hj=new hr,VR=new zm,f1=new oa,h1=new Pe;class HW extends ni{constructor(e=new Ur,t=new QP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),f1.copy(r.boundingSphere),f1.applyMatrix4(i),f1.radius+=s,e.ray.intersectsSphere(f1)===!1)return;hj.copy(i).invert(),VR.copy(e.ray).applyMatrix4(hj);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,d=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=h,x=p;g<x;g++){const b=u.getX(g);h1.fromBufferAttribute(d,b),pj(h1,b,l,i,e,t,this)}}else{const h=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let g=h,x=p;g<x;g++)h1.fromBufferAttribute(d,g),pj(h1,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function pj(n,e,t,r,i,s,o){const a=VR.distanceSqToPoint(n);if(a<t){const l=new Pe;VR.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class GW extends _s{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ls,this.magFilter=s!==void 0?s:Ls,this.generateMipmaps=!1;const c=this;function d(){c.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lme extends GW{constructor(e,t,r,i,s,o,a,l){super({},e,t,r,i,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Dme extends _s{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Bo,this.minFilter=Bo,this.generateMipmaps=!1,this.needsUpdate=!0}}class OT extends _s{constructor(e,t,r,i,s,o,a,l,u,c,d,h){super(null,o,a,l,u,c,i,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Fme extends OT{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ac,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class qme extends OT{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,sf),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class jme extends _s{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class LT extends _s{constructor(e,t,r,i,s,o,a,l,u,c=dm){if(c!==dm&&c!==Rm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===dm&&(r=of),r===void 0&&c===Rm&&(r=Cm),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Bo,this.minFilter=l!==void 0?l:Bo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ru{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,p=(o-c)/h;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ut:new Pe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Pe,i=[],s=[],o=[],a=new Pe,l=new hr;for(let p=0;p<=e;p++){const g=p/e;i[p]=this.getTangentAt(g,new Pe)}s[0]=new Pe,o[0]=new Pe;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),h<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Er(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,g))}o[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(Er(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],p*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class DT extends ru{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ut){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=u-this.aY;l=h*c-p*d+this.aX,u=h*d+p*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class XW extends DT{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function YP(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,d){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,p=(a-o)/c-(l-o)/(c+d)+(l-a)/d;h*=c,p*=c,i(o,a,h,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const p1=new Pe,VA=new YP,WA=new YP,$A=new YP;class KW extends ru{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Pe){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(p1.subVectors(i[0],i[1]).add(i[0]),u=p1);const d=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(p1.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=p1),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(d),p),x=Math.pow(d.distanceToSquared(h),p),b=Math.pow(h.distanceToSquared(c),p);x<1e-4&&(x=1),g<1e-4&&(g=x),b<1e-4&&(b=x),VA.initNonuniformCatmullRom(u.x,d.x,h.x,c.x,g,x,b),WA.initNonuniformCatmullRom(u.y,d.y,h.y,c.y,g,x,b),$A.initNonuniformCatmullRom(u.z,d.z,h.z,c.z,g,x,b)}else this.curveType==="catmullrom"&&(VA.initCatmullRom(u.x,d.x,h.x,c.x,this.tension),WA.initCatmullRom(u.y,d.y,h.y,c.y,this.tension),$A.initCatmullRom(u.z,d.z,h.z,c.z,this.tension));return r.set(VA.calc(l),WA.calc(l),$A.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Pe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function mj(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Bme(n,e){const t=1-n;return t*t*e}function Ume(n,e){return 2*(1-n)*n*e}function zme(n,e){return n*n*e}function Ax(n,e,t,r){return Bme(n,e)+Ume(n,t)+zme(n,r)}function Vme(n,e){const t=1-n;return t*t*t*e}function Wme(n,e){const t=1-n;return 3*t*t*n*e}function $me(n,e){return 3*(1-n)*n*n*e}function Hme(n,e){return n*n*n*e}function Cx(n,e,t,r,i){return Vme(n,e)+Wme(n,t)+$me(n,r)+Hme(n,i)}class JP extends ru{constructor(e=new Ut,t=new Ut,r=new Ut,i=new Ut){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ut){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Cx(e,i.x,s.x,o.x,a.x),Cx(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QW extends ru{constructor(e=new Pe,t=new Pe,r=new Pe,i=new Pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Pe){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Cx(e,i.x,s.x,o.x,a.x),Cx(e,i.y,s.y,o.y,a.y),Cx(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ZP extends ru{constructor(e=new Ut,t=new Ut){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ut){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ut){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YW extends ru{constructor(e=new Pe,t=new Pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Pe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ek extends ru{constructor(e=new Ut,t=new Ut,r=new Ut){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ut){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Ax(e,i.x,s.x,o.x),Ax(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tk extends ru{constructor(e=new Pe,t=new Pe,r=new Pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Pe){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Ax(e,i.x,s.x,o.x),Ax(e,i.y,s.y,o.y),Ax(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nk extends ru{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ut){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(mj(a,l.x,u.x,c.x,d.x),mj(a,l.y,u.y,c.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ut().fromArray(i))}return this}}var v2=Object.freeze({__proto__:null,ArcCurve:XW,CatmullRomCurve3:KW,CubicBezierCurve:JP,CubicBezierCurve3:QW,EllipseCurve:DT,LineCurve:ZP,LineCurve3:YW,QuadraticBezierCurve:ek,QuadraticBezierCurve3:tk,SplineCurve:nk});class JW extends ru{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new v2[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new v2[i.type]().fromJSON(i))}return this}}class E0 extends JW{constructor(e){super(),this.type="Path",this.currentPoint=new Ut,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new ZP(this.currentPoint.clone(),new Ut(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new ek(this.currentPoint.clone(),new Ut(e,t),new Ut(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new JP(this.currentPoint.clone(),new Ut(e,t),new Ut(r,i),new Ut(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new nk(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new DT(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class pb extends Ur{constructor(e=[new Ut(0,-.5),new Ut(.5,0),new Ut(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Er(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,d=new Pe,h=new Ut,p=new Pe,g=new Pe,x=new Pe;let b=0,y=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:b=e[E+1].x-e[E].x,y=e[E+1].y-e[E].y,p.x=y*1,p.y=-b,p.z=y*0,x.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:b=e[E+1].x-e[E].x,y=e[E+1].y-e[E].y,p.x=y*1,p.y=-b,p.z=y*0,g.copy(p),p.x+=x.x,p.y+=x.y,p.z+=x.z,p.normalize(),l.push(p.x,p.y,p.z),x.copy(g)}for(let E=0;E<=t;E++){const T=r+E*c*i,I=Math.sin(T),N=Math.cos(T);for(let k=0;k<=e.length-1;k++){d.x=e[k].x*I,d.y=e[k].y,d.z=e[k].x*N,o.push(d.x,d.y,d.z),h.x=E/t,h.y=k/(e.length-1),a.push(h.x,h.y);const q=l[3*k+0]*I,L=l[3*k+1],R=l[3*k+0]*N;u.push(q,L,R)}}for(let E=0;E<t;E++)for(let T=0;T<e.length-1;T++){const I=T+E*e.length,N=I,k=I+e.length,q=I+e.length+1,L=I+1;s.push(N,k,L),s.push(q,L,k)}this.setIndex(s),this.setAttribute("position",new Xn(o,3)),this.setAttribute("uv",new Xn(a,2)),this.setAttribute("normal",new Xn(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pb(e.points,e.segments,e.phiStart,e.phiLength)}}class FT extends pb{constructor(e=1,t=1,r=4,i=8){const s=new E0;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new FT(e.radius,e.length,e.capSegments,e.radialSegments)}}class qT extends Ur{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new Pe,c=new Ut;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=r+d/t*i;u.x=e*Math.cos(p),u.y=e*Math.sin(p),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Xn(o,3)),this.setAttribute("normal",new Xn(a,3)),this.setAttribute("uv",new Xn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Mv extends Ur{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],d=[],h=[],p=[];let g=0;const x=[],b=r/2;let y=0;E(),o===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(c),this.setAttribute("position",new Xn(d,3)),this.setAttribute("normal",new Xn(h,3)),this.setAttribute("uv",new Xn(p,2));function E(){const I=new Pe,N=new Pe;let k=0;const q=(t-e)/r;for(let L=0;L<=s;L++){const R=[],P=L/s,F=P*(t-e)+e;for(let z=0;z<=i;z++){const V=z/i,W=V*l+a,Q=Math.sin(W),X=Math.cos(W);N.x=F*Q,N.y=-P*r+b,N.z=F*X,d.push(N.x,N.y,N.z),I.set(Q,q,X).normalize(),h.push(I.x,I.y,I.z),p.push(V,1-P),R.push(g++)}x.push(R)}for(let L=0;L<i;L++)for(let R=0;R<s;R++){const P=x[R][L],F=x[R+1][L],z=x[R+1][L+1],V=x[R][L+1];(e>0||R!==0)&&(c.push(P,F,V),k+=3),(t>0||R!==s-1)&&(c.push(F,z,V),k+=3)}u.addGroup(y,k,0),y+=k}function T(I){const N=g,k=new Ut,q=new Pe;let L=0;const R=I===!0?e:t,P=I===!0?1:-1;for(let z=1;z<=i;z++)d.push(0,b*P,0),h.push(0,P,0),p.push(.5,.5),g++;const F=g;for(let z=0;z<=i;z++){const W=z/i*l+a,Q=Math.cos(W),X=Math.sin(W);q.x=R*X,q.y=b*P,q.z=R*Q,d.push(q.x,q.y,q.z),h.push(0,P,0),k.x=Q*.5+.5,k.y=X*.5*P+.5,p.push(k.x,k.y),g++}for(let z=0;z<i;z++){const V=N+z,W=F+z;I===!0?c.push(W,W+1,V):c.push(W+1,W,V),L+=3}u.addGroup(y,L,I===!0?1:2),y+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jT extends Mv{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new jT(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fh extends Ur{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new Xn(s,3)),this.setAttribute("normal",new Xn(s.slice(),3)),this.setAttribute("uv",new Xn(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(E){const T=new Pe,I=new Pe,N=new Pe;for(let k=0;k<t.length;k+=3)p(t[k+0],T),p(t[k+1],I),p(t[k+2],N),l(T,I,N,E)}function l(E,T,I,N){const k=N+1,q=[];for(let L=0;L<=k;L++){q[L]=[];const R=E.clone().lerp(I,L/k),P=T.clone().lerp(I,L/k),F=k-L;for(let z=0;z<=F;z++)z===0&&L===k?q[L][z]=R:q[L][z]=R.clone().lerp(P,z/F)}for(let L=0;L<k;L++)for(let R=0;R<2*(k-L)-1;R++){const P=Math.floor(R/2);R%2===0?(h(q[L][P+1]),h(q[L+1][P]),h(q[L][P])):(h(q[L][P+1]),h(q[L+1][P+1]),h(q[L+1][P]))}}function u(E){const T=new Pe;for(let I=0;I<s.length;I+=3)T.x=s[I+0],T.y=s[I+1],T.z=s[I+2],T.normalize().multiplyScalar(E),s[I+0]=T.x,s[I+1]=T.y,s[I+2]=T.z}function c(){const E=new Pe;for(let T=0;T<s.length;T+=3){E.x=s[T+0],E.y=s[T+1],E.z=s[T+2];const I=b(E)/2/Math.PI+.5,N=y(E)/Math.PI+.5;o.push(I,1-N)}g(),d()}function d(){for(let E=0;E<o.length;E+=6){const T=o[E+0],I=o[E+2],N=o[E+4],k=Math.max(T,I,N),q=Math.min(T,I,N);k>.9&&q<.1&&(T<.2&&(o[E+0]+=1),I<.2&&(o[E+2]+=1),N<.2&&(o[E+4]+=1))}}function h(E){s.push(E.x,E.y,E.z)}function p(E,T){const I=E*3;T.x=e[I+0],T.y=e[I+1],T.z=e[I+2]}function g(){const E=new Pe,T=new Pe,I=new Pe,N=new Pe,k=new Ut,q=new Ut,L=new Ut;for(let R=0,P=0;R<s.length;R+=9,P+=6){E.set(s[R+0],s[R+1],s[R+2]),T.set(s[R+3],s[R+4],s[R+5]),I.set(s[R+6],s[R+7],s[R+8]),k.set(o[P+0],o[P+1]),q.set(o[P+2],o[P+3]),L.set(o[P+4],o[P+5]),N.copy(E).add(T).add(I).divideScalar(3);const F=b(N);x(k,P+0,E,F),x(q,P+2,T,F),x(L,P+4,I,F)}}function x(E,T,I,N){N<0&&E.x===1&&(o[T]=E.x-1),I.x===0&&I.z===0&&(o[T]=N/2/Math.PI+.5)}function b(E){return Math.atan2(E.z,-E.x)}function y(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fh(e.vertices,e.indices,e.radius,e.details)}}class BT extends Fh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new BT(e.radius,e.detail)}}const m1=new Pe,g1=new Pe,HA=new Pe,y1=new el;class ZW extends Ur{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(fm*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),h={},p=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:x,b,c:y}=y1;if(x.fromBufferAttribute(a,u[0]),b.fromBufferAttribute(a,u[1]),y.fromBufferAttribute(a,u[2]),y1.getNormal(HA),d[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,d[1]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,d[2]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let E=0;E<3;E++){const T=(E+1)%3,I=d[E],N=d[T],k=y1[c[E]],q=y1[c[T]],L=`${I}_${N}`,R=`${N}_${I}`;R in h&&h[R]?(HA.dot(h[R].normal)<=s&&(p.push(k.x,k.y,k.z),p.push(q.x,q.y,q.z)),h[R]=null):L in h||(h[L]={index0:u[E],index1:u[T],normal:HA.clone()})}}for(const g in h)if(h[g]){const{index0:x,index1:b}=h[g];m1.fromBufferAttribute(a,x),g1.fromBufferAttribute(a,b),p.push(m1.x,m1.y,m1.z),p.push(g1.x,g1.y,g1.z)}this.setAttribute("position",new Xn(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class pm extends E0{constructor(e){super(e),this.uuid=Ll(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new E0().fromJSON(i))}return this}}const Gme={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=e$(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,d,h,p;if(r&&(s=Jme(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let g=t;g<i;g+=t)d=n[g],h=n[g+1],d<a&&(a=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);p=Math.max(u-a,c-l),p=p!==0?32767/p:0}return T0(s,o,t,a,l,p,0),o}};function e$(n,e,t,r,i){let s,o;if(i===cge(n,e,t,r)>0)for(s=e;s<t;s+=r)o=gj(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=gj(s,n[s],n[s+1],o);return o&&UT(o,o.next)&&(I0(o),o=o.next),o}function km(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(UT(t,t.next)||us(t.prev,t,t.next)===0)){if(I0(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function T0(n,e,t,r,i,s,o){if(!n)return;!o&&s&&rge(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?Kme(n,r,i,s):Xme(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),I0(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=Qme(km(n),e,t),T0(n,e,t,r,i,s,2)):o===2&&Yme(n,e,t,r,i,s):T0(km(n),e,t,r,i,s,1);break}}}function Xme(n){const e=n.prev,t=n,r=n.next;if(us(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,h=i>s?i>o?i:o:s>o?s:o,p=a>l?a>u?a:u:l>u?l:u;let g=r.next;for(;g!==e;){if(g.x>=c&&g.x<=h&&g.y>=d&&g.y<=p&&wy(i,a,s,l,o,u,g.x,g.y)&&us(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Kme(n,e,t,r){const i=n.prev,s=n,o=n.next;if(us(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,d=s.y,h=o.y,p=a<l?a<u?a:u:l<u?l:u,g=c<d?c<h?c:h:d<h?d:h,x=a>l?a>u?a:u:l>u?l:u,b=c>d?c>h?c:h:d>h?d:h,y=WR(p,g,e,t,r),E=WR(x,b,e,t,r);let T=n.prevZ,I=n.nextZ;for(;T&&T.z>=y&&I&&I.z<=E;){if(T.x>=p&&T.x<=x&&T.y>=g&&T.y<=b&&T!==i&&T!==o&&wy(a,c,l,d,u,h,T.x,T.y)&&us(T.prev,T,T.next)>=0||(T=T.prevZ,I.x>=p&&I.x<=x&&I.y>=g&&I.y<=b&&I!==i&&I!==o&&wy(a,c,l,d,u,h,I.x,I.y)&&us(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;T&&T.z>=y;){if(T.x>=p&&T.x<=x&&T.y>=g&&T.y<=b&&T!==i&&T!==o&&wy(a,c,l,d,u,h,T.x,T.y)&&us(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;I&&I.z<=E;){if(I.x>=p&&I.x<=x&&I.y>=g&&I.y<=b&&I!==i&&I!==o&&wy(a,c,l,d,u,h,I.x,I.y)&&us(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function Qme(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!UT(i,s)&&t$(i,r,r.next,s)&&M0(i,s)&&M0(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),I0(r),I0(r.next),r=n=s),r=r.next}while(r!==n);return km(r)}function Yme(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&oge(o,a)){let l=n$(o,a);o=km(o,o.next),l=km(l,l.next),T0(o,e,t,r,i,s,0),T0(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function Jme(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=e$(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(sge(u));for(i.sort(Zme),s=0;s<i.length;s++)t=ege(i[s],t);return t}function Zme(n,e){return n.x-e.x}function ege(n,e){const t=tge(n,e);if(!t)return e;const r=n$(t,n);return km(r,r.next),km(t,t.next)}function tge(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>r&&(r=h,i=t.x<t.next.x?t:t.next,h===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&wy(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),M0(t,n)&&(d<c||d===c&&(t.x>i.x||t.x===i.x&&nge(i,t)))&&(i=t,c=d)),t=t.next;while(t!==a);return i}function nge(n,e){return us(n.prev,n,e.prev)<0&&us(e.next,n,n.next)<0}function rge(n,e,t,r){let i=n;do i.z===0&&(i.z=WR(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,ige(i)}function ige(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function WR(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&0xff00ff,n=(n|n<<4)&0xf0f0f0f,n=(n|n<<2)&0x33333333,n=(n|n<<1)&0x55555555,e=(e|e<<8)&0xff00ff,e=(e|e<<4)&0xf0f0f0f,e=(e|e<<2)&0x33333333,e=(e|e<<1)&0x55555555,n|e<<1}function sge(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function wy(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function oge(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!age(n,e)&&(M0(n,e)&&M0(e,n)&&lge(n,e)&&(us(n.prev,n,e.prev)||us(n,e.prev,e))||UT(n,e)&&us(n.prev,n,n.next)>0&&us(e.prev,e,e.next)>0)}function us(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function UT(n,e){return n.x===e.x&&n.y===e.y}function t$(n,e,t,r){const i=_1(us(n,e,t)),s=_1(us(n,e,r)),o=_1(us(t,r,n)),a=_1(us(t,r,e));return!!(i!==s&&o!==a||i===0&&v1(n,t,e)||s===0&&v1(n,r,e)||o===0&&v1(t,n,r)||a===0&&v1(t,e,r))}function v1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function _1(n){return n>0?1:n<0?-1:0}function age(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&t$(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function M0(n,e){return us(n.prev,n,n.next)<0?us(n,e,n.next)>=0&&us(n,n.prev,e)>=0:us(n,e,n.prev)<0||us(n,n.next,e)<0}function lge(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function n$(n,e){const t=new $R(n.i,n.x,n.y),r=new $R(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function gj(n,e,t,r){const i=new $R(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function I0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $R(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function cge(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class qu{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return qu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];yj(e),vj(r,e);let o=e.length;t.forEach(yj);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,vj(r,t[l]);const a=Gme.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function yj(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function vj(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class zT extends Ur{constructor(e=new pm([new Ut(.5,.5),new Ut(-.5,.5),new Ut(-.5,-.5),new Ut(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Xn(i,3)),this.setAttribute("uv",new Xn(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,E=t.UVGenerator!==void 0?t.UVGenerator:uge;let T,I=!1,N,k,q,L;y&&(T=y.getSpacedPoints(c),I=!0,h=!1,N=y.computeFrenetFrames(c,!1),k=new Pe,q=new Pe,L=new Pe),h||(b=0,p=0,g=0,x=0);const R=a.extractPoints(u);let P=R.shape;const F=R.holes;if(!qu.isClockWise(P)){P=P.reverse();for(let Ne=0,ke=F.length;Ne<ke;Ne++){const me=F[Ne];qu.isClockWise(me)&&(F[Ne]=me.reverse())}}const V=qu.triangulateShape(P,F),W=P;for(let Ne=0,ke=F.length;Ne<ke;Ne++){const me=F[Ne];P=P.concat(me)}function Q(Ne,ke,me){return ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ne.clone().addScaledVector(ke,me)}const X=P.length,re=V.length;function G(Ne,ke,me){let ht,ct,Mt;const xe=Ne.x-ke.x,Te=Ne.y-ke.y,Ae=me.x-Ne.x,le=me.y-Ne.y,se=xe*xe+Te*Te,Oe=xe*le-Te*Ae;if(Math.abs(Oe)>Number.EPSILON){const Ce=Math.sqrt(se),Ge=Math.sqrt(Ae*Ae+le*le),at=ke.x-Te/Ce,Lt=ke.y+xe/Ce,Dt=me.x-le/Ge,Jt=me.y+Ae/Ge,Cn=((Dt-at)*le-(Jt-Lt)*Ae)/(xe*le-Te*Ae);ht=at+xe*Cn-Ne.x,ct=Lt+Te*Cn-Ne.y;const Vt=ht*ht+ct*ct;if(Vt<=2)return new Ut(ht,ct);Mt=Math.sqrt(Vt/2)}else{let Ce=!1;xe>Number.EPSILON?Ae>Number.EPSILON&&(Ce=!0):xe<-Number.EPSILON?Ae<-Number.EPSILON&&(Ce=!0):Math.sign(Te)===Math.sign(le)&&(Ce=!0),Ce?(ht=-Te,ct=xe,Mt=Math.sqrt(se)):(ht=xe,ct=Te,Mt=Math.sqrt(se/2))}return new Ut(ht/Mt,ct/Mt)}const Y=[];for(let Ne=0,ke=W.length,me=ke-1,ht=Ne+1;Ne<ke;Ne++,me++,ht++)me===ke&&(me=0),ht===ke&&(ht=0),Y[Ne]=G(W[Ne],W[me],W[ht]);const te=[];let Z,fe=Y.concat();for(let Ne=0,ke=F.length;Ne<ke;Ne++){const me=F[Ne];Z=[];for(let ht=0,ct=me.length,Mt=ct-1,xe=ht+1;ht<ct;ht++,Mt++,xe++)Mt===ct&&(Mt=0),xe===ct&&(xe=0),Z[ht]=G(me[ht],me[Mt],me[xe]);te.push(Z),fe=fe.concat(Z)}for(let Ne=0;Ne<b;Ne++){const ke=Ne/b,me=p*Math.cos(ke*Math.PI/2),ht=g*Math.sin(ke*Math.PI/2)+x;for(let ct=0,Mt=W.length;ct<Mt;ct++){const xe=Q(W[ct],Y[ct],ht);Ee(xe.x,xe.y,-me)}for(let ct=0,Mt=F.length;ct<Mt;ct++){const xe=F[ct];Z=te[ct];for(let Te=0,Ae=xe.length;Te<Ae;Te++){const le=Q(xe[Te],Z[Te],ht);Ee(le.x,le.y,-me)}}}const ge=g+x;for(let Ne=0;Ne<X;Ne++){const ke=h?Q(P[Ne],fe[Ne],ge):P[Ne];I?(q.copy(N.normals[0]).multiplyScalar(ke.x),k.copy(N.binormals[0]).multiplyScalar(ke.y),L.copy(T[0]).add(q).add(k),Ee(L.x,L.y,L.z)):Ee(ke.x,ke.y,0)}for(let Ne=1;Ne<=c;Ne++)for(let ke=0;ke<X;ke++){const me=h?Q(P[ke],fe[ke],ge):P[ke];I?(q.copy(N.normals[Ne]).multiplyScalar(me.x),k.copy(N.binormals[Ne]).multiplyScalar(me.y),L.copy(T[Ne]).add(q).add(k),Ee(L.x,L.y,L.z)):Ee(me.x,me.y,d/c*Ne)}for(let Ne=b-1;Ne>=0;Ne--){const ke=Ne/b,me=p*Math.cos(ke*Math.PI/2),ht=g*Math.sin(ke*Math.PI/2)+x;for(let ct=0,Mt=W.length;ct<Mt;ct++){const xe=Q(W[ct],Y[ct],ht);Ee(xe.x,xe.y,d+me)}for(let ct=0,Mt=F.length;ct<Mt;ct++){const xe=F[ct];Z=te[ct];for(let Te=0,Ae=xe.length;Te<Ae;Te++){const le=Q(xe[Te],Z[Te],ht);I?Ee(le.x,le.y+T[c-1].y,T[c-1].x+me):Ee(le.x,le.y,d+me)}}}ce(),ye();function ce(){const Ne=i.length/3;if(h){let ke=0,me=X*ke;for(let ht=0;ht<re;ht++){const ct=V[ht];Me(ct[2]+me,ct[1]+me,ct[0]+me)}ke=c+b*2,me=X*ke;for(let ht=0;ht<re;ht++){const ct=V[ht];Me(ct[0]+me,ct[1]+me,ct[2]+me)}}else{for(let ke=0;ke<re;ke++){const me=V[ke];Me(me[2],me[1],me[0])}for(let ke=0;ke<re;ke++){const me=V[ke];Me(me[0]+X*c,me[1]+X*c,me[2]+X*c)}}r.addGroup(Ne,i.length/3-Ne,0)}function ye(){const Ne=i.length/3;let ke=0;be(W,ke),ke+=W.length;for(let me=0,ht=F.length;me<ht;me++){const ct=F[me];be(ct,ke),ke+=ct.length}r.addGroup(Ne,i.length/3-Ne,1)}function be(Ne,ke){let me=Ne.length;for(;--me>=0;){const ht=me;let ct=me-1;ct<0&&(ct=Ne.length-1);for(let Mt=0,xe=c+b*2;Mt<xe;Mt++){const Te=X*Mt,Ae=X*(Mt+1),le=ke+ht+Te,se=ke+ct+Te,Oe=ke+ct+Ae,Ce=ke+ht+Ae;qe(le,se,Oe,Ce)}}}function Ee(Ne,ke,me){l.push(Ne),l.push(ke),l.push(me)}function Me(Ne,ke,me){Ue(Ne),Ue(ke),Ue(me);const ht=i.length/3,ct=E.generateTopUV(r,i,ht-3,ht-2,ht-1);Ye(ct[0]),Ye(ct[1]),Ye(ct[2])}function qe(Ne,ke,me,ht){Ue(Ne),Ue(ke),Ue(ht),Ue(ke),Ue(me),Ue(ht);const ct=i.length/3,Mt=E.generateSideWallUV(r,i,ct-6,ct-3,ct-2,ct-1);Ye(Mt[0]),Ye(Mt[1]),Ye(Mt[3]),Ye(Mt[1]),Ye(Mt[2]),Ye(Mt[3])}function Ue(Ne){i.push(l[Ne*3+0]),i.push(l[Ne*3+1]),i.push(l[Ne*3+2])}function Ye(Ne){s.push(Ne.x),s.push(Ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return dge(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new v2[i.type]().fromJSON(i)),new zT(r,e.options)}}const uge={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Ut(s,o),new Ut(a,l),new Ut(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],d=e[r*3+2],h=e[i*3],p=e[i*3+1],g=e[i*3+2],x=e[s*3],b=e[s*3+1],y=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Ut(o,1-l),new Ut(u,1-d),new Ut(h,1-g),new Ut(x,1-y)]:[new Ut(a,1-l),new Ut(c,1-d),new Ut(p,1-g),new Ut(b,1-y)]}};function dge(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class VT extends Fh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new VT(e.radius,e.detail)}}class mb extends Fh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mb(e.radius,e.detail)}}class Iv extends Ur{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,d=e/a,h=t/l,p=[],g=[],x=[],b=[];for(let y=0;y<c;y++){const E=y*h-o;for(let T=0;T<u;T++){const I=T*d-s;g.push(I,-E,0),x.push(0,0,1),b.push(T/a),b.push(1-y/l)}}for(let y=0;y<l;y++)for(let E=0;E<a;E++){const T=E+u*y,I=E+u*(y+1),N=E+1+u*(y+1),k=E+1+u*y;p.push(T,I,k),p.push(I,N,k)}this.setIndex(p),this.setAttribute("position",new Xn(g,3)),this.setAttribute("normal",new Xn(x,3)),this.setAttribute("uv",new Xn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Iv(e.width,e.height,e.widthSegments,e.heightSegments)}}class WT extends Ur{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let d=e;const h=(t-e)/i,p=new Pe,g=new Ut;for(let x=0;x<=i;x++){for(let b=0;b<=r;b++){const y=s+b/r*o;p.x=d*Math.cos(y),p.y=d*Math.sin(y),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,c.push(g.x,g.y)}d+=h}for(let x=0;x<i;x++){const b=x*(r+1);for(let y=0;y<r;y++){const E=y+b,T=E,I=E+r+1,N=E+r+2,k=E+1;a.push(T,I,k),a.push(I,N,k)}}this.setIndex(a),this.setAttribute("position",new Xn(l,3)),this.setAttribute("normal",new Xn(u,3)),this.setAttribute("uv",new Xn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class $T extends Ur{constructor(e=new pm([new Ut(0,.5),new Ut(-.5,-.5),new Ut(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Xn(i,3)),this.setAttribute("normal",new Xn(s,3)),this.setAttribute("uv",new Xn(o,2));function u(c){const d=i.length/3,h=c.extractPoints(t);let p=h.shape;const g=h.holes;qu.isClockWise(p)===!1&&(p=p.reverse());for(let b=0,y=g.length;b<y;b++){const E=g[b];qu.isClockWise(E)===!0&&(g[b]=E.reverse())}const x=qu.triangulateShape(p,g);for(let b=0,y=g.length;b<y;b++){const E=g[b];p=p.concat(E)}for(let b=0,y=p.length;b<y;b++){const E=p[b];i.push(E.x,E.y,0),s.push(0,0,1),o.push(E.x,E.y)}for(let b=0,y=x.length;b<y;b++){const E=x[b],T=E[0]+d,I=E[1]+d,N=E[2]+d;r.push(T,I,N),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fge(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new $T(r,e.curveSegments)}}function fge(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class gb extends Ur{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],d=new Pe,h=new Pe,p=[],g=[],x=[],b=[];for(let y=0;y<=r;y++){const E=[],T=y/r;let I=0;y===0&&o===0?I=.5/t:y===r&&l===Math.PI&&(I=-.5/t);for(let N=0;N<=t;N++){const k=N/t;d.x=-e*Math.cos(i+k*s)*Math.sin(o+T*a),d.y=e*Math.cos(o+T*a),d.z=e*Math.sin(i+k*s)*Math.sin(o+T*a),g.push(d.x,d.y,d.z),h.copy(d).normalize(),x.push(h.x,h.y,h.z),b.push(k+I,1-T),E.push(u++)}c.push(E)}for(let y=0;y<r;y++)for(let E=0;E<t;E++){const T=c[y][E+1],I=c[y][E],N=c[y+1][E],k=c[y+1][E+1];(y!==0||o>0)&&p.push(T,I,k),(y!==r-1||l<Math.PI)&&p.push(I,N,k)}this.setIndex(p),this.setAttribute("position",new Xn(g,3)),this.setAttribute("normal",new Xn(x,3)),this.setAttribute("uv",new Xn(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class HT extends Fh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new HT(e.radius,e.detail)}}class GT extends Ur{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new Pe,d=new Pe,h=new Pe;for(let p=0;p<=r;p++)for(let g=0;g<=i;g++){const x=g/i*s,b=p/r*Math.PI*2;d.x=(e+t*Math.cos(b))*Math.cos(x),d.y=(e+t*Math.cos(b))*Math.sin(x),d.z=t*Math.sin(b),a.push(d.x,d.y,d.z),c.x=e*Math.cos(x),c.y=e*Math.sin(x),h.subVectors(d,c).normalize(),l.push(h.x,h.y,h.z),u.push(g/i),u.push(p/r)}for(let p=1;p<=r;p++)for(let g=1;g<=i;g++){const x=(i+1)*p+g-1,b=(i+1)*(p-1)+g-1,y=(i+1)*(p-1)+g,E=(i+1)*p+g;o.push(x,b,E),o.push(b,y,E)}this.setIndex(o),this.setAttribute("position",new Xn(a,3)),this.setAttribute("normal",new Xn(l,3)),this.setAttribute("uv",new Xn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new GT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class XT extends Ur{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],d=new Pe,h=new Pe,p=new Pe,g=new Pe,x=new Pe,b=new Pe,y=new Pe;for(let T=0;T<=r;++T){const I=T/r*s*Math.PI*2;E(I,s,o,e,p),E(I+.01,s,o,e,g),b.subVectors(g,p),y.addVectors(g,p),x.crossVectors(b,y),y.crossVectors(x,b),x.normalize(),y.normalize();for(let N=0;N<=i;++N){const k=N/i*Math.PI*2,q=-t*Math.cos(k),L=t*Math.sin(k);d.x=p.x+(q*y.x+L*x.x),d.y=p.y+(q*y.y+L*x.y),d.z=p.z+(q*y.z+L*x.z),l.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),u.push(h.x,h.y,h.z),c.push(T/r),c.push(N/i)}}for(let T=1;T<=r;T++)for(let I=1;I<=i;I++){const N=(i+1)*(T-1)+(I-1),k=(i+1)*T+(I-1),q=(i+1)*T+I,L=(i+1)*(T-1)+I;a.push(N,k,L),a.push(k,q,L)}this.setIndex(a),this.setAttribute("position",new Xn(l,3)),this.setAttribute("normal",new Xn(u,3)),this.setAttribute("uv",new Xn(c,2));function E(T,I,N,k,q){const L=Math.cos(T),R=Math.sin(T),P=N/I*T,F=Math.cos(P);q.x=k*(2+F)*.5*L,q.y=k*(2+F)*R*.5,q.z=k*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class KT extends Ur{constructor(e=new tk(new Pe(-1,-1,0),new Pe(-1,1,0),new Pe(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Pe,l=new Pe,u=new Ut;let c=new Pe;const d=[],h=[],p=[],g=[];x(),this.setIndex(g),this.setAttribute("position",new Xn(d,3)),this.setAttribute("normal",new Xn(h,3)),this.setAttribute("uv",new Xn(p,2));function x(){for(let T=0;T<t;T++)b(T);b(s===!1?t:0),E(),y()}function b(T){c=e.getPointAt(T/t,c);const I=o.normals[T],N=o.binormals[T];for(let k=0;k<=i;k++){const q=k/i*Math.PI*2,L=Math.sin(q),R=-Math.cos(q);l.x=R*I.x+L*N.x,l.y=R*I.y+L*N.y,l.z=R*I.z+L*N.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,d.push(a.x,a.y,a.z)}}function y(){for(let T=1;T<=t;T++)for(let I=1;I<=i;I++){const N=(i+1)*(T-1)+(I-1),k=(i+1)*T+(I-1),q=(i+1)*T+I,L=(i+1)*(T-1)+I;g.push(N,k,L),g.push(k,q,L)}}function E(){for(let T=0;T<=t;T++)for(let I=0;I<=i;I++)u.x=T/t,u.y=I/i,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new KT(new v2[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class r$ extends Ur{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new Pe,s=new Pe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],h=d.start,p=d.count;for(let g=h,x=h+p;g<x;g+=3)for(let b=0;b<3;b++){const y=a.getX(g+b),E=a.getX(g+(b+1)%3);i.fromBufferAttribute(o,y),s.fromBufferAttribute(o,E),_j(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,d=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,d),_j(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Xn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function _j(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var xj=Object.freeze({__proto__:null,BoxGeometry:Vm,CapsuleGeometry:FT,CircleGeometry:qT,ConeGeometry:jT,CylinderGeometry:Mv,DodecahedronGeometry:BT,EdgesGeometry:ZW,ExtrudeGeometry:zT,IcosahedronGeometry:VT,LatheGeometry:pb,OctahedronGeometry:mb,PlaneGeometry:Iv,PolyhedronGeometry:Fh,RingGeometry:WT,ShapeGeometry:$T,SphereGeometry:gb,TetrahedronGeometry:HT,TorusGeometry:GT,TorusKnotGeometry:XT,TubeGeometry:KT,WireframeGeometry:r$});class i$ extends fa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Pn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class s$ extends Zc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class rk extends fa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Pn(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class o$ extends rk{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ut(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Er(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class a$ extends fa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Pn(0xffffff),this.specular=new Pn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.combine=lb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l$ extends fa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pn(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class c$ extends fa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class u$ extends fa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Pn(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bl,this.combine=lb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ik extends fa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bW,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class sk extends fa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class d$ extends fa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pn(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ut(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class f$ extends Da{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function sm(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function h$(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function p$(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function HR(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function ok(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function hge(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),d=[],h=[];for(let p=0;p<u.times.length;++p){const g=u.times[p]*i;if(!(g<t||g>=r)){d.push(u.times[p]);for(let x=0;x<c;++x)h.push(u.values[p*c+x])}}d.length!==0&&(u.times=sm(d,u.times.constructor),u.values=sm(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function pge(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(u===void 0)continue;let c=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let h=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const g=a.times.length-1;let x;if(s<=a.times[0]){const y=c,E=d-c;x=a.values.slice(y,E)}else if(s>=a.times[g]){const y=g*d+c,E=y+d-c;x=a.values.slice(y,E)}else{const y=a.createInterpolant(),E=c,T=d-c;y.evaluate(s),x=y.resultBuffer.slice(E,T)}l==="quaternion"&&new sa().fromArray(x).normalize().conjugate().toArray(x);const b=u.times.length;for(let y=0;y<b;++y){const E=y*p+h;if(l==="quaternion")sa.multiplyQuaternionsFlat(u.values,E,x,0,u.values,E);else{const T=p-h*2;for(let I=0;I<T;++I)u.values[E+I]-=x[I]}}}return n.blendMode=zP,n}const mge={convertArray:sm,isTypedArray:h$,getKeyframeOrder:p$,sortedArray:HR,flattenJSON:ok,subclip:hge,makeClipAdditive:pge};class yb{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class m$ extends yb{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nm,endingEnd:nm}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case rm:s=e,a=2*t-r;break;case _0:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case rm:o=e,l=2*r-t;break;case _0:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,g=(r-t)/(i-t),x=g*g,b=x*g,y=-h*b+2*h*x-h*g,E=(1+h)*b+(-1.5-2*h)*x+(-.5+h)*g+1,T=(-1-p)*b+(1.5+p)*x+.5*g,I=p*b-p*x;for(let N=0;N!==a;++N)s[N]=y*o[c+N]+E*o[u+N]+T*o[l+N]+I*o[d+N];return s}}class ak extends yb{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),d=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*d+o[l+h]*c;return s}}class g$ extends yb{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class iu{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=sm(t,this.TimeBufferType),this.values=sm(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:sm(e.times,Array),values:sm(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new g$(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ak(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new m$(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case v0:t=this.InterpolantFactoryMethodDiscrete;break;case m2:t=this.InterpolantFactoryMethodLinear;break;case iS:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return v0;case this.InterpolantFactoryMethodLinear:return m2;case this.InterpolantFactoryMethodSmooth:return iS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&h$(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===iS,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,p=d+r;for(let g=0;g!==r;++g){const x=t[d+g];if(x!==t[h+g]||x!==t[p+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let p=0;p!==r;++p)t[h+p]=t[d+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}iu.prototype.TimeBufferType=Float32Array;iu.prototype.ValueBufferType=Float32Array;iu.prototype.DefaultInterpolation=m2;class Wm extends iu{constructor(e,t,r){super(e,t,r)}}Wm.prototype.ValueTypeName="bool";Wm.prototype.ValueBufferType=Array;Wm.prototype.DefaultInterpolation=v0;Wm.prototype.InterpolantFactoryMethodLinear=void 0;Wm.prototype.InterpolantFactoryMethodSmooth=void 0;class lk extends iu{}lk.prototype.ValueTypeName="color";class A0 extends iu{}A0.prototype.ValueTypeName="number";class y$ extends yb{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)sa.slerpFlat(s,0,o,u-a,o,u,l);return s}}class vb extends iu{InterpolantFactoryMethodLinear(e){return new y$(this.times,this.values,this.getValueSize(),e)}}vb.prototype.ValueTypeName="quaternion";vb.prototype.InterpolantFactoryMethodSmooth=void 0;class $m extends iu{constructor(e,t,r){super(e,t,r)}}$m.prototype.ValueTypeName="string";$m.prototype.ValueBufferType=Array;$m.prototype.DefaultInterpolation=v0;$m.prototype.InterpolantFactoryMethodLinear=void 0;$m.prototype.InterpolantFactoryMethodSmooth=void 0;class C0 extends iu{}C0.prototype.ValueTypeName="vector";class R0{constructor(e="",t=-1,r=[],i=IT){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ll(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(yge(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(iu.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=p$(l);l=HR(l,1,c),u=HR(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new A0(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const d=c[1];let h=i[d];h||(i[d]=h=[]),h.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,p,g,x){if(p.length!==0){const b=[],y=[];ok(p,b,y,g),b.length!==0&&x.push(new d(h,b,y))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const h=u[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let x=0;x<h[g].morphTargets.length;x++)p[h[g].morphTargets[x]]=-1;for(const x in p){const b=[],y=[];for(let E=0;E!==h[g].morphTargets.length;++E){const T=h[g];b.push(T.time),y.push(T.morphTarget===x?1:0)}i.push(new A0(".morphTargetInfluence["+x+"]",b,y))}l=p.length*o}else{const p=".bones["+t[d].name+"]";r(C0,p+".position",h,"pos",i),r(vb,p+".quaternion",h,"rot",i),r(C0,p+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gge(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return A0;case"vector":case"vector2":case"vector3":case"vector4":return C0;case"color":return lk;case"quaternion":return vb;case"bool":case"boolean":return Wm;case"string":return $m}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function yge(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=gge(n.type);if(n.times===void 0){const t=[],r=[];ok(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const zd={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ck{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,h=u.length;d<h;d+=2){const p=u[d],g=u[d+1];if(p.global&&(p.lastIndex=0),p.test(c))return g}return null}}}const v$=new ck;class ul{constructor(e){this.manager=e!==void 0?e:v$,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ul.DEFAULT_MATERIAL_NAME="__DEFAULT";const Pd={};class vge extends Error{constructor(e,t){super(e),this.response=t}}class af extends ul{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=zd.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Pd[e]!==void 0){Pd[e].push({onLoad:t,onProgress:r,onError:i});return}Pd[e]=[],Pd[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Pd[e],d=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=h?parseInt(h):0,g=p!==0;let x=0;const b=new ReadableStream({start(y){E();function E(){d.read().then(({done:T,value:I})=>{if(T)y.close();else{x+=I.byteLength;const N=new ProgressEvent("progress",{lengthComputable:g,loaded:x,total:p});for(let k=0,q=c.length;k<q;k++){const L=c[k];L.onProgress&&L.onProgress(N)}y.enqueue(I),E()}},T=>{y.error(T)})}}});return new Response(b)}else throw new vge(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,p=new TextDecoder(h);return u.arrayBuffer().then(g=>p.decode(g))}}}).then(u=>{zd.add(e,u);const c=Pd[e];delete Pd[e];for(let d=0,h=c.length;d<h;d++){const p=c[d];p.onLoad&&p.onLoad(u)}}).catch(u=>{const c=Pd[e];if(c===void 0)throw this.manager.itemError(e),u;delete Pd[e];for(let d=0,h=c.length;d<h;d++){const p=c[d];p.onError&&p.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _ge extends ul{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new af(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=R0.parse(e[r]);t.push(i)}return t}}class xge extends ul{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new OT,l=new af(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(d){l.load(e[d],function(h){const p=s.parse(h,!0);o[d]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(a.minFilter=Ls),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)c(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let g=0;g<p;g++){o[g]={mipmaps:[]};for(let x=0;x<h.mipmapCount;x++)o[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+x]),o[g].format=h.format,o[g].width=h.width,o[g].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Ls),a.format=h.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class N0 extends ul{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=zd.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=S0("img");function l(){c(),zd.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){c(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class bge extends ul{constructor(e){super(e)}load(e,t,r,i){const s=new fb;s.colorSpace=Za;const o=new N0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class wge extends ul{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Fu,a=new af(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:ac,o.wrapT=u.wrapT!==void 0?u.wrapT:ac,o.magFilter=u.magFilter!==void 0?u.magFilter:Ls,o.minFilter=u.minFilter!==void 0?u.minFilter:Ls,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Nu),u.mipmapCount===1&&(o.minFilter=Ls),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class Sge extends ul{constructor(e){super(e)}load(e,t,r,i){const s=new _s,o=new N0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class qh extends ni{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Pn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class _$ extends qh{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Pn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const GA=new hr,bj=new Pe,wj=new Pe;class uk{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ut(512,512),this.map=null,this.mapPass=null,this.matrix=new hr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hb,this._frameExtents=new Ut(1,1),this._viewportCount=1,this._viewports=[new oi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;bj.setFromMatrixPosition(e.matrixWorld),t.position.copy(bj),wj.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(wj),t.updateMatrixWorld(),GA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(GA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ege extends uk{constructor(){super(new ks(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=uv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class x$ extends qh{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Ege}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Sj=new hr,F_=new Pe,XA=new Pe;class Tge extends uk{constructor(){super(new ks(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ut(4,2),this._viewportCount=6,this._viewports=[new oi(2,1,1,1),new oi(0,1,1,1),new oi(3,1,1,1),new oi(1,1,1,1),new oi(3,0,1,1),new oi(1,0,1,1)],this._cubeDirections=[new Pe(1,0,0),new Pe(-1,0,0),new Pe(0,0,1),new Pe(0,0,-1),new Pe(0,1,0),new Pe(0,-1,0)],this._cubeUps=[new Pe(0,1,0),new Pe(0,1,0),new Pe(0,1,0),new Pe(0,1,0),new Pe(0,0,1),new Pe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),F_.setFromMatrixPosition(e.matrixWorld),r.position.copy(F_),XA.copy(r.position),XA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(XA),r.updateMatrixWorld(),i.makeTranslation(-F_.x,-F_.y,-F_.z),Sj.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sj)}}class b$ extends qh{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Tge}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let Kd=class extends db{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};class Mge extends uk{constructor(){super(new Kd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class w$ extends qh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ni.DEFAULT_UP),this.updateMatrix(),this.target=new ni,this.shadow=new Mge}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class S$ extends qh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class E$ extends qh{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class T${constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Pe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class M$ extends qh{constructor(e=new T$,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class QT extends ul{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new af(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Pn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Pn().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ut().fromArray(o.value);break;case"v3":i.uniforms[s].value=new Pe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new oi().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Ar().fromArray(o.value);break;case"m4":i.uniforms[s].value=new hr().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ut().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ut().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return QT.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:i$,SpriteMaterial:XP,RawShaderMaterial:s$,ShaderMaterial:Zc,PointsMaterial:QP,MeshPhysicalMaterial:o$,MeshStandardMaterial:rk,MeshPhongMaterial:a$,MeshToonMaterial:l$,MeshNormalMaterial:c$,MeshLambertMaterial:u$,MeshDepthMaterial:ik,MeshDistanceMaterial:sk,MeshBasicMaterial:Dh,MeshMatcapMaterial:d$,LineDashedMaterial:f$,LineBasicMaterial:Da,Material:fa};return new t[e]}}class GR{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class I$ extends Ur{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class A$ extends ul{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new af(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,g){if(t[g]!==void 0)return t[g];const b=p.interleavedBuffers[g],y=s(p,b.buffer),E=xy(b.type,y),T=new PT(E,b.stride);return T.uuid=b.uuid,t[g]=T,T}function s(p,g){if(r[g]!==void 0)return r[g];const b=p.arrayBuffers[g],y=new Uint32Array(b).buffer;return r[g]=y,y}const o=e.isInstancedBufferGeometry?new I$:new Ur,a=e.data.index;if(a!==void 0){const p=xy(a.type,a.array);o.setIndex(new Mi(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let x;if(g.isInterleavedBufferAttribute){const b=i(e.data,g.data);x=new Pm(b,g.itemSize,g.offset,g.normalized)}else{const b=xy(g.type,g.array),y=g.isInstancedBufferAttribute?fv:Mi;x=new y(b,g.itemSize,g.normalized)}g.name!==void 0&&(x.name=g.name),g.usage!==void 0&&x.setUsage(g.usage),o.setAttribute(p,x)}const u=e.data.morphAttributes;if(u)for(const p in u){const g=u[p],x=[];for(let b=0,y=g.length;b<y;b++){const E=g[b];let T;if(E.isInterleavedBufferAttribute){const I=i(e.data,E.data);T=new Pm(I,E.itemSize,E.offset,E.normalized)}else{const I=xy(E.type,E.array);T=new Mi(I,E.itemSize,E.normalized)}E.name!==void 0&&(T.name=E.name),x.push(T)}o.morphAttributes[p]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let p=0,g=d.length;p!==g;++p){const x=d[p];o.addGroup(x.start,x.count,x.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const p=new Pe;h.center!==void 0&&p.fromArray(h.center),o.boundingSphere=new oa(p,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Ige extends ul{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?GR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new af(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?GR.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new af(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new pm().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new kT().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new A$;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in xj?a=xj[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new QT;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=R0.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:xy(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ck(t);s=new N0(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],h=d.url;if(Array.isArray(h)){const p=[];for(let g=0,x=h.length;g<x;g++){const b=h[g],y=a(b);y!==null&&(y instanceof HTMLImageElement?p.push(y):p.push(new Fu(y.data,y.width,y.height)))}i[d.uuid]=new im(p)}else{const p=a(d.url);i[d.uuid]=new im(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:xy(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new N0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,h=u.length;d<h;d++){const p=u[d],g=await s(p);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new Fu(g.data,g.width,g.height)))}r[l.uuid]=new im(c)}else{const c=await s(l.url);r[l.uuid]=new im(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new fb,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Fu:c=new _s,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,Age)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],Ej),c.wrapT=r(a.wrap[1],Ej)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,Tj)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,Tj)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let g=0,x=h.length;g<x;g++){const b=h[g];r[b]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",b),p.push(r[b])}return p}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let c,d;switch(e.type){case"Scene":o=new GP,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Pn(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new NT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new RT(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ks(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Kd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new S$(e.color,e.intensity);break;case"DirectionalLight":o=new w$(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new b$(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new E$(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new x$(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new _$(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new M$().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),d=l(e.material),o=new zW(c,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),d=l(e.material),o=new Js(c,d);break;case"InstancedMesh":c=a(e.geometry),d=l(e.material);const h=e.count,p=e.instanceMatrix,g=e.instanceColor;o=new VW(c,d,h),o.instanceMatrix=new fv(new Float32Array(p.array),16),g!==void 0&&(o.instanceColor=new fv(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":c=a(e.geometry),d=l(e.material),o=new WW(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const b=new ka;b.min.fromArray(x.boxMin),b.max.fromArray(x.boxMax);const y=new oa;return y.radius=x.sphereRadius,y.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:b,sphereInitialized:x.sphereInitialized,sphere:y}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new UW;break;case"Line":o=new Nh(a(e.geometry),l(e.material));break;case"LineLoop":o=new $W(a(e.geometry),l(e.material));break;case"LineSegments":o=new Gu(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new HW(a(e.geometry),l(e.material));break;case"Sprite":o=new BW(l(e.material));break;case"Group":o=new by;break;case"Bone":o=new KP;break;default:o=new ni}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)o.add(this.parseObject(h[p],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const g=h[p];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const g=h[p],x=o.getObjectByProperty("uuid",g.object);x!==void 0&&o.addLevel(x,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new ni}})}}const Age={UVMapping:xT,CubeReflectionMapping:sf,CubeRefractionMapping:Rh,EquirectangularReflectionMapping:p0,EquirectangularRefractionMapping:m0,CubeUVReflectionMapping:Tv},Ej={RepeatWrapping:g0,ClampToEdgeWrapping:ac,MirroredRepeatWrapping:y0},Tj={NearestFilter:Bo,NearestMipmapNearestFilter:PP,NearestMipmapLinearFilter:_y,LinearFilter:Ls,LinearMipmapNearestFilter:bx,LinearMipmapLinearFilter:Nu};class Cge extends ul{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=zd.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return zd.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),zd.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});zd.add(e,l),s.manager.itemStart(e)}}let x1;class dk{static getContext(){return x1===void 0&&(x1=new(window.AudioContext||window.webkitAudioContext)),x1}static setContext(e){x1=e}}class Rge extends ul{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new af(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);dk.getContext().decodeAudioData(u,function(d){t(d)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const Mj=new hr,Ij=new hr,Cp=new hr;class Nge{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ks,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ks,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Cp.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(fm*t.fov*.5)/t.zoom;let a,l;Ij.elements[12]=-i,Mj.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Cp.elements[0]=2*t.near/(l-a),Cp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Cp),a=-o*t.aspect-s,l=o*t.aspect-s,Cp.elements[0]=2*t.near/(l-a),Cp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Cp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ij),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Mj)}}class C$ extends ks{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class fk{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Aj(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Aj();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Aj(){return performance.now()}const Rp=new Pe,Cj=new sa,Pge=new Pe,Np=new Pe;class kge extends ni{constructor(){super(),this.type="AudioListener",this.context=dk.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fk}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Rp,Cj,Pge),Np.set(0,0,-1).applyQuaternion(Cj),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Rp.x,i),t.positionY.linearRampToValueAtTime(Rp.y,i),t.positionZ.linearRampToValueAtTime(Rp.z,i),t.forwardX.linearRampToValueAtTime(Np.x,i),t.forwardY.linearRampToValueAtTime(Np.y,i),t.forwardZ.linearRampToValueAtTime(Np.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Rp.x,Rp.y,Rp.z),t.setOrientation(Np.x,Np.y,Np.z,r.x,r.y,r.z)}}class R$ extends ni{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Pp=new Pe,Rj=new sa,Oge=new Pe,kp=new Pe;class Lge extends R${constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Pp,Rj,Oge),kp.set(0,0,1).applyQuaternion(Rj);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Pp.x,r),t.positionY.linearRampToValueAtTime(Pp.y,r),t.positionZ.linearRampToValueAtTime(Pp.z,r),t.orientationX.linearRampToValueAtTime(kp.x,r),t.orientationY.linearRampToValueAtTime(kp.y,r),t.orientationZ.linearRampToValueAtTime(kp.z,r)}else t.setPosition(Pp.x,Pp.y,Pp.z),t.setOrientation(kp.x,kp.y,kp.z)}}class Dge{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class N${constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){sa.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;sa.multiplyQuaternionsFlat(e,o,e,t,e,r),sa.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const hk="\\[\\]\\.:\\/",Fge=new RegExp("["+hk+"]","g"),pk="[^"+hk+"]",qge="[^"+hk.replace("\\.","")+"]",jge=/((?:WC+[\/:])*)/.source.replace("WC",pk),Bge=/(WCOD+)?/.source.replace("WCOD",qge),Uge=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pk),zge=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pk),Vge=new RegExp("^"+jge+Bge+Uge+zge+"$"),Wge=["material","materials","bones","map"];class $ge{constructor(e,t,r){const i=r||si.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class si{constructor(e,t,r){this.path=t,this.parsedPath=r||si.parseTrackName(t),this.node=si.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new si.Composite(e,t,r):new si(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Fge,"")}static parseTrackName(e){const t=Vge.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Wge.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=si.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}si.Composite=$ge;si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};si.prototype.GetterByBindingType=[si.prototype._getValue_direct,si.prototype._getValue_array,si.prototype._getValue_arrayElement,si.prototype._getValue_toArray];si.prototype.SetterByBindingTypeAndVersioning=[[si.prototype._setValue_direct,si.prototype._setValue_direct_setNeedsUpdate,si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[si.prototype._setValue_array,si.prototype._setValue_array_setNeedsUpdate,si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[si.prototype._setValue_arrayElement,si.prototype._setValue_arrayElement_setNeedsUpdate,si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[si.prototype._setValue_fromArray,si.prototype._setValue_fromArray_setNeedsUpdate,si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Hge{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ll(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const h=arguments[c],p=h.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(h);for(let x=0,b=o;x!==b;++x)s[x].push(new si(h,r[x],i[x]))}else if(g<u){a=e[g];const x=--u,b=e[x];t[b.uuid]=g,e[g]=b,t[p]=x,e[x]=h;for(let y=0,E=o;y!==E;++y){const T=s[y],I=T[x];let N=T[g];T[g]=I,N===void 0&&(N=new si(h,r[y],i[y])),T[x]=N}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const d=s++,h=e[d];t[h.uuid]=c,e[c]=h,t[u]=d,e[d]=l;for(let p=0,g=i;p!==g;++p){const x=r[p],b=x[d],y=x[c];x[c]=b,x[d]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,d=t[c];if(d!==void 0)if(delete t[c],d<s){const h=--s,p=e[h],g=--o,x=e[g];t[p.uuid]=d,e[d]=p,t[x.uuid]=h,e[h]=x,e.pop();for(let b=0,y=i;b!==y;++b){const E=r[b],T=E[h],I=E[g];E[d]=T,E[h]=I,E.pop()}}else{const h=--o,p=e[h];h>0&&(t[p.uuid]=d),e[d]=p,e.pop();for(let g=0,x=i;g!==x;++g){const b=r[g];b[d]=b[h],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,d=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let h=c,p=l.length;h!==p;++h){const g=l[h];d[h]=new si(g,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class P${constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:nm,endingEnd:nm};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_W,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case zP:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case IT:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===xW;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===vW){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=rm,i.endingEnd=rm):(e?i.endingStart=this.zeroSlopeAtStart?rm:nm:i.endingStart=_0,t?i.endingEnd=this.zeroSlopeAtEnd?rm:nm:i.endingEnd=_0)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Gge=new Float32Array(1);class Xge extends Hu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==s;++d){const h=i[d],p=h.name;let g=c[p];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const x=t&&t._propertyBindings[d].binding.parsedPath;g=new N$(si.create(r,p,x),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new ak(new Float32Array(2),new Float32Array(2),1,Gge),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?R0.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=IT),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new P$(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?R0.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Kge extends AT{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new CT(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Qge extends AT{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new ub(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class mk{constructor(e){this.value=e}clone(){return new mk(this.value.clone===void 0?this.value:this.value.clone())}}let Yge=0;class Jge extends Hu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Yge++}),this.name="",this.usage=b0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Zge extends PT{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class eye{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Nj=new hr;class k${constructor(e,t,r=0,i=1/0){this.ray=new zm(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new hm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Nj.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Nj),this}intersectObject(e,t=!0,r=[]){return XR(e,this,r,t),r.sort(Pj),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)XR(e[i],this,r,t);return r.sort(Pj),r}}function Pj(n,e){return n.distance-e.distance}function XR(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)XR(s[o],e,t,!0)}}class KR{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Er(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Er(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class tye{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class gk{constructor(e,t,r,i){gk.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const kj=new Ut;class nye{constructor(e=new Ut(1/0,1/0),t=new Ut(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=kj.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kj).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Oj=new Pe,b1=new Pe;class rye{constructor(e=new Pe,t=new Pe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Oj.subVectors(e,this.start),b1.subVectors(this.end,this.start);const r=b1.dot(b1);let s=b1.dot(Oj)/r;return t&&(s=Er(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Lj=new Pe;class iye extends ni{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Ur,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Xn(i,3));const s=new Da({fog:!1,toneMapped:!1});this.cone=new Gu(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Lj.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Lj),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Qf=new Pe,w1=new hr,KA=new hr;class sye extends Gu{constructor(e){const t=O$(e),r=new Ur,i=[],s=[],o=new Pn(0,0,1),a=new Pn(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Xn(i,3)),r.setAttribute("color",new Xn(s,3));const l=new Da({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");KA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(w1.multiplyMatrices(KA,a.matrixWorld),Qf.setFromMatrixPosition(w1),i.setXYZ(o,Qf.x,Qf.y,Qf.z),w1.multiplyMatrices(KA,a.parent.matrixWorld),Qf.setFromMatrixPosition(w1),i.setXYZ(o+1,Qf.x,Qf.y,Qf.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function O$(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,O$(n.children[t]));return e}class oye extends Js{constructor(e,t,r){const i=new gb(t,4,2),s=new Dh({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const aye=new Pe,Dj=new Pn,Fj=new Pn;class lye extends ni{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new mb(t);i.rotateY(Math.PI*.5),this.material=new Dh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Mi(o,3)),this.add(new Js(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Dj.copy(this.light.color),Fj.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?Dj:Fj;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(aye.setFromMatrixPosition(this.light.matrixWorld).negate())}}class cye extends Gu{constructor(e=10,t=10,r=4473924,i=8947848){r=new Pn(r),i=new Pn(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let h=0,p=0,g=-a;h<=t;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const x=h===s?r:i;x.toArray(u,p),p+=3,x.toArray(u,p),p+=3,x.toArray(u,p),p+=3,x.toArray(u,p),p+=3}const c=new Ur;c.setAttribute("position",new Xn(l,3)),c.setAttribute("color",new Xn(u,3));const d=new Da({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class uye extends Gu{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Pn(s),o=new Pn(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),p=Math.sin(h)*e,g=Math.cos(h)*e;a.push(0,0,0),a.push(p,0,g);const x=d&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<r;d++){const h=d&1?s:o,p=e-e/r*d;for(let g=0;g<i;g++){let x=g/i*(Math.PI*2),b=Math.sin(x)*p,y=Math.cos(x)*p;a.push(b,0,y),l.push(h.r,h.g,h.b),x=(g+1)/i*(Math.PI*2),b=Math.sin(x)*p,y=Math.cos(x)*p,a.push(b,0,y),l.push(h.r,h.g,h.b)}}const u=new Ur;u.setAttribute("position",new Xn(a,3)),u.setAttribute("color",new Xn(l,3));const c=new Da({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qj=new Pe,S1=new Pe,jj=new Pe;class dye extends ni{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Ur;i.setAttribute("position",new Xn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Da({fog:!1,toneMapped:!1});this.lightPlane=new Nh(i,s),this.add(this.lightPlane),i=new Ur,i.setAttribute("position",new Xn([0,0,0,0,0,1],3)),this.targetLine=new Nh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qj.setFromMatrixPosition(this.light.matrixWorld),S1.setFromMatrixPosition(this.light.target.matrixWorld),jj.subVectors(S1,qj),this.lightPlane.lookAt(S1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(S1),this.targetLine.scale.z=jj.length()}}const E1=new Pe,ys=new db;class fye extends Gu{constructor(e){const t=new Ur,r=new Da({color:0xffffff,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,x){l(g),l(x)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new Xn(i,3)),t.setAttribute("color",new Xn(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Pn(0xffaa00),c=new Pn(0xff0000),d=new Pn(43775),h=new Pn(0xffffff),p=new Pn(3355443);this.setColors(u,c,d,h,p)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;ys.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Hc?-1:0;Ns("c",t,e,ys,0,0,s),Ns("t",t,e,ys,0,0,1),Ns("n1",t,e,ys,-1,-1,s),Ns("n2",t,e,ys,r,-1,s),Ns("n3",t,e,ys,-1,i,s),Ns("n4",t,e,ys,r,i,s),Ns("f1",t,e,ys,-1,-1,1),Ns("f2",t,e,ys,r,-1,1),Ns("f3",t,e,ys,-1,i,1),Ns("f4",t,e,ys,r,i,1),Ns("u1",t,e,ys,r*.7,i*1.1,s),Ns("u2",t,e,ys,-1*.7,i*1.1,s),Ns("u3",t,e,ys,0,i*2,s),Ns("cf1",t,e,ys,-1,0,1),Ns("cf2",t,e,ys,r,0,1),Ns("cf3",t,e,ys,0,-1,1),Ns("cf4",t,e,ys,0,i,1),Ns("cn1",t,e,ys,-1,0,s),Ns("cn2",t,e,ys,r,0,s),Ns("cn3",t,e,ys,0,-1,s),Ns("cn4",t,e,ys,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ns(n,e,t,r,i,s,o){E1.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],E1.x,E1.y,E1.z)}}const T1=new ka;class hye extends Gu{constructor(e,t=0xffff00){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Ur;s.setIndex(new Mi(r,1)),s.setAttribute("position",new Mi(i,3)),super(s,new Da({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&T1.setFromObject(this.object),T1.isEmpty())return;const t=T1.min,r=T1.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pye extends Gu{constructor(e,t=0xffff00){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ur;s.setIndex(new Mi(r,1)),s.setAttribute("position",new Xn(i,3)),super(s,new Da({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mye extends Nh{constructor(e,t=1,r=0xffff00){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ur;o.setAttribute("position",new Xn(s,3)),o.computeBoundingSphere(),super(o,new Da({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ur;l.setAttribute("position",new Xn(a,3)),l.computeBoundingSphere(),this.add(new Js(l,new Dh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Bj=new Pe;let M1,QA;class gye extends ni{constructor(e=new Pe(0,0,1),t=new Pe(0,0,0),r=1,i=0xffff00,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",M1===void 0&&(M1=new Ur,M1.setAttribute("position",new Xn([0,0,0,0,1,0],3)),QA=new Mv(0,.5,1,5,1),QA.translate(0,-.5,0)),this.position.copy(t),this.line=new Nh(M1,new Da({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Js(QA,new Dh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Bj.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Bj,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class yye extends Gu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ur;i.setAttribute("position",new Xn(t,3)),i.setAttribute("color",new Xn(r,3));const s=new Da({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Pn,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vye{constructor(){this.type="ShapePath",this.color=new Pn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new E0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const E=[];for(let T=0,I=y.length;T<I;T++){const N=y[T],k=new pm;k.curves=N.curves,E.push(k)}return E}function r(y,E){const T=E.length;let I=!1;for(let N=T-1,k=0;k<T;N=k++){let q=E[N],L=E[k],R=L.x-q.x,P=L.y-q.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(q=E[k],R=-R,L=E[N],P=-P),y.y<q.y||y.y>L.y)continue;if(y.y===q.y){if(y.x===q.x)return!0}else{const F=P*(y.x-q.x)-R*(y.y-q.y);if(F===0)return!0;if(F<0)continue;I=!I}}else{if(y.y!==q.y)continue;if(L.x<=y.x&&y.x<=q.x||q.x<=y.x&&y.x<=L.x)return!0}}return I}const i=qu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new pm,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const d=[],h=[];let p=[],g=0,x;h[g]=void 0,p[g]=[];for(let y=0,E=s.length;y<E;y++)a=s[y],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!c&&h[g]&&g++,h[g]={s:new pm,p:x},h[g].s.curves=a.curves,c&&g++,p[g]=[]):p[g].push({h:a,p:x[0]});if(!h[0])return t(s);if(h.length>1){let y=!1,E=0;for(let T=0,I=h.length;T<I;T++)d[T]=[];for(let T=0,I=h.length;T<I;T++){const N=p[T];for(let k=0;k<N.length;k++){const q=N[k];let L=!0;for(let R=0;R<h.length;R++)r(q.p,h[R].p)&&(T!==R&&E++,L?(L=!1,d[R].push(q)):y=!0);L&&d[T].push(q)}}E>0&&y===!1&&(p=d)}let b;for(let y=0,E=h.length;y<E;y++){l=h[y].s,u.push(l),b=p[y];for(let T=0,I=b.length;T<I;T++)l.holes.push(b[T].h)}return u}}class _ye extends Hu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function xye(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function bye(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function wye(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function QR(n,e,t,r){const i=Sye(r);switch(t){case DP:return n*e;case qP:return n*e;case jP:return n*e*2;case ET:return n*e/i.components*i.byteLength;case cb:return n*e/i.components*i.byteLength;case BP:return n*e*2/i.components*i.byteLength;case TT:return n*e*2/i.components*i.byteLength;case FP:return n*e*3/i.components*i.byteLength;case na:return n*e*4/i.components*i.byteLength;case MT:return n*e*4/i.components*i.byteLength;case wx:case Sx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ex:case Tx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case WE:case HE:return Math.max(n,16)*Math.max(e,8)/4;case VE:case $E:return Math.max(n,8)*Math.max(e,8)/2;case GE:case XE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case KE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case QE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case YE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case JE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ZE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case e2:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case t2:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case n2:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case r2:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case i2:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case s2:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case o2:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case a2:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case l2:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case c2:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Mx:case u2:case d2:return Math.ceil(n/4)*Math.ceil(e/4)*16;case UP:case f2:return Math.ceil(n/4)*Math.ceil(e/4)*8;case h2:case p2:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Sye(n){switch(n){case Yc:case kP:return{byteLength:1,components:1};case cv:case OP:case Um:return{byteLength:2,components:1};case wT:case ST:return{byteLength:2,components:4};case of:case bT:case Na:return{byteLength:4,components:1};case LP:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Eye={contain:xye,cover:bye,fill:wye,getByteLength:QR};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yT);function L$(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Tye(n){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,d=u.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,u,c),a.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,u){const c=l.array,d=l.updateRanges;if(n.bindBuffer(u,a),d.length===0)n.bufferSubData(u,0,c);else{d.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<d.length;p++){const g=d[h],x=d[p];x.start<=g.start+g.count+1?g.count=Math.max(g.count,x.start+x.count-g.start):(++h,d[h]=x)}d.length=h+1;for(let p=0,g=d.length;p<g;p++){const x=d[p];n.bufferSubData(u,x.start*c.BYTES_PER_ELEMENT,c,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,a,l),u.version=a.version}}return{get:i,remove:s,update:o}}var Mye=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Iye=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Aye=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Cye=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Rye=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Nye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Pye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Oye=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Lye=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Dye=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Fye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,qye=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Bye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Uye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,zye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Vye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Wye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$ye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Hye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Gye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Xye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Kye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Qye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Yye=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Jye=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Zye=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,eve=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,tve=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,nve="gl_FragColor = linearToOutputTexel( gl_FragColor );",rve=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ive=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,sve=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ove=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ave=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,lve=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,cve=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,uve=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dve=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fve=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,hve=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,pve=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mve=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gve=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yve=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vve=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_ve=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xve=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bve=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wve=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Sve=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Eve=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Tve=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Mve=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ive=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ave=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cve=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Rve=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Nve=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Pve=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,kve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ove=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Lve=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dve=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fve=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qve=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,jve=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bve=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Uve=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,zve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Vve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Wve=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$ve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Gve=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Xve=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Kve=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Qve=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Yve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Jve=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Zve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,e_e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,t_e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,n_e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,r_e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,i_e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,s_e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,o_e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,a_e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,l_e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,c_e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,u_e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,d_e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,f_e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,h_e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,p_e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,m_e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,g_e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,y_e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,v_e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,__e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,x_e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,b_e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,w_e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,S_e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,E_e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const T_e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,M_e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,I_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,A_e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,C_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,R_e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,N_e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,P_e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,k_e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,O_e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,L_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,D_e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F_e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,q_e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,j_e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,B_e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U_e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,z_e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,V_e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,W_e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$_e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,H_e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,G_e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,X_e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K_e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Q_e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y_e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J_e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z_e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,exe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,txe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nxe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rxe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ixe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jr={alphahash_fragment:Mye,alphahash_pars_fragment:Iye,alphamap_fragment:Aye,alphamap_pars_fragment:Cye,alphatest_fragment:Rye,alphatest_pars_fragment:Nye,aomap_fragment:Pye,aomap_pars_fragment:kye,batching_pars_vertex:Oye,batching_vertex:Lye,begin_vertex:Dye,beginnormal_vertex:Fye,bsdfs:qye,iridescence_fragment:jye,bumpmap_pars_fragment:Bye,clipping_planes_fragment:Uye,clipping_planes_pars_fragment:zye,clipping_planes_pars_vertex:Vye,clipping_planes_vertex:Wye,color_fragment:$ye,color_pars_fragment:Hye,color_pars_vertex:Gye,color_vertex:Xye,common:Kye,cube_uv_reflection_fragment:Qye,defaultnormal_vertex:Yye,displacementmap_pars_vertex:Jye,displacementmap_vertex:Zye,emissivemap_fragment:eve,emissivemap_pars_fragment:tve,colorspace_fragment:nve,colorspace_pars_fragment:rve,envmap_fragment:ive,envmap_common_pars_fragment:sve,envmap_pars_fragment:ove,envmap_pars_vertex:ave,envmap_physical_pars_fragment:vve,envmap_vertex:lve,fog_vertex:cve,fog_pars_vertex:uve,fog_fragment:dve,fog_pars_fragment:fve,gradientmap_pars_fragment:hve,lightmap_pars_fragment:pve,lights_lambert_fragment:mve,lights_lambert_pars_fragment:gve,lights_pars_begin:yve,lights_toon_fragment:_ve,lights_toon_pars_fragment:xve,lights_phong_fragment:bve,lights_phong_pars_fragment:wve,lights_physical_fragment:Sve,lights_physical_pars_fragment:Eve,lights_fragment_begin:Tve,lights_fragment_maps:Mve,lights_fragment_end:Ive,logdepthbuf_fragment:Ave,logdepthbuf_pars_fragment:Cve,logdepthbuf_pars_vertex:Rve,logdepthbuf_vertex:Nve,map_fragment:Pve,map_pars_fragment:kve,map_particle_fragment:Ove,map_particle_pars_fragment:Lve,metalnessmap_fragment:Dve,metalnessmap_pars_fragment:Fve,morphinstance_vertex:qve,morphcolor_vertex:jve,morphnormal_vertex:Bve,morphtarget_pars_vertex:Uve,morphtarget_vertex:zve,normal_fragment_begin:Vve,normal_fragment_maps:Wve,normal_pars_fragment:$ve,normal_pars_vertex:Hve,normal_vertex:Gve,normalmap_pars_fragment:Xve,clearcoat_normal_fragment_begin:Kve,clearcoat_normal_fragment_maps:Qve,clearcoat_pars_fragment:Yve,iridescence_pars_fragment:Jve,opaque_fragment:Zve,packing:e_e,premultiplied_alpha_fragment:t_e,project_vertex:n_e,dithering_fragment:r_e,dithering_pars_fragment:i_e,roughnessmap_fragment:s_e,roughnessmap_pars_fragment:o_e,shadowmap_pars_fragment:a_e,shadowmap_pars_vertex:l_e,shadowmap_vertex:c_e,shadowmask_pars_fragment:u_e,skinbase_vertex:d_e,skinning_pars_vertex:f_e,skinning_vertex:h_e,skinnormal_vertex:p_e,specularmap_fragment:m_e,specularmap_pars_fragment:g_e,tonemapping_fragment:y_e,tonemapping_pars_fragment:v_e,transmission_fragment:__e,transmission_pars_fragment:x_e,uv_pars_fragment:b_e,uv_pars_vertex:w_e,uv_vertex:S_e,worldpos_vertex:E_e,background_vert:T_e,background_frag:M_e,backgroundCube_vert:I_e,backgroundCube_frag:A_e,cube_vert:C_e,cube_frag:R_e,depth_vert:N_e,depth_frag:P_e,distanceRGBA_vert:k_e,distanceRGBA_frag:O_e,equirect_vert:L_e,equirect_frag:D_e,linedashed_vert:F_e,linedashed_frag:q_e,meshbasic_vert:j_e,meshbasic_frag:B_e,meshlambert_vert:U_e,meshlambert_frag:z_e,meshmatcap_vert:V_e,meshmatcap_frag:W_e,meshnormal_vert:$_e,meshnormal_frag:H_e,meshphong_vert:G_e,meshphong_frag:X_e,meshphysical_vert:K_e,meshphysical_frag:Q_e,meshtoon_vert:Y_e,meshtoon_frag:J_e,points_vert:Z_e,points_frag:exe,shadow_vert:txe,shadow_frag:nxe,sprite_vert:rxe,sprite_frag:ixe},wn={common:{diffuse:{value:new Pn(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ar},alphaMap:{value:null},alphaMapTransform:{value:new Ar},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ar}},envmap:{envMap:{value:null},envMapRotation:{value:new Ar},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ar}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ar}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ar},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ar},normalScale:{value:new Ut(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ar},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ar}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ar}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ar}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pn(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pn(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ar},alphaTest:{value:0},uvTransform:{value:new Ar}},sprite:{diffuse:{value:new Pn(0xffffff)},opacity:{value:1},center:{value:new Ut(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ar},alphaMap:{value:null},alphaMapTransform:{value:new Ar},alphaTest:{value:0}}},Bc={basic:{uniforms:Sa([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:jr.meshbasic_vert,fragmentShader:jr.meshbasic_frag},lambert:{uniforms:Sa([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new Pn(0)}}]),vertexShader:jr.meshlambert_vert,fragmentShader:jr.meshlambert_frag},phong:{uniforms:Sa([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new Pn(0)},specular:{value:new Pn(1118481)},shininess:{value:30}}]),vertexShader:jr.meshphong_vert,fragmentShader:jr.meshphong_frag},standard:{uniforms:Sa([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new Pn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jr.meshphysical_vert,fragmentShader:jr.meshphysical_frag},toon:{uniforms:Sa([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new Pn(0)}}]),vertexShader:jr.meshtoon_vert,fragmentShader:jr.meshtoon_frag},matcap:{uniforms:Sa([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:jr.meshmatcap_vert,fragmentShader:jr.meshmatcap_frag},points:{uniforms:Sa([wn.points,wn.fog]),vertexShader:jr.points_vert,fragmentShader:jr.points_frag},dashed:{uniforms:Sa([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jr.linedashed_vert,fragmentShader:jr.linedashed_frag},depth:{uniforms:Sa([wn.common,wn.displacementmap]),vertexShader:jr.depth_vert,fragmentShader:jr.depth_frag},normal:{uniforms:Sa([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:jr.meshnormal_vert,fragmentShader:jr.meshnormal_frag},sprite:{uniforms:Sa([wn.sprite,wn.fog]),vertexShader:jr.sprite_vert,fragmentShader:jr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ar},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jr.background_vert,fragmentShader:jr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ar}},vertexShader:jr.backgroundCube_vert,fragmentShader:jr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jr.cube_vert,fragmentShader:jr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jr.equirect_vert,fragmentShader:jr.equirect_frag},distanceRGBA:{uniforms:Sa([wn.common,wn.displacementmap,{referencePosition:{value:new Pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jr.distanceRGBA_vert,fragmentShader:jr.distanceRGBA_frag},shadow:{uniforms:Sa([wn.lights,wn.fog,{color:{value:new Pn(0)},opacity:{value:1}}]),vertexShader:jr.shadow_vert,fragmentShader:jr.shadow_frag}};Bc.physical={uniforms:Sa([Bc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ar},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ar},clearcoatNormalScale:{value:new Ut(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ar},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ar},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ar},sheen:{value:0},sheenColor:{value:new Pn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ar},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ar},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ar},transmissionSamplerSize:{value:new Ut},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ar},attenuationDistance:{value:0},attenuationColor:{value:new Pn(0)},specularColor:{value:new Pn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ar},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ar},anisotropyVector:{value:new Ut},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ar}}]),vertexShader:jr.meshphysical_vert,fragmentShader:jr.meshphysical_frag};const I1={r:0,b:0,g:0},Op=new Bl,sxe=new hr;function oxe(n,e,t,r,i,s,o){const a=new Pn(0);let l=s===!0?0:1,u,c,d=null,h=0,p=null;function g(T){let I=T.isScene===!0?T.background:null;return I&&I.isTexture&&(I=(T.backgroundBlurriness>0?t:e).get(I)),I}function x(T){let I=!1;const N=g(T);N===null?y(a,l):N&&N.isColor&&(y(N,1),I=!0);const k=n.xr.getEnvironmentBlendMode();k==="additive"?r.buffers.color.setClear(0,0,0,1,o):k==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||I)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(T,I){const N=g(I);N&&(N.isCubeTexture||N.mapping===Tv)?(c===void 0&&(c=new Js(new Vm(1,1,1),new Zc({name:"BackgroundCubeMaterial",uniforms:dv(Bc.backgroundCube.uniforms),vertexShader:Bc.backgroundCube.vertexShader,fragmentShader:Bc.backgroundCube.fragmentShader,side:Pa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(k,q,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Op.copy(I.backgroundRotation),Op.x*=-1,Op.y*=-1,Op.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(Op.y*=-1,Op.z*=-1),c.material.uniforms.envMap.value=N,c.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(sxe.makeRotationFromEuler(Op)),c.material.toneMapped=Zr.getTransfer(N.colorSpace)!==vi,(d!==N||h!==N.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,d=N,h=N.version,p=n.toneMapping),c.layers.enableAll(),T.unshift(c,c.geometry,c.material,0,0,null)):N&&N.isTexture&&(u===void 0&&(u=new Js(new Iv(2,2),new Zc({name:"BackgroundMaterial",uniforms:dv(Bc.background.uniforms),vertexShader:Bc.background.vertexShader,fragmentShader:Bc.background.fragmentShader,side:rf,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=N,u.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,u.material.toneMapped=Zr.getTransfer(N.colorSpace)!==vi,N.matrixAutoUpdate===!0&&N.updateMatrix(),u.material.uniforms.uvTransform.value.copy(N.matrix),(d!==N||h!==N.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,d=N,h=N.version,p=n.toneMapping),u.layers.enableAll(),T.unshift(u,u.geometry,u.material,0,0,null))}function y(T,I){T.getRGB(I1,LW(n)),r.buffers.color.setClear(I1.r,I1.g,I1.b,I,o)}function E(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(T,I=1){a.set(T),l=I,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,y(a,l)},render:x,addToRenderList:b,dispose:E}}function axe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,o=!1;function a(P,F,z,V,W){let Q=!1;const X=d(V,z,F);s!==X&&(s=X,u(s.object)),Q=p(P,V,z,W),Q&&g(P,V,z,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(Q||o)&&(o=!1,I(P,F,z,V),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return n.createVertexArray()}function u(P){return n.bindVertexArray(P)}function c(P){return n.deleteVertexArray(P)}function d(P,F,z){const V=z.wireframe===!0;let W=r[P.id];W===void 0&&(W={},r[P.id]=W);let Q=W[F.id];Q===void 0&&(Q={},W[F.id]=Q);let X=Q[V];return X===void 0&&(X=h(l()),Q[V]=X),X}function h(P){const F=[],z=[],V=[];for(let W=0;W<t;W++)F[W]=0,z[W]=0,V[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:z,attributeDivisors:V,object:P,attributes:{},index:null}}function p(P,F,z,V){const W=s.attributes,Q=F.attributes;let X=0;const re=z.getAttributes();for(const G in re)if(re[G].location>=0){const te=W[G];let Z=Q[G];if(Z===void 0&&(G==="instanceMatrix"&&P.instanceMatrix&&(Z=P.instanceMatrix),G==="instanceColor"&&P.instanceColor&&(Z=P.instanceColor)),te===void 0||te.attribute!==Z||Z&&te.data!==Z.data)return!0;X++}return s.attributesNum!==X||s.index!==V}function g(P,F,z,V){const W={},Q=F.attributes;let X=0;const re=z.getAttributes();for(const G in re)if(re[G].location>=0){let te=Q[G];te===void 0&&(G==="instanceMatrix"&&P.instanceMatrix&&(te=P.instanceMatrix),G==="instanceColor"&&P.instanceColor&&(te=P.instanceColor));const Z={};Z.attribute=te,te&&te.data&&(Z.data=te.data),W[G]=Z,X++}s.attributes=W,s.attributesNum=X,s.index=V}function x(){const P=s.newAttributes;for(let F=0,z=P.length;F<z;F++)P[F]=0}function b(P){y(P,0)}function y(P,F){const z=s.newAttributes,V=s.enabledAttributes,W=s.attributeDivisors;z[P]=1,V[P]===0&&(n.enableVertexAttribArray(P),V[P]=1),W[P]!==F&&(n.vertexAttribDivisor(P,F),W[P]=F)}function E(){const P=s.newAttributes,F=s.enabledAttributes;for(let z=0,V=F.length;z<V;z++)F[z]!==P[z]&&(n.disableVertexAttribArray(z),F[z]=0)}function T(P,F,z,V,W,Q,X){X===!0?n.vertexAttribIPointer(P,F,z,W,Q):n.vertexAttribPointer(P,F,z,V,W,Q)}function I(P,F,z,V){x();const W=V.attributes,Q=z.getAttributes(),X=F.defaultAttributeValues;for(const re in Q){const G=Q[re];if(G.location>=0){let Y=W[re];if(Y===void 0&&(re==="instanceMatrix"&&P.instanceMatrix&&(Y=P.instanceMatrix),re==="instanceColor"&&P.instanceColor&&(Y=P.instanceColor)),Y!==void 0){const te=Y.normalized,Z=Y.itemSize,fe=e.get(Y);if(fe===void 0)continue;const ge=fe.buffer,ce=fe.type,ye=fe.bytesPerElement,be=ce===n.INT||ce===n.UNSIGNED_INT||Y.gpuType===bT;if(Y.isInterleavedBufferAttribute){const Ee=Y.data,Me=Ee.stride,qe=Y.offset;if(Ee.isInstancedInterleavedBuffer){for(let Ue=0;Ue<G.locationSize;Ue++)y(G.location+Ue,Ee.meshPerAttribute);P.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let Ue=0;Ue<G.locationSize;Ue++)b(G.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,ge);for(let Ue=0;Ue<G.locationSize;Ue++)T(G.location+Ue,Z/G.locationSize,ce,te,Me*ye,(qe+Z/G.locationSize*Ue)*ye,be)}else{if(Y.isInstancedBufferAttribute){for(let Ee=0;Ee<G.locationSize;Ee++)y(G.location+Ee,Y.meshPerAttribute);P.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let Ee=0;Ee<G.locationSize;Ee++)b(G.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,ge);for(let Ee=0;Ee<G.locationSize;Ee++)T(G.location+Ee,Z/G.locationSize,ce,te,Z*ye,Z/G.locationSize*Ee*ye,be)}}else if(X!==void 0){const te=X[re];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(G.location,te);break;case 3:n.vertexAttrib3fv(G.location,te);break;case 4:n.vertexAttrib4fv(G.location,te);break;default:n.vertexAttrib1fv(G.location,te)}}}}E()}function N(){L();for(const P in r){const F=r[P];for(const z in F){const V=F[z];for(const W in V)c(V[W].object),delete V[W];delete F[z]}delete r[P]}}function k(P){if(r[P.id]===void 0)return;const F=r[P.id];for(const z in F){const V=F[z];for(const W in V)c(V[W].object),delete V[W];delete F[z]}delete r[P.id]}function q(P){for(const F in r){const z=r[F];if(z[P.id]===void 0)continue;const V=z[P.id];for(const W in V)c(V[W].object),delete V[W];delete z[P.id]}}function L(){R(),o=!0,s!==i&&(s=i,u(s.object))}function R(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:L,resetDefaultState:R,dispose:N,releaseStatesOfGeometry:k,releaseStatesOfProgram:q,initAttributes:x,enableAttribute:b,disableUnusedAttributes:E}}function lxe(n,e,t){let r;function i(u){r=u}function s(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function o(u,c,d){d!==0&&(n.drawArraysInstanced(r,u,c,d),t.update(c,r,d))}function a(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,d);let p=0;for(let g=0;g<d;g++)p+=c[g];t.update(p,r,1)}function l(u,c,d,h){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)o(u[g],c[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(r,u,0,c,0,h,0,d);let g=0;for(let x=0;x<d;x++)g+=c[x]*h[x];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function cxe(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const q=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(q){return!(q!==na&&r.convert(q)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(q){const L=q===Um&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(q!==Yc&&r.convert(q)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&q!==Na&&!L)}function l(q){if(q==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";q="mediump"}return q==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),E=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),T=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=g>0,k=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:x,maxCubemapSize:b,maxAttributes:y,maxVertexUniforms:E,maxVaryings:T,maxFragmentUniforms:I,vertexTextures:N,maxSamples:k}}function uxe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new qd,a=new Ar,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||r!==0||i;return i=h,r=d.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=c(d,h,0)},this.setState=function(d,h,p){const g=d.clippingPlanes,x=d.clipIntersection,b=d.clipShadows,y=n.get(d);if(!i||g===null||g.length===0||s&&!b)s?c(null):u();else{const E=s?0:r,T=E*4;let I=y.clippingState||null;l.value=I,I=c(g,h,T,p);for(let N=0;N!==T;++N)I[N]=t[N];y.clippingState=I,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=E}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(d,h,p,g){const x=d!==null?d.length:0;let b=null;if(x!==0){if(b=l.value,g!==!0||b===null){const y=p+x*4,E=h.matrixWorldInverse;a.getNormalMatrix(E),(b===null||b.length<y)&&(b=new Float32Array(y));for(let T=0,I=p;T!==x;++T,I+=4)o.copy(d[T]).applyMatrix4(E,a),o.normal.toArray(b,I),b[I+3]=o.constant}l.value=b,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function dxe(n){let e=new WeakMap;function t(o,a){return a===p0?o.mapping=sf:a===m0&&(o.mapping=Rh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===p0||a===m0)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new qW(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Sy=4,Uj=[.125,.215,.35,.446,.526,.582],Xp=20,YA=new Kd,zj=new Pn;let JA=null,ZA=0,eC=0,tC=!1;const Wp=(1+Math.sqrt(5))/2,Yg=1/Wp,Vj=[new Pe(-Wp,Yg,0),new Pe(Wp,Yg,0),new Pe(-Yg,0,Wp),new Pe(Yg,0,Wp),new Pe(0,Wp,-Yg),new Pe(0,Wp,Yg),new Pe(-1,1,-1),new Pe(1,1,-1),new Pe(-1,1,1),new Pe(1,1,1)];class YR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){JA=this._renderer.getRenderTarget(),ZA=this._renderer.getActiveCubeFace(),eC=this._renderer.getActiveMipmapLevel(),tC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Hj(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$j(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(JA,ZA,eC),this._renderer.xr.enabled=tC,e.scissorTest=!1,A1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===sf||e.mapping===Rh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),JA=this._renderer.getRenderTarget(),ZA=this._renderer.getActiveCubeFace(),eC=this._renderer.getActiveMipmapLevel(),tC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ls,minFilter:Ls,generateMipmaps:!1,type:Um,format:na,colorSpace:Nm,depthBuffer:!1},i=Wj(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Wj(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=fxe(s)),this._blurMaterial=hxe(s,e,t)}return i}_compileMaterial(e){const t=new Js(this._lodPlanes[0],e);this._renderer.compile(t,YA)}_sceneToCubeUV(e,t,r,i){const a=new ks(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,h=c.toneMapping;c.getClearColor(zj),c.toneMapping=Du,c.autoClear=!1;const p=new Dh({name:"PMREM.Background",side:Pa,depthWrite:!1,depthTest:!1}),g=new Js(new Vm,p);let x=!1;const b=e.background;b?b.isColor&&(p.color.copy(b),e.background=null,x=!0):(p.color.copy(zj),x=!0);for(let y=0;y<6;y++){const E=y%3;E===0?(a.up.set(0,l[y],0),a.lookAt(u[y],0,0)):E===1?(a.up.set(0,0,l[y]),a.lookAt(0,u[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,u[y]));const T=this._cubeSize;A1(i,E*T,y>2?T:0,T,T),c.setRenderTarget(i),x&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=h,c.autoClear=d,e.background=b}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===sf||e.mapping===Rh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Hj()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$j());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Js(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;A1(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,YA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Vj[(i-s-1)%Vj.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Js(this._lodPlanes[i],u),h=u.uniforms,p=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Xp-1),x=s/g,b=isFinite(s)?1+Math.floor(c*x):Xp;b>Xp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Xp}`);const y=[];let E=0;for(let q=0;q<Xp;++q){const L=q/x,R=Math.exp(-L*L/2);y.push(R),q===0?E+=R:q<b&&(E+=2*R)}for(let q=0;q<y.length;q++)y[q]=y[q]/E;h.envMap.value=e.texture,h.samples.value=b,h.weights.value=y,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:T}=this;h.dTheta.value=g,h.mipInt.value=T-r;const I=this._sizeLods[i],N=3*I*(i>T-Sy?i-T+Sy:0),k=4*(this._cubeSize-I);A1(t,N,k,3*I,2*I),l.setRenderTarget(t),l.render(d,YA)}}function fxe(n){const e=[],t=[],r=[];let i=n;const s=n-Sy+1+Uj.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Sy?l=Uj[o-n+Sy-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],p=6,g=6,x=3,b=2,y=1,E=new Float32Array(x*g*p),T=new Float32Array(b*g*p),I=new Float32Array(y*g*p);for(let k=0;k<p;k++){const q=k%3*2/3-1,L=k>2?0:-1,R=[q,L,0,q+2/3,L,0,q+2/3,L+1,0,q,L,0,q+2/3,L+1,0,q,L+1,0];E.set(R,x*g*k),T.set(h,b*g*k);const P=[k,k,k,k,k,k];I.set(P,y*g*k)}const N=new Ur;N.setAttribute("position",new Mi(E,x)),N.setAttribute("uv",new Mi(T,b)),N.setAttribute("faceIndex",new Mi(I,y)),e.push(N),i>Sy&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function Wj(n,e,t){const r=new Jc(n,e,t);return r.texture.mapping=Tv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function A1(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function hxe(n,e,t){const r=new Float32Array(Xp),i=new Pe(0,1,0);return new Zc({name:"SphericalGaussianBlur",defines:{n:Xp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:yk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gd,depthTest:!1,depthWrite:!1})}function $j(){return new Zc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gd,depthTest:!1,depthWrite:!1})}function Hj(){return new Zc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gd,depthTest:!1,depthWrite:!1})}function yk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pxe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===p0||l===m0,c=l===sf||l===Rh;if(u||c){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new YR(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const p=a.image;return u&&p&&p.height>0||c&&p&&i(p)?(t===null&&(t=new YR(n)),d=u?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function mxe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&ly("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function gxe(n,e,t,r){const i={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete i[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function u(d){const h=[],p=d.index,g=d.attributes.position;let x=0;if(p!==null){const E=p.array;x=p.version;for(let T=0,I=E.length;T<I;T+=3){const N=E[T+0],k=E[T+1],q=E[T+2];h.push(N,k,k,q,q,N)}}else if(g!==void 0){const E=g.array;x=g.version;for(let T=0,I=E.length/3-1;T<I;T+=3){const N=T+0,k=T+1,q=T+2;h.push(N,k,k,q,q,N)}}else return;const b=new(NW(h)?HP:$P)(h,1);b.version=x;const y=s.get(d);y&&e.remove(y),s.set(d,b)}function c(d){const h=s.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:c}}function yxe(n,e,t){let r;function i(h){r=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,p){n.drawElements(r,p,s,h*o),t.update(p,r,1)}function u(h,p,g){g!==0&&(n.drawElementsInstanced(r,p,s,h*o,g),t.update(p,r,g))}function c(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,h,0,g);let b=0;for(let y=0;y<g;y++)b+=p[y];t.update(b,r,1)}function d(h,p,g,x){if(g===0)return;const b=e.get("WEBGL_multi_draw");if(b===null)for(let y=0;y<h.length;y++)u(h[y]/o,p[y],x[y]);else{b.multiDrawElementsInstancedWEBGL(r,p,0,s,h,0,x,0,g);let y=0;for(let E=0;E<g;E++)y+=p[E]*x[E];t.update(y,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function vxe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function _xe(n,e,t){const r=new WeakMap,i=new oi;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=c!==void 0?c.length:0;let h=r.get(a);if(h===void 0||h.count!==d){let R=function(){q.dispose(),r.delete(a),a.removeEventListener("dispose",R)};h!==void 0&&h.texture.dispose();const p=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,b=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let T=0;p===!0&&(T=1),g===!0&&(T=2),x===!0&&(T=3);let I=a.attributes.position.count*T,N=1;I>e.maxTextureSize&&(N=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const k=new Float32Array(I*N*4*d),q=new ub(k,I,N,d);q.type=Na,q.needsUpdate=!0;const L=T*4;for(let P=0;P<d;P++){const F=b[P],z=y[P],V=E[P],W=I*N*4*P;for(let Q=0;Q<F.count;Q++){const X=Q*L;p===!0&&(i.fromBufferAttribute(F,Q),k[W+X+0]=i.x,k[W+X+1]=i.y,k[W+X+2]=i.z,k[W+X+3]=0),g===!0&&(i.fromBufferAttribute(z,Q),k[W+X+4]=i.x,k[W+X+5]=i.y,k[W+X+6]=i.z,k[W+X+7]=0),x===!0&&(i.fromBufferAttribute(V,Q),k[W+X+8]=i.x,k[W+X+9]=i.y,k[W+X+10]=i.z,k[W+X+11]=V.itemSize===4?i.w:1)}}h={count:d,texture:q,size:new Ut(I,N)},r.set(a,h),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let x=0;x<u.length;x++)p+=u[x];const g=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",g),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function xxe(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,d=e.get(l,c);if(i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return d}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const D$=new _s,Gj=new LT(1,1),F$=new ub,q$=new CT,j$=new fb,Xj=[],Kj=[],Qj=new Float32Array(16),Yj=new Float32Array(9),Jj=new Float32Array(4);function Av(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=Xj[i];if(s===void 0&&(s=new Float32Array(i),Xj[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function fo(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ho(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function YT(n,e){let t=Kj[e];t===void 0&&(t=new Int32Array(e),Kj[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function bxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function wxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fo(t,e))return;n.uniform2fv(this.addr,e),ho(t,e)}}function Sxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(fo(t,e))return;n.uniform3fv(this.addr,e),ho(t,e)}}function Exe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fo(t,e))return;n.uniform4fv(this.addr,e),ho(t,e)}}function Txe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(fo(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ho(t,e)}else{if(fo(t,r))return;Jj.set(r),n.uniformMatrix2fv(this.addr,!1,Jj),ho(t,r)}}function Mxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(fo(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ho(t,e)}else{if(fo(t,r))return;Yj.set(r),n.uniformMatrix3fv(this.addr,!1,Yj),ho(t,r)}}function Ixe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(fo(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ho(t,e)}else{if(fo(t,r))return;Qj.set(r),n.uniformMatrix4fv(this.addr,!1,Qj),ho(t,r)}}function Axe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Cxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fo(t,e))return;n.uniform2iv(this.addr,e),ho(t,e)}}function Rxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fo(t,e))return;n.uniform3iv(this.addr,e),ho(t,e)}}function Nxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fo(t,e))return;n.uniform4iv(this.addr,e),ho(t,e)}}function Pxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function kxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fo(t,e))return;n.uniform2uiv(this.addr,e),ho(t,e)}}function Oxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fo(t,e))return;n.uniform3uiv(this.addr,e),ho(t,e)}}function Lxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fo(t,e))return;n.uniform4uiv(this.addr,e),ho(t,e)}}function Dxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(Gj.compareFunction=VP,s=Gj):s=D$,t.setTexture2D(e||s,i)}function Fxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||q$,i)}function qxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||j$,i)}function jxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||F$,i)}function Bxe(n){switch(n){case 5126:return bxe;case 35664:return wxe;case 35665:return Sxe;case 35666:return Exe;case 35674:return Txe;case 35675:return Mxe;case 35676:return Ixe;case 5124:case 35670:return Axe;case 35667:case 35671:return Cxe;case 35668:case 35672:return Rxe;case 35669:case 35673:return Nxe;case 5125:return Pxe;case 36294:return kxe;case 36295:return Oxe;case 36296:return Lxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Dxe;case 35679:case 36299:case 36307:return Fxe;case 35680:case 36300:case 36308:case 36293:return qxe;case 36289:case 36303:case 36311:case 36292:return jxe}}function Uxe(n,e){n.uniform1fv(this.addr,e)}function zxe(n,e){const t=Av(e,this.size,2);n.uniform2fv(this.addr,t)}function Vxe(n,e){const t=Av(e,this.size,3);n.uniform3fv(this.addr,t)}function Wxe(n,e){const t=Av(e,this.size,4);n.uniform4fv(this.addr,t)}function $xe(n,e){const t=Av(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Hxe(n,e){const t=Av(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Gxe(n,e){const t=Av(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Xxe(n,e){n.uniform1iv(this.addr,e)}function Kxe(n,e){n.uniform2iv(this.addr,e)}function Qxe(n,e){n.uniform3iv(this.addr,e)}function Yxe(n,e){n.uniform4iv(this.addr,e)}function Jxe(n,e){n.uniform1uiv(this.addr,e)}function Zxe(n,e){n.uniform2uiv(this.addr,e)}function e0e(n,e){n.uniform3uiv(this.addr,e)}function t0e(n,e){n.uniform4uiv(this.addr,e)}function n0e(n,e,t){const r=this.cache,i=e.length,s=YT(t,i);fo(r,s)||(n.uniform1iv(this.addr,s),ho(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||D$,s[o])}function r0e(n,e,t){const r=this.cache,i=e.length,s=YT(t,i);fo(r,s)||(n.uniform1iv(this.addr,s),ho(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||q$,s[o])}function i0e(n,e,t){const r=this.cache,i=e.length,s=YT(t,i);fo(r,s)||(n.uniform1iv(this.addr,s),ho(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||j$,s[o])}function s0e(n,e,t){const r=this.cache,i=e.length,s=YT(t,i);fo(r,s)||(n.uniform1iv(this.addr,s),ho(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||F$,s[o])}function o0e(n){switch(n){case 5126:return Uxe;case 35664:return zxe;case 35665:return Vxe;case 35666:return Wxe;case 35674:return $xe;case 35675:return Hxe;case 35676:return Gxe;case 5124:case 35670:return Xxe;case 35667:case 35671:return Kxe;case 35668:case 35672:return Qxe;case 35669:case 35673:return Yxe;case 5125:return Jxe;case 36294:return Zxe;case 36295:return e0e;case 36296:return t0e;case 35678:case 36198:case 36298:case 36306:case 35682:return n0e;case 35679:case 36299:case 36307:return r0e;case 35680:case 36300:case 36308:case 36293:return i0e;case 36289:case 36303:case 36311:case 36292:return s0e}}class a0e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Bxe(t.type)}}class l0e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=o0e(t.type)}}class c0e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const nC=/(\w+)(\])?(\[|\.)?/g;function Zj(n,e){n.seq.push(e),n.map[e.id]=e}function u0e(n,e,t){const r=n.name,i=r.length;for(nC.lastIndex=0;;){const s=nC.exec(r),o=nC.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){Zj(t,u===void 0?new a0e(a,n,e):new l0e(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new c0e(a),Zj(t,d)),t=d}}}class oS{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);u0e(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function eB(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const d0e=37297;let f0e=0;function h0e(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const tB=new Ar;function p0e(n){Zr._getMatrix(tB,Zr.workingColorSpace,n);const e=`mat3( ${tB.elements.map(t=>t.toFixed(4))} )`;switch(Zr.getTransfer(n)){case x0:return[e,"LinearTransferOETF"];case vi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function nB(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+h0e(n.getShaderSource(e),o)}else return i}function m0e(n,e){const t=p0e(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function g0e(n,e){let t;switch(e){case dW:t="Linear";break;case fW:t="Reinhard";break;case hW:t="Cineon";break;case _T:t="ACESFilmic";break;case mW:t="AgX";break;case gW:t="Neutral";break;case pW:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const C1=new Pe;function y0e(){Zr.getLuminanceCoefficients(C1);const n=C1.x.toFixed(4),e=C1.y.toFixed(4),t=C1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function v0e(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Q_).join(`
`)}function _0e(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function x0e(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Q_(n){return n!==""}function rB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function iB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const b0e=/^[ \t]*#include +<([\w\d./]+)>/gm;function JR(n){return n.replace(b0e,S0e)}const w0e=new Map;function S0e(n,e){let t=jr[e];if(t===void 0){const r=w0e.get(e);if(r!==void 0)t=jr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return JR(t)}const E0e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sB(n){return n.replace(E0e,T0e)}function T0e(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function oB(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function M0e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===vT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xx?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Dc&&(e="SHADOWMAP_TYPE_VSM"),e}function I0e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case sf:case Rh:e="ENVMAP_TYPE_CUBE";break;case Tv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function A0e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Rh:e="ENVMAP_MODE_REFRACTION";break}return e}function C0e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case lb:e="ENVMAP_BLENDING_MULTIPLY";break;case cW:e="ENVMAP_BLENDING_MIX";break;case uW:e="ENVMAP_BLENDING_ADD";break}return e}function R0e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function N0e(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=M0e(t),u=I0e(t),c=A0e(t),d=C0e(t),h=R0e(t),p=v0e(t),g=_0e(s),x=i.createProgram();let b,y,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Q_).join(`
`),b.length>0&&(b+=`
`),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(Q_).join(`
`),y.length>0&&(y+=`
`)):(b=[oB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Q_).join(`
`),y=[oB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Du?"#define TONE_MAPPING":"",t.toneMapping!==Du?jr.tonemapping_pars_fragment:"",t.toneMapping!==Du?g0e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",jr.colorspace_pars_fragment,m0e("linearToOutputTexel",t.outputColorSpace),y0e(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Q_).join(`
`)),o=JR(o),o=rB(o,t),o=iB(o,t),a=JR(a),a=rB(a,t),a=iB(a,t),o=sB(o),a=sB(a),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,b=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,y=["#define varying in",t.glslVersion===zR?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===zR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const T=E+b+o,I=E+y+a,N=eB(i,i.VERTEX_SHADER,T),k=eB(i,i.FRAGMENT_SHADER,I);i.attachShader(x,N),i.attachShader(x,k),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function q(F){if(n.debug.checkShaderErrors){const z=i.getProgramInfoLog(x).trim(),V=i.getShaderInfoLog(N).trim(),W=i.getShaderInfoLog(k).trim();let Q=!0,X=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(Q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,x,N,k);else{const re=nB(i,N,"vertex"),G=nB(i,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+z+`
`+re+`
`+G)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(V===""||W==="")&&(X=!1);X&&(F.diagnostics={runnable:Q,programLog:z,vertexShader:{log:V,prefix:b},fragmentShader:{log:W,prefix:y}})}i.deleteShader(N),i.deleteShader(k),L=new oS(i,x),R=x0e(i,x)}let L;this.getUniforms=function(){return L===void 0&&q(this),L};let R;this.getAttributes=function(){return R===void 0&&q(this),R};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(x,d0e)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=f0e++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=N,this.fragmentShader=k,this}let P0e=0;class k0e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new O0e(e),t.set(e,r)),r}}class O0e{constructor(e){this.id=P0e++,this.code=e,this.usedTimes=0}}function L0e(n,e,t,r,i,s,o){const a=new hm,l=new k0e,u=new Set,c=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(R){return u.add(R),R===0?"uv":`uv${R}`}function b(R,P,F,z,V){const W=z.fog,Q=V.geometry,X=R.isMeshStandardMaterial?z.environment:null,re=(R.isMeshStandardMaterial?t:e).get(R.envMap||X),G=re&&re.mapping===Tv?re.image.height:null,Y=g[R.type];R.precision!==null&&(p=i.getMaxPrecision(R.precision),p!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",p,"instead."));const te=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,Z=te!==void 0?te.length:0;let fe=0;Q.morphAttributes.position!==void 0&&(fe=1),Q.morphAttributes.normal!==void 0&&(fe=2),Q.morphAttributes.color!==void 0&&(fe=3);let ge,ce,ye,be;if(Y){const gr=Bc[Y];ge=gr.vertexShader,ce=gr.fragmentShader}else ge=R.vertexShader,ce=R.fragmentShader,l.update(R),ye=l.getVertexShaderID(R),be=l.getFragmentShaderID(R);const Ee=n.getRenderTarget(),Me=n.state.buffers.depth.getReversed(),qe=V.isInstancedMesh===!0,Ue=V.isBatchedMesh===!0,Ye=!!R.map,Ne=!!R.matcap,ke=!!re,me=!!R.aoMap,ht=!!R.lightMap,ct=!!R.bumpMap,Mt=!!R.normalMap,xe=!!R.displacementMap,Te=!!R.emissiveMap,Ae=!!R.metalnessMap,le=!!R.roughnessMap,se=R.anisotropy>0,Oe=R.clearcoat>0,Ce=R.dispersion>0,Ge=R.iridescence>0,at=R.sheen>0,Lt=R.transmission>0,Dt=se&&!!R.anisotropyMap,Jt=Oe&&!!R.clearcoatMap,Cn=Oe&&!!R.clearcoatNormalMap,Vt=Oe&&!!R.clearcoatRoughnessMap,hn=Ge&&!!R.iridescenceMap,vn=Ge&&!!R.iridescenceThicknessMap,$t=at&&!!R.sheenColorMap,un=at&&!!R.sheenRoughnessMap,He=!!R.specularMap,At=!!R.specularColorMap,on=!!R.specularIntensityMap,$e=Lt&&!!R.transmissionMap,Kt=Lt&&!!R.thicknessMap,_t=!!R.gradientMap,ee=!!R.alphaMap,gn=R.alphaTest>0,Ft=!!R.alphaHash,Hn=!!R.extensions;let Lr=Du;R.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Lr=n.toneMapping);const ai={shaderID:Y,shaderType:R.type,shaderName:R.name,vertexShader:ge,fragmentShader:ce,defines:R.defines,customVertexShaderID:ye,customFragmentShaderID:be,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:p,batching:Ue,batchingColor:Ue&&V._colorsTexture!==null,instancing:qe,instancingColor:qe&&V.instanceColor!==null,instancingMorph:qe&&V.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:Ee===null?n.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:Nm,alphaToCoverage:!!R.alphaToCoverage,map:Ye,matcap:Ne,envMap:ke,envMapMode:ke&&re.mapping,envMapCubeUVHeight:G,aoMap:me,lightMap:ht,bumpMap:ct,normalMap:Mt,displacementMap:h&&xe,emissiveMap:Te,normalMapObjectSpace:Mt&&R.normalMapType===SW,normalMapTangentSpace:Mt&&R.normalMapType===Lh,metalnessMap:Ae,roughnessMap:le,anisotropy:se,anisotropyMap:Dt,clearcoat:Oe,clearcoatMap:Jt,clearcoatNormalMap:Cn,clearcoatRoughnessMap:Vt,dispersion:Ce,iridescence:Ge,iridescenceMap:hn,iridescenceThicknessMap:vn,sheen:at,sheenColorMap:$t,sheenRoughnessMap:un,specularMap:He,specularColorMap:At,specularIntensityMap:on,transmission:Lt,transmissionMap:$e,thicknessMap:Kt,gradientMap:_t,opaque:R.transparent===!1&&R.blending===um&&R.alphaToCoverage===!1,alphaMap:ee,alphaTest:gn,alphaHash:Ft,combine:R.combine,mapUv:Ye&&x(R.map.channel),aoMapUv:me&&x(R.aoMap.channel),lightMapUv:ht&&x(R.lightMap.channel),bumpMapUv:ct&&x(R.bumpMap.channel),normalMapUv:Mt&&x(R.normalMap.channel),displacementMapUv:xe&&x(R.displacementMap.channel),emissiveMapUv:Te&&x(R.emissiveMap.channel),metalnessMapUv:Ae&&x(R.metalnessMap.channel),roughnessMapUv:le&&x(R.roughnessMap.channel),anisotropyMapUv:Dt&&x(R.anisotropyMap.channel),clearcoatMapUv:Jt&&x(R.clearcoatMap.channel),clearcoatNormalMapUv:Cn&&x(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Vt&&x(R.clearcoatRoughnessMap.channel),iridescenceMapUv:hn&&x(R.iridescenceMap.channel),iridescenceThicknessMapUv:vn&&x(R.iridescenceThicknessMap.channel),sheenColorMapUv:$t&&x(R.sheenColorMap.channel),sheenRoughnessMapUv:un&&x(R.sheenRoughnessMap.channel),specularMapUv:He&&x(R.specularMap.channel),specularColorMapUv:At&&x(R.specularColorMap.channel),specularIntensityMapUv:on&&x(R.specularIntensityMap.channel),transmissionMapUv:$e&&x(R.transmissionMap.channel),thicknessMapUv:Kt&&x(R.thicknessMap.channel),alphaMapUv:ee&&x(R.alphaMap.channel),vertexTangents:!!Q.attributes.tangent&&(Mt||se),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!Q.attributes.uv&&(Ye||ee),fog:!!W,useFog:R.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Me,skinning:V.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:fe,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:Lr,decodeVideoTexture:Ye&&R.map.isVideoTexture===!0&&Zr.getTransfer(R.map.colorSpace)===vi,decodeVideoTextureEmissive:Te&&R.emissiveMap.isVideoTexture===!0&&Zr.getTransfer(R.emissiveMap.colorSpace)===vi,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Au,flipSided:R.side===Pa,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:Hn&&R.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Hn&&R.extensions.multiDraw===!0||Ue)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return ai.vertexUv1s=u.has(1),ai.vertexUv2s=u.has(2),ai.vertexUv3s=u.has(3),u.clear(),ai}function y(R){const P=[];if(R.shaderID?P.push(R.shaderID):(P.push(R.customVertexShaderID),P.push(R.customFragmentShaderID)),R.defines!==void 0)for(const F in R.defines)P.push(F),P.push(R.defines[F]);return R.isRawShaderMaterial===!1&&(E(P,R),T(P,R),P.push(n.outputColorSpace)),P.push(R.customProgramCacheKey),P.join()}function E(R,P){R.push(P.precision),R.push(P.outputColorSpace),R.push(P.envMapMode),R.push(P.envMapCubeUVHeight),R.push(P.mapUv),R.push(P.alphaMapUv),R.push(P.lightMapUv),R.push(P.aoMapUv),R.push(P.bumpMapUv),R.push(P.normalMapUv),R.push(P.displacementMapUv),R.push(P.emissiveMapUv),R.push(P.metalnessMapUv),R.push(P.roughnessMapUv),R.push(P.anisotropyMapUv),R.push(P.clearcoatMapUv),R.push(P.clearcoatNormalMapUv),R.push(P.clearcoatRoughnessMapUv),R.push(P.iridescenceMapUv),R.push(P.iridescenceThicknessMapUv),R.push(P.sheenColorMapUv),R.push(P.sheenRoughnessMapUv),R.push(P.specularMapUv),R.push(P.specularColorMapUv),R.push(P.specularIntensityMapUv),R.push(P.transmissionMapUv),R.push(P.thicknessMapUv),R.push(P.combine),R.push(P.fogExp2),R.push(P.sizeAttenuation),R.push(P.morphTargetsCount),R.push(P.morphAttributeCount),R.push(P.numDirLights),R.push(P.numPointLights),R.push(P.numSpotLights),R.push(P.numSpotLightMaps),R.push(P.numHemiLights),R.push(P.numRectAreaLights),R.push(P.numDirLightShadows),R.push(P.numPointLightShadows),R.push(P.numSpotLightShadows),R.push(P.numSpotLightShadowsWithMaps),R.push(P.numLightProbes),R.push(P.shadowMapType),R.push(P.toneMapping),R.push(P.numClippingPlanes),R.push(P.numClipIntersection),R.push(P.depthPacking)}function T(R,P){a.disableAll(),P.supportsVertexTextures&&a.enable(0),P.instancing&&a.enable(1),P.instancingColor&&a.enable(2),P.instancingMorph&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),P.dispersion&&a.enable(20),P.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.reverseDepthBuffer&&a.enable(4),P.skinning&&a.enable(5),P.morphTargets&&a.enable(6),P.morphNormals&&a.enable(7),P.morphColors&&a.enable(8),P.premultipliedAlpha&&a.enable(9),P.shadowMapEnabled&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),P.decodeVideoTextureEmissive&&a.enable(20),P.alphaToCoverage&&a.enable(21),R.push(a.mask)}function I(R){const P=g[R.type];let F;if(P){const z=Bc[P];F=DW.clone(z.uniforms)}else F=R.uniforms;return F}function N(R,P){let F;for(let z=0,V=c.length;z<V;z++){const W=c[z];if(W.cacheKey===P){F=W,++F.usedTimes;break}}return F===void 0&&(F=new N0e(n,P,R,s),c.push(F)),F}function k(R){if(--R.usedTimes===0){const P=c.indexOf(R);c[P]=c[c.length-1],c.pop(),R.destroy()}}function q(R){l.remove(R)}function L(){l.dispose()}return{getParameters:b,getProgramCacheKey:y,getUniforms:I,acquireProgram:N,releaseProgram:k,releaseShaderCache:q,programs:c,dispose:L}}function D0e(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function F0e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function aB(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function lB(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,h,p,g,x,b){let y=n[e];return y===void 0?(y={id:d.id,object:d,geometry:h,material:p,groupOrder:g,renderOrder:d.renderOrder,z:x,group:b},n[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=p,y.groupOrder=g,y.renderOrder=d.renderOrder,y.z=x,y.group=b),e++,y}function a(d,h,p,g,x,b){const y=o(d,h,p,g,x,b);p.transmission>0?r.push(y):p.transparent===!0?i.push(y):t.push(y)}function l(d,h,p,g,x,b){const y=o(d,h,p,g,x,b);p.transmission>0?r.unshift(y):p.transparent===!0?i.unshift(y):t.unshift(y)}function u(d,h){t.length>1&&t.sort(d||F0e),r.length>1&&r.sort(h||aB),i.length>1&&i.sort(h||aB)}function c(){for(let d=e,h=n.length;d<h;d++){const p=n[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function q0e(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new lB,n.set(r,[o])):i>=s.length?(o=new lB,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function j0e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Pe,color:new Pn};break;case"SpotLight":t={position:new Pe,direction:new Pe,color:new Pn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Pe,color:new Pn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Pe,skyColor:new Pn,groundColor:new Pn};break;case"RectAreaLight":t={color:new Pn,position:new Pe,halfWidth:new Pe,halfHeight:new Pe};break}return n[e.id]=t,t}}}function B0e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ut,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let U0e=0;function z0e(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function V0e(n){const e=new j0e,t=B0e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Pe);const i=new Pe,s=new hr,o=new hr;function a(u){let c=0,d=0,h=0;for(let R=0;R<9;R++)r.probe[R].set(0,0,0);let p=0,g=0,x=0,b=0,y=0,E=0,T=0,I=0,N=0,k=0,q=0;u.sort(z0e);for(let R=0,P=u.length;R<P;R++){const F=u[R],z=F.color,V=F.intensity,W=F.distance,Q=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)c+=z.r*V,d+=z.g*V,h+=z.b*V;else if(F.isLightProbe){for(let X=0;X<9;X++)r.probe[X].addScaledVector(F.sh.coefficients[X],V);q++}else if(F.isDirectionalLight){const X=e.get(F);if(X.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const re=F.shadow,G=t.get(F);G.shadowIntensity=re.intensity,G.shadowBias=re.bias,G.shadowNormalBias=re.normalBias,G.shadowRadius=re.radius,G.shadowMapSize=re.mapSize,r.directionalShadow[p]=G,r.directionalShadowMap[p]=Q,r.directionalShadowMatrix[p]=F.shadow.matrix,E++}r.directional[p]=X,p++}else if(F.isSpotLight){const X=e.get(F);X.position.setFromMatrixPosition(F.matrixWorld),X.color.copy(z).multiplyScalar(V),X.distance=W,X.coneCos=Math.cos(F.angle),X.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),X.decay=F.decay,r.spot[x]=X;const re=F.shadow;if(F.map&&(r.spotLightMap[N]=F.map,N++,re.updateMatrices(F),F.castShadow&&k++),r.spotLightMatrix[x]=re.matrix,F.castShadow){const G=t.get(F);G.shadowIntensity=re.intensity,G.shadowBias=re.bias,G.shadowNormalBias=re.normalBias,G.shadowRadius=re.radius,G.shadowMapSize=re.mapSize,r.spotShadow[x]=G,r.spotShadowMap[x]=Q,I++}x++}else if(F.isRectAreaLight){const X=e.get(F);X.color.copy(z).multiplyScalar(V),X.halfWidth.set(F.width*.5,0,0),X.halfHeight.set(0,F.height*.5,0),r.rectArea[b]=X,b++}else if(F.isPointLight){const X=e.get(F);if(X.color.copy(F.color).multiplyScalar(F.intensity),X.distance=F.distance,X.decay=F.decay,F.castShadow){const re=F.shadow,G=t.get(F);G.shadowIntensity=re.intensity,G.shadowBias=re.bias,G.shadowNormalBias=re.normalBias,G.shadowRadius=re.radius,G.shadowMapSize=re.mapSize,G.shadowCameraNear=re.camera.near,G.shadowCameraFar=re.camera.far,r.pointShadow[g]=G,r.pointShadowMap[g]=Q,r.pointShadowMatrix[g]=F.shadow.matrix,T++}r.point[g]=X,g++}else if(F.isHemisphereLight){const X=e.get(F);X.skyColor.copy(F.color).multiplyScalar(V),X.groundColor.copy(F.groundColor).multiplyScalar(V),r.hemi[y]=X,y++}}b>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=wn.LTC_FLOAT_1,r.rectAreaLTC2=wn.LTC_FLOAT_2):(r.rectAreaLTC1=wn.LTC_HALF_1,r.rectAreaLTC2=wn.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=d,r.ambient[2]=h;const L=r.hash;(L.directionalLength!==p||L.pointLength!==g||L.spotLength!==x||L.rectAreaLength!==b||L.hemiLength!==y||L.numDirectionalShadows!==E||L.numPointShadows!==T||L.numSpotShadows!==I||L.numSpotMaps!==N||L.numLightProbes!==q)&&(r.directional.length=p,r.spot.length=x,r.rectArea.length=b,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=T,r.spotLightMatrix.length=I+N-k,r.spotLightMap.length=N,r.numSpotLightShadowsWithMaps=k,r.numLightProbes=q,L.directionalLength=p,L.pointLength=g,L.spotLength=x,L.rectAreaLength=b,L.hemiLength=y,L.numDirectionalShadows=E,L.numPointShadows=T,L.numSpotShadows=I,L.numSpotMaps=N,L.numLightProbes=q,r.version=U0e++)}function l(u,c){let d=0,h=0,p=0,g=0,x=0;const b=c.matrixWorldInverse;for(let y=0,E=u.length;y<E;y++){const T=u[y];if(T.isDirectionalLight){const I=r.directional[d];I.direction.setFromMatrixPosition(T.matrixWorld),i.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(b),d++}else if(T.isSpotLight){const I=r.spot[p];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(b),I.direction.setFromMatrixPosition(T.matrixWorld),i.setFromMatrixPosition(T.target.matrixWorld),I.direction.sub(i),I.direction.transformDirection(b),p++}else if(T.isRectAreaLight){const I=r.rectArea[g];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(b),o.identity(),s.copy(T.matrixWorld),s.premultiply(b),o.extractRotation(s),I.halfWidth.set(T.width*.5,0,0),I.halfHeight.set(0,T.height*.5,0),I.halfWidth.applyMatrix4(o),I.halfHeight.applyMatrix4(o),g++}else if(T.isPointLight){const I=r.point[h];I.position.setFromMatrixPosition(T.matrixWorld),I.position.applyMatrix4(b),h++}else if(T.isHemisphereLight){const I=r.hemi[x];I.direction.setFromMatrixPosition(T.matrixWorld),I.direction.transformDirection(b),x++}}}return{setup:a,setupView:l,state:r}}function cB(n){const e=new V0e(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function s(c){t.push(c)}function o(c){r.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function W0e(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new cB(n),e.set(i,[a])):s>=o.length?(a=new cB(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const $0e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,H0e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function G0e(n,e,t){let r=new hb;const i=new Ut,s=new Ut,o=new oi,a=new ik({depthPacking:wW}),l=new sk,u={},c=t.maxTextureSize,d={[rf]:Pa,[Pa]:rf,[Au]:Au},h=new Zc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ut},radius:{value:4}},vertexShader:$0e,fragmentShader:H0e}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Ur;g.setAttribute("position",new Mi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Js(g,h),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vT;let y=this.type;this.render=function(k,q,L){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||k.length===0)return;const R=n.getRenderTarget(),P=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Gd),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const V=y!==Dc&&this.type===Dc,W=y===Dc&&this.type!==Dc;for(let Q=0,X=k.length;Q<X;Q++){const re=k[Q],G=re.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const Y=G.getFrameExtents();if(i.multiply(Y),s.copy(G.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/Y.x),i.x=s.x*Y.x,G.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/Y.y),i.y=s.y*Y.y,G.mapSize.y=s.y)),G.map===null||V===!0||W===!0){const Z=this.type!==Dc?{minFilter:Bo,magFilter:Bo}:{};G.map!==null&&G.map.dispose(),G.map=new Jc(i.x,i.y,Z),G.map.texture.name=re.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const te=G.getViewportCount();for(let Z=0;Z<te;Z++){const fe=G.getViewport(Z);o.set(s.x*fe.x,s.y*fe.y,s.x*fe.z,s.y*fe.w),z.viewport(o),G.updateMatrices(re,Z),r=G.getFrustum(),I(q,L,G.camera,re,this.type)}G.isPointLightShadow!==!0&&this.type===Dc&&E(G,L),G.needsUpdate=!1}y=this.type,b.needsUpdate=!1,n.setRenderTarget(R,P,F)};function E(k,q){const L=e.update(x);h.defines.VSM_SAMPLES!==k.blurSamples&&(h.defines.VSM_SAMPLES=k.blurSamples,p.defines.VSM_SAMPLES=k.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new Jc(i.x,i.y)),h.uniforms.shadow_pass.value=k.map.texture,h.uniforms.resolution.value=k.mapSize,h.uniforms.radius.value=k.radius,n.setRenderTarget(k.mapPass),n.clear(),n.renderBufferDirect(q,null,L,h,x,null),p.uniforms.shadow_pass.value=k.mapPass.texture,p.uniforms.resolution.value=k.mapSize,p.uniforms.radius.value=k.radius,n.setRenderTarget(k.map),n.clear(),n.renderBufferDirect(q,null,L,p,x,null)}function T(k,q,L,R){let P=null;const F=L.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(F!==void 0)P=F;else if(P=L.isPointLight===!0?l:a,n.localClippingEnabled&&q.clipShadows===!0&&Array.isArray(q.clippingPlanes)&&q.clippingPlanes.length!==0||q.displacementMap&&q.displacementScale!==0||q.alphaMap&&q.alphaTest>0||q.map&&q.alphaTest>0){const z=P.uuid,V=q.uuid;let W=u[z];W===void 0&&(W={},u[z]=W);let Q=W[V];Q===void 0&&(Q=P.clone(),W[V]=Q,q.addEventListener("dispose",N)),P=Q}if(P.visible=q.visible,P.wireframe=q.wireframe,R===Dc?P.side=q.shadowSide!==null?q.shadowSide:q.side:P.side=q.shadowSide!==null?q.shadowSide:d[q.side],P.alphaMap=q.alphaMap,P.alphaTest=q.alphaTest,P.map=q.map,P.clipShadows=q.clipShadows,P.clippingPlanes=q.clippingPlanes,P.clipIntersection=q.clipIntersection,P.displacementMap=q.displacementMap,P.displacementScale=q.displacementScale,P.displacementBias=q.displacementBias,P.wireframeLinewidth=q.wireframeLinewidth,P.linewidth=q.linewidth,L.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const z=n.properties.get(P);z.light=L}return P}function I(k,q,L,R,P){if(k.visible===!1)return;if(k.layers.test(q.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&P===Dc)&&(!k.frustumCulled||r.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,k.matrixWorld);const V=e.update(k),W=k.material;if(Array.isArray(W)){const Q=V.groups;for(let X=0,re=Q.length;X<re;X++){const G=Q[X],Y=W[G.materialIndex];if(Y&&Y.visible){const te=T(k,Y,R,P);k.onBeforeShadow(n,k,q,L,V,te,G),n.renderBufferDirect(L,null,V,te,k,G),k.onAfterShadow(n,k,q,L,V,te,G)}}}else if(W.visible){const Q=T(k,W,R,P);k.onBeforeShadow(n,k,q,L,V,Q,null),n.renderBufferDirect(L,null,V,Q,k,null),k.onAfterShadow(n,k,q,L,V,Q,null)}}const z=k.children;for(let V=0,W=z.length;V<W;V++)I(z[V],q,L,R,P)}function N(k){k.target.removeEventListener("dispose",N);for(const L in u){const R=u[L],P=k.target.uuid;P in R&&(R[P].dispose(),delete R[P])}}}const X0e={[DE]:FE,[qE]:UE,[jE]:zE,[Am]:BE,[FE]:DE,[UE]:qE,[zE]:jE,[BE]:Am};function K0e(n,e){function t(){let $e=!1;const Kt=new oi;let _t=null;const ee=new oi(0,0,0,0);return{setMask:function(gn){_t!==gn&&!$e&&(n.colorMask(gn,gn,gn,gn),_t=gn)},setLocked:function(gn){$e=gn},setClear:function(gn,Ft,Hn,Lr,ai){ai===!0&&(gn*=Lr,Ft*=Lr,Hn*=Lr),Kt.set(gn,Ft,Hn,Lr),ee.equals(Kt)===!1&&(n.clearColor(gn,Ft,Hn,Lr),ee.copy(Kt))},reset:function(){$e=!1,_t=null,ee.set(-1,0,0,0)}}}function r(){let $e=!1,Kt=!1,_t=null,ee=null,gn=null;return{setReversed:function(Ft){if(Kt!==Ft){const Hn=e.get("EXT_clip_control");Kt?Hn.clipControlEXT(Hn.LOWER_LEFT_EXT,Hn.ZERO_TO_ONE_EXT):Hn.clipControlEXT(Hn.LOWER_LEFT_EXT,Hn.NEGATIVE_ONE_TO_ONE_EXT);const Lr=gn;gn=null,this.setClear(Lr)}Kt=Ft},getReversed:function(){return Kt},setTest:function(Ft){Ft?Ee(n.DEPTH_TEST):Me(n.DEPTH_TEST)},setMask:function(Ft){_t!==Ft&&!$e&&(n.depthMask(Ft),_t=Ft)},setFunc:function(Ft){if(Kt&&(Ft=X0e[Ft]),ee!==Ft){switch(Ft){case DE:n.depthFunc(n.NEVER);break;case FE:n.depthFunc(n.ALWAYS);break;case qE:n.depthFunc(n.LESS);break;case Am:n.depthFunc(n.LEQUAL);break;case jE:n.depthFunc(n.EQUAL);break;case BE:n.depthFunc(n.GEQUAL);break;case UE:n.depthFunc(n.GREATER);break;case zE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ee=Ft}},setLocked:function(Ft){$e=Ft},setClear:function(Ft){gn!==Ft&&(Kt&&(Ft=1-Ft),n.clearDepth(Ft),gn=Ft)},reset:function(){$e=!1,_t=null,ee=null,gn=null,Kt=!1}}}function i(){let $e=!1,Kt=null,_t=null,ee=null,gn=null,Ft=null,Hn=null,Lr=null,ai=null;return{setTest:function(gr){$e||(gr?Ee(n.STENCIL_TEST):Me(n.STENCIL_TEST))},setMask:function(gr){Kt!==gr&&!$e&&(n.stencilMask(gr),Kt=gr)},setFunc:function(gr,hi,ui){(_t!==gr||ee!==hi||gn!==ui)&&(n.stencilFunc(gr,hi,ui),_t=gr,ee=hi,gn=ui)},setOp:function(gr,hi,ui){(Ft!==gr||Hn!==hi||Lr!==ui)&&(n.stencilOp(gr,hi,ui),Ft=gr,Hn=hi,Lr=ui)},setLocked:function(gr){$e=gr},setClear:function(gr){ai!==gr&&(n.clearStencil(gr),ai=gr)},reset:function(){$e=!1,Kt=null,_t=null,ee=null,gn=null,Ft=null,Hn=null,Lr=null,ai=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,u=new WeakMap;let c={},d={},h=new WeakMap,p=[],g=null,x=!1,b=null,y=null,E=null,T=null,I=null,N=null,k=null,q=new Pn(0,0,0),L=0,R=!1,P=null,F=null,z=null,V=null,W=null;const Q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,re=0;const G=n.getParameter(n.VERSION);G.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(G)[1]),X=re>=1):G.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),X=re>=2);let Y=null,te={};const Z=n.getParameter(n.SCISSOR_BOX),fe=n.getParameter(n.VIEWPORT),ge=new oi().fromArray(Z),ce=new oi().fromArray(fe);function ye($e,Kt,_t,ee){const gn=new Uint8Array(4),Ft=n.createTexture();n.bindTexture($e,Ft),n.texParameteri($e,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($e,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Hn=0;Hn<_t;Hn++)$e===n.TEXTURE_3D||$e===n.TEXTURE_2D_ARRAY?n.texImage3D(Kt,0,n.RGBA,1,1,ee,0,n.RGBA,n.UNSIGNED_BYTE,gn):n.texImage2D(Kt+Hn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,gn);return Ft}const be={};be[n.TEXTURE_2D]=ye(n.TEXTURE_2D,n.TEXTURE_2D,1),be[n.TEXTURE_CUBE_MAP]=ye(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),be[n.TEXTURE_2D_ARRAY]=ye(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),be[n.TEXTURE_3D]=ye(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Ee(n.DEPTH_TEST),o.setFunc(Am),ct(!1),Mt(DR),Ee(n.CULL_FACE),me(Gd);function Ee($e){c[$e]!==!0&&(n.enable($e),c[$e]=!0)}function Me($e){c[$e]!==!1&&(n.disable($e),c[$e]=!1)}function qe($e,Kt){return d[$e]!==Kt?(n.bindFramebuffer($e,Kt),d[$e]=Kt,$e===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Kt),$e===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Kt),!0):!1}function Ue($e,Kt){let _t=p,ee=!1;if($e){_t=h.get(Kt),_t===void 0&&(_t=[],h.set(Kt,_t));const gn=$e.textures;if(_t.length!==gn.length||_t[0]!==n.COLOR_ATTACHMENT0){for(let Ft=0,Hn=gn.length;Ft<Hn;Ft++)_t[Ft]=n.COLOR_ATTACHMENT0+Ft;_t.length=gn.length,ee=!0}}else _t[0]!==n.BACK&&(_t[0]=n.BACK,ee=!0);ee&&n.drawBuffers(_t)}function Ye($e){return g!==$e?(n.useProgram($e),g=$e,!0):!1}const Ne={[ch]:n.FUNC_ADD,[HV]:n.FUNC_SUBTRACT,[GV]:n.FUNC_REVERSE_SUBTRACT};Ne[XV]=n.MIN,Ne[KV]=n.MAX;const ke={[QV]:n.ZERO,[YV]:n.ONE,[JV]:n.SRC_COLOR,[OE]:n.SRC_ALPHA,[iW]:n.SRC_ALPHA_SATURATE,[nW]:n.DST_COLOR,[eW]:n.DST_ALPHA,[ZV]:n.ONE_MINUS_SRC_COLOR,[LE]:n.ONE_MINUS_SRC_ALPHA,[rW]:n.ONE_MINUS_DST_COLOR,[tW]:n.ONE_MINUS_DST_ALPHA,[sW]:n.CONSTANT_COLOR,[oW]:n.ONE_MINUS_CONSTANT_COLOR,[aW]:n.CONSTANT_ALPHA,[lW]:n.ONE_MINUS_CONSTANT_ALPHA};function me($e,Kt,_t,ee,gn,Ft,Hn,Lr,ai,gr){if($e===Gd){x===!0&&(Me(n.BLEND),x=!1);return}if(x===!1&&(Ee(n.BLEND),x=!0),$e!==$V){if($e!==b||gr!==R){if((y!==ch||I!==ch)&&(n.blendEquation(n.FUNC_ADD),y=ch,I=ch),gr)switch($e){case um:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case FR:n.blendFunc(n.ONE,n.ONE);break;case qR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case jR:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$e);break}else switch($e){case um:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case FR:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case qR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case jR:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$e);break}E=null,T=null,N=null,k=null,q.set(0,0,0),L=0,b=$e,R=gr}return}gn=gn||Kt,Ft=Ft||_t,Hn=Hn||ee,(Kt!==y||gn!==I)&&(n.blendEquationSeparate(Ne[Kt],Ne[gn]),y=Kt,I=gn),(_t!==E||ee!==T||Ft!==N||Hn!==k)&&(n.blendFuncSeparate(ke[_t],ke[ee],ke[Ft],ke[Hn]),E=_t,T=ee,N=Ft,k=Hn),(Lr.equals(q)===!1||ai!==L)&&(n.blendColor(Lr.r,Lr.g,Lr.b,ai),q.copy(Lr),L=ai),b=$e,R=!1}function ht($e,Kt){$e.side===Au?Me(n.CULL_FACE):Ee(n.CULL_FACE);let _t=$e.side===Pa;Kt&&(_t=!_t),ct(_t),$e.blending===um&&$e.transparent===!1?me(Gd):me($e.blending,$e.blendEquation,$e.blendSrc,$e.blendDst,$e.blendEquationAlpha,$e.blendSrcAlpha,$e.blendDstAlpha,$e.blendColor,$e.blendAlpha,$e.premultipliedAlpha),o.setFunc($e.depthFunc),o.setTest($e.depthTest),o.setMask($e.depthWrite),s.setMask($e.colorWrite);const ee=$e.stencilWrite;a.setTest(ee),ee&&(a.setMask($e.stencilWriteMask),a.setFunc($e.stencilFunc,$e.stencilRef,$e.stencilFuncMask),a.setOp($e.stencilFail,$e.stencilZFail,$e.stencilZPass)),Te($e.polygonOffset,$e.polygonOffsetFactor,$e.polygonOffsetUnits),$e.alphaToCoverage===!0?Ee(n.SAMPLE_ALPHA_TO_COVERAGE):Me(n.SAMPLE_ALPHA_TO_COVERAGE)}function ct($e){P!==$e&&($e?n.frontFace(n.CW):n.frontFace(n.CCW),P=$e)}function Mt($e){$e!==zV?(Ee(n.CULL_FACE),$e!==F&&($e===DR?n.cullFace(n.BACK):$e===VV?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Me(n.CULL_FACE),F=$e}function xe($e){$e!==z&&(X&&n.lineWidth($e),z=$e)}function Te($e,Kt,_t){$e?(Ee(n.POLYGON_OFFSET_FILL),(V!==Kt||W!==_t)&&(n.polygonOffset(Kt,_t),V=Kt,W=_t)):Me(n.POLYGON_OFFSET_FILL)}function Ae($e){$e?Ee(n.SCISSOR_TEST):Me(n.SCISSOR_TEST)}function le($e){$e===void 0&&($e=n.TEXTURE0+Q-1),Y!==$e&&(n.activeTexture($e),Y=$e)}function se($e,Kt,_t){_t===void 0&&(Y===null?_t=n.TEXTURE0+Q-1:_t=Y);let ee=te[_t];ee===void 0&&(ee={type:void 0,texture:void 0},te[_t]=ee),(ee.type!==$e||ee.texture!==Kt)&&(Y!==_t&&(n.activeTexture(_t),Y=_t),n.bindTexture($e,Kt||be[$e]),ee.type=$e,ee.texture=Kt)}function Oe(){const $e=te[Y];$e!==void 0&&$e.type!==void 0&&(n.bindTexture($e.type,null),$e.type=void 0,$e.texture=void 0)}function Ce(){try{n.compressedTexImage2D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function Ge(){try{n.compressedTexImage3D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function at(){try{n.texSubImage2D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function Lt(){try{n.texSubImage3D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function Dt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function Jt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function Cn(){try{n.texStorage2D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function Vt(){try{n.texStorage3D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function hn(){try{n.texImage2D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function vn(){try{n.texImage3D.apply(n,arguments)}catch($e){console.error("THREE.WebGLState:",$e)}}function $t($e){ge.equals($e)===!1&&(n.scissor($e.x,$e.y,$e.z,$e.w),ge.copy($e))}function un($e){ce.equals($e)===!1&&(n.viewport($e.x,$e.y,$e.z,$e.w),ce.copy($e))}function He($e,Kt){let _t=u.get(Kt);_t===void 0&&(_t=new WeakMap,u.set(Kt,_t));let ee=_t.get($e);ee===void 0&&(ee=n.getUniformBlockIndex(Kt,$e.name),_t.set($e,ee))}function At($e,Kt){const ee=u.get(Kt).get($e);l.get(Kt)!==ee&&(n.uniformBlockBinding(Kt,ee,$e.__bindingPointIndex),l.set(Kt,ee))}function on(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(0xffffffff),n.stencilFunc(n.ALWAYS,0,0xffffffff),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},Y=null,te={},d={},h=new WeakMap,p=[],g=null,x=!1,b=null,y=null,E=null,T=null,I=null,N=null,k=null,q=new Pn(0,0,0),L=0,R=!1,P=null,F=null,z=null,V=null,W=null,ge.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Ee,disable:Me,bindFramebuffer:qe,drawBuffers:Ue,useProgram:Ye,setBlending:me,setMaterial:ht,setFlipSided:ct,setCullFace:Mt,setLineWidth:xe,setPolygonOffset:Te,setScissorTest:Ae,activeTexture:le,bindTexture:se,unbindTexture:Oe,compressedTexImage2D:Ce,compressedTexImage3D:Ge,texImage2D:hn,texImage3D:vn,updateUBOMapping:He,uniformBlockBinding:At,texStorage2D:Cn,texStorage3D:Vt,texSubImage2D:at,texSubImage3D:Lt,compressedTexSubImage2D:Dt,compressedTexSubImage3D:Jt,scissor:$t,viewport:un,reset:on}}function Q0e(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ut,c=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(le,se){return p?new OffscreenCanvas(le,se):S0("canvas")}function x(le,se,Oe){let Ce=1;const Ge=Ae(le);if((Ge.width>Oe||Ge.height>Oe)&&(Ce=Oe/Math.max(Ge.width,Ge.height)),Ce<1)if(typeof HTMLImageElement<"u"&&le instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&le instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&le instanceof ImageBitmap||typeof VideoFrame<"u"&&le instanceof VideoFrame){const at=Math.floor(Ce*Ge.width),Lt=Math.floor(Ce*Ge.height);d===void 0&&(d=g(at,Lt));const Dt=se?g(at,Lt):d;return Dt.width=at,Dt.height=Lt,Dt.getContext("2d").drawImage(le,0,0,at,Lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ge.width+"x"+Ge.height+") to ("+at+"x"+Lt+")."),Dt}else return"data"in le&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ge.width+"x"+Ge.height+")."),le;return le}function b(le){return le.generateMipmaps}function y(le){n.generateMipmap(le)}function E(le){return le.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:le.isWebGL3DRenderTarget?n.TEXTURE_3D:le.isWebGLArrayRenderTarget||le.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function T(le,se,Oe,Ce,Ge=!1){if(le!==null){if(n[le]!==void 0)return n[le];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+le+"'")}let at=se;if(se===n.RED&&(Oe===n.FLOAT&&(at=n.R32F),Oe===n.HALF_FLOAT&&(at=n.R16F),Oe===n.UNSIGNED_BYTE&&(at=n.R8)),se===n.RED_INTEGER&&(Oe===n.UNSIGNED_BYTE&&(at=n.R8UI),Oe===n.UNSIGNED_SHORT&&(at=n.R16UI),Oe===n.UNSIGNED_INT&&(at=n.R32UI),Oe===n.BYTE&&(at=n.R8I),Oe===n.SHORT&&(at=n.R16I),Oe===n.INT&&(at=n.R32I)),se===n.RG&&(Oe===n.FLOAT&&(at=n.RG32F),Oe===n.HALF_FLOAT&&(at=n.RG16F),Oe===n.UNSIGNED_BYTE&&(at=n.RG8)),se===n.RG_INTEGER&&(Oe===n.UNSIGNED_BYTE&&(at=n.RG8UI),Oe===n.UNSIGNED_SHORT&&(at=n.RG16UI),Oe===n.UNSIGNED_INT&&(at=n.RG32UI),Oe===n.BYTE&&(at=n.RG8I),Oe===n.SHORT&&(at=n.RG16I),Oe===n.INT&&(at=n.RG32I)),se===n.RGB_INTEGER&&(Oe===n.UNSIGNED_BYTE&&(at=n.RGB8UI),Oe===n.UNSIGNED_SHORT&&(at=n.RGB16UI),Oe===n.UNSIGNED_INT&&(at=n.RGB32UI),Oe===n.BYTE&&(at=n.RGB8I),Oe===n.SHORT&&(at=n.RGB16I),Oe===n.INT&&(at=n.RGB32I)),se===n.RGBA_INTEGER&&(Oe===n.UNSIGNED_BYTE&&(at=n.RGBA8UI),Oe===n.UNSIGNED_SHORT&&(at=n.RGBA16UI),Oe===n.UNSIGNED_INT&&(at=n.RGBA32UI),Oe===n.BYTE&&(at=n.RGBA8I),Oe===n.SHORT&&(at=n.RGBA16I),Oe===n.INT&&(at=n.RGBA32I)),se===n.RGB&&Oe===n.UNSIGNED_INT_5_9_9_9_REV&&(at=n.RGB9_E5),se===n.RGBA){const Lt=Ge?x0:Zr.getTransfer(Ce);Oe===n.FLOAT&&(at=n.RGBA32F),Oe===n.HALF_FLOAT&&(at=n.RGBA16F),Oe===n.UNSIGNED_BYTE&&(at=Lt===vi?n.SRGB8_ALPHA8:n.RGBA8),Oe===n.UNSIGNED_SHORT_4_4_4_4&&(at=n.RGBA4),Oe===n.UNSIGNED_SHORT_5_5_5_1&&(at=n.RGB5_A1)}return(at===n.R16F||at===n.R32F||at===n.RG16F||at===n.RG32F||at===n.RGBA16F||at===n.RGBA32F)&&e.get("EXT_color_buffer_float"),at}function I(le,se){let Oe;return le?se===null||se===of||se===Cm?Oe=n.DEPTH24_STENCIL8:se===Na?Oe=n.DEPTH32F_STENCIL8:se===cv&&(Oe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):se===null||se===of||se===Cm?Oe=n.DEPTH_COMPONENT24:se===Na?Oe=n.DEPTH_COMPONENT32F:se===cv&&(Oe=n.DEPTH_COMPONENT16),Oe}function N(le,se){return b(le)===!0||le.isFramebufferTexture&&le.minFilter!==Bo&&le.minFilter!==Ls?Math.log2(Math.max(se.width,se.height))+1:le.mipmaps!==void 0&&le.mipmaps.length>0?le.mipmaps.length:le.isCompressedTexture&&Array.isArray(le.image)?se.mipmaps.length:1}function k(le){const se=le.target;se.removeEventListener("dispose",k),L(se),se.isVideoTexture&&c.delete(se)}function q(le){const se=le.target;se.removeEventListener("dispose",q),P(se)}function L(le){const se=r.get(le);if(se.__webglInit===void 0)return;const Oe=le.source,Ce=h.get(Oe);if(Ce){const Ge=Ce[se.__cacheKey];Ge.usedTimes--,Ge.usedTimes===0&&R(le),Object.keys(Ce).length===0&&h.delete(Oe)}r.remove(le)}function R(le){const se=r.get(le);n.deleteTexture(se.__webglTexture);const Oe=le.source,Ce=h.get(Oe);delete Ce[se.__cacheKey],o.memory.textures--}function P(le){const se=r.get(le);if(le.depthTexture&&(le.depthTexture.dispose(),r.remove(le.depthTexture)),le.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++){if(Array.isArray(se.__webglFramebuffer[Ce]))for(let Ge=0;Ge<se.__webglFramebuffer[Ce].length;Ge++)n.deleteFramebuffer(se.__webglFramebuffer[Ce][Ge]);else n.deleteFramebuffer(se.__webglFramebuffer[Ce]);se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer[Ce])}else{if(Array.isArray(se.__webglFramebuffer))for(let Ce=0;Ce<se.__webglFramebuffer.length;Ce++)n.deleteFramebuffer(se.__webglFramebuffer[Ce]);else n.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Ce=0;Ce<se.__webglColorRenderbuffer.length;Ce++)se.__webglColorRenderbuffer[Ce]&&n.deleteRenderbuffer(se.__webglColorRenderbuffer[Ce]);se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(se.__webglDepthRenderbuffer)}const Oe=le.textures;for(let Ce=0,Ge=Oe.length;Ce<Ge;Ce++){const at=r.get(Oe[Ce]);at.__webglTexture&&(n.deleteTexture(at.__webglTexture),o.memory.textures--),r.remove(Oe[Ce])}r.remove(le)}let F=0;function z(){F=0}function V(){const le=F;return le>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+le+" texture units while this GPU supports only "+i.maxTextures),F+=1,le}function W(le){const se=[];return se.push(le.wrapS),se.push(le.wrapT),se.push(le.wrapR||0),se.push(le.magFilter),se.push(le.minFilter),se.push(le.anisotropy),se.push(le.internalFormat),se.push(le.format),se.push(le.type),se.push(le.generateMipmaps),se.push(le.premultiplyAlpha),se.push(le.flipY),se.push(le.unpackAlignment),se.push(le.colorSpace),se.join()}function Q(le,se){const Oe=r.get(le);if(le.isVideoTexture&&xe(le),le.isRenderTargetTexture===!1&&le.version>0&&Oe.__version!==le.version){const Ce=le.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(Oe,le,se);return}}t.bindTexture(n.TEXTURE_2D,Oe.__webglTexture,n.TEXTURE0+se)}function X(le,se){const Oe=r.get(le);if(le.version>0&&Oe.__version!==le.version){ce(Oe,le,se);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Oe.__webglTexture,n.TEXTURE0+se)}function re(le,se){const Oe=r.get(le);if(le.version>0&&Oe.__version!==le.version){ce(Oe,le,se);return}t.bindTexture(n.TEXTURE_3D,Oe.__webglTexture,n.TEXTURE0+se)}function G(le,se){const Oe=r.get(le);if(le.version>0&&Oe.__version!==le.version){ye(Oe,le,se);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Oe.__webglTexture,n.TEXTURE0+se)}const Y={[g0]:n.REPEAT,[ac]:n.CLAMP_TO_EDGE,[y0]:n.MIRRORED_REPEAT},te={[Bo]:n.NEAREST,[PP]:n.NEAREST_MIPMAP_NEAREST,[_y]:n.NEAREST_MIPMAP_LINEAR,[Ls]:n.LINEAR,[bx]:n.LINEAR_MIPMAP_NEAREST,[Nu]:n.LINEAR_MIPMAP_LINEAR},Z={[EW]:n.NEVER,[RW]:n.ALWAYS,[TW]:n.LESS,[VP]:n.LEQUAL,[MW]:n.EQUAL,[CW]:n.GEQUAL,[IW]:n.GREATER,[AW]:n.NOTEQUAL};function fe(le,se){if(se.type===Na&&e.has("OES_texture_float_linear")===!1&&(se.magFilter===Ls||se.magFilter===bx||se.magFilter===_y||se.magFilter===Nu||se.minFilter===Ls||se.minFilter===bx||se.minFilter===_y||se.minFilter===Nu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(le,n.TEXTURE_WRAP_S,Y[se.wrapS]),n.texParameteri(le,n.TEXTURE_WRAP_T,Y[se.wrapT]),(le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY)&&n.texParameteri(le,n.TEXTURE_WRAP_R,Y[se.wrapR]),n.texParameteri(le,n.TEXTURE_MAG_FILTER,te[se.magFilter]),n.texParameteri(le,n.TEXTURE_MIN_FILTER,te[se.minFilter]),se.compareFunction&&(n.texParameteri(le,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(le,n.TEXTURE_COMPARE_FUNC,Z[se.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(se.magFilter===Bo||se.minFilter!==_y&&se.minFilter!==Nu||se.type===Na&&e.has("OES_texture_float_linear")===!1)return;if(se.anisotropy>1||r.get(se).__currentAnisotropy){const Oe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(le,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(se.anisotropy,i.getMaxAnisotropy())),r.get(se).__currentAnisotropy=se.anisotropy}}}function ge(le,se){let Oe=!1;le.__webglInit===void 0&&(le.__webglInit=!0,se.addEventListener("dispose",k));const Ce=se.source;let Ge=h.get(Ce);Ge===void 0&&(Ge={},h.set(Ce,Ge));const at=W(se);if(at!==le.__cacheKey){Ge[at]===void 0&&(Ge[at]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Oe=!0),Ge[at].usedTimes++;const Lt=Ge[le.__cacheKey];Lt!==void 0&&(Ge[le.__cacheKey].usedTimes--,Lt.usedTimes===0&&R(se)),le.__cacheKey=at,le.__webglTexture=Ge[at].texture}return Oe}function ce(le,se,Oe){let Ce=n.TEXTURE_2D;(se.isDataArrayTexture||se.isCompressedArrayTexture)&&(Ce=n.TEXTURE_2D_ARRAY),se.isData3DTexture&&(Ce=n.TEXTURE_3D);const Ge=ge(le,se),at=se.source;t.bindTexture(Ce,le.__webglTexture,n.TEXTURE0+Oe);const Lt=r.get(at);if(at.version!==Lt.__version||Ge===!0){t.activeTexture(n.TEXTURE0+Oe);const Dt=Zr.getPrimaries(Zr.workingColorSpace),Jt=se.colorSpace===jd?null:Zr.getPrimaries(se.colorSpace),Cn=se.colorSpace===jd||Dt===Jt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,se.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,se.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Cn);let Vt=x(se.image,!1,i.maxTextureSize);Vt=Te(se,Vt);const hn=s.convert(se.format,se.colorSpace),vn=s.convert(se.type);let $t=T(se.internalFormat,hn,vn,se.colorSpace,se.isVideoTexture);fe(Ce,se);let un;const He=se.mipmaps,At=se.isVideoTexture!==!0,on=Lt.__version===void 0||Ge===!0,$e=at.dataReady,Kt=N(se,Vt);if(se.isDepthTexture)$t=I(se.format===Rm,se.type),on&&(At?t.texStorage2D(n.TEXTURE_2D,1,$t,Vt.width,Vt.height):t.texImage2D(n.TEXTURE_2D,0,$t,Vt.width,Vt.height,0,hn,vn,null));else if(se.isDataTexture)if(He.length>0){At&&on&&t.texStorage2D(n.TEXTURE_2D,Kt,$t,He[0].width,He[0].height);for(let _t=0,ee=He.length;_t<ee;_t++)un=He[_t],At?$e&&t.texSubImage2D(n.TEXTURE_2D,_t,0,0,un.width,un.height,hn,vn,un.data):t.texImage2D(n.TEXTURE_2D,_t,$t,un.width,un.height,0,hn,vn,un.data);se.generateMipmaps=!1}else At?(on&&t.texStorage2D(n.TEXTURE_2D,Kt,$t,Vt.width,Vt.height),$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Vt.width,Vt.height,hn,vn,Vt.data)):t.texImage2D(n.TEXTURE_2D,0,$t,Vt.width,Vt.height,0,hn,vn,Vt.data);else if(se.isCompressedTexture)if(se.isCompressedArrayTexture){At&&on&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Kt,$t,He[0].width,He[0].height,Vt.depth);for(let _t=0,ee=He.length;_t<ee;_t++)if(un=He[_t],se.format!==na)if(hn!==null)if(At){if($e)if(se.layerUpdates.size>0){const gn=QR(un.width,un.height,se.format,se.type);for(const Ft of se.layerUpdates){const Hn=un.data.subarray(Ft*gn/un.data.BYTES_PER_ELEMENT,(Ft+1)*gn/un.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_t,0,0,Ft,un.width,un.height,1,hn,Hn)}se.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_t,0,0,0,un.width,un.height,Vt.depth,hn,un.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,_t,$t,un.width,un.height,Vt.depth,0,un.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else At?$e&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,_t,0,0,0,un.width,un.height,Vt.depth,hn,vn,un.data):t.texImage3D(n.TEXTURE_2D_ARRAY,_t,$t,un.width,un.height,Vt.depth,0,hn,vn,un.data)}else{At&&on&&t.texStorage2D(n.TEXTURE_2D,Kt,$t,He[0].width,He[0].height);for(let _t=0,ee=He.length;_t<ee;_t++)un=He[_t],se.format!==na?hn!==null?At?$e&&t.compressedTexSubImage2D(n.TEXTURE_2D,_t,0,0,un.width,un.height,hn,un.data):t.compressedTexImage2D(n.TEXTURE_2D,_t,$t,un.width,un.height,0,un.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):At?$e&&t.texSubImage2D(n.TEXTURE_2D,_t,0,0,un.width,un.height,hn,vn,un.data):t.texImage2D(n.TEXTURE_2D,_t,$t,un.width,un.height,0,hn,vn,un.data)}else if(se.isDataArrayTexture)if(At){if(on&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Kt,$t,Vt.width,Vt.height,Vt.depth),$e)if(se.layerUpdates.size>0){const _t=QR(Vt.width,Vt.height,se.format,se.type);for(const ee of se.layerUpdates){const gn=Vt.data.subarray(ee*_t/Vt.data.BYTES_PER_ELEMENT,(ee+1)*_t/Vt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ee,Vt.width,Vt.height,1,hn,vn,gn)}se.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Vt.width,Vt.height,Vt.depth,hn,vn,Vt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,$t,Vt.width,Vt.height,Vt.depth,0,hn,vn,Vt.data);else if(se.isData3DTexture)At?(on&&t.texStorage3D(n.TEXTURE_3D,Kt,$t,Vt.width,Vt.height,Vt.depth),$e&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Vt.width,Vt.height,Vt.depth,hn,vn,Vt.data)):t.texImage3D(n.TEXTURE_3D,0,$t,Vt.width,Vt.height,Vt.depth,0,hn,vn,Vt.data);else if(se.isFramebufferTexture){if(on)if(At)t.texStorage2D(n.TEXTURE_2D,Kt,$t,Vt.width,Vt.height);else{let _t=Vt.width,ee=Vt.height;for(let gn=0;gn<Kt;gn++)t.texImage2D(n.TEXTURE_2D,gn,$t,_t,ee,0,hn,vn,null),_t>>=1,ee>>=1}}else if(He.length>0){if(At&&on){const _t=Ae(He[0]);t.texStorage2D(n.TEXTURE_2D,Kt,$t,_t.width,_t.height)}for(let _t=0,ee=He.length;_t<ee;_t++)un=He[_t],At?$e&&t.texSubImage2D(n.TEXTURE_2D,_t,0,0,hn,vn,un):t.texImage2D(n.TEXTURE_2D,_t,$t,hn,vn,un);se.generateMipmaps=!1}else if(At){if(on){const _t=Ae(Vt);t.texStorage2D(n.TEXTURE_2D,Kt,$t,_t.width,_t.height)}$e&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,hn,vn,Vt)}else t.texImage2D(n.TEXTURE_2D,0,$t,hn,vn,Vt);b(se)&&y(Ce),Lt.__version=at.version,se.onUpdate&&se.onUpdate(se)}le.__version=se.version}function ye(le,se,Oe){if(se.image.length!==6)return;const Ce=ge(le,se),Ge=se.source;t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture,n.TEXTURE0+Oe);const at=r.get(Ge);if(Ge.version!==at.__version||Ce===!0){t.activeTexture(n.TEXTURE0+Oe);const Lt=Zr.getPrimaries(Zr.workingColorSpace),Dt=se.colorSpace===jd?null:Zr.getPrimaries(se.colorSpace),Jt=se.colorSpace===jd||Lt===Dt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,se.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,se.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Jt);const Cn=se.isCompressedTexture||se.image[0].isCompressedTexture,Vt=se.image[0]&&se.image[0].isDataTexture,hn=[];for(let ee=0;ee<6;ee++)!Cn&&!Vt?hn[ee]=x(se.image[ee],!0,i.maxCubemapSize):hn[ee]=Vt?se.image[ee].image:se.image[ee],hn[ee]=Te(se,hn[ee]);const vn=hn[0],$t=s.convert(se.format,se.colorSpace),un=s.convert(se.type),He=T(se.internalFormat,$t,un,se.colorSpace),At=se.isVideoTexture!==!0,on=at.__version===void 0||Ce===!0,$e=Ge.dataReady;let Kt=N(se,vn);fe(n.TEXTURE_CUBE_MAP,se);let _t;if(Cn){At&&on&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Kt,He,vn.width,vn.height);for(let ee=0;ee<6;ee++){_t=hn[ee].mipmaps;for(let gn=0;gn<_t.length;gn++){const Ft=_t[gn];se.format!==na?$t!==null?At?$e&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn,0,0,Ft.width,Ft.height,$t,Ft.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn,He,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):At?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn,0,0,Ft.width,Ft.height,$t,un,Ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn,He,Ft.width,Ft.height,0,$t,un,Ft.data)}}}else{if(_t=se.mipmaps,At&&on){_t.length>0&&Kt++;const ee=Ae(hn[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Kt,He,ee.width,ee.height)}for(let ee=0;ee<6;ee++)if(Vt){At?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,0,0,hn[ee].width,hn[ee].height,$t,un,hn[ee].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,He,hn[ee].width,hn[ee].height,0,$t,un,hn[ee].data);for(let gn=0;gn<_t.length;gn++){const Hn=_t[gn].image[ee].image;At?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn+1,0,0,Hn.width,Hn.height,$t,un,Hn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn+1,He,Hn.width,Hn.height,0,$t,un,Hn.data)}}else{At?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,0,0,$t,un,hn[ee]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,He,$t,un,hn[ee]);for(let gn=0;gn<_t.length;gn++){const Ft=_t[gn];At?$e&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn+1,0,0,$t,un,Ft.image[ee]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ee,gn+1,He,$t,un,Ft.image[ee])}}}b(se)&&y(n.TEXTURE_CUBE_MAP),at.__version=Ge.version,se.onUpdate&&se.onUpdate(se)}le.__version=se.version}function be(le,se,Oe,Ce,Ge,at){const Lt=s.convert(Oe.format,Oe.colorSpace),Dt=s.convert(Oe.type),Jt=T(Oe.internalFormat,Lt,Dt,Oe.colorSpace),Cn=r.get(se),Vt=r.get(Oe);if(Vt.__renderTarget=se,!Cn.__hasExternalTextures){const hn=Math.max(1,se.width>>at),vn=Math.max(1,se.height>>at);Ge===n.TEXTURE_3D||Ge===n.TEXTURE_2D_ARRAY?t.texImage3D(Ge,at,Jt,hn,vn,se.depth,0,Lt,Dt,null):t.texImage2D(Ge,at,Jt,hn,vn,0,Lt,Dt,null)}t.bindFramebuffer(n.FRAMEBUFFER,le),Mt(se)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,Ge,Vt.__webglTexture,0,ct(se)):(Ge===n.TEXTURE_2D||Ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ce,Ge,Vt.__webglTexture,at),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(le,se,Oe){if(n.bindRenderbuffer(n.RENDERBUFFER,le),se.depthBuffer){const Ce=se.depthTexture,Ge=Ce&&Ce.isDepthTexture?Ce.type:null,at=I(se.stencilBuffer,Ge),Lt=se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Dt=ct(se);Mt(se)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Dt,at,se.width,se.height):Oe?n.renderbufferStorageMultisample(n.RENDERBUFFER,Dt,at,se.width,se.height):n.renderbufferStorage(n.RENDERBUFFER,at,se.width,se.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Lt,n.RENDERBUFFER,le)}else{const Ce=se.textures;for(let Ge=0;Ge<Ce.length;Ge++){const at=Ce[Ge],Lt=s.convert(at.format,at.colorSpace),Dt=s.convert(at.type),Jt=T(at.internalFormat,Lt,Dt,at.colorSpace),Cn=ct(se);Oe&&Mt(se)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Cn,Jt,se.width,se.height):Mt(se)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Cn,Jt,se.width,se.height):n.renderbufferStorage(n.RENDERBUFFER,Jt,se.width,se.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Me(le,se){if(se&&se.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,le),!(se.depthTexture&&se.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ce=r.get(se.depthTexture);Ce.__renderTarget=se,(!Ce.__webglTexture||se.depthTexture.image.width!==se.width||se.depthTexture.image.height!==se.height)&&(se.depthTexture.image.width=se.width,se.depthTexture.image.height=se.height,se.depthTexture.needsUpdate=!0),Q(se.depthTexture,0);const Ge=Ce.__webglTexture,at=ct(se);if(se.depthTexture.format===dm)Mt(se)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ge,0,at):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ge,0);else if(se.depthTexture.format===Rm)Mt(se)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ge,0,at):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ge,0);else throw new Error("Unknown depthTexture format")}function qe(le){const se=r.get(le),Oe=le.isWebGLCubeRenderTarget===!0;if(se.__boundDepthTexture!==le.depthTexture){const Ce=le.depthTexture;if(se.__depthDisposeCallback&&se.__depthDisposeCallback(),Ce){const Ge=()=>{delete se.__boundDepthTexture,delete se.__depthDisposeCallback,Ce.removeEventListener("dispose",Ge)};Ce.addEventListener("dispose",Ge),se.__depthDisposeCallback=Ge}se.__boundDepthTexture=Ce}if(le.depthTexture&&!se.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");Me(se.__webglFramebuffer,le)}else if(Oe){se.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,se.__webglFramebuffer[Ce]),se.__webglDepthbuffer[Ce]===void 0)se.__webglDepthbuffer[Ce]=n.createRenderbuffer(),Ee(se.__webglDepthbuffer[Ce],le,!1);else{const Ge=le.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=se.__webglDepthbuffer[Ce];n.bindRenderbuffer(n.RENDERBUFFER,at),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,at)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,se.__webglFramebuffer),se.__webglDepthbuffer===void 0)se.__webglDepthbuffer=n.createRenderbuffer(),Ee(se.__webglDepthbuffer,le,!1);else{const Ce=le.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=se.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ge),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ce,n.RENDERBUFFER,Ge)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(le,se,Oe){const Ce=r.get(le);se!==void 0&&be(Ce.__webglFramebuffer,le,le.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Oe!==void 0&&qe(le)}function Ye(le){const se=le.texture,Oe=r.get(le),Ce=r.get(se);le.addEventListener("dispose",q);const Ge=le.textures,at=le.isWebGLCubeRenderTarget===!0,Lt=Ge.length>1;if(Lt||(Ce.__webglTexture===void 0&&(Ce.__webglTexture=n.createTexture()),Ce.__version=se.version,o.memory.textures++),at){Oe.__webglFramebuffer=[];for(let Dt=0;Dt<6;Dt++)if(se.mipmaps&&se.mipmaps.length>0){Oe.__webglFramebuffer[Dt]=[];for(let Jt=0;Jt<se.mipmaps.length;Jt++)Oe.__webglFramebuffer[Dt][Jt]=n.createFramebuffer()}else Oe.__webglFramebuffer[Dt]=n.createFramebuffer()}else{if(se.mipmaps&&se.mipmaps.length>0){Oe.__webglFramebuffer=[];for(let Dt=0;Dt<se.mipmaps.length;Dt++)Oe.__webglFramebuffer[Dt]=n.createFramebuffer()}else Oe.__webglFramebuffer=n.createFramebuffer();if(Lt)for(let Dt=0,Jt=Ge.length;Dt<Jt;Dt++){const Cn=r.get(Ge[Dt]);Cn.__webglTexture===void 0&&(Cn.__webglTexture=n.createTexture(),o.memory.textures++)}if(le.samples>0&&Mt(le)===!1){Oe.__webglMultisampledFramebuffer=n.createFramebuffer(),Oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer);for(let Dt=0;Dt<Ge.length;Dt++){const Jt=Ge[Dt];Oe.__webglColorRenderbuffer[Dt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Oe.__webglColorRenderbuffer[Dt]);const Cn=s.convert(Jt.format,Jt.colorSpace),Vt=s.convert(Jt.type),hn=T(Jt.internalFormat,Cn,Vt,Jt.colorSpace,le.isXRRenderTarget===!0),vn=ct(le);n.renderbufferStorageMultisample(n.RENDERBUFFER,vn,hn,le.width,le.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Dt,n.RENDERBUFFER,Oe.__webglColorRenderbuffer[Dt])}n.bindRenderbuffer(n.RENDERBUFFER,null),le.depthBuffer&&(Oe.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(Oe.__webglDepthRenderbuffer,le,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(at){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),fe(n.TEXTURE_CUBE_MAP,se);for(let Dt=0;Dt<6;Dt++)if(se.mipmaps&&se.mipmaps.length>0)for(let Jt=0;Jt<se.mipmaps.length;Jt++)be(Oe.__webglFramebuffer[Dt][Jt],le,se,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,Jt);else be(Oe.__webglFramebuffer[Dt],le,se,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,0);b(se)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Lt){for(let Dt=0,Jt=Ge.length;Dt<Jt;Dt++){const Cn=Ge[Dt],Vt=r.get(Cn);t.bindTexture(n.TEXTURE_2D,Vt.__webglTexture),fe(n.TEXTURE_2D,Cn),be(Oe.__webglFramebuffer,le,Cn,n.COLOR_ATTACHMENT0+Dt,n.TEXTURE_2D,0),b(Cn)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let Dt=n.TEXTURE_2D;if((le.isWebGL3DRenderTarget||le.isWebGLArrayRenderTarget)&&(Dt=le.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Dt,Ce.__webglTexture),fe(Dt,se),se.mipmaps&&se.mipmaps.length>0)for(let Jt=0;Jt<se.mipmaps.length;Jt++)be(Oe.__webglFramebuffer[Jt],le,se,n.COLOR_ATTACHMENT0,Dt,Jt);else be(Oe.__webglFramebuffer,le,se,n.COLOR_ATTACHMENT0,Dt,0);b(se)&&y(Dt),t.unbindTexture()}le.depthBuffer&&qe(le)}function Ne(le){const se=le.textures;for(let Oe=0,Ce=se.length;Oe<Ce;Oe++){const Ge=se[Oe];if(b(Ge)){const at=E(le),Lt=r.get(Ge).__webglTexture;t.bindTexture(at,Lt),y(at),t.unbindTexture()}}}const ke=[],me=[];function ht(le){if(le.samples>0){if(Mt(le)===!1){const se=le.textures,Oe=le.width,Ce=le.height;let Ge=n.COLOR_BUFFER_BIT;const at=le.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Lt=r.get(le),Dt=se.length>1;if(Dt)for(let Jt=0;Jt<se.length;Jt++)t.bindFramebuffer(n.FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Lt.__webglFramebuffer);for(let Jt=0;Jt<se.length;Jt++){if(le.resolveDepthBuffer&&(le.depthBuffer&&(Ge|=n.DEPTH_BUFFER_BIT),le.stencilBuffer&&le.resolveStencilBuffer&&(Ge|=n.STENCIL_BUFFER_BIT)),Dt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Lt.__webglColorRenderbuffer[Jt]);const Cn=r.get(se[Jt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Cn,0)}n.blitFramebuffer(0,0,Oe,Ce,0,0,Oe,Ce,Ge,n.NEAREST),l===!0&&(ke.length=0,me.length=0,ke.push(n.COLOR_ATTACHMENT0+Jt),le.depthBuffer&&le.resolveDepthBuffer===!1&&(ke.push(at),me.push(at),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,me)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ke))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Dt)for(let Jt=0;Jt<se.length;Jt++){t.bindFramebuffer(n.FRAMEBUFFER,Lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.RENDERBUFFER,Lt.__webglColorRenderbuffer[Jt]);const Cn=r.get(se[Jt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Jt,n.TEXTURE_2D,Cn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Lt.__webglMultisampledFramebuffer)}else if(le.depthBuffer&&le.resolveDepthBuffer===!1&&l){const se=le.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[se])}}}function ct(le){return Math.min(i.maxSamples,le.samples)}function Mt(le){const se=r.get(le);return le.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&se.__useRenderToTexture!==!1}function xe(le){const se=o.render.frame;c.get(le)!==se&&(c.set(le,se),le.update())}function Te(le,se){const Oe=le.colorSpace,Ce=le.format,Ge=le.type;return le.isCompressedTexture===!0||le.isVideoTexture===!0||Oe!==Nm&&Oe!==jd&&(Zr.getTransfer(Oe)===vi?(Ce!==na||Ge!==Yc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Oe)),se}function Ae(le){return typeof HTMLImageElement<"u"&&le instanceof HTMLImageElement?(u.width=le.naturalWidth||le.width,u.height=le.naturalHeight||le.height):typeof VideoFrame<"u"&&le instanceof VideoFrame?(u.width=le.displayWidth,u.height=le.displayHeight):(u.width=le.width,u.height=le.height),u}this.allocateTextureUnit=V,this.resetTextureUnits=z,this.setTexture2D=Q,this.setTexture2DArray=X,this.setTexture3D=re,this.setTextureCube=G,this.rebindTextures=Ue,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=be,this.useMultisampledRTT=Mt}function B$(n,e){function t(r,i=jd){let s;const o=Zr.getTransfer(i);if(r===Yc)return n.UNSIGNED_BYTE;if(r===wT)return n.UNSIGNED_SHORT_4_4_4_4;if(r===ST)return n.UNSIGNED_SHORT_5_5_5_1;if(r===LP)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===kP)return n.BYTE;if(r===OP)return n.SHORT;if(r===cv)return n.UNSIGNED_SHORT;if(r===bT)return n.INT;if(r===of)return n.UNSIGNED_INT;if(r===Na)return n.FLOAT;if(r===Um)return n.HALF_FLOAT;if(r===DP)return n.ALPHA;if(r===FP)return n.RGB;if(r===na)return n.RGBA;if(r===qP)return n.LUMINANCE;if(r===jP)return n.LUMINANCE_ALPHA;if(r===dm)return n.DEPTH_COMPONENT;if(r===Rm)return n.DEPTH_STENCIL;if(r===ET)return n.RED;if(r===cb)return n.RED_INTEGER;if(r===BP)return n.RG;if(r===TT)return n.RG_INTEGER;if(r===MT)return n.RGBA_INTEGER;if(r===wx||r===Sx||r===Ex||r===Tx)if(o===vi)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===wx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Sx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Ex)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Tx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===wx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Sx)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Ex)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Tx)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===VE||r===WE||r===$E||r===HE)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===VE)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===WE)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===$E)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===HE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===GE||r===XE||r===KE)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===GE||r===XE)return o===vi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===KE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===QE||r===YE||r===JE||r===ZE||r===e2||r===t2||r===n2||r===r2||r===i2||r===s2||r===o2||r===a2||r===l2||r===c2)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===QE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===YE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===JE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===ZE)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===e2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===t2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===n2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===r2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===i2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===s2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===o2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===a2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===l2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===c2)return o===vi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Mx||r===u2||r===d2)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Mx)return o===vi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===u2)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===d2)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===UP||r===f2||r===h2||r===p2)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Mx)return s.COMPRESSED_RED_RGTC1_EXT;if(r===f2)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===h2)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===p2)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Cm?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const Y0e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,J0e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Z0e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new _s,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==r.depthNear||t.depthFar!==r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Zc({vertexShader:Y0e,fragmentShader:J0e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Js(new Iv(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ebe extends Hu{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,d=null,h=null,p=null,g=null;const x=new Z0e,b=t.getContextAttributes();let y=null,E=null;const T=[],I=[],N=new Ut;let k=null;const q=new ks;q.viewport=new oi;const L=new ks;L.viewport=new oi;const R=[q,L],P=new C$;let F=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let ye=T[ce];return ye===void 0&&(ye=new sS,T[ce]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(ce){let ye=T[ce];return ye===void 0&&(ye=new sS,T[ce]=ye),ye.getGripSpace()},this.getHand=function(ce){let ye=T[ce];return ye===void 0&&(ye=new sS,T[ce]=ye),ye.getHandSpace()};function V(ce){const ye=I.indexOf(ce.inputSource);if(ye===-1)return;const be=T[ye];be!==void 0&&(be.update(ce.inputSource,ce.frame,u||o),be.dispatchEvent({type:ce.type,data:ce.inputSource}))}function W(){i.removeEventListener("select",V),i.removeEventListener("selectstart",V),i.removeEventListener("selectend",V),i.removeEventListener("squeeze",V),i.removeEventListener("squeezestart",V),i.removeEventListener("squeezeend",V),i.removeEventListener("end",W),i.removeEventListener("inputsourceschange",Q);for(let ce=0;ce<T.length;ce++){const ye=I[ce];ye!==null&&(I[ce]=null,T[ce].disconnect(ye))}F=null,z=null,x.reset(),e.setRenderTarget(y),p=null,h=null,d=null,i=null,E=null,ge.stop(),r.isPresenting=!1,e.setPixelRatio(k),e.setSize(N.width,N.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){a=ce,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(ce){u=ce},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(ce){if(i=ce,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",V),i.addEventListener("selectstart",V),i.addEventListener("selectend",V),i.addEventListener("squeeze",V),i.addEventListener("squeezestart",V),i.addEventListener("squeezeend",V),i.addEventListener("end",W),i.addEventListener("inputsourceschange",Q),b.xrCompatible!==!0&&await t.makeXRCompatible(),k=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let be=null,Ee=null,Me=null;b.depth&&(Me=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,be=b.stencil?Rm:dm,Ee=b.stencil?Cm:of);const qe={colorFormat:t.RGBA8,depthFormat:Me,scaleFactor:s};d=new XRWebGLBinding(i,t),h=d.createProjectionLayer(qe),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),E=new Jc(h.textureWidth,h.textureHeight,{format:na,type:Yc,depthTexture:new LT(h.textureWidth,h.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,be),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}else{const be={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,be),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),E=new Jc(p.framebufferWidth,p.framebufferHeight,{format:na,type:Yc,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}E.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),ge.setContext(i),ge.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Q(ce){for(let ye=0;ye<ce.removed.length;ye++){const be=ce.removed[ye],Ee=I.indexOf(be);Ee>=0&&(I[Ee]=null,T[Ee].disconnect(be))}for(let ye=0;ye<ce.added.length;ye++){const be=ce.added[ye];let Ee=I.indexOf(be);if(Ee===-1){for(let qe=0;qe<T.length;qe++)if(qe>=I.length){I.push(be),Ee=qe;break}else if(I[qe]===null){I[qe]=be,Ee=qe;break}if(Ee===-1)break}const Me=T[Ee];Me&&Me.connect(be)}}const X=new Pe,re=new Pe;function G(ce,ye,be){X.setFromMatrixPosition(ye.matrixWorld),re.setFromMatrixPosition(be.matrixWorld);const Ee=X.distanceTo(re),Me=ye.projectionMatrix.elements,qe=be.projectionMatrix.elements,Ue=Me[14]/(Me[10]-1),Ye=Me[14]/(Me[10]+1),Ne=(Me[9]+1)/Me[5],ke=(Me[9]-1)/Me[5],me=(Me[8]-1)/Me[0],ht=(qe[8]+1)/qe[0],ct=Ue*me,Mt=Ue*ht,xe=Ee/(-me+ht),Te=xe*-me;if(ye.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(Te),ce.translateZ(xe),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert(),Me[10]===-1)ce.projectionMatrix.copy(ye.projectionMatrix),ce.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const Ae=Ue+xe,le=Ye+xe,se=ct-Te,Oe=Mt+(Ee-Te),Ce=Ne*Ye/le*Ae,Ge=ke*Ye/le*Ae;ce.projectionMatrix.makePerspective(se,Oe,Ce,Ge,Ae,le),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}}function Y(ce,ye){ye===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(ye.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(i===null)return;let ye=ce.near,be=ce.far;x.texture!==null&&(x.depthNear>0&&(ye=x.depthNear),x.depthFar>0&&(be=x.depthFar)),P.near=L.near=q.near=ye,P.far=L.far=q.far=be,(F!==P.near||z!==P.far)&&(i.updateRenderState({depthNear:P.near,depthFar:P.far}),F=P.near,z=P.far),q.layers.mask=ce.layers.mask|2,L.layers.mask=ce.layers.mask|4,P.layers.mask=q.layers.mask|L.layers.mask;const Ee=ce.parent,Me=P.cameras;Y(P,Ee);for(let qe=0;qe<Me.length;qe++)Y(Me[qe],Ee);Me.length===2?G(P,q,L):P.projectionMatrix.copy(q.projectionMatrix),te(ce,P,Ee)};function te(ce,ye,be){be===null?ce.matrix.copy(ye.matrixWorld):(ce.matrix.copy(be.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(ye.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(ye.projectionMatrix),ce.projectionMatrixInverse.copy(ye.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=uv*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(ce){l=ce,h!==null&&(h.fixedFoveation=ce),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=ce)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(P)};let Z=null;function fe(ce,ye){if(c=ye.getViewerPose(u||o),g=ye,c!==null){const be=c.views;p!==null&&(e.setRenderTargetFramebuffer(E,p.framebuffer),e.setRenderTarget(E));let Ee=!1;be.length!==P.cameras.length&&(P.cameras.length=0,Ee=!0);for(let Ue=0;Ue<be.length;Ue++){const Ye=be[Ue];let Ne=null;if(p!==null)Ne=p.getViewport(Ye);else{const me=d.getViewSubImage(h,Ye);Ne=me.viewport,Ue===0&&(e.setRenderTargetTextures(E,me.colorTexture,h.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(E))}let ke=R[Ue];ke===void 0&&(ke=new ks,ke.layers.enable(Ue),ke.viewport=new oi,R[Ue]=ke),ke.matrix.fromArray(Ye.transform.matrix),ke.matrix.decompose(ke.position,ke.quaternion,ke.scale),ke.projectionMatrix.fromArray(Ye.projectionMatrix),ke.projectionMatrixInverse.copy(ke.projectionMatrix).invert(),ke.viewport.set(Ne.x,Ne.y,Ne.width,Ne.height),Ue===0&&(P.matrix.copy(ke.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ee===!0&&P.cameras.push(ke)}const Me=i.enabledFeatures;if(Me&&Me.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const Ue=d.getDepthInformation(be[0]);Ue&&Ue.isValid&&Ue.texture&&x.init(e,Ue,i.renderState)}}for(let be=0;be<T.length;be++){const Ee=I[be],Me=T[be];Ee!==null&&Me!==void 0&&Me.update(Ee,ye,u||o)}Z&&Z(ce,ye),ye.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ye}),g=null}const ge=new L$;ge.setAnimationLoop(fe),this.setAnimationLoop=function(ce){Z=ce},this.dispose=function(){}}}const Lp=new Bl,tbe=new hr;function nbe(n,e){function t(b,y){b.matrixAutoUpdate===!0&&b.updateMatrix(),y.value.copy(b.matrix)}function r(b,y){y.color.getRGB(b.fogColor.value,LW(n)),y.isFog?(b.fogNear.value=y.near,b.fogFar.value=y.far):y.isFogExp2&&(b.fogDensity.value=y.density)}function i(b,y,E,T,I){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(b,y):y.isMeshToonMaterial?(s(b,y),d(b,y)):y.isMeshPhongMaterial?(s(b,y),c(b,y)):y.isMeshStandardMaterial?(s(b,y),h(b,y),y.isMeshPhysicalMaterial&&p(b,y,I)):y.isMeshMatcapMaterial?(s(b,y),g(b,y)):y.isMeshDepthMaterial?s(b,y):y.isMeshDistanceMaterial?(s(b,y),x(b,y)):y.isMeshNormalMaterial?s(b,y):y.isLineBasicMaterial?(o(b,y),y.isLineDashedMaterial&&a(b,y)):y.isPointsMaterial?l(b,y,E,T):y.isSpriteMaterial?u(b,y):y.isShadowMaterial?(b.color.value.copy(y.color),b.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(b,y){b.opacity.value=y.opacity,y.color&&b.diffuse.value.copy(y.color),y.emissive&&b.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(b.map.value=y.map,t(y.map,b.mapTransform)),y.alphaMap&&(b.alphaMap.value=y.alphaMap,t(y.alphaMap,b.alphaMapTransform)),y.bumpMap&&(b.bumpMap.value=y.bumpMap,t(y.bumpMap,b.bumpMapTransform),b.bumpScale.value=y.bumpScale,y.side===Pa&&(b.bumpScale.value*=-1)),y.normalMap&&(b.normalMap.value=y.normalMap,t(y.normalMap,b.normalMapTransform),b.normalScale.value.copy(y.normalScale),y.side===Pa&&b.normalScale.value.negate()),y.displacementMap&&(b.displacementMap.value=y.displacementMap,t(y.displacementMap,b.displacementMapTransform),b.displacementScale.value=y.displacementScale,b.displacementBias.value=y.displacementBias),y.emissiveMap&&(b.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,b.emissiveMapTransform)),y.specularMap&&(b.specularMap.value=y.specularMap,t(y.specularMap,b.specularMapTransform)),y.alphaTest>0&&(b.alphaTest.value=y.alphaTest);const E=e.get(y),T=E.envMap,I=E.envMapRotation;T&&(b.envMap.value=T,Lp.copy(I),Lp.x*=-1,Lp.y*=-1,Lp.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Lp.y*=-1,Lp.z*=-1),b.envMapRotation.value.setFromMatrix4(tbe.makeRotationFromEuler(Lp)),b.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=y.reflectivity,b.ior.value=y.ior,b.refractionRatio.value=y.refractionRatio),y.lightMap&&(b.lightMap.value=y.lightMap,b.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,b.lightMapTransform)),y.aoMap&&(b.aoMap.value=y.aoMap,b.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,b.aoMapTransform))}function o(b,y){b.diffuse.value.copy(y.color),b.opacity.value=y.opacity,y.map&&(b.map.value=y.map,t(y.map,b.mapTransform))}function a(b,y){b.dashSize.value=y.dashSize,b.totalSize.value=y.dashSize+y.gapSize,b.scale.value=y.scale}function l(b,y,E,T){b.diffuse.value.copy(y.color),b.opacity.value=y.opacity,b.size.value=y.size*E,b.scale.value=T*.5,y.map&&(b.map.value=y.map,t(y.map,b.uvTransform)),y.alphaMap&&(b.alphaMap.value=y.alphaMap,t(y.alphaMap,b.alphaMapTransform)),y.alphaTest>0&&(b.alphaTest.value=y.alphaTest)}function u(b,y){b.diffuse.value.copy(y.color),b.opacity.value=y.opacity,b.rotation.value=y.rotation,y.map&&(b.map.value=y.map,t(y.map,b.mapTransform)),y.alphaMap&&(b.alphaMap.value=y.alphaMap,t(y.alphaMap,b.alphaMapTransform)),y.alphaTest>0&&(b.alphaTest.value=y.alphaTest)}function c(b,y){b.specular.value.copy(y.specular),b.shininess.value=Math.max(y.shininess,1e-4)}function d(b,y){y.gradientMap&&(b.gradientMap.value=y.gradientMap)}function h(b,y){b.metalness.value=y.metalness,y.metalnessMap&&(b.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,b.metalnessMapTransform)),b.roughness.value=y.roughness,y.roughnessMap&&(b.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,b.roughnessMapTransform)),y.envMap&&(b.envMapIntensity.value=y.envMapIntensity)}function p(b,y,E){b.ior.value=y.ior,y.sheen>0&&(b.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),b.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(b.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,b.sheenColorMapTransform)),y.sheenRoughnessMap&&(b.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,b.sheenRoughnessMapTransform))),y.clearcoat>0&&(b.clearcoat.value=y.clearcoat,b.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(b.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,b.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(b.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Pa&&b.clearcoatNormalScale.value.negate())),y.dispersion>0&&(b.dispersion.value=y.dispersion),y.iridescence>0&&(b.iridescence.value=y.iridescence,b.iridescenceIOR.value=y.iridescenceIOR,b.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(b.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,b.iridescenceMapTransform)),y.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),y.transmission>0&&(b.transmission.value=y.transmission,b.transmissionSamplerMap.value=E.texture,b.transmissionSamplerSize.value.set(E.width,E.height),y.transmissionMap&&(b.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,b.transmissionMapTransform)),b.thickness.value=y.thickness,y.thicknessMap&&(b.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=y.attenuationDistance,b.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(b.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(b.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=y.specularIntensity,b.specularColor.value.copy(y.specularColor),y.specularColorMap&&(b.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,b.specularColorMapTransform)),y.specularIntensityMap&&(b.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,b.specularIntensityMapTransform))}function g(b,y){y.matcap&&(b.matcap.value=y.matcap)}function x(b,y){const E=e.get(y).light;b.referencePosition.value.setFromMatrixPosition(E.matrixWorld),b.nearDistance.value=E.shadow.camera.near,b.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function rbe(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(E,T){const I=T.program;r.uniformBlockBinding(E,I)}function u(E,T){let I=i[E.id];I===void 0&&(g(E),I=c(E),i[E.id]=I,E.addEventListener("dispose",b));const N=T.program;r.updateUBOMapping(E,N);const k=e.render.frame;s[E.id]!==k&&(h(E),s[E.id]=k)}function c(E){const T=d();E.__bindingPointIndex=T;const I=n.createBuffer(),N=E.__size,k=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,N,k),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,T,I),I}function d(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(E){const T=i[E.id],I=E.uniforms,N=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,T);for(let k=0,q=I.length;k<q;k++){const L=Array.isArray(I[k])?I[k]:[I[k]];for(let R=0,P=L.length;R<P;R++){const F=L[R];if(p(F,k,R,N)===!0){const z=F.__offset,V=Array.isArray(F.value)?F.value:[F.value];let W=0;for(let Q=0;Q<V.length;Q++){const X=V[Q],re=x(X);typeof X=="number"||typeof X=="boolean"?(F.__data[0]=X,n.bufferSubData(n.UNIFORM_BUFFER,z+W,F.__data)):X.isMatrix3?(F.__data[0]=X.elements[0],F.__data[1]=X.elements[1],F.__data[2]=X.elements[2],F.__data[3]=0,F.__data[4]=X.elements[3],F.__data[5]=X.elements[4],F.__data[6]=X.elements[5],F.__data[7]=0,F.__data[8]=X.elements[6],F.__data[9]=X.elements[7],F.__data[10]=X.elements[8],F.__data[11]=0):(X.toArray(F.__data,W),W+=re.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,F.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(E,T,I,N){const k=E.value,q=T+"_"+I;if(N[q]===void 0)return typeof k=="number"||typeof k=="boolean"?N[q]=k:N[q]=k.clone(),!0;{const L=N[q];if(typeof k=="number"||typeof k=="boolean"){if(L!==k)return N[q]=k,!0}else if(L.equals(k)===!1)return L.copy(k),!0}return!1}function g(E){const T=E.uniforms;let I=0;const N=16;for(let q=0,L=T.length;q<L;q++){const R=Array.isArray(T[q])?T[q]:[T[q]];for(let P=0,F=R.length;P<F;P++){const z=R[P],V=Array.isArray(z.value)?z.value:[z.value];for(let W=0,Q=V.length;W<Q;W++){const X=V[W],re=x(X),G=I%N,Y=G%re.boundary,te=G+Y;I+=Y,te!==0&&N-te<re.storage&&(I+=N-te),z.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=I,I+=re.storage}}}const k=I%N;return k>0&&(I+=N-k),E.__size=I,E.__cache={},this}function x(E){const T={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(T.boundary=4,T.storage=4):E.isVector2?(T.boundary=8,T.storage=8):E.isVector3||E.isColor?(T.boundary=16,T.storage=12):E.isVector4?(T.boundary=16,T.storage=16):E.isMatrix3?(T.boundary=48,T.storage=48):E.isMatrix4?(T.boundary=64,T.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),T}function b(E){const T=E.target;T.removeEventListener("dispose",b);const I=o.indexOf(T.__bindingPointIndex);o.splice(I,1),n.deleteBuffer(i[T.id]),delete i[T.id],delete s[T.id]}function y(){for(const E in i)n.deleteBuffer(i[E]);o=[],i={},s={}}return{bind:l,update:u,dispose:y}}class U${constructor(e={}){const{canvas:t=PW(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const g=new Uint32Array(4),x=new Int32Array(4);let b=null,y=null;const E=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Za,this.toneMapping=Du,this.toneMappingExposure=1;const I=this;let N=!1,k=0,q=0,L=null,R=-1,P=null;const F=new oi,z=new oi;let V=null;const W=new Pn(0);let Q=0,X=t.width,re=t.height,G=1,Y=null,te=null;const Z=new oi(0,0,X,re),fe=new oi(0,0,X,re);let ge=!1;const ce=new hb;let ye=!1,be=!1;this.transmissionResolutionScale=1;const Ee=new hr,Me=new hr,qe=new Pe,Ue=new oi,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ne=!1;function ke(){return L===null?G:1}let me=r;function ht(we,nt){return t.getContext(we,nt)}try{const we={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${yT}`),t.addEventListener("webglcontextlost",ee,!1),t.addEventListener("webglcontextrestored",gn,!1),t.addEventListener("webglcontextcreationerror",Ft,!1),me===null){const nt="webgl2";if(me=ht(nt,we),me===null)throw ht(nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(we){throw console.error("THREE.WebGLRenderer: "+we.message),we}let ct,Mt,xe,Te,Ae,le,se,Oe,Ce,Ge,at,Lt,Dt,Jt,Cn,Vt,hn,vn,$t,un,He,At,on,$e;function Kt(){ct=new mxe(me),ct.init(),At=new B$(me,ct),Mt=new cxe(me,ct,e,At),xe=new K0e(me,ct),Mt.reverseDepthBuffer&&h&&xe.buffers.depth.setReversed(!0),Te=new vxe(me),Ae=new D0e,le=new Q0e(me,ct,xe,Ae,Mt,At,Te),se=new dxe(I),Oe=new pxe(I),Ce=new Tye(me),on=new axe(me,Ce),Ge=new gxe(me,Ce,Te,on),at=new xxe(me,Ge,Ce,Te),$t=new _xe(me,Mt,le),Vt=new uxe(Ae),Lt=new L0e(I,se,Oe,ct,Mt,on,Vt),Dt=new nbe(I,Ae),Jt=new q0e,Cn=new W0e(ct),vn=new oxe(I,se,Oe,xe,at,p,l),hn=new G0e(I,at,Mt),$e=new rbe(me,Te,Mt,xe),un=new lxe(me,ct,Te),He=new yxe(me,ct,Te),Te.programs=Lt.programs,I.capabilities=Mt,I.extensions=ct,I.properties=Ae,I.renderLists=Jt,I.shadowMap=hn,I.state=xe,I.info=Te}Kt();const _t=new ebe(I,me);this.xr=_t,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){const we=ct.get("WEBGL_lose_context");we&&we.loseContext()},this.forceContextRestore=function(){const we=ct.get("WEBGL_lose_context");we&&we.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(we){we!==void 0&&(G=we,this.setSize(X,re,!1))},this.getSize=function(we){return we.set(X,re)},this.setSize=function(we,nt,yt=!0){if(_t.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=we,re=nt,t.width=Math.floor(we*G),t.height=Math.floor(nt*G),yt===!0&&(t.style.width=we+"px",t.style.height=nt+"px"),this.setViewport(0,0,we,nt)},this.getDrawingBufferSize=function(we){return we.set(X*G,re*G).floor()},this.setDrawingBufferSize=function(we,nt,yt){X=we,re=nt,G=yt,t.width=Math.floor(we*yt),t.height=Math.floor(nt*yt),this.setViewport(0,0,we,nt)},this.getCurrentViewport=function(we){return we.copy(F)},this.getViewport=function(we){return we.copy(Z)},this.setViewport=function(we,nt,yt,ut){we.isVector4?Z.set(we.x,we.y,we.z,we.w):Z.set(we,nt,yt,ut),xe.viewport(F.copy(Z).multiplyScalar(G).round())},this.getScissor=function(we){return we.copy(fe)},this.setScissor=function(we,nt,yt,ut){we.isVector4?fe.set(we.x,we.y,we.z,we.w):fe.set(we,nt,yt,ut),xe.scissor(z.copy(fe).multiplyScalar(G).round())},this.getScissorTest=function(){return ge},this.setScissorTest=function(we){xe.setScissorTest(ge=we)},this.setOpaqueSort=function(we){Y=we},this.setTransparentSort=function(we){te=we},this.getClearColor=function(we){return we.copy(vn.getClearColor())},this.setClearColor=function(){vn.setClearColor.apply(vn,arguments)},this.getClearAlpha=function(){return vn.getClearAlpha()},this.setClearAlpha=function(){vn.setClearAlpha.apply(vn,arguments)},this.clear=function(we=!0,nt=!0,yt=!0){let ut=0;if(we){let it=!1;if(L!==null){const Gt=L.texture.format;it=Gt===MT||Gt===TT||Gt===cb}if(it){const Gt=L.texture.type,pn=Gt===Yc||Gt===of||Gt===cv||Gt===Cm||Gt===wT||Gt===ST,_n=vn.getClearColor(),Tn=vn.getClearAlpha(),Kn=_n.r,Wn=_n.g,nn=_n.b;pn?(g[0]=Kn,g[1]=Wn,g[2]=nn,g[3]=Tn,me.clearBufferuiv(me.COLOR,0,g)):(x[0]=Kn,x[1]=Wn,x[2]=nn,x[3]=Tn,me.clearBufferiv(me.COLOR,0,x))}else ut|=me.COLOR_BUFFER_BIT}nt&&(ut|=me.DEPTH_BUFFER_BIT),yt&&(ut|=me.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),me.clear(ut)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ee,!1),t.removeEventListener("webglcontextrestored",gn,!1),t.removeEventListener("webglcontextcreationerror",Ft,!1),vn.dispose(),Jt.dispose(),Cn.dispose(),Ae.dispose(),se.dispose(),Oe.dispose(),at.dispose(),on.dispose(),$e.dispose(),Lt.dispose(),_t.dispose(),_t.removeEventListener("sessionstart",Vl),_t.removeEventListener("sessionend",Fa),Wo.stop()};function ee(we){we.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function gn(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const we=Te.autoReset,nt=hn.enabled,yt=hn.autoUpdate,ut=hn.needsUpdate,it=hn.type;Kt(),Te.autoReset=we,hn.enabled=nt,hn.autoUpdate=yt,hn.needsUpdate=ut,hn.type=it}function Ft(we){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",we.statusMessage)}function Hn(we){const nt=we.target;nt.removeEventListener("dispose",Hn),Lr(nt)}function Lr(we){ai(we),Ae.remove(we)}function ai(we){const nt=Ae.get(we).programs;nt!==void 0&&(nt.forEach(function(yt){Lt.releaseProgram(yt)}),we.isShaderMaterial&&Lt.releaseShaderCache(we))}this.renderBufferDirect=function(we,nt,yt,ut,it,Gt){nt===null&&(nt=Ye);const pn=it.isMesh&&it.matrixWorld.determinant()<0,_n=ou(we,nt,yt,ut,it);xe.setMaterial(ut,pn);let Tn=yt.index,Kn=1;if(ut.wireframe===!0){if(Tn=Ge.getWireframeAttribute(yt),Tn===void 0)return;Kn=2}const Wn=yt.drawRange,nn=yt.attributes.position;let qn=Wn.start*Kn,Zn=(Wn.start+Wn.count)*Kn;Gt!==null&&(qn=Math.max(qn,Gt.start*Kn),Zn=Math.min(Zn,(Gt.start+Gt.count)*Kn)),Tn!==null?(qn=Math.max(qn,0),Zn=Math.min(Zn,Tn.count)):nn!=null&&(qn=Math.max(qn,0),Zn=Math.min(Zn,nn.count));const Tr=Zn-qn;if(Tr<0||Tr===1/0)return;on.setup(it,ut,_n,yt,Tn);let Mr,yr=un;if(Tn!==null&&(Mr=Ce.get(Tn),yr=He,yr.setIndex(Mr)),it.isMesh)ut.wireframe===!0?(xe.setLineWidth(ut.wireframeLinewidth*ke()),yr.setMode(me.LINES)):yr.setMode(me.TRIANGLES);else if(it.isLine){let kn=ut.linewidth;kn===void 0&&(kn=1),xe.setLineWidth(kn*ke()),it.isLineSegments?yr.setMode(me.LINES):it.isLineLoop?yr.setMode(me.LINE_LOOP):yr.setMode(me.LINE_STRIP)}else it.isPoints?yr.setMode(me.POINTS):it.isSprite&&yr.setMode(me.TRIANGLES);if(it.isBatchedMesh)if(it._multiDrawInstances!==null)yr.renderMultiDrawInstances(it._multiDrawStarts,it._multiDrawCounts,it._multiDrawCount,it._multiDrawInstances);else if(ct.get("WEBGL_multi_draw"))yr.renderMultiDraw(it._multiDrawStarts,it._multiDrawCounts,it._multiDrawCount);else{const kn=it._multiDrawStarts,Dr=it._multiDrawCounts,ar=it._multiDrawCount,ss=Tn?Ce.get(Tn).bytesPerElement:1,fl=Ae.get(ut).currentProgram.getUniforms();for(let ds=0;ds<ar;ds++)fl.setValue(me,"_gl_DrawID",ds),yr.render(kn[ds]/ss,Dr[ds])}else if(it.isInstancedMesh)yr.renderInstances(qn,Tr,it.count);else if(yt.isInstancedBufferGeometry){const kn=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Dr=Math.min(yt.instanceCount,kn);yr.renderInstances(qn,Tr,Dr)}else yr.render(qn,Tr)};function gr(we,nt,yt){we.transparent===!0&&we.side===Au&&we.forceSinglePass===!1?(we.side=Pa,we.needsUpdate=!0,Wl(we,nt,yt),we.side=rf,we.needsUpdate=!0,Wl(we,nt,yt),we.side=Au):Wl(we,nt,yt)}this.compile=function(we,nt,yt=null){yt===null&&(yt=we),y=Cn.get(yt),y.init(nt),T.push(y),yt.traverseVisible(function(it){it.isLight&&it.layers.test(nt.layers)&&(y.pushLight(it),it.castShadow&&y.pushShadow(it))}),we!==yt&&we.traverseVisible(function(it){it.isLight&&it.layers.test(nt.layers)&&(y.pushLight(it),it.castShadow&&y.pushShadow(it))}),y.setupLights();const ut=new Set;return we.traverse(function(it){if(!(it.isMesh||it.isPoints||it.isLine||it.isSprite))return;const Gt=it.material;if(Gt)if(Array.isArray(Gt))for(let pn=0;pn<Gt.length;pn++){const _n=Gt[pn];gr(_n,yt,it),ut.add(_n)}else gr(Gt,yt,it),ut.add(Gt)}),T.pop(),y=null,ut},this.compileAsync=function(we,nt,yt=null){const ut=this.compile(we,nt,yt);return new Promise(it=>{function Gt(){if(ut.forEach(function(pn){Ae.get(pn).currentProgram.isReady()&&ut.delete(pn)}),ut.size===0){it(we);return}setTimeout(Gt,10)}ct.get("KHR_parallel_shader_compile")!==null?Gt():setTimeout(Gt,10)})};let hi=null;function ui(we){hi&&hi(we)}function Vl(){Wo.stop()}function Fa(){Wo.start()}const Wo=new L$;Wo.setAnimationLoop(ui),typeof self<"u"&&Wo.setContext(self),this.setAnimationLoop=function(we){hi=we,_t.setAnimationLoop(we),we===null?Wo.stop():Wo.start()},_t.addEventListener("sessionstart",Vl),_t.addEventListener("sessionend",Fa),this.render=function(we,nt){if(nt!==void 0&&nt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),nt.parent===null&&nt.matrixWorldAutoUpdate===!0&&nt.updateMatrixWorld(),_t.enabled===!0&&_t.isPresenting===!0&&(_t.cameraAutoUpdate===!0&&_t.updateCamera(nt),nt=_t.getCamera()),we.isScene===!0&&we.onBeforeRender(I,we,nt,L),y=Cn.get(we,T.length),y.init(nt),T.push(y),Me.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),ce.setFromProjectionMatrix(Me),be=this.localClippingEnabled,ye=Vt.init(this.clippingPlanes,be),b=Jt.get(we,E.length),b.init(),E.push(b),_t.enabled===!0&&_t.isPresenting===!0){const Gt=I.xr.getDepthSensingMesh();Gt!==null&&To(Gt,nt,-1/0,I.sortObjects)}To(we,nt,0,I.sortObjects),b.finish(),I.sortObjects===!0&&b.sort(Y,te),Ne=_t.enabled===!1||_t.isPresenting===!1||_t.hasDepthSensing()===!1,Ne&&vn.addToRenderList(b,we),this.info.render.frame++,ye===!0&&Vt.beginShadows();const yt=y.state.shadowsArray;hn.render(yt,we,nt),ye===!0&&Vt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ut=b.opaque,it=b.transmissive;if(y.setupLights(),nt.isArrayCamera){const Gt=nt.cameras;if(it.length>0)for(let pn=0,_n=Gt.length;pn<_n;pn++){const Tn=Gt[pn];Io(ut,it,we,Tn)}Ne&&vn.render(we);for(let pn=0,_n=Gt.length;pn<_n;pn++){const Tn=Gt[pn];Mo(b,we,Tn,Tn.viewport)}}else it.length>0&&Io(ut,it,we,nt),Ne&&vn.render(we),Mo(b,we,nt);L!==null&&q===0&&(le.updateMultisampleRenderTarget(L),le.updateRenderTargetMipmap(L)),we.isScene===!0&&we.onAfterRender(I,we,nt),on.resetDefaultState(),R=-1,P=null,T.pop(),T.length>0?(y=T[T.length-1],ye===!0&&Vt.setGlobalState(I.clippingPlanes,y.state.camera)):y=null,E.pop(),E.length>0?b=E[E.length-1]:b=null};function To(we,nt,yt,ut){if(we.visible===!1)return;if(we.layers.test(nt.layers)){if(we.isGroup)yt=we.renderOrder;else if(we.isLOD)we.autoUpdate===!0&&we.update(nt);else if(we.isLight)y.pushLight(we),we.castShadow&&y.pushShadow(we);else if(we.isSprite){if(!we.frustumCulled||ce.intersectsSprite(we)){ut&&Ue.setFromMatrixPosition(we.matrixWorld).applyMatrix4(Me);const pn=at.update(we),_n=we.material;_n.visible&&b.push(we,pn,_n,yt,Ue.z,null)}}else if((we.isMesh||we.isLine||we.isPoints)&&(!we.frustumCulled||ce.intersectsObject(we))){const pn=at.update(we),_n=we.material;if(ut&&(we.boundingSphere!==void 0?(we.boundingSphere===null&&we.computeBoundingSphere(),Ue.copy(we.boundingSphere.center)):(pn.boundingSphere===null&&pn.computeBoundingSphere(),Ue.copy(pn.boundingSphere.center)),Ue.applyMatrix4(we.matrixWorld).applyMatrix4(Me)),Array.isArray(_n)){const Tn=pn.groups;for(let Kn=0,Wn=Tn.length;Kn<Wn;Kn++){const nn=Tn[Kn],qn=_n[nn.materialIndex];qn&&qn.visible&&b.push(we,pn,qn,yt,Ue.z,nn)}}else _n.visible&&b.push(we,pn,_n,yt,Ue.z,null)}}const Gt=we.children;for(let pn=0,_n=Gt.length;pn<_n;pn++)To(Gt[pn],nt,yt,ut)}function Mo(we,nt,yt,ut){const it=we.opaque,Gt=we.transmissive,pn=we.transparent;y.setupLightsView(yt),ye===!0&&Vt.setGlobalState(I.clippingPlanes,yt),ut&&xe.viewport(F.copy(ut)),it.length>0&&no(it,nt,yt),Gt.length>0&&no(Gt,nt,yt),pn.length>0&&no(pn,nt,yt),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function Io(we,nt,yt,ut){if((yt.isScene===!0?yt.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[ut.id]===void 0&&(y.state.transmissionRenderTarget[ut.id]=new Jc(1,1,{generateMipmaps:!0,type:ct.has("EXT_color_buffer_half_float")||ct.has("EXT_color_buffer_float")?Um:Yc,minFilter:Nu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zr.workingColorSpace}));const Gt=y.state.transmissionRenderTarget[ut.id],pn=ut.viewport||F;Gt.setSize(pn.z*I.transmissionResolutionScale,pn.w*I.transmissionResolutionScale);const _n=I.getRenderTarget();I.setRenderTarget(Gt),I.getClearColor(W),Q=I.getClearAlpha(),Q<1&&I.setClearColor(0xffffff,.5),I.clear(),Ne&&vn.render(yt);const Tn=I.toneMapping;I.toneMapping=Du;const Kn=ut.viewport;if(ut.viewport!==void 0&&(ut.viewport=void 0),y.setupLightsView(ut),ye===!0&&Vt.setGlobalState(I.clippingPlanes,ut),no(we,yt,ut),le.updateMultisampleRenderTarget(Gt),le.updateRenderTargetMipmap(Gt),ct.has("WEBGL_multisampled_render_to_texture")===!1){let Wn=!1;for(let nn=0,qn=nt.length;nn<qn;nn++){const Zn=nt[nn],Tr=Zn.object,Mr=Zn.geometry,yr=Zn.material,kn=Zn.group;if(yr.side===Au&&Tr.layers.test(ut.layers)){const Dr=yr.side;yr.side=Pa,yr.needsUpdate=!0,su(Tr,yt,ut,Mr,yr,kn),yr.side=Dr,yr.needsUpdate=!0,Wn=!0}}Wn===!0&&(le.updateMultisampleRenderTarget(Gt),le.updateRenderTargetMipmap(Gt))}I.setRenderTarget(_n),I.setClearColor(W,Q),Kn!==void 0&&(ut.viewport=Kn),I.toneMapping=Tn}function no(we,nt,yt){const ut=nt.isScene===!0?nt.overrideMaterial:null;for(let it=0,Gt=we.length;it<Gt;it++){const pn=we[it],_n=pn.object,Tn=pn.geometry,Kn=ut===null?pn.material:ut,Wn=pn.group;_n.layers.test(yt.layers)&&su(_n,nt,yt,Tn,Kn,Wn)}}function su(we,nt,yt,ut,it,Gt){we.onBeforeRender(I,nt,yt,ut,it,Gt),we.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,we.matrixWorld),we.normalMatrix.getNormalMatrix(we.modelViewMatrix),it.onBeforeRender(I,nt,yt,ut,we,Gt),it.transparent===!0&&it.side===Au&&it.forceSinglePass===!1?(it.side=Pa,it.needsUpdate=!0,I.renderBufferDirect(yt,nt,ut,it,we,Gt),it.side=rf,it.needsUpdate=!0,I.renderBufferDirect(yt,nt,ut,it,we,Gt),it.side=Au):I.renderBufferDirect(yt,nt,ut,it,we,Gt),we.onAfterRender(I,nt,yt,ut,it,Gt)}function Wl(we,nt,yt){nt.isScene!==!0&&(nt=Ye);const ut=Ae.get(we),it=y.state.lights,Gt=y.state.shadowsArray,pn=it.state.version,_n=Lt.getParameters(we,it.state,Gt,nt,yt),Tn=Lt.getProgramCacheKey(_n);let Kn=ut.programs;ut.environment=we.isMeshStandardMaterial?nt.environment:null,ut.fog=nt.fog,ut.envMap=(we.isMeshStandardMaterial?Oe:se).get(we.envMap||ut.environment),ut.envMapRotation=ut.environment!==null&&we.envMap===null?nt.environmentRotation:we.envMapRotation,Kn===void 0&&(we.addEventListener("dispose",Hn),Kn=new Map,ut.programs=Kn);let Wn=Kn.get(Tn);if(Wn!==void 0){if(ut.currentProgram===Wn&&ut.lightsStateVersion===pn)return Ao(we,_n),Wn}else _n.uniforms=Lt.getUniforms(we),we.onBeforeCompile(_n,I),Wn=Lt.acquireProgram(_n,Tn),Kn.set(Tn,Wn),ut.uniforms=_n.uniforms;const nn=ut.uniforms;return(!we.isShaderMaterial&&!we.isRawShaderMaterial||we.clipping===!0)&&(nn.clippingPlanes=Vt.uniform),Ao(we,_n),ut.needsLights=lu(we),ut.lightsStateVersion=pn,ut.needsLights&&(nn.ambientLightColor.value=it.state.ambient,nn.lightProbe.value=it.state.probe,nn.directionalLights.value=it.state.directional,nn.directionalLightShadows.value=it.state.directionalShadow,nn.spotLights.value=it.state.spot,nn.spotLightShadows.value=it.state.spotShadow,nn.rectAreaLights.value=it.state.rectArea,nn.ltc_1.value=it.state.rectAreaLTC1,nn.ltc_2.value=it.state.rectAreaLTC2,nn.pointLights.value=it.state.point,nn.pointLightShadows.value=it.state.pointShadow,nn.hemisphereLights.value=it.state.hemi,nn.directionalShadowMap.value=it.state.directionalShadowMap,nn.directionalShadowMatrix.value=it.state.directionalShadowMatrix,nn.spotShadowMap.value=it.state.spotShadowMap,nn.spotLightMatrix.value=it.state.spotLightMatrix,nn.spotLightMap.value=it.state.spotLightMap,nn.pointShadowMap.value=it.state.pointShadowMap,nn.pointShadowMatrix.value=it.state.pointShadowMatrix),ut.currentProgram=Wn,ut.uniformsList=null,Wn}function hc(we){if(we.uniformsList===null){const nt=we.currentProgram.getUniforms();we.uniformsList=oS.seqWithValue(nt.seq,we.uniforms)}return we.uniformsList}function Ao(we,nt){const yt=Ae.get(we);yt.outputColorSpace=nt.outputColorSpace,yt.batching=nt.batching,yt.batchingColor=nt.batchingColor,yt.instancing=nt.instancing,yt.instancingColor=nt.instancingColor,yt.instancingMorph=nt.instancingMorph,yt.skinning=nt.skinning,yt.morphTargets=nt.morphTargets,yt.morphNormals=nt.morphNormals,yt.morphColors=nt.morphColors,yt.morphTargetsCount=nt.morphTargetsCount,yt.numClippingPlanes=nt.numClippingPlanes,yt.numIntersection=nt.numClipIntersection,yt.vertexAlphas=nt.vertexAlphas,yt.vertexTangents=nt.vertexTangents,yt.toneMapping=nt.toneMapping}function ou(we,nt,yt,ut,it){nt.isScene!==!0&&(nt=Ye),le.resetTextureUnits();const Gt=nt.fog,pn=ut.isMeshStandardMaterial?nt.environment:null,_n=L===null?I.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Nm,Tn=(ut.isMeshStandardMaterial?Oe:se).get(ut.envMap||pn),Kn=ut.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,Wn=!!yt.attributes.tangent&&(!!ut.normalMap||ut.anisotropy>0),nn=!!yt.morphAttributes.position,qn=!!yt.morphAttributes.normal,Zn=!!yt.morphAttributes.color;let Tr=Du;ut.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Tr=I.toneMapping);const Mr=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,yr=Mr!==void 0?Mr.length:0,kn=Ae.get(ut),Dr=y.state.lights;if(ye===!0&&(be===!0||we!==P)){const As=we===P&&ut.id===R;Vt.setState(ut,we,As)}let ar=!1;ut.version===kn.__version?(kn.needsLights&&kn.lightsStateVersion!==Dr.state.version||kn.outputColorSpace!==_n||it.isBatchedMesh&&kn.batching===!1||!it.isBatchedMesh&&kn.batching===!0||it.isBatchedMesh&&kn.batchingColor===!0&&it.colorTexture===null||it.isBatchedMesh&&kn.batchingColor===!1&&it.colorTexture!==null||it.isInstancedMesh&&kn.instancing===!1||!it.isInstancedMesh&&kn.instancing===!0||it.isSkinnedMesh&&kn.skinning===!1||!it.isSkinnedMesh&&kn.skinning===!0||it.isInstancedMesh&&kn.instancingColor===!0&&it.instanceColor===null||it.isInstancedMesh&&kn.instancingColor===!1&&it.instanceColor!==null||it.isInstancedMesh&&kn.instancingMorph===!0&&it.morphTexture===null||it.isInstancedMesh&&kn.instancingMorph===!1&&it.morphTexture!==null||kn.envMap!==Tn||ut.fog===!0&&kn.fog!==Gt||kn.numClippingPlanes!==void 0&&(kn.numClippingPlanes!==Vt.numPlanes||kn.numIntersection!==Vt.numIntersection)||kn.vertexAlphas!==Kn||kn.vertexTangents!==Wn||kn.morphTargets!==nn||kn.morphNormals!==qn||kn.morphColors!==Zn||kn.toneMapping!==Tr||kn.morphTargetsCount!==yr)&&(ar=!0):(ar=!0,kn.__version=ut.version);let ss=kn.currentProgram;ar===!0&&(ss=Wl(ut,nt,it));let fl=!1,ds=!1,qa=!1;const Fr=ss.getUniforms(),Bs=kn.uniforms;if(xe.useProgram(ss.program)&&(fl=!0,ds=!0,qa=!0),ut.id!==R&&(R=ut.id,ds=!0),fl||P!==we){xe.buffers.depth.getReversed()?(Ee.copy(we.projectionMatrix),Xpe(Ee),Kpe(Ee),Fr.setValue(me,"projectionMatrix",Ee)):Fr.setValue(me,"projectionMatrix",we.projectionMatrix),Fr.setValue(me,"viewMatrix",we.matrixWorldInverse);const Vi=Fr.map.cameraPosition;Vi!==void 0&&Vi.setValue(me,qe.setFromMatrixPosition(we.matrixWorld)),Mt.logarithmicDepthBuffer&&Fr.setValue(me,"logDepthBufFC",2/(Math.log(we.far+1)/Math.LN2)),(ut.isMeshPhongMaterial||ut.isMeshToonMaterial||ut.isMeshLambertMaterial||ut.isMeshBasicMaterial||ut.isMeshStandardMaterial||ut.isShaderMaterial)&&Fr.setValue(me,"isOrthographic",we.isOrthographicCamera===!0),P!==we&&(P=we,ds=!0,qa=!0)}if(it.isSkinnedMesh){Fr.setOptional(me,it,"bindMatrix"),Fr.setOptional(me,it,"bindMatrixInverse");const As=it.skeleton;As&&(As.boneTexture===null&&As.computeBoneTexture(),Fr.setValue(me,"boneTexture",As.boneTexture,le))}it.isBatchedMesh&&(Fr.setOptional(me,it,"batchingTexture"),Fr.setValue(me,"batchingTexture",it._matricesTexture,le),Fr.setOptional(me,it,"batchingIdTexture"),Fr.setValue(me,"batchingIdTexture",it._indirectTexture,le),Fr.setOptional(me,it,"batchingColorTexture"),it._colorsTexture!==null&&Fr.setValue(me,"batchingColorTexture",it._colorsTexture,le));const fs=yt.morphAttributes;if((fs.position!==void 0||fs.normal!==void 0||fs.color!==void 0)&&$t.update(it,yt,ss),(ds||kn.receiveShadow!==it.receiveShadow)&&(kn.receiveShadow=it.receiveShadow,Fr.setValue(me,"receiveShadow",it.receiveShadow)),ut.isMeshGouraudMaterial&&ut.envMap!==null&&(Bs.envMap.value=Tn,Bs.flipEnvMap.value=Tn.isCubeTexture&&Tn.isRenderTargetTexture===!1?-1:1),ut.isMeshStandardMaterial&&ut.envMap===null&&nt.environment!==null&&(Bs.envMapIntensity.value=nt.environmentIntensity),ds&&(Fr.setValue(me,"toneMappingExposure",I.toneMappingExposure),kn.needsLights&&au(Bs,qa),Gt&&ut.fog===!0&&Dt.refreshFogUniforms(Bs,Gt),Dt.refreshMaterialUniforms(Bs,ut,G,re,y.state.transmissionRenderTarget[we.id]),oS.upload(me,hc(kn),Bs,le)),ut.isShaderMaterial&&ut.uniformsNeedUpdate===!0&&(oS.upload(me,hc(kn),Bs,le),ut.uniformsNeedUpdate=!1),ut.isSpriteMaterial&&Fr.setValue(me,"center",it.center),Fr.setValue(me,"modelViewMatrix",it.modelViewMatrix),Fr.setValue(me,"normalMatrix",it.normalMatrix),Fr.setValue(me,"modelMatrix",it.matrixWorld),ut.isShaderMaterial||ut.isRawShaderMaterial){const As=ut.uniformsGroups;for(let Vi=0,Vr=As.length;Vi<Vr;Vi++){const mo=As[Vi];$e.update(mo,ss),$e.bind(mo,ss)}}return ss}function au(we,nt){we.ambientLightColor.needsUpdate=nt,we.lightProbe.needsUpdate=nt,we.directionalLights.needsUpdate=nt,we.directionalLightShadows.needsUpdate=nt,we.pointLights.needsUpdate=nt,we.pointLightShadows.needsUpdate=nt,we.spotLights.needsUpdate=nt,we.spotLightShadows.needsUpdate=nt,we.rectAreaLights.needsUpdate=nt,we.hemisphereLights.needsUpdate=nt}function lu(we){return we.isMeshLambertMaterial||we.isMeshToonMaterial||we.isMeshPhongMaterial||we.isMeshStandardMaterial||we.isShadowMaterial||we.isShaderMaterial&&we.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(we,nt,yt){Ae.get(we.texture).__webglTexture=nt,Ae.get(we.depthTexture).__webglTexture=yt;const ut=Ae.get(we);ut.__hasExternalTextures=!0,ut.__autoAllocateDepthBuffer=yt===void 0,ut.__autoAllocateDepthBuffer||ct.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ut.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(we,nt){const yt=Ae.get(we);yt.__webglFramebuffer=nt,yt.__useDefaultFramebuffer=nt===void 0};const cu=me.createFramebuffer();this.setRenderTarget=function(we,nt=0,yt=0){L=we,k=nt,q=yt;let ut=!0,it=null,Gt=!1,pn=!1;if(we){const Tn=Ae.get(we);if(Tn.__useDefaultFramebuffer!==void 0)xe.bindFramebuffer(me.FRAMEBUFFER,null),ut=!1;else if(Tn.__webglFramebuffer===void 0)le.setupRenderTarget(we);else if(Tn.__hasExternalTextures)le.rebindTextures(we,Ae.get(we.texture).__webglTexture,Ae.get(we.depthTexture).__webglTexture);else if(we.depthBuffer){const nn=we.depthTexture;if(Tn.__boundDepthTexture!==nn){if(nn!==null&&Ae.has(nn)&&(we.width!==nn.image.width||we.height!==nn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");le.setupDepthRenderbuffer(we)}}const Kn=we.texture;(Kn.isData3DTexture||Kn.isDataArrayTexture||Kn.isCompressedArrayTexture)&&(pn=!0);const Wn=Ae.get(we).__webglFramebuffer;we.isWebGLCubeRenderTarget?(Array.isArray(Wn[nt])?it=Wn[nt][yt]:it=Wn[nt],Gt=!0):we.samples>0&&le.useMultisampledRTT(we)===!1?it=Ae.get(we).__webglMultisampledFramebuffer:Array.isArray(Wn)?it=Wn[yt]:it=Wn,F.copy(we.viewport),z.copy(we.scissor),V=we.scissorTest}else F.copy(Z).multiplyScalar(G).floor(),z.copy(fe).multiplyScalar(G).floor(),V=ge;if(yt!==0&&(it=cu),xe.bindFramebuffer(me.FRAMEBUFFER,it)&&ut&&xe.drawBuffers(we,it),xe.viewport(F),xe.scissor(z),xe.setScissorTest(V),Gt){const Tn=Ae.get(we.texture);me.framebufferTexture2D(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_CUBE_MAP_POSITIVE_X+nt,Tn.__webglTexture,yt)}else if(pn){const Tn=Ae.get(we.texture),Kn=nt;me.framebufferTextureLayer(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,Tn.__webglTexture,yt,Kn)}else if(we!==null&&yt!==0){const Tn=Ae.get(we.texture);me.framebufferTexture2D(me.FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,Tn.__webglTexture,yt)}R=-1},this.readRenderTargetPixels=function(we,nt,yt,ut,it,Gt,pn){if(!(we&&we.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let _n=Ae.get(we).__webglFramebuffer;if(we.isWebGLCubeRenderTarget&&pn!==void 0&&(_n=_n[pn]),_n){xe.bindFramebuffer(me.FRAMEBUFFER,_n);try{const Tn=we.texture,Kn=Tn.format,Wn=Tn.type;if(!Mt.textureFormatReadable(Kn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Mt.textureTypeReadable(Wn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}nt>=0&&nt<=we.width-ut&&yt>=0&&yt<=we.height-it&&me.readPixels(nt,yt,ut,it,At.convert(Kn),At.convert(Wn),Gt)}finally{const Tn=L!==null?Ae.get(L).__webglFramebuffer:null;xe.bindFramebuffer(me.FRAMEBUFFER,Tn)}}},this.readRenderTargetPixelsAsync=async function(we,nt,yt,ut,it,Gt,pn){if(!(we&&we.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _n=Ae.get(we).__webglFramebuffer;if(we.isWebGLCubeRenderTarget&&pn!==void 0&&(_n=_n[pn]),_n){const Tn=we.texture,Kn=Tn.format,Wn=Tn.type;if(!Mt.textureFormatReadable(Kn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Mt.textureTypeReadable(Wn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(nt>=0&&nt<=we.width-ut&&yt>=0&&yt<=we.height-it){xe.bindFramebuffer(me.FRAMEBUFFER,_n);const nn=me.createBuffer();me.bindBuffer(me.PIXEL_PACK_BUFFER,nn),me.bufferData(me.PIXEL_PACK_BUFFER,Gt.byteLength,me.STREAM_READ),me.readPixels(nt,yt,ut,it,At.convert(Kn),At.convert(Wn),0);const qn=L!==null?Ae.get(L).__webglFramebuffer:null;xe.bindFramebuffer(me.FRAMEBUFFER,qn);const Zn=me.fenceSync(me.SYNC_GPU_COMMANDS_COMPLETE,0);return me.flush(),await Gpe(me,Zn,4),me.bindBuffer(me.PIXEL_PACK_BUFFER,nn),me.getBufferSubData(me.PIXEL_PACK_BUFFER,0,Gt),me.deleteBuffer(nn),me.deleteSync(Zn),Gt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(we,nt=null,yt=0){we.isTexture!==!0&&(ly("WebGLRenderer: copyFramebufferToTexture function signature has changed."),nt=arguments[0]||null,we=arguments[1]);const ut=Math.pow(2,-yt),it=Math.floor(we.image.width*ut),Gt=Math.floor(we.image.height*ut),pn=nt!==null?nt.x:0,_n=nt!==null?nt.y:0;le.setTexture2D(we,0),me.copyTexSubImage2D(me.TEXTURE_2D,yt,0,0,pn,_n,it,Gt),xe.unbindTexture()};const uu=me.createFramebuffer(),du=me.createFramebuffer();this.copyTextureToTexture=function(we,nt,yt=null,ut=null,it=0,Gt=null){we.isTexture!==!0&&(ly("WebGLRenderer: copyTextureToTexture function signature has changed."),ut=arguments[0]||null,we=arguments[1],nt=arguments[2],Gt=arguments[3]||0,yt=null),Gt===null&&(it!==0?(ly("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Gt=it,it=0):Gt=0);let pn,_n,Tn,Kn,Wn,nn,qn,Zn,Tr;const Mr=we.isCompressedTexture?we.mipmaps[Gt]:we.image;if(yt!==null)pn=yt.max.x-yt.min.x,_n=yt.max.y-yt.min.y,Tn=yt.isBox3?yt.max.z-yt.min.z:1,Kn=yt.min.x,Wn=yt.min.y,nn=yt.isBox3?yt.min.z:0;else{const fs=Math.pow(2,-it);pn=Math.floor(Mr.width*fs),_n=Math.floor(Mr.height*fs),we.isDataArrayTexture?Tn=Mr.depth:we.isData3DTexture?Tn=Math.floor(Mr.depth*fs):Tn=1,Kn=0,Wn=0,nn=0}ut!==null?(qn=ut.x,Zn=ut.y,Tr=ut.z):(qn=0,Zn=0,Tr=0);const yr=At.convert(nt.format),kn=At.convert(nt.type);let Dr;nt.isData3DTexture?(le.setTexture3D(nt,0),Dr=me.TEXTURE_3D):nt.isDataArrayTexture||nt.isCompressedArrayTexture?(le.setTexture2DArray(nt,0),Dr=me.TEXTURE_2D_ARRAY):(le.setTexture2D(nt,0),Dr=me.TEXTURE_2D),me.pixelStorei(me.UNPACK_FLIP_Y_WEBGL,nt.flipY),me.pixelStorei(me.UNPACK_PREMULTIPLY_ALPHA_WEBGL,nt.premultiplyAlpha),me.pixelStorei(me.UNPACK_ALIGNMENT,nt.unpackAlignment);const ar=me.getParameter(me.UNPACK_ROW_LENGTH),ss=me.getParameter(me.UNPACK_IMAGE_HEIGHT),fl=me.getParameter(me.UNPACK_SKIP_PIXELS),ds=me.getParameter(me.UNPACK_SKIP_ROWS),qa=me.getParameter(me.UNPACK_SKIP_IMAGES);me.pixelStorei(me.UNPACK_ROW_LENGTH,Mr.width),me.pixelStorei(me.UNPACK_IMAGE_HEIGHT,Mr.height),me.pixelStorei(me.UNPACK_SKIP_PIXELS,Kn),me.pixelStorei(me.UNPACK_SKIP_ROWS,Wn),me.pixelStorei(me.UNPACK_SKIP_IMAGES,nn);const Fr=we.isDataArrayTexture||we.isData3DTexture,Bs=nt.isDataArrayTexture||nt.isData3DTexture;if(we.isDepthTexture){const fs=Ae.get(we),As=Ae.get(nt),Vi=Ae.get(fs.__renderTarget),Vr=Ae.get(As.__renderTarget);xe.bindFramebuffer(me.READ_FRAMEBUFFER,Vi.__webglFramebuffer),xe.bindFramebuffer(me.DRAW_FRAMEBUFFER,Vr.__webglFramebuffer);for(let mo=0;mo<Tn;mo++)Fr&&(me.framebufferTextureLayer(me.READ_FRAMEBUFFER,me.COLOR_ATTACHMENT0,Ae.get(we).__webglTexture,it,nn+mo),me.framebufferTextureLayer(me.DRAW_FRAMEBUFFER,me.COLOR_ATTACHMENT0,Ae.get(nt).__webglTexture,Gt,Tr+mo)),me.blitFramebuffer(Kn,Wn,pn,_n,qn,Zn,pn,_n,me.DEPTH_BUFFER_BIT,me.NEAREST);xe.bindFramebuffer(me.READ_FRAMEBUFFER,null),xe.bindFramebuffer(me.DRAW_FRAMEBUFFER,null)}else if(it!==0||we.isRenderTargetTexture||Ae.has(we)){const fs=Ae.get(we),As=Ae.get(nt);xe.bindFramebuffer(me.READ_FRAMEBUFFER,uu),xe.bindFramebuffer(me.DRAW_FRAMEBUFFER,du);for(let Vi=0;Vi<Tn;Vi++)Fr?me.framebufferTextureLayer(me.READ_FRAMEBUFFER,me.COLOR_ATTACHMENT0,fs.__webglTexture,it,nn+Vi):me.framebufferTexture2D(me.READ_FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,fs.__webglTexture,it),Bs?me.framebufferTextureLayer(me.DRAW_FRAMEBUFFER,me.COLOR_ATTACHMENT0,As.__webglTexture,Gt,Tr+Vi):me.framebufferTexture2D(me.DRAW_FRAMEBUFFER,me.COLOR_ATTACHMENT0,me.TEXTURE_2D,As.__webglTexture,Gt),it!==0?me.blitFramebuffer(Kn,Wn,pn,_n,qn,Zn,pn,_n,me.COLOR_BUFFER_BIT,me.NEAREST):Bs?me.copyTexSubImage3D(Dr,Gt,qn,Zn,Tr+Vi,Kn,Wn,pn,_n):me.copyTexSubImage2D(Dr,Gt,qn,Zn,Kn,Wn,pn,_n);xe.bindFramebuffer(me.READ_FRAMEBUFFER,null),xe.bindFramebuffer(me.DRAW_FRAMEBUFFER,null)}else Bs?we.isDataTexture||we.isData3DTexture?me.texSubImage3D(Dr,Gt,qn,Zn,Tr,pn,_n,Tn,yr,kn,Mr.data):nt.isCompressedArrayTexture?me.compressedTexSubImage3D(Dr,Gt,qn,Zn,Tr,pn,_n,Tn,yr,Mr.data):me.texSubImage3D(Dr,Gt,qn,Zn,Tr,pn,_n,Tn,yr,kn,Mr):we.isDataTexture?me.texSubImage2D(me.TEXTURE_2D,Gt,qn,Zn,pn,_n,yr,kn,Mr.data):we.isCompressedTexture?me.compressedTexSubImage2D(me.TEXTURE_2D,Gt,qn,Zn,Mr.width,Mr.height,yr,Mr.data):me.texSubImage2D(me.TEXTURE_2D,Gt,qn,Zn,pn,_n,yr,kn,Mr);me.pixelStorei(me.UNPACK_ROW_LENGTH,ar),me.pixelStorei(me.UNPACK_IMAGE_HEIGHT,ss),me.pixelStorei(me.UNPACK_SKIP_PIXELS,fl),me.pixelStorei(me.UNPACK_SKIP_ROWS,ds),me.pixelStorei(me.UNPACK_SKIP_IMAGES,qa),Gt===0&&nt.generateMipmaps&&me.generateMipmap(Dr),xe.unbindTexture()},this.copyTextureToTexture3D=function(we,nt,yt=null,ut=null,it=0){return we.isTexture!==!0&&(ly("WebGLRenderer: copyTextureToTexture3D function signature has changed."),yt=arguments[0]||null,ut=arguments[1]||null,we=arguments[2],nt=arguments[3],it=arguments[4]||0),ly('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(we,nt,yt,ut,it)},this.initRenderTarget=function(we){Ae.get(we).__webglFramebuffer===void 0&&le.setupRenderTarget(we)},this.initTexture=function(we){we.isCubeTexture?le.setTextureCube(we,0):we.isData3DTexture?le.setTexture3D(we,0):we.isDataArrayTexture||we.isCompressedArrayTexture?le.setTexture2DArray(we,0):le.setTexture2D(we,0),xe.unbindTexture()},this.resetState=function(){k=0,q=0,L=null,xe.reset(),on.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Zr._getDrawingBufferColorSpace(e),t.unpackColorSpace=Zr._getUnpackColorSpace()}}const ibe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:_T,AddEquation:ch,AddOperation:uW,AdditiveAnimationBlendMode:zP,AdditiveBlending:FR,AgXToneMapping:mW,AlphaFormat:DP,AlwaysCompare:RW,AlwaysDepth:FE,AlwaysStencilFunc:UR,AmbientLight:S$,AnimationAction:P$,AnimationClip:R0,AnimationLoader:_ge,AnimationMixer:Xge,AnimationObjectGroup:Hge,AnimationUtils:mge,ArcCurve:XW,ArrayCamera:C$,ArrowHelper:gye,AttachedBindMode:BR,Audio:R$,AudioAnalyser:Dge,AudioContext:dk,AudioListener:kge,AudioLoader:Rge,AxesHelper:yye,BackSide:Pa,BasicDepthPacking:bW,BasicShadowMap:WV,BatchedMesh:WW,Bone:KP,BooleanKeyframeTrack:Wm,Box2:nye,Box3:ka,Box3Helper:pye,BoxGeometry:Vm,BoxHelper:hye,BufferAttribute:Mi,BufferGeometry:Ur,BufferGeometryLoader:A$,ByteType:kP,Cache:zd,Camera:db,CameraHelper:fye,CanvasTexture:jme,CapsuleGeometry:FT,CatmullRomCurve3:KW,CineonToneMapping:hW,CircleGeometry:qT,ClampToEdgeWrapping:ac,Clock:fk,Color:Pn,ColorKeyframeTrack:lk,ColorManagement:Zr,CompressedArrayTexture:Fme,CompressedCubeTexture:qme,CompressedTexture:OT,CompressedTextureLoader:xge,ConeGeometry:jT,ConstantAlphaFactor:aW,ConstantColorFactor:sW,Controls:_ye,CubeCamera:FW,CubeReflectionMapping:sf,CubeRefractionMapping:Rh,CubeTexture:fb,CubeTextureLoader:bge,CubeUVReflectionMapping:Tv,CubicBezierCurve:JP,CubicBezierCurve3:QW,CubicInterpolant:m$,CullFaceBack:DR,CullFaceFront:VV,CullFaceFrontBack:Xhe,CullFaceNone:zV,Curve:ru,CurvePath:JW,CustomBlending:$V,CustomToneMapping:pW,CylinderGeometry:Mv,Cylindrical:tye,Data3DTexture:CT,DataArrayTexture:ub,DataTexture:Fu,DataTextureLoader:wge,DataUtils:ume,DecrementStencilOp:lpe,DecrementWrapStencilOp:upe,DefaultLoadingManager:v$,DepthFormat:dm,DepthStencilFormat:Rm,DepthTexture:LT,DetachedBindMode:yW,DirectionalLight:w$,DirectionalLightHelper:dye,DiscreteInterpolant:g$,DodecahedronGeometry:BT,DoubleSide:Au,DstAlphaFactor:eW,DstColorFactor:nW,DynamicCopyUsage:Tpe,DynamicDrawUsage:_pe,DynamicReadUsage:wpe,EdgesGeometry:ZW,EllipseCurve:DT,EqualCompare:MW,EqualDepth:jE,EqualStencilFunc:ppe,EquirectangularReflectionMapping:p0,EquirectangularRefractionMapping:m0,Euler:Bl,EventDispatcher:Hu,ExtrudeGeometry:zT,FileLoader:af,Float16BufferAttribute:yme,Float32BufferAttribute:Xn,FloatType:Na,Fog:NT,FogExp2:RT,FramebufferTexture:Dme,FrontSide:rf,Frustum:hb,GLBufferAttribute:eye,GLSL1:Ipe,GLSL3:zR,GreaterCompare:IW,GreaterDepth:UE,GreaterEqualCompare:CW,GreaterEqualDepth:BE,GreaterEqualStencilFunc:vpe,GreaterStencilFunc:gpe,GridHelper:cye,Group:by,HalfFloatType:Um,HemisphereLight:_$,HemisphereLightHelper:lye,IcosahedronGeometry:VT,ImageBitmapLoader:Cge,ImageLoader:N0,ImageUtils:kW,IncrementStencilOp:ape,IncrementWrapStencilOp:cpe,InstancedBufferAttribute:fv,InstancedBufferGeometry:I$,InstancedInterleavedBuffer:Zge,InstancedMesh:VW,Int16BufferAttribute:mme,Int32BufferAttribute:gme,Int8BufferAttribute:fme,IntType:bT,InterleavedBuffer:PT,InterleavedBufferAttribute:Pm,Interpolant:yb,InterpolateDiscrete:v0,InterpolateLinear:m2,InterpolateSmooth:iS,InvertStencilOp:dpe,KeepStencilOp:Vp,KeyframeTrack:iu,LOD:UW,LatheGeometry:pb,Layers:hm,LessCompare:TW,LessDepth:qE,LessEqualCompare:VP,LessEqualDepth:Am,LessEqualStencilFunc:mpe,LessStencilFunc:hpe,Light:qh,LightProbe:M$,Line:Nh,Line3:rye,LineBasicMaterial:Da,LineCurve:ZP,LineCurve3:YW,LineDashedMaterial:f$,LineLoop:$W,LineSegments:Gu,LinearFilter:Ls,LinearInterpolant:ak,LinearMipMapLinearFilter:Jhe,LinearMipMapNearestFilter:Yhe,LinearMipmapLinearFilter:Nu,LinearMipmapNearestFilter:bx,LinearSRGBColorSpace:Nm,LinearToneMapping:dW,LinearTransfer:x0,Loader:ul,LoaderUtils:GR,LoadingManager:ck,LoopOnce:vW,LoopPingPong:xW,LoopRepeat:_W,LuminanceAlphaFormat:jP,LuminanceFormat:qP,MOUSE:th,Material:fa,MaterialLoader:QT,MathUtils:$pe,Matrix2:gk,Matrix3:Ar,Matrix4:hr,MaxEquation:KV,Mesh:Js,MeshBasicMaterial:Dh,MeshDepthMaterial:ik,MeshDistanceMaterial:sk,MeshLambertMaterial:u$,MeshMatcapMaterial:d$,MeshNormalMaterial:c$,MeshPhongMaterial:a$,MeshPhysicalMaterial:o$,MeshStandardMaterial:rk,MeshToonMaterial:l$,MinEquation:XV,MirroredRepeatWrapping:y0,MixOperation:cW,MultiplyBlending:jR,MultiplyOperation:lb,NearestFilter:Bo,NearestMipMapLinearFilter:Qhe,NearestMipMapNearestFilter:Khe,NearestMipmapLinearFilter:_y,NearestMipmapNearestFilter:PP,NeutralToneMapping:gW,NeverCompare:EW,NeverDepth:DE,NeverStencilFunc:fpe,NoBlending:Gd,NoColorSpace:jd,NoToneMapping:Du,NormalAnimationBlendMode:IT,NormalBlending:um,NotEqualCompare:AW,NotEqualDepth:zE,NotEqualStencilFunc:ype,NumberKeyframeTrack:A0,Object3D:ni,ObjectLoader:Ige,ObjectSpaceNormalMap:SW,OctahedronGeometry:mb,OneFactor:YV,OneMinusConstantAlphaFactor:lW,OneMinusConstantColorFactor:oW,OneMinusDstAlphaFactor:tW,OneMinusDstColorFactor:rW,OneMinusSrcAlphaFactor:LE,OneMinusSrcColorFactor:ZV,OrthographicCamera:Kd,PCFShadowMap:vT,PCFSoftShadowMap:xx,PMREMGenerator:YR,Path:E0,PerspectiveCamera:ks,Plane:qd,PlaneGeometry:Iv,PlaneHelper:mye,PointLight:b$,PointLightHelper:oye,Points:HW,PointsMaterial:QP,PolarGridHelper:uye,PolyhedronGeometry:Fh,PositionalAudio:Lge,PropertyBinding:si,PropertyMixer:N$,QuadraticBezierCurve:ek,QuadraticBezierCurve3:tk,Quaternion:sa,QuaternionKeyframeTrack:vb,QuaternionLinearInterpolant:y$,RED_GREEN_RGTC2_Format:h2,RED_RGTC1_Format:UP,REVISION:yT,RGBADepthPacking:wW,RGBAFormat:na,RGBAIntegerFormat:MT,RGBA_ASTC_10x10_Format:a2,RGBA_ASTC_10x5_Format:i2,RGBA_ASTC_10x6_Format:s2,RGBA_ASTC_10x8_Format:o2,RGBA_ASTC_12x10_Format:l2,RGBA_ASTC_12x12_Format:c2,RGBA_ASTC_4x4_Format:QE,RGBA_ASTC_5x4_Format:YE,RGBA_ASTC_5x5_Format:JE,RGBA_ASTC_6x5_Format:ZE,RGBA_ASTC_6x6_Format:e2,RGBA_ASTC_8x5_Format:t2,RGBA_ASTC_8x6_Format:n2,RGBA_ASTC_8x8_Format:r2,RGBA_BPTC_Format:Mx,RGBA_ETC2_EAC_Format:KE,RGBA_PVRTC_2BPPV1_Format:HE,RGBA_PVRTC_4BPPV1_Format:$E,RGBA_S3TC_DXT1_Format:Sx,RGBA_S3TC_DXT3_Format:Ex,RGBA_S3TC_DXT5_Format:Tx,RGBDepthPacking:rpe,RGBFormat:FP,RGBIntegerFormat:Zhe,RGB_BPTC_SIGNED_Format:u2,RGB_BPTC_UNSIGNED_Format:d2,RGB_ETC1_Format:GE,RGB_ETC2_Format:XE,RGB_PVRTC_2BPPV1_Format:WE,RGB_PVRTC_4BPPV1_Format:VE,RGB_S3TC_DXT1_Format:wx,RGDepthPacking:ipe,RGFormat:BP,RGIntegerFormat:TT,RawShaderMaterial:s$,Ray:zm,Raycaster:k$,RectAreaLight:E$,RedFormat:ET,RedIntegerFormat:cb,ReinhardToneMapping:fW,RenderTarget:AT,RenderTarget3D:Kge,RenderTargetArray:Qge,RepeatWrapping:g0,ReplaceStencilOp:ope,ReverseSubtractEquation:GV,RingGeometry:WT,SIGNED_RED_GREEN_RGTC2_Format:p2,SIGNED_RED_RGTC1_Format:f2,SRGBColorSpace:Za,SRGBTransfer:vi,Scene:GP,ShaderChunk:jr,ShaderLib:Bc,ShaderMaterial:Zc,ShadowMaterial:i$,Shape:pm,ShapeGeometry:$T,ShapePath:vye,ShapeUtils:qu,ShortType:OP,Skeleton:kT,SkeletonHelper:sye,SkinnedMesh:zW,Source:im,Sphere:oa,SphereGeometry:gb,Spherical:KR,SphericalHarmonics3:T$,SplineCurve:nk,SpotLight:x$,SpotLightHelper:iye,Sprite:BW,SpriteMaterial:XP,SrcAlphaFactor:OE,SrcAlphaSaturateFactor:iW,SrcColorFactor:JV,StaticCopyUsage:Epe,StaticDrawUsage:b0,StaticReadUsage:bpe,StereoCamera:Nge,StreamCopyUsage:Mpe,StreamDrawUsage:xpe,StreamReadUsage:Spe,StringKeyframeTrack:$m,SubtractEquation:HV,SubtractiveBlending:qR,TOUCH:zp,TangentSpaceNormalMap:Lh,TetrahedronGeometry:HT,Texture:_s,TextureLoader:Sge,TextureUtils:Eye,TimestampQuery:Ape,TorusGeometry:GT,TorusKnotGeometry:XT,Triangle:el,TriangleFanDrawMode:npe,TriangleStripDrawMode:tpe,TrianglesDrawMode:epe,TubeGeometry:KT,UVMapping:xT,Uint16BufferAttribute:$P,Uint32BufferAttribute:HP,Uint8BufferAttribute:hme,Uint8ClampedBufferAttribute:pme,Uniform:mk,UniformsGroup:Jge,UniformsLib:wn,UniformsUtils:DW,UnsignedByteType:Yc,UnsignedInt248Type:Cm,UnsignedInt5999Type:LP,UnsignedIntType:of,UnsignedShort4444Type:wT,UnsignedShort5551Type:ST,UnsignedShortType:cv,VSMShadowMap:Dc,Vector2:Ut,Vector3:Pe,Vector4:oi,VectorKeyframeTrack:C0,VideoFrameTexture:Lme,VideoTexture:GW,WebGL3DRenderTarget:eme,WebGLArrayRenderTarget:Zpe,WebGLCoordinateSystem:Hc,WebGLCubeRenderTarget:qW,WebGLRenderTarget:Jc,WebGLRenderer:U$,WebGLUtils:B$,WebGPUCoordinateSystem:w0,WebXRController:sS,WireframeGeometry:r$,WrapAroundEnding:_0,ZeroCurvatureEnding:nm,ZeroFactor:QV,ZeroSlopeEnding:rm,ZeroStencilOp:spe,createCanvasElement:PW},Symbol.toStringTag,{value:"Module"}));var rC={exports:{}},Yf={};var uB;function sbe(){return uB||(uB=1,Yf.ConcurrentRoot=1,Yf.ContinuousEventPriority=4,Yf.DefaultEventPriority=16,Yf.DiscreteEventPriority=1,Yf.IdleEventPriority=0x20000000,Yf.LegacyRoot=0),Yf}var dB;function obe(){return dB||(dB=1,rC.exports=sbe()),rC.exports}var Ey=obe();function abe(n){let e;const t=new Set,r=(u,c)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const h=e;e=c?d:Object.assign({},e,d),t.forEach(p=>p(e,h))}},i=()=>e,s=(u,c=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function p(){const g=c(e);if(!d(h,g)){const x=h;u(h=g,x)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(u,c,d)=>c||d?s(u,c,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const lbe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fB=lbe?ie.useEffect:ie.useLayoutEffect;function cbe(n){const e=typeof n=="function"?abe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=ie.useReducer(b=>b+1,0),o=e.getState(),a=ie.useRef(o),l=ie.useRef(r),u=ie.useRef(i),c=ie.useRef(!1),d=ie.useRef();d.current===void 0&&(d.current=r(o));let h,p=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),p=!i(d.current,h)),fB(()=>{p&&(d.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const g=ie.useRef(o);fB(()=>{const b=()=>{try{const E=e.getState(),T=l.current(E);u.current(d.current,T)||(a.current=E,d.current=T,s())}catch{c.current=!0,s()}},y=e.subscribe(b);return e.getState()!==g.current&&b(),y},[]);const x=p?h:d.current;return ie.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var iC={exports:{}},sC={exports:{}},oC={};var hB;function ube(){return hB||(hB=1,function(n){function e(G,Y){var te=G.length;G.push(Y);e:for(;0<te;){var Z=te-1>>>1,fe=G[Z];if(0<i(fe,Y))G[Z]=Y,G[te]=fe,te=Z;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],te=G.pop();if(te!==Y){G[0]=te;e:for(var Z=0,fe=G.length,ge=fe>>>1;Z<ge;){var ce=2*(Z+1)-1,ye=G[ce],be=ce+1,Ee=G[be];if(0>i(ye,te))be<fe&&0>i(Ee,ye)?(G[Z]=Ee,G[be]=te,Z=be):(G[Z]=ye,G[ce]=te,Z=ce);else if(be<fe&&0>i(Ee,te))G[Z]=Ee,G[be]=te,Z=be;else break e}}return Y}function i(G,Y){var te=G.sortIndex-Y.sortIndex;return te!==0?te:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,p=!1,g=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var Y=t(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function I(G){if(x=!1,T(G),!g)if(t(l)!==null)g=!0,X(N);else{var Y=t(u);Y!==null&&re(I,Y.startTime-G)}}function N(G,Y){g=!1,x&&(x=!1,y(L),L=-1),p=!0;var te=h;try{for(T(Y),d=t(l);d!==null&&(!(d.expirationTime>Y)||G&&!F());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var fe=Z(d.expirationTime<=Y);Y=n.unstable_now(),typeof fe=="function"?d.callback=fe:d===t(l)&&r(l),T(Y)}else r(l);d=t(l)}if(d!==null)var ge=!0;else{var ce=t(u);ce!==null&&re(I,ce.startTime-Y),ge=!1}return ge}finally{d=null,h=te,p=!1}}var k=!1,q=null,L=-1,R=5,P=-1;function F(){return!(n.unstable_now()-P<R)}function z(){if(q!==null){var G=n.unstable_now();P=G;var Y=!0;try{Y=q(!0,G)}finally{Y?V():(k=!1,q=null)}}else k=!1}var V;if(typeof E=="function")V=function(){E(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=z,V=function(){Q.postMessage(null)}}else V=function(){b(z,0)};function X(G){q=G,k||(k=!0,V())}function re(G,Y){L=b(function(){G(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,X(N))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(G){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var te=h;h=Y;try{return G()}finally{h=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=h;h=G;try{return Y()}finally{h=te}},n.unstable_scheduleCallback=function(G,Y,te){var Z=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Z+te:Z):te=Z,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=0x3fffffff;break;case 4:fe=1e4;break;default:fe=5e3}return fe=te+fe,G={id:c++,callback:Y,priorityLevel:G,startTime:te,expirationTime:fe,sortIndex:-1},te>Z?(G.sortIndex=te,e(u,G),t(l)===null&&G===t(u)&&(x?(y(L),L=-1):x=!0,re(I,te-Z))):(G.sortIndex=fe,e(l,G),g||p||(g=!0,X(N))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var Y=h;return function(){var te=h;h=Y;try{return G.apply(this,arguments)}finally{h=te}}}}(oC)),oC}var pB;function z$(){return pB||(pB=1,sC.exports=ube()),sC.exports}var aC,mB;function dbe(){return mB||(mB=1,aC=function(e){var t={},r=Om(),i=z$(),s=Object.assign;function o(_){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+_,O=1;O<arguments.length;O++)w+="&args[]="+encodeURIComponent(arguments[O]);return"Minified React error #"+_+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),N=Symbol.iterator;function k(_){return _===null||typeof _!="object"?null:(_=N&&_[N]||_["@@iterator"],typeof _=="function"?_:null)}function q(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case d:return"StrictMode";case b:return"Suspense";case y:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case g:return(_.displayName||"Context")+".Consumer";case p:return(_._context.displayName||"Context")+".Provider";case x:var w=_.render;return _=_.displayName,_||(_=w.displayName||w.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case E:return w=_.displayName||null,w!==null?w:q(_.type)||"Memo";case T:w=_._payload,_=_._init;try{return q(_(w))}catch{}}return null}function L(_){var w=_.type;switch(_.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=w.render,_=_.displayName||_.name||"",w.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(w);case 8:return w===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function R(_){var w=_,O=_;if(_.alternate)for(;w.return;)w=w.return;else{_=w;do w=_,w.flags&4098&&(O=w.return),_=w.return;while(_)}return w.tag===3?O:null}function P(_){if(R(_)!==_)throw Error(o(188))}function F(_){var w=_.alternate;if(!w){if(w=R(_),w===null)throw Error(o(188));return w!==_?null:_}for(var O=_,j=w;;){var K=O.return;if(K===null)break;var ae=K.alternate;if(ae===null){if(j=K.return,j!==null){O=j;continue}break}if(K.child===ae.child){for(ae=K.child;ae;){if(ae===O)return P(K),_;if(ae===j)return P(K),w;ae=ae.sibling}throw Error(o(188))}if(O.return!==j.return)O=K,j=ae;else{for(var Fe=!1,et=K.child;et;){if(et===O){Fe=!0,O=K,j=ae;break}if(et===j){Fe=!0,j=K,O=ae;break}et=et.sibling}if(!Fe){for(et=ae.child;et;){if(et===O){Fe=!0,O=ae,j=K;break}if(et===j){Fe=!0,j=ae,O=K;break}et=et.sibling}if(!Fe)throw Error(o(189))}}if(O.alternate!==j)throw Error(o(190))}if(O.tag!==3)throw Error(o(188));return O.stateNode.current===O?_:w}function z(_){return _=F(_),_!==null?V(_):null}function V(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var w=V(_);if(w!==null)return w;_=_.sibling}return null}function W(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){if(_.tag!==4){var w=W(_);if(w!==null)return w}_=_.sibling}return null}var Q=Array.isArray,X=e.getPublicInstance,re=e.getRootHostContext,G=e.getChildHostContext,Y=e.prepareForCommit,te=e.resetAfterCommit,Z=e.createInstance,fe=e.appendInitialChild,ge=e.finalizeInitialChildren,ce=e.prepareUpdate,ye=e.shouldSetTextContent,be=e.createTextInstance,Ee=e.scheduleTimeout,Me=e.cancelTimeout,qe=e.noTimeout,Ue=e.isPrimaryRenderer,Ye=e.supportsMutation,Ne=e.supportsPersistence,ke=e.supportsHydration,me=e.getInstanceFromNode,ht=e.preparePortalMount,ct=e.getCurrentEventPriority,Mt=e.detachDeletedInstance,xe=e.supportsMicrotasks,Te=e.scheduleMicrotask,Ae=e.supportsTestSelectors,le=e.findFiberRoot,se=e.getBoundingRect,Oe=e.getTextContent,Ce=e.isHiddenSubtree,Ge=e.matchAccessibilityRole,at=e.setFocusIfFocusable,Lt=e.setupIntersectionObserver,Dt=e.appendChild,Jt=e.appendChildToContainer,Cn=e.commitTextUpdate,Vt=e.commitMount,hn=e.commitUpdate,vn=e.insertBefore,$t=e.insertInContainerBefore,un=e.removeChild,He=e.removeChildFromContainer,At=e.resetTextContent,on=e.hideInstance,$e=e.hideTextInstance,Kt=e.unhideInstance,_t=e.unhideTextInstance,ee=e.clearContainer,gn=e.cloneInstance,Ft=e.createContainerChildSet,Hn=e.appendChildToContainerChildSet,Lr=e.finalizeContainerChildren,ai=e.replaceContainerChildren,gr=e.cloneHiddenInstance,hi=e.cloneHiddenTextInstance,ui=e.canHydrateInstance,Vl=e.canHydrateTextInstance,Fa=e.canHydrateSuspenseInstance,Wo=e.isSuspenseInstancePending,To=e.isSuspenseInstanceFallback,Mo=e.registerSuspenseInstanceRetry,Io=e.getNextHydratableSibling,no=e.getFirstHydratableChild,su=e.getFirstHydratableChildWithinContainer,Wl=e.getFirstHydratableChildWithinSuspenseInstance,hc=e.hydrateInstance,Ao=e.hydrateTextInstance,ou=e.hydrateSuspenseInstance,au=e.getNextHydratableInstanceAfterSuspenseInstance,lu=e.commitHydratedContainer,cu=e.commitHydratedSuspenseInstance,uu=e.clearSuspenseBoundary,du=e.clearSuspenseBoundaryFromContainer,we=e.shouldDeleteUnhydratedTailInstances,nt=e.didNotMatchHydratedContainerTextInstance,yt=e.didNotMatchHydratedTextInstance,ut;function it(_){if(ut===void 0)try{throw Error()}catch(O){var w=O.stack.trim().match(/\n( *(at )?)/);ut=w&&w[1]||""}return`
`+ut+_}var Gt=!1;function pn(_,w){if(!_||Gt)return"";Gt=!0;var O=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(rn){var j=rn}Reflect.construct(_,[],w)}else{try{w.call()}catch(rn){j=rn}_.call(w.prototype)}else{try{throw Error()}catch(rn){j=rn}_()}}catch(rn){if(rn&&j&&typeof rn.stack=="string"){for(var K=rn.stack.split(`
`),ae=j.stack.split(`
`),Fe=K.length-1,et=ae.length-1;1<=Fe&&0<=et&&K[Fe]!==ae[et];)et--;for(;1<=Fe&&0<=et;Fe--,et--)if(K[Fe]!==ae[et]){if(Fe!==1||et!==1)do if(Fe--,et--,0>et||K[Fe]!==ae[et]){var Nt=`
`+K[Fe].replace(" at new "," at ");return _.displayName&&Nt.includes("<anonymous>")&&(Nt=Nt.replace("<anonymous>",_.displayName)),Nt}while(1<=Fe&&0<=et);break}}}finally{Gt=!1,Error.prepareStackTrace=O}return(_=_?_.displayName||_.name:"")?it(_):""}var _n=Object.prototype.hasOwnProperty,Tn=[],Kn=-1;function Wn(_){return{current:_}}function nn(_){0>Kn||(_.current=Tn[Kn],Tn[Kn]=null,Kn--)}function qn(_,w){Kn++,Tn[Kn]=_.current,_.current=w}var Zn={},Tr=Wn(Zn),Mr=Wn(!1),yr=Zn;function kn(_,w){var O=_.type.contextTypes;if(!O)return Zn;var j=_.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===w)return j.__reactInternalMemoizedMaskedChildContext;var K={},ae;for(ae in O)K[ae]=w[ae];return j&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=w,_.__reactInternalMemoizedMaskedChildContext=K),K}function Dr(_){return _=_.childContextTypes,_!=null}function ar(){nn(Mr),nn(Tr)}function ss(_,w,O){if(Tr.current!==Zn)throw Error(o(168));qn(Tr,w),qn(Mr,O)}function fl(_,w,O){var j=_.stateNode;if(w=w.childContextTypes,typeof j.getChildContext!="function")return O;j=j.getChildContext();for(var K in j)if(!(K in w))throw Error(o(108,L(_)||"Unknown",K));return s({},O,j)}function ds(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Zn,yr=Tr.current,qn(Tr,_),qn(Mr,Mr.current),!0}function qa(_,w,O){var j=_.stateNode;if(!j)throw Error(o(169));O?(_=fl(_,w,yr),j.__reactInternalMemoizedMergedChildContext=_,nn(Mr),nn(Tr),qn(Tr,_)):nn(Mr),qn(Mr,O)}var Fr=Math.clz32?Math.clz32:As,Bs=Math.log,fs=Math.LN2;function As(_){return _>>>=0,_===0?32:31-(Bs(_)/fs|0)|0}var Vi=64,Vr=4194304;function mo(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return _&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return _}}function fu(_,w){var O=_.pendingLanes;if(O===0)return 0;var j=0,K=_.suspendedLanes,ae=_.pingedLanes,Fe=O&0xfffffff;if(Fe!==0){var et=Fe&~K;et!==0?j=mo(et):(ae&=Fe,ae!==0&&(j=mo(ae)))}else Fe=O&~K,Fe!==0?j=mo(Fe):ae!==0&&(j=mo(ae));if(j===0)return 0;if(w!==0&&w!==j&&!(w&K)&&(K=j&-j,ae=w&-w,K>=ae||K===16&&(ae&4194240)!==0))return w;if(j&4&&(j|=O&16),w=_.entangledLanes,w!==0)for(_=_.entanglements,w&=j;0<w;)O=31-Fr(w),K=1<<O,j|=_[O],w&=~K;return j}function je(_,w){switch(_){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function Vh(_,w){for(var O=_.suspendedLanes,j=_.pingedLanes,K=_.expirationTimes,ae=_.pendingLanes;0<ae;){var Fe=31-Fr(ae),et=1<<Fe,Nt=K[Fe];Nt===-1?(!(et&O)||et&j)&&(K[Fe]=je(et,w)):Nt<=w&&(_.expiredLanes|=et),ae&=~et}}function pc(_){return _=_.pendingLanes&-0x40000001,_!==0?_:_&0x40000000?0x40000000:0}function Ku(_){for(var w=[],O=0;31>O;O++)w.push(_);return w}function A(_,w,O){_.pendingLanes|=w,w!==0x20000000&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,w=31-Fr(w),_[w]=O}function C(_,w){var O=_.pendingLanes&~w;_.pendingLanes=w,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=w,_.mutableReadLanes&=w,_.entangledLanes&=w,w=_.entanglements;var j=_.eventTimes;for(_=_.expirationTimes;0<O;){var K=31-Fr(O),ae=1<<K;w[K]=0,j[K]=-1,_[K]=-1,O&=~ae}}function B(_,w){var O=_.entangledLanes|=w;for(_=_.entanglements;O;){var j=31-Fr(O),K=1<<j;K&w|_[j]&w&&(_[j]|=w),O&=~K}}var U=0;function H(_){return _&=-_,1<_?4<_?_&0xfffffff?16:0x20000000:4:1}var oe=i.unstable_scheduleCallback,De=i.unstable_cancelCallback,Be=i.unstable_shouldYield,Tt=i.unstable_requestPaint,xt=i.unstable_now,zt=i.unstable_ImmediatePriority,Qt=i.unstable_UserBlockingPriority,mt=i.unstable_NormalPriority,rt=i.unstable_IdlePriority,Ct=null,ze=null;function Qe(_){if(ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Ct,_,void 0,(_.current.flags&128)===128)}catch{}}function Ze(_,w){return _===w&&(_!==0||1/_===1/w)||_!==_&&w!==w}var wt=typeof Object.is=="function"?Object.is:Ze,St=null,tt=!1,Et=!1;function dn(_){St===null?St=[_]:St.push(_)}function ve(_){tt=!0,dn(_)}function Re(){if(!Et&&St!==null){Et=!0;var _=0,w=U;try{var O=St;for(U=1;_<O.length;_++){var j=O[_];do j=j(!0);while(j!==null)}St=null,tt=!1}catch(K){throw St!==null&&(St=St.slice(_+1)),oe(zt,Re),K}finally{U=w,Et=!1}}return null}var Xe=a.ReactCurrentBatchConfig;function qt(_,w){if(wt(_,w))return!0;if(typeof _!="object"||_===null||typeof w!="object"||w===null)return!1;var O=Object.keys(_),j=Object.keys(w);if(O.length!==j.length)return!1;for(j=0;j<O.length;j++){var K=O[j];if(!_n.call(w,K)||!wt(_[K],w[K]))return!1}return!0}function Ie(_){switch(_.tag){case 5:return it(_.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 2:case 15:return _=pn(_.type,!1),_;case 11:return _=pn(_.type.render,!1),_;case 1:return _=pn(_.type,!0),_;default:return""}}function Le(_,w){if(_&&_.defaultProps){w=s({},w),_=_.defaultProps;for(var O in _)w[O]===void 0&&(w[O]=_[O]);return w}return w}var ue=Wn(null),_e=null,Se=null,dt=null;function Ot(){dt=Se=_e=null}function En(_,w,O){Ue?(qn(ue,w._currentValue),w._currentValue=O):(qn(ue,w._currentValue2),w._currentValue2=O)}function jn(_){var w=ue.current;nn(ue),Ue?_._currentValue=w:_._currentValue2=w}function Jn(_,w,O){for(;_!==null;){var j=_.alternate;if((_.childLanes&w)!==w?(_.childLanes|=w,j!==null&&(j.childLanes|=w)):j!==null&&(j.childLanes&w)!==w&&(j.childLanes|=w),_===O)break;_=_.return}}function jt(_,w){_e=_,dt=Se=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&w&&($s=!0),_.firstContext=null)}function We(_){var w=Ue?_._currentValue:_._currentValue2;if(dt!==_)if(_={context:_,memoizedValue:w,next:null},Se===null){if(_e===null)throw Error(o(308));Se=_,_e.dependencies={lanes:0,firstContext:_}}else Se=Se.next=_;return w}var lt=null,kt=!1;function Ht(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rn(_,w){_=_.updateQueue,w.updateQueue===_&&(w.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function Vn(_,w){return{eventTime:_,lane:w,tag:0,payload:null,callback:null,next:null}}function ot(_,w){var O=_.updateQueue;O!==null&&(O=O.shared,as!==null&&_.mode&1&&!(Ir&2)?(_=O.interleaved,_===null?(w.next=w,lt===null?lt=[O]:lt.push(O)):(w.next=_.next,_.next=w),O.interleaved=w):(_=O.pending,_===null?w.next=w:(w.next=_.next,_.next=w),O.pending=w))}function Pt(_,w,O){if(w=w.updateQueue,w!==null&&(w=w.shared,(O&4194240)!==0)){var j=w.lanes;j&=_.pendingLanes,O|=j,w.lanes=O,B(_,O)}}function Wt(_,w){var O=_.updateQueue,j=_.alternate;if(j!==null&&(j=j.updateQueue,O===j)){var K=null,ae=null;if(O=O.firstBaseUpdate,O!==null){do{var Fe={eventTime:O.eventTime,lane:O.lane,tag:O.tag,payload:O.payload,callback:O.callback,next:null};ae===null?K=ae=Fe:ae=ae.next=Fe,O=O.next}while(O!==null);ae===null?K=ae=w:ae=ae.next=w}else K=ae=w;O={baseState:j.baseState,firstBaseUpdate:K,lastBaseUpdate:ae,shared:j.shared,effects:j.effects},_.updateQueue=O;return}_=O.lastBaseUpdate,_===null?O.firstBaseUpdate=w:_.next=w,O.lastBaseUpdate=w}function mn(_,w,O,j){var K=_.updateQueue;kt=!1;var ae=K.firstBaseUpdate,Fe=K.lastBaseUpdate,et=K.shared.pending;if(et!==null){K.shared.pending=null;var Nt=et,rn=Nt.next;Nt.next=null,Fe===null?ae=rn:Fe.next=rn,Fe=Nt;var Dn=_.alternate;Dn!==null&&(Dn=Dn.updateQueue,et=Dn.lastBaseUpdate,et!==Fe&&(et===null?Dn.firstBaseUpdate=rn:et.next=rn,Dn.lastBaseUpdate=Nt))}if(ae!==null){var vr=K.baseState;Fe=0,Dn=rn=Nt=null,et=ae;do{var tr=et.lane,Nr=et.eventTime;if((j&tr)===tr){Dn!==null&&(Dn=Dn.next={eventTime:Nr,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var Mn=_,lo=et;switch(tr=w,Nr=O,lo.tag){case 1:if(Mn=lo.payload,typeof Mn=="function"){vr=Mn.call(Nr,vr,tr);break e}vr=Mn;break e;case 3:Mn.flags=Mn.flags&-65537|128;case 0:if(Mn=lo.payload,tr=typeof Mn=="function"?Mn.call(Nr,vr,tr):Mn,tr==null)break e;vr=s({},vr,tr);break e;case 2:kt=!0}}et.callback!==null&&et.lane!==0&&(_.flags|=64,tr=K.effects,tr===null?K.effects=[et]:tr.push(et))}else Nr={eventTime:Nr,lane:tr,tag:et.tag,payload:et.payload,callback:et.callback,next:null},Dn===null?(rn=Dn=Nr,Nt=vr):Dn=Dn.next=Nr,Fe|=tr;if(et=et.next,et===null){if(et=K.shared.pending,et===null)break;tr=et,et=tr.next,tr.next=null,K.lastBaseUpdate=tr,K.shared.pending=null}}while(!0);if(Dn===null&&(Nt=vr),K.baseState=Nt,K.firstBaseUpdate=rn,K.lastBaseUpdate=Dn,w=K.shared.interleaved,w!==null){K=w;do Fe|=K.lane,K=K.next;while(K!==w)}else ae===null&&(K.shared.lanes=0);Xl|=Fe,_.lanes=Fe,_.memoizedState=vr}}function ln(_,w,O){if(_=w.effects,w.effects=null,_!==null)for(w=0;w<_.length;w++){var j=_[w],K=j.callback;if(K!==null){if(j.callback=null,j=O,typeof K!="function")throw Error(o(191,K));K.call(j)}}}var Bn=new r.Component().refs;function pr(_,w,O,j){w=_.memoizedState,O=O(j,w),O=O==null?w:s({},w,O),_.memoizedState=O,_.lanes===0&&(_.updateQueue.baseState=O)}var xn={isMounted:function(_){return(_=_._reactInternals)?R(_)===_:!1},enqueueSetState:function(_,w,O){_=_._reactInternals;var j=Jr(),K=bl(_),ae=Vn(j,K);ae.payload=w,O!=null&&(ae.callback=O),ot(_,ae),w=vo(_,K,j),w!==null&&Pt(w,_,K)},enqueueReplaceState:function(_,w,O){_=_._reactInternals;var j=Jr(),K=bl(_),ae=Vn(j,K);ae.tag=1,ae.payload=w,O!=null&&(ae.callback=O),ot(_,ae),w=vo(_,K,j),w!==null&&Pt(w,_,K)},enqueueForceUpdate:function(_,w){_=_._reactInternals;var O=Jr(),j=bl(_),K=Vn(O,j);K.tag=2,w!=null&&(K.callback=w),ot(_,K),w=vo(_,j,O),w!==null&&Pt(w,_,j)}};function ki(_,w,O,j,K,ae,Fe){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(j,ae,Fe):w.prototype&&w.prototype.isPureReactComponent?!qt(O,j)||!qt(K,ae):!0}function vt(_,w,O){var j=!1,K=Zn,ae=w.contextType;return typeof ae=="object"&&ae!==null?ae=We(ae):(K=Dr(w)?yr:Tr.current,j=w.contextTypes,ae=(j=j!=null)?kn(_,K):Zn),w=new w(O,ae),_.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=xn,_.stateNode=w,w._reactInternals=_,j&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=K,_.__reactInternalMemoizedMaskedChildContext=ae),w}function en(_,w,O,j){_=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(O,j),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(O,j),w.state!==_&&xn.enqueueReplaceState(w,w.state,null)}function an(_,w,O,j){var K=_.stateNode;K.props=O,K.state=_.memoizedState,K.refs=Bn,Ht(_);var ae=w.contextType;typeof ae=="object"&&ae!==null?K.context=We(ae):(ae=Dr(w)?yr:Tr.current,K.context=kn(_,ae)),K.state=_.memoizedState,ae=w.getDerivedStateFromProps,typeof ae=="function"&&(pr(_,w,ae,O),K.state=_.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(w=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),w!==K.state&&xn.enqueueReplaceState(K,K.state,null),mn(_,O,K,j),K.state=_.memoizedState),typeof K.componentDidMount=="function"&&(_.flags|=4194308)}var cn=[],lr=0,ri=null,Qr=0,Rr=[],hs=0,Wi=null,hl=1,pl="";function Us(_,w){cn[lr++]=Qr,cn[lr++]=ri,ri=_,Qr=w}function Hm(_,w,O){Rr[hs++]=hl,Rr[hs++]=pl,Rr[hs++]=Wi,Wi=_;var j=hl;_=pl;var K=32-Fr(j)-1;j&=~(1<<K),O+=1;var ae=32-Fr(w)+K;if(30<ae){var Fe=K-K%5;ae=(j&(1<<Fe)-1).toString(32),j>>=Fe,K-=Fe,hl=1<<32-Fr(w)+K|O<<K|j,pl=ae+_}else hl=1<<ae|O<<K|j,pl=_}function uf(_){_.return!==null&&(Us(_,1),Hm(_,1,0))}function Qu(_){for(;_===ri;)ri=cn[--lr],cn[lr]=null,Qr=cn[--lr],cn[lr]=null;for(;_===Wi;)Wi=Rr[--hs],Rr[hs]=null,pl=Rr[--hs],Rr[hs]=null,hl=Rr[--hs],Rr[hs]=null}var Co=null,ro=null,Oi=!1,df=!1,ja=null;function Nv(_,w){var O=_a(5,null,null,0);O.elementType="DELETED",O.stateNode=w,O.return=_,w=_.deletions,w===null?(_.deletions=[O],_.flags|=16):w.push(O)}function Pv(_,w){switch(_.tag){case 5:return w=ui(w,_.type,_.pendingProps),w!==null?(_.stateNode=w,Co=_,ro=no(w),!0):!1;case 6:return w=Vl(w,_.pendingProps),w!==null?(_.stateNode=w,Co=_,ro=null,!0):!1;case 13:if(w=Fa(w),w!==null){var O=Wi!==null?{id:hl,overflow:pl}:null;return _.memoizedState={dehydrated:w,treeContext:O,retryLane:0x40000000},O=_a(18,null,null,0),O.stateNode=w,O.return=_,_.child=O,Co=_,ro=null,!0}return!1;default:return!1}}function Gm(_){return(_.mode&1)!==0&&(_.flags&128)===0}function hu(_){if(Oi){var w=ro;if(w){var O=w;if(!Pv(_,w)){if(Gm(_))throw Error(o(418));w=Io(O);var j=Co;w&&Pv(_,w)?Nv(j,O):(_.flags=_.flags&-4097|2,Oi=!1,Co=_)}}else{if(Gm(_))throw Error(o(418));_.flags=_.flags&-4097|2,Oi=!1,Co=_}}}function Ab(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;Co=_}function Wh(_){if(!ke||_!==Co)return!1;if(!Oi)return Ab(_),Oi=!0,!1;if(_.tag!==3&&(_.tag!==5||we(_.type)&&!ye(_.type,_.memoizedProps))){var w=ro;if(w){if(Gm(_)){for(_=ro;_;)_=Io(_);throw Error(o(418))}for(;w;)Nv(_,w),w=Io(w)}}if(Ab(_),_.tag===13){if(!ke)throw Error(o(316));if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));ro=au(_)}else ro=Co?Io(_.stateNode):null;return!0}function ff(){ke&&(ro=Co=null,df=Oi=!1)}function Xm(_){ja===null?ja=[_]:ja.push(_)}function hf(_,w,O){if(_=O.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(O._owner){if(O=O._owner,O){if(O.tag!==1)throw Error(o(309));var j=O.stateNode}if(!j)throw Error(o(147,_));var K=j,ae=""+_;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===ae?w.ref:(w=function(Fe){var et=K.refs;et===Bn&&(et=K.refs={}),Fe===null?delete et[ae]:et[ae]=Fe},w._stringRef=ae,w)}if(typeof _!="string")throw Error(o(284));if(!O._owner)throw Error(o(290,_))}return _}function pu(_,w){throw _=Object.prototype.toString.call(w),Error(o(31,_==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":_))}function pf(_){var w=_._init;return w(_._payload)}function Cb(_){function w(gt,st){if(_){var It=gt.deletions;It===null?(gt.deletions=[st],gt.flags|=16):It.push(st)}}function O(gt,st){if(!_)return null;for(;st!==null;)w(gt,st),st=st.sibling;return null}function j(gt,st){for(gt=new Map;st!==null;)st.key!==null?gt.set(st.key,st):gt.set(st.index,st),st=st.sibling;return gt}function K(gt,st){return gt=Ac(gt,st),gt.index=0,gt.sibling=null,gt}function ae(gt,st,It){return gt.index=It,_?(It=gt.alternate,It!==null?(It=It.index,It<st?(gt.flags|=2,st):It):(gt.flags|=2,st)):(gt.flags|=1048576,st)}function Fe(gt){return _&&gt.alternate===null&&(gt.flags|=2),gt}function et(gt,st,It,bn){return st===null||st.tag!==6?(st=bg(It,gt.mode,bn),st.return=gt,st):(st=K(st,It),st.return=gt,st)}function Nt(gt,st,It,bn){var Gn=It.type;return Gn===c?Dn(gt,st,It.props.children,bn,It.key):st!==null&&(st.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===T&&pf(Gn)===st.type)?(bn=K(st,It.props),bn.ref=hf(gt,st,It),bn.return=gt,bn):(bn=xg(It.type,It.key,It.props,null,gt.mode,bn),bn.ref=hf(gt,st,It),bn.return=gt,bn)}function rn(gt,st,It,bn){return st===null||st.tag!==4||st.stateNode.containerInfo!==It.containerInfo||st.stateNode.implementation!==It.implementation?(st=wg(It,gt.mode,bn),st.return=gt,st):(st=K(st,It.children||[]),st.return=gt,st)}function Dn(gt,st,It,bn,Gn){return st===null||st.tag!==7?(st=vd(It,gt.mode,bn,Gn),st.return=gt,st):(st=K(st,It),st.return=gt,st)}function vr(gt,st,It){if(typeof st=="string"&&st!==""||typeof st=="number")return st=bg(""+st,gt.mode,It),st.return=gt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case l:return It=xg(st.type,st.key,st.props,null,gt.mode,It),It.ref=hf(gt,null,st),It.return=gt,It;case u:return st=wg(st,gt.mode,It),st.return=gt,st;case T:var bn=st._init;return vr(gt,bn(st._payload),It)}if(Q(st)||k(st))return st=vd(st,gt.mode,It,null),st.return=gt,st;pu(gt,st)}return null}function tr(gt,st,It,bn){var Gn=st!==null?st.key:null;if(typeof It=="string"&&It!==""||typeof It=="number")return Gn!==null?null:et(gt,st,""+It,bn);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case l:return It.key===Gn?Nt(gt,st,It,bn):null;case u:return It.key===Gn?rn(gt,st,It,bn):null;case T:return Gn=It._init,tr(gt,st,Gn(It._payload),bn)}if(Q(It)||k(It))return Gn!==null?null:Dn(gt,st,It,bn,null);pu(gt,It)}return null}function Nr(gt,st,It,bn,Gn){if(typeof bn=="string"&&bn!==""||typeof bn=="number")return gt=gt.get(It)||null,et(st,gt,""+bn,Gn);if(typeof bn=="object"&&bn!==null){switch(bn.$$typeof){case l:return gt=gt.get(bn.key===null?It:bn.key)||null,Nt(st,gt,bn,Gn);case u:return gt=gt.get(bn.key===null?It:bn.key)||null,rn(st,gt,bn,Gn);case T:var Sr=bn._init;return Nr(gt,st,It,Sr(bn._payload),Gn)}if(Q(bn)||k(bn))return gt=gt.get(It)||null,Dn(st,gt,bn,Gn,null);pu(st,bn)}return null}function Mn(gt,st,It,bn){for(var Gn=null,Sr=null,_r=st,Yr=st=0,ms=null;_r!==null&&Yr<It.length;Yr++){_r.index>Yr?(ms=_r,_r=null):ms=_r.sibling;var Kr=tr(gt,_r,It[Yr],bn);if(Kr===null){_r===null&&(_r=ms);break}_&&_r&&Kr.alternate===null&&w(gt,_r),st=ae(Kr,st,Yr),Sr===null?Gn=Kr:Sr.sibling=Kr,Sr=Kr,_r=ms}if(Yr===It.length)return O(gt,_r),Oi&&Us(gt,Yr),Gn;if(_r===null){for(;Yr<It.length;Yr++)_r=vr(gt,It[Yr],bn),_r!==null&&(st=ae(_r,st,Yr),Sr===null?Gn=_r:Sr.sibling=_r,Sr=_r);return Oi&&Us(gt,Yr),Gn}for(_r=j(gt,_r);Yr<It.length;Yr++)ms=Nr(_r,gt,Yr,It[Yr],bn),ms!==null&&(_&&ms.alternate!==null&&_r.delete(ms.key===null?Yr:ms.key),st=ae(ms,st,Yr),Sr===null?Gn=ms:Sr.sibling=ms,Sr=ms);return _&&_r.forEach(function(Cc){return w(gt,Cc)}),Oi&&Us(gt,Yr),Gn}function lo(gt,st,It,bn){var Gn=k(It);if(typeof Gn!="function")throw Error(o(150));if(It=Gn.call(It),It==null)throw Error(o(151));for(var Sr=Gn=null,_r=st,Yr=st=0,ms=null,Kr=It.next();_r!==null&&!Kr.done;Yr++,Kr=It.next()){_r.index>Yr?(ms=_r,_r=null):ms=_r.sibling;var Cc=tr(gt,_r,Kr.value,bn);if(Cc===null){_r===null&&(_r=ms);break}_&&_r&&Cc.alternate===null&&w(gt,_r),st=ae(Cc,st,Yr),Sr===null?Gn=Cc:Sr.sibling=Cc,Sr=Cc,_r=ms}if(Kr.done)return O(gt,_r),Oi&&Us(gt,Yr),Gn;if(_r===null){for(;!Kr.done;Yr++,Kr=It.next())Kr=vr(gt,Kr.value,bn),Kr!==null&&(st=ae(Kr,st,Yr),Sr===null?Gn=Kr:Sr.sibling=Kr,Sr=Kr);return Oi&&Us(gt,Yr),Gn}for(_r=j(gt,_r);!Kr.done;Yr++,Kr=It.next())Kr=Nr(_r,gt,Yr,Kr.value,bn),Kr!==null&&(_&&Kr.alternate!==null&&_r.delete(Kr.key===null?Yr:Kr.key),st=ae(Kr,st,Yr),Sr===null?Gn=Kr:Sr.sibling=Kr,Sr=Kr);return _&&_r.forEach(function(c_){return w(gt,c_)}),Oi&&Us(gt,Yr),Gn}function xa(gt,st,It,bn){if(typeof It=="object"&&It!==null&&It.type===c&&It.key===null&&(It=It.props.children),typeof It=="object"&&It!==null){switch(It.$$typeof){case l:e:{for(var Gn=It.key,Sr=st;Sr!==null;){if(Sr.key===Gn){if(Gn=It.type,Gn===c){if(Sr.tag===7){O(gt,Sr.sibling),st=K(Sr,It.props.children),st.return=gt,gt=st;break e}}else if(Sr.elementType===Gn||typeof Gn=="object"&&Gn!==null&&Gn.$$typeof===T&&pf(Gn)===Sr.type){O(gt,Sr.sibling),st=K(Sr,It.props),st.ref=hf(gt,Sr,It),st.return=gt,gt=st;break e}O(gt,Sr);break}else w(gt,Sr);Sr=Sr.sibling}It.type===c?(st=vd(It.props.children,gt.mode,bn,It.key),st.return=gt,gt=st):(bn=xg(It.type,It.key,It.props,null,gt.mode,bn),bn.ref=hf(gt,st,It),bn.return=gt,gt=bn)}return Fe(gt);case u:e:{for(Sr=It.key;st!==null;){if(st.key===Sr)if(st.tag===4&&st.stateNode.containerInfo===It.containerInfo&&st.stateNode.implementation===It.implementation){O(gt,st.sibling),st=K(st,It.children||[]),st.return=gt,gt=st;break e}else{O(gt,st);break}else w(gt,st);st=st.sibling}st=wg(It,gt.mode,bn),st.return=gt,gt=st}return Fe(gt);case T:return Sr=It._init,xa(gt,st,Sr(It._payload),bn)}if(Q(It))return Mn(gt,st,It,bn);if(k(It))return lo(gt,st,It,bn);pu(gt,It)}return typeof It=="string"&&It!==""||typeof It=="number"?(It=""+It,st!==null&&st.tag===6?(O(gt,st.sibling),st=K(st,It),st.return=gt,gt=st):(O(gt,st),st=bg(It,gt.mode,bn),st.return=gt,gt=st),Fe(gt)):O(gt,st)}return xa}var mc=Cb(!0),Rb=Cb(!1),mf={},$o=Wn(mf),Yu=Wn(mf),Ju=Wn(mf);function ml(_){if(_===mf)throw Error(o(174));return _}function Km(_,w){qn(Ju,w),qn(Yu,_),qn($o,mf),_=re(w),nn($o),qn($o,_)}function gf(){nn($o),nn(Yu),nn(Ju)}function Nb(_){var w=ml(Ju.current),O=ml($o.current);w=G(O,_.type,w),O!==w&&(qn(Yu,_),qn($o,w))}function kv(_){Yu.current===_&&(nn($o),nn(Yu))}var $i=Wn(0);function Qm(_){for(var w=_;w!==null;){if(w.tag===13){var O=w.memoizedState;if(O!==null&&(O=O.dehydrated,O===null||Wo(O)||To(O)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===_)break;for(;w.sibling===null;){if(w.return===null||w.return===_)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var ha=[];function Zu(){for(var _=0;_<ha.length;_++){var w=ha[_];Ue?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}ha.length=0}var $h=a.ReactCurrentDispatcher,pa=a.ReactCurrentBatchConfig,ed=0,Hi=null,zs=null,Vs=null,Ym=!1,$l=!1,td=0,Hh=0;function Ws(){throw Error(o(321))}function Jm(_,w){if(w===null)return!1;for(var O=0;O<w.length&&O<_.length;O++)if(!wt(_[O],w[O]))return!1;return!0}function yf(_,w,O,j,K,ae){if(ed=ae,Hi=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,$h.current=_===null||_.memoizedState===null?jv:Bv,_=O(j,K),$l){ae=0;do{if($l=!1,td=0,25<=ae)throw Error(o(301));ae+=1,Vs=zs=null,w.updateQueue=null,$h.current=Uv,_=O(j,K)}while($l)}if($h.current=bf,w=zs!==null&&zs.next!==null,ed=0,Vs=zs=Hi=null,Ym=!1,w)throw Error(o(300));return _}function mu(){var _=td!==0;return td=0,_}function gl(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vs===null?Hi.memoizedState=Vs=_:Vs=Vs.next=_,Vs}function yl(){if(zs===null){var _=Hi.alternate;_=_!==null?_.memoizedState:null}else _=zs.next;var w=Vs===null?Hi.memoizedState:Vs.next;if(w!==null)Vs=w,zs=_;else{if(_===null)throw Error(o(310));zs=_,_={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},Vs===null?Hi.memoizedState=Vs=_:Vs=Vs.next=_}return Vs}function Hl(_,w){return typeof w=="function"?w(_):w}function Gh(_){var w=yl(),O=w.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=_;var j=zs,K=j.baseQueue,ae=O.pending;if(ae!==null){if(K!==null){var Fe=K.next;K.next=ae.next,ae.next=Fe}j.baseQueue=K=ae,O.pending=null}if(K!==null){ae=K.next,j=j.baseState;var et=Fe=null,Nt=null,rn=ae;do{var Dn=rn.lane;if((ed&Dn)===Dn)Nt!==null&&(Nt=Nt.next={lane:0,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null}),j=rn.hasEagerState?rn.eagerState:_(j,rn.action);else{var vr={lane:Dn,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null};Nt===null?(et=Nt=vr,Fe=j):Nt=Nt.next=vr,Hi.lanes|=Dn,Xl|=Dn}rn=rn.next}while(rn!==null&&rn!==ae);Nt===null?Fe=j:Nt.next=et,wt(j,w.memoizedState)||($s=!0),w.memoizedState=j,w.baseState=Fe,w.baseQueue=Nt,O.lastRenderedState=j}if(_=O.interleaved,_!==null){K=_;do ae=K.lane,Hi.lanes|=ae,Xl|=ae,K=K.next;while(K!==_)}else K===null&&(O.lanes=0);return[w.memoizedState,O.dispatch]}function Xh(_){var w=yl(),O=w.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=_;var j=O.dispatch,K=O.pending,ae=w.memoizedState;if(K!==null){O.pending=null;var Fe=K=K.next;do ae=_(ae,Fe.action),Fe=Fe.next;while(Fe!==K);wt(ae,w.memoizedState)||($s=!0),w.memoizedState=ae,w.baseQueue===null&&(w.baseState=ae),O.lastRenderedState=ae}return[ae,j]}function Ov(){}function Lv(_,w){var O=Hi,j=yl(),K=w(),ae=!wt(j.memoizedState,K);if(ae&&(j.memoizedState=K,$s=!0),j=j.queue,vf(gc.bind(null,O,j,_),[_]),j.getSnapshot!==w||ae||Vs!==null&&Vs.memoizedState.tag&1){if(O.flags|=2048,Qh(9,Fv.bind(null,O,j,K,w),void 0,null),as===null)throw Error(o(349));ed&30||Dv(O,w,K)}return K}function Dv(_,w,O){_.flags|=16384,_={getSnapshot:w,value:O},w=Hi.updateQueue,w===null?(w={lastEffect:null,stores:null},Hi.updateQueue=w,w.stores=[_]):(O=w.stores,O===null?w.stores=[_]:O.push(_))}function Fv(_,w,O,j){w.value=O,w.getSnapshot=j,Zm(w)&&vo(_,1,-1)}function gc(_,w,O){return O(function(){Zm(w)&&vo(_,1,-1)})}function Zm(_){var w=_.getSnapshot;_=_.value;try{var O=w();return!wt(_,O)}catch{return!0}}function Kh(_){var w=gl();return typeof _=="function"&&(_=_()),w.memoizedState=w.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:_},w.queue=_,_=_.dispatch=t3.bind(null,Hi,_),[w.memoizedState,_]}function Qh(_,w,O,j){return _={tag:_,create:w,destroy:O,deps:j,next:null},w=Hi.updateQueue,w===null?(w={lastEffect:null,stores:null},Hi.updateQueue=w,w.lastEffect=_.next=_):(O=w.lastEffect,O===null?w.lastEffect=_.next=_:(j=O.next,O.next=_,_.next=j,w.lastEffect=_)),_}function Pb(){return yl().memoizedState}function gu(_,w,O,j){var K=gl();Hi.flags|=_,K.memoizedState=Qh(1|w,O,void 0,j===void 0?null:j)}function eg(_,w,O,j){var K=yl();j=j===void 0?null:j;var ae=void 0;if(zs!==null){var Fe=zs.memoizedState;if(ae=Fe.destroy,j!==null&&Jm(j,Fe.deps)){K.memoizedState=Qh(w,O,ae,j);return}}Hi.flags|=_,K.memoizedState=Qh(1|w,O,ae,j)}function tg(_,w){return gu(8390656,8,_,w)}function vf(_,w){return eg(2048,8,_,w)}function _i(_,w){return eg(4,2,_,w)}function ng(_,w){return eg(4,4,_,w)}function Yh(_,w){if(typeof w=="function")return _=_(),w(_),function(){w(null)};if(w!=null)return _=_(),w.current=_,function(){w.current=null}}function _f(_,w,O){return O=O!=null?O.concat([_]):null,eg(4,4,Yh.bind(null,w,_),O)}function rg(){}function ig(_,w){var O=yl();w=w===void 0?null:w;var j=O.memoizedState;return j!==null&&w!==null&&Jm(w,j[1])?j[0]:(O.memoizedState=[_,w],_)}function xf(_,w){var O=yl();w=w===void 0?null:w;var j=O.memoizedState;return j!==null&&w!==null&&Jm(w,j[1])?j[0]:(_=_(),O.memoizedState=[_,w],_)}function sg(_,w){var O=U;U=O!==0&&4>O?O:4,_(!0);var j=pa.transition;pa.transition={};try{_(!1),w()}finally{U=O,pa.transition=j}}function nd(){return yl().memoizedState}function kb(_,w,O){var j=bl(_);O={lane:j,action:O,hasEagerState:!1,eagerState:null,next:null},Ob(_)?qv(w,O):(Jh(_,w,O),O=Jr(),_=vo(_,j,O),_!==null&&Zh(_,w,j))}function t3(_,w,O){var j=bl(_),K={lane:j,action:O,hasEagerState:!1,eagerState:null,next:null};if(Ob(_))qv(w,K);else{Jh(_,w,K);var ae=_.alternate;if(_.lanes===0&&(ae===null||ae.lanes===0)&&(ae=w.lastRenderedReducer,ae!==null))try{var Fe=w.lastRenderedState,et=ae(Fe,O);if(K.hasEagerState=!0,K.eagerState=et,wt(et,Fe))return}catch{}finally{}O=Jr(),_=vo(_,j,O),_!==null&&Zh(_,w,j)}}function Ob(_){var w=_.alternate;return _===Hi||w!==null&&w===Hi}function qv(_,w){$l=Ym=!0;var O=_.pending;O===null?w.next=w:(w.next=O.next,O.next=w),_.pending=w}function Jh(_,w,O){as!==null&&_.mode&1&&!(Ir&2)?(_=w.interleaved,_===null?(O.next=O,lt===null?lt=[w]:lt.push(w)):(O.next=_.next,_.next=O),w.interleaved=O):(_=w.pending,_===null?O.next=O:(O.next=_.next,_.next=O),w.pending=O)}function Zh(_,w,O){if(O&4194240){var j=w.lanes;j&=_.pendingLanes,O|=j,w.lanes=O,B(_,O)}}var bf={readContext:We,useCallback:Ws,useContext:Ws,useEffect:Ws,useImperativeHandle:Ws,useInsertionEffect:Ws,useLayoutEffect:Ws,useMemo:Ws,useReducer:Ws,useRef:Ws,useState:Ws,useDebugValue:Ws,useDeferredValue:Ws,useTransition:Ws,useMutableSource:Ws,useSyncExternalStore:Ws,useId:Ws,unstable_isNewReconciler:!1},jv={readContext:We,useCallback:function(_,w){return gl().memoizedState=[_,w===void 0?null:w],_},useContext:We,useEffect:tg,useImperativeHandle:function(_,w,O){return O=O!=null?O.concat([_]):null,gu(4194308,4,Yh.bind(null,w,_),O)},useLayoutEffect:function(_,w){return gu(4194308,4,_,w)},useInsertionEffect:function(_,w){return gu(4,2,_,w)},useMemo:function(_,w){var O=gl();return w=w===void 0?null:w,_=_(),O.memoizedState=[_,w],_},useReducer:function(_,w,O){var j=gl();return w=O!==void 0?O(w):w,j.memoizedState=j.baseState=w,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:w},j.queue=_,_=_.dispatch=kb.bind(null,Hi,_),[j.memoizedState,_]},useRef:function(_){var w=gl();return _={current:_},w.memoizedState=_},useState:Kh,useDebugValue:rg,useDeferredValue:function(_){var w=Kh(_),O=w[0],j=w[1];return tg(function(){var K=pa.transition;pa.transition={};try{j(_)}finally{pa.transition=K}},[_]),O},useTransition:function(){var _=Kh(!1),w=_[0];return _=sg.bind(null,_[1]),gl().memoizedState=_,[w,_]},useMutableSource:function(){},useSyncExternalStore:function(_,w,O){var j=Hi,K=gl();if(Oi){if(O===void 0)throw Error(o(407));O=O()}else{if(O=w(),as===null)throw Error(o(349));ed&30||Dv(j,w,O)}K.memoizedState=O;var ae={value:O,getSnapshot:w};return K.queue=ae,tg(gc.bind(null,j,ae,_),[_]),j.flags|=2048,Qh(9,Fv.bind(null,j,ae,O,w),void 0,null),O},useId:function(){var _=gl(),w=as.identifierPrefix;if(Oi){var O=pl,j=hl;O=(j&~(1<<32-Fr(j)-1)).toString(32)+O,w=":"+w+"R"+O,O=td++,0<O&&(w+="H"+O.toString(32)),w+=":"}else O=Hh++,w=":"+w+"r"+O.toString(32)+":";return _.memoizedState=w},unstable_isNewReconciler:!1},Bv={readContext:We,useCallback:ig,useContext:We,useEffect:vf,useImperativeHandle:_f,useInsertionEffect:_i,useLayoutEffect:ng,useMemo:xf,useReducer:Gh,useRef:Pb,useState:function(){return Gh(Hl)},useDebugValue:rg,useDeferredValue:function(_){var w=Gh(Hl),O=w[0],j=w[1];return vf(function(){var K=pa.transition;pa.transition={};try{j(_)}finally{pa.transition=K}},[_]),O},useTransition:function(){var _=Gh(Hl)[0],w=yl().memoizedState;return[_,w]},useMutableSource:Ov,useSyncExternalStore:Lv,useId:nd,unstable_isNewReconciler:!1},Uv={readContext:We,useCallback:ig,useContext:We,useEffect:vf,useImperativeHandle:_f,useInsertionEffect:_i,useLayoutEffect:ng,useMemo:xf,useReducer:Xh,useRef:Pb,useState:function(){return Xh(Hl)},useDebugValue:rg,useDeferredValue:function(_){var w=Xh(Hl),O=w[0],j=w[1];return vf(function(){var K=pa.transition;pa.transition={};try{j(_)}finally{pa.transition=K}},[_]),O},useTransition:function(){var _=Xh(Hl)[0],w=yl().memoizedState;return[_,w]},useMutableSource:Ov,useSyncExternalStore:Lv,useId:nd,unstable_isNewReconciler:!1};function zv(_,w){try{var O="",j=w;do O+=Ie(j),j=j.return;while(j);var K=O}catch(ae){K=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:_,source:w,stack:K}}function og(_,w){try{console.error(w.value)}catch(O){setTimeout(function(){throw O})}}var n3=typeof WeakMap=="function"?WeakMap:Map;function Lb(_,w,O){O=Vn(-1,O),O.tag=3,O.payload={element:null};var j=w.value;return O.callback=function(){If||(If=!0,Ai=j),og(_,w)},O}function ag(_,w,O){O=Vn(-1,O),O.tag=3;var j=_.type.getDerivedStateFromError;if(typeof j=="function"){var K=w.value;O.payload=function(){return j(K)},O.callback=function(){og(_,w)}}var ae=_.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(O.callback=function(){og(_,w),typeof j!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var Fe=w.stack;this.componentDidCatch(w.value,{componentStack:Fe!==null?Fe:""})}),O}function yc(_,w,O){var j=_.pingCache;if(j===null){j=_.pingCache=new n3;var K=new Set;j.set(w,K)}else K=j.get(w),K===void 0&&(K=new Set,j.set(w,K));K.has(O)||(K.add(O),_=o_.bind(null,_,w,O),w.then(_,_))}function Vv(_){do{var w;if((w=_.tag===13)&&(w=_.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return _;_=_.return}while(_!==null);return null}function rd(_,w,O,j,K){return _.mode&1?(_.flags|=65536,_.lanes=K,_):(_===w?_.flags|=65536:(_.flags|=128,O.flags|=131072,O.flags&=-52805,O.tag===1&&(O.alternate===null?O.tag=17:(w=Vn(-1,1),w.tag=2,ot(O,w))),O.lanes|=1),_)}function Cs(_){_.flags|=4}function wf(_,w){if(_!==null&&_.child===w.child)return!0;if(w.flags&16)return!1;for(_=w.child;_!==null;){if(_.flags&12854||_.subtreeFlags&12854)return!1;_=_.sibling}return!0}var ma,id,lg,cg;if(Ye)ma=function(_,w){for(var O=w.child;O!==null;){if(O.tag===5||O.tag===6)fe(_,O.stateNode);else if(O.tag!==4&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===w)break;for(;O.sibling===null;){if(O.return===null||O.return===w)return;O=O.return}O.sibling.return=O.return,O=O.sibling}},id=function(){},lg=function(_,w,O,j,K){if(_=_.memoizedProps,_!==j){var ae=w.stateNode,Fe=ml($o.current);O=ce(ae,O,_,j,K,Fe),(w.updateQueue=O)&&Cs(w)}},cg=function(_,w,O,j){O!==j&&Cs(w)};else if(Ne){ma=function(_,w,O,j){for(var K=w.child;K!==null;){if(K.tag===5){var ae=K.stateNode;O&&j&&(ae=gr(ae,K.type,K.memoizedProps,K)),fe(_,ae)}else if(K.tag===6)ae=K.stateNode,O&&j&&(ae=hi(ae,K.memoizedProps,K)),fe(_,ae);else if(K.tag!==4){if(K.tag===22&&K.memoizedState!==null)ae=K.child,ae!==null&&(ae.return=K),ma(_,K,!0,!0);else if(K.child!==null){K.child.return=K,K=K.child;continue}}if(K===w)break;for(;K.sibling===null;){if(K.return===null||K.return===w)return;K=K.return}K.sibling.return=K.return,K=K.sibling}};var yu=function(_,w,O,j){for(var K=w.child;K!==null;){if(K.tag===5){var ae=K.stateNode;O&&j&&(ae=gr(ae,K.type,K.memoizedProps,K)),Hn(_,ae)}else if(K.tag===6)ae=K.stateNode,O&&j&&(ae=hi(ae,K.memoizedProps,K)),Hn(_,ae);else if(K.tag!==4){if(K.tag===22&&K.memoizedState!==null)ae=K.child,ae!==null&&(ae.return=K),yu(_,K,!0,!0);else if(K.child!==null){K.child.return=K,K=K.child;continue}}if(K===w)break;for(;K.sibling===null;){if(K.return===null||K.return===w)return;K=K.return}K.sibling.return=K.return,K=K.sibling}};id=function(_,w){var O=w.stateNode;if(!wf(_,w)){_=O.containerInfo;var j=Ft(_);yu(j,w,!1,!1),O.pendingChildren=j,Cs(w),Lr(_,j)}},lg=function(_,w,O,j,K){var ae=_.stateNode,Fe=_.memoizedProps;if((_=wf(_,w))&&Fe===j)w.stateNode=ae;else{var et=w.stateNode,Nt=ml($o.current),rn=null;Fe!==j&&(rn=ce(et,O,Fe,j,K,Nt)),_&&rn===null?w.stateNode=ae:(ae=gn(ae,rn,O,Fe,j,w,_,et),ge(ae,O,j,K,Nt)&&Cs(w),w.stateNode=ae,_?Cs(w):ma(ae,w,!1,!1))}},cg=function(_,w,O,j){O!==j?(_=ml(Ju.current),O=ml($o.current),w.stateNode=be(j,_,O,w),Cs(w)):w.stateNode=_.stateNode}}else id=function(){},lg=function(){},cg=function(){};function vc(_,w){if(!Oi)switch(_.tailMode){case"hidden":w=_.tail;for(var O=null;w!==null;)w.alternate!==null&&(O=w),w=w.sibling;O===null?_.tail=null:O.sibling=null;break;case"collapsed":O=_.tail;for(var j=null;O!==null;)O.alternate!==null&&(j=O),O=O.sibling;j===null?w||_.tail===null?_.tail=null:_.tail.sibling=null:j.sibling=null}}function os(_){var w=_.alternate!==null&&_.alternate.child===_.child,O=0,j=0;if(w)for(var K=_.child;K!==null;)O|=K.lanes|K.childLanes,j|=K.subtreeFlags&0xe00000,j|=K.flags&0xe00000,K.return=_,K=K.sibling;else for(K=_.child;K!==null;)O|=K.lanes|K.childLanes,j|=K.subtreeFlags,j|=K.flags,K.return=_,K=K.sibling;return _.subtreeFlags|=j,_.childLanes=O,w}function ug(_,w,O){var j=w.pendingProps;switch(Qu(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(w),null;case 1:return Dr(w.type)&&ar(),os(w),null;case 3:return j=w.stateNode,gf(),nn(Mr),nn(Tr),Zu(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(_===null||_.child===null)&&(Wh(w)?Cs(w):_===null||_.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,ja!==null&&(fp(ja),ja=null))),id(_,w),os(w),null;case 5:kv(w),O=ml(Ju.current);var K=w.type;if(_!==null&&w.stateNode!=null)lg(_,w,K,j,O),_.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!j){if(w.stateNode===null)throw Error(o(166));return os(w),null}if(_=ml($o.current),Wh(w)){if(!ke)throw Error(o(175));_=hc(w.stateNode,w.type,w.memoizedProps,O,_,w,!df),w.updateQueue=_,_!==null&&Cs(w)}else{var ae=Z(K,j,O,_,w);ma(ae,w,!1,!1),w.stateNode=ae,ge(ae,K,j,O,_)&&Cs(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return os(w),null;case 6:if(_&&w.stateNode!=null)cg(_,w,_.memoizedProps,j);else{if(typeof j!="string"&&w.stateNode===null)throw Error(o(166));if(_=ml(Ju.current),O=ml($o.current),Wh(w)){if(!ke)throw Error(o(176));if(_=w.stateNode,j=w.memoizedProps,(O=Ao(_,j,w,!df))&&(K=Co,K!==null))switch(ae=(K.mode&1)!==0,K.tag){case 3:nt(K.stateNode.containerInfo,_,j,ae);break;case 5:yt(K.type,K.memoizedProps,K.stateNode,_,j,ae)}O&&Cs(w)}else w.stateNode=be(j,_,O,w)}return os(w),null;case 13:if(nn($i),j=w.memoizedState,Oi&&ro!==null&&w.mode&1&&!(w.flags&128)){for(_=ro;_;)_=Io(_);return ff(),w.flags|=98560,w}if(j!==null&&j.dehydrated!==null){if(j=Wh(w),_===null){if(!j)throw Error(o(318));if(!ke)throw Error(o(344));if(_=w.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));ou(_,w)}else ff(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return os(w),null}return ja!==null&&(fp(ja),ja=null),w.flags&128?(w.lanes=O,w):(j=j!==null,O=!1,_===null?Wh(w):O=_.memoizedState!==null,j&&!O&&(w.child.flags|=8192,w.mode&1&&(_===null||$i.current&1?Qi===0&&(Qi=3):yg())),w.updateQueue!==null&&(w.flags|=4),os(w),null);case 4:return gf(),id(_,w),_===null&&ht(w.stateNode.containerInfo),os(w),null;case 10:return jn(w.type._context),os(w),null;case 17:return Dr(w.type)&&ar(),os(w),null;case 19:if(nn($i),K=w.memoizedState,K===null)return os(w),null;if(j=(w.flags&128)!==0,ae=K.rendering,ae===null)if(j)vc(K,!1);else{if(Qi!==0||_!==null&&_.flags&128)for(_=w.child;_!==null;){if(ae=Qm(_),ae!==null){for(w.flags|=128,vc(K,!1),_=ae.updateQueue,_!==null&&(w.updateQueue=_,w.flags|=4),w.subtreeFlags=0,_=O,j=w.child;j!==null;)O=j,K=_,O.flags&=0xe00002,ae=O.alternate,ae===null?(O.childLanes=0,O.lanes=K,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=ae.childLanes,O.lanes=ae.lanes,O.child=ae.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=ae.memoizedProps,O.memoizedState=ae.memoizedState,O.updateQueue=ae.updateQueue,O.type=ae.type,K=ae.dependencies,O.dependencies=K===null?null:{lanes:K.lanes,firstContext:K.firstContext}),j=j.sibling;return qn($i,$i.current&1|2),w.child}_=_.sibling}K.tail!==null&&xt()>xu&&(w.flags|=128,j=!0,vc(K,!1),w.lanes=4194304)}else{if(!j)if(_=Qm(ae),_!==null){if(w.flags|=128,j=!0,_=_.updateQueue,_!==null&&(w.updateQueue=_,w.flags|=4),vc(K,!0),K.tail===null&&K.tailMode==="hidden"&&!ae.alternate&&!Oi)return os(w),null}else 2*xt()-K.renderingStartTime>xu&&O!==0x40000000&&(w.flags|=128,j=!0,vc(K,!1),w.lanes=4194304);K.isBackwards?(ae.sibling=w.child,w.child=ae):(_=K.last,_!==null?_.sibling=ae:w.child=ae,K.last=ae)}return K.tail!==null?(w=K.tail,K.rendering=w,K.tail=w.sibling,K.renderingStartTime=xt(),w.sibling=null,_=$i.current,qn($i,j?_&1|2:_&1),w):(os(w),null);case 22:case 23:return hp(),j=w.memoizedState!==null,_!==null&&_.memoizedState!==null!==j&&(w.flags|=8192),j&&w.mode&1?yo&0x40000000&&(os(w),Ye&&w.subtreeFlags&6&&(w.flags|=8192)):os(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var Wv=a.ReactCurrentOwner,$s=!1;function Ki(_,w,O,j){w.child=_===null?Rb(w,null,O,j):mc(w,_.child,O,j)}function xi(_,w,O,j,K){O=O.render;var ae=w.ref;return jt(w,K),j=yf(_,w,O,j,ae,K),O=mu(),_!==null&&!$s?(w.updateQueue=_.updateQueue,w.flags&=-2053,_.lanes&=~K,Ho(_,w,K)):(Oi&&O&&uf(w),w.flags|=1,Ki(_,w,j,K),w.child)}function yi(_,w,O,j,K){if(_===null){var ae=O.type;return typeof ae=="function"&&!_g(ae)&&ae.defaultProps===void 0&&O.compare===null&&O.defaultProps===void 0?(w.tag=15,w.type=ae,_c(_,w,ae,j,K)):(_=xg(O.type,null,j,w,w.mode,K),_.ref=w.ref,_.return=w,w.child=_)}if(ae=_.child,!(_.lanes&K)){var Fe=ae.memoizedProps;if(O=O.compare,O=O!==null?O:qt,O(Fe,j)&&_.ref===w.ref)return Ho(_,w,K)}return w.flags|=1,_=Ac(ae,j),_.ref=w.ref,_.return=w,w.child=_}function _c(_,w,O,j,K){if(_!==null&&qt(_.memoizedProps,j)&&_.ref===w.ref)if($s=!1,(_.lanes&K)!==0)_.flags&131072&&($s=!0);else return w.lanes=_.lanes,Ho(_,w,K);return xc(_,w,O,j,K)}function io(_,w,O){var j=w.pendingProps,K=j.children,ae=_!==null?_.memoizedState:null;if(j.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},qn(hd,yo),yo|=O;else if(O&0x40000000)w.memoizedState={baseLanes:0,cachePool:null},j=ae!==null?ae.baseLanes:O,qn(hd,yo),yo|=j;else return _=ae!==null?ae.baseLanes|O:O,w.lanes=w.childLanes=0x40000000,w.memoizedState={baseLanes:_,cachePool:null},w.updateQueue=null,qn(hd,yo),yo|=_,null;else ae!==null?(j=ae.baseLanes|O,w.memoizedState=null):j=O,qn(hd,yo),yo|=j;return Ki(_,w,K,O),w.child}function Ro(_,w){var O=w.ref;(_===null&&O!==null||_!==null&&_.ref!==O)&&(w.flags|=512,w.flags|=2097152)}function xc(_,w,O,j,K){var ae=Dr(O)?yr:Tr.current;return ae=kn(w,ae),jt(w,K),O=yf(_,w,O,j,ae,K),j=mu(),_!==null&&!$s?(w.updateQueue=_.updateQueue,w.flags&=-2053,_.lanes&=~K,Ho(_,w,K)):(Oi&&j&&uf(w),w.flags|=1,Ki(_,w,O,K),w.child)}function sd(_,w,O,j,K){if(Dr(O)){var ae=!0;ds(w)}else ae=!1;if(jt(w,K),w.stateNode===null)_!==null&&(_.alternate=null,w.alternate=null,w.flags|=2),vt(w,O,j),an(w,O,j,K),j=!0;else if(_===null){var Fe=w.stateNode,et=w.memoizedProps;Fe.props=et;var Nt=Fe.context,rn=O.contextType;typeof rn=="object"&&rn!==null?rn=We(rn):(rn=Dr(O)?yr:Tr.current,rn=kn(w,rn));var Dn=O.getDerivedStateFromProps,vr=typeof Dn=="function"||typeof Fe.getSnapshotBeforeUpdate=="function";vr||typeof Fe.UNSAFE_componentWillReceiveProps!="function"&&typeof Fe.componentWillReceiveProps!="function"||(et!==j||Nt!==rn)&&en(w,Fe,j,rn),kt=!1;var tr=w.memoizedState;Fe.state=tr,mn(w,j,Fe,K),Nt=w.memoizedState,et!==j||tr!==Nt||Mr.current||kt?(typeof Dn=="function"&&(pr(w,O,Dn,j),Nt=w.memoizedState),(et=kt||ki(w,O,et,j,tr,Nt,rn))?(vr||typeof Fe.UNSAFE_componentWillMount!="function"&&typeof Fe.componentWillMount!="function"||(typeof Fe.componentWillMount=="function"&&Fe.componentWillMount(),typeof Fe.UNSAFE_componentWillMount=="function"&&Fe.UNSAFE_componentWillMount()),typeof Fe.componentDidMount=="function"&&(w.flags|=4194308)):(typeof Fe.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=j,w.memoizedState=Nt),Fe.props=j,Fe.state=Nt,Fe.context=rn,j=et):(typeof Fe.componentDidMount=="function"&&(w.flags|=4194308),j=!1)}else{Fe=w.stateNode,Rn(_,w),et=w.memoizedProps,rn=w.type===w.elementType?et:Le(w.type,et),Fe.props=rn,vr=w.pendingProps,tr=Fe.context,Nt=O.contextType,typeof Nt=="object"&&Nt!==null?Nt=We(Nt):(Nt=Dr(O)?yr:Tr.current,Nt=kn(w,Nt));var Nr=O.getDerivedStateFromProps;(Dn=typeof Nr=="function"||typeof Fe.getSnapshotBeforeUpdate=="function")||typeof Fe.UNSAFE_componentWillReceiveProps!="function"&&typeof Fe.componentWillReceiveProps!="function"||(et!==vr||tr!==Nt)&&en(w,Fe,j,Nt),kt=!1,tr=w.memoizedState,Fe.state=tr,mn(w,j,Fe,K);var Mn=w.memoizedState;et!==vr||tr!==Mn||Mr.current||kt?(typeof Nr=="function"&&(pr(w,O,Nr,j),Mn=w.memoizedState),(rn=kt||ki(w,O,rn,j,tr,Mn,Nt)||!1)?(Dn||typeof Fe.UNSAFE_componentWillUpdate!="function"&&typeof Fe.componentWillUpdate!="function"||(typeof Fe.componentWillUpdate=="function"&&Fe.componentWillUpdate(j,Mn,Nt),typeof Fe.UNSAFE_componentWillUpdate=="function"&&Fe.UNSAFE_componentWillUpdate(j,Mn,Nt)),typeof Fe.componentDidUpdate=="function"&&(w.flags|=4),typeof Fe.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof Fe.componentDidUpdate!="function"||et===_.memoizedProps&&tr===_.memoizedState||(w.flags|=4),typeof Fe.getSnapshotBeforeUpdate!="function"||et===_.memoizedProps&&tr===_.memoizedState||(w.flags|=1024),w.memoizedProps=j,w.memoizedState=Mn),Fe.props=j,Fe.state=Mn,Fe.context=Nt,j=rn):(typeof Fe.componentDidUpdate!="function"||et===_.memoizedProps&&tr===_.memoizedState||(w.flags|=4),typeof Fe.getSnapshotBeforeUpdate!="function"||et===_.memoizedProps&&tr===_.memoizedState||(w.flags|=1024),j=!1)}return go(_,w,O,j,ae,K)}function go(_,w,O,j,K,ae){Ro(_,w);var Fe=(w.flags&128)!==0;if(!j&&!Fe)return K&&qa(w,O,!1),Ho(_,w,ae);j=w.stateNode,Wv.current=w;var et=Fe&&typeof O.getDerivedStateFromError!="function"?null:j.render();return w.flags|=1,_!==null&&Fe?(w.child=mc(w,_.child,null,ae),w.child=mc(w,null,et,ae)):Ki(_,w,et,ae),w.memoizedState=j.state,K&&qa(w,O,!0),w.child}function ep(_){var w=_.stateNode;w.pendingContext?ss(_,w.pendingContext,w.pendingContext!==w.context):w.context&&ss(_,w.context,!1),Km(_,w.containerInfo)}function $v(_,w,O,j,K){return ff(),Xm(K),w.flags|=256,Ki(_,w,O,j),w.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function od(_){return{baseLanes:_,cachePool:null}}function Hv(_,w,O){var j=w.pendingProps,K=$i.current,ae=!1,Fe=(w.flags&128)!==0,et;if((et=Fe)||(et=_!==null&&_.memoizedState===null?!1:(K&2)!==0),et?(ae=!0,w.flags&=-129):(_===null||_.memoizedState!==null)&&(K|=1),qn($i,K&1),_===null)return hu(w),_=w.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?(w.mode&1?To(_)?w.lanes=8:w.lanes=0x40000000:w.lanes=1,null):(K=j.children,_=j.fallback,ae?(j=w.mode,ae=w.child,K={mode:"hidden",children:K},!(j&1)&&ae!==null?(ae.childLanes=0,ae.pendingProps=K):ae=gp(K,j,0,null),_=vd(_,j,O,null),ae.return=w,_.return=w,ae.sibling=_,w.child=ae,w.child.memoizedState=od(O),w.memoizedState=tp,_):vl(w,K));if(K=_.memoizedState,K!==null){if(et=K.dehydrated,et!==null){if(Fe)return w.flags&256?(w.flags&=-257,rp(_,w,O,Error(o(422)))):w.memoizedState!==null?(w.child=_.child,w.flags|=128,null):(ae=j.fallback,K=w.mode,j=gp({mode:"visible",children:j.children},K,0,null),ae=vd(ae,K,O,null),ae.flags|=2,j.return=w,ae.return=w,j.sibling=ae,w.child=j,w.mode&1&&mc(w,_.child,null,O),w.child.memoizedState=od(O),w.memoizedState=tp,ae);if(!(w.mode&1))w=rp(_,w,O,null);else if(To(et))w=rp(_,w,O,Error(o(419)));else if(j=(O&_.childLanes)!==0,$s||j){if(j=as,j!==null){switch(O&-O){case 4:ae=2;break;case 16:ae=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:ae=32;break;case 0x20000000:ae=0x10000000;break;default:ae=0}j=ae&(j.suspendedLanes|O)?0:ae,j!==0&&j!==K.retryLane&&(K.retryLane=j,vo(_,j,-1))}yg(),w=rp(_,w,O,Error(o(421)))}else Wo(et)?(w.flags|=128,w.child=_.child,w=Bb.bind(null,_),Mo(et,w),w=null):(O=K.treeContext,ke&&(ro=Wl(et),Co=w,Oi=!0,ja=null,df=!1,O!==null&&(Rr[hs++]=hl,Rr[hs++]=pl,Rr[hs++]=Wi,hl=O.id,pl=O.overflow,Wi=w)),w=vl(w,w.pendingProps.children),w.flags|=4096);return w}return ae?(j=dg(_,w,j.children,j.fallback,O),ae=w.child,K=_.child.memoizedState,ae.memoizedState=K===null?od(O):{baseLanes:K.baseLanes|O,cachePool:null},ae.childLanes=_.childLanes&~O,w.memoizedState=tp,j):(O=np(_,w,j.children,O),w.memoizedState=null,O)}return ae?(j=dg(_,w,j.children,j.fallback,O),ae=w.child,K=_.child.memoizedState,ae.memoizedState=K===null?od(O):{baseLanes:K.baseLanes|O,cachePool:null},ae.childLanes=_.childLanes&~O,w.memoizedState=tp,j):(O=np(_,w,j.children,O),w.memoizedState=null,O)}function vl(_,w){return w=gp({mode:"visible",children:w},_.mode,0,null),w.return=_,_.child=w}function np(_,w,O,j){var K=_.child;return _=K.sibling,O=Ac(K,{mode:"visible",children:O}),!(w.mode&1)&&(O.lanes=j),O.return=w,O.sibling=null,_!==null&&(j=w.deletions,j===null?(w.deletions=[_],w.flags|=16):j.push(_)),w.child=O}function dg(_,w,O,j,K){var ae=w.mode;_=_.child;var Fe=_.sibling,et={mode:"hidden",children:O};return!(ae&1)&&w.child!==_?(O=w.child,O.childLanes=0,O.pendingProps=et,w.deletions=null):(O=Ac(_,et),O.subtreeFlags=_.subtreeFlags&0xe00000),Fe!==null?j=Ac(Fe,j):(j=vd(j,ae,K,null),j.flags|=2),j.return=w,O.return=w,O.sibling=j,w.child=O,j}function rp(_,w,O,j){return j!==null&&Xm(j),mc(w,_.child,null,O),_=vl(w,w.pendingProps.children),_.flags|=2,w.memoizedState=null,_}function Db(_,w,O){_.lanes|=w;var j=_.alternate;j!==null&&(j.lanes|=w),Jn(_.return,w,O)}function Gl(_,w,O,j,K){var ae=_.memoizedState;ae===null?_.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:j,tail:O,tailMode:K}:(ae.isBackwards=w,ae.rendering=null,ae.renderingStartTime=0,ae.last=j,ae.tail=O,ae.tailMode=K)}function ad(_,w,O){var j=w.pendingProps,K=j.revealOrder,ae=j.tail;if(Ki(_,w,j.children,O),j=$i.current,j&2)j=j&1|2,w.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=w.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&Db(_,O,w);else if(_.tag===19)Db(_,O,w);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===w)break e;for(;_.sibling===null;){if(_.return===null||_.return===w)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}j&=1}if(qn($i,j),!(w.mode&1))w.memoizedState=null;else switch(K){case"forwards":for(O=w.child,K=null;O!==null;)_=O.alternate,_!==null&&Qm(_)===null&&(K=O),O=O.sibling;O=K,O===null?(K=w.child,w.child=null):(K=O.sibling,O.sibling=null),Gl(w,!1,K,O,ae);break;case"backwards":for(O=null,K=w.child,w.child=null;K!==null;){if(_=K.alternate,_!==null&&Qm(_)===null){w.child=K;break}_=K.sibling,K.sibling=O,O=K,K=_}Gl(w,!0,O,null,ae);break;case"together":Gl(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Ho(_,w,O){if(_!==null&&(w.dependencies=_.dependencies),Xl|=w.lanes,!(O&w.childLanes))return null;if(_!==null&&w.child!==_.child)throw Error(o(153));if(w.child!==null){for(_=w.child,O=Ac(_,_.pendingProps),w.child=O,O.return=w;_.sibling!==null;)_=_.sibling,O=O.sibling=Ac(_,_.pendingProps),O.return=w;O.sibling=null}return w.child}function fg(_,w,O){switch(w.tag){case 3:ep(w),ff();break;case 5:Nb(w);break;case 1:Dr(w.type)&&ds(w);break;case 4:Km(w,w.stateNode.containerInfo);break;case 10:En(w,w.type._context,w.memoizedProps.value);break;case 13:var j=w.memoizedState;if(j!==null)return j.dehydrated!==null?(qn($i,$i.current&1),w.flags|=128,null):O&w.child.childLanes?Hv(_,w,O):(qn($i,$i.current&1),_=Ho(_,w,O),_!==null?_.sibling:null);qn($i,$i.current&1);break;case 19:if(j=(O&w.childLanes)!==0,_.flags&128){if(j)return ad(_,w,O);w.flags|=128}var K=w.memoizedState;if(K!==null&&(K.rendering=null,K.tail=null,K.lastEffect=null),qn($i,$i.current),j)break;return null;case 22:case 23:return w.lanes=0,io(_,w,O)}return Ho(_,w,O)}function hg(_,w){switch(Qu(w),w.tag){case 1:return Dr(w.type)&&ar(),_=w.flags,_&65536?(w.flags=_&-65537|128,w):null;case 3:return gf(),nn(Mr),nn(Tr),Zu(),_=w.flags,_&65536&&!(_&128)?(w.flags=_&-65537|128,w):null;case 5:return kv(w),null;case 13:if(nn($i),_=w.memoizedState,_!==null&&_.dehydrated!==null){if(w.alternate===null)throw Error(o(340));ff()}return _=w.flags,_&65536?(w.flags=_&-65537|128,w):null;case 19:return nn($i),null;case 4:return gf(),null;case 10:return jn(w.type._context),null;case 22:case 23:return hp(),null;case 24:return null;default:return null}}var No=!1,Hs=!1,ld=typeof WeakSet=="function"?WeakSet:Set,fn=null;function Ba(_,w){var O=_.ref;if(O!==null)if(typeof O=="function")try{O(null)}catch(j){ko(_,w,j)}else O.current=null}function bc(_,w,O){try{O()}catch(j){ko(_,w,j)}}var Gv=!1;function Xv(_,w){for(Y(_.containerInfo),fn=w;fn!==null;)if(_=fn,w=_.child,(_.subtreeFlags&1028)!==0&&w!==null)w.return=_,fn=w;else for(;fn!==null;){_=fn;try{var O=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var j=O.memoizedProps,K=O.memoizedState,ae=_.stateNode,Fe=ae.getSnapshotBeforeUpdate(_.elementType===_.type?j:Le(_.type,j),K);ae.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:Ye&&ee(_.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(et){ko(_,_.return,et)}if(w=_.sibling,w!==null){w.return=_.return,fn=w;break}fn=_.return}return O=Gv,Gv=!1,O}function wc(_,w,O){var j=w.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var K=j=j.next;do{if((K.tag&_)===_){var ae=K.destroy;K.destroy=void 0,ae!==void 0&&bc(w,O,ae)}K=K.next}while(K!==j)}}function so(_,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var O=w=w.next;do{if((O.tag&_)===_){var j=O.create;O.destroy=j()}O=O.next}while(O!==w)}}function Po(_){var w=_.ref;if(w!==null){var O=_.stateNode;switch(_.tag){case 5:_=X(O);break;default:_=O}typeof w=="function"?w(_):w.current=_}}function Ii(_,w,O){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Ct,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(_=w.updateQueue,_!==null&&(_=_.lastEffect,_!==null)){var j=_=_.next;do{var K=j,ae=K.destroy;K=K.tag,ae!==void 0&&(K&2||K&4)&&bc(w,O,ae),j=j.next}while(j!==_)}break;case 1:if(Ba(w,O),_=w.stateNode,typeof _.componentWillUnmount=="function")try{_.props=w.memoizedProps,_.state=w.memoizedState,_.componentWillUnmount()}catch(Fe){ko(w,O,Fe)}break;case 5:Ba(w,O);break;case 4:Ye?Yv(_,w,O):Ne&&Ne&&(w=w.stateNode.containerInfo,O=Ft(w),ai(w,O))}}function Ua(_,w,O){for(var j=w;;)if(Ii(_,j,O),j.child===null||Ye&&j.tag===4){if(j===w)break;for(;j.sibling===null;){if(j.return===null||j.return===w)return;j=j.return}j.sibling.return=j.return,j=j.sibling}else j.child.return=j,j=j.child}function Kv(_){var w=_.alternate;w!==null&&(_.alternate=null,Kv(w)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&(w=_.stateNode,w!==null&&Mt(w)),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function Qv(_){return _.tag===5||_.tag===3||_.tag===4}function pg(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||Qv(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function mg(_){if(Ye){e:{for(var w=_.return;w!==null;){if(Qv(w))break e;w=w.return}throw Error(o(160))}var O=w;switch(O.tag){case 5:w=O.stateNode,O.flags&32&&(At(w),O.flags&=-33),O=pg(_),Sf(_,O,w);break;case 3:case 4:w=O.stateNode.containerInfo,O=pg(_),gg(_,O,w);break;default:throw Error(o(161))}}}function gg(_,w,O){var j=_.tag;if(j===5||j===6)_=_.stateNode,w?$t(O,_,w):Jt(O,_);else if(j!==4&&(_=_.child,_!==null))for(gg(_,w,O),_=_.sibling;_!==null;)gg(_,w,O),_=_.sibling}function Sf(_,w,O){var j=_.tag;if(j===5||j===6)_=_.stateNode,w?vn(O,_,w):Dt(O,_);else if(j!==4&&(_=_.child,_!==null))for(Sf(_,w,O),_=_.sibling;_!==null;)Sf(_,w,O),_=_.sibling}function Yv(_,w,O){for(var j=w,K=!1,ae,Fe;;){if(!K){K=j.return;e:for(;;){if(K===null)throw Error(o(160));switch(ae=K.stateNode,K.tag){case 5:Fe=!1;break e;case 3:ae=ae.containerInfo,Fe=!0;break e;case 4:ae=ae.containerInfo,Fe=!0;break e}K=K.return}K=!0}if(j.tag===5||j.tag===6)Ua(_,j,O),Fe?He(ae,j.stateNode):un(ae,j.stateNode);else if(j.tag===18)Fe?du(ae,j.stateNode):uu(ae,j.stateNode);else if(j.tag===4){if(j.child!==null){ae=j.stateNode.containerInfo,Fe=!0,j.child.return=j,j=j.child;continue}}else if(Ii(_,j,O),j.child!==null){j.child.return=j,j=j.child;continue}if(j===w)break;for(;j.sibling===null;){if(j.return===null||j.return===w)return;j=j.return,j.tag===4&&(K=!1)}j.sibling.return=j.return,j=j.sibling}}function vu(_,w){if(Ye){switch(w.tag){case 0:case 11:case 14:case 15:wc(3,w,w.return),so(3,w),wc(5,w,w.return);return;case 1:return;case 5:var O=w.stateNode;if(O!=null){var j=w.memoizedProps;_=_!==null?_.memoizedProps:j;var K=w.type,ae=w.updateQueue;w.updateQueue=null,ae!==null&&hn(O,ae,K,_,j,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));O=w.memoizedProps,Cn(w.stateNode,_!==null?_.memoizedProps:O,O);return;case 3:ke&&_!==null&&_.memoizedState.isDehydrated&&lu(w.stateNode.containerInfo);return;case 12:return;case 13:Ef(w);return;case 19:Ef(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:wc(3,w,w.return),so(3,w),wc(5,w,w.return);return;case 12:return;case 13:Ef(w);return;case 19:Ef(w);return;case 3:ke&&_!==null&&_.memoizedState.isDehydrated&&lu(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ne){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,ai(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function Ef(_){var w=_.updateQueue;if(w!==null){_.updateQueue=null;var O=_.stateNode;O===null&&(O=_.stateNode=new ld),w.forEach(function(j){var K=Ub.bind(null,_,j);O.has(j)||(O.add(j),j.then(K,K))})}}function r3(_,w){for(fn=w;fn!==null;){w=fn;var O=w.deletions;if(O!==null)for(var j=0;j<O.length;j++){var K=O[j];try{var ae=_;Ye?Yv(ae,K,w):Ua(ae,K,w);var Fe=K.alternate;Fe!==null&&(Fe.return=null),K.return=null}catch(Gn){ko(K,w,Gn)}}if(O=w.child,w.subtreeFlags&12854&&O!==null)O.return=w,fn=O;else for(;fn!==null;){w=fn;try{var et=w.flags;if(et&32&&Ye&&At(w.stateNode),et&512){var Nt=w.alternate;if(Nt!==null){var rn=Nt.ref;rn!==null&&(typeof rn=="function"?rn(null):rn.current=null)}}if(et&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var Dn=w.alternate;(Dn===null||Dn.memoizedState===null)&&(up=xt())}break;case 22:var vr=w.memoizedState!==null,tr=w.alternate,Nr=tr!==null&&tr.memoizedState!==null;if(O=w,Ye){e:if(j=O,K=vr,ae=null,Ye)for(var Mn=j;;){if(Mn.tag===5){if(ae===null){ae=Mn;var lo=Mn.stateNode;K?on(lo):Kt(Mn.stateNode,Mn.memoizedProps)}}else if(Mn.tag===6){if(ae===null){var xa=Mn.stateNode;K?$e(xa):_t(xa,Mn.memoizedProps)}}else if((Mn.tag!==22&&Mn.tag!==23||Mn.memoizedState===null||Mn===j)&&Mn.child!==null){Mn.child.return=Mn,Mn=Mn.child;continue}if(Mn===j)break;for(;Mn.sibling===null;){if(Mn.return===null||Mn.return===j)break e;ae===Mn&&(ae=null),Mn=Mn.return}ae===Mn&&(ae=null),Mn.sibling.return=Mn.return,Mn=Mn.sibling}}if(vr&&!Nr&&O.mode&1){fn=O;for(var gt=O.child;gt!==null;){for(O=fn=gt;fn!==null;){j=fn;var st=j.child;switch(j.tag){case 0:case 11:case 14:case 15:wc(4,j,j.return);break;case 1:Ba(j,j.return);var It=j.stateNode;if(typeof It.componentWillUnmount=="function"){var bn=j.return;try{It.props=j.memoizedProps,It.state=j.memoizedState,It.componentWillUnmount()}catch(Gn){ko(j,bn,Gn)}}break;case 5:Ba(j,j.return);break;case 22:if(j.memoizedState!==null){Zv(O);continue}}st!==null?(st.return=j,fn=st):Zv(O)}gt=gt.sibling}}}switch(et&4102){case 2:mg(w),w.flags&=-3;break;case 6:mg(w),w.flags&=-3,vu(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,vu(w.alternate,w);break;case 4:vu(w.alternate,w)}}catch(Gn){ko(w,w.return,Gn)}if(O=w.sibling,O!==null){O.return=w.return,fn=O;break}fn=w.return}}}function ip(_,w,O){fn=_,sp(_)}function sp(_,w,O){for(var j=(_.mode&1)!==0;fn!==null;){var K=fn,ae=K.child;if(K.tag===22&&j){var Fe=K.memoizedState!==null||No;if(!Fe){var et=K.alternate,Nt=et!==null&&et.memoizedState!==null||Hs;et=No;var rn=Hs;if(No=Fe,(Hs=Nt)&&!rn)for(fn=K;fn!==null;)Fe=fn,Nt=Fe.child,Fe.tag===22&&Fe.memoizedState!==null?cd(K):Nt!==null?(Nt.return=Fe,fn=Nt):cd(K);for(;ae!==null;)fn=ae,sp(ae),ae=ae.sibling;fn=K,No=et,Hs=rn}Jv(_)}else K.subtreeFlags&8772&&ae!==null?(ae.return=K,fn=ae):Jv(_)}}function Jv(_){for(;fn!==null;){var w=fn;if(w.flags&8772){var O=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:Hs||so(5,w);break;case 1:var j=w.stateNode;if(w.flags&4&&!Hs)if(O===null)j.componentDidMount();else{var K=w.elementType===w.type?O.memoizedProps:Le(w.type,O.memoizedProps);j.componentDidUpdate(K,O.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var ae=w.updateQueue;ae!==null&&ln(w,ae,j);break;case 3:var Fe=w.updateQueue;if(Fe!==null){if(O=null,w.child!==null)switch(w.child.tag){case 5:O=X(w.child.stateNode);break;case 1:O=w.child.stateNode}ln(w,Fe,O)}break;case 5:var et=w.stateNode;O===null&&w.flags&4&&Vt(et,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(ke&&w.memoizedState===null){var Nt=w.alternate;if(Nt!==null){var rn=Nt.memoizedState;if(rn!==null){var Dn=rn.dehydrated;Dn!==null&&cu(Dn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Hs||w.flags&512&&Po(w)}catch(vr){ko(w,w.return,vr)}}if(w===_){fn=null;break}if(O=w.sibling,O!==null){O.return=w.return,fn=O;break}fn=w.return}}function Zv(_){for(;fn!==null;){var w=fn;if(w===_){fn=null;break}var O=w.sibling;if(O!==null){O.return=w.return,fn=O;break}fn=w.return}}function cd(_){for(;fn!==null;){var w=fn;try{switch(w.tag){case 0:case 11:case 15:var O=w.return;try{so(4,w)}catch(Nt){ko(w,O,Nt)}break;case 1:var j=w.stateNode;if(typeof j.componentDidMount=="function"){var K=w.return;try{j.componentDidMount()}catch(Nt){ko(w,K,Nt)}}var ae=w.return;try{Po(w)}catch(Nt){ko(w,ae,Nt)}break;case 5:var Fe=w.return;try{Po(w)}catch(Nt){ko(w,Fe,Nt)}}}catch(Nt){ko(w,w.return,Nt)}if(w===_){fn=null;break}var et=w.sibling;if(et!==null){et.return=w.return,fn=et;break}fn=w.return}}var op=0,ud=1,dd=2,Sc=3,Tf=4;if(typeof Symbol=="function"&&Symbol.for){var fd=Symbol.for;op=fd("selector.component"),ud=fd("selector.has_pseudo_class"),dd=fd("selector.role"),Sc=fd("selector.test_id"),Tf=fd("selector.text")}function ap(_){var w=me(_);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(_=le(_),_===null)throw Error(o(362));return _.stateNode.current}function lp(_,w){switch(w.$$typeof){case op:if(_.type===w.value)return!0;break;case ud:e:{w=w.value,_=[_,0];for(var O=0;O<_.length;){var j=_[O++],K=_[O++],ae=w[K];if(j.tag!==5||!Ce(j)){for(;ae!=null&&lp(j,ae);)K++,ae=w[K];if(K===w.length){w=!0;break e}else for(j=j.child;j!==null;)_.push(j,K),j=j.sibling}}w=!1}return w;case dd:if(_.tag===5&&Ge(_.stateNode,w.value))return!0;break;case Tf:if((_.tag===5||_.tag===6)&&(_=Oe(_),_!==null&&0<=_.indexOf(w.value)))return!0;break;case Sc:if(_.tag===5&&(_=_.memoizedProps["data-testname"],typeof _=="string"&&_.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function _u(_){switch(_.$$typeof){case op:return"<"+(q(_.value)||"Unknown")+">";case ud:return":has("+(_u(_)||"")+")";case dd:return'[role="'+_.value+'"]';case Tf:return'"'+_.value+'"';case Sc:return'[data-testname="'+_.value+'"]';default:throw Error(o(365))}}function ga(_,w){var O=[];_=[_,0];for(var j=0;j<_.length;){var K=_[j++],ae=_[j++],Fe=w[ae];if(K.tag!==5||!Ce(K)){for(;Fe!=null&&lp(K,Fe);)ae++,Fe=w[ae];if(ae===w.length)O.push(K);else for(K=K.child;K!==null;)_.push(K,ae),K=K.sibling}}return O}function Ec(_,w){if(!Ae)throw Error(o(363));_=ap(_),_=ga(_,w),w=[],_=Array.from(_);for(var O=0;O<_.length;){var j=_[O++];if(j.tag===5)Ce(j)||w.push(j.stateNode);else for(j=j.child;j!==null;)_.push(j),j=j.sibling}return w}var e_=Math.ceil,cp=a.ReactCurrentDispatcher,_l=a.ReactCurrentOwner,pi=a.ReactCurrentBatchConfig,Ir=0,as=null,mi=null,Li=0,yo=0,hd=Wn(0),Qi=0,Mf=null,Xl=0,ya=0,pd=0,Tc=null,ps=null,up=0,xu=1/0;function md(){xu=xt()+500}var If=!1,Ai=null,xl=null,Af=!1,Kl=null,gd=0,yd=0,Mc=null,bi=-1,Yi=0;function Jr(){return Ir&6?xt():bi!==-1?bi:bi=xt()}function bl(_){return _.mode&1?Ir&2&&Li!==0?Li&-Li:Xe.transition!==null?(Yi===0&&(_=Vi,Vi<<=1,!(Vi&4194240)&&(Vi=64),Yi=_),Yi):(_=U,_!==0?_:ct()):1}function vo(_,w,O){if(50<yd)throw yd=0,Mc=null,Error(o(185));var j=bu(_,w);return j===null?null:(A(j,w,O),(!(Ir&2)||j!==as)&&(j===as&&(!(Ir&2)&&(ya|=w),Qi===4&&ao(j,Li)),Go(j,O),w===1&&Ir===0&&!(_.mode&1)&&(md(),tt&&Re())),j)}function bu(_,w){_.lanes|=w;var O=_.alternate;for(O!==null&&(O.lanes|=w),O=_,_=_.return;_!==null;)_.childLanes|=w,O=_.alternate,O!==null&&(O.childLanes|=w),O=_,_=_.return;return O.tag===3?O.stateNode:null}function Go(_,w){var O=_.callbackNode;Vh(_,w);var j=fu(_,_===as?Li:0);if(j===0)O!==null&&De(O),_.callbackNode=null,_.callbackPriority=0;else if(w=j&-j,_.callbackPriority!==w){if(O!=null&&De(O),w===1)_.tag===0?ve(va.bind(null,_)):dn(va.bind(null,_)),xe?Te(function(){Ir===0&&Re()}):oe(zt,Re),O=null;else{switch(H(j)){case 1:O=zt;break;case 4:O=Qt;break;case 16:O=mt;break;case 0x20000000:O=rt;break;default:O=mt}O=vg(O,oo.bind(null,_))}_.callbackPriority=w,_.callbackNode=O}}function oo(_,w){if(bi=-1,Yi=0,Ir&6)throw Error(o(327));var O=_.callbackNode;if(Ql()&&_.callbackNode!==O)return null;var j=fu(_,_===as?Li:0);if(j===0)return null;if(j&30||j&_.expiredLanes||w)w=pp(_,j);else{w=j;var K=Ir;Ir|=2;var ae=r_();(as!==_||Li!==w)&&(md(),Ic(_,w));do try{qb();break}catch(et){n_(_,et)}while(!0);Ot(),cp.current=ae,Ir=K,mi!==null?w=0:(as=null,Li=0,w=Qi)}if(w!==0){if(w===2&&(K=pc(_),K!==0&&(j=K,w=dp(_,K))),w===1)throw O=Mf,Ic(_,0),ao(_,j),Go(_,xt()),O;if(w===6)ao(_,j);else{if(K=_.current.alternate,!(j&30)&&!t_(K)&&(w=pp(_,j),w===2&&(ae=pc(_),ae!==0&&(j=ae,w=dp(_,ae))),w===1))throw O=Mf,Ic(_,0),ao(_,j),Go(_,xt()),O;switch(_.finishedWork=K,_.finishedLanes=j,w){case 0:case 1:throw Error(o(345));case 2:wl(_,ps);break;case 3:if(ao(_,j),(j&0x7c00000)===j&&(w=up+500-xt(),10<w)){if(fu(_,0)!==0)break;if(K=_.suspendedLanes,(K&j)!==j){Jr(),_.pingedLanes|=_.suspendedLanes&K;break}_.timeoutHandle=Ee(wl.bind(null,_,ps),w);break}wl(_,ps);break;case 4:if(ao(_,j),(j&4194240)===j)break;for(w=_.eventTimes,K=-1;0<j;){var Fe=31-Fr(j);ae=1<<Fe,Fe=w[Fe],Fe>K&&(K=Fe),j&=~ae}if(j=K,j=xt()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*e_(j/1960))-j,10<j){_.timeoutHandle=Ee(wl.bind(null,_,ps),j);break}wl(_,ps);break;case 5:wl(_,ps);break;default:throw Error(o(329))}}}return Go(_,xt()),_.callbackNode===O?oo.bind(null,_):null}function dp(_,w){var O=Tc;return _.current.memoizedState.isDehydrated&&(Ic(_,w).flags|=256),_=pp(_,w),_!==2&&(w=ps,ps=O,w!==null&&fp(w)),_}function fp(_){ps===null?ps=_:ps.push.apply(ps,_)}function t_(_){for(var w=_;;){if(w.flags&16384){var O=w.updateQueue;if(O!==null&&(O=O.stores,O!==null))for(var j=0;j<O.length;j++){var K=O[j],ae=K.getSnapshot;K=K.value;try{if(!wt(ae(),K))return!1}catch{return!1}}}if(O=w.child,w.subtreeFlags&16384&&O!==null)O.return=w,w=O;else{if(w===_)break;for(;w.sibling===null;){if(w.return===null||w.return===_)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function ao(_,w){for(w&=~pd,w&=~ya,_.suspendedLanes|=w,_.pingedLanes&=~w,_=_.expirationTimes;0<w;){var O=31-Fr(w),j=1<<O;_[O]=-1,w&=~j}}function va(_){if(Ir&6)throw Error(o(327));Ql();var w=fu(_,0);if(!(w&1))return Go(_,xt()),null;var O=pp(_,w);if(_.tag!==0&&O===2){var j=pc(_);j!==0&&(w=j,O=dp(_,j))}if(O===1)throw O=Mf,Ic(_,0),ao(_,w),Go(_,xt()),O;if(O===6)throw Error(o(345));return _.finishedWork=_.current.alternate,_.finishedLanes=w,wl(_,ps),Go(_,xt()),null}function Cf(_){Kl!==null&&Kl.tag===0&&!(Ir&6)&&Ql();var w=Ir;Ir|=1;var O=pi.transition,j=U;try{if(pi.transition=null,U=1,_)return _()}finally{U=j,pi.transition=O,Ir=w,!(Ir&6)&&Re()}}function hp(){yo=hd.current,nn(hd)}function Ic(_,w){_.finishedWork=null,_.finishedLanes=0;var O=_.timeoutHandle;if(O!==qe&&(_.timeoutHandle=qe,Me(O)),mi!==null)for(O=mi.return;O!==null;){var j=O;switch(Qu(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&ar();break;case 3:gf(),nn(Mr),nn(Tr),Zu();break;case 5:kv(j);break;case 4:gf();break;case 13:nn($i);break;case 19:nn($i);break;case 10:jn(j.type._context);break;case 22:case 23:hp()}O=O.return}if(as=_,mi=_=Ac(_.current,null),Li=yo=w,Qi=0,Mf=null,pd=ya=Xl=0,ps=Tc=null,lt!==null){for(w=0;w<lt.length;w++)if(O=lt[w],j=O.interleaved,j!==null){O.interleaved=null;var K=j.next,ae=O.pending;if(ae!==null){var Fe=ae.next;ae.next=K,j.next=Fe}O.pending=j}lt=null}return _}function n_(_,w){do{var O=mi;try{if(Ot(),$h.current=bf,Ym){for(var j=Hi.memoizedState;j!==null;){var K=j.queue;K!==null&&(K.pending=null),j=j.next}Ym=!1}if(ed=0,Vs=zs=Hi=null,$l=!1,td=0,_l.current=null,O===null||O.return===null){Qi=1,Mf=w,mi=null;break}e:{var ae=_,Fe=O.return,et=O,Nt=w;if(w=Li,et.flags|=32768,Nt!==null&&typeof Nt=="object"&&typeof Nt.then=="function"){var rn=Nt,Dn=et,vr=Dn.tag;if(!(Dn.mode&1)&&(vr===0||vr===11||vr===15)){var tr=Dn.alternate;tr?(Dn.updateQueue=tr.updateQueue,Dn.memoizedState=tr.memoizedState,Dn.lanes=tr.lanes):(Dn.updateQueue=null,Dn.memoizedState=null)}var Nr=Vv(Fe);if(Nr!==null){Nr.flags&=-257,rd(Nr,Fe,et,ae,w),Nr.mode&1&&yc(ae,rn,w),w=Nr,Nt=rn;var Mn=w.updateQueue;if(Mn===null){var lo=new Set;lo.add(Nt),w.updateQueue=lo}else Mn.add(Nt);break e}else{if(!(w&1)){yc(ae,rn,w),yg();break e}Nt=Error(o(426))}}else if(Oi&&et.mode&1){var xa=Vv(Fe);if(xa!==null){!(xa.flags&65536)&&(xa.flags|=256),rd(xa,Fe,et,ae,w),Xm(Nt);break e}}ae=Nt,Qi!==4&&(Qi=2),Tc===null?Tc=[ae]:Tc.push(ae),Nt=zv(Nt,et),et=Fe;do{switch(et.tag){case 3:et.flags|=65536,w&=-w,et.lanes|=w;var gt=Lb(et,Nt,w);Wt(et,gt);break e;case 1:ae=Nt;var st=et.type,It=et.stateNode;if(!(et.flags&128)&&(typeof st.getDerivedStateFromError=="function"||It!==null&&typeof It.componentDidCatch=="function"&&(xl===null||!xl.has(It)))){et.flags|=65536,w&=-w,et.lanes|=w;var bn=ag(et,ae,w);Wt(et,bn);break e}}et=et.return}while(et!==null)}s_(O)}catch(Gn){w=Gn,mi===O&&O!==null&&(mi=O=O.return);continue}break}while(!0)}function r_(){var _=cp.current;return cp.current=bf,_===null?bf:_}function yg(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),as===null||!(Xl&0xfffffff)&&!(ya&0xfffffff)||ao(as,Li)}function pp(_,w){var O=Ir;Ir|=2;var j=r_();as===_&&Li===w||Ic(_,w);do try{Fb();break}catch(K){n_(_,K)}while(!0);if(Ot(),Ir=O,cp.current=j,mi!==null)throw Error(o(261));return as=null,Li=0,Qi}function Fb(){for(;mi!==null;)i_(mi)}function qb(){for(;mi!==null&&!Be();)i_(mi)}function i_(_){var w=l_(_.alternate,_,yo);_.memoizedProps=_.pendingProps,w===null?s_(_):mi=w,_l.current=null}function s_(_){var w=_;do{var O=w.alternate;if(_=w.return,w.flags&32768){if(O=hg(O,w),O!==null){O.flags&=32767,mi=O;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{Qi=6,mi=null;return}}else if(O=ug(O,w,yo),O!==null){mi=O;return}if(w=w.sibling,w!==null){mi=w;return}mi=w=_}while(w!==null);Qi===0&&(Qi=5)}function wl(_,w){var O=U,j=pi.transition;try{pi.transition=null,U=1,jb(_,w,O)}finally{pi.transition=j,U=O}return null}function jb(_,w,O){do Ql();while(Kl!==null);if(Ir&6)throw Error(o(327));var j=_.finishedWork,K=_.finishedLanes;if(j===null)return null;if(_.finishedWork=null,_.finishedLanes=0,j===_.current)throw Error(o(177));_.callbackNode=null,_.callbackPriority=0;var ae=j.lanes|j.childLanes;if(C(_,ae),_===as&&(mi=as=null,Li=0),!(j.subtreeFlags&2064)&&!(j.flags&2064)||Af||(Af=!0,vg(mt,function(){return Ql(),null})),ae=(j.flags&15990)!==0,j.subtreeFlags&15990||ae){ae=pi.transition,pi.transition=null;var Fe=U;U=1;var et=Ir;Ir|=4,_l.current=null,Xv(_,j),r3(_,j),te(_.containerInfo),_.current=j,ip(j),Tt(),Ir=et,U=Fe,pi.transition=ae}else _.current=j;if(Af&&(Af=!1,Kl=_,gd=K),ae=_.pendingLanes,ae===0&&(xl=null),Qe(j.stateNode),Go(_,xt()),w!==null)for(O=_.onRecoverableError,j=0;j<w.length;j++)O(w[j]);if(If)throw If=!1,_=Ai,Ai=null,_;return gd&1&&_.tag!==0&&Ql(),ae=_.pendingLanes,ae&1?_===Mc?yd++:(yd=0,Mc=_):yd=0,Re(),null}function Ql(){if(Kl!==null){var _=H(gd),w=pi.transition,O=U;try{if(pi.transition=null,U=16>_?16:_,Kl===null)var j=!1;else{if(_=Kl,Kl=null,gd=0,Ir&6)throw Error(o(331));var K=Ir;for(Ir|=4,fn=_.current;fn!==null;){var ae=fn,Fe=ae.child;if(fn.flags&16){var et=ae.deletions;if(et!==null){for(var Nt=0;Nt<et.length;Nt++){var rn=et[Nt];for(fn=rn;fn!==null;){var Dn=fn;switch(Dn.tag){case 0:case 11:case 15:wc(8,Dn,ae)}var vr=Dn.child;if(vr!==null)vr.return=Dn,fn=vr;else for(;fn!==null;){Dn=fn;var tr=Dn.sibling,Nr=Dn.return;if(Kv(Dn),Dn===rn){fn=null;break}if(tr!==null){tr.return=Nr,fn=tr;break}fn=Nr}}}var Mn=ae.alternate;if(Mn!==null){var lo=Mn.child;if(lo!==null){Mn.child=null;do{var xa=lo.sibling;lo.sibling=null,lo=xa}while(lo!==null)}}fn=ae}}if(ae.subtreeFlags&2064&&Fe!==null)Fe.return=ae,fn=Fe;else e:for(;fn!==null;){if(ae=fn,ae.flags&2048)switch(ae.tag){case 0:case 11:case 15:wc(9,ae,ae.return)}var gt=ae.sibling;if(gt!==null){gt.return=ae.return,fn=gt;break e}fn=ae.return}}var st=_.current;for(fn=st;fn!==null;){Fe=fn;var It=Fe.child;if(Fe.subtreeFlags&2064&&It!==null)It.return=Fe,fn=It;else e:for(Fe=st;fn!==null;){if(et=fn,et.flags&2048)try{switch(et.tag){case 0:case 11:case 15:so(9,et)}}catch(Gn){ko(et,et.return,Gn)}if(et===Fe){fn=null;break e}var bn=et.sibling;if(bn!==null){bn.return=et.return,fn=bn;break e}fn=et.return}}if(Ir=K,Re(),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Ct,_)}catch{}j=!0}return j}finally{U=O,pi.transition=w}}return!1}function mp(_,w,O){w=zv(O,w),w=Lb(_,w,1),ot(_,w),w=Jr(),_=bu(_,1),_!==null&&(A(_,1,w),Go(_,w))}function ko(_,w,O){if(_.tag===3)mp(_,_,O);else for(;w!==null;){if(w.tag===3){mp(w,_,O);break}else if(w.tag===1){var j=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(xl===null||!xl.has(j))){_=zv(O,_),_=ag(w,_,1),ot(w,_),_=Jr(),w=bu(w,1),w!==null&&(A(w,1,_),Go(w,_));break}}w=w.return}}function o_(_,w,O){var j=_.pingCache;j!==null&&j.delete(w),w=Jr(),_.pingedLanes|=_.suspendedLanes&O,as===_&&(Li&O)===O&&(Qi===4||Qi===3&&(Li&0x7c00000)===Li&&500>xt()-up?Ic(_,0):pd|=O),Go(_,w)}function a_(_,w){w===0&&(_.mode&1?(w=Vr,Vr<<=1,!(Vr&0x7c00000)&&(Vr=4194304)):w=1);var O=Jr();_=bu(_,w),_!==null&&(A(_,w,O),Go(_,O))}function Bb(_){var w=_.memoizedState,O=0;w!==null&&(O=w.retryLane),a_(_,O)}function Ub(_,w){var O=0;switch(_.tag){case 13:var j=_.stateNode,K=_.memoizedState;K!==null&&(O=K.retryLane);break;case 19:j=_.stateNode;break;default:throw Error(o(314))}j!==null&&j.delete(w),a_(_,O)}var l_;l_=function(_,w,O){if(_!==null)if(_.memoizedProps!==w.pendingProps||Mr.current)$s=!0;else{if(!(_.lanes&O)&&!(w.flags&128))return $s=!1,fg(_,w,O);$s=!!(_.flags&131072)}else $s=!1,Oi&&w.flags&1048576&&Hm(w,Qr,w.index);switch(w.lanes=0,w.tag){case 2:var j=w.type;_!==null&&(_.alternate=null,w.alternate=null,w.flags|=2),_=w.pendingProps;var K=kn(w,Tr.current);jt(w,O),K=yf(null,w,j,_,K,O);var ae=mu();return w.flags|=1,typeof K=="object"&&K!==null&&typeof K.render=="function"&&K.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Dr(j)?(ae=!0,ds(w)):ae=!1,w.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,Ht(w),K.updater=xn,w.stateNode=K,K._reactInternals=w,an(w,j,_,O),w=go(null,w,j,!0,ae,O)):(w.tag=0,Oi&&ae&&uf(w),Ki(null,w,K,O),w=w.child),w;case 16:j=w.elementType;e:{switch(_!==null&&(_.alternate=null,w.alternate=null,w.flags|=2),_=w.pendingProps,K=j._init,j=K(j._payload),w.type=j,K=w.tag=i3(j),_=Le(j,_),K){case 0:w=xc(null,w,j,_,O);break e;case 1:w=sd(null,w,j,_,O);break e;case 11:w=xi(null,w,j,_,O);break e;case 14:w=yi(null,w,j,Le(j.type,_),O);break e}throw Error(o(306,j,""))}return w;case 0:return j=w.type,K=w.pendingProps,K=w.elementType===j?K:Le(j,K),xc(_,w,j,K,O);case 1:return j=w.type,K=w.pendingProps,K=w.elementType===j?K:Le(j,K),sd(_,w,j,K,O);case 3:e:{if(ep(w),_===null)throw Error(o(387));j=w.pendingProps,ae=w.memoizedState,K=ae.element,Rn(_,w),mn(w,j,null,O);var Fe=w.memoizedState;if(j=Fe.element,ke&&ae.isDehydrated)if(ae={element:j,isDehydrated:!1,cache:Fe.cache,transitions:Fe.transitions},w.updateQueue.baseState=ae,w.memoizedState=ae,w.flags&256){K=Error(o(423)),w=$v(_,w,j,O,K);break e}else if(j!==K){K=Error(o(424)),w=$v(_,w,j,O,K);break e}else for(ke&&(ro=su(w.stateNode.containerInfo),Co=w,Oi=!0,ja=null,df=!1),O=Rb(w,null,j,O),w.child=O;O;)O.flags=O.flags&-3|4096,O=O.sibling;else{if(ff(),j===K){w=Ho(_,w,O);break e}Ki(_,w,j,O)}w=w.child}return w;case 5:return Nb(w),_===null&&hu(w),j=w.type,K=w.pendingProps,ae=_!==null?_.memoizedProps:null,Fe=K.children,ye(j,K)?Fe=null:ae!==null&&ye(j,ae)&&(w.flags|=32),Ro(_,w),Ki(_,w,Fe,O),w.child;case 6:return _===null&&hu(w),null;case 13:return Hv(_,w,O);case 4:return Km(w,w.stateNode.containerInfo),j=w.pendingProps,_===null?w.child=mc(w,null,j,O):Ki(_,w,j,O),w.child;case 11:return j=w.type,K=w.pendingProps,K=w.elementType===j?K:Le(j,K),xi(_,w,j,K,O);case 7:return Ki(_,w,w.pendingProps,O),w.child;case 8:return Ki(_,w,w.pendingProps.children,O),w.child;case 12:return Ki(_,w,w.pendingProps.children,O),w.child;case 10:e:{if(j=w.type._context,K=w.pendingProps,ae=w.memoizedProps,Fe=K.value,En(w,j,Fe),ae!==null)if(wt(ae.value,Fe)){if(ae.children===K.children&&!Mr.current){w=Ho(_,w,O);break e}}else for(ae=w.child,ae!==null&&(ae.return=w);ae!==null;){var et=ae.dependencies;if(et!==null){Fe=ae.child;for(var Nt=et.firstContext;Nt!==null;){if(Nt.context===j){if(ae.tag===1){Nt=Vn(-1,O&-O),Nt.tag=2;var rn=ae.updateQueue;if(rn!==null){rn=rn.shared;var Dn=rn.pending;Dn===null?Nt.next=Nt:(Nt.next=Dn.next,Dn.next=Nt),rn.pending=Nt}}ae.lanes|=O,Nt=ae.alternate,Nt!==null&&(Nt.lanes|=O),Jn(ae.return,O,w),et.lanes|=O;break}Nt=Nt.next}}else if(ae.tag===10)Fe=ae.type===w.type?null:ae.child;else if(ae.tag===18){if(Fe=ae.return,Fe===null)throw Error(o(341));Fe.lanes|=O,et=Fe.alternate,et!==null&&(et.lanes|=O),Jn(Fe,O,w),Fe=ae.sibling}else Fe=ae.child;if(Fe!==null)Fe.return=ae;else for(Fe=ae;Fe!==null;){if(Fe===w){Fe=null;break}if(ae=Fe.sibling,ae!==null){ae.return=Fe.return,Fe=ae;break}Fe=Fe.return}ae=Fe}Ki(_,w,K.children,O),w=w.child}return w;case 9:return K=w.type,j=w.pendingProps.children,jt(w,O),K=We(K),j=j(K),w.flags|=1,Ki(_,w,j,O),w.child;case 14:return j=w.type,K=Le(j,w.pendingProps),K=Le(j.type,K),yi(_,w,j,K,O);case 15:return _c(_,w,w.type,w.pendingProps,O);case 17:return j=w.type,K=w.pendingProps,K=w.elementType===j?K:Le(j,K),_!==null&&(_.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,Dr(j)?(_=!0,ds(w)):_=!1,jt(w,O),vt(w,j,K),an(w,j,K,O),go(null,w,j,!0,_,O);case 19:return ad(_,w,O);case 22:return io(_,w,O)}throw Error(o(156,w.tag))};function vg(_,w){return oe(_,w)}function zb(_,w,O,j){this.tag=_,this.key=O,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(_,w,O,j){return new zb(_,w,O,j)}function _g(_){return _=_.prototype,!(!_||!_.isReactComponent)}function i3(_){if(typeof _=="function")return _g(_)?1:0;if(_!=null){if(_=_.$$typeof,_===x)return 11;if(_===E)return 14}return 2}function Ac(_,w){var O=_.alternate;return O===null?(O=_a(_.tag,w,_.key,_.mode),O.elementType=_.elementType,O.type=_.type,O.stateNode=_.stateNode,O.alternate=_,_.alternate=O):(O.pendingProps=w,O.type=_.type,O.flags=0,O.subtreeFlags=0,O.deletions=null),O.flags=_.flags&0xe00000,O.childLanes=_.childLanes,O.lanes=_.lanes,O.child=_.child,O.memoizedProps=_.memoizedProps,O.memoizedState=_.memoizedState,O.updateQueue=_.updateQueue,w=_.dependencies,O.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},O.sibling=_.sibling,O.index=_.index,O.ref=_.ref,O}function xg(_,w,O,j,K,ae){var Fe=2;if(j=_,typeof _=="function")_g(_)&&(Fe=1);else if(typeof _=="string")Fe=5;else e:switch(_){case c:return vd(O.children,K,ae,w);case d:Fe=8,K|=8;break;case h:return _=_a(12,O,w,K|2),_.elementType=h,_.lanes=ae,_;case b:return _=_a(13,O,w,K),_.elementType=b,_.lanes=ae,_;case y:return _=_a(19,O,w,K),_.elementType=y,_.lanes=ae,_;case I:return gp(O,K,ae,w);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case p:Fe=10;break e;case g:Fe=9;break e;case x:Fe=11;break e;case E:Fe=14;break e;case T:Fe=16,j=null;break e}throw Error(o(130,_==null?_:typeof _,""))}return w=_a(Fe,O,w,K),w.elementType=_,w.type=j,w.lanes=ae,w}function vd(_,w,O,j){return _=_a(7,_,j,w),_.lanes=O,_}function gp(_,w,O,j){return _=_a(22,_,j,w),_.elementType=I,_.lanes=O,_.stateNode={},_}function bg(_,w,O){return _=_a(6,_,null,w),_.lanes=O,_}function wg(_,w,O){return w=_a(4,_.children!==null?_.children:[],_.key,w),w.lanes=O,w.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},w}function Sg(_,w,O,j,K){this.tag=w,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ku(0),this.expirationTimes=Ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ku(0),this.identifierPrefix=j,this.onRecoverableError=K,ke&&(this.mutableSourceEagerHydrationData=null)}function Vb(_,w,O,j,K,ae,Fe,et,Nt){return _=new Sg(_,w,O,et,Nt),w===1?(w=1,ae===!0&&(w|=8)):w=0,ae=_a(3,null,null,w),_.current=ae,ae.stateNode=_,ae.memoizedState={element:j,isDehydrated:O,cache:null,transitions:null},Ht(ae),_}function Wb(_){if(!_)return Zn;_=_._reactInternals;e:{if(R(_)!==_||_.tag!==1)throw Error(o(170));var w=_;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Dr(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(_.tag===1){var O=_.type;if(Dr(O))return fl(_,O,w)}return w}function $b(_){var w=_._reactInternals;if(w===void 0)throw typeof _.render=="function"?Error(o(188)):(_=Object.keys(_).join(","),Error(o(268,_)));return _=z(w),_===null?null:_.stateNode}function za(_,w){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var O=_.retryLane;_.retryLane=O!==0&&O<w?O:w}}function yp(_,w){za(_,w),(_=_.alternate)&&za(_,w)}function Eg(_){return _=z(_),_===null?null:_.stateNode}function Hb(){return null}return t.attemptContinuousHydration=function(_){if(_.tag===13){var w=Jr();vo(_,0x8000000,w),yp(_,0x8000000)}},t.attemptHydrationAtCurrentPriority=function(_){if(_.tag===13){var w=Jr(),O=bl(_);vo(_,O,w),yp(_,O)}},t.attemptSynchronousHydration=function(_){switch(_.tag){case 3:var w=_.stateNode;if(w.current.memoizedState.isDehydrated){var O=mo(w.pendingLanes);O!==0&&(B(w,O|1),Go(w,xt()),!(Ir&6)&&(md(),Re()))}break;case 13:var j=Jr();Cf(function(){return vo(_,1,j)}),yp(_,1)}},t.batchedUpdates=function(_,w){var O=Ir;Ir|=1;try{return _(w)}finally{Ir=O,Ir===0&&(md(),tt&&Re())}},t.createComponentSelector=function(_){return{$$typeof:op,value:_}},t.createContainer=function(_,w,O,j,K,ae,Fe){return Vb(_,w,!1,null,O,j,K,ae,Fe)},t.createHasPseudoClassSelector=function(_){return{$$typeof:ud,value:_}},t.createHydrationContainer=function(_,w,O,j,K,ae,Fe,et,Nt){return _=Vb(O,j,!0,_,K,ae,Fe,et,Nt),_.context=Wb(null),O=_.current,j=Jr(),K=bl(O),ae=Vn(j,K),ae.callback=w??null,ot(O,ae),_.current.lanes=K,A(_,K,j),Go(_,j),_},t.createPortal=function(_,w,O){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:j==null?null:""+j,children:_,containerInfo:w,implementation:O}},t.createRoleSelector=function(_){return{$$typeof:dd,value:_}},t.createTestNameSelector=function(_){return{$$typeof:Sc,value:_}},t.createTextSelector=function(_){return{$$typeof:Tf,value:_}},t.deferredUpdates=function(_){var w=U,O=pi.transition;try{return pi.transition=null,U=16,_()}finally{U=w,pi.transition=O}},t.discreteUpdates=function(_,w,O,j,K){var ae=U,Fe=pi.transition;try{return pi.transition=null,U=1,_(w,O,j,K)}finally{U=ae,pi.transition=Fe,Ir===0&&md()}},t.findAllNodes=Ec,t.findBoundingRects=function(_,w){if(!Ae)throw Error(o(363));w=Ec(_,w),_=[];for(var O=0;O<w.length;O++)_.push(se(w[O]));for(w=_.length-1;0<w;w--){O=_[w];for(var j=O.x,K=j+O.width,ae=O.y,Fe=ae+O.height,et=w-1;0<=et;et--)if(w!==et){var Nt=_[et],rn=Nt.x,Dn=rn+Nt.width,vr=Nt.y,tr=vr+Nt.height;if(j>=rn&&ae>=vr&&K<=Dn&&Fe<=tr){_.splice(w,1);break}else if(j!==rn||O.width!==Nt.width||tr<ae||vr>Fe){if(!(ae!==vr||O.height!==Nt.height||Dn<j||rn>K)){rn>j&&(Nt.width+=rn-j,Nt.x=j),Dn<K&&(Nt.width=K-rn),_.splice(w,1);break}}else{vr>ae&&(Nt.height+=vr-ae,Nt.y=ae),tr<Fe&&(Nt.height=Fe-vr),_.splice(w,1);break}}}return _},t.findHostInstance=$b,t.findHostInstanceWithNoPortals=function(_){return _=F(_),_=_!==null?W(_):null,_===null?null:_.stateNode},t.findHostInstanceWithWarning=function(_){return $b(_)},t.flushControlled=function(_){var w=Ir;Ir|=1;var O=pi.transition,j=U;try{pi.transition=null,U=1,_()}finally{U=j,pi.transition=O,Ir=w,Ir===0&&(md(),Re())}},t.flushPassiveEffects=Ql,t.flushSync=Cf,t.focusWithin=function(_,w){if(!Ae)throw Error(o(363));for(_=ap(_),w=ga(_,w),w=Array.from(w),_=0;_<w.length;){var O=w[_++];if(!Ce(O)){if(O.tag===5&&at(O.stateNode))return!0;for(O=O.child;O!==null;)w.push(O),O=O.sibling}}return!1},t.getCurrentUpdatePriority=function(){return U},t.getFindAllNodesFailureDescription=function(_,w){if(!Ae)throw Error(o(363));var O=0,j=[];_=[ap(_),0];for(var K=0;K<_.length;){var ae=_[K++],Fe=_[K++],et=w[Fe];if((ae.tag!==5||!Ce(ae))&&(lp(ae,et)&&(j.push(_u(et)),Fe++,Fe>O&&(O=Fe)),Fe<w.length))for(ae=ae.child;ae!==null;)_.push(ae,Fe),ae=ae.sibling}if(O<w.length){for(_=[];O<w.length;O++)_.push(_u(w[O]));return`findAllNodes was able to match part of the selector:
  `+(j.join(" > ")+`

No matching component was found for:
  `)+_.join(" > ")}return null},t.getPublicRootInstance=function(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return X(_.child.stateNode);default:return _.child.stateNode}},t.injectIntoDevTools=function(_){if(_={bundleType:_.bundleType,version:_.version,rendererPackageName:_.rendererPackageName,rendererConfig:_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Eg,findFiberByHostInstance:_.findFiberByHostInstance||Hb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")_=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)_=!0;else{try{Ct=w.inject(_),ze=w}catch{}_=!!w.checkDCE}}return _},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(_,w,O,j){if(!Ae)throw Error(o(363));_=Ec(_,w);var K=Lt(_,O,j).disconnect;return{disconnect:function(){K()}}},t.registerMutableSourceForHydration=function(_,w){var O=w._getVersion;O=O(w._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[w,O]:_.mutableSourceEagerHydrationData.push(w,O)},t.runWithPriority=function(_,w){var O=U;try{return U=_,w()}finally{U=O}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(_,w,O,j){var K=w.current,ae=Jr(),Fe=bl(K);return O=Wb(O),w.context===null?w.context=O:w.pendingContext=O,w=Vn(ae,Fe),w.payload={element:_},j=j===void 0?null:j,j!==null&&(w.callback=j),ot(K,w),_=vo(K,Fe,ae),_!==null&&Pt(_,K,Fe),Fe},t}),aC}var gB;function fbe(){return gB||(gB=1,iC.exports=dbe()),iC.exports}var hbe=fbe();const pbe=ol(hbe);var yB=z$();const vk={},mbe=n=>void Object.assign(vk,n);function gbe(n,e){function t(c,{args:d=[],attach:h,...p},g){let x=`${c[0].toUpperCase()}${c.slice(1)}`,b;if(c==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=p.object;b=cy(y,{type:c,root:g,attach:h,primitive:!0})}else{const y=vk[x];if(!y)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");b=cy(new y(...d),{type:c,root:g,attach:h,memoizedProps:{args:d}})}return b.__r3f.attach===void 0&&(b.isBufferGeometry?b.__r3f.attach="geometry":b.isMaterial&&(b.__r3f.attach="material")),x!=="inject"&&uC(b,p),b}function r(c,d){let h=!1;if(d){var p,g;(p=d.__r3f)!=null&&p.attach?cC(c,d,d.__r3f.attach):d.isObject3D&&c.isObject3D&&(c.add(d),h=!0),h||(g=c.__r3f)==null||g.objects.push(d),d.__r3f||cy(d,{}),d.__r3f.parent=c,eN(d),uy(d)}}function i(c,d,h){let p=!1;if(d){var g,x;if((g=d.__r3f)!=null&&g.attach)cC(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){d.parent=c,d.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:d});const b=c.children.filter(E=>E!==d),y=b.indexOf(h);c.children=[...b.slice(0,y),d,...b.slice(y)],p=!0}p||(x=c.__r3f)==null||x.objects.push(d),d.__r3f||cy(d,{}),d.__r3f.parent=c,eN(d),uy(d)}}function s(c,d,h=!1){c&&[...c].forEach(p=>o(d,p,h))}function o(c,d,h){if(d){var p,g,x;if(d.__r3f&&(d.__r3f.parent=null),(p=c.__r3f)!=null&&p.objects&&(c.__r3f.objects=c.__r3f.objects.filter(I=>I!==d)),(g=d.__r3f)!=null&&g.attach)wB(c,d,d.__r3f.attach);else if(d.isObject3D&&c.isObject3D){var b;c.remove(d),(b=d.__r3f)!=null&&b.root&&Sbe(aS(d),d)}const E=(x=d.__r3f)==null?void 0:x.primitive,T=!E&&(h===void 0?d.dispose!==null:h);if(!E){var y;s((y=d.__r3f)==null?void 0:y.objects,d,T),s(d.children,d,T)}if(delete d.__r3f,T&&d.dispose&&d.type!=="Scene"){const I=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?yB.unstable_scheduleCallback(yB.unstable_IdlePriority,I):I()}uy(c)}}function a(c,d,h,p){var g;const x=(g=c.__r3f)==null?void 0:g.parent;if(!x)return;const b=t(d,h,c.__r3f.root);if(c.children){for(const y of c.children)y.__r3f&&r(b,y);c.children=c.children.filter(y=>!y.__r3f)}c.__r3f.objects.forEach(y=>r(b,y)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(x,c),b.parent&&(b.__r3f.autoRemovedBeforeAppend=!0),r(x,b),b.raycast&&b.__r3f.eventCount&&aS(b).getState().internal.interaction.push(b),[p,p.alternate].forEach(y=>{y!==null&&(y.stateNode=b,y.ref&&(typeof y.ref=="function"?y.ref(b):y.ref.current=b))})}const l=()=>{};return{reconciler:pbe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,d)=>{if(!d)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,r(h,d))},removeChildFromContainer:(c,d)=>{d&&o(c.getState().scene,d)},insertInContainerBefore:(c,d,h)=>{if(!d||!h)return;const p=c.getState().scene;p.__r3f&&i(p,d,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var d;return!!((d=c?.__r3f)!=null?d:{}).handlers},prepareUpdate(c,d,h,p){var g;if(((g=c?.__r3f)!=null?g:{}).primitive&&p.object&&p.object!==c)return[!0];{const{args:b=[],children:y,...E}=p,{args:T=[],children:I,...N}=h;if(!Array.isArray(b))throw new Error("R3F: the args prop must be an array!");if(b.some((q,L)=>q!==T[L]))return[!0];const k=K$(c,E,N,!0);return k.changes.length?[!1,k]:null}},commitUpdate(c,[d,h],p,g,x,b){d?a(c,p,x,b):uC(c,h)},commitMount(c,d,h,p){var g;const x=(g=c.__r3f)!=null?g:{};c.raycast&&x.handlers&&x.eventCount&&aS(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>cy(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var d;const{attach:h,parent:p}=(d=c.__r3f)!=null?d:{};h&&p&&wB(p,c,h),c.isObject3D&&(c.visible=!1),uy(c)},unhideInstance(c,d){var h;const{attach:p,parent:g}=(h=c.__r3f)!=null?h:{};p&&g&&cC(g,c,p),(c.isObject3D&&d.visible==null||d.visible)&&(c.visible=!0),uy(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ey.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Xi.fun(performance.now)?performance.now:Xi.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Xi.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Xi.fun(clearTimeout)?clearTimeout:void 0}),applyProps:uC}}var vB,_B;const lC=n=>"colorSpace"in n||"outputColorSpace"in n,V$=()=>{var n;return(n=vk.ColorManagement)!=null?n:null},W$=n=>n&&n.isOrthographicCamera,ybe=n=>n&&n.hasOwnProperty("current"),_b=typeof window<"u"&&((vB=window.document)!=null&&vB.createElement||((_B=window.navigator)==null?void 0:_B.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function $$(n){const e=ie.useRef(n);return _b(()=>void(e.current=n),[n]),e}function vbe({set:n}){return _b(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class H$ extends ie.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}H$.getDerivedStateFromError=()=>({error:!0});const G$="__default",xB=new Map,_be=n=>n&&!!n.memoized&&!!n.changes;function X$(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const q_=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function aS(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Xi={obj:n=>n===Object(n)&&!Xi.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Xi.str(n)||Xi.num(n)||Xi.boo(n))return n===e;const s=Xi.obj(n);if(s&&r==="reference")return n===e;const o=Xi.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Xi.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Xi.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function xbe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function cy(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function ZR(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const bB=/-\d+$/;function cC(n,e,t){if(Xi.str(t)){if(bB.test(t)){const s=t.replace(bB,""),{target:o,key:a}=ZR(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=ZR(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function wB(n,e,t){var r,i;if(Xi.str(t)){const{target:s,key:o}=ZR(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function K$(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const c=n.__r3f,d=Object.entries(i),h=[];if(u){const g=Object.keys(l);for(let x=0;x<g.length;x++)i.hasOwnProperty(g[x])||d.unshift([g[x],G$+"remove"])}d.forEach(([g,x])=>{var b;if((b=n.__r3f)!=null&&b.primitive&&g==="object"||Xi.equ(x,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return h.push([g,x,!0,[]]);let y=[];g.includes("-")&&(y=g.split("-")),h.push([g,x,!1,y]);for(const E in i){const T=i[E];E.startsWith(`${g}-`)&&h.push([E,T,!1,E.split("-")])}});const p={...i};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(p.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(p.attach=c.memoizedProps.attach),{memoized:p,changes:h}}function uC(n,e){var t;const r=n.__r3f,i=r?.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=_be(e)?e:K$(n,e),l=r?.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let h=0;h<a.length;h++){let[p,g,x,b]=a[h];if(lC(n)){const I="srgb",N="srgb-linear";p==="encoding"?(p="colorSpace",g=g===3001?I:N):p==="outputEncoding"&&(p="outputColorSpace",g=g===3001?I:N)}let y=n,E=y[p];if(b.length&&(E=b.reduce((T,I)=>T[I],n),!(E&&E.set))){const[T,...I]=b.reverse();y=I.reverse().reduce((N,k)=>N[k],n),p=T}if(g===G$+"remove")if(y.constructor){let T=xB.get(y.constructor);T||(T=new y.constructor,xB.set(y.constructor,T)),g=T[p]}else g=0;if(x&&r)g?r.handlers[p]=g:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(E&&E.set&&(E.copy||E instanceof hm)){if(Array.isArray(g))E.fromArray?E.fromArray(g):E.set(...g);else if(E.copy&&g&&g.constructor&&E.constructor===g.constructor)E.copy(g);else if(g!==void 0){var u;const T=(u=E)==null?void 0:u.isColor;!T&&E.setScalar?E.setScalar(g):E instanceof hm&&g instanceof hm?E.mask=g.mask:E.set(g),!V$()&&s&&!s.linear&&T&&E.convertSRGBToLinear()}}else{var c;if(y[p]=g,(c=y[p])!=null&&c.isTexture&&y[p].format===na&&y[p].type===Yc&&s){const T=y[p];lC(T)&&lC(s.gl)?T.colorSpace=s.gl.outputColorSpace:T.encoding=s.gl.outputEncoding}}uy(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const h=aS(n).getState().internal,p=h.interaction.indexOf(n);p>-1&&h.interaction.splice(p,1),r.eventCount&&h.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&eN(n),n}function uy(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function eN(n){n.onUpdate==null||n.onUpdate(n)}function bbe(n,e){n.manual||(W$(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function R1(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function wbe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ey.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ey.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ey.ContinuousEventPriority;default:return Ey.DefaultEventPriority}}function Q$(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Sbe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Q$(t.capturedMap,e,r,i)})}function Ebe(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),d=new Set,h=[],p=u?u(c.internal.interaction):c.internal.interaction;for(let y=0;y<p.length;y++){const E=q_(p[y]);E&&(E.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function g(y){const E=q_(y);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var T;E.events.compute==null||E.events.compute(l,E,(T=E.previousRoot)==null?void 0:T.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(y,!0):[]}let x=p.flatMap(g).sort((y,E)=>{const T=q_(y.object),I=q_(E.object);return!T||!I?y.distance-E.distance:I.events.priority-T.events.priority||y.distance-E.distance}).filter(y=>{const E=R1(y);return d.has(E)?!1:(d.add(E),!0)});c.events.filter&&(x=c.events.filter(x,c));for(const y of x){let E=y.object;for(;E;){var b;(b=E.__r3f)!=null&&b.eventCount&&h.push({...y,eventObject:E}),E=E.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let y of c.internal.capturedMap.get(l.pointerId).values())d.has(R1(y.intersection))||h.push(y.intersection);return h}function i(l,u,c,d){const h=n.getState();if(l.length){const p={stopped:!1};for(const g of l){const x=q_(g.object)||h,{raycaster:b,pointer:y,camera:E,internal:T}=x,I=new Pe(y.x,y.y,0).unproject(E),N=P=>{var F,z;return(F=(z=T.capturedMap.get(P))==null?void 0:z.has(g.eventObject))!=null?F:!1},k=P=>{const F={intersection:g,target:u.target};T.capturedMap.has(P)?T.capturedMap.get(P).set(g.eventObject,F):T.capturedMap.set(P,new Map([[g.eventObject,F]])),u.target.setPointerCapture(P)},q=P=>{const F=T.capturedMap.get(P);F&&Q$(T.capturedMap,g.eventObject,F,P)};let L={};for(let P in u){let F=u[P];typeof F!="function"&&(L[P]=F)}let R={...g,...L,pointer:y,intersections:l,stopped:p.stopped,delta:c,unprojectedPoint:I,ray:b.ray,camera:E,stopPropagation(){const P="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!P||P.has(g.eventObject))&&(R.stopped=p.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(F=>F.eventObject===g.eventObject))){const F=l.slice(0,l.indexOf(g));s([...F,g])}},target:{hasPointerCapture:N,setPointerCapture:k,releasePointerCapture:q},currentTarget:{hasPointerCapture:N,setPointerCapture:k,releasePointerCapture:q},nativeEvent:u};if(d(R),p.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(d=>d.object===c.object&&d.index===c.index&&d.instanceId===c.instanceId)){const h=c.eventObject.__r3f,p=h?.handlers;if(u.hovered.delete(R1(c)),h!=null&&h.eventCount){const g={...c,intersections:l};p.onPointerOut==null||p.onPointerOut(g),p.onPointerLeave==null||p.onPointerLeave(g)}}}function o(l,u){for(let c=0;c<u.length;c++){const d=u[c].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:d,internal:h}=n.getState();h.lastEvent.current=c;const p=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",b=r(c,p?t:void 0),y=g?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=b.map(T=>T.eventObject)),g&&!b.length&&y<=2&&(o(c,h.interaction),d&&d(c)),p&&s(b);function E(T){const I=T.eventObject,N=I.__r3f,k=N?.handlers;if(N!=null&&N.eventCount)if(p){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const q=R1(T),L=h.hovered.get(q);L?L.stopped&&T.stopPropagation():(h.hovered.set(q,T),k.onPointerOver==null||k.onPointerOver(T),k.onPointerEnter==null||k.onPointerEnter(T))}k.onPointerMove==null||k.onPointerMove(T)}else{const q=k[l];q?(!g||h.initialHits.includes(I))&&(o(c,h.interaction.filter(L=>!h.initialHits.includes(L))),q(T)):g&&h.initialHits.includes(I)&&o(c,h.interaction.filter(L=>!h.initialHits.includes(L)))}}i(b,c,y,E)}}return{handlePointer:a}}const Y$=n=>!!(n!=null&&n.render),J$=ie.createContext(null),Tbe=(n,e)=>{const t=cbe((a,l)=>{const u=new Pe,c=new Pe,d=new Pe;function h(y=l().camera,E=c,T=l().size){const{width:I,height:N,top:k,left:q}=T,L=I/N;E.isVector3?d.copy(E):d.set(...E);const R=y.getWorldPosition(u).distanceTo(d);if(W$(y))return{width:I/y.zoom,height:N/y.zoom,top:k,left:q,factor:1,distance:R,aspect:L};{const P=y.fov*Math.PI/180,F=2*Math.tan(P/2)*R,z=F*(I/N);return{width:z,height:F,top:k,left:q,factor:I/z,distance:R,aspect:L}}}let p;const g=y=>a(E=>({performance:{...E.performance,current:y}})),x=new Ut;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>n(l(),y),advance:(y,E)=>e(y,E,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new fk,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();p&&clearTimeout(p),y.performance.current!==y.performance.min&&g(y.performance.min),p=setTimeout(()=>g(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:y=>a(E=>({...E,events:{...E.events,...y}})),setSize:(y,E,T,I,N)=>{const k=l().camera,q={width:y,height:E,top:I||0,left:N||0,updateStyle:T};a(L=>({size:q,viewport:{...L.viewport,...h(k,c,q)}}))},setDpr:y=>a(E=>{const T=X$(y);return{viewport:{...E.viewport,dpr:T,initialDpr:E.viewport.initialDpr||T}}}),setFrameloop:(y="always")=>{const E=l().clock;E.stop(),E.elapsedTime=0,y!=="never"&&(E.start(),E.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ie.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,E,T)=>{const I=l().internal;return I.priority=I.priority+(E>0?1:0),I.subscribers.push({ref:y,priority:E,store:T}),I.subscribers=I.subscribers.sort((N,k)=>N.priority-k.priority),()=>{const N=l().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(E>0?1:0),N.subscribers=N.subscribers.filter(k=>k.ref!==y))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var h;i=l,s=u.dpr,bbe(a,l),c.setPixelRatio(u.dpr);const p=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,p)}a!==o&&(o=a,d(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Z$(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let N1,eH=new Set,tH=new Set,Mbe=new Set;const Ibe=n=>Z$(n,eH),Abe=n=>Z$(n,tH);function dC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function j_(n,e){switch(n){case"before":return dC(eH,e);case"after":return dC(tH,e);case"tail":return dC(Mbe,e)}}let fC,hC;function pC(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),fC=e.internal.subscribers,N1=0;N1<fC.length;N1++)hC=fC[N1],hC.ref.current(hC.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Cbe(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,j_("before",u),t=!0;for(const d of n.values()){var c;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(r+=pC(u,s))}if(t=!1,j_("after",u),r===0)return j_("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,c=1){var d;if(!u)return n.forEach(h=>a(h.store.getState(),c));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,d,h){if(c&&j_("before",u),d)pC(u,d,h);else for(const p of n.values())pC(u,p.store.getState());c&&j_("after",u)}return{loop:o,invalidate:a,advance:l}}function nH(){const n=ie.useContext(J$);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ma(n=t=>t,e){return nH()(n,e)}function rH(n,e=0){const t=nH(),r=t.getState().internal.subscribe,i=$$(n);return _b(()=>r(i,e,t),[e,r,t]),null}const hv=new Map,{invalidate:tN,advance:SB}=Cbe(hv),{reconciler:_2,applyProps:Jg}=gbe(hv,wbe),Zg={objects:"shallow",strict:!1},Rbe=(n,e)=>{const t=typeof n=="function"?n(e):n;return Y$(t)?t:new U$({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Nbe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Pbe(n){const e=hv.get(n),t=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Tbe(tN,SB),o=t||_2.createContainer(s,Ey.ConcurrentRoot,null,!1,null,"",i,null);e||hv.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:d,size:h,scene:p,events:g,onCreated:x,shadows:b=!1,linear:y=!1,flat:E=!1,legacy:T=!1,orthographic:I=!1,frameloop:N="always",dpr:k=[1,2],performance:q,raycaster:L,camera:R,onPointerMissed:P}=c,F=s.getState(),z=F.gl;F.gl||F.set({gl:z=Rbe(d,n)});let V=F.raycaster;V||F.set({raycaster:V=new k$});const{params:W,...Q}=L||{};if(Xi.equ(Q,V,Zg)||Jg(V,{...Q}),Xi.equ(W,V.params,Zg)||Jg(V,{params:{...V.params,...W}}),!F.camera||F.camera===u&&!Xi.equ(u,R,Zg)){u=R;const te=R instanceof db,Z=te?R:I?new Kd(0,0,0,0,.1,1e3):new ks(75,0,.1,1e3);te||(Z.position.z=5,R&&(Jg(Z,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(Z.manual=!0,Z.updateProjectionMatrix())),!F.camera&&!(R!=null&&R.rotation)&&Z.lookAt(0,0,0)),F.set({camera:Z}),V.camera=Z}if(!F.scene){let te;p!=null&&p.isScene?te=p:(te=new GP,p&&Jg(te,p)),F.set({scene:cy(te)})}if(!F.xr){var X;const te=(ge,ce)=>{const ye=s.getState();ye.frameloop!=="never"&&SB(ge,!0,ye,ce)},Z=()=>{const ge=s.getState();ge.gl.xr.enabled=ge.gl.xr.isPresenting,ge.gl.xr.setAnimationLoop(ge.gl.xr.isPresenting?te:null),ge.gl.xr.isPresenting||tN(ge)},fe={connect(){const ge=s.getState().gl;ge.xr.addEventListener("sessionstart",Z),ge.xr.addEventListener("sessionend",Z)},disconnect(){const ge=s.getState().gl;ge.xr.removeEventListener("sessionstart",Z),ge.xr.removeEventListener("sessionend",Z)}};typeof((X=z.xr)==null?void 0:X.addEventListener)=="function"&&fe.connect(),F.set({xr:fe})}if(z.shadowMap){const te=z.shadowMap.enabled,Z=z.shadowMap.type;if(z.shadowMap.enabled=!!b,Xi.boo(b))z.shadowMap.type=xx;else if(Xi.str(b)){var re;const fe={basic:WV,percentage:vT,soft:xx,variance:Dc};z.shadowMap.type=(re=fe[b])!=null?re:xx}else Xi.obj(b)&&Object.assign(z.shadowMap,b);(te!==z.shadowMap.enabled||Z!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const G=V$();G&&("enabled"in G?G.enabled=!T:"legacyMode"in G&&(G.legacyMode=T)),l||Jg(z,{outputEncoding:y?3e3:3001,toneMapping:E?Du:_T}),F.legacy!==T&&F.set(()=>({legacy:T})),F.linear!==y&&F.set(()=>({linear:y})),F.flat!==E&&F.set(()=>({flat:E})),d&&!Xi.fun(d)&&!Y$(d)&&!Xi.equ(d,z,Zg)&&Jg(z,d),g&&!F.events.handlers&&F.set({events:g(s)});const Y=Nbe(n,h);return Xi.equ(Y,F.size,Zg)||F.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),k&&F.viewport.dpr!==X$(k)&&F.setDpr(k),F.frameloop!==N&&F.setFrameloop(N),F.onPointerMissed||F.set({onPointerMissed:P}),q&&!Xi.equ(q,F.performance,Zg)&&F.set(te=>({performance:{...te.performance,...q}})),a=x,l=!0,this},render(c){return l||this.configure(),_2.updateContainer(S.jsx(kbe,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){iH(n)}}}function kbe({store:n,children:e,onCreated:t,rootElement:r}){return _b(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),S.jsx(J$.Provider,{value:n,children:e})}function iH(n,e){const t=hv.get(n),r=t?.fiber;if(r){const i=t?.store.getState();i&&(i.internal.active=!1),_2.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),xbe(i),hv.delete(n)}catch{}},500)})}}_2.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ie.version});const mC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Obe(n){const{handlePointer:e}=Ebe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(mC).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=mC[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=mC[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function EB(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function Lbe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=ie.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=ie.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=ie.useRef(!1);ie.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[d,h,p]=ie.useMemo(()=>{const y=()=>{if(!a.current.element)return;const{left:E,top:T,width:I,height:N,bottom:k,right:q,x:L,y:R}=a.current.element.getBoundingClientRect(),P={left:E,top:T,width:I,height:N,bottom:k,right:q,x:L,y:R};a.current.element instanceof HTMLElement&&r&&(P.height=a.current.element.offsetHeight,P.width=a.current.element.offsetWidth),Object.freeze(P),c.current&&!jbe(a.current.lastBounds,P)&&o(a.current.lastBounds=P)};return[y,u?EB(y,u):y,l?EB(y,l):y]},[o,r,l,u]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new i(p),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const b=y=>{!y||y===a.current.element||(g(),a.current.element=y,a.current.scrollContainers=sH(y),x())};return Fbe(p,!!e),Dbe(h),ie.useEffect(()=>{g(),x()},[e,p,h]),ie.useEffect(()=>g,[]),[b,s,d]}function Dbe(n){ie.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Fbe(n,e){ie.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function sH(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...sH(n.parentElement)]}const qbe=["x","y","top","bottom","left","right","width","height"],jbe=(n,e)=>qbe.every(t=>n[t]===e[t]);var Bbe=Object.defineProperty,Ube=Object.defineProperties,zbe=Object.getOwnPropertyDescriptors,TB=Object.getOwnPropertySymbols,Vbe=Object.prototype.hasOwnProperty,Wbe=Object.prototype.propertyIsEnumerable,MB=(n,e,t)=>e in n?Bbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,IB=(n,e)=>{for(var t in e||(e={}))Vbe.call(e,t)&&MB(n,t,e[t]);if(TB)for(var t of TB(e))Wbe.call(e,t)&&MB(n,t,e[t]);return n},$be=(n,e)=>Ube(n,zbe(e)),AB,CB;typeof window<"u"&&((AB=window.document)!=null&&AB.createElement||((CB=window.navigator)==null?void 0:CB.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function oH(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=oH(r,e,t);if(i)return i;r=r.sibling}}function aH(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const RB=console.error;console.error=function(){const n=[...arguments].join("");if(n?.startsWith("Warning:")&&n.includes("useContext")){console.error=RB;return}return RB.apply(this,arguments)};const _k=aH(ie.createContext(null));class lH extends ie.Component{render(){return ie.createElement(_k.Provider,{value:this._reactInternals},this.props.children)}}function Hbe(){const n=ie.useContext(_k);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ie.useId();return ie.useMemo(()=>{for(const r of[n,n?.alternate]){if(!r)continue;const i=oH(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function Gbe(){const n=Hbe(),[e]=ie.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==_k&&!e.has(i)&&e.set(i,ie.useContext(aH(i)))}t=t.return}return e}function Xbe(){const n=Gbe();return ie.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>ie.createElement(e,null,ie.createElement(t.Provider,$be(IB({},r),{value:n.get(t)}))),e=>ie.createElement(lH,IB({},e))),[n])}const Kbe=ie.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Obe,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:d,legacy:h,orthographic:p,frameloop:g,dpr:x,performance:b,raycaster:y,camera:E,scene:T,onPointerMissed:I,onCreated:N,...k},q){ie.useMemo(()=>mbe(ibe),[]);const L=Xbe(),[R,P]=Lbe({scroll:!0,debounce:{scroll:50,resize:0},...r}),F=ie.useRef(null),z=ie.useRef(null);ie.useImperativeHandle(q,()=>F.current);const V=$$(I),[W,Q]=ie.useState(!1),[X,re]=ie.useState(!1);if(W)throw W;if(X)throw X;const G=ie.useRef(null);_b(()=>{const te=F.current;P.width>0&&P.height>0&&te&&(G.current||(G.current=Pbe(te)),G.current.configure({gl:s,events:o,shadows:u,linear:c,flat:d,legacy:h,orthographic:p,frameloop:g,dpr:x,performance:b,raycaster:y,camera:E,scene:T,size:P,onPointerMissed:(...Z)=>V.current==null?void 0:V.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?ybe(a)?a.current:a:z.current),l&&Z.setEvents({compute:(fe,ge)=>{const ce=fe[l+"X"],ye=fe[l+"Y"];ge.pointer.set(ce/ge.size.width*2-1,-(ye/ge.size.height)*2+1),ge.raycaster.setFromCamera(ge.pointer,ge.camera)}}),N?.(Z)}}),G.current.render(S.jsx(L,{children:S.jsx(H$,{set:re,children:S.jsx(ie.Suspense,{fallback:S.jsx(vbe,{set:Q}),children:e})})})))}),ie.useEffect(()=>{const te=F.current;if(te)return()=>iH(te)},[]);const Y=a?"none":"auto";return S.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...i},...k,children:S.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:S.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}),Qbe=ie.forwardRef(function(e,t){return S.jsx(lH,{children:S.jsx(Kbe,{...e,ref:t})})});var Ybe=Object.defineProperty,Jbe=(n,e,t)=>e in n?Ybe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Zbe=(n,e,t)=>(Jbe(n,e+"",t),t);class ewe{constructor(){Zbe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var twe=Object.defineProperty,nwe=(n,e,t)=>e in n?twe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sr=(n,e,t)=>(nwe(n,typeof e!="symbol"?e+"":e,t),t);const P1=new zm,NB=new qd,rwe=Math.cos(70*(Math.PI/180)),PB=(n,e)=>(n%e+e)%e;let iwe=class extends ewe{constructor(e,t){super(),sr(this,"object"),sr(this,"domElement"),sr(this,"enabled",!0),sr(this,"target",new Pe),sr(this,"minDistance",0),sr(this,"maxDistance",1/0),sr(this,"minZoom",0),sr(this,"maxZoom",1/0),sr(this,"minPolarAngle",0),sr(this,"maxPolarAngle",Math.PI),sr(this,"minAzimuthAngle",-1/0),sr(this,"maxAzimuthAngle",1/0),sr(this,"enableDamping",!1),sr(this,"dampingFactor",.05),sr(this,"enableZoom",!0),sr(this,"zoomSpeed",1),sr(this,"enableRotate",!0),sr(this,"rotateSpeed",1),sr(this,"enablePan",!0),sr(this,"panSpeed",1),sr(this,"screenSpacePanning",!0),sr(this,"keyPanSpeed",7),sr(this,"zoomToCursor",!1),sr(this,"autoRotate",!1),sr(this,"autoRotateSpeed",2),sr(this,"reverseOrbit",!1),sr(this,"reverseHorizontalOrbit",!1),sr(this,"reverseVerticalOrbit",!1),sr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),sr(this,"mouseButtons",{LEFT:th.ROTATE,MIDDLE:th.DOLLY,RIGHT:th.PAN}),sr(this,"touches",{ONE:zp.ROTATE,TWO:zp.DOLLY_PAN}),sr(this,"target0"),sr(this,"position0"),sr(this,"zoom0"),sr(this,"_domElementKeyEvents",null),sr(this,"getPolarAngle"),sr(this,"getAzimuthalAngle"),sr(this,"setPolarAngle"),sr(this,"setAzimuthalAngle"),sr(this,"getDistance"),sr(this,"getZoomScale"),sr(this,"listenToKeyEvents"),sr(this,"stopListenToKeyEvents"),sr(this,"saveState"),sr(this,"reset"),sr(this,"update"),sr(this,"connect"),sr(this,"dispose"),sr(this,"dollyIn"),sr(this,"dollyOut"),sr(this,"getScale"),sr(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=He=>{let At=PB(He,2*Math.PI),on=c.phi;on<0&&(on+=2*Math.PI),At<0&&(At+=2*Math.PI);let $e=Math.abs(At-on);2*Math.PI-$e<$e&&(At<on?At+=2*Math.PI:on+=2*Math.PI),d.phi=At-on,r.update()},this.setAzimuthalAngle=He=>{let At=PB(He,2*Math.PI),on=c.theta;on<0&&(on+=2*Math.PI),At<0&&(At+=2*Math.PI);let $e=Math.abs(At-on);2*Math.PI-$e<$e&&(At<on?At+=2*Math.PI:on+=2*Math.PI),d.theta=At-on,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=He=>{He.addEventListener("keydown",Dt),this._domElementKeyEvents=He},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Dt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const He=new Pe,At=new Pe(0,1,0),on=new sa().setFromUnitVectors(e.up,At),$e=on.clone().invert(),Kt=new Pe,_t=new sa,ee=2*Math.PI;return function(){const Ft=r.object.position;on.setFromUnitVectors(e.up,At),$e.copy(on).invert(),He.copy(Ft).sub(r.target),He.applyQuaternion(on),c.setFromVector3(He),r.autoRotate&&l===a.NONE&&W(z()),r.enableDamping?(c.theta+=d.theta*r.dampingFactor,c.phi+=d.phi*r.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let Hn=r.minAzimuthAngle,Lr=r.maxAzimuthAngle;isFinite(Hn)&&isFinite(Lr)&&(Hn<-Math.PI?Hn+=ee:Hn>Math.PI&&(Hn-=ee),Lr<-Math.PI?Lr+=ee:Lr>Math.PI&&(Lr-=ee),Hn<=Lr?c.theta=Math.max(Hn,Math.min(Lr,c.theta)):c.theta=c.theta>(Hn+Lr)/2?Math.max(Hn,c.theta):Math.min(Lr,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(p,r.dampingFactor):r.target.add(p),r.zoomToCursor&&R||r.object.isOrthographicCamera?c.radius=ge(c.radius):c.radius=ge(c.radius*h),He.setFromSpherical(c),He.applyQuaternion($e),Ft.copy(r.target).add(He),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,p.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),p.set(0,0,0));let ai=!1;if(r.zoomToCursor&&R){let gr=null;if(r.object instanceof ks&&r.object.isPerspectiveCamera){const hi=He.length();gr=ge(hi*h);const ui=hi-gr;r.object.position.addScaledVector(q,ui),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const hi=new Pe(L.x,L.y,0);hi.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),ai=!0;const ui=new Pe(L.x,L.y,0);ui.unproject(r.object),r.object.position.sub(ui).add(hi),r.object.updateMatrixWorld(),gr=He.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;gr!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(gr).add(r.object.position):(P1.origin.copy(r.object.position),P1.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(P1.direction))<rwe?e.lookAt(r.target):(NB.setFromNormalAndCoplanarPoint(r.object.up,r.target),P1.intersectPlane(NB,r.target))))}else r.object instanceof Kd&&r.object.isOrthographicCamera&&(ai=h!==1,ai&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix()));return h=1,R=!1,ai||Kt.distanceToSquared(r.object.position)>u||8*(1-_t.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Kt.copy(r.object.position),_t.copy(r.object.quaternion),ai=!1,!0):!1}})(),this.connect=He=>{r.domElement=He,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Vt),r.domElement.addEventListener("pointerdown",se),r.domElement.addEventListener("pointercancel",Ce),r.domElement.addEventListener("wheel",Lt)},this.dispose=()=>{var He,At,on,$e,Kt,_t;r.domElement&&(r.domElement.style.touchAction="auto"),(He=r.domElement)==null||He.removeEventListener("contextmenu",Vt),(At=r.domElement)==null||At.removeEventListener("pointerdown",se),(on=r.domElement)==null||on.removeEventListener("pointercancel",Ce),($e=r.domElement)==null||$e.removeEventListener("wheel",Lt),(Kt=r.domElement)==null||Kt.ownerDocument.removeEventListener("pointermove",Oe),(_t=r.domElement)==null||_t.ownerDocument.removeEventListener("pointerup",Ce),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Dt)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new KR,d=new KR;let h=1;const p=new Pe,g=new Ut,x=new Ut,b=new Ut,y=new Ut,E=new Ut,T=new Ut,I=new Ut,N=new Ut,k=new Ut,q=new Pe,L=new Ut;let R=!1;const P=[],F={};function z(){return 2*Math.PI/60/60*r.autoRotateSpeed}function V(){return Math.pow(.95,r.zoomSpeed)}function W(He){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=He:d.theta-=He}function Q(He){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=He:d.phi-=He}const X=(()=>{const He=new Pe;return function(on,$e){He.setFromMatrixColumn($e,0),He.multiplyScalar(-on),p.add(He)}})(),re=(()=>{const He=new Pe;return function(on,$e){r.screenSpacePanning===!0?He.setFromMatrixColumn($e,1):(He.setFromMatrixColumn($e,0),He.crossVectors(r.object.up,He)),He.multiplyScalar(on),p.add(He)}})(),G=(()=>{const He=new Pe;return function(on,$e){const Kt=r.domElement;if(Kt&&r.object instanceof ks&&r.object.isPerspectiveCamera){const _t=r.object.position;He.copy(_t).sub(r.target);let ee=He.length();ee*=Math.tan(r.object.fov/2*Math.PI/180),X(2*on*ee/Kt.clientHeight,r.object.matrix),re(2*$e*ee/Kt.clientHeight,r.object.matrix)}else Kt&&r.object instanceof Kd&&r.object.isOrthographicCamera?(X(on*(r.object.right-r.object.left)/r.object.zoom/Kt.clientWidth,r.object.matrix),re($e*(r.object.top-r.object.bottom)/r.object.zoom/Kt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Y(He){r.object instanceof ks&&r.object.isPerspectiveCamera||r.object instanceof Kd&&r.object.isOrthographicCamera?h=He:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function te(He){Y(h/He)}function Z(He){Y(h*He)}function fe(He){if(!r.zoomToCursor||!r.domElement)return;R=!0;const At=r.domElement.getBoundingClientRect(),on=He.clientX-At.left,$e=He.clientY-At.top,Kt=At.width,_t=At.height;L.x=on/Kt*2-1,L.y=-($e/_t)*2+1,q.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function ge(He){return Math.max(r.minDistance,Math.min(r.maxDistance,He))}function ce(He){g.set(He.clientX,He.clientY)}function ye(He){fe(He),I.set(He.clientX,He.clientY)}function be(He){y.set(He.clientX,He.clientY)}function Ee(He){x.set(He.clientX,He.clientY),b.subVectors(x,g).multiplyScalar(r.rotateSpeed);const At=r.domElement;At&&(W(2*Math.PI*b.x/At.clientHeight),Q(2*Math.PI*b.y/At.clientHeight)),g.copy(x),r.update()}function Me(He){N.set(He.clientX,He.clientY),k.subVectors(N,I),k.y>0?te(V()):k.y<0&&Z(V()),I.copy(N),r.update()}function qe(He){E.set(He.clientX,He.clientY),T.subVectors(E,y).multiplyScalar(r.panSpeed),G(T.x,T.y),y.copy(E),r.update()}function Ue(He){fe(He),He.deltaY<0?Z(V()):He.deltaY>0&&te(V()),r.update()}function Ye(He){let At=!1;switch(He.code){case r.keys.UP:G(0,r.keyPanSpeed),At=!0;break;case r.keys.BOTTOM:G(0,-r.keyPanSpeed),At=!0;break;case r.keys.LEFT:G(r.keyPanSpeed,0),At=!0;break;case r.keys.RIGHT:G(-r.keyPanSpeed,0),At=!0;break}At&&(He.preventDefault(),r.update())}function Ne(){if(P.length==1)g.set(P[0].pageX,P[0].pageY);else{const He=.5*(P[0].pageX+P[1].pageX),At=.5*(P[0].pageY+P[1].pageY);g.set(He,At)}}function ke(){if(P.length==1)y.set(P[0].pageX,P[0].pageY);else{const He=.5*(P[0].pageX+P[1].pageX),At=.5*(P[0].pageY+P[1].pageY);y.set(He,At)}}function me(){const He=P[0].pageX-P[1].pageX,At=P[0].pageY-P[1].pageY,on=Math.sqrt(He*He+At*At);I.set(0,on)}function ht(){r.enableZoom&&me(),r.enablePan&&ke()}function ct(){r.enableZoom&&me(),r.enableRotate&&Ne()}function Mt(He){if(P.length==1)x.set(He.pageX,He.pageY);else{const on=un(He),$e=.5*(He.pageX+on.x),Kt=.5*(He.pageY+on.y);x.set($e,Kt)}b.subVectors(x,g).multiplyScalar(r.rotateSpeed);const At=r.domElement;At&&(W(2*Math.PI*b.x/At.clientHeight),Q(2*Math.PI*b.y/At.clientHeight)),g.copy(x)}function xe(He){if(P.length==1)E.set(He.pageX,He.pageY);else{const At=un(He),on=.5*(He.pageX+At.x),$e=.5*(He.pageY+At.y);E.set(on,$e)}T.subVectors(E,y).multiplyScalar(r.panSpeed),G(T.x,T.y),y.copy(E)}function Te(He){const At=un(He),on=He.pageX-At.x,$e=He.pageY-At.y,Kt=Math.sqrt(on*on+$e*$e);N.set(0,Kt),k.set(0,Math.pow(N.y/I.y,r.zoomSpeed)),te(k.y),I.copy(N)}function Ae(He){r.enableZoom&&Te(He),r.enablePan&&xe(He)}function le(He){r.enableZoom&&Te(He),r.enableRotate&&Mt(He)}function se(He){var At,on;r.enabled!==!1&&(P.length===0&&((At=r.domElement)==null||At.ownerDocument.addEventListener("pointermove",Oe),(on=r.domElement)==null||on.ownerDocument.addEventListener("pointerup",Ce)),hn(He),He.pointerType==="touch"?Jt(He):Ge(He))}function Oe(He){r.enabled!==!1&&(He.pointerType==="touch"?Cn(He):at(He))}function Ce(He){var At,on,$e;vn(He),P.length===0&&((At=r.domElement)==null||At.releasePointerCapture(He.pointerId),(on=r.domElement)==null||on.ownerDocument.removeEventListener("pointermove",Oe),($e=r.domElement)==null||$e.ownerDocument.removeEventListener("pointerup",Ce)),r.dispatchEvent(o),l=a.NONE}function Ge(He){let At;switch(He.button){case 0:At=r.mouseButtons.LEFT;break;case 1:At=r.mouseButtons.MIDDLE;break;case 2:At=r.mouseButtons.RIGHT;break;default:At=-1}switch(At){case th.DOLLY:if(r.enableZoom===!1)return;ye(He),l=a.DOLLY;break;case th.ROTATE:if(He.ctrlKey||He.metaKey||He.shiftKey){if(r.enablePan===!1)return;be(He),l=a.PAN}else{if(r.enableRotate===!1)return;ce(He),l=a.ROTATE}break;case th.PAN:if(He.ctrlKey||He.metaKey||He.shiftKey){if(r.enableRotate===!1)return;ce(He),l=a.ROTATE}else{if(r.enablePan===!1)return;be(He),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function at(He){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Ee(He);break;case a.DOLLY:if(r.enableZoom===!1)return;Me(He);break;case a.PAN:if(r.enablePan===!1)return;qe(He);break}}function Lt(He){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(He.preventDefault(),r.dispatchEvent(s),Ue(He),r.dispatchEvent(o))}function Dt(He){r.enabled===!1||r.enablePan===!1||Ye(He)}function Jt(He){switch($t(He),P.length){case 1:switch(r.touches.ONE){case zp.ROTATE:if(r.enableRotate===!1)return;Ne(),l=a.TOUCH_ROTATE;break;case zp.PAN:if(r.enablePan===!1)return;ke(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case zp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ht(),l=a.TOUCH_DOLLY_PAN;break;case zp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ct(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Cn(He){switch($t(He),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Mt(He),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;xe(He),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ae(He),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;le(He),r.update();break;default:l=a.NONE}}function Vt(He){r.enabled!==!1&&He.preventDefault()}function hn(He){P.push(He)}function vn(He){delete F[He.pointerId];for(let At=0;At<P.length;At++)if(P[At].pointerId==He.pointerId){P.splice(At,1);return}}function $t(He){let At=F[He.pointerId];At===void 0&&(At=new Ut,F[He.pointerId]=At),At.set(He.pageX,He.pageY)}function un(He){const At=He.pointerId===P[0].pointerId?P[1]:P[0];return F[At.pointerId]}this.dollyIn=(He=V())=>{Z(He),r.update()},this.dollyOut=(He=V())=>{te(He),r.update()},this.getScale=()=>h,this.setScale=He=>{Y(He),r.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};function swe(n,e,t){const r=Ma(h=>h.size),i=Ma(h=>h.viewport),s=typeof n=="number"?n:r.width*i.dpr,o=r.height*i.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,d=ie.useMemo(()=>{const h=new Jc(s,o,{minFilter:Ls,magFilter:Ls,type:Um,...c});return u&&(h.depthTexture=new LT(s,o,Na)),h.samples=l,h},[]);return ie.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),ie.useEffect(()=>()=>d.dispose(),[]),d}const owe=n=>typeof n=="function",awe=ie.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,children:r,makeDefault:i,...s},o)=>{const a=Ma(({set:b})=>b),l=Ma(({camera:b})=>b),u=Ma(({size:b})=>b),c=ie.useRef(null);ie.useImperativeHandle(o,()=>c.current,[]);const d=ie.useRef(null),h=swe(e);ie.useLayoutEffect(()=>{s.manual||c.current.updateProjectionMatrix()},[u,s]),ie.useLayoutEffect(()=>{c.current.updateProjectionMatrix()}),ie.useLayoutEffect(()=>{if(i){const b=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:b}))}},[c,i,a]);let p=0,g=null;const x=owe(r);return rH(b=>{x&&(t===1/0||p<t)&&(d.current.visible=!1,b.gl.setRenderTarget(h),g=b.scene.background,n&&(b.scene.background=n),b.gl.render(b.scene,c.current),b.scene.background=g,b.gl.setRenderTarget(null),d.current.visible=!0,p++)}),ie.createElement(ie.Fragment,null,ie.createElement("orthographicCamera",kE({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:c},s),!x&&r),ie.createElement("group",{ref:d},x&&r(h.texture)))}),lwe=ie.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const d=Ma(k=>k.invalidate),h=Ma(k=>k.camera),p=Ma(k=>k.gl),g=Ma(k=>k.events),x=Ma(k=>k.setEvents),b=Ma(k=>k.set),y=Ma(k=>k.get),E=Ma(k=>k.performance),T=e||h,I=r||g.connected||p.domElement,N=ie.useMemo(()=>new iwe(T),[T]);return rH(()=>{N.enabled&&N.update()},-1),ie.useEffect(()=>(s&&N.connect(s===!0?I:s),N.connect(I),()=>void N.dispose()),[s,I,t,N,d]),ie.useEffect(()=>{const k=R=>{d(),t&&E.regress(),o&&o(R)},q=R=>{a&&a(R)},L=R=>{l&&l(R)};return N.addEventListener("change",k),N.addEventListener("start",q),N.addEventListener("end",L),()=>{N.removeEventListener("start",q),N.removeEventListener("end",L),N.removeEventListener("change",k)}},[o,a,l,N,d,x]),ie.useEffect(()=>{if(n){const k=y().controls;return b({controls:N}),()=>b({controls:k})}},[n,N]),ie.createElement("primitive",kE({ref:c,object:N,enableDamping:i},u))});var lS={exports:{}},cwe=lS.exports,kB;function uwe(){return kB||(kB=1,function(n,e){(function(t,r){n.exports=r()})(cwe,function(){var t=function(){function r(p){return o.appendChild(p.dom),p}function i(p){for(var g=0;g<o.children.length;g++)o.children[g].style.display=g===p?"block":"none";s=p}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(p){p.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,u=0,c=r(new t.Panel("FPS","#0ff","#002")),d=r(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=r(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){u++;var p=(performance||Date).now();if(d.update(p-a,200),p>l+1e3&&(c.update(1e3*u/(p-l),100),l=p,u=0,h)){var g=performance.memory;h.update(g.usedJSHeapSize/1048576,g.jsHeapSizeLimit/1048576)}return p},update:function(){a=this.end()},domElement:o,setMode:i}};return t.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,u=l(window.devicePixelRatio||1),c=80*u,d=48*u,h=3*u,p=2*u,g=3*u,x=15*u,b=74*u,y=30*u,E=document.createElement("canvas");E.width=c,E.height=d,E.style.cssText="width:80px;height:48px";var T=E.getContext("2d");return T.font="bold "+9*u+"px Helvetica,Arial,sans-serif",T.textBaseline="top",T.fillStyle=s,T.fillRect(0,0,c,d),T.fillStyle=i,T.fillText(r,h,p),T.fillRect(g,x,b,y),T.fillStyle=s,T.globalAlpha=.9,T.fillRect(g,x,b,y),{dom:E,update:function(I,N){o=Math.min(o,I),a=Math.max(a,I),T.fillStyle=s,T.globalAlpha=1,T.fillRect(0,0,c,x),T.fillStyle=i,T.fillText(l(I)+" "+r+" ("+l(o)+"-"+l(a)+")",h,p),T.drawImage(E,g+u,x,b-u,y,g,x,b-u,y),T.fillRect(g+b-u,x,u,y),T.fillStyle=s,T.globalAlpha=.9,T.fillRect(g+b-u,x,u,l((1-I/N)*y))}}},t})}(lS)),lS.exports}var dwe=uwe();const fwe=ol(dwe);function hwe(n,e=[],t){const[r,i]=ie.useState();return ie.useLayoutEffect(()=>{const s=n();return i(s),()=>void 0},e),r}function pwe({showPanel:n=0,className:e,parent:t}){const r=hwe(()=>new fwe,[]);return ie.useEffect(()=>{if(r){const i=t&&t.current||document.body;r.showPanel(n),i?.appendChild(r.dom);const s=(e??"").split(" ").filter(l=>l);s.length&&r.dom.classList.add(...s);const o=Ibe(()=>r.begin()),a=Abe(()=>r.end());return()=>{s.length&&r.dom.classList.remove(...s),i?.removeChild(r.dom),o(),a()}}},[t,r,e,n]),null}const mwe=({config:n,tiles:e,chunksRef:t})=>{const r=ie.useRef(null),i=ie.useRef(new Pn),s=ie.useRef(new ni);return ie.useEffect(()=>{if(!r.current)return;let o=0;t.current.forEach(a=>{a.tiles.forEach(l=>{const u=l.id%n.plotCount,c=Math.floor(l.id/n.plotCount),d=a.x*n.chunkSize+u*n.plotSize,h=a.z*n.chunkSize+c*n.plotSize;s.current.position.set(d,0,h),s.current.updateMatrix(),r.current.setMatrixAt(o,s.current.matrix),r.current?.setColorAt(o,i.current.set(e[l.tileId].color)),o++})}),r.current.instanceMatrix.needsUpdate=!0,r.current.instanceColor&&(r.current.instanceColor.needsUpdate=!0),r.current.computeBoundingBox(),tN()}),S.jsxs("instancedMesh",{frustumCulled:!1,ref:r,args:[void 0,void 0,t.current.size*n.plotCount**2],children:[S.jsx("boxGeometry",{args:[n.plotSize,1,n.plotSize]}),S.jsx("meshLambertMaterial",{color:0xffffff})]})},ey=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,cH=new Set,nN=typeof process=="object"&&process?process:{},uH=(n,e,t,r)=>{typeof nN.emitWarning=="function"?nN.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)};let x2=globalThis.AbortController,OB=globalThis.AbortSignal;if(typeof x2>"u"){OB=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},x2=class{constructor(){e()}signal=new OB;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=nN.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{n&&(n=!1,uH("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const gwe=n=>!cH.has(n),Jf=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),dH=n=>Jf(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?cS:null:null;class cS extends Array{constructor(e){super(e),this.fill(0)}}class Ty{heap;length;static #e=!1;static create(e){const t=dH(e);if(!t)return[];Ty.#e=!0;const r=new Ty(e,t);return Ty.#e=!1,r}constructor(e,t){if(!Ty.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class xk{#e;#t;#n;#r;#i;#c;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#o;#u;#l;#s;#f;#g;#h;#p;#v;#m;#x;#b;#_;#w;#E;#y;static unsafeExposeInternals(e){return{starts:e.#b,ttls:e.#_,sizes:e.#x,keyMap:e.#u,keyList:e.#l,valList:e.#s,next:e.#f,prev:e.#g,get head(){return e.#h},get tail(){return e.#p},free:e.#v,isBackgroundFetch:t=>e.#d(t),backgroundFetch:(t,r,i,s)=>e.#L(t,r,i,s),moveToTail:t=>e.#P(t),indexes:t=>e.#T(t),rindexes:t=>e.#M(t),isStale:t=>e.#S(t)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#o}get size(){return this.#a}get fetchMethod(){return this.#i}get memoMethod(){return this.#c}get dispose(){return this.#n}get disposeAfter(){return this.#r}constructor(e){const{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:u,disposeAfter:c,noDisposeOnSet:d,noUpdateTTL:h,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:x,fetchMethod:b,memoMethod:y,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:T,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:N,ignoreFetchAbort:k}=e;if(t!==0&&!Jf(t))throw new TypeError("max option must be a nonnegative integer");const q=t?dH(t):Array;if(!q)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=p,this.maxEntrySize=g||this.#t,this.sizeCalculation=x,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#c=y,b!==void 0&&typeof b!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#i=b,this.#E=!!b,this.#u=new Map,this.#l=new Array(t).fill(void 0),this.#s=new Array(t).fill(void 0),this.#f=new q(t),this.#g=new q(t),this.#h=0,this.#p=0,this.#v=Ty.create(t),this.#a=0,this.#o=0,typeof u=="function"&&(this.#n=u),typeof c=="function"?(this.#r=c,this.#m=[]):(this.#r=void 0,this.#m=void 0),this.#w=!!this.#n,this.#y=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!k,this.maxEntrySize!==0){if(this.#t!==0&&!Jf(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Jf(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!T,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Jf(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Jf(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#C()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){const L="LRU_CACHE_UNBOUNDED";gwe(L)&&(cH.add(L),uH("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,xk))}}getRemainingTTL(e){return this.#u.has(e)?1/0:0}#C(){const e=new cS(this.#e),t=new cS(this.#e);this.#_=e,this.#b=t,this.#D=(s,o,a=ey.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){const l=setTimeout(()=>{this.#S(s)&&this.#I(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#R=s=>{t[s]=e[s]!==0?ey.now():0},this.#A=(s,o)=>{if(e[o]){const a=e[o],l=t[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=r||i();const u=s.now-l;s.remainingTTL=a-u}};let r=0;const i=()=>{const s=ey.now();if(this.ttlResolution>0){r=s;const o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=this.#u.get(s);if(o===void 0)return 0;const a=e[o],l=t[o];if(!a||!l)return 1/0;const u=(r||i())-l;return a-u},this.#S=s=>{const o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#R=()=>{};#A=()=>{};#D=()=>{};#S=()=>!1;#U(){const e=new cS(this.#e);this.#o=0,this.#x=e,this.#N=t=>{this.#o-=e[t],e[t]=0},this.#F=(t,r,i,s)=>{if(this.#d(r))return 0;if(!Jf(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Jf(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(t,r,i)=>{if(e[t]=r,this.#t){const s=this.#t-e[t];for(;this.#o>s;)this.#O(!0)}this.#o+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#o)}}#N=e=>{};#k=(e,t,r)=>{};#F=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#T({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#p;!(!this.#q(t)||((e||!this.#S(t))&&(yield t),t===this.#h));)t=this.#g[t]}*#M({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#h;!(!this.#q(t)||((e||!this.#S(t))&&(yield t),t===this.#p));)t=this.#f[t]}#q(e){return e!==void 0&&this.#u.get(this.#l[e])===e}*entries(){for(const e of this.#T())this.#s[e]!==void 0&&this.#l[e]!==void 0&&!this.#d(this.#s[e])&&(yield[this.#l[e],this.#s[e]])}*rentries(){for(const e of this.#M())this.#s[e]!==void 0&&this.#l[e]!==void 0&&!this.#d(this.#s[e])&&(yield[this.#l[e],this.#s[e]])}*keys(){for(const e of this.#T()){const t=this.#l[e];t!==void 0&&!this.#d(this.#s[e])&&(yield t)}}*rkeys(){for(const e of this.#M()){const t=this.#l[e];t!==void 0&&!this.#d(this.#s[e])&&(yield t)}}*values(){for(const e of this.#T())this.#s[e]!==void 0&&!this.#d(this.#s[e])&&(yield this.#s[e])}*rvalues(){for(const e of this.#M())this.#s[e]!==void 0&&!this.#d(this.#s[e])&&(yield this.#s[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const r of this.#T()){const i=this.#s[r],s=this.#d(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[r],this))return this.get(this.#l[r],t)}}forEach(e,t=this){for(const r of this.#T()){const i=this.#s[r],s=this.#d(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#l[r],this)}}rforEach(e,t=this){for(const r of this.#M()){const i=this.#s[r],s=this.#d(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#l[r],this)}}purgeStale(){let e=!1;for(const t of this.#M({allowStale:!0}))this.#S(t)&&(this.#I(this.#l[t],"expire"),e=!0);return e}info(e){const t=this.#u.get(e);if(t===void 0)return;const r=this.#s[t],i=this.#d(r)?r.__staleWhileFetching:r;if(i===void 0)return;const s={value:i};if(this.#_&&this.#b){const o=this.#_[t],a=this.#b[t];if(o&&a){const l=o-(ey.now()-a);s.ttl=l,s.start=Date.now()}}return this.#x&&(s.size=this.#x[t]),s}dump(){const e=[];for(const t of this.#T({allowStale:!0})){const r=this.#l[t],i=this.#s[t],s=this.#d(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;const o={value:s};if(this.#_&&this.#b){o.ttl=this.#_[t];const a=ey.now()-this.#b[t];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[t]),e.unshift([r,o])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const i=Date.now()-r.start;r.start=ey.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=r;let{noUpdateTTL:u=this.noUpdateTTL}=r;const c=this.#F(e,t,r.size||0,a);if(this.maxEntrySize&&c>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#I(e,"set"),this;let d=this.#a===0?void 0:this.#u.get(e);if(d===void 0)d=this.#a===0?this.#p:this.#v.length!==0?this.#v.pop():this.#a===this.#e?this.#O(!1):this.#a,this.#l[d]=e,this.#s[d]=t,this.#u.set(e,d),this.#f[this.#p]=d,this.#g[d]=this.#p,this.#p=d,this.#a++,this.#k(d,c,l),l&&(l.set="add"),u=!1;else{this.#P(d);const h=this.#s[d];if(t!==h){if(this.#E&&this.#d(h)){h.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:p}=h;p!==void 0&&!o&&(this.#w&&this.#n?.(p,e,"set"),this.#y&&this.#m?.push([p,e,"set"]))}else o||(this.#w&&this.#n?.(h,e,"set"),this.#y&&this.#m?.push([h,e,"set"]));if(this.#N(d),this.#k(d,c,l),this.#s[d]=t,l){l.set="replace";const p=h&&this.#d(h)?h.__staleWhileFetching:h;p!==void 0&&(l.oldValue=p)}}else l&&(l.set="update")}if(i!==0&&!this.#_&&this.#C(),this.#_&&(u||this.#D(d,i,s),l&&this.#A(l,d)),!o&&this.#y&&this.#m){const h=this.#m;let p;for(;p=h?.shift();)this.#r?.(...p)}return this}pop(){try{for(;this.#a;){const e=this.#s[this.#h];if(this.#O(!0),this.#d(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#y&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#r?.(...t)}}}#O(e){const t=this.#h,r=this.#l[t],i=this.#s[t];return this.#E&&this.#d(i)?i.__abortController.abort(new Error("evicted")):(this.#w||this.#y)&&(this.#w&&this.#n?.(i,r,"evict"),this.#y&&this.#m?.push([i,r,"evict"])),this.#N(t),e&&(this.#l[t]=void 0,this.#s[t]=void 0,this.#v.push(t)),this.#a===1?(this.#h=this.#p=0,this.#v.length=0):this.#h=this.#f[t],this.#u.delete(r),this.#a--,t}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#u.get(e);if(s!==void 0){const o=this.#s[s];if(this.#d(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#S(s))i&&(i.has="stale",this.#A(i,s));else return r&&this.#R(s),i&&(i.has="hit",this.#A(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,i=this.#u.get(e);if(i===void 0||!r&&this.#S(i))return;const s=this.#s[i];return this.#d(s)?s.__staleWhileFetching:s}#L(e,t,r,i){const s=t===void 0?void 0:this.#s[t];if(this.#d(s))return s;const o=new x2,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const l={signal:o.signal,options:r,context:i},u=(x,b=!1)=>{const{aborted:y}=o.signal,E=r.ignoreFetchAbort&&x!==void 0;if(r.status&&(y&&!b?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,E&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),y&&!E&&!b)return d(o.signal.reason);const T=p;return this.#s[t]===p&&(x===void 0?T.__staleWhileFetching?this.#s[t]=T.__staleWhileFetching:this.#I(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,x,l.options))),x},c=x=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=x),d(x)),d=x=>{const{aborted:b}=o.signal,y=b&&r.allowStaleOnFetchAbort,E=y||r.allowStaleOnFetchRejection,T=E||r.noDeleteOnFetchRejection,I=p;if(this.#s[t]===p&&(!T||I.__staleWhileFetching===void 0?this.#I(e,"fetch"):y||(this.#s[t]=I.__staleWhileFetching)),E)return r.status&&I.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),I.__staleWhileFetching;if(I.__returned===I)throw x},h=(x,b)=>{const y=this.#i?.(e,s,l);y&&y instanceof Promise&&y.then(E=>x(E===void 0?void 0:E),b),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(x(void 0),r.allowStaleOnFetchAbort&&(x=E=>u(E,!0)))})};r.status&&(r.status.fetchDispatched=!0);const p=new Promise(h).then(u,c),g=Object.assign(p,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,g,{...l.options,status:void 0}),t=this.#u.get(e)):this.#s[t]=g,g}#d(e){if(!this.#E)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof x2}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:x,forceRefresh:b=!1,status:y,signal:E}=t;if(!this.#E)return y&&(y.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:y});const T={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:u,noUpdateTTL:c,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:g,ignoreFetchAbort:p,status:y,signal:E};let I=this.#u.get(e);if(I===void 0){y&&(y.fetch="miss");const N=this.#L(e,I,T,x);return N.__returned=N}else{const N=this.#s[I];if(this.#d(N)){const P=r&&N.__staleWhileFetching!==void 0;return y&&(y.fetch="inflight",P&&(y.returnedStale=!0)),P?N.__staleWhileFetching:N.__returned=N}const k=this.#S(I);if(!b&&!k)return y&&(y.fetch="hit"),this.#P(I),i&&this.#R(I),y&&this.#A(y,I),N;const q=this.#L(e,I,T,x),R=q.__staleWhileFetching!==void 0&&r;return y&&(y.fetch=k?"stale":"refresh",R&&k&&(y.returnedStale=!0)),R?q.__staleWhileFetching:q.__returned=q}}async forceFetch(e,t={}){const r=await this.fetch(e,t);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,t={}){const r=this.#c;if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:s,...o}=t,a=this.get(e,o);if(!s&&a!==void 0)return a;const l=r(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#u.get(e);if(a!==void 0){const l=this.#s[a],u=this.#d(l);return o&&this.#A(o,a),this.#S(a)?(o&&(o.get="stale"),u?(o&&r&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?l.__staleWhileFetching:void 0):(s||this.#I(e,"expire"),o&&r&&(o.returnedStale=!0),r?l:void 0)):(o&&(o.get="hit"),u?l.__staleWhileFetching:(this.#P(a),i&&this.#R(a),l))}else o&&(o.get="miss")}#j(e,t){this.#g[t]=e,this.#f[e]=t}#P(e){e!==this.#p&&(e===this.#h?this.#h=this.#f[e]:this.#j(this.#g[e],this.#f[e]),this.#j(this.#p,e),this.#p=e)}delete(e){return this.#I(e,"delete")}#I(e,t){let r=!1;if(this.#a!==0){const i=this.#u.get(e);if(i!==void 0)if(r=!0,this.#a===1)this.#B(t);else{this.#N(i);const s=this.#s[i];if(this.#d(s)?s.__abortController.abort(new Error("deleted")):(this.#w||this.#y)&&(this.#w&&this.#n?.(s,e,t),this.#y&&this.#m?.push([s,e,t])),this.#u.delete(e),this.#l[i]=void 0,this.#s[i]=void 0,i===this.#p)this.#p=this.#g[i];else if(i===this.#h)this.#h=this.#f[i];else{const o=this.#g[i];this.#f[o]=this.#f[i];const a=this.#f[i];this.#g[a]=this.#g[i]}this.#a--,this.#v.push(i)}}if(this.#y&&this.#m?.length){const i=this.#m;let s;for(;s=i?.shift();)this.#r?.(...s)}return r}clear(){return this.#B("delete")}#B(e){for(const t of this.#M({allowStale:!0})){const r=this.#s[t];if(this.#d(r))r.__abortController.abort(new Error("deleted"));else{const i=this.#l[t];this.#w&&this.#n?.(r,i,e),this.#y&&this.#m?.push([r,i,e])}}if(this.#u.clear(),this.#s.fill(void 0),this.#l.fill(void 0),this.#_&&this.#b&&(this.#_.fill(0),this.#b.fill(0)),this.#x&&this.#x.fill(0),this.#h=0,this.#p=0,this.#v.length=0,this.#o=0,this.#a=0,this.#y&&this.#m){const t=this.#m;let r;for(;r=t?.shift();)this.#r?.(...r)}}}class P0{constructor(e,t){this.max=e,this._seed=t}cast(e,t){return BigInt.asUintN(t,e)}checkNum(e){if(e>this.max)throw new Error(`Number greater than ${this.max}`)}reset(){if(this.constructor===P0)throw new Error("Method not implemented")}_int(){if(this.constructor===P0)throw new Error("Method not implemented");return BigInt(0)}bool(){return this.float()>=.5}coin(e=.5){return this.float()<e}int(){return Number(this._int())}bigInt(){return this._int()}float(){return this.int()*(1/this.max)}float53(){const e=this.int()>>>5,t=this.int()>>>6;return(e*0x4000000+t)*(1/0x20000000000000)}randRange(e,t){const r=t-e,i=this.max%r;let s=this.int();for(;s<i;)s=this.int();return e+s%r}randBelow(e){return this.randRange(0,e)}choice(e){return e[this.randBelow(e.length)]}shuffle(e,t=!0){let r=e;t||(r=Array.from(r));for(let i=r.length-1;i>0;i--){const s=this.randRange(0,i),o=r[i];r[i]=r[s],r[s]=o}return r}initArray(e,t){return Array.from({length:e},t)}boolArray(e){return this.initArray(e,()=>this.bool())}coinArray(e,t=.5){return this.initArray(e,()=>this.coin(t))}intArray(e){return this.initArray(e,()=>this.int())}bigIntArray(e){return this.initArray(e,()=>this.bigInt())}randRangeArray(e,t,r){return this.initArray(e,()=>this.randRange(t,r))}floatArray(e){return this.initArray(e,()=>this.float())}float53Array(e){return this.initArray(e,()=>this.float53())}}class ywe extends P0{constructor(e,t){super(e,t)}int(){return Number(this._int()>>11n)}float(){return this.int()/this.max}float53(){return this.float()}}const vwe=2**32,_we=2**53;class fH extends ywe{constructor(e=Date.now(),t=13,r=7,i=17){super(_we,BigInt(e)),this.seed=e,this.a=this.cast(BigInt(t),64),this.b=this.cast(BigInt(r),64),this.c=this.cast(BigInt(i),64)}reset(){this.x=this.seed}get seed(){return this._seed}set seed(e){this._seed=this.cast(BigInt(e),64),this.x=this._seed}_int(){let{x:e}=this;return e^=e<<this.a,e=this.cast(e,64),e^=e>>this.b,e^=e<<this.c,e=this.cast(e,64),this.x=e,e}}class xwe extends P0{constructor(e=Date.now(),t=0x159a55e5,r=0x1f123bb5,i=0x5491333,s=5783321,o=6615241,a=362437){super(vwe,BigInt(e)),this._seed=this.cast(this._seed,32),this.x=this._seed,this.y=this.cast(BigInt(t),32),this.z=this.cast(BigInt(r),32),this.w=this.cast(BigInt(i),32),this.v=this.cast(BigInt(s),32),this.d=this.cast(BigInt(o),32),this.weyl=this.cast(BigInt(a),32),this.origParams={y:this.y,z:this.z,w:this.w,v:this.v,d:this.d}}reset(){this.x=this.seed,Object.assign(this,this.origParams)}get seed(){return this._seed}set seed(e){this._seed=this.cast(BigInt(e),32),this.reset()}_int(){let e=this.x,{v:t}=this;return e^=e>>2n,e^=e<<1n,t^=t<<4n,this.x=this.y,this.y=this.z,this.z=this.w,this.w=this.v,this.v=this.cast(t^e,32),this.d+=this.weyl,this.cast(this.d+this.v,32)}}new fH(Date.now());new fH(Date.now());const hH=Math.sqrt(3),bwe=.5*(hH-1),B_=(3-hH)/6,LB=n=>Math.floor(n)|0,DB=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function wwe(n=Math.random){const e=Swe(n),t=new Float64Array(e).map(i=>DB[i%12*2]),r=new Float64Array(e).map(i=>DB[i%12*2+1]);return function(s,o){let a=0,l=0,u=0;const c=(s+o)*bwe,d=LB(s+c),h=LB(o+c),p=(d+h)*B_,g=d-p,x=h-p,b=s-g,y=o-x;let E,T;b>y?(E=1,T=0):(E=0,T=1);const I=b-E+B_,N=y-T+B_,k=b-1+2*B_,q=y-1+2*B_,L=d&255,R=h&255;let P=.5-b*b-y*y;if(P>=0){const V=L+e[R],W=t[V],Q=r[V];P*=P,a=P*P*(W*b+Q*y)}let F=.5-I*I-N*N;if(F>=0){const V=L+E+e[R+T],W=t[V],Q=r[V];F*=F,l=F*F*(W*I+Q*N)}let z=.5-k*k-q*q;if(z>=0){const V=L+1+e[R+1],W=t[V],Q=r[V];z*=z,u=z*z*(W*k+Q*q)}return 70*(a+l+u)}}function Swe(n){const t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){const i=r+~~(n()*(256-r)),s=t[r];t[r]=t[i],t[i]=s}for(let r=256;r<512;r++)t[r]=t[r-256];return t}const Ewe=n=>{let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return Math.abs(e)},Twe=({config:n,cache:e=1024})=>{const t=ie.useRef(new xwe(Ewe(n.seed))),r=ie.useRef(new xk({max:e,ttl:1e3*60*30})),i=ie.useRef(wwe(()=>t.current.float())),{plotCount:s}=n,o=1/(s*n.scale),a=ie.useCallback((c,d)=>{const h=new Array(s**2);for(let p=0;p<s;p++)for(let g=0;g<s;g++){const x=(c*s+g)*o,b=(d*s+(s-p-1))*o,y=i.current(x,b);h[p*s+g]=(y+1)/2}return h},[]),l=ie.useRef(Object.values(n.tiles).sort((c,d)=>d.noise-c.noise)).current,u=ie.useCallback(c=>{for(const d of l)if(c>=d.noise)return d.id;return l[l.length-1].id},[]);return({x:c,z:d})=>{const h=new xee.Timer,p=`${c}:${d}`,g=r.current.get(p);if(g)return g;h.start(),console.log("Generating chunk",{x:c,z:d});const x=a(c,d),b=new Array(s**2);for(let y=0;y<s;y++)for(let E=0;E<s;E++){const T=x[y*s+E],I=u(T),N=(s-y-1)*s+E;b[N]={id:N,tileId:I}}return r.current.set(p,b),console.log(`	-- Generated in [${h.stop().ms()}ms]`),b}},Mwe=({chunkSize:n})=>{const{camera:e,size:t}=Ma(({camera:s,size:o})=>({camera:s,size:o})),r=ie.useRef([new Pe,new Pe,new Pe,new Pe]),i=ie.useRef(new Set);return ie.useEffect(()=>{e instanceof Kd||console.error("This computation is designed for an orthographic camera.")},[e]),()=>{const{top:s,bottom:o,zoom:a,position:{x:l,z:u}}=e,c=(s-o)/a,d=c*(t.width/t.height);r.current[0].set(l-d/2,0,u-c/2),r.current[1].set(l+d/2,0,u-c/2),r.current[2].set(l-d/2,0,u+c/2),r.current[3].set(l+d/2,0,u+c/2);const h=Math.floor(r.current[0].x/n),p=Math.floor(r.current[1].x/n),g=Math.floor(r.current[0].z/n),x=Math.floor(r.current[2].z/n);i.current.clear();for(let b=h;b<=p;b++)for(let y=g;y<=x;y++)i.current.add({x:b,z:y});return[...i.current]}},FB={deepwater:{id:"deepwater",level:"terrain",noise:0,chance:50,color:204},water:{id:"water",level:"terrain",noise:.15,chance:50,color:255},beach:{id:"beach",level:"terrain",noise:.2,chance:100,color:0xffcc00},sand:{id:"sand",level:"terrain",noise:.25,chance:40,color:0xffff00},mountain:{id:"mountain",level:"terrain",noise:.875,chance:100,color:0x999999},snow:{id:"snow",level:"terrain",noise:.95,chance:100,color:0xffffff},rock:{id:"rock",level:"terrain",noise:.8,chance:100,color:0xaaaaaa},hill:{id:"hill",level:"terrain",noise:.7,chance:100,color:2149445},grass:{id:"grass",level:"terrain",noise:.4,chance:100,color:65280},forest:{id:"forest",level:"terrain",noise:.45,chance:100,color:1432883}},Iwe=({mapId:n,config:e})=>{const{invalidate:t}=Ma(({invalidate:l})=>({invalidate:l})),r=Mwe({chunkSize:e.chunkSize}),i=Twe({config:{tiles:FB,seed:n,plotCount:e.plotCount,scale:5}}),s=ie.useRef(new Map),[,o]=ie.useReducer(l=>l+1,0),a=ie.useCallback(()=>{s.current.clear(),r().forEach(l=>{s.current.set(`${l.x}:${l.z}`,{x:l.x,z:l.z,tiles:i(l)})}),t(),o()},[s,r,i,t]);return ie.useEffect(()=>{a()},[]),S.jsxs(S.Fragment,{children:[S.jsx(lwe,{enableRotate:!1,enablePan:!0,enableZoom:!0,enableDamping:!1,screenSpacePanning:!1,zoomToCursor:!0,mouseButtons:{LEFT:th.PAN},onChange:()=>{a()}}),S.jsx(mwe,{config:e,tiles:FB,chunksRef:s})]})},Awe=n=>{const e=Bt.c(8),{children:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={preserveDrawingBuffer:!1,powerPreference:"high-performance",toneMapping:_T,toneMappingExposure:1},e[0]=r):r=e[0];let i,s;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx("color",{attach:"background",args:[1053968]}),s=S.jsx(pwe,{}),e[1]=i,e[2]=s):(i=e[1],s=e[2]);let o,a;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=S.jsx(awe,{makeDefault:!0,zoom:5,position:[0,500,0]}),a=S.jsx("ambientLight",{intensity:.5}),e[3]=o,e[4]=a):(o=e[3],a=e[4]);let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=S.jsx("directionalLight",{color:0xffffff,intensity:1,position:[0,100,0]}),e[5]=l):l=e[5];let u;return e[6]!==t?(u=S.jsxs(Qbe,{frameloop:"demand",gl:r,orthographic:!0,children:[i,s,o,a,l,t]}),e[6]=t,e[7]=u):u=e[7],u},Cwe=n=>{const e=Bt.c(7),{mapId:t,config:r}=n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=fr(["w-screen","h-screen","overflow-hidden"]),e[0]=i):i=e[0];let s;e[1]!==r||e[2]!==t?(s=S.jsx(Iwe,{mapId:t,config:r}),e[1]=r,e[2]=t,e[3]=s):s=e[3];let o;return e[4]!==r||e[5]!==s?(o=S.jsx("div",{className:i,children:S.jsx(Awe,{config:r,children:s})}),e[4]=r,e[5]=s,e[6]=o):o=e[6],o},pH=Ln("/$locale/apps/derivean/map/$mapId")({async loader({context:{queryClient:n,kysely:e,session:t},params:{mapId:r}}){const i=await t();return{user:i,cycle:await n.ensureQueryData({queryKey:["map",r,"cycle"],async queryFn(){return e.transaction().execute(async s=>(await s.selectFrom("Cycle as c").select(o=>o.fn.count("c.id").as("count")).where("c.userId","=",i.id).executeTakeFirstOrThrow()).count)}})}},component(){const{mapId:n}=pH.useParams();return S.jsx(Cwe,{mapId:n,config:Ghe})}}),mH=Ln("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:n}}){return{tables:await n.introspection.getTables()}},component(){const{tables:n}=mH.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let a=`z.never({message: '${i}'})`;switch(o){case"integer":{a="z.number().int()";break}case"float4":{a="z.number()";break}case"datetime":{a="z.string()";break}case"boolean":{a="withBoolSchema()";break}case"text":a="z.string()"}return o.startsWith("varchar")&&(a=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${a}${s?".nullish()":""}
`},t=n.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=n.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return S.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${t.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),qB=Is(),Rwe=[qB({name:"name",header(){return S.jsx(he,{label:"User name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:t,id:n.id},children:e})},size:14}),qB({name:"login",header(){return S.jsx(he,{label:"User login (label)"})},render({value:n}){return n},size:14})],Nwe=n=>{const e=Bt.c(14);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=[["GameMap"],["Management"],["User_Inventory"]],e[3]=i):i=e[3];const s=ji(i);let o;e[4]!==s?(o={async mutationFn(h){const{userId:p}=h;return An.transaction().execute(async g=>{await g.deleteFrom("Map").where("userId","=",p).execute()})},async onSuccess(){await s()}},e[4]=s,e[5]=o):o=e[5];const a=or(o);let l;e[6]!==r?(l={...r,columns:Rwe},e[6]=r,e[7]=l):l=e[7];const u=Ms(l);let c;e[8]!==a?(c={row(h){const{data:p}=h;return S.jsx(Bi,{children:S.jsx(qN,{icon:js,onClick:()=>{a.mutateAsync({userId:p.id})},children:S.jsx(he,{label:"Reset game (menu)"})})})}},e[8]=a,e[9]=c):c=e[9];let d;return e[10]!==t||e[11]!==u||e[12]!==c?(d=S.jsx(Ts,{table:u,action:c,...t}),e[10]=t,e[11]=u,e[12]=c,e[13]=d):d=e[13],d},Pwe=Xse({shape:ne.object({name:ne.string().min(1),login:ne.string().min(1),password:ne.string().min(1)}),filter:ca.merge(ne.object({login:ne.string().optional(),password:ne.string().optional()}))}),uS=Ln("/$locale/apps/derivean/root/user/list")({validateSearch:rs(Es(Pwe)),loaderDeps({search:{filter:n,cursor:e}}){return{filter:n,cursor:e}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r}}){return n.ensureQueryData({queryKey:["User","list-count",{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(i=>zi({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),login:ne.string().min(1)}),filter:t,cursor:r}))}})},component:()=>{const{data:n,count:e}=uS.useLoaderData(),{filter:t,cursor:r,selection:i}=uS.useSearch(),s=uS.useNavigate(),{tva:o}=Ui({from:"__root__"}),a=o().slots;return S.jsx("div",{className:a.base(),children:S.jsx(Nwe,{table:{data:n,filter:{value:t,set:ws(s)},selection:{type:"multi",value:i,set:ll(s)}},fulltext:{value:t?.fulltext,set:Ss(s)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of users (label)"}),...bs(s)}})})}}),kwe=n=>{const e=Bt.c(20);let t,r;e[0]!==n?({entity:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale"},e[3]=i):i=e[3];const{locale:s}=nr(i);let o;e[4]!==t.id||e[5]!==s?(o={locale:s,id:t.id},e[4]=t.id,e[5]=s,e[6]=o):o=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=S.jsx(he,{label:"View detail (menu)"}),e[7]=a):a=e[7];let l;e[8]!==o?(l=S.jsx(Pi,{icon:sP,to:"/$locale/apps/derivean/root/user/$id/view",params:o,children:a}),e[8]=o,e[9]=l):l=e[9];let u;e[10]!==t.id||e[11]!==s?(u={locale:s,id:t.id},e[10]=t.id,e[11]=s,e[12]=u):u=e[12];let c;e[13]===Symbol.for("react.memo_cache_sentinel")?(c=S.jsx(he,{label:"Building list (menu)"}),e[13]=c):c=e[13];let d;e[14]!==u?(d=S.jsx(Pi,{icon:ql,to:"/$locale/apps/derivean/root/user/$id/building/list",params:u,children:c}),e[14]=u,e[15]=d):d=e[15];let h;return e[16]!==r||e[17]!==l||e[18]!==d?(h=S.jsxs(Bm,{...r,children:[l,d]}),e[16]=r,e[17]=l,e[18]=d,e[19]=h):h=e[19],h},Owe=n=>{const e=Bt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i=()=>S.jsx(S.Fragment,{children:S.jsx(In,{icon:Z2,to:"/$locale/apps/derivean/root/user/list",params:{locale:r},children:S.jsx(he,{label:"User list (label)"})})}),e[1]=r,e[2]=i):i=e[2];let s;return e[3]!==n||e[4]!==i?(s=S.jsx(Sv,{title:Lwe,actions:i,...n}),e[3]=n,e[4]=i,e[5]=s):s=e[5],s};function Lwe(n){const{entity:e}=n;return S.jsx(Ev,{icon:sP,title:e.name})}const gH=Ln("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:n},params:{id:e}}){return n.transaction().execute(async t=>({entity:await tu({select:t.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:ne.object({id:ne.string().min(1),name:ne.string().min(1)})})}))},component(){const{tva:n}=Ui({from:"__root__"}),{entity:e}=gH.useLoaderData(),t=n().slots;return S.jsxs("div",{className:t.base(),children:[S.jsx(Owe,{entity:e}),S.jsx(kwe,{entity:e}),S.jsx(dc,{})]})}}),xb=Gse({shape:ne.object({code:ne.string().min(1),label:ne.string().min(1),group:ne.string().nullish(),sort:ku()}),filter:ca.merge(ne.object({code:ne.string().optional(),group:ne.string().optional()}))}),jB=n=>{const e=Bt.c(66),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(xb.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{sort:0,...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I,N,k;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const z=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;k=z.base(),e[20]!==c||e[21]!==t?(h=da({form:c,mutation:t}),e[20]=c,e[21]=t,e[22]=h):h=e[22];let V;e[23]===Symbol.for("react.memo_cache_sentinel")?(V={highlight:!0},e[23]=V):V=e[23],e[24]!==c.formState.errors.root?(p=S.jsx(po,{variant:V,error:c.formState.errors.root}),e[24]=c.formState.errors.root,e[25]=p):p=e[25];const W=c.formState;let Q;e[26]===Symbol.for("react.memo_cache_sentinel")?(Q=S.jsx(he,{label:"Tag code (label)"}),e[26]=Q):Q=e[26];const X=z.input();let re;e[27]!==c?(re=c.register("code"),e[27]=c,e[28]=re):re=e[28];const G=S.jsx("input",{type:"text",className:X,...re});e[29]!==c.formState||e[30]!==G?(g=S.jsx(xr,{formState:W,name:"code",label:Q,required:!0,children:G}),e[29]=c.formState,e[30]=G,e[31]=g):g=e[31];const Y=c.formState;let te;e[32]===Symbol.for("react.memo_cache_sentinel")?(te=S.jsx(he,{label:"Tag label (label)"}),e[32]=te):te=e[32];const Z=z.input();let fe;e[33]!==c?(fe=c.register("label"),e[33]=c,e[34]=fe):fe=e[34];const ge=S.jsx("input",{type:"text",className:Z,...fe});e[35]!==c.formState||e[36]!==ge?(x=S.jsx(xr,{formState:Y,name:"label",label:te,required:!0,children:ge}),e[35]=c.formState,e[36]=ge,e[37]=x):x=e[37];const ce=c.formState;let ye;e[38]===Symbol.for("react.memo_cache_sentinel")?(ye=S.jsx(he,{label:"Tag group (label)"}),e[38]=ye):ye=e[38];const be=z.input();let Ee;e[39]!==c?(Ee=c.register("group"),e[39]=c,e[40]=Ee):Ee=e[40];const Me=S.jsx("input",{type:"text",className:be,...Ee});e[41]!==c.formState||e[42]!==Me?(b=S.jsx(xr,{formState:ce,name:"group",label:ye,children:Me}),e[41]=c.formState,e[42]=Me,e[43]=b):b=e[43],d=xr,T=c.formState,I="sort",e[44]===Symbol.for("react.memo_cache_sentinel")?(N=S.jsx(he,{label:"Tag sort (label)"}),e[44]=N):N=e[44],y="number",E=z.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I,e[18]=N,e[19]=k}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17],N=e[18],k=e[19];let q;e[45]!==c?(q=c.register("sort"),e[45]=c,e[46]=q):q=e[46];let L;e[47]!==q||e[48]!==y||e[49]!==E?(L=S.jsx("input",{type:y,className:E,...q}),e[47]=q,e[48]=y,e[49]=E,e[50]=L):L=e[50];let R;e[51]!==d||e[52]!==L||e[53]!==T||e[54]!==I||e[55]!==N?(R=S.jsx(d,{formState:T,name:I,label:N,children:L}),e[51]=d,e[52]=L,e[53]=T,e[54]=I,e[55]=N,e[56]=R):R=e[56];let P;e[57]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:n0,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[57]=P):P=e[57];let F;return e[58]!==h||e[59]!==p||e[60]!==g||e[61]!==x||e[62]!==b||e[63]!==R||e[64]!==k?(F=S.jsxs("form",{className:k,onSubmit:h,children:[p,g,x,b,R,P]}),e[58]=h,e[59]=p,e[60]=g,e[61]=x,e[62]=b,e[63]=R,e[64]=k,e[65]=F):F=e[65],F},gC=Is(),Dwe=[gC({name:"label",header(){return S.jsx(he,{label:"Tag label (label)"})},render({value:n}){return n},size:14}),gC({name:"code",header(){return S.jsx(he,{label:"Tag code (label)"})},render({value:n}){return n},size:14}),gC({name:"group",header(){return S.jsx(he,{label:"Tag group (label)"})},render({value:n}){return n},filter:{path:"group",onFilter({data:n,filter:e}){e.shallow("group",n.group)}},size:24})],yH=({group:n,table:e,...t})=>{const r=ji([["Tag"],["Resource"]]);return S.jsx(Ts,{table:Ms({...e,columns:Dwe}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create tag (menu)"}),textTitle:S.jsx(he,{label:"Create tag (modal)"}),icon:n0,children:S.jsx(jB,{defaultValues:{group:n},mutation:or({async mutationFn(i){return ci.promise(An.transaction().execute(s=>s.insertInto("Tag").values({id:Xr(),...i}).returningAll().executeTakeFirstOrThrow()),zo("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit tag (modal)"}),icon:n0,children:S.jsx(jB,{defaultValues:{group:n,...i},mutation:or({async mutationFn(s){return ci.promise(An.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),zo("Edit tag"))},async onSuccess(){await r()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>{await An.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:S.jsx(he,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...t})},dS=Ln("/$locale/apps/derivean/root/tag/list")({validateSearch:rs(Es(xb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r}}){return n.ensureQueryData({queryKey:["Tag","list-count",{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async i=>zi({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:ne.object({id:ne.string().min(1),code:ne.string().min(1),label:ne.string().min(1),group:ne.string().nullish(),sort:ne.number().int().nonnegative()}),filter:t,cursor:r}))}})},component:()=>{const{data:n,count:e}=dS.useLoaderData(),{filter:t,cursor:r,selection:i}=dS.useSearch(),s=dS.useNavigate(),{tva:o}=Ui({from:"__root__"}),a=o().slots;return S.jsx("div",{className:a.base(),children:S.jsx(yH,{table:{data:n,filter:{value:t,set:ws(s)},selection:{type:"multi",value:i,set:ll(s)}},fulltext:{value:t?.fulltext,set:Ss(s)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of items"}),...bs(s)}})})}}),Fwe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({group:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==t?(i=o=>S.jsx(yH,{group:t,...o}),e[3]=t,e[4]=i):i=e[4];let s;return e[5]!==r||e[6]!==i?(s=S.jsx(T6,{icon:n0,table:i,render:qwe,queryKey:"Tag",query:jwe,...r}),e[5]=r,e[6]=i,e[7]=s):s=e[7],s};function qwe(n){const{entities:e}=n;return S.jsx(A6,{tags:e})}async function jwe(n){const{filter:e,cursor:t}=n;return An.transaction().execute(async r=>zi({select:r.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:xb.entity,query(i){const{select:s,where:o}=i;let a=s;if(o?.id&&(a=a.where("t.id","=",o.id)),o?.idIn&&(a=a.where("t.id","in",o.idIn)),o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("t.code","like",l),u("t.group","like",l),u("t.label","like",l),u("t.id","like",l)]))}return a},filter:e,cursor:t}))}const vH=Hse({shape:ne.object({name:ne.string().min(1),weight:ku(),tagIds:ne.array(ne.string()).optional(),image:ne.instanceof(FileList,{message:"You must upload a file."}).transform(n=>n[0]).refine(n=>(n&&n.size<5*1024*1024,!0),{message:sl.text("File size must be less than 5MB")}).refine(n=>n?["image/png","image/jpeg","image/webp"].includes(n.type):!0,{message:"Only PNG/JPEG/WEBP files are allowed."}).optional()}),filter:ca.merge(ne.object({name:ne.string().optional()}))}),BB=n=>{const e=Bt.c(72),{group:t,mutation:r,defaultValues:i,variant:s,tva:o,css:a}=n,l=t===void 0?"resource":t,u=o===void 0?wo:o;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=Eo(vH.shape),e[0]=c):c=e[0];let d;e[1]!==i?(d={resolver:c,defaultValues:{name:"",weight:1,...i}},e[1]=i,e[2]=d):d=e[2];const h=So(d);let p,g,x,b,y,E,T,I,N,k,q,L;if(e[3]!==a||e[4]!==h||e[5]!==r||e[6]!==u||e[7]!==s){const G=u({...s,isLoading:h.formState.isLoading,isSubmitting:h.formState.isSubmitting,css:a}).slots;x=G.base(),e[20]!==h||e[21]!==r?(b=da({form:h,mutation:r}),e[20]=h,e[21]=r,e[22]=b):b=e[22];let Y;e[23]===Symbol.for("react.memo_cache_sentinel")?(Y={highlight:!0},e[23]=Y):Y=e[23],e[24]!==h.formState.errors.root?(y=S.jsx(po,{variant:Y,error:h.formState.errors.root}),e[24]=h.formState.errors.root,e[25]=y):y=e[25];const te=h.formState;let Z;e[26]===Symbol.for("react.memo_cache_sentinel")?(Z=S.jsx(he,{label:"Resource name (label)"}),e[26]=Z):Z=e[26];const fe=G.input();let ge;e[27]!==h?(ge=h.register("name"),e[27]=h,e[28]=ge):ge=e[28];const ce=S.jsx("input",{type:"text",className:fe,...ge});e[29]!==h.formState||e[30]!==ce?(E=S.jsx(xr,{formState:te,name:"name",label:Z,children:ce}),e[29]=h.formState,e[30]=ce,e[31]=E):E=e[31];const ye=h.formState;let be,Ee;e[32]===Symbol.for("react.memo_cache_sentinel")?(be=S.jsx(he,{label:"Resource weight (label)"}),Ee=S.jsx(he,{label:"Weight is used to compute, how fast a resource moves on the road (hint)"}),e[32]=be,e[33]=Ee):(be=e[32],Ee=e[33]);const Me=G.input();let qe;e[34]!==h?(qe=h.register("weight"),e[34]=h,e[35]=qe):qe=e[35];const Ue=S.jsx("input",{type:"number",className:Me,min:1,...qe});e[36]!==h.formState||e[37]!==Ue?(T=S.jsx(xr,{formState:ye,name:"weight",label:be,hint:Ee,required:!0,children:Ue}),e[36]=h.formState,e[37]=Ue,e[38]=T):T=e[38],p=xr,k=h.formState,q="image",e[39]===Symbol.for("react.memo_cache_sentinel")?(L=S.jsx(he,{label:"Resource image (label)"}),g=S.jsx(he,{label:"Resource image (hint)"}),e[39]=g,e[40]=L):(g=e[39],L=e[40]),I="file",N=G.input(),e[3]=a,e[4]=h,e[5]=r,e[6]=u,e[7]=s,e[8]=p,e[9]=g,e[10]=x,e[11]=b,e[12]=y,e[13]=E,e[14]=T,e[15]=I,e[16]=N,e[17]=k,e[18]=q,e[19]=L}else p=e[8],g=e[9],x=e[10],b=e[11],y=e[12],E=e[13],T=e[14],I=e[15],N=e[16],k=e[17],q=e[18],L=e[19];let R;e[41]!==h?(R=h.register("image"),e[41]=h,e[42]=R):R=e[42];let P;e[43]!==R||e[44]!==I||e[45]!==N?(P=S.jsx("input",{type:I,className:N,...R}),e[43]=R,e[44]=I,e[45]=N,e[46]=P):P=e[46];let F;e[47]!==p||e[48]!==g||e[49]!==P||e[50]!==k||e[51]!==q||e[52]!==L?(F=S.jsx(p,{formState:k,name:q,label:L,hint:g,children:P}),e[47]=p,e[48]=g,e[49]=P,e[50]=k,e[51]=q,e[52]=L,e[53]=F):F=e[53];let z;e[54]===Symbol.for("react.memo_cache_sentinel")?(z=S.jsx(he,{label:"Resource tags (label)"}),e[54]=z):z=e[54];let V;e[55]!==l?(V=G=>{const{field:Y}=G,{ref:te,...Z}=Y;return S.jsx(Fwe,{group:l,textTitle:S.jsx(he,{label:"Select resource tags (title)"}),textSelect:S.jsx(he,{label:"Select resource tags (label)"}),allowEmpty:!0,...Z})},e[55]=l,e[56]=V):V=e[56];let W;e[57]!==h.control||e[58]!==V?(W=S.jsx(La,{control:h.control,name:"tagIds",render:V}),e[57]=h.control,e[58]=V,e[59]=W):W=e[59];let Q;e[60]!==h.formState||e[61]!==W?(Q=S.jsx(xr,{formState:h.formState,name:"tagIds",label:z,children:W}),e[60]=h.formState,e[61]=W,e[62]=Q):Q=e[62];let X;e[63]===Symbol.for("react.memo_cache_sentinel")?(X=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:ns,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[63]=X):X=e[63];let re;return e[64]!==x||e[65]!==b||e[66]!==y||e[67]!==E||e[68]!==T||e[69]!==F||e[70]!==Q?(re=S.jsxs("form",{className:x,onSubmit:b,children:[y,E,T,F,Q,X]}),e[64]=x,e[65]=b,e[66]=y,e[67]=E,e[68]=T,e[69]=F,e[70]=Q,e[71]=re):re=e[71],re},ty=Is(),Bwe=[ty({name:"name",header(){return S.jsx(he,{label:"Resource name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:S.jsx("div",{className:fr(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${n.id}`])}),to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:t,id:n.id},children:e})},size:18}),ty({name:"weight",header(){return S.jsx(he,{label:"Resource weight (label)"})},render({value:n}){return $r({number:n})},size:12}),ty({name:"countProduction",header(){return S.jsx(he,{label:"Resource production count (label)"})},render({value:n}){return S.jsx(ia,{css:{base:n!==void 0&&n===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:$r({number:n})})},size:12}),ty({name:"countRequirement",header(){return S.jsx(he,{label:"Resource requirement count (label)"})},render({data:n,value:e}){return S.jsx(ia,{css:{base:n.countRequirement===0&&n.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:$r({number:e})})},size:12}),ty({name:"countProductionRequirement",header(){return S.jsx(he,{label:"Resource production requirement count (label)"})},render({data:n,value:e}){return S.jsx(ia,{css:{base:n.countRequirement===0&&n.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:$r({number:e})})},size:18}),ty({name:"tags",header(){return S.jsx(he,{label:"Resource tags (label)"})},render({value:n}){return S.jsx(A6,{tags:n})},size:32})],_H=({group:n,table:e,...t})=>{const r=ji([["Resource"],["Resource_Tag"]]);return S.jsx(Ts,{table:Ms({...e,columns:Bwe}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create resource (menu)"}),textTitle:S.jsx(he,{label:"Create resource (modal)"}),icon:ns,children:({close:i})=>S.jsx(BB,{group:n,mutation:or({async mutationFn({image:s,tagIds:o=[],...a}){return An.transaction().execute(async l=>{const u=await l.insertInto("Resource").values({id:Xr(),...a,image:s?await lv(s):null}).returningAll().executeTakeFirstOrThrow();return o.length&&await l.insertInto("Resource_Tag").values(o.map(c=>({id:Xr(),resourceId:u.id,tagId:c}))).execute(),u})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit resource (modal)"}),icon:ns,children:({close:s})=>S.jsx(BB,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:or({async mutationFn({image:o,tagIds:a,...l}){return ci.promise(An.transaction().execute(async u=>{const c=await u.updateTable("Resource").set({...l,image:o?await lv(o):null}).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",c.id).execute(),a?.length&&await u.insertInto("Resource_Tag").values(a.map(d=>({id:Xr(),resourceId:c.id,tagId:d}))).execute(),c}),zo("Update resource"))},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...t})},fS=Ln("/$locale/apps/derivean/root/resource/list")({validateSearch:rs(Es(vH)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r}}){return n.ensureQueryData({queryKey:["Resource","list-count",{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(i=>zi({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.weight",s=>s.selectFrom("Tag as t").select(o=>vs`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("r.id","like",l),u("r.name","like",l),u("r.id","in",u.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(c=>c.or([c("t.code","like",l),c("t.label","like",l),c("t.group","like",l)])))]))}return a},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),weight:ku(),countRequirement:ne.number().nonnegative(),countProduction:ne.number().nonnegative(),countProductionRequirement:ne.number().nonnegative(),tags:jo(xb.entity)}),filter:t,cursor:r}))}})},component:()=>{const{data:n,count:e}=fS.useLoaderData(),{filter:t,cursor:r,selection:i}=fS.useSearch(),s=fS.useNavigate(),{tva:o}=Ui({from:"__root__"}),a=o().slots;return S.jsx("div",{className:a.base(),children:S.jsx(_H,{table:{data:n,filter:{value:t,set:ws(s)},selection:{type:"multi",value:i,set:ll(s)}},fulltext:{value:t?.fulltext,set:Ss(s)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of items"}),...bs(s)}})})}}),Uwe=n=>{const e=Bt.c(13);let t,r;e[0]!==n?({entity:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale"},e[3]=i):i=e[3];const{locale:s}=nr(i);let o;e[4]!==t.id||e[5]!==s?(o={locale:s,id:t.id},e[4]=t.id,e[5]=s,e[6]=o):o=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=S.jsx(he,{label:"View detail (menu)"}),e[7]=a):a=e[7];let l;e[8]!==o?(l=S.jsx(Pi,{icon:ns,to:"/$locale/apps/derivean/root/resource/$id/view",params:o,children:a}),e[8]=o,e[9]=l):l=e[9];let u;return e[10]!==r||e[11]!==l?(u=S.jsx(Bm,{...r,children:l}),e[10]=r,e[11]=l,e[12]=u):u=e[12],u},zwe=n=>{const e=Bt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i=()=>S.jsx(S.Fragment,{children:S.jsx(In,{icon:Z2,to:"/$locale/apps/derivean/root/resource/list",params:{locale:r},children:S.jsx(he,{label:"Resource list (label)"})})}),e[1]=r,e[2]=i):i=e[2];let s;return e[3]!==n||e[4]!==i?(s=S.jsx(Sv,{title:Vwe,actions:i,...n}),e[3]=n,e[4]=i,e[5]=s):s=e[5],s};function Vwe(n){const{entity:e}=n;return S.jsx(Ev,{icon:ns,title:e.name})}const xH=Ln("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:n,kysely:e},params:{id:t}}){return n.ensureQueryData({queryKey:["Resource",t],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Resource as r").select(["r.id","r.name","r.image"]).where("r.id","=",t),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),image:ne.string().nullish()})})}))}})},component:()=>{const{tva:n}=Ui({from:"__root__"}),{entity:e}=xH.useLoaderData(),t=n().slots;return S.jsxs("div",{className:t.base(),children:[S.jsx(zwe,{entity:e}),S.jsx(Uwe,{entity:e}),S.jsx(dc,{})]})}}),hS=Ln("/$locale/apps/derivean/root/region/list")({validateSearch:rs(Es(RP)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r}}){return n.ensureQueryData({queryKey:["Region","list-count",{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(i=>zi({select:i.selectFrom("Region as r").select(["r.id","r.name","r.probability","r.limit"]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("r.id","like",l),u("r.name","like",l)]))}return a},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),probability:ne.number().int().min(0),limit:ne.number().int().min(0)}),filter:t,cursor:r}))}})},component:()=>{const{data:n,count:e}=hS.useLoaderData(),{filter:t,cursor:r,selection:i}=hS.useSearch(),s=hS.useNavigate(),{tva:o}=Ui({from:"__root__"}),a=o().slots;return S.jsx("div",{className:a.base(),children:S.jsx(jV,{table:{data:n,filter:{value:t,set:ws(s)},selection:{type:"multi",value:i,set:ll(s)}},fulltext:{value:t?.fulltext,set:Ss(s)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of items"}),...bs(s)}})})}}),Wwe=Ln("/$locale/apps/derivean/root/region/$id")({async loader({context:{queryClient:n,kysely:e},params:{id:t}}){return n.ensureQueryData({queryKey:["Region",t],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Region as r").select(["r.id","r.name","r.image"]).where("r.id","=",t),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),image:ne.string().nullish()})})}))}})},component:()=>{const{tva:n}=Ui({from:"__root__"}),e=n().slots;return S.jsx("div",{className:e.base(),children:S.jsx(dc,{})})}}),bk="icon-[gala--clock]",vh="icon-[mingcute--inventory-line]",$we=Cr({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),bH=n=>{const e=Bt.c(16);let t,r,i,s,o;e[0]!==n?({dependencies:r,variant:o,tva:s,css:t,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5]);const a=s===void 0?$we:s;let l;e[6]!==t||e[7]!==a||e[8]!==o?(l=a({...o,css:t}),e[6]=t,e[7]=a,e[8]=o,e[9]=l):l=e[9];const u=l.slots;let c;e[10]!==u?(c=h=>{const{entity:p}=h;return S.jsx("div",{className:u.item(),children:S.jsx("div",{children:p.name})})},e[10]=u,e[11]=c):c=e[11];let d;return e[12]!==r||e[13]!==i||e[14]!==c?(d=S.jsx(Ch,{items:r,render:c,...i}),e[12]=r,e[13]=i,e[14]=c,e[15]=d):d=e[15],d};var k1={},UB;function Hwe(){if(UB)return k1;UB=1;function n(r,i,s,o){var a=new Set;return function(l){if(!a.has(l)){var u=new Set,c=[],d=[];for(d.push({node:l,processed:!1});d.length>0;){var h=d[d.length-1],p=h.processed,g=h.node;if(p)d.pop(),c.pop(),u.delete(g),a.add(g),(!i||r.get(g).length===0)&&s.push(g);else{if(a.has(g)){d.pop();continue}else if(u.has(g)){if(o){d.pop();continue}throw c.push(g),new t(c)}u.add(g),c.push(g);for(var x=r.get(g),b=x.length-1;b>=0;b--)d.push({node:x[b],processed:!1});h.processed=!0}}}}}var e=k1.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=n(this.outgoingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=n(this.incomingEdges,i,s,this.circular);o(r);var a=s.indexOf(r);return a>=0&&s.splice(a,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var a=n(this.outgoingEdges,!1,[],this.circular);o.forEach(function(u){a(u)})}var l=n(this.outgoingEdges,r,s,this.circular);return o.filter(function(u){return i.incomingEdges.get(u).length===0}).forEach(function(u){l(u)}),this.circular&&o.filter(function(u){return s.indexOf(u)===-1}).forEach(function(u){l(u)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var t=k1.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,t),s};return t.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(t,Error),k1}var wH=Hwe();const bb=async({tx:n})=>{const e=new wH.DepGraph({circular:!1});for await(const{id:t,name:r}of await n.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(t,r);for await(const{blueprintId:t,dependencyId:r}of await n.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(t,r);return e},k0=async({tx:n})=>{const e=bb({tx:n}),t=await n.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of t){const i=(await e).dependenciesOf(r.id);await n.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},SH=async({tx:n,blueprintId:e})=>{await n.deleteFrom("Blueprint_Inventory").where("blueprintId","=",e).execute();const t=await n.selectFrom("Blueprint_Requirement").select(["resourceId","amount"]).where("blueprintId","=",e).execute();for await(const{resourceId:i,amount:s}of t)await n.insertInto("Blueprint_Inventory").values({id:Xr(),blueprintId:e,inventoryId:(await n.insertInto("Inventory").values({id:Xr(),resourceId:i,amount:0,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute();const r=await n.selectFrom(n.selectFrom("Blueprint_Production").select(["resourceId","amount"]).where("blueprintId","=",e).union(n.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).union(n.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Blueprint_Production as bp","bp.id","bpr.blueprintProductionId").select(["bpr.resourceId","bpr.amount"]).where("bp.blueprintId","=",e)).as("resources")).select(["resourceId",i=>i.fn.max("amount").as("amount")]).groupBy("resourceId").orderBy("amount","desc").execute();for await(const{resourceId:i,amount:s}of r)await n.insertInto("Blueprint_Inventory").values({id:Xr(),blueprintId:e,inventoryId:(await n.insertInto("Inventory").values({id:Xr(),resourceId:i,amount:0,limit:s*5,type:"storage"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},Gwe=Cr({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),JT=n=>{const e=Bt.c(18);let t,r,i,s,o,a;e[0]!==n?({requirements:s,diff:r,variant:a,tva:o,css:t,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6]);const l=o===void 0?Gwe:o;let u;e[7]!==t||e[8]!==l||e[9]!==a?(u=l({...a,css:t}),e[7]=t,e[8]=l,e[9]=a,e[10]=u):u=e[10];const c=u.slots;let d;e[11]!==r||e[12]!==c?(d=p=>{const{entity:g}=p,x=r?.find(y=>y.resourceId===g.resourceId),b=x?.amount?x.amount-g.amount:-g.amount;return S.jsxs("div",{className:c.item({css:!r||b>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:g.passive}),children:[S.jsx("div",{children:g.name}),S.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",$r({number:g.amount})]}),r?b>=0?S.jsx(br,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):S.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[S.jsx(br,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",$r({number:b}),")"]}):null]})},e[11]=r,e[12]=c,e[13]=d):d=e[13];let h;return e[14]!==i||e[15]!==s||e[16]!==d?(h=S.jsx(Ch,{items:s,render:d,...i}),e[14]=i,e[15]=s,e[16]=d,e[17]=h):h=e[17],h},U_=Is(),Xwe=[U_({name:"name",header(){return S.jsx(he,{label:"Building name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[S.jsx(In,{icon:S.jsx("div",{className:fr(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${n.id}`])}),to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:t,id:n.id},children:e}),S.jsx(In,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:t},search:{zoomTo:n.id}})]})},size:18}),U_({name:"dependencies",header(){return S.jsx(he,{label:"Blueprint dependencies (label)"})},render({value:n}){return n.length>0?S.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[S.jsx(bH,{textTitle:S.jsx(he,{label:"Blueprint dependencies (title)"}),dependencies:n}),S.jsx("div",{className:"border-b border-slate-200"})]}):S.jsx(he,{label:"No dependencies (label)"})},size:32}),U_({name:"requirements",header(){return S.jsx(he,{label:"Required resources (label)"})},render({value:n}){return S.jsx(JT,{textTitle:S.jsx(he,{label:"Blueprint requirements (title)"}),textEmpty:S.jsx(he,{label:"No requirements (label)"}),requirements:n})},size:32}),U_({name:"cycles",header(){return S.jsx(he,{label:"Construction cycles (label)"})},render({value:n}){return S.jsxs("div",{className:"flex flex-row items-center gap-2",children:[S.jsx(br,{icon:bk}),$r({number:n})]})},size:8}),U_({name:"limit",header(){return S.jsx(he,{label:"Building limit (label)"})},render({value:n}){return $r({number:n})},size:8})],EH=({dependencies:n,table:e,...t})=>{const r=ji([["Blueprint_Inventory"],["Blueprint"],["Inventory"]]),i=or({async mutationFn(){return An.transaction().execute(async s=>{const o=await s.selectFrom("Blueprint").select(["id"]).execute();for await(const{id:a}of o)await SH({tx:s,blueprintId:a})})},async onSuccess(){await r()},onError(s){console.error(s)}});return S.jsx(Ts,{table:Ms({...e,columns:Xwe,context:{dependencies:n}}),action:{table(){return S.jsxs(Bi,{children:[S.jsx(qN,{icon:vh,onClick:()=>{ci.promise(i.mutateAsync(),zo("Fill inventories"))},children:S.jsx(he,{label:"Fill inventories (label)"})}),S.jsx(Hr,{label:S.jsx(he,{label:"Create blueprint (menu)"}),textTitle:S.jsx(he,{label:"Create blueprint (modal)"}),icon:fi,children:({close:s})=>S.jsx(PE,{mutation:or({async mutationFn({image:o,regionIds:a,...l}){An.transaction().execute(async u=>{const c=await u.insertInto("Blueprint").values({id:Xr(),...l,image:o?await lv(o):null}).returningAll().executeTakeFirstOrThrow();return a?.length&&await u.insertInto("Blueprint_Region").values(a.map(d=>({id:Xr(),blueprintId:c.id,regionId:d}))).execute(),await k0({tx:u}),c})},async onSuccess(){await r(),s()}})})})]})},row({data:s}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit blueprint (modal)"}),icon:fi,children:({close:o})=>S.jsx(PE,{defaultValues:{...s,regionIds:s.regions.map(a=>a.id)},mutation:or({async mutationFn({image:a,regionIds:l,...u}){return An.transaction().execute(async c=>{const d=await c.updateTable("Blueprint").set({...u,image:a?await lv(a):null}).where("id","=",s.id).returningAll().executeTakeFirstOrThrow();return await c.deleteFrom("Blueprint_Region").where("blueprintId","=",d.id).execute(),l?.length&&await c.insertInto("Blueprint_Region").values(l.map(h=>({id:Xr(),blueprintId:d.id,regionId:h}))).execute(),await k0({tx:c}),d})},async onSuccess(){await r(),o()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",s.id).execute()),textContent:S.jsx(he,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...t})},jh=Lse({shape:ne.object({dependencyId:ne.string().min(1)}),filter:ca.merge(ne.object({blueprintId:ne.string().optional(),dependencyId:ne.string().optional()}))}),Cv=Use({shape:ne.object({resourceId:ne.string().min(1),amount:ef(),passive:ne.boolean()}),filter:ca.merge(ne.object({blueprintId:ne.string().optional(),resourceId:ne.string().optional()}))}),pS=Ln("/$locale/apps/derivean/root/blueprint/list")({validateSearch:rs(Es(NP)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r}}){return{data:await n.ensureQueryData({queryKey:["Blueprint","list-count",{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.image","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(a=>ph.jsonGroupArray({id:a.ref("r.id"),name:a.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("br.id")},
                                                'amount', ${a.ref("br.amount")},
                                                'passive', ${a.ref("br.passive")},
                                                'resourceId', ${a.ref("br.resourceId")},
                                                'blueprintId', ${a.ref("br.blueprintId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(a=>vs`json_group_array(json_object(
                                                        'id', ${a.ref("bd.id")},
                                                        'dependencyId', ${a.ref("bd.dependencyId")},
                                                        'blueprintId', ${a.ref("bd.blueprintId")},
                                                        'name', ${a.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;if(a?.id&&(l=l.where("bl.id","=",a.id)),a?.fulltext){const u=`%${a.fulltext}%`.toLowerCase();l=l.where(c=>c.or([c("bl.id","like",u),c("bl.name","like",u)]))}return l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),image:ne.string().nullish(),cycles:ne.number().nonnegative(),sort:ne.number().nonnegative(),limit:ne.number().nonnegative(),regions:jo(ne.object({id:ne.string().min(1),name:ne.string().min(1)})),requirements:jo(Cv.entity.merge(ne.object({name:ne.string().min(1)}))),dependencies:jo(jh.entity.merge(ne.object({name:ne.string().min(1)})))}),filter:t,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>bb({tx:s}))}},component(){const{data:{data:n,count:e},dependencies:t}=pS.useLoaderData(),{filter:r,cursor:i,selection:s}=pS.useSearch(),o=pS.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(EH,{dependencies:t,table:{data:n,filter:{value:r,set:ws(o)},selection:{type:"multi",value:s,set:ll(o)}},fulltext:{value:r?.fulltext,set:Ss(o)},cursor:{count:e,cursor:i,textTotal:S.jsx(he,{label:"Number of blueprints"}),...bs(o)}})})}}),Kwe=n=>{const e=Bt.c(55);let t,r;e[0]!==n?({entity:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale"},e[3]=i):i=e[3];const{locale:s}=nr(i);let o;e[4]!==t.id||e[5]!==s?(o={locale:s,id:t.id},e[4]=t.id,e[5]=s,e[6]=o):o=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=S.jsx(he,{label:"View detail (menu)"}),e[7]=a):a=e[7];let l;e[8]!==o?(l=S.jsx(Pi,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:o,children:a}),e[8]=o,e[9]=l):l=e[9];let u;e[10]!==t.id||e[11]!==s?(u={locale:s,id:t.id},e[10]=t.id,e[11]=s,e[12]=u):u=e[12];let c;e[13]===Symbol.for("react.memo_cache_sentinel")?(c=S.jsx(he,{label:"Blueprint dependencies (menu)"}),e[13]=c):c=e[13];let d;e[14]!==u?(d=S.jsx(Pi,{icon:ql,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:u,children:c}),e[14]=u,e[15]=d):d=e[15];let h;e[16]!==t.id||e[17]!==s?(h={locale:s,id:t.id},e[16]=t.id,e[17]=s,e[18]=h):h=e[18];let p;e[19]===Symbol.for("react.memo_cache_sentinel")?(p=S.jsx(he,{label:"Required resources (menu)"}),e[19]=p):p=e[19];let g;e[20]!==h?(g=S.jsx(Pi,{icon:ns,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:h,children:p}),e[20]=h,e[21]=g):g=e[21];let x;e[22]!==t.id||e[23]!==s?(x={locale:s,id:t.id},e[22]=t.id,e[23]=s,e[24]=x):x=e[24];let b;e[25]===Symbol.for("react.memo_cache_sentinel")?(b=S.jsx(he,{label:"Resource production (menu)"}),e[25]=b):b=e[25];let y;e[26]!==x?(y=S.jsx(Pi,{icon:cc,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:x,children:b}),e[26]=x,e[27]=y):y=e[27];let E;e[28]!==t.id||e[29]!==s?(E={locale:s,id:t.id},e[28]=t.id,e[29]=s,e[30]=E):E=e[30];let T;e[31]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Blueprint inventory (menu)"}),e[31]=T):T=e[31];let I;e[32]!==E?(I=S.jsx(Pi,{icon:vh,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:E,children:T}),e[32]=E,e[33]=I):I=e[33];let N;e[34]!==t.id||e[35]!==s?(N={locale:s,id:t.id},e[34]=t.id,e[35]=s,e[36]=N):N=e[36];let k;e[37]===Symbol.for("react.memo_cache_sentinel")?(k=S.jsx(he,{label:"Blueprint conflicts (menu)"}),e[37]=k):k=e[37];let q;e[38]!==N?(q=S.jsx(Pi,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:N,children:k}),e[38]=N,e[39]=q):q=e[39];let L;e[40]!==t.id||e[41]!==s?(L={locale:s,id:t.id},e[40]=t.id,e[41]=s,e[42]=L):L=e[42];let R;e[43]===Symbol.for("react.memo_cache_sentinel")?(R=S.jsx(he,{label:"Edit (menu)"}),e[43]=R):R=e[43];let P;e[44]!==L?(P=S.jsx(Pi,{icon:o6,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:L,children:R}),e[44]=L,e[45]=P):P=e[45];let F;return e[46]!==r||e[47]!==g||e[48]!==y||e[49]!==I||e[50]!==q||e[51]!==P||e[52]!==l||e[53]!==d?(F=S.jsxs(Bm,{...r,children:[l,d,g,y,I,q,P]}),e[46]=r,e[47]=g,e[48]=y,e[49]=I,e[50]=q,e[51]=P,e[52]=l,e[53]=d,e[54]=F):F=e[54],F},Qwe=n=>{const e=Bt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i=o=>{const{entity:a}=o;return S.jsxs(S.Fragment,{children:[S.jsx(In,{icon:Z2,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:r},children:S.jsx(he,{label:"Blueprint list (label)"})}),S.jsx(In,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:a.id},children:S.jsx(he,{label:"Editor (label)"})})]})},e[1]=r,e[2]=i):i=e[2];let s;return e[3]!==n||e[4]!==i?(s=S.jsx(Sv,{title:Ywe,actions:i,...n}),e[3]=n,e[4]=i,e[5]=s):s=e[5],s};function Ywe(n){const{entity:e}=n;return S.jsx(Ev,{icon:fi,title:e.name})}const TH=Ln("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:n,kysely:e},params:{id:t}}){return{entity:await n.ensureQueryData({queryKey:["Blueprint","fetch",t],async queryFn(){return e.transaction().execute(async i=>tu({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(o=>ph.jsonGroupArray({id:o.ref("r.id"),name:o.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","bl.id").as("regions"),s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>ph.jsonGroupArray({id:o.ref("br.id"),amount:o.ref("br.amount"),passive:o.ref("br.passive"),resourceId:o.ref("br.resourceId"),blueprintId:o.ref("br.blueprintId"),name:o.ref("r.name")}).as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>ph.jsonGroupArray({id:o.ref("bd.id"),dependencyId:o.ref("bd.dependencyId"),blueprintId:o.ref("bd.blueprintId"),name:o.ref("bl2.name")}).as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",t).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("bl.id","like",l),u("bl.name","like",l),u("bl.id","in",u.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(c=>c.or([c("r.name","like",l)]))),u("bl.id","in",u.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(c=>c.or([c("b.name","like",l)])))]))}return a},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),cycles:ne.number().nonnegative(),sort:ne.number().nonnegative(),regions:jo(ne.object({id:ne.string().min(1),name:ne.string().min(1)})),requirements:jo(Cv.entity.merge(ne.object({name:ne.string().min(1)}))),dependencies:jo(jh.entity.merge(ne.object({name:ne.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>bb({tx:i}))}},component(){const{tva:n}=Ui({from:"__root__"}),{entity:e}=TH.useLoaderData(),t=n().slots;return S.jsxs("div",{className:t.base(),children:[S.jsx(Qwe,{entity:e}),S.jsx(Kwe,{entity:e}),S.jsx(dc,{})]})}}),Jwe=Ln("/$locale/apps/derivean/map/$mapId/view")({}),zB=Is(),Zwe=[zB({name:"name",header(){return S.jsx(he,{label:"Building name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[S.jsx(In,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:t},search:{blueprintId:n.id}}),S.jsx(In,{icon:S.jsx("div",{className:fr(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",`bg-${n.id}`])}),to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:t,id:n.id},children:e})]})},size:18}),zB({name:"cycles",header(){return S.jsx(he,{label:"Construction cycles (label)"})},render({value:n}){return S.jsxs("div",{className:"flex flex-row items-center gap-2",children:[S.jsx(br,{icon:bk}),$r({number:n})]})},size:8})],e1e=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:Zwe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},mS=Ln("/$locale/apps/derivean/game/blueprint/list")({validateSearch:rs(Es(NP)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e,session:t},deps:{filter:r,cursor:i}}){const s=await t();return{data:await n.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async a=>zi({select:a.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",a.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:l,where:u}){let c=l;if(u?.id&&(c=c.where("bl.id","=",u.id)),u?.fulltext){const d=`%${u.fulltext}%`.toLowerCase();c=c.where(h=>h.or([h("bl.id","like",d),h("bl.name","like",d)]))}return c},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),cycles:ne.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:n,count:e}}=mS.useLoaderData(),{filter:t,cursor:r}=mS.useSearch(),i=mS.useNavigate(),{tva:s}=Ui({from:"__root__"}),o=s().slots;return S.jsx("div",{className:o.base(),children:S.jsx(e1e,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of blueprints"}),...bs(i)}})})}}),t1e=n=>{const e=Bt.c(41);let t,r;e[0]!==n?({entity:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale"},e[3]=i):i=e[3];const{locale:s}=nr(i);let o;e[4]!==t.id||e[5]!==s?(o={locale:s,id:t.id},e[4]=t.id,e[5]=s,e[6]=o):o=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=S.jsx(he,{label:"View detail (menu)"}),e[7]=a):a=e[7];let l;e[8]!==o?(l=S.jsx(Pi,{icon:fi,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:o,children:a}),e[8]=o,e[9]=l):l=e[9];let u;e[10]!==t.id||e[11]!==s?(u={locale:s,id:t.id},e[10]=t.id,e[11]=s,e[12]=u):u=e[12];let c;e[13]===Symbol.for("react.memo_cache_sentinel")?(c=S.jsx(he,{label:"Blueprint dependencies (menu)"}),e[13]=c):c=e[13];let d;e[14]!==u?(d=S.jsx(Pi,{icon:ql,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:u,children:c}),e[14]=u,e[15]=d):d=e[15];let h;e[16]!==t.id||e[17]!==s?(h={locale:s,id:t.id},e[16]=t.id,e[17]=s,e[18]=h):h=e[18];let p;e[19]===Symbol.for("react.memo_cache_sentinel")?(p=S.jsx(he,{label:"Required resources (menu)"}),e[19]=p):p=e[19];let g;e[20]!==h?(g=S.jsx(Pi,{icon:ns,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:h,children:p}),e[20]=h,e[21]=g):g=e[21];let x;e[22]!==t.id||e[23]!==s?(x={locale:s,id:t.id},e[22]=t.id,e[23]=s,e[24]=x):x=e[24];let b;e[25]===Symbol.for("react.memo_cache_sentinel")?(b=S.jsx(he,{label:"Resource production (menu)"}),e[25]=b):b=e[25];let y;e[26]!==x?(y=S.jsx(Pi,{icon:cc,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:x,children:b}),e[26]=x,e[27]=y):y=e[27];let E;e[28]!==t.id||e[29]!==s?(E={locale:s,id:t.id},e[28]=t.id,e[29]=s,e[30]=E):E=e[30];let T;e[31]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Blueprint conflicts (menu)"}),e[31]=T):T=e[31];let I;e[32]!==E?(I=S.jsx(Pi,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:E,children:T}),e[32]=E,e[33]=I):I=e[33];let N;return e[34]!==r||e[35]!==g||e[36]!==y||e[37]!==I||e[38]!==l||e[39]!==d?(N=S.jsxs(Bm,{...r,children:[l,d,g,y,I]}),e[34]=r,e[35]=g,e[36]=y,e[37]=I,e[38]=l,e[39]=d,e[40]=N):N=e[40],N},n1e=n=>{const e=Bt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i=()=>S.jsx(S.Fragment,{children:S.jsx(In,{icon:Z2,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:r},children:S.jsx(he,{label:"Blueprint list (label)"})})}),e[1]=r,e[2]=i):i=e[2];let s;return e[3]!==n||e[4]!==i?(s=S.jsx(Sv,{title:r1e,actions:i,...n}),e[3]=n,e[4]=i,e[5]=s):s=e[5],s};function r1e(n){const{entity:e}=n;return S.jsx(Ev,{icon:fi,title:e.name})}const MH=Ln("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:n,kysely:e},params:{id:t}}){return{entity:await n.ensureQueryData({queryKey:["Blueprint","fetch",t],async queryFn(){return e.transaction().execute(async i=>tu({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",t).orderBy("bl.name","asc"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("bl.id","like",l),u("bl.name","like",l),u("bl.id","in",u.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(c=>c.or([c("r.name","like",l)]))),u("bl.id","in",u.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(c=>c.or([c("b.name","like",l)])))]))}return a},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),cycles:ne.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>bb({tx:i}))}},component(){const{tva:n}=Ui({from:"__root__"}),{entity:e}=MH.useLoaderData(),t=n().slots;return S.jsxs("div",{className:t.base(),children:[S.jsx(n1e,{entity:e}),S.jsx(t1e,{entity:e}),S.jsx(dc,{})]})}}),i1e=Ln("/$locale/apps/derivean/root/user/$id/view")({component(){return"yep"}}),s1e=Ln("/$locale/apps/derivean/root/resource/$id/view")({component(){const{entity:{image:n}}=eo({from:"/$locale/apps/derivean/root/resource/$id"});return S.jsx(S.Fragment,{children:S.jsx("img",{src:n||void 0})})}}),o1e=Ln("/$locale/apps/derivean/root/region/$id/view")({component(){const{entity:{image:n}}=eo({from:"/$locale/apps/derivean/root/region/$id"});return S.jsx(S.Fragment,{children:n?S.jsx("img",{src:n||void 0}):"no image"})}}),wk="icon-[carbon--document-requirements]",a1e=n=>{const e=Bt.c(27);let t,r;e[0]!==n?({entity:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale"},e[3]=i):i=e[3];const{locale:s}=nr(i);let o;e[4]!==t.id||e[5]!==s?(o={locale:s,id:t.id},e[4]=t.id,e[5]=s,e[6]=o):o=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=S.jsx(he,{label:"Production requirements (menu)"}),e[7]=a):a=e[7];let l;e[8]!==o?(l=S.jsx(Pi,{icon:wk,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:o,children:a}),e[8]=o,e[9]=l):l=e[9];let u;e[10]!==t.id||e[11]!==s?(u={locale:s,id:t.id},e[10]=t.id,e[11]=s,e[12]=u):u=e[12];let c;e[13]===Symbol.for("react.memo_cache_sentinel")?(c=S.jsx(he,{label:"Production resource requirements (menu)"}),e[13]=c):c=e[13];let d;e[14]!==u?(d=S.jsx(Pi,{icon:ns,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:u,children:c}),e[14]=u,e[15]=d):d=e[15];let h;e[16]!==t.id||e[17]!==s?(h={locale:s,id:t.id},e[16]=t.id,e[17]=s,e[18]=h):h=e[18];let p;e[19]===Symbol.for("react.memo_cache_sentinel")?(p=S.jsx(he,{label:"Production resource dependencies (menu)"}),e[19]=p):p=e[19];let g;e[20]!==h?(g=S.jsx(Pi,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:h,children:p}),e[20]=h,e[21]=g):g=e[21];let x;return e[22]!==r||e[23]!==g||e[24]!==l||e[25]!==d?(x=S.jsxs(Bm,{...r,children:[l,d,g]}),e[22]=r,e[23]=g,e[24]=l,e[25]=d,e[26]=x):x=e[26],x},l1e=n=>{const e=Bt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i=o=>{const{entity:a}=o;return S.jsx(S.Fragment,{children:S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:a.blueprintId},children:S.jsx(he,{label:"Building base detail (label)"})})})},e[1]=r,e[2]=i):i=e[2];let s;return e[3]!==n||e[4]!==i?(s=S.jsx(Sv,{title:c1e,actions:i,...n}),e[3]=n,e[4]=i,e[5]=s):s=e[5],s};function c1e(n){const{entity:e}=n;return S.jsx(Ev,{icon:cc,title:e.resource,subtitle:e.blueprint})}const IH=Ln("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:n,kysely:e},params:{id:t}}){return n.ensureQueryData({queryKey:["Blueprint_Production",t],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",t),output:ne.object({id:ne.string().min(1),resource:ne.string().min(1),blueprint:ne.string().min(1),blueprintId:ne.string().min(1),amount:ne.number().nonnegative(),cycles:ne.number().int().nonnegative()})})}))}})},component(){const{entity:n}=IH.useLoaderData(),{tva:e}=Ui({from:"__root__"}),t=e().slots;return S.jsxs("div",{className:t.base(),children:[S.jsx(l1e,{entity:n}),S.jsx(a1e,{entity:n}),S.jsx(dc,{})]})}}),u1e=({graph:n,blueprintId:e,mode:t="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(t==="dependants"?n.dependantsOf(e):n.dependenciesOf(e));return S.jsxs("div",{className:fr(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?S.jsx(br,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):S.jsx(br,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>S.jsx(ia,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:n.getNodeData(s)},Xr())):S.jsx(he,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof wH.DepGraphCycleError?S.jsxs("div",{className:fr(["flex","flex-row","gap-2","items-center"]),children:[S.jsx(br,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>S.jsx(ia,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:n.getNodeData(s)},Xr()))]}):"kaboom"}},d1e=n=>{const e=Bt.c(17);let t,r;e[0]!==n?({dependencies:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={id:"name",label:S.jsx(he,{label:"Building name (label)"}),render(g){const{entity:x}=g;return x.name}},e[3]=i):i=e[3];let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s={id:"cycles",label:S.jsx(he,{label:"Construction cycles (label)"}),render(g){const{entity:x}=g;return $r({number:x.cycles})}},e[4]=s):s=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o={id:"regions",label:S.jsx(he,{label:"Regions (label)"}),render(g){const{entity:x}=g;return S.jsx(Ch,{items:x.regions,css:{base:["flex","flex-row","gap-2"]},textEmpty:S.jsx(he,{label:"No regions (label)"}),render:f1e})}},e[5]=o):o=e[5];let a;e[6]===Symbol.for("react.memo_cache_sentinel")?(a={id:"requirements",label:S.jsx(he,{label:"Required resources (label)"}),render(g){const{entity:x}=g;return S.jsx(JT,{requirements:x.requirements,textEmpty:S.jsx(he,{label:"No requirements (label)"})})}},e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l={id:"dependencies",label:S.jsx(he,{label:"Blueprint dependencies (label)"}),render(g){const{entity:x}=g;return S.jsx(bH,{dependencies:x.dependencies,textEmpty:S.jsx(he,{label:"No dependencies (label)"})})}},e[7]=l):l=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx(he,{label:"Blueprint dependency graph (label)"}),e[8]=u):u=e[8];let c;e[9]!==t?(c={id:"deps",label:u,render(g){const{entity:x}=g;return S.jsx(u1e,{graph:t,blueprintId:x.id})}},e[9]=t,e[10]=c):c=e[10];let d;e[11]===Symbol.for("react.memo_cache_sentinel")?(d={id:"preview",render(g){const{entity:x}=g;return S.jsx("div",{className:fr(["mx-auto","border-2","border-purple-400","rounded-md","w-[256px]","h-[256px]","bg-contain",`bg-${x.id}`])})}},e[11]=d):d=e[11];let h;e[12]!==c?(h=[i,s,o,a,l,c,d],e[12]=c,e[13]=h):h=e[13];let p;return e[14]!==r||e[15]!==h?(p=S.jsx(Yz,{items:h,...r}),e[14]=r,e[15]=h,e[16]=p):p=e[16],p};function f1e(n){const{entity:e}=n;return S.jsx("div",{className:fr(["p-2","border","border-blue-300","bg-blue-50","rounded-sm"]),children:e.name})}const AH=Ln("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:n}}){return{dependencies:await n.transaction().execute(async e=>bb({tx:e}))}},component(){const{dependencies:n}=AH.useLoaderData(),{entity:e}=eo({from:"/$locale/apps/derivean/root/blueprint/$id"});return S.jsx("div",{className:"w-1/2 mx-auto",children:S.jsx(d1e,{dependencies:n,entity:e})})}}),wb=({group:n,...e})=>S.jsx(M6,{icon:ns,textTitle:S.jsx(he,{label:"Select resource (title)"}),textSelect:S.jsx(he,{label:"Select resource (label)"}),table:t=>S.jsx(_H,{group:n,...t}),render:({entity:t})=>t.name,queryKey:"Resource",query:async({filter:t,cursor:r})=>An.transaction().execute(async i=>zi({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.weight",s=>s.selectFrom("Tag as t").select(o=>vs`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let a=s;if(o?.id&&(a=a.where("r.id","=",o.id)),o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("r.id","like",l),u("r.name","like",l),u("r.id","in",u.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(c=>c.or([c("t.code","like",l),c("t.label","like",l),c("t.group","like",l)])))]))}return a},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),weight:ku(),tags:jo(xb.entity),countRequirement:ne.number().nonnegative(),countProduction:ne.number().nonnegative(),countProductionRequirement:ne.number().nonnegative()}),filter:t,cursor:r})),...e}),VB=n=>{const e=Bt.c(58),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(Cv.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{amount:1,passive:!1,...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const W=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;I=W.base(),e[18]!==c||e[19]!==t?(h=da({form:c,mutation:t}),e[18]=c,e[19]=t,e[20]=h):h=e[20];let Q;e[21]===Symbol.for("react.memo_cache_sentinel")?(Q={highlight:!0},e[21]=Q):Q=e[21],e[22]!==c.formState.errors.root?(p=S.jsx(po,{variant:Q,error:c.formState.errors.root}),e[22]=c.formState.errors.root,e[23]=p):p=e[23];let X;e[24]===Symbol.for("react.memo_cache_sentinel")?(X=S.jsx(he,{label:"Requirement (label)"}),e[24]=X):X=e[24];let re;e[25]!==c.control?(re=S.jsx(La,{control:c.control,name:"resourceId",render:h1e}),e[25]=c.control,e[26]=re):re=e[26],e[27]!==c.formState||e[28]!==re?(g=S.jsx(xr,{formState:c.formState,name:"resourceId",label:X,children:re}),e[27]=c.formState,e[28]=re,e[29]=g):g=e[29],d=xr,y=c.formState,E="amount",e[30]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Amount (label)"}),e[30]=T):T=e[30],x="number",b=W.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17];let N;e[31]!==c?(N=c.register("amount"),e[31]=c,e[32]=N):N=e[32];let k;e[33]!==N||e[34]!==x||e[35]!==b?(k=S.jsx("input",{type:x,className:b,...N}),e[33]=N,e[34]=x,e[35]=b,e[36]=k):k=e[36];let q;e[37]!==d||e[38]!==k||e[39]!==y||e[40]!==E||e[41]!==T?(q=S.jsx(d,{formState:y,name:E,label:T,children:k}),e[37]=d,e[38]=k,e[39]=y,e[40]=E,e[41]=T,e[42]=q):q=e[42];let L,R;e[43]===Symbol.for("react.memo_cache_sentinel")?(L=S.jsx(he,{label:"Passive requirement (label)"}),R=S.jsx(he,{label:"Passive requirement (hint)"}),e[43]=L,e[44]=R):(L=e[43],R=e[44]);let P;e[45]!==c.control?(P=S.jsx(La,{control:c.control,name:"passive",render:p1e}),e[45]=c.control,e[46]=P):P=e[46];let F;e[47]!==c.formState||e[48]!==P?(F=S.jsx(xr,{formState:c.formState,name:"passive",label:L,hint:R,children:P}),e[47]=c.formState,e[48]=P,e[49]=F):F=e[49];let z;e[50]===Symbol.for("react.memo_cache_sentinel")?(z=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:ns,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[50]=z):z=e[50];let V;return e[51]!==h||e[52]!==p||e[53]!==g||e[54]!==q||e[55]!==F||e[56]!==I?(V=S.jsxs("form",{className:I,onSubmit:h,children:[p,g,q,F,z]}),e[51]=h,e[52]=p,e[53]=g,e[54]=q,e[55]=F,e[56]=I,e[57]=V):V=e[57],V};function h1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(wb,{allowEmpty:!0,...r})}function p1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Qz,{...r})}const yC=Is(),m1e=[yC({name:"name",header(){return S.jsx(he,{label:"Requirement name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceID",n.resourceId)}},size:22}),yC({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:10}),yC({name:"passive",header(){return S.jsx(he,{label:"Passive requirement (label)"})},render({value:n}){return S.jsx(J2,{value:n})},size:10})],g1e=({blueprintId:n,table:e,...t})=>{const r=ji([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return S.jsx(Ts,{table:Ms({...e,columns:m1e}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create requirement item (menu)"}),textTitle:S.jsx(he,{label:"Create requirement item (modal)"}),icon:ns,children:S.jsx(VB,{mutation:or({async mutationFn(i){return An.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Xr(),...i,blueprintId:n}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit requirement item (modal)"}),icon:ns,children:S.jsx(VB,{defaultValues:i,mutation:or({async mutationFn(s){return An.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...t})},Y_=Ln("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:rs(Es(Cv)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("br.id","=",a.id)),a?.idIn&&(l=l.where("br.id","in",a.idIn)),a?.resourceId&&(l=l.where("br.resourceId","=",a.resourceId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),passive:fc()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=Y_.useLoaderData(),{filter:t,cursor:r,selection:i}=Y_.useSearch(),{id:s}=Y_.useParams(),o=Y_.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(g1e,{blueprintId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of requirements (label)"}),...bs(o)}})})}}),Sk=Fse({shape:ne.object({resourceId:ne.string().min(1),amount:ef(),cycles:ku()}),filter:ca.merge(ne.object({blueprintId:ne.string().optional(),resourceId:ne.string().optional()}))}),WB=n=>{const e=Bt.c(61),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(Sk.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{amount:1,cycles:1,...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I,N,k;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const z=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;h=z.base(),e[20]!==c||e[21]!==t?(p=da({form:c,mutation:t}),e[20]=c,e[21]=t,e[22]=p):p=e[22];let V;e[23]===Symbol.for("react.memo_cache_sentinel")?(V={highlight:!0},e[23]=V):V=e[23],e[24]!==c.formState.errors.root?(g=S.jsx(po,{variant:V,error:c.formState.errors.root}),e[24]=c.formState.errors.root,e[25]=g):g=e[25];let W;e[26]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsx(he,{label:"Resource name (label)"}),e[26]=W):W=e[26];let Q;e[27]!==c.control?(Q=S.jsx(La,{control:c.control,name:"resourceId",render:y1e}),e[27]=c.control,e[28]=Q):Q=e[28],e[29]!==c.formState||e[30]!==Q?(x=S.jsx(xr,{formState:c.formState,name:"resourceId",label:W,children:Q}),e[29]=c.formState,e[30]=Q,e[31]=x):x=e[31];const X=c.formState;let re;e[32]===Symbol.for("react.memo_cache_sentinel")?(re=S.jsx(he,{label:"Amount (label)"}),e[32]=re):re=e[32];const G=z.input();let Y;e[33]!==c?(Y=c.register("amount"),e[33]=c,e[34]=Y):Y=e[34];const te=S.jsx("input",{type:"number",className:G,...Y});e[35]!==c.formState||e[36]!==te?(b=S.jsx(xr,{formState:X,name:"amount",label:re,children:te}),e[35]=c.formState,e[36]=te,e[37]=b):b=e[37],d=xr,T=c.formState,I="cycles",e[38]===Symbol.for("react.memo_cache_sentinel")?(N=S.jsx(he,{label:"Production cycles (label)"}),k=S.jsx(he,{label:"Production cycles (hint)"}),e[38]=N,e[39]=k):(N=e[38],k=e[39]),y="number",E=z.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I,e[18]=N,e[19]=k}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17],N=e[18],k=e[19];let q;e[40]!==c?(q=c.register("cycles"),e[40]=c,e[41]=q):q=e[41];let L;e[42]!==q||e[43]!==y||e[44]!==E?(L=S.jsx("input",{type:y,className:E,...q}),e[42]=q,e[43]=y,e[44]=E,e[45]=L):L=e[45];let R;e[46]!==d||e[47]!==L||e[48]!==T||e[49]!==I||e[50]!==N||e[51]!==k?(R=S.jsx(d,{formState:T,name:I,label:N,hint:k,children:L}),e[46]=d,e[47]=L,e[48]=T,e[49]=I,e[50]=N,e[51]=k,e[52]=R):R=e[52];let P;e[53]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:cc,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[53]=P):P=e[53];let F;return e[54]!==h||e[55]!==p||e[56]!==g||e[57]!==x||e[58]!==b||e[59]!==R?(F=S.jsxs("form",{className:h,onSubmit:p,children:[g,x,b,R,P]}),e[54]=h,e[55]=p,e[56]=g,e[57]=x,e[58]=b,e[59]=R,e[60]=F):F=e[60],F};function y1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(wb,{textTitle:S.jsx(he,{label:"Select resource (title)"}),allowEmpty:!0,...r})}const Sb=n=>S.jsx(M6,{icon:fi,textTitle:S.jsx(he,{label:"Select blueprint (title)"}),table:({table:e,...t})=>S.jsx(EH,{table:{...e,hidden:["requirements","dependencies"]},...t}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:t})=>An.transaction().execute(async r=>zi({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Region as br").innerJoin("Region as r","r.id","br.regionId").select(s=>ph.jsonGroupArray({id:s.ref("r.id"),name:s.ref("r.name")}).as("regions")).whereRef("br.blueprintId","=","b.id").as("regions"),i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>vs`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>vs`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const a=`%${s.fulltext}%`.toLowerCase();o=o.where(l=>l.or([l("b.id","like",a),l("b.name","like",a)]))}return o},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),cycles:ne.number().nonnegative(),sort:ne.number().nonnegative(),limit:ne.number().nonnegative(),regions:jo(ne.object({id:ne.string().min(1),name:ne.string().min(1)})),requirements:jo(Cv.entity.merge(ne.object({name:ne.string().min(1)}))),dependencies:jo(jh.entity.merge(ne.object({name:ne.string().min(1)})))}),filter:e,cursor:t})),...n}),v1e=ne.object({blueprintId:ne.string().min(1)}),_1e=n=>{const e=Bt.c(27),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(v1e),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:r},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d;e[3]!==o||e[4]!==c.formState.isLoading||e[5]!==c.formState.isSubmitting||e[6]!==a||e[7]!==i?(d=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots.base(),e[3]=o,e[4]=c.formState.isLoading,e[5]=c.formState.isSubmitting,e[6]=a,e[7]=i,e[8]=d):d=e[8];let h;e[9]!==c||e[10]!==t?(h=da({form:c,mutation:t}),e[9]=c,e[10]=t,e[11]=h):h=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p={highlight:!0},e[12]=p):p=e[12];let g;e[13]!==c.formState.errors.root?(g=S.jsx(po,{variant:p,error:c.formState.errors.root}),e[13]=c.formState.errors.root,e[14]=g):g=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Target blueprint (label)"}),e[15]=x):x=e[15];let b;e[16]!==c.control?(b=S.jsx(La,{control:c.control,name:"blueprintId",render:x1e}),e[16]=c.control,e[17]=b):b=e[17];let y;e[18]!==c.formState||e[19]!==b?(y=S.jsx(xr,{formState:c.formState,name:"blueprintId",label:x,children:b}),e[18]=c.formState,e[19]=b,e[20]=y):y=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:fi,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[21]=E):E=e[21];let T;return e[22]!==y||e[23]!==d||e[24]!==h||e[25]!==g?(T=S.jsxs("form",{className:d,onSubmit:h,children:[g,y,E]}),e[22]=y,e[23]=d,e[24]=h,e[25]=g,e[26]=T):T=e[26],T};function x1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Sb,{allowEmpty:!0,...r})}const ny=Is(),b1e=[ny({name:"name",header(){return S.jsx(he,{label:"Resource name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:cc,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:t,id:n.id},children:e})},size:18}),ny({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:8}),ny({name:"cycles",header(){return S.jsx(he,{label:"Production cycles (label)"})},render({value:n}){return $r({number:n})},size:8}),ny({name:"requirements",header(){return S.jsx(he,{label:"Required resources (label)"})},render({value:n}){return S.jsx(JT,{textTitle:S.jsx(he,{label:"Resource requirements (title)"}),textEmpty:S.jsx(he,{label:"No requirements (label)"}),requirements:n})},size:32}),ny({name:"resources",header(){return S.jsx(he,{label:"Required production resources (label)"})},render({value:n}){return S.jsx(Ch,{items:n,render:({entity:e})=>S.jsxs("div",{className:fr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[S.jsx("div",{children:e.name}),S.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",$r({number:e.amount})]})]})})},size:32}),ny({name:"dependencies",header(){return S.jsx(he,{label:"Required production dependencies (label)"})},render({value:n}){return S.jsx(Ch,{items:n,render:({entity:e})=>S.jsx("div",{className:fr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:S.jsx("div",{children:e.name})})})},size:32})],w1e=({blueprintId:n,table:e,...t})=>{const r=ji([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return S.jsx(Ts,{table:Ms({...e,columns:b1e}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create blueprint production (menu)"}),textTitle:S.jsx(he,{label:"Create blueprint production (modal)"}),icon:cc,children:({close:i})=>S.jsx(WB,{mutation:or({async mutationFn(s){return An.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Xr(),...s,blueprintId:n}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit blueprint production (modal)"}),icon:cc,children:S.jsx(WB,{defaultValues:i,mutation:or({async mutationFn(s){return An.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),S.jsx(Hr,{label:S.jsx(he,{label:"Move production to (menu)"}),textTitle:S.jsx(he,{label:"Move production to (modal)"}),icon:ns,children:({close:s})=>S.jsx(_1e,{mutation:or({async mutationFn(o){return An.transaction().execute(async a=>{await a.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...t})},Eb=qse({shape:ne.object({blueprintId:ne.string().min(1)}),filter:ca}),Tb=jse({shape:ne.object({resourceId:ne.string().min(1),amount:ef(),passive:ne.boolean()}),filter:ca.merge(ne.object({blueprintProductionId:ne.string().optional(),resourceId:ne.string().optional()}))}),Mb=Bse({shape:ne.object({resourceId:ne.string().min(1),amount:ef()}),filter:ca.merge(ne.object({resourceId:ne.string().optional()}))}),J_=Ln("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:rs(Es(Sk)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),cycles:ne.number().nonnegative(),requirements:jo(Tb.entity.merge(ne.object({name:ne.string().min(1)}))),resources:jo(Mb.entity.merge(ne.object({name:ne.string().min(1)}))),dependencies:jo(Eb.entity.merge(ne.object({name:ne.string().min(1)})))}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=J_.useLoaderData(),{filter:t,cursor:r,selection:i}=J_.useSearch(),{id:s}=J_.useParams(),o=J_.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(w1e,{blueprintId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of productions (label)"}),...bs(o)}})})}}),S1e=n=>{const e=Bt.c(6);let t,r;e[0]!==n?({label:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);const i=`Inventory type - ${t}`;let s;return e[3]!==r||e[4]!==i?(s=S.jsx(he,{label:i,...r}),e[3]=r,e[4]=i,e[5]=s):s=e[5],s},E1e=Vse({shape:ne.object({resourceId:ne.string().min(1),amount:ef(),limit:ef(),type:ne.enum(["storage","construction"])}),filter:ca.merge(ne.object({resourceId:ne.string().optional(),type:ne.enum(["storage","construction"]).optional()}))}),$B=n=>{const e=Bt.c(66),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(E1e.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{amount:0,limit:0,type:"storage",...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I,N,k;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const z=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;k=z.base(),e[20]!==c||e[21]!==t?(h=da({form:c,mutation:t}),e[20]=c,e[21]=t,e[22]=h):h=e[22];let V;e[23]===Symbol.for("react.memo_cache_sentinel")?(V={highlight:!0},e[23]=V):V=e[23],e[24]!==c.formState.errors.root?(p=S.jsx(po,{variant:V,error:c.formState.errors.root}),e[24]=c.formState.errors.root,e[25]=p):p=e[25];let W;e[26]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsx(he,{label:"Resource name (label)"}),e[26]=W):W=e[26];let Q;e[27]!==c.control?(Q=S.jsx(La,{control:c.control,name:"resourceId",render:T1e}),e[27]=c.control,e[28]=Q):Q=e[28],e[29]!==c.formState||e[30]!==Q?(g=S.jsx(xr,{formState:c.formState,name:"resourceId",label:W,children:Q}),e[29]=c.formState,e[30]=Q,e[31]=g):g=e[31];let X;e[32]===Symbol.for("react.memo_cache_sentinel")?(X=S.jsx(he,{label:"Inventory type (label)"}),e[32]=X):X=e[32];let re;e[33]!==c.control?(re=S.jsx(La,{control:c.control,name:"type",render:I1e}),e[33]=c.control,e[34]=re):re=e[34],e[35]!==c.formState||e[36]!==re?(x=S.jsx(xr,{formState:c.formState,name:"type",label:X,children:re}),e[35]=c.formState,e[36]=re,e[37]=x):x=e[37];const G=c.formState;let Y;e[38]===Symbol.for("react.memo_cache_sentinel")?(Y=S.jsx(he,{label:"Amount (label)"}),e[38]=Y):Y=e[38];const te=z.input();let Z;e[39]!==c?(Z=c.register("amount"),e[39]=c,e[40]=Z):Z=e[40];const fe=S.jsx("input",{type:"number",className:te,...Z});e[41]!==c.formState||e[42]!==fe?(b=S.jsx(xr,{formState:G,name:"amount",label:Y,children:fe}),e[41]=c.formState,e[42]=fe,e[43]=b):b=e[43],d=xr,T=c.formState,I="limit",e[44]===Symbol.for("react.memo_cache_sentinel")?(N=S.jsx(he,{label:"Inventory limit (label)"}),e[44]=N):N=e[44],y="number",E=z.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I,e[18]=N,e[19]=k}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17],N=e[18],k=e[19];let q;e[45]!==c?(q=c.register("limit"),e[45]=c,e[46]=q):q=e[46];let L;e[47]!==q||e[48]!==y||e[49]!==E?(L=S.jsx("input",{type:y,className:E,...q}),e[47]=q,e[48]=y,e[49]=E,e[50]=L):L=e[50];let R;e[51]!==d||e[52]!==L||e[53]!==T||e[54]!==I||e[55]!==N?(R=S.jsx(d,{formState:T,name:I,label:N,children:L}),e[51]=d,e[52]=L,e[53]=T,e[54]=I,e[55]=N,e[56]=R):R=e[56];let P;e[57]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:vh,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[57]=P):P=e[57];let F;return e[58]!==h||e[59]!==p||e[60]!==g||e[61]!==x||e[62]!==b||e[63]!==R||e[64]!==k?(F=S.jsxs("form",{className:k,onSubmit:h,children:[p,g,x,b,R,P]}),e[58]=h,e[59]=p,e[60]=g,e[61]=x,e[62]=b,e[63]=R,e[64]=k,e[65]=F):F=e[65],F};function T1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(wb,{textTitle:S.jsx(he,{label:"Select resource (title)"}),allowEmpty:!0,...r})}function M1e(n){const{entity:e}=n;return e.value}function I1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Jz,{items:[{id:"storage",value:sl.text("Inventory type - storage")},{id:"construction",value:sl.text("Inventory type - construction")}],render:M1e,...r})}const O1=Is(),A1e=[O1({name:"name",header(){return S.jsx(he,{label:"Resource name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceId",n.resourceId)}},size:18}),O1({name:"type",header(){return S.jsx(he,{label:"Inventory type (label)"})},render({value:n}){return S.jsx(S1e,{label:n})},filter:{path:"type",onFilter({data:n,filter:e}){e.shallow("type",n.type)}},size:12}),O1({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:12}),O1({name:"limit",header(){return S.jsx(he,{label:"Inventory limit (label)"})},render({value:n,data:e}){return S.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[S.jsx("div",{children:$r({number:n})}),S.jsx(rT,{value:100*e.amount/e.limit})]})},size:14})],C1e=({blueprintId:n,table:e,...t})=>{const r=ji([["Blueprint_Inventory"]]),i=or({async mutationFn(){return An.transaction().execute(async s=>SH({tx:s,blueprintId:n}))},async onSuccess(){await r()},onError(s){console.error(s)}});return S.jsx(Ts,{table:Ms({...e,columns:A1e}),action:{table(){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Create inventory item (menu)"}),textTitle:S.jsx(he,{label:"Create inventory item (modal)"}),icon:vh,children:S.jsx($B,{mutation:or({async mutationFn(s){return ci.promise(An.transaction().execute(async o=>o.insertInto("Blueprint_Inventory").values({id:Xr(),blueprintId:n,inventoryId:(await o.insertInto("Inventory").values({id:Xr(),...s}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),zo("Create inventory item"))},async onSuccess(){await r()}})})}),S.jsx(qN,{icon:vh,onClick:()=>{i.mutate()},children:S.jsx(he,{label:"Fill inventory (label)"})})]})},row({data:s}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit inventory item (modal)"}),icon:vh,children:S.jsx($B,{defaultValues:s,mutation:or({async mutationFn(o){return ci.promise(An.transaction().execute(async a=>a.updateTable("Inventory").set(o).where("id","=",s.inventoryId).returningAll().executeTakeFirstOrThrow()),zo("Update inventory item"))},async onSuccess(){await r()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async o=>o.deleteFrom("Inventory").where("id","=",s.inventoryId).execute()),textContent:S.jsx(he,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...t})},R1e=Dse({shape:ne.object({blueprintId:ne.string().min(1),inventoryId:ne.string().min(1)}),filter:ca.merge(ne.object({blueprintId:ne.string().optional(),inventoryId:ne.string().optional()}))}),Z_=Ln("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:rs(Es(R1e)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(s=>zi({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("i.type","asc").orderBy("r.name","asc"),query({select:o,where:a}){let l=o;if(a?.id&&(l=l.where("bi.id","=",a.id)),a?.idIn&&(l=l.where("bi.id","in",a.idIn)),a?.fulltext){const u=`%${a.fulltext}%`.toLowerCase();l=l.where(c=>c.or([c("bi.id","like",`%${u}%`),c("r.id","like",`%${u}%`),c("r.name","like",`%${u}%`),c("r.id","in",c.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(d=>d.or([d("t.code","like",u),d("t.label","like",u),d("t.group","like",u)])))]))}return l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),type:ne.enum(["storage","construction"]),resourceId:ne.string().min(1),blueprintId:ne.string().min(1),inventoryId:ne.string().min(1),amount:ne.number().nonnegative(),limit:ne.number().int().nonnegative()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=Z_.useLoaderData(),{filter:t,cursor:r,selection:i}=Z_.useSearch(),{id:s}=Z_.useParams(),o=Z_.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(C1e,{blueprintId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of items"}),...bs(o)}})})}}),CH=Ln("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:n}=eo({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=CH.useNavigate(),t=ji([["Blueprint"]]);return S.jsx("div",{className:"w-1/2 mx-auto",children:S.jsx(PE,{defaultValues:n,mutation:or({async mutationFn({image:r,regionIds:i,...s}){return An.transaction().execute(async o=>{await o.updateTable("Blueprint").set({...s,image:r?await dz(r):null}).where("id","=",n.id).returningAll().executeTakeFirstOrThrow(),await o.deleteFrom("Blueprint_Region").where("blueprintId","=",n.id).execute(),i?.length&&await o.insertInto("Blueprint_Region").values(i.map(a=>({id:Xr(),blueprintId:n.id,regionId:a}))).execute()})},async onSuccess(){await t(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:n.id}})}})})})}}),HB=n=>{const e=Bt.c(27),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(jh.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:r},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d;e[3]!==o||e[4]!==c.formState.isLoading||e[5]!==c.formState.isSubmitting||e[6]!==a||e[7]!==i?(d=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots.base(),e[3]=o,e[4]=c.formState.isLoading,e[5]=c.formState.isSubmitting,e[6]=a,e[7]=i,e[8]=d):d=e[8];let h;e[9]!==c||e[10]!==t?(h=da({form:c,mutation:t}),e[9]=c,e[10]=t,e[11]=h):h=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p={highlight:!0},e[12]=p):p=e[12];let g;e[13]!==c.formState.errors.root?(g=S.jsx(po,{variant:p,error:c.formState.errors.root}),e[13]=c.formState.errors.root,e[14]=g):g=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Blueprint dependency (label)"}),e[15]=x):x=e[15];let b;e[16]!==c.control?(b=S.jsx(La,{control:c.control,name:"dependencyId",render:N1e}),e[16]=c.control,e[17]=b):b=e[17];let y;e[18]!==c.formState||e[19]!==b?(y=S.jsx(xr,{formState:c.formState,name:"dependencyId",label:x,children:b}),e[18]=c.formState,e[19]=b,e[20]=y):y=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:fi,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[21]=E):E=e[21];let T;return e[22]!==y||e[23]!==d||e[24]!==h||e[25]!==g?(T=S.jsxs("form",{className:d,onSubmit:h,children:[g,y,E]}),e[22]=y,e[23]=d,e[24]=h,e[25]=g,e[26]=T):T=e[26],T};function N1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Sb,{textTitle:S.jsx(he,{label:"Select blueprint (title)"}),allowEmpty:!0,...r})}const P1e=Is(),k1e=[P1e({name:"name",header(){return S.jsx(he,{label:"Required building (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:t,id:n.dependencyId},children:e})},size:22})],O1e=({blueprintId:n,table:e,...t})=>{const r=ji([["Blueprint_Dependency"],["Blueprint"]]);return S.jsx(Ts,{table:Ms({...e,columns:k1e}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create blueprint dependency (menu)"}),textTitle:S.jsx(he,{label:"Create blueprint dependency (modal)"}),icon:fi,children:({close:i})=>S.jsx(HB,{mutation:or({async mutationFn(s){return ci.promise(An.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Dependency").values({id:Xr(),...s,blueprintId:n}).returningAll().executeTakeFirstOrThrow();return await k0({tx:o}),a}),zo("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit blueprint dependency (modal)"}),icon:fi,children:({close:s})=>S.jsx(HB,{defaultValues:i,mutation:or({async mutationFn(o){return ci.promise(An.transaction().execute(async a=>a.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),zo("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...t})},ex=Ln("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:rs(Es(jh)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bd.id","=",a.id)),a?.idIn&&(l=l.where("bd.id","in",a.idIn)),a?.blueprintId&&(l=l.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(l=l.where("bd.dependencyId","=",a.dependencyId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),dependencyId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=ex.useLoaderData(),{filter:t,cursor:r,selection:i}=ex.useSearch(),{id:s}=ex.useParams(),o=ex.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(O1e,{blueprintId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of requirements (label)"}),...bs(o)}})})}}),L1e=Ose({shape:ne.object({conflictId:ne.string().min(1)}),filter:ca}),GB=n=>{const e=Bt.c(28),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(L1e.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:r},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d;e[3]!==o||e[4]!==c.formState.isLoading||e[5]!==c.formState.isSubmitting||e[6]!==a||e[7]!==i?(d=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots.base(),e[3]=o,e[4]=c.formState.isLoading,e[5]=c.formState.isSubmitting,e[6]=a,e[7]=i,e[8]=d):d=e[8];let h;e[9]!==c||e[10]!==t?(h=da({form:c,mutation:t}),e[9]=c,e[10]=t,e[11]=h):h=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p={highlight:!0},e[12]=p):p=e[12];let g;e[13]!==c.formState.errors.root?(g=S.jsx(po,{variant:p,error:c.formState.errors.root}),e[13]=c.formState.errors.root,e[14]=g):g=e[14];let x,b;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Blueprint conflict (label)"}),b=S.jsx(he,{label:"Blueprint conflict (hint)"}),e[15]=x,e[16]=b):(x=e[15],b=e[16]);let y;e[17]!==c.control?(y=S.jsx(La,{control:c.control,name:"conflictId",render:D1e}),e[17]=c.control,e[18]=y):y=e[18];let E;e[19]!==c.formState||e[20]!==y?(E=S.jsx(xr,{formState:c.formState,name:"conflictId",label:x,hint:b,children:y}),e[19]=c.formState,e[20]=y,e[21]=E):E=e[21];let T;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:fi,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[22]=T):T=e[22];let I;return e[23]!==E||e[24]!==d||e[25]!==h||e[26]!==g?(I=S.jsxs("form",{className:d,onSubmit:h,children:[g,E,T]}),e[23]=E,e[24]=d,e[25]=h,e[26]=g,e[27]=I):I=e[27],I};function D1e(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Sb,{textTitle:S.jsx(he,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...r})}const F1e=Is(),q1e=[F1e({name:"name",header(){return S.jsx(he,{label:"Conflict building (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:t,id:n.conflictId},children:e})},size:22})],j1e=({blueprintId:n,table:e,...t})=>{const r=ji([["Blueprint_Conflict"],["Blueprint"]]);return S.jsx(Ts,{table:Ms({...e,columns:q1e}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create blueprint conflict (menu)"}),textTitle:S.jsx(he,{label:"Create blueprint conflict (modal)"}),icon:fi,children:({close:i})=>S.jsx(GB,{mutation:or({async mutationFn(s){return ci.promise(An.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Conflict").values({id:Xr(),...s,blueprintId:n}).returningAll().executeTakeFirstOrThrow();return await k0({tx:o}),a}),zo("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit blueprint conflict (modal)"}),icon:fi,children:({close:s})=>S.jsx(GB,{defaultValues:i,mutation:or({async mutationFn(o){return ci.promise(An.transaction().execute(async a=>a.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),zo("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...t})},tx=Ln("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:rs(Es(jh)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bc.id","=",a.id)),a?.idIn&&(l=l.where("bc.id","in",a.idIn)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),conflictId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=tx.useLoaderData(),{filter:t,cursor:r,selection:i}=tx.useSearch(),{id:s}=tx.useParams(),o=tx.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(j1e,{blueprintId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of conflicts (label)"}),...bs(o)}})})}}),B1e=n=>{const e=Bt.c(18),{land:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={from:"/$locale/apps/derivean/map/$mapId"},e[0]=r):r=e[0];const{mapId:i,locale:s}=nr(r);let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=fr(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),e[1]=o):o=e[1];let a;e[2]!==s||e[3]!==i?(a={locale:s,mapId:i},e[2]=s,e[3]=i,e[4]=a):a=e[4];let l;e[5]!==t.id?(l={zoomToId:t.id},e[5]=t.id,e[6]=l):l=e[6];let u;e[7]!==t.name||e[8]!==a||e[9]!==l?(u=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/land/list",params:a,search:l,children:t.name}),e[7]=t.name,e[8]=a,e[9]=l,e[10]=u):u=e[10];let c;e[11]!==t.position?(c=$r({number:t.position}),e[11]=t.position,e[12]=c):c=e[12];let d;e[13]!==c?(d=S.jsx("div",{className:"flex flex-col items-end text-xs",children:S.jsx("div",{className:"flex flex-row gap-1 items-center",children:S.jsx("div",{className:"font-bold",children:c})})}),e[13]=c,e[14]=d):d=e[14];let h;return e[15]!==u||e[16]!==d?(h=S.jsx("div",{className:o,children:S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[u,d]})}),e[15]=u,e[16]=d,e[17]=h):h=e[17],h},U1e=Cr({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-xs","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),dl=n=>{const e=Bt.c(36),{icon:t,textTitle:r,textSubTitle:i,variant:s,tva:o,css:a,children:l}=n,u=o===void 0?U1e:o;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={from:"/$locale/apps/derivean/map/$mapId"},e[0]=c):c=e[0];const{mapId:d,locale:h}=nr(c);let p,g,x;if(e[1]!==a||e[2]!==t||e[3]!==h||e[4]!==d||e[5]!==i||e[6]!==r||e[7]!==u||e[8]!==s){const E=u({...s,css:a}).slots;g=E.base();let T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T={base:["text-slate-500"]},e[12]=T):T=e[12];let I;e[13]!==t?(I=S.jsx(br,{icon:t,css:T}),e[13]=t,e[14]=I):I=e[14];let N;e[15]!==I||e[16]!==r?(N=S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[I,r]}),e[15]=I,e[16]=r,e[17]=N):N=e[17];let k;e[18]!==i?(k=i?S.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:i}):null,e[18]=i,e[19]=k):k=e[19];let q;e[20]!==N||e[21]!==k?(q=S.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[N,k]}),e[20]=N,e[21]=k,e[22]=q):q=e[22];let L;e[23]!==h||e[24]!==d?(L={locale:h,mapId:d},e[23]=h,e[24]=d,e[25]=L):L=e[25];let R;e[26]===Symbol.for("react.memo_cache_sentinel")?(R=S.jsx(Br,{iconEnabled:eP,variant:{variant:"subtle"}}),e[26]=R):R=e[26];let P;e[27]!==L?(P=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/view",params:L,children:R}),e[27]=L,e[28]=P):P=e[28],x=S.jsxs("div",{className:E.title(),children:[q,P]}),p=E.content(),e[1]=a,e[2]=t,e[3]=h,e[4]=d,e[5]=i,e[6]=r,e[7]=u,e[8]=s,e[9]=p,e[10]=g,e[11]=x}else p=e[9],g=e[10],x=e[11];let b;e[29]!==l||e[30]!==p?(b=S.jsx("div",{className:p,children:l}),e[29]=l,e[30]=p,e[31]=b):b=e[31];let y;return e[32]!==g||e[33]!==x||e[34]!==b?(y=S.jsxs("div",{className:g,children:[x,b]}),e[32]=g,e[33]=x,e[34]=b,e[35]=y):y=e[35],y},Ek="icon-[lucide--land-plot]",z1e=n=>{const e=Bt.c(9);let t,r;e[0]!==n?({land:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx(he,{label:"Land list (label)"}),e[3]=i):i=e[3];let s;e[4]!==t?(s=t.map(V1e),e[4]=t,e[5]=s):s=e[5];let o;return e[6]!==r||e[7]!==s?(o=S.jsx(dl,{icon:Ek,textTitle:i,...r,children:s}),e[6]=r,e[7]=s,e[8]=o):o=e[8],o};function V1e(n){return S.jsx(B1e,{land:n},n.id)}const RH=Ln("/$locale/apps/derivean/map/$mapId/land/list")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t}}){return{land:await n.ensureQueryData({queryKey:["GameMap",t,"land","list"],async queryFn(){return e.transaction().execute(async r=>Vo({select:r.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId","l.position"]).where("l.mapId","=",t).orderBy("r.name"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),mapId:ne.string().min(1),position:ne.number()})}))}})}},component(){const{land:n}=RH.useLoaderData();return S.jsx(z1e,{land:n})}}),W1e=Ln("/$locale/apps/derivean/map/$mapId/land/$landId")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,landId:r}}){return{land:await n.ensureQueryData({queryKey:["GameMap",t,"land",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>tu({select:i.selectFrom("Land as l").innerJoin("Region as r","r.id","l.regionId").select(["l.id","r.name","l.mapId"]).where("l.id","=",r),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),mapId:ne.string().min(1)})}))}})}}}),$1e=n=>{const e=Bt.c(21),{building:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={from:"/$locale/apps/derivean/map/$mapId"},e[0]=r):r=e[0];const{mapId:i,locale:s}=nr(r);let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=fr(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),e[1]=o):o=e[1];let a;e[2]!==t.id||e[3]!==s||e[4]!==i?(a={locale:s,mapId:i,buildingId:t.id},e[2]=t.id,e[3]=s,e[4]=i,e[5]=a):a=e[5];let l;e[6]!==t.name||e[7]!==a?(l=S.jsx(In,{icon:ql,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:a,children:t.name}),e[6]=t.name,e[7]=a,e[8]=l):l=e[8];let u;e[9]!==s||e[10]!==i?(u={locale:s,mapId:i},e[9]=s,e[10]=i,e[11]=u):u=e[11];let c;e[12]!==t.landId?(c={zoomToId:t.landId},e[12]=t.landId,e[13]=c):c=e[13];let d;e[14]!==t.land||e[15]!==u||e[16]!==c?(d=S.jsx(In,{icon:Ek,to:"/$locale/apps/derivean/map/$mapId/building/list",params:u,search:c,children:t.land}),e[14]=t.land,e[15]=u,e[16]=c,e[17]=d):d=e[17];let h;return e[18]!==l||e[19]!==d?(h=S.jsx("div",{className:o,children:S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[l,d]})}),e[18]=l,e[19]=d,e[20]=h):h=e[20],h},H1e=n=>{const e=Bt.c(9);let t,r;e[0]!==n?({building:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx(he,{label:"Building list (label)"}),e[3]=i):i=e[3];let s;e[4]!==t?(s=t.length>0?t.map(G1e):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"No buildings yet. (label)"})}),e[4]=t,e[5]=s):s=e[5];let o;return e[6]!==r||e[7]!==s?(o=S.jsx(dl,{icon:ql,textTitle:i,...r,children:s}),e[6]=r,e[7]=s,e[8]=o):o=e[8],o};function G1e(n){return S.jsx($1e,{building:n},n.id)}const NH=Ln("/$locale/apps/derivean/map/$mapId/building/list")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t}}){return{building:await n.ensureQueryData({queryKey:["GameMap",t,"building","list"],async queryFn(){return e.transaction().execute(async r=>Vo({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.landId","r.name as land"]).where("l.mapId","=",t).orderBy("bl.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),landId:ne.string().min(1),land:ne.string().min(1)})}))}})}},component(){const{building:n}=NH.useLoaderData();return S.jsx(H1e,{building:n})}}),X1e=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r}}){return{building:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"fetch"],async queryFn(){return e.transaction().execute(async i=>tu({select:i.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").select(["b.id","bl.name","b.blueprintId","r.name as land","b.constructionId","b.productionId","b.recurringProductionId"]).where("b.id","=",r),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),land:ne.string().min(1),constructionId:ne.string().nullish(),productionId:ne.string().nullish(),recurringProductionId:ne.string().nullish()})}))}})}}}),K1e=Ln("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId")({async loader({context:{queryClient:n,kysely:e},params:{blueprintId:t}}){return{blueprint:await n.ensureQueryData({queryKey:["GameMap","blueprint",t,"fetch"],async queryFn(){return e.transaction().execute(async r=>tu({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",t),output:ne.object({id:ne.string().min(1),name:ne.string().min(1)})}))}})}}}),Q1e=n=>{const e=Bt.c(27);let t,r;e[0]!==n?({entity:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale"},e[3]=i):i=e[3];const{locale:s}=nr(i);let o;e[4]!==t.id||e[5]!==s?(o={locale:s,id:t.id},e[4]=t.id,e[5]=s,e[6]=o):o=e[6];let a;e[7]===Symbol.for("react.memo_cache_sentinel")?(a=S.jsx(he,{label:"Production requirements (menu)"}),e[7]=a):a=e[7];let l;e[8]!==o?(l=S.jsx(Pi,{icon:wk,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:o,children:a}),e[8]=o,e[9]=l):l=e[9];let u;e[10]!==t.id||e[11]!==s?(u={locale:s,id:t.id},e[10]=t.id,e[11]=s,e[12]=u):u=e[12];let c;e[13]===Symbol.for("react.memo_cache_sentinel")?(c=S.jsx(he,{label:"Production resource requirements (menu)"}),e[13]=c):c=e[13];let d;e[14]!==u?(d=S.jsx(Pi,{icon:ns,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:u,children:c}),e[14]=u,e[15]=d):d=e[15];let h;e[16]!==t.id||e[17]!==s?(h={locale:s,id:t.id},e[16]=t.id,e[17]=s,e[18]=h):h=e[18];let p;e[19]===Symbol.for("react.memo_cache_sentinel")?(p=S.jsx(he,{label:"Production resource dependencies (menu)"}),e[19]=p):p=e[19];let g;e[20]!==h?(g=S.jsx(Pi,{icon:fi,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:h,children:p}),e[20]=h,e[21]=g):g=e[21];let x;return e[22]!==r||e[23]!==g||e[24]!==l||e[25]!==d?(x=S.jsxs(Bm,{...r,children:[l,d,g]}),e[22]=r,e[23]=g,e[24]=l,e[25]=d,e[26]=x):x=e[26],x},Y1e=n=>{const e=Bt.c(6);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={from:"/$locale"},e[0]=t):t=e[0];const{locale:r}=nr(t);let i;e[1]!==r?(i=o=>{const{entity:a}=o;return S.jsx(S.Fragment,{children:S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:r,id:a.blueprintId},children:S.jsx(he,{label:"Building base detail (label)"})})})},e[1]=r,e[2]=i):i=e[2];let s;return e[3]!==n||e[4]!==i?(s=S.jsx(Sv,{title:J1e,actions:i,...n}),e[3]=n,e[4]=i,e[5]=s):s=e[5],s};function J1e(n){const{entity:e}=n;return S.jsx(Ev,{icon:cc,title:e.resource,subtitle:e.blueprint})}const PH=Ln("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:n,kysely:e},params:{id:t}}){return n.ensureQueryData({queryKey:["Blueprint_Production",t],async queryFn(){return e.transaction().execute(async r=>({entity:await tu({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",t),output:ne.object({id:ne.string().min(1),resource:ne.string().min(1),blueprint:ne.string().min(1),blueprintId:ne.string().min(1),amount:ne.number().nonnegative(),cycles:ne.number().int().nonnegative()})})}))}})},component(){const{entity:n}=PH.useLoaderData(),{tva:e}=Ui({from:"__root__"}),t=e().slots;return S.jsxs("div",{className:t.base(),children:[S.jsx(Y1e,{entity:n}),S.jsx(Q1e,{entity:n}),S.jsx(dc,{})]})}}),Z1e=n=>{const e=Bt.c(4);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={id:"name",label:S.jsx(he,{label:"Building name (label)"}),render(s){const{entity:o}=s;return o.name}},e[0]=t):t=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=[t,{id:"cycles",label:S.jsx(he,{label:"Construction cycles (label)"}),render(s){const{entity:o}=s;return $r({number:o.cycles})}}],e[1]=r):r=e[1];let i;return e[2]!==n?(i=S.jsx(Yz,{items:r,...n}),e[2]=n,e[3]=i):i=e[3],i},eSe=Ln("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:n}=eo({from:"/$locale/apps/derivean/game/blueprint/$id"});return S.jsx("div",{className:"w-1/2 mx-auto",children:S.jsx(Z1e,{entity:n})})}}),vC=Is(),tSe=[vC({name:"name",header(){return S.jsx(he,{label:"Requirement name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceID",n.resourceId)}},size:22}),vC({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:10}),vC({name:"passive",header(){return S.jsx(he,{label:"Passive requirement (label)"})},render({value:n}){return S.jsx(J2,{value:n})},size:10})],nSe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:tSe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},gS=Ln("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:rs(Es(Cv)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("br.id","=",a.id)),a?.idIn&&(l=l.where("br.id","in",a.idIn)),a?.resourceId&&(l=l.where("br.resourceId","=",a.resourceId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),passive:fc()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=gS.useLoaderData(),{filter:t,cursor:r}=gS.useSearch(),i=gS.useNavigate(),{tva:s}=Ui({from:"__root__"}),o=s().slots;return S.jsx("div",{className:o.base(),children:S.jsx(nSe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of requirements (label)"}),...bs(i)}})})}}),ry=Is(),rSe=[ry({name:"name",header(){return S.jsx(he,{label:"Resource name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:cc,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:t,id:n.id},children:e})},size:18}),ry({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:8}),ry({name:"cycles",header(){return S.jsx(he,{label:"Production cycles (label)"})},render({value:n}){return $r({number:n})},size:8}),ry({name:"requirements",header(){return S.jsx(he,{label:"Required resources (label)"})},render({value:n}){return S.jsx(JT,{textTitle:S.jsx(he,{label:"Resource requirements (title)"}),textEmpty:S.jsx(he,{label:"No requirements (label)"}),requirements:n})},size:32}),ry({name:"resources",header(){return S.jsx(he,{label:"Required production resources (label)"})},render({value:n}){return S.jsx(Ch,{items:n,render:({entity:e})=>S.jsxs("div",{className:fr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:[S.jsx("div",{children:e.name}),S.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",$r({number:e.amount})]})]})})},size:32}),ry({name:"dependencies",header(){return S.jsx(he,{label:"Required production dependencies (label)"})},render({value:n}){const{locale:e}=nr({from:"/$locale"});return S.jsx(Ch,{items:n,render:({entity:t})=>S.jsx("div",{className:fr(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded-sm","border-sky-300","py-1","px-2"]),children:S.jsx(In,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:t.blueprintId},children:t.name})})})},size:32})],iSe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:rSe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},yS=Ln("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:rs(Es(Sk)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'passive', ${a.ref("bpr.passive")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("bpr.id")},
                                                'amount', ${a.ref("bpr.amount")},
                                                'blueprintProductionId', ${a.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${a.ref("bpr.resourceId")},
                                                'name', ${a.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(a=>vs`json_group_array(json_object(
                                                'id', ${a.ref("bpd.id")},
                                                'blueprintProductionId', ${a.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${a.ref("bpd.blueprintId")},
                                                'name', ${a.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),cycles:ne.number().nonnegative(),requirements:jo(Tb.entity.merge(ne.object({name:ne.string().min(1)}))),resources:jo(Mb.entity.merge(ne.object({name:ne.string().min(1)}))),dependencies:jo(Eb.entity.merge(ne.object({name:ne.string().min(1)})))}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=yS.useLoaderData(),{filter:t,cursor:r}=yS.useSearch(),i=yS.useNavigate(),{tva:s}=Ui({from:"__root__"}),o=s().slots;return S.jsx("div",{className:o.base(),children:S.jsx(iSe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of productions (label)"}),...bs(i)}})})}}),sSe=Is(),oSe=[sSe({name:"name",header(){return S.jsx(he,{label:"Required building (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:t,id:n.dependencyId},children:e})},size:22})],aSe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:oSe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},vS=Ln("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:rs(Es(jh)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bd.id","=",a.id)),a?.idIn&&(l=l.where("bd.id","in",a.idIn)),a?.blueprintId&&(l=l.where("bd.blueprintId","=",a.blueprintId)),a?.dependencyId&&(l=l.where("bd.dependencyId","=",a.dependencyId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),dependencyId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=vS.useLoaderData(),{filter:t,cursor:r}=vS.useSearch(),i=vS.useNavigate(),{tva:s}=Ui({from:"__root__"}),o=s().slots;return S.jsx("div",{className:o.base(),children:S.jsx(aSe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of dependencies (label)"}),...bs(i)}})})}}),lSe=Is(),cSe=[lSe({name:"name",header(){return S.jsx(he,{label:"Conflict building (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:t,id:n.conflictId},children:e})},size:22})],uSe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:cSe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},_S=Ln("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:rs(Es(jh)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bc.id","=",a.id)),a?.idIn&&(l=l.where("bc.id","in",a.idIn)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1),conflictId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=_S.useLoaderData(),{filter:t,cursor:r}=_S.useSearch(),i=_S.useNavigate(),{tva:s}=Ui({from:"__root__"}),o=s().slots;return S.jsx("div",{className:o.base(),children:S.jsx(uSe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of conflicts (label)"}),...bs(i)}})})}}),kH=zse({shape:ne.object({blueprintId:ne.string().min(1),constructionId:ne.string().optional(),productionId:ne.string().optional(),recurringProductionId:ne.string().optional(),x:ef(),y:ef()}),filter:ca.merge(ne.object({userId:ne.string().optional(),blueprintId:ne.string().optional(),name:ne.string().optional()}))}),dSe=n=>{const e=Bt.c(27),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(kH.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:r},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d;e[3]!==o||e[4]!==c.formState.isLoading||e[5]!==c.formState.isSubmitting||e[6]!==a||e[7]!==i?(d=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots.base(),e[3]=o,e[4]=c.formState.isLoading,e[5]=c.formState.isSubmitting,e[6]=a,e[7]=i,e[8]=d):d=e[8];let h;e[9]!==c||e[10]!==t?(h=da({form:c,mutation:t}),e[9]=c,e[10]=t,e[11]=h):h=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p={highlight:!0},e[12]=p):p=e[12];let g;e[13]!==c.formState.errors.root?(g=S.jsx(po,{variant:p,error:c.formState.errors.root}),e[13]=c.formState.errors.root,e[14]=g):g=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Select blueprint (label)"}),e[15]=x):x=e[15];let b;e[16]!==c.control?(b=S.jsx(La,{control:c.control,name:"blueprintId",render:fSe}),e[16]=c.control,e[17]=b):b=e[17];let y;e[18]!==c.formState||e[19]!==b?(y=S.jsx(xr,{formState:c.formState,name:"blueprintId",label:x,children:b}),e[18]=c.formState,e[19]=b,e[20]=y):y=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:ql,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[21]=E):E=e[21];let T;return e[22]!==y||e[23]!==d||e[24]!==h||e[25]!==g?(T=S.jsxs("form",{className:d,onSubmit:h,children:[g,y,E]}),e[22]=y,e[23]=d,e[24]=h,e[25]=g,e[26]=T):T=e[26],T};function fSe(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Sb,{allowEmpty:!0,...r})}const hSe=Is(),pSe=[hSe({name:"name",header(){return S.jsx(he,{label:"Building name (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsxs("div",{className:"flex flex-row gap-2",children:[S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:t,id:n.blueprintId}}),e]})},size:14})],mSe=({table:n,...e})=>{const t=ji([["Building"]]);return S.jsx(Ts,{table:Ms({...n,columns:pSe}),action:{row({data:r}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit building (modal)"}),icon:ql,children:S.jsx(dSe,{defaultValues:r,mutation:or({async mutationFn(i){return ci.promise(An.transaction().execute(s=>s.updateTable("Building").set(i).where("id","=",r.id).returningAll().executeTakeFirstOrThrow()),zo("Edit building"))},async onSuccess(){await t()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async i=>i.deleteFrom("Building").where("id","=",r.id).execute()),textContent:S.jsx(he,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:t})})]})}},...e})},xS=Ln("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:rs(Es(kH)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Building","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(s=>zi({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=xS.useLoaderData(),{filter:t,cursor:r,selection:i}=xS.useSearch(),s=xS.useNavigate(),{tva:o}=Ui({from:"__root__"}),a=o().slots;return S.jsx("div",{className:a.base(),children:S.jsx(mSe,{table:{data:n,filter:{value:t,set:ws(s)},selection:{type:"multi",value:i,set:ll(s)}},fulltext:{value:t?.fulltext,set:Ss(s)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of buildings (label)"}),...bs(s)}})})}}),XB=n=>{const e=Bt.c(50),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(Mb.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{amount:1,...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const P=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;I=P.base(),e[18]!==c||e[19]!==t?(h=da({form:c,mutation:t}),e[18]=c,e[19]=t,e[20]=h):h=e[20];let F;e[21]===Symbol.for("react.memo_cache_sentinel")?(F={highlight:!0},e[21]=F):F=e[21],e[22]!==c.formState.errors.root?(p=S.jsx(po,{variant:F,error:c.formState.errors.root}),e[22]=c.formState.errors.root,e[23]=p):p=e[23];let z;e[24]===Symbol.for("react.memo_cache_sentinel")?(z=S.jsx(he,{label:"Requirement (label)"}),e[24]=z):z=e[24];let V;e[25]!==c.control?(V=S.jsx(La,{control:c.control,name:"resourceId",render:gSe}),e[25]=c.control,e[26]=V):V=e[26],e[27]!==c.formState||e[28]!==V?(g=S.jsx(xr,{formState:c.formState,name:"resourceId",label:z,children:V}),e[27]=c.formState,e[28]=V,e[29]=g):g=e[29],d=xr,y=c.formState,E="amount",e[30]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Amount (label)"}),e[30]=T):T=e[30],x="number",b=P.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17];let N;e[31]!==c?(N=c.register("amount"),e[31]=c,e[32]=N):N=e[32];let k;e[33]!==N||e[34]!==x||e[35]!==b?(k=S.jsx("input",{type:x,className:b,...N}),e[33]=N,e[34]=x,e[35]=b,e[36]=k):k=e[36];let q;e[37]!==d||e[38]!==k||e[39]!==y||e[40]!==E||e[41]!==T?(q=S.jsx(d,{formState:y,name:E,label:T,children:k}),e[37]=d,e[38]=k,e[39]=y,e[40]=E,e[41]=T,e[42]=q):q=e[42];let L;e[43]===Symbol.for("react.memo_cache_sentinel")?(L=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:ns,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[43]=L):L=e[43];let R;return e[44]!==h||e[45]!==p||e[46]!==g||e[47]!==q||e[48]!==I?(R=S.jsxs("form",{className:I,onSubmit:h,children:[p,g,q,L]}),e[44]=h,e[45]=p,e[46]=g,e[47]=q,e[48]=I,e[49]=R):R=e[49],R};function gSe(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(wb,{allowEmpty:!0,...r})}const KB=Is(),ySe=[KB({name:"name",header(){return S.jsx(he,{label:"Requirement name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceID",n.resourceId)}},size:22}),KB({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:10})],vSe=({blueprintProductionId:n,table:e,...t})=>{const r=ji([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return S.jsx(Ts,{table:Ms({...e,columns:ySe}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create production resource requirement (menu)"}),textTitle:S.jsx(he,{label:"Create production resource requirement (modal)"}),icon:ns,children:({close:i})=>S.jsx(XB,{mutation:or({async mutationFn(s){return An.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Xr(),...s,blueprintProductionId:n}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit production resource requirement (modal)"}),icon:ns,children:({close:s})=>S.jsx(XB,{defaultValues:i,mutation:or({async mutationFn(o){return An.transaction().execute(async a=>a.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...t})},nx=Ln("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:rs(Es(Mb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=nx.useLoaderData(),{filter:t,cursor:r,selection:i}=nx.useSearch(),{id:s}=nx.useParams(),o=nx.useNavigate();return S.jsx(S.Fragment,{children:S.jsx(vSe,{blueprintProductionId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of production resource requirements (label)"}),...bs(o)}})})}}),QB=n=>{const e=Bt.c(58),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(Tb.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:{amount:1,passive:!1,...r}},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d,h,p,g,x,b,y,E,T,I;if(e[3]!==o||e[4]!==c||e[5]!==t||e[6]!==a||e[7]!==i){const W=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots;I=W.base(),e[18]!==c||e[19]!==t?(h=da({form:c,mutation:t}),e[18]=c,e[19]=t,e[20]=h):h=e[20];let Q;e[21]===Symbol.for("react.memo_cache_sentinel")?(Q={highlight:!0},e[21]=Q):Q=e[21],e[22]!==c.formState.errors.root?(p=S.jsx(po,{variant:Q,error:c.formState.errors.root}),e[22]=c.formState.errors.root,e[23]=p):p=e[23];let X;e[24]===Symbol.for("react.memo_cache_sentinel")?(X=S.jsx(he,{label:"Requirement (label)"}),e[24]=X):X=e[24];let re;e[25]!==c.control?(re=S.jsx(La,{control:c.control,name:"resourceId",render:_Se}),e[25]=c.control,e[26]=re):re=e[26],e[27]!==c.formState||e[28]!==re?(g=S.jsx(xr,{formState:c.formState,name:"resourceId",label:X,children:re}),e[27]=c.formState,e[28]=re,e[29]=g):g=e[29],d=xr,y=c.formState,E="amount",e[30]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx(he,{label:"Amount (label)"}),e[30]=T):T=e[30],x="number",b=W.input(),e[3]=o,e[4]=c,e[5]=t,e[6]=a,e[7]=i,e[8]=d,e[9]=h,e[10]=p,e[11]=g,e[12]=x,e[13]=b,e[14]=y,e[15]=E,e[16]=T,e[17]=I}else d=e[8],h=e[9],p=e[10],g=e[11],x=e[12],b=e[13],y=e[14],E=e[15],T=e[16],I=e[17];let N;e[31]!==c?(N=c.register("amount"),e[31]=c,e[32]=N):N=e[32];let k;e[33]!==N||e[34]!==x||e[35]!==b?(k=S.jsx("input",{type:x,className:b,...N}),e[33]=N,e[34]=x,e[35]=b,e[36]=k):k=e[36];let q;e[37]!==d||e[38]!==k||e[39]!==y||e[40]!==E||e[41]!==T?(q=S.jsx(d,{formState:y,name:E,label:T,children:k}),e[37]=d,e[38]=k,e[39]=y,e[40]=E,e[41]=T,e[42]=q):q=e[42];let L,R;e[43]===Symbol.for("react.memo_cache_sentinel")?(L=S.jsx(he,{label:"Passive requirement (label)"}),R=S.jsx(he,{label:"Passive requirement (hint)"}),e[43]=L,e[44]=R):(L=e[43],R=e[44]);let P;e[45]!==c.control?(P=S.jsx(La,{control:c.control,name:"passive",render:xSe}),e[45]=c.control,e[46]=P):P=e[46];let F;e[47]!==c.formState||e[48]!==P?(F=S.jsx(xr,{formState:c.formState,name:"passive",label:L,hint:R,children:P}),e[47]=c.formState,e[48]=P,e[49]=F):F=e[49];let z;e[50]===Symbol.for("react.memo_cache_sentinel")?(z=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:ns,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[50]=z):z=e[50];let V;return e[51]!==h||e[52]!==p||e[53]!==g||e[54]!==q||e[55]!==F||e[56]!==I?(V=S.jsxs("form",{className:I,onSubmit:h,children:[p,g,q,F,z]}),e[51]=h,e[52]=p,e[53]=g,e[54]=q,e[55]=F,e[56]=I,e[57]=V):V=e[57],V};function _Se(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(wb,{allowEmpty:!0,...r})}function xSe(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Qz,{...r})}const _C=Is(),bSe=[_C({name:"name",header(){return S.jsx(he,{label:"Requirement name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceID",n.resourceId)}},size:12}),_C({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:10}),_C({name:"passive",header(){return S.jsx(he,{label:"Passive requirement (label)"})},render({value:n}){return S.jsx(J2,{value:n})},size:10})],wSe=({blueprintProductionId:n,table:e,...t})=>{const r=ji([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return S.jsx(Ts,{table:Ms({...e,columns:bSe}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create production requirement (menu)"}),textTitle:S.jsx(he,{label:"Create production requirement (modal)"}),icon:ns,children:({close:i})=>S.jsx(QB,{mutation:or({async mutationFn(s){return An.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Xr(),...s,blueprintProductionId:n}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit production requirement (modal)"}),icon:ns,children:({close:s})=>S.jsx(QB,{defaultValues:i,mutation:or({async mutationFn(o){return An.transaction().execute(async a=>a.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...t})},rx=Ln("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:rs(Es(Tb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),passive:fc()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=rx.useLoaderData(),{filter:t,cursor:r,selection:i}=rx.useSearch(),{id:s}=rx.useParams(),o=rx.useNavigate();return S.jsx(S.Fragment,{children:S.jsx(wSe,{blueprintProductionId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of production requirements (label)"}),...bs(o)}})})}}),YB=n=>{const e=Bt.c(27),{mutation:t,defaultValues:r,variant:i,tva:s,css:o}=n,a=s===void 0?wo:s;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=Eo(Eb.shape),e[0]=l):l=e[0];let u;e[1]!==r?(u={resolver:l,defaultValues:r},e[1]=r,e[2]=u):u=e[2];const c=So(u);let d;e[3]!==o||e[4]!==c.formState.isLoading||e[5]!==c.formState.isSubmitting||e[6]!==a||e[7]!==i?(d=a({...i,isLoading:c.formState.isLoading,isSubmitting:c.formState.isSubmitting,css:o}).slots.base(),e[3]=o,e[4]=c.formState.isLoading,e[5]=c.formState.isSubmitting,e[6]=a,e[7]=i,e[8]=d):d=e[8];let h;e[9]!==c||e[10]!==t?(h=da({form:c,mutation:t}),e[9]=c,e[10]=t,e[11]=h):h=e[11];let p;e[12]===Symbol.for("react.memo_cache_sentinel")?(p={highlight:!0},e[12]=p):p=e[12];let g;e[13]!==c.formState.errors.root?(g=S.jsx(po,{variant:p,error:c.formState.errors.root}),e[13]=c.formState.errors.root,e[14]=g):g=e[14];let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=S.jsx(he,{label:"Blueprint dependency (label)"}),e[15]=x):x=e[15];let b;e[16]!==c.control?(b=S.jsx(La,{control:c.control,name:"blueprintId",render:SSe}),e[16]=c.control,e[17]=b):b=e[17];let y;e[18]!==c.formState||e[19]!==b?(y=S.jsx(xr,{formState:c.formState,name:"blueprintId",label:x,children:b}),e[18]=c.formState,e[19]=b,e[20]=y):y=e[20];let E;e[21]===Symbol.for("react.memo_cache_sentinel")?(E=S.jsx("div",{className:"flex flex-row justify-between gap-8",children:S.jsx(Br,{iconEnabled:fi,type:"submit",children:S.jsx(he,{label:"Save (submit)"})})}),e[21]=E):E=e[21];let T;return e[22]!==y||e[23]!==d||e[24]!==h||e[25]!==g?(T=S.jsxs("form",{className:d,onSubmit:h,children:[g,y,E]}),e[22]=y,e[23]=d,e[24]=h,e[25]=g,e[26]=T):T=e[26],T};function SSe(n){const{field:e}=n,{ref:t,...r}=e;return S.jsx(Sb,{textTitle:S.jsx(he,{label:"Select blueprint (title)"}),allowEmpty:!0,...r})}const ESe=Is(),TSe=[ESe({name:"name",header(){return S.jsx(he,{label:"Required building (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:t,id:n.blueprintId},children:e})},size:22})],MSe=({blueprintProductionId:n,table:e,...t})=>{const r=ji([["Blueprint_Production_Dependency"],["Blueprint"]]);return S.jsx(Ts,{table:Ms({...e,columns:TSe}),action:{table(){return S.jsx(Bi,{children:S.jsx(Hr,{label:S.jsx(he,{label:"Create blueprint production dependency (menu)"}),textTitle:S.jsx(he,{label:"Create blueprint production dependency (modal)"}),icon:fi,children:({close:i})=>S.jsx(YB,{mutation:or({async mutationFn(s){return ci.promise(An.transaction().execute(async o=>{const a=o.insertInto("Blueprint_Production_Dependency").values({id:Xr(),...s,blueprintProductionId:n}).returningAll().executeTakeFirstOrThrow();return await k0({tx:o}),a}),zo("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return S.jsxs(Bi,{children:[S.jsx(Hr,{label:S.jsx(he,{label:"Edit (menu)"}),textTitle:S.jsx(he,{label:"Edit blueprint production dependency (modal)"}),icon:fi,children:({close:s})=>S.jsx(YB,{defaultValues:i,mutation:or({async mutationFn(o){return ci.promise(An.transaction().execute(async a=>a.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),zo("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),S.jsx(Hr,{icon:js,label:S.jsx(he,{label:"Delete (menu)"}),textTitle:S.jsx(he,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:S.jsx(cl,{callback:async()=>An.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:S.jsx(he,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...t})},ix=Ln("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:rs(Es(Eb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpd.id","=",a.id)),a?.idIn&&(l=l.where("bpd.id","in",a.idIn)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=ix.useLoaderData(),{filter:t,cursor:r,selection:i}=ix.useSearch(),{id:s}=ix.useParams(),o=ix.useNavigate(),{tva:a}=Ui({from:"__root__"}),l=a().slots;return S.jsx("div",{className:l.base(),children:S.jsx(MSe,{blueprintProductionId:s,table:{data:n,filter:{value:t,set:ws(o)},selection:{type:"multi",value:i,set:ll(o)}},fulltext:{value:t?.fulltext,set:Ss(o)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of dependencies (label)"}),...bs(o)}})})}}),ISe=Ln("/$locale/apps/derivean/map/$mapId/road/$roadId/view")({component(){return"mrdka"}}),ASe=Cr({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),rN="icon-[emojione-monotone--construction]",CSe=async({userId:n,blueprintId:e,landId:t,plotId:r,plan:i,valid:s})=>An.transaction().execute(async o=>{const a=await o.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",e).executeTakeFirstOrThrow(),l=await o.insertInto("Building").values({id:Xr(),userId:n,blueprintId:e,landId:t,constructionId:(await o.insertInto("Construction").values({id:Xr(),userId:n,cycle:0,cycles:a.cycles,plan:i}).returning("id").executeTakeFirstOrThrow()).id,plotId:r,valid:s}).returningAll().executeTakeFirstOrThrow(),u=await o.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",o.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",e)).execute();for await(const{amount:c,limit:d,resourceId:h,type:p}of u)await o.insertInto("Building_Inventory").values({id:Xr(),buildingId:l.id,inventoryId:(await o.insertInto("Inventory").values({id:Xr(),amount:c,limit:d,resourceId:h,type:p}).returning("id").executeTakeFirstOrThrow()).id}).execute();return l}),Tk=ie.memo(n=>{const e=Bt.c(6),{cycles:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=fr(["flex","flex-row","items-center","gap-2"]),e[0]=r):r=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx(br,{css:{base:["text-slate-400"]},icon:bk}),e[1]=i):i=e[1];let s;e[2]!==t?(s=$r({number:t}),e[2]=t,e[3]=s):s=e[3];let o;return e[4]!==s?(o=S.jsxs("div",{className:r,children:[i,S.jsx("div",{className:"font-bold text-md",children:s})]}),e[4]=s,e[5]=o):o=e[5],o}),RSe=n=>{const e=Bt.c(44),{blueprint:t,land:r,userId:i,variant:s,tva:o,css:a}=n,l=o===void 0?ASe:o;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u={from:"/$locale/apps/derivean/map/$mapId"},e[0]=u):u=e[0];const{mapId:c,locale:d}=nr(u),h=Lm();let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=[["GameMap"]],e[1]=p):p=e[1];const g=ji(p);let x;e[2]!==g||e[3]!==r.id||e[4]!==d||e[5]!==c||e[6]!==h||e[7]!==i?(x={async mutationFn(V){const{blueprintId:W,landId:Q,plotId:X}=V,re=await CSe({userId:i,blueprintId:W,landId:Q,plotId:X,plan:!0,valid:!1});h({to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:{locale:d,mapId:c,landId:r.id},search:{zoomToId:re.id}})},async onSuccess(){await g()},onError(V){console.error(V)}},e[2]=g,e[3]=r.id,e[4]=d,e[5]=c,e[6]=h,e[7]=i,e[8]=x):x=e[8];const b=or(x);let y;e[9]!==a||e[10]!==l||e[11]!==s?(y=l({...s,css:a}).slots.base(),e[9]=a,e[10]=l,e[11]=s,e[12]=y):y=e[12];let E;e[13]!==t.count?(E=S.jsxs(ia,{children:["x",t.count]}),e[13]=t.count,e[14]=E):E=e[14];let T;e[15]!==t.id||e[16]!==d||e[17]!==c?(T={locale:d,mapId:c,blueprintId:t.id},e[15]=t.id,e[16]=d,e[17]=c,e[18]=T):T=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I={base:["font-bold"]},e[19]=I):I=e[19];let N;e[20]!==t.name||e[21]!==T?(N=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements",params:T,css:I,children:t.name}),e[20]=t.name,e[21]=T,e[22]=N):N=e[22];let k;e[23]!==E||e[24]!==N?(k=S.jsxs("div",{className:"flex flex-row gap-2",children:[E,N]}),e[23]=E,e[24]=N,e[25]=k):k=e[25];let q;e[26]!==t.cycles?(q=S.jsx(Tk,{cycles:t.cycles}),e[26]=t.cycles,e[27]=q):q=e[27];let L;e[28]!==t.id||e[29]!==b||e[30]!==r.id?(L=()=>{b.mutate({blueprintId:t.id,landId:r.id,plotId:"unknown`"})},e[28]=t.id,e[29]=b,e[30]=r.id,e[31]=L):L=e[31];let R;e[32]!==b.isPending||e[33]!==L?(R=S.jsx(Br,{iconEnabled:rN,iconDisabled:rN,loading:b.isPending,onClick:L}),e[32]=b.isPending,e[33]=L,e[34]=R):R=e[34];let P;e[35]!==q||e[36]!==R?(P=S.jsxs("div",{className:"flex flex-row gap-2",children:[q,R]}),e[35]=q,e[36]=R,e[37]=P):P=e[37];let F;e[38]!==k||e[39]!==P?(F=S.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[k,P]}),e[38]=k,e[39]=P,e[40]=F):F=e[40];let z;return e[41]!==F||e[42]!==y?(z=S.jsx("div",{className:y,children:F}),e[41]=F,e[42]=y,e[43]=z):z=e[43],z},NSe=n=>{const e=Bt.c(25);let t,r,i,s;e[0]!==n?({userId:s,land:r,blueprints:t,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o={from:"/$locale/apps/derivean/map/$mapId"},e[5]=o):o=e[5];const{locale:a,mapId:l}=nr(o);let u;e[6]!==r.id||e[7]!==a||e[8]!==l?(u={locale:a,mapId:l,landId:r.id},e[6]=r.id,e[7]=a,e[8]=l,e[9]=u):u=e[9];let c;e[10]!==r.id?(c={zoomToId:r.id},e[10]=r.id,e[11]=c):c=e[11];let d;e[12]!==r.name||e[13]!==u||e[14]!==c?(d=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/land/$landId/construction",params:u,search:c,children:r.name}),e[12]=r.name,e[13]=u,e[14]=c,e[15]=d):d=e[15];let h;e[16]===Symbol.for("react.memo_cache_sentinel")?(h=S.jsx(he,{label:"Construction (label)"}),e[16]=h):h=e[16];let p;e[17]!==t||e[18]!==r||e[19]!==s?(p=t.length>0?t.map(x=>S.jsx(RSe,{blueprint:x,userId:s,land:r},x.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"There are no available blueprints (label)"})}),e[17]=t,e[18]=r,e[19]=s,e[20]=p):p=e[20];let g;return e[21]!==i||e[22]!==d||e[23]!==p?(g=S.jsx(dl,{icon:rN,textTitle:d,textSubTitle:h,...i,children:p}),e[21]=i,e[22]=d,e[23]=p,e[24]=g):g=e[24],g},OH=Ln("/$locale/apps/derivean/map/$mapId/land/$landId/construction")({async loader({context:{queryClient:n,kysely:e,session:t},params:{mapId:r,landId:i}}){const s=await t();return{user:s,blueprints:await n.ensureQueryData({queryKey:["GameMap",r,"land",i,"construction","list"],async queryFn(){return e.transaction().execute(async o=>Vo({select:o.selectFrom(o.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",a=>a.selectFrom("Building as bg").select(l=>l.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",s.id).where("bg.landId","is",i).as("count"),a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Dependency as bd").select(a.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(l=>l.not(l.exists(l.selectFrom("Building as b").innerJoin("Land as l","l.id","b.landId").select(l.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",s.id).where("l.mapId","=",r).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",o.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",o.selectFrom("Building as bg").innerJoin("Land as l","l.id","bg.landId").select("bg.blueprintId").where("bg.userId","=",s.id).where("l.mapId","=",r))).where("bl.id","in",o.selectFrom("Blueprint_Region as br").innerJoin("Land as l","l.regionId","br.regionId").select("br.blueprintId").where("l.id","=",i)).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),count:ne.number().int().nonnegative(),cycles:ne.number().int().nonnegative(),sort:ne.number().int().nonnegative(),withAvailableBuildings:fc()})}))}})}},component(){const{user:n,blueprints:e}=OH.useLoaderData(),{land:t}=eo({from:"/$locale/apps/derivean/map/$mapId/land/$landId"});return S.jsx(NSe,{userId:n.id,land:t,blueprints:e})}}),Dp=["p-4","border","border-slate-300","w-full","justify-start"],mm="icon-[hugeicons--package-receive]",iN="icon-[heroicons--queue-list]",b2="icon-[hugeicons--package-sent]",LH="icon-[icon-park-outline--transport]",PSe=n=>{const e=Bt.c(83),{building:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={from:"/$locale/apps/derivean/map/$mapId"},e[0]=r):r=e[0];const{mapId:i,locale:s}=nr(r);let o;e[1]!==t.id||e[2]!==s||e[3]!==i?(o={locale:s,mapId:i,buildingId:t.id},e[1]=t.id,e[2]=s,e[3]=i,e[4]=o):o=e[4];let a;e[5]!==t.id?(a={zoomToId:t.id},e[5]=t.id,e[6]=a):a=e[6];let l;e[7]!==t.name||e[8]!==o||e[9]!==a?(l=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:o,search:a,children:t.name}),e[7]=t.name,e[8]=o,e[9]=a,e[10]=l):l=e[10];const u=t.land;let c;e[11]!==t.id||e[12]!==s||e[13]!==i?(c={locale:s,mapId:i,buildingId:t.id},e[11]=t.id,e[12]=s,e[13]=i,e[14]=c):c=e[14];let d,h;e[15]===Symbol.for("react.memo_cache_sentinel")?(d={base:Dp},h=S.jsx(he,{label:"Building production (label)"}),e[15]=d,e[16]=h):(d=e[15],h=e[16]);let p;e[17]!==c?(p=S.jsx(In,{icon:cc,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:c,css:d,children:h}),e[17]=c,e[18]=p):p=e[18];let g;e[19]!==t.id||e[20]!==s||e[21]!==i?(g={locale:s,mapId:i,buildingId:t.id},e[19]=t.id,e[20]=s,e[21]=i,e[22]=g):g=e[22];let x,b;e[23]===Symbol.for("react.memo_cache_sentinel")?(x={base:Dp},b=S.jsx(he,{label:"Production queue (label)"}),e[23]=x,e[24]=b):(x=e[23],b=e[24]);let y;e[25]!==g?(y=S.jsx(In,{icon:iN,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue",params:g,css:x,children:b}),e[25]=g,e[26]=y):y=e[26];let E;e[27]!==t.id||e[28]!==s||e[29]!==i?(E={locale:s,mapId:i,buildingId:t.id},e[27]=t.id,e[28]=s,e[29]=i,e[30]=E):E=e[30];let T,I;e[31]===Symbol.for("react.memo_cache_sentinel")?(T={base:Dp},I=S.jsx(he,{label:"Building inventory (label)"}),e[31]=T,e[32]=I):(T=e[31],I=e[32]);let N;e[33]!==E?(N=S.jsx(In,{icon:vh,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:E,css:T,children:I}),e[33]=E,e[34]=N):N=e[34];let k;e[35]!==t.id||e[36]!==s||e[37]!==i?(k={locale:s,mapId:i,buildingId:t.id},e[35]=t.id,e[36]=s,e[37]=i,e[38]=k):k=e[38];let q,L;e[39]===Symbol.for("react.memo_cache_sentinel")?(q={base:Dp},L=S.jsx(he,{label:"Supply list (label)"}),e[39]=q,e[40]=L):(q=e[39],L=e[40]);let R;e[41]!==k?(R=S.jsx(In,{icon:b2,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:k,css:q,children:L}),e[41]=k,e[42]=R):R=e[42];let P;e[43]!==t.id||e[44]!==s||e[45]!==i?(P={locale:s,mapId:i,buildingId:t.id},e[43]=t.id,e[44]=s,e[45]=i,e[46]=P):P=e[46];let F,z;e[47]===Symbol.for("react.memo_cache_sentinel")?(F={base:Dp},z=S.jsx(he,{label:"Demand list (label)"}),e[47]=F,e[48]=z):(F=e[47],z=e[48]);let V;e[49]!==P?(V=S.jsx(In,{icon:mm,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:P,css:F,children:z}),e[49]=P,e[50]=V):V=e[50];let W;e[51]!==t.id||e[52]!==s||e[53]!==i?(W={locale:s,mapId:i,buildingId:t.id},e[51]=t.id,e[52]=s,e[53]=i,e[54]=W):W=e[54];let Q,X;e[55]===Symbol.for("react.memo_cache_sentinel")?(Q={base:Dp},X=S.jsx(he,{label:"Transport list (label)"}),e[55]=Q,e[56]=X):(Q=e[55],X=e[56]);let re;e[57]!==W?(re=S.jsx(In,{icon:LH,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/transport",params:W,css:Q,children:X}),e[57]=W,e[58]=re):re=e[58];let G;e[59]!==t.id||e[60]!==s||e[61]!==i?(G={locale:s,mapId:i,buildingId:t.id},e[59]=t.id,e[60]=s,e[61]=i,e[62]=G):G=e[62];let Y,te;e[63]===Symbol.for("react.memo_cache_sentinel")?(Y={base:Dp},te=S.jsx(he,{label:"Building links (label)"}),e[63]=Y,e[64]=te):(Y=e[63],te=e[64]);let Z;e[65]!==G?(Z=S.jsx(In,{icon:ql,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:G,css:Y,children:te}),e[65]=G,e[66]=Z):Z=e[66];let fe;e[67]===Symbol.for("react.memo_cache_sentinel")?(fe=S.jsx("div",{className:"border-b border-slate-300"}),e[67]=fe):fe=e[67];const ge=`bg-${t.blueprintId}`;let ce;e[68]!==ge?(ce=fr(["w-full","h-96","bg-contain","p-2",ge]),e[68]=ge,e[69]=ce):ce=e[69];let ye;e[70]!==ce?(ye=S.jsx("div",{className:ce}),e[70]=ce,e[71]=ye):ye=e[71];let be;return e[72]!==t.land||e[73]!==y||e[74]!==N||e[75]!==R||e[76]!==V||e[77]!==re||e[78]!==Z||e[79]!==ye||e[80]!==l||e[81]!==p?(be=S.jsxs(dl,{icon:ql,textTitle:l,textSubTitle:u,children:[p,y,N,R,V,re,Z,fe,ye]}),e[72]=t.land,e[73]=y,e[74]=N,e[75]=R,e[76]=V,e[77]=re,e[78]=Z,e[79]=ye,e[80]=l,e[81]=p,e[82]=be):be=e[82],be},Mk="icon-[hugeicons--package]",kSe=n=>{const e=Bt.c(61),{mapId:t,userId:r,requirement:i}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[["GameMap"]],e[0]=s):s=e[0];const o=ji(s),a=i.available||0;let l;e[1]!==o||e[2]!==t||e[3]!==r?(l={async mutationFn(W){const{demandId:Q}=W;return An.transaction().execute(async X=>{const{priority:re}=await X.selectFrom("Demand as d").select(OSe).where("d.mapId","=",t).where("d.userId","=",r).where("d.id","!=",Q).executeTakeFirstOrThrow();return X.updateTable("Demand").set({priority:re+1}).where("id","=",Q).execute()})},async onSuccess(){await o()}},e[1]=o,e[2]=t,e[3]=r,e[4]=l):l=e[4];const u=or(l);let c;e[5]!==o||e[6]!==t||e[7]!==r?(c={async mutationFn(W){const{demandId:Q}=W;return An.transaction().execute(async X=>{const{priority:re}=await X.selectFrom("Demand as d").select(LSe).where("d.mapId","=",t).where("d.userId","=",r).where("d.id","!=",Q).executeTakeFirstOrThrow();return X.updateTable("Demand").set({priority:re-1}).where("id","=",Q).execute()})},async onSuccess(){await o()}},e[5]=o,e[6]=t,e[7]=r,e[8]=c):c=e[8];const d=or(c);let h;e[9]!==a||e[10]!==i.amount||e[11]!==i.supply||e[12]!==i.transport?(h=fr(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",i.supply?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:["bg-red-50","border-red-400","hover:bg-red-50","hover:border-red-400"],i.transport||a>=i.amount?["bg-green-50","border-green-400","hover:bg-green-50","hover:border-green-400"]:void 0]),e[9]=a,e[10]=i.amount,e[11]=i.supply,e[12]=i.transport,e[13]=h):h=e[13];let p;e[14]!==a||e[15]!==i.amount||e[16]!==i.supply||e[17]!==i.transport?(p=fr(["flex","flex-row","gap-2","items-center",i.supply?["text-purple-600"]:["text-red-600"],i.transport||a>=i.amount?["text-green-600"]:void 0]),e[14]=a,e[15]=i.amount,e[16]=i.supply,e[17]=i.transport,e[18]=p):p=e[18];let g;e[19]!==a||e[20]!==i.amount||e[21]!==i.supply?(g=i.supply||a>=i.amount?S.jsx(br,{icon:mm}):S.jsx(br,{icon:Mk}),e[19]=a,e[20]=i.amount,e[21]=i.supply,e[22]=g):g=e[22];let x;e[23]!==i.name?(x=S.jsx("div",{className:"font-bold",children:i.name}),e[23]=i.name,e[24]=x):x=e[24];let b;e[25]!==p||e[26]!==g||e[27]!==x?(b=S.jsxs("div",{className:p,children:[g,x]}),e[25]=p,e[26]=g,e[27]=x,e[28]=b):b=e[28];let y;e[29]!==a?(y=$r({number:a}),e[29]=a,e[30]=y):y=e[30];let E;e[31]!==y?(E=S.jsx("div",{children:y}),e[31]=y,e[32]=E):E=e[32];let T;e[33]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx("div",{children:"/"}),e[33]=T):T=e[33];let I;e[34]!==i.amount?(I=$r({number:i.amount}),e[34]=i.amount,e[35]=I):I=e[35];let N;e[36]!==I?(N=S.jsx("div",{className:"font-bold",children:I}),e[36]=I,e[37]=N):N=e[37];let k;e[38]!==E||e[39]!==N?(k=S.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[E,T,N]}),e[38]=E,e[39]=N,e[40]=k):k=e[40];let q;e[41]!==k||e[42]!==b?(q=S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b,k]}),e[41]=k,e[42]=b,e[43]=q):q=e[43];const L=100*a/i.amount;let R;e[44]!==a||e[45]!==i.amount?(R=a>=i.amount?["bg-green-500"]:void 0,e[44]=a,e[45]=i.amount,e[46]=R):R=e[46];let P;e[47]!==R?(P={progress:R},e[47]=R,e[48]=P):P=e[48];let F;e[49]!==L||e[50]!==P?(F=S.jsx(rT,{value:L,css:P}),e[49]=L,e[50]=P,e[51]=F):F=e[51];let z;e[52]!==d||e[53]!==u||e[54]!==i.demand?(z=i.demand?S.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[S.jsx(Br,{iconEnabled:s6,variant:{variant:"subtle"},loading:u.isPending||d.isPending,onClick:()=>{i.demand&&u.mutate({demandId:i.demand.id})},children:S.jsx(he,{label:"Priority up (label)"})}),S.jsx(ia,{css:{base:["bg-purple-50","border-purple-400","text-purple-600"]},children:i.demand.priority}),S.jsx(Br,{iconEnabled:i6,variant:{variant:"subtle"},loading:u.isPending||d.isPending,onClick:()=>{i.demand&&d.mutate({demandId:i.demand.id})},children:S.jsx(he,{label:"Priority down (label)"})})]}):null,e[52]=d,e[53]=u,e[54]=i.demand,e[55]=z):z=e[55];let V;return e[56]!==q||e[57]!==F||e[58]!==z||e[59]!==h?(V=S.jsxs("div",{className:h,children:[q,F,z]}),e[56]=q,e[57]=F,e[58]=z,e[59]=h,e[60]=V):V=e[60],V};function OSe(n){return n.fn.max("d.priority").as("priority")}function LSe(n){return n.fn.min("d.priority").as("priority")}const DSe=n=>{const e=Bt.c(25);let t,r,i,s;e[0]!==n?({userId:s,building:t,requirement:i,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o={from:"/$locale/apps/derivean/map/$mapId"},e[5]=o):o=e[5];const{locale:a,mapId:l}=nr(o);let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx(he,{label:"Construction requirements (label)"}),e[6]=u):u=e[6];let c;e[7]!==t.id||e[8]!==a||e[9]!==l?(c={locale:a,mapId:l,buildingId:t.id},e[7]=t.id,e[8]=a,e[9]=l,e[10]=c):c=e[10];let d;e[11]!==t.id?(d={zoomToId:t.id},e[11]=t.id,e[12]=d):d=e[12];let h;e[13]!==t.name||e[14]!==c||e[15]!==d?(h=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:c,search:d,children:t.name}),e[13]=t.name,e[14]=c,e[15]=d,e[16]=h):h=e[16];let p;e[17]!==l||e[18]!==i||e[19]!==s?(p=i.length>0?i.map(x=>S.jsx(kSe,{mapId:l,userId:s,requirement:x},x.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:S.jsx(he,{label:"There are no construction requirements (label)"})}),e[17]=l,e[18]=i,e[19]=s,e[20]=p):p=e[20];let g;return e[21]!==r||e[22]!==h||e[23]!==p?(g=S.jsx(dl,{icon:wk,textTitle:u,textSubTitle:h,...r,children:p}),e[21]=r,e[22]=h,e[23]=p,e[24]=g):g=e[24],g},DH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/view")({async loader({context:{queryClient:n,kysely:e,session:t},params:{mapId:r,buildingId:i}}){return{user:await t(),requirement:await n.ensureQueryData({queryKey:["GameMap",r,"building",i,"construction","requirement"],async queryFn(){return e.transaction().execute(async o=>Vo({select:o.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",a=>a.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",i)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",a=>a.selectFrom("Transport as t").select(l=>l.fn.count("t.id").as("transport")).whereRef("t.targetId","=","bg.id").whereRef("t.resourceId","=","br.resourceId").as("transport"),a=>a.selectFrom("Supply as s").innerJoin("Building as b","b.id","s.buildingId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").select(l=>ph.jsonObject({id:l.ref("s.id"),buildingId:l.ref("s.buildingId"),name:l.ref("bp.name")}).as("supply")).whereRef("s.resourceId","=","br.resourceId").where("s.buildingId","in",a.selectFrom("Building_To_Building as btb").select("btb.linkId").where("btb.buildingId","=",i)).as("supply"),a=>a.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",o.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).whereRef("i.resourceId","=","br.resourceId").where("i.type","=","construction").limit(1).as("available"),a=>a.selectFrom("Demand as d").select(l=>ph.jsonObject({id:l.ref("d.id"),priority:l.ref("d.priority")}).as("demand")).whereRef("d.resourceId","=","br.resourceId").where("d.buildingId","=",i).as("demand")]).orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),amount:ne.number().nonnegative(),transport:ne.number().nonnegative(),available:ne.number().nonnegative().nullish(),supply:dD(ne.object({id:ne.string().min(1),buildingId:ne.string().min(1),name:ne.string().min(1)})).nullish(),demand:dD(ne.object({id:ne.string().min(1),priority:ne.number()})).nullish(),passive:fc()})}))}})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{user:e,requirement:t}=DH.useLoaderData();return n.constructionId?S.jsx(DSe,{userId:e.id,building:n,requirement:t}):S.jsx(PSe,{building:n})}}),FSe=n=>{const e=Bt.c(20),{transport:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={from:"/$locale/apps/derivean/map/$mapId"},e[0]=r):r=e[0];const{mapId:i,locale:s}=nr(r);let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=fr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),e[1]=o):o=e[1];let a;e[2]!==t.resource?(a=S.jsx("div",{className:"font-bold",children:t.resource}),e[2]=t.resource,e[3]=a):a=e[3];let l;e[4]!==s||e[5]!==i||e[6]!==t.sourceId?(l={locale:s,mapId:i,buildingId:t.sourceId},e[4]=s,e[5]=i,e[6]=t.sourceId,e[7]=l):l=e[7];let u;e[8]!==t.sourceId?(u={zoomToId:t.sourceId},e[8]=t.sourceId,e[9]=u):u=e[9];let c;e[10]!==l||e[11]!==u||e[12]!==t.source?(c=S.jsx(In,{icon:ql,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:l,search:u,children:t.source}),e[10]=l,e[11]=u,e[12]=t.source,e[13]=c):c=e[13];let d;e[14]!==t.amount?(d=S.jsxs(ia,{children:["x",t.amount]}),e[14]=t.amount,e[15]=d):d=e[15];let h;return e[16]!==a||e[17]!==c||e[18]!==d?(h=S.jsxs("div",{className:o,children:[a,c,d]}),e[16]=a,e[17]=c,e[18]=d,e[19]=h):h=e[19],h},qSe=n=>{const e=Bt.c(29);let t,r,i;e[0]!==n?({building:t,transport:i,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s={from:"/$locale/apps/derivean/map/$mapId"},e[4]=s):s=e[4];const{mapId:o,locale:a}=nr(s);let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=S.jsx(he,{label:"Transport list (label)"}),e[5]=l):l=e[5];let u;e[6]!==t.id||e[7]!==a||e[8]!==o?(u=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:a,mapId:o,buildingId:t.id}}),e[6]=t.id,e[7]=a,e[8]=o,e[9]=u):u=e[9];let c;e[10]!==t.id||e[11]!==a||e[12]!==o?(c={locale:a,mapId:o,buildingId:t.id},e[10]=t.id,e[11]=a,e[12]=o,e[13]=c):c=e[13];let d;e[14]!==t.id?(d={zoomToId:t.id},e[14]=t.id,e[15]=d):d=e[15];let h;e[16]!==t.name||e[17]!==c||e[18]!==d?(h=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/transport",params:c,search:d,children:t.name}),e[16]=t.name,e[17]=c,e[18]=d,e[19]=h):h=e[19];let p;e[20]!==u||e[21]!==h?(p=S.jsxs(S.Fragment,{children:[u,h]}),e[20]=u,e[21]=h,e[22]=p):p=e[22];let g;e[23]!==i?(g=i.length>0?i.map(jSe):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:S.jsx(he,{label:"There is nothing on the way to this building. (label)"})}),e[23]=i,e[24]=g):g=e[24];let x;return e[25]!==r||e[26]!==p||e[27]!==g?(x=S.jsx(dl,{icon:LH,textTitle:l,textSubTitle:p,...r,children:g}),e[25]=r,e[26]=p,e[27]=g,e[28]=x):x=e[28],x};function jSe(n){return S.jsx(FSe,{transport:n},n.id)}const FH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/transport")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r}}){return{transport:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"transport","list"],queryFn:async()=>e.transaction().execute(async i=>Vo({select:i.selectFrom("Transport as t").innerJoin("Building as source","source.id","t.sourceId").innerJoin("Blueprint as bl","bl.id","source.blueprintId").innerJoin("Resource as r","r.id","t.resourceId").select(["t.id","r.name as resource","source.id as sourceId","bl.name as source","t.amount"]).where("t.targetId","=",r).orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),resource:ne.string().min(1),source:ne.string().min(1),sourceId:ne.string().min(1),amount:ne.number()})}))})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{transport:e}=FH.useLoaderData();return S.jsx(qSe,{building:n,transport:e})}}),BSe=n=>{const e=Bt.c(16),{supply:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=[["GameMap"]],e[0]=r):r=e[0];const i=ji(r);let s;e[1]!==i?(s={async mutationFn(p){const{supplyId:g}=p;return An.transaction().execute(async x=>x.deleteFrom("Supply").where("id","=",g).execute())},async onSuccess(){await i()}},e[1]=i,e[2]=s):s=e[2];const o=or(s);let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=fr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),e[3]=a):a=e[3];let l;e[4]!==t.name?(l=S.jsx("div",{className:"flex flex-row gap-2 items-center",children:t.name}),e[4]=t.name,e[5]=l):l=e[5];let u;e[6]!==o||e[7]!==t.id?(u=()=>{o.mutate({supplyId:t.id})},e[6]=o,e[7]=t.id,e[8]=u):u=e[8];let c;e[9]===Symbol.for("react.memo_cache_sentinel")?(c={variant:"danger"},e[9]=c):c=e[9];let d;e[10]!==o.isPending||e[11]!==u?(d=S.jsx(Br,{iconEnabled:js,loading:o.isPending,onClick:u,variant:c}),e[10]=o.isPending,e[11]=u,e[12]=d):d=e[12];let h;return e[13]!==l||e[14]!==d?(h=S.jsxs("div",{className:a,children:[l,d]}),e[13]=l,e[14]=d,e[15]=h):h=e[15],h},USe=n=>{const e=Bt.c(29);let t,r,i;e[0]!==n?({building:t,supply:i,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s={from:"/$locale/apps/derivean/map/$mapId"},e[4]=s):s=e[4];const{mapId:o,locale:a}=nr(s);let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=S.jsx(he,{label:"Supply of (label)"}),e[5]=l):l=e[5];let u;e[6]!==t.id||e[7]!==a||e[8]!==o?(u=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:a,mapId:o,buildingId:t.id}}),e[6]=t.id,e[7]=a,e[8]=o,e[9]=u):u=e[9];let c;e[10]!==t.id||e[11]!==a||e[12]!==o?(c={locale:a,mapId:o,buildingId:t.id},e[10]=t.id,e[11]=a,e[12]=o,e[13]=c):c=e[13];let d;e[14]!==t.id?(d={zoomToId:t.id},e[14]=t.id,e[15]=d):d=e[15];let h;e[16]!==t.name||e[17]!==c||e[18]!==d?(h=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/supply",params:c,search:d,children:t.name}),e[16]=t.name,e[17]=c,e[18]=d,e[19]=h):h=e[19];let p;e[20]!==u||e[21]!==h?(p=S.jsxs(S.Fragment,{children:[u,h]}),e[20]=u,e[21]=h,e[22]=p):p=e[22];let g;e[23]!==i?(g=i.length>0?i.map(zSe):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"This building does not supply anything. (label)"})}),e[23]=i,e[24]=g):g=e[24];let x;return e[25]!==r||e[26]!==p||e[27]!==g?(x=S.jsx(dl,{icon:b2,textTitle:l,textSubTitle:p,...r,children:g}),e[25]=r,e[26]=p,e[27]=g,e[28]=x):x=e[28],x};function zSe(n){return S.jsx(BSe,{supply:n},n.id)}const qH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/supply")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r}}){return{supply:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"supply","list"],queryFn:async()=>e.transaction().execute(async i=>Vo({select:i.selectFrom("Supply as s").innerJoin("Resource as r","r.id","s.resourceId").select(["s.id","r.name"]).where("s.buildingId","=",r).orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1)})}))})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{supply:e}=qH.useLoaderData();return S.jsx(USe,{building:n,supply:e})}}),VSe=n=>{const e=Bt.c(25),{building:t,link:r}=n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale/apps/derivean/map/$mapId"},e[0]=i):i=e[0];const{mapId:s,locale:o}=nr(i);let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=fr(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100"]),e[1]=a):a=e[1];let l;e[2]!==r.id||e[3]!==o||e[4]!==s?(l={locale:o,mapId:s,buildingId:r.id},e[2]=r.id,e[3]=o,e[4]=s,e[5]=l):l=e[5];let u;e[6]!==r.id?(u={zoomToId:r.id},e[6]=r.id,e[7]=u):u=e[7];let c;e[8]!==r.name||e[9]!==l||e[10]!==u?(c=S.jsx(In,{icon:ql,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:l,search:u,children:r.name}),e[8]=r.name,e[9]=l,e[10]=u,e[11]=c):c=e[11];let d;e[12]!==t.id||e[13]!==o||e[14]!==s?(d={locale:o,mapId:s,buildingId:t.id},e[12]=t.id,e[13]=o,e[14]=s,e[15]=d):d=e[15];let h;e[16]!==r.landId?(h={zoomToId:r.landId},e[16]=r.landId,e[17]=h):h=e[17];let p;e[18]!==r.land||e[19]!==d||e[20]!==h?(p=S.jsx(In,{icon:Ek,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:d,search:h,children:r.land}),e[18]=r.land,e[19]=d,e[20]=h,e[21]=p):p=e[21];let g;return e[22]!==c||e[23]!==p?(g=S.jsx("div",{className:a,children:S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[c,p]})}),e[22]=c,e[23]=p,e[24]=g):g=e[24],g},WSe=n=>{const e=Bt.c(30);let t,r,i;e[0]!==n?({building:t,link:r,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s={from:"/$locale/apps/derivean/map/$mapId"},e[4]=s):s=e[4];const{locale:o,mapId:a}=nr(s);let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=S.jsx(he,{label:"Building links (label)"}),e[5]=l):l=e[5];let u;e[6]!==t.id||e[7]!==o||e[8]!==a?(u=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:o,mapId:a,buildingId:t.id}}),e[6]=t.id,e[7]=o,e[8]=a,e[9]=u):u=e[9];let c;e[10]!==t.id||e[11]!==o||e[12]!==a?(c={locale:o,mapId:a,buildingId:t.id},e[10]=t.id,e[11]=o,e[12]=a,e[13]=c):c=e[13];let d;e[14]!==t.id?(d={zoomToId:t.id},e[14]=t.id,e[15]=d):d=e[15];let h;e[16]!==t.name||e[17]!==c||e[18]!==d?(h=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/link",params:c,search:d,children:t.name}),e[16]=t.name,e[17]=c,e[18]=d,e[19]=h):h=e[19];let p;e[20]!==u||e[21]!==h?(p=S.jsxs(S.Fragment,{children:[u,h]}),e[20]=u,e[21]=h,e[22]=p):p=e[22];let g;e[23]!==t||e[24]!==r?(g=r.length>0?r.map(b=>S.jsx(VSe,{building:t,link:b},b.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"No linked buildings. (label)"})}),e[23]=t,e[24]=r,e[25]=g):g=e[25];let x;return e[26]!==i||e[27]!==p||e[28]!==g?(x=S.jsx(dl,{icon:ql,textTitle:l,textSubTitle:p,...i,children:g}),e[26]=i,e[27]=p,e[28]=g,e[29]=x):x=e[29],x},jH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/link")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r}}){return{link:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"link"],async queryFn(){return e.transaction().execute(async i=>Vo({select:i.selectFrom("Building_To_Building as btb").innerJoin("Building as b","b.id","btb.linkId").innerJoin("Land as l","l.id","b.landId").innerJoin("Region as r","r.id","l.regionId").innerJoin("Blueprint as bp","bp.id","b.blueprintId").select(["btb.id","bp.name","b.landId","r.name as land"]).where("btb.buildingId","=",r).orderBy("bp.name"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),landId:ne.string().min(1),land:ne.string().min(1)})}))}})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{link:e}=jH.useLoaderData();return S.jsx(WSe,{link:e,building:n})}}),$Se=ne.object({buildingId:ne.string().min(1),resourceId:ne.string().min(1),mapId:ne.string().min(1),userId:ne.string().min(1),amount:ef()}),HSe=n=>{const e=Bt.c(90),{mapId:t,userId:r,inventory:i}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[["GameMap"]],e[0]=s):s=e[0];const o=ji(s);let a;e[1]!==o?(a={async mutationFn(L){const{buildingId:R,resourceId:P,supplyId:F,mapId:z,userId:V}=L;return An.transaction().execute(async W=>F?W.deleteFrom("Supply").where("id","=",F).execute():W.insertInto("Supply").values({id:Xr(),buildingId:R,resourceId:P,mapId:z,userId:V}).execute())},async onSuccess(){await o()}},e[1]=o,e[2]=a):a=e[2];const l=or(a);let u;e[3]!==o||e[4]!==i.limit?(u={async mutationFn(L){const{buildingId:R,resourceId:P,demandId:F,mapId:z,userId:V,amount:W}=L;return An.transaction().execute(async Q=>{if(F)return Q.deleteFrom("Demand").where("id","=",F).execute();const{sum:X}=await Q.selectFrom("Transport as t").select(GSe).where("t.resourceId","=",P).where("t.targetId","=",R).executeTakeFirstOrThrow(),re=W+(X||0);if(i.limit>0&&re<=0){ci.error(sl.text("Not enough space (inventory is full/all resources are already on the way) (toast)"));return}return Q.insertInto("Demand").values({id:Xr(),buildingId:R,resourceId:P,mapId:z,userId:V,amount:i.limit>0?re:1,priority:0,type:"storage"}).execute()})},async onSuccess(){await o()}},e[3]=o,e[4]=i.limit,e[5]=u):u=e[5];const c=or(u);let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=Eo($Se),e[6]=d):d=e[6];const h=i.limit>0?i.limit-i.amount:1;let p;e[7]!==i.buildingId||e[8]!==i.resourceId||e[9]!==t||e[10]!==h||e[11]!==r?(p={resolver:d,defaultValues:{mapId:t,userId:r,buildingId:i.buildingId,resourceId:i.resourceId,amount:h}},e[7]=i.buildingId,e[8]=i.resourceId,e[9]=t,e[10]=h,e[11]=r,e[12]=p):p=e[12];const g=So(p);let x,b,y,E,T,I;if(e[13]!==g||e[14]!==i.amount||e[15]!==i.buildingId||e[16]!==i.demandId||e[17]!==i.limit||e[18]!==i.name||e[19]!==i.resourceId||e[20]!==i.supplyId||e[21]!==t||e[22]!==c||e[23]!==l||e[24]!==r){const L=wo({isLoading:g.formState.isLoading,isSubmitting:g.formState.isSubmitting}).slots;e[31]!==i.amount||e[32]!==i.demandId||e[33]!==i.limit||e[34]!==i.supplyId?(b=fr(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",i.limit>0&&i.amount>=i.limit?["border-amber-400","bg-amber-50","hover:bg-amber-50","hover:border-amber-600"]:void 0,i.supplyId||i.demandId?["bg-purple-50","border-purple-400","hover:bg-purple-50","hover:border-purple-400"]:void 0]),e[31]=i.amount,e[32]=i.demandId,e[33]=i.limit,e[34]=i.supplyId,e[35]=b):b=e[35];let R;e[36]!==i.demandId||e[37]!==i.supplyId?(R=fr(["flex","flex-row","gap-2","items-center",i.supplyId||i.demandId?["text-purple-600"]:void 0]),e[36]=i.demandId,e[37]=i.supplyId,e[38]=R):R=e[38];let P;e[39]!==i.name?(P=S.jsx("div",{className:"font-bold",children:i.name}),e[39]=i.name,e[40]=P):P=e[40];let F;e[41]!==i.supplyId?(F=i.supplyId?S.jsx(br,{icon:b2}):null,e[41]=i.supplyId,e[42]=F):F=e[42];let z;e[43]!==i.demandId?(z=i.demandId?S.jsx(br,{icon:mm}):null,e[43]=i.demandId,e[44]=z):z=e[44];let V;e[45]!==R||e[46]!==P||e[47]!==F||e[48]!==z?(V=S.jsxs("div",{className:R,children:[P,F,z]}),e[45]=R,e[46]=P,e[47]=F,e[48]=z,e[49]=V):V=e[49];let W;e[50]!==i.amount?(W=$r({number:i.amount}),e[50]=i.amount,e[51]=W):W=e[51];let Q;e[52]!==i.limit?(Q=$r({number:i.limit}),e[52]=i.limit,e[53]=Q):Q=e[53],e[54]!==V||e[55]!==W||e[56]!==Q?(y=S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[V,W," /"," ",Q]}),e[54]=V,e[55]=W,e[56]=Q,e[57]=y):y=e[57],E="flex flex-row gap-2 items-center justify-between";const X=i.supplyId?js:b2;let re;e[58]!==i.buildingId||e[59]!==i.resourceId||e[60]!==i.supplyId||e[61]!==t||e[62]!==l||e[63]!==r?(re=()=>{l.mutate({mapId:t,userId:r,buildingId:i.buildingId,resourceId:i.resourceId,supplyId:i.supplyId})},e[58]=i.buildingId,e[59]=i.resourceId,e[60]=i.supplyId,e[61]=t,e[62]=l,e[63]=r,e[64]=re):re=e[64];let G;e[65]===Symbol.for("react.memo_cache_sentinel")?(G={variant:"subtle"},e[65]=G):G=e[65];let Y;e[66]!==i.supplyId?(Y=i.supplyId?S.jsx(he,{label:"Cancel supply (label)"}):S.jsx(he,{label:"Supply resource (label)"}),e[66]=i.supplyId,e[67]=Y):Y=e[67],e[68]!==X||e[69]!==re||e[70]!==Y||e[71]!==l.isPending?(T=S.jsx(Br,{iconEnabled:X,loading:l.isPending,onClick:re,variant:G,children:Y}),e[68]=X,e[69]=re,e[70]=Y,e[71]=l.isPending,e[72]=T):T=e[72];const te=`bg-${i.resourceId}`;let Z;e[73]!==te?(Z=fr(["border-2","border-purple-400","rounded-md","w-[64px]","h-[64px]","bg-contain",te]),e[73]=te,e[74]=Z):Z=e[74],e[75]!==Z?(I=S.jsx("div",{className:Z}),e[75]=Z,e[76]=I):I=e[76],x=i.demandId?S.jsx(Br,{iconEnabled:js,loading:c.isPending,onClick:()=>{c.mutate({mapId:t,userId:r,buildingId:i.buildingId,resourceId:i.resourceId,amount:0,demandId:i.demandId})},variant:{variant:"subtle"},children:S.jsx(he,{label:"Cancel demand (label)"})}):S.jsx(qm,{textTitle:S.jsx(he,{label:"Demand resource (title)"}),target:S.jsx(Br,{iconEnabled:mm,variant:{variant:"subtle"},children:S.jsx(he,{label:"Demand resource (label)"})}),css:{modal:["w-1/3"]},children:S.jsxs("form",{className:L.base(),onSubmit:da({form:g,mutation:c}),children:[S.jsx(po,{variant:{highlight:!0},error:g.formState.errors.root}),S.jsx(xr,{formState:g.formState,name:"amount",label:S.jsx(he,{label:"Demanded amount (label)"}),children:S.jsx("input",{type:"number",min:1,max:i.limit-i.amount,className:L.input(),...g.register("amount")})}),S.jsx(Br,{iconEnabled:mm,iconDisabled:Mk,type:"submit",children:S.jsx(he,{label:"Submit demand (submit)"})})]})}),e[13]=g,e[14]=i.amount,e[15]=i.buildingId,e[16]=i.demandId,e[17]=i.limit,e[18]=i.name,e[19]=i.resourceId,e[20]=i.supplyId,e[21]=t,e[22]=c,e[23]=l,e[24]=r,e[25]=x,e[26]=b,e[27]=y,e[28]=E,e[29]=T,e[30]=I}else x=e[25],b=e[26],y=e[27],E=e[28],T=e[29],I=e[30];let N;e[77]!==x||e[78]!==E||e[79]!==T||e[80]!==I?(N=S.jsxs("div",{className:E,children:[T,I,x]}),e[77]=x,e[78]=E,e[79]=T,e[80]=I,e[81]=N):N=e[81];let k;e[82]!==i.amount||e[83]!==i.limit?(k=i.limit>0?S.jsx(rT,{variant:{size:"md"},value:100*i.amount/i.limit,css:{progress:i.amount>=i.limit?["bg-amber-500"]:void 0}}):null,e[82]=i.amount,e[83]=i.limit,e[84]=k):k=e[84];let q;return e[85]!==b||e[86]!==y||e[87]!==N||e[88]!==k?(q=S.jsxs("div",{className:b,children:[y,N,k]}),e[85]=b,e[86]=y,e[87]=N,e[88]=k,e[89]=q):q=e[89],q};function GSe(n){return n.fn.sum("t.amount").as("sum")}const XSe=n=>{const e=Bt.c(34);let t,r,i,s,o;e[0]!==n?({building:t,userId:o,inventory:i,fulltextProps:r,...s}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s,e[5]=o):(t=e[1],r=e[2],i=e[3],s=e[4],o=e[5]);let a;e[6]===Symbol.for("react.memo_cache_sentinel")?(a={from:"/$locale/apps/derivean/map/$mapId"},e[6]=a):a=e[6];const{locale:l,mapId:u}=nr(a);let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=S.jsx(he,{label:"Inventory (label)"}),e[7]=c):c=e[7];let d;e[8]!==t.id||e[9]!==l||e[10]!==u?(d=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:l,mapId:u,buildingId:t.id}}),e[8]=t.id,e[9]=l,e[10]=u,e[11]=d):d=e[11];let h;e[12]!==t.id||e[13]!==l||e[14]!==u?(h={locale:l,mapId:u,buildingId:t.id},e[12]=t.id,e[13]=l,e[14]=u,e[15]=h):h=e[15];let p;e[16]!==t.name||e[17]!==h?(p=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory",params:h,children:t.name}),e[16]=t.name,e[17]=h,e[18]=p):p=e[18];let g;e[19]!==d||e[20]!==p?(g=S.jsxs(S.Fragment,{children:[d,p]}),e[19]=d,e[20]=p,e[21]=g):g=e[21];let x;e[22]!==r?(x=S.jsx(r6,{...r}),e[22]=r,e[23]=x):x=e[23];let b;e[24]===Symbol.for("react.memo_cache_sentinel")?(b=S.jsx("div",{children:S.jsx(he,{label:"Inventory - storage (label)",css:{base:["font-bold","text-slate-500"]}})}),e[24]=b):b=e[24];let y;e[25]!==i||e[26]!==u||e[27]!==o?(y=i.length>0?i.map(T=>S.jsx(HSe,{mapId:u,userId:o,inventory:T},T.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"No inventory storage. (label)"})}),e[25]=i,e[26]=u,e[27]=o,e[28]=y):y=e[28];let E;return e[29]!==s||e[30]!==g||e[31]!==x||e[32]!==y?(E=S.jsxs(dl,{icon:vh,textTitle:c,textSubTitle:g,...s,children:[x,b,y]}),e[29]=s,e[30]=g,e[31]=x,e[32]=y,e[33]=E):E=e[33],E},bS=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/inventory")({validateSearch:rs(ne.object({fulltext:ne.string().optional()})),loaderDeps({search:{fulltext:n}}){return{fulltext:n}},async loader({context:{queryClient:n,kysely:e,session:t},deps:{fulltext:r},params:{mapId:i,buildingId:s}}){return{user:await t(),inventory:await n.ensureQueryData({queryKey:["GameMap",i,"building",s,"inventory","storage",{fulltext:r}],async queryFn(){return e.transaction().execute(async a=>Vo({select:a.selectFrom("Inventory as i").innerJoin("Building_Inventory as bi",l=>l.on("bi.buildingId","=",s).onRef("bi.inventoryId","=","i.id")).innerJoin("Resource as r","r.id","i.resourceId").leftJoin("Supply as s",l=>l.onRef("s.resourceId","=","i.resourceId").on("s.buildingId","=",s)).leftJoin("Demand as d",l=>l.onRef("d.resourceId","=","i.resourceId").on("d.buildingId","=",s)).select(["i.id","i.amount","i.limit","r.name","bi.buildingId","i.resourceId","s.id as supplyId","d.id as demandId"]).where("i.type","in",["storage"]).orderBy("r.name"),query({select:l,where:u}){let c=l;if(u?.fulltext){const d=`%${u.fulltext}%`.toLowerCase();c=c.where(h=>h.or([h("r.name","like",d)]))}return c},output:ne.object({id:ne.string().min(1),buildingId:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),limit:ne.number().nonnegative(),name:ne.string().min(1),supplyId:ne.string().nullish(),demandId:ne.string().nullish()}),filter:{fulltext:r}}))}})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{fulltext:e}=bS.useSearch(),t=bS.useNavigate(),{user:r,inventory:i}=bS.useLoaderData();return S.jsx(XSe,{building:n,userId:r.id,inventory:i,fulltextProps:{value:e,onFulltext(s){t({search:{fulltext:s}})}}})}}),KSe=n=>{const e=Bt.c(69),{mapId:t,userId:r,demand:i}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[["GameMap"]],e[0]=s):s=e[0];const o=ji(s);let a;e[1]!==o?(a={async mutationFn(ce){const{demandId:ye}=ce;return An.transaction().execute(async be=>be.deleteFrom("Demand").where("id","=",ye).execute())},async onSuccess(){await o()}},e[1]=o,e[2]=a):a=e[2];const l=or(a);let u;e[3]!==o||e[4]!==t||e[5]!==r?(u={async mutationFn(ce){const{demandId:ye}=ce;return An.transaction().execute(async be=>{const{priority:Ee}=await be.selectFrom("Demand as d").select(QSe).where("d.mapId","=",t).where("d.userId","=",r).where("d.id","!=",ye).executeTakeFirstOrThrow();return be.updateTable("Demand").set({priority:Ee+1}).where("id","=",ye).execute()})},async onSuccess(){await o()}},e[3]=o,e[4]=t,e[5]=r,e[6]=u):u=e[6];const c=or(u);let d;e[7]!==o||e[8]!==t||e[9]!==r?(d={async mutationFn(ce){const{demandId:ye}=ce;return An.transaction().execute(async be=>{const{priority:Ee}=await be.selectFrom("Demand as d").select(YSe).where("d.mapId","=",t).where("d.userId","=",r).where("d.id","!=",ye).executeTakeFirstOrThrow();return be.updateTable("Demand").set({priority:Ee-1}).where("id","=",ye).execute()})},async onSuccess(){await o()}},e[7]=o,e[8]=t,e[9]=r,e[10]=d):d=e[10];const h=or(d);let p;e[11]!==i.transport?(p=fr(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200",i.transport?["text-green-600","bg-green-50","border-green-400"]:void 0]),e[11]=i.transport,e[12]=p):p=e[12];let g;e[13]!==i.transport?(g=(i.transport||0)>0?S.jsx(br,{icon:mm}):S.jsx(br,{icon:Mk}),e[13]=i.transport,e[14]=g):g=e[14];let x;e[15]!==i.name?(x=S.jsx("div",{className:"font-bold",children:i.name}),e[15]=i.name,e[16]=x):x=e[16];let b;e[17]!==g||e[18]!==x?(b=S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[g,x]}),e[17]=g,e[18]=x,e[19]=b):b=e[19];let y;e[20]!==i.transport?(y=i.transport?["bg-green-50","border-green-400","hover:bg-green-50","hover:border-green-400"]:void 0,e[20]=i.transport,e[21]=y):y=e[21];let E;e[22]!==y?(E={base:y},e[22]=y,e[23]=E):E=e[23];let T;e[24]!==i.amount?(T=$r({number:i.amount}),e[24]=i.amount,e[25]=T):T=e[25];let I;e[26]!==E||e[27]!==T?(I=S.jsxs(ia,{css:E,children:["x",T]}),e[26]=E,e[27]=T,e[28]=I):I=e[28];let N;e[29]!==l||e[30]!==i.id?(N=()=>{l.mutate({demandId:i.id})},e[29]=l,e[30]=i.id,e[31]=N):N=e[31];let k;e[32]===Symbol.for("react.memo_cache_sentinel")?(k={variant:"danger"},e[32]=k):k=e[32];let q;e[33]!==l.isPending||e[34]!==N?(q=S.jsx(Br,{iconEnabled:js,loading:l.isPending,onClick:N,variant:k}),e[33]=l.isPending,e[34]=N,e[35]=q):q=e[35];let L;e[36]!==I||e[37]!==q?(L=S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[I,q]}),e[36]=I,e[37]=q,e[38]=L):L=e[38];let R;e[39]!==L||e[40]!==b?(R=S.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[b,L]}),e[39]=L,e[40]=b,e[41]=R):R=e[41];let P;e[42]===Symbol.for("react.memo_cache_sentinel")?(P={variant:"subtle"},e[42]=P):P=e[42];const F=c.isPending||h.isPending;let z;e[43]!==i.id||e[44]!==c?(z=()=>{c.mutate({demandId:i.id})},e[43]=i.id,e[44]=c,e[45]=z):z=e[45];let V;e[46]===Symbol.for("react.memo_cache_sentinel")?(V=S.jsx(he,{label:"Priority up (label)"}),e[46]=V):V=e[46];let W;e[47]!==F||e[48]!==z?(W=S.jsx(Br,{iconEnabled:s6,variant:P,loading:F,onClick:z,children:V}),e[47]=F,e[48]=z,e[49]=W):W=e[49];let Q;e[50]===Symbol.for("react.memo_cache_sentinel")?(Q={base:["bg-purple-50","border-purple-400","text-purple-600"]},e[50]=Q):Q=e[50];let X;e[51]!==i.priority?(X=S.jsx(ia,{css:Q,children:i.priority}),e[51]=i.priority,e[52]=X):X=e[52];let re;e[53]===Symbol.for("react.memo_cache_sentinel")?(re={variant:"subtle"},e[53]=re):re=e[53];const G=c.isPending||h.isPending;let Y;e[54]!==i.id||e[55]!==h?(Y=()=>{h.mutate({demandId:i.id})},e[54]=i.id,e[55]=h,e[56]=Y):Y=e[56];let te;e[57]===Symbol.for("react.memo_cache_sentinel")?(te=S.jsx(he,{label:"Priority down (label)"}),e[57]=te):te=e[57];let Z;e[58]!==G||e[59]!==Y?(Z=S.jsx(Br,{iconEnabled:i6,variant:re,loading:G,onClick:Y,children:te}),e[58]=G,e[59]=Y,e[60]=Z):Z=e[60];let fe;e[61]!==W||e[62]!==X||e[63]!==Z?(fe=S.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[W,X,Z]}),e[61]=W,e[62]=X,e[63]=Z,e[64]=fe):fe=e[64];let ge;return e[65]!==R||e[66]!==fe||e[67]!==p?(ge=S.jsxs("div",{className:p,children:[R,fe]}),e[65]=R,e[66]=fe,e[67]=p,e[68]=ge):ge=e[68],ge};function QSe(n){return n.fn.max("d.priority").as("priority")}function YSe(n){return n.fn.min("d.priority").as("priority")}const JSe=n=>{const e=Bt.c(32);let t,r,i,s;e[0]!==n?({userId:s,building:t,demand:r,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o={from:"/$locale/apps/derivean/map/$mapId"},e[5]=o):o=e[5];const{mapId:a,locale:l}=nr(o);let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx(he,{label:"Demand (label)"}),e[6]=u):u=e[6];let c;e[7]!==t.id||e[8]!==l||e[9]!==a?(c=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:l,mapId:a,buildingId:t.id}}),e[7]=t.id,e[8]=l,e[9]=a,e[10]=c):c=e[10];let d;e[11]!==t.id||e[12]!==l||e[13]!==a?(d={locale:l,mapId:a,buildingId:t.id},e[11]=t.id,e[12]=l,e[13]=a,e[14]=d):d=e[14];let h;e[15]!==t.id?(h={zoomToId:t.id},e[15]=t.id,e[16]=h):h=e[16];let p;e[17]!==t.name||e[18]!==d||e[19]!==h?(p=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/demand",params:d,search:h,children:t.name}),e[17]=t.name,e[18]=d,e[19]=h,e[20]=p):p=e[20];let g;e[21]!==c||e[22]!==p?(g=S.jsxs(S.Fragment,{children:[c,p]}),e[21]=c,e[22]=p,e[23]=g):g=e[23];let x;e[24]!==r||e[25]!==a||e[26]!==s?(x=r.length>0?r.map(y=>S.jsx(KSe,{mapId:a,userId:s,demand:y},y.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:S.jsx(he,{label:"This building does not demand anything. (label)"})}),e[24]=r,e[25]=a,e[26]=s,e[27]=x):x=e[27];let b;return e[28]!==i||e[29]!==g||e[30]!==x?(b=S.jsx(dl,{icon:mm,textTitle:u,textSubTitle:g,...i,children:x}),e[28]=i,e[29]=g,e[30]=x,e[31]=b):b=e[31],b},BH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/demand")({async loader({context:{queryClient:n,kysely:e,session:t},params:{mapId:r,buildingId:i}}){return{user:await t(),demand:await n.ensureQueryData({queryKey:["GameMap",r,"building",i,"demand","list"],queryFn:async()=>e.transaction().execute(async o=>Vo({select:o.selectFrom("Demand as d").innerJoin("Building_Inventory as bi","bi.buildingId","d.buildingId").innerJoin("Inventory as i",a=>a.onRef("i.id","=","bi.inventoryId").onRef("i.resourceId","=","d.resourceId")).innerJoin("Resource as r","r.id","d.resourceId").select(["d.id","r.name","d.amount","i.limit","d.priority","i.amount as available",a=>a.selectFrom("Transport as t").select(l=>l.fn.sum("t.amount").as("transport")).whereRef("t.targetId","=","d.buildingId").whereRef("t.resourceId","=","d.resourceId").as("transport")]).where("d.buildingId","=",i).where("i.type","=","storage").where("d.type","=","storage").orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),amount:ne.number(),available:ne.number(),priority:ne.number(),limit:ne.number(),transport:ne.number().nullish()})}))})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{user:e,demand:t}=BH.useLoaderData();return S.jsx(JSe,{userId:e.id,building:n,demand:t})}}),UH=n=>{const e=Bt.c(14),{requirement:t}=n,r=(t.available||0)>=t.amount;let i;e[0]!==r||e[1]!==t.available||e[2]!==t.passive?(i=fr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0,t.available===void 0||r?void 0:["border-red-500","bg-red-50","hover:bg-red-50","hover:border-red-600"]]),e[0]=r,e[1]=t.available,e[2]=t.passive,e[3]=i):i=e[3];let s;e[4]!==t.name?(s=S.jsx("div",{className:"font-bold",children:t.name}),e[4]=t.name,e[5]=s):s=e[5];let o;e[6]!==r||e[7]!==t.amount||e[8]!==t.available?(o=t.available===void 0?S.jsxs(ia,{children:["x",$r({number:t.amount})]}):S.jsxs(ia,{css:{base:r?["bg-green-200","border-green-500"]:["bg-red-200","border-red-500"]},children:[S.jsx("div",{className:"font-bold",children:$r({number:t.available})}),S.jsx("div",{children:"/"}),S.jsx("div",{className:"font-light",children:$r({number:t.amount})})]}),e[6]=r,e[7]=t.amount,e[8]=t.available,e[9]=o):o=e[9];let a;return e[10]!==i||e[11]!==s||e[12]!==o?(a=S.jsxs("div",{className:i,children:[s,o]}),e[10]=i,e[11]=s,e[12]=o,e[13]=a):a=e[13],a},ZSe=n=>{const e=Bt.c(17);let t,r,i;e[0]!==n?({blueprint:t,requirement:i,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s=S.jsx(he,{label:"Building requirements (label)"}),e[4]=s):s=e[4];const o=t.name;let a;e[5]!==i?(a=i.length>0?i.map(eEe):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:S.jsx(he,{label:"There are no requirements. (label)"})}),e[5]=i,e[6]=a):a=e[6];let l;e[7]===Symbol.for("react.memo_cache_sentinel")?(l=S.jsx("div",{className:"border-b border-slate-300"}),e[7]=l):l=e[7];const u=`bg-${t.id}`;let c;e[8]!==u?(c=fr(["w-full","h-96","bg-contain","p-2",u]),e[8]=u,e[9]=c):c=e[9];let d;e[10]!==c?(d=S.jsx("div",{className:c}),e[10]=c,e[11]=d):d=e[11];let h;return e[12]!==t.name||e[13]!==r||e[14]!==a||e[15]!==d?(h=S.jsxs(dl,{icon:ns,textTitle:s,textSubTitle:o,...r,children:[a,l,d]}),e[12]=t.name,e[13]=r,e[14]=a,e[15]=d,e[16]=h):h=e[16],h};function eEe(n){return S.jsx(UH,{requirement:n},n.id)}const zH=Ln("/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId/requirements")({async loader({context:{queryClient:n,kysely:e},params:{blueprintId:t}}){return{requirement:await n.ensureQueryData({queryKey:["GameMap","blueprint",t,"requirements"],async queryFn(){return e.transaction().execute(async r=>Vo({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",t),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),amount:ne.number().nonnegative(),passive:fc()})}))}})}},component(){const{blueprint:n}=eo({from:"/$locale/apps/derivean/map/$mapId/blueprint/$blueprintId"}),{requirement:e}=zH.useLoaderData();return S.jsx(ZSe,{blueprint:n,requirement:e})}}),JB=Is(),tEe=[JB({name:"name",header(){return S.jsx(he,{label:"Requirement name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceID",n.resourceId)}},size:22}),JB({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:10})],nEe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:tEe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},wS=Ln("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:rs(Es(Mb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=wS.useLoaderData(),{filter:t,cursor:r}=wS.useSearch(),i=wS.useNavigate();return S.jsx(S.Fragment,{children:S.jsx(nEe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of production resource requirements (label)"}),...bs(i)}})})}}),xC=Is(),rEe=[xC({name:"name",header(){return S.jsx(he,{label:"Requirement name (label)"})},render({value:n}){return n},filter:{path:"resourceId",onFilter({data:n,filter:e}){e.shallow("resourceID",n.resourceId)}},size:12}),xC({name:"amount",header(){return S.jsx(he,{label:"Amount (label)"})},render({value:n}){return $r({number:n})},size:10}),xC({name:"passive",header(){return S.jsx(he,{label:"Passive requirement (label)"})},render({value:n}){return S.jsx(J2,{value:n})},size:10})],iEe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:rEe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},SS=Ln("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:rs(Es(Tb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpr.id","=",a.id)),a?.idIn&&(l=l.where("bpr.id","in",a.idIn)),a?.resourceId&&(l=l.where("bpr.resourceId","=",a.resourceId)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),passive:fc()}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=SS.useLoaderData(),{filter:t,cursor:r}=SS.useSearch(),i=SS.useNavigate();return S.jsx(S.Fragment,{children:S.jsx(iEe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of production requirements (label)"}),...bs(i)}})})}}),sEe=Is(),oEe=[sEe({name:"name",header(){return S.jsx(he,{label:"Required building (label)"})},render({data:n,value:e}){const{locale:t}=nr({from:"/$locale"});return S.jsx(In,{icon:fi,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:t,id:n.blueprintId},children:e})},size:22})],aEe=n=>{const e=Bt.c(8);let t,r;e[0]!==n?({table:r,...t}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let i;e[3]!==r?(i={...r,columns:oEe},e[3]=r,e[4]=i):i=e[4];const s=Ms(i);let o;return e[5]!==t||e[6]!==s?(o=S.jsx(Ts,{table:s,...t}),e[5]=t,e[6]=s,e[7]=o):o=e[7],o},ES=Ln("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:rs(Es(Eb)),loaderDeps({search:{filter:n,cursor:e,sort:t}}){return{filter:n,cursor:e,sort:t}},async loader({context:{queryClient:n,kysely:e},deps:{filter:t,cursor:r},params:{id:i}}){return n.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:t,cursor:r}],async queryFn(){return e.transaction().execute(async s=>zi({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:a}){let l=o;return a?.id&&(l=l.where("bpd.id","=",a.id)),a?.idIn&&(l=l.where("bpd.id","in",a.idIn)),l},output:ne.object({id:ne.string().min(1),name:ne.string().min(1),blueprintId:ne.string().min(1)}),filter:t,cursor:r}))}})},component(){const{data:n,count:e}=ES.useLoaderData(),{filter:t,cursor:r}=ES.useSearch(),i=ES.useNavigate(),{tva:s}=Ui({from:"__root__"}),o=s().slots;return S.jsx("div",{className:o.base(),children:S.jsx(aEe,{table:{data:n,filter:{value:t,set:ws(i)}},fulltext:{value:t?.fulltext,set:Ss(i)},cursor:{count:e,cursor:r,textTotal:S.jsx(he,{label:"Number of dependencies (label)"}),...bs(i)}})})}}),lEe=n=>{const e=Bt.c(30),{queue:t,inventory:r}=n;let i;if(e[0]!==r||e[1]!==t.resourceId){let E;e[3]!==t.resourceId?(E=T=>T.resourceId===t.resourceId,e[3]=t.resourceId,e[4]=E):E=e[4],i=r.find(E),e[0]=r,e[1]=t.resourceId,e[2]=i}else i=e[2];const s=i,o=s&&s.amount+t.amount>s.limit;let a;e[5]!==o?(a=fr(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200","hover:border-slate-300",o?["border-red-400","hover:border-red-600"]:void 0]),e[5]=o,e[6]=a):a=e[6];let l;e[7]!==t.name?(l=S.jsx("div",{className:"font-bold",children:t.name}),e[7]=t.name,e[8]=l):l=e[8];let u;e[9]!==t.amount?(u=$r({number:t.amount}),e[9]=t.amount,e[10]=u):u=e[10];let c;e[11]!==u?(c=S.jsx("div",{className:"flex flex-row gap-2 items-center",children:S.jsxs(ia,{children:["x",u]})}),e[11]=u,e[12]=c):c=e[12];let d;e[13]!==t.cycles?(d=S.jsx(Tk,{cycles:t.cycles}),e[13]=t.cycles,e[14]=d):d=e[14];let h;e[15]!==l||e[16]!==c||e[17]!==d?(h=S.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[l,c,d]}),e[15]=l,e[16]=c,e[17]=d,e[18]=h):h=e[18];let p;e[19]!==o?(p=o?["bg-red-500"]:void 0,e[19]=o,e[20]=p):p=e[20];let g;e[21]!==p?(g={progress:p},e[21]=p,e[22]=g):g=e[22];const x=100*t.cycle/t.cycles;let b;e[23]!==x||e[24]!==g?(b=S.jsx(rT,{css:g,value:x}),e[23]=x,e[24]=g,e[25]=b):b=e[25];let y;return e[26]!==b||e[27]!==a||e[28]!==h?(y=S.jsxs("div",{className:a,children:[h,b]}),e[26]=b,e[27]=a,e[28]=h,e[29]=y):y=e[29],y},cEe=n=>{const e=Bt.c(34);let t,r,i,s;e[0]!==n?({building:t,queue:s,inventory:r,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o={from:"/$locale/apps/derivean/map/$mapId"},e[5]=o):o=e[5];const{mapId:a,locale:l}=nr(o);let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx(he,{label:"Production queue (label)"}),e[6]=u):u=e[6];let c;e[7]!==t.id||e[8]!==l||e[9]!==a?(c=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:l,mapId:a,buildingId:t.id}}),e[7]=t.id,e[8]=l,e[9]=a,e[10]=c):c=e[10];let d;e[11]!==t.id||e[12]!==l||e[13]!==a?(d={locale:l,mapId:a,buildingId:t.id},e[11]=t.id,e[12]=l,e[13]=a,e[14]=d):d=e[14];let h;e[15]!==t.id?(h={zoomToId:t.id},e[15]=t.id,e[16]=h):h=e[16];let p;e[17]!==t.name||e[18]!==d||e[19]!==h?(p=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:d,search:h,children:t.name}),e[17]=t.name,e[18]=d,e[19]=h,e[20]=p):p=e[20];let g;e[21]!==c||e[22]!==p?(g=S.jsxs(S.Fragment,{children:[c,p]}),e[21]=c,e[22]=p,e[23]=g):g=e[23];let x;e[24]!==t.id||e[25]!==r||e[26]!==l||e[27]!==a||e[28]!==s?(x=s.length>0?s.map(y=>S.jsx(lEe,{queue:y,inventory:r},y.id)):S.jsxs("div",{className:fr(["flex","flex-col","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[S.jsx(he,{label:"Production queue is empty. (label)"}),S.jsx(In,{icon:iN,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:l,mapId:a,buildingId:t.id},children:S.jsx(he,{label:"Plan queue (label)"})})]}),e[24]=t.id,e[25]=r,e[26]=l,e[27]=a,e[28]=s,e[29]=x):x=e[29];let b;return e[30]!==i||e[31]!==g||e[32]!==x?(b=S.jsx(dl,{icon:iN,textTitle:u,textSubTitle:g,...i,children:x}),e[30]=i,e[31]=g,e[32]=x,e[33]=b):b=e[33],b},VH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/queue")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r}}){return{queue:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"production","queue"],async queryFn(){return e.transaction().execute(async i=>Vo({select:i.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",r),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),cycle:ne.number().int().nonnegative(),cycles:ne.number().int().nonnegative()})}))}}),inventory:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"inventory","list"],async queryFn(){return e.transaction().execute(async i=>Vo({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).orderBy("r.name"),query({select:s,where:o}){let a=s;if(o?.fulltext){const l=`%${o.fulltext}%`.toLowerCase();a=a.where(u=>u.or([u("r.name","like",l)]))}return a},output:ne.object({id:ne.string().min(1),resourceId:ne.string().min(1),amount:ne.number().nonnegative(),limit:ne.number().nonnegative(),name:ne.string().min(1)})}))}})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{queue:e,inventory:t}=VH.useLoaderData();return S.jsx(cEe,{building:n,queue:e,inventory:t})}}),ZB="icon-[tabler--basket]",uEe="icon-[oui--refresh]",dEe=n=>{const e=Bt.c(47),{building:t,production:r}=n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={from:"/$locale/apps/derivean/map/$mapId"},e[0]=i):i=e[0];const{mapId:s,locale:o}=nr(i);let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=[["GameMap"]],e[1]=a):a=e[1];const l=ji(a);let u;e[2]!==l?(u={async mutationFn(z){const{blueprintProductionId:V,buildingId:W}=z;return An.transaction().execute(async Q=>Q.updateTable("Building").set({productionId:V}).where("id","=",W).execute())},async onSuccess(){await l()}},e[2]=l,e[3]=u):u=e[3];const c=or(u);let d;e[4]!==l?(d={async mutationFn(z){const{buildingId:V}=z;return An.transaction().execute(async W=>W.updateTable("Building").set({productionId:null}).where("id","=",V).execute())},async onSuccess(){await l()}},e[4]=l,e[5]=d):d=e[5];const h=or(d);let p;e[6]!==l?(p={async mutationFn(z){const{blueprintProductionId:V,buildingId:W}=z;return An.transaction().execute(async Q=>Q.updateTable("Building").set({recurringProductionId:V}).where("id","=",W).execute())},async onSuccess(){await l()}},e[6]=l,e[7]=p):p=e[7];const g=or(p);let x;e[8]!==l?(x={async mutationFn(z){const{buildingId:V}=z;return An.transaction().execute(async W=>W.updateTable("Building").set({recurringProductionId:null}).where("id","=",V).execute())},async onSuccess(){await l()}},e[8]=l,e[9]=x):x=e[9];const b=or(x);let y;e[10]!==r.withAvailableResources?(y=fr(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded-sm","border-slate-200",r.withAvailableResources?["bg-green-50","border-green-500"]:["bg-red-50","border-red-500"]]),e[10]=r.withAvailableResources,e[11]=y):y=e[11];let E;e[12]!==t.id||e[13]!==t.productionId||e[14]!==h||e[15]!==r.id||e[16]!==c?(E=t.productionId===r.id?S.jsx(Br,{iconEnabled:ZB,loading:h.isPending,onClick:()=>{h.mutate({buildingId:t.id})}}):S.jsx(Br,{iconEnabled:"icon-[solar--play-outline]",loading:c.isPending,onClick:()=>{c.mutate({blueprintProductionId:r.id,buildingId:t.id})}}),e[12]=t.id,e[13]=t.productionId,e[14]=h,e[15]=r.id,e[16]=c,e[17]=E):E=e[17];let T;e[18]!==t.id||e[19]!==t.recurringProductionId||e[20]!==b||e[21]!==r.id||e[22]!==g?(T=t.recurringProductionId===r.id?S.jsx(Br,{iconEnabled:ZB,loading:b.isPending,onClick:()=>{b.mutate({buildingId:t.id})}}):S.jsx(Br,{iconEnabled:uEe,loading:g.isPending,onClick:()=>{g.mutate({blueprintProductionId:r.id,buildingId:t.id})}}),e[18]=t.id,e[19]=t.recurringProductionId,e[20]=b,e[21]=r.id,e[22]=g,e[23]=T):T=e[23];let I;e[24]!==t.id||e[25]!==o||e[26]!==s||e[27]!==r.id?(I={locale:o,mapId:s,buildingId:t.id,productionId:r.id},e[24]=t.id,e[25]=o,e[26]=s,e[27]=r.id,e[28]=I):I=e[28];const N=r.name;let k;e[29]!==r.amount?(k=$r({number:r.amount}),e[29]=r.amount,e[30]=k):k=e[30];let q;e[31]!==k?(q=S.jsxs(ia,{children:["x",k]}),e[31]=k,e[32]=q):q=e[32];let L;e[33]!==r.name||e[34]!==I||e[35]!==q?(L=S.jsxs(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements",params:I,children:[N,q]}),e[33]=r.name,e[34]=I,e[35]=q,e[36]=L):L=e[36];let R;e[37]!==L||e[38]!==E||e[39]!==T?(R=S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[E,T,L]}),e[37]=L,e[38]=E,e[39]=T,e[40]=R):R=e[40];let P;e[41]!==r.cycles?(P=S.jsx(Tk,{cycles:r.cycles}),e[41]=r.cycles,e[42]=P):P=e[42];let F;return e[43]!==R||e[44]!==P||e[45]!==y?(F=S.jsxs("div",{className:y,children:[R,P]}),e[43]=R,e[44]=P,e[45]=y,e[46]=F):F=e[46],F},fEe=n=>{const e=Bt.c(30);let t,r,i;e[0]!==n?({building:t,production:r,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i):(t=e[1],r=e[2],i=e[3]);let s;e[4]===Symbol.for("react.memo_cache_sentinel")?(s={from:"/$locale/apps/derivean/map/$mapId"},e[4]=s):s=e[4];const{mapId:o,locale:a}=nr(s);let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=S.jsx(he,{label:"Building production (label)"}),e[5]=l):l=e[5];let u;e[6]!==t.id||e[7]!==a||e[8]!==o?(u=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/view",params:{locale:a,mapId:o,buildingId:t.id}}),e[6]=t.id,e[7]=a,e[8]=o,e[9]=u):u=e[9];let c;e[10]!==t.id||e[11]!==a||e[12]!==o?(c={locale:a,mapId:o,buildingId:t.id},e[10]=t.id,e[11]=a,e[12]=o,e[13]=c):c=e[13];let d;e[14]!==t.id?(d={zoomToId:t.id},e[14]=t.id,e[15]=d):d=e[15];let h;e[16]!==t.name||e[17]!==c||e[18]!==d?(h=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:c,search:d,children:t.name}),e[16]=t.name,e[17]=c,e[18]=d,e[19]=h):h=e[19];let p;e[20]!==u||e[21]!==h?(p=S.jsxs(S.Fragment,{children:[u,h]}),e[20]=u,e[21]=h,e[22]=p):p=e[22];let g;e[23]!==t||e[24]!==r?(g=r.length>0?r.map(b=>S.jsx(dEe,{building:t,production:b},b.id)):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:S.jsx(he,{label:"This building does not produce anything. (label)"})}),e[23]=t,e[24]=r,e[25]=g):g=e[25];let x;return e[26]!==i||e[27]!==p||e[28]!==g?(x=S.jsx(dl,{icon:cc,textTitle:l,textSubTitle:p,...i,children:g}),e[26]=i,e[27]=p,e[28]=g,e[29]=x):x=e[29],x},WH=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list")({async loader({context:{queryClient:n,kysely:e,session:t},params:{mapId:r,buildingId:i}}){const s=await t();return{production:await n.ensureQueryData({queryKey:["GameMap",r,"building",i,"production","list"],async queryFn(){return e.transaction().execute(async o=>Vo({select:o.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles",a=>a.case().when(a.not(a.exists(a.selectFrom("Blueprint_Production_Requirement as bpr").select(a.lit(1).as("one")).whereRef("bpr.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Inventory as i").select(l.lit(1).as("one")).where("i.id","in",l.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).where("i.type","in",["storage"]).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).then(a.lit(!0)).else(a.lit(!1)).end().as("withAvailableResources")]).where("bp.blueprintId","=",o.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",i)).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Dependency as bpd").select("bpd.blueprintProductionId").whereRef("bpd.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Building as b").select("b.blueprintId").where("b.userId","=",s.id).where("b.constructionId","is",null).whereRef("b.blueprintId","=","bpd.blueprintId"))))))).where(a=>a.not(a.exists(a.selectFrom("Blueprint_Production_Resource as bpr").select("bpr.blueprintProductionId").whereRef("bpr.blueprintProductionId","=","bp.id").where(l=>l.not(l.exists(l.selectFrom("Inventory as i").select("i.resourceId").where("i.id","in",l.selectFrom("Building_Inventory").select("inventoryId").where("buildingId","=",i)).whereRef("i.resourceId","=","bpr.resourceId").whereRef("i.amount",">=","bpr.amount"))))))).orderBy("r.name"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),amount:ne.number().nonnegative(),cycles:ne.number().int().nonnegative(),withAvailableResources:fc()})}))}})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=WH.useLoaderData();return S.jsx(fEe,{building:n,production:e})}}),hEe=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r,productionId:i}}){return{production:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"production",i,"fetch"],async queryFn(){return e.transaction().execute(async s=>tu({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","bp.amount","r.name"]).where("bp.id","=",i),output:ne.object({id:ne.string().min(1),amount:ne.number().nonnegative(),name:ne.string().min(1)})}))}})}}}),pEe=n=>{const e=Bt.c(33);let t,r,i,s;e[0]!==n?({building:t,production:r,requirement:s,...i}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=s):(t=e[1],r=e[2],i=e[3],s=e[4]);let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o={from:"/$locale/apps/derivean/map/$mapId"},e[5]=o):o=e[5];const{mapId:a,locale:l}=nr(o);let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx(he,{label:"Production requirements (label)"}),e[6]=u):u=e[6];let c;e[7]!==t.id||e[8]!==l||e[9]!==a?(c=S.jsx(In,{icon:Fl,to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:{locale:l,mapId:a,buildingId:t.id}}),e[7]=t.id,e[8]=l,e[9]=a,e[10]=c):c=e[10];let d;e[11]!==t.id||e[12]!==l||e[13]!==a?(d={locale:l,mapId:a,buildingId:t.id},e[11]=t.id,e[12]=l,e[13]=a,e[14]=d):d=e[14];let h;e[15]!==t.id?(h={zoomToId:t.id},e[15]=t.id,e[16]=h):h=e[16];let p;e[17]!==t.name||e[18]!==d||e[19]!==h?(p=S.jsx(In,{to:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/list",params:d,search:h,children:t.name}),e[17]=t.name,e[18]=d,e[19]=h,e[20]=p):p=e[20];let g;e[21]!==r.name?(g=S.jsx("div",{children:r.name}),e[21]=r.name,e[22]=g):g=e[22];let x;e[23]!==c||e[24]!==p||e[25]!==g?(x=S.jsxs(S.Fragment,{children:[c,p,g]}),e[23]=c,e[24]=p,e[25]=g,e[26]=x):x=e[26];let b;e[27]!==s?(b=s.length>0?s.map(mEe):S.jsx("div",{className:fr(["flex","items-center","justify-center","rounded-sm","border","border-green-400","p-4","bg-green-200","font-bold"]),children:S.jsx(he,{label:"There are no requirements. (label)"})}),e[27]=s,e[28]=b):b=e[28];let y;return e[29]!==i||e[30]!==x||e[31]!==b?(y=S.jsx(dl,{icon:ns,textTitle:u,textSubTitle:x,...i,children:b}),e[29]=i,e[30]=x,e[31]=b,e[32]=y):y=e[32],y};function mEe(n){return S.jsx(UH,{requirement:n},n.id)}const $H=Ln("/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId/requirements")({async loader({context:{queryClient:n,kysely:e},params:{mapId:t,buildingId:r,productionId:i}}){return{requirement:await n.ensureQueryData({queryKey:["GameMap",t,"building",r,"production",i,"requirement","list"],async queryFn(){return e.transaction().execute(async s=>Vo({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive",o=>o.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",s.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).whereRef("i.resourceId","=","bpr.resourceId").where("i.type","=","storage").orderBy("i.amount","desc").limit(1).as("available")]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),output:ne.object({id:ne.string().min(1),name:ne.string().min(1),amount:ne.number().nonnegative(),available:ne.number().nonnegative().nullish(),passive:fc()})}))}})}},component(){const{building:n}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId"}),{production:e}=eo({from:"/$locale/apps/derivean/map/$mapId/building/$buildingId/production/$productionId"}),{requirement:t}=$H.useLoaderData();return S.jsx(pEe,{building:n,production:e,requirement:t})}}),Ik=Kie.update({id:"/$locale",path:"/$locale",getParentRoute:()=>aP}),gEe=Jie.update({id:"/",path:"/",getParentRoute:()=>aP}),yEe=Zie.update({id:"/",path:"/",getParentRoute:()=>Ik}),Bh=tse.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>Ik}),zl=ise.update({id:"/root",path:"/root",getParentRoute:()=>Bh}),HH=sse.update({id:"/map",path:"/map",getParentRoute:()=>Bh}),Ib=ose.update({id:"/game",path:"/game",getParentRoute:()=>Bh}),vEe=dse.update({id:"/",path:"/",getParentRoute:()=>zl}),_Ee=K6.update({id:"/",path:"/",getParentRoute:()=>Ib}),xEe=LR.update({id:"/editor",path:"/editor",getParentRoute:()=>zl}),bEe=jhe.update({id:"/public/register",path:"/public/register",getParentRoute:()=>Bh}),wEe=Bhe.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>Bh}),SEe=$he.update({id:"/public/login",path:"/public/login",getParentRoute:()=>Bh}),Uh=pH.update({id:"/$mapId",path:"/$mapId",getParentRoute:()=>HH}),EEe=mH.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>Bh}),TEe=uS.update({id:"/user/list",path:"/user/list",getParentRoute:()=>zl}),Ak=gH.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>zl}),MEe=dS.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>zl}),IEe=fS.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>zl}),GH=xH.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>zl}),AEe=hS.update({id:"/region/list",path:"/region/list",getParentRoute:()=>zl}),XH=Wwe.update({id:"/region/$id",path:"/region/$id",getParentRoute:()=>zl}),CEe=pS.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>zl}),zh=TH.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>zl}),REe=Jwe.update({id:"/view",path:"/view",getParentRoute:()=>Uh}),NEe=mS.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>Ib}),Rv=MH.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>Ib}),PEe=i1e.update({id:"/view",path:"/view",getParentRoute:()=>Ak}),kEe=s1e.update({id:"/view",path:"/view",getParentRoute:()=>GH}),OEe=o1e.update({id:"/view",path:"/view",getParentRoute:()=>XH}),ZT=IH.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>zl}),LEe=AH.update({id:"/view",path:"/view",getParentRoute:()=>zh}),DEe=Y_.update({id:"/requirements",path:"/requirements",getParentRoute:()=>zh}),FEe=J_.update({id:"/production",path:"/production",getParentRoute:()=>zh}),qEe=Z_.update({id:"/inventory",path:"/inventory",getParentRoute:()=>zh}),jEe=CH.update({id:"/edit",path:"/edit",getParentRoute:()=>zh}),BEe=ex.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>zh}),UEe=tx.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>zh}),zEe=RH.update({id:"/land/list",path:"/land/list",getParentRoute:()=>Uh}),KH=W1e.update({id:"/land/$landId",path:"/land/$landId",getParentRoute:()=>Uh}),VEe=NH.update({id:"/building/list",path:"/building/list",getParentRoute:()=>Uh}),Xu=X1e.update({id:"/building/$buildingId",path:"/building/$buildingId",getParentRoute:()=>Uh}),QH=K1e.update({id:"/blueprint/$blueprintId",path:"/blueprint/$blueprintId",getParentRoute:()=>Uh}),e3=PH.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>Ib}),WEe=eSe.update({id:"/view",path:"/view",getParentRoute:()=>Rv}),$Ee=gS.update({id:"/requirements",path:"/requirements",getParentRoute:()=>Rv}),HEe=yS.update({id:"/production",path:"/production",getParentRoute:()=>Rv}),GEe=vS.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>Rv}),XEe=_S.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>Rv}),KEe=xS.update({id:"/building/list",path:"/building/list",getParentRoute:()=>Ak}),QEe=nx.update({id:"/resources",path:"/resources",getParentRoute:()=>ZT}),YEe=rx.update({id:"/requirements",path:"/requirements",getParentRoute:()=>ZT}),JEe=ix.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>ZT}),ZEe=ISe.update({id:"/road/$roadId/view",path:"/road/$roadId/view",getParentRoute:()=>Uh}),e2e=OH.update({id:"/construction",path:"/construction",getParentRoute:()=>KH}),t2e=DH.update({id:"/view",path:"/view",getParentRoute:()=>Xu}),n2e=FH.update({id:"/transport",path:"/transport",getParentRoute:()=>Xu}),r2e=qH.update({id:"/supply",path:"/supply",getParentRoute:()=>Xu}),i2e=jH.update({id:"/link",path:"/link",getParentRoute:()=>Xu}),s2e=bS.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Xu}),o2e=BH.update({id:"/demand",path:"/demand",getParentRoute:()=>Xu}),a2e=zH.update({id:"/requirements",path:"/requirements",getParentRoute:()=>QH}),l2e=wS.update({id:"/resources",path:"/resources",getParentRoute:()=>e3}),c2e=SS.update({id:"/requirements",path:"/requirements",getParentRoute:()=>e3}),u2e=ES.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>e3}),d2e=VH.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>Xu}),f2e=WH.update({id:"/production/list",path:"/production/list",getParentRoute:()=>Xu}),YH=hEe.update({id:"/production/$productionId",path:"/production/$productionId",getParentRoute:()=>Xu}),h2e=$H.update({id:"/requirements",path:"/requirements",getParentRoute:()=>YH}),p2e={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:XEe,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:GEe,LocaleAppsDeriveanGameBlueprintIdProductionRoute:HEe,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:$Ee,LocaleAppsDeriveanGameBlueprintIdViewRoute:WEe},m2e=Rv._addFileChildren(p2e),g2e={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:u2e,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:c2e,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:l2e},y2e=e3._addFileChildren(g2e),v2e={LocaleAppsDeriveanGameIndexRoute:_Ee,LocaleAppsDeriveanGameBlueprintIdRoute:m2e,LocaleAppsDeriveanGameBlueprintListRoute:NEe,LocaleAppsDeriveanGameBlueprintProductionIdRoute:y2e},_2e=Ib._addFileChildren(v2e),x2e={LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRequirementsRoute:a2e},b2e=QH._addFileChildren(x2e),w2e={LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRequirementsRoute:h2e},S2e=YH._addFileChildren(w2e),E2e={LocaleAppsDeriveanMapMapIdBuildingBuildingIdDemandRoute:o2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdInventoryRoute:s2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdLinkRoute:i2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdSupplyRoute:r2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdTransportRoute:n2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdViewRoute:t2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionProductionIdRoute:S2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionListRoute:f2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdProductionQueueRoute:d2e},T2e=Xu._addFileChildren(E2e),M2e={LocaleAppsDeriveanMapMapIdLandLandIdConstructionRoute:e2e},I2e=KH._addFileChildren(M2e),A2e={LocaleAppsDeriveanMapMapIdViewRoute:REe,LocaleAppsDeriveanMapMapIdBlueprintBlueprintIdRoute:b2e,LocaleAppsDeriveanMapMapIdBuildingBuildingIdRoute:T2e,LocaleAppsDeriveanMapMapIdBuildingListRoute:VEe,LocaleAppsDeriveanMapMapIdLandLandIdRoute:I2e,LocaleAppsDeriveanMapMapIdLandListRoute:zEe,LocaleAppsDeriveanMapMapIdRoadRoadIdViewRoute:ZEe},C2e=Uh._addFileChildren(A2e),R2e={LocaleAppsDeriveanMapMapIdRoute:C2e},N2e=HH._addFileChildren(R2e),P2e={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:UEe,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:BEe,LocaleAppsDeriveanRootBlueprintIdEditRoute:jEe,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:qEe,LocaleAppsDeriveanRootBlueprintIdProductionRoute:FEe,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:DEe,LocaleAppsDeriveanRootBlueprintIdViewRoute:LEe},k2e=zh._addFileChildren(P2e),O2e={LocaleAppsDeriveanRootRegionIdViewRoute:OEe},L2e=XH._addFileChildren(O2e),D2e={LocaleAppsDeriveanRootResourceIdViewRoute:kEe},F2e=GH._addFileChildren(D2e),q2e={LocaleAppsDeriveanRootUserIdViewRoute:PEe,LocaleAppsDeriveanRootUserIdBuildingListRoute:KEe},j2e=Ak._addFileChildren(q2e),B2e={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:JEe,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:YEe,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:QEe},U2e=ZT._addFileChildren(B2e),z2e={LocaleAppsDeriveanRootEditorRoute:xEe,LocaleAppsDeriveanRootIndexRoute:vEe,LocaleAppsDeriveanRootBlueprintIdRoute:k2e,LocaleAppsDeriveanRootBlueprintListRoute:CEe,LocaleAppsDeriveanRootRegionIdRoute:L2e,LocaleAppsDeriveanRootRegionListRoute:AEe,LocaleAppsDeriveanRootResourceIdRoute:F2e,LocaleAppsDeriveanRootResourceListRoute:IEe,LocaleAppsDeriveanRootTagListRoute:MEe,LocaleAppsDeriveanRootUserIdRoute:j2e,LocaleAppsDeriveanRootUserListRoute:TEe,LocaleAppsDeriveanRootBlueprintProductionIdRoute:U2e},V2e=zl._addFileChildren(z2e),W2e={LocaleAppsDeriveanGameRoute:_2e,LocaleAppsDeriveanMapRoute:N2e,LocaleAppsDeriveanRootRoute:V2e,LocaleAppsDeriveanDbSchemaRoute:EEe,LocaleAppsDeriveanPublicLoginRoute:SEe,LocaleAppsDeriveanPublicLogoutRoute:wEe,LocaleAppsDeriveanPublicRegisterRoute:bEe},$2e=Bh._addFileChildren(W2e),H2e={LocaleIndexRoute:yEe,LocaleAppsDeriveanRoute:$2e},G2e=Ik._addFileChildren(H2e),X2e={IndexRoute:gEe,LocaleRoute:G2e},K2e=aP._addFileChildren(X2e)._addFileTypes(),JH=new V7({defaultOptions:{queries:{placeholderData:R7}}}),Q2e=fG({routeTree:K2e,context:{queryClient:JH,tva:Ine,async session(){return Z0.parse(null)},kysely:An},scrollRestoration:!0,defaultPendingComponent:mie,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),eU=document.getElementById("app");VK({limit:{maxRequests:10,perMilliseconds:100}});eU.innerHTML||Hie.createRoot(eU).render(S.jsx(ie.StrictMode,{children:S.jsx(K7,{client:JH,children:S.jsx(yG,{router:Q2e})})}))})();