(async()=>{function Q$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function G$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var $w={exports:{}},dp={},Bw={exports:{}},kn={};var aC;function J$(){if(aC)return kn;aC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator;function b(ee){return ee===null||typeof ee!="object"?null:(ee=h&&ee[h]||ee["@@iterator"],typeof ee=="function"?ee:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function I(ee,ue,de){this.props=ee,this.context=ue,this.refs=E,this.updater=de||x}I.prototype.isReactComponent={},I.prototype.setState=function(ee,ue){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,ue,"setState")},I.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function T(){}T.prototype=I.prototype;function j(ee,ue,de){this.props=ee,this.context=ue,this.refs=E,this.updater=de||x}var O=j.prototype=new T;O.constructor=j,_(O,I.prototype),O.isPureReactComponent=!0;var A=Array.isArray,D=Object.prototype.hasOwnProperty,M={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function P(ee,ue,de){var ye,we={},Ne=null,ze=null;if(ue!=null)for(ye in ue.ref!==void 0&&(ze=ue.ref),ue.key!==void 0&&(Ne=""+ue.key),ue)D.call(ue,ye)&&!W.hasOwnProperty(ye)&&(we[ye]=ue[ye]);var Oe=arguments.length-2;if(Oe===1)we.children=de;else if(1<Oe){for(var De=Array(Oe),Je=0;Je<Oe;Je++)De[Je]=arguments[Je+2];we.children=De}if(ee&&ee.defaultProps)for(ye in Oe=ee.defaultProps,Oe)we[ye]===void 0&&(we[ye]=Oe[ye]);return{$$typeof:t,type:ee,key:Ne,ref:ze,props:we,_owner:M.current}}function R(ee,ue){return{$$typeof:t,type:ee.type,key:ue,ref:ee.ref,props:ee.props,_owner:ee._owner}}function $(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t}function F(ee){var ue={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(de){return ue[de]})}var U=/\/+/g;function V(ee,ue){return typeof ee=="object"&&ee!==null&&ee.key!=null?F(""+ee.key):ue.toString(36)}function z(ee,ue,de,ye,we){var Ne=typeof ee;(Ne==="undefined"||Ne==="boolean")&&(ee=null);var ze=!1;if(ee===null)ze=!0;else switch(Ne){case"string":case"number":ze=!0;break;case"object":switch(ee.$$typeof){case t:case e:ze=!0}}if(ze)return ze=ee,we=we(ze),ee=ye===""?"."+V(ze,0):ye,A(we)?(de="",ee!=null&&(de=ee.replace(U,"$&/")+"/"),z(we,ue,de,"",function(Je){return Je})):we!=null&&($(we)&&(we=R(we,de+(!we.key||ze&&ze.key===we.key?"":(""+we.key).replace(U,"$&/")+"/")+ee)),ue.push(we)),1;if(ze=0,ye=ye===""?".":ye+":",A(ee))for(var Oe=0;Oe<ee.length;Oe++){Ne=ee[Oe];var De=ye+V(Ne,Oe);ze+=z(Ne,ue,de,De,we)}else if(De=b(ee),typeof De=="function")for(ee=De.call(ee),Oe=0;!(Ne=ee.next()).done;)Ne=Ne.value,De=ye+V(Ne,Oe++),ze+=z(Ne,ue,de,De,we);else if(Ne==="object")throw ue=String(ee),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.");return ze}function te(ee,ue,de){if(ee==null)return ee;var ye=[],we=0;return z(ee,ye,"","",function(Ne){return ue.call(de,Ne,we++)}),ye}function Y(ee){if(ee._status===-1){var ue=ee._result;ue=ue(),ue.then(function(de){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=de)},function(de){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=de)}),ee._status===-1&&(ee._status=0,ee._result=ue)}if(ee._status===1)return ee._result.default;throw ee._result}var le={current:null},se={transition:null},ne={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:se,ReactCurrentOwner:M};function oe(){throw Error("act(...) is not supported in production builds of React.")}return kn.Children={map:te,forEach:function(ee,ue,de){te(ee,function(){ue.apply(this,arguments)},de)},count:function(ee){var ue=0;return te(ee,function(){ue++}),ue},toArray:function(ee){return te(ee,function(ue){return ue})||[]},only:function(ee){if(!$(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},kn.Component=I,kn.Fragment=n,kn.Profiler=i,kn.PureComponent=j,kn.StrictMode=r,kn.Suspense=u,kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,kn.act=oe,kn.cloneElement=function(ee,ue,de){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var ye=_({},ee.props),we=ee.key,Ne=ee.ref,ze=ee._owner;if(ue!=null){if(ue.ref!==void 0&&(Ne=ue.ref,ze=M.current),ue.key!==void 0&&(we=""+ue.key),ee.type&&ee.type.defaultProps)var Oe=ee.type.defaultProps;for(De in ue)D.call(ue,De)&&!W.hasOwnProperty(De)&&(ye[De]=ue[De]===void 0&&Oe!==void 0?Oe[De]:ue[De])}var De=arguments.length-2;if(De===1)ye.children=de;else if(1<De){Oe=Array(De);for(var Je=0;Je<De;Je++)Oe[Je]=arguments[Je+2];ye.children=Oe}return{$$typeof:t,type:ee.type,key:we,ref:Ne,props:ye,_owner:ze}},kn.createContext=function(ee){return ee={$$typeof:o,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:s,_context:ee},ee.Consumer=ee},kn.createElement=P,kn.createFactory=function(ee){var ue=P.bind(null,ee);return ue.type=ee,ue},kn.createRef=function(){return{current:null}},kn.forwardRef=function(ee){return{$$typeof:l,render:ee}},kn.isValidElement=$,kn.lazy=function(ee){return{$$typeof:p,_payload:{_status:-1,_result:ee},_init:Y}},kn.memo=function(ee,ue){return{$$typeof:f,type:ee,compare:ue===void 0?null:ue}},kn.startTransition=function(ee){var ue=se.transition;se.transition={};try{ee()}finally{se.transition=ue}},kn.unstable_act=oe,kn.useCallback=function(ee,ue){return le.current.useCallback(ee,ue)},kn.useContext=function(ee){return le.current.useContext(ee)},kn.useDebugValue=function(){},kn.useDeferredValue=function(ee){return le.current.useDeferredValue(ee)},kn.useEffect=function(ee,ue){return le.current.useEffect(ee,ue)},kn.useId=function(){return le.current.useId()},kn.useImperativeHandle=function(ee,ue,de){return le.current.useImperativeHandle(ee,ue,de)},kn.useInsertionEffect=function(ee,ue){return le.current.useInsertionEffect(ee,ue)},kn.useLayoutEffect=function(ee,ue){return le.current.useLayoutEffect(ee,ue)},kn.useMemo=function(ee,ue){return le.current.useMemo(ee,ue)},kn.useReducer=function(ee,ue,de){return le.current.useReducer(ee,ue,de)},kn.useRef=function(ee){return le.current.useRef(ee)},kn.useState=function(ee){return le.current.useState(ee)},kn.useSyncExternalStore=function(ee,ue,de){return le.current.useSyncExternalStore(ee,ue,de)},kn.useTransition=function(){return le.current.useTransition()},kn.version="18.3.1",kn}var lC;function Gh(){return lC||(lC=1,Bw.exports=J$()),Bw.exports}var cC;function Z$(){if(cC)return dp;cC=1;var t=Gh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,f){var p,h={},b=null,x=null;f!==void 0&&(b=""+f),u.key!==void 0&&(b=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)r.call(u,p)&&!s.hasOwnProperty(p)&&(h[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)h[p]===void 0&&(h[p]=u[p]);return{$$typeof:e,type:l,key:b,ref:x,props:h,_owner:i.current}}return dp.Fragment=n,dp.jsx=o,dp.jsxs=o,dp}var uC;function Y$(){return uC||(uC=1,$w.exports=Z$()),$w.exports}var d=Y$(),ef=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zc=typeof window>"u"||"Deno"in globalThis;function Xs(){}function X$(t,e){return typeof t=="function"?t(e):t}function zS(t){return typeof t=="number"&&t>=0&&t!==1/0}function T3(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gd(t,e){return typeof t=="function"?t(e):t}function ko(t,e){return typeof t=="function"?t(e):t}function dC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==f1(o,e.options))return!1}else if(!ah(e.queryKey,o))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function fC(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Yc(e.options.mutationKey)!==Yc(s))return!1}else if(!ah(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function f1(t,e){return(e?.queryKeyHashFn||Yc)(t)}function Yc(t){return JSON.stringify(t,(e,n)=>WS(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function ah(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ah(t[n],e[n])):!1}function p1(t,e){if(t===e)return t;const n=pC(t)&&pC(e);if(n||WS(t)&&WS(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,l=n?[]:{};let u=0;for(let f=0;f<o;f++){const p=n?f:s[f];(!n&&r.includes(p)||n)&&t[p]===void 0&&e[p]===void 0?(l[p]=void 0,u++):(l[p]=p1(t[p],e[p]),l[p]===t[p]&&t[p]!==void 0&&u++)}return i===o&&u===i?t:l}return e}function rv(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function pC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function WS(t){if(!hC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hC(t){return Object.prototype.toString.call(t)==="[object Object]"}function eB(t){return new Promise(e=>{setTimeout(e,t)})}function US(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?p1(t,e):e}function tB(t){return t}function nB(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function rB(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var h1=Symbol();function j3(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===h1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var iB=class extends ef{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Zc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},m1=new iB,sB=class extends ef{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Zc&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},iv=new sB;function VS(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function oB(t){return Math.min(1e3*2**t,3e4)}function O3(t){return(t??"online")==="online"?iv.isOnline():!0}var R3=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function zw(t){return t instanceof R3}function q3(t){let e=!1,n=0,r=!1,i;const s=VS(),o=E=>{r||(b(new R3(E)),t.abort?.())},l=()=>{e=!0},u=()=>{e=!1},f=()=>m1.isFocused()&&(t.networkMode==="always"||iv.isOnline())&&t.canRun(),p=()=>O3(t.networkMode)&&t.canRun(),h=E=>{r||(r=!0,t.onSuccess?.(E),i?.(),s.resolve(E))},b=E=>{r||(r=!0,t.onError?.(E),i?.(),s.reject(E))},x=()=>new Promise(E=>{i=I=>{(r||f())&&E(I)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),_=()=>{if(r)return;let E;const I=n===0?t.initialPromise:void 0;try{E=I??t.fn()}catch(T){E=Promise.reject(T)}Promise.resolve(E).then(h).catch(T=>{if(r)return;const j=t.retry??(Zc?0:3),O=t.retryDelay??oB,A=typeof O=="function"?O(n,T):O,D=j===!0||typeof j=="number"&&n<j||typeof j=="function"&&j(n,T);if(e||!D){b(T);return}n++,t.onFail?.(n,T),eB(A).then(()=>f()?void 0:x()).then(()=>{e?b(T):_()})})};return{promise:s,cancel:o,continue:()=>(i?.(),s),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?_():x().then(_),s)}}function aB(){let t=[],e=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const s=l=>{e?t.push(l):i(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&i(()=>{r(()=>{l.forEach(u=>{n(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||o()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Gr=aB(),A3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zS(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Zc?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},lB=class extends A3{#e;#t;#n;#r;#i;#s;constructor(t){super(),this.#s=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=cB(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=US(this.state.data,t,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#o({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(Xs).catch(Xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>ko(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!T3(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#s=!0,n.signal)})},i=()=>{const l=j3(this.options,e),u={queryKey:this.queryKey,meta:this.meta};return r(u),this.#s=!1,this.options.persister?this.options.persister(l,u,this):l(u)},s={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(s),this.options.behavior?.onFetch(s,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==s.fetchOptions?.meta)&&this.#o({type:"fetch",meta:s.fetchOptions?.meta});const o=l=>{zw(l)&&l.silent||this.#o({type:"error",error:l}),zw(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=q3({initialPromise:e?.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(u){o(u);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,u)=>{this.#o({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...P3(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return zw(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Gr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function P3(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:O3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function cB(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var uB=class extends ef{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??f1(r,e);let s=this.get(i);return s||(s=new lB({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>dC(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>dC(t,n)):e}notify(t){Gr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Gr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},dB=class extends A3{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||F3(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){this.#n=q3({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(r,i)=>{this.#r({type:"failed",failureCount:r,error:i})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const e=this.state.status==="pending",n=!this.#n.canStart();try{if(!e){this.#r({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&this.#r({type:"pending",context:i,variables:t,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,t,this.state.context,this),await this.options.onSuccess?.(r,t,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,t,this.state.context),this.#r({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,t,this.state.context,this),await this.options.onError?.(r,t,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,t,this.state.context),r}finally{this.#r({type:"error",error:r})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Gr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function F3(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fB=class extends ef{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new dB({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Ig(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Ig(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Ig(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Ig(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Gr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>fC(e,n))}findAll(t={}){return this.getAll().filter(e=>fC(t,e))}notify(t){Gr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Gr.batch(()=>Promise.all(t.map(e=>e.continue().catch(Xs))))}};function Ig(t){return t.options.scope?.id}function mC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const f=async()=>{let p=!1;const h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=j3(e.options,e.fetchOptions),x=async(_,E,I)=>{if(p)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const T={queryKey:e.queryKey,pageParam:E,direction:I?"backward":"forward",meta:e.options.meta};h(T);const j=await b(T),{maxPages:O}=e.options,A=I?rB:nB;return{pages:A(_.pages,j,O),pageParams:A(_.pageParams,E,O)}};if(i&&s.length){const _=i==="backward",E=_?pB:gC,I={pages:s,pageParams:o},T=E(r,I);l=await x(I,T,_)}else{const _=t??s.length;do{const E=u===0?o[0]??r.initialPageParam:gC(r,l);if(u>0&&E==null)break;l=await x(l,E),u++}while(u<_)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(f,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=f}}}function gC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function pB(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var hB=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new uB,this.#t=t.mutationCache||new fB,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=m1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=iv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(gd(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,o=X$(e,s);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Gr.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Gr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e,r={type:"active",...t};return Gr.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Gr.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Xs).catch(Xs)}invalidateQueries(t,e={}){return Gr.batch(()=>{if(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none")return Promise.resolve();const n={...t,type:t?.refetchType??t?.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Gr.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Xs)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Xs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(gd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xs).catch(Xs)}fetchInfiniteQuery(t){return t.behavior=mC(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xs).catch(Xs)}ensureInfiniteQueryData(t){return t.behavior=mC(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return iv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Yc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{ah(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(Yc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()];let n={};return e.forEach(r=>{ah(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=f1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===h1&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},mB=class extends ef{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=VS(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#c;#l;#u;#d;#p;#f;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),yC(this.#t,this.options)?this.#h():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return HS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return HS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#w(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ko(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!rv(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&vC(this.#t,r,this.options,n)&&this.#h(),this.updateResult(e),i&&(this.#t!==r||ko(this.options.enabled,this.#t)!==ko(n.enabled,this.#t)||gd(this.options.staleTime,this.#t)!==gd(n.staleTime,this.#t))&&this.#g();const s=this.#y();i&&(this.#t!==r||ko(this.options.enabled,this.#t)!==ko(n.enabled,this.#t)||s!==this.#f)&&this.#v(s)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return yB(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#h({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#h(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Xs)),e}#g(){this.#x();const t=gd(this.options.staleTime,this.#t);if(Zc||this.#r.isStale||!zS(t))return;const n=T3(this.#r.dataUpdatedAt,t)+1;this.#d=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#w(),this.#f=t,!(Zc||ko(this.options.enabled,this.#t)===!1||!zS(this.#f)||this.#f===0)&&(this.#p=setInterval(()=>{(this.options.refetchIntervalInBackground||m1.isFocused())&&this.#h()},this.#f))}#b(){this.#g(),this.#v(this.#y())}#x(){this.#d&&(clearTimeout(this.#d),this.#d=void 0)}#w(){this.#p&&(clearInterval(this.#p),this.#p=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,s=this.#i,o=this.#s,u=t!==n?t.state:this.#n,{state:f}=t;let p={...f},h=!1,b;if(e._optimisticResults){const W=this.hasListeners(),P=!W&&yC(t,e),R=W&&vC(t,n,e,r);(P||R)&&(p={...p,...P3(f.data,t.options)}),e._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:x,errorUpdatedAt:_,status:E}=p;if(e.select&&p.data!==void 0)if(i&&p.data===s?.data&&e.select===this.#c)b=this.#l;else try{this.#c=e.select,b=e.select(p.data),b=US(i?.data,b,e),this.#l=b,this.#a=null}catch(W){this.#a=W}else b=p.data;if(e.placeholderData!==void 0&&b===void 0&&E==="pending"){let W;if(i?.isPlaceholderData&&e.placeholderData===o?.placeholderData)W=i.data;else if(W=typeof e.placeholderData=="function"?e.placeholderData(this.#u?.state.data,this.#u):e.placeholderData,e.select&&W!==void 0)try{W=e.select(W),this.#a=null}catch(P){this.#a=P}W!==void 0&&(E="success",b=US(i?.data,W,e),h=!0)}this.#a&&(x=this.#a,b=this.#l,_=Date.now(),E="error");const I=p.fetchStatus==="fetching",T=E==="pending",j=E==="error",O=T&&I,A=b!==void 0,M={status:E,fetchStatus:p.fetchStatus,isPending:T,isSuccess:E==="success",isError:j,isInitialLoading:O,isLoading:O,data:b,dataUpdatedAt:p.dataUpdatedAt,error:x,errorUpdatedAt:_,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>u.dataUpdateCount||p.errorUpdateCount>u.errorUpdateCount,isFetching:I,isRefetching:I&&!T,isLoadingError:j&&!A,isPaused:p.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&A,isStale:g1(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const W=$=>{M.status==="error"?$.reject(M.error):M.data!==void 0&&$.resolve(M.data)},P=()=>{const $=this.#o=M.promise=VS();W($)},R=this.#o;switch(R.status){case"pending":t.queryHash===n.queryHash&&W(R);break;case"fulfilled":(M.status==="error"||M.data!==R.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==R.reason)&&P();break}}return M}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#u=this.#t),rv(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!this.#m.size)return!0;const l=new Set(o??this.#m);return this.options.throwOnError&&l.add("error"),Object.keys(this.#r).some(u=>{const f=u;return this.#r[f]!==e[f]&&l.has(f)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#S({...r,...t})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(t){Gr.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function gB(t,e){return ko(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function yC(t,e){return gB(t,e)||t.state.data!==void 0&&HS(t,e,e.refetchOnMount)}function HS(t,e,n){if(ko(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&g1(t,e)}return!1}function vC(t,e,n,r){return(t!==e||ko(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&g1(t,n)}function g1(t,e){return ko(e.enabled,t)!==!1&&t.isStaleByTime(gd(e.staleTime,t))}function yB(t,e){return!rv(t.getCurrentResult(),e)}var vB=class extends ef{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),rv(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Yc(n.mutationKey)!==Yc(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??F3();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Gr.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},Q=Gh();const Bn=uo(Q),bB=Q$({__proto__:null,default:Bn},[Q]);var D3=Q.createContext(void 0),ub=t=>{const e=Q.useContext(D3);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},xB=({client:t,children:e})=>(Q.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(D3.Provider,{value:t,children:e})),L3=Q.createContext(!1),wB=()=>Q.useContext(L3);L3.Provider;function _B(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var SB=Q.createContext(_B()),EB=()=>Q.useContext(SB);function M3(t,e){return typeof t=="function"?t(...e):!!t}function KS(){}var NB=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},kB=t=>{Q.useEffect(()=>{t.clearReset()},[t])},IB=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&M3(n,[t.error,r]),CB=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},TB=(t,e)=>t.isLoading&&t.isFetching&&!e,jB=(t,e)=>t?.suspense&&e.isPending,bC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function OB(t,e,n){const r=ub(),i=wB(),s=EB(),o=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",CB(o),NB(o,s),kB(s);const l=!r.getQueryCache().get(o.queryHash),[u]=Q.useState(()=>new e(r,o)),f=u.getOptimisticResult(o),p=!i&&t.subscribed!==!1;if(Q.useSyncExternalStore(Q.useCallback(h=>{const b=p?u.subscribe(Gr.batchCalls(h)):KS;return u.updateResult(),b},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),Q.useEffect(()=>{u.setOptions(o,{listeners:!1})},[o,u]),jB(o,f))throw bC(o,u,s);if(IB({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw f.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!Zc&&TB(f,i)&&(l?bC(o,u,s):r.getQueryCache().get(o.queryHash)?.promise)?.catch(KS).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?f:u.trackResult(f)}function sv(t,e){return OB(t,mB)}function xC(t,e){return t.findAll(e.filters).map(n=>e.select?e.select(n):n.state)}function RB(t={},e){const n=ub().getMutationCache(),r=Q.useRef(t),i=Q.useRef(null);return i.current||(i.current=xC(n,t)),Q.useEffect(()=>{r.current=t}),Q.useSyncExternalStore(Q.useCallback(s=>n.subscribe(()=>{const o=p1(i.current,xC(n,r.current));i.current!==o&&(i.current=o,Gr.schedule(s))}),[n]),()=>i.current,()=>i.current)}function Zt(t,e){const n=ub(),[r]=Q.useState(()=>new vB(n,t));Q.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Q.useSyncExternalStore(Q.useCallback(o=>r.subscribe(Gr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=Q.useCallback((o,l)=>{r.mutate(o,l).catch(KS)},[r]);if(i.error&&M3(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}const Hc="__TSR_index",wC="popstate",_C="beforeunload";function $3(t){let e=t.getLocation();const n=new Set,r=o=>{e=t.getLocation(),n.forEach(l=>l({location:e,action:o}))},i=o=>{t.notifyOnIndexChange??!0?r(o):e=t.getLocation()},s=async({task:o,navigateOpts:l,...u})=>{var f,p;if(l?.ignoreBlocker??!1){o();return}const b=((f=t.getBlockers)==null?void 0:f.call(t))??[],x=u.type==="PUSH"||u.type==="REPLACE";if(typeof document<"u"&&b.length&&x)for(const _ of b){const E=lh(u.path,u.state);if(await _.blockerFn({currentLocation:e,nextLocation:E,action:u.type})){(p=t.onBlocked)==null||p.call(t);return}}o()};return{get location(){return e},get length(){return t.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,l,u)=>{const f=e.state[Hc];l=QS(f+1,l),s({task:()=>{t.pushState(o,l),r({type:"PUSH"})},navigateOpts:u,type:"PUSH",path:o,state:l})},replace:(o,l,u)=>{const f=e.state[Hc];l=QS(f,l),s({task:()=>{t.replaceState(o,l),r({type:"REPLACE"})},navigateOpts:u,type:"REPLACE",path:o,state:l})},go:(o,l)=>{s({task:()=>{t.go(o),i({type:"GO",index:o})},navigateOpts:l,type:"GO"})},back:o=>{s({task:()=>{t.back(o?.ignoreBlocker??!1),i({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{s({task:()=>{t.forward(o?.ignoreBlocker??!1),i({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>e.state[Hc]!==0,createHref:o=>t.createHref(o),block:o=>{var l;if(!t.setBlockers)return()=>{};const u=((l=t.getBlockers)==null?void 0:l.call(t))??[];return t.setBlockers([...u,o]),()=>{var f,p;const h=((f=t.getBlockers)==null?void 0:f.call(t))??[];(p=t.setBlockers)==null||p.call(t,h.filter(b=>b!==o))}},flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function QS(t,e){return e||(e={}),{...e,key:PB(),[Hc]:t}}function qB(t){const e=typeof document<"u"?window:void 0,n=e.history.pushState,r=e.history.replaceState;let i=[];const s=()=>i,o=P=>i=P,l=P=>P,u=()=>lh(`${e.location.pathname}${e.location.search}${e.location.hash}`,e.history.state);let f=u(),p,h=!1,b=!1,x=!1,_=!1;const E=()=>f;let I,T;const j=()=>{I&&(W._ignoreSubscribers=!0,(I.isPush?e.history.pushState:e.history.replaceState)(I.state,"",I.href),W._ignoreSubscribers=!1,I=void 0,T=void 0,p=void 0)},O=(P,R,$)=>{const F=l(R);T||(p=f),f=lh(R,$),I={href:F,state:$,isPush:I?.isPush||P==="push"},T||(T=Promise.resolve().then(()=>j()))},A=P=>{f=u(),W.notify({type:P})},D=async()=>{if(b){b=!1;return}const P=u(),R=P.state[Hc]-f.state[Hc],$=R===1,F=R===-1,U=!$&&!F||h;h=!1;const V=U?"GO":F?"BACK":"FORWARD",z=U?{type:"GO",index:R}:{type:F?"BACK":"FORWARD"};if(x)x=!1;else{const te=s();if(typeof document<"u"&&te.length){for(const Y of te)if(await Y.blockerFn({currentLocation:f,nextLocation:P,action:V})){b=!0,e.history.go(1),W.notify(z);return}}}f=u(),W.notify(z)},M=P=>{if(_){_=!1;return}let R=!1;const $=s();if(typeof document<"u"&&$.length)for(const F of $){const U=F.enableBeforeUnload??!0;if(U===!0){R=!0;break}if(typeof U=="function"&&U()===!0){R=!0;break}}if(R)return P.preventDefault(),P.returnValue=""},W=$3({getLocation:E,getLength:()=>e.history.length,pushState:(P,R)=>O("push",P,R),replaceState:(P,R)=>O("replace",P,R),back:P=>(P&&(x=!0),_=!0,e.history.back()),forward:P=>{P&&(x=!0),_=!0,e.history.forward()},go:P=>{h=!0,e.history.go(P)},createHref:P=>l(P),flush:j,destroy:()=>{e.history.pushState=n,e.history.replaceState=r,e.removeEventListener(_C,M,{capture:!0}),e.removeEventListener(wC,D)},onBlocked:()=>{p&&f!==p&&(f=p)},getBlockers:s,setBlockers:o,notifyOnIndexChange:!1});return e.addEventListener(_C,M,{capture:!0}),e.addEventListener(wC,D),e.history.pushState=function(...P){const R=n.apply(e.history,P);return W._ignoreSubscribers||A("PUSH"),R},e.history.replaceState=function(...P){const R=r.apply(e.history,P);return W._ignoreSubscribers||A("REPLACE"),R},W}function AB(t={initialEntries:["/"]}){const e=t.initialEntries;let n=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((s,o)=>QS(o,void 0));return $3({getLocation:()=>lh(e[n],r[n]),getLength:()=>e.length,pushState:(s,o)=>{n<e.length-1&&(e.splice(n+1),r.splice(n+1)),r.push(o),e.push(s),n=Math.max(e.length-1,0)},replaceState:(s,o)=>{r[n]=o,e[n]=s},back:()=>{n=Math.max(n-1,0)},forward:()=>{n=Math.min(n+1,e.length-1)},go:s=>{n=Math.min(Math.max(n+s,0),e.length-1)},createHref:s=>s})}function lh(t,e){const n=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:t.length),hash:n>-1?t.substring(n):"",search:r>-1?t.slice(r,n===-1?void 0:n):"",state:e||{[Hc]:0}}}function PB(){return(Math.random()+1).toString(36).substring(7)}var FB="Invariant failed";function Is(t,e){if(!t)throw new Error(FB)}const Ww=Q.createContext(null);function B3(){return typeof document>"u"?Ww:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ww,Ww)}function Lo(t){const e=Q.useContext(B3());return t?.warn,e}var Uw={exports:{}},Vw={},Hw={exports:{}},Kw={};var SC;function DB(){if(SC)return Kw;SC=1;var t=Gh();function e(h,b){return h===b&&(h!==0||1/h===1/b)||h!==h&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(h,b){var x=b(),_=r({inst:{value:x,getSnapshot:b}}),E=_[0].inst,I=_[1];return s(function(){E.value=x,E.getSnapshot=b,u(E)&&I({inst:E})},[h,x,b]),i(function(){return u(E)&&I({inst:E}),h(function(){u(E)&&I({inst:E})})},[h]),o(x),x}function u(h){var b=h.getSnapshot;h=h.value;try{var x=b();return!n(h,x)}catch{return!0}}function f(h,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Kw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Kw}var EC;function LB(){return EC||(EC=1,Hw.exports=DB()),Hw.exports}var NC;function MB(){if(NC)return Vw;NC=1;var t=Gh(),e=LB();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return Vw.useSyncExternalStoreWithSelector=function(f,p,h,b,x){var _=s(null);if(_.current===null){var E={hasValue:!1,value:null};_.current=E}else E=_.current;_=l(function(){function T(M){if(!j){if(j=!0,O=M,M=b(M),x!==void 0&&E.hasValue){var W=E.value;if(x(W,M))return A=W}return A=M}if(W=A,r(O,M))return W;var P=b(M);return x!==void 0&&x(W,P)?(O=M,W):(O=M,A=P)}var j=!1,O,A,D=h===void 0?null:h;return[function(){return T(p())},D===null?void 0:function(){return T(D())}]},[p,h,b,x]);var I=i(f,_[0],_[1]);return o(function(){E.hasValue=!0,E.value=I},[I]),u(I),I},Vw}var kC;function $B(){return kC||(kC=1,Uw.exports=MB()),Uw.exports}var z3=$B();const BB=uo(z3),yd=new WeakMap,fy=new WeakMap,ov={current:[]};let Qw=!1,Up=0;const Sp=new Set,Cg=new Map;function W3(t){const e=Array.from(t).sort((n,r)=>n instanceof vd&&n.options.deps.includes(r)?1:r instanceof vd&&r.options.deps.includes(n)?-1:0);for(const n of e){if(ov.current.includes(n))continue;ov.current.push(n),n.recompute();const r=fy.get(n);if(r)for(const i of r){const s=yd.get(i);s&&W3(s)}}}function zB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function WB(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function U3(t){if(Up>0&&!Cg.has(t)&&Cg.set(t,t.prevState),Sp.add(t),!(Up>0)&&!Qw)try{for(Qw=!0;Sp.size>0;){const e=Array.from(Sp);Sp.clear();for(const n of e){const r=Cg.get(n)??n.prevState;n.prevState=r,zB(n)}for(const n of e){const r=yd.get(n);r&&(ov.current.push(n),W3(r))}for(const n of e){const r=yd.get(n);if(r)for(const i of r)WB(i)}}}finally{Qw=!1,ov.current=[],Cg.clear()}}function Gw(t){Up++;try{t()}finally{if(Up--,Up===0){const e=Array.from(Sp)[0];e&&U3(e)}}}class GS{constructor(e,n){this.listeners=new Set,this.subscribe=r=>{var i,s;this.listeners.add(r);const o=(s=(i=this.options)==null?void 0:i.onSubscribe)==null?void 0:s.call(i,r,this);return()=>{this.listeners.delete(r),o?.()}},this.setState=r=>{var i,s,o;this.prevState=this.state,this.state=(i=this.options)!=null&&i.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(s=this.options)==null?void 0:s.onUpdate)==null||o.call(s),U3(this)},this.prevState=e,this.state=e,this.options=n}}class vd{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const n=[],r=[];for(const i of this.options.deps)n.push(i.prevState),r.push(i.state);return this.lastSeenDepValues=r,{prevDepVals:n,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var n,r;this.prevState=this.state;const{prevDepVals:i,currDepVals:s,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:i,currDepVals:s,prevVal:o}),(r=(n=this.options).onUpdate)==null||r.call(n)},this.checkIfRecalculationNeededDeeply=()=>{for(const s of this.options.deps)s instanceof vd&&s.checkIfRecalculationNeededDeeply();let n=!1;const r=this.lastSeenDepValues,{currDepVals:i}=this.getDepVals();for(let s=0;s<i.length;s++)if(i[s]!==r[s]){n=!0;break}n&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const n of this._subscriptions)n()}),this.subscribe=n=>{var r,i;this.listeners.add(n);const s=(i=(r=this.options).onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),s?.()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const n of e)if(n instanceof vd)n.registerOnGraph(),this.registerOnGraph(n.options.deps);else if(n instanceof GS){let r=yd.get(n);r||(r=new Set,yd.set(n,r)),r.add(this);let i=fy.get(this);i||(i=new Set,fy.set(this,i)),i.add(n)}}unregisterFromGraph(e=this.options.deps){for(const n of e)if(n instanceof vd)this.unregisterFromGraph(n.options.deps);else if(n instanceof GS){const r=yd.get(n);r&&r.delete(this);const i=fy.get(this);i&&i.delete(n)}}}function UB(t,e=n=>n){return z3.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,VB)}function VB(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!e.has(r)||!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Jw,IC;function HB(){if(IC)return Jw;IC=1;const t={},e=t.hasOwnProperty,n=(P,R)=>{for(const $ in P)e.call(P,$)&&R($,P[$])},r=(P,R)=>(R&&n(R,($,F)=>{P[$]=F}),P),i=(P,R)=>{const $=P.length;let F=-1;for(;++F<$;)R(P[F])},s=P=>"\\u"+("0000"+P).slice(-4),o=(P,R)=>{let $=P.toString(16);return R?$:$.toUpperCase()},l=t.toString,u=Array.isArray,f=P=>typeof Buffer=="function"&&Buffer.isBuffer(P),p=P=>l.call(P)=="[object Object]",h=P=>typeof P=="string"||l.call(P)=="[object String]",b=P=>typeof P=="number"||l.call(P)=="[object Number]",x=P=>typeof P=="bigint",_=P=>typeof P=="function",E=P=>l.call(P)=="[object Map]",I=P=>l.call(P)=="[object Set]",T={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},j=/[\\\b\f\n\r\t]/,O=/[0-9]/,A=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,D=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,M=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,W=(P,R)=>{const $=()=>{le=Y,++R.indentLevel,Y=R.indent.repeat(R.indentLevel)},F={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},U=R&&R.json;U&&(F.quotes="double",F.wrap=!0),R=r(F,R),R.quotes!="single"&&R.quotes!="double"&&R.quotes!="backtick"&&(R.quotes="single");const V=R.quotes=="double"?'"':R.quotes=="backtick"?"`":"'",z=R.compact,te=R.lowercaseHex;let Y=R.indent.repeat(R.indentLevel),le="";const se=R.__inline1__,ne=R.__inline2__,oe=z?"":`
`;let ee,ue=!0;const de=R.numbers=="binary",ye=R.numbers=="octal",we=R.numbers=="decimal",Ne=R.numbers=="hexadecimal";if(U&&P&&_(P.toJSON)&&(P=P.toJSON()),!h(P)){if(E(P))return P.size==0?"new Map()":(z||(R.__inline1__=!0,R.__inline2__=!1),"new Map("+W(Array.from(P),R)+")");if(I(P))return P.size==0?"new Set()":"new Set("+W(Array.from(P),R)+")";if(f(P))return P.length==0?"Buffer.from([])":"Buffer.from("+W(Array.from(P),R)+")";if(u(P))return ee=[],R.wrap=!0,se&&(R.__inline1__=!1,R.__inline2__=!0),ne||$(),i(P,Oe=>{ue=!1,ne&&(R.__inline2__=!1),ee.push((z||ne?"":Y)+W(Oe,R))}),ue?"[]":ne?"["+ee.join(", ")+"]":"["+oe+ee.join(","+oe)+oe+(z?"":le)+"]";if(b(P)||x(P)){if(U)return JSON.stringify(Number(P));let Oe;if(we)Oe=String(P);else if(Ne){let De=P.toString(16);te||(De=De.toUpperCase()),Oe="0x"+De}else de?Oe="0b"+P.toString(2):ye&&(Oe="0o"+P.toString(8));return x(P)?Oe+"n":Oe}else return x(P)?U?JSON.stringify(Number(P)):P+"n":p(P)?(ee=[],R.wrap=!0,$(),n(P,(Oe,De)=>{ue=!1,ee.push((z?"":Y)+W(Oe,R)+":"+(z?"":" ")+W(De,R))}),ue?"{}":"{"+oe+ee.join(","+oe)+oe+(z?"":le)+"}"):U?JSON.stringify(P)||"null":String(P)}const ze=R.escapeEverything?D:M;return ee=P.replace(ze,(Oe,De,Je,Xe,Ue,ct)=>{if(De){if(R.minimal)return De;const jt=De.charCodeAt(0),Vt=De.charCodeAt(1);if(R.es6){const nn=(jt-55296)*1024+Vt-56320+65536;return"\\u{"+o(nn,te)+"}"}return s(o(jt,te))+s(o(Vt,te))}if(Je)return s(o(Je.charCodeAt(0),te));if(Oe=="\0"&&!U&&!O.test(ct.charAt(Ue+1)))return"\\0";if(Xe)return Xe==V||R.escapeEverything?"\\"+Xe:Xe;if(j.test(Oe))return T[Oe];if(R.minimal&&!A.test(Oe))return Oe;const _t=o(Oe.charCodeAt(0),te);return U||_t.length>2?s(_t):"\\x"+("00"+_t).slice(-2)}),V=="`"&&(ee=ee.replace(/\$\{/g,"\\${")),R.isScriptContext&&(ee=ee.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,U?"\\u003C!--":"\\x3C!--")),R.wrap&&(ee=V+ee+V),ee};return W.version="3.0.2",Jw=W,Jw}HB();const Ns="__root__";function KB(t,e){let n,r,i,s="";for(n in t)if((i=t[n])!==void 0)if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return""+s}function CC(t){if(!t)return"";const e=decodeURIComponent(t);return e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e}function QB(t,e){let n,r;const i={},s=t.split("&");for(;n=s.shift();){const o=n.indexOf("=");if(o!==-1){r=n.slice(0,o),r=decodeURIComponent(r);const l=n.slice(o+1);i[r]!==void 0?i[r]=[].concat(i[r],CC(l)):i[r]=CC(l)}else r=n,r=decodeURIComponent(r),i[r]=""}return i}const GB=ZB(JSON.parse),JB=YB(JSON.stringify,JSON.parse);function ZB(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const n=QB(e);for(const r in n){const i=n[r];if(typeof i=="string")try{n[r]=t(i)}catch{}}return n}}function YB(t,e){function n(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(s=>{const o=r[s];typeof o>"u"||o===void 0?delete r[s]:r[s]=n(o)});const i=KB(r).toString();return i?`?${i}`:""}}function Vp(t){return t[t.length-1]}function XB(t){return typeof t=="function"}function Mc(t,e){return XB(t)?t(e):t}function py(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Zs(t,e){if(t===e)return t;const n=e,r=jC(t)&&jC(n);if(r||Pl(t)&&Pl(n)){const i=r?t:Object.keys(t),s=i.length,o=r?n:Object.keys(n),l=o.length,u=r?[]:{};let f=0;for(let p=0;p<l;p++){const h=r?p:o[p];(!r&&i.includes(h)||r)&&t[h]===void 0&&n[h]===void 0?(u[h]=void 0,f++):(u[h]=Zs(t[h],n[h]),u[h]===t[h]&&t[h]!==void 0&&f++)}return s===l&&f===s?t:u}return n}function Pl(t){if(!TC(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!TC(n)||!n.hasOwnProperty("isPrototypeOf"))}function TC(t){return Object.prototype.toString.call(t)==="[object Object]"}function jC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function OC(t,e){let n=Object.keys(t);return e&&(n=n.filter(r=>t[r]!==void 0)),n}function bd(t,e,n){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Pl(t)&&Pl(e)){const r=n?.ignoreUndefined??!0,i=OC(t,r),s=OC(e,r);return!n?.partial&&i.length!==s.length?!1:s.every(o=>bd(t[o],e[o],n))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,i)=>!bd(r,e[i],n)):!1}const Ep=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function rd(t){let e,n;const r=new Promise((i,s)=>{e=i,n=s});return r.status="pending",r.resolve=i=>{r.status="resolved",r.value=i,e(i),t?.(i)},r.reject=i=>{r.status="rejected",n(i)},r}function Zw(t){const e=Q.useRef({value:t,prev:null}),n=e.current.value;return t!==n&&(e.current={value:t,prev:n}),e.current.prev}function e4(t,e,n={},r={}){const i=Q.useRef(typeof IntersectionObserver=="function"),s=Q.useRef(null);return Q.useEffect(()=>{if(!(!t.current||!i.current||r.disabled))return s.current=new IntersectionObserver(([o])=>{e(o)},n),s.current.observe(t.current),()=>{var o;(o=s.current)==null||o.disconnect()}},[e,n,r.disabled,t]),s.current}function t4(t){const e=Q.useRef(null);return Q.useEffect(()=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)}),e}function Fa(t){return db(t.filter(e=>e!==void 0).join("/"))}function db(t){return t.replace(/\/{2,}/g,"/")}function y1(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function $c(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function n4(t){return $c(y1(t))}function av(t,e){return t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function r4(t,e,n){return av(t,n)===av(e,n)}function i4({basepath:t,base:e,to:n,trailingSlash:r="never",caseSensitive:i}){var s,o;e=lv(t,e,i),n=lv(t,n,i);let l=Pd(e);const u=Pd(n);l.length>1&&((s=Vp(l))==null?void 0:s.value)==="/"&&l.pop(),u.forEach((p,h)=>{p.value==="/"?h?h===u.length-1&&l.push(p):l=[p]:p.value===".."?l.pop():p.value==="."||l.push(p)}),l.length>1&&(((o=Vp(l))==null?void 0:o.value)==="/"?r==="never"&&l.pop():r==="always"&&l.push({type:"pathname",value:"/"}));const f=Fa([t,...l.map(p=>p.value)]);return db(f)}function Pd(t){if(!t)return[];t=db(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const n=t.split("/").filter(Boolean);return e.push(...n.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function Tg({path:t,params:e,leaveWildcards:n,leaveParams:r,decodeCharMap:i}){const s=Pd(t),o={};for(const[l,u]of Object.entries(e)){const f=typeof u=="string";["*","_splat"].includes(l)?o[l]=f?encodeURI(u):u:o[l]=f?s4(u,i):u}return Fa(s.map(l=>{if(l.type==="wildcard"){const u=o._splat;return n?`${l.value}${u??""}`:u}if(l.type==="param"){if(r){const u=o[l.value];return`${l.value}${u??""}`}return o[l.value.substring(1)]??"undefined"}return l.value}))}function s4(t,e){let n=encodeURIComponent(t);if(e)for(const[r,i]of e)n=n.replaceAll(r,i);return n}function jg(t,e,n){const r=o4(t,e,n);if(!(n.to&&!r))return r??{}}function lv(t,e,n=!1){const r=n?t:t.toLowerCase(),i=n?e:e.toLowerCase();switch(!0){case r==="/":return e;case i===r:return"";case e.length<t.length:return e;case i[r.length]!=="/":return e;case i.startsWith(r):return e.slice(t.length);default:return e}}function o4(t,e,n){if(t!=="/"&&!e.startsWith(t))return;e=lv(t,e,n.caseSensitive);const r=lv(t,`${n.to??"$"}`,n.caseSensitive),i=Pd(e),s=Pd(r);e.startsWith("/")||i.unshift({type:"pathname",value:"/"}),r.startsWith("/")||s.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let u=0;u<Math.max(i.length,s.length);u++){const f=i[u],p=s[u],h=u>=i.length-1,b=u>=s.length-1;if(p){if(p.type==="wildcard"){const x=decodeURI(Fa(i.slice(u).map(_=>_.value)));return o["*"]=x,o._splat=x,!0}if(p.type==="pathname"){if(p.value==="/"&&!f?.value)return!0;if(f){if(n.caseSensitive){if(p.value!==f.value)return!1}else if(p.value.toLowerCase()!==f.value.toLowerCase())return!1}}if(!f)return!1;if(p.type==="param"){if(f.value==="/")return!1;f.value.charAt(0)!=="$"&&(o[p.value.substring(1)]=decodeURIComponent(f.value))}}if(!h&&b)return o["**"]=Fa(i.slice(u+1).map(x=>x.value)),!!n.fuzzy&&p?.value!=="/"}return!0})()?o:void 0}function Jh(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function jc(t){return!!t?.isRedirect}function Yw(t){return!!t?.isRedirect&&t.href}function v1(t){const e=t.errorComponent??fb;return d.jsx(a4,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:n,reset:r})=>n?Q.createElement(e,{error:n,reset:r}):t.children})}class a4 extends Q.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,n){n.error&&n.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,n){this.props.onCatch&&this.props.onCatch(e,n)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function fb({error:t}){const[e,n]=Q.useState(!1);return d.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[d.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),d.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>n(r=>!r),children:e?"Hide Error":"Show Error"})]}),d.jsx("div",{style:{height:".25rem"}}),e?d.jsx("div",{children:d.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?d.jsx("code",{children:t.message}):null})}):null]})}function Bi(t){const e=Lo({warn:t?.router===void 0}),n=t?.router||e,r=Q.useRef();return UB(n.__store,i=>{if(t?.select){if(t.structuralSharing??n.options.defaultStructuralSharing){const s=Zs(r.current,t.select(i));return r.current=s,s}return t.select(i)}return i})}function Eo(t){return!!t?.isNotFound}function l4(t){const e=Bi({select:n=>`not-found-${n.location.pathname}-${n.status}`});return d.jsx(v1,{getResetKey:()=>e,onCatch:(n,r)=>{var i;if(Eo(n))(i=t.onCatch)==null||i.call(t,n,r);else throw n},errorComponent:({error:n})=>{var r;if(Eo(n))return(r=t.fallback)==null?void 0:r.call(t,n);throw n},children:t.children})}function c4(){return d.jsx("p",{children:"Not Found"})}const Np={stringify:t=>JSON.stringify(t,function(n,r){const i=this[n],s=Rg.find(o=>o.stringifyCondition(i));return s?s.stringify(i):r}),parse:t=>JSON.parse(t,function(n,r){const i=this[n];if(Pl(i)){const s=Rg.find(o=>o.parseCondition(i));if(s)return s.parse(i)}return r}),encode:t=>{if(Array.isArray(t))return t.map(n=>Np.encode(n));if(Pl(t))return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Np.encode(r)]));const e=Rg.find(n=>n.stringifyCondition(t));return e?e.stringify(t):t},decode:t=>{if(Pl(t)){const e=Rg.find(n=>n.parseCondition(t));if(e)return e.parse(t)}return Array.isArray(t)?t.map(e=>Np.decode(e)):Pl(t)?Object.fromEntries(Object.entries(t).map(([e,n])=>[e,Np.decode(n)])):t}},Og=(t,e,n,r)=>({key:t,stringifyCondition:e,stringify:i=>({[`$${t}`]:n(i)}),parseCondition:i=>Object.hasOwn(i,`$${t}`),parse:i=>r(i[`$${t}`])}),Rg=[Og("undefined",t=>t===void 0,()=>0,()=>{}),Og("date",t=>t instanceof Date,t=>t.toISOString(),t=>new Date(t)),Og("error",t=>t instanceof Error,t=>({...t,message:t.message,stack:t.stack,cause:t.cause}),t=>Object.assign(new Error(t.message),t)),Og("formData",t=>t instanceof FormData,t=>{const e={};return t.forEach((n,r)=>{const i=e[r];i!==void 0?Array.isArray(i)?i.push(n):e[r]=[i,n]:e[r]=n}),e},t=>{const e=new FormData;return Object.entries(t).forEach(([n,r])=>{Array.isArray(r)?r.forEach(i=>e.append(n,i)):e.append(n,r)}),e})],V3=["component","errorComponent","pendingComponent","notFoundComponent"];function u4(t){var e;for(const n of V3)if((e=t.options[n])!=null&&e.preload)return!0;return!1}function Xw(t,e){if(t==null)return{};if("~standard"in t){const n=t["~standard"].validate(e);if(n instanceof Promise)throw new JS("Async validation not supported");if(n.issues)throw new JS(JSON.stringify(n.issues,void 0,2));return n.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}function d4(t){return new f4(t)}class f4{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=n=>n(),this.update=n=>{var r;n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const i=this.options;this.options={...this.options,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(s=>[encodeURIComponent(s),s])):void 0,(!this.basepath||n.basepath&&n.basepath!==i.basepath)&&(n.basepath===void 0||n.basepath===""||n.basepath==="/"?this.basepath="/":this.basepath=`/${n4(n.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?AB({initialEntries:[this.basepath||"/"]}):qB()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new GS(h4(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(s=>!["redirected"].includes(s.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const n=this.options.notFoundRoute;n&&(n.init({originalIndex:0x174876e7ff,defaultSsr:this.options.defaultSsr}),this.routesById[n.id]=n);const r=o=>{o.forEach((l,u)=>{l.init({originalIndex:u,defaultSsr:this.options.defaultSsr});const f=this.routesById[l.id];if(Is(!f,`Duplicate routes found with id: ${String(l.id)}`),this.routesById[l.id]=l,!l.isRoot&&l.path){const h=$c(l.fullPath);(!this.routesByPath[h]||l.fullPath.endsWith("/"))&&(this.routesByPath[h]=l)}const p=l.children;p?.length&&r(p)})};r([this.routeTree]);const i=[];Object.values(this.routesById).forEach((o,l)=>{var u;if(o.isRoot||!o.path)return;const f=y1(o.fullPath),p=Pd(f);for(;p.length>1&&((u=p[0])==null?void 0:u.value)==="/";)p.shift();const h=p.map(b=>b.value==="/"?.75:b.type==="param"?.5:b.type==="wildcard"?.25:1);i.push({child:o,trimmed:f,parsed:p,index:l,scores:h})}),this.flatRoutes=i.sort((o,l)=>{const u=Math.min(o.scores.length,l.scores.length);for(let f=0;f<u;f++)if(o.scores[f]!==l.scores[f])return l.scores[f]-o.scores[f];if(o.scores.length!==l.scores.length)return l.scores.length-o.scores.length;for(let f=0;f<u;f++)if(o.parsed[f].value!==l.parsed[f].value)return o.parsed[f].value>l.parsed[f].value?1:-1;return o.index-l.index}).map((o,l)=>(o.child.rank=l,o.child))},this.subscribe=(n,r)=>{const i={eventType:n,fn:r};return this.subscribers.add(i),()=>{this.subscribers.delete(i)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const i=({pathname:u,search:f,hash:p,state:h})=>{const b=this.options.parseSearch(f),x=this.options.stringifySearch(b);return{pathname:u,searchStr:x,search:Zs(n?.search,b),hash:p.split("#").reverse()[0]??"",href:`${u}${x}${p}`,state:Zs(n?.state,h)}},s=i(r??this.history.location),{__tempLocation:o,__tempKey:l}=s.state;if(o&&(!l||l===this.tempLocationKey)){const u=i(o);return u.state.key=s.state.key,delete u.state.__tempLocation,{...u,maskedLocation:s}}return s},this.resolvePathWithBase=(n,r)=>i4({basepath:this.basepath,base:n,to:db(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(n,r)=>{let i={};const s=$c(n.pathname),o=p=>jg(this.basepath,s,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let l=r?.to!==void 0?this.routesByPath[r.to]:void 0;l?i=o(l):l=this.flatRoutes.find(p=>{const h=o(p);return h?(i=h,!0):!1});let u=l||this.routesById[Ns];const f=[u];for(;u.parentRoute;)u=u.parentRoute,f.unshift(u);return{matchedRoutes:f,routeParams:i,foundRoute:l}},this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var n;(n=this.state.pendingMatches)==null||n.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=n=>{const r=(s={},o)=>{var l,u,f,p,h,b;const x=s._fromLocation?this.matchRoutes(s._fromLocation,{_buildLocation:!0}):this.state.matches,_=s.from!=null?x.find(F=>jg(this.basepath,$c(F.pathname),{to:s.from,caseSensitive:!1,fuzzy:!1})):void 0,E=_?.pathname||this.latestLocation.pathname;Is(s.from==null||_!=null,"Could not find match for from: "+s.from);const I=(l=this.state.pendingMatches)!=null&&l.length?(u=Vp(this.state.pendingMatches))==null?void 0:u.search:((f=Vp(x))==null?void 0:f.search)||this.latestLocation.search,T=o?.matchedRoutes.filter(F=>x.find(U=>U.routeId===F.id));let j;if(s.to)j=this.resolvePathWithBase(E,`${s.to}`);else{const F=this.routesById[(p=T?.find(U=>{const V=Tg({path:U.fullPath,params:o?.routeParams??{},decodeCharMap:this.pathParamsDecodeCharMap});return Fa([this.basepath,V])===E}))==null?void 0:p.id];j=this.resolvePathWithBase(E,F?.to??E)}const O={...(h=Vp(x))==null?void 0:h.params};let A=(s.params??!0)===!0?O:{...O,...Mc(s.params,O)};Object.keys(A).length>0&&o?.matchedRoutes.map(F=>{var U;return((U=F.options.params)==null?void 0:U.stringify)??F.options.stringifyParams}).filter(Boolean).forEach(F=>{A={...A,...F(A)}}),j=Tg({path:j,params:A??{},leaveWildcards:!1,leaveParams:n.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let D=I;if(n._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let F={};o?.matchedRoutes.forEach(U=>{try{U.options.validateSearch&&(F={...F,...Xw(U.options.validateSearch,{...F,...D})??{}})}catch{}}),D=F}D=(F=>{const U=o?.matchedRoutes.reduce((te,Y)=>{var le;const se=[];if("search"in Y.options)(le=Y.options.search)!=null&&le.middlewares&&se.push(...Y.options.search.middlewares);else if(Y.options.preSearchFilters||Y.options.postSearchFilters){const ne=({search:oe,next:ee})=>{let ue=oe;"preSearchFilters"in Y.options&&Y.options.preSearchFilters&&(ue=Y.options.preSearchFilters.reduce((ye,we)=>we(ye),oe));const de=ee(ue);return"postSearchFilters"in Y.options&&Y.options.postSearchFilters?Y.options.postSearchFilters.reduce((ye,we)=>we(ye),de):de};se.push(ne)}if(n._includeValidateSearch&&Y.options.validateSearch){const ne=({search:oe,next:ee})=>{try{const ue=ee(oe);return{...ue,...Xw(Y.options.validateSearch,ue)??{}}}catch{}};se.push(ne)}return te.concat(se)},[])??[],V=({search:te})=>s.search?s.search===!0?te:Mc(s.search,te):{};U.push(V);const z=(te,Y)=>{if(te>=U.length)return Y;const le=U[te];return le({search:Y,next:ne=>z(te+1,ne)})};return z(0,F)})(D),D=Zs(I,D);const W=this.options.stringifySearch(D),P=s.hash===!0?this.latestLocation.hash:s.hash?Mc(s.hash,this.latestLocation.hash):void 0,R=P?`#${P}`:"";let $=s.state===!0?this.latestLocation.state:s.state?Mc(s.state,this.latestLocation.state):{};return $=Zs(this.latestLocation.state,$),{pathname:j,search:D,searchStr:W,state:$,hash:P??"",href:`${j}${W}${R}`,unmaskOnReload:s.unmaskOnReload}},i=(s={},o)=>{var l;const u=r(s);let f=o?r(o):void 0;if(!f){let b={};const x=(l=this.options.routeMasks)==null?void 0:l.find(_=>{const E=jg(this.basepath,u.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return E?(b=E,!0):!1});if(x){const{from:_,...E}=x;o={...py(n,["from"]),...E,params:b},f=r(o)}}const p=this.getMatchedRoutes(u,s),h=r(s,p);if(f){const b=this.getMatchedRoutes(f,o),x=r(o,b);h.maskedLocation=x}return h};return n.mask?i(n,{...py(n,["from"]),...n.mask}):i(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...i})=>{const s=()=>{i.state.key=this.latestLocation.state.key;const u=bd(i.state,this.latestLocation.state);return delete i.state.key,u},o=this.latestLocation.href===i.href,l=this.commitLocationPromise;if(this.commitLocationPromise=rd(()=>{l?.resolve()}),o&&s())this.load();else{let{maskedLocation:u,hashScrollIntoView:f,...p}=i;u&&(p={...u,state:{...u.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=f??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=i.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:i,viewTransition:s,ignoreBlocker:o,href:l,...u}={})=>{if(l){const p=this.history.location.state.__TSR_index,h=lh(l,{__TSR_index:n?p:p+1});u.to=h.pathname,u.search=this.options.parseSearch(h.search),u.hash=h.hash.slice(1)}const f=this.buildLocation({...u,_includeValidateSearch:!0});return this.commitLocation({...f,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:i,ignoreBlocker:o})},this.navigate=({to:n,reloadDocument:r,href:i,...s})=>{if(r){i||(i=this.buildLocation({to:n,...s}).href),s.replace?window.location.replace(i):window.location.href=i;return}return this.buildAndCommitLocation({...s,href:i,to:n})},this.load=async n=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,i,s;for(s=new Promise(o=>{this.startReactTransition(async()=>{var l;try{const u=this.latestLocation,f=this.state.resolvedLocation,p=f.href!==u.href,h=f.pathname!==u.pathname;this.cancelMatches();let b;Gw(()=>{b=this.matchRoutes(u),this.__store.setState(x=>({...x,status:"pending",isLoading:!0,location:u,pendingMatches:b,cachedMatches:x.cachedMatches.filter(_=>!b.find(E=>E.id===_.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),this.emit({type:"onBeforeLoad",fromLocation:f,toLocation:u,pathChanged:h,hrefChanged:p}),await this.loadMatches({sync:n?.sync,matches:b,location:u,onReady:async()=>{this.startViewTransition(async()=>{let x,_,E;Gw(()=>{this.__store.setState(I=>{const T=I.matches,j=I.pendingMatches||I.matches;return x=T.filter(O=>!j.find(A=>A.id===O.id)),_=j.filter(O=>!T.find(A=>A.id===O.id)),E=T.filter(O=>j.find(A=>A.id===O.id)),{...I,isLoading:!1,loadedAt:Date.now(),matches:j,pendingMatches:void 0,cachedMatches:[...I.cachedMatches,...x.filter(O=>O.status!=="error")]}}),this.clearExpiredCache()}),[[x,"onLeave"],[_,"onEnter"],[E,"onStay"]].forEach(([I,T])=>{I.forEach(j=>{var O,A;(A=(O=this.looseRoutesById[j.routeId].options)[T])==null||A.call(O,j)})})})}})}catch(u){Yw(u)?(r=u,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):Eo(u)&&(i=u),this.__store.setState(f=>({...f,statusCode:r?r.statusCode:i?404:f.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&((l=this.commitLocationPromise)==null||l.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let i;typeof r=="object"&&this.isViewTransitionTypesSupported?i={update:n,types:r.types}:i=n,document.startViewTransition(i)}else n()},this.updateMatch=(n,r)=>{var i;let s;const o=(i=this.state.pendingMatches)==null?void 0:i.find(p=>p.id===n),l=this.state.matches.find(p=>p.id===n),u=this.state.cachedMatches.find(p=>p.id===n),f=o?"pendingMatches":l?"matches":u?"cachedMatches":"";return f&&this.__store.setState(p=>{var h;return{...p,[f]:(h=p[f])==null?void 0:h.map(b=>b.id===n?s=r(b):b)}}),s},this.getMatch=n=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===n),this.loadMatches=async({location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch,sync:l})=>{let u,f=!1;const p=async()=>{f||(f=!0,await s?.())},h=x=>!!(i&&!this.state.matches.find(_=>_.id===x));!this.isServer&&!this.state.matches.length&&p();const b=(x,_)=>{var E,I,T;if(Yw(_)&&!_.reloadDocument)throw _;if(jc(_)||Eo(_)){if(o(x.id,j=>({...j,status:jc(_)?"redirected":Eo(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=x.routeId),(E=x.beforeLoadPromise)==null||E.resolve(),(I=x.loaderPromise)==null||I.resolve(),(T=x.loadPromise)==null||T.resolve(),jc(_))throw f=!0,_=this.resolveRedirect({..._,_fromLocation:n}),_;if(Eo(_))throw this._handleNotFound(r,_,{updateMatch:o}),_}};try{await new Promise((x,_)=>{(async()=>{var E,I,T;try{const j=(D,M,W)=>{var P,R;const{id:$,routeId:F}=r[D],U=this.looseRoutesById[F];if(M instanceof Promise)throw M;M.routerCode=W,u=u??D,b(this.getMatch($),M);try{(R=(P=U.options).onError)==null||R.call(P,M)}catch(V){M=V,b(this.getMatch($),M)}o($,V=>{var z,te;return(z=V.beforeLoadPromise)==null||z.resolve(),(te=V.loadPromise)==null||te.resolve(),{...V,error:M,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[D,{id:M,routeId:W}]of r.entries()){const P=this.getMatch(M),R=(E=r[D-1])==null?void 0:E.id,$=this.looseRoutesById[W],F=$.options.pendingMs??this.options.defaultPendingMs,U=!!(s&&!this.isServer&&!h(M)&&($.options.loader||$.options.beforeLoad)&&typeof F=="number"&&F!==1/0&&($.options.pendingComponent??this.options.defaultPendingComponent));let V=!0;if((P.beforeLoadPromise||P.loaderPromise)&&(U&&setTimeout(()=>{try{p()}catch{}},F),await P.beforeLoadPromise,V=this.getMatch(M).status!=="success"),V){try{o(M,Ne=>({...Ne,loadPromise:rd(()=>{var ze;(ze=Ne.loadPromise)==null||ze.resolve()}),beforeLoadPromise:rd()}));const z=new AbortController;let te;U&&(te=setTimeout(()=>{try{p()}catch{}},F));const{paramsError:Y,searchError:le}=this.getMatch(M);Y&&j(D,Y,"PARSE_PARAMS"),le&&j(D,le,"VALIDATE_SEARCH");const se=()=>R?this.getMatch(R).context:this.options.context??{};o(M,Ne=>({...Ne,isFetching:"beforeLoad",fetchCount:Ne.fetchCount+1,abortController:z,pendingTimeout:te,context:{...se(),...Ne.__routeContext}}));const{search:ne,params:oe,context:ee,cause:ue}=this.getMatch(M),de=h(M),ye={search:ne,abortController:z,params:oe,preload:de,context:ee,location:n,navigate:Ne=>this.navigate({...Ne,_fromLocation:n}),buildLocation:this.buildLocation,cause:de?"preload":ue,matches:r};let we=await ((T=(I=$.options).beforeLoad)==null?void 0:T.call(I,ye))??{};this.serializeLoaderData&&(we=this.serializeLoaderData("__beforeLoadContext",we,{router:this,match:this.getMatch(M)})),(jc(we)||Eo(we))&&j(D,we,"BEFORE_LOAD"),o(M,Ne=>({...Ne,__beforeLoadContext:we,context:{...se(),...Ne.__routeContext,...we},abortController:z}))}catch(z){j(D,z,"BEFORE_LOAD")}o(M,z=>{var te;return(te=z.beforeLoadPromise)==null||te.resolve(),{...z,beforeLoadPromise:void 0,isFetching:!1}})}}const O=r.slice(0,u),A=[];O.forEach(({id:D,routeId:M},W)=>{A.push((async()=>{const{loaderPromise:P}=this.getMatch(D);let R=!1,$=!1;if(P){await P;const F=this.getMatch(D);F.error&&b(F,F.error)}else{const F=A[W-1],U=this.looseRoutesById[M],V=()=>{const{params:ue,loaderDeps:de,abortController:ye,context:we,cause:Ne}=this.getMatch(D),ze=h(D);return{params:ue,deps:de,preload:!!ze,parentMatchPromise:F,abortController:ye,context:we,location:n,navigate:Oe=>this.navigate({...Oe,_fromLocation:n}),cause:ze?"preload":Ne,route:U}},z=Date.now()-this.getMatch(D).updatedAt,te=h(D),Y=te?U.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:U.options.staleTime??this.options.defaultStaleTime??0,le=U.options.shouldReload,se=typeof le=="function"?le(V()):le;o(D,ue=>({...ue,loaderPromise:rd(),preload:!!te&&!this.state.matches.find(de=>de.id===D)}));const ne=async()=>{var ue,de,ye,we,Ne,ze,Oe,De;try{const Je=async()=>{const Xe=this.getMatch(D);Xe.minPendingPromise&&await Xe.minPendingPromise};try{this.loadRouteChunk(U),o(D,nn=>({...nn,isFetching:"loader"}));let Xe=await ((de=(ue=U.options).loader)==null?void 0:de.call(ue,V()));this.serializeLoaderData&&(Xe=this.serializeLoaderData("loaderData",Xe,{router:this,match:this.getMatch(D)})),b(this.getMatch(D),Xe),await U._lazyPromise,await Je();const Ue=(we=(ye=U.options).head)==null?void 0:we.call(ye,{matches:r,match:this.getMatch(D),params:this.getMatch(D).params,loaderData:Xe}),ct=Ue?.meta,_t=Ue?.links,jt=Ue?.scripts,Vt=(ze=(Ne=U.options).headers)==null?void 0:ze.call(Ne,{loaderData:Xe});o(D,nn=>({...nn,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Xe,meta:ct,links:_t,scripts:jt,headers:Vt}))}catch(Xe){let Ue=Xe;await Je(),b(this.getMatch(D),Xe);try{(De=(Oe=U.options).onError)==null||De.call(Oe,Xe)}catch(ct){Ue=ct,b(this.getMatch(D),ct)}o(D,ct=>({...ct,error:Ue,status:"error",isFetching:!1}))}await U._componentsPromise}catch(Je){o(D,Xe=>({...Xe,loaderPromise:void 0})),b(this.getMatch(D),Je)}},{status:oe,invalid:ee}=this.getMatch(D);R=oe==="success"&&(ee||(se??z>Y)),te&&U.options.preload===!1||(R&&!l?($=!0,(async()=>{try{await ne();const{loaderPromise:ue,loadPromise:de}=this.getMatch(D);ue?.resolve(),de?.resolve(),o(D,ye=>({...ye,loaderPromise:void 0}))}catch(ue){Yw(ue)&&await this.navigate(ue)}})()):(oe!=="success"||R&&l)&&await ne())}if(!$){const{loaderPromise:F,loadPromise:U}=this.getMatch(D);F?.resolve(),U?.resolve()}return o(D,F=>({...F,isFetching:$?F.isFetching:!1,loaderPromise:$?F.loaderPromise:void 0,invalid:!1})),this.getMatch(D)})())}),await Promise.all(A),x()}catch(j){_(j)}})()}),await p()}catch(x){if(jc(x)||Eo(x))throw Eo(x)&&!i&&await p(),x}return r},this.invalidate=n=>{const r=i=>{var s;return((s=n?.filter)==null?void 0:s.call(n,i))??!0?{...i,invalid:!0,...i.status==="error"?{status:"pending",error:void 0}:{}}:i};return this.__store.setState(i=>{var s;return{...i,matches:i.matches.map(r),cachedMatches:i.cachedMatches.map(r),pendingMatches:(s=i.pendingMatches)==null?void 0:s.map(r)}}),this.load({sync:n?.sync})},this.resolveRedirect=n=>{const r=n;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(i=>({...i,cachedMatches:i.cachedMatches.filter(s=>!r(s))})):this.__store.setState(i=>({...i,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const i=this.looseRoutesById[r.routeId];if(!i.options.loader)return!0;const s=(r.preload?i.options.preloadGcTime??this.options.defaultPreloadGcTime:i.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<s)};this.clearCache({filter:n})},this.loadRouteChunk=n=>(n._lazyPromise===void 0&&(n.lazyFn?n._lazyPromise=n.lazyFn().then(r=>{const{id:i,...s}=r.options;Object.assign(n.options,s)}):n._lazyPromise=Promise.resolve()),n._componentsPromise===void 0&&(n._componentsPromise=n._lazyPromise.then(()=>Promise.all(V3.map(async r=>{const i=n.options[r];i?.preload&&await i.preload()})))),n._componentsPromise),this.preloadRoute=async n=>{const r=this.buildLocation(n);let i=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(l=>l.id)),o=new Set([...s,...this.state.cachedMatches.map(l=>l.id)]);Gw(()=>{i.forEach(l=>{o.has(l.id)||this.__store.setState(u=>({...u,cachedMatches:[...u.cachedMatches,l]}))})});try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(l,u)=>{s.has(l)?i=i.map(f=>f.id===l?u(f):f):this.updateMatch(l,u)}}),i}catch(l){if(jc(l))return l.reloadDocument?void 0:await this.preloadRoute({...l,_fromLocation:r});console.error(l);return}},this.matchRoute=(n,r)=>{const i={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(i);if(r?.pending&&this.state.status!=="pending")return!1;const l=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,u=jg(this.basepath,l.pathname,{...r,to:s.pathname});return!u||n.params&&!bd(u,n.params,{partial:!0})?!1:u&&(r?.includeSearch??!0)?bd(l.search,s.search,{partial:!0})?u:!1:u},this.dehydrate=()=>{var n;const r=((n=this.options.errorSerializer)==null?void 0:n.serialize)??m4;return{state:{dehydratedMatches:this.state.matches.map(i=>({...py(i,["id","status","updatedAt"]),error:i.error?{data:r(i.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var n,r,i;let s;typeof document<"u"&&(s=this.options.transformer.parse((n=window.__TSR__)==null?void 0:n.dehydrated)),Is(s),this.dehydratedData=s.payload,(i=(r=this.options).hydrate)==null||i.call(r,s.payload);const o=s.router.state,l=this.matchRoutes(this.state.location).map(u=>{const f=o.dehydratedMatches.find(p=>p.id===u.id);return Is(f,`Could not find a client-side match for dehydrated match with id: ${u.id}!`),{...u,...f}});this.__store.setState(u=>({...u,matches:l})),this.manifest=s.router.manifest},this.injectedHtml=[],this.injectHtml=n=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(i=>i!==r),n);this.injectedHtml.push(r)},this.injectScript=(n,r)=>{this.injectHtml(`<script class='tsr-once'>${n}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()</script>`)},this.streamedKeys=new Set,this.getStreamedValue=n=>{var r;if(this.isServer)return;const i=(r=window.__TSR__)==null?void 0:r.streamedValues[n];if(i)return i.parsed||(i.parsed=this.options.transformer.parse(i.value)),i.parsed},this.streamValue=(n,r)=>{var i;this.streamedKeys.has(n),this.streamedKeys.add(n),this.injectScript(`__TSR__.streamedValues['${n}'] = { value: ${(i=this.serializer)==null?void 0:i.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(n,r,{updateMatch:i=this.updateMatch}={})=>{const s=Object.fromEntries(n.map(u=>[u.routeId,u]));let o=(r.global?this.looseRoutesById[Ns]:this.looseRoutesById[r.routeId])||this.looseRoutesById[Ns];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==Ns;)o=o.parentRoute,Is(o);const l=s[o.id];Is(l,"Could not find match for route: "+o.id),i(l.id,u=>({...u,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(n,r,{updateMatch:i}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??JB,parseSearch:e.parseSearch??GB,transformer:e.transformer??Np}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(e,n,r){return typeof e=="string"?this.matchRoutesInternal({pathname:e,search:n},r):this.matchRoutesInternal(e,n)}matchRoutesInternal(e,n){const{foundRoute:r,matchedRoutes:i,routeParams:s}=this.getMatchedRoutes(e,n?.dest);let o=!1;(r?r.path!=="/"&&s["**"]:$c(e.pathname))&&(this.options.notFoundRoute?i.push(this.options.notFoundRoute):o=!0);const l=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let h=i.length-1;h>=0;h--){const b=i[h];if(b.children)return b.id}return Ns}})(),u=i.map(h=>{var b;let x;const _=((b=h.options.params)==null?void 0:b.parse)??h.options.parseParams;if(_)try{const E=_(s);Object.assign(s,E)}catch(E){if(x=new p4(E.message,{cause:E}),n?.throwOnError)throw x;return x}}),f=[],p=h=>h?.id?h.context??this.options.context??{}:this.options.context??{};return i.forEach((h,b)=>{var x,_,E,I;const T=f[b-1],[j,O]=(()=>{const V=T?.search??e.search;try{const z=Xw(h.options.validateSearch,V)??{};return[{...V,...z},void 0]}catch(z){const te=new JS(z.message,{cause:z});if(n?.throwOnError)throw te;return[V,te]}})(),A=((_=(x=h.options).loaderDeps)==null?void 0:_.call(x,{search:j}))??"",D=A?JSON.stringify(A):"",M=Tg({path:h.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),W=Tg({path:h.id,params:s,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+D,P=this.getMatch(W),R=this.state.matches.find(V=>V.routeId===h.id),$=R?"stay":"enter";let F;if(P)F={...P,cause:$,params:R?Zs(R.params,s):s,search:Zs(R?R.search:P.search,j)};else{const V=h.options.loader||h.options.beforeLoad||h.lazyFn||u4(h)?"pending":"success";F={id:W,index:b,routeId:h.id,params:R?Zs(R.params,s):s,pathname:Fa([this.basepath,M]),updatedAt:Date.now(),search:R?Zs(R.search,j):j,searchError:void 0,status:V,isFetching:!1,error:void 0,paramsError:u[b],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:$,loaderDeps:R?Zs(R.loaderDeps,A):A,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:h.options.staticData||{},loadPromise:rd(),fullPath:h.fullPath}}F.status==="success"&&(F.headers=(I=(E=h.options).headers)==null?void 0:I.call(E,{loaderData:F.loaderData})),n?.preload||(F.globalNotFound=l===h.id),F.searchError=O;const U=p(T);F.context={...U,...F.__routeContext,...F.__beforeLoadContext},f.push(F)}),f.forEach((h,b)=>{var x,_,E,I;const T=this.looseRoutesById[h.routeId];if(!this.getMatch(h.id)&&n?._buildLocation!==!0){const A=f[b-1],D=p(A),M={deps:h.loaderDeps,params:h.params,context:D,location:e,navigate:W=>this.navigate({...W,_fromLocation:e}),buildLocation:this.buildLocation,cause:h.cause,abortController:h.abortController,preload:!!h.preload,matches:f};h.__routeContext=((_=(x=T.options).context)==null?void 0:_.call(x,M))??{},h.context={...D,...h.__routeContext,...h.__beforeLoadContext}}const O=(I=(E=T.options).head)==null?void 0:I.call(E,{matches:f,match:h,params:h.params,loaderData:h.loaderData??void 0});h.links=O?.links,h.scripts=O?.scripts,h.meta=O?.meta}),f}}class JS extends Error{}class p4 extends Error{}function h4(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function m4(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function RC(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function qC(t){if("name"in t&&"message"in t){const e=new Error(t.message);return e.name=t.name,e}return t.data}const pb=Q.createContext(void 0),g4=Q.createContext(void 0);function Wl(t){const e=Q.useContext(t.from?g4:pb);return Bi({select:r=>{const i=r.matches.find(s=>t.from?t.from===s.routeId:s.id===e);if(Is(!((t.shouldThrow??!0)&&!i),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),i!==void 0)return t.select?t.select(i):i},structuralSharing:t.structuralSharing})}function Vi(t){return Wl({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function y4(t){const{select:e,...n}=t;return Wl({...n,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function sn(t){return Wl({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function v4(t){return Wl({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function tf(t){const{navigate:e}=Lo();return Q.useCallback(n=>e({...n}),[e])}let H3=class{constructor(e){this.init=n=>{var r,i;this.originalIndex=n.originalIndex;const s=this.options,o=!s?.path&&!s?.id;this.parentRoute=(i=(r=this.options).getParentRoute)==null?void 0:i.call(r),o?this._path=Ns:Is(this.parentRoute);let l=o?Ns:s.path;l&&l!=="/"&&(l=y1(l));const u=s?.id||l;let f=o?Ns:Fa([this.parentRoute.id===Ns?"":this.parentRoute.id,u]);l===Ns&&(l="/"),f!==Ns&&(f=Fa(["/",f]));const p=f===Ns?"/":Fa([this.parentRoute.fullPath,l]);this._path=l,this._id=f,this._fullPath=p,this._to=p,this._ssr=s?.ssr??n.defaultSsr??!0},this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.useMatch=n=>Wl({select:n?.select,from:this.id,structuralSharing:n?.structuralSharing}),this.useRouteContext=n=>Wl({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>v4({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useParams=n=>sn({select:n?.select,structuralSharing:n?.structuralSharing,from:this.id}),this.useLoaderDeps=n=>y4({...n,from:this.id}),this.useLoaderData=n=>Vi({...n,from:this.id}),this.useNavigate=()=>tf({from:this.id}),this.options=e||{},this.isRoot=!e?.getParentRoute,Is(!(e?.id&&e?.path)),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(e){return this._addFileChildren(e)}_addFileChildren(e){return Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this}};function b4(t){return new H3(t)}function x4(){return t=>_4(t)}class w4 extends H3{constructor(e){super(e)}addChildren(e){return super.addChildren(e),this}_addFileChildren(e){return super._addFileChildren(e),this}_addFileTypes(){return this}}function _4(t){return new w4(t)}function $t(t){return new S4(t,{silent:!0}).createRoute}class S4{constructor(e,n){this.path=e,this.createRoute=r=>{this.silent;const i=b4(r);return i.isRoot=!1,i},this.silent=n?.silent}}function hy(t){return d.jsx(d.Fragment,{children:t.children})}function K3(t,e,n){return e.options.notFoundComponent?d.jsx(e.options.notFoundComponent,{data:n}):t.options.defaultNotFoundComponent?d.jsx(t.options.defaultNotFoundComponent,{data:n}):d.jsx(c4,{})}const Q3=Q.memo(function({matchId:e}){var n,r;const i=Lo(),s=Bi({select:I=>{var T;return(T=I.matches.find(j=>j.id===e))==null?void 0:T.routeId}});Is(s);const o=i.routesById[s],l=o.options.pendingComponent??i.options.defaultPendingComponent,u=l?d.jsx(l,{}):null,f=o.options.errorComponent??i.options.defaultErrorComponent,p=o.options.onCatch??i.options.defaultOnCatch,h=o.isRoot?o.options.notFoundComponent??((n=i.options.notFoundRoute)==null?void 0:n.options.component):o.options.notFoundComponent,b=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??l??((r=o.options.errorComponent)==null?void 0:r.preload))?Q.Suspense:hy,x=f?v1:hy,_=h?l4:hy,E=Bi({select:I=>I.loadedAt});return d.jsx(pb.Provider,{value:e,children:d.jsx(b,{fallback:u,children:d.jsx(x,{getResetKey:()=>E,errorComponent:f||fb,onCatch:(I,T)=>{if(Eo(I))throw I;p?.(I,T)},children:d.jsx(_,{fallback:I=>{if(!h||I.routeId&&I.routeId!==s||!I.routeId&&!o.isRoot)throw I;return Q.createElement(h,I)},children:d.jsx(E4,{matchId:e})})})})})}),E4=Q.memo(function({matchId:e}){var n,r,i,s,o;const l=Lo(),{match:u,matchIndex:f,routeId:p}=Bi({select:_=>{const E=_.matches.findIndex(j=>j.id===e),I=_.matches[E];return{routeId:I.routeId,matchIndex:E,match:py(I,["id","status","error"])}},structuralSharing:!0}),h=l.routesById[p],b=Q.useMemo(()=>{const _=h.options.component??l.options.defaultComponent;return _?d.jsx(_,{}):d.jsx(fo,{})},[h.options.component,l.options.defaultComponent]),x=(h.options.errorComponent??l.options.defaultErrorComponent)||fb;if(u.status==="notFound"){let _;return RC(u.error)?_=(((n=l.options.errorSerializer)==null?void 0:n.deserialize)??qC)(u.error.data):_=u.error,Is(Eo(_)),K3(l,h,_)}if(u.status==="redirected")throw Is(jc(u.error)),(r=l.getMatch(u.id))==null?void 0:r.loadPromise;if(u.status==="error"){if(l.isServer)return d.jsx(x,{error:u.error,info:{componentStack:""}});throw RC(u.error)?(((i=l.options.errorSerializer)==null?void 0:i.deserialize)??qC)(u.error.data):u.error}if(u.status==="pending"){const _=h.options.pendingMinMs??l.options.defaultPendingMinMs;if(_&&!((s=l.getMatch(u.id))!=null&&s.minPendingPromise)&&!l.isServer){const E=rd();Promise.resolve().then(()=>{l.updateMatch(u.id,I=>({...I,minPendingPromise:E}))}),setTimeout(()=>{E.resolve(),l.updateMatch(u.id,I=>({...I,minPendingPromise:void 0}))},_)}throw(o=l.getMatch(u.id))==null?void 0:o.loadPromise}return d.jsxs(d.Fragment,{children:[b,l.AfterEachMatch?d.jsx(l.AfterEachMatch,{match:u,matchIndex:f}):null]})}),fo=Q.memo(function(){const e=Lo(),n=Q.useContext(pb),r=Bi({select:f=>{var p;return(p=f.matches.find(h=>h.id===n))==null?void 0:p.routeId}}),i=e.routesById[r],s=Bi({select:f=>{const h=f.matches.find(b=>b.id===n);return Is(h),h.globalNotFound}}),o=Bi({select:f=>{var p;const h=f.matches,b=h.findIndex(x=>x.id===n);return(p=h[b+1])==null?void 0:p.id}});if(s)return K3(e,i,void 0);if(!o)return null;const l=d.jsx(Q3,{matchId:o}),u=e.options.defaultPendingComponent?d.jsx(e.options.defaultPendingComponent,{}):null;return n===Ns?d.jsx(Q.Suspense,{fallback:u,children:l}):l});var e_={exports:{}},as={},t_={exports:{}},n_={};var AC;function N4(){return AC||(AC=1,function(t){function e(se,ne){var oe=se.length;se.push(ne);e:for(;0<oe;){var ee=oe-1>>>1,ue=se[ee];if(0<i(ue,ne))se[ee]=ne,se[oe]=ue,oe=ee;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ne=se[0],oe=se.pop();if(oe!==ne){se[0]=oe;e:for(var ee=0,ue=se.length,de=ue>>>1;ee<de;){var ye=2*(ee+1)-1,we=se[ye],Ne=ye+1,ze=se[Ne];if(0>i(we,oe))Ne<ue&&0>i(ze,we)?(se[ee]=ze,se[Ne]=oe,ee=Ne):(se[ee]=we,se[ye]=oe,ee=ye);else if(Ne<ue&&0>i(ze,oe))se[ee]=ze,se[Ne]=oe,ee=Ne;else break e}}return ne}function i(se,ne){var oe=se.sortIndex-ne.sortIndex;return oe!==0?oe:se.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],f=[],p=1,h=null,b=3,x=!1,_=!1,E=!1,I=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(se){for(var ne=n(f);ne!==null;){if(ne.callback===null)r(f);else if(ne.startTime<=se)r(f),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(f)}}function A(se){if(E=!1,O(se),!_)if(n(u)!==null)_=!0,Y(D);else{var ne=n(f);ne!==null&&le(A,ne.startTime-se)}}function D(se,ne){_=!1,E&&(E=!1,T(P),P=-1),x=!0;var oe=b;try{for(O(ne),h=n(u);h!==null&&(!(h.expirationTime>ne)||se&&!F());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,b=h.priorityLevel;var ue=ee(h.expirationTime<=ne);ne=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(u)&&r(u),O(ne)}else r(u);h=n(u)}if(h!==null)var de=!0;else{var ye=n(f);ye!==null&&le(A,ye.startTime-ne),de=!1}return de}finally{h=null,b=oe,x=!1}}var M=!1,W=null,P=-1,R=5,$=-1;function F(){return!(t.unstable_now()-$<R)}function U(){if(W!==null){var se=t.unstable_now();$=se;var ne=!0;try{ne=W(!0,se)}finally{ne?V():(M=!1,W=null)}}else M=!1}var V;if(typeof j=="function")V=function(){j(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,te=z.port2;z.port1.onmessage=U,V=function(){te.postMessage(null)}}else V=function(){I(U,0)};function Y(se){W=se,M||(M=!0,V())}function le(se,ne){P=I(function(){se(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,Y(D))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(se){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var oe=b;b=ne;try{return se()}finally{b=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,ne){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var oe=b;b=se;try{return ne()}finally{b=oe}},t.unstable_scheduleCallback=function(se,ne,oe){var ee=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ee+oe:ee):oe=ee,se){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=0x3fffffff;break;case 4:ue=1e4;break;default:ue=5e3}return ue=oe+ue,se={id:p++,callback:ne,priorityLevel:se,startTime:oe,expirationTime:ue,sortIndex:-1},oe>ee?(se.sortIndex=oe,e(f,se),n(u)===null&&se===n(f)&&(E?(T(P),P=-1):E=!0,le(A,oe-ee))):(se.sortIndex=ue,e(u,se),_||x||(_=!0,Y(D))),se},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(se){var ne=b;return function(){var oe=b;b=ne;try{return se.apply(this,arguments)}finally{b=oe}}}}(n_)),n_}var PC;function k4(){return PC||(PC=1,t_.exports=N4()),t_.exports}var FC;function I4(){if(FC)return as;FC=1;var t=Gh(),e=k4();function n(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function b(a){return u.call(h,a)?!0:u.call(p,a)?!1:f.test(a)?h[a]=!0:(p[a]=!0,!1)}function x(a,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function _(a,c,m,w){if(c===null||typeof c>"u"||x(a,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function E(a,c,m,w,k,q,Z){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=k,this.mustUseProperty=m,this.propertyName=a,this.type=c,this.sanitizeURL=q,this.removeEmptyString=Z}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){I[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];I[c]=new E(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){I[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){I[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){I[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){I[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){I[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){I[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){I[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function j(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(T,j);I[c]=new E(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(T,j);I[c]=new E(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(T,j);I[c]=new E(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){I[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),I.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){I[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function O(a,c,m,w){var k=I.hasOwnProperty(c)?I[c]:null;(k!==null?k.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,m,k,w)&&(m=null),w||k===null?b(c)&&(m===null?a.removeAttribute(c):a.setAttribute(c,""+m)):k.mustUseProperty?a[k.propertyName]=m===null?k.type===3?!1:"":m:(c=k.attributeName,w=k.attributeNamespace,m===null?a.removeAttribute(c):(k=k.type,m=k===3||k===4&&m===!0?"":""+m,w?a.setAttributeNS(w,c,m):a.setAttribute(c,m))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),M=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),F=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),se=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=se&&a[se]||a["@@iterator"],typeof a=="function"?a:null)}var oe=Object.assign,ee;function ue(a){if(ee===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);ee=c&&c[1]||""}return`
`+ee+a}var de=!1;function ye(a,c){if(!a||de)return"";de=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(He){var w=He}Reflect.construct(a,[],c)}else{try{c.call()}catch(He){w=He}a.call(c.prototype)}else{try{throw Error()}catch(He){w=He}a()}}catch(He){if(He&&w&&typeof He.stack=="string"){for(var k=He.stack.split(`
`),q=w.stack.split(`
`),Z=k.length-1,ge=q.length-1;1<=Z&&0<=ge&&k[Z]!==q[ge];)ge--;for(;1<=Z&&0<=ge;Z--,ge--)if(k[Z]!==q[ge]){if(Z!==1||ge!==1)do if(Z--,ge--,0>ge||k[Z]!==q[ge]){var Se=`
`+k[Z].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=Z&&0<=ge);break}}}finally{de=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?ue(a):""}function we(a){switch(a.tag){case 5:return ue(a.type);case 16:return ue("Lazy");case 13:return ue("Suspense");case 19:return ue("SuspenseList");case 0:case 2:case 15:return a=ye(a.type,!1),a;case 11:return a=ye(a.type.render,!1),a;case 1:return a=ye(a.type,!0),a;default:return""}}function Ne(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case W:return"Fragment";case M:return"Portal";case R:return"Profiler";case P:return"StrictMode";case V:return"Suspense";case z:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case F:return(a.displayName||"Context")+".Consumer";case $:return(a._context.displayName||"Context")+".Provider";case U:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case te:return c=a.displayName||null,c!==null?c:Ne(a.type)||"Memo";case Y:c=a._payload,a=a._init;try{return Ne(a(c))}catch{}}return null}function ze(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(c);case 8:return c===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Oe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function De(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Je(a){var c=De(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,q=m.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return k.call(this)},set:function(Z){w=""+Z,q.call(this,Z)}}),Object.defineProperty(a,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(Z){w=""+Z},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Xe(a){a._valueTracker||(a._valueTracker=Je(a))}function Ue(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return a&&(w=De(a)?a.checked?"true":"false":a.value),a=w,a!==m?(c.setValue(a),!0):!1}function ct(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function _t(a,c){var m=c.checked;return oe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function jt(a,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Oe(c.value!=null?c.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Vt(a,c){c=c.checked,c!=null&&O(a,"checked",c,!1)}function nn(a,c){Vt(a,c);var m=Oe(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?ve(a,c.type,m):c.hasOwnProperty("defaultValue")&&ve(a,c.type,Oe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function xe(a,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,m||c===a.value||(a.value=c),a.defaultValue=c}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function ve(a,c,m){(c!=="number"||ct(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var ke=Array.isArray;function Ae(a,c,m,w){if(a=a.options,c){c={};for(var k=0;k<m.length;k++)c["$"+m[k]]=!0;for(m=0;m<a.length;m++)k=c.hasOwnProperty("$"+a[m].value),a[m].selected!==k&&(a[m].selected=k),k&&w&&(a[m].defaultSelected=!0)}else{for(m=""+Oe(m),c=null,k=0;k<a.length;k++){if(a[k].value===m){a[k].selected=!0,w&&(a[k].defaultSelected=!0);return}c!==null||a[k].disabled||(c=a[k])}c!==null&&(c.selected=!0)}}function Ve(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function rt(a,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(n(92));if(ke(m)){if(1<m.length)throw Error(n(93));m=m[0]}c=m}c==null&&(c=""),m=c}a._wrapperState={initialValue:Oe(m)}}function Me(a,c){var m=Oe(c.value),w=Oe(c.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),c.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function ut(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Qt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gt(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Qt(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mn,ur=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,k){MSApp.execUnsafeLocalFunction(function(){return a(c,m,w,k)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=mn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Ln(a,c){if(c){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=c;return}}a.textContent=c}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oi=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(a){Oi.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Hr[c]=Hr[a]})});function Tr(a,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Hr.hasOwnProperty(a)&&Hr[a]?(""+c).trim():c+"px"}function Jt(a,c){a=a.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,k=Tr(m,c[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,k):a[m]=k}}var Zi=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yi(a,c){if(c){if(Zi[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Xi(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function da(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var lc=null,Ms=null,H=null;function hu(a){if(a=Jf(a)){if(typeof lc!="function")throw Error(n(280));var c=a.stateNode;c&&(c=zm(c),lc(a.stateNode,a.type,c))}}function un(a){Ms?H?H.push(a):H=[a]:Ms=a}function mu(){if(Ms){var a=Ms,c=H;if(H=Ms=null,hu(a),c)for(a=0;a<c.length;a++)hu(c[a])}}function gu(a,c){return a(c)}function yu(){}var cc=!1;function fa(a,c,m){if(cc)return a(c,m);cc=!0;try{return gu(a,c,m)}finally{cc=!1,(Ms!==null||H!==null)&&(yu(),mu())}}function es(a,c){var m=a.stateNode;if(m===null)return null;var w=zm(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,c,typeof m));return m}var uc=!1;if(l)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){uc=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{uc=!1}function Sf(a,c,m,w,k,q,Z,ge,Se){var He=Array.prototype.slice.call(arguments,3);try{c.apply(m,He)}catch(ht){this.onError(ht)}}var ha=!1,$s=null,Ja=!1,Bs=null,Ef={onError:function(a){ha=!0,$s=a}};function Nf(a,c,m,w,k,q,Z,ge,Se){ha=!1,$s=null,Sf.apply(Ef,arguments)}function vu(a,c,m,w,k,q,Z,ge,Se){if(Nf.apply(this,arguments),ha){if(ha){var He=$s;ha=!1,$s=null}else throw Error(n(198));Ja||(Ja=!0,Bs=He)}}function zs(a){var c=a,m=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(m=c.return),a=c.return;while(a)}return c.tag===3?m:null}function bu(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function xu(a){if(zs(a)!==a)throw Error(n(188))}function kf(a){var c=a.alternate;if(!c){if(c=zs(a),c===null)throw Error(n(188));return c!==a?null:a}for(var m=a,w=c;;){var k=m.return;if(k===null)break;var q=k.alternate;if(q===null){if(w=k.return,w!==null){m=w;continue}break}if(k.child===q.child){for(q=k.child;q;){if(q===m)return xu(k),a;if(q===w)return xu(k),c;q=q.sibling}throw Error(n(188))}if(m.return!==w.return)m=k,w=q;else{for(var Z=!1,ge=k.child;ge;){if(ge===m){Z=!0,m=k,w=q;break}if(ge===w){Z=!0,w=k,m=q;break}ge=ge.sibling}if(!Z){for(ge=q.child;ge;){if(ge===m){Z=!0,m=q,w=k;break}if(ge===w){Z=!0,w=q,m=k;break}ge=ge.sibling}if(!Z)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:c}function wu(a){return a=kf(a),a!==null?_u(a):null}function _u(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=_u(a);if(c!==null)return c;a=a.sibling}return null}var Su=e.unstable_scheduleCallback,dc=e.unstable_cancelCallback,Eu=e.unstable_shouldYield,If=e.unstable_requestPaint,dr=e.unstable_now,Cf=e.unstable_getCurrentPriorityLevel,fc=e.unstable_ImmediatePriority,Nu=e.unstable_UserBlockingPriority,Za=e.unstable_NormalPriority,Tf=e.unstable_LowPriority,pc=e.unstable_IdlePriority,Ya=null,ts=null;function jf(a){if(ts&&typeof ts.onCommitFiberRoot=="function")try{ts.onCommitFiberRoot(Ya,a,void 0,(a.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:qf,Of=Math.log,Rf=Math.LN2;function qf(a){return a>>>=0,a===0?32:31-(Of(a)/Rf|0)|0}var zo=64,Xa=4194304;function Ri(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return a&0x7c00000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0x40000000;default:return a}}function el(a,c){var m=a.pendingLanes;if(m===0)return 0;var w=0,k=a.suspendedLanes,q=a.pingedLanes,Z=m&0xfffffff;if(Z!==0){var ge=Z&~k;ge!==0?w=Ri(ge):(q&=Z,q!==0&&(w=Ri(q)))}else Z=m&~k,Z!==0?w=Ri(Z):q!==0&&(w=Ri(q));if(w===0)return 0;if(c!==0&&c!==w&&!(c&k)&&(k=w&-w,q=c&-c,k>=q||k===16&&(q&4194240)!==0))return c;if(w&4&&(w|=m&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)m=31-gi(c),k=1<<m,w|=a[m],c&=~k;return w}function hx(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:return-1;case 0x8000000:case 0x10000000:case 0x20000000:case 0x40000000:return-1;default:return-1}}function mx(a,c){for(var m=a.suspendedLanes,w=a.pingedLanes,k=a.expirationTimes,q=a.pendingLanes;0<q;){var Z=31-gi(q),ge=1<<Z,Se=k[Z];Se===-1?(!(ge&m)||ge&w)&&(k[Z]=hx(ge,c)):Se<=c&&(a.expiredLanes|=ge),q&=~ge}}function Af(a){return a=a.pendingLanes&-0x40000001,a!==0?a:a&0x40000000?0x40000000:0}function Rm(){var a=zo;return zo<<=1,!(zo&4194240)&&(zo=64),a}function Pf(a){for(var c=[],m=0;31>m;m++)c.push(a);return c}function hc(a,c,m){a.pendingLanes|=c,c!==0x20000000&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-gi(c),a[c]=m}function gx(a,c){var m=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var k=31-gi(m),q=1<<k;c[k]=0,w[k]=-1,a[k]=-1,m&=~q}}function Ff(a,c){var m=a.entangledLanes|=c;for(a=a.entanglements;m;){var w=31-gi(m),k=1<<w;k&c|a[w]&c&&(a[w]|=c),m&=~k}}var Mn=0;function qm(a){return a&=-a,1<a?4<a?a&0xfffffff?16:0x20000000:4:1}var Df,he,Lf,mc,Mf,g=!1,y=[],S=null,N=null,C=null,B=new Map,fe=new Map,me=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tt(a,c){switch(a){case"focusin":case"focusout":S=null;break;case"dragenter":case"dragleave":N=null;break;case"mouseover":case"mouseout":C=null;break;case"pointerover":case"pointerout":B.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":fe.delete(c.pointerId)}}function at(a,c,m,w,k,q){return a===null||a.nativeEvent!==q?(a={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:q,targetContainers:[k]},c!==null&&(c=Jf(c),c!==null&&he(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),a)}function mt(a,c,m,w,k){switch(c){case"focusin":return S=at(S,a,c,m,w,k),!0;case"dragenter":return N=at(N,a,c,m,w,k),!0;case"mouseover":return C=at(C,a,c,m,w,k),!0;case"pointerover":var q=k.pointerId;return B.set(q,at(B.get(q)||null,a,c,m,w,k)),!0;case"gotpointercapture":return q=k.pointerId,fe.set(q,at(fe.get(q)||null,a,c,m,w,k)),!0}return!1}function Be(a){var c=gc(a.target);if(c!==null){var m=zs(c);if(m!==null){if(c=m.tag,c===13){if(c=bu(m),c!==null){a.blockedOn=c,Mf(a.priority,function(){Lf(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Re(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var m=ce(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);ho=w,m.target.dispatchEvent(w),ho=null}else return c=Jf(m),c!==null&&he(c),a.blockedOn=m,!1;c.shift()}return!0}function et(a,c,m){Re(a)&&m.delete(c)}function be(){g=!1,S!==null&&Re(S)&&(S=null),N!==null&&Re(N)&&(N=null),C!==null&&Re(C)&&(C=null),B.forEach(et),fe.forEach(et)}function Ie(a,c){a.blockedOn===c&&(a.blockedOn=null,g||(g=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,be)))}function Te(a){function c(k){return Ie(k,a)}if(0<y.length){Ie(y[0],a);for(var m=1;m<y.length;m++){var w=y[m];w.blockedOn===a&&(w.blockedOn=null)}}for(S!==null&&Ie(S,a),N!==null&&Ie(N,a),C!==null&&Ie(C,a),B.forEach(c),fe.forEach(c),m=0;m<me.length;m++)w=me[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<me.length&&(m=me[0],m.blockedOn===null);)Be(m),m.blockedOn===null&&me.shift()}var Ze=A.ReactCurrentBatchConfig,Ge=!0;function je(a,c,m,w){var k=Mn,q=Ze.transition;Ze.transition=null;try{Mn=1,St(a,c,m,w)}finally{Mn=k,Ze.transition=q}}function Qe(a,c,m,w){var k=Mn,q=Ze.transition;Ze.transition=null;try{Mn=4,St(a,c,m,w)}finally{Mn=k,Ze.transition=q}}function St(a,c,m,w){if(Ge){var k=ce(a,c,m,w);if(k===null)jx(a,c,w,X,m),tt(a,w);else if(mt(k,a,c,m,w))w.stopPropagation();else if(tt(a,w),c&4&&-1<Ke.indexOf(a)){for(;k!==null;){var q=Jf(k);if(q!==null&&Df(q),q=ce(a,c,m,w),q===null&&jx(a,c,w,X,m),q===k)break;k=q}k!==null&&w.stopPropagation()}else jx(a,c,w,null,m)}}var X=null;function ce(a,c,m,w){if(X=null,a=da(w),a=gc(a),a!==null)if(c=zs(a),c===null)a=null;else if(m=c.tag,m===13){if(a=bu(c),a!==null)return a;a=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return X=a,null}function Ee(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cf()){case fc:return 1;case Nu:return 4;case Za:case Tf:return 16;case pc:return 0x20000000;default:return 16}default:return 16}}var st=null,ae=null,pe=null;function K(){if(pe)return pe;var a,c=ae,m=c.length,w,k="value"in st?st.value:st.textContent,q=k.length;for(a=0;a<m&&c[a]===k[a];a++);var Z=m-a;for(w=1;w<=Z&&c[m-w]===k[q-w];w++);return pe=k.slice(a,1<w?1-w:void 0)}function re(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ie(){return!0}function Le(){return!1}function it(a){function c(m,w,k,q,Z){this._reactName=m,this._targetInst=k,this.type=w,this.nativeEvent=q,this.target=Z,this.currentTarget=null;for(var ge in a)a.hasOwnProperty(ge)&&(m=a[ge],this[ge]=m?m(q):q[ge]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?ie:Le,this.isPropagationStopped=Le,this}return oe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ie)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ie)},persist:function(){},isPersistent:ie}),c}var Ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wt=it(Ot),Yt=oe({},Ot,{view:0,detail:0}),lt=it(Yt),_e,Pe,ot,pt=oe({},Yt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bn,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ot&&(ot&&a.type==="mousemove"?(_e=a.screenX-ot.screenX,Pe=a.screenY-ot.screenY):Pe=_e=0,ot=a),_e)},movementY:function(a){return"movementY"in a?a.movementY:Pe}}),Ft=it(pt),Xt=oe({},pt,{dataTransfer:0}),qe=it(Xt),nt=oe({},Yt,{relatedTarget:0}),dt=it(nt),Nt=oe({},Ot,{animationName:0,elapsedTime:0,pseudoElement:0}),xt=it(Nt),zt=oe({},Ot,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),gn=it(zt),Rt=oe({},Ot,{data:0}),jr=it(Rt),We={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kt(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=wt[a])?!!c[a]:!1}function bn(){return kt}var Gn=oe({},Yt,{key:function(a){if(a.key){var c=We[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=re(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?vt[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bn,charCode:function(a){return a.type==="keypress"?re(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?re(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Wn=it(Gn),Kn=oe({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=it(Kn),li=oe({},Yt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bn}),yx=it(li),vx=oe({},Ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ws=it(vx),bx=oe({},pt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Am=it(bx),$f=[9,13,27,32],xx=l&&"CompositionEvent"in window,Bf=null;l&&"documentMode"in document&&(Bf=document.documentMode);var VM=l&&"TextEvent"in window&&!Bf,XN=l&&(!xx||Bf&&8<Bf&&11>=Bf),ek=" ",tk=!1;function nk(a,c){switch(a){case"keyup":return $f.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rk(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ku=!1;function HM(a,c){switch(a){case"compositionend":return rk(c);case"keypress":return c.which!==32?null:(tk=!0,ek);case"textInput":return a=c.data,a===ek&&tk?null:a;default:return null}}function KM(a,c){if(ku)return a==="compositionend"||!xx&&nk(a,c)?(a=K(),pe=ae=st=null,ku=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return XN&&c.locale!=="ko"?null:c.data;default:return null}}var QM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ik(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!QM[a.type]:c==="textarea"}function sk(a,c,m,w){un(w),c=Mm(c,"onChange"),0<c.length&&(m=new Wt("onChange","change",null,m,w),a.push({event:m,listeners:c}))}var zf=null,Wf=null;function GM(a){Sk(a,0)}function Pm(a){var c=Ou(a);if(Ue(c))return a}function JM(a,c){if(a==="change")return c}var ok=!1;if(l){var wx;if(l){var _x="oninput"in document;if(!_x){var ak=document.createElement("div");ak.setAttribute("oninput","return;"),_x=typeof ak.oninput=="function"}wx=_x}else wx=!1;ok=wx&&(!document.documentMode||9<document.documentMode)}function lk(){zf&&(zf.detachEvent("onpropertychange",ck),Wf=zf=null)}function ck(a){if(a.propertyName==="value"&&Pm(Wf)){var c=[];sk(c,Wf,a,da(a)),fa(GM,c)}}function ZM(a,c,m){a==="focusin"?(lk(),zf=c,Wf=m,zf.attachEvent("onpropertychange",ck)):a==="focusout"&&lk()}function YM(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Pm(Wf)}function XM(a,c){if(a==="click")return Pm(c)}function e$(a,c){if(a==="input"||a==="change")return Pm(c)}function t$(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var mo=typeof Object.is=="function"?Object.is:t$;function Uf(a,c){if(mo(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var m=Object.keys(a),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var k=m[w];if(!u.call(c,k)||!mo(a[k],c[k]))return!1}return!0}function uk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function dk(a,c){var m=uk(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=c&&w>=c)return{node:m,offset:c-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=uk(m)}}function fk(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?fk(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function pk(){for(var a=window,c=ct();c instanceof a.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)a=c.contentWindow;else break;c=ct(a.document)}return c}function Sx(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function n$(a){var c=pk(),m=a.focusedElem,w=a.selectionRange;if(c!==m&&m&&m.ownerDocument&&fk(m.ownerDocument.documentElement,m)){if(w!==null&&Sx(m)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(a,m.value.length);else if(a=(c=m.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var k=m.textContent.length,q=Math.min(w.start,k);w=w.end===void 0?q:Math.min(w.end,k),!a.extend&&q>w&&(k=w,w=q,q=k),k=dk(m,q);var Z=dk(m,w);k&&Z&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==Z.node||a.focusOffset!==Z.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),a.removeAllRanges(),q>w?(a.addRange(c),a.extend(Z.node,Z.offset)):(c.setEnd(Z.node,Z.offset),a.addRange(c)))}}for(c=[],a=m;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)a=c[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var r$=l&&"documentMode"in document&&11>=document.documentMode,Iu=null,Ex=null,Vf=null,Nx=!1;function hk(a,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Nx||Iu==null||Iu!==ct(w)||(w=Iu,"selectionStart"in w&&Sx(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Vf&&Uf(Vf,w)||(Vf=w,w=Mm(Ex,"onSelect"),0<w.length&&(c=new Wt("onSelect","select",null,c,m),a.push({event:c,listeners:w}),c.target=Iu)))}function Fm(a,c){var m={};return m[a.toLowerCase()]=c.toLowerCase(),m["Webkit"+a]="webkit"+c,m["Moz"+a]="moz"+c,m}var Cu={animationend:Fm("Animation","AnimationEnd"),animationiteration:Fm("Animation","AnimationIteration"),animationstart:Fm("Animation","AnimationStart"),transitionend:Fm("Transition","TransitionEnd")},kx={},mk={};l&&(mk=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function Dm(a){if(kx[a])return kx[a];if(!Cu[a])return a;var c=Cu[a],m;for(m in c)if(c.hasOwnProperty(m)&&m in mk)return kx[a]=c[m];return a}var gk=Dm("animationend"),yk=Dm("animationiteration"),vk=Dm("animationstart"),bk=Dm("transitionend"),xk=new Map,wk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(a,c){xk.set(a,c),s(c,[a])}for(var Ix=0;Ix<wk.length;Ix++){var Cx=wk[Ix],i$=Cx.toLowerCase(),s$=Cx[0].toUpperCase()+Cx.slice(1);tl(i$,"on"+s$)}tl(gk,"onAnimationEnd"),tl(yk,"onAnimationIteration"),tl(vk,"onAnimationStart"),tl("dblclick","onDoubleClick"),tl("focusin","onFocus"),tl("focusout","onBlur"),tl(bk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hf));function _k(a,c,m){var w=a.type||"unknown-event";a.currentTarget=m,vu(w,c,void 0,a),a.currentTarget=null}function Sk(a,c){c=(c&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],k=w.event;w=w.listeners;e:{var q=void 0;if(c)for(var Z=w.length-1;0<=Z;Z--){var ge=w[Z],Se=ge.instance,He=ge.currentTarget;if(ge=ge.listener,Se!==q&&k.isPropagationStopped())break e;_k(k,ge,He),q=Se}else for(Z=0;Z<w.length;Z++){if(ge=w[Z],Se=ge.instance,He=ge.currentTarget,ge=ge.listener,Se!==q&&k.isPropagationStopped())break e;_k(k,ge,He),q=Se}}}if(Ja)throw a=Bs,Ja=!1,Bs=null,a}function fr(a,c){var m=c[Fx];m===void 0&&(m=c[Fx]=new Set);var w=a+"__bubble";m.has(w)||(Ek(c,a,2,!1),m.add(w))}function Tx(a,c,m){var w=0;c&&(w|=4),Ek(m,a,w,c)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function Kf(a){if(!a[Lm]){a[Lm]=!0,r.forEach(function(m){m!=="selectionchange"&&(o$.has(m)||Tx(m,!1,a),Tx(m,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Lm]||(c[Lm]=!0,Tx("selectionchange",!1,c))}}function Ek(a,c,m,w){switch(Ee(c)){case 1:var k=je;break;case 4:k=Qe;break;default:k=St}m=k.bind(null,c,m,a),k=void 0,!uc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),w?k!==void 0?a.addEventListener(c,m,{capture:!0,passive:k}):a.addEventListener(c,m,!0):k!==void 0?a.addEventListener(c,m,{passive:k}):a.addEventListener(c,m,!1)}function jx(a,c,m,w,k){var q=w;if(!(c&1)&&!(c&2)&&w!==null)e:for(;;){if(w===null)return;var Z=w.tag;if(Z===3||Z===4){var ge=w.stateNode.containerInfo;if(ge===k||ge.nodeType===8&&ge.parentNode===k)break;if(Z===4)for(Z=w.return;Z!==null;){var Se=Z.tag;if((Se===3||Se===4)&&(Se=Z.stateNode.containerInfo,Se===k||Se.nodeType===8&&Se.parentNode===k))return;Z=Z.return}for(;ge!==null;){if(Z=gc(ge),Z===null)return;if(Se=Z.tag,Se===5||Se===6){w=q=Z;continue e}ge=ge.parentNode}}w=w.return}fa(function(){var He=q,ht=da(m),gt=[];e:{var ft=xk.get(a);if(ft!==void 0){var qt=Wt,Bt=a;switch(a){case"keypress":if(re(m)===0)break e;case"keydown":case"keyup":qt=Wn;break;case"focusin":Bt="focus",qt=dt;break;case"focusout":Bt="blur",qt=dt;break;case"beforeblur":case"afterblur":qt=dt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qt=Ft;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qt=qe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qt=yx;break;case gk:case yk:case vk:qt=xt;break;case bk:qt=Ws;break;case"scroll":qt=lt;break;case"wheel":qt=Am;break;case"copy":case"cut":case"paste":qt=gn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qt=ma}var Ut=(c&4)!==0,$r=!Ut&&a==="scroll",Fe=Ut?ft!==null?ft+"Capture":null:ft;Ut=[];for(var Ce=He,$e;Ce!==null;){$e=Ce;var bt=$e.stateNode;if($e.tag===5&&bt!==null&&($e=bt,Fe!==null&&(bt=es(Ce,Fe),bt!=null&&Ut.push(Qf(Ce,bt,$e)))),$r)break;Ce=Ce.return}0<Ut.length&&(ft=new qt(ft,Bt,null,m,ht),gt.push({event:ft,listeners:Ut}))}}if(!(c&7)){e:{if(ft=a==="mouseover"||a==="pointerover",qt=a==="mouseout"||a==="pointerout",ft&&m!==ho&&(Bt=m.relatedTarget||m.fromElement)&&(gc(Bt)||Bt[ga]))break e;if((qt||ft)&&(ft=ht.window===ht?ht:(ft=ht.ownerDocument)?ft.defaultView||ft.parentWindow:window,qt?(Bt=m.relatedTarget||m.toElement,qt=He,Bt=Bt?gc(Bt):null,Bt!==null&&($r=zs(Bt),Bt!==$r||Bt.tag!==5&&Bt.tag!==6)&&(Bt=null)):(qt=null,Bt=He),qt!==Bt)){if(Ut=Ft,bt="onMouseLeave",Fe="onMouseEnter",Ce="mouse",(a==="pointerout"||a==="pointerover")&&(Ut=ma,bt="onPointerLeave",Fe="onPointerEnter",Ce="pointer"),$r=qt==null?ft:Ou(qt),$e=Bt==null?ft:Ou(Bt),ft=new Ut(bt,Ce+"leave",qt,m,ht),ft.target=$r,ft.relatedTarget=$e,bt=null,gc(ht)===He&&(Ut=new Ut(Fe,Ce+"enter",Bt,m,ht),Ut.target=$e,Ut.relatedTarget=$r,bt=Ut),$r=bt,qt&&Bt)t:{for(Ut=qt,Fe=Bt,Ce=0,$e=Ut;$e;$e=Tu($e))Ce++;for($e=0,bt=Fe;bt;bt=Tu(bt))$e++;for(;0<Ce-$e;)Ut=Tu(Ut),Ce--;for(;0<$e-Ce;)Fe=Tu(Fe),$e--;for(;Ce--;){if(Ut===Fe||Fe!==null&&Ut===Fe.alternate)break t;Ut=Tu(Ut),Fe=Tu(Fe)}Ut=null}else Ut=null;qt!==null&&Nk(gt,ft,qt,Ut,!1),Bt!==null&&$r!==null&&Nk(gt,$r,Bt,Ut,!0)}}e:{if(ft=He?Ou(He):window,qt=ft.nodeName&&ft.nodeName.toLowerCase(),qt==="select"||qt==="input"&&ft.type==="file")var Ht=JM;else if(ik(ft))if(ok)Ht=e$;else{Ht=YM;var en=ZM}else(qt=ft.nodeName)&&qt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Ht=XM);if(Ht&&(Ht=Ht(a,He))){sk(gt,Ht,m,ht);break e}en&&en(a,ft,He),a==="focusout"&&(en=ft._wrapperState)&&en.controlled&&ft.type==="number"&&ve(ft,"number",ft.value)}switch(en=He?Ou(He):window,a){case"focusin":(ik(en)||en.contentEditable==="true")&&(Iu=en,Ex=He,Vf=null);break;case"focusout":Vf=Ex=Iu=null;break;case"mousedown":Nx=!0;break;case"contextmenu":case"mouseup":case"dragend":Nx=!1,hk(gt,m,ht);break;case"selectionchange":if(r$)break;case"keydown":case"keyup":hk(gt,m,ht)}var tn;if(xx)e:{switch(a){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else ku?nk(a,m)&&(cn="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(cn="onCompositionStart");cn&&(XN&&m.locale!=="ko"&&(ku||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&ku&&(tn=K()):(st=ht,ae="value"in st?st.value:st.textContent,ku=!0)),en=Mm(He,cn),0<en.length&&(cn=new jr(cn,a,null,m,ht),gt.push({event:cn,listeners:en}),tn?cn.data=tn:(tn=rk(m),tn!==null&&(cn.data=tn)))),(tn=VM?HM(a,m):KM(a,m))&&(He=Mm(He,"onBeforeInput"),0<He.length&&(ht=new jr("onBeforeInput","beforeinput",null,m,ht),gt.push({event:ht,listeners:He}),ht.data=tn))}Sk(gt,c)})}function Qf(a,c,m){return{instance:a,listener:c,currentTarget:m}}function Mm(a,c){for(var m=c+"Capture",w=[];a!==null;){var k=a,q=k.stateNode;k.tag===5&&q!==null&&(k=q,q=es(a,m),q!=null&&w.unshift(Qf(a,q,k)),q=es(a,c),q!=null&&w.push(Qf(a,q,k))),a=a.return}return w}function Tu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Nk(a,c,m,w,k){for(var q=c._reactName,Z=[];m!==null&&m!==w;){var ge=m,Se=ge.alternate,He=ge.stateNode;if(Se!==null&&Se===w)break;ge.tag===5&&He!==null&&(ge=He,k?(Se=es(m,q),Se!=null&&Z.unshift(Qf(m,Se,ge))):k||(Se=es(m,q),Se!=null&&Z.push(Qf(m,Se,ge)))),m=m.return}Z.length!==0&&a.push({event:c,listeners:Z})}var a$=/\r\n?/g,l$=/\u0000|\uFFFD/g;function kk(a){return(typeof a=="string"?a:""+a).replace(a$,`
`).replace(l$,"")}function $m(a,c,m){if(c=kk(c),kk(a)!==c&&m)throw Error(n(425))}function Bm(){}var Ox=null,Rx=null;function qx(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ax=typeof setTimeout=="function"?setTimeout:void 0,c$=typeof clearTimeout=="function"?clearTimeout:void 0,Ik=typeof Promise=="function"?Promise:void 0,u$=typeof queueMicrotask=="function"?queueMicrotask:typeof Ik<"u"?function(a){return Ik.resolve(null).then(a).catch(d$)}:Ax;function d$(a){setTimeout(function(){throw a})}function Px(a,c){var m=c,w=0;do{var k=m.nextSibling;if(a.removeChild(m),k&&k.nodeType===8)if(m=k.data,m==="/$"){if(w===0){a.removeChild(k),Te(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=k}while(m);Te(c)}function nl(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Ck(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return a;c--}else m==="/$"&&c++}a=a.previousSibling}return null}var ju=Math.random().toString(36).slice(2),Wo="__reactFiber$"+ju,Gf="__reactProps$"+ju,ga="__reactContainer$"+ju,Fx="__reactEvents$"+ju,f$="__reactListeners$"+ju,p$="__reactHandles$"+ju;function gc(a){var c=a[Wo];if(c)return c;for(var m=a.parentNode;m;){if(c=m[ga]||m[Wo]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(a=Ck(a);a!==null;){if(m=a[Wo])return m;a=Ck(a)}return c}a=m,m=a.parentNode}return null}function Jf(a){return a=a[Wo]||a[ga],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ou(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function zm(a){return a[Gf]||null}var Dx=[],Ru=-1;function rl(a){return{current:a}}function pr(a){0>Ru||(a.current=Dx[Ru],Dx[Ru]=null,Ru--)}function or(a,c){Ru++,Dx[Ru]=a.current,a.current=c}var il={},yi=rl(il),ns=rl(!1),yc=il;function qu(a,c){var m=a.type.contextTypes;if(!m)return il;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var k={},q;for(q in m)k[q]=c[q];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=k),k}function rs(a){return a=a.childContextTypes,a!=null}function Wm(){pr(ns),pr(yi)}function Tk(a,c,m){if(yi.current!==il)throw Error(n(168));or(yi,c),or(ns,m)}function jk(a,c,m){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var k in w)if(!(k in c))throw Error(n(108,ze(a)||"Unknown",k));return oe({},m,w)}function Um(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||il,yc=yi.current,or(yi,a),or(ns,ns.current),!0}function Ok(a,c,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=jk(a,c,yc),w.__reactInternalMemoizedMergedChildContext=a,pr(ns),pr(yi),or(yi,a)):pr(ns),or(ns,m)}var ya=null,Vm=!1,Lx=!1;function Rk(a){ya===null?ya=[a]:ya.push(a)}function h$(a){Vm=!0,Rk(a)}function sl(){if(!Lx&&ya!==null){Lx=!0;var a=0,c=Mn;try{var m=ya;for(Mn=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}ya=null,Vm=!1}catch(k){throw ya!==null&&(ya=ya.slice(a+1)),Su(fc,sl),k}finally{Mn=c,Lx=!1}}return null}var Au=[],Pu=0,Hm=null,Km=0,Us=[],Vs=0,vc=null,va=1,ba="";function bc(a,c){Au[Pu++]=Km,Au[Pu++]=Hm,Hm=a,Km=c}function qk(a,c,m){Us[Vs++]=va,Us[Vs++]=ba,Us[Vs++]=vc,vc=a;var w=va;a=ba;var k=32-gi(w)-1;w&=~(1<<k),m+=1;var q=32-gi(c)+k;if(30<q){var Z=k-k%5;q=(w&(1<<Z)-1).toString(32),w>>=Z,k-=Z,va=1<<32-gi(c)+k|m<<k|w,ba=q+a}else va=1<<q|m<<k|w,ba=a}function Mx(a){a.return!==null&&(bc(a,1),qk(a,1,0))}function $x(a){for(;a===Hm;)Hm=Au[--Pu],Au[Pu]=null,Km=Au[--Pu],Au[Pu]=null;for(;a===vc;)vc=Us[--Vs],Us[Vs]=null,ba=Us[--Vs],Us[Vs]=null,va=Us[--Vs],Us[Vs]=null}var xs=null,ws=null,mr=!1,go=null;function Ak(a,c){var m=Gs(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=a,c=a.deletions,c===null?(a.deletions=[m],a.flags|=16):c.push(m)}function Pk(a,c){switch(a.tag){case 5:var m=a.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,xs=a,ws=nl(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,xs=a,ws=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=vc!==null?{id:va,overflow:ba}:null,a.memoizedState={dehydrated:c,treeContext:m,retryLane:0x40000000},m=Gs(18,null,null,0),m.stateNode=c,m.return=a,a.child=m,xs=a,ws=null,!0):!1;default:return!1}}function Bx(a){return(a.mode&1)!==0&&(a.flags&128)===0}function zx(a){if(mr){var c=ws;if(c){var m=c;if(!Pk(a,c)){if(Bx(a))throw Error(n(418));c=nl(m.nextSibling);var w=xs;c&&Pk(a,c)?Ak(w,m):(a.flags=a.flags&-4097|2,mr=!1,xs=a)}}else{if(Bx(a))throw Error(n(418));a.flags=a.flags&-4097|2,mr=!1,xs=a}}}function Fk(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xs=a}function Qm(a){if(a!==xs)return!1;if(!mr)return Fk(a),mr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!qx(a.type,a.memoizedProps)),c&&(c=ws)){if(Bx(a))throw Dk(),Error(n(418));for(;c;)Ak(a,c),c=nl(c.nextSibling)}if(Fk(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(c===0){ws=nl(a.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}a=a.nextSibling}ws=null}}else ws=xs?nl(a.stateNode.nextSibling):null;return!0}function Dk(){for(var a=ws;a;)a=nl(a.nextSibling)}function Fu(){ws=xs=null,mr=!1}function Wx(a){go===null?go=[a]:go.push(a)}var m$=A.ReactCurrentBatchConfig;function Zf(a,c,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var k=w,q=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===q?c.ref:(c=function(Z){var ge=k.refs;Z===null?delete ge[q]:ge[q]=Z},c._stringRef=q,c)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Gm(a,c){throw a=Object.prototype.toString.call(c),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Lk(a){var c=a._init;return c(a._payload)}function Mk(a){function c(Fe,Ce){if(a){var $e=Fe.deletions;$e===null?(Fe.deletions=[Ce],Fe.flags|=16):$e.push(Ce)}}function m(Fe,Ce){if(!a)return null;for(;Ce!==null;)c(Fe,Ce),Ce=Ce.sibling;return null}function w(Fe,Ce){for(Fe=new Map;Ce!==null;)Ce.key!==null?Fe.set(Ce.key,Ce):Fe.set(Ce.index,Ce),Ce=Ce.sibling;return Fe}function k(Fe,Ce){return Fe=pl(Fe,Ce),Fe.index=0,Fe.sibling=null,Fe}function q(Fe,Ce,$e){return Fe.index=$e,a?($e=Fe.alternate,$e!==null?($e=$e.index,$e<Ce?(Fe.flags|=2,Ce):$e):(Fe.flags|=2,Ce)):(Fe.flags|=1048576,Ce)}function Z(Fe){return a&&Fe.alternate===null&&(Fe.flags|=2),Fe}function ge(Fe,Ce,$e,bt){return Ce===null||Ce.tag!==6?(Ce=Aw($e,Fe.mode,bt),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function Se(Fe,Ce,$e,bt){var Ht=$e.type;return Ht===W?ht(Fe,Ce,$e.props.children,bt,$e.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Y&&Lk(Ht)===Ce.type)?(bt=k(Ce,$e.props),bt.ref=Zf(Fe,Ce,$e),bt.return=Fe,bt):(bt=bg($e.type,$e.key,$e.props,null,Fe.mode,bt),bt.ref=Zf(Fe,Ce,$e),bt.return=Fe,bt)}function He(Fe,Ce,$e,bt){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==$e.containerInfo||Ce.stateNode.implementation!==$e.implementation?(Ce=Pw($e,Fe.mode,bt),Ce.return=Fe,Ce):(Ce=k(Ce,$e.children||[]),Ce.return=Fe,Ce)}function ht(Fe,Ce,$e,bt,Ht){return Ce===null||Ce.tag!==7?(Ce=Ic($e,Fe.mode,bt,Ht),Ce.return=Fe,Ce):(Ce=k(Ce,$e),Ce.return=Fe,Ce)}function gt(Fe,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=Aw(""+Ce,Fe.mode,$e),Ce.return=Fe,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case D:return $e=bg(Ce.type,Ce.key,Ce.props,null,Fe.mode,$e),$e.ref=Zf(Fe,null,Ce),$e.return=Fe,$e;case M:return Ce=Pw(Ce,Fe.mode,$e),Ce.return=Fe,Ce;case Y:var bt=Ce._init;return gt(Fe,bt(Ce._payload),$e)}if(ke(Ce)||ne(Ce))return Ce=Ic(Ce,Fe.mode,$e,null),Ce.return=Fe,Ce;Gm(Fe,Ce)}return null}function ft(Fe,Ce,$e,bt){var Ht=Ce!==null?Ce.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return Ht!==null?null:ge(Fe,Ce,""+$e,bt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:return $e.key===Ht?Se(Fe,Ce,$e,bt):null;case M:return $e.key===Ht?He(Fe,Ce,$e,bt):null;case Y:return Ht=$e._init,ft(Fe,Ce,Ht($e._payload),bt)}if(ke($e)||ne($e))return Ht!==null?null:ht(Fe,Ce,$e,bt,null);Gm(Fe,$e)}return null}function qt(Fe,Ce,$e,bt,Ht){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return Fe=Fe.get($e)||null,ge(Ce,Fe,""+bt,Ht);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case D:return Fe=Fe.get(bt.key===null?$e:bt.key)||null,Se(Ce,Fe,bt,Ht);case M:return Fe=Fe.get(bt.key===null?$e:bt.key)||null,He(Ce,Fe,bt,Ht);case Y:var en=bt._init;return qt(Fe,Ce,$e,en(bt._payload),Ht)}if(ke(bt)||ne(bt))return Fe=Fe.get($e)||null,ht(Ce,Fe,bt,Ht,null);Gm(Ce,bt)}return null}function Bt(Fe,Ce,$e,bt){for(var Ht=null,en=null,tn=Ce,cn=Ce=0,ai=null;tn!==null&&cn<$e.length;cn++){tn.index>cn?(ai=tn,tn=null):ai=tn.sibling;var Dn=ft(Fe,tn,$e[cn],bt);if(Dn===null){tn===null&&(tn=ai);break}a&&tn&&Dn.alternate===null&&c(Fe,tn),Ce=q(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn,tn=ai}if(cn===$e.length)return m(Fe,tn),mr&&bc(Fe,cn),Ht;if(tn===null){for(;cn<$e.length;cn++)tn=gt(Fe,$e[cn],bt),tn!==null&&(Ce=q(tn,Ce,cn),en===null?Ht=tn:en.sibling=tn,en=tn);return mr&&bc(Fe,cn),Ht}for(tn=w(Fe,tn);cn<$e.length;cn++)ai=qt(tn,Fe,cn,$e[cn],bt),ai!==null&&(a&&ai.alternate!==null&&tn.delete(ai.key===null?cn:ai.key),Ce=q(ai,Ce,cn),en===null?Ht=ai:en.sibling=ai,en=ai);return a&&tn.forEach(function(hl){return c(Fe,hl)}),mr&&bc(Fe,cn),Ht}function Ut(Fe,Ce,$e,bt){var Ht=ne($e);if(typeof Ht!="function")throw Error(n(150));if($e=Ht.call($e),$e==null)throw Error(n(151));for(var en=Ht=null,tn=Ce,cn=Ce=0,ai=null,Dn=$e.next();tn!==null&&!Dn.done;cn++,Dn=$e.next()){tn.index>cn?(ai=tn,tn=null):ai=tn.sibling;var hl=ft(Fe,tn,Dn.value,bt);if(hl===null){tn===null&&(tn=ai);break}a&&tn&&hl.alternate===null&&c(Fe,tn),Ce=q(hl,Ce,cn),en===null?Ht=hl:en.sibling=hl,en=hl,tn=ai}if(Dn.done)return m(Fe,tn),mr&&bc(Fe,cn),Ht;if(tn===null){for(;!Dn.done;cn++,Dn=$e.next())Dn=gt(Fe,Dn.value,bt),Dn!==null&&(Ce=q(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn);return mr&&bc(Fe,cn),Ht}for(tn=w(Fe,tn);!Dn.done;cn++,Dn=$e.next())Dn=qt(tn,Fe,cn,Dn.value,bt),Dn!==null&&(a&&Dn.alternate!==null&&tn.delete(Dn.key===null?cn:Dn.key),Ce=q(Dn,Ce,cn),en===null?Ht=Dn:en.sibling=Dn,en=Dn);return a&&tn.forEach(function(K$){return c(Fe,K$)}),mr&&bc(Fe,cn),Ht}function $r(Fe,Ce,$e,bt){if(typeof $e=="object"&&$e!==null&&$e.type===W&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case D:e:{for(var Ht=$e.key,en=Ce;en!==null;){if(en.key===Ht){if(Ht=$e.type,Ht===W){if(en.tag===7){m(Fe,en.sibling),Ce=k(en,$e.props.children),Ce.return=Fe,Fe=Ce;break e}}else if(en.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Y&&Lk(Ht)===en.type){m(Fe,en.sibling),Ce=k(en,$e.props),Ce.ref=Zf(Fe,en,$e),Ce.return=Fe,Fe=Ce;break e}m(Fe,en);break}else c(Fe,en);en=en.sibling}$e.type===W?(Ce=Ic($e.props.children,Fe.mode,bt,$e.key),Ce.return=Fe,Fe=Ce):(bt=bg($e.type,$e.key,$e.props,null,Fe.mode,bt),bt.ref=Zf(Fe,Ce,$e),bt.return=Fe,Fe=bt)}return Z(Fe);case M:e:{for(en=$e.key;Ce!==null;){if(Ce.key===en)if(Ce.tag===4&&Ce.stateNode.containerInfo===$e.containerInfo&&Ce.stateNode.implementation===$e.implementation){m(Fe,Ce.sibling),Ce=k(Ce,$e.children||[]),Ce.return=Fe,Fe=Ce;break e}else{m(Fe,Ce);break}else c(Fe,Ce);Ce=Ce.sibling}Ce=Pw($e,Fe.mode,bt),Ce.return=Fe,Fe=Ce}return Z(Fe);case Y:return en=$e._init,$r(Fe,Ce,en($e._payload),bt)}if(ke($e))return Bt(Fe,Ce,$e,bt);if(ne($e))return Ut(Fe,Ce,$e,bt);Gm(Fe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,Ce!==null&&Ce.tag===6?(m(Fe,Ce.sibling),Ce=k(Ce,$e),Ce.return=Fe,Fe=Ce):(m(Fe,Ce),Ce=Aw($e,Fe.mode,bt),Ce.return=Fe,Fe=Ce),Z(Fe)):m(Fe,Ce)}return $r}var Du=Mk(!0),$k=Mk(!1),Jm=rl(null),Zm=null,Lu=null,Ux=null;function Vx(){Ux=Lu=Zm=null}function Hx(a){var c=Jm.current;pr(Jm),a._currentValue=c}function Kx(a,c,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===m)break;a=a.return}}function Mu(a,c){Zm=a,Ux=Lu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(is=!0),a.firstContext=null)}function Hs(a){var c=a._currentValue;if(Ux!==a)if(a={context:a,memoizedValue:c,next:null},Lu===null){if(Zm===null)throw Error(n(308));Lu=a,Zm.dependencies={lanes:0,firstContext:a}}else Lu=Lu.next=a;return c}var xc=null;function Qx(a){xc===null?xc=[a]:xc.push(a)}function Bk(a,c,m,w){var k=c.interleaved;return k===null?(m.next=m,Qx(c)):(m.next=k.next,k.next=m),c.interleaved=m,xa(a,w)}function xa(a,c){a.lanes|=c;var m=a.alternate;for(m!==null&&(m.lanes|=c),m=a,a=a.return;a!==null;)a.childLanes|=c,m=a.alternate,m!==null&&(m.childLanes|=c),m=a,a=a.return;return m.tag===3?m.stateNode:null}var ol=!1;function Gx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zk(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function wa(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function al(a,c,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,An&2){var k=w.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),w.pending=c,xa(a,m)}return k=w.interleaved,k===null?(c.next=c,Qx(w)):(c.next=k.next,k.next=c),w.interleaved=c,xa(a,m)}function Ym(a,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Ff(a,m)}}function Wk(a,c){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var k=null,q=null;if(m=m.firstBaseUpdate,m!==null){do{var Z={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};q===null?k=q=Z:q=q.next=Z,m=m.next}while(m!==null);q===null?k=q=c:q=q.next=c}else k=q=c;m={baseState:w.baseState,firstBaseUpdate:k,lastBaseUpdate:q,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=c:a.next=c,m.lastBaseUpdate=c}function Xm(a,c,m,w){var k=a.updateQueue;ol=!1;var q=k.firstBaseUpdate,Z=k.lastBaseUpdate,ge=k.shared.pending;if(ge!==null){k.shared.pending=null;var Se=ge,He=Se.next;Se.next=null,Z===null?q=He:Z.next=He,Z=Se;var ht=a.alternate;ht!==null&&(ht=ht.updateQueue,ge=ht.lastBaseUpdate,ge!==Z&&(ge===null?ht.firstBaseUpdate=He:ge.next=He,ht.lastBaseUpdate=Se))}if(q!==null){var gt=k.baseState;Z=0,ht=He=Se=null,ge=q;do{var ft=ge.lane,qt=ge.eventTime;if((w&ft)===ft){ht!==null&&(ht=ht.next={eventTime:qt,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Bt=a,Ut=ge;switch(ft=c,qt=m,Ut.tag){case 1:if(Bt=Ut.payload,typeof Bt=="function"){gt=Bt.call(qt,gt,ft);break e}gt=Bt;break e;case 3:Bt.flags=Bt.flags&-65537|128;case 0:if(Bt=Ut.payload,ft=typeof Bt=="function"?Bt.call(qt,gt,ft):Bt,ft==null)break e;gt=oe({},gt,ft);break e;case 2:ol=!0}}ge.callback!==null&&ge.lane!==0&&(a.flags|=64,ft=k.effects,ft===null?k.effects=[ge]:ft.push(ge))}else qt={eventTime:qt,lane:ft,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},ht===null?(He=ht=qt,Se=gt):ht=ht.next=qt,Z|=ft;if(ge=ge.next,ge===null){if(ge=k.shared.pending,ge===null)break;ft=ge,ge=ft.next,ft.next=null,k.lastBaseUpdate=ft,k.shared.pending=null}}while(!0);if(ht===null&&(Se=gt),k.baseState=Se,k.firstBaseUpdate=He,k.lastBaseUpdate=ht,c=k.shared.interleaved,c!==null){k=c;do Z|=k.lane,k=k.next;while(k!==c)}else q===null&&(k.shared.lanes=0);Sc|=Z,a.lanes=Z,a.memoizedState=gt}}function Uk(a,c,m){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],k=w.callback;if(k!==null){if(w.callback=null,w=m,typeof k!="function")throw Error(n(191,k));k.call(w)}}}var Yf={},Uo=rl(Yf),Xf=rl(Yf),ep=rl(Yf);function wc(a){if(a===Yf)throw Error(n(174));return a}function Jx(a,c){switch(or(ep,c),or(Xf,a),or(Uo,Yf),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Gt(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Gt(c,a)}pr(Uo),or(Uo,c)}function $u(){pr(Uo),pr(Xf),pr(ep)}function Vk(a){wc(ep.current);var c=wc(Uo.current),m=Gt(c,a.type);c!==m&&(or(Xf,a),or(Uo,m))}function Zx(a){Xf.current===a&&(pr(Uo),pr(Xf))}var Or=rl(0);function eg(a){for(var c=a;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Yx=[];function Xx(){for(var a=0;a<Yx.length;a++)Yx[a]._workInProgressVersionPrimary=null;Yx.length=0}var tg=A.ReactCurrentDispatcher,ew=A.ReactCurrentBatchConfig,_c=0,Rr=null,ni=null,si=null,ng=!1,tp=!1,np=0,g$=0;function vi(){throw Error(n(321))}function tw(a,c){if(c===null)return!1;for(var m=0;m<c.length&&m<a.length;m++)if(!mo(a[m],c[m]))return!1;return!0}function nw(a,c,m,w,k,q){if(_c=q,Rr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,tg.current=a===null||a.memoizedState===null?x$:w$,a=m(w,k),tp){q=0;do{if(tp=!1,np=0,25<=q)throw Error(n(301));q+=1,si=ni=null,c.updateQueue=null,tg.current=_$,a=m(w,k)}while(tp)}if(tg.current=sg,c=ni!==null&&ni.next!==null,_c=0,si=ni=Rr=null,ng=!1,c)throw Error(n(300));return a}function rw(){var a=np!==0;return np=0,a}function Vo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Rr.memoizedState=si=a:si=si.next=a,si}function Ks(){if(ni===null){var a=Rr.alternate;a=a!==null?a.memoizedState:null}else a=ni.next;var c=si===null?Rr.memoizedState:si.next;if(c!==null)si=c,ni=a;else{if(a===null)throw Error(n(310));ni=a,a={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},si===null?Rr.memoizedState=si=a:si=si.next=a}return si}function rp(a,c){return typeof c=="function"?c(a):c}function iw(a){var c=Ks(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=ni,k=w.baseQueue,q=m.pending;if(q!==null){if(k!==null){var Z=k.next;k.next=q.next,q.next=Z}w.baseQueue=k=q,m.pending=null}if(k!==null){q=k.next,w=w.baseState;var ge=Z=null,Se=null,He=q;do{var ht=He.lane;if((_c&ht)===ht)Se!==null&&(Se=Se.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),w=He.hasEagerState?He.eagerState:a(w,He.action);else{var gt={lane:ht,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Se===null?(ge=Se=gt,Z=w):Se=Se.next=gt,Rr.lanes|=ht,Sc|=ht}He=He.next}while(He!==null&&He!==q);Se===null?Z=w:Se.next=ge,mo(w,c.memoizedState)||(is=!0),c.memoizedState=w,c.baseState=Z,c.baseQueue=Se,m.lastRenderedState=w}if(a=m.interleaved,a!==null){k=a;do q=k.lane,Rr.lanes|=q,Sc|=q,k=k.next;while(k!==a)}else k===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function sw(a){var c=Ks(),m=c.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,k=m.pending,q=c.memoizedState;if(k!==null){m.pending=null;var Z=k=k.next;do q=a(q,Z.action),Z=Z.next;while(Z!==k);mo(q,c.memoizedState)||(is=!0),c.memoizedState=q,c.baseQueue===null&&(c.baseState=q),m.lastRenderedState=q}return[q,w]}function Hk(){}function Kk(a,c){var m=Rr,w=Ks(),k=c(),q=!mo(w.memoizedState,k);if(q&&(w.memoizedState=k,is=!0),w=w.queue,ow(Jk.bind(null,m,w,a),[a]),w.getSnapshot!==c||q||si!==null&&si.memoizedState.tag&1){if(m.flags|=2048,ip(9,Gk.bind(null,m,w,k,c),void 0,null),oi===null)throw Error(n(349));_c&30||Qk(m,c,k)}return k}function Qk(a,c,m){a.flags|=16384,a={getSnapshot:c,value:m},c=Rr.updateQueue,c===null?(c={lastEffect:null,stores:null},Rr.updateQueue=c,c.stores=[a]):(m=c.stores,m===null?c.stores=[a]:m.push(a))}function Gk(a,c,m,w){c.value=m,c.getSnapshot=w,Zk(c)&&Yk(a)}function Jk(a,c,m){return m(function(){Zk(c)&&Yk(a)})}function Zk(a){var c=a.getSnapshot;a=a.value;try{var m=c();return!mo(a,m)}catch{return!0}}function Yk(a){var c=xa(a,1);c!==null&&xo(c,a,1,-1)}function Xk(a){var c=Vo();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rp,lastRenderedState:a},c.queue=a,a=a.dispatch=b$.bind(null,Rr,a),[c.memoizedState,a]}function ip(a,c,m,w){return a={tag:a,create:c,destroy:m,deps:w,next:null},c=Rr.updateQueue,c===null?(c={lastEffect:null,stores:null},Rr.updateQueue=c,c.lastEffect=a.next=a):(m=c.lastEffect,m===null?c.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,c.lastEffect=a)),a}function eI(){return Ks().memoizedState}function rg(a,c,m,w){var k=Vo();Rr.flags|=a,k.memoizedState=ip(1|c,m,void 0,w===void 0?null:w)}function ig(a,c,m,w){var k=Ks();w=w===void 0?null:w;var q=void 0;if(ni!==null){var Z=ni.memoizedState;if(q=Z.destroy,w!==null&&tw(w,Z.deps)){k.memoizedState=ip(c,m,q,w);return}}Rr.flags|=a,k.memoizedState=ip(1|c,m,q,w)}function tI(a,c){return rg(8390656,8,a,c)}function ow(a,c){return ig(2048,8,a,c)}function nI(a,c){return ig(4,2,a,c)}function rI(a,c){return ig(4,4,a,c)}function iI(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function sI(a,c,m){return m=m!=null?m.concat([a]):null,ig(4,4,iI.bind(null,c,a),m)}function aw(){}function oI(a,c){var m=Ks();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&tw(c,w[1])?w[0]:(m.memoizedState=[a,c],a)}function aI(a,c){var m=Ks();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&tw(c,w[1])?w[0]:(a=a(),m.memoizedState=[a,c],a)}function lI(a,c,m){return _c&21?(mo(m,c)||(m=Rm(),Rr.lanes|=m,Sc|=m,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=m)}function y$(a,c){var m=Mn;Mn=m!==0&&4>m?m:4,a(!0);var w=ew.transition;ew.transition={};try{a(!1),c()}finally{Mn=m,ew.transition=w}}function cI(){return Ks().memoizedState}function v$(a,c,m){var w=dl(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},uI(a))dI(c,m);else if(m=Bk(a,c,m,w),m!==null){var k=Ai();xo(m,a,w,k),fI(m,c,w)}}function b$(a,c,m){var w=dl(a),k={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(uI(a))dI(c,k);else{var q=a.alternate;if(a.lanes===0&&(q===null||q.lanes===0)&&(q=c.lastRenderedReducer,q!==null))try{var Z=c.lastRenderedState,ge=q(Z,m);if(k.hasEagerState=!0,k.eagerState=ge,mo(ge,Z)){var Se=c.interleaved;Se===null?(k.next=k,Qx(c)):(k.next=Se.next,Se.next=k),c.interleaved=k;return}}catch{}finally{}m=Bk(a,c,k,w),m!==null&&(k=Ai(),xo(m,a,w,k),fI(m,c,w))}}function uI(a){var c=a.alternate;return a===Rr||c!==null&&c===Rr}function dI(a,c){tp=ng=!0;var m=a.pending;m===null?c.next=c:(c.next=m.next,m.next=c),a.pending=c}function fI(a,c,m){if(m&4194240){var w=c.lanes;w&=a.pendingLanes,m|=w,c.lanes=m,Ff(a,m)}}var sg={readContext:Hs,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},x$={readContext:Hs,useCallback:function(a,c){return Vo().memoizedState=[a,c===void 0?null:c],a},useContext:Hs,useEffect:tI,useImperativeHandle:function(a,c,m){return m=m!=null?m.concat([a]):null,rg(4194308,4,iI.bind(null,c,a),m)},useLayoutEffect:function(a,c){return rg(4194308,4,a,c)},useInsertionEffect:function(a,c){return rg(4,2,a,c)},useMemo:function(a,c){var m=Vo();return c=c===void 0?null:c,a=a(),m.memoizedState=[a,c],a},useReducer:function(a,c,m){var w=Vo();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=v$.bind(null,Rr,a),[w.memoizedState,a]},useRef:function(a){var c=Vo();return a={current:a},c.memoizedState=a},useState:Xk,useDebugValue:aw,useDeferredValue:function(a){return Vo().memoizedState=a},useTransition:function(){var a=Xk(!1),c=a[0];return a=y$.bind(null,a[1]),Vo().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,m){var w=Rr,k=Vo();if(mr){if(m===void 0)throw Error(n(407));m=m()}else{if(m=c(),oi===null)throw Error(n(349));_c&30||Qk(w,c,m)}k.memoizedState=m;var q={value:m,getSnapshot:c};return k.queue=q,tI(Jk.bind(null,w,q,a),[a]),w.flags|=2048,ip(9,Gk.bind(null,w,q,m,c),void 0,null),m},useId:function(){var a=Vo(),c=oi.identifierPrefix;if(mr){var m=ba,w=va;m=(w&~(1<<32-gi(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=np++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=g$++,c=":"+c+"r"+m.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},w$={readContext:Hs,useCallback:oI,useContext:Hs,useEffect:ow,useImperativeHandle:sI,useInsertionEffect:nI,useLayoutEffect:rI,useMemo:aI,useReducer:iw,useRef:eI,useState:function(){return iw(rp)},useDebugValue:aw,useDeferredValue:function(a){var c=Ks();return lI(c,ni.memoizedState,a)},useTransition:function(){var a=iw(rp)[0],c=Ks().memoizedState;return[a,c]},useMutableSource:Hk,useSyncExternalStore:Kk,useId:cI,unstable_isNewReconciler:!1},_$={readContext:Hs,useCallback:oI,useContext:Hs,useEffect:ow,useImperativeHandle:sI,useInsertionEffect:nI,useLayoutEffect:rI,useMemo:aI,useReducer:sw,useRef:eI,useState:function(){return sw(rp)},useDebugValue:aw,useDeferredValue:function(a){var c=Ks();return ni===null?c.memoizedState=a:lI(c,ni.memoizedState,a)},useTransition:function(){var a=sw(rp)[0],c=Ks().memoizedState;return[a,c]},useMutableSource:Hk,useSyncExternalStore:Kk,useId:cI,unstable_isNewReconciler:!1};function yo(a,c){if(a&&a.defaultProps){c=oe({},c),a=a.defaultProps;for(var m in a)c[m]===void 0&&(c[m]=a[m]);return c}return c}function lw(a,c,m,w){c=a.memoizedState,m=m(w,c),m=m==null?c:oe({},c,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var og={isMounted:function(a){return(a=a._reactInternals)?zs(a)===a:!1},enqueueSetState:function(a,c,m){a=a._reactInternals;var w=Ai(),k=dl(a),q=wa(w,k);q.payload=c,m!=null&&(q.callback=m),c=al(a,q,k),c!==null&&(xo(c,a,k,w),Ym(c,a,k))},enqueueReplaceState:function(a,c,m){a=a._reactInternals;var w=Ai(),k=dl(a),q=wa(w,k);q.tag=1,q.payload=c,m!=null&&(q.callback=m),c=al(a,q,k),c!==null&&(xo(c,a,k,w),Ym(c,a,k))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var m=Ai(),w=dl(a),k=wa(m,w);k.tag=2,c!=null&&(k.callback=c),c=al(a,k,w),c!==null&&(xo(c,a,w,m),Ym(c,a,w))}};function pI(a,c,m,w,k,q,Z){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,q,Z):c.prototype&&c.prototype.isPureReactComponent?!Uf(m,w)||!Uf(k,q):!0}function hI(a,c,m){var w=!1,k=il,q=c.contextType;return typeof q=="object"&&q!==null?q=Hs(q):(k=rs(c)?yc:yi.current,w=c.contextTypes,q=(w=w!=null)?qu(a,k):il),c=new c(m,q),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=og,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=q),c}function mI(a,c,m,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==a&&og.enqueueReplaceState(c,c.state,null)}function cw(a,c,m,w){var k=a.stateNode;k.props=m,k.state=a.memoizedState,k.refs={},Gx(a);var q=c.contextType;typeof q=="object"&&q!==null?k.context=Hs(q):(q=rs(c)?yc:yi.current,k.context=qu(a,q)),k.state=a.memoizedState,q=c.getDerivedStateFromProps,typeof q=="function"&&(lw(a,c,q,m),k.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&og.enqueueReplaceState(k,k.state,null),Xm(a,m,k,w),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function Bu(a,c){try{var m="",w=c;do m+=we(w),w=w.return;while(w);var k=m}catch(q){k=`
Error generating stack: `+q.message+`
`+q.stack}return{value:a,source:c,stack:k,digest:null}}function uw(a,c,m){return{value:a,source:null,stack:m??null,digest:c??null}}function dw(a,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var S$=typeof WeakMap=="function"?WeakMap:Map;function gI(a,c,m){m=wa(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){pg||(pg=!0,kw=w),dw(a,c)},m}function yI(a,c,m){m=wa(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var k=c.value;m.payload=function(){return w(k)},m.callback=function(){dw(a,c)}}var q=a.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(m.callback=function(){dw(a,c),typeof w!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var Z=c.stack;this.componentDidCatch(c.value,{componentStack:Z!==null?Z:""})}),m}function vI(a,c,m){var w=a.pingCache;if(w===null){w=a.pingCache=new S$;var k=new Set;w.set(c,k)}else k=w.get(c),k===void 0&&(k=new Set,w.set(c,k));k.has(m)||(k.add(m),a=D$.bind(null,a,c,m),c.then(a,a))}function bI(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function xI(a,c,m,w,k){return a.mode&1?(a.flags|=65536,a.lanes=k,a):(a===c?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=wa(-1,1),c.tag=2,al(m,c,1))),m.lanes|=1),a)}var E$=A.ReactCurrentOwner,is=!1;function qi(a,c,m,w){c.child=a===null?$k(c,null,m,w):Du(c,a.child,m,w)}function wI(a,c,m,w,k){m=m.render;var q=c.ref;return Mu(c,k),w=nw(a,c,m,w,q,k),m=rw(),a!==null&&!is?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,_a(a,c,k)):(mr&&m&&Mx(c),c.flags|=1,qi(a,c,w,k),c.child)}function _I(a,c,m,w,k){if(a===null){var q=m.type;return typeof q=="function"&&!qw(q)&&q.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=q,SI(a,c,q,w,k)):(a=bg(m.type,null,w,c,c.mode,k),a.ref=c.ref,a.return=c,c.child=a)}if(q=a.child,!(a.lanes&k)){var Z=q.memoizedProps;if(m=m.compare,m=m!==null?m:Uf,m(Z,w)&&a.ref===c.ref)return _a(a,c,k)}return c.flags|=1,a=pl(q,w),a.ref=c.ref,a.return=c,c.child=a}function SI(a,c,m,w,k){if(a!==null){var q=a.memoizedProps;if(Uf(q,w)&&a.ref===c.ref)if(is=!1,c.pendingProps=w=q,(a.lanes&k)!==0)a.flags&131072&&(is=!0);else return c.lanes=a.lanes,_a(a,c,k)}return fw(a,c,m,w,k)}function EI(a,c,m){var w=c.pendingProps,k=w.children,q=a!==null?a.memoizedState:null;if(w.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Wu,_s),_s|=m;else{if(!(m&0x40000000))return a=q!==null?q.baseLanes|m:m,c.lanes=c.childLanes=0x40000000,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,or(Wu,_s),_s|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=q!==null?q.baseLanes:m,or(Wu,_s),_s|=w}else q!==null?(w=q.baseLanes|m,c.memoizedState=null):w=m,or(Wu,_s),_s|=w;return qi(a,c,k,m),c.child}function NI(a,c){var m=c.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function fw(a,c,m,w,k){var q=rs(m)?yc:yi.current;return q=qu(c,q),Mu(c,k),m=nw(a,c,m,w,q,k),w=rw(),a!==null&&!is?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,_a(a,c,k)):(mr&&w&&Mx(c),c.flags|=1,qi(a,c,m,k),c.child)}function kI(a,c,m,w,k){if(rs(m)){var q=!0;Um(c)}else q=!1;if(Mu(c,k),c.stateNode===null)lg(a,c),hI(c,m,w),cw(c,m,w,k),w=!0;else if(a===null){var Z=c.stateNode,ge=c.memoizedProps;Z.props=ge;var Se=Z.context,He=m.contextType;typeof He=="object"&&He!==null?He=Hs(He):(He=rs(m)?yc:yi.current,He=qu(c,He));var ht=m.getDerivedStateFromProps,gt=typeof ht=="function"||typeof Z.getSnapshotBeforeUpdate=="function";gt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==w||Se!==He)&&mI(c,Z,w,He),ol=!1;var ft=c.memoizedState;Z.state=ft,Xm(c,w,Z,k),Se=c.memoizedState,ge!==w||ft!==Se||ns.current||ol?(typeof ht=="function"&&(lw(c,m,ht,w),Se=c.memoizedState),(ge=ol||pI(c,m,ge,w,ft,Se,He))?(gt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=Se),Z.props=w,Z.state=Se,Z.context=He,w=ge):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{Z=c.stateNode,zk(a,c),ge=c.memoizedProps,He=c.type===c.elementType?ge:yo(c.type,ge),Z.props=He,gt=c.pendingProps,ft=Z.context,Se=m.contextType,typeof Se=="object"&&Se!==null?Se=Hs(Se):(Se=rs(m)?yc:yi.current,Se=qu(c,Se));var qt=m.getDerivedStateFromProps;(ht=typeof qt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(ge!==gt||ft!==Se)&&mI(c,Z,w,Se),ol=!1,ft=c.memoizedState,Z.state=ft,Xm(c,w,Z,k);var Bt=c.memoizedState;ge!==gt||ft!==Bt||ns.current||ol?(typeof qt=="function"&&(lw(c,m,qt,w),Bt=c.memoizedState),(He=ol||pI(c,m,He,w,ft,Bt,Se)||!1)?(ht||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(w,Bt,Se),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(w,Bt,Se)),typeof Z.componentDidUpdate=="function"&&(c.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Z.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Bt),Z.props=w,Z.state=Bt,Z.context=Se,w=He):(typeof Z.componentDidUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||ge===a.memoizedProps&&ft===a.memoizedState||(c.flags|=1024),w=!1)}return pw(a,c,m,w,q,k)}function pw(a,c,m,w,k,q){NI(a,c);var Z=(c.flags&128)!==0;if(!w&&!Z)return k&&Ok(c,m,!1),_a(a,c,q);w=c.stateNode,E$.current=c;var ge=Z&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&Z?(c.child=Du(c,a.child,null,q),c.child=Du(c,null,ge,q)):qi(a,c,ge,q),c.memoizedState=w.state,k&&Ok(c,m,!0),c.child}function II(a){var c=a.stateNode;c.pendingContext?Tk(a,c.pendingContext,c.pendingContext!==c.context):c.context&&Tk(a,c.context,!1),Jx(a,c.containerInfo)}function CI(a,c,m,w,k){return Fu(),Wx(k),c.flags|=256,qi(a,c,m,w),c.child}var hw={dehydrated:null,treeContext:null,retryLane:0};function mw(a){return{baseLanes:a,cachePool:null,transitions:null}}function TI(a,c,m){var w=c.pendingProps,k=Or.current,q=!1,Z=(c.flags&128)!==0,ge;if((ge=Z)||(ge=a!==null&&a.memoizedState===null?!1:(k&2)!==0),ge?(q=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),or(Or,k&1),a===null)return zx(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=0x40000000:c.lanes=1,null):(Z=w.children,a=w.fallback,q?(w=c.mode,q=c.child,Z={mode:"hidden",children:Z},!(w&1)&&q!==null?(q.childLanes=0,q.pendingProps=Z):q=xg(Z,w,0,null),a=Ic(a,w,m,null),q.return=c,a.return=c,q.sibling=a,c.child=q,c.child.memoizedState=mw(m),c.memoizedState=hw,a):gw(c,Z));if(k=a.memoizedState,k!==null&&(ge=k.dehydrated,ge!==null))return N$(a,c,Z,w,ge,k,m);if(q){q=w.fallback,Z=c.mode,k=a.child,ge=k.sibling;var Se={mode:"hidden",children:w.children};return!(Z&1)&&c.child!==k?(w=c.child,w.childLanes=0,w.pendingProps=Se,c.deletions=null):(w=pl(k,Se),w.subtreeFlags=k.subtreeFlags&0xe00000),ge!==null?q=pl(ge,q):(q=Ic(q,Z,m,null),q.flags|=2),q.return=c,w.return=c,w.sibling=q,c.child=w,w=q,q=c.child,Z=a.child.memoizedState,Z=Z===null?mw(m):{baseLanes:Z.baseLanes|m,cachePool:null,transitions:Z.transitions},q.memoizedState=Z,q.childLanes=a.childLanes&~m,c.memoizedState=hw,w}return q=a.child,a=q.sibling,w=pl(q,{mode:"visible",children:w.children}),!(c.mode&1)&&(w.lanes=m),w.return=c,w.sibling=null,a!==null&&(m=c.deletions,m===null?(c.deletions=[a],c.flags|=16):m.push(a)),c.child=w,c.memoizedState=null,w}function gw(a,c){return c=xg({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function ag(a,c,m,w){return w!==null&&Wx(w),Du(c,a.child,null,m),a=gw(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function N$(a,c,m,w,k,q,Z){if(m)return c.flags&256?(c.flags&=-257,w=uw(Error(n(422))),ag(a,c,Z,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(q=w.fallback,k=c.mode,w=xg({mode:"visible",children:w.children},k,0,null),q=Ic(q,k,Z,null),q.flags|=2,w.return=c,q.return=c,w.sibling=q,c.child=w,c.mode&1&&Du(c,a.child,null,Z),c.child.memoizedState=mw(Z),c.memoizedState=hw,q);if(!(c.mode&1))return ag(a,c,Z,null);if(k.data==="$!"){if(w=k.nextSibling&&k.nextSibling.dataset,w)var ge=w.dgst;return w=ge,q=Error(n(419)),w=uw(q,w,void 0),ag(a,c,Z,w)}if(ge=(Z&a.childLanes)!==0,is||ge){if(w=oi,w!==null){switch(Z&-Z){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:case 0x4000000:k=32;break;case 0x20000000:k=0x10000000;break;default:k=0}k=k&(w.suspendedLanes|Z)?0:k,k!==0&&k!==q.retryLane&&(q.retryLane=k,xa(a,k),xo(w,a,k,-1))}return Rw(),w=uw(Error(n(421))),ag(a,c,Z,w)}return k.data==="$?"?(c.flags|=128,c.child=a.child,c=L$.bind(null,a),k._reactRetry=c,null):(a=q.treeContext,ws=nl(k.nextSibling),xs=c,mr=!0,go=null,a!==null&&(Us[Vs++]=va,Us[Vs++]=ba,Us[Vs++]=vc,va=a.id,ba=a.overflow,vc=c),c=gw(c,w.children),c.flags|=4096,c)}function jI(a,c,m){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),Kx(a.return,c,m)}function yw(a,c,m,w,k){var q=a.memoizedState;q===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:k}:(q.isBackwards=c,q.rendering=null,q.renderingStartTime=0,q.last=w,q.tail=m,q.tailMode=k)}function OI(a,c,m){var w=c.pendingProps,k=w.revealOrder,q=w.tail;if(qi(a,c,w.children,m),w=Or.current,w&2)w=w&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jI(a,m,c);else if(a.tag===19)jI(a,m,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(or(Or,w),!(c.mode&1))c.memoizedState=null;else switch(k){case"forwards":for(m=c.child,k=null;m!==null;)a=m.alternate,a!==null&&eg(a)===null&&(k=m),m=m.sibling;m=k,m===null?(k=c.child,c.child=null):(k=m.sibling,m.sibling=null),yw(c,!1,k,m,q);break;case"backwards":for(m=null,k=c.child,c.child=null;k!==null;){if(a=k.alternate,a!==null&&eg(a)===null){c.child=k;break}a=k.sibling,k.sibling=m,m=k,k=a}yw(c,!0,m,null,q);break;case"together":yw(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function lg(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function _a(a,c,m){if(a!==null&&(c.dependencies=a.dependencies),Sc|=c.lanes,!(m&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(n(153));if(c.child!==null){for(a=c.child,m=pl(a,a.pendingProps),c.child=m,m.return=c;a.sibling!==null;)a=a.sibling,m=m.sibling=pl(a,a.pendingProps),m.return=c;m.sibling=null}return c.child}function k$(a,c,m){switch(c.tag){case 3:II(c),Fu();break;case 5:Vk(c);break;case 1:rs(c.type)&&Um(c);break;case 4:Jx(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,k=c.memoizedProps.value;or(Jm,w._currentValue),w._currentValue=k;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(or(Or,Or.current&1),c.flags|=128,null):m&c.child.childLanes?TI(a,c,m):(or(Or,Or.current&1),a=_a(a,c,m),a!==null?a.sibling:null);or(Or,Or.current&1);break;case 19:if(w=(m&c.childLanes)!==0,a.flags&128){if(w)return OI(a,c,m);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),or(Or,Or.current),w)break;return null;case 22:case 23:return c.lanes=0,EI(a,c,m)}return _a(a,c,m)}var RI,vw,qI,AI;RI=function(a,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},vw=function(){},qI=function(a,c,m,w){var k=a.memoizedProps;if(k!==w){a=c.stateNode,wc(Uo.current);var q=null;switch(m){case"input":k=_t(a,k),w=_t(a,w),q=[];break;case"select":k=oe({},k,{value:void 0}),w=oe({},w,{value:void 0}),q=[];break;case"textarea":k=Ve(a,k),w=Ve(a,w),q=[];break;default:typeof k.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Bm)}Yi(m,w);var Z;m=null;for(He in k)if(!w.hasOwnProperty(He)&&k.hasOwnProperty(He)&&k[He]!=null)if(He==="style"){var ge=k[He];for(Z in ge)ge.hasOwnProperty(Z)&&(m||(m={}),m[Z]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?q||(q=[]):(q=q||[]).push(He,null));for(He in w){var Se=w[He];if(ge=k?.[He],w.hasOwnProperty(He)&&Se!==ge&&(Se!=null||ge!=null))if(He==="style")if(ge){for(Z in ge)!ge.hasOwnProperty(Z)||Se&&Se.hasOwnProperty(Z)||(m||(m={}),m[Z]="");for(Z in Se)Se.hasOwnProperty(Z)&&ge[Z]!==Se[Z]&&(m||(m={}),m[Z]=Se[Z])}else m||(q||(q=[]),q.push(He,m)),m=Se;else He==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,ge=ge?ge.__html:void 0,Se!=null&&ge!==Se&&(q=q||[]).push(He,Se)):He==="children"?typeof Se!="string"&&typeof Se!="number"||(q=q||[]).push(He,""+Se):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Se!=null&&He==="onScroll"&&fr("scroll",a),q||ge===Se||(q=[])):(q=q||[]).push(He,Se))}m&&(q=q||[]).push("style",m);var He=q;(c.updateQueue=He)&&(c.flags|=4)}},AI=function(a,c,m,w){m!==w&&(c.flags|=4)};function sp(a,c){if(!mr)switch(a.tailMode){case"hidden":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function bi(a){var c=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(c)for(var k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags&0xe00000,w|=k.flags&0xe00000,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)m|=k.lanes|k.childLanes,w|=k.subtreeFlags,w|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=w,a.childLanes=m,c}function I$(a,c,m){var w=c.pendingProps;switch($x(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(c),null;case 1:return rs(c.type)&&Wm(),bi(c),null;case 3:return w=c.stateNode,$u(),pr(ns),pr(yi),Xx(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Qm(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,go!==null&&(Tw(go),go=null))),vw(a,c),bi(c),null;case 5:Zx(c);var k=wc(ep.current);if(m=c.type,a!==null&&c.stateNode!=null)qI(a,c,m,w,k),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(n(166));return bi(c),null}if(a=wc(Uo.current),Qm(c)){w=c.stateNode,m=c.type;var q=c.memoizedProps;switch(w[Wo]=c,w[Gf]=q,a=(c.mode&1)!==0,m){case"dialog":fr("cancel",w),fr("close",w);break;case"iframe":case"object":case"embed":fr("load",w);break;case"video":case"audio":for(k=0;k<Hf.length;k++)fr(Hf[k],w);break;case"source":fr("error",w);break;case"img":case"image":case"link":fr("error",w),fr("load",w);break;case"details":fr("toggle",w);break;case"input":jt(w,q),fr("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!q.multiple},fr("invalid",w);break;case"textarea":rt(w,q),fr("invalid",w)}Yi(m,q),k=null;for(var Z in q)if(q.hasOwnProperty(Z)){var ge=q[Z];Z==="children"?typeof ge=="string"?w.textContent!==ge&&(q.suppressHydrationWarning!==!0&&$m(w.textContent,ge,a),k=["children",ge]):typeof ge=="number"&&w.textContent!==""+ge&&(q.suppressHydrationWarning!==!0&&$m(w.textContent,ge,a),k=["children",""+ge]):i.hasOwnProperty(Z)&&ge!=null&&Z==="onScroll"&&fr("scroll",w)}switch(m){case"input":Xe(w),xe(w,q,!0);break;case"textarea":Xe(w),ut(w);break;case"select":case"option":break;default:typeof q.onClick=="function"&&(w.onclick=Bm)}w=k,c.updateQueue=w,w!==null&&(c.flags|=4)}else{Z=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Qt(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=Z.createElement("div"),a.innerHTML="<script></script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=Z.createElement(m,{is:w.is}):(a=Z.createElement(m),m==="select"&&(Z=a,w.multiple?Z.multiple=!0:w.size&&(Z.size=w.size))):a=Z.createElementNS(a,m),a[Wo]=c,a[Gf]=w,RI(a,c,!1,!1),c.stateNode=a;e:{switch(Z=Xi(m,w),m){case"dialog":fr("cancel",a),fr("close",a),k=w;break;case"iframe":case"object":case"embed":fr("load",a),k=w;break;case"video":case"audio":for(k=0;k<Hf.length;k++)fr(Hf[k],a);k=w;break;case"source":fr("error",a),k=w;break;case"img":case"image":case"link":fr("error",a),fr("load",a),k=w;break;case"details":fr("toggle",a),k=w;break;case"input":jt(a,w),k=_t(a,w),fr("invalid",a);break;case"option":k=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},k=oe({},w,{value:void 0}),fr("invalid",a);break;case"textarea":rt(a,w),k=Ve(a,w),fr("invalid",a);break;default:k=w}Yi(m,k),ge=k;for(q in ge)if(ge.hasOwnProperty(q)){var Se=ge[q];q==="style"?Jt(a,Se):q==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&ur(a,Se)):q==="children"?typeof Se=="string"?(m!=="textarea"||Se!=="")&&Ln(a,Se):typeof Se=="number"&&Ln(a,""+Se):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(i.hasOwnProperty(q)?Se!=null&&q==="onScroll"&&fr("scroll",a):Se!=null&&O(a,q,Se,Z))}switch(m){case"input":Xe(a),xe(a,w,!1);break;case"textarea":Xe(a),ut(a);break;case"option":w.value!=null&&a.setAttribute("value",""+Oe(w.value));break;case"select":a.multiple=!!w.multiple,q=w.value,q!=null?Ae(a,!!w.multiple,q,!1):w.defaultValue!=null&&Ae(a,!!w.multiple,w.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Bm)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return bi(c),null;case 6:if(a&&c.stateNode!=null)AI(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(n(166));if(m=wc(ep.current),wc(Uo.current),Qm(c)){if(w=c.stateNode,m=c.memoizedProps,w[Wo]=c,(q=w.nodeValue!==m)&&(a=xs,a!==null))switch(a.tag){case 3:$m(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&$m(w.nodeValue,m,(a.mode&1)!==0)}q&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Wo]=c,c.stateNode=w}return bi(c),null;case 13:if(pr(Or),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(mr&&ws!==null&&c.mode&1&&!(c.flags&128))Dk(),Fu(),c.flags|=98560,q=!1;else if(q=Qm(c),w!==null&&w.dehydrated!==null){if(a===null){if(!q)throw Error(n(318));if(q=c.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(n(317));q[Wo]=c}else Fu(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;bi(c),q=!1}else go!==null&&(Tw(go),go=null),q=!0;if(!q)return c.flags&65536?c:null}return c.flags&128?(c.lanes=m,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,c.mode&1&&(a===null||Or.current&1?ri===0&&(ri=3):Rw())),c.updateQueue!==null&&(c.flags|=4),bi(c),null);case 4:return $u(),vw(a,c),a===null&&Kf(c.stateNode.containerInfo),bi(c),null;case 10:return Hx(c.type._context),bi(c),null;case 17:return rs(c.type)&&Wm(),bi(c),null;case 19:if(pr(Or),q=c.memoizedState,q===null)return bi(c),null;if(w=(c.flags&128)!==0,Z=q.rendering,Z===null)if(w)sp(q,!1);else{if(ri!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(Z=eg(a),Z!==null){for(c.flags|=128,sp(q,!1),w=Z.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)q=m,a=w,q.flags&=0xe00002,Z=q.alternate,Z===null?(q.childLanes=0,q.lanes=a,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=Z.childLanes,q.lanes=Z.lanes,q.child=Z.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=Z.memoizedProps,q.memoizedState=Z.memoizedState,q.updateQueue=Z.updateQueue,q.type=Z.type,a=Z.dependencies,q.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return or(Or,Or.current&1|2),c.child}a=a.sibling}q.tail!==null&&dr()>Uu&&(c.flags|=128,w=!0,sp(q,!1),c.lanes=4194304)}else{if(!w)if(a=eg(Z),a!==null){if(c.flags|=128,w=!0,m=a.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),sp(q,!0),q.tail===null&&q.tailMode==="hidden"&&!Z.alternate&&!mr)return bi(c),null}else 2*dr()-q.renderingStartTime>Uu&&m!==0x40000000&&(c.flags|=128,w=!0,sp(q,!1),c.lanes=4194304);q.isBackwards?(Z.sibling=c.child,c.child=Z):(m=q.last,m!==null?m.sibling=Z:c.child=Z,q.last=Z)}return q.tail!==null?(c=q.tail,q.rendering=c,q.tail=c.sibling,q.renderingStartTime=dr(),c.sibling=null,m=Or.current,or(Or,w?m&1|2:m&1),c):(bi(c),null);case 22:case 23:return Ow(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&c.mode&1?_s&0x40000000&&(bi(c),c.subtreeFlags&6&&(c.flags|=8192)):bi(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function C$(a,c){switch($x(c),c.tag){case 1:return rs(c.type)&&Wm(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return $u(),pr(ns),pr(yi),Xx(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Zx(c),null;case 13:if(pr(Or),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Fu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return pr(Or),null;case 4:return $u(),null;case 10:return Hx(c.type._context),null;case 22:case 23:return Ow(),null;case 24:return null;default:return null}}var cg=!1,xi=!1,T$=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function zu(a,c){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Dr(a,c,w)}else m.current=null}function bw(a,c,m){try{m()}catch(w){Dr(a,c,w)}}var PI=!1;function j$(a,c){if(Ox=Ge,a=pk(),Sx(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var k=w.anchorOffset,q=w.focusNode;w=w.focusOffset;try{m.nodeType,q.nodeType}catch{m=null;break e}var Z=0,ge=-1,Se=-1,He=0,ht=0,gt=a,ft=null;t:for(;;){for(var qt;gt!==m||k!==0&&gt.nodeType!==3||(ge=Z+k),gt!==q||w!==0&&gt.nodeType!==3||(Se=Z+w),gt.nodeType===3&&(Z+=gt.nodeValue.length),(qt=gt.firstChild)!==null;)ft=gt,gt=qt;for(;;){if(gt===a)break t;if(ft===m&&++He===k&&(ge=Z),ft===q&&++ht===w&&(Se=Z),(qt=gt.nextSibling)!==null)break;gt=ft,ft=gt.parentNode}gt=qt}m=ge===-1||Se===-1?null:{start:ge,end:Se}}else m=null}m=m||{start:0,end:0}}else m=null;for(Rx={focusedElem:a,selectionRange:m},Ge=!1,Lt=c;Lt!==null;)if(c=Lt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Lt=a;else for(;Lt!==null;){c=Lt;try{var Bt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Bt!==null){var Ut=Bt.memoizedProps,$r=Bt.memoizedState,Fe=c.stateNode,Ce=Fe.getSnapshotBeforeUpdate(c.elementType===c.type?Ut:yo(c.type,Ut),$r);Fe.__reactInternalSnapshotBeforeUpdate=Ce}break;case 3:var $e=c.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(bt){Dr(c,c.return,bt)}if(a=c.sibling,a!==null){a.return=c.return,Lt=a;break}Lt=c.return}return Bt=PI,PI=!1,Bt}function op(a,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var k=w=w.next;do{if((k.tag&a)===a){var q=k.destroy;k.destroy=void 0,q!==void 0&&bw(c,m,q)}k=k.next}while(k!==w)}}function ug(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function xw(a){var c=a.ref;if(c!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof c=="function"?c(a):c.current=a}}function FI(a){var c=a.alternate;c!==null&&(a.alternate=null,FI(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Wo],delete c[Gf],delete c[Fx],delete c[f$],delete c[p$])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function DI(a){return a.tag===5||a.tag===3||a.tag===4}function LI(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||DI(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ww(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(a,c):m.insertBefore(a,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(a,m)):(c=m,c.appendChild(a)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Bm));else if(w!==4&&(a=a.child,a!==null))for(ww(a,c,m),a=a.sibling;a!==null;)ww(a,c,m),a=a.sibling}function _w(a,c,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?m.insertBefore(a,c):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(_w(a,c,m),a=a.sibling;a!==null;)_w(a,c,m),a=a.sibling}var ci=null,vo=!1;function ll(a,c,m){for(m=m.child;m!==null;)MI(a,c,m),m=m.sibling}function MI(a,c,m){if(ts&&typeof ts.onCommitFiberUnmount=="function")try{ts.onCommitFiberUnmount(Ya,m)}catch{}switch(m.tag){case 5:xi||zu(m,c);case 6:var w=ci,k=vo;ci=null,ll(a,c,m),ci=w,vo=k,ci!==null&&(vo?(a=ci,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):ci.removeChild(m.stateNode));break;case 18:ci!==null&&(vo?(a=ci,m=m.stateNode,a.nodeType===8?Px(a.parentNode,m):a.nodeType===1&&Px(a,m),Te(a)):Px(ci,m.stateNode));break;case 4:w=ci,k=vo,ci=m.stateNode.containerInfo,vo=!0,ll(a,c,m),ci=w,vo=k;break;case 0:case 11:case 14:case 15:if(!xi&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){k=w=w.next;do{var q=k,Z=q.destroy;q=q.tag,Z!==void 0&&(q&2||q&4)&&bw(m,c,Z),k=k.next}while(k!==w)}ll(a,c,m);break;case 1:if(!xi&&(zu(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(ge){Dr(m,c,ge)}ll(a,c,m);break;case 21:ll(a,c,m);break;case 22:m.mode&1?(xi=(w=xi)||m.memoizedState!==null,ll(a,c,m),xi=w):ll(a,c,m);break;default:ll(a,c,m)}}function $I(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new T$),c.forEach(function(w){var k=M$.bind(null,a,w);m.has(w)||(m.add(w),w.then(k,k))})}}function bo(a,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var k=m[w];try{var q=a,Z=c,ge=Z;e:for(;ge!==null;){switch(ge.tag){case 5:ci=ge.stateNode,vo=!1;break e;case 3:ci=ge.stateNode.containerInfo,vo=!0;break e;case 4:ci=ge.stateNode.containerInfo,vo=!0;break e}ge=ge.return}if(ci===null)throw Error(n(160));MI(q,Z,k),ci=null,vo=!1;var Se=k.alternate;Se!==null&&(Se.return=null),k.return=null}catch(He){Dr(k,c,He)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)BI(c,a),c=c.sibling}function BI(a,c){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(bo(c,a),Ho(a),w&4){try{op(3,a,a.return),ug(3,a)}catch(Ut){Dr(a,a.return,Ut)}try{op(5,a,a.return)}catch(Ut){Dr(a,a.return,Ut)}}break;case 1:bo(c,a),Ho(a),w&512&&m!==null&&zu(m,m.return);break;case 5:if(bo(c,a),Ho(a),w&512&&m!==null&&zu(m,m.return),a.flags&32){var k=a.stateNode;try{Ln(k,"")}catch(Ut){Dr(a,a.return,Ut)}}if(w&4&&(k=a.stateNode,k!=null)){var q=a.memoizedProps,Z=m!==null?m.memoizedProps:q,ge=a.type,Se=a.updateQueue;if(a.updateQueue=null,Se!==null)try{ge==="input"&&q.type==="radio"&&q.name!=null&&Vt(k,q),Xi(ge,Z);var He=Xi(ge,q);for(Z=0;Z<Se.length;Z+=2){var ht=Se[Z],gt=Se[Z+1];ht==="style"?Jt(k,gt):ht==="dangerouslySetInnerHTML"?ur(k,gt):ht==="children"?Ln(k,gt):O(k,ht,gt,He)}switch(ge){case"input":nn(k,q);break;case"textarea":Me(k,q);break;case"select":var ft=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!q.multiple;var qt=q.value;qt!=null?Ae(k,!!q.multiple,qt,!1):ft!==!!q.multiple&&(q.defaultValue!=null?Ae(k,!!q.multiple,q.defaultValue,!0):Ae(k,!!q.multiple,q.multiple?[]:"",!1))}k[Gf]=q}catch(Ut){Dr(a,a.return,Ut)}}break;case 6:if(bo(c,a),Ho(a),w&4){if(a.stateNode===null)throw Error(n(162));k=a.stateNode,q=a.memoizedProps;try{k.nodeValue=q}catch(Ut){Dr(a,a.return,Ut)}}break;case 3:if(bo(c,a),Ho(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Te(c.containerInfo)}catch(Ut){Dr(a,a.return,Ut)}break;case 4:bo(c,a),Ho(a);break;case 13:bo(c,a),Ho(a),k=a.child,k.flags&8192&&(q=k.memoizedState!==null,k.stateNode.isHidden=q,!q||k.alternate!==null&&k.alternate.memoizedState!==null||(Nw=dr())),w&4&&$I(a);break;case 22:if(ht=m!==null&&m.memoizedState!==null,a.mode&1?(xi=(He=xi)||ht,bo(c,a),xi=He):bo(c,a),Ho(a),w&8192){if(He=a.memoizedState!==null,(a.stateNode.isHidden=He)&&!ht&&a.mode&1)for(Lt=a,ht=a.child;ht!==null;){for(gt=Lt=ht;Lt!==null;){switch(ft=Lt,qt=ft.child,ft.tag){case 0:case 11:case 14:case 15:op(4,ft,ft.return);break;case 1:zu(ft,ft.return);var Bt=ft.stateNode;if(typeof Bt.componentWillUnmount=="function"){w=ft,m=ft.return;try{c=w,Bt.props=c.memoizedProps,Bt.state=c.memoizedState,Bt.componentWillUnmount()}catch(Ut){Dr(w,m,Ut)}}break;case 5:zu(ft,ft.return);break;case 22:if(ft.memoizedState!==null){UI(gt);continue}}qt!==null?(qt.return=ft,Lt=qt):UI(gt)}ht=ht.sibling}e:for(ht=null,gt=a;;){if(gt.tag===5){if(ht===null){ht=gt;try{k=gt.stateNode,He?(q=k.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none"):(ge=gt.stateNode,Se=gt.memoizedProps.style,Z=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,ge.style.display=Tr("display",Z))}catch(Ut){Dr(a,a.return,Ut)}}}else if(gt.tag===6){if(ht===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Ut){Dr(a,a.return,Ut)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===a)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===a)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===a)break e;ht===gt&&(ht=null),gt=gt.return}ht===gt&&(ht=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:bo(c,a),Ho(a),w&4&&$I(a);break;case 21:break;default:bo(c,a),Ho(a)}}function Ho(a){var c=a.flags;if(c&2){try{e:{for(var m=a.return;m!==null;){if(DI(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var k=w.stateNode;w.flags&32&&(Ln(k,""),w.flags&=-33);var q=LI(a);_w(a,q,k);break;case 3:case 4:var Z=w.stateNode.containerInfo,ge=LI(a);ww(a,ge,Z);break;default:throw Error(n(161))}}catch(Se){Dr(a,a.return,Se)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function O$(a,c,m){Lt=a,zI(a)}function zI(a,c,m){for(var w=(a.mode&1)!==0;Lt!==null;){var k=Lt,q=k.child;if(k.tag===22&&w){var Z=k.memoizedState!==null||cg;if(!Z){var ge=k.alternate,Se=ge!==null&&ge.memoizedState!==null||xi;ge=cg;var He=xi;if(cg=Z,(xi=Se)&&!He)for(Lt=k;Lt!==null;)Z=Lt,Se=Z.child,Z.tag===22&&Z.memoizedState!==null?VI(k):Se!==null?(Se.return=Z,Lt=Se):VI(k);for(;q!==null;)Lt=q,zI(q),q=q.sibling;Lt=k,cg=ge,xi=He}WI(a)}else k.subtreeFlags&8772&&q!==null?(q.return=k,Lt=q):WI(a)}}function WI(a){for(;Lt!==null;){var c=Lt;if(c.flags&8772){var m=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:xi||ug(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!xi)if(m===null)w.componentDidMount();else{var k=c.elementType===c.type?m.memoizedProps:yo(c.type,m.memoizedProps);w.componentDidUpdate(k,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var q=c.updateQueue;q!==null&&Uk(c,q,w);break;case 3:var Z=c.updateQueue;if(Z!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}Uk(c,Z,m)}break;case 5:var ge=c.stateNode;if(m===null&&c.flags&4){m=ge;var Se=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&m.focus();break;case"img":Se.src&&(m.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var He=c.alternate;if(He!==null){var ht=He.memoizedState;if(ht!==null){var gt=ht.dehydrated;gt!==null&&Te(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xi||c.flags&512&&xw(c)}catch(ft){Dr(c,c.return,ft)}}if(c===a){Lt=null;break}if(m=c.sibling,m!==null){m.return=c.return,Lt=m;break}Lt=c.return}}function UI(a){for(;Lt!==null;){var c=Lt;if(c===a){Lt=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Lt=m;break}Lt=c.return}}function VI(a){for(;Lt!==null;){var c=Lt;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{ug(4,c)}catch(Se){Dr(c,m,Se)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var k=c.return;try{w.componentDidMount()}catch(Se){Dr(c,k,Se)}}var q=c.return;try{xw(c)}catch(Se){Dr(c,q,Se)}break;case 5:var Z=c.return;try{xw(c)}catch(Se){Dr(c,Z,Se)}}}catch(Se){Dr(c,c.return,Se)}if(c===a){Lt=null;break}var ge=c.sibling;if(ge!==null){ge.return=c.return,Lt=ge;break}Lt=c.return}}var R$=Math.ceil,dg=A.ReactCurrentDispatcher,Sw=A.ReactCurrentOwner,Qs=A.ReactCurrentBatchConfig,An=0,oi=null,Kr=null,ui=0,_s=0,Wu=rl(0),ri=0,ap=null,Sc=0,fg=0,Ew=0,lp=null,ss=null,Nw=0,Uu=1/0,Sa=null,pg=!1,kw=null,cl=null,hg=!1,ul=null,mg=0,cp=0,Iw=null,gg=-1,yg=0;function Ai(){return An&6?dr():gg!==-1?gg:gg=dr()}function dl(a){return a.mode&1?An&2&&ui!==0?ui&-ui:m$.transition!==null?(yg===0&&(yg=Rm()),yg):(a=Mn,a!==0||(a=window.event,a=a===void 0?16:Ee(a.type)),a):1}function xo(a,c,m,w){if(50<cp)throw cp=0,Iw=null,Error(n(185));hc(a,m,w),(!(An&2)||a!==oi)&&(a===oi&&(!(An&2)&&(fg|=m),ri===4&&fl(a,ui)),os(a,w),m===1&&An===0&&!(c.mode&1)&&(Uu=dr()+500,Vm&&sl()))}function os(a,c){var m=a.callbackNode;mx(a,c);var w=el(a,a===oi?ui:0);if(w===0)m!==null&&dc(m),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(m!=null&&dc(m),c===1)a.tag===0?h$(KI.bind(null,a)):Rk(KI.bind(null,a)),u$(function(){!(An&6)&&sl()}),m=null;else{switch(qm(w)){case 1:m=fc;break;case 4:m=Nu;break;case 16:m=Za;break;case 0x20000000:m=pc;break;default:m=Za}m=tC(m,HI.bind(null,a))}a.callbackPriority=c,a.callbackNode=m}}function HI(a,c){if(gg=-1,yg=0,An&6)throw Error(n(327));var m=a.callbackNode;if(Vu()&&a.callbackNode!==m)return null;var w=el(a,a===oi?ui:0);if(w===0)return null;if(w&30||w&a.expiredLanes||c)c=vg(a,w);else{c=w;var k=An;An|=2;var q=GI();(oi!==a||ui!==c)&&(Sa=null,Uu=dr()+500,Nc(a,c));do try{P$();break}catch(ge){QI(a,ge)}while(!0);Vx(),dg.current=q,An=k,Kr!==null?c=0:(oi=null,ui=0,c=ri)}if(c!==0){if(c===2&&(k=Af(a),k!==0&&(w=k,c=Cw(a,k))),c===1)throw m=ap,Nc(a,0),fl(a,w),os(a,dr()),m;if(c===6)fl(a,w);else{if(k=a.current.alternate,!(w&30)&&!q$(k)&&(c=vg(a,w),c===2&&(q=Af(a),q!==0&&(w=q,c=Cw(a,q))),c===1))throw m=ap,Nc(a,0),fl(a,w),os(a,dr()),m;switch(a.finishedWork=k,a.finishedLanes=w,c){case 0:case 1:throw Error(n(345));case 2:kc(a,ss,Sa);break;case 3:if(fl(a,w),(w&0x7c00000)===w&&(c=Nw+500-dr(),10<c)){if(el(a,0)!==0)break;if(k=a.suspendedLanes,(k&w)!==w){Ai(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=Ax(kc.bind(null,a,ss,Sa),c);break}kc(a,ss,Sa);break;case 4:if(fl(a,w),(w&4194240)===w)break;for(c=a.eventTimes,k=-1;0<w;){var Z=31-gi(w);q=1<<Z,Z=c[Z],Z>k&&(k=Z),w&=~q}if(w=k,w=dr()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*R$(w/1960))-w,10<w){a.timeoutHandle=Ax(kc.bind(null,a,ss,Sa),w);break}kc(a,ss,Sa);break;case 5:kc(a,ss,Sa);break;default:throw Error(n(329))}}}return os(a,dr()),a.callbackNode===m?HI.bind(null,a):null}function Cw(a,c){var m=lp;return a.current.memoizedState.isDehydrated&&(Nc(a,c).flags|=256),a=vg(a,c),a!==2&&(c=ss,ss=m,c!==null&&Tw(c)),a}function Tw(a){ss===null?ss=a:ss.push.apply(ss,a)}function q$(a){for(var c=a;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var k=m[w],q=k.getSnapshot;k=k.value;try{if(!mo(q(),k))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fl(a,c){for(c&=~Ew,c&=~fg,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var m=31-gi(c),w=1<<m;a[m]=-1,c&=~w}}function KI(a){if(An&6)throw Error(n(327));Vu();var c=el(a,0);if(!(c&1))return os(a,dr()),null;var m=vg(a,c);if(a.tag!==0&&m===2){var w=Af(a);w!==0&&(c=w,m=Cw(a,w))}if(m===1)throw m=ap,Nc(a,0),fl(a,c),os(a,dr()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,kc(a,ss,Sa),os(a,dr()),null}function jw(a,c){var m=An;An|=1;try{return a(c)}finally{An=m,An===0&&(Uu=dr()+500,Vm&&sl())}}function Ec(a){ul!==null&&ul.tag===0&&!(An&6)&&Vu();var c=An;An|=1;var m=Qs.transition,w=Mn;try{if(Qs.transition=null,Mn=1,a)return a()}finally{Mn=w,Qs.transition=m,An=c,!(An&6)&&sl()}}function Ow(){_s=Wu.current,pr(Wu)}function Nc(a,c){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,c$(m)),Kr!==null)for(m=Kr.return;m!==null;){var w=m;switch($x(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Wm();break;case 3:$u(),pr(ns),pr(yi),Xx();break;case 5:Zx(w);break;case 4:$u();break;case 13:pr(Or);break;case 19:pr(Or);break;case 10:Hx(w.type._context);break;case 22:case 23:Ow()}m=m.return}if(oi=a,Kr=a=pl(a.current,null),ui=_s=c,ri=0,ap=null,Ew=fg=Sc=0,ss=lp=null,xc!==null){for(c=0;c<xc.length;c++)if(m=xc[c],w=m.interleaved,w!==null){m.interleaved=null;var k=w.next,q=m.pending;if(q!==null){var Z=q.next;q.next=k,w.next=Z}m.pending=w}xc=null}return a}function QI(a,c){do{var m=Kr;try{if(Vx(),tg.current=sg,ng){for(var w=Rr.memoizedState;w!==null;){var k=w.queue;k!==null&&(k.pending=null),w=w.next}ng=!1}if(_c=0,si=ni=Rr=null,tp=!1,np=0,Sw.current=null,m===null||m.return===null){ri=1,ap=c,Kr=null;break}e:{var q=a,Z=m.return,ge=m,Se=c;if(c=ui,ge.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var He=Se,ht=ge,gt=ht.tag;if(!(ht.mode&1)&&(gt===0||gt===11||gt===15)){var ft=ht.alternate;ft?(ht.updateQueue=ft.updateQueue,ht.memoizedState=ft.memoizedState,ht.lanes=ft.lanes):(ht.updateQueue=null,ht.memoizedState=null)}var qt=bI(Z);if(qt!==null){qt.flags&=-257,xI(qt,Z,ge,q,c),qt.mode&1&&vI(q,He,c),c=qt,Se=He;var Bt=c.updateQueue;if(Bt===null){var Ut=new Set;Ut.add(Se),c.updateQueue=Ut}else Bt.add(Se);break e}else{if(!(c&1)){vI(q,He,c),Rw();break e}Se=Error(n(426))}}else if(mr&&ge.mode&1){var $r=bI(Z);if($r!==null){!($r.flags&65536)&&($r.flags|=256),xI($r,Z,ge,q,c),Wx(Bu(Se,ge));break e}}q=Se=Bu(Se,ge),ri!==4&&(ri=2),lp===null?lp=[q]:lp.push(q),q=Z;do{switch(q.tag){case 3:q.flags|=65536,c&=-c,q.lanes|=c;var Fe=gI(q,Se,c);Wk(q,Fe);break e;case 1:ge=Se;var Ce=q.type,$e=q.stateNode;if(!(q.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(cl===null||!cl.has($e)))){q.flags|=65536,c&=-c,q.lanes|=c;var bt=yI(q,ge,c);Wk(q,bt);break e}}q=q.return}while(q!==null)}ZI(m)}catch(Ht){c=Ht,Kr===m&&m!==null&&(Kr=m=m.return);continue}break}while(!0)}function GI(){var a=dg.current;return dg.current=sg,a===null?sg:a}function Rw(){(ri===0||ri===3||ri===2)&&(ri=4),oi===null||!(Sc&0xfffffff)&&!(fg&0xfffffff)||fl(oi,ui)}function vg(a,c){var m=An;An|=2;var w=GI();(oi!==a||ui!==c)&&(Sa=null,Nc(a,c));do try{A$();break}catch(k){QI(a,k)}while(!0);if(Vx(),An=m,dg.current=w,Kr!==null)throw Error(n(261));return oi=null,ui=0,ri}function A$(){for(;Kr!==null;)JI(Kr)}function P$(){for(;Kr!==null&&!Eu();)JI(Kr)}function JI(a){var c=eC(a.alternate,a,_s);a.memoizedProps=a.pendingProps,c===null?ZI(a):Kr=c,Sw.current=null}function ZI(a){var c=a;do{var m=c.alternate;if(a=c.return,c.flags&32768){if(m=C$(m,c),m!==null){m.flags&=32767,Kr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{ri=6,Kr=null;return}}else if(m=I$(m,c,_s),m!==null){Kr=m;return}if(c=c.sibling,c!==null){Kr=c;return}Kr=c=a}while(c!==null);ri===0&&(ri=5)}function kc(a,c,m){var w=Mn,k=Qs.transition;try{Qs.transition=null,Mn=1,F$(a,c,m,w)}finally{Qs.transition=k,Mn=w}return null}function F$(a,c,m,w){do Vu();while(ul!==null);if(An&6)throw Error(n(327));m=a.finishedWork;var k=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var q=m.lanes|m.childLanes;if(gx(a,q),a===oi&&(Kr=oi=null,ui=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||hg||(hg=!0,tC(Za,function(){return Vu(),null})),q=(m.flags&15990)!==0,m.subtreeFlags&15990||q){q=Qs.transition,Qs.transition=null;var Z=Mn;Mn=1;var ge=An;An|=4,Sw.current=null,j$(a,m),BI(m,a),n$(Rx),Ge=!!Ox,Rx=Ox=null,a.current=m,O$(m),If(),An=ge,Mn=Z,Qs.transition=q}else a.current=m;if(hg&&(hg=!1,ul=a,mg=k),q=a.pendingLanes,q===0&&(cl=null),jf(m.stateNode),os(a,dr()),c!==null)for(w=a.onRecoverableError,m=0;m<c.length;m++)k=c[m],w(k.value,{componentStack:k.stack,digest:k.digest});if(pg)throw pg=!1,a=kw,kw=null,a;return mg&1&&a.tag!==0&&Vu(),q=a.pendingLanes,q&1?a===Iw?cp++:(cp=0,Iw=a):cp=0,sl(),null}function Vu(){if(ul!==null){var a=qm(mg),c=Qs.transition,m=Mn;try{if(Qs.transition=null,Mn=16>a?16:a,ul===null)var w=!1;else{if(a=ul,ul=null,mg=0,An&6)throw Error(n(331));var k=An;for(An|=4,Lt=a.current;Lt!==null;){var q=Lt,Z=q.child;if(Lt.flags&16){var ge=q.deletions;if(ge!==null){for(var Se=0;Se<ge.length;Se++){var He=ge[Se];for(Lt=He;Lt!==null;){var ht=Lt;switch(ht.tag){case 0:case 11:case 15:op(8,ht,q)}var gt=ht.child;if(gt!==null)gt.return=ht,Lt=gt;else for(;Lt!==null;){ht=Lt;var ft=ht.sibling,qt=ht.return;if(FI(ht),ht===He){Lt=null;break}if(ft!==null){ft.return=qt,Lt=ft;break}Lt=qt}}}var Bt=q.alternate;if(Bt!==null){var Ut=Bt.child;if(Ut!==null){Bt.child=null;do{var $r=Ut.sibling;Ut.sibling=null,Ut=$r}while(Ut!==null)}}Lt=q}}if(q.subtreeFlags&2064&&Z!==null)Z.return=q,Lt=Z;else e:for(;Lt!==null;){if(q=Lt,q.flags&2048)switch(q.tag){case 0:case 11:case 15:op(9,q,q.return)}var Fe=q.sibling;if(Fe!==null){Fe.return=q.return,Lt=Fe;break e}Lt=q.return}}var Ce=a.current;for(Lt=Ce;Lt!==null;){Z=Lt;var $e=Z.child;if(Z.subtreeFlags&2064&&$e!==null)$e.return=Z,Lt=$e;else e:for(Z=Ce;Lt!==null;){if(ge=Lt,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:ug(9,ge)}}catch(Ht){Dr(ge,ge.return,Ht)}if(ge===Z){Lt=null;break e}var bt=ge.sibling;if(bt!==null){bt.return=ge.return,Lt=bt;break e}Lt=ge.return}}if(An=k,sl(),ts&&typeof ts.onPostCommitFiberRoot=="function")try{ts.onPostCommitFiberRoot(Ya,a)}catch{}w=!0}return w}finally{Mn=m,Qs.transition=c}}return!1}function YI(a,c,m){c=Bu(m,c),c=gI(a,c,1),a=al(a,c,1),c=Ai(),a!==null&&(hc(a,1,c),os(a,c))}function Dr(a,c,m){if(a.tag===3)YI(a,a,m);else for(;c!==null;){if(c.tag===3){YI(c,a,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(cl===null||!cl.has(w))){a=Bu(m,a),a=yI(c,a,1),c=al(c,a,1),a=Ai(),c!==null&&(hc(c,1,a),os(c,a));break}}c=c.return}}function D$(a,c,m){var w=a.pingCache;w!==null&&w.delete(c),c=Ai(),a.pingedLanes|=a.suspendedLanes&m,oi===a&&(ui&m)===m&&(ri===4||ri===3&&(ui&0x7c00000)===ui&&500>dr()-Nw?Nc(a,0):Ew|=m),os(a,c)}function XI(a,c){c===0&&(a.mode&1?(c=Xa,Xa<<=1,!(Xa&0x7c00000)&&(Xa=4194304)):c=1);var m=Ai();a=xa(a,c),a!==null&&(hc(a,c,m),os(a,m))}function L$(a){var c=a.memoizedState,m=0;c!==null&&(m=c.retryLane),XI(a,m)}function M$(a,c){var m=0;switch(a.tag){case 13:var w=a.stateNode,k=a.memoizedState;k!==null&&(m=k.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(c),XI(a,m)}var eC;eC=function(a,c,m){if(a!==null)if(a.memoizedProps!==c.pendingProps||ns.current)is=!0;else{if(!(a.lanes&m)&&!(c.flags&128))return is=!1,k$(a,c,m);is=!!(a.flags&131072)}else is=!1,mr&&c.flags&1048576&&qk(c,Km,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;lg(a,c),a=c.pendingProps;var k=qu(c,yi.current);Mu(c,m),k=nw(null,c,w,a,k,m);var q=rw();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,rs(w)?(q=!0,Um(c)):q=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Gx(c),k.updater=og,c.stateNode=k,k._reactInternals=c,cw(c,w,a,m),c=pw(null,c,w,!0,q,m)):(c.tag=0,mr&&q&&Mx(c),qi(null,c,k,m),c=c.child),c;case 16:w=c.elementType;e:{switch(lg(a,c),a=c.pendingProps,k=w._init,w=k(w._payload),c.type=w,k=c.tag=B$(w),a=yo(w,a),k){case 0:c=fw(null,c,w,a,m);break e;case 1:c=kI(null,c,w,a,m);break e;case 11:c=wI(null,c,w,a,m);break e;case 14:c=_I(null,c,w,yo(w.type,a),m);break e}throw Error(n(306,w,""))}return c;case 0:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:yo(w,k),fw(a,c,w,k,m);case 1:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:yo(w,k),kI(a,c,w,k,m);case 3:e:{if(II(c),a===null)throw Error(n(387));w=c.pendingProps,q=c.memoizedState,k=q.element,zk(a,c),Xm(c,w,null,m);var Z=c.memoizedState;if(w=Z.element,q.isDehydrated)if(q={element:w,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},c.updateQueue.baseState=q,c.memoizedState=q,c.flags&256){k=Bu(Error(n(423)),c),c=CI(a,c,w,m,k);break e}else if(w!==k){k=Bu(Error(n(424)),c),c=CI(a,c,w,m,k);break e}else for(ws=nl(c.stateNode.containerInfo.firstChild),xs=c,mr=!0,go=null,m=$k(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Fu(),w===k){c=_a(a,c,m);break e}qi(a,c,w,m)}c=c.child}return c;case 5:return Vk(c),a===null&&zx(c),w=c.type,k=c.pendingProps,q=a!==null?a.memoizedProps:null,Z=k.children,qx(w,k)?Z=null:q!==null&&qx(w,q)&&(c.flags|=32),NI(a,c),qi(a,c,Z,m),c.child;case 6:return a===null&&zx(c),null;case 13:return TI(a,c,m);case 4:return Jx(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=Du(c,null,w,m):qi(a,c,w,m),c.child;case 11:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:yo(w,k),wI(a,c,w,k,m);case 7:return qi(a,c,c.pendingProps,m),c.child;case 8:return qi(a,c,c.pendingProps.children,m),c.child;case 12:return qi(a,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,k=c.pendingProps,q=c.memoizedProps,Z=k.value,or(Jm,w._currentValue),w._currentValue=Z,q!==null)if(mo(q.value,Z)){if(q.children===k.children&&!ns.current){c=_a(a,c,m);break e}}else for(q=c.child,q!==null&&(q.return=c);q!==null;){var ge=q.dependencies;if(ge!==null){Z=q.child;for(var Se=ge.firstContext;Se!==null;){if(Se.context===w){if(q.tag===1){Se=wa(-1,m&-m),Se.tag=2;var He=q.updateQueue;if(He!==null){He=He.shared;var ht=He.pending;ht===null?Se.next=Se:(Se.next=ht.next,ht.next=Se),He.pending=Se}}q.lanes|=m,Se=q.alternate,Se!==null&&(Se.lanes|=m),Kx(q.return,m,c),ge.lanes|=m;break}Se=Se.next}}else if(q.tag===10)Z=q.type===c.type?null:q.child;else if(q.tag===18){if(Z=q.return,Z===null)throw Error(n(341));Z.lanes|=m,ge=Z.alternate,ge!==null&&(ge.lanes|=m),Kx(Z,m,c),Z=q.sibling}else Z=q.child;if(Z!==null)Z.return=q;else for(Z=q;Z!==null;){if(Z===c){Z=null;break}if(q=Z.sibling,q!==null){q.return=Z.return,Z=q;break}Z=Z.return}q=Z}qi(a,c,k.children,m),c=c.child}return c;case 9:return k=c.type,w=c.pendingProps.children,Mu(c,m),k=Hs(k),w=w(k),c.flags|=1,qi(a,c,w,m),c.child;case 14:return w=c.type,k=yo(w,c.pendingProps),k=yo(w.type,k),_I(a,c,w,k,m);case 15:return SI(a,c,c.type,c.pendingProps,m);case 17:return w=c.type,k=c.pendingProps,k=c.elementType===w?k:yo(w,k),lg(a,c),c.tag=1,rs(w)?(a=!0,Um(c)):a=!1,Mu(c,m),hI(c,w,k),cw(c,w,k,m),pw(null,c,w,!0,a,m);case 19:return OI(a,c,m);case 22:return EI(a,c,m)}throw Error(n(156,c.tag))};function tC(a,c){return Su(a,c)}function $$(a,c,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(a,c,m,w){return new $$(a,c,m,w)}function qw(a){return a=a.prototype,!(!a||!a.isReactComponent)}function B$(a){if(typeof a=="function")return qw(a)?1:0;if(a!=null){if(a=a.$$typeof,a===U)return 11;if(a===te)return 14}return 2}function pl(a,c){var m=a.alternate;return m===null?(m=Gs(a.tag,c,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=c,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&0xe00000,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,c=a.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function bg(a,c,m,w,k,q){var Z=2;if(w=a,typeof a=="function")qw(a)&&(Z=1);else if(typeof a=="string")Z=5;else e:switch(a){case W:return Ic(m.children,k,q,c);case P:Z=8,k|=8;break;case R:return a=Gs(12,m,c,k|2),a.elementType=R,a.lanes=q,a;case V:return a=Gs(13,m,c,k),a.elementType=V,a.lanes=q,a;case z:return a=Gs(19,m,c,k),a.elementType=z,a.lanes=q,a;case le:return xg(m,k,q,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case $:Z=10;break e;case F:Z=9;break e;case U:Z=11;break e;case te:Z=14;break e;case Y:Z=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return c=Gs(Z,m,c,k),c.elementType=a,c.type=w,c.lanes=q,c}function Ic(a,c,m,w){return a=Gs(7,a,w,c),a.lanes=m,a}function xg(a,c,m,w){return a=Gs(22,a,w,c),a.elementType=le,a.lanes=m,a.stateNode={isHidden:!1},a}function Aw(a,c,m){return a=Gs(6,a,null,c),a.lanes=m,a}function Pw(a,c,m){return c=Gs(4,a.children!==null?a.children:[],a.key,c),c.lanes=m,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function z$(a,c,m,w,k){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pf(0),this.expirationTimes=Pf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pf(0),this.identifierPrefix=w,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Fw(a,c,m,w,k,q,Z,ge,Se){return a=new z$(a,c,m,ge,Se),c===1?(c=1,q===!0&&(c|=8)):c=0,q=Gs(3,null,null,c),a.current=q,q.stateNode=a,q.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gx(q),a}function W$(a,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:w==null?null:""+w,children:a,containerInfo:c,implementation:m}}function nC(a){if(!a)return il;a=a._reactInternals;e:{if(zs(a)!==a||a.tag!==1)throw Error(n(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(rs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(rs(m))return jk(a,m,c)}return c}function rC(a,c,m,w,k,q,Z,ge,Se){return a=Fw(m,w,!0,a,k,q,Z,ge,Se),a.context=nC(null),m=a.current,w=Ai(),k=dl(m),q=wa(w,k),q.callback=c??null,al(m,q,k),a.current.lanes=k,hc(a,k,w),os(a,w),a}function wg(a,c,m,w){var k=c.current,q=Ai(),Z=dl(k);return m=nC(m),c.context===null?c.context=m:c.pendingContext=m,c=wa(q,Z),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=al(k,c,Z),a!==null&&(xo(a,k,Z,q),Ym(a,k,Z)),Z}function _g(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function iC(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<c?m:c}}function Dw(a,c){iC(a,c),(a=a.alternate)&&iC(a,c)}var sC=typeof reportError=="function"?reportError:function(a){console.error(a)};function Lw(a){this._internalRoot=a}Sg.prototype.render=Lw.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(n(409));wg(a,c,null,null)},Sg.prototype.unmount=Lw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Ec(function(){wg(null,a,null,null)}),c[ga]=null}};function Sg(a){this._internalRoot=a}Sg.prototype.unstable_scheduleHydration=function(a){if(a){var c=mc();a={blockedOn:null,target:a,priority:c};for(var m=0;m<me.length&&c!==0&&c<me[m].priority;m++);me.splice(m,0,a),m===0&&Be(a)}};function Mw(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Eg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function oC(){}function U$(a,c,m,w,k){if(k){if(typeof w=="function"){var q=w;w=function(){var He=_g(Z);q.call(He)}}var Z=rC(c,w,a,0,null,!1,!1,"",oC);return a._reactRootContainer=Z,a[ga]=Z.current,Kf(a.nodeType===8?a.parentNode:a),Ec(),Z}for(;k=a.lastChild;)a.removeChild(k);if(typeof w=="function"){var ge=w;w=function(){var He=_g(Se);ge.call(He)}}var Se=Fw(a,0,!1,null,null,!1,!1,"",oC);return a._reactRootContainer=Se,a[ga]=Se.current,Kf(a.nodeType===8?a.parentNode:a),Ec(function(){wg(c,Se,m,w)}),Se}function Ng(a,c,m,w,k){var q=m._reactRootContainer;if(q){var Z=q;if(typeof k=="function"){var ge=k;k=function(){var Se=_g(Z);ge.call(Se)}}wg(c,Z,a,k)}else Z=U$(m,c,a,k,w);return _g(Z)}Df=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ri(c.pendingLanes);m!==0&&(Ff(c,m|1),os(c,dr()),!(An&6)&&(Uu=dr()+500,sl()))}break;case 13:Ec(function(){var w=xa(a,1);if(w!==null){var k=Ai();xo(w,a,1,k)}}),Dw(a,1)}},he=function(a){if(a.tag===13){var c=xa(a,0x8000000);if(c!==null){var m=Ai();xo(c,a,0x8000000,m)}Dw(a,0x8000000)}},Lf=function(a){if(a.tag===13){var c=dl(a),m=xa(a,c);if(m!==null){var w=Ai();xo(m,a,c,w)}Dw(a,c)}},mc=function(){return Mn},Mf=function(a,c){var m=Mn;try{return Mn=a,c()}finally{Mn=m}},lc=function(a,c,m){switch(c){case"input":if(nn(a,m),c=m.name,m.type==="radio"&&c!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==a&&w.form===a.form){var k=zm(w);if(!k)throw Error(n(90));Ue(w),nn(w,k)}}}break;case"textarea":Me(a,m);break;case"select":c=m.value,c!=null&&Ae(a,!!m.multiple,c,!1)}},gu=jw,yu=Ec;var V$={usingClientEntryPoint:!1,Events:[Jf,Ou,zm,un,mu,jw]},up={findFiberByHostInstance:gc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},H$={bundleType:up.bundleType,version:up.version,rendererPackageName:up.rendererPackageName,rendererConfig:up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=wu(a),a===null?null:a.stateNode},findFiberByHostInstance:up.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{Ya=kg.inject(H$),ts=kg}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V$,as.createPortal=function(a,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mw(c))throw Error(n(200));return W$(a,c,null,m)},as.createRoot=function(a,c){if(!Mw(a))throw Error(n(299));var m=!1,w="",k=sC;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Fw(a,1,!1,null,null,m,!1,w,k),a[ga]=c.current,Kf(a.nodeType===8?a.parentNode:a),new Lw(c)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=wu(c),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return Ec(a)},as.hydrate=function(a,c,m){if(!Eg(c))throw Error(n(200));return Ng(null,a,c,!0,m)},as.hydrateRoot=function(a,c,m){if(!Mw(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,k=!1,q="",Z=sC;if(m!=null&&(m.unstable_strictMode===!0&&(k=!0),m.identifierPrefix!==void 0&&(q=m.identifierPrefix),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError)),c=rC(c,null,a,1,m??null,k,!1,q,Z),a[ga]=c.current,Kf(a),w)for(a=0;a<w.length;a++)m=w[a],k=m._getVersion,k=k(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,k]:c.mutableSourceEagerHydrationData.push(m,k);return new Sg(c)},as.render=function(a,c,m){if(!Eg(c))throw Error(n(200));return Ng(null,a,c,!1,m)},as.unmountComponentAtNode=function(a){if(!Eg(a))throw Error(n(40));return a._reactRootContainer?(Ec(function(){Ng(null,null,a,!1,function(){a._reactRootContainer=null,a[ga]=null})}),!0):!1},as.unstable_batchedUpdates=jw,as.unstable_renderSubtreeIntoContainer=function(a,c,m,w){if(!Eg(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Ng(a,c,m,!1,w)},as.version="18.3.1-next-f1338f8080-20240426",as}var DC;function G3(){if(DC)return e_.exports;DC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),e_.exports=I4(),e_.exports}var hb=G3();const C4="Error preloading route! ☝️";function T4(t,e){const n=Lo(),[r,i]=Q.useState(!1),s=Q.useRef(!1),o=t4(e),{activeProps:l=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:f,to:p,preload:h,preloadDelay:b,hashScrollIntoView:x,replace:_,startTransition:E,resetScroll:I,viewTransition:T,children:j,target:O,disabled:A,style:D,className:M,onClick:W,onFocus:P,onMouseEnter:R,onMouseLeave:$,onTouchStart:F,ignoreBlocker:U,...V}=t,{params:z,search:te,hash:Y,state:le,mask:se,reloadDocument:ne,...oe}=V,ee=Q.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ue=Bi({select:ke=>ke.location.search,structuralSharing:!0});t={from:Wl({strict:!1,select:ke=>ke.pathname}),...t};const ye=Q.useMemo(()=>n.buildLocation(t),[n,t,ue]),we=Q.useMemo(()=>t.reloadDocument?!1:h??n.options.defaultPreload,[n.options.defaultPreload,h,t.reloadDocument]),Ne=b??n.options.defaultPreloadDelay??0,ze=Bi({select:ke=>{if(f?.exact){if(!r4(ke.location.pathname,ye.pathname,n.basepath))return!1}else{const Ae=av(ke.location.pathname,n.basepath).split("/");if(!av(ye.pathname,n.basepath).split("/").every((Me,ut)=>Me===Ae[ut]))return!1}return(f?.includeSearch??!0)&&!bd(ke.location.search,ye.search,{partial:!f?.exact,ignoreUndefined:!f?.explicitUndefined})?!1:f?.includeHash?ke.location.hash===ye.hash:!0}}),Oe=Q.useCallback(()=>{n.preloadRoute(t).catch(ke=>{console.warn(ke),console.warn(C4)})},[t,n]),De=Q.useCallback(ke=>{ke?.isIntersecting&&Oe()},[Oe]);if(e4(o,De,{rootMargin:"100px"},{disabled:!!A||we!=="viewport"}),Ep(()=>{s.current||!A&&we==="render"&&(Oe(),s.current=!0)},[A,Oe,we]),ee==="external")return{...oe,ref:o,type:ee,href:p,...j&&{children:j},...O&&{target:O},...A&&{disabled:A},...D&&{style:D},...M&&{className:M},...W&&{onClick:W},...P&&{onFocus:P},...R&&{onMouseEnter:R},...$&&{onMouseLeave:$},...F&&{onTouchStart:F}};const Je=ke=>{if(!A&&!O4(ke)&&!ke.defaultPrevented&&(!O||O==="_self")&&ke.button===0){ke.preventDefault(),hb.flushSync(()=>{i(!0)});const Ae=n.subscribe("onResolved",()=>{Ae(),i(!1)});return n.navigate({...t,replace:_,resetScroll:I,hashScrollIntoView:x,startTransition:E,viewTransition:T,ignoreBlocker:U})}},Xe=ke=>{A||we&&Oe()},Ue=Xe,ct=ke=>{if(A)return;const Ae=ke.target||{};if(we){if(Ae.preloadTimeout)return;Ae.preloadTimeout=setTimeout(()=>{Ae.preloadTimeout=null,Oe()},Ne)}},_t=ke=>{if(A)return;const Ae=ke.target||{};Ae.preloadTimeout&&(clearTimeout(Ae.preloadTimeout),Ae.preloadTimeout=null)},jt=ke=>Ae=>{var Ve;(Ve=Ae.persist)==null||Ve.call(Ae),ke.filter(Boolean).forEach(rt=>{Ae.defaultPrevented||rt(Ae)})},Vt=ze?Mc(l,{})??{}:{},nn=ze?{}:Mc(u,{}),xe=[M,Vt.className,nn.className].filter(Boolean).join(" "),ve={...D,...Vt.style,...nn.style};return{...oe,...Vt,...nn,href:A?void 0:ye.maskedLocation?n.history.createHref(ye.maskedLocation.href):n.history.createHref(ye.href),ref:o,onClick:jt([W,Je]),onFocus:jt([P,Xe]),onMouseEnter:jt([R,ct]),onMouseLeave:jt([$,_t]),onTouchStart:jt([F,Ue]),disabled:!!A,target:O,...Object.keys(ve).length&&{style:ve},...xe&&{className:xe},...A&&{role:"link","aria-disabled":!0},...ze&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function J3(t){return Q.forwardRef(function(n,r){return d.jsx(j4,{...n,_asChild:t,ref:r})})}const j4=Q.forwardRef((t,e)=>{const{_asChild:n,...r}=t,{type:i,ref:s,...o}=T4(r,e),l=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof n>"u"&&delete o.disabled,Q.createElement(n||"a",{...o,ref:s},l)});function O4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function R4(){const t=Lo(),e=Q.useRef({router:t,mounted:!1}),n=Bi({select:({isLoading:h})=>h}),[r,i]=Q.useState(!1),s=Bi({select:h=>h.matches.some(b=>b.status==="pending"),structuralSharing:!0}),o=Zw(n),l=n||r||s,u=Zw(l),f=n||s,p=Zw(f);return t.isServer||(t.startReactTransition=h=>{i(!0),Q.startTransition(()=>{h(),i(!1)})}),Q.useEffect(()=>{const h=t.history.subscribe(t.load),b=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return $c(t.latestLocation.href)!==$c(b.href)&&t.commitLocation({...b,replace:!0}),()=>{h()}},[t,t.history]),Ep(()=>{var h;if(typeof window<"u"&&((h=window.__TSR__)!=null&&h.dehydrated)||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Ep(()=>{if(o&&!n){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onLoad",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[o,t,n]),Ep(()=>{if(p&&!f){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;t.emit({type:"onBeforeRouteMount",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_})}},[f,p,t]),Ep(()=>{if(u&&!l){const h=t.state.location,b=t.state.resolvedLocation,x=b.pathname!==h.pathname,_=b.href!==h.href;if(t.emit({type:"onResolved",fromLocation:b,toLocation:h,pathChanged:x,hrefChanged:_}),t.__store.setState(E=>({...E,status:"idle",resolvedLocation:E.location})),typeof document<"u"&&document.querySelector){const E=t.state.location.state.__hashScrollIntoViewOptions??!0;if(E&&t.state.location.hash!==""){const I=document.getElementById(t.state.location.hash);I&&I.scrollIntoView(E)}}}},[l,u,t]),null}function q4(){const t=Lo(),e=t.options.defaultPendingComponent?d.jsx(t.options.defaultPendingComponent,{}):null,n=t.isServer||typeof document<"u"&&window.__TSR__?hy:Q.Suspense,r=d.jsxs(n,{fallback:e,children:[d.jsx(R4,{}),d.jsx(A4,{})]});return t.options.InnerWrap?d.jsx(t.options.InnerWrap,{children:r}):r}function A4(){const t=Bi({select:n=>{var r;return(r=n.matches[0])==null?void 0:r.id}}),e=Bi({select:n=>n.loadedAt});return d.jsx(pb.Provider,{value:t,children:d.jsx(v1,{getResetKey:()=>e,errorComponent:fb,onCatch:n=>{n.message||n.toString()},children:t?d.jsx(Q3,{matchId:t}):null})})}function P4(){const t=Lo();return Bi({select:e=>[e.location.href,e.resolvedLocation.href,e.status],structuralSharing:!0}),Q.useCallback(e=>{const{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s,...o}=e;return t.matchRoute(o,{pending:n,caseSensitive:r,fuzzy:i,includeSearch:s})},[t])}function F4({router:t,children:e,...n}){t.update({...t.options,...n,context:{...t.options.context,...n.context}});const r=B3(),i=d.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?d.jsx(t.options.Wrap,{children:i}):i}function D4({router:t,...e}){return d.jsx(F4,{router:t,...e,children:d.jsx(q4,{})})}const L4=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,r_="window",LC="___";let i_=new WeakSet;const M4=typeof window<"u"&&window.sessionStorage,So=M4?(()=>{const t="tsr-scroll-restoration-v2";return{state:JSON.parse(window.sessionStorage.getItem(t)||"null")||{cached:{},next:{}},set:n=>{So.state=Mc(n,So.state),window.sessionStorage.setItem(t,JSON.stringify(So.state))}}})():void 0,$4=t=>t.state.key||t.href;function B4(t){const e=Lo();L4(()=>{const n=t?.getKey||$4,{history:r}=window;r.scrollRestoration="manual";const i=l=>{if(i_.has(l.target))return;i_.add(l.target);let u="";if(l.target===document||l.target===window)u=r_;else{const f=l.target.getAttribute("data-scroll-restoration-id");f?u=`[data-scroll-restoration-id="${f}"]`:u=W4(l.target)}So.state.next[u]||So.set(f=>({...f,next:{...f.next,[u]:{scrollX:NaN,scrollY:NaN}}}))};typeof document<"u"&&document.addEventListener("scroll",i,!0);const s=e.subscribe("onBeforeLoad",l=>{if(l.hrefChanged){const u=n(l.fromLocation);for(const f in So.state.next){const p=So.state.next[f];if(f===r_)p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(f){const h=document.querySelector(f);p.scrollX=h?.scrollLeft||0,p.scrollY=h?.scrollTop||0}So.set(h=>{const b={...h.next};return delete b[f],{...h,next:b,cached:{...h.cached,[[u,f].join(LC)]:p}}})}}}),o=e.subscribe("onBeforeRouteMount",l=>{if(l.hrefChanged){if(!e.resetNextScroll)return;e.resetNextScroll=!0;const u=n(l.toLocation);let f=!1;for(const p in So.state.cached){const h=So.state.cached[p],[b,x]=p.split(LC);if(b===u){if(x===r_)f=!0,window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:t?.scrollBehavior});else if(x){const _=document.querySelector(x);_&&(_.scrollLeft=h.scrollX,_.scrollTop=h.scrollY)}}}f||window.scrollTo(0,0),So.set(p=>({...p,next:{}})),i_=new WeakSet}});return()=>{document.removeEventListener("scroll",i),s(),o()}},[t?.getKey,e])}function z4(t){return B4(t),null}function W4(t){const e=[];let n;for(;n=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(n.children,t)+1})`),t=n;return`${e.join(" > ")}`.toLowerCase()}function ir(t){return Wl({...t,select:e=>t.select?t.select(e.context):e.context})}let U4={data:""},V4=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||U4,H4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,K4=/\/\*[^]*?\*\/|  +/g,MC=/\n+/g,Il=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Il(o,s):s+"{"+Il(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Il(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Il.p?Il.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ea={},Z3=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Z3(t[n]);return e}return t},Q4=(t,e,n,r,i)=>{let s=Z3(t),o=Ea[s]||(Ea[s]=(u=>{let f=0,p=11;for(;f<u.length;)p=101*p+u.charCodeAt(f++)>>>0;return"go"+p})(s));if(!Ea[o]){let u=s!==t?t:(f=>{let p,h,b=[{}];for(;p=H4.exec(f.replace(K4,""));)p[4]?b.shift():p[3]?(h=p[3].replace(MC," ").trim(),b.unshift(b[0][h]=b[0][h]||{})):b[0][p[1]]=p[2].replace(MC," ").trim();return b[0]})(t);Ea[o]=Il(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&Ea.g?Ea.g:null;return n&&(Ea.g=Ea[o]),((u,f,p,h)=>{h?f.data=f.data.replace(h,u):f.data.indexOf(u)===-1&&(f.data=p?u+f.data:f.data+u)})(Ea[o],e,r,l),o},G4=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Il(l,""):l===!1?"":l}return r+i+(o??"")},"");function mb(t){let e=this||{},n=t.call?t(e.p):t;return Q4(n.unshift?n.raw?G4(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,V4(e.target),e.g,e.o,e.k)}let Y3,ZS,YS;mb.bind({g:1});let Ma=mb.bind({k:1});function J4(t,e,n,r){Il.p=e,Y3=t,ZS=n,YS=r}function Xl(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),u=l.className||i.className;n.p=Object.assign({theme:ZS&&ZS()},l),n.o=/ *go\d+/.test(u),l.className=mb.apply(n,r)+(u?" "+u:"");let f=t;return t[0]&&(f=l.as||t,delete l.as),YS&&f[0]&&YS(l),Y3(f,l)}return i}}var Z4=t=>typeof t=="function",cv=(t,e)=>Z4(t)?t(e):t,Y4=(()=>{let t=0;return()=>(++t).toString()})(),X3=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),X4=20,eA=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,X4)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return eA(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},my=[],gy={toasts:[],pausedAt:void 0},cu=t=>{gy=eA(gy,t),my.forEach(e=>{e(gy)})},ez={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},tz=(t={})=>{let[e,n]=Q.useState(gy);Q.useEffect(()=>(my.push(n),()=>{let i=my.indexOf(n);i>-1&&my.splice(i,1)}),[e]);let r=e.toasts.map(i=>{var s,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((s=t[i.type])==null?void 0:s.removeDelay)||t?.removeDelay,duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||t?.duration||ez[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:r}},nz=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||Y4()}),Zh=t=>(e,n)=>{let r=nz(e,t,n);return cu({type:2,toast:r}),r.id},In=(t,e)=>Zh("blank")(t,e);In.error=Zh("error");In.success=Zh("success");In.loading=Zh("loading");In.custom=Zh("custom");In.dismiss=t=>{cu({type:3,toastId:t})};In.remove=t=>cu({type:4,toastId:t});In.promise=(t,e,n)=>{let r=In.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?cv(e.success,i):void 0;return s?In.success(s,{id:r,...n,...n?.success}):In.dismiss(r),i}).catch(i=>{let s=e.error?cv(e.error,i):void 0;s?In.error(s,{id:r,...n,...n?.error}):In.dismiss(r)}),t};var rz=(t,e)=>{cu({type:1,toast:{id:t,height:e}})},iz=()=>{cu({type:5,time:Date.now()})},Hp=new Map,sz=1e3,oz=(t,e=sz)=>{if(Hp.has(t))return;let n=setTimeout(()=>{Hp.delete(t),cu({type:4,toastId:t})},e);Hp.set(t,n)},az=t=>{let{toasts:e,pausedAt:n}=tz(t);Q.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(u<0){l.visible&&In.dismiss(l.id);return}return setTimeout(()=>In.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=Q.useCallback(()=>{n&&cu({type:6,time:Date.now()})},[n]),i=Q.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:f}=o||{},p=e.filter(x=>(x.position||f)===(s.position||f)&&x.height),h=p.findIndex(x=>x.id===s.id),b=p.filter((x,_)=>_<h&&x.visible).length;return p.filter(x=>x.visible).slice(...l?[b+1]:[0,b]).reduce((x,_)=>x+(_.height||0)+u,0)},[e]);return Q.useEffect(()=>{e.forEach(s=>{if(s.dismissed)oz(s.id,s.removeDelay);else{let o=Hp.get(s.id);o&&(clearTimeout(o),Hp.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:rz,startPause:iz,endPause:r,calculateOffset:i}}},lz=Ma`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,cz=Ma`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,uz=Ma`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,dz=Xl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${cz} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${uz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fz=Ma`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pz=Xl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${fz} 1s linear infinite;
`,hz=Ma`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,mz=Ma`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,gz=Xl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${hz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${mz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yz=Xl("div")`
  position: absolute;
`,vz=Xl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bz=Ma`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xz=Xl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,wz=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?Q.createElement(xz,null,e):e:n==="blank"?null:Q.createElement(vz,null,Q.createElement(pz,{...r}),n!=="loading"&&Q.createElement(yz,null,n==="error"?Q.createElement(dz,{...r}):Q.createElement(gz,{...r})))},_z=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Sz=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ez="0%{opacity:0;} 100%{opacity:1;}",Nz="0%{opacity:1;} 100%{opacity:0;}",kz=Xl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Iz=Xl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Cz=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=X3()?[Ez,Nz]:[_z(n),Sz(n)];return{animation:e?`${Ma(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ma(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Tz=Q.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?Cz(t.position||e||"top-center",t.visible):{opacity:0},s=Q.createElement(wz,{toast:t}),o=Q.createElement(Iz,{...t.ariaProps},cv(t.message,t));return Q.createElement(kz,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):Q.createElement(Q.Fragment,null,s,o))});J4(Q.createElement);var jz=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=Q.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return Q.createElement("div",{ref:s,className:e,style:n},i)},Oz=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:X3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},Rz=mb`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qg=16,qz=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=az(n);return Q.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:qg,left:qg,right:qg,bottom:qg,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(f=>{let p=f.position||e,h=u.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),b=Oz(p,h);return Q.createElement(jz,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?Rz:"",style:b},f.type==="custom"?cv(f.message,f):i?i(f):Q.createElement(Tz,{toast:f,position:p}))}))},Az=In;class uu extends Error{}class Pz extends uu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Fz extends uu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Dz extends uu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class ld extends uu{}class tA extends uu{constructor(e){super(`Invalid unit ${e}`)}}class _i extends uu{}class ml extends uu{constructor(){super("Zone is an abstract class")}}const Tt="numeric",Ao="short",Rs="long",uv={year:Tt,month:Tt,day:Tt},nA={year:Tt,month:Ao,day:Tt},Lz={year:Tt,month:Ao,day:Tt,weekday:Ao},rA={year:Tt,month:Rs,day:Tt},iA={year:Tt,month:Rs,day:Tt,weekday:Rs},sA={hour:Tt,minute:Tt},oA={hour:Tt,minute:Tt,second:Tt},aA={hour:Tt,minute:Tt,second:Tt,timeZoneName:Ao},lA={hour:Tt,minute:Tt,second:Tt,timeZoneName:Rs},cA={hour:Tt,minute:Tt,hourCycle:"h23"},uA={hour:Tt,minute:Tt,second:Tt,hourCycle:"h23"},dA={hour:Tt,minute:Tt,second:Tt,hourCycle:"h23",timeZoneName:Ao},fA={hour:Tt,minute:Tt,second:Tt,hourCycle:"h23",timeZoneName:Rs},pA={year:Tt,month:Tt,day:Tt,hour:Tt,minute:Tt},hA={year:Tt,month:Tt,day:Tt,hour:Tt,minute:Tt,second:Tt},mA={year:Tt,month:Ao,day:Tt,hour:Tt,minute:Tt},gA={year:Tt,month:Ao,day:Tt,hour:Tt,minute:Tt,second:Tt},Mz={year:Tt,month:Ao,day:Tt,weekday:Ao,hour:Tt,minute:Tt},yA={year:Tt,month:Rs,day:Tt,hour:Tt,minute:Tt,timeZoneName:Ao},vA={year:Tt,month:Rs,day:Tt,hour:Tt,minute:Tt,second:Tt,timeZoneName:Ao},bA={year:Tt,month:Rs,day:Tt,weekday:Rs,hour:Tt,minute:Tt,timeZoneName:Rs},xA={year:Tt,month:Rs,day:Tt,weekday:Rs,hour:Tt,minute:Tt,second:Tt,timeZoneName:Rs};class Yh{get type(){throw new ml}get name(){throw new ml}get ianaName(){return this.name}get isUniversal(){throw new ml}offsetName(e,n){throw new ml}formatOffset(e,n){throw new ml}offset(e){throw new ml}equals(e){throw new ml}get isValid(){throw new ml}}let s_=null;class gb extends Yh{static get instance(){return s_===null&&(s_=new gb),s_}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return TA(e,n,r)}formatOffset(e,n){return Kp(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let yy={};function $z(t){return yy[t]||(yy[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),yy[t]}const Bz={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function zz(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,l,u,f,p]=r;return[o,i,s,l,u,f,p]}function Wz(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],l=Bz[s];s==="era"?r[l]=o:fn(l)||(r[l]=parseInt(o,10))}return r}let Ag={};class $a extends Yh{static create(e){return Ag[e]||(Ag[e]=new $a(e)),Ag[e]}static resetCache(){Ag={},yy={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=$a.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return TA(e,n,r,this.name)}formatOffset(e,n){return Kp(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const r=$z(this.name);let[i,s,o,l,u,f,p]=r.formatToParts?Wz(r,n):zz(r,n);l==="BC"&&(i=-Math.abs(i)+1);const b=vb({year:i,month:s,day:o,hour:u===24?0:u,minute:f,second:p,millisecond:0});let x=+n;const _=x%1e3;return x-=_>=0?_:1e3+_,(b-x)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let $C={};function Uz(t,e={}){const n=JSON.stringify([t,e]);let r=$C[n];return r||(r=new Intl.ListFormat(t,e),$C[n]=r),r}let XS={};function eE(t,e={}){const n=JSON.stringify([t,e]);let r=XS[n];return r||(r=new Intl.DateTimeFormat(t,e),XS[n]=r),r}let tE={};function Vz(t,e={}){const n=JSON.stringify([t,e]);let r=tE[n];return r||(r=new Intl.NumberFormat(t,e),tE[n]=r),r}let nE={};function Hz(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=nE[i];return s||(s=new Intl.RelativeTimeFormat(t,e),nE[i]=s),s}let kp=null;function Kz(){return kp||(kp=new Intl.DateTimeFormat().resolvedOptions().locale,kp)}let BC={};function Qz(t){let e=BC[t];if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,BC[t]=e}return e}function Gz(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=eE(t).resolvedOptions(),i=t}catch{const u=t.substring(0,n);r=eE(u).resolvedOptions(),i=u}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function Jz(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function Zz(t){const e=[];for(let n=1;n<=12;n++){const r=dn.utc(2009,n,1);e.push(t(r))}return e}function Yz(t){const e=[];for(let n=1;n<=7;n++){const r=dn.utc(2016,11,13+n);e.push(t(r))}return e}function Pg(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function Xz(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class eW{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=Vz(e,l)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):S1(e,3);return Qr(n,this.padTo)}}}class tW{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&$a.create(l).valid?(i=l,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=eE(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class nW{constructor(e,n,r){this.opts={style:"long",...r},!n&&IA()&&(this.rtf=Hz(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):NW(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const rW={firstDay:1,minimalDays:4,weekend:[6,7]};class Vn{static fromOpts(e){return Vn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Mr.defaultLocale,l=o||(s?"en-US":Kz()),u=n||Mr.defaultNumberingSystem,f=r||Mr.defaultOutputCalendar,p=rE(i)||Mr.defaultWeekSettings;return new Vn(l,u,f,p,o)}static resetCache(){kp=null,XS={},tE={},nE={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Vn.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,l,u]=Gz(e);this.locale=o,this.numberingSystem=n||l||null,this.outputCalendar=r||u||null,this.weekSettings=i,this.intl=Jz(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Xz(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Vn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,rE(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Pg(this,e,RA,()=>{const r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=Zz(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Pg(this,e,PA,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Yz(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Pg(this,void 0,()=>FA,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dn.utc(2016,11,13,9),dn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Pg(this,e,DA,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[dn.utc(-40,1,1),dn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new eW(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new tW(e,this.intl,n)}relFormatter(e={}){return new nW(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Uz(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:CA()?Qz(this.locale):rW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let o_=null;class $i extends Yh{static get utcInstance(){return o_===null&&(o_=new $i(0)),o_}static instance(e){return e===0?$i.utcInstance:new $i(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new $i(bb(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Kp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Kp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return Kp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class iW extends Yh{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Cl(t,e){if(fn(t)||t===null)return e;if(t instanceof Yh)return t;if(uW(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?gb.instance:n==="utc"||n==="gmt"?$i.utcInstance:$i.parseSpecifier(n)||$a.create(t)}else return Fl(t)?$i.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new iW(t)}const b1={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},zC={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},sW=b1.hanidec.replace(/[\[|\]]/g,"").split("");function oW(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(b1.hanidec)!==-1)e+=sW.indexOf(t[n]);else for(const i in zC){const[s,o]=zC[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}let id={};function aW(){id={}}function wo({numberingSystem:t},e=""){const n=t||"latn";return id[n]||(id[n]={}),id[n][e]||(id[n][e]=new RegExp(`${b1[n]}${e}`)),id[n][e]}let WC=()=>Date.now(),UC="system",VC=null,HC=null,KC=null,QC=60,GC,JC=null;class Mr{static get now(){return WC}static set now(e){WC=e}static set defaultZone(e){UC=e}static get defaultZone(){return Cl(UC,gb.instance)}static get defaultLocale(){return VC}static set defaultLocale(e){VC=e}static get defaultNumberingSystem(){return HC}static set defaultNumberingSystem(e){HC=e}static get defaultOutputCalendar(){return KC}static set defaultOutputCalendar(e){KC=e}static get defaultWeekSettings(){return JC}static set defaultWeekSettings(e){JC=rE(e)}static get twoDigitCutoffYear(){return QC}static set twoDigitCutoffYear(e){QC=e%100}static get throwOnInvalid(){return GC}static set throwOnInvalid(e){GC=e}static resetCaches(){Vn.resetCache(),$a.resetCache(),dn.resetCache(),aW()}}class jo{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const wA=[0,31,59,90,120,151,181,212,243,273,304,334],_A=[0,31,60,91,121,152,182,213,244,274,305,335];function ro(t,e){return new jo("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function x1(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function SA(t,e,n){return n+(Xh(t)?_A:wA)[e-1]}function EA(t,e){const n=Xh(t)?_A:wA,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function w1(t,e){return(t-e+7)%7+1}function dv(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=SA(r,i,s),l=w1(x1(r,i,s),n);let u=Math.floor((o-l+14-e)/7),f;return u<1?(f=r-1,u=ch(f,e,n)):u>ch(r,e,n)?(f=r+1,u=1):f=r,{weekYear:f,weekNumber:u,weekday:l,...xb(t)}}function ZC(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=w1(x1(r,1,e),n),l=xd(r);let u=i*7+s-o-7+e,f;u<1?(f=r-1,u+=xd(f)):u>l?(f=r+1,u-=xd(r)):f=r;const{month:p,day:h}=EA(f,u);return{year:f,month:p,day:h,...xb(t)}}function a_(t){const{year:e,month:n,day:r}=t,i=SA(e,n,r);return{year:e,ordinal:i,...xb(t)}}function YC(t){const{year:e,ordinal:n}=t,{month:r,day:i}=EA(e,n);return{year:e,month:r,day:i,...xb(t)}}function XC(t,e){if(!fn(t.localWeekday)||!fn(t.localWeekNumber)||!fn(t.localWeekYear)){if(!fn(t.weekday)||!fn(t.weekNumber)||!fn(t.weekYear))throw new ld("Cannot mix locale-based week fields with ISO-based week fields");return fn(t.localWeekday)||(t.weekday=t.localWeekday),fn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),fn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function lW(t,e=4,n=1){const r=yb(t.weekYear),i=io(t.weekNumber,1,ch(t.weekYear,e,n)),s=io(t.weekday,1,7);return r?i?s?!1:ro("weekday",t.weekday):ro("week",t.weekNumber):ro("weekYear",t.weekYear)}function cW(t){const e=yb(t.year),n=io(t.ordinal,1,xd(t.year));return e?n?!1:ro("ordinal",t.ordinal):ro("year",t.year)}function NA(t){const e=yb(t.year),n=io(t.month,1,12),r=io(t.day,1,fv(t.year,t.month));return e?n?r?!1:ro("day",t.day):ro("month",t.month):ro("year",t.year)}function kA(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=io(e,0,23)||e===24&&n===0&&r===0&&i===0,o=io(n,0,59),l=io(r,0,59),u=io(i,0,999);return s?o?l?u?!1:ro("millisecond",i):ro("second",r):ro("minute",n):ro("hour",e)}function fn(t){return typeof t>"u"}function Fl(t){return typeof t=="number"}function yb(t){return typeof t=="number"&&t%1===0}function uW(t){return typeof t=="string"}function dW(t){return Object.prototype.toString.call(t)==="[object Date]"}function IA(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function CA(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function fW(t){return Array.isArray(t)?t:[t]}function eT(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function pW(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Fd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rE(t){if(t==null)return null;if(typeof t!="object")throw new _i("Week settings must be an object");if(!io(t.firstDay,1,7)||!io(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!io(e,1,7)))throw new _i("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function io(t,e,n){return yb(t)&&t>=e&&t<=n}function hW(t,e){return t-e*Math.floor(t/e)}function Qr(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function El(t){if(!(fn(t)||t===null||t===""))return parseInt(t,10)}function Cc(t){if(!(fn(t)||t===null||t===""))return parseFloat(t)}function _1(t){if(!(fn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function S1(t,e,n=!1){const r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Xh(t){return t%4===0&&(t%100!==0||t%400===0)}function xd(t){return Xh(t)?366:365}function fv(t,e){const n=hW(e-1,12)+1,r=t+(e-n)/12;return n===2?Xh(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function vb(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function tT(t,e,n){return-w1(x1(t,1,e),n)+e-1}function ch(t,e=4,n=1){const r=tT(t,e,n),i=tT(t+1,e,n);return(xd(t)-r+i)/7}function iE(t){return t>99?t:t>Mr.twoDigitCutoffYear?1900+t:2e3+t}function TA(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},l=new Intl.DateTimeFormat(n,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function bb(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function jA(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new _i(`Invalid unit value ${t}`);return e}function pv(t,e){const n={};for(const r in t)if(Fd(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=jA(i)}return n}function Kp(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Qr(n,2)}:${Qr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Qr(n,2)}${Qr(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function xb(t){return pW(t,["hour","minute","second","millisecond"])}const mW=["January","February","March","April","May","June","July","August","September","October","November","December"],OA=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gW=["J","F","M","A","M","J","J","A","S","O","N","D"];function RA(t){switch(t){case"narrow":return[...gW];case"short":return[...OA];case"long":return[...mW];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const qA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],AA=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yW=["M","T","W","T","F","S","S"];function PA(t){switch(t){case"narrow":return[...yW];case"short":return[...AA];case"long":return[...qA];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const FA=["AM","PM"],vW=["Before Christ","Anno Domini"],bW=["BC","AD"],xW=["B","A"];function DA(t){switch(t){case"narrow":return[...xW];case"short":return[...bW];case"long":return[...vW];default:return null}}function wW(t){return FA[t.hour<12?0:1]}function _W(t,e){return PA(e)[t.weekday-1]}function SW(t,e){return RA(e)[t.month-1]}function EW(t,e){return DA(e)[t.year<0?0:1]}function NW(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,l=Math.abs(e),u=l===1,f=i[t],p=r?u?f[1]:f[2]||f[1]:u?i[t][0]:t;return o?`${l} ${p} ago`:`in ${l} ${p}`}function nT(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const kW={D:uv,DD:nA,DDD:rA,DDDD:iA,t:sA,tt:oA,ttt:aA,tttt:lA,T:cA,TT:uA,TTT:dA,TTTT:fA,f:pA,ff:mA,fff:yA,ffff:bA,F:hA,FF:gA,FFF:vA,FFFF:xA};class Ei{static create(e,n={}){return new Ei(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const l=e.charAt(o);l==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||l===n?r+=l:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=l,n=l)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return kW[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Qr(e,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(x,_)=>this.loc.extract(e,x,_),o=x=>e.isOffsetFixed&&e.offset===0&&x.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,x.format):"",l=()=>r?wW(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(x,_)=>r?SW(e,x):s(_?{month:x}:{month:x,day:"numeric"},"month"),f=(x,_)=>r?_W(e,x):s(_?{weekday:x}:{weekday:x,month:"long",day:"numeric"},"weekday"),p=x=>{const _=Ei.macroTokenToFormatOpts(x);return _?this.formatWithSystemDefault(e,_):x},h=x=>r?EW(e,x):s({era:x},"era"),b=x=>{switch(x){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return p(x)}};return nT(Ei.parseFormat(n),b)}formatDurationFromString(e,n){const r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>f=>{const p=r(f);return p?this.num(u.get(p),f.length):f},s=Ei.parseFormat(n),o=s.reduce((u,{literal:f,val:p})=>f?u:u.concat(p),[]),l=e.shiftTo(...o.map(r).filter(u=>u));return nT(s,i(l))}}const LA=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function nf(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function rf(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,l,u]=s(e,i);return[{...n,...o},l||r,u]},[{},null,1]).slice(0,2)}function sf(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function MA(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=El(e[n+i]);return[r,null,n+i]}}const $A=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,IW=`(?:${$A.source}?(?:\\[(${LA.source})\\])?)?`,E1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,BA=RegExp(`${E1.source}${IW}`),N1=RegExp(`(?:T${BA.source})?`),CW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,TW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,jW=/(\d{4})-?(\d{3})/,OW=MA("weekYear","weekNumber","weekDay"),RW=MA("year","ordinal"),qW=/(\d{4})-(\d\d)-(\d\d)/,zA=RegExp(`${E1.source} ?(?:${$A.source}|(${LA.source}))?`),AW=RegExp(`(?: ${zA.source})?`);function wd(t,e,n){const r=t[e];return fn(r)?n:El(r)}function PW(t,e){return[{year:wd(t,e),month:wd(t,e+1,1),day:wd(t,e+2,1)},null,e+3]}function of(t,e){return[{hours:wd(t,e,0),minutes:wd(t,e+1,0),seconds:wd(t,e+2,0),milliseconds:_1(t[e+3])},null,e+4]}function em(t,e){const n=!t[e]&&!t[e+1],r=bb(t[e+1],t[e+2]),i=n?null:$i.instance(r);return[{},i,e+3]}function tm(t,e){const n=t[e]?$a.create(t[e]):null;return[{},n,e+1]}const FW=RegExp(`^T?${E1.source}$`),DW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function LW(t){const[e,n,r,i,s,o,l,u,f]=t,p=e[0]==="-",h=u&&u[0]==="-",b=(x,_=!1)=>x!==void 0&&(_||x&&p)?-x:x;return[{years:b(Cc(n)),months:b(Cc(r)),weeks:b(Cc(i)),days:b(Cc(s)),hours:b(Cc(o)),minutes:b(Cc(l)),seconds:b(Cc(u),u==="-0"),milliseconds:b(_1(f),h)}]}const MW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function k1(t,e,n,r,i,s,o){const l={year:e.length===2?iE(El(e)):El(e),month:OA.indexOf(n)+1,day:El(r),hour:El(i),minute:El(s)};return o&&(l.second=El(o)),t&&(l.weekday=t.length>3?qA.indexOf(t)+1:AA.indexOf(t)+1),l}const $W=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function BW(t){const[,e,n,r,i,s,o,l,u,f,p,h]=t,b=k1(e,i,r,n,s,o,l);let x;return u?x=MW[u]:f?x=0:x=bb(p,h),[b,new $i(x)]}function zW(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const WW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,UW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,VW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function rT(t){const[,e,n,r,i,s,o,l]=t;return[k1(e,i,r,n,s,o,l),$i.utcInstance]}function HW(t){const[,e,n,r,i,s,o,l]=t;return[k1(e,l,n,r,i,s,o),$i.utcInstance]}const KW=nf(CW,N1),QW=nf(TW,N1),GW=nf(jW,N1),JW=nf(BA),WA=rf(PW,of,em,tm),ZW=rf(OW,of,em,tm),YW=rf(RW,of,em,tm),XW=rf(of,em,tm);function e6(t){return sf(t,[KW,WA],[QW,ZW],[GW,YW],[JW,XW])}function t6(t){return sf(zW(t),[$W,BW])}function n6(t){return sf(t,[WW,rT],[UW,rT],[VW,HW])}function r6(t){return sf(t,[DW,LW])}const i6=rf(of);function s6(t){return sf(t,[FW,i6])}const o6=nf(qW,AW),a6=nf(zA),l6=rf(of,em,tm);function c6(t){return sf(t,[o6,WA],[a6,l6])}const iT="Invalid Duration",UA={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},u6={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...UA},Js=146097/400,Hu=146097/4800,d6={years:{quarters:4,months:12,weeks:Js/7,days:Js,hours:Js*24,minutes:Js*24*60,seconds:Js*24*60*60,milliseconds:Js*24*60*60*1e3},quarters:{months:3,weeks:Js/28,days:Js/4,hours:Js*24/4,minutes:Js*24*60/4,seconds:Js*24*60*60/4,milliseconds:Js*24*60*60*1e3/4},months:{weeks:Hu/7,days:Hu,hours:Hu*24,minutes:Hu*24*60,seconds:Hu*24*60*60,milliseconds:Hu*24*60*60*1e3},...UA},Bc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],f6=Bc.slice(0).reverse();function gl(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Pn(r)}function VA(t,e){let n=e.milliseconds??0;for(const r of f6.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function sT(t,e){const n=VA(t,e)<0?-1:1;Bc.reduceRight((r,i)=>{if(fn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],l=Math.floor(s/o);e[i]+=l*n,e[r]-=l*o*n}return i},null),Bc.reduce((r,i)=>{if(fn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function p6(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class Pn{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?d6:u6;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Vn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return Pn.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new _i(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Pn({values:pv(e,Pn.normalizeUnit),loc:Vn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Fl(e))return Pn.fromMillis(e);if(Pn.isDuration(e))return e;if(typeof e=="object")return Pn.fromObject(e);throw new _i(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=r6(e);return r?Pn.fromObject(r,n):Pn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=s6(e);return r?Pn.fromObject(r,n):Pn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the Duration is invalid");const r=e instanceof jo?e:new jo(e,n);if(Mr.throwOnInvalid)throw new Dz(r);return new Pn({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new tA(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ei.create(this.loc,r).formatDurationFromString(this,e):iT}toHuman(e={}){if(!this.isValid)return iT;const n=Bc.map(r=>{const i=this.values[r];return fn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=S1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},dn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?VA(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=Pn.fromDurationLike(e),r={};for(const i of Bc)(Fd(n.values,i)||Fd(this.values,i))&&(r[i]=n.get(i)+this.get(i));return gl(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=Pn.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=jA(e(this.values[r],r));return gl(this,{values:n},!0)}get(e){return this[Pn.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...pv(e,Pn.normalizeUnit)};return gl(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return gl(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return sT(this.matrix,e),gl(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=p6(this.normalize().shiftToAll().toObject());return gl(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Pn.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of Bc)if(e.indexOf(o)>=0){s=o;let l=0;for(const f in r)l+=this.matrix[f][o]*r[f],r[f]=0;Fl(i[o])&&(l+=i[o]);const u=Math.trunc(l);n[o]=u,r[o]=(l*1e3-u*1e3)/1e3}else Fl(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return sT(this.matrix,n),gl(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return gl(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of Bc)if(!n(this.values[r],e.values[r]))return!1;return!0}}const Ku="Invalid Interval";function h6(t,e){return!t||!t.isValid?Lr.invalid("missing or invalid start"):!e||!e.isValid?Lr.invalid("missing or invalid end"):e<t?Lr.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Lr{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the Interval is invalid");const r=e instanceof jo?e:new jo(e,n);if(Mr.throwOnInvalid)throw new Fz(r);return new Lr({invalid:r})}static fromDateTimes(e,n){const r=fp(e),i=fp(n),s=h6(r,i);return s??new Lr({start:r,end:i})}static after(e,n){const r=Pn.fromDurationLike(n),i=fp(e);return Lr.fromDateTimes(i,i.plus(r))}static before(e,n){const r=Pn.fromDurationLike(n),i=fp(e);return Lr.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=dn.fromISO(r,n),o=s.isValid}catch{o=!1}let l,u;try{l=dn.fromISO(i,n),u=l.isValid}catch{u=!1}if(o&&u)return Lr.fromDateTimes(s,l);if(o){const f=Pn.fromISO(i,n);if(f.isValid)return Lr.after(s,f)}else if(u){const f=Pn.fromISO(r,n);if(f.isValid)return Lr.before(l,f)}}return Lr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Lr.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(fp).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,l=+o>+this.e?this.e:o;r.push(Lr.fromDateTimes(i,l)),i=l,s+=1}return r}splitBy(e){const n=Pn.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const l=this.start.plus(n.mapUnits(u=>u*i));s=+l>+this.e?this.e:l,o.push(Lr.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Lr.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Lr.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((u,f)=>u.time-f.time);for(const u of l)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(Lr.fromDateTimes(n,u.time)),n=null);return Lr.merge(i)}difference(...e){return Lr.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ku}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=uv,n={}){return this.isValid?Ei.create(this.s.loc.clone(n),e).formatInterval(this):Ku}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Ku}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ku}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Ku}toFormat(e,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Ku}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Pn.invalid(this.invalidReason)}mapEndpoints(e){return Lr.fromDateTimes(e(this.s),e(this.e))}}class Fg{static hasDST(e=Mr.defaultZone){const n=dn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return $a.isValidZone(e)}static normalizeZone(e){return Cl(e,Mr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Vn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Vn.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Vn.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Vn.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Vn.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Vn.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Vn.create(n,null,"gregory").eras(e)}static features(){return{relative:IA(),localeWeek:CA()}}}function oT(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Pn.fromMillis(r).as("days"))}function m6(t,e,n){const r=[["years",(u,f)=>f.year-u.year],["quarters",(u,f)=>f.quarter-u.quarter+(f.year-u.year)*4],["months",(u,f)=>f.month-u.month+(f.year-u.year)*12],["weeks",(u,f)=>{const p=oT(u,f);return(p-p%7)/7}],["days",oT]],i={},s=t;let o,l;for(const[u,f]of r)n.indexOf(u)>=0&&(o=u,i[u]=f(t,e),l=s.plus(i),l>e?(i[u]--,t=s.plus(i),t>e&&(l=t,i[u]--,t=s.plus(i))):t=l);return[t,i,l,o]}function g6(t,e,n,r){let[i,s,o,l]=m6(t,e,n);const u=e-i,f=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);f.length===0&&(o<e&&(o=i.plus({[l]:1})),o!==i&&(s[l]=(s[l]||0)+u/(o-i)));const p=Pn.fromObject(s,r);return f.length>0?Pn.fromMillis(u,r).shiftTo(...f).plus(p):p}const y6="missing Intl.DateTimeFormat.formatToParts support";function $n(t,e=n=>n){return{regex:t,deser:([n])=>e(oW(n))}}const v6="\xa0",HA=`[ ${v6}]`,KA=new RegExp(HA,"g");function b6(t){return t.replace(/\./g,"\\.?").replace(KA,HA)}function aT(t){return t.replace(/\./g,"").replace(KA," ").toLowerCase()}function _o(t,e){return t===null?null:{regex:RegExp(t.map(b6).join("|")),deser:([n])=>t.findIndex(r=>aT(n)===aT(r))+e}}function lT(t,e){return{regex:t,deser:([,n,r])=>bb(n,r),groups:e}}function Dg(t){return{regex:t,deser:([e])=>e}}function x6(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function w6(t,e){const n=wo(e),r=wo(e,"{2}"),i=wo(e,"{3}"),s=wo(e,"{4}"),o=wo(e,"{6}"),l=wo(e,"{1,2}"),u=wo(e,"{1,3}"),f=wo(e,"{1,6}"),p=wo(e,"{1,9}"),h=wo(e,"{2,4}"),b=wo(e,"{4,6}"),x=I=>({regex:RegExp(x6(I.val)),deser:([T])=>T,literal:!0}),E=(I=>{if(t.literal)return x(I);switch(I.val){case"G":return _o(e.eras("short"),0);case"GG":return _o(e.eras("long"),0);case"y":return $n(f);case"yy":return $n(h,iE);case"yyyy":return $n(s);case"yyyyy":return $n(b);case"yyyyyy":return $n(o);case"M":return $n(l);case"MM":return $n(r);case"MMM":return _o(e.months("short",!0),1);case"MMMM":return _o(e.months("long",!0),1);case"L":return $n(l);case"LL":return $n(r);case"LLL":return _o(e.months("short",!1),1);case"LLLL":return _o(e.months("long",!1),1);case"d":return $n(l);case"dd":return $n(r);case"o":return $n(u);case"ooo":return $n(i);case"HH":return $n(r);case"H":return $n(l);case"hh":return $n(r);case"h":return $n(l);case"mm":return $n(r);case"m":return $n(l);case"q":return $n(l);case"qq":return $n(r);case"s":return $n(l);case"ss":return $n(r);case"S":return $n(u);case"SSS":return $n(i);case"u":return Dg(p);case"uu":return Dg(l);case"uuu":return $n(n);case"a":return _o(e.meridiems(),0);case"kkkk":return $n(s);case"kk":return $n(h,iE);case"W":return $n(l);case"WW":return $n(r);case"E":case"c":return $n(n);case"EEE":return _o(e.weekdays("short",!1),1);case"EEEE":return _o(e.weekdays("long",!1),1);case"ccc":return _o(e.weekdays("short",!0),1);case"cccc":return _o(e.weekdays("long",!0),1);case"Z":case"ZZ":return lT(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return lT(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return Dg(/[a-z_+-/]{1,256}?/i);case" ":return Dg(/[^\S\n\r]/);default:return x(I)}})(t)||{invalidReason:y6};return E.token=t,E}const _6={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function S6(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const u=/^\s+$/.test(i);return{literal:!u,val:u?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let l=_6[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function E6(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function N6(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(Fd(n,o)){const l=n[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(i[l.token.val[0]]=l.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function k6(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return fn(t.z)||(n=$a.create(t.z)),fn(t.Z)||(n||(n=new $i(t.Z)),r=t.Z),fn(t.q)||(t.M=(t.q-1)*3+1),fn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),fn(t.u)||(t.S=_1(t.u)),[Object.keys(t).reduce((s,o)=>{const l=e(o);return l&&(s[l]=t[o]),s},{}),n,r]}let l_=null;function I6(){return l_||(l_=dn.fromMillis(0x16a2e5618e3)),l_}function C6(t,e){if(t.literal)return t;const n=Ei.macroTokenToFormatOpts(t.val),r=ZA(n,e);return r==null||r.includes(void 0)?t:r}function QA(t,e){return Array.prototype.concat(...t.map(n=>C6(n,e)))}class GA{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=QA(Ei.parseFormat(n),e),this.units=this.tokens.map(r=>w6(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=E6(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=N6(e,this.regex,this.handlers),[i,s,o]=r?k6(r):[null,null,void 0];if(Fd(r,"a")&&Fd(r,"H"))throw new ld("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function JA(t,e,n){return new GA(t,n).explainFromTokens(e)}function T6(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=JA(t,e,n);return[r,i,s,o]}function ZA(t,e){if(!t)return null;const r=Ei.create(e,t).dtFormatter(I6()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>S6(o,t,s))}const c_="Invalid DateTime",j6=864e13;function Ip(t){return new jo("unsupported zone",`the zone "${t.name}" is not supported`)}function u_(t){return t.weekData===null&&(t.weekData=dv(t.c)),t.weekData}function d_(t){return t.localWeekData===null&&(t.localWeekData=dv(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Tc(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new dn({...n,...e,old:n})}function YA(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Lg(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function vy(t,e,n){return YA(vb(t),e,n)}function cT(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,fv(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Pn.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=vb(s);let[u,f]=YA(l,n,t.zone);return o!==0&&(u+=o,f=t.zone.offset(u)),{ts:u,o:f}}function Qu(t,e,n,r,i,s){const{setZone:o,zone:l}=n;if(t&&Object.keys(t).length!==0||e){const u=e||l,f=dn.fromObject(t,{...n,zone:u,specificOffset:s});return o?f:f.setZone(l)}else return dn.invalid(new jo("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Mg(t,e,n=!0){return t.isValid?Ei.create(Vn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function f_(t,e){const n=t.c.year>9999||t.c.year<0;let r="";return n&&t.c.year>=0&&(r+="+"),r+=Qr(t.c.year,n?6:4),e?(r+="-",r+=Qr(t.c.month),r+="-",r+=Qr(t.c.day)):(r+=Qr(t.c.month),r+=Qr(t.c.day)),r}function uT(t,e,n,r,i,s){let o=Qr(t.c.hour);return e?(o+=":",o+=Qr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=":")):o+=Qr(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(o+=Qr(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=Qr(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Qr(Math.trunc(-t.o/60)),o+=":",o+=Qr(Math.trunc(-t.o%60))):(o+="+",o+=Qr(Math.trunc(t.o/60)),o+=":",o+=Qr(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const XA={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},O6={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},R6={ordinal:1,hour:0,minute:0,second:0,millisecond:0},eP=["year","month","day","hour","minute","second","millisecond"],q6=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],A6=["year","ordinal","hour","minute","second","millisecond"];function P6(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new tA(t);return e}function dT(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return P6(t)}}function F6(t){return xy[t]||(by===void 0&&(by=Mr.now()),xy[t]=t.offset(by)),xy[t]}function fT(t,e){const n=Cl(e.zone,Mr.defaultZone);if(!n.isValid)return dn.invalid(Ip(n));const r=Vn.fromObject(e);let i,s;if(fn(t.year))i=Mr.now();else{for(const u of eP)fn(t[u])&&(t[u]=XA[u]);const o=NA(t)||kA(t);if(o)return dn.invalid(o);const l=F6(n);[i,s]=vy(t,l,n)}return new dn({ts:i,zone:n,loc:r,o:s})}function pT(t,e,n){const r=fn(n.round)?!0:n.round,i=(o,l)=>(o=S1(o,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,l)),s=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const l=s(o);if(Math.abs(l)>=1)return i(l,o)}return i(t>e?-0:0,n.units[n.units.length-1])}function hT(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let by,xy={};class dn{constructor(e){const n=e.zone||Mr.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new jo("invalid input"):null)||(n.isValid?null:Ip(n));this.ts=fn(e.ts)?Mr.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const l=Fl(e.o)&&!e.old?e.o:n.offset(this.ts);i=Lg(this.ts,l),r=Number.isNaN(i.year)?new jo("invalid input"):null,i=r?null:i,s=r?null:l}this._zone=n,this.loc=e.loc||Vn.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new dn({})}static local(){const[e,n]=hT(arguments),[r,i,s,o,l,u,f]=n;return fT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static utc(){const[e,n]=hT(arguments),[r,i,s,o,l,u,f]=n;return e.zone=$i.utcInstance,fT({year:r,month:i,day:s,hour:o,minute:l,second:u,millisecond:f},e)}static fromJSDate(e,n={}){const r=dW(e)?e.valueOf():NaN;if(Number.isNaN(r))return dn.invalid("invalid input");const i=Cl(n.zone,Mr.defaultZone);return i.isValid?new dn({ts:r,zone:i,loc:Vn.fromObject(n)}):dn.invalid(Ip(i))}static fromMillis(e,n={}){if(Fl(e))return e<-864e13||e>j6?dn.invalid("Timestamp out of range"):new dn({ts:e,zone:Cl(n.zone,Mr.defaultZone),loc:Vn.fromObject(n)});throw new _i(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Fl(e))return new dn({ts:e*1e3,zone:Cl(n.zone,Mr.defaultZone),loc:Vn.fromObject(n)});throw new _i("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Cl(n.zone,Mr.defaultZone);if(!r.isValid)return dn.invalid(Ip(r));const i=Vn.fromObject(n),s=pv(e,dT),{minDaysInFirstWeek:o,startOfWeek:l}=XC(s,i),u=Mr.now(),f=fn(n.specificOffset)?r.offset(u):n.specificOffset,p=!fn(s.ordinal),h=!fn(s.year),b=!fn(s.month)||!fn(s.day),x=h||b,_=s.weekYear||s.weekNumber;if((x||p)&&_)throw new ld("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&p)throw new ld("Can't mix ordinal dates with month/day");const E=_||s.weekday&&!x;let I,T,j=Lg(u,f);E?(I=q6,T=O6,j=dv(j,o,l)):p?(I=A6,T=R6,j=a_(j)):(I=eP,T=XA);let O=!1;for(const $ of I){const F=s[$];fn(F)?O?s[$]=T[$]:s[$]=j[$]:O=!0}const A=E?lW(s,o,l):p?cW(s):NA(s),D=A||kA(s);if(D)return dn.invalid(D);const M=E?ZC(s,o,l):p?YC(s):s,[W,P]=vy(M,f,r),R=new dn({ts:W,zone:r,o:P,loc:i});return s.weekday&&x&&e.weekday!==R.weekday?dn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${R.toISO()}`):R.isValid?R:dn.invalid(R.invalid)}static fromISO(e,n={}){const[r,i]=e6(e);return Qu(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=t6(e);return Qu(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=n6(e);return Qu(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(fn(e)||fn(n))throw new _i("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[l,u,f,p]=T6(o,e,n);return p?dn.invalid(p):Qu(l,u,r,`format ${n}`,e,f)}static fromString(e,n,r={}){return dn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=c6(e);return Qu(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new _i("need to specify a reason the DateTime is invalid");const r=e instanceof jo?e:new jo(e,n);if(Mr.throwOnInvalid)throw new Pz(r);return new dn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=ZA(e,Vn.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return QA(Ei.parseFormat(e),Vn.fromObject(n)).map(i=>i.val).join("")}static resetCache(){by=void 0,xy={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?u_(this).weekYear:NaN}get weekNumber(){return this.isValid?u_(this).weekNumber:NaN}get weekday(){return this.isValid?u_(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?d_(this).weekday:NaN}get localWeekNumber(){return this.isValid?d_(this).weekNumber:NaN}get localWeekYear(){return this.isValid?d_(this).weekYear:NaN}get ordinal(){return this.isValid?a_(this.c).ordinal:NaN}get monthShort(){return this.isValid?Fg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Fg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Fg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Fg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=vb(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),l=this.zone.offset(r-s*n);if(o===l)return[this];const u=r-o*n,f=r-l*n,p=Lg(u,o),h=Lg(f,l);return p.hour===h.hour&&p.minute===h.minute&&p.second===h.second&&p.millisecond===h.millisecond?[Tc(this,{ts:u}),Tc(this,{ts:f})]:[this]}get isInLeapYear(){return Xh(this.year)}get daysInMonth(){return fv(this.year,this.month)}get daysInYear(){return this.isValid?xd(this.year):NaN}get weeksInWeekYear(){return this.isValid?ch(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ch(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=Ei.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone($i.instance(e),n)}toLocal(){return this.setZone(Mr.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Cl(e,Mr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=vy(o,s,e)}return Tc(this,{ts:i,zone:e})}else return dn.invalid(Ip(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Tc(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=pv(e,dT),{minDaysInFirstWeek:r,startOfWeek:i}=XC(n,this.loc),s=!fn(n.weekYear)||!fn(n.weekNumber)||!fn(n.weekday),o=!fn(n.ordinal),l=!fn(n.year),u=!fn(n.month)||!fn(n.day),f=l||u,p=n.weekYear||n.weekNumber;if((f||o)&&p)throw new ld("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new ld("Can't mix ordinal dates with month/day");let h;s?h=ZC({...dv(this.c,r,i),...n},r,i):fn(n.ordinal)?(h={...this.toObject(),...n},fn(n.day)&&(h.day=Math.min(fv(h.year,h.month),h.day))):h=YC({...a_(this.c),...n});const[b,x]=vy(h,this.o,this.zone);return Tc(this,{ts:b,o:x})}plus(e){if(!this.isValid)return this;const n=Pn.fromDurationLike(e);return Tc(this,cT(this,n))}minus(e){if(!this.isValid)return this;const n=Pn.fromDurationLike(e).negate();return Tc(this,cT(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=Pn.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Ei.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):c_}toLocaleString(e=uv,n={}){return this.isValid?Ei.create(this.loc.clone(n),e).formatDateTime(this):c_}toLocaleParts(e={}){return this.isValid?Ei.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let l=f_(this,o);return l+="T",l+=uT(this,o,n,r,i,s),l}toISODate({format:e="extended"}={}){return this.isValid?f_(this,e==="extended"):null}toISOWeekDate(){return Mg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+uT(this,o==="extended",n,e,r,s):null}toRFC2822(){return Mg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Mg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?f_(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Mg(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():c_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return Pn.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=fW(n).map(Pn.normalizeUnit),o=e.valueOf()>this.valueOf(),l=o?this:e,u=o?e:this,f=g6(l,u,s,i);return o?f.negate():f}diffNow(e="milliseconds",n={}){return this.diff(dn.now(),e,n)}until(e){return this.isValid?Lr.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||dn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),pT(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?pT(e.base||dn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(dn.isDateTime))throw new _i("min requires all arguments be DateTimes");return eT(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(dn.isDateTime))throw new _i("max requires all arguments be DateTimes");return eT(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return JA(o,e,n)}static fromStringExplain(e,n,r={}){return dn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Vn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new GA(s,e)}static fromFormatParser(e,n,r={}){if(fn(e)||fn(n))throw new _i("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Vn.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new _i(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:l,zone:u,specificOffset:f,invalidReason:p}=n.explainFromTokens(e);return p?dn.invalid(p):Qu(l,u,r,`format ${n.format}`,e,f)}static get DATE_SHORT(){return uv}static get DATE_MED(){return nA}static get DATE_MED_WITH_WEEKDAY(){return Lz}static get DATE_FULL(){return rA}static get DATE_HUGE(){return iA}static get TIME_SIMPLE(){return sA}static get TIME_WITH_SECONDS(){return oA}static get TIME_WITH_SHORT_OFFSET(){return aA}static get TIME_WITH_LONG_OFFSET(){return lA}static get TIME_24_SIMPLE(){return cA}static get TIME_24_WITH_SECONDS(){return uA}static get TIME_24_WITH_SHORT_OFFSET(){return dA}static get TIME_24_WITH_LONG_OFFSET(){return fA}static get DATETIME_SHORT(){return pA}static get DATETIME_SHORT_WITH_SECONDS(){return hA}static get DATETIME_MED(){return mA}static get DATETIME_MED_WITH_SECONDS(){return gA}static get DATETIME_MED_WITH_WEEKDAY(){return Mz}static get DATETIME_FULL(){return yA}static get DATETIME_FULL_WITH_SECONDS(){return vA}static get DATETIME_HUGE(){return bA}static get DATETIME_HUGE_WITH_SECONDS(){return xA}}function fp(t){if(dn.isDateTime(t))return t;if(t&&t.valueOf&&Fl(t.valueOf()))return dn.fromJSDate(t);if(t&&typeof t=="object")return dn.fromObject(t);throw new _i(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function tP(t,e){return function(){return t.apply(e,arguments)}}const{toString:D6}=Object.prototype,{getPrototypeOf:I1}=Object,wb=(t=>e=>{const n=D6.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mo=t=>(t=t.toLowerCase(),e=>wb(e)===t),_b=t=>e=>typeof e===t,{isArray:af}=Array,uh=_b("undefined");function L6(t){return t!==null&&!uh(t)&&t.constructor!==null&&!uh(t.constructor)&&qs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nP=Mo("ArrayBuffer");function M6(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nP(t.buffer),e}const $6=_b("string"),qs=_b("function"),rP=_b("number"),Sb=t=>t!==null&&typeof t=="object",B6=t=>t===!0||t===!1,wy=t=>{if(wb(t)!=="object")return!1;const e=I1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z6=Mo("Date"),W6=Mo("File"),U6=Mo("Blob"),V6=Mo("FileList"),H6=t=>Sb(t)&&qs(t.pipe),K6=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qs(t.append)&&((e=wb(t))==="formdata"||e==="object"&&qs(t.toString)&&t.toString()==="[object FormData]"))},Q6=Mo("URLSearchParams"),[G6,J6,Z6,Y6]=["ReadableStream","Request","Response","Headers"].map(Mo),X6=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),af(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function iP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const zc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sP=t=>!uh(t)&&t!==zc;function sE(){const{caseless:t}=sP(this)&&this||{},e={},n=(r,i)=>{const s=t&&iP(e,i)||i;wy(e[s])&&wy(r)?e[s]=sE(e[s],r):wy(r)?e[s]=sE({},r):af(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&nm(arguments[r],n);return e}const eU=(t,e,n,{allOwnKeys:r}={})=>(nm(e,(i,s)=>{n&&qs(i)?t[s]=tP(i,n):t[s]=i},{allOwnKeys:r}),t),tU=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),nU=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},rU=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&I1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},iU=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},sU=t=>{if(!t)return null;if(af(t))return t;let e=t.length;if(!rP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},oU=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&I1(Uint8Array)),aU=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},lU=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},cU=Mo("HTMLFormElement"),uU=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),mT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),dU=Mo("RegExp"),oP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};nm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},fU=t=>{oP(t,(e,n)=>{if(qs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(qs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pU=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return af(t)?r(t):r(String(t).split(e)),n},hU=()=>{},mU=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,p_="abcdefghijklmnopqrstuvwxyz",gT="0123456789",aP={DIGIT:gT,ALPHA:p_,ALPHA_DIGIT:p_+p_.toUpperCase()+gT},gU=(t=16,e=aP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function yU(t){return!!(t&&qs(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const vU=t=>{const e=new Array(10),n=(r,i)=>{if(Sb(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=af(r)?[]:{};return nm(r,(o,l)=>{const u=n(o,i+1);!uh(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},bU=Mo("AsyncFunction"),xU=t=>t&&(Sb(t)||qs(t))&&qs(t.then)&&qs(t.catch),lP=((t,e)=>t?setImmediate:e?((n,r)=>(zc.addEventListener("message",({source:i,data:s})=>{i===zc&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),zc.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qs(zc.postMessage)),wU=typeof queueMicrotask<"u"?queueMicrotask.bind(zc):typeof process<"u"&&process.nextTick||lP,Ye={isArray:af,isArrayBuffer:nP,isBuffer:L6,isFormData:K6,isArrayBufferView:M6,isString:$6,isNumber:rP,isBoolean:B6,isObject:Sb,isPlainObject:wy,isReadableStream:G6,isRequest:J6,isResponse:Z6,isHeaders:Y6,isUndefined:uh,isDate:z6,isFile:W6,isBlob:U6,isRegExp:dU,isFunction:qs,isStream:H6,isURLSearchParams:Q6,isTypedArray:oU,isFileList:V6,forEach:nm,merge:sE,extend:eU,trim:X6,stripBOM:tU,inherits:nU,toFlatObject:rU,kindOf:wb,kindOfTest:Mo,endsWith:iU,toArray:sU,forEachEntry:aU,matchAll:lU,isHTMLForm:cU,hasOwnProperty:mT,hasOwnProp:mT,reduceDescriptors:oP,freezeMethods:fU,toObjectSet:pU,toCamelCase:uU,noop:hU,toFiniteNumber:mU,findKey:iP,global:zc,isContextDefined:sP,ALPHABET:aP,generateString:gU,isSpecCompliantForm:yU,toJSONObject:vU,isAsyncFn:bU,isThenable:xU,setImmediate:lP,asap:wU};function xn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ye.inherits(xn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ye.toJSONObject(this.config),code:this.code,status:this.status}}});const cP=xn.prototype,uP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{uP[t]={value:t}});Object.defineProperties(xn,uP);Object.defineProperty(cP,"isAxiosError",{value:!0});xn.from=(t,e,n,r,i,s)=>{const o=Object.create(cP);return Ye.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),xn.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const _U=null;function oE(t){return Ye.isPlainObject(t)||Ye.isArray(t)}function dP(t){return Ye.endsWith(t,"[]")?t.slice(0,-2):t}function yT(t,e,n){return t?t.concat(e).map(function(i,s){return i=dP(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function SU(t){return Ye.isArray(t)&&!t.some(oE)}const EU=Ye.toFlatObject(Ye,{},null,function(e){return/^is[A-Z]/.test(e)});function Eb(t,e,n){if(!Ye.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ye.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,I){return!Ye.isUndefined(I[E])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Ye.isSpecCompliantForm(e);if(!Ye.isFunction(i))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(Ye.isDate(_))return _.toISOString();if(!u&&Ye.isBlob(_))throw new xn("Blob is not supported. Use a Buffer instead.");return Ye.isArrayBuffer(_)||Ye.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,E,I){let T=_;if(_&&!I&&typeof _=="object"){if(Ye.endsWith(E,"{}"))E=r?E:E.slice(0,-2),_=JSON.stringify(_);else if(Ye.isArray(_)&&SU(_)||(Ye.isFileList(_)||Ye.endsWith(E,"[]"))&&(T=Ye.toArray(_)))return E=dP(E),T.forEach(function(O,A){!(Ye.isUndefined(O)||O===null)&&e.append(o===!0?yT([E],A,s):o===null?E:E+"[]",f(O))}),!1}return oE(_)?!0:(e.append(yT(I,E,s),f(_)),!1)}const h=[],b=Object.assign(EU,{defaultVisitor:p,convertValue:f,isVisitable:oE});function x(_,E){if(!Ye.isUndefined(_)){if(h.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));h.push(_),Ye.forEach(_,function(T,j){(!(Ye.isUndefined(T)||T===null)&&i.call(e,T,Ye.isString(j)?j.trim():j,E,b))===!0&&x(T,E?E.concat(j):[j])}),h.pop()}}if(!Ye.isObject(t))throw new TypeError("data must be an object");return x(t),e}function vT(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function C1(t,e){this._pairs=[],t&&Eb(t,this,e)}const fP=C1.prototype;fP.append=function(e,n){this._pairs.push([e,n])};fP.toString=function(e){const n=e?function(r){return e.call(this,r,vT)}:vT;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function NU(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pP(t,e,n){if(!e)return t;const r=n&&n.encode||NU;Ye.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ye.isURLSearchParams(e)?e.toString():new C1(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class bT{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const hP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kU=typeof URLSearchParams<"u"?URLSearchParams:C1,IU=typeof FormData<"u"?FormData:null,CU=typeof Blob<"u"?Blob:null,TU={isBrowser:!0,classes:{URLSearchParams:kU,FormData:IU,Blob:CU},protocols:["http","https","file","blob","url","data"]},T1=typeof window<"u"&&typeof document<"u",aE=typeof navigator=="object"&&navigator||void 0,jU=T1&&(!aE||["ReactNative","NativeScript","NS"].indexOf(aE.product)<0),OU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RU=T1&&window.location.href||"http://localhost",qU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:T1,hasStandardBrowserEnv:jU,hasStandardBrowserWebWorkerEnv:OU,navigator:aE,origin:RU},Symbol.toStringTag,{value:"Module"})),Ni={...qU,...TU};function AU(t,e){return Eb(t,new Ni.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ni.isNode&&Ye.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function PU(t){return Ye.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FU(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function mP(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&Ye.isArray(i)?i.length:o,u?(Ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!Ye.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ye.isArray(i[o])&&(i[o]=FU(i[o])),!l)}if(Ye.isFormData(t)&&Ye.isFunction(t.entries)){const n={};return Ye.forEachEntry(t,(r,i)=>{e(PU(r),i,n,0)}),n}return null}function DU(t,e,n){if(Ye.isString(t))try{return(e||JSON.parse)(t),Ye.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const rm={transitional:hP,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ye.isObject(e);if(s&&Ye.isHTMLForm(e)&&(e=new FormData(e)),Ye.isFormData(e))return i?JSON.stringify(mP(e)):e;if(Ye.isArrayBuffer(e)||Ye.isBuffer(e)||Ye.isStream(e)||Ye.isFile(e)||Ye.isBlob(e)||Ye.isReadableStream(e))return e;if(Ye.isArrayBufferView(e))return e.buffer;if(Ye.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return AU(e,this.formSerializer).toString();if((l=Ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Eb(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),DU(e)):e}],transformResponse:[function(e){const n=this.transitional||rm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ye.isResponse(e)||Ye.isReadableStream(e))return e;if(e&&Ye.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?xn.from(l,xn.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ni.classes.FormData,Blob:Ni.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ye.forEach(["delete","get","head","post","put","patch"],t=>{rm.headers[t]={}});const LU=Ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),MU=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&LU[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},xT=Symbol("internals");function pp(t){return t&&String(t).trim().toLowerCase()}function _y(t){return t===!1||t==null?t:Ye.isArray(t)?t.map(_y):String(t)}function $U(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BU=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function h_(t,e,n,r,i){if(Ye.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ye.isString(e)){if(Ye.isString(r))return e.indexOf(r)!==-1;if(Ye.isRegExp(r))return r.test(e)}}function zU(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function WU(t,e){const n=Ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let hs=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,f){const p=pp(u);if(!p)throw new Error("header name must be a non-empty string");const h=Ye.findKey(i,p);(!h||i[h]===void 0||f===!0||f===void 0&&i[h]!==!1)&&(i[h||u]=_y(l))}const o=(l,u)=>Ye.forEach(l,(f,p)=>s(f,p,u));if(Ye.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ye.isString(e)&&(e=e.trim())&&!BU(e))o(MU(e),n);else if(Ye.isHeaders(e))for(const[l,u]of e.entries())s(u,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=pp(e),e){const r=Ye.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return $U(i);if(Ye.isFunction(n))return n.call(this,i,r);if(Ye.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=pp(e),e){const r=Ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||h_(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=pp(o),o){const l=Ye.findKey(r,o);l&&(!n||h_(r,r[l],l,n))&&(delete r[l],i=!0)}}return Ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||h_(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ye.forEach(this,(i,s)=>{const o=Ye.findKey(r,s);if(o){n[o]=_y(i),delete n[s];return}const l=e?zU(s):String(s).trim();l!==s&&delete n[s],n[l]=_y(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ye.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[xT]=this[xT]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=pp(o);r[l]||(WU(i,o),r[l]=!0)}return Ye.isArray(e)?e.forEach(s):s(e),this}};hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ye.reduceDescriptors(hs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ye.freezeMethods(hs);function m_(t,e){const n=this||rm,r=e||n,i=hs.from(r.headers);let s=r.data;return Ye.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function gP(t){return!!(t&&t.__CANCEL__)}function lf(t,e,n){xn.call(this,t??"canceled",xn.ERR_CANCELED,e,n),this.name="CanceledError"}Ye.inherits(lf,xn,{__CANCEL__:!0});function yP(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xn("Request failed with status code "+n.status,[xn.ERR_BAD_REQUEST,xn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function UU(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function VU(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const f=Date.now(),p=r[s];o||(o=f),n[i]=u,r[i]=f;let h=s,b=0;for(;h!==i;)b+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-o<e)return;const x=p&&f-p;return x?Math.round(b*1e3/x):void 0}}function HU(t,e){let n=0,r=1e3/e,i,s;const o=(f,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,f)};return[(...f)=>{const p=Date.now(),h=p-n;h>=r?o(f,p):(i=f,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const hv=(t,e,n=3)=>{let r=0;const i=VU(50,250);return HU(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-r,f=i(u),p=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:f||void 0,estimated:f&&l&&p?(l-o)/f:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},wT=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},_T=t=>(...e)=>Ye.asap(()=>t(...e)),KU=Ni.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ni.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ni.origin),Ni.navigator&&/(msie|trident)/i.test(Ni.navigator.userAgent)):()=>!0,QU=Ni.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ye.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ye.isString(r)&&o.push("path="+r),Ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function GU(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JU(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vP(t,e){return t&&!GU(e)?JU(t,e):e}const ST=t=>t instanceof hs?{...t}:t;function Xc(t,e){e=e||{};const n={};function r(f,p,h,b){return Ye.isPlainObject(f)&&Ye.isPlainObject(p)?Ye.merge.call({caseless:b},f,p):Ye.isPlainObject(p)?Ye.merge({},p):Ye.isArray(p)?p.slice():p}function i(f,p,h,b){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f,h,b)}else return r(f,p,h,b)}function s(f,p){if(!Ye.isUndefined(p))return r(void 0,p)}function o(f,p){if(Ye.isUndefined(p)){if(!Ye.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function l(f,p,h){if(h in e)return r(f,p);if(h in t)return r(void 0,f)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(f,p,h)=>i(ST(f),ST(p),h,!0)};return Ye.forEach(Object.keys(Object.assign({},t,e)),function(p){const h=u[p]||i,b=h(t[p],e[p],p);Ye.isUndefined(b)&&h!==l||(n[p]=b)}),n}const bP=t=>{const e=Xc({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=hs.from(o),e.url=pP(vP(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(Ye.isFormData(n)){if(Ni.hasStandardBrowserEnv||Ni.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[f,...p]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([f||"multipart/form-data",...p].join("; "))}}if(Ni.hasStandardBrowserEnv&&(r&&Ye.isFunction(r)&&(r=r(e)),r||r!==!1&&KU(e.url))){const f=i&&s&&QU.read(s);f&&o.set(i,f)}return e},ZU=typeof XMLHttpRequest<"u",YU=ZU&&function(t){return new Promise(function(n,r){const i=bP(t);let s=i.data;const o=hs.from(i.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:f}=i,p,h,b,x,_;function E(){x&&x(),_&&_(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function T(){if(!I)return;const O=hs.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),D={data:!l||l==="text"||l==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:O,config:t,request:I};yP(function(W){n(W),E()},function(W){r(W),E()},D),I=null}"onloadend"in I?I.onloadend=T:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(T)},I.onabort=function(){I&&(r(new xn("Request aborted",xn.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new xn("Network Error",xn.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||hP;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),r(new xn(A,D.clarifyTimeoutError?xn.ETIMEDOUT:xn.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&Ye.forEach(o.toJSON(),function(A,D){I.setRequestHeader(D,A)}),Ye.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),l&&l!=="json"&&(I.responseType=i.responseType),f&&([b,_]=hv(f,!0),I.addEventListener("progress",b)),u&&I.upload&&([h,x]=hv(u),I.upload.addEventListener("progress",h),I.upload.addEventListener("loadend",x)),(i.cancelToken||i.signal)&&(p=O=>{I&&(r(!O||O.type?new lf(null,t,I):O),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const j=UU(i.url);if(j&&Ni.protocols.indexOf(j)===-1){r(new xn("Unsupported protocol "+j+":",xn.ERR_BAD_REQUEST,t));return}I.send(s||null)})},XU=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,l();const p=f instanceof Error?f:this.reason;r.abort(p instanceof xn?p:new lf(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new xn(`timeout ${e} of ms exceeded`,xn.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),t=null)};t.forEach(f=>f.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>Ye.asap(l),u}},eV=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},tV=async function*(t,e){for await(const n of nV(t))yield*eV(n,e)},nV=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},ET=(t,e,n,r)=>{const i=tV(t,e);let s=0,o,l=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:f,value:p}=await i.next();if(f){l(),u.close();return}let h=p.byteLength;if(n){let b=s+=h;n(b)}u.enqueue(new Uint8Array(p))}catch(f){throw l(f),f}},cancel(u){return l(u),i.return()}},{highWaterMark:2})},Nb=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xP=Nb&&typeof ReadableStream=="function",rV=Nb&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),wP=(t,...e)=>{try{return!!t(...e)}catch{return!1}},iV=xP&&wP(()=>{let t=!1;const e=new Request(Ni.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),NT=64*1024,lE=xP&&wP(()=>Ye.isReadableStream(new Response("").body)),mv={stream:lE&&(t=>t.body)};Nb&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!mv[e]&&(mv[e]=Ye.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new xn(`Response type '${e}' is not supported`,xn.ERR_NOT_SUPPORT,r)})})})(new Response);const sV=async t=>{if(t==null)return 0;if(Ye.isBlob(t))return t.size;if(Ye.isSpecCompliantForm(t))return(await new Request(Ni.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ye.isArrayBufferView(t)||Ye.isArrayBuffer(t))return t.byteLength;if(Ye.isURLSearchParams(t)&&(t=t+""),Ye.isString(t))return(await rV(t)).byteLength},oV=async(t,e)=>{const n=Ye.toFiniteNumber(t.getContentLength());return n??sV(e)},aV=Nb&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:f,headers:p,withCredentials:h="same-origin",fetchOptions:b}=bP(t);f=f?(f+"").toLowerCase():"text";let x=XU([i,s&&s.toAbortSignal()],o),_;const E=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let I;try{if(u&&iV&&n!=="get"&&n!=="head"&&(I=await oV(p,r))!==0){let D=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(Ye.isFormData(r)&&(M=D.headers.get("content-type"))&&p.setContentType(M),D.body){const[W,P]=wT(I,hv(_T(u)));r=ET(D.body,NT,W,P)}}Ye.isString(h)||(h=h?"include":"omit");const T="credentials"in Request.prototype;_=new Request(e,{...b,signal:x,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:T?h:void 0});let j=await fetch(_);const O=lE&&(f==="stream"||f==="response");if(lE&&(l||O&&E)){const D={};["status","statusText","headers"].forEach(R=>{D[R]=j[R]});const M=Ye.toFiniteNumber(j.headers.get("content-length")),[W,P]=l&&wT(M,hv(_T(l),!0))||[];j=new Response(ET(j.body,NT,W,()=>{P&&P(),E&&E()}),D)}f=f||"text";let A=await mv[Ye.findKey(mv,f)||"text"](j,t);return!O&&E&&E(),await new Promise((D,M)=>{yP(D,M,{data:A,headers:hs.from(j.headers),status:j.status,statusText:j.statusText,config:t,request:_})})}catch(T){throw E&&E(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new xn("Network Error",xn.ERR_NETWORK,t,_),{cause:T.cause||T}):xn.from(T,T&&T.code,t,_)}}),cE={http:_U,xhr:YU,fetch:aV};Ye.forEach(cE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const kT=t=>`- ${t}`,lV=t=>Ye.isFunction(t)||t===null||t===!1,_P={getAdapter:t=>{t=Ye.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!lV(n)&&(r=cE[(o=String(n)).toLowerCase()],r===void 0))throw new xn(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(kT).join(`
`):" "+kT(s[0]):"as no adapter specified";throw new xn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:cE};function g_(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lf(null,t)}function IT(t){return g_(t),t.headers=hs.from(t.headers),t.data=m_.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_P.getAdapter(t.adapter||rm.adapter)(t).then(function(r){return g_(t),r.data=m_.call(t,t.transformResponse,r),r.headers=hs.from(r.headers),r},function(r){return gP(r)||(g_(t),r&&r.response&&(r.response.data=m_.call(t,t.transformResponse,r.response),r.response.headers=hs.from(r.response.headers))),Promise.reject(r)})}const SP="1.7.9",kb={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{kb[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const CT={};kb.transitional=function(e,n,r){function i(s,o){return"[Axios v"+SP+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new xn(i(o," has been removed"+(n?" in "+n:"")),xn.ERR_DEPRECATED);return n&&!CT[o]&&(CT[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};kb.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function cV(t,e,n){if(typeof t!="object")throw new xn("options must be an object",xn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new xn("option "+s+" must be "+u,xn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xn("Unknown option "+s,xn.ERR_BAD_OPTION)}}const Sy={assertOptions:cV,validators:kb},Ko=Sy.validators;let Kc=class{constructor(e){this.defaults=e,this.interceptors={request:new bT,response:new bT}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Xc(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Sy.assertOptions(r,{silentJSONParsing:Ko.transitional(Ko.boolean),forcedJSONParsing:Ko.transitional(Ko.boolean),clarifyTimeoutError:Ko.transitional(Ko.boolean)},!1),i!=null&&(Ye.isFunction(i)?n.paramsSerializer={serialize:i}:Sy.assertOptions(i,{encode:Ko.function,serialize:Ko.function},!0)),Sy.assertOptions(n,{baseUrl:Ko.spelling("baseURL"),withXsrfToken:Ko.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ye.merge(s.common,s[n.method]);s&&Ye.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),n.headers=hs.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(u=u&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const f=[];this.interceptors.response.forEach(function(E){f.push(E.fulfilled,E.rejected)});let p,h=0,b;if(!u){const _=[IT.bind(this),void 0];for(_.unshift.apply(_,l),_.push.apply(_,f),b=_.length,p=Promise.resolve(n);h<b;)p=p.then(_[h++],_[h++]);return p}b=l.length;let x=n;for(h=0;h<b;){const _=l[h++],E=l[h++];try{x=_(x)}catch(I){E.call(this,I);break}}try{p=IT.call(this,x)}catch(_){return Promise.reject(_)}for(h=0,b=f.length;h<b;)p=p.then(f[h++],f[h++]);return p}getUri(e){e=Xc(this.defaults,e);const n=vP(e.baseURL,e.url);return pP(n,e.params,e.paramsSerializer)}};Ye.forEach(["delete","get","head","options"],function(e){Kc.prototype[e]=function(n,r){return this.request(Xc(r||{},{method:e,url:n,data:(r||{}).data}))}});Ye.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(Xc(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Kc.prototype[e]=n(),Kc.prototype[e+"Form"]=n(!0)});let uV=class EP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new lf(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new EP(function(i){e=i}),cancel:e}}};function dV(t){return function(n){return t.apply(null,n)}}function fV(t){return Ye.isObject(t)&&t.isAxiosError===!0}const uE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(uE).forEach(([t,e])=>{uE[e]=t});function NP(t){const e=new Kc(t),n=tP(Kc.prototype.request,e);return Ye.extend(n,Kc.prototype,e,{allOwnKeys:!0}),Ye.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return NP(Xc(t,i))},n}const Ur=NP(rm);Ur.Axios=Kc;Ur.CanceledError=lf;Ur.CancelToken=uV;Ur.isCancel=gP;Ur.VERSION=SP;Ur.toFormData=Eb;Ur.AxiosError=xn;Ur.Cancel=Ur.CanceledError;Ur.all=function(e){return Promise.all(e)};Ur.spread=dV;Ur.isAxiosError=fV;Ur.mergeConfig=Xc;Ur.AxiosHeaders=hs;Ur.formToJSON=t=>mP(Ye.isHTMLForm(t)?new FormData(t):t);Ur.getAdapter=_P.getAdapter;Ur.HttpStatusCode=uE;Ur.default=Ur;const{Axios:Mle,AxiosError:pV,CanceledError:$le,isCancel:Ble,CancelToken:zle,VERSION:Wle,all:Ule,Cancel:Vle,isAxiosError:Hle,spread:Kle,toFormData:Qle,AxiosHeaders:Gle,HttpStatusCode:Jle,formToJSON:Zle,getAdapter:Yle,mergeConfig:Xle}=Ur,j1=({error:t,schema:e,onError:n})=>{if(t instanceof pV){const i=e.safeParse(t.response?.data);return i.success&&n({error:t,data:i.data}),i.success}return!1};var y_,TT;function hV(){if(TT)return y_;TT=1;function t(r){this.queue=[],this.timeslotRequests=0,this.interceptors={request:null,response:null},this.handleRequest=this.handleRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.enable(r)}t.prototype.getMaxRPS=function(){var r=this.perMilliseconds/1e3;return this.maxRequests/r},t.prototype.getQueue=function(){return this.queue},t.prototype.setMaxRPS=function(r){this.setRateLimitOptions({maxRequests:r,perMilliseconds:1e3})},t.prototype.setRateLimitOptions=function(r){r.maxRPS?this.setMaxRPS(r.maxRPS):(this.perMilliseconds=r.perMilliseconds,this.maxRequests=r.maxRequests)},t.prototype.enable=function(r){function i(s){return Promise.reject(s)}this.interceptors.request=r.interceptors.request.use(this.handleRequest,i),this.interceptors.response=r.interceptors.response.use(this.handleResponse,i)};function e(r){r.cancelToken&&r.cancelToken.throwIfRequested()}t.prototype.handleRequest=function(r){return new Promise(function(i,s){this.push({resolve:function(){try{e(r)}catch(o){return s(o),!1}return i(r),!0}})}.bind(this))},t.prototype.handleResponse=function(r){return this.shift(),r},t.prototype.push=function(r){this.queue.push(r),this.shiftInitial()},t.prototype.shiftInitial=function(){setTimeout(function(){return this.shift()}.bind(this),0)},t.prototype.shift=function(){if(this.queue.length){if(this.timeslotRequests===this.maxRequests){this.timeoutId&&typeof this.timeoutId.ref=="function"&&this.timeoutId.ref();return}var r=this.queue.shift(),i=r.resolve();if(this.timeslotRequests===0&&(this.timeoutId=setTimeout(function(){this.timeslotRequests=0,this.shift()}.bind(this),this.perMilliseconds),typeof this.timeoutId.unref=="function"&&this.queue.length===0&&this.timeoutId.unref()),!i){this.shift();return}this.timeslotRequests+=1}};function n(r,i){var s=new t(r);return s.setRateLimitOptions(i),r.getQueue=t.prototype.getQueue.bind(s),r.getMaxRPS=t.prototype.getMaxRPS.bind(s),r.setMaxRPS=t.prototype.setMaxRPS.bind(s),r.setRateLimitOptions=t.prototype.setRateLimitOptions.bind(s),r}return y_=n,y_}var mV=hV();const gV=uo(mV),yV=({instance:t,limit:e}={})=>gV(t||Ur,e||{maxRequests:5,perMilliseconds:100}),O1="-",vV=t=>{const e=xV(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(O1);return l[0]===""&&l.length!==1&&l.shift(),kP(l,e)||bV(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},kP=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?kP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(O1);return e.validators.find(({validator:o})=>o(s))?.classGroupId},jT=/^\[(.+)\]$/,bV=t=>{if(jT.test(t)){const e=jT.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},xV=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return _V(Object.entries(t.classGroups),n).forEach(([s,o])=>{dE(o,r,s,e)}),r},dE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:OT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(wV(i)){dE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{dE(o,OT(e,s),n,r)})})},OT=(t,e)=>{let n=t;return e.split(O1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},wV=t=>t.isThemeGetter,_V=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,SV=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},IP="!",EV=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const u=[];let f=0,p=0,h;for(let I=0;I<l.length;I++){let T=l[I];if(f===0){if(T===i&&(r||l.slice(I,I+s)===e)){u.push(l.slice(p,I)),p=I+s;continue}if(T==="/"){h=I;continue}}T==="["?f++:T==="]"&&f--}const b=u.length===0?l:l.substring(p),x=b.startsWith(IP),_=x?b.substring(1):b,E=h&&h>p?h-p:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:_,maybePostfixModifierPosition:E}};return n?l=>n({className:l,parseClassName:o}):o},NV=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},kV=t=>({cache:SV(t.cacheSize),parseClassName:EV(t),...vV(t)}),IV=/\s+/,CV=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(IV);let l="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:p,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:x}=n(f);let _=!!x,E=r(_?b.substring(0,x):b);if(!E){if(!_){l=f+(l.length>0?" "+l:l);continue}if(E=r(b),!E){l=f+(l.length>0?" "+l:l);continue}_=!1}const I=NV(p).join(":"),T=h?I+IP:I,j=T+E;if(s.includes(j))continue;s.push(j);const O=i(E,_);for(let A=0;A<O.length;++A){const D=O[A];s.push(T+D)}l=f+(l.length>0?" "+l:l)}return l};function TV(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CP(e))&&(r&&(r+=" "),r+=n);return r}const CP=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CP(t[r]))&&(n&&(n+=" "),n+=e);return n};function jV(t,...e){let n,r,i,s=o;function o(u){const f=e.reduce((p,h)=>h(p),t());return n=kV(f),r=n.cache.get,i=n.cache.set,s=l,l(u)}function l(u){const f=r(u);if(f)return f;const p=CV(u,n);return i(u,p),p}return function(){return s(TV.apply(null,arguments))}}const hr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},TP=/^\[(?:([a-z-]+):)?(.+)\]$/i,OV=/^\d+\/\d+$/,RV=new Set(["px","full","screen"]),qV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,FV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Na=t=>_d(t)||RV.has(t)||OV.test(t),yl=t=>cf(t,"length",VV),_d=t=>!!t&&!Number.isNaN(Number(t)),v_=t=>cf(t,"number",_d),hp=t=>!!t&&Number.isInteger(Number(t)),LV=t=>t.endsWith("%")&&_d(t.slice(0,-1)),_n=t=>TP.test(t),vl=t=>qV.test(t),MV=new Set(["length","size","percentage"]),$V=t=>cf(t,MV,jP),BV=t=>cf(t,"position",jP),zV=new Set(["image","url"]),WV=t=>cf(t,zV,KV),UV=t=>cf(t,"",HV),mp=()=>!0,cf=(t,e,n)=>{const r=TP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},VV=t=>AV.test(t)&&!PV.test(t),jP=()=>!1,HV=t=>FV.test(t),KV=t=>DV.test(t),QV=()=>{const t=hr("colors"),e=hr("spacing"),n=hr("blur"),r=hr("brightness"),i=hr("borderColor"),s=hr("borderRadius"),o=hr("borderSpacing"),l=hr("borderWidth"),u=hr("contrast"),f=hr("grayscale"),p=hr("hueRotate"),h=hr("invert"),b=hr("gap"),x=hr("gradientColorStops"),_=hr("gradientColorStopPositions"),E=hr("inset"),I=hr("margin"),T=hr("opacity"),j=hr("padding"),O=hr("saturate"),A=hr("scale"),D=hr("sepia"),M=hr("skew"),W=hr("space"),P=hr("translate"),R=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",_n,e],U=()=>[_n,e],V=()=>["",Na,yl],z=()=>["auto",_d,_n],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",_n],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[_d,_n];return{cacheSize:500,separator:":",theme:{colors:[mp],spacing:[Na,yl],blur:["none","",vl,_n],brightness:ee(),borderColor:[t],borderRadius:["none","","full",vl,_n],borderSpacing:U(),borderWidth:V(),contrast:ee(),grayscale:ne(),hueRotate:ee(),invert:ne(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[LV,yl],inset:F(),margin:F(),opacity:ee(),padding:U(),saturate:ee(),scale:ee(),sepia:ne(),skew:ee(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",_n]}],container:["container"],columns:[{columns:[vl]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),_n]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",hp,_n]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_n]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",hp,_n]}],"grid-cols":[{"grid-cols":[mp]}],"col-start-end":[{col:["auto",{span:["full",hp,_n]},_n]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[mp]}],"row-start-end":[{row:["auto",{span:[hp,_n]},_n]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_n]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_n]}],gap:[{gap:[b]}],"gap-x":[{"gap-x":[b]}],"gap-y":[{"gap-y":[b]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[I]}],mx:[{mx:[I]}],my:[{my:[I]}],ms:[{ms:[I]}],me:[{me:[I]}],mt:[{mt:[I]}],mr:[{mr:[I]}],mb:[{mb:[I]}],ml:[{ml:[I]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_n,e]}],"min-w":[{"min-w":[_n,e,"min","max","fit"]}],"max-w":[{"max-w":[_n,e,"none","full","min","max","fit","prose",{screen:[vl]},vl]}],h:[{h:[_n,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_n,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_n,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vl,yl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",v_]}],"font-family":[{font:[mp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_n]}],"line-clamp":[{"line-clamp":["none",_d,v_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Na,_n]}],"list-image":[{"list-image":["none",_n]}],"list-style-type":[{list:["none","disc","decimal",_n]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Na,yl]}],"underline-offset":[{"underline-offset":["auto",Na,_n]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_n]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_n]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),BV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$V]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},WV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Y()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Na,_n]}],"outline-w":[{outline:[Na,yl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Na,yl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",vl,UV]}],"shadow-color":[{shadow:[mp]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",vl,_n]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[h]}],saturate:[{saturate:[O]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[O]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_n]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",_n]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",_n]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[hp,_n]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_n]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_n]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_n]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Na,yl,v_]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OP=jV(QV),fE=new Proxy(()=>fE,{get:()=>fE});function vn({use:t,slot:e,variant:n,match:r=[],defaults:i}){return({css:s,...o}={})=>({slots:new Proxy({},{get:(l,u)=>({css:f,...p}={})=>{const h=[],b=t,x={...b?.()?.config.defaults,...i,...o,...p};h.push(b?.(x)?.slots[u]?.(x)),h.push(Array.isArray(e[u])?e[u]:[e[u]]);for(const[_,E]of Object.entries(x)){const I=n[_]?.[E];I&&h.push(I)}for(const _ of r)Object.entries(_.if).every(([E,I])=>I===x[E])&&h.push(_.then?.[u]);return h.push(s?.[u]),h.push(f),OP(h)}}),config:{defaults:{...t?.()?.config.defaults,...i},values:{...t?.()?.config.defaults,...i,...o}},type:fE()})}const Cn=OP;var b_,RT;function RP(){return RT||(RT=1,b_=Object),b_}var x_,qT;function GV(){return qT||(qT=1,x_=Error),x_}var w_,AT;function JV(){return AT||(AT=1,w_=EvalError),w_}var __,PT;function ZV(){return PT||(PT=1,__=RangeError),__}var S_,FT;function YV(){return FT||(FT=1,S_=ReferenceError),S_}var E_,DT;function XV(){return DT||(DT=1,E_=SyntaxError),E_}var N_,LT;function qP(){return LT||(LT=1,N_=TypeError),N_}var k_,MT;function e5(){return MT||(MT=1,k_=URIError),k_}var I_,$T;function t5(){return $T||($T=1,I_=Math.abs),I_}var C_,BT;function n5(){return BT||(BT=1,C_=Math.floor),C_}var T_,zT;function r5(){return zT||(zT=1,T_=Math.max),T_}var j_,WT;function i5(){return WT||(WT=1,j_=Math.min),j_}var O_,UT;function s5(){return UT||(UT=1,O_=Math.pow),O_}var R_,VT;function o5(){return VT||(VT=1,R_=Math.round),R_}var q_,HT;function a5(){return HT||(HT=1,q_=Number.isNaN||function(e){return e!==e}),q_}var A_,KT;function l5(){if(KT)return A_;KT=1;var t=a5();return A_=function(n){return t(n)||n===0?n:n<0?-1:1},A_}var P_,QT;function c5(){return QT||(QT=1,P_=Object.getOwnPropertyDescriptor),P_}var F_,GT;function AP(){if(GT)return F_;GT=1;var t=c5();if(t)try{t([],"length")}catch{t=null}return F_=t,F_}var D_,JT;function u5(){if(JT)return D_;JT=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return D_=t,D_}var L_,ZT;function PP(){return ZT||(ZT=1,L_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==i||l.enumerable!==!0)return!1}return!0}),L_}var M_,YT;function d5(){if(YT)return M_;YT=1;var t=typeof Symbol<"u"&&Symbol,e=PP();return M_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},M_}var $_,XT;function FP(){return XT||(XT=1,$_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),$_}var B_,ej;function DP(){if(ej)return B_;ej=1;var t=RP();return B_=t.getPrototypeOf||null,B_}var z_,tj;function f5(){if(tj)return z_;tj=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,r="[object Function]",i=function(u,f){for(var p=[],h=0;h<u.length;h+=1)p[h]=u[h];for(var b=0;b<f.length;b+=1)p[b+u.length]=f[b];return p},s=function(u,f){for(var p=[],h=f,b=0;h<u.length;h+=1,b+=1)p[b]=u[h];return p},o=function(l,u){for(var f="",p=0;p<l.length;p+=1)f+=l[p],p+1<l.length&&(f+=u);return f};return z_=function(u){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(t+f);for(var p=s(arguments,1),h,b=function(){if(this instanceof h){var T=f.apply(this,i(p,arguments));return Object(T)===T?T:this}return f.apply(u,i(p,arguments))},x=n(0,f.length-p.length),_=[],E=0;E<x;E++)_[E]="$"+E;if(h=Function("binder","return function ("+o(_,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var I=function(){};I.prototype=f.prototype,h.prototype=new I,I.prototype=null}return h},z_}var W_,nj;function Ib(){if(nj)return W_;nj=1;var t=f5();return W_=Function.prototype.bind||t,W_}var U_,rj;function R1(){return rj||(rj=1,U_=Function.prototype.call),U_}var V_,ij;function LP(){return ij||(ij=1,V_=Function.prototype.apply),V_}var H_,sj;function p5(){return sj||(sj=1,H_=typeof Reflect<"u"&&Reflect&&Reflect.apply),H_}var K_,oj;function h5(){if(oj)return K_;oj=1;var t=Ib(),e=LP(),n=R1(),r=p5();return K_=r||t.call(n,e),K_}var Q_,aj;function MP(){if(aj)return Q_;aj=1;var t=Ib(),e=qP(),n=R1(),r=h5();return Q_=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(t,n,s)},Q_}var G_,lj;function m5(){if(lj)return G_;lj=1;var t=MP(),e=AP(),n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return G_=r&&typeof r.get=="function"?t([r.get]):typeof s=="function"?function(l){return s(l==null?l:i(l))}:!1,G_}var J_,cj;function g5(){if(cj)return J_;cj=1;var t=FP(),e=DP(),n=m5();return J_=t?function(i){return t(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:n?function(i){return n(i)}:null,J_}var Z_,uj;function y5(){if(uj)return Z_;uj=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=Ib();return Z_=n.call(t,e),Z_}var Y_,dj;function v5(){if(dj)return Y_;dj=1;var t,e=RP(),n=GV(),r=JV(),i=ZV(),s=YV(),o=XV(),l=qP(),u=e5(),f=t5(),p=n5(),h=r5(),b=i5(),x=s5(),_=o5(),E=l5(),I=Function,T=function(De){try{return I('"use strict"; return ('+De+").constructor;")()}catch{}},j=AP(),O=u5(),A=function(){throw new l},D=j?function(){try{return arguments.callee,A}catch{try{return j(arguments,"callee").get}catch{return A}}}():A,M=d5()(),W=g5(),P=DP(),R=FP(),$=LP(),F=R1(),U={},V=typeof Uint8Array>"u"||!W?t:W(Uint8Array),z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":M&&W?W([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":U,"%AsyncGenerator%":U,"%AsyncGeneratorFunction%":U,"%AsyncIteratorPrototype%":U,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":U,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":M&&W?W(W([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!M||!W?t:W(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":j,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!M||!W?t:W(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":M&&W?W(""[Symbol.iterator]()):t,"%Symbol%":M?Symbol:t,"%SyntaxError%":o,"%ThrowTypeError%":D,"%TypedArray%":V,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":F,"%Function.prototype.apply%":$,"%Object.defineProperty%":O,"%Object.getPrototypeOf%":P,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":h,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":_,"%Math.sign%":E,"%Reflect.getPrototypeOf%":R};if(W)try{null.error}catch(De){var te=W(W(De));z["%Error.prototype%"]=te}var Y=function De(Je){var Xe;if(Je==="%AsyncFunction%")Xe=T("async function () {}");else if(Je==="%GeneratorFunction%")Xe=T("function* () {}");else if(Je==="%AsyncGeneratorFunction%")Xe=T("async function* () {}");else if(Je==="%AsyncGenerator%"){var Ue=De("%AsyncGeneratorFunction%");Ue&&(Xe=Ue.prototype)}else if(Je==="%AsyncIteratorPrototype%"){var ct=De("%AsyncGenerator%");ct&&W&&(Xe=W(ct.prototype))}return z[Je]=Xe,Xe},le={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},se=Ib(),ne=y5(),oe=se.call(F,Array.prototype.concat),ee=se.call($,Array.prototype.splice),ue=se.call(F,String.prototype.replace),de=se.call(F,String.prototype.slice),ye=se.call(F,RegExp.prototype.exec),we=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ne=/\\(\\)?/g,ze=function(Je){var Xe=de(Je,0,1),Ue=de(Je,-1);if(Xe==="%"&&Ue!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Ue==="%"&&Xe!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ct=[];return ue(Je,we,function(_t,jt,Vt,nn){ct[ct.length]=Vt?ue(nn,Ne,"$1"):jt||_t}),ct},Oe=function(Je,Xe){var Ue=Je,ct;if(ne(le,Ue)&&(ct=le[Ue],Ue="%"+ct[0]+"%"),ne(z,Ue)){var _t=z[Ue];if(_t===U&&(_t=Y(Ue)),typeof _t>"u"&&!Xe)throw new l("intrinsic "+Je+" exists, but is not available. Please file an issue!");return{alias:ct,name:Ue,value:_t}}throw new o("intrinsic "+Je+" does not exist!")};return Y_=function(Je,Xe){if(typeof Je!="string"||Je.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Xe!="boolean")throw new l('"allowMissing" argument must be a boolean');if(ye(/^%?[^%]*%?$/,Je)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ue=ze(Je),ct=Ue.length>0?Ue[0]:"",_t=Oe("%"+ct+"%",Xe),jt=_t.name,Vt=_t.value,nn=!1,xe=_t.alias;xe&&(ct=xe[0],ee(Ue,oe([0,1],xe)));for(var ve=1,ke=!0;ve<Ue.length;ve+=1){var Ae=Ue[ve],Ve=de(Ae,0,1),rt=de(Ae,-1);if((Ve==='"'||Ve==="'"||Ve==="`"||rt==='"'||rt==="'"||rt==="`")&&Ve!==rt)throw new o("property names with quotes must have matching quotes");if((Ae==="constructor"||!ke)&&(nn=!0),ct+="."+Ae,jt="%"+ct+"%",ne(z,jt))Vt=z[jt];else if(Vt!=null){if(!(Ae in Vt)){if(!Xe)throw new l("base intrinsic for "+Je+" exists, but the property is not available.");return}if(j&&ve+1>=Ue.length){var Me=j(Vt,Ae);ke=!!Me,ke&&"get"in Me&&!("originalValue"in Me.get)?Vt=Me.get:Vt=Vt[Ae]}else ke=ne(Vt,Ae),Vt=Vt[Ae];ke&&!nn&&(z[jt]=Vt)}}return Vt},Y_}var X_,fj;function b5(){if(fj)return X_;fj=1;var t=v5(),e=MP(),n=e([t("%String.prototype.indexOf%")]);return X_=function(i,s){var o=t(i,!!s);return typeof o=="function"&&n(i,".prototype.")>-1?e([o]):o},X_}var e0,pj;function x5(){if(pj)return e0;pj=1;var t=PP();return e0=function(){return t()&&!!Symbol.toStringTag},e0}var t0,hj;function w5(){if(hj)return t0;hj=1;var t=b5(),e=t("String.prototype.valueOf"),n=function(l){try{return e(l),!0}catch{return!1}},r=t("Object.prototype.toString"),i="[object String]",s=x5()();return t0=function(l){return typeof l=="string"?!0:!l||typeof l!="object"?!1:s?n(l):r(l)===i},t0}var _5=w5();const S5=uo(_5),Cb=t=>S5(t),E5=(t,e,n={})=>{const r=[];return t.filter((s,o)=>{const l=n.regionLowerCase?s.toLowerCase():s;if(e.includes(l))return r.push({index:o,appLocale:l}),!0;const{isAvailable:u,appLocale:f}=N5(l,e,n);return u&&r.push({index:o,appLocale:n.regionLowerCase?f.toLowerCase():f}),u}).map((s,o)=>!r||r.length===0?s:r[o]?.appLocale)},N5=(t,e,n={})=>{n?.languageOnly||(n.languageOnly=!1);let r=t;return{isAvailable:e.some(s=>{if(!Ey()&&!n.languageOnly&&t.split("-")[1]===void 0)return!1;const o=Ey()?new Intl.Locale(t).minimize().language:t.split("-")[0],l=Ey()?new Intl.Locale(s).minimize().language:s.split("-")[0],u=o===l;return u&&(r=s),u}),appLocale:r}},k5=(t={})=>{t?.regionLowerCase||(t.regionLowerCase=!1);let e=[];return Intl&&"DateTimeFormat"in Intl?e=[Intl.DateTimeFormat().resolvedOptions().locale]:typeof window=="object"&&window?.navigator?.languages&&(e=[...window.navigator.languages]),e.map(n=>t.regionLowerCase?n.toLowerCase():n)},Ey=()=>Intl&&"Locale"in Intl,I5=(t,e={})=>{e?.regionLowerCase||(e.regionLowerCase=!1),e?.languageOnly||(e.languageOnly=!1);const n=t.map(r=>{const i=r.split("-");if(e.languageOnly)return i[0];const s=Ey()?new Intl.Locale(r).maximize():{language:i[0],script:i.length===3?i[1]:void 0,region:i.length===3?i[2]:i[1]},{language:o,script:l}=s;let{region:u}=s;return e.regionLowerCase&&u&&(u=u.toLowerCase()),i.length>2?`${o}-${l}-${u}`:u?`${o}-${u}`:o});return[...new Set(n)]},C5=(t,e,n={})=>{n.regionLowerCase||(n.regionLowerCase=!1),n.languageOnly||(n.languageOnly=!1);const r=k5(n),i=I5([...r,t],n);return E5(i,e,n)[0]||t},T5=({available:t,fallback:e})=>C5(e,t,{languageOnly:!0});var n0={exports:{}};const j5={},O5=Object.freeze(Object.defineProperty({__proto__:null,default:j5},Symbol.toStringTag,{value:"Module"})),mj=G$(O5);var gj;function R5(){return gj||(gj=1,function(t){(function(){var e="input is invalid type",n=typeof window=="object",r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&typeof self=="object",s=!r.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?r=Lc:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,l=!r.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),f=[-0x80000000,8388608,32768,128],p=[24,16,8,0],h=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],b=["hex","array","digest","arrayBuffer"],x=[];(r.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(M){return Object.prototype.toString.call(M)==="[object Array]"}),l&&(r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(M){return typeof M=="object"&&M.buffer&&M.buffer.constructor===ArrayBuffer});var _=function(M,W){return function(P){return new O(W,!0).update(P)[M]()}},E=function(M){var W=_("hex",M);s&&(W=I(W,M)),W.create=function(){return new O(M)},W.update=function($){return W.create().update($)};for(var P=0;P<b.length;++P){var R=b[P];W[R]=_(R,M)}return W},I=function(M,W){var P=mj,R=mj.Buffer,$=W?"sha224":"sha256",F;R.from&&!r.JS_SHA256_NO_BUFFER_FROM?F=R.from:F=function(V){return new R(V)};var U=function(V){if(typeof V=="string")return P.createHash($).update(V,"utf8").digest("hex");if(V==null)throw new Error(e);return V.constructor===ArrayBuffer&&(V=new Uint8Array(V)),Array.isArray(V)||ArrayBuffer.isView(V)||V.constructor===R?P.createHash($).update(F(V)).digest("hex"):M(V)};return U},T=function(M,W){return function(P,R){return new A(P,W,!0).update(R)[M]()}},j=function(M){var W=T("hex",M);W.create=function($){return new A($,M)},W.update=function($,F){return W.create($).update(F)};for(var P=0;P<b.length;++P){var R=b[P];W[R]=T(R,M)}return W};function O(M,W){W?(x[0]=x[16]=x[1]=x[2]=x[3]=x[4]=x[5]=x[6]=x[7]=x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=0,this.blocks=x):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M?(this.h0=0xc1059ed8,this.h1=0x367cd507,this.h2=0x3070dd17,this.h3=0xf70e5939,this.h4=0xffc00b31,this.h5=0x68581511,this.h6=0x64f98fa7,this.h7=0xbefa4fa4):(this.h0=0x6a09e667,this.h1=0xbb67ae85,this.h2=0x3c6ef372,this.h3=0xa54ff53a,this.h4=0x510e527f,this.h5=0x9b05688c,this.h6=0x1f83d9ab,this.h7=0x5be0cd19),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=M}O.prototype.update=function(M){if(!this.finalized){var W,P=typeof M;if(P!=="string"){if(P==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);W=!0}for(var R,$=0,F,U=M.length,V=this.blocks;$<U;){if(this.hashed&&(this.hashed=!1,V[0]=this.block,this.block=V[16]=V[1]=V[2]=V[3]=V[4]=V[5]=V[6]=V[7]=V[8]=V[9]=V[10]=V[11]=V[12]=V[13]=V[14]=V[15]=0),W)for(F=this.start;$<U&&F<64;++$)V[F>>>2]|=M[$]<<p[F++&3];else for(F=this.start;$<U&&F<64;++$)R=M.charCodeAt($),R<128?V[F>>>2]|=R<<p[F++&3]:R<2048?(V[F>>>2]|=(192|R>>>6)<<p[F++&3],V[F>>>2]|=(128|R&63)<<p[F++&3]):R<55296||R>=57344?(V[F>>>2]|=(224|R>>>12)<<p[F++&3],V[F>>>2]|=(128|R>>>6&63)<<p[F++&3],V[F>>>2]|=(128|R&63)<<p[F++&3]):(R=65536+((R&1023)<<10|M.charCodeAt(++$)&1023),V[F>>>2]|=(240|R>>>18)<<p[F++&3],V[F>>>2]|=(128|R>>>12&63)<<p[F++&3],V[F>>>2]|=(128|R>>>6&63)<<p[F++&3],V[F>>>2]|=(128|R&63)<<p[F++&3]);this.lastByteIndex=F,this.bytes+=F-this.start,F>=64?(this.block=V[16],this.start=F-64,this.hash(),this.hashed=!0):this.start=F}return this.bytes>0xffffffff&&(this.hBytes+=this.bytes/0x100000000<<0,this.bytes=this.bytes%0x100000000),this}},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var M=this.blocks,W=this.lastByteIndex;M[16]=this.block,M[W>>>2]|=f[W&3],this.block=M[16],W>=56&&(this.hashed||this.hash(),M[0]=this.block,M[16]=M[1]=M[2]=M[3]=M[4]=M[5]=M[6]=M[7]=M[8]=M[9]=M[10]=M[11]=M[12]=M[13]=M[14]=M[15]=0),M[14]=this.hBytes<<3|this.bytes>>>29,M[15]=this.bytes<<3,this.hash()}},O.prototype.hash=function(){var M=this.h0,W=this.h1,P=this.h2,R=this.h3,$=this.h4,F=this.h5,U=this.h6,V=this.h7,z=this.blocks,te,Y,le,se,ne,oe,ee,ue,de,ye,we;for(te=16;te<64;++te)ne=z[te-15],Y=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=z[te-2],le=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,z[te]=z[te-16]+Y+z[te-7]+le<<0;for(we=W&P,te=0;te<64;te+=4)this.first?(this.is224?(ue=300032,ne=z[0]-0x543c9a5b,V=ne-0x8f1a6c7<<0,R=ne+0x170e9b5<<0):(ue=0x2a01a605,ne=z[0]-0xc881298,V=ne-0x5ab00ac6<<0,R=ne+0x8909ae5<<0),this.first=!1):(Y=(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10),le=($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7),ue=M&W,se=ue^M&P^we,ee=$&F^~$&U,ne=V+le+ee+h[te]+z[te],oe=Y+se,V=R+ne<<0,R=ne+oe<<0),Y=(R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10),le=(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7),de=R&M,se=de^R&W^ue,ee=V&$^~V&F,ne=U+le+ee+h[te+1]+z[te+1],oe=Y+se,U=P+ne<<0,P=ne+oe<<0,Y=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),le=(U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7),ye=P&R,se=ye^P&M^de,ee=U&V^~U&$,ne=F+le+ee+h[te+2]+z[te+2],oe=Y+se,F=W+ne<<0,W=ne+oe<<0,Y=(W>>>2|W<<30)^(W>>>13|W<<19)^(W>>>22|W<<10),le=(F>>>6|F<<26)^(F>>>11|F<<21)^(F>>>25|F<<7),we=W&P,se=we^W&R^ye,ee=F&U^~F&V,ne=$+le+ee+h[te+3]+z[te+3],oe=Y+se,$=M+ne<<0,M=ne+oe<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+M<<0,this.h1=this.h1+W<<0,this.h2=this.h2+P<<0,this.h3=this.h3+R<<0,this.h4=this.h4+$<<0,this.h5=this.h5+F<<0,this.h6=this.h6+U<<0,this.h7=this.h7+V<<0},O.prototype.hex=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,R=this.h3,$=this.h4,F=this.h5,U=this.h6,V=this.h7,z=u[M>>>28&15]+u[M>>>24&15]+u[M>>>20&15]+u[M>>>16&15]+u[M>>>12&15]+u[M>>>8&15]+u[M>>>4&15]+u[M&15]+u[W>>>28&15]+u[W>>>24&15]+u[W>>>20&15]+u[W>>>16&15]+u[W>>>12&15]+u[W>>>8&15]+u[W>>>4&15]+u[W&15]+u[P>>>28&15]+u[P>>>24&15]+u[P>>>20&15]+u[P>>>16&15]+u[P>>>12&15]+u[P>>>8&15]+u[P>>>4&15]+u[P&15]+u[R>>>28&15]+u[R>>>24&15]+u[R>>>20&15]+u[R>>>16&15]+u[R>>>12&15]+u[R>>>8&15]+u[R>>>4&15]+u[R&15]+u[$>>>28&15]+u[$>>>24&15]+u[$>>>20&15]+u[$>>>16&15]+u[$>>>12&15]+u[$>>>8&15]+u[$>>>4&15]+u[$&15]+u[F>>>28&15]+u[F>>>24&15]+u[F>>>20&15]+u[F>>>16&15]+u[F>>>12&15]+u[F>>>8&15]+u[F>>>4&15]+u[F&15]+u[U>>>28&15]+u[U>>>24&15]+u[U>>>20&15]+u[U>>>16&15]+u[U>>>12&15]+u[U>>>8&15]+u[U>>>4&15]+u[U&15];return this.is224||(z+=u[V>>>28&15]+u[V>>>24&15]+u[V>>>20&15]+u[V>>>16&15]+u[V>>>12&15]+u[V>>>8&15]+u[V>>>4&15]+u[V&15]),z},O.prototype.toString=O.prototype.hex,O.prototype.digest=function(){this.finalize();var M=this.h0,W=this.h1,P=this.h2,R=this.h3,$=this.h4,F=this.h5,U=this.h6,V=this.h7,z=[M>>>24&255,M>>>16&255,M>>>8&255,M&255,W>>>24&255,W>>>16&255,W>>>8&255,W&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255,$>>>24&255,$>>>16&255,$>>>8&255,$&255,F>>>24&255,F>>>16&255,F>>>8&255,F&255,U>>>24&255,U>>>16&255,U>>>8&255,U&255];return this.is224||z.push(V>>>24&255,V>>>16&255,V>>>8&255,V&255),z},O.prototype.array=O.prototype.digest,O.prototype.arrayBuffer=function(){this.finalize();var M=new ArrayBuffer(this.is224?28:32),W=new DataView(M);return W.setUint32(0,this.h0),W.setUint32(4,this.h1),W.setUint32(8,this.h2),W.setUint32(12,this.h3),W.setUint32(16,this.h4),W.setUint32(20,this.h5),W.setUint32(24,this.h6),this.is224||W.setUint32(28,this.h7),M};function A(M,W,P){var R,$=typeof M;if($==="string"){var F=[],U=M.length,V=0,z;for(R=0;R<U;++R)z=M.charCodeAt(R),z<128?F[V++]=z:z<2048?(F[V++]=192|z>>>6,F[V++]=128|z&63):z<55296||z>=57344?(F[V++]=224|z>>>12,F[V++]=128|z>>>6&63,F[V++]=128|z&63):(z=65536+((z&1023)<<10|M.charCodeAt(++R)&1023),F[V++]=240|z>>>18,F[V++]=128|z>>>12&63,F[V++]=128|z>>>6&63,F[V++]=128|z&63);M=F}else if($==="object"){if(M===null)throw new Error(e);if(l&&M.constructor===ArrayBuffer)M=new Uint8Array(M);else if(!Array.isArray(M)&&(!l||!ArrayBuffer.isView(M)))throw new Error(e)}else throw new Error(e);M.length>64&&(M=new O(W,!0).update(M).array());var te=[],Y=[];for(R=0;R<64;++R){var le=M[R]||0;te[R]=92^le,Y[R]=54^le}O.call(this,W,P),this.update(Y),this.oKeyPad=te,this.inner=!0,this.sharedMemory=P}A.prototype=new O,A.prototype.finalize=function(){if(O.prototype.finalize.call(this),this.inner){this.inner=!1;var M=this.array();O.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(M),O.prototype.finalize.call(this)}};var D=E();D.sha256=D,D.sha224=E(!0),D.sha256.hmac=j(),D.sha224.hmac=j(!0),o?t.exports=D:(r.sha256=D.sha256,r.sha224=D.sha224)})()}(n0)),n0.exports}var pE=R5();const q5=pE.sha224,$P=({index:t,key:e,fallback:n})=>t[q5(e)]?.value??t[e]?.value??n??e,A5=({index:t,key:e,fallback:n})=>$P({index:t,key:e,fallback:n}),P5=({index:t,key:e,fallback:n})=>$P({index:t,key:e,fallback:n}),so={index:{},push(t){this.index={...this.index,...t}},text:(t,e)=>A5({index:so.index,key:t,fallback:e}),rich:(t,e)=>P5({index:so.index,key:t,fallback:e})};function Dl(t){return typeof t>"u"||t===void 0}function Fs(t){return typeof t=="string"}function Tb(t){return typeof t=="number"}function gv(t){return typeof t=="boolean"}function q1(t){return t===null}function F5(t){return t instanceof Date}function A1(t){return typeof t=="bigint"}function Ls(t){return typeof t=="function"}function Jo(t){return typeof t=="object"&&t!==null}function G(t){return Object.freeze(t)}function $g(t){return Ba(t)?t:[t]}function Ba(t){return Array.isArray(t)}function Ll(t){return t}const Yn=G({is(t){return t.kind==="AlterTableNode"},create(t){return G({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return G({...t,...e})},cloneWithColumnAlteration(t,e){return G({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),br=G({is(t){return t.kind==="IdentifierNode"},create(t){return G({kind:"IdentifierNode",name:t})}}),ja=G({is(t){return t.kind==="CreateIndexNode"},create(t){return G({kind:"CreateIndexNode",name:br.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}}),BP=G({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return G({kind:"CreateSchemaNode",schema:br.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),D5=["preserve rows","delete rows","drop"],Ss=G({is(t){return t.kind==="CreateTableNode"},create(t){return G({kind:"CreateTableNode",table:t,columns:G([])})},cloneWithColumn(t,e){return G({...t,columns:G([...t.columns,e])})},cloneWithConstraint(t,e){return G({...t,constraints:t.constraints?G([...t.constraints,e]):G([e])})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWith(t,e){return G({...t,...e})}}),Ul=G({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return G({kind:"SchemableIdentifierNode",identifier:br.create(t)})},createWithSchema(t,e){return G({kind:"SchemableIdentifierNode",schema:br.create(t),identifier:br.create(e)})}}),Qp=G({is(t){return t.kind==="DropIndexNode"},create(t,e){return G({kind:"DropIndexNode",name:Ul.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),hE=G({is(t){return t.kind==="DropSchemaNode"},create(t,e){return G({kind:"DropSchemaNode",schema:br.create(t),...e})},cloneWith(t,e){return G({...t,...e})}}),mE=G({is(t){return t.kind==="DropTableNode"},create(t,e){return G({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return G({...t,...e})}}),ec=G({is(t){return t.kind==="AliasNode"},create(t,e){return G({kind:"AliasNode",node:t,alias:e})}}),Ml=G({is(t){return t.kind==="TableNode"},create(t){return G({kind:"TableNode",table:Ul.create(t)})},createWithSchema(t,e){return G({kind:"TableNode",table:Ul.createWithSchema(t,e)})}});function vs(t){return Jo(t)&&Ls(t.toOperationNode)}function L5(t){return Jo(t)&&"expressionType"in t&&vs(t)}function M5(t){return Jo(t)&&"expression"in t&&Fs(t.alias)&&vs(t)}const ka=G({is(t){return t.kind==="SelectModifierNode"},create(t,e){return G({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return G({kind:"SelectModifierNode",rawModifier:t})}}),Vl=G({is(t){return t.kind==="AndNode"},create(t,e){return G({kind:"AndNode",left:t,right:e})}}),uf=G({is(t){return t.kind==="OrNode"},create(t,e){return G({kind:"OrNode",left:t,right:e})}}),r0=G({is(t){return t.kind==="OnNode"},create(t){return G({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return G({...t,on:e==="And"?Vl.create(t.on,n):uf.create(t.on,n)})}}),Gp=G({is(t){return t.kind==="JoinNode"},create(t,e){return G({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return G({kind:"JoinNode",joinType:t,table:e,on:r0.create(n)})},cloneWithOn(t,e){return G({...t,on:t.on?r0.cloneWithOperation(t.on,"And",e):r0.create(e)})}}),Dd=G({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return G({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),$5=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],B5=["+","-","*","/","%","^","&","|","#","<<",">>"],zP=["->","->>"],z5=[...$5,...B5,"&&","||"],W5=["exists","not exists"],U5=["not","-",...W5],V5=[...z5,...zP,...U5,"between","between symmetric"],Hl=G({is(t){return t.kind==="OperatorNode"},create(t){return G({kind:"OperatorNode",operator:t})}});function yj(t){return Fs(t)&&zP.includes(t)}const Vr=G({is(t){return t.kind==="ColumnNode"},create(t){return G({kind:"ColumnNode",column:br.create(t)})}}),P1=G({is(t){return t.kind==="SelectAllNode"},create(){return G({kind:"SelectAllNode"})}}),jb=G({is(t){return t.kind==="ReferenceNode"},create(t,e){return G({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return G({kind:"ReferenceNode",table:t,column:P1.create()})}});class H5{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return KP(this.#e)}}function WP(t){return Jo(t)&&vs(t)&&Fs(t.dynamicReference)}const gE=G({is(t){return t.kind==="OrderByItemNode"},create(t,e){return G({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Si=G({is(t){return t.kind==="RawNode"},create(t,e){return G({kind:"RawNode",sqlFragments:G(t),parameters:G(e)})},createWithSql(t){return Si.create([t],[])},createWithChild(t){return Si.create(["",""],[t])},createWithChildren(t){return Si.create(new Array(t.length+1).fill(""),t)}});function UP(t){return t==="asc"||t==="desc"}function im(t){if(t.length===2)return[i0(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>i0(n)):[i0(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function i0(t,e){const n=K5(t);if(gE.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return gE.create(n,VP(e))}function K5(t){if(cm(t))return du(t);if(WP(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!UP(n))throw new Error(`Invalid order by direction: ${n}`);return gE.create(za(e),VP(n))}return za(t)}function VP(t){if(t)return t==="asc"||t==="desc"?Si.createWithSql(t):t.toOperationNode()}const yv=G({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return G({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return G({...t,traversal:e})}}),HP=G({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return G({kind:"JSONOperatorChainNode",operator:t,values:G([])})},cloneWithValue(t,e){return G({...t,values:G([...t.values,e])})}}),Jp=G({is(t){return t.kind==="JSONPathNode"},create(t){return G({kind:"JSONPathNode",inOperator:t,pathLegs:G([])})},cloneWithLeg(t,e){return G({...t,pathLegs:G([...t.pathLegs,e])})}});function KP(t){return Fs(t)?za(t):t.toOperationNode()}function dh(t){return Ba(t)?t.map(e=>Ts(e)):[Ts(t)]}function Ts(t){return cm(t)?du(t):KP(t)}function Q5(t,e){const n=za(t);if(yj(e))return yv.create(n,HP.create(Hl.create(e)));const r=e.slice(0,-1);if(yj(r))return yv.create(n,Jp.create(Hl.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function za(t){const e=".";if(!t.includes(e))return jb.create(Vr.create(t));const n=t.split(e).map(F1);if(n.length===3)return J5(n);if(n.length===2)return Z5(n);throw new Error(`invalid column reference ${t}`)}function G5(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(F1);return ec.create(za(n),br.create(r))}else return za(t)}function QP(t){return Vr.create(t)}function vv(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(F1);if(!UP(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return im([n,r])[0]}else return QP(t)}function J5(t){const[e,n,r]=t;return jb.create(Vr.create(r),Ml.createWithSchema(e,n))}function Z5(t){const[e,n]=t;return jb.create(Vr.create(n),Ml.create(e))}function F1(t){return t.trim()}const GP=G({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return G({kind:"PrimitiveValueListNode",values:G([...t])})}}),D1=G({is(t){return t.kind==="ValueListNode"},create(t){return G({kind:"ValueListNode",values:G(t)})}}),ia=G({is(t){return t.kind==="ValueNode"},create(t){return G({kind:"ValueNode",value:t})},createImmediate(t){return G({kind:"ValueNode",value:t,immediate:!0})}});function Y5(t){return Ba(t)?X5(t):Jr(t)}function Jr(t){return cm(t)?du(t):ia.create(t)}function L1(t){return Tb(t)||gv(t)||q1(t)}function M1(t){if(!L1(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return ia.createImmediate(t)}function X5(t){return t.some(cm)?D1.create(t.map(e=>Jr(e))):GP.create(t)}const Ld=G({is(t){return t.kind==="ParensNode"},create(t){return G({kind:"ParensNode",node:t})}});function hi(t){if(t.length===3)return $1(t[0],t[1],t[2]);if(t.length===1)return Jr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function $1(t,e,n){return e8(e)&&JP(n)?Dd.create(Ts(t),yE(e),ia.createImmediate(n)):Dd.create(Ts(t),yE(e),Y5(n))}function sa(t,e,n){return Dd.create(Ts(t),yE(e),Ts(n))}function vj(t,e){return bv(Object.entries(t).filter(([,n])=>!Dl(n)).map(([n,r])=>$1(n,JP(r)?"is":"=",r)),e)}function bv(t,e,n=!0){const r=e==="and"?Vl.create:uf.create;if(t.length===0)return Dd.create(ia.createImmediate(1),Hl.create("="),ia.createImmediate(e==="and"?1:0));let i=bj(t[0]);for(let s=1;s<t.length;++s)i=r(i,bj(t[s]));return t.length>1&&n?Ld.create(i):i}function e8(t){return t==="is"||t==="is not"}function JP(t){return q1(t)||gv(t)}function yE(t){if(Fs(t)&&V5.includes(t))return Hl.create(t);if(vs(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function bj(t){return vs(t)?t.toOperationNode():t}const Kl=G({is(t){return t.kind==="OrderByNode"},create(t){return G({kind:"OrderByNode",items:G([...t])})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),xj=G({is(t){return t.kind==="PartitionByNode"},create(t){return G({kind:"PartitionByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),vE=G({is(t){return t.kind==="OverNode"},create(){return G({kind:"OverNode"})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Kl.cloneWithItems(t.orderBy,e):Kl.create(e)})},cloneWithPartitionByItems(t,e){return G({...t,partitionBy:t.partitionBy?xj.cloneWithItems(t.partitionBy,e):xj.create(e)})}}),xv=G({is(t){return t.kind==="FromNode"},create(t){return G({kind:"FromNode",froms:G(t)})},cloneWithFroms(t,e){return G({...t,froms:G([...t.froms,...e])})}}),wj=G({is(t){return t.kind==="GroupByNode"},create(t){return G({kind:"GroupByNode",items:G(t)})},cloneWithItems(t,e){return G({...t,items:G([...t.items,...e])})}}),_j=G({is(t){return t.kind==="HavingNode"},create(t){return G({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return G({...t,having:e==="And"?Vl.create(t.having,n):uf.create(t.having,n)})}}),Zn=G({is(t){return t.kind==="SelectQueryNode"},create(t){return G({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return G({kind:"SelectQueryNode",from:xv.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})},cloneWithDistinctOn(t,e){return G({...t,distinctOn:t.distinctOn?G([...t.distinctOn,...e]):G(e)})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):G([e])})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Kl.cloneWithItems(t.orderBy,e):Kl.create(e)})},cloneWithGroupByItems(t,e){return G({...t,groupBy:t.groupBy?wj.cloneWithItems(t.groupBy,e):wj.create(e)})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithOffset(t,e){return G({...t,offset:e})},cloneWithFetch(t,e){return G({...t,fetch:e})},cloneWithHaving(t,e){return G({...t,having:t.having?_j.cloneWithOperation(t.having,"And",e):_j.create(e)})},cloneWithSetOperations(t,e){return G({...t,setOperations:t.setOperations?G([...t.setOperations,...e]):G([...e])})},cloneWithoutSelections(t){return G({...t,selections:[]})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithoutOffset(t){return G({...t,offset:void 0})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return G({...t,groupBy:void 0})}});function Sn(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Sd{#e;constructor(e){this.#e=G(e)}on(...e){return new Sd({...this.#e,joinNode:Gp.cloneWithOn(this.#e.joinNode,hi(e))})}onRef(e,n,r){return new Sd({...this.#e,joinNode:Gp.cloneWithOn(this.#e.joinNode,sa(e,n,r))})}onTrue(){return new Sd({...this.#e,joinNode:Gp.cloneWithOn(this.#e.joinNode,Si.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}Sn(Sd,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const t8=G({is(t){return t.kind==="PartitionByItemNode"},create(t){return G({kind:"PartitionByItemNode",partitionBy:t})}});function n8(t){return dh(t).map(t8.create)}class fh{#e;constructor(e){this.#e=G(e)}orderBy(e,n){return new fh({overNode:vE.cloneWithOrderByItems(this.#e.overNode,im([e,n]))})}partitionBy(e){return new fh({overNode:vE.cloneWithPartitionByItems(this.#e.overNode,n8(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}Sn(fh,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Zp=G({is(t){return t.kind==="SelectionNode"},create(t){return G({kind:"SelectionNode",selection:t})},createSelectAll(){return G({kind:"SelectionNode",selection:P1.create()})},createSelectAllFromTable(t){return G({kind:"SelectionNode",selection:jb.createSelectAll(t)})}});function Po(t){return Ls(t)?Po(t(ff())):Ba(t)?t.map(e=>Sj(e)):[Sj(t)]}function Sj(t){return Fs(t)?Zp.create(G5(t)):WP(t)?Zp.create(t.toOperationNode()):Zp.create(cF(t))}function oa(t){return t?Array.isArray(t)?t.map(Ej):[Ej(t)]:[Zp.createSelectAll()]}function Ej(t){if(Fs(t))return Zp.createSelectAllFromTable(zr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const r8=G({is(t){return t.kind==="ValuesNode"},create(t){return G({kind:"ValuesNode",values:G(t)})}}),i8=G({is(t){return t.kind==="DefaultInsertValueNode"},create(){return G({kind:"DefaultInsertValueNode"})}});function ZP(t){const e=Ls(t)?t(ff()):t,n=Ba(e)?e:G([e]);return s8(n)}function s8(t){const e=o8(t);return[G([...e.keys()].map(Vr.create)),r8.create(t.map(n=>a8(n,e)))]}function o8(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function a8(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const l=e.get(o);if(Dl(l))continue;const u=t[o];(Dl(u)||cm(u))&&(i=!0),r[l]=u}if(n.length<e.size||i){const o=i8.create();return D1.create(r.map(l=>Dl(l)?o:Jr(l)))}return GP.create(r)}const ks=G({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return G({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},createWithoutInto(){return G({kind:"InsertQueryNode"})},cloneWith(t,e){return G({...t,...e})}}),Ed=G({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return G({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return G({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return G({...t,from:t.from?xv.cloneWithFroms(t.from,e):xv.create(e)})},cloneWithUpdates(t,e){return G({...t,updates:t.updates?G([...t.updates,...e]):e})},cloneWithLimit(t,e){return G({...t,limit:e})}}),Nj=G({is(t){return t.kind==="UsingNode"},create(t){return G({kind:"UsingNode",tables:G(t)})},cloneWithTables(t,e){return G({...t,tables:G([...t.tables,...e])})}}),Pc=G({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return G({kind:"DeleteQueryNode",from:xv.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return G({...t,orderBy:t.orderBy?Kl.cloneWithItems(t.orderBy,e):Kl.create(e)})},cloneWithoutOrderBy(t){return G({...t,orderBy:void 0})},cloneWithLimit(t,e){return G({...t,limit:e})},cloneWithoutLimit(t){return G({...t,limit:void 0})},cloneWithUsing(t,e){return G({...t,using:t.using!==void 0?Nj.cloneWithTables(t.using,e):Nj.create(e)})}}),ds=G({is(t){return t.kind==="WhereNode"},create(t){return G({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return G({...t,where:e==="And"?Vl.create(t.where,n):uf.create(t.where,n)})}}),kj=G({is(t){return t.kind==="ReturningNode"},create(t){return G({kind:"ReturningNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),l8=G({is(t){return t.kind==="ExplainNode"},create(t,e){return G({kind:"ExplainNode",format:t,options:e})}}),sm=G({is(t){return t.kind==="WhenNode"},create(t){return G({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return G({...t,result:e})}}),fs=G({is(t){return t.kind==="MergeQueryNode"},create(t,e){return G({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return G({...t,using:e})},cloneWithWhen(t,e){return G({...t,whens:t.whens?G([...t.whens,e]):G([e])})},cloneWithThen(t,e){return G({...t,whens:t.whens?G([...t.whens.slice(0,-1),sm.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}}),Ij=G({is(t){return t.kind==="OutputNode"},create(t){return G({kind:"OutputNode",selections:G(t)})},cloneWithSelections(t,e){return G({...t,selections:t.selections?G([...t.selections,...e]):G(e)})}}),Pt=G({is(t){return Zn.is(t)||ks.is(t)||Ed.is(t)||Pc.is(t)||fs.is(t)},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):G([e])})},cloneWithWhere(t,e){return G({...t,where:t.where?ds.cloneWithOperation(t.where,"And",e):ds.create(e)})},cloneWithJoin(t,e){return G({...t,joins:t.joins?G([...t.joins,e]):G([e])})},cloneWithReturning(t,e){return G({...t,returning:t.returning?kj.cloneWithSelections(t.returning,e):kj.create(e)})},cloneWithoutReturning(t){return G({...t,returning:void 0})},cloneWithoutWhere(t){return G({...t,where:void 0})},cloneWithExplain(t,e,n){return G({...t,explain:l8.create(e,n?.toOperationNode())})},cloneWithTop(t,e){return G({...t,top:e})},cloneWithOutput(t,e){return G({...t,output:t.output?Ij.cloneWithSelections(t.output,e):Ij.create(e)})}}),YP=G({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return G({kind:"ColumnUpdateNode",column:t,value:e})}});function c8(...t){return t.length===2?[YP.create(Ts(t[0]),Jr(t[1]))]:B1(t[0])}function B1(t){const e=Ls(t)?t(ff()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>YP.create(Vr.create(n),Jr(r)))}const u8=G({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return G({kind:"OnDuplicateKeyNode",updates:t})}});class d8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class om extends Error{node;constructor(e){super("no result"),this.node=e}}function am(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Es=G({is(t){return t.kind==="OnConflictNode"},create(){return G({kind:"OnConflictNode"})},cloneWith(t,e){return G({...t,...e})},cloneWithIndexWhere(t,e){return G({...t,indexWhere:t.indexWhere?ds.cloneWithOperation(t.indexWhere,"And",e):ds.create(e)})},cloneWithIndexOrWhere(t,e){return G({...t,indexWhere:t.indexWhere?ds.cloneWithOperation(t.indexWhere,"Or",e):ds.create(e)})},cloneWithUpdateWhere(t,e){return G({...t,updateWhere:t.updateWhere?ds.cloneWithOperation(t.updateWhere,"And",e):ds.create(e)})},cloneWithUpdateOrWhere(t,e){return G({...t,updateWhere:t.updateWhere?ds.cloneWithOperation(t.updateWhere,"Or",e):ds.create(e)})},cloneWithoutIndexWhere(t){return G({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return G({...t,updateWhere:void 0})}});class Go{#e;constructor(e){this.#e=G(e)}column(e){const n=Vr.create(e);return new Go({...this.#e,onConflictNode:Es.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,n]):G([n])})})}columns(e){const n=e.map(Vr.create);return new Go({...this.#e,onConflictNode:Es.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?G([...this.#e.onConflictNode.columns,...n]):G(n)})})}constraint(e){return new Go({...this.#e,onConflictNode:Es.cloneWith(this.#e.onConflictNode,{constraint:br.create(e)})})}expression(e){return new Go({...this.#e,onConflictNode:Es.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Go({...this.#e,onConflictNode:Es.cloneWithIndexWhere(this.#e.onConflictNode,hi(e))})}whereRef(e,n,r){return new Go({...this.#e,onConflictNode:Es.cloneWithIndexWhere(this.#e.onConflictNode,sa(e,n,r))})}clearWhere(){return new Go({...this.#e,onConflictNode:Es.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new XP({...this.#e,onConflictNode:Es.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Nd({...this.#e,onConflictNode:Es.cloneWith(this.#e.onConflictNode,{updates:B1(e)})})}$call(e){return e(this)}}Sn(Go,"don't await OnConflictBuilder instances.");class XP{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.onConflictNode}}Sn(XP,"don't await OnConflictDoNothingBuilder instances.");class Nd{#e;constructor(e){this.#e=G(e)}where(...e){return new Nd({...this.#e,onConflictNode:Es.cloneWithUpdateWhere(this.#e.onConflictNode,hi(e))})}whereRef(e,n,r){return new Nd({...this.#e,onConflictNode:Es.cloneWithUpdateWhere(this.#e.onConflictNode,sa(e,n,r))})}clearWhere(){return new Nd({...this.#e,onConflictNode:Es.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}Sn(Nd,"don't await OnConflictUpdateBuilder instances.");const f8=G({is(t){return t.kind==="TopNode"},create(t,e){return G({kind:"TopNode",expression:t,modifiers:e})}});function df(t,e){if(!Tb(t)&&!A1(t))throw new Error(`Invalid top expression: ${t}`);if(!Dl(e)&&!p8(e))throw new Error(`Invalid top modifiers: ${e}`);return f8.create(t,e)}function p8(t){return t==="percent"||t==="with ties"||t==="percent with ties"}class gr{#e;constructor(e){this.#e=G(e)}values(e){const[n,r]=ZP(e);return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{columns:G(e.map(Vr.create))})})}expression(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{values:du(e)})})}defaultValues(){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new gr({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,n){return new gr({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,df(e,n))})}onConflict(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{onConflict:e(new Go({onConflictNode:Es.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new gr({...this.#e,queryNode:ks.cloneWith(this.#e.queryNode,{onDuplicateKey:u8.create(B1(e))})})}returning(e){return new gr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(){return new gr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,oa())})}output(e){return new gr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new gr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,oa(e))})}clearReturning(){return new gr({...this.#e,queryNode:Pt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new gr({...this.#e})}$castTo(){return new gr(this.#e)}$narrowType(){return new gr(this.#e)}$assertType(){return new gr(this.#e)}withPlugin(e){return new gr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new d8(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new gr({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(gr,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class h8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const z1=G({is(t){return t.kind==="LimitNode"},create(t){return G({kind:"LimitNode",limit:t})}});class Jn{#e;constructor(e){this.#e=G(e)}where(...e){return new Jn({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,hi(e))})}whereRef(e,n,r){return new Jn({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,sa(e,n,r))})}clearWhere(){return new Jn({...this.#e,queryNode:Pt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new Jn({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,df(e,n))})}using(e){return new Jn({...this.#e,queryNode:Pc.cloneWithUsing(this.#e.queryNode,mh(e))})}innerJoin(...e){return new Jn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("InnerJoin",e))})}leftJoin(...e){return new Jn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("LeftJoin",e))})}rightJoin(...e){return new Jn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("RightJoin",e))})}fullJoin(...e){return new Jn({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("FullJoin",e))})}returning(e){return new Jn({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new Jn({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,oa(e))})}output(e){return new Jn({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Jn({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,oa(e))})}clearReturning(){return new Jn({...this.#e,queryNode:Pt.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new Jn({...this.#e,queryNode:Pc.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new Jn({...this.#e,queryNode:Pc.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,n){return new Jn({...this.#e,queryNode:Pc.cloneWithOrderByItems(this.#e.queryNode,im([e,n]))})}limit(e){return new Jn({...this.#e,queryNode:Pc.cloneWithLimit(this.#e.queryNode,z1.create(Jr(e)))})}modifyEnd(e){return new Jn({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Jn({...this.#e})}$castTo(){return new Jn(this.#e)}$narrowType(){return new Jn(this.#e)}$assertType(){return new Jn(this.#e)}withPlugin(e){return new Jn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new h8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Jn({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(Jn,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class m8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class nr{#e;constructor(e){this.#e=G(e)}where(...e){return new nr({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,hi(e))})}whereRef(e,n,r){return new nr({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,sa(e,n,r))})}clearWhere(){return new nr({...this.#e,queryNode:Pt.cloneWithoutWhere(this.#e.queryNode)})}top(e,n){return new nr({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,df(e,n))})}from(e){return new nr({...this.#e,queryNode:Ed.cloneWithFromItems(this.#e.queryNode,mh(e))})}innerJoin(...e){return new nr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("InnerJoin",e))})}leftJoin(...e){return new nr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("LeftJoin",e))})}rightJoin(...e){return new nr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("RightJoin",e))})}fullJoin(...e){return new nr({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("FullJoin",e))})}limit(e){return new nr({...this.#e,queryNode:Ed.cloneWithLimit(this.#e.queryNode,z1.create(Jr(e)))})}set(...e){return new nr({...this.#e,queryNode:Ed.cloneWithUpdates(this.#e.queryNode,c8(...e))})}returning(e){return new nr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,Po(e))})}returningAll(e){return new nr({...this.#e,queryNode:Pt.cloneWithReturning(this.#e.queryNode,oa(e))})}output(e){return new nr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new nr({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,oa(e))})}modifyEnd(e){return new nr({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new nr({...this.#e,queryNode:Pt.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new nr({...this.#e})}$castTo(){return new nr(this.#e)}$narrowType(){return new nr(this.#e)}$assertType(){return new nr(this.#e)}withPlugin(e){return new nr({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:r}=this.#e.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?n.rows:[new m8(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0),n.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new nr({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(nr,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Cj=G({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return G({kind:"CommonTableExpressionNameNode",table:Ml.create(t),columns:e?G(e.map(Vr.create)):void 0})}}),wv=G({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return G({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return G({...t,...e})}});class ph{#e;constructor(e){this.#e=G(e)}materialized(){return new ph({...this.#e,node:wv.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new ph({...this.#e,node:wv.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}Sn(ph,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Tj(t,e){const n=e(I8()).toOperationNode();return Ls(t)?t(g8(n)).toOperationNode():wv.create(eF(t),n)}function g8(t){return e=>new ph({node:wv.create(eF(e),t)})}function eF(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return Cj.create(n,r)}else return Cj.create(t)}const Bg=G({is(t){return t.kind==="WithNode"},create(t,e){return G({kind:"WithNode",expressions:G([t]),...e})},cloneWithExpression(t,e){return G({...t,expressions:G([...t.expressions,e])})}}),jj=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function y8(t){let e="";for(let n=0;n<t;++n)e+=v8();return e}function v8(){return jj[~~(Math.random()*jj.length)]}function Xn(){return new b8}class b8{#e;get queryId(){return this.#e===void 0&&(this.#e=y8(8)),this.#e}}class tF{nodeStack=[];#e=G({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),G(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&G(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:G([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const x8=G({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0});class w8 extends tF{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);const n=this.#s(e);for(const s of n)this.#n.add(s);const r=this.#i(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:br.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Ml.createWithSchema(this.#e,n.table.table.identifier.name)}}#r(e){return e.kind in x8}#i(e){const n=new Set;if("name"in e&&e.name&&Ul.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#o(r,n);if("into"in e&&e.into&&this.#o(e.into,n),"table"in e&&e.table&&this.#o(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#o(r.table,n);return"using"in e&&e.using&&this.#o(e.using,n),n}#s(e){const n=new Set;return"with"in e&&e.with&&this.#c(e.with,n),n}#o(e,n){const r=Ml.is(e)?e:ec.is(e)&&Ml.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#c(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class lm{#e;constructor(e){this.#e=new w8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}const _8=G({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return G({kind:"MatchedNode",not:t,bySource:e})}});function Oj(t,e,n){return sm.create(bv([_8.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&n?sa(e[0],e[1],e[2]):hi(e)]:[]],"and",!1))}function Yp(t){return Fs(t)?Si.create([t],[]):vs(t)?t.toOperationNode():t}class Rj{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const qj=new Set;function S8(t){qj.has(t)||(qj.add(t),console.log(t))}const E8=G([]);class nF{#e;constructor(e=E8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return N8(i,s),s})}async *stream(e,n,r){const i=new Rj,s=new Rj;this.provideConnection(async l=>(i.resolve(l),await s.promise)).catch(l=>i.reject(l));const o=await i.promise;try{for await(const l of o.streamQuery(e,n))yield await this.#t(l,r)}finally{s.resolve()}}async #t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function N8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||S8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class cd extends nF{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new cd([...this.plugins,e])}withPlugins(e){return new cd([...this.plugins,...e])}withPluginAtFront(e){return new cd([e,...this.plugins])}withoutPlugins(){return new cd([])}}const Ob=new cd;class k8{numChangedRows;constructor(e){this.numChangedRows=e}}class Wc{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new Wc({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new Wc({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,df(e,n))})}using(...e){return new js({...this.#e,queryNode:fs.cloneWithUsing(this.#e.queryNode,Di("Using",e))})}output(e){return new Wc({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new Wc({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,oa(e))})}}Sn(Wc,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class js{#e;constructor(e){this.#e=G(e)}modifyEnd(e){return new js({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,n){return new js({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,df(e,n))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,n,r){return this.#t([e,n,r],!0)}#t(e,n){return new bE({...this.#e,queryNode:fs.cloneWithWhen(this.#e.queryNode,Oj({isMatched:!0},e,n))})}whenNotMatched(){return this.#n([])}whenNotMatchedAnd(...e){return this.#n(e)}whenNotMatchedAndRef(e,n,r){return this.#n([e,n,r],!0)}whenNotMatchedBySource(){return this.#n([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#n(e,!1,!0)}whenNotMatchedBySourceAndRef(e,n,r){return this.#n([e,n,r],!0,!0)}output(e){return new js({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,Po(e))})}outputAll(e){return new js({...this.#e,queryNode:Pt.cloneWithOutput(this.#e.queryNode,oa(e))})}#n(e,n=!1,r=!1){const i={...this.#e,queryNode:fs.cloneWithWhen(this.#e.queryNode,Oj({isMatched:!1,bySource:r},e,n))},s=r?bE:rF;return new s(i)}$call(e){return e(this)}$if(e,n){return e?n(this):new js({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?n.rows:[new k8(n.numAffectedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}}Sn(js,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class bE{#e;constructor(e){this.#e=G(e)}thenDelete(){return new js({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp("delete"))})}thenDoNothing(){return new js({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp("do nothing"))})}thenUpdate(e){return new js({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp(e(new nr({queryId:this.#e.queryId,executor:Ob,queryNode:Ed.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(n=>n.set(...e))}}Sn(bE,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class rF{#e;constructor(e){this.#e=G(e)}thenDoNothing(){return new js({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp("do nothing"))})}thenInsertValues(e){const[n,r]=ZP(e);return new js({...this.#e,queryNode:fs.cloneWithThen(this.#e.queryNode,Yp(ks.cloneWith(ks.createWithoutInto(),{columns:n,values:r})))})}}Sn(rF,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class Tl{#e;constructor(e){this.#e=G(e)}selectFrom(e){return xE({queryId:Xn(),executor:this.#e.executor,queryNode:Zn.createFrom(mh(e),this.#e.withNode)})}selectNoFrom(e){return xE({queryId:Xn(),executor:this.#e.executor,queryNode:Zn.cloneWithSelections(Zn.create(this.#e.withNode),Po(e))})}insertInto(e){return new gr({queryId:Xn(),executor:this.#e.executor,queryNode:ks.create(zr(e),this.#e.withNode)})}replaceInto(e){return new gr({queryId:Xn(),executor:this.#e.executor,queryNode:ks.create(zr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Jn({queryId:Xn(),executor:this.#e.executor,queryNode:Pc.create(mh(e),this.#e.withNode)})}updateTable(e){return new nr({queryId:Xn(),executor:this.#e.executor,queryNode:Ed.create(gh(e),this.#e.withNode)})}mergeInto(e){return new Wc({queryId:Xn(),executor:this.#e.executor,queryNode:fs.create(uF(e),this.#e.withNode)})}with(e,n){const r=Tj(e,n);return new Tl({...this.#e,withNode:this.#e.withNode?Bg.cloneWithExpression(this.#e.withNode,r):Bg.create(r)})}withRecursive(e,n){const r=Tj(e,n);return new Tl({...this.#e,withNode:this.#e.withNode?Bg.cloneWithExpression(this.#e.withNode,r):Bg.create(r,{recursive:!0})})}withPlugin(e){return new Tl({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Tl({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Tl({...this.#e,executor:this.#e.executor.withPluginAtFront(new lm(e))})}}function I8(){return new Tl({executor:Ob})}function C8(t,e){return new Sd({joinNode:Gp.create(t,gh(e))})}function T8(){return new fh({overNode:vE.create()})}function Di(t,e){if(e.length===3)return O8(t,e[0],e[1],e[2]);if(e.length===2)return j8(t,e[0],e[1]);throw new Error("not implemented")}function j8(t,e,n){return n(C8(t,e)).toOperationNode()}function O8(t,e,n,r){return Gp.createWithOn(t,gh(e),sa(n,"=",r))}const R8=G({is(t){return t.kind==="OffsetNode"},create(t){return G({kind:"OffsetNode",offset:t})}}),q8=G({is(t){return t.kind==="GroupByItemNode"},create(t){return G({kind:"GroupByItemNode",groupBy:t})}});function A8(t){return t=Ls(t)?t(ff()):t,dh(t).map(q8.create)}const iF=G({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return G({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Gu(t,e,n){return Ls(e)&&(e=e(U1())),Ba(e)||(e=[e]),e.map(r=>iF.create(t,du(r),n))}class rr{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new W1(this,e)}or(...e){return new _v(uf.create(this.#e,hi(e)))}and(...e){return new Sv(Vl.create(this.#e,hi(e)))}$castTo(){return new rr(this.#e)}$notNull(){return new rr(this.#e)}toOperationNode(){return this.#e}}class W1{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ec.create(this.#e.toOperationNode(),vs(this.#t)?this.#t.toOperationNode():br.create(this.#t))}}class _v{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new W1(this,e)}or(...e){return new _v(uf.create(this.#e,hi(e)))}$castTo(){return new _v(this.#e)}toOperationNode(){return Ld.create(this.#e)}}class Sv{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new W1(this,e)}and(...e){return new Sv(Vl.create(this.#e,hi(e)))}$castTo(){return new Sv(this.#e)}toOperationNode(){return Ld.create(this.#e)}}const P8={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:ia.create(t),modifier:e}}};function F8(t,e){if(!Tb(t)&&!A1(t))throw new Error(`Invalid fetch row count: ${t}`);if(!D8(e))throw new Error(`Invalid fetch modifier: ${e}`);return P8.create(t,e)}function D8(t){return t==="only"||t==="with ties"}class on{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new on({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,hi(e))})}whereRef(e,n,r){return new on({...this.#e,queryNode:Pt.cloneWithWhere(this.#e.queryNode,sa(e,n,r))})}having(...e){return new on({...this.#e,queryNode:Zn.cloneWithHaving(this.#e.queryNode,hi(e))})}havingRef(e,n,r){return new on({...this.#e,queryNode:Zn.cloneWithHaving(this.#e.queryNode,sa(e,n,r))})}select(e){return new on({...this.#e,queryNode:Zn.cloneWithSelections(this.#e.queryNode,Po(e))})}distinctOn(e){return new on({...this.#e,queryNode:Zn.cloneWithDistinctOn(this.#e.queryNode,dh(e))})}modifyFront(e){return new on({...this.#e,queryNode:Zn.cloneWithFrontModifier(this.#e.queryNode,ka.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.createWithExpression(e.toOperationNode()))})}distinct(){return new on({...this.#e,queryNode:Zn.cloneWithFrontModifier(this.#e.queryNode,ka.create("Distinct"))})}forUpdate(e){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.create("ForUpdate",e?$g(e).map(zr):void 0))})}forShare(e){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.create("ForShare",e?$g(e).map(zr):void 0))})}forKeyShare(e){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.create("ForKeyShare",e?$g(e).map(zr):void 0))})}forNoKeyUpdate(e){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.create("ForNoKeyUpdate",e?$g(e).map(zr):void 0))})}skipLocked(){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.create("SkipLocked"))})}noWait(){return new on({...this.#e,queryNode:Pt.cloneWithEndModifier(this.#e.queryNode,ka.create("NoWait"))})}selectAll(e){return new on({...this.#e,queryNode:Zn.cloneWithSelections(this.#e.queryNode,oa(e))})}innerJoin(...e){return new on({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("InnerJoin",e))})}leftJoin(...e){return new on({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("LeftJoin",e))})}rightJoin(...e){return new on({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("RightJoin",e))})}fullJoin(...e){return new on({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("FullJoin",e))})}innerJoinLateral(...e){return new on({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("LateralInnerJoin",e))})}leftJoinLateral(...e){return new on({...this.#e,queryNode:Pt.cloneWithJoin(this.#e.queryNode,Di("LateralLeftJoin",e))})}orderBy(...e){return new on({...this.#e,queryNode:Zn.cloneWithOrderByItems(this.#e.queryNode,im(e))})}groupBy(e){return new on({...this.#e,queryNode:Zn.cloneWithGroupByItems(this.#e.queryNode,A8(e))})}limit(e){return new on({...this.#e,queryNode:Zn.cloneWithLimit(this.#e.queryNode,z1.create(Jr(e)))})}offset(e){return new on({...this.#e,queryNode:Zn.cloneWithOffset(this.#e.queryNode,R8.create(Jr(e)))})}fetch(e,n="only"){return new on({...this.#e,queryNode:Zn.cloneWithFetch(this.#e.queryNode,F8(e,n))})}top(e,n){return new on({...this.#e,queryNode:Pt.cloneWithTop(this.#e.queryNode,df(e,n))})}union(e){return new on({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,Gu("union",e,!1))})}unionAll(e){return new on({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,Gu("union",e,!0))})}intersect(e){return new on({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,Gu("intersect",e,!1))})}intersectAll(e){return new on({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,Gu("intersect",e,!0))})}except(e){return new on({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,Gu("except",e,!1))})}exceptAll(e){return new on({...this.#e,queryNode:Zn.cloneWithSetOperations(this.#e.queryNode,Gu("except",e,!0))})}as(e){return new sF(this,e)}clearSelect(){return new on({...this.#e,queryNode:Zn.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new on({...this.#e,queryNode:Pt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new on({...this.#e,queryNode:Zn.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new on({...this.#e,queryNode:Zn.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new on({...this.#e,queryNode:Zn.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new on({...this.#e,queryNode:Zn.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new on({...this.#e})}$castTo(){return new on(this.#e)}$narrowType(){return new on(this.#e)}$assertType(){return new on(this.#e)}$asTuple(){return new rr(this.toOperationNode())}withPlugin(e){return new on({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=om){const n=await this.executeTakeFirst();if(n===void 0)throw am(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async *stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new on({...this.#e,queryNode:Pt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}Sn(on,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function xE(t){return new on(t)}class sF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return ec.create(this.#e.toOperationNode(),br.create(this.#t))}}Sn(sF,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const jl=G({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return G({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return G({...t,distinct:!0})},cloneWithOrderBy(t,e){return G({...t,orderBy:t.orderBy?Kl.cloneWithItems(t.orderBy,e):Kl.create(e)})},cloneWithFilter(t,e){return G({...t,filter:t.filter?ds.cloneWithOperation(t.filter,"And",e):ds.create(e)})},cloneWithOrFilter(t,e){return G({...t,filter:t.filter?ds.cloneWithOperation(t.filter,"Or",e):ds.create(e)})},cloneWithOver(t,e){return G({...t,over:e})}}),Aj=G({is(t){return t.kind==="FunctionNode"},create(t,e){return G({kind:"FunctionNode",func:t,arguments:e})}});class eo{#e;constructor(e){this.#e=G(e)}get expressionType(){}as(e){return new L8(this,e)}distinct(){return new eo({...this.#e,aggregateFunctionNode:jl.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,n){return new eo({...this.#e,aggregateFunctionNode:jl.cloneWithOrderBy(this.#e.aggregateFunctionNode,im([e,n]))})}filterWhere(...e){return new eo({...this.#e,aggregateFunctionNode:jl.cloneWithFilter(this.#e.aggregateFunctionNode,hi(e))})}filterWhereRef(e,n,r){return new eo({...this.#e,aggregateFunctionNode:jl.cloneWithFilter(this.#e.aggregateFunctionNode,sa(e,n,r))})}over(e){const n=T8();return new eo({...this.#e,aggregateFunctionNode:jl.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}$castTo(){return new eo(this.#e)}$notNull(){return new eo(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}Sn(eo,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class L8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ec.create(this.#e.toOperationNode(),br.create(this.#t))}}function oF(){const t=(n,r)=>new rr(Aj.create(n,dh(r??[]))),e=(n,r)=>new eo({aggregateFunctionNode:jl.create(n,r?dh(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(...n){return t("coalesce",n)},count(n){return e("count",[n])},countAll(n){return new eo({aggregateFunctionNode:jl.create("count",oa(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])},jsonAgg(n){return new eo({aggregateFunctionNode:jl.create("json_agg",[Fs(n)?zr(n):n.toOperationNode()])})},toJson(n){return new rr(Aj.create("to_json",[Fs(n)?zr(n):n.toOperationNode()]))}})}const M8=G({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return G({kind:"UnaryOperationNode",operator:t,operand:e})}});function $8(t,e){return M8.create(Hl.create(t),Ts(e))}const Yo=G({is(t){return t.kind==="CaseNode"},create(t){return G({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return G({...t,when:G(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return G({...t,when:t.when?G([...t.when.slice(0,-1),sm.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return G({...t,...e})}});class aF{#e;constructor(e){this.#e=G(e)}when(...e){return new lF({...this.#e,node:Yo.cloneWithWhen(this.#e.node,sm.create(hi(e)))})}}class lF{#e;constructor(e){this.#e=G(e)}then(e){return new B8({...this.#e,node:Yo.cloneWithThen(this.#e.node,L1(e)?M1(e):Jr(e))})}}class B8{#e;constructor(e){this.#e=G(e)}when(...e){return new lF({...this.#e,node:Yo.cloneWithWhen(this.#e.node,sm.create(hi(e)))})}else(e){return new z8({...this.#e,node:Yo.cloneWith(this.#e.node,{else:L1(e)?M1(e):Jr(e)})})}end(){return new rr(Yo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new rr(Yo.cloneWith(this.#e.node,{isStatement:!0}))}}class z8{#e;constructor(e){this.#e=G(e)}end(){return new rr(Yo.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new rr(Yo.cloneWith(this.#e.node,{isStatement:!0}))}}const Pj=G({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return G({kind:"JSONPathLegNode",type:t,value:e})}});class wE{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return yv.is(this.#e)?new hh(yv.cloneWithTraversal(this.#e,Jp.is(this.#e.traversal)?Jp.cloneWithLeg(this.#e.traversal,Pj.create(e,n)):HP.cloneWithValue(this.#e.traversal,ia.createImmediate(n)))):new hh(Jp.cloneWithLeg(this.#e,Pj.create(e,n)))}}class hh extends wE{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new W8(this,e)}$castTo(){return new hh(this.#e)}$notNull(){return new hh(this.#e)}toOperationNode(){return this.#e}}class W8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ec.create(this.#e.toOperationNode(),vs(this.#t)?this.#t.toOperationNode():br.create(this.#t))}}const Fj=G({is(t){return t.kind==="TupleNode"},create(t){return G({kind:"TupleNode",values:G(t)})}}),U8=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],V8=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],H8=G({is(t){return t.kind==="DataTypeNode"},create(t){return G({kind:"DataTypeNode",dataType:t})}});function K8(t){return!!(U8.includes(t)||V8.some(e=>e.test(t)))}function eu(t){if(vs(t))return t.toOperationNode();if(K8(t))return H8.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}const Q8=G({is(t){return t.kind==="CastNode"},create(t,e){return G({kind:"CastNode",expression:t,dataType:e})}});function U1(t=Ob){function e(i,s,o){return new rr($1(i,s,o))}function n(i,s){return new rr($8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return xE({queryId:Xn(),executor:t,queryNode:Zn.createFrom(mh(i))})},case(i){return new aF({node:Yo.create(Dl(i)?void 0:Ts(i))})},ref(i,s){return Dl(s)?new rr(za(i)):new wE(Q5(i,s))},jsonPath(){return new wE(Jp.create())},table(i){return new rr(zr(i))},val(i){return new rr(Jr(i))},refTuple(...i){return new rr(Fj.create(i.map(Ts)))},tuple(...i){return new rr(Fj.create(i.map(Jr)))},lit(i){return new rr(M1(i))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new rr(Dd.create(Ts(i),Hl.create("between"),Vl.create(Jr(s),Jr(o))))},betweenSymmetric(i,s,o){return new rr(Dd.create(Ts(i),Hl.create("between symmetric"),Vl.create(Jr(s),Jr(o))))},and(i){return Ba(i)?new rr(bv(i,"and")):new rr(vj(i,"and"))},or(i){return Ba(i)?new rr(bv(i,"or")):new rr(vj(i,"or"))},parens(...i){const s=hi(i);return Ld.is(s)?new rr(s):new rr(Ld.create(s))},cast(i,s){return new rr(Q8.create(Ts(i),eu(s)))},withSchema(i){return U1(t.withPluginAtFront(new lm(i)))}});return r.fn=oF(),r.eb=r,r}function ff(t){return U1()}function du(t){if(vs(t))return t.toOperationNode();if(Ls(t))return t(ff()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function cF(t){if(vs(t))return t.toOperationNode();if(Ls(t))return t(ff()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function cm(t){return L5(t)||M5(t)||Ls(t)}function mh(t){return Ba(t)?t.map(e=>gh(e)):[gh(t)]}function gh(t){return Fs(t)?uF(t):cF(t)}function uF(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(dF);return ec.create(zr(n),br.create(r))}else return zr(t)}function zr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(dF);return Ml.createWithSchema(n,r)}else return Ml.create(t)}function dF(t){return t.trim()}const fF=G({is(t){return t.kind==="AddColumnNode"},create(t){return G({kind:"AddColumnNode",column:t})}}),yr=G({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return G({kind:"ColumnDefinitionNode",column:Vr.create(t),dataType:e})},cloneWithFrontModifier(t,e){return G({...t,frontModifiers:t.frontModifiers?G([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return G({...t,endModifiers:t.endModifiers?G([...t.endModifiers,e]):[e]})},cloneWith(t,e){return G({...t,...e})}}),pF=G({is(t){return t.kind==="DropColumnNode"},create(t){return G({kind:"DropColumnNode",column:Vr.create(t)})}}),hF=G({is(t){return t.kind==="RenameColumnNode"},create(t,e){return G({kind:"RenameColumnNode",column:Vr.create(t),renameTo:Vr.create(e)})}}),V1=G({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return G({kind:"CheckConstraintNode",expression:t,name:e?br.create(e):void 0})}}),G8=["no action","restrict","cascade","set null","set default"],Ny=G({is(t){return t.kind==="ReferencesNode"},create(t,e){return G({kind:"ReferencesNode",table:t,columns:G([...e])})},cloneWithOnDelete(t,e){return G({...t,onDelete:e})},cloneWithOnUpdate(t,e){return G({...t,onUpdate:e})}});function mF(t){return vs(t)?t.toOperationNode():ia.createImmediate(t)}const zg=G({is(t){return t.kind==="GeneratedNode"},create(t){return G({kind:"GeneratedNode",...t})},createWithExpression(t){return G({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return G({...t,...e})}}),J8=G({is(t){return t.kind==="DefaultValueNode"},create(t){return G({kind:"DefaultValueNode",defaultValue:t})}});function Ev(t){if(G8.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class lr{#e;constructor(e){this.#e=e}autoIncrement(){return new lr(yr.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new lr(yr.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new lr(yr.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=za(e);if(!n.table||P1.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new lr(yr.cloneWith(this.#e,{references:Ny.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new lr(yr.cloneWith(this.#e,{references:Ny.cloneWithOnDelete(this.#e.references,Ev(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new lr(yr.cloneWith(this.#e,{references:Ny.cloneWithOnUpdate(this.#e.references,Ev(e))}))}unique(){return new lr(yr.cloneWith(this.#e,{unique:!0}))}notNull(){return new lr(yr.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new lr(yr.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new lr(yr.cloneWith(this.#e,{defaultTo:J8.create(mF(e))}))}check(e){return new lr(yr.cloneWith(this.#e,{check:V1.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new lr(yr.cloneWith(this.#e,{generated:zg.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new lr(yr.cloneWith(this.#e,{generated:zg.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new lr(yr.cloneWith(this.#e,{generated:zg.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new lr(yr.cloneWith(this.#e,{generated:zg.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new lr(yr.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new lr(yr.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new lr(yr.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new lr(yr.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}Sn(lr,"don't await ColumnDefinitionBuilder instances directly.");const gF=G({is(t){return t.kind==="ModifyColumnNode"},create(t){return G({kind:"ModifyColumnNode",column:t})}}),Nv=G({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return G({kind:"ForeignKeyConstraintNode",columns:t,references:Ny.create(e,n),name:r?br.create(r):void 0})},cloneWith(t,e){return G({...t,...e})}});class Md{#e;constructor(e){this.#e=e}onDelete(e){return new Md(Nv.cloneWith(this.#e,{onDelete:Ev(e)}))}onUpdate(e){return new Md(Nv.cloneWith(this.#e,{onUpdate:Ev(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}Sn(Md,"don't await ForeignKeyConstraintBuilder instances directly.");const ky=G({is(t){return t.kind==="AddConstraintNode"},create(t){return G({kind:"AddConstraintNode",constraint:t})}}),H1=G({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,n){return G({kind:"UniqueConstraintNode",columns:G(t.map(Vr.create)),name:e?br.create(e):void 0,nullsNotDistinct:n})},cloneWith(t,e){return G({...t,...e})}}),Iy=G({is(t){return t.kind==="DropConstraintNode"},create(t){return G({kind:"DropConstraintNode",constraintName:br.create(t)})},cloneWith(t,e){return G({...t,...e})}}),gp=G({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return G({kind:"AlterColumnNode",column:Vr.create(t),[e]:n})}});class K1{#e;constructor(e){this.#e=e}setDataType(e){return new sd(gp.create(this.#e,"dataType",eu(e)))}setDefault(e){return new sd(gp.create(this.#e,"setDefault",mF(e)))}dropDefault(){return new sd(gp.create(this.#e,"dropDefault",!0))}setNotNull(){return new sd(gp.create(this.#e,"setNotNull",!0))}dropNotNull(){return new sd(gp.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}Sn(K1,"don't await AlterColumnBuilder instances");class sd{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}Sn(sd,"don't await AlteredColumnBuilder instances");class Oc{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Oc,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class yh{#e;constructor(e){this.#e=G(e)}onDelete(e){return new yh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new yh({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Yn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(yh,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class kd{#e;constructor(e){this.#e=G(e)}ifExists(){return new kd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new kd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new kd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(kd,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const yF=G({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return G({kind:"PrimaryKeyConstraintNode",columns:G(t.map(Vr.create)),name:e?br.create(e):void 0})}}),od=G({is(t){return t.kind==="AddIndexNode"},create(t){return G({kind:"AddIndexNode",name:br.create(t)})},cloneWith(t,e){return G({...t,...e})},cloneWithColumns(t,e){return G({...t,columns:[...t.columns||[],...e]})}});class Ol{#e;constructor(e){this.#e=G(e)}unique(){return new Ol({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:od.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new Ol({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:od.cloneWithColumns(this.#e.node.addIndex,[vv(e)])})})}columns(e){return new Ol({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:od.cloneWithColumns(this.#e.node.addIndex,e.map(vv))})})}expression(e){return new Ol({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:od.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new Ol({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:od.cloneWith(this.#e.node.addIndex,{using:Si.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Ol,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");class um{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new um(H1.cloneWith(this.#e,{nullsNotDistinct:!0}))}}Sn(um,"don't await UniqueConstraintNodeBuilder instances directly.");class vF{#e;constructor(e){this.#e=G(e)}renameTo(e){return new Oc({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{renameTo:zr(e)})})}setSchema(e){return new Oc({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{setSchema:br.create(e)})})}alterColumn(e,n){const r=n(new K1(e));return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,pF.create(e))})}renameColumn(e,n){return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,hF.create(e,n))})}addColumn(e,n,r=Ll){const i=r(new lr(yr.create(e,eu(n))));return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,fF.create(i.toOperationNode()))})}modifyColumn(e,n,r=Ll){const i=r(new lr(yr.create(e,eu(n))));return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,gF.create(i.toOperationNode()))})}addUniqueConstraint(e,n,r=Ll){const i=r(new um(H1.create(n,e)));return new Oc({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(i.toOperationNode())})})}addCheckConstraint(e,n){return new Oc({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(V1.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new yh({...this.#e,constraintBuilder:new Md(Nv.create(n.map(Vr.create),zr(r),i.map(Vr.create),e))})}addPrimaryKeyConstraint(e,n){return new Oc({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addConstraint:ky.create(yF.create(n,e))})})}dropConstraint(e){return new kd({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropConstraint:Iy.create(e)})})}addIndex(e){return new Ol({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{addIndex:od.create(e)})})}dropIndex(e){return new Oc({...this.#e,node:Yn.cloneWithTableProps(this.#e.node,{dropIndex:Qp.create(e)})})}$call(e){return e(this)}}Sn(vF,"don't await AlterTableBuilder instances");class no{#e;constructor(e){this.#e=G(e)}alterColumn(e,n){const r=n(new K1(e));return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,pF.create(e))})}renameColumn(e,n){return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,hF.create(e,n))})}addColumn(e,n,r=Ll){const i=r(new lr(yr.create(e,eu(n))));return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,fF.create(i.toOperationNode()))})}modifyColumn(e,n,r=Ll){const i=r(new lr(yr.create(e,eu(n))));return new no({...this.#e,node:Yn.cloneWithColumnAlteration(this.#e.node,gF.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(no,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class bF extends tF{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class Ys{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Ys({...this.#e,node:ja.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Ys({...this.#e,node:ja.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new Ys({...this.#e,node:ja.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new Ys({...this.#e,node:ja.cloneWith(this.#e.node,{table:zr(e)})})}column(e){return new Ys({...this.#e,node:ja.cloneWithColumns(this.#e.node,[vv(e)])})}columns(e){return new Ys({...this.#e,node:ja.cloneWithColumns(this.#e.node,e.map(vv))})}expression(e){return new Ys({...this.#e,node:ja.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new Ys({...this.#e,node:ja.cloneWith(this.#e.node,{using:Si.createWithSql(e)})})}where(...e){const n=new bF;return new Ys({...this.#e,node:Pt.cloneWithWhere(this.#e.node,n.transformNode(hi(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Ys,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Rb{#e;constructor(e){this.#e=G(e)}ifNotExists(){return new Rb({...this.#e,node:BP.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Rb,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function Z8(t){if(D5.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ls{#e;constructor(e){this.#e=G(e)}temporary(){return new ls({...this.#e,node:Ss.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ls({...this.#e,node:Ss.cloneWith(this.#e.node,{onCommit:Z8(e)})})}ifNotExists(){return new ls({...this.#e,node:Ss.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Ll){const i=r(new lr(yr.create(e,eu(n))));return new ls({...this.#e,node:Ss.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ls({...this.#e,node:Ss.cloneWithConstraint(this.#e.node,yF.create(n,e))})}addUniqueConstraint(e,n,r=Ll){const i=r(new um(H1.create(n,e)));return new ls({...this.#e,node:Ss.cloneWithConstraint(this.#e.node,i.toOperationNode())})}addCheckConstraint(e,n){return new ls({...this.#e,node:Ss.cloneWithConstraint(this.#e.node,V1.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Ll){const o=s(new Md(Nv.create(n.map(Vr.create),zr(r),i.map(Vr.create),e)));return new ls({...this.#e,node:Ss.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ls({...this.#e,node:Ss.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ls({...this.#e,node:Ss.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new ls({...this.#e,node:Ss.cloneWith(this.#e.node,{selectQuery:du(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(ls,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class Id{#e;constructor(e){this.#e=G(e)}on(e){return new Id({...this.#e,node:Qp.cloneWith(this.#e.node,{table:zr(e)})})}ifExists(){return new Id({...this.#e,node:Qp.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Id({...this.#e,node:Qp.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Id,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class vh{#e;constructor(e){this.#e=G(e)}ifExists(){return new vh({...this.#e,node:hE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new vh({...this.#e,node:hE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(vh,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class bh{#e;constructor(e){this.#e=G(e)}ifExists(){return new bh({...this.#e,node:mE.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new bh({...this.#e,node:mE.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(bh,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Nl=G({is(t){return t.kind==="CreateViewNode"},create(t){return G({kind:"CreateViewNode",name:Ul.create(t)})},cloneWith(t,e){return G({...t,...e})}});class Y8{#e=new bF;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class qa{#e;constructor(e){this.#e=G(e)}temporary(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{columns:e.map(QP)})})}as(e){const n=e.withPlugin(new Y8).toOperationNode();return new qa({...this.#e,node:Nl.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(qa,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const Cy=G({is(t){return t.kind==="DropViewNode"},create(t){return G({kind:"DropViewNode",name:Ul.create(t)})},cloneWith(t,e){return G({...t,...e})}});class Cd{#e;constructor(e){this.#e=G(e)}materialized(){return new Cd({...this.#e,node:Cy.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new Cd({...this.#e,node:Cy.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Cd({...this.#e,node:Cy.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Cd,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const xF=G({is(t){return t.kind==="CreateTypeNode"},create(t){return G({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return G({...t,enum:D1.create(e.map(n=>ia.createImmediate(n)))})}});class qb{#e;constructor(e){this.#e=G(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new qb({...this.#e,node:xF.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(qb,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const wF=G({is(t){return t.kind==="DropTypeNode"},create(t){return G({kind:"DropTypeNode",name:t})},cloneWith(t,e){return G({...t,...e})}});class Ab{#e;constructor(e){this.#e=G(e)}ifExists(){return new Ab({...this.#e,node:wF.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}Sn(Ab,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Dj(t){const e=".";if(t.includes(e)){const n=t.split(e).map(X8);if(n.length===2)return Ul.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Ul.create(t)}function X8(t){return t.trim()}class Xp{#e;constructor(e){this.#e=e}createTable(e){return new ls({queryId:Xn(),executor:this.#e,node:Ss.create(zr(e))})}dropTable(e){return new bh({queryId:Xn(),executor:this.#e,node:mE.create(zr(e))})}createIndex(e){return new Ys({queryId:Xn(),executor:this.#e,node:ja.create(e)})}dropIndex(e){return new Id({queryId:Xn(),executor:this.#e,node:Qp.create(e)})}createSchema(e){return new Rb({queryId:Xn(),executor:this.#e,node:BP.create(e)})}dropSchema(e){return new vh({queryId:Xn(),executor:this.#e,node:hE.create(e)})}alterTable(e){return new vF({queryId:Xn(),executor:this.#e,node:Yn.create(zr(e))})}createView(e){return new qa({queryId:Xn(),executor:this.#e,node:Nl.create(e)})}dropView(e){return new Cd({queryId:Xn(),executor:this.#e,node:Cy.create(e)})}createType(e){return new qb({queryId:Xn(),executor:this.#e,node:xF.create(Dj(e))})}dropType(e){return new Ab({queryId:Xn(),executor:this.#e,node:wF.create(Dj(e))})}withPlugin(e){return new Xp(this.#e.withPlugin(e))}withoutPlugins(){return new Xp(this.#e.withoutPlugins())}withSchema(e){return new Xp(this.#e.withPluginAtFront(new lm(e)))}}class eH{ref(e){return new H5(e)}}class tH{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class Fc extends nF{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new Fc(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new Fc(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new Fc(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new Fc(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new Fc(this.#e,this.#t,this.#n,[])}}function Lj(){return typeof performance<"u"&&Ls(performance.now)?performance.now():Date.now()}class nH{#e;#t;#n;#r;#i;#s=new WeakSet;constructor(e,n){this.#r=!1,this.#e=e,this.#t=n}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#r=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||await this.init();const e=await this.#e.acquireConnection();return this.#s.has(e)||(this.#o()&&this.#a(e),this.#s.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{let i;const s=Lj();try{return await n.call(e,r)}catch(o){throw i=o,await this.#c(o,r,s),o}finally{i||await this.#l(r,s)}}}async #c(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#u(r)}))}async #l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(n)}))}#u(e){return Lj()-e}}const rH=()=>{};class _F{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(rH);return this.#t=this.#n(e).finally(()=>{this.#t=void 0}),this.#t}async #n(e){return await e(this.#e)}}const iH=["read uncommitted","read committed","repeatable read","serializable","snapshot"];G(["query","error"]);class sH{#e;#t;constructor(e){Ls(e)?(this.#t=e,this.#e=G({query:!0,error:!0})):(this.#t=oH,this.#e=G({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function oH(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}function aH(t){return Jo(t)&&Ls(t.compile)}let Q1=class Cp extends Tl{#e;constructor(e){let n,r;if(lH(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),l=i.createAdapter(),u=new sH(e.log??[]),f=new nH(s,u),p=new tH(f),h=new Fc(o,l,p,e.plugins??[]);n={executor:h},r={config:e,executor:h,dialect:i,driver:f}}super(n),this.#e=G(r)}get schema(){return new Xp(this.#e.executor)}get dynamic(){return new eH}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new aF({node:Yo.create(Dl(e)?void 0:du(e))})}get fn(){return oF()}transaction(){return new Pb({...this.#e})}connection(){return new SF({...this.#e})}withPlugin(e){return new Cp({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Cp({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Cp({...this.#e,executor:this.#e.executor.withPluginAtFront(new lm(e))})}withTables(){return new Cp({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=Xn()){const r=aH(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}};class ud extends Q1{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new ud({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new ud({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new ud({...this.#e,executor:this.#e.executor.withPluginAtFront(new lm(e))})}withTables(){return new ud({...this.#e})}}function lH(t){return Jo(t)&&Jo(t.config)&&Jo(t.driver)&&Jo(t.executor)&&Jo(t.dialect)}class SF{#e;constructor(e){this.#e=G(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new _F(n)),i=new Q1({...this.#e,executor:r});return await e(i)})}}Sn(SF,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class Pb{#e;constructor(e){this.#e=G(e)}setIsolationLevel(e){return new Pb({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return cH(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new _F(s)),l=new ud({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(l);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}Sn(Pb,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function cH(t){if(t.isolationLevel&&!iH.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class Td{#e;constructor(e){this.#e=G(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new EF(this,e)}$castTo(){return new Td({...this.#e})}$notNull(){return new Td(this.#e)}withPlugin(e){return new Td({...this.#e,plugins:this.#e.plugins!==void 0?G([...this.#e.plugins,e]):G([e])})}toOperationNode(){return this.#n(this.#t())}compile(e){return this.#r(this.#t(e))}async execute(e){const n=this.#t(e);return n.executeQuery(this.#r(n),this.#e.queryId)}#t(e){const n=e!==void 0?e.getExecutor():Ob;return this.#e.plugins!==void 0?n.withPlugins(this.#e.plugins):n}#n(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#r(e){return e.compileQuery(this.#n(e),this.#e.queryId)}}function bl(t){return new Td(t)}Sn(Td,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class EF{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return ec.create(this.#e.toOperationNode(),vs(this.#t)?this.#t.toOperationNode():br.create(this.#t))}}Sn(EF,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");const Pr=Object.assign((t,...e)=>bl({queryId:Xn(),rawNode:Si.create(t,e?.map(Mj)??[])}),{ref(t){return bl({queryId:Xn(),rawNode:Si.createWithChild(za(t))})},val(t){return bl({queryId:Xn(),rawNode:Si.createWithChild(Jr(t))})},value(t){return this.val(t)},table(t){return bl({queryId:Xn(),rawNode:Si.createWithChild(zr(t))})},id(...t){const e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",bl({queryId:Xn(),rawNode:Si.create(e,t.map(br.create))})},lit(t){return bl({queryId:Xn(),rawNode:Si.createWithChild(ia.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return bl({queryId:Xn(),rawNode:Si.createWithSql(t)})},join(t,e=Pr`, `){const n=new Array(2*t.length-1),r=e.toOperationNode();for(let i=0;i<t.length;++i)n[2*i]=Mj(t[i]),i!==t.length-1&&(n[2*i+1]=r);return bl({queryId:Xn(),rawNode:Si.createWithChildren(n)})}});function Mj(t){return vs(t)?t.toOperationNode():Jr(t)}class uH{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=G({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class dH extends uH{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),G({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Ld.is(this.parentNode)&&!ks.is(this.parentNode)&&!Ss.is(this.parentNode)&&!Nl.is(this.parentNode)&&!iF.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(Pt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!fs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!fs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(Pt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Fs(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(pH[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(Pt.is),r=n!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&!fs.is(n)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&!fs.is(n)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),gv(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(fH[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Hl.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Fs(e))this.append(`'${e}'`);else if(Tb(e)||gv(e))this.append(e.toString());else if(q1(e))this.append("null");else if(F5(e))this.appendImmediateValue(e.toISOString());else if(A1(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?$j[n.modifier]-$j[r.modifier]:1),G(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}const fH=G({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),$j=G({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),pH=G({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});class hH{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}const mH=/"/g;class gH extends dH{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(mH,'""')}visitDefaultInsertValue(e){this.append("null")}}const yH="kysely_migration",vH="kysely_migration_lock";G({__noMigrations__:!0});class bH{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let n=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(n=n.where("name","!=",yH).where("name","!=",vH));const r=await n.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(e){return{tables:await this.getTables(e)}}async #t(e){const n=this.#e,r=await n.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),i=r.sql?.split(/[\(\),]/)?.find(o=>o.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),s=await n.selectFrom(Pr`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:r.type==="view",columns:s.map(o=>({name:o.name,dataType:o.type,isNullable:!o.notnull,isAutoIncrementing:o.name===i,hasDefaultValue:o.dflt_value!=null,comment:void 0}))}}}class xH extends hH{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const NF={jsonObject(t){const e=Pr.join(Object.entries(t).map(([n,r])=>Pr`${n}, ${r}`));return Pr`json_object(${e})`},jsonGroupArray(t){return Pr`json_group_array(${NF.jsonObject(t)})`}},kF={hash(t){return pE.sha224(t)},verify(t,e){return pE.sha224(t)===e}};var qn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(qn||(qn={}));var _E;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(_E||(_E={}));const At=qn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Aa=t=>{switch(typeof t){case"undefined":return At.undefined;case"string":return At.string;case"number":return isNaN(t)?At.nan:At.number;case"boolean":return At.boolean;case"function":return At.function;case"bigint":return At.bigint;case"symbol":return At.symbol;case"object":return Array.isArray(t)?At.array:t===null?At.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?At.promise:typeof Map<"u"&&t instanceof Map?At.map:typeof Set<"u"&&t instanceof Set?At.set:typeof Date<"u"&&t instanceof Date?At.date:At.object;default:return At.unknown}},yt=qn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),wH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class As extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(n(o))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return i(this),r}static assert(e){if(!(e instanceof As))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}As.create=t=>new As(t);const $d=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===At.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,qn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${qn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${qn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${qn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:qn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,qn.assertNever(t)}return{message:n}};let IF=$d;function _H(t){IF=t}function kv(){return IF}const Iv=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=r.filter(f=>!!f).slice().reverse();for(const f of u)l=f(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},SH=[];function Ct(t,e){const n=kv(),r=Iv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===$d?void 0:$d].filter(i=>!!i)});t.common.issues.push(r)}class ki{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return ln;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return ki.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return ln;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const ln=Object.freeze({status:"aborted"}),dd=t=>({status:"dirty",value:t}),zi=t=>({status:"valid",value:t}),SE=t=>t.status==="aborted",EE=t=>t.status==="dirty",tu=t=>t.status==="valid",xh=t=>typeof Promise<"u"&&t instanceof Promise;function Cv(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function CF(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Kt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Kt||(Kt={}));var Tp,jp;class aa{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Bj=(t,e)=>{if(tu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new As(t.common.issues);return this._error=n,this._error}}};function wn(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var u,f;const{message:p}=t;return o.code==="invalid_enum_value"?{message:p??l.defaultError}:typeof l.data>"u"?{message:(u=p??r)!==null&&u!==void 0?u:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(f=p??n)!==null&&f!==void 0?f:l.defaultError}},description:i}}class Nn{get description(){return this._def.description}_getType(e){return Aa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ki,ctx:{common:e.parent.common,data:e.data,parsedType:Aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(xh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Aa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Bj(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Aa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return tu(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>tu(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Aa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await (xh(i)?i:Promise.resolve(i));return Bj(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:yt.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fo({schema:this,typeName:an.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ea.create(this,this._def)}nullable(){return Zl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return zd.create(this,this._def)}or(e){return Eh.create([this,e],this._def)}and(e){return Nh.create(this,e,this._def)}transform(e){return new Fo({...wn(this._def),schema:this,typeName:an.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new jh({...wn(this._def),innerType:this,defaultValue:n,typeName:an.ZodDefault})}brand(){return new G1({typeName:an.ZodBranded,type:this,...wn(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Oh({...wn(this._def),innerType:this,catchValue:n,typeName:an.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return dm.create(this,e)}readonly(){return Rh.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const EH=/^c[^\s-]{8,}$/i,NH=/^[0-9a-z]+$/,kH=/^[0-9A-HJKMNP-TV-Z]{26}$/i,IH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CH=/^[a-z0-9_-]{21}$/i,TH=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jH=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,OH=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let s0;const qH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,AH=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,PH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,FH=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DH=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LH=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MH=new RegExp(`^${TF}$`);function jF(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function $H(t){return new RegExp(`^${jF(t)}$`)}function OF(t){let e=`${TF}T${jF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function BH(t,e){return!!((e==="v4"||!e)&&qH.test(t)||(e==="v6"||!e)&&PH.test(t))}function zH(t,e){if(!TH.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function WH(t,e){return!!((e==="v4"||!e)&&AH.test(t)||(e==="v6"||!e)&&FH.test(t))}class Oo extends Nn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==At.string){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_type,expected:At.string,received:s.parsedType}),ln}const r=new ki;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Ct(i,{code:yt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Ct(i,{code:yt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")OH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"email",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")s0||(s0=new RegExp(RH,"u")),s0.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"emoji",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")IH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"uuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")CH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"nanoid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")EH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cuid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")NH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cuid2",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")kH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"ulid",code:yt.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ct(i,{validation:"url",code:yt.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"regex",code:yt.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?OF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?MH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?$H(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?jH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"duration",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?BH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"ip",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?zH(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"jwt",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?WH(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"cidr",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?DH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"base64",code:yt.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?LH.test(e.data)||(i=this._getOrReturnCtx(e,i),Ct(i,{validation:"base64url",code:yt.invalid_string,message:s.message}),r.dirty()):qn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:yt.invalid_string,...Kt.errToObj(r)})}_addCheck(e){return new Oo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Kt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Kt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Kt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Kt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Kt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Kt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Kt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Kt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Kt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Kt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Kt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Kt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Kt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Kt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Kt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Kt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Kt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Kt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Kt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Kt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Kt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Kt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Kt.errToObj(n)})}nonempty(e){return this.min(1,Kt.errToObj(e))}trim(){return new Oo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Oo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Oo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Oo.create=t=>{var e;return new Oo({checks:[],typeName:an.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...wn(t)})};function UH(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ql extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==At.number){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_type,expected:At.number,received:s.parsedType}),ln}let r;const i=new ki;for(const s of this._def.checks)s.kind==="int"?qn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?UH(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.not_finite,message:s.message}),i.dirty()):qn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Ql({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Ql({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Kt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Kt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Kt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Kt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ql.create=t=>new Ql({checks:[],typeName:an.ZodNumber,coerce:t?.coerce||!1,...wn(t)});class Gl extends Nn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==At.bigint)return this._getInvalidInput(e);let r;const i=new ki;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ct(r,{code:yt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):qn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ct(n,{code:yt.invalid_type,expected:At.bigint,received:n.parsedType}),ln}gte(e,n){return this.setLimit("min",e,!0,Kt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Kt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Kt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Kt.toString(n))}setLimit(e,n,r,i){return new Gl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Kt.toString(i)}]})}_addCheck(e){return new Gl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Kt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Kt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Kt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Gl.create=t=>{var e;return new Gl({checks:[],typeName:an.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...wn(t)})};class wh extends Nn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==At.boolean){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:At.boolean,received:r.parsedType}),ln}return zi(e.data)}}wh.create=t=>new wh({typeName:an.ZodBoolean,coerce:t?.coerce||!1,...wn(t)});class nu extends Nn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==At.date){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_type,expected:At.date,received:s.parsedType}),ln}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ct(s,{code:yt.invalid_date}),ln}const r=new ki;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ct(i,{code:yt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):qn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new nu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Kt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Kt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}nu.create=t=>new nu({checks:[],coerce:t?.coerce||!1,typeName:an.ZodDate,...wn(t)});class Tv extends Nn{_parse(e){if(this._getType(e)!==At.symbol){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:At.symbol,received:r.parsedType}),ln}return zi(e.data)}}Tv.create=t=>new Tv({typeName:an.ZodSymbol,...wn(t)});class _h extends Nn{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:At.undefined,received:r.parsedType}),ln}return zi(e.data)}}_h.create=t=>new _h({typeName:an.ZodUndefined,...wn(t)});class Sh extends Nn{_parse(e){if(this._getType(e)!==At.null){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:At.null,received:r.parsedType}),ln}return zi(e.data)}}Sh.create=t=>new Sh({typeName:an.ZodNull,...wn(t)});class Bd extends Nn{constructor(){super(...arguments),this._any=!0}_parse(e){return zi(e.data)}}Bd.create=t=>new Bd({typeName:an.ZodAny,...wn(t)});class Qc extends Nn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return zi(e.data)}}Qc.create=t=>new Qc({typeName:an.ZodUnknown,...wn(t)});class Wa extends Nn{_parse(e){const n=this._getOrReturnCtx(e);return Ct(n,{code:yt.invalid_type,expected:At.never,received:n.parsedType}),ln}}Wa.create=t=>new Wa({typeName:an.ZodNever,...wn(t)});class jv extends Nn{_parse(e){if(this._getType(e)!==At.undefined){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:At.void,received:r.parsedType}),ln}return zi(e.data)}}jv.create=t=>new jv({typeName:an.ZodVoid,...wn(t)});class qo extends Nn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==At.array)return Ct(n,{code:yt.invalid_type,expected:At.array,received:n.parsedType}),ln;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Ct(n,{code:o?yt.too_big:yt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ct(n,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ct(n,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new aa(n,o,n.path,l)))).then(o=>ki.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new aa(n,o,n.path,l)));return ki.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new qo({...this._def,minLength:{value:e,message:Kt.toString(n)}})}max(e,n){return new qo({...this._def,maxLength:{value:e,message:Kt.toString(n)}})}length(e,n){return new qo({...this._def,exactLength:{value:e,message:Kt.toString(n)}})}nonempty(e){return this.min(1,e)}}qo.create=(t,e)=>new qo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:an.ZodArray,...wn(e)});function ad(t){if(t instanceof Ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ea.create(ad(r))}return new Ar({...t._def,shape:()=>e})}else return t instanceof qo?new qo({...t._def,type:ad(t.element)}):t instanceof ea?ea.create(ad(t.unwrap())):t instanceof Zl?Zl.create(ad(t.unwrap())):t instanceof la?la.create(t.items.map(e=>ad(e))):t}class Ar extends Nn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=qn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==At.object){const f=this._getOrReturnCtx(e);return Ct(f,{code:yt.invalid_type,expected:At.object,received:f.parsedType}),ln}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Wa&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||l.push(f);const u=[];for(const f of o){const p=s[f],h=i.data[f];u.push({key:{status:"valid",value:f},value:p._parse(new aa(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Wa){const f=this._def.unknownKeys;if(f==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(f==="strict")l.length>0&&(Ct(i,{code:yt.unrecognized_keys,keys:l}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const p of l){const h=i.data[p];u.push({key:{status:"valid",value:p},value:f._parse(new aa(i,h,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const p of u){const h=await p.key,b=await p.value;f.push({key:h,value:b,alwaysSet:p.alwaysSet})}return f}).then(f=>ki.mergeObjectSync(r,f)):ki.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Kt.errToObj,new Ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Kt.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new Ar({...this._def,unknownKeys:"strip"})}passthrough(){return new Ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:an.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ar({...this._def,catchall:e})}pick(e){const n={};return qn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ar({...this._def,shape:()=>n})}omit(e){const n={};return qn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ar({...this._def,shape:()=>n})}deepPartial(){return ad(this)}partial(e){const n={};return qn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ar({...this._def,shape:()=>n})}required(e){const n={};return qn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof ea;)s=s._def.innerType;n[r]=s}}),new Ar({...this._def,shape:()=>n})}keyof(){return RF(qn.objectKeys(this.shape))}}Ar.create=(t,e)=>new Ar({shape:()=>t,unknownKeys:"strip",catchall:Wa.create(),typeName:an.ZodObject,...wn(e)});Ar.strictCreate=(t,e)=>new Ar({shape:()=>t,unknownKeys:"strict",catchall:Wa.create(),typeName:an.ZodObject,...wn(e)});Ar.lazycreate=(t,e)=>new Ar({shape:t,unknownKeys:"strip",catchall:Wa.create(),typeName:an.ZodObject,...wn(e)});class Eh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new As(l.ctx.common.issues));return Ct(n,{code:yt.invalid_union,unionErrors:o}),ln}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const u of r){const f={...n,common:{...n.common,issues:[]},parent:null},p=u._parseSync({data:n.data,path:n.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(u=>new As(u));return Ct(n,{code:yt.invalid_union,unionErrors:l}),ln}}get options(){return this._def.options}}Eh.create=(t,e)=>new Eh({options:t,typeName:an.ZodUnion,...wn(e)});const Oa=t=>t instanceof Ih?Oa(t.schema):t instanceof Fo?Oa(t.innerType()):t instanceof Ch?[t.value]:t instanceof Jl?t.options:t instanceof Th?qn.objectValues(t.enum):t instanceof jh?Oa(t._def.innerType):t instanceof _h?[void 0]:t instanceof Sh?[null]:t instanceof ea?[void 0,...Oa(t.unwrap())]:t instanceof Zl?[null,...Oa(t.unwrap())]:t instanceof G1||t instanceof Rh?Oa(t.unwrap()):t instanceof Oh?Oa(t._def.innerType):[];class Fb extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.object)return Ct(n,{code:yt.invalid_type,expected:At.object,received:n.parsedType}),ln;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Ct(n,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ln)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=Oa(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new Fb({typeName:an.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...wn(r)})}}function NE(t,e){const n=Aa(t),r=Aa(e);if(t===e)return{valid:!0,data:t};if(n===At.object&&r===At.object){const i=qn.objectKeys(e),s=qn.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const u=NE(t[l],e[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===At.array&&r===At.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],u=NE(o,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===At.date&&r===At.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Nh extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(SE(s)||SE(o))return ln;const l=NE(s.value,o.value);return l.valid?((EE(s)||EE(o))&&n.dirty(),{status:n.value,value:l.data}):(Ct(r,{code:yt.invalid_intersection_types}),ln)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Nh.create=(t,e,n)=>new Nh({left:t,right:e,typeName:an.ZodIntersection,...wn(n)});class la extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.array)return Ct(r,{code:yt.invalid_type,expected:At.array,received:r.parsedType}),ln;if(r.data.length<this._def.items.length)return Ct(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ln;!this._def.rest&&r.data.length>this._def.items.length&&(Ct(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new aa(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>ki.mergeArray(n,o)):ki.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new la({...this._def,rest:e})}}la.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new la({items:t,typeName:an.ZodTuple,rest:null,...wn(e)})};class kh extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.object)return Ct(r,{code:yt.invalid_type,expected:At.object,received:r.parsedType}),ln;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new aa(r,l,r.path,l)),value:o._parse(new aa(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?ki.mergeObjectAsync(n,i):ki.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Nn?new kh({keyType:e,valueType:n,typeName:an.ZodRecord,...wn(r)}):new kh({keyType:Oo.create(),valueType:e,typeName:an.ZodRecord,...wn(n)})}}class Ov extends Nn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.map)return Ct(r,{code:yt.invalid_type,expected:At.map,received:r.parsedType}),ln;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,u],f)=>({key:i._parse(new aa(r,l,r.path,[f,"key"])),value:s._parse(new aa(r,u,r.path,[f,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,p=await u.value;if(f.status==="aborted"||p.status==="aborted")return ln;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of o){const f=u.key,p=u.value;if(f.status==="aborted"||p.status==="aborted")return ln;(f.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(f.value,p.value)}return{status:n.value,value:l}}}}Ov.create=(t,e,n)=>new Ov({valueType:e,keyType:t,typeName:an.ZodMap,...wn(n)});class ru extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==At.set)return Ct(r,{code:yt.invalid_type,expected:At.set,received:r.parsedType}),ln;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ct(r,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ct(r,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const f=new Set;for(const p of u){if(p.status==="aborted")return ln;p.status==="dirty"&&n.dirty(),f.add(p.value)}return{status:n.value,value:f}}const l=[...r.data.values()].map((u,f)=>s._parse(new aa(r,u,r.path,f)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(e,n){return new ru({...this._def,minSize:{value:e,message:Kt.toString(n)}})}max(e,n){return new ru({...this._def,maxSize:{value:e,message:Kt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ru.create=(t,e)=>new ru({valueType:t,minSize:null,maxSize:null,typeName:an.ZodSet,...wn(e)});class jd extends Nn{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.function)return Ct(n,{code:yt.invalid_type,expected:At.function,received:n.parsedType}),ln;function r(l,u){return Iv({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kv(),$d].filter(f=>!!f),issueData:{code:yt.invalid_arguments,argumentsError:u}})}function i(l,u){return Iv({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kv(),$d].filter(f=>!!f),issueData:{code:yt.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof zd){const l=this;return zi(async function(...u){const f=new As([]),p=await l._def.args.parseAsync(u,s).catch(x=>{throw f.addIssue(r(u,x)),f}),h=await Reflect.apply(o,this,p);return await l._def.returns._def.type.parseAsync(h,s).catch(x=>{throw f.addIssue(i(h,x)),f})})}else{const l=this;return zi(function(...u){const f=l._def.args.safeParse(u,s);if(!f.success)throw new As([r(u,f.error)]);const p=Reflect.apply(o,this,f.data),h=l._def.returns.safeParse(p,s);if(!h.success)throw new As([i(p,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new jd({...this._def,args:la.create(e).rest(Qc.create())})}returns(e){return new jd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new jd({args:e||la.create([]).rest(Qc.create()),returns:n||Qc.create(),typeName:an.ZodFunction,...wn(r)})}}class Ih extends Nn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ih.create=(t,e)=>new Ih({getter:t,typeName:an.ZodLazy,...wn(e)});class Ch extends Nn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ct(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),ln}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ch.create=(t,e)=>new Ch({value:t,typeName:an.ZodLiteral,...wn(e)});function RF(t,e){return new Jl({values:t,typeName:an.ZodEnum,...wn(e)})}class Jl extends Nn{constructor(){super(...arguments),Tp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ct(n,{expected:qn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),ln}if(Cv(this,Tp)||CF(this,Tp,new Set(this._def.values)),!Cv(this,Tp).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ct(n,{received:n.data,code:yt.invalid_enum_value,options:r}),ln}return zi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Jl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Jl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Tp=new WeakMap;Jl.create=RF;class Th extends Nn{constructor(){super(...arguments),jp.set(this,void 0)}_parse(e){const n=qn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==At.string&&r.parsedType!==At.number){const i=qn.objectValues(n);return Ct(r,{expected:qn.joinValues(i),received:r.parsedType,code:yt.invalid_type}),ln}if(Cv(this,jp)||CF(this,jp,new Set(qn.getValidEnumValues(this._def.values))),!Cv(this,jp).has(e.data)){const i=qn.objectValues(n);return Ct(r,{received:r.data,code:yt.invalid_enum_value,options:i}),ln}return zi(e.data)}get enum(){return this._def.values}}jp=new WeakMap;Th.create=(t,e)=>new Th({values:t,typeName:an.ZodNativeEnum,...wn(e)});class zd extends Nn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==At.promise&&n.common.async===!1)return Ct(n,{code:yt.invalid_type,expected:At.promise,received:n.parsedType}),ln;const r=n.parsedType===At.promise?n.data:Promise.resolve(n.data);return zi(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zd.create=(t,e)=>new zd({type:t,typeName:an.ZodPromise,...wn(e)});class Fo extends Nn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===an.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Ct(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return ln;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?ln:u.status==="dirty"||n.value==="dirty"?dd(u.value):u});{if(n.value==="aborted")return ln;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?ln:l.status==="dirty"||n.value==="dirty"?dd(l.value):l}}if(i.type==="refinement"){const o=l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?ln:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?ln:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!tu(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>tu(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);qn.assertNever(i)}}Fo.create=(t,e,n)=>new Fo({schema:t,typeName:an.ZodEffects,effect:e,...wn(n)});Fo.createWithPreprocess=(t,e,n)=>new Fo({schema:e,effect:{type:"preprocess",transform:t},typeName:an.ZodEffects,...wn(n)});class ea extends Nn{_parse(e){return this._getType(e)===At.undefined?zi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ea.create=(t,e)=>new ea({innerType:t,typeName:an.ZodOptional,...wn(e)});class Zl extends Nn{_parse(e){return this._getType(e)===At.null?zi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Zl.create=(t,e)=>new Zl({innerType:t,typeName:an.ZodNullable,...wn(e)});class jh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===At.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}jh.create=(t,e)=>new jh({innerType:t,typeName:an.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...wn(e)});class Oh extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return xh(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new As(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new As(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Oh.create=(t,e)=>new Oh({innerType:t,typeName:an.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...wn(e)});class Rv extends Nn{_parse(e){if(this._getType(e)!==At.nan){const r=this._getOrReturnCtx(e);return Ct(r,{code:yt.invalid_type,expected:At.nan,received:r.parsedType}),ln}return{status:"valid",value:e.data}}}Rv.create=t=>new Rv({typeName:an.ZodNaN,...wn(t)});const VH=Symbol("zod_brand");class G1 extends Nn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class dm extends Nn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?ln:s.status==="dirty"?(n.dirty(),dd(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ln:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new dm({in:e,out:n,typeName:an.ZodPipeline})}}class Rh extends Nn{_parse(e){const n=this._def.innerType._parse(e),r=i=>(tu(i)&&(i.value=Object.freeze(i.value)),i);return xh(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Rh.create=(t,e)=>new Rh({innerType:t,typeName:an.ZodReadonly,...wn(e)});function qF(t,e={},n){return t?Bd.create().superRefine((r,i)=>{var s,o;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,f=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...f,fatal:u})}}):Bd.create()}const HH={object:Ar.lazycreate};var an;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(an||(an={}));const KH=(t,e={message:`Input not instance of ${t.name}`})=>qF(n=>n instanceof t,e),AF=Oo.create,PF=Ql.create,QH=Rv.create,GH=Gl.create,FF=wh.create,JH=nu.create,ZH=Tv.create,YH=_h.create,XH=Sh.create,e9=Bd.create,t9=Qc.create,n9=Wa.create,r9=jv.create,i9=qo.create,s9=Ar.create,o9=Ar.strictCreate,a9=Eh.create,l9=Fb.create,c9=Nh.create,u9=la.create,d9=kh.create,f9=Ov.create,p9=ru.create,h9=jd.create,m9=Ih.create,g9=Ch.create,y9=Jl.create,v9=Th.create,b9=zd.create,zj=Fo.create,x9=ea.create,w9=Zl.create,_9=Fo.createWithPreprocess,S9=dm.create,E9=()=>AF().optional(),N9=()=>PF().optional(),k9=()=>FF().optional(),I9={string:t=>Oo.create({...t,coerce:!0}),number:t=>Ql.create({...t,coerce:!0}),boolean:t=>wh.create({...t,coerce:!0}),bigint:t=>Gl.create({...t,coerce:!0}),date:t=>nu.create({...t,coerce:!0})},C9=ln;var L=Object.freeze({__proto__:null,defaultErrorMap:$d,setErrorMap:_H,getErrorMap:kv,makeIssue:Iv,EMPTY_PATH:SH,addIssueToContext:Ct,ParseStatus:ki,INVALID:ln,DIRTY:dd,OK:zi,isAborted:SE,isDirty:EE,isValid:tu,isAsync:xh,get util(){return qn},get objectUtil(){return _E},ZodParsedType:At,getParsedType:Aa,ZodType:Nn,datetimeRegex:OF,ZodString:Oo,ZodNumber:Ql,ZodBigInt:Gl,ZodBoolean:wh,ZodDate:nu,ZodSymbol:Tv,ZodUndefined:_h,ZodNull:Sh,ZodAny:Bd,ZodUnknown:Qc,ZodNever:Wa,ZodVoid:jv,ZodArray:qo,ZodObject:Ar,ZodUnion:Eh,ZodDiscriminatedUnion:Fb,ZodIntersection:Nh,ZodTuple:la,ZodRecord:kh,ZodMap:Ov,ZodSet:ru,ZodFunction:jd,ZodLazy:Ih,ZodLiteral:Ch,ZodEnum:Jl,ZodNativeEnum:Th,ZodPromise:zd,ZodEffects:Fo,ZodTransformer:Fo,ZodOptional:ea,ZodNullable:Zl,ZodDefault:jh,ZodCatch:Oh,ZodNaN:Rv,BRAND:VH,ZodBranded:G1,ZodPipeline:dm,ZodReadonly:Rh,custom:qF,Schema:Nn,ZodSchema:Nn,late:HH,get ZodFirstPartyTypeKind(){return an},coerce:I9,any:e9,array:i9,bigint:GH,boolean:FF,date:JH,discriminatedUnion:l9,effect:zj,enum:y9,function:h9,instanceof:KH,intersection:c9,lazy:m9,literal:g9,map:f9,nan:QH,nativeEnum:v9,never:n9,null:XH,nullable:w9,number:PF,object:s9,oboolean:k9,onumber:N9,optional:x9,ostring:E9,pipeline:S9,preprocess:_9,promise:b9,record:d9,set:p9,strictObject:o9,string:AF,symbol:ZH,transformer:zj,tuple:u9,undefined:YH,union:a9,unknown:t9,void:r9,NEVER:C9,ZodIssueCode:yt,quotelessJson:wH,ZodError:As});const T9=L.object({page:L.number().gte(0,"Page must be greater than zero"),size:L.number().gte(1,"Page size must be greater than one to get any data")}),Hi=L.object({id:L.string().min(1)}),J1=L.object({message:L.string()}),Ki=L.object({id:L.string().optional(),idIn:L.array(L.string()).optional(),fulltext:L.string().optional()}),j9=L.enum(["asc","desc"]),oo=()=>L.union([L.boolean(),L.number().int().refine(t=>t===0||t===1).transform(t=>typeof t=="boolean"?t:t===1)]),Wi=()=>L.union([L.number(),L.string().transform(t=>parseFloat(t)).refine(t=>!isNaN(t))]),eh=()=>L.union([L.number().int(),L.string().transform(t=>parseInt(t,10)).refine(t=>!isNaN(t))]),ms=t=>L.string().transform(e=>JSON.parse(e)).refine(e=>Array.isArray(e)).transform(e=>L.array(t).parse(e)),O9=t=>L.string().transform(e=>JSON.parse(e)).transform(e=>t.parse(e)),kE=new Proxy(()=>kE,{get:()=>kE}),Qi=({entity:t,shape:e,filter:n,sort:r})=>{const i=kE();return{entity:t,"~entity":i,"~entity-array":[],"~entity-partial-exclude-id":i,shape:e,"~shape":i,"~shape-partial":i,filter:n,"~filter":i,sort:L.array(L.object({name:L.enum(r),sort:j9})),"~sort":i,"~sort-keyof":i}},xl=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t),R9=({page:t,total:e,siblings:n=1,boundaries:r=1})=>{const i=Math.max(Math.trunc(e),0);if(n*2+3+r*2>=i)return{type:"simple",page:t,total:e,pages:xl(1,i),start:[],end:[]};const o=Math.max(t-n,r),l=Math.min(t+n,i-r),u=o>r+2,f=l<i-(r+1);return!u&&f?{type:"end",page:t,total:e,start:[],pages:xl(1,n*2+r+2),end:xl(e-(r-1),i)}:u&&!f?{type:"start",page:t,total:e,start:xl(1,r),pages:xl(e-(r+1+2*n),i),end:[]}:{type:"both",page:t,total:e,start:xl(1,r),pages:xl(o,l),end:xl(i-r+1,i)}};var Ju={},Ia={},ar={},wl={},Wj;function DF(){if(Wj)return wl;Wj=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.anumber=t,wl.abytes=n,wl.ahash=r,wl.aexists=i,wl.aoutput=s;function t(o){if(!Number.isSafeInteger(o)||o<0)throw new Error("positive integer expected, got "+o)}function e(o){return o instanceof Uint8Array||ArrayBuffer.isView(o)&&o.constructor.name==="Uint8Array"}function n(o,...l){if(!e(o))throw new Error("Uint8Array expected");if(l.length>0&&!l.includes(o.length))throw new Error("Uint8Array expected of length "+l+", got length="+o.length)}function r(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(o.outputLen),t(o.blockLen)}function i(o,l=!0){if(o.destroyed)throw new Error("Hash instance has been destroyed");if(l&&o.finished)throw new Error("Hash#digest() has already been called")}function s(o,l){n(o);const u=l.outputLen;if(o.length<u)throw new Error("digestInto() expects output buffer of length at least "+u)}return wl}var pn={},Uj;function q9(){if(Uj)return pn;Uj=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.add5L=pn.add5H=pn.add4H=pn.add4L=pn.add3H=pn.add3L=pn.rotlBL=pn.rotlBH=pn.rotlSL=pn.rotlSH=pn.rotr32L=pn.rotr32H=pn.rotrBL=pn.rotrBH=pn.rotrSL=pn.rotrSH=pn.shrSL=pn.shrSH=pn.toBig=void 0,pn.fromBig=n,pn.split=r,pn.add=T;const t=BigInt(2**32-1),e=BigInt(32);function n(R,$=!1){return $?{h:Number(R&t),l:Number(R>>e&t)}:{h:Number(R>>e&t)|0,l:Number(R&t)|0}}function r(R,$=!1){let F=new Uint32Array(R.length),U=new Uint32Array(R.length);for(let V=0;V<R.length;V++){const{h:z,l:te}=n(R[V],$);[F[V],U[V]]=[z,te]}return[F,U]}const i=(R,$)=>BigInt(R>>>0)<<e|BigInt($>>>0);pn.toBig=i;const s=(R,$,F)=>R>>>F;pn.shrSH=s;const o=(R,$,F)=>R<<32-F|$>>>F;pn.shrSL=o;const l=(R,$,F)=>R>>>F|$<<32-F;pn.rotrSH=l;const u=(R,$,F)=>R<<32-F|$>>>F;pn.rotrSL=u;const f=(R,$,F)=>R<<64-F|$>>>F-32;pn.rotrBH=f;const p=(R,$,F)=>R>>>F-32|$<<64-F;pn.rotrBL=p;const h=(R,$)=>$;pn.rotr32H=h;const b=(R,$)=>R;pn.rotr32L=b;const x=(R,$,F)=>R<<F|$>>>32-F;pn.rotlSH=x;const _=(R,$,F)=>$<<F|R>>>32-F;pn.rotlSL=_;const E=(R,$,F)=>$<<F-32|R>>>64-F;pn.rotlBH=E;const I=(R,$,F)=>R<<F-32|$>>>64-F;pn.rotlBL=I;function T(R,$,F,U){const V=($>>>0)+(U>>>0);return{h:R+F+(V/2**32|0)|0,l:V|0}}const j=(R,$,F)=>(R>>>0)+($>>>0)+(F>>>0);pn.add3L=j;const O=(R,$,F,U)=>$+F+U+(R/2**32|0)|0;pn.add3H=O;const A=(R,$,F,U)=>(R>>>0)+($>>>0)+(F>>>0)+(U>>>0);pn.add4L=A;const D=(R,$,F,U,V)=>$+F+U+V+(R/2**32|0)|0;pn.add4H=D;const M=(R,$,F,U,V)=>(R>>>0)+($>>>0)+(F>>>0)+(U>>>0)+(V>>>0);pn.add5L=M;const W=(R,$,F,U,V,z)=>$+F+U+V+z+(R/2**32|0)|0;pn.add5H=W;const P={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:u,rotrBH:f,rotrBL:p,rotr32H:h,rotr32L:b,rotlSH:x,rotlSL:_,rotlBH:E,rotlBL:I,add:T,add3L:j,add3H:O,add4L:A,add4H:D,add5H:W,add5L:M};return pn.default=P,pn}var o0={},yp={},Vj;function A9(){return Vj||(Vj=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.crypto=void 0,yp.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),yp}var Hj;function P9(){return Hj||(Hj=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=r,t.u8=i,t.u32=s,t.createView=o,t.rotr=l,t.rotl=u,t.byteSwap=f,t.byteSwap32=p,t.bytesToHex=b,t.hexToBytes=E,t.asyncLoop=T,t.utf8ToBytes=j,t.toBytes=O,t.concatBytes=A,t.checkOpts=M,t.wrapConstructor=W,t.wrapConstructorWithOpts=P,t.wrapXOFConstructorWithOpts=R,t.randomBytes=$;const e=A9(),n=DF();function r(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function i(F){return new Uint8Array(F.buffer,F.byteOffset,F.byteLength)}function s(F){return new Uint32Array(F.buffer,F.byteOffset,Math.floor(F.byteLength/4))}function o(F){return new DataView(F.buffer,F.byteOffset,F.byteLength)}function l(F,U){return F<<32-U|F>>>U}function u(F,U){return F<<U|F>>>32-U>>>0}t.isLE=new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]===68;function f(F){return F<<24&0xff000000|F<<8&0xff0000|F>>>8&65280|F>>>24&255}t.byteSwapIfBE=t.isLE?F=>F:F=>f(F);function p(F){for(let U=0;U<F.length;U++)F[U]=f(F[U])}const h=Array.from({length:256},(F,U)=>U.toString(16).padStart(2,"0"));function b(F){(0,n.abytes)(F);let U="";for(let V=0;V<F.length;V++)U+=h[F[V]];return U}const x={_0:48,_9:57,A:65,F:70,a:97,f:102};function _(F){if(F>=x._0&&F<=x._9)return F-x._0;if(F>=x.A&&F<=x.F)return F-(x.A-10);if(F>=x.a&&F<=x.f)return F-(x.a-10)}function E(F){if(typeof F!="string")throw new Error("hex string expected, got "+typeof F);const U=F.length,V=U/2;if(U%2)throw new Error("hex string expected, got unpadded hex of length "+U);const z=new Uint8Array(V);for(let te=0,Y=0;te<V;te++,Y+=2){const le=_(F.charCodeAt(Y)),se=_(F.charCodeAt(Y+1));if(le===void 0||se===void 0){const ne=F[Y]+F[Y+1];throw new Error('hex string expected, got non-hex character "'+ne+'" at index '+Y)}z[te]=le*16+se}return z}const I=async()=>{};t.nextTick=I;async function T(F,U,V){let z=Date.now();for(let te=0;te<F;te++){V(te);const Y=Date.now()-z;Y>=0&&Y<U||(await (0,t.nextTick)(),z+=Y)}}function j(F){if(typeof F!="string")throw new Error("utf8ToBytes expected string, got "+typeof F);return new Uint8Array(new TextEncoder().encode(F))}function O(F){return typeof F=="string"&&(F=j(F)),(0,n.abytes)(F),F}function A(...F){let U=0;for(let z=0;z<F.length;z++){const te=F[z];(0,n.abytes)(te),U+=te.length}const V=new Uint8Array(U);for(let z=0,te=0;z<F.length;z++){const Y=F[z];V.set(Y,te),te+=Y.length}return V}class D{clone(){return this._cloneInto()}}t.Hash=D;function M(F,U){if(U!==void 0&&{}.toString.call(U)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(F,U)}function W(F){const U=z=>F().update(O(z)).digest(),V=F();return U.outputLen=V.outputLen,U.blockLen=V.blockLen,U.create=()=>F(),U}function P(F){const U=(z,te)=>F(te).update(O(z)).digest(),V=F({});return U.outputLen=V.outputLen,U.blockLen=V.blockLen,U.create=z=>F(z),U}function R(F){const U=(z,te)=>F(te).update(O(z)).digest(),V=F({});return U.outputLen=V.outputLen,U.blockLen=V.blockLen,U.create=z=>F(z),U}function $(F=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(F));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(F);throw new Error("crypto.getRandomValues must be defined")}}(o0)),o0}var Kj;function F9(){if(Kj)return ar;Kj=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.shake256=ar.shake128=ar.keccak_512=ar.keccak_384=ar.keccak_256=ar.keccak_224=ar.sha3_512=ar.sha3_384=ar.sha3_256=ar.sha3_224=ar.Keccak=void 0,ar.keccakP=I;const t=DF(),e=q9(),n=P9(),r=[],i=[],s=[],o=BigInt(0),l=BigInt(1),u=BigInt(2),f=BigInt(7),p=BigInt(256),h=BigInt(113);for(let A=0,D=l,M=1,W=0;A<24;A++){[M,W]=[W,(2*M+3*W)%5],r.push(2*(5*W+M)),i.push((A+1)*(A+2)/2%64);let P=o;for(let R=0;R<7;R++)D=(D<<l^(D>>f)*h)%p,D&u&&(P^=l<<(l<<BigInt(R))-l);s.push(P)}const[b,x]=(0,e.split)(s,!0),_=(A,D,M)=>M>32?(0,e.rotlBH)(A,D,M):(0,e.rotlSH)(A,D,M),E=(A,D,M)=>M>32?(0,e.rotlBL)(A,D,M):(0,e.rotlSL)(A,D,M);function I(A,D=24){const M=new Uint32Array(10);for(let W=24-D;W<24;W++){for(let $=0;$<10;$++)M[$]=A[$]^A[$+10]^A[$+20]^A[$+30]^A[$+40];for(let $=0;$<10;$+=2){const F=($+8)%10,U=($+2)%10,V=M[U],z=M[U+1],te=_(V,z,1)^M[F],Y=E(V,z,1)^M[F+1];for(let le=0;le<50;le+=10)A[$+le]^=te,A[$+le+1]^=Y}let P=A[2],R=A[3];for(let $=0;$<24;$++){const F=i[$],U=_(P,R,F),V=E(P,R,F),z=r[$];P=A[z],R=A[z+1],A[z]=U,A[z+1]=V}for(let $=0;$<50;$+=10){for(let F=0;F<10;F++)M[F]=A[$+F];for(let F=0;F<10;F++)A[$+F]^=~M[(F+2)%10]&M[(F+4)%10]}A[0]^=b[W],A[1]^=x[W]}M.fill(0)}class T extends n.Hash{constructor(D,M,W,P=!1,R=24){if(super(),this.blockLen=D,this.suffix=M,this.outputLen=W,this.enableXOF=P,this.rounds=R,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.anumber)(W),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,n.u32)(this.state)}keccak(){n.isLE||(0,n.byteSwap32)(this.state32),I(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(D){(0,t.aexists)(this);const{blockLen:M,state:W}=this;D=(0,n.toBytes)(D);const P=D.length;for(let R=0;R<P;){const $=Math.min(M-this.pos,P-R);for(let F=0;F<$;F++)W[this.pos++]^=D[R++];this.pos===M&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:D,suffix:M,pos:W,blockLen:P}=this;D[W]^=M,M&128&&W===P-1&&this.keccak(),D[P-1]^=128,this.keccak()}writeInto(D){(0,t.aexists)(this,!1),(0,t.abytes)(D),this.finish();const M=this.state,{blockLen:W}=this;for(let P=0,R=D.length;P<R;){this.posOut>=W&&this.keccak();const $=Math.min(W-this.posOut,R-P);D.set(M.subarray(this.posOut,this.posOut+$),P),this.posOut+=$,P+=$}return D}xofInto(D){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(D)}xof(D){return(0,t.anumber)(D),this.xofInto(new Uint8Array(D))}digestInto(D){if((0,t.aoutput)(D,this),this.finished)throw new Error("digest() was already called");return this.writeInto(D),this.destroy(),D}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(D){const{blockLen:M,suffix:W,outputLen:P,rounds:R,enableXOF:$}=this;return D||(D=new T(M,W,P,$,R)),D.state32.set(this.state32),D.pos=this.pos,D.posOut=this.posOut,D.finished=this.finished,D.rounds=R,D.suffix=W,D.outputLen=P,D.enableXOF=$,D.destroyed=this.destroyed,D}}ar.Keccak=T;const j=(A,D,M)=>(0,n.wrapConstructor)(()=>new T(D,A,M));ar.sha3_224=j(6,144,224/8),ar.sha3_256=j(6,136,256/8),ar.sha3_384=j(6,104,384/8),ar.sha3_512=j(6,72,512/8),ar.keccak_224=j(1,144,224/8),ar.keccak_256=j(1,136,256/8),ar.keccak_384=j(1,104,384/8),ar.keccak_512=j(1,72,512/8);const O=(A,D,M)=>(0,n.wrapXOFConstructorWithOpts)((W={})=>new T(D,A,W.dkLen===void 0?M:W.dkLen,!0));return ar.shake128=O(31,168,128/8),ar.shake256=O(31,136,256/8),ar}var Qj;function D9(){if(Qj)return Ia;Qj=1;const{sha3_512:t}=F9(),e=24,n=32,r=(_=4,E=Math.random)=>{let I="";for(;I.length<_;)I=I+Math.floor(E()*36).toString(36);return I};function i(_){let E=8n,I=0n;for(const T of _.values()){const j=BigInt(T);I=(I<<E)+j}return I}const s=(_="")=>i(t(_)).toString(36).slice(1),o=Array.from({length:26},(_,E)=>String.fromCharCode(E+97)),l=_=>o[Math.floor(_()*o.length)],u=({globalObj:_=typeof Lc<"u"?Lc:typeof window<"u"?window:{},random:E=Math.random}={})=>{const I=Object.keys(_).toString(),T=I.length?I+r(n,E):r(n,E);return s(T).substring(0,n)},f=_=>()=>_++,p=0x1c6b1f1f,h=({random:_=Math.random,counter:E=f(Math.floor(_()*p)),length:I=e,fingerprint:T=u({random:_})}={})=>function(){const O=l(_),A=Date.now().toString(36),D=E().toString(36),M=r(I,_),W=`${A+M+D+T}`;return`${O+s(W).substring(1,I)}`},b=h(),x=(_,{minLength:E=2,maxLength:I=n}={})=>{const T=_.length,j=/^[0-9a-z]+$/;try{if(typeof _=="string"&&T>=E&&T<=I&&j.test(_))return!0}finally{}return!1};return Ia.getConstants=()=>({defaultLength:e,bigLength:n}),Ia.init=h,Ia.createId=b,Ia.bufToBigInt=i,Ia.createCounter=f,Ia.createFingerprint=u,Ia.isCuid=x,Ia}var Gj;function L9(){if(Gj)return Ju;Gj=1;const{createId:t,init:e,getConstants:n,isCuid:r}=D9();return Ju.createId=t,Ju.init=e,Ju.getConstants=n,Ju.isCuid=r,Ju}var M9=L9();const Tn=M9.createId;var a0,Jj;function $9(){if(Jj)return a0;Jj=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,n)}catch(j){j!==r&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(O){try{var A=t.call(O);return i.test(A)}catch{return!1}},o=function(O){try{return s(O)?!1:(t.call(O),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",f="[object Function]",p="[object GeneratorFunction]",h="[object HTMLAllCollection]",b="[object HTML document.all class]",x="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),I=function(){return!1};if(typeof document=="object"){var T=document.all;l.call(T)===l.call(document.all)&&(I=function(O){if((E||!O)&&(typeof O>"u"||typeof O=="object"))try{var A=l.call(O);return(A===h||A===b||A===x||A===u)&&O("")==null}catch{}return!1})}return a0=e?function(O){if(I(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;try{e(O,null,n)}catch(A){if(A!==r)return!1}return!s(O)&&o(O)}:function(O){if(I(O))return!0;if(!O||typeof O!="function"&&typeof O!="object")return!1;if(_)return o(O);if(s(O))return!1;var A=l.call(O);return A!==f&&A!==p&&!/^\[object HTML/.test(A)?!1:o(O)},a0}var B9=$9();const z9=uo(B9),W9=t=>z9(t);var Ty={exports:{}},U9=Ty.exports,Zj;function V9(){return Zj||(Zj=1,function(t){(function(e,n){t.exports=n()})(U9,function(){var e=Object.prototype.toString;function n(h,b){return h==null?!1:Object.prototype.hasOwnProperty.call(h,b)}function r(h){if(!h||o(h)&&h.length===0)return!0;if(typeof h!="string"){for(var b in h)if(n(h,b))return!1;return!0}return!1}function i(h){return e.call(h)}function s(h){return typeof h=="object"&&i(h)==="[object Object]"}var o=Array.isArray||function(h){return e.call(h)==="[object Array]"};function l(h){return typeof h=="boolean"||i(h)==="[object Boolean]"}function u(h){var b=parseInt(h);return b.toString()===h?b:h}function f(h){h=h||{};var b=function(T){return Object.keys(b).reduce(function(j,O){return O==="create"||typeof b[O]=="function"&&(j[O]=b[O].bind(b,T)),j},{})},x;h.includeInheritedProps?x=function(){return!0}:x=function(T,j){return typeof j=="number"&&Array.isArray(T)||n(T,j)};function _(T,j){if(x(T,j))return T[j]}var E;h.includeInheritedProps?E=function(T,j){typeof j!="string"&&typeof j!="number"&&(j=String(j));var O=_(T,j);if(j==="__proto__"||j==="prototype"||j==="constructor"&&typeof O=="function")throw new Error("For security reasons, object's magic properties cannot be set");return O}:E=function(T,j){return _(T,j)};function I(T,j,O,A){if(typeof j=="number"&&(j=[j]),!j||j.length===0)return T;if(typeof j=="string")return I(T,j.split(".").map(u),O,A);var D=j[0],M=E(T,D);return j.length===1?((M===void 0||!A)&&(T[D]=O),M):(M===void 0&&(typeof j[1]=="number"?T[D]=[]:T[D]={}),I(T[D],j.slice(1),O,A))}return b.has=function(T,j){if(typeof j=="number"?j=[j]:typeof j=="string"&&(j=j.split(".")),!j||j.length===0)return!!T;for(var O=0;O<j.length;O++){var A=u(j[O]);if(typeof A=="number"&&o(T)&&A<T.length||(h.includeInheritedProps?A in Object(T):n(T,A)))T=T[A];else return!1}return!0},b.ensureExists=function(T,j,O){return I(T,j,O,!0)},b.set=function(T,j,O,A){return I(T,j,O,A)},b.insert=function(T,j,O,A){var D=b.get(T,j);A=~~A,o(D)||(D=[],b.set(T,j,D)),D.splice(A,0,O)},b.empty=function(T,j){if(!r(j)&&T!=null){var O,A;if(O=b.get(T,j)){if(typeof O=="string")return b.set(T,j,"");if(l(O))return b.set(T,j,!1);if(typeof O=="number")return b.set(T,j,0);if(o(O))O.length=0;else if(s(O))for(A in O)x(O,A)&&delete O[A];else return b.set(T,j,null)}}},b.push=function(T,j){var O=b.get(T,j);o(O)||(O=[],b.set(T,j,O)),O.push.apply(O,Array.prototype.slice.call(arguments,2))},b.coalesce=function(T,j,O){for(var A,D=0,M=j.length;D<M;D++)if((A=b.get(T,j[D]))!==void 0)return A;return O},b.get=function(T,j,O){if(typeof j=="number"&&(j=[j]),!j||j.length===0)return T;if(T==null)return O;if(typeof j=="string")return b.get(T,j.split("."),O);var A=u(j[0]),D=E(T,A);return D===void 0?O:j.length===1?D:b.get(T[A],j.slice(1),O)},b.del=function(j,O){if(typeof O=="number"&&(O=[O]),j==null||r(O))return j;if(typeof O=="string")return b.del(j,O.split("."));var A=u(O[0]);if(E(j,A),!x(j,A))return j;if(O.length===1)o(j)?j.splice(A,1):delete j[A];else return b.del(j[A],O.slice(1));return j},b}var p=f();return p.create=f,p.withInheritedProps=f({includeInheritedProps:!0}),p})}(Ty)),Ty.exports}var H9=V9();const Yj=uo(H9);function hn({number:t,empty:e="-",fraction:n=2}){if(t==null)return e;try{return t.toLocaleString(void 0,{maximumFractionDigits:n})}catch(r){return console.error("toHumanNumber",t,r),t.toFixed(2)}}const Z1=({error:t,errors:e,onError:n})=>{const r=e.some(s=>s),i=t instanceof Error;return!r&&i&&n(t),r||i},LF=vn({slot:{base:["flex","flex-row","gap-2","items-center","rounded","px-2","py-0.5","hover:bg-slate-100","text-slate-500","hover:text-blue-500","cursor-pointer"]},variant:{variant:{common:[],warning:["text-amber-500","hover:text-amber-600","hover:bg-amber-100"],danger:["text-red-500","hover:text-red-600","hover:bg-red-100"]},disabled:{true:["cursor-not-allowed","text-slate-300","bg-slate-100","hover:bg-slate-100"]}},defaults:{variant:"common",disabled:!1}}),K9=vn({use:LF,slot:{},variant:{},defaults:{}}),jy=({icon:t,iconProps:e,variant:n,tva:r=K9,css:i,children:s,...o})=>{const l=r({...n,css:i}).slots;return d.jsxs("div",{className:l.base(),...o,children:[Cb(t)?d.jsx(rn,{icon:t,...e}):t,s]})};function Db(){return typeof window<"u"}function tc(t){return MF(t)?(t.nodeName||"").toLowerCase():"#document"}function gs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ca(t){var e;return(e=(MF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function MF(t){return Db()?t instanceof Node||t instanceof gs(t).Node:!1}function cr(t){return Db()?t instanceof Element||t instanceof gs(t).Element:!1}function Zr(t){return Db()?t instanceof HTMLElement||t instanceof gs(t).HTMLElement:!1}function IE(t){return!Db()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof gs(t).ShadowRoot}function fm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ao(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Q9(t){return["table","td","th"].includes(tc(t))}function Lb(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Y1(t){const e=Mb(),n=cr(t)?ao(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function G9(t){let e=Ua(t);for(;Zr(e)&&!Da(e);){if(Y1(e))return e;if(Lb(e))return null;e=Ua(e)}return null}function Mb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Da(t){return["html","body","#document"].includes(tc(t))}function ao(t){return gs(t).getComputedStyle(t)}function $b(t){return cr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ua(t){if(tc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IE(t)&&t.host||ca(t);return IE(e)?e.host:e}function $F(t){const e=Ua(t);return Da(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zr(e)&&fm(e)?e:$F(e)}function $l(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=$F(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=gs(i);if(s){const l=CE(o);return e.concat(o,o.visualViewport||[],fm(i)?i:[],l&&n?$l(l):[])}return e.concat(i,$l(i,[],n))}function CE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Io(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function fi(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&IE(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function X1(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function BF(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function zF(t){return t.mozInputSource===0&&t.isTrusted?!0:TE()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function eN(t){return Z9()?!1:!TE()&&t.width===0&&t.height===0||TE()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function WF(){return/apple/i.test(navigator.vendor)}function TE(){const t=/android/i;return t.test(X1())||t.test(BF())}function J9(){return X1().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Z9(){return BF().includes("jsdom/")}function qh(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function Y9(t){return"nativeEvent"in t}function X9(t){return t.matches("html,body")}function pi(t){return t?.ownerDocument||document}function l0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Rl(t){return"composedPath"in t?t.composedPath()[0]:t.target}const eK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function tN(t){return Zr(t)&&t.matches(eK)}function Pi(t){t.preventDefault(),t.stopPropagation()}function UF(t){return t?t.getAttribute("role")==="combobox"&&tN(t):!1}const Wd=Math.min,Cs=Math.max,qv=Math.round,fd=Math.floor,ta=t=>({x:t,y:t}),tK={left:"right",right:"left",bottom:"top",top:"bottom"},nK={start:"end",end:"start"};function Xj(t,e,n){return Cs(t,Wd(e,n))}function pm(t,e){return typeof t=="function"?t(e):t}function Yl(t){return t.split("-")[0]}function hm(t){return t.split("-")[1]}function VF(t){return t==="x"?"y":"x"}function HF(t){return t==="y"?"height":"width"}function iu(t){return["top","bottom"].includes(Yl(t))?"y":"x"}function KF(t){return VF(iu(t))}function rK(t,e,n){n===void 0&&(n=!1);const r=hm(t),i=KF(t),s=HF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Av(o)),[o,Av(o)]}function iK(t){const e=Av(t);return[jE(t),e,jE(e)]}function jE(t){return t.replace(/start|end/g,e=>nK[e])}function sK(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function oK(t,e,n,r){const i=hm(t);let s=sK(Yl(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(jE)))),s}function Av(t){return t.replace(/left|right|bottom|top/g,e=>tK[e])}function aK(t){return{top:0,right:0,bottom:0,left:0,...t}}function lK(t){return typeof t!="number"?aK(t):{top:t,right:t,bottom:t,left:t}}function Pv(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}var cK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fv=cK.join(","),QF=typeof Element>"u",Ud=QF?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Dv=!QF&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Lv=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},uK=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},dK=function(e,n,r){if(Lv(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Fv));return n&&Ud.call(e,Fv)&&i.unshift(e),i=i.filter(r),i},fK=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Lv(o,!1))if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,f=t(u,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:o,candidates:f})}else{var p=Ud.call(o,Fv);p&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var h=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),b=!Lv(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(h&&b){var x=t(h===!0?o.children:h.children,!0,r);r.flatten?i.push.apply(i,x):i.push({scopeParent:o,candidates:x})}else s.unshift.apply(s,o.children)}}return i},GF=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},JF=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||uK(e))&&!GF(e)?0:e.tabIndex},pK=function(e,n){var r=JF(e);return r<0&&n&&!GF(e)?0:r},hK=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},ZF=function(e){return e.tagName==="INPUT"},mK=function(e){return ZF(e)&&e.type==="hidden"},gK=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},yK=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},vK=function(e){if(!e.name)return!0;var n=e.form||Dv(e),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=yK(i,e.form);return!s||s===e},bK=function(e){return ZF(e)&&e.type==="radio"},xK=function(e){return bK(e)&&!vK(e)},wK=function(e){var n,r=e&&Dv(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,l,u;for(s=!!((o=i)!==null&&o!==void 0&&(l=o.ownerDocument)!==null&&l!==void 0&&l.contains(i)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!s&&i;){var f,p,h;r=Dv(i),i=(f=r)===null||f===void 0?void 0:f.host,s=!!((p=i)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(i))}}return s},eO=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},_K=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Ud.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Ud.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,f=Dv(e);if(u&&!u.shadowRoot&&i(u)===!0)return eO(e);e.assignedSlot?e=e.assignedSlot:!u&&f!==e.ownerDocument?e=f.host:e=u}e=l}if(wK(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return eO(e);return!1},SK=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Ud.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},EK=function(e,n){return!(n.disabled||Lv(n)||mK(n)||_K(n,e)||gK(n)||SK(n))},OE=function(e,n){return!(xK(n)||JF(n)<0||!EK(e,n))},NK=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},kK=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,l=o?i.scopeParent:i,u=pK(l,o),f=o?t(i.candidates):l;u===0?o?n.push.apply(n,f):n.push(l):r.push({documentOrder:s,tabIndex:u,item:i,isScope:o,content:f})}),r.sort(hK).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},Bb=function(e,n){n=n||{};var r;return n.getShadowRoot?r=fK([e],n.includeContainer,{filter:OE.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:NK}):r=dK(e,n.includeContainer,OE.bind(null,n)),kK(r)},IK=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ud.call(e,Fv)===!1?!1:OE(n,e)};function tO(t,e,n){let{reference:r,floating:i}=t;const s=iu(e),o=KF(e),l=HF(o),u=Yl(e),f=s==="y",p=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,b=r[l]/2-i[l]/2;let x;switch(u){case"top":x={x:p,y:r.y-i.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:h};break;case"left":x={x:r.x-i.width,y:h};break;default:x={x:r.x,y:r.y}}switch(hm(e)){case"start":x[o]-=b*(n&&f?-1:1);break;case"end":x[o]+=b*(n&&f?-1:1);break}return x}const CK=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),u=await (o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:h}=tO(f,r,u),b=r,x={},_=0;for(let E=0;E<l.length;E++){const{name:I,fn:T}=l[E],{x:j,y:O,data:A,reset:D}=await T({x:p,y:h,initialPlacement:r,placement:b,strategy:i,middlewareData:x,rects:f,platform:o,elements:{reference:t,floating:e}});p=j??p,h=O??h,x={...x,[I]:{...x[I],...A}},D&&_<=50&&(_++,typeof D=="object"&&(D.placement&&(b=D.placement),D.rects&&(f=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:p,y:h}=tO(f,b,u)),E=-1)}return{x:p,y:h,placement:b,strategy:i,middlewareData:x}};async function nN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:p="viewport",elementContext:h="floating",altBoundary:b=!1,padding:x=0}=pm(e,t),_=lK(x),I=l[b?h==="floating"?"reference":"floating":h],T=Pv(await s.getClippingRect({element:(n=await (s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await (s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:f,rootBoundary:p,strategy:u})),j=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,O=await (s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),A=await (s.isElement==null?void 0:s.isElement(O))?await (s.getScale==null?void 0:s.getScale(O))||{x:1,y:1}:{x:1,y:1},D=Pv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:j,offsetParent:O,strategy:u}):j);return{top:(T.top-D.top+_.top)/A.y,bottom:(D.bottom-T.bottom+_.bottom)/A.y,left:(T.left-D.left+_.left)/A.x,right:(D.right-T.right+_.right)/A.x}}const TK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:u,elements:f}=e,{mainAxis:p=!0,crossAxis:h=!0,fallbackPlacements:b,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:E=!0,...I}=pm(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const T=Yl(i),j=iu(l),O=Yl(l)===l,A=await (u.isRTL==null?void 0:u.isRTL(f.floating)),D=b||(O||!E?[Av(l)]:iK(l)),M=_!=="none";!b&&M&&D.push(...oK(l,E,_,A));const W=[l,...D],P=await nN(e,I),R=[];let $=((r=s.flip)==null?void 0:r.overflows)||[];if(p&&R.push(P[T]),h){const z=rK(i,o,A);R.push(P[z[0]],P[z[1]])}if($=[...$,{placement:i,overflows:R}],!R.every(z=>z<=0)){var F,U;const z=(((F=s.flip)==null?void 0:F.index)||0)+1,te=W[z];if(te)return{data:{index:z,overflows:$},reset:{placement:te}};let Y=(U=$.filter(le=>le.overflows[0]<=0).sort((le,se)=>le.overflows[1]-se.overflows[1])[0])==null?void 0:U.placement;if(!Y)switch(x){case"bestFit":{var V;const le=(V=$.filter(se=>{if(M){const ne=iu(se.placement);return ne===j||ne==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(ne=>ne>0).reduce((ne,oe)=>ne+oe,0)]).sort((se,ne)=>se[1]-ne[1])[0])==null?void 0:V[0];le&&(Y=le);break}case"initialPlacement":Y=l;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};async function jK(t,e){const{placement:n,platform:r,elements:i}=t,s=await (r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yl(n),l=hm(n),u=iu(n)==="y",f=["left","top"].includes(o)?-1:1,p=s&&u?-1:1,h=pm(e,t);let{mainAxis:b,crossAxis:x,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(x=l==="end"?_*-1:_),u?{x:x*p,y:b*f}:{x:b*f,y:x*p}}const OK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,u=await jK(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},RK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:I=>{let{x:T,y:j}=I;return{x:T,y:j}}},...u}=pm(t,e),f={x:n,y:r},p=await nN(e,u),h=iu(Yl(i)),b=VF(h);let x=f[b],_=f[h];if(s){const I=b==="y"?"top":"left",T=b==="y"?"bottom":"right",j=x+p[I],O=x-p[T];x=Xj(j,x,O)}if(o){const I=h==="y"?"top":"left",T=h==="y"?"bottom":"right",j=_+p[I],O=_-p[T];_=Xj(j,_,O)}const E=l.fn({...e,[b]:x,[h]:_});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[b]:s,[h]:o}}}}}},qK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:u=()=>{},...f}=pm(t,e),p=await nN(e,f),h=Yl(i),b=hm(i),x=iu(i)==="y",{width:_,height:E}=s.floating;let I,T;h==="top"||h==="bottom"?(I=h,T=b===(await (o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(T=h,I=b==="end"?"top":"bottom");const j=E-p.top-p.bottom,O=_-p.left-p.right,A=Wd(E-p[I],j),D=Wd(_-p[T],O),M=!e.middlewareData.shift;let W=A,P=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=O),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(W=j),M&&!b){const $=Cs(p.left,0),F=Cs(p.right,0),U=Cs(p.top,0),V=Cs(p.bottom,0);x?P=_-2*($!==0||F!==0?$+F:Cs(p.left,p.right)):W=E-2*(U!==0||V!==0?U+V:Cs(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:W});const R=await o.getDimensions(l.floating);return _!==R.width||E!==R.height?{reset:{rects:!0}}:{}}}};function YF(t){const e=ao(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Zr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=qv(n)!==s||qv(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function rN(t){return cr(t)?t:t.contextElement}function Od(t){const e=rN(t);if(!Zr(e))return ta(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=YF(e);let o=(s?qv(n.width):n.width)/r,l=(s?qv(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const AK=ta(0);function XF(t){const e=gs(t);return!Mb()||!e.visualViewport?AK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function PK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==gs(t)?!1:e}function su(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=rN(t);let o=ta(1);e&&(r?cr(r)&&(o=Od(r)):o=Od(t));const l=PK(s,n,r)?XF(s):ta(0);let u=(i.left+l.x)/o.x,f=(i.top+l.y)/o.y,p=i.width/o.x,h=i.height/o.y;if(s){const b=gs(s),x=r&&cr(r)?gs(r):r;let _=b,E=CE(_);for(;E&&r&&x!==_;){const I=Od(E),T=E.getBoundingClientRect(),j=ao(E),O=T.left+(E.clientLeft+parseFloat(j.paddingLeft))*I.x,A=T.top+(E.clientTop+parseFloat(j.paddingTop))*I.y;u*=I.x,f*=I.y,p*=I.x,h*=I.y,u+=O,f+=A,_=gs(E),E=CE(_)}}return Pv({width:p,height:h,x:u,y:f})}function iN(t,e){const n=$b(t).scrollLeft;return e?e.left+n:su(ca(t)).left+n}function eD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:iN(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function FK(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ca(r),l=e?Lb(e.floating):!1;if(r===o||l&&s)return n;let u={scrollLeft:0,scrollTop:0},f=ta(1);const p=ta(0),h=Zr(r);if((h||!h&&!s)&&((tc(r)!=="body"||fm(o))&&(u=$b(r)),Zr(r))){const x=su(r);f=Od(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const b=o&&!h&&!s?eD(o,u,!0):ta(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+p.x+b.x,y:n.y*f.y-u.scrollTop*f.y+p.y+b.y}}function DK(t){return Array.from(t.getClientRects())}function LK(t){const e=ca(t),n=$b(t),r=t.ownerDocument.body,i=Cs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Cs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+iN(t);const l=-n.scrollTop;return ao(r).direction==="rtl"&&(o+=Cs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function MK(t,e){const n=gs(t),r=ca(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){s=i.width,o=i.height;const f=Mb();(!f||f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:l,y:u}}function $K(t,e){const n=su(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Zr(t)?Od(t):ta(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,u=i*s.x,f=r*s.y;return{width:o,height:l,x:u,y:f}}function nO(t,e,n){let r;if(e==="viewport")r=MK(t,n);else if(e==="document")r=LK(ca(t));else if(cr(e))r=$K(e,n);else{const i=XF(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Pv(r)}function tD(t,e){const n=Ua(t);return n===e||!cr(n)||Da(n)?!1:ao(n).position==="fixed"||tD(n,e)}function BK(t,e){const n=e.get(t);if(n)return n;let r=$l(t,[],!1).filter(l=>cr(l)&&tc(l)!=="body"),i=null;const s=ao(t).position==="fixed";let o=s?Ua(t):t;for(;cr(o)&&!Da(o);){const l=ao(o),u=Y1(o);!u&&l.position==="fixed"&&(i=null),(s?!u&&!i:!u&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||fm(o)&&!u&&tD(t,o))?r=r.filter(p=>p!==o):i=l,o=Ua(o)}return e.set(t,r),r}function zK(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Lb(e)?[]:BK(e,this._c):[].concat(n),r],l=o[0],u=o.reduce((f,p)=>{const h=nO(e,p,i);return f.top=Cs(h.top,f.top),f.right=Wd(h.right,f.right),f.bottom=Wd(h.bottom,f.bottom),f.left=Cs(h.left,f.left),f},nO(e,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function WK(t){const{width:e,height:n}=YF(t);return{width:e,height:n}}function UK(t,e,n){const r=Zr(e),i=ca(e),s=n==="fixed",o=su(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const u=ta(0);if(r||!r&&!s)if((tc(e)!=="body"||fm(i))&&(l=$b(e)),r){const b=su(e,!0,s,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else i&&(u.x=iN(i));const f=i&&!r&&!s?eD(i,l):ta(0),p=o.left+l.scrollLeft-u.x-f.x,h=o.top+l.scrollTop-u.y-f.y;return{x:p,y:h,width:o.width,height:o.height}}function c0(t){return ao(t).position==="static"}function rO(t,e){if(!Zr(t)||ao(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ca(t)===n&&(n=n.ownerDocument.body),n}function nD(t,e){const n=gs(t);if(Lb(t))return n;if(!Zr(t)){let i=Ua(t);for(;i&&!Da(i);){if(cr(i)&&!c0(i))return i;i=Ua(i)}return n}let r=rO(t,e);for(;r&&Q9(r)&&c0(r);)r=rO(r,e);return r&&Da(r)&&c0(r)&&!Y1(r)?n:r||G9(t)||n}const VK=async function(t){const e=this.getOffsetParent||nD,n=this.getDimensions,r=await n(t.floating);return{reference:UK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HK(t){return ao(t).direction==="rtl"}const KK={convertOffsetParentRelativeRectToViewportRelativeRect:FK,getDocumentElement:ca,getClippingRect:zK,getOffsetParent:nD,getElementRects:VK,getClientRects:DK,getDimensions:WK,getScale:Od,isElement:cr,isRTL:HK};function rD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function QK(t,e){let n=null,r;const i=ca(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const f=t.getBoundingClientRect(),{left:p,top:h,width:b,height:x}=f;if(l||e(),!b||!x)return;const _=fd(h),E=fd(i.clientWidth-(p+b)),I=fd(i.clientHeight-(h+x)),T=fd(p),O={rootMargin:-_+"px "+-E+"px "+-I+"px "+-T+"px",threshold:Cs(0,Wd(1,u))||1};let A=!0;function D(M){const W=M[0].intersectionRatio;if(W!==u){if(!A)return o();W?o(!1,W):r=setTimeout(()=>{o(!1,1e-7)},1e3)}W===1&&!rD(f,t.getBoundingClientRect())&&o(),A=!1}try{n=new IntersectionObserver(D,{...O,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,O)}n.observe(t)}return o(!0),s}function iD(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=rN(t),p=i||s?[...f?$l(f):[],...$l(e)]:[];p.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),s&&T.addEventListener("resize",n)});const h=f&&l?QK(f,n):null;let b=-1,x=null;o&&(x=new ResizeObserver(T=>{let[j]=T;j&&j.target===f&&x&&(x.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var O;(O=x)==null||O.observe(e)})),n()}),f&&!u&&x.observe(f),x.observe(e));let _,E=u?su(t):null;u&&I();function I(){const T=su(t);E&&!rD(E,T)&&n(),E=T,_=requestAnimationFrame(I)}return n(),()=>{var T;p.forEach(j=>{i&&j.removeEventListener("scroll",n),s&&j.removeEventListener("resize",n)}),h?.(),(T=x)==null||T.disconnect(),x=null,u&&cancelAnimationFrame(_)}}const GK=OK,JK=RK,ZK=TK,YK=qK,XK=(t,e,n)=>{const r=new Map,i={platform:KK,...n},s={...i.platform,_c:r};return CK(t,e,{...i,platform:s})};var Oy=typeof document<"u"?Q.useLayoutEffect:Q.useEffect;function Mv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Mv(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Mv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function sD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function iO(t,e){const n=sD(t);return Math.round(e*n)/n}function u0(t){const e=Q.useRef(t);return Oy(()=>{e.current=t}),e}function eQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:u,open:f}=t,[p,h]=Q.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,x]=Q.useState(r);Mv(b,r)||x(r);const[_,E]=Q.useState(null),[I,T]=Q.useState(null),j=Q.useCallback(se=>{se!==M.current&&(M.current=se,E(se))},[]),O=Q.useCallback(se=>{se!==W.current&&(W.current=se,T(se))},[]),A=s||_,D=o||I,M=Q.useRef(null),W=Q.useRef(null),P=Q.useRef(p),R=u!=null,$=u0(u),F=u0(i),U=u0(f),V=Q.useCallback(()=>{if(!M.current||!W.current)return;const se={placement:e,strategy:n,middleware:b};F.current&&(se.platform=F.current),XK(M.current,W.current,se).then(ne=>{const oe={...ne,isPositioned:U.current!==!1};z.current&&!Mv(P.current,oe)&&(P.current=oe,hb.flushSync(()=>{h(oe)}))})},[b,e,n,F,U]);Oy(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(se=>({...se,isPositioned:!1})))},[f]);const z=Q.useRef(!1);Oy(()=>(z.current=!0,()=>{z.current=!1}),[]),Oy(()=>{if(A&&(M.current=A),D&&(W.current=D),A&&D){if($.current)return $.current(A,D,V);V()}},[A,D,V,$,R]);const te=Q.useMemo(()=>({reference:M,floating:W,setReference:j,setFloating:O}),[j,O]),Y=Q.useMemo(()=>({reference:A,floating:D}),[A,D]),le=Q.useMemo(()=>{const se={position:n,left:0,top:0};if(!Y.floating)return se;const ne=iO(Y.floating,p.x),oe=iO(Y.floating,p.y);return l?{...se,transform:"translate("+ne+"px, "+oe+"px)",...sD(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:oe}},[n,l,Y.floating,p.x,p.y]);return Q.useMemo(()=>({...p,update:V,refs:te,elements:Y,floatingStyles:le}),[p,V,te,Y,le])}const oD=(t,e)=>({...GK(t),options:[t,e]}),tQ=(t,e)=>({...JK(t),options:[t,e]}),aD=(t,e)=>({...ZK(t),options:[t,e]}),nQ=(t,e)=>({...YK(t),options:[t,e]});function sO(t){return Q.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})},t)}const lD={...bB},rQ=lD.useInsertionEffect,iQ=rQ||(t=>t());function Li(t){const e=Q.useRef(()=>{});return iQ(()=>{e.current=t}),Q.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}const sN="ArrowUp",mm="ArrowDown",Bl="ArrowLeft",zl="ArrowRight";function Wg(t,e,n){return Math.floor(t/e)!==n}function th(t,e){return e<0||e>=t.current.length}function d0(t,e){return wi(t,{disabledIndices:e})}function oO(t,e){return wi(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function wi(t,e){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=e===void 0?{}:e;const o=t.current;let l=n;do l+=r?-s:s;while(l>=0&&l<=o.length-1&&Ry(o,l,i));return l}function sQ(t,e){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:l,minIndex:u,maxIndex:f,prevIndex:p,stopEvent:h=!1}=e,b=p;if(n.key===sN){if(h&&Pi(n),p===-1)b=f;else if(b=wi(t,{startingIndex:b,amount:o,decrement:!0,disabledIndices:l}),i&&(p-o<u||b<0)){const x=p%o,_=f%o,E=f-(_-x);_===x?b=f:b=_>x?E:E-o}th(t,b)&&(b=p)}if(n.key===mm&&(h&&Pi(n),p===-1?b=u:(b=wi(t,{startingIndex:p,amount:o,disabledIndices:l}),i&&p+o>f&&(b=wi(t,{startingIndex:p%o-o,amount:o,disabledIndices:l}))),th(t,b)&&(b=p)),r==="both"){const x=fd(p/o);n.key===(s?Bl:zl)&&(h&&Pi(n),p%o!==o-1?(b=wi(t,{startingIndex:p,disabledIndices:l}),i&&Wg(b,o,x)&&(b=wi(t,{startingIndex:p-p%o-1,disabledIndices:l}))):i&&(b=wi(t,{startingIndex:p-p%o-1,disabledIndices:l})),Wg(b,o,x)&&(b=p)),n.key===(s?zl:Bl)&&(h&&Pi(n),p%o!==0?(b=wi(t,{startingIndex:p,decrement:!0,disabledIndices:l}),i&&Wg(b,o,x)&&(b=wi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l}))):i&&(b=wi(t,{startingIndex:p+(o-p%o),decrement:!0,disabledIndices:l})),Wg(b,o,x)&&(b=p));const _=fd(f/o)===x;th(t,b)&&(i&&_?b=n.key===(s?zl:Bl)?f:wi(t,{startingIndex:p-p%o-1,disabledIndices:l}):b=p)}return b}function oQ(t,e,n){const r=[];let i=0;return t.forEach((s,o)=>{let{width:l,height:u}=s,f=!1;for(n&&(i=0);!f;){const p=[];for(let h=0;h<l;h++)for(let b=0;b<u;b++)p.push(i+h+b*e);i%e+l<=e&&p.every(h=>r[h]==null)?(p.forEach(h=>{r[h]=o}),f=!0):i++}}),[...r]}function aQ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t)}}function lQ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function Ry(t,e,n){if(n)return n.includes(e);const r=t[e];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}var vr=typeof document<"u"?Q.useLayoutEffect:Q.useEffect;let aO=!1,cQ=0;const lO=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+cQ++;function uQ(){const[t,e]=Q.useState(()=>aO?lO():void 0);return vr(()=>{t==null&&e(lO())},[]),Q.useEffect(()=>{aO=!0},[]),t}const dQ=lD.useId,oN=dQ||uQ;function cD(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const uD=Q.createContext(null),dD=Q.createContext(null),gm=()=>{var t;return((t=Q.useContext(uD))==null?void 0:t.id)||null},pf=()=>Q.useContext(dD);function fQ(t){const e=oN(),n=pf(),i=gm();return vr(()=>{if(!e)return;const s={id:e,parentId:i};return n?.addNode(s),()=>{n?.removeNode(s)}},[n,e,i]),e}function pQ(t){const{children:e,id:n}=t,r=gm();return d.jsx(uD.Provider,{value:Q.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function hQ(t){const{children:e}=t,n=Q.useRef([]),r=Q.useCallback(o=>{n.current=[...n.current,o]},[]),i=Q.useCallback(o=>{n.current=n.current.filter(l=>l!==o)},[]),s=Q.useState(()=>cD())[0];return d.jsx(dD.Provider,{value:Q.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:s}),[r,i,s]),children:e})}function ou(t){return"data-floating-ui-"+t}function Mi(t){const e=Q.useRef(t);return vr(()=>{e.current=t}),e}const cO=ou("safe-polygon");function f0(t,e,n){return n&&!qh(n)?0:typeof t=="number"?t:t?.[e]}function mQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=t,{enabled:l=!0,delay:u=0,handleClose:f=null,mouseOnly:p=!1,restMs:h=0,move:b=!0}=e,x=pf(),_=gm(),E=Mi(f),I=Mi(u),T=Mi(n),j=Q.useRef(),O=Q.useRef(-1),A=Q.useRef(),D=Q.useRef(-1),M=Q.useRef(!0),W=Q.useRef(!1),P=Q.useRef(()=>{}),R=Q.useRef(!1),$=Q.useCallback(()=>{var le;const se=(le=i.current.openEvent)==null?void 0:le.type;return se?.includes("mouse")&&se!=="mousedown"},[i]);Q.useEffect(()=>{if(!l)return;function le(se){let{open:ne}=se;ne||(clearTimeout(O.current),clearTimeout(D.current),M.current=!0,R.current=!1)}return s.on("openchange",le),()=>{s.off("openchange",le)}},[l,s]),Q.useEffect(()=>{if(!l||!E.current||!n)return;function le(ne){$()&&r(!1,ne,"hover")}const se=pi(o.floating).documentElement;return se.addEventListener("mouseleave",le),()=>{se.removeEventListener("mouseleave",le)}},[o.floating,n,r,l,E,$]);const F=Q.useCallback(function(le,se,ne){se===void 0&&(se=!0),ne===void 0&&(ne="hover");const oe=f0(I.current,"close",j.current);oe&&!A.current?(clearTimeout(O.current),O.current=window.setTimeout(()=>r(!1,le,ne),oe)):se&&(clearTimeout(O.current),r(!1,le,ne))},[I,r]),U=Li(()=>{P.current(),A.current=void 0}),V=Li(()=>{if(W.current){const le=pi(o.floating).body;le.style.pointerEvents="",le.removeAttribute(cO),W.current=!1}}),z=Li(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);Q.useEffect(()=>{if(!l)return;function le(ee){if(clearTimeout(O.current),M.current=!1,p&&!qh(j.current)||h>0&&!f0(I.current,"open"))return;const ue=f0(I.current,"open",j.current);ue?O.current=window.setTimeout(()=>{T.current||r(!0,ee,"hover")},ue):n||r(!0,ee,"hover")}function se(ee){if(z())return;P.current();const ue=pi(o.floating);if(clearTimeout(D.current),R.current=!1,E.current&&i.current.floatingContext){n||clearTimeout(O.current),A.current=E.current({...i.current.floatingContext,tree:x,x:ee.clientX,y:ee.clientY,onClose(){V(),U(),z()||F(ee,!0,"safe-polygon")}});const ye=A.current;ue.addEventListener("mousemove",ye),P.current=()=>{ue.removeEventListener("mousemove",ye)};return}(j.current==="touch"?!fi(o.floating,ee.relatedTarget):!0)&&F(ee)}function ne(ee){z()||i.current.floatingContext&&(E.current==null||E.current({...i.current.floatingContext,tree:x,x:ee.clientX,y:ee.clientY,onClose(){V(),U(),z()||F(ee)}})(ee))}if(cr(o.domReference)){var oe;const ee=o.domReference;return n&&ee.addEventListener("mouseleave",ne),(oe=o.floating)==null||oe.addEventListener("mouseleave",ne),b&&ee.addEventListener("mousemove",le,{once:!0}),ee.addEventListener("mouseenter",le),ee.addEventListener("mouseleave",se),()=>{var ue;n&&ee.removeEventListener("mouseleave",ne),(ue=o.floating)==null||ue.removeEventListener("mouseleave",ne),b&&ee.removeEventListener("mousemove",le),ee.removeEventListener("mouseenter",le),ee.removeEventListener("mouseleave",se)}}},[o,l,t,p,h,b,F,U,V,r,n,T,x,I,E,i,z]),vr(()=>{var le;if(l&&n&&(le=E.current)!=null&&le.__options.blockPointerEvents&&$()){W.current=!0;const ne=o.floating;if(cr(o.domReference)&&ne){var se;const oe=pi(o.floating).body;oe.setAttribute(cO,"");const ee=o.domReference,ue=x==null||(se=x.nodesRef.current.find(de=>de.id===_))==null||(se=se.context)==null?void 0:se.elements.floating;return ue&&(ue.style.pointerEvents=""),oe.style.pointerEvents="none",ee.style.pointerEvents="auto",ne.style.pointerEvents="auto",()=>{oe.style.pointerEvents="",ee.style.pointerEvents="",ne.style.pointerEvents=""}}}},[l,n,_,o,x,E,$]),vr(()=>{n||(j.current=void 0,R.current=!1,U(),V())},[n,U,V]),Q.useEffect(()=>()=>{U(),clearTimeout(O.current),clearTimeout(D.current),V()},[l,o.domReference,U,V]);const te=Q.useMemo(()=>{function le(se){j.current=se.pointerType}return{onPointerDown:le,onPointerEnter:le,onMouseMove(se){const{nativeEvent:ne}=se;function oe(){!M.current&&!T.current&&r(!0,ne,"hover")}p&&!qh(j.current)||n||h===0||R.current&&se.movementX**2+se.movementY**2<2||(clearTimeout(D.current),j.current==="touch"?oe():(R.current=!0,D.current=window.setTimeout(oe,h)))}}},[p,r,n,T,h]),Y=Q.useMemo(()=>({onMouseEnter(){clearTimeout(O.current)},onMouseLeave(le){z()||F(le.nativeEvent,!1)}}),[F,z]);return Q.useMemo(()=>l?{reference:te,floating:Y}:{},[l,te,Y])}let uO=0;function Rc(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(uO);const s=()=>t?.focus({preventScroll:n});i?s():uO=requestAnimationFrame(s)}function dO(t,e){var n;let r=[],i=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;i;){const s=t.find(o=>o.id===i);i=s?.parentId,s&&(r=r.concat(s))}return r}function Rd(t,e){let n=t.filter(i=>{var s;return i.parentId===e&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var l;return i.parentId===o.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}function gQ(t,e){let n,r=-1;function i(s,o){o>r&&(n=s,r=o),Rd(t,s).forEach(u=>{i(u.id,o+1)})}return i(e,0),t.find(s=>s.id===n)}let Zu=new WeakMap,Ug=new WeakSet,Vg={},p0=0;const yQ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,fD=t=>t&&(t.host||fD(t.parentNode)),vQ=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=fD(n);return t.contains(r)?r:null}).filter(n=>n!=null);function bQ(t,e,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=vQ(e,t),l=new Set,u=new Set(o),f=[];Vg[i]||(Vg[i]=new WeakMap);const p=Vg[i];o.forEach(h),b(e),l.clear();function h(x){!x||l.has(x)||(l.add(x),x.parentNode&&h(x.parentNode))}function b(x){!x||u.has(x)||[].forEach.call(x.children,_=>{if(tc(_)!=="script")if(l.has(_))b(_);else{const E=s?_.getAttribute(s):null,I=E!==null&&E!=="false",T=Zu.get(_)||0,j=s?T+1:T,O=(p.get(_)||0)+1;Zu.set(_,j),p.set(_,O),f.push(_),j===1&&I&&Ug.add(_),O===1&&_.setAttribute(i,""),!I&&s&&_.setAttribute(s,"true")}})}return p0++,()=>{f.forEach(x=>{const _=Zu.get(x)||0,E=s?_-1:_,I=(p.get(x)||0)-1;Zu.set(x,E),p.set(x,I),E||(!Ug.has(x)&&s&&x.removeAttribute(s),Ug.delete(x)),I||x.removeAttribute(i)}),p0--,p0||(Zu=new WeakMap,Zu=new WeakMap,Ug=new WeakSet,Vg={})}}function fO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=pi(t[0]).body;return bQ(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const zb=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function pD(t,e){const n=Bb(t,zb());e==="prev"&&n.reverse();const r=n.indexOf(Io(pi(t)));return n.slice(r+1)[0]}function hD(){return pD(document.body,"next")}function mD(){return pD(document.body,"prev")}function nh(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!fi(n,r)}function xQ(t){Bb(t,zb()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function pO(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Wb={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let wQ;function hO(t){t.key==="Tab"&&(t.target,clearTimeout(wQ))}const $v=Q.forwardRef(function(e,n){const[r,i]=Q.useState();vr(()=>(WF()&&i("button"),document.addEventListener("keydown",hO),()=>{document.removeEventListener("keydown",hO)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ou("focus-guard")]:"",style:Wb};return d.jsx("span",{...e,...s})}),gD=Q.createContext(null),mO=ou("portal");function _Q(t){t===void 0&&(t={});const{id:e,root:n}=t,r=oN(),i=yD(),[s,o]=Q.useState(null),l=Q.useRef(null);return vr(()=>()=>{s?.remove(),queueMicrotask(()=>{l.current=null})},[s]),vr(()=>{if(!r||l.current)return;const u=e?document.getElementById(e):null;if(!u)return;const f=document.createElement("div");f.id=r,f.setAttribute(mO,""),u.appendChild(f),l.current=f,o(f)},[e,r]),vr(()=>{if(n===null||!r||l.current)return;let u=n||i?.portalNode;u&&!cr(u)&&(u=u.current),u=u||document.body;let f=null;e&&(f=document.createElement("div"),f.id=e,u.appendChild(f));const p=document.createElement("div");p.id=r,p.setAttribute(mO,""),u=f||u,u.appendChild(p),l.current=p,o(p)},[e,n,r,i]),s}function aN(t){const{children:e,id:n,root:r,preserveTabOrder:i=!0}=t,s=_Q({id:n,root:r}),[o,l]=Q.useState(null),u=Q.useRef(null),f=Q.useRef(null),p=Q.useRef(null),h=Q.useRef(null),b=o?.modal,x=o?.open,_=!!o&&!o.modal&&o.open&&i&&!!(r||s);return Q.useEffect(()=>{if(!s||!i||b)return;function E(I){s&&nh(I)&&(I.type==="focusin"?pO:xQ)(s)}return s.addEventListener("focusin",E,!0),s.addEventListener("focusout",E,!0),()=>{s.removeEventListener("focusin",E,!0),s.removeEventListener("focusout",E,!0)}},[s,i,b]),Q.useEffect(()=>{s&&(x||pO(s))},[x,s]),d.jsxs(gD.Provider,{value:Q.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:u,afterOutsideRef:f,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:l}),[i,s]),children:[_&&s&&d.jsx($v,{"data-type":"outside",ref:u,onFocus:E=>{if(nh(E,s)){var I;(I=p.current)==null||I.focus()}else{const T=mD()||o?.domReference;T?.focus()}}}),_&&s&&d.jsx("span",{"aria-owns":s.id,style:Wb}),s&&hb.createPortal(e,s),_&&s&&d.jsx($v,{"data-type":"outside",ref:f,onFocus:E=>{if(nh(E,s)){var I;(I=h.current)==null||I.focus()}else{const T=hD()||o?.domReference;T?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,E.nativeEvent,"focus-out")}}})]})}const yD=()=>Q.useContext(gD),RE="data-floating-ui-focusable";function qE(t){return t?t.hasAttribute(RE)?t:t.querySelector("["+RE+"]")||t:null}const SQ=20;let qc=[];function h0(t){qc=qc.filter(e=>e.isConnected),t&&tc(t)!=="body"&&(qc.push(t),qc.length>SQ&&(qc=qc.slice(-20)))}function gO(){return qc.slice().reverse().find(t=>t.isConnected)}function EQ(t){const e=zb();return IK(t,e)?t:Bb(t,e)[0]||t}const NQ=Q.forwardRef(function(e,n){return d.jsx("button",{...e,type:"button",ref:n,tabIndex:-1,style:Wb})});function vD(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:o=0,returnFocus:l=!0,restoreFocus:u=!1,modal:f=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:h=!0,outsideElementsInert:b=!1}=t,{open:x,onOpenChange:_,events:E,dataRef:I,elements:{domReference:T,floating:j}}=e,O=Li(()=>{var De;return(De=I.current.floatingContext)==null?void 0:De.nodeId}),A=typeof o=="number"&&o<0,D=UF(T)&&A,M=yQ(),W=M?s:!0,P=!W||M&&b,R=Mi(i),$=Mi(o),F=Mi(l),U=pf(),V=yD(),z=Q.useRef(null),te=Q.useRef(null),Y=Q.useRef(!1),le=Q.useRef(!1),se=Q.useRef(-1),ne=V!=null,oe=qE(j),ee=Li(function(De){return De===void 0&&(De=oe),De?Bb(De,zb()):[]}),ue=Li(De=>{const Je=ee(De);return R.current.map(Xe=>T&&Xe==="reference"?T:oe&&Xe==="floating"?oe:Je).filter(Boolean).flat()});Q.useEffect(()=>{if(r||!f)return;function De(Xe){if(Xe.key==="Tab"){fi(oe,Io(pi(oe)))&&ee().length===0&&!D&&Pi(Xe);const Ue=ue(),ct=Rl(Xe);R.current[0]==="reference"&&ct===T&&(Pi(Xe),Xe.shiftKey?Rc(Ue[Ue.length-1]):Rc(Ue[1])),R.current[1]==="floating"&&ct===oe&&Xe.shiftKey&&(Pi(Xe),Rc(Ue[0]))}}const Je=pi(oe);return Je.addEventListener("keydown",De),()=>{Je.removeEventListener("keydown",De)}},[r,T,oe,f,R,D,ee,ue]),Q.useEffect(()=>{if(r||!j)return;function De(Je){const Xe=Rl(Je),ct=ee().indexOf(Xe);ct!==-1&&(se.current=ct)}return j.addEventListener("focusin",De),()=>{j.removeEventListener("focusin",De)}},[r,j,ee]),Q.useEffect(()=>{if(r||!h)return;function De(){le.current=!0,setTimeout(()=>{le.current=!1})}function Je(Xe){const Ue=Xe.relatedTarget;queueMicrotask(()=>{const ct=O(),_t=!(fi(T,Ue)||fi(j,Ue)||fi(Ue,j)||fi(V?.portalNode,Ue)||Ue!=null&&Ue.hasAttribute(ou("focus-guard"))||U&&(Rd(U.nodesRef.current,ct).find(jt=>{var Vt,nn;return fi((Vt=jt.context)==null?void 0:Vt.elements.floating,Ue)||fi((nn=jt.context)==null?void 0:nn.elements.domReference,Ue)})||dO(U.nodesRef.current,ct).find(jt=>{var Vt,nn,xe;return[(Vt=jt.context)==null?void 0:Vt.elements.floating,qE((nn=jt.context)==null?void 0:nn.elements.floating)].includes(Ue)||((xe=jt.context)==null?void 0:xe.elements.domReference)===Ue})));if(u&&_t&&Io(pi(oe))===pi(oe).body){Zr(oe)&&oe.focus();const jt=se.current,Vt=ee(),nn=Vt[jt]||Vt[Vt.length-1]||oe;Zr(nn)&&nn.focus()}(D||!f)&&Ue&&_t&&!le.current&&Ue!==gO()&&(Y.current=!0,_(!1,Xe,"focus-out"))})}if(j&&Zr(T))return T.addEventListener("focusout",Je),T.addEventListener("pointerdown",De),j.addEventListener("focusout",Je),()=>{T.removeEventListener("focusout",Je),T.removeEventListener("pointerdown",De),j.removeEventListener("focusout",Je)}},[r,T,j,oe,f,U,V,_,h,u,ee,D,O]);const de=Q.useRef(null),ye=Q.useRef(null),we=sO([de,V?.beforeInsideRef]),Ne=sO([ye,V?.afterInsideRef]);Q.useEffect(()=>{var De;if(r||!j)return;const Je=Array.from((V==null||(De=V.portalNode)==null?void 0:De.querySelectorAll("["+ou("portal")+"]"))||[]),Xe=U&&!f?dO(U?.nodesRef.current,O()).map(_t=>{var jt;return(jt=_t.context)==null?void 0:jt.elements.floating}):[],Ue=[j,...Je,...Xe,z.current,te.current,de.current,ye.current,V?.beforeOutsideRef.current,V?.afterOutsideRef.current,R.current.includes("reference")||D?T:null].filter(_t=>_t!=null),ct=f||D?fO(Ue,!P,P):fO(Ue);return()=>{ct()}},[r,T,j,f,R,V,D,W,P,U,O]),vr(()=>{if(r||!Zr(oe))return;const De=pi(oe),Je=Io(De);queueMicrotask(()=>{const Xe=ue(oe),Ue=$.current,ct=(typeof Ue=="number"?Xe[Ue]:Ue.current)||oe,_t=fi(oe,Je);!A&&!_t&&x&&Rc(ct,{preventScroll:ct===oe})})},[r,x,oe,A,ue,$]),vr(()=>{if(r||!oe)return;let De=!1;const Je=pi(oe),Xe=Io(Je);let ct=I.current.openEvent;h0(Xe);function _t(nn){let{open:xe,reason:ve,event:ke,nested:Ae}=nn;xe&&(ct=ke),ve==="escape-key"&&T&&h0(T),["hover","safe-polygon"].includes(ve)&&ke.type==="mouseleave"&&(Y.current=!0),ve==="outside-press"&&(Ae?(Y.current=!1,De=!0):Y.current=!(zF(ke)||eN(ke)))}E.on("openchange",_t);const jt=Je.createElement("span");jt.setAttribute("tabindex","-1"),jt.setAttribute("aria-hidden","true"),Object.assign(jt.style,Wb),ne&&T&&T.insertAdjacentElement("afterend",jt);function Vt(){return typeof F.current=="boolean"?gO()||jt:F.current.current||jt}return()=>{E.off("openchange",_t);const nn=Io(Je),xe=fi(j,nn)||U&&Rd(U.nodesRef.current,O()).some(Ae=>{var Ve;return fi((Ve=Ae.context)==null?void 0:Ve.elements.floating,nn)});(xe||ct&&["click","mousedown"].includes(ct.type))&&T&&h0(T);const ke=Vt();queueMicrotask(()=>{const Ae=EQ(ke);F.current&&!Y.current&&Zr(Ae)&&(!(Ae!==nn&&nn!==Je.body)||xe)&&Ae.focus({preventScroll:De}),jt.remove()})}},[r,j,oe,F,I,E,U,ne,T,O]),Q.useEffect(()=>{queueMicrotask(()=>{Y.current=!1})},[r]),vr(()=>{if(!r&&V)return V.setFocusManagerState({modal:f,closeOnFocusOut:h,open:x,onOpenChange:_,domReference:T}),()=>{V.setFocusManagerState(null)}},[r,V,f,x,_,h,T]),vr(()=>{if(r||!oe||typeof MutationObserver!="function"||A)return;const De=()=>{const Xe=oe.getAttribute("tabindex"),Ue=ee(),ct=Io(pi(j)),_t=Ue.indexOf(ct);_t!==-1&&(se.current=_t),R.current.includes("floating")||ct!==T&&Ue.length===0?Xe!=="0"&&oe.setAttribute("tabindex","0"):Xe!=="-1"&&oe.setAttribute("tabindex","-1")};De();const Je=new MutationObserver(De);return Je.observe(oe,{childList:!0,subtree:!0,attributes:!0}),()=>{Je.disconnect()}},[r,j,oe,T,R,ee,A]);function ze(De){return r||!p||!f?null:d.jsx(NQ,{ref:De==="start"?z:te,onClick:Je=>_(!1,Je.nativeEvent),children:typeof p=="string"?p:"Dismiss"})}const Oe=!r&&W&&(f?!D:!0)&&(ne||f);return d.jsxs(d.Fragment,{children:[Oe&&d.jsx($v,{"data-type":"inside",ref:we,onFocus:De=>{if(f){const Xe=ue();Rc(i[0]==="reference"?Xe[0]:Xe[Xe.length-1])}else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(Y.current=!1,nh(De,V.portalNode)){const Xe=hD()||T;Xe?.focus()}else{var Je;(Je=V.beforeOutsideRef.current)==null||Je.focus()}}}),!D&&ze("start"),n,ze("end"),Oe&&d.jsx($v,{"data-type":"inside",ref:Ne,onFocus:De=>{if(f)Rc(ue()[0]);else if(V!=null&&V.preserveTabOrder&&V.portalNode)if(h&&(Y.current=!0),nh(De,V.portalNode)){const Xe=mD()||T;Xe?.focus()}else{var Je;(Je=V.afterOutsideRef.current)==null||Je.focus()}}})]})}let Hg=0;function kQ(){const t=/iP(hone|ad|od)|iOS/.test(X1()),e=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,s=e.left?parseFloat(e.left):window.scrollX,o=e.top?parseFloat(e.top):window.scrollY;if(e.overflow="hidden",i&&(e[r]=i+"px"),t){var l,u;const f=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,p=((u=window.visualViewport)==null?void 0:u.offsetTop)||0;Object.assign(e,{position:"fixed",top:-(o-Math.floor(p))+"px",left:-(s-Math.floor(f))+"px",right:"0"})}return()=>{Object.assign(e,{overflow:"",[r]:""}),t&&(Object.assign(e,{position:"",top:"",left:"",right:""}),window.scrollTo(s,o))}}let yO=()=>{};const IQ=Q.forwardRef(function(e,n){const{lockScroll:r=!1,...i}=e;return vr(()=>{if(r)return Hg++,Hg===1&&(yO=kQ()),()=>{Hg--,Hg===0&&yO()}},[r]),d.jsx("div",{ref:n,...i,style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}})});function vO(t){return Zr(t.target)&&t.target.tagName==="BUTTON"}function bO(t){return tN(t)}function lN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=t,{enabled:o=!0,event:l="click",toggle:u=!0,ignoreMouse:f=!1,keyboardHandlers:p=!0,stickIfOpen:h=!0}=e,b=Q.useRef(),x=Q.useRef(!1),_=Q.useMemo(()=>({onPointerDown(E){b.current=E.pointerType},onMouseDown(E){const I=b.current;E.button===0&&l!=="click"&&(qh(I,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const I=b.current;if(l==="mousedown"&&b.current){b.current=void 0;return}qh(I,!0)&&f||(n&&u&&(!(i.current.openEvent&&h)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){b.current=void 0,!(E.defaultPrevented||!p||vO(E))&&(E.key===" "&&!bO(s)&&(E.preventDefault(),x.current=!0),E.key==="Enter"&&r(!(n&&u),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!p||vO(E)||bO(s)||E.key===" "&&x.current&&(x.current=!1,r(!(n&&u),E.nativeEvent,"click"))}}),[i,s,l,f,p,r,n,h,u]);return Q.useMemo(()=>o?{reference:_}:{},[o,_])}const CQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},TQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xO=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function cN(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=t,{enabled:o=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:f="pointerdown",referencePress:p=!1,referencePressEvent:h="pointerdown",ancestorScroll:b=!1,bubbles:x,capture:_}=e,E=pf(),I=Li(typeof u=="function"?u:()=>!1),T=typeof u=="function"?I:u,j=Q.useRef(!1),O=Q.useRef(!1),{escapeKey:A,outsidePress:D}=xO(x),{escapeKey:M,outsidePress:W}=xO(_),P=Q.useRef(!1),R=Li(te=>{var Y;if(!n||!o||!l||te.key!=="Escape"||P.current)return;const le=(Y=s.current.floatingContext)==null?void 0:Y.nodeId,se=E?Rd(E.nodesRef.current,le):[];if(!A&&(te.stopPropagation(),se.length>0)){let ne=!0;if(se.forEach(oe=>{var ee;if((ee=oe.context)!=null&&ee.open&&!oe.context.dataRef.current.__escapeKeyBubbles){ne=!1;return}}),!ne)return}r(!1,Y9(te)?te.nativeEvent:te,"escape-key")}),$=Li(te=>{var Y;const le=()=>{var se;R(te),(se=Rl(te))==null||se.removeEventListener("keydown",le)};(Y=Rl(te))==null||Y.addEventListener("keydown",le)}),F=Li(te=>{var Y;const le=j.current;j.current=!1;const se=O.current;if(O.current=!1,f==="click"&&se||le||typeof T=="function"&&!T(te))return;const ne=Rl(te),oe="["+ou("inert")+"]",ee=pi(i.floating).querySelectorAll(oe);let ue=cr(ne)?ne:null;for(;ue&&!Da(ue);){const Ne=Ua(ue);if(Da(Ne)||!cr(Ne))break;ue=Ne}if(ee.length&&cr(ne)&&!X9(ne)&&!fi(ne,i.floating)&&Array.from(ee).every(Ne=>!fi(ue,Ne)))return;if(Zr(ne)&&z){const Ne=Da(ne),ze=ao(ne),Oe=/auto|scroll/,De=Ne||Oe.test(ze.overflowX),Je=Ne||Oe.test(ze.overflowY),Xe=De&&ne.clientWidth>0&&ne.scrollWidth>ne.clientWidth,Ue=Je&&ne.clientHeight>0&&ne.scrollHeight>ne.clientHeight,ct=ze.direction==="rtl",_t=Ue&&(ct?te.offsetX<=ne.offsetWidth-ne.clientWidth:te.offsetX>ne.clientWidth),jt=Xe&&te.offsetY>ne.clientHeight;if(_t||jt)return}const de=(Y=s.current.floatingContext)==null?void 0:Y.nodeId,ye=E&&Rd(E.nodesRef.current,de).some(Ne=>{var ze;return l0(te,(ze=Ne.context)==null?void 0:ze.elements.floating)});if(l0(te,i.floating)||l0(te,i.domReference)||ye)return;const we=E?Rd(E.nodesRef.current,de):[];if(we.length>0){let Ne=!0;if(we.forEach(ze=>{var Oe;if((Oe=ze.context)!=null&&Oe.open&&!ze.context.dataRef.current.__outsidePressBubbles){Ne=!1;return}}),!Ne)return}r(!1,te,"outside-press")}),U=Li(te=>{var Y;const le=()=>{var se;F(te),(se=Rl(te))==null||se.removeEventListener(f,le)};(Y=Rl(te))==null||Y.addEventListener(f,le)});Q.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=A,s.current.__outsidePressBubbles=D;let te=-1;function Y(ee){r(!1,ee,"ancestor-scroll")}function le(){window.clearTimeout(te),P.current=!0}function se(){te=window.setTimeout(()=>{P.current=!1},Mb()?5:0)}const ne=pi(i.floating);l&&(ne.addEventListener("keydown",M?$:R,M),ne.addEventListener("compositionstart",le),ne.addEventListener("compositionend",se)),T&&ne.addEventListener(f,W?U:F,W);let oe=[];return b&&(cr(i.domReference)&&(oe=$l(i.domReference)),cr(i.floating)&&(oe=oe.concat($l(i.floating))),!cr(i.reference)&&i.reference&&i.reference.contextElement&&(oe=oe.concat($l(i.reference.contextElement)))),oe=oe.filter(ee=>{var ue;return ee!==((ue=ne.defaultView)==null?void 0:ue.visualViewport)}),oe.forEach(ee=>{ee.addEventListener("scroll",Y,{passive:!0})}),()=>{l&&(ne.removeEventListener("keydown",M?$:R,M),ne.removeEventListener("compositionstart",le),ne.removeEventListener("compositionend",se)),T&&ne.removeEventListener(f,W?U:F,W),oe.forEach(ee=>{ee.removeEventListener("scroll",Y)}),window.clearTimeout(te)}},[s,i,l,T,f,n,r,b,o,A,D,R,M,$,F,W,U]),Q.useEffect(()=>{j.current=!1},[T,f]);const V=Q.useMemo(()=>({onKeyDown:R,...p&&{[CQ[h]]:te=>{r(!1,te.nativeEvent,"reference-press")},...h!=="click"&&{onClick(te){r(!1,te.nativeEvent,"reference-press")}}}}),[R,r,p,h]),z=Q.useMemo(()=>({onKeyDown:R,onMouseDown(){O.current=!0},onMouseUp(){O.current=!0},[TQ[f]]:()=>{j.current=!0}}),[R,f]);return Q.useMemo(()=>o?{reference:V,floating:z}:{},[o,V,z])}function jQ(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=oN(),s=Q.useRef({}),[o]=Q.useState(()=>cD()),l=gm()!=null,[u,f]=Q.useState(r.reference),p=Li((x,_,E)=>{s.current.openEvent=x?_:void 0,o.emit("openchange",{open:x,event:_,reason:E,nested:l}),n?.(x,_,E)}),h=Q.useMemo(()=>({setPositionReference:f}),[]),b=Q.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return Q.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:b,events:o,floatingId:i,refs:h}),[e,p,b,o,i,h])}function uN(t){t===void 0&&(t={});const{nodeId:e}=t,n=jQ({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=Q.useState(null),[l,u]=Q.useState(null),p=i?.domReference||s,h=Q.useRef(null),b=pf();vr(()=>{p&&(h.current=p)},[p]);const x=eQ({...t,elements:{...i,...l&&{reference:l}}}),_=Q.useCallback(O=>{const A=cr(O)?{getBoundingClientRect:()=>O.getBoundingClientRect(),contextElement:O}:O;u(A),x.refs.setReference(A)},[x.refs]),E=Q.useCallback(O=>{(cr(O)||O===null)&&(h.current=O,o(O)),(cr(x.refs.reference.current)||x.refs.reference.current===null||O!==null&&!cr(O))&&x.refs.setReference(O)},[x.refs]),I=Q.useMemo(()=>({...x.refs,setReference:E,setPositionReference:_,domReference:h}),[x.refs,E,_]),T=Q.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),j=Q.useMemo(()=>({...x,...r,refs:I,elements:T,nodeId:e}),[x,I,T,e,r]);return vr(()=>{r.dataRef.current.floatingContext=j;const O=b?.nodesRef.current.find(A=>A.id===e);O&&(O.context=j)}),Q.useMemo(()=>({...x,context:j,refs:I,elements:T}),[x,I,T,j])}function OQ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=t,{enabled:l=!0,visibleOnly:u=!0}=e,f=Q.useRef(!1),p=Q.useRef(),h=Q.useRef(!0);Q.useEffect(()=>{if(!l)return;const x=gs(o.domReference);function _(){!n&&Zr(o.domReference)&&o.domReference===Io(pi(o.domReference))&&(f.current=!0)}function E(){h.current=!0}return x.addEventListener("blur",_),x.addEventListener("keydown",E,!0),()=>{x.removeEventListener("blur",_),x.removeEventListener("keydown",E,!0)}},[o.domReference,n,l]),Q.useEffect(()=>{if(!l)return;function x(_){let{reason:E}=_;(E==="reference-press"||E==="escape-key")&&(f.current=!0)}return i.on("openchange",x),()=>{i.off("openchange",x)}},[i,l]),Q.useEffect(()=>()=>{clearTimeout(p.current)},[]);const b=Q.useMemo(()=>({onPointerDown(x){eN(x.nativeEvent)||(h.current=!1)},onMouseLeave(){f.current=!1},onFocus(x){if(f.current)return;const _=Rl(x.nativeEvent);if(u&&cr(_))try{if(WF()&&J9())throw Error();if(!_.matches(":focus-visible"))return}catch{if(!h.current&&!tN(_))return}r(!0,x.nativeEvent,"focus")},onBlur(x){f.current=!1;const _=x.relatedTarget,E=x.nativeEvent,I=cr(_)&&_.hasAttribute(ou("focus-guard"))&&_.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var T;const j=Io(o.domReference?o.domReference.ownerDocument:document);!_&&j===o.domReference||fi((T=s.current.floatingContext)==null?void 0:T.refs.floating.current,j)||fi(o.domReference,j)||I||r(!1,E,"focus")})}}),[s,o.domReference,r,u]);return Q.useMemo(()=>l?{reference:b}:{},[l,b])}const wO="active",_O="selected";function m0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[wO]:o,[_O]:l,...u}=t;s=u}return{...n==="floating"&&{tabIndex:-1,[RE]:""},...s,...e.map(o=>{const l=o?o[n]:null;return typeof l=="function"?t?l(t):null:l}).concat(t).reduce((o,l)=>(l&&Object.entries(l).forEach(u=>{let[f,p]=u;if(!(i&&[wO,_O].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof p=="function"){var h;(h=r.get(f))==null||h.push(p),o[f]=function(){for(var b,x=arguments.length,_=new Array(x),E=0;E<x;E++)_[E]=arguments[E];return(b=r.get(f))==null?void 0:b.map(I=>I(..._)).find(I=>I!==void 0)}}}else o[f]=p}),o),{})}}function dN(t){t===void 0&&(t=[]);const e=t.map(l=>l?.reference),n=t.map(l=>l?.floating),r=t.map(l=>l?.item),i=Q.useCallback(l=>m0(l,t,"reference"),e),s=Q.useCallback(l=>m0(l,t,"floating"),n),o=Q.useCallback(l=>m0(l,t,"item"),r);return Q.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function Ub(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function SO(t,e){return Ub(e,t===sN||t===mm,t===Bl||t===zl)}function g0(t,e,n){return Ub(e,t===mm,n?t===Bl:t===zl)||t==="Enter"||t===" "||t===""}function RQ(t,e,n){return Ub(e,n?t===Bl:t===zl,t===mm)}function EO(t,e,n){return Ub(e,n?t===zl:t===Bl,t===sN)}function qQ(t,e){const{open:n,onOpenChange:r,elements:i}=t,{listRef:s,activeIndex:o,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:f=null,allowEscape:p=!1,loop:h=!1,nested:b=!1,rtl:x=!1,virtual:_=!1,focusItemOnOpen:E="auto",focusItemOnHover:I=!0,openOnArrowKeyDown:T=!0,disabledIndices:j=void 0,orientation:O="vertical",cols:A=1,scrollItemIntoView:D=!0,virtualItemRef:M,itemSizes:W,dense:P=!1}=e,R=qE(i.floating),$=Mi(R),F=gm(),U=pf(),V=Li(()=>{l(Y.current===-1?null:Y.current)}),z=UF(i.domReference),te=Q.useRef(E),Y=Q.useRef(f??-1),le=Q.useRef(null),se=Q.useRef(!0),ne=Q.useRef(V),oe=Q.useRef(!!i.floating),ee=Q.useRef(n),ue=Q.useRef(!1),de=Q.useRef(!1),ye=Mi(j),we=Mi(n),Ne=Mi(D),ze=Mi(f),[Oe,De]=Q.useState(),[Je,Xe]=Q.useState(),Ue=Li(()=>{function ve(Ve){_?(De(Ve.id),U?.events.emit("virtualfocus",Ve),M&&(M.current=Ve)):Rc(Ve,{sync:ue.current,preventScroll:!0})}const ke=s.current[Y.current];ke&&ve(ke),(ue.current?Ve=>Ve():requestAnimationFrame)(()=>{const Ve=s.current[Y.current]||ke;if(!Ve)return;ke||ve(Ve);const rt=Ne.current;rt&&_t&&(de.current||!se.current)&&(Ve.scrollIntoView==null||Ve.scrollIntoView(typeof rt=="boolean"?{block:"nearest",inline:"nearest"}:rt))})});vr(()=>{u&&(n&&i.floating?te.current&&f!=null&&(de.current=!0,Y.current=f,V()):oe.current&&(Y.current=-1,ne.current()))},[u,n,i.floating,f,V]),vr(()=>{if(u&&n&&i.floating)if(o==null){if(ue.current=!1,ze.current!=null)return;if(oe.current&&(Y.current=-1,Ue()),(!ee.current||!oe.current)&&te.current&&(le.current!=null||te.current===!0&&le.current==null)){let ve=0;const ke=()=>{s.current[0]==null?(ve<2&&(ve?requestAnimationFrame:queueMicrotask)(ke),ve++):(Y.current=le.current==null||g0(le.current,O,x)||b?d0(s,ye.current):oO(s,ye.current),le.current=null,V())};ke()}}else th(s,o)||(Y.current=o,Ue(),de.current=!1)},[u,n,i.floating,o,ze,b,s,O,x,V,Ue,ye]),vr(()=>{var ve;if(!u||i.floating||!U||_||!oe.current)return;const ke=U.nodesRef.current,Ae=(ve=ke.find(Me=>Me.id===F))==null||(ve=ve.context)==null?void 0:ve.elements.floating,Ve=Io(pi(i.floating)),rt=ke.some(Me=>Me.context&&fi(Me.context.elements.floating,Ve));Ae&&!rt&&se.current&&Ae.focus({preventScroll:!0})},[u,i.floating,U,F,_]),vr(()=>{if(!u||!U||!_||F)return;function ve(ke){Xe(ke.id),M&&(M.current=ke)}return U.events.on("virtualfocus",ve),()=>{U.events.off("virtualfocus",ve)}},[u,U,_,F,M]),vr(()=>{ne.current=V,ee.current=n,oe.current=!!i.floating}),vr(()=>{n||(le.current=null)},[n]);const ct=o!=null,_t=Q.useMemo(()=>{function ve(Ae){if(!n)return;const Ve=s.current.indexOf(Ae);Ve!==-1&&Y.current!==Ve&&(Y.current=Ve,V())}return{onFocus(Ae){let{currentTarget:Ve}=Ae;ue.current=!0,ve(Ve)},onClick:Ae=>{let{currentTarget:Ve}=Ae;return Ve.focus({preventScroll:!0})},...I&&{onMouseMove(Ae){let{currentTarget:Ve}=Ae;ue.current=!0,de.current=!1,ve(Ve)},onPointerLeave(Ae){let{pointerType:Ve}=Ae;if(!(!se.current||Ve==="touch")&&(ue.current=!0,Y.current=-1,V(),!_)){var rt;(rt=$.current)==null||rt.focus({preventScroll:!0})}}}}},[n,$,I,s,V,_]),jt=Li(ve=>{if(se.current=!1,ue.current=!0,ve.which===229||!we.current&&ve.currentTarget===$.current)return;if(b&&EO(ve.key,O,x)){Pi(ve),r(!1,ve.nativeEvent,"list-navigation"),Zr(i.domReference)&&(_?U?.events.emit("virtualfocus",i.domReference):i.domReference.focus());return}const ke=Y.current,Ae=d0(s,j),Ve=oO(s,j);if(z||(ve.key==="Home"&&(Pi(ve),Y.current=Ae,V()),ve.key==="End"&&(Pi(ve),Y.current=Ve,V())),A>1){const rt=W||Array.from({length:s.current.length},()=>({width:1,height:1})),Me=oQ(rt,A,P),ut=Me.findIndex(mn=>mn!=null&&!Ry(s.current,mn,j)),Qt=Me.reduce((mn,ur,Ln)=>ur!=null&&!Ry(s.current,ur,j)?Ln:mn,-1),Gt=Me[sQ({current:Me.map(mn=>mn!=null?s.current[mn]:null)},{event:ve,orientation:O,loop:h,rtl:x,cols:A,disabledIndices:lQ([...j||s.current.map((mn,ur)=>Ry(s.current,ur)?ur:void 0),void 0],Me),minIndex:ut,maxIndex:Qt,prevIndex:aQ(Y.current>Ve?Ae:Y.current,rt,Me,A,ve.key===mm?"bl":ve.key===(x?Bl:zl)?"tr":"tl"),stopEvent:!0})];if(Gt!=null&&(Y.current=Gt,V()),O==="both")return}if(SO(ve.key,O)){if(Pi(ve),n&&!_&&Io(ve.currentTarget.ownerDocument)===ve.currentTarget){Y.current=g0(ve.key,O,x)?Ae:Ve,V();return}g0(ve.key,O,x)?h?Y.current=ke>=Ve?p&&ke!==s.current.length?-1:Ae:wi(s,{startingIndex:ke,disabledIndices:j}):Y.current=Math.min(Ve,wi(s,{startingIndex:ke,disabledIndices:j})):h?Y.current=ke<=Ae?p&&ke!==-1?s.current.length:Ve:wi(s,{startingIndex:ke,decrement:!0,disabledIndices:j}):Y.current=Math.max(Ae,wi(s,{startingIndex:ke,decrement:!0,disabledIndices:j})),th(s,Y.current)&&(Y.current=-1),V()}}),Vt=Q.useMemo(()=>_&&n&&ct&&{"aria-activedescendant":Je||Oe},[_,n,ct,Je,Oe]),nn=Q.useMemo(()=>({"aria-orientation":O==="both"?void 0:O,...z?{}:Vt,onKeyDown:jt,onPointerMove(){se.current=!0}}),[Vt,jt,O,z]),xe=Q.useMemo(()=>{function ve(Ae){E==="auto"&&zF(Ae.nativeEvent)&&(te.current=!0)}function ke(Ae){te.current=E,E==="auto"&&eN(Ae.nativeEvent)&&(te.current=!0)}return{...Vt,onKeyDown(Ae){se.current=!1;const Ve=Ae.key.startsWith("Arrow"),rt=["Home","End"].includes(Ae.key),Me=Ve||rt,ut=RQ(Ae.key,O,x),Qt=EO(Ae.key,O,x),Gt=SO(Ae.key,O),mn=(b?ut:Gt)||Ae.key==="Enter"||Ae.key.trim()==="";if(_&&n){const Oi=U?.nodesRef.current.find(Jt=>Jt.parentId==null),Tr=U&&Oi?gQ(U.nodesRef.current,Oi.id):null;if(Me&&Tr&&M){const Jt=new KeyboardEvent("keydown",{key:Ae.key,bubbles:!0});if(ut||Qt){var ur,Ln;const Zi=((ur=Tr.context)==null?void 0:ur.elements.domReference)===Ae.currentTarget,Yi=Qt&&!Zi?(Ln=Tr.context)==null?void 0:Ln.elements.domReference:ut?s.current.find(Xi=>Xi?.id===Oe):null;Yi&&(Pi(Ae),Yi.dispatchEvent(Jt),Xe(void 0))}if((Gt||rt)&&Tr.context&&Tr.context.open&&Tr.parentId&&Ae.currentTarget!==Tr.context.elements.domReference){var Hr;Pi(Ae),(Hr=Tr.context.elements.domReference)==null||Hr.dispatchEvent(Jt);return}}return jt(Ae)}if(!(!n&&!T&&Ve)){if(mn&&(le.current=b&&Gt?null:Ae.key),b){ut&&(Pi(Ae),n?(Y.current=d0(s,ye.current),V()):r(!0,Ae.nativeEvent,"list-navigation"));return}Gt&&(f!=null&&(Y.current=f),Pi(Ae),!n&&T?r(!0,Ae.nativeEvent,"list-navigation"):jt(Ae),n&&V())}},onFocus(){n&&!_&&(Y.current=-1,V())},onPointerDown:ke,onPointerEnter:ke,onMouseDown:ve,onClick:ve}},[Oe,Vt,jt,ye,E,s,b,V,r,n,T,O,x,f,U,_,M]);return Q.useMemo(()=>u?{reference:xe,floating:nn,item:_t}:{},[u,xe,nn,_t])}const NO=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Yu(t,e){return typeof t=="function"?t(e):t}function AQ(t,e){const[n,r]=Q.useState(t);return t&&!n&&r(!0),Q.useEffect(()=>{if(!t&&n){const i=setTimeout(()=>r(!1),e);return()=>clearTimeout(i)}},[t,n,e]),n}function PQ(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:i=250}=e,o=(typeof i=="number"?i:i.close)||0,[l,u]=Q.useState("unmounted"),f=AQ(n,o);return!f&&l==="close"&&u("unmounted"),vr(()=>{if(r){if(n){u("initial");const p=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(p)}}u("close")}},[n,r]),{isMounted:f,status:l}}function fN(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:i,common:s,duration:o=250}=e,l=t.placement,u=l.split("-")[0],f=Q.useMemo(()=>({side:u,placement:l}),[u,l]),p=typeof o=="number",h=(p?o:o.open)||0,b=(p?o:o.close)||0,[x,_]=Q.useState(()=>({...Yu(s,f),...Yu(n,f)})),{isMounted:E,status:I}=PQ(t,{duration:o}),T=Mi(n),j=Mi(r),O=Mi(i),A=Mi(s);return vr(()=>{const D=Yu(T.current,f),M=Yu(O.current,f),W=Yu(A.current,f),P=Yu(j.current,f)||Object.keys(D).reduce((R,$)=>(R[$]="",R),{});if(I==="initial"&&_(R=>({transitionProperty:R.transitionProperty,...W,...D})),I==="open"&&_({transitionProperty:Object.keys(P).map(NO).join(","),transitionDuration:h+"ms",...W,...P}),I==="close"){const R=M||D;_({transitionProperty:Object.keys(R).map(NO).join(","),transitionDuration:b+"ms",...W,...R})}},[b,O,T,j,A,h,I,f]),{isMounted:E,styles:x}}const FQ=Q.createContext({close(){}}),DQ=vn({slot:{target:["flex","justify-center","items-center"],portal:[]},variant:{mounted:{true:[]}},match:[{if:{mounted:!1},then:{portal:["hidden"]}}],defaults:{mounted:!1}}),LQ=({target:t,action:e="hover",disabled:n=!1,closeOnClick:r=!1,delay:i=100,float:s,variant:o,tva:l=DQ,css:u,children:f})=>{const[p,h]=Q.useState(!1),{refs:b,floatingStyles:x,context:_}=uN({open:p,onOpenChange:h,placement:"top",whileElementsMounted:iD,middleware:[oD(10),aD({fallbackAxisSideDirection:"start"}),tQ()],...s}),{getReferenceProps:E,getFloatingProps:I}=dN([mQ(_,{enabled:e==="hover",delay:i}),lN(_,{enabled:e==="click"}),OQ(_),cN(_)]),{isMounted:T,styles:j}=fN(_),O=l({mounted:T,...o,css:u}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",ref:b.setReference,...E(),disabled:n,className:O.target(),children:t}),d.jsx(aN,{children:d.jsx("div",{ref:b.setFloating,style:{...x,...j},className:O.portal(),...I(),onClick:r?()=>{h(!1)}:void 0,children:d.jsx(FQ.Provider,{value:{close(){h(!1)}},children:f})})})]})},bD="icon-[system-uicons--menu-hamburger]",xD=vn({slot:{base:[]},variant:{size:{xs:"text-sm",sm:"text-sm",md:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl"},disabled:{true:[]}},match:[{if:{disabled:!0},then:{base:["pointer-events-none","cursor-not-allowed","text-gray-400","opacity-50"]}}],defaults:{size:"xl",disabled:!1}}),rn=({icon:t,variant:e,tva:n=xD,css:r,...i})=>{const s=n({...e,css:r}).slots;return t?d.jsx("div",{className:s.base({css:[t]}),...i}):null},MQ=vn({slot:{base:["p-1","bg-slate-50","border","border-slate-300","rounded","shadow-md","text-slate-500","flex","flex-col","gap-2"]},variant:{},defaults:{}}),Qn=({icon:t=bD,iconProps:e,children:n,variant:r,tva:i=MQ,css:s,...o})=>{const l=i({...r,css:s}).slots;return d.jsx(hQ,{children:d.jsx(LQ,{action:"click",target:d.jsx(rn,{icon:t,...e}),delay:100,float:{placement:"bottom-start"},closeOnClick:!0,...o,children:d.jsx("div",{className:l.base(),children:n})})})},wD="icon-[svg-spinners--90-ring-with-bg]",$Q=vn({slot:{base:["flex","items-center","justify-center","gap-2","group","w-fit","h-fit","rounded","cursor-pointer","hover:shadow-md","hover:shadow-slate-200","transition-all","hover:bg-slate-200","text-slate-600","text-2xl","p-1"]},variant:{disabled:{true:["cursor-not-allowed","pointer-events-none"]},loading:{true:["cursor-not-allowed","pointer-events-none"]}},match:[{if:{disabled:!0},then:{base:["opacity-50","hover:bg-blue-400"]}}],defaults:{disabled:!1,loading:!1}}),ym=({iconEnabled:t,iconDisabled:e,iconLoading:n=wD,disabled:r=!1,loading:i=!1,onClick:s,variant:o,tva:l=$Q,css:u,children:f,...p})=>{const h=l({disabled:r,loading:i,...o,css:u}).slots;return d.jsxs("div",{className:h.base(),onClick:r?void 0:s,...p,children:[r?d.jsx(rn,{icon:i?n:e??t}):d.jsx(rn,{icon:i?n:t}),f]})},pN="icon-[iconamoon--close-light]",Vb=Q.createContext(void 0),BQ=vn({slot:{base:["bg-slate-500","bg-opacity-75","backdrop-blur-sm","flex","justify-center","py-12"],target:[],modal:["bg-white","rounded","shadow-lg","p-4","w-fit","h-fit","max-h-full","overflow-y-auto","relative","w-2/3","max-w-1/2"]},variant:{disabled:{true:["pointer-events-none"]},loading:{true:[]}},match:[{if:{loading:!0},then:{base:["pointer-events-none","opacity-50"]}}],defaults:{disabled:!1,loading:!1}}),hf=({target:t,icon:e,textTitle:n,disabled:r=!1,defaultOpen:i=!1,outside:s=!1,variant:o,css:l,tva:u=BQ,children:f})=>{const[p,h]=Q.useState(i),b=fQ(),{refs:x,context:_}=uN({nodeId:b,open:p,onOpenChange:h}),E=lN(_),I=cN(_,{outsidePress:s}),{getReferenceProps:T,getFloatingProps:j}=dN([E,I]),{isMounted:O,styles:A}=fN(_),D=u({disabled:r,...o,css:l}).slots;return d.jsxs(Vb.Provider,{value:{close(){h(!1)}},children:[d.jsx("div",{ref:x.setReference,...T({disabled:r}),className:D.target(),children:t}),d.jsx(pQ,{id:b,children:O&&d.jsx(d.Fragment,{children:d.jsx(aN,{children:d.jsx(IQ,{lockScroll:!0,style:A,className:D.base(),children:d.jsx(vD,{context:_,children:d.jsxs("div",{ref:x.setFloating,...j(),className:D.modal(),children:[d.jsxs("div",{className:"border-b border-slate-200 mb-2 py-1.5 flex flex-row items-center justify-between select-none",children:[d.jsxs("div",{className:"flex flex-row items-center gap-2 pr-4",children:[e&&(Cb(e)?d.jsx(rn,{icon:e,variant:{size:"xl"}}):e),n&&d.jsx("div",{className:"text-lg font-semibold text-slate-700",children:n})]}),d.jsx(ym,{iconEnabled:pN,onClick:()=>h(!1)})]}),W9(f)?d.jsx(f,{close:()=>h(!1)}):f]})})})})})})]})},zQ=vn({use:LF,slot:{},variant:{},defaults:{}}),yn=({icon:t,iconProps:e,label:n,disabled:r=!1,hidden:i=!1,variant:s,tva:o=zQ,css:l,...u})=>{const f=o({...s,disabled:r,css:l}).slots;return i?null:d.jsxs("div",{className:f.base(),children:[Cb(t)?d.jsx(rn,{icon:t,...e}):t,d.jsx(hf,{icon:t,target:n,disabled:r,css:{modal:["w-1/2"]},...u})]})},WQ=vn({slot:{base:["flex","flex-row","gap-2","items-center","rounded-2xl","bg-blue-50","border","border-blue-200","text-xs","px-4","py-0.5","font-bold"]},variant:{},defaults:{}}),Ps=({variant:t,tva:e=WQ,css:n,...r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),...r})},AE="icon-[material-symbols-light--check-small]",UQ="icon-[material-symbols-light--close-small]",VQ="icon-[material-symbols-light--check-indeterminate-small]",HQ=vn({use:xD,slot:{},variant:{value:{true:"text-green-600",false:"text-amber-600"}},defaults:{value:!1}}),Hb=({value:t,checkIcon:e=AE,unCheckIcon:n=UQ,undefinedIcon:r=VQ,tva:i=HQ,...s})=>t==null?d.jsx(rn,{icon:r,tva:i,...s}):d.jsx(rn,{icon:t?e:n,tva:o=>i({...o,value:t}),...s}),KQ=vn({slot:{base:["flex","items-center","justify-between","text-sm","font-medium","text-slate-900","w-full"],switch:["relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"]},variant:{},defaults:{}}),_D=({value:t,onChange:e,variant:n,tva:r=KQ,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx("div",{className:o.base(),children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:t,className:"sr-only peer",onChange:l=>{e(l.target.checked)},...s}),d.jsx("div",{className:o.switch()})]})})},QQ=vn({slot:{base:["flex","flex-row","items-center","justify-center","gap-2","group","rounded","transition-all"]},variant:{variant:{primary:["text-white"],secondary:["text-slate-700"],subtle:["text-slate-600"],danger:["text-slate-50"]},disabled:{true:"cursor-not-allowed"},size:{xs:[],sm:[],md:[]}},match:[{if:{variant:"primary"},then:{base:["bg-blue-400","hover:bg-blue-500"]}},{if:{variant:"primary",disabled:!0},then:{base:["opacity-50","bg-blue-600","hover:bg-blue-600","cursor-not-allowed"]}},{if:{variant:"secondary"},then:{base:["bg-amber-400","hover:bg-amber-500"]}},{if:{variant:"secondary",disabled:!0},then:{base:["opacity-50","bg-amber-600","hover:bg-amber-600","cursor-not-allowed"]}},{if:{variant:"subtle"},then:{base:["text-slate-600","hover:text-slate-800","hover:bg-blue-50"]}},{if:{variant:"subtle",disabled:!0},then:{base:["opacity-50","bg-blue-50","hover:bg-blue-50","cursor-not-allowed"]}},{if:{variant:"danger"},then:{base:["bg-red-400","hover:bg-red-500","hover:text-white"]}},{if:{size:"xs"},then:{base:["py-0.5","px-1"]}},{if:{size:"sm"},then:{base:["py-1","px-2"]}},{if:{size:"md"},then:{base:["py-2","px-4"]}}],defaults:{variant:"primary",disabled:!1,size:"md"}}),jn=({iconEnabled:t,iconDisabled:e,iconLoading:n=wD,iconProps:r,loading:i,variant:s,tva:o=QQ,css:l,children:u,...f})=>{const p=o({disabled:f.disabled,...s,css:l}).slots;return d.jsxs("button",{type:"button",className:p.base({disabled:f.disabled}),...f,children:[f.disabled?d.jsx(rn,{icon:i===!0?n:e,variant:{size:"xl"},...r}):d.jsx(rn,{icon:i===!0?n:t,variant:{size:"xl"},...r}),u]})},hN=Q.createContext({inline:!1}),GQ=vn({slot:{base:["border","border-slate-100","px-2","py-1","rounded-md"],label:["text-sm","font-semibold","text-slate-600","border-b","mb-2"],value:[]},variant:{inline:{true:[]},withBackground:{true:[]}},match:[{if:{inline:!0},then:{base:["border-none","flex","flex-row","items-center","gap-2"],label:["mb-0","font-light","text-md","text-slate-600","border-none"],value:["text-md","text-slate-800"]}},{if:{withBackground:!0},then:{base:["bg-slate-50","hover:bg-slate-100"]}}],defaults:{inline:!1,withBackground:!0}}),JQ=({inline:t,label:e,value:n,variant:r,tva:i=GQ,css:s})=>{const o=Q.useContext(hN),l=t??o?.inline,u=i({inline:l,...r,css:s}).slots;return d.jsxs("div",{className:u.base(),children:[e?d.jsx("div",{className:u.label(),children:e}):null,d.jsx("div",{className:u.value(),children:n})]})},ZQ=vn({slot:{base:["flex","flex-col","gap-4","border","border-slate-100","p-4","rounded-lg"]},variant:{inline:{true:["flex-row","border-none","gap-1","p-0","flex-1"]}},defaults:{inline:!1}}),SD=({items:t,hidden:e=[],valueOfProps:n,entity:r,variant:i,tva:s=ZQ,css:o,inline:l=!1})=>{const u=s({inline:l,...i,css:o}).slots;return d.jsx(hN.Provider,{value:{inline:l},children:d.jsx("div",{className:u.base(),children:t.filter(({id:f})=>!e.includes(f)).map(({id:f,render:p,...h})=>d.jsx(JQ,{value:d.jsx(p,{entity:r}),...n,...h},f))})})},YQ=vn({slot:{base:["flex","flex-col","gap-2"]},variant:{},defaults:{}}),kO="icon-[tabler--dots]",XQ=vn({slot:{base:["flex","items-center","justify-between","gap-2"],sums:["flex","items-center","gap-2","text-sm"]},variant:{},defaults:{}}),e7=vn({slot:{base:["select-none"],list:["flex","items-center","-space-x-px","text-xs","gap-2"],page:["flex","items-center","justify-center","w-12","px-2","py-1","rounded","border","border-slate-200","hover:bg-slate-200","cursor-pointer","transition-all","duration-200"]},variant:{current:{true:[]}},match:[{if:{current:!0},then:{page:["bg-slate-100","hover:bg-slate-200","text-slate-800","font-bold"]}}],defaults:{current:!1}}),y0=({pages:t,page:e,onPage:n,variant:r,tva:i=e7,css:s})=>{const o=i({...r,css:s}).slots;return d.jsx("nav",{className:o.base(),children:d.jsx("ul",{className:o.list(),children:t.map((l,u)=>d.jsx("li",{className:o.page({current:e===l-1}),onClick:()=>n(l-1),children:l},`page-${l}-${u}`))})})},t7=vn({slot:{base:["cursor-pointer","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded","focus:border-sky-400","focus:outline-none","p-2.5","hover:shadow-md","transition-all","group"],input:["flex","flex-row","items-center","justify-between","gap-2"],popup:["z-50","cursor-pointer","overflow-y-auto","rounded","border","border-slate-300","bg-white","shadow-lg","focus:outline-none"],item:["focus:outline-none","py-2","px-2.5","flex","items-center","justify-between"]},variant:{disabled:{true:["cursor-not-allowed","hover:shadow-none","focus:border-slate-300","opacity-50"]},active:{true:[]},selected:{true:[]}},match:[{if:{selected:!0},then:{item:["bg-slate-100"]}},{if:{active:!0},then:{item:["bg-slate-200"]}}],defaults:{disabled:!1,selected:!1,active:!1}}),ED=({items:t,icon:e,defaultValue:n,render:r,textSelect:i,disabled:s=!1,onItem:o,onSelect:l,onChange:u,value:f,variant:p,tva:h=t7,css:b})=>{const[x,_]=Q.useState(!1),[E,I]=Q.useState(null),[T,j]=Q.useState(t.findIndex(ne=>ne.id===n));Q.useEffect(()=>{j(t.findIndex(ne=>ne.id===f))},[f]);const{refs:O,floatingStyles:A,context:D}=uN({placement:"bottom-start",open:x,onOpenChange:_,whileElementsMounted:iD,middleware:[oD(5),aD({padding:10}),nQ({apply({rects:ne,elements:oe,availableHeight:ee}){Object.assign(oe.floating.style,{maxHeight:`${ee}px`,minWidth:`${ne.reference.width}px`})},padding:10})]}),M=Q.useRef([]),W=Q.useRef(!1),P=lN(D,{event:"mousedown"}),R=cN(D),$=qQ(D,{listRef:M,activeIndex:E,selectedIndex:T,onNavigate:I,loop:!0}),{getReferenceProps:F,getFloatingProps:U,getItemProps:V}=dN([R,$,P]),{isMounted:z,styles:te}=fN(D),Y=ne=>{j(ne),_(!1);const oe=t[ne];oe&&o?.(oe),l?.(oe),u?.(oe?.id)},le=T===null?void 0:t[T],se=h({disabled:s,...p,css:b}).slots;return d.jsxs(d.Fragment,{children:[d.jsx("div",{tabIndex:s?-1:0,ref:s?void 0:O.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none",...s?{}:F(),className:se.base(),children:d.jsxs("div",{className:se.input(),children:[e?d.jsx(rn,{icon:e,variant:{size:"xl"},css:{base:["text-slate-400","group-hover:text-slate-600"]}}):null,le?d.jsx(r,{entity:le}):i||so.rich("Select item"),d.jsx(rn,{icon:"icon-[gg--select]",variant:{size:"xl"},css:{base:[!x&&"text-slate-400",x&&"text-slate-600","group-hover:text-slate-600"]}})]})}),z&&d.jsx(aN,{children:d.jsx(vD,{context:D,modal:!1,children:d.jsx("div",{ref:O.setFloating,style:{...A,...te},className:se.popup(),...U(),children:t.map((ne,oe)=>d.jsxs("div",{ref:ee=>{M.current[oe]=ee},role:"option",tabIndex:oe===E?0:-1,"aria-selected":oe===T&&oe===E,className:se.item({selected:oe===T,active:oe===E}),...V({onClick(){Y(oe)},onKeyDown(ee){ee.key==="Enter"&&(ee.preventDefault(),Y(oe)),ee.key===" "&&!W.current&&(ee.preventDefault(),Y(oe))}}),children:[d.jsx(r,{entity:ne}),oe===T&&d.jsx(rn,{icon:"icon-[basil--check-outline]",variant:{size:"xl"}})]},ne.id))})})})]})},n7=({sizes:t=[5,15,30,50,100],size:e,onSize:n,...r})=>d.jsx(ED,{items:t.map(i=>({id:`${i}`,size:i})),defaultValue:`${e}`,value:`${e}`,onItem:({size:i})=>n(i),render:({entity:{size:i}})=>i,css:{base:["px-8","py-1"],item:["px-8","py-1"]},...r}),IO=({cursor:t,count:e,textTotal:n,onPage:r,onSize:i,variant:s,tva:o=XQ,css:l})=>{const u=Q.useMemo(()=>R9({page:t.page,total:Math.ceil(e.filter/t.size),siblings:1,boundaries:1}),[t.page,e.filter,t.size]),f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[u.total>1?d.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[["both","start"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(y0,{page:t.page,pages:u.start,onPage:r}),d.jsx(rn,{icon:kO})]}),d.jsx(y0,{page:t.page,pages:u.pages,onPage:r}),["both","end"].includes(u.type)&&d.jsxs(d.Fragment,{children:[d.jsx(rn,{icon:kO}),d.jsx(y0,{page:t.page,pages:u.end,onPage:r})]})]}):null,d.jsxs("div",{className:f.sums(),children:[d.jsx("div",{children:n}),d.jsx("div",{className:"font-bold",children:e.filter}),e.filter!==e.where&&d.jsxs(d.Fragment,{children:[d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-semibold",children:e.where})]})]}),d.jsx(n7,{size:t.size,onSize:i})]})},CO="function",pd="64e10b34-2bf7-4616-9668-f99de5aa046e",r7="get",i7="has",s7="set",{isArray:qy}=Array;let{SharedArrayBuffer:Bv,window:o7}=globalThis,{notify:ND,wait:kD,waitAsync:zv}=Atomics,ID=null;zv||(zv=t=>({value:new Promise(e=>{let n=new Worker("data:application/javascript,onmessage%3D(%7Bdata%3Ab%7D)%3D%3E(Atomics.wait(b%2C0)%2CpostMessage(0))");n.onmessage=e,n.postMessage(t)})}));try{new Bv(4)}catch{Bv=ArrayBuffer;const e=new WeakMap;if(o7){const n=new Map,{prototype:{postMessage:r}}=Worker,i=s=>{const o=s.data?.[pd];if(!qy(o)){s.stopImmediatePropagation();const{id:l,sb:u}=o;n.get(l)(u)}};ID=function(s,...o){const l=s?.[pd];if(qy(l)){const[u,f]=l;e.set(f,u),this.addEventListener("message",i)}return r.call(this,s,...o)},zv=s=>({value:new Promise(o=>{n.set(e.get(s),o)}).then(o=>{n.delete(e.get(s)),e.delete(s);for(let l=0;l<o.length;l++)s[l]=o[l];return"ok"})})}else{const n=(r,i)=>({[pd]:{id:r,sb:i}});ND=r=>{postMessage(n(e.get(r),r))},addEventListener("message",r=>{const i=r.data?.[pd];if(qy(i)){const[s,o]=i;e.set(o,s)}})}}const{Int32Array:PE,Map:TO,Uint16Array:FE}=globalThis,{BYTES_PER_ELEMENT:jO}=PE,{BYTES_PER_ELEMENT:a7}=FE,l7=(t,e,n)=>{for(;kD(t,0,0,e)==="timed-out";)n()},DE=new WeakSet,v0=new WeakMap,c7={value:{then:t=>t()}};let u7=0;const mN=(t,{parse:e=JSON.parse,stringify:n=JSON.stringify,transform:r,interrupt:i}=JSON)=>{if(!v0.has(t)){const s=ID||t.postMessage,o=(b,...x)=>s.call(t,{[pd]:x},{transfer:b}),l=typeof i===CO?i:i?.handler,u=i?.delay||42,f=new TextDecoder("utf-16"),p=(b,x)=>b?zv(x,0):(l?l7(x,u,l):kD(x,0),c7);let h=!1;v0.set(t,new Proxy(new TO,{[i7]:(b,x)=>typeof x=="string"&&!x.startsWith("_"),[r7]:(b,x)=>x==="then"?null:(..._)=>{const E=u7++;let I=new PE(new Bv(jO*2)),T=[];DE.has(_.at(-1)||T)&&DE.delete(T=_.pop()),o(T,E,I,x,r?_.map(r):_);const j=t!==globalThis;let O=0;return h&&j&&(O=setTimeout(console.warn,1e3,`💀🔒 - Possible deadlock if proxy.${x}(...args) is awaited`)),p(j,I).value.then(()=>{clearTimeout(O);const A=I[1];if(!A)return;const D=a7*A;return I=new PE(new Bv(D+D%jO)),o([],E,I),p(j,I).value.then(()=>e(f.decode(new FE(I.buffer).slice(0,A))))})},[s7](b,x,_){const E=typeof _;if(E!==CO)throw new Error(`Unable to assign ${x} as ${E}`);if(!b.size){const I=new TO;t.addEventListener("message",async T=>{const j=T.data?.[pd];if(qy(j)){T.stopImmediatePropagation();const[O,A,...D]=j;let M;if(D.length){const[W,P]=D;if(b.has(W)){h=!0;try{const R=await b.get(W)(...P);if(R!==void 0){const $=n(r?r(R):R);I.set(O,$),A[1]=$.length}}catch(R){M=R}finally{h=!1}}else M=new Error(`Unsupported action: ${W}`);A[0]=1}else{const W=I.get(O);I.delete(O);for(let P=new FE(A.buffer),R=0;R<W.length;R++)P[R]=W.charCodeAt(R)}if(ND(A,0),M)throw M}})}return!!b.set(x,_)}}))}return v0.get(t)};mN.transfer=(...t)=>(DE.add(t),t);var gN=(()=>{var t=import.meta.url;return function(e={}){var n,r=e,i,s,o=new Promise((g,y)=>{i=g,s=y}),l=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;const f=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,f.debugModule("globalThis.location =",globalThis.location);var p=Object.assign({},r),h="./this.program",b="";function x(g){return r.locateFile?r.locateFile(g,b):b+g}var _,E;(l||u)&&(u?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),t&&(b=t),b.startsWith("blob:")?b="":b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(E=g=>{var y=new XMLHttpRequest;return y.open("GET",g,!1),y.responseType="arraybuffer",y.send(null),new Uint8Array(y.response)}),_=g=>fetch(g,{credentials:"same-origin"}).then(y=>y.ok?y.arrayBuffer():Promise.reject(new Error(y.status+" : "+y.url))));var I=r.print||console.log.bind(console),T=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(h=r.thisProgram);var j=r.wasmBinary,O,A=!1,D,M,W,P,R,$;function F(){var g=O.buffer;r.HEAP8=D=new Int8Array(g),r.HEAP16=W=new Int16Array(g),r.HEAPU8=M=new Uint8Array(g),r.HEAPU16=new Uint16Array(g),r.HEAP32=P=new Int32Array(g),r.HEAPU32=R=new Uint32Array(g),r.HEAPF32=new Float32Array(g),r.HEAPF64=new Float64Array(g),r.HEAP64=$=new BigInt64Array(g),r.HEAPU64=new BigUint64Array(g)}if(r.wasmMemory)O=r.wasmMemory;else{var U=r.INITIAL_MEMORY||0x1000000;O=new WebAssembly.Memory({initial:U/65536,maximum:32768})}F();var V=[],z=[],te=[];function Y(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ne(r.preRun.shift());xe(V)}function le(){!r.noFSInit&&!H.initialized&&H.init(),H.ignorePermissions=!1,xe(z)}function se(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)ee(r.postRun.shift());xe(te)}function ne(g){V.unshift(g)}function oe(g){z.unshift(g)}function ee(g){te.unshift(g)}var ue=0,de=null;function ye(g){return g}function we(g){ue++,r.monitorRunDependencies?.(ue)}function Ne(g){if(ue--,r.monitorRunDependencies?.(ue),ue==0&&de){var y=de;de=null,y()}}function ze(g){r.onAbort?.(g),g="Aborted("+g+")",T(g),A=!0,g+=". Build with -sASSERTIONS for more info.";var y=new WebAssembly.RuntimeError(g);throw s(y),y}var Oe="data:application/octet-stream;base64,",De=g=>g.startsWith(Oe);function Je(){if(r.locateFile){var g="sqlite3.wasm";return De(g)?g:x(g)}return new URL("/assets/sqlite3-CgX3seBP.wasm",import.meta.url).href}var Xe;function Ue(g){if(g==Xe&&j)return new Uint8Array(j);if(E)return E(g);throw"both async and sync fetching of the wasm failed"}function ct(g){return j?Promise.resolve().then(()=>Ue(g)):_(g).then(y=>new Uint8Array(y),()=>Ue(g))}function _t(g,y,S){return ct(g).then(N=>WebAssembly.instantiate(N,y)).then(S,N=>{T(`failed to asynchronously prepare wasm: ${N}`),ze(N)})}function jt(g,y,S,N){return!g&&typeof WebAssembly.instantiateStreaming=="function"&&!De(y)&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(C=>{var B=WebAssembly.instantiateStreaming(C,S);return B.then(N,function(fe){return T(`wasm streaming compile failed: ${fe}`),T("falling back to ArrayBuffer instantiation"),_t(y,S,N)})}):_t(y,S,N)}function Vt(){return{env:Df,wasi_snapshot_preview1:Df}}function nn(){var g=Vt();function y(N,C){return he=N.exports,oe(he.__wasm_call_ctors),Ne(),he}we();function S(N){y(N.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(g,y)}catch(N){T(`Module.instantiateWasm callback failed with error: ${N}`),s(N)}return Xe||(Xe=Je()),jt(j,Xe,g,S).catch(s),{}}var xe=g=>{for(;g.length>0;)g.shift()(r)};r.noExitRuntime;var ve={isAbs:g=>g.charAt(0)==="/",splitPath:g=>{var y=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return y.exec(g).slice(1)},normalizeArray:(g,y)=>{for(var S=0,N=g.length-1;N>=0;N--){var C=g[N];C==="."?g.splice(N,1):C===".."?(g.splice(N,1),S++):S&&(g.splice(N,1),S--)}if(y)for(;S;S--)g.unshift("..");return g},normalize:g=>{var y=ve.isAbs(g),S=g.substr(-1)==="/";return g=ve.normalizeArray(g.split("/").filter(N=>!!N),!y).join("/"),!g&&!y&&(g="."),g&&S&&(g+="/"),(y?"/":"")+g},dirname:g=>{var y=ve.splitPath(g),S=y[0],N=y[1];return!S&&!N?".":(N&&(N=N.substr(0,N.length-1)),S+N)},basename:g=>{if(g==="/")return"/";g=ve.normalize(g),g=g.replace(/\/$/,"");var y=g.lastIndexOf("/");return y===-1?g:g.substr(y+1)},join:(...g)=>ve.normalize(g.join("/")),join2:(g,y)=>ve.normalize(g+"/"+y)},ke=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return g=>crypto.getRandomValues(g);ze("initRandomDevice")},Ae=g=>(Ae=ke())(g),Ve={resolve:(...g)=>{for(var y="",S=!1,N=g.length-1;N>=-1&&!S;N--){var C=N>=0?g[N]:H.cwd();if(typeof C!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!C)return"";y=C+"/"+y,S=ve.isAbs(C)}return y=ve.normalizeArray(y.split("/").filter(B=>!!B),!S).join("/"),(S?"/":"")+y||"."},relative:(g,y)=>{g=Ve.resolve(g).substr(1),y=Ve.resolve(y).substr(1);function S(tt){for(var at=0;at<tt.length&&tt[at]==="";at++);for(var mt=tt.length-1;mt>=0&&tt[mt]==="";mt--);return at>mt?[]:tt.slice(at,mt-at+1)}for(var N=S(g.split("/")),C=S(y.split("/")),B=Math.min(N.length,C.length),fe=B,me=0;me<B;me++)if(N[me]!==C[me]){fe=me;break}for(var Ke=[],me=fe;me<N.length;me++)Ke.push("..");return Ke=Ke.concat(C.slice(fe)),Ke.join("/")}},rt=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(g,y,S)=>{for(var N=y+S,C=y;g[C]&&!(C>=N);)++C;if(C-y>16&&g.buffer&&rt)return rt.decode(g.subarray(y,C));for(var B="";y<C;){var fe=g[y++];if(!(fe&128)){B+=String.fromCharCode(fe);continue}var me=g[y++]&63;if((fe&224)==192){B+=String.fromCharCode((fe&31)<<6|me);continue}var Ke=g[y++]&63;if((fe&240)==224?fe=(fe&15)<<12|me<<6|Ke:fe=(fe&7)<<18|me<<12|Ke<<6|g[y++]&63,fe<65536)B+=String.fromCharCode(fe);else{var tt=fe-65536;B+=String.fromCharCode(55296|tt>>10,56320|tt&1023)}}return B},ut=[],Qt=g=>{for(var y=0,S=0;S<g.length;++S){var N=g.charCodeAt(S);N<=127?y++:N<=2047?y+=2:N>=55296&&N<=57343?(y+=4,++S):y+=3}return y},Gt=(g,y,S,N)=>{if(!(N>0))return 0;for(var C=S,B=S+N-1,fe=0;fe<g.length;++fe){var me=g.charCodeAt(fe);if(me>=55296&&me<=57343){var Ke=g.charCodeAt(++fe);me=65536+((me&1023)<<10)|Ke&1023}if(me<=127){if(S>=B)break;y[S++]=me}else if(me<=2047){if(S+1>=B)break;y[S++]=192|me>>6,y[S++]=128|me&63}else if(me<=65535){if(S+2>=B)break;y[S++]=224|me>>12,y[S++]=128|me>>6&63,y[S++]=128|me&63}else{if(S+3>=B)break;y[S++]=240|me>>18,y[S++]=128|me>>12&63,y[S++]=128|me>>6&63,y[S++]=128|me&63}}return y[S]=0,S-C};function mn(g,y,S){var N=Qt(g)+1,C=new Array(N),B=Gt(g,C,0,C.length);return C.length=B,C}var ur=()=>{if(!ut.length){var g=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(g=window.prompt("Input: "),g!==null&&(g+=`
`)),!g)return null;ut=mn(g)}return ut.shift()},Ln={ttys:[],init(){},shutdown(){},register(g,y){Ln.ttys[g]={input:[],output:[],ops:y},H.registerDevice(g,Ln.stream_ops)},stream_ops:{open(g){var y=Ln.ttys[g.node.rdev];if(!y)throw new H.ErrnoError(43);g.tty=y,g.seekable=!1},close(g){g.tty.ops.fsync(g.tty)},fsync(g){g.tty.ops.fsync(g.tty)},read(g,y,S,N,C){if(!g.tty||!g.tty.ops.get_char)throw new H.ErrnoError(60);for(var B=0,fe=0;fe<N;fe++){var me;try{me=g.tty.ops.get_char(g.tty)}catch{throw new H.ErrnoError(29)}if(me===void 0&&B===0)throw new H.ErrnoError(6);if(me==null)break;B++,y[S+fe]=me}return B&&(g.node.timestamp=Date.now()),B},write(g,y,S,N,C){if(!g.tty||!g.tty.ops.put_char)throw new H.ErrnoError(60);try{for(var B=0;B<N;B++)g.tty.ops.put_char(g.tty,y[S+B])}catch{throw new H.ErrnoError(29)}return N&&(g.node.timestamp=Date.now()),B}},default_tty_ops:{get_char(g){return ur()},put_char(g,y){y===null||y===10?(I(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(I(Me(g.output,0)),g.output=[])},ioctl_tcgets(g){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(g,y,S){return 0},ioctl_tiocgwinsz(g){return[24,80]}},default_tty1_ops:{put_char(g,y){y===null||y===10?(T(Me(g.output,0)),g.output=[]):y!=0&&g.output.push(y)},fsync(g){g.output&&g.output.length>0&&(T(Me(g.output,0)),g.output=[])}}},Hr=(g,y)=>(M.fill(0,g,g+y),g),Oi=(g,y)=>Math.ceil(g/y)*y,Tr=g=>{g=Oi(g,65536);var y=Lf(65536,g);return y?Hr(y,g):0},Jt={ops_table:null,mount(g){return Jt.createNode(null,"/",16895,0)},createNode(g,y,S,N){if(H.isBlkdev(S)||H.isFIFO(S))throw new H.ErrnoError(63);Jt.ops_table||={dir:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,lookup:Jt.node_ops.lookup,mknod:Jt.node_ops.mknod,rename:Jt.node_ops.rename,unlink:Jt.node_ops.unlink,rmdir:Jt.node_ops.rmdir,readdir:Jt.node_ops.readdir,symlink:Jt.node_ops.symlink},stream:{llseek:Jt.stream_ops.llseek}},file:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:{llseek:Jt.stream_ops.llseek,read:Jt.stream_ops.read,write:Jt.stream_ops.write,allocate:Jt.stream_ops.allocate,mmap:Jt.stream_ops.mmap,msync:Jt.stream_ops.msync}},link:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr,readlink:Jt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Jt.node_ops.getattr,setattr:Jt.node_ops.setattr},stream:H.chrdev_stream_ops}};var C=H.createNode(g,y,S,N);return H.isDir(C.mode)?(C.node_ops=Jt.ops_table.dir.node,C.stream_ops=Jt.ops_table.dir.stream,C.contents={}):H.isFile(C.mode)?(C.node_ops=Jt.ops_table.file.node,C.stream_ops=Jt.ops_table.file.stream,C.usedBytes=0,C.contents=null):H.isLink(C.mode)?(C.node_ops=Jt.ops_table.link.node,C.stream_ops=Jt.ops_table.link.stream):H.isChrdev(C.mode)&&(C.node_ops=Jt.ops_table.chrdev.node,C.stream_ops=Jt.ops_table.chrdev.stream),C.timestamp=Date.now(),g&&(g.contents[y]=C,g.timestamp=C.timestamp),C},getFileDataAsTypedArray(g){return g.contents?g.contents.subarray?g.contents.subarray(0,g.usedBytes):new Uint8Array(g.contents):new Uint8Array(0)},expandFileStorage(g,y){var S=g.contents?g.contents.length:0;if(!(S>=y)){var N=1024*1024;y=Math.max(y,S*(S<N?2:1.125)>>>0),S!=0&&(y=Math.max(y,256));var C=g.contents;g.contents=new Uint8Array(y),g.usedBytes>0&&g.contents.set(C.subarray(0,g.usedBytes),0)}},resizeFileStorage(g,y){if(g.usedBytes!=y)if(y==0)g.contents=null,g.usedBytes=0;else{var S=g.contents;g.contents=new Uint8Array(y),S&&g.contents.set(S.subarray(0,Math.min(y,g.usedBytes))),g.usedBytes=y}},node_ops:{getattr(g){var y={};return y.dev=H.isChrdev(g.mode)?g.id:1,y.ino=g.id,y.mode=g.mode,y.nlink=1,y.uid=0,y.gid=0,y.rdev=g.rdev,H.isDir(g.mode)?y.size=4096:H.isFile(g.mode)?y.size=g.usedBytes:H.isLink(g.mode)?y.size=g.link.length:y.size=0,y.atime=new Date(g.timestamp),y.mtime=new Date(g.timestamp),y.ctime=new Date(g.timestamp),y.blksize=4096,y.blocks=Math.ceil(y.size/y.blksize),y},setattr(g,y){y.mode!==void 0&&(g.mode=y.mode),y.timestamp!==void 0&&(g.timestamp=y.timestamp),y.size!==void 0&&Jt.resizeFileStorage(g,y.size)},lookup(g,y){throw H.genericErrors[44]},mknod(g,y,S,N){return Jt.createNode(g,y,S,N)},rename(g,y,S){if(H.isDir(g.mode)){var N;try{N=H.lookupNode(y,S)}catch{}if(N)for(var C in N.contents)throw new H.ErrnoError(55)}delete g.parent.contents[g.name],g.parent.timestamp=Date.now(),g.name=S,y.contents[S]=g,y.timestamp=g.parent.timestamp},unlink(g,y){delete g.contents[y],g.timestamp=Date.now()},rmdir(g,y){var S=H.lookupNode(g,y);for(var N in S.contents)throw new H.ErrnoError(55);delete g.contents[y],g.timestamp=Date.now()},readdir(g){var y=[".",".."];for(var S of Object.keys(g.contents))y.push(S);return y},symlink(g,y,S){var N=Jt.createNode(g,y,41471,0);return N.link=S,N},readlink(g){if(!H.isLink(g.mode))throw new H.ErrnoError(28);return g.link}},stream_ops:{read(g,y,S,N,C){var B=g.node.contents;if(C>=g.node.usedBytes)return 0;var fe=Math.min(g.node.usedBytes-C,N);if(fe>8&&B.subarray)y.set(B.subarray(C,C+fe),S);else for(var me=0;me<fe;me++)y[S+me]=B[C+me];return fe},write(g,y,S,N,C,B){if(y.buffer===D.buffer&&(B=!1),!N)return 0;var fe=g.node;if(fe.timestamp=Date.now(),y.subarray&&(!fe.contents||fe.contents.subarray)){if(B)return fe.contents=y.subarray(S,S+N),fe.usedBytes=N,N;if(fe.usedBytes===0&&C===0)return fe.contents=y.slice(S,S+N),fe.usedBytes=N,N;if(C+N<=fe.usedBytes)return fe.contents.set(y.subarray(S,S+N),C),N}if(Jt.expandFileStorage(fe,C+N),fe.contents.subarray&&y.subarray)fe.contents.set(y.subarray(S,S+N),C);else for(var me=0;me<N;me++)fe.contents[C+me]=y[S+me];return fe.usedBytes=Math.max(fe.usedBytes,C+N),N},llseek(g,y,S){var N=y;if(S===1?N+=g.position:S===2&&H.isFile(g.node.mode)&&(N+=g.node.usedBytes),N<0)throw new H.ErrnoError(28);return N},allocate(g,y,S){Jt.expandFileStorage(g.node,y+S),g.node.usedBytes=Math.max(g.node.usedBytes,y+S)},mmap(g,y,S,N,C){if(!H.isFile(g.node.mode))throw new H.ErrnoError(43);var B,fe,me=g.node.contents;if(!(C&2)&&me&&me.buffer===D.buffer)fe=!1,B=me.byteOffset;else{if(fe=!0,B=Tr(y),!B)throw new H.ErrnoError(48);me&&((S>0||S+y<me.length)&&(me.subarray?me=me.subarray(S,S+y):me=Array.prototype.slice.call(me,S,S+y)),D.set(me,B))}return{ptr:B,allocated:fe}},msync(g,y,S,N,C){return Jt.stream_ops.write(g,y,0,N,S,!1),0}}},Zi=(g,y,S,N)=>{var C=`al ${g}`;_(g).then(B=>{y(new Uint8Array(B)),C&&Ne()},B=>{if(S)S();else throw`Loading data file "${g}" failed.`}),C&&we()},Yi=(g,y,S,N,C,B)=>{H.createDataFile(g,y,S,N,C,B)},Xi=r.preloadPlugins||[],ho=(g,y,S,N)=>{typeof Browser<"u"&&Browser.init();var C=!1;return Xi.forEach(B=>{C||B.canHandle(y)&&(B.handle(g,y,S,N),C=!0)}),C},da=(g,y,S,N,C,B,fe,me,Ke,tt)=>{var at=y?Ve.resolve(ve.join2(g,y)):g;function mt(Be){function Re(et){tt?.(),me||Yi(g,y,et,N,C,Ke),B?.(),Ne()}ho(Be,at,Re,()=>{fe?.(),Ne()})||Re(Be)}we(),typeof S=="string"?Zi(S,mt,fe):mt(S)},lc=g=>{var y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},S=y[g];if(typeof S>"u")throw new Error(`Unknown file open mode: ${g}`);return S},Ms=(g,y)=>{var S=0;return g&&(S|=365),y&&(S|=146),S},H={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(g){this.name="ErrnoError",this.errno=g}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(g){this.node=g}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(g){this.shared.flags=g}get position(){return this.shared.position}set position(g){this.shared.position=g}},FSNode:class{constructor(g,y,S,N){g||(g=this),this.parent=g,this.mount=g.mount,this.mounted=null,this.id=H.nextInode++,this.name=y,this.mode=S,this.node_ops={},this.stream_ops={},this.rdev=N,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(g){g?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(g){g?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return H.isDir(this.mode)}get isDevice(){return H.isChrdev(this.mode)}},lookupPath(g,y={}){if(g=Ve.resolve(g),!g)return{path:"",node:null};var S={follow_mount:!0,recurse_count:0};if(y=Object.assign(S,y),y.recurse_count>8)throw new H.ErrnoError(32);for(var N=g.split("/").filter(mt=>!!mt),C=H.root,B="/",fe=0;fe<N.length;fe++){var me=fe===N.length-1;if(me&&y.parent)break;if(C=H.lookupNode(C,N[fe]),B=ve.join2(B,N[fe]),H.isMountpoint(C)&&(!me||me&&y.follow_mount)&&(C=C.mounted.root),!me||y.follow)for(var Ke=0;H.isLink(C.mode);){var tt=H.readlink(B);B=Ve.resolve(ve.dirname(B),tt);var at=H.lookupPath(B,{recurse_count:y.recurse_count+1});if(C=at.node,Ke++>40)throw new H.ErrnoError(32)}}return{path:B,node:C}},getPath(g){for(var y;;){if(H.isRoot(g)){var S=g.mount.mountpoint;return y?S[S.length-1]!=="/"?`${S}/${y}`:S+y:S}y=y?`${g.name}/${y}`:g.name,g=g.parent}},hashName(g,y){for(var S=0,N=0;N<y.length;N++)S=(S<<5)-S+y.charCodeAt(N)|0;return(g+S>>>0)%H.nameTable.length},hashAddNode(g){var y=H.hashName(g.parent.id,g.name);g.name_next=H.nameTable[y],H.nameTable[y]=g},hashRemoveNode(g){var y=H.hashName(g.parent.id,g.name);if(H.nameTable[y]===g)H.nameTable[y]=g.name_next;else for(var S=H.nameTable[y];S;){if(S.name_next===g){S.name_next=g.name_next;break}S=S.name_next}},lookupNode(g,y){var S=H.mayLookup(g);if(S)throw new H.ErrnoError(S);for(var N=H.hashName(g.id,y),C=H.nameTable[N];C;C=C.name_next){var B=C.name;if(C.parent.id===g.id&&B===y)return C}return H.lookup(g,y)},createNode(g,y,S,N){var C=new H.FSNode(g,y,S,N);return H.hashAddNode(C),C},destroyNode(g){H.hashRemoveNode(g)},isRoot(g){return g===g.parent},isMountpoint(g){return!!g.mounted},isFile(g){return(g&61440)===32768},isDir(g){return(g&61440)===16384},isLink(g){return(g&61440)===40960},isChrdev(g){return(g&61440)===8192},isBlkdev(g){return(g&61440)===24576},isFIFO(g){return(g&61440)===4096},isSocket(g){return(g&49152)===49152},flagsToPermissionString(g){var y=["r","w","rw"][g&3];return g&512&&(y+="w"),y},nodePermissions(g,y){return H.ignorePermissions?0:y.includes("r")&&!(g.mode&292)||y.includes("w")&&!(g.mode&146)||y.includes("x")&&!(g.mode&73)?2:0},mayLookup(g){if(!H.isDir(g.mode))return 54;var y=H.nodePermissions(g,"x");return y||(g.node_ops.lookup?0:2)},mayCreate(g,y){try{var S=H.lookupNode(g,y);return 20}catch{}return H.nodePermissions(g,"wx")},mayDelete(g,y,S){var N;try{N=H.lookupNode(g,y)}catch(B){return B.errno}var C=H.nodePermissions(g,"wx");if(C)return C;if(S){if(!H.isDir(N.mode))return 54;if(H.isRoot(N)||H.getPath(N)===H.cwd())return 10}else if(H.isDir(N.mode))return 31;return 0},mayOpen(g,y){return g?H.isLink(g.mode)?32:H.isDir(g.mode)&&(H.flagsToPermissionString(y)!=="r"||y&512)?31:H.nodePermissions(g,H.flagsToPermissionString(y)):44},MAX_OPEN_FDS:4096,nextfd(){for(var g=0;g<=H.MAX_OPEN_FDS;g++)if(!H.streams[g])return g;throw new H.ErrnoError(33)},getStreamChecked(g){var y=H.getStream(g);if(!y)throw new H.ErrnoError(8);return y},getStream:g=>H.streams[g],createStream(g,y=-1){return g=Object.assign(new H.FSStream,g),y==-1&&(y=H.nextfd()),g.fd=y,H.streams[y]=g,g},closeStream(g){H.streams[g]=null},dupStream(g,y=-1){var S=H.createStream(g,y);return S.stream_ops?.dup?.(S),S},chrdev_stream_ops:{open(g){var y=H.getDevice(g.node.rdev);g.stream_ops=y.stream_ops,g.stream_ops.open?.(g)},llseek(){throw new H.ErrnoError(70)}},major:g=>g>>8,minor:g=>g&255,makedev:(g,y)=>g<<8|y,registerDevice(g,y){H.devices[g]={stream_ops:y}},getDevice:g=>H.devices[g],getMounts(g){for(var y=[],S=[g];S.length;){var N=S.pop();y.push(N),S.push(...N.mounts)}return y},syncfs(g,y){typeof g=="function"&&(y=g,g=!1),H.syncFSRequests++,H.syncFSRequests>1&&T(`warning: ${H.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var S=H.getMounts(H.root.mount),N=0;function C(fe){return H.syncFSRequests--,y(fe)}function B(fe){if(fe)return B.errored?void 0:(B.errored=!0,C(fe));++N>=S.length&&C(null)}S.forEach(fe=>{if(!fe.type.syncfs)return B(null);fe.type.syncfs(fe,g,B)})},mount(g,y,S){var N=S==="/",C=!S,B;if(N&&H.root)throw new H.ErrnoError(10);if(!N&&!C){var fe=H.lookupPath(S,{follow_mount:!1});if(S=fe.path,B=fe.node,H.isMountpoint(B))throw new H.ErrnoError(10);if(!H.isDir(B.mode))throw new H.ErrnoError(54)}var me={type:g,opts:y,mountpoint:S,mounts:[]},Ke=g.mount(me);return Ke.mount=me,me.root=Ke,N?H.root=Ke:B&&(B.mounted=me,B.mount&&B.mount.mounts.push(me)),Ke},unmount(g){var y=H.lookupPath(g,{follow_mount:!1});if(!H.isMountpoint(y.node))throw new H.ErrnoError(28);var S=y.node,N=S.mounted,C=H.getMounts(N);Object.keys(H.nameTable).forEach(fe=>{for(var me=H.nameTable[fe];me;){var Ke=me.name_next;C.includes(me.mount)&&H.destroyNode(me),me=Ke}}),S.mounted=null;var B=S.mount.mounts.indexOf(N);S.mount.mounts.splice(B,1)},lookup(g,y){return g.node_ops.lookup(g,y)},mknod(g,y,S){var N=H.lookupPath(g,{parent:!0}),C=N.node,B=ve.basename(g);if(!B||B==="."||B==="..")throw new H.ErrnoError(28);var fe=H.mayCreate(C,B);if(fe)throw new H.ErrnoError(fe);if(!C.node_ops.mknod)throw new H.ErrnoError(63);return C.node_ops.mknod(C,B,y,S)},create(g,y){return y=y!==void 0?y:438,y&=4095,y|=32768,H.mknod(g,y,0)},mkdir(g,y){return y=y!==void 0?y:511,y&=1023,y|=16384,H.mknod(g,y,0)},mkdirTree(g,y){for(var S=g.split("/"),N="",C=0;C<S.length;++C)if(S[C]){N+="/"+S[C];try{H.mkdir(N,y)}catch(B){if(B.errno!=20)throw B}}},mkdev(g,y,S){return typeof S>"u"&&(S=y,y=438),y|=8192,H.mknod(g,y,S)},symlink(g,y){if(!Ve.resolve(g))throw new H.ErrnoError(44);var S=H.lookupPath(y,{parent:!0}),N=S.node;if(!N)throw new H.ErrnoError(44);var C=ve.basename(y),B=H.mayCreate(N,C);if(B)throw new H.ErrnoError(B);if(!N.node_ops.symlink)throw new H.ErrnoError(63);return N.node_ops.symlink(N,C,g)},rename(g,y){var S=ve.dirname(g),N=ve.dirname(y),C=ve.basename(g),B=ve.basename(y),fe,me,Ke;if(fe=H.lookupPath(g,{parent:!0}),me=fe.node,fe=H.lookupPath(y,{parent:!0}),Ke=fe.node,!me||!Ke)throw new H.ErrnoError(44);if(me.mount!==Ke.mount)throw new H.ErrnoError(75);var tt=H.lookupNode(me,C),at=Ve.relative(g,N);if(at.charAt(0)!==".")throw new H.ErrnoError(28);if(at=Ve.relative(y,S),at.charAt(0)!==".")throw new H.ErrnoError(55);var mt;try{mt=H.lookupNode(Ke,B)}catch{}if(tt!==mt){var Be=H.isDir(tt.mode),Re=H.mayDelete(me,C,Be);if(Re)throw new H.ErrnoError(Re);if(Re=mt?H.mayDelete(Ke,B,Be):H.mayCreate(Ke,B),Re)throw new H.ErrnoError(Re);if(!me.node_ops.rename)throw new H.ErrnoError(63);if(H.isMountpoint(tt)||mt&&H.isMountpoint(mt))throw new H.ErrnoError(10);if(Ke!==me&&(Re=H.nodePermissions(me,"w"),Re))throw new H.ErrnoError(Re);H.hashRemoveNode(tt);try{me.node_ops.rename(tt,Ke,B),tt.parent=Ke}catch(et){throw et}finally{H.hashAddNode(tt)}}},rmdir(g){var y=H.lookupPath(g,{parent:!0}),S=y.node,N=ve.basename(g),C=H.lookupNode(S,N),B=H.mayDelete(S,N,!0);if(B)throw new H.ErrnoError(B);if(!S.node_ops.rmdir)throw new H.ErrnoError(63);if(H.isMountpoint(C))throw new H.ErrnoError(10);S.node_ops.rmdir(S,N),H.destroyNode(C)},readdir(g){var y=H.lookupPath(g,{follow:!0}),S=y.node;if(!S.node_ops.readdir)throw new H.ErrnoError(54);return S.node_ops.readdir(S)},unlink(g){var y=H.lookupPath(g,{parent:!0}),S=y.node;if(!S)throw new H.ErrnoError(44);var N=ve.basename(g),C=H.lookupNode(S,N),B=H.mayDelete(S,N,!1);if(B)throw new H.ErrnoError(B);if(!S.node_ops.unlink)throw new H.ErrnoError(63);if(H.isMountpoint(C))throw new H.ErrnoError(10);S.node_ops.unlink(S,N),H.destroyNode(C)},readlink(g){var y=H.lookupPath(g),S=y.node;if(!S)throw new H.ErrnoError(44);if(!S.node_ops.readlink)throw new H.ErrnoError(28);return Ve.resolve(H.getPath(S.parent),S.node_ops.readlink(S))},stat(g,y){var S=H.lookupPath(g,{follow:!y}),N=S.node;if(!N)throw new H.ErrnoError(44);if(!N.node_ops.getattr)throw new H.ErrnoError(63);return N.node_ops.getattr(N)},lstat(g){return H.stat(g,!0)},chmod(g,y,S){var N;if(typeof g=="string"){var C=H.lookupPath(g,{follow:!S});N=C.node}else N=g;if(!N.node_ops.setattr)throw new H.ErrnoError(63);N.node_ops.setattr(N,{mode:y&4095|N.mode&-4096,timestamp:Date.now()})},lchmod(g,y){H.chmod(g,y,!0)},fchmod(g,y){var S=H.getStreamChecked(g);H.chmod(S.node,y)},chown(g,y,S,N){var C;if(typeof g=="string"){var B=H.lookupPath(g,{follow:!N});C=B.node}else C=g;if(!C.node_ops.setattr)throw new H.ErrnoError(63);C.node_ops.setattr(C,{timestamp:Date.now()})},lchown(g,y,S){H.chown(g,y,S,!0)},fchown(g,y,S){var N=H.getStreamChecked(g);H.chown(N.node,y,S)},truncate(g,y){if(y<0)throw new H.ErrnoError(28);var S;if(typeof g=="string"){var N=H.lookupPath(g,{follow:!0});S=N.node}else S=g;if(!S.node_ops.setattr)throw new H.ErrnoError(63);if(H.isDir(S.mode))throw new H.ErrnoError(31);if(!H.isFile(S.mode))throw new H.ErrnoError(28);var C=H.nodePermissions(S,"w");if(C)throw new H.ErrnoError(C);S.node_ops.setattr(S,{size:y,timestamp:Date.now()})},ftruncate(g,y){var S=H.getStreamChecked(g);if(!(S.flags&2097155))throw new H.ErrnoError(28);H.truncate(S.node,y)},utime(g,y,S){var N=H.lookupPath(g,{follow:!0}),C=N.node;C.node_ops.setattr(C,{timestamp:Math.max(y,S)})},open(g,y,S){if(g==="")throw new H.ErrnoError(44);y=typeof y=="string"?lc(y):y,y&64?(S=typeof S>"u"?438:S,S=S&4095|32768):S=0;var N;if(typeof g=="object")N=g;else{g=ve.normalize(g);try{var C=H.lookupPath(g,{follow:!(y&131072)});N=C.node}catch{}}var B=!1;if(y&64)if(N){if(y&128)throw new H.ErrnoError(20)}else N=H.mknod(g,S,0),B=!0;if(!N)throw new H.ErrnoError(44);if(H.isChrdev(N.mode)&&(y&=-513),y&65536&&!H.isDir(N.mode))throw new H.ErrnoError(54);if(!B){var fe=H.mayOpen(N,y);if(fe)throw new H.ErrnoError(fe)}y&512&&!B&&H.truncate(N,0),y&=-131713;var me=H.createStream({node:N,path:H.getPath(N),flags:y,seekable:!0,position:0,stream_ops:N.stream_ops,ungotten:[],error:!1});return me.stream_ops.open&&me.stream_ops.open(me),r.logReadFiles&&!(y&1)&&(H.readFiles||(H.readFiles={}),g in H.readFiles||(H.readFiles[g]=1)),me},close(g){if(H.isClosed(g))throw new H.ErrnoError(8);g.getdents&&(g.getdents=null);try{g.stream_ops.close&&g.stream_ops.close(g)}catch(y){throw y}finally{H.closeStream(g.fd)}g.fd=null},isClosed(g){return g.fd===null},llseek(g,y,S){if(H.isClosed(g))throw new H.ErrnoError(8);if(!g.seekable||!g.stream_ops.llseek)throw new H.ErrnoError(70);if(S!=0&&S!=1&&S!=2)throw new H.ErrnoError(28);return g.position=g.stream_ops.llseek(g,y,S),g.ungotten=[],g.position},read(g,y,S,N,C){if(N<0||C<0)throw new H.ErrnoError(28);if(H.isClosed(g))throw new H.ErrnoError(8);if((g.flags&2097155)===1)throw new H.ErrnoError(8);if(H.isDir(g.node.mode))throw new H.ErrnoError(31);if(!g.stream_ops.read)throw new H.ErrnoError(28);var B=typeof C<"u";if(!B)C=g.position;else if(!g.seekable)throw new H.ErrnoError(70);var fe=g.stream_ops.read(g,y,S,N,C);return B||(g.position+=fe),fe},write(g,y,S,N,C,B){if(N<0||C<0)throw new H.ErrnoError(28);if(H.isClosed(g))throw new H.ErrnoError(8);if(!(g.flags&2097155))throw new H.ErrnoError(8);if(H.isDir(g.node.mode))throw new H.ErrnoError(31);if(!g.stream_ops.write)throw new H.ErrnoError(28);g.seekable&&g.flags&1024&&H.llseek(g,0,2);var fe=typeof C<"u";if(!fe)C=g.position;else if(!g.seekable)throw new H.ErrnoError(70);var me=g.stream_ops.write(g,y,S,N,C,B);return fe||(g.position+=me),me},allocate(g,y,S){if(H.isClosed(g))throw new H.ErrnoError(8);if(y<0||S<=0)throw new H.ErrnoError(28);if(!(g.flags&2097155))throw new H.ErrnoError(8);if(!H.isFile(g.node.mode)&&!H.isDir(g.node.mode))throw new H.ErrnoError(43);if(!g.stream_ops.allocate)throw new H.ErrnoError(138);g.stream_ops.allocate(g,y,S)},mmap(g,y,S,N,C){if(N&2&&!(C&2)&&(g.flags&2097155)!==2)throw new H.ErrnoError(2);if((g.flags&2097155)===1)throw new H.ErrnoError(2);if(!g.stream_ops.mmap)throw new H.ErrnoError(43);if(!y)throw new H.ErrnoError(28);return g.stream_ops.mmap(g,y,S,N,C)},msync(g,y,S,N,C){return g.stream_ops.msync?g.stream_ops.msync(g,y,S,N,C):0},ioctl(g,y,S){if(!g.stream_ops.ioctl)throw new H.ErrnoError(59);return g.stream_ops.ioctl(g,y,S)},readFile(g,y={}){if(y.flags=y.flags||0,y.encoding=y.encoding||"binary",y.encoding!=="utf8"&&y.encoding!=="binary")throw new Error(`Invalid encoding type "${y.encoding}"`);var S,N=H.open(g,y.flags),C=H.stat(g),B=C.size,fe=new Uint8Array(B);return H.read(N,fe,0,B,0),y.encoding==="utf8"?S=Me(fe,0):y.encoding==="binary"&&(S=fe),H.close(N),S},writeFile(g,y,S={}){S.flags=S.flags||577;var N=H.open(g,S.flags,S.mode);if(typeof y=="string"){var C=new Uint8Array(Qt(y)+1),B=Gt(y,C,0,C.length);H.write(N,C,0,B,void 0,S.canOwn)}else if(ArrayBuffer.isView(y))H.write(N,y,0,y.byteLength,void 0,S.canOwn);else throw new Error("Unsupported data type");H.close(N)},cwd:()=>H.currentPath,chdir(g){var y=H.lookupPath(g,{follow:!0});if(y.node===null)throw new H.ErrnoError(44);if(!H.isDir(y.node.mode))throw new H.ErrnoError(54);var S=H.nodePermissions(y.node,"x");if(S)throw new H.ErrnoError(S);H.currentPath=y.path},createDefaultDirectories(){H.mkdir("/tmp"),H.mkdir("/home"),H.mkdir("/home/web_user")},createDefaultDevices(){H.mkdir("/dev"),H.registerDevice(H.makedev(1,3),{read:()=>0,write:(N,C,B,fe,me)=>fe}),H.mkdev("/dev/null",H.makedev(1,3)),Ln.register(H.makedev(5,0),Ln.default_tty_ops),Ln.register(H.makedev(6,0),Ln.default_tty1_ops),H.mkdev("/dev/tty",H.makedev(5,0)),H.mkdev("/dev/tty1",H.makedev(6,0));var g=new Uint8Array(1024),y=0,S=()=>(y===0&&(y=Ae(g).byteLength),g[--y]);H.createDevice("/dev","random",S),H.createDevice("/dev","urandom",S),H.mkdir("/dev/shm"),H.mkdir("/dev/shm/tmp")},createSpecialDirectories(){H.mkdir("/proc");var g=H.mkdir("/proc/self");H.mkdir("/proc/self/fd"),H.mount({mount(){var y=H.createNode(g,"fd",16895,73);return y.node_ops={lookup(S,N){var C=+N,B=H.getStreamChecked(C),fe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>B.path}};return fe.parent=fe,fe}},y}},{},"/proc/self/fd")},createStandardStreams(g,y,S){g?H.createDevice("/dev","stdin",g):H.symlink("/dev/tty","/dev/stdin"),y?H.createDevice("/dev","stdout",null,y):H.symlink("/dev/tty","/dev/stdout"),S?H.createDevice("/dev","stderr",null,S):H.symlink("/dev/tty1","/dev/stderr"),H.open("/dev/stdin",0),H.open("/dev/stdout",1),H.open("/dev/stderr",1)},staticInit(){[44].forEach(g=>{H.genericErrors[g]=new H.ErrnoError(g),H.genericErrors[g].stack="<generic error, no stack>"}),H.nameTable=new Array(4096),H.mount(Jt,{},"/"),H.createDefaultDirectories(),H.createDefaultDevices(),H.createSpecialDirectories(),H.filesystems={MEMFS:Jt}},init(g,y,S){H.initialized=!0,g??=r.stdin,y??=r.stdout,S??=r.stderr,H.createStandardStreams(g,y,S)},quit(){H.initialized=!1;for(var g=0;g<H.streams.length;g++){var y=H.streams[g];y&&H.close(y)}},findObject(g,y){var S=H.analyzePath(g,y);return S.exists?S.object:null},analyzePath(g,y){try{var S=H.lookupPath(g,{follow:!y});g=S.path}catch{}var N={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var S=H.lookupPath(g,{parent:!0});N.parentExists=!0,N.parentPath=S.path,N.parentObject=S.node,N.name=ve.basename(g),S=H.lookupPath(g,{follow:!y}),N.exists=!0,N.path=S.path,N.object=S.node,N.name=S.node.name,N.isRoot=S.path==="/"}catch(C){N.error=C.errno}return N},createPath(g,y,S,N){g=typeof g=="string"?g:H.getPath(g);for(var C=y.split("/").reverse();C.length;){var B=C.pop();if(B){var fe=ve.join2(g,B);try{H.mkdir(fe)}catch{}g=fe}}return fe},createFile(g,y,S,N,C){var B=ve.join2(typeof g=="string"?g:H.getPath(g),y),fe=Ms(N,C);return H.create(B,fe)},createDataFile(g,y,S,N,C,B){var fe=y;g&&(g=typeof g=="string"?g:H.getPath(g),fe=y?ve.join2(g,y):g);var me=Ms(N,C),Ke=H.create(fe,me);if(S){if(typeof S=="string"){for(var tt=new Array(S.length),at=0,mt=S.length;at<mt;++at)tt[at]=S.charCodeAt(at);S=tt}H.chmod(Ke,me|146);var Be=H.open(Ke,577);H.write(Be,S,0,S.length,0,B),H.close(Be),H.chmod(Ke,me)}},createDevice(g,y,S,N){var C=ve.join2(typeof g=="string"?g:H.getPath(g),y),B=Ms(!!S,!!N);H.createDevice.major||(H.createDevice.major=64);var fe=H.makedev(H.createDevice.major++,0);return H.registerDevice(fe,{open(me){me.seekable=!1},close(me){N?.buffer?.length&&N(10)},read(me,Ke,tt,at,mt){for(var Be=0,Re=0;Re<at;Re++){var et;try{et=S()}catch{throw new H.ErrnoError(29)}if(et===void 0&&Be===0)throw new H.ErrnoError(6);if(et==null)break;Be++,Ke[tt+Re]=et}return Be&&(me.node.timestamp=Date.now()),Be},write(me,Ke,tt,at,mt){for(var Be=0;Be<at;Be++)try{N(Ke[tt+Be])}catch{throw new H.ErrnoError(29)}return at&&(me.node.timestamp=Date.now()),Be}}),H.mkdev(C,B,fe)},forceLoadFile(g){if(g.isDevice||g.isFolder||g.link||g.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{g.contents=E(g.url),g.usedBytes=g.contents.length}catch{throw new H.ErrnoError(29)}},createLazyFile(g,y,S,N,C){class B{constructor(){this.lengthKnown=!1,this.chunks=[]}get(Re){if(!(Re>this.length-1||Re<0)){var et=Re%this.chunkSize,be=Re/this.chunkSize|0;return this.getter(be)[et]}}setDataGetter(Re){this.getter=Re}cacheLength(){var Re=new XMLHttpRequest;if(Re.open("HEAD",S,!1),Re.send(null),!(Re.status>=200&&Re.status<300||Re.status===304))throw new Error("Couldn't load "+S+". Status: "+Re.status);var et=Number(Re.getResponseHeader("Content-length")),be,Ie=(be=Re.getResponseHeader("Accept-Ranges"))&&be==="bytes",Te=(be=Re.getResponseHeader("Content-Encoding"))&&be==="gzip",Ze=1024*1024;Ie||(Ze=et);var Ge=(Qe,St)=>{if(Qe>St)throw new Error("invalid range ("+Qe+", "+St+") or no bytes requested!");if(St>et-1)throw new Error("only "+et+" bytes available! programmer error!");var X=new XMLHttpRequest;if(X.open("GET",S,!1),et!==Ze&&X.setRequestHeader("Range","bytes="+Qe+"-"+St),X.responseType="arraybuffer",X.overrideMimeType&&X.overrideMimeType("text/plain; charset=x-user-defined"),X.send(null),!(X.status>=200&&X.status<300||X.status===304))throw new Error("Couldn't load "+S+". Status: "+X.status);return X.response!==void 0?new Uint8Array(X.response||[]):mn(X.responseText||"")},je=this;je.setDataGetter(Qe=>{var St=Qe*Ze,X=(Qe+1)*Ze-1;if(X=Math.min(X,et-1),typeof je.chunks[Qe]>"u"&&(je.chunks[Qe]=Ge(St,X)),typeof je.chunks[Qe]>"u")throw new Error("doXHR failed!");return je.chunks[Qe]}),(Te||!et)&&(Ze=et=1,et=this.getter(0).length,Ze=et,I("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=et,this._chunkSize=Ze,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var fe=new B,me={isDevice:!1,contents:fe}}else var me={isDevice:!1,url:S};var Ke=H.createFile(g,y,me,N,C);me.contents?Ke.contents=me.contents:me.url&&(Ke.contents=null,Ke.url=me.url),Object.defineProperties(Ke,{usedBytes:{get:function(){return this.contents.length}}});var tt={},at=Object.keys(Ke.stream_ops);at.forEach(Be=>{var Re=Ke.stream_ops[Be];tt[Be]=(...et)=>(H.forceLoadFile(Ke),Re(...et))});function mt(Be,Re,et,be,Ie){var Te=Be.node.contents;if(Ie>=Te.length)return 0;var Ze=Math.min(Te.length-Ie,be);if(Te.slice)for(var Ge=0;Ge<Ze;Ge++)Re[et+Ge]=Te[Ie+Ge];else for(var Ge=0;Ge<Ze;Ge++)Re[et+Ge]=Te.get(Ie+Ge);return Ze}return tt.read=(Be,Re,et,be,Ie)=>(H.forceLoadFile(Ke),mt(Be,Re,et,be,Ie)),tt.mmap=(Be,Re,et,be,Ie)=>{H.forceLoadFile(Ke);var Te=Tr(Re);if(!Te)throw new H.ErrnoError(48);return mt(Be,D,Te,Re,et),{ptr:Te,allocated:!0}},Ke.stream_ops=tt,Ke}},hu=(g,y)=>g?Me(M,g,y):"",un={DEFAULT_POLLMASK:5,calculateAt(g,y,S){if(ve.isAbs(y))return y;var N;if(g===-100)N=H.cwd();else{var C=un.getStreamFromFD(g);N=C.path}if(y.length==0){if(!S)throw new H.ErrnoError(44);return N}return ve.join2(N,y)},doStat(g,y,S){var N=g(y);P[S>>2]=N.dev,P[S+4>>2]=N.mode,R[S+8>>2]=N.nlink,P[S+12>>2]=N.uid,P[S+16>>2]=N.gid,P[S+20>>2]=N.rdev,$[S+24>>3]=BigInt(N.size),P[S+32>>2]=4096,P[S+36>>2]=N.blocks;var C=N.atime.getTime(),B=N.mtime.getTime(),fe=N.ctime.getTime();return $[S+40>>3]=BigInt(Math.floor(C/1e3)),R[S+48>>2]=C%1e3*1e3*1e3,$[S+56>>3]=BigInt(Math.floor(B/1e3)),R[S+64>>2]=B%1e3*1e3*1e3,$[S+72>>3]=BigInt(Math.floor(fe/1e3)),R[S+80>>2]=fe%1e3*1e3*1e3,$[S+88>>3]=BigInt(N.ino),0},doMsync(g,y,S,N,C){if(!H.isFile(y.node.mode))throw new H.ErrnoError(43);if(N&2)return 0;var B=M.slice(g,g+S);H.msync(y,B,C,S,N)},getStreamFromFD(g){var y=H.getStreamChecked(g);return y},varargs:void 0,getStr(g){var y=hu(g);return y}};function mu(g,y){try{return g=un.getStr(g),H.chmod(g,y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function gu(g,y,S,N){try{if(y=un.getStr(y),y=un.calculateAt(g,y),S&-8)return-28;var C=H.lookupPath(y,{follow:!0}),B=C.node;if(!B)return-44;var fe="";return S&4&&(fe+="r"),S&2&&(fe+="w"),S&1&&(fe+="x"),fe&&H.nodePermissions(B,fe)?-2:0}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function yu(g,y){try{return H.fchmod(g,y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function cc(g,y,S){try{return H.fchown(g,y,S),0}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function fa(){var g=P[+un.varargs>>2];return un.varargs+=4,g}var es=fa;function uc(g,y,S){un.varargs=S;try{var N=un.getStreamFromFD(g);switch(y){case 0:{var C=fa();if(C<0)return-28;for(;H.streams[C];)C++;var B;return B=H.dupStream(N,C),B.fd}case 1:case 2:return 0;case 3:return N.flags;case 4:{var C=fa();return N.flags|=C,0}case 12:{var C=es(),fe=0;return W[C+fe>>1]=2,0}case 13:case 14:return 0}return-28}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function pa(g,y){try{var S=un.getStreamFromFD(g);return un.doStat(H.stat,S.path,y)}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Sf=0x20000000000000,ha=-0x20000000000000,$s=g=>g<ha||g>Sf?NaN:Number(g);function Ja(g,y){y=$s(y);try{return isNaN(y)?61:(H.ftruncate(g,y),0)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}var Bs=(g,y,S)=>Gt(g,M,y,S);function Ef(g,y){try{if(y===0)return-28;var S=H.cwd(),N=Qt(S)+1;return y<N?-68:(Bs(S,g,y),N)}catch(C){if(typeof H>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}function Nf(g,y,S){un.varargs=S;try{var N=un.getStreamFromFD(g);switch(y){case 21509:return N.tty?0:-59;case 21505:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcgets){var C=N.tty.ops.ioctl_tcgets(N),B=es();P[B>>2]=C.c_iflag||0,P[B+4>>2]=C.c_oflag||0,P[B+8>>2]=C.c_cflag||0,P[B+12>>2]=C.c_lflag||0;for(var fe=0;fe<32;fe++)D[B+fe+17]=C.c_cc[fe]||0;return 0}return 0}case 21510:case 21511:case 21512:return N.tty?0:-59;case 21506:case 21507:case 21508:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tcsets){for(var B=es(),me=P[B>>2],Ke=P[B+4>>2],tt=P[B+8>>2],at=P[B+12>>2],mt=[],fe=0;fe<32;fe++)mt.push(D[B+fe+17]);return N.tty.ops.ioctl_tcsets(N.tty,y,{c_iflag:me,c_oflag:Ke,c_cflag:tt,c_lflag:at,c_cc:mt})}return 0}case 21519:{if(!N.tty)return-59;var B=es();return P[B>>2]=0,0}case 21520:return N.tty?-28:-59;case 21531:{var B=es();return H.ioctl(N,y,B)}case 21523:{if(!N.tty)return-59;if(N.tty.ops.ioctl_tiocgwinsz){var Be=N.tty.ops.ioctl_tiocgwinsz(N.tty),B=es();W[B>>1]=Be[0],W[B+2>>1]=Be[1]}return 0}case 21524:return N.tty?0:-59;case 21515:return N.tty?0:-59;default:return-28}}catch(Re){if(typeof H>"u"||Re.name!=="ErrnoError")throw Re;return-Re.errno}}function vu(g,y){try{return g=un.getStr(g),un.doStat(H.lstat,g,y)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function zs(g,y,S){try{return y=un.getStr(y),y=un.calculateAt(g,y),y=ve.normalize(y),y[y.length-1]==="/"&&(y=y.substr(0,y.length-1)),H.mkdir(y,S,0),0}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function bu(g,y,S,N){try{y=un.getStr(y);var C=N&256,B=N&4096;return N=N&-6401,y=un.calculateAt(g,y,B),un.doStat(C?H.lstat:H.stat,y,S)}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return-fe.errno}}function xu(g,y,S,N){un.varargs=N;try{y=un.getStr(y),y=un.calculateAt(g,y);var C=N?fa():0;return H.open(y,S,C).fd}catch(B){if(typeof H>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function kf(g,y,S,N){try{if(y=un.getStr(y),y=un.calculateAt(g,y),N<=0)return-28;var C=H.readlink(y),B=Math.min(N,Qt(C)),fe=D[S+B];return Bs(C,S,N+1),D[S+B]=fe,B}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}function wu(g){try{return g=un.getStr(g),H.rmdir(g),0}catch(y){if(typeof H>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function _u(g,y){try{return g=un.getStr(g),un.doStat(H.stat,g,y)}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return-S.errno}}function Su(g,y,S){try{return y=un.getStr(y),y=un.calculateAt(g,y),S===0?H.unlink(y):S===512?H.rmdir(y):ze("Invalid flags passed to unlinkat"),0}catch(N){if(typeof H>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var dc=g=>R[g>>2]+P[g+4>>2]*0x100000000;function Eu(g,y,S,N){try{y=un.getStr(y),y=un.calculateAt(g,y,!0);var C=Date.now(),B,fe;if(!S)B=C,fe=C;else{var me=dc(S),Ke=P[S+8>>2];Ke==0x3fffffff?B=C:Ke==0x3ffffffe?B=-1:B=me*1e3+Ke/(1e3*1e3),S+=16,me=dc(S),Ke=P[S+8>>2],Ke==0x3fffffff?fe=C:Ke==0x3ffffffe?fe=-1:fe=me*1e3+Ke/(1e3*1e3)}return(fe!=-1||B!=-1)&&H.utime(y,B,fe),0}catch(tt){if(typeof H>"u"||tt.name!=="ErrnoError")throw tt;return-tt.errno}}var If=1,dr=()=>If,Cf=g=>g%4===0&&(g%100!==0||g%400===0),fc=[0,31,60,91,121,152,182,213,244,274,305,335],Nu=[0,31,59,90,120,151,181,212,243,273,304,334],Za=g=>{var y=Cf(g.getFullYear()),S=y?fc:Nu,N=S[g.getMonth()]+g.getDate()-1;return N};function Tf(g,y){g=$s(g);var S=new Date(g*1e3);P[y>>2]=S.getSeconds(),P[y+4>>2]=S.getMinutes(),P[y+8>>2]=S.getHours(),P[y+12>>2]=S.getDate(),P[y+16>>2]=S.getMonth(),P[y+20>>2]=S.getFullYear()-1900,P[y+24>>2]=S.getDay();var N=Za(S)|0;P[y+28>>2]=N,P[y+36>>2]=-(S.getTimezoneOffset()*60);var C=new Date(S.getFullYear(),0,1),B=new Date(S.getFullYear(),6,1).getTimezoneOffset(),fe=C.getTimezoneOffset(),me=(B!=fe&&S.getTimezoneOffset()==Math.min(fe,B))|0;P[y+32>>2]=me}function pc(g,y,S,N,C,B,fe){C=$s(C);try{if(isNaN(C))return 61;var me=un.getStreamFromFD(N),Ke=H.mmap(me,g,C,y,S),tt=Ke.ptr;return P[B>>2]=Ke.allocated,R[fe>>2]=tt,0}catch(at){if(typeof H>"u"||at.name!=="ErrnoError")throw at;return-at.errno}}function Ya(g,y,S,N,C,B){B=$s(B);try{var fe=un.getStreamFromFD(C);S&2&&un.doMsync(g,fe,y,N,B)}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return-me.errno}}var ts=(g,y,S,N)=>{var C=new Date().getFullYear(),B=new Date(C,0,1),fe=new Date(C,6,1),me=B.getTimezoneOffset(),Ke=fe.getTimezoneOffset(),tt=Math.max(me,Ke);R[g>>2]=tt*60,P[y>>2]=+(me!=Ke);var at=Re=>{var et=Re>=0?"-":"+",be=Math.abs(Re),Ie=String(Math.floor(be/60)).padStart(2,"0"),Te=String(be%60).padStart(2,"0");return`UTC${et}${Ie}${Te}`},mt=at(me),Be=at(Ke);Ke<me?(Bs(mt,S,17),Bs(Be,N,17)):(Bs(mt,N,17),Bs(Be,S,17))},jf=()=>Date.now(),gi;gi=()=>performance.now();var Of=()=>0x80000000,Rf=g=>{var y=O.buffer,S=(g-y.byteLength+65535)/65536;try{return O.grow(S),F(),1}catch{}},qf=g=>{var y=M.length;g>>>=0;var S=Of();if(g>S)return!1;for(var N=1;N<=4;N*=2){var C=y*(1+.2/N);C=Math.min(C,g+0x6000000);var B=Math.min(S,Oi(Math.max(g,C),65536)),fe=Rf(B);if(fe)return!0}return!1},zo={},Xa=()=>h||"./this.program",Ri=()=>{if(!Ri.strings){var g=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:g,_:Xa()};for(var S in zo)zo[S]===void 0?delete y[S]:y[S]=zo[S];var N=[];for(var S in y)N.push(`${S}=${y[S]}`);Ri.strings=N}return Ri.strings},el=(g,y)=>{for(var S=0;S<g.length;++S)D[y++]=g.charCodeAt(S);D[y]=0},hx=(g,y)=>{var S=0;return Ri().forEach((N,C)=>{var B=y+S;R[g+C*4>>2]=B,el(N,B),S+=N.length+1}),0},mx=(g,y)=>{var S=Ri();R[g>>2]=S.length;var N=0;return S.forEach(C=>N+=C.length+1),R[y>>2]=N,0};function Af(g){try{var y=un.getStreamFromFD(g);return H.close(y),0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return S.errno}}function Rm(g,y){try{var S=0,N=0,C=0,B=un.getStreamFromFD(g),fe=B.tty?2:H.isDir(B.mode)?3:H.isLink(B.mode)?7:4;return D[y]=fe,W[y+2>>1]=C,$[y+8>>3]=BigInt(S),$[y+16>>3]=BigInt(N),0}catch(me){if(typeof H>"u"||me.name!=="ErrnoError")throw me;return me.errno}}var Pf=(g,y,S,N)=>{for(var C=0,B=0;B<S;B++){var fe=R[y>>2],me=R[y+4>>2];y+=8;var Ke=H.read(g,D,fe,me,N);if(Ke<0)return-1;if(C+=Ke,Ke<me)break}return C};function hc(g,y,S,N){try{var C=un.getStreamFromFD(g),B=Pf(C,y,S);return R[N>>2]=B,0}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}function gx(g,y,S,N){y=$s(y);try{if(isNaN(y))return 61;var C=un.getStreamFromFD(g);return H.llseek(C,y,S),$[N>>3]=BigInt(C.position),C.getdents&&y===0&&S===0&&(C.getdents=null),0}catch(B){if(typeof H>"u"||B.name!=="ErrnoError")throw B;return B.errno}}function Ff(g){try{var y=un.getStreamFromFD(g);return y.stream_ops?.fsync?y.stream_ops.fsync(y):0}catch(S){if(typeof H>"u"||S.name!=="ErrnoError")throw S;return S.errno}}var Mn=(g,y,S,N)=>{for(var C=0,B=0;B<S;B++){var fe=R[y>>2],me=R[y+4>>2];y+=8;var Ke=H.write(g,D,fe,me,N);if(Ke<0)return-1;if(C+=Ke,Ke<me)break}return C};function qm(g,y,S,N){try{var C=un.getStreamFromFD(g),B=Mn(C,y,S);return R[N>>2]=B,0}catch(fe){if(typeof H>"u"||fe.name!=="ErrnoError")throw fe;return fe.errno}}H.createPreloadedFile=da,H.staticInit();var Df={__syscall_chmod:mu,__syscall_faccessat:gu,__syscall_fchmod:yu,__syscall_fchown32:cc,__syscall_fcntl64:uc,__syscall_fstat64:pa,__syscall_ftruncate64:Ja,__syscall_getcwd:Ef,__syscall_ioctl:Nf,__syscall_lstat64:vu,__syscall_mkdirat:zs,__syscall_newfstatat:bu,__syscall_openat:xu,__syscall_readlinkat:kf,__syscall_rmdir:wu,__syscall_stat64:_u,__syscall_unlinkat:Su,__syscall_utimensat:Eu,_emscripten_get_now_is_monotonic:dr,_localtime_js:Tf,_mmap_js:pc,_munmap_js:Ya,_tzset_js:ts,emscripten_date_now:jf,emscripten_get_now:gi,emscripten_resize_heap:qf,environ_get:hx,environ_sizes_get:mx,fd_close:Af,fd_fdstat_get:Rm,fd_read:hc,fd_seek:gx,fd_sync:Ff,fd_write:qm,memory:O},he=nn();r._sqlite3_status64=(g,y,S,N)=>(r._sqlite3_status64=he.sqlite3_status64)(g,y,S,N),r._sqlite3_status=(g,y,S,N)=>(r._sqlite3_status=he.sqlite3_status)(g,y,S,N),r._sqlite3_db_status=(g,y,S,N,C)=>(r._sqlite3_db_status=he.sqlite3_db_status)(g,y,S,N,C),r._sqlite3_msize=g=>(r._sqlite3_msize=he.sqlite3_msize)(g),r._sqlite3_vfs_find=g=>(r._sqlite3_vfs_find=he.sqlite3_vfs_find)(g),r._sqlite3_initialize=()=>(r._sqlite3_initialize=he.sqlite3_initialize)(),r._sqlite3_malloc=g=>(r._sqlite3_malloc=he.sqlite3_malloc)(g),r._sqlite3_free=g=>(r._sqlite3_free=he.sqlite3_free)(g),r._sqlite3_vfs_register=(g,y)=>(r._sqlite3_vfs_register=he.sqlite3_vfs_register)(g,y),r._sqlite3_vfs_unregister=g=>(r._sqlite3_vfs_unregister=he.sqlite3_vfs_unregister)(g),r._sqlite3_malloc64=g=>(r._sqlite3_malloc64=he.sqlite3_malloc64)(g),r._sqlite3_realloc=(g,y)=>(r._sqlite3_realloc=he.sqlite3_realloc)(g,y),r._sqlite3_realloc64=(g,y)=>(r._sqlite3_realloc64=he.sqlite3_realloc64)(g,y),r._sqlite3_value_text=g=>(r._sqlite3_value_text=he.sqlite3_value_text)(g),r._sqlite3_randomness=(g,y)=>(r._sqlite3_randomness=he.sqlite3_randomness)(g,y),r._sqlite3_stricmp=(g,y)=>(r._sqlite3_stricmp=he.sqlite3_stricmp)(g,y),r._sqlite3_strnicmp=(g,y,S)=>(r._sqlite3_strnicmp=he.sqlite3_strnicmp)(g,y,S),r._sqlite3_uri_parameter=(g,y)=>(r._sqlite3_uri_parameter=he.sqlite3_uri_parameter)(g,y),r._sqlite3_uri_boolean=(g,y,S)=>(r._sqlite3_uri_boolean=he.sqlite3_uri_boolean)(g,y,S),r._sqlite3_serialize=(g,y,S,N)=>(r._sqlite3_serialize=he.sqlite3_serialize)(g,y,S,N),r._sqlite3_prepare_v2=(g,y,S,N,C)=>(r._sqlite3_prepare_v2=he.sqlite3_prepare_v2)(g,y,S,N,C),r._sqlite3_step=g=>(r._sqlite3_step=he.sqlite3_step)(g),r._sqlite3_column_int64=(g,y)=>(r._sqlite3_column_int64=he.sqlite3_column_int64)(g,y),r._sqlite3_reset=g=>(r._sqlite3_reset=he.sqlite3_reset)(g),r._sqlite3_exec=(g,y,S,N,C)=>(r._sqlite3_exec=he.sqlite3_exec)(g,y,S,N,C),r._sqlite3_column_int=(g,y)=>(r._sqlite3_column_int=he.sqlite3_column_int)(g,y),r._sqlite3_finalize=g=>(r._sqlite3_finalize=he.sqlite3_finalize)(g),r._sqlite3_file_control=(g,y,S,N)=>(r._sqlite3_file_control=he.sqlite3_file_control)(g,y,S,N),r._sqlite3_column_name=(g,y)=>(r._sqlite3_column_name=he.sqlite3_column_name)(g,y),r._sqlite3_column_text=(g,y)=>(r._sqlite3_column_text=he.sqlite3_column_text)(g,y),r._sqlite3_column_type=(g,y)=>(r._sqlite3_column_type=he.sqlite3_column_type)(g,y),r._sqlite3_errmsg=g=>(r._sqlite3_errmsg=he.sqlite3_errmsg)(g),r._sqlite3_deserialize=(g,y,S,N,C,B)=>(r._sqlite3_deserialize=he.sqlite3_deserialize)(g,y,S,N,C,B),r._sqlite3_clear_bindings=g=>(r._sqlite3_clear_bindings=he.sqlite3_clear_bindings)(g),r._sqlite3_value_blob=g=>(r._sqlite3_value_blob=he.sqlite3_value_blob)(g),r._sqlite3_value_bytes=g=>(r._sqlite3_value_bytes=he.sqlite3_value_bytes)(g),r._sqlite3_value_double=g=>(r._sqlite3_value_double=he.sqlite3_value_double)(g),r._sqlite3_value_int=g=>(r._sqlite3_value_int=he.sqlite3_value_int)(g),r._sqlite3_value_int64=g=>(r._sqlite3_value_int64=he.sqlite3_value_int64)(g),r._sqlite3_value_subtype=g=>(r._sqlite3_value_subtype=he.sqlite3_value_subtype)(g),r._sqlite3_value_pointer=(g,y)=>(r._sqlite3_value_pointer=he.sqlite3_value_pointer)(g,y),r._sqlite3_value_type=g=>(r._sqlite3_value_type=he.sqlite3_value_type)(g),r._sqlite3_value_nochange=g=>(r._sqlite3_value_nochange=he.sqlite3_value_nochange)(g),r._sqlite3_value_frombind=g=>(r._sqlite3_value_frombind=he.sqlite3_value_frombind)(g),r._sqlite3_value_dup=g=>(r._sqlite3_value_dup=he.sqlite3_value_dup)(g),r._sqlite3_value_free=g=>(r._sqlite3_value_free=he.sqlite3_value_free)(g),r._sqlite3_result_blob=(g,y,S,N)=>(r._sqlite3_result_blob=he.sqlite3_result_blob)(g,y,S,N),r._sqlite3_result_error_toobig=g=>(r._sqlite3_result_error_toobig=he.sqlite3_result_error_toobig)(g),r._sqlite3_result_error_nomem=g=>(r._sqlite3_result_error_nomem=he.sqlite3_result_error_nomem)(g),r._sqlite3_result_double=(g,y)=>(r._sqlite3_result_double=he.sqlite3_result_double)(g,y),r._sqlite3_result_error=(g,y,S)=>(r._sqlite3_result_error=he.sqlite3_result_error)(g,y,S),r._sqlite3_result_int=(g,y)=>(r._sqlite3_result_int=he.sqlite3_result_int)(g,y),r._sqlite3_result_int64=(g,y)=>(r._sqlite3_result_int64=he.sqlite3_result_int64)(g,y),r._sqlite3_result_null=g=>(r._sqlite3_result_null=he.sqlite3_result_null)(g),r._sqlite3_result_pointer=(g,y,S,N)=>(r._sqlite3_result_pointer=he.sqlite3_result_pointer)(g,y,S,N),r._sqlite3_result_subtype=(g,y)=>(r._sqlite3_result_subtype=he.sqlite3_result_subtype)(g,y),r._sqlite3_result_text=(g,y,S,N)=>(r._sqlite3_result_text=he.sqlite3_result_text)(g,y,S,N),r._sqlite3_result_zeroblob=(g,y)=>(r._sqlite3_result_zeroblob=he.sqlite3_result_zeroblob)(g,y),r._sqlite3_result_zeroblob64=(g,y)=>(r._sqlite3_result_zeroblob64=he.sqlite3_result_zeroblob64)(g,y),r._sqlite3_result_error_code=(g,y)=>(r._sqlite3_result_error_code=he.sqlite3_result_error_code)(g,y),r._sqlite3_user_data=g=>(r._sqlite3_user_data=he.sqlite3_user_data)(g),r._sqlite3_context_db_handle=g=>(r._sqlite3_context_db_handle=he.sqlite3_context_db_handle)(g),r._sqlite3_vtab_nochange=g=>(r._sqlite3_vtab_nochange=he.sqlite3_vtab_nochange)(g),r._sqlite3_vtab_in_first=(g,y)=>(r._sqlite3_vtab_in_first=he.sqlite3_vtab_in_first)(g,y),r._sqlite3_vtab_in_next=(g,y)=>(r._sqlite3_vtab_in_next=he.sqlite3_vtab_in_next)(g,y),r._sqlite3_aggregate_context=(g,y)=>(r._sqlite3_aggregate_context=he.sqlite3_aggregate_context)(g,y),r._sqlite3_get_auxdata=(g,y)=>(r._sqlite3_get_auxdata=he.sqlite3_get_auxdata)(g,y),r._sqlite3_set_auxdata=(g,y,S,N)=>(r._sqlite3_set_auxdata=he.sqlite3_set_auxdata)(g,y,S,N),r._sqlite3_column_count=g=>(r._sqlite3_column_count=he.sqlite3_column_count)(g),r._sqlite3_data_count=g=>(r._sqlite3_data_count=he.sqlite3_data_count)(g),r._sqlite3_column_blob=(g,y)=>(r._sqlite3_column_blob=he.sqlite3_column_blob)(g,y),r._sqlite3_column_bytes=(g,y)=>(r._sqlite3_column_bytes=he.sqlite3_column_bytes)(g,y),r._sqlite3_column_double=(g,y)=>(r._sqlite3_column_double=he.sqlite3_column_double)(g,y),r._sqlite3_column_value=(g,y)=>(r._sqlite3_column_value=he.sqlite3_column_value)(g,y),r._sqlite3_column_decltype=(g,y)=>(r._sqlite3_column_decltype=he.sqlite3_column_decltype)(g,y),r._sqlite3_bind_blob=(g,y,S,N,C)=>(r._sqlite3_bind_blob=he.sqlite3_bind_blob)(g,y,S,N,C),r._sqlite3_bind_double=(g,y,S)=>(r._sqlite3_bind_double=he.sqlite3_bind_double)(g,y,S),r._sqlite3_bind_int=(g,y,S)=>(r._sqlite3_bind_int=he.sqlite3_bind_int)(g,y,S),r._sqlite3_bind_int64=(g,y,S)=>(r._sqlite3_bind_int64=he.sqlite3_bind_int64)(g,y,S),r._sqlite3_bind_null=(g,y)=>(r._sqlite3_bind_null=he.sqlite3_bind_null)(g,y),r._sqlite3_bind_pointer=(g,y,S,N,C)=>(r._sqlite3_bind_pointer=he.sqlite3_bind_pointer)(g,y,S,N,C),r._sqlite3_bind_text=(g,y,S,N,C)=>(r._sqlite3_bind_text=he.sqlite3_bind_text)(g,y,S,N,C),r._sqlite3_bind_parameter_count=g=>(r._sqlite3_bind_parameter_count=he.sqlite3_bind_parameter_count)(g),r._sqlite3_bind_parameter_name=(g,y)=>(r._sqlite3_bind_parameter_name=he.sqlite3_bind_parameter_name)(g,y),r._sqlite3_bind_parameter_index=(g,y)=>(r._sqlite3_bind_parameter_index=he.sqlite3_bind_parameter_index)(g,y),r._sqlite3_db_handle=g=>(r._sqlite3_db_handle=he.sqlite3_db_handle)(g),r._sqlite3_stmt_readonly=g=>(r._sqlite3_stmt_readonly=he.sqlite3_stmt_readonly)(g),r._sqlite3_stmt_isexplain=g=>(r._sqlite3_stmt_isexplain=he.sqlite3_stmt_isexplain)(g),r._sqlite3_stmt_explain=(g,y)=>(r._sqlite3_stmt_explain=he.sqlite3_stmt_explain)(g,y),r._sqlite3_stmt_busy=g=>(r._sqlite3_stmt_busy=he.sqlite3_stmt_busy)(g),r._sqlite3_stmt_status=(g,y,S)=>(r._sqlite3_stmt_status=he.sqlite3_stmt_status)(g,y,S),r._sqlite3_sql=g=>(r._sqlite3_sql=he.sqlite3_sql)(g),r._sqlite3_expanded_sql=g=>(r._sqlite3_expanded_sql=he.sqlite3_expanded_sql)(g),r._sqlite3_preupdate_old=(g,y,S)=>(r._sqlite3_preupdate_old=he.sqlite3_preupdate_old)(g,y,S),r._sqlite3_preupdate_count=g=>(r._sqlite3_preupdate_count=he.sqlite3_preupdate_count)(g),r._sqlite3_preupdate_depth=g=>(r._sqlite3_preupdate_depth=he.sqlite3_preupdate_depth)(g),r._sqlite3_preupdate_blobwrite=g=>(r._sqlite3_preupdate_blobwrite=he.sqlite3_preupdate_blobwrite)(g),r._sqlite3_preupdate_new=(g,y,S)=>(r._sqlite3_preupdate_new=he.sqlite3_preupdate_new)(g,y,S),r._sqlite3_value_numeric_type=g=>(r._sqlite3_value_numeric_type=he.sqlite3_value_numeric_type)(g),r._sqlite3_set_authorizer=(g,y,S)=>(r._sqlite3_set_authorizer=he.sqlite3_set_authorizer)(g,y,S),r._sqlite3_strglob=(g,y)=>(r._sqlite3_strglob=he.sqlite3_strglob)(g,y),r._sqlite3_strlike=(g,y,S)=>(r._sqlite3_strlike=he.sqlite3_strlike)(g,y,S),r._sqlite3_auto_extension=g=>(r._sqlite3_auto_extension=he.sqlite3_auto_extension)(g),r._sqlite3_cancel_auto_extension=g=>(r._sqlite3_cancel_auto_extension=he.sqlite3_cancel_auto_extension)(g),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=he.sqlite3_reset_auto_extension)(),r._sqlite3_prepare_v3=(g,y,S,N,C,B)=>(r._sqlite3_prepare_v3=he.sqlite3_prepare_v3)(g,y,S,N,C,B),r._sqlite3_create_module=(g,y,S,N)=>(r._sqlite3_create_module=he.sqlite3_create_module)(g,y,S,N),r._sqlite3_create_module_v2=(g,y,S,N,C)=>(r._sqlite3_create_module_v2=he.sqlite3_create_module_v2)(g,y,S,N,C),r._sqlite3_drop_modules=(g,y)=>(r._sqlite3_drop_modules=he.sqlite3_drop_modules)(g,y),r._sqlite3_declare_vtab=(g,y)=>(r._sqlite3_declare_vtab=he.sqlite3_declare_vtab)(g,y),r._sqlite3_vtab_on_conflict=g=>(r._sqlite3_vtab_on_conflict=he.sqlite3_vtab_on_conflict)(g),r._sqlite3_vtab_collation=(g,y)=>(r._sqlite3_vtab_collation=he.sqlite3_vtab_collation)(g,y),r._sqlite3_vtab_in=(g,y,S)=>(r._sqlite3_vtab_in=he.sqlite3_vtab_in)(g,y,S),r._sqlite3_vtab_rhs_value=(g,y,S)=>(r._sqlite3_vtab_rhs_value=he.sqlite3_vtab_rhs_value)(g,y,S),r._sqlite3_vtab_distinct=g=>(r._sqlite3_vtab_distinct=he.sqlite3_vtab_distinct)(g),r._sqlite3_keyword_name=(g,y,S)=>(r._sqlite3_keyword_name=he.sqlite3_keyword_name)(g,y,S),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=he.sqlite3_keyword_count)(),r._sqlite3_keyword_check=(g,y)=>(r._sqlite3_keyword_check=he.sqlite3_keyword_check)(g,y),r._sqlite3_complete=g=>(r._sqlite3_complete=he.sqlite3_complete)(g),r._sqlite3_libversion=()=>(r._sqlite3_libversion=he.sqlite3_libversion)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=he.sqlite3_libversion_number)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=he.sqlite3_shutdown)(),r._sqlite3_last_insert_rowid=g=>(r._sqlite3_last_insert_rowid=he.sqlite3_last_insert_rowid)(g),r._sqlite3_set_last_insert_rowid=(g,y)=>(r._sqlite3_set_last_insert_rowid=he.sqlite3_set_last_insert_rowid)(g,y),r._sqlite3_changes64=g=>(r._sqlite3_changes64=he.sqlite3_changes64)(g),r._sqlite3_changes=g=>(r._sqlite3_changes=he.sqlite3_changes)(g),r._sqlite3_total_changes64=g=>(r._sqlite3_total_changes64=he.sqlite3_total_changes64)(g),r._sqlite3_total_changes=g=>(r._sqlite3_total_changes=he.sqlite3_total_changes)(g),r._sqlite3_txn_state=(g,y)=>(r._sqlite3_txn_state=he.sqlite3_txn_state)(g,y),r._sqlite3_close_v2=g=>(r._sqlite3_close_v2=he.sqlite3_close_v2)(g),r._sqlite3_busy_handler=(g,y,S)=>(r._sqlite3_busy_handler=he.sqlite3_busy_handler)(g,y,S),r._sqlite3_progress_handler=(g,y,S,N)=>(r._sqlite3_progress_handler=he.sqlite3_progress_handler)(g,y,S,N),r._sqlite3_busy_timeout=(g,y)=>(r._sqlite3_busy_timeout=he.sqlite3_busy_timeout)(g,y),r._sqlite3_interrupt=g=>(r._sqlite3_interrupt=he.sqlite3_interrupt)(g),r._sqlite3_is_interrupted=g=>(r._sqlite3_is_interrupted=he.sqlite3_is_interrupted)(g),r._sqlite3_create_function=(g,y,S,N,C,B,fe,me)=>(r._sqlite3_create_function=he.sqlite3_create_function)(g,y,S,N,C,B,fe,me),r._sqlite3_create_function_v2=(g,y,S,N,C,B,fe,me,Ke)=>(r._sqlite3_create_function_v2=he.sqlite3_create_function_v2)(g,y,S,N,C,B,fe,me,Ke),r._sqlite3_create_window_function=(g,y,S,N,C,B,fe,me,Ke,tt)=>(r._sqlite3_create_window_function=he.sqlite3_create_window_function)(g,y,S,N,C,B,fe,me,Ke,tt),r._sqlite3_overload_function=(g,y,S)=>(r._sqlite3_overload_function=he.sqlite3_overload_function)(g,y,S),r._sqlite3_trace_v2=(g,y,S,N)=>(r._sqlite3_trace_v2=he.sqlite3_trace_v2)(g,y,S,N),r._sqlite3_commit_hook=(g,y,S)=>(r._sqlite3_commit_hook=he.sqlite3_commit_hook)(g,y,S),r._sqlite3_update_hook=(g,y,S)=>(r._sqlite3_update_hook=he.sqlite3_update_hook)(g,y,S),r._sqlite3_rollback_hook=(g,y,S)=>(r._sqlite3_rollback_hook=he.sqlite3_rollback_hook)(g,y,S),r._sqlite3_preupdate_hook=(g,y,S)=>(r._sqlite3_preupdate_hook=he.sqlite3_preupdate_hook)(g,y,S),r._sqlite3_error_offset=g=>(r._sqlite3_error_offset=he.sqlite3_error_offset)(g),r._sqlite3_errcode=g=>(r._sqlite3_errcode=he.sqlite3_errcode)(g),r._sqlite3_extended_errcode=g=>(r._sqlite3_extended_errcode=he.sqlite3_extended_errcode)(g),r._sqlite3_errstr=g=>(r._sqlite3_errstr=he.sqlite3_errstr)(g),r._sqlite3_limit=(g,y,S)=>(r._sqlite3_limit=he.sqlite3_limit)(g,y,S),r._sqlite3_open=(g,y)=>(r._sqlite3_open=he.sqlite3_open)(g,y),r._sqlite3_open_v2=(g,y,S,N)=>(r._sqlite3_open_v2=he.sqlite3_open_v2)(g,y,S,N),r._sqlite3_create_collation=(g,y,S,N,C)=>(r._sqlite3_create_collation=he.sqlite3_create_collation)(g,y,S,N,C),r._sqlite3_create_collation_v2=(g,y,S,N,C,B)=>(r._sqlite3_create_collation_v2=he.sqlite3_create_collation_v2)(g,y,S,N,C,B),r._sqlite3_collation_needed=(g,y,S)=>(r._sqlite3_collation_needed=he.sqlite3_collation_needed)(g,y,S),r._sqlite3_get_autocommit=g=>(r._sqlite3_get_autocommit=he.sqlite3_get_autocommit)(g),r._sqlite3_table_column_metadata=(g,y,S,N,C,B,fe,me,Ke)=>(r._sqlite3_table_column_metadata=he.sqlite3_table_column_metadata)(g,y,S,N,C,B,fe,me,Ke),r._sqlite3_extended_result_codes=(g,y)=>(r._sqlite3_extended_result_codes=he.sqlite3_extended_result_codes)(g,y),r._sqlite3_uri_key=(g,y)=>(r._sqlite3_uri_key=he.sqlite3_uri_key)(g,y),r._sqlite3_uri_int64=(g,y,S)=>(r._sqlite3_uri_int64=he.sqlite3_uri_int64)(g,y,S),r._sqlite3_db_name=(g,y)=>(r._sqlite3_db_name=he.sqlite3_db_name)(g,y),r._sqlite3_db_filename=(g,y)=>(r._sqlite3_db_filename=he.sqlite3_db_filename)(g,y),r._sqlite3_db_readonly=(g,y)=>(r._sqlite3_db_readonly=he.sqlite3_db_readonly)(g,y),r._sqlite3_compileoption_used=g=>(r._sqlite3_compileoption_used=he.sqlite3_compileoption_used)(g),r._sqlite3_compileoption_get=g=>(r._sqlite3_compileoption_get=he.sqlite3_compileoption_get)(g),r._sqlite3session_diff=(g,y,S,N)=>(r._sqlite3session_diff=he.sqlite3session_diff)(g,y,S,N),r._sqlite3session_attach=(g,y)=>(r._sqlite3session_attach=he.sqlite3session_attach)(g,y),r._sqlite3session_create=(g,y,S)=>(r._sqlite3session_create=he.sqlite3session_create)(g,y,S),r._sqlite3session_delete=g=>(r._sqlite3session_delete=he.sqlite3session_delete)(g),r._sqlite3session_table_filter=(g,y,S)=>(r._sqlite3session_table_filter=he.sqlite3session_table_filter)(g,y,S),r._sqlite3session_changeset=(g,y,S)=>(r._sqlite3session_changeset=he.sqlite3session_changeset)(g,y,S),r._sqlite3session_changeset_strm=(g,y,S)=>(r._sqlite3session_changeset_strm=he.sqlite3session_changeset_strm)(g,y,S),r._sqlite3session_patchset_strm=(g,y,S)=>(r._sqlite3session_patchset_strm=he.sqlite3session_patchset_strm)(g,y,S),r._sqlite3session_patchset=(g,y,S)=>(r._sqlite3session_patchset=he.sqlite3session_patchset)(g,y,S),r._sqlite3session_enable=(g,y)=>(r._sqlite3session_enable=he.sqlite3session_enable)(g,y),r._sqlite3session_indirect=(g,y)=>(r._sqlite3session_indirect=he.sqlite3session_indirect)(g,y),r._sqlite3session_isempty=g=>(r._sqlite3session_isempty=he.sqlite3session_isempty)(g),r._sqlite3session_memory_used=g=>(r._sqlite3session_memory_used=he.sqlite3session_memory_used)(g),r._sqlite3session_object_config=(g,y,S)=>(r._sqlite3session_object_config=he.sqlite3session_object_config)(g,y,S),r._sqlite3session_changeset_size=g=>(r._sqlite3session_changeset_size=he.sqlite3session_changeset_size)(g),r._sqlite3changeset_start=(g,y,S)=>(r._sqlite3changeset_start=he.sqlite3changeset_start)(g,y,S),r._sqlite3changeset_start_v2=(g,y,S,N)=>(r._sqlite3changeset_start_v2=he.sqlite3changeset_start_v2)(g,y,S,N),r._sqlite3changeset_start_strm=(g,y,S)=>(r._sqlite3changeset_start_strm=he.sqlite3changeset_start_strm)(g,y,S),r._sqlite3changeset_start_v2_strm=(g,y,S,N)=>(r._sqlite3changeset_start_v2_strm=he.sqlite3changeset_start_v2_strm)(g,y,S,N),r._sqlite3changeset_next=g=>(r._sqlite3changeset_next=he.sqlite3changeset_next)(g),r._sqlite3changeset_op=(g,y,S,N,C)=>(r._sqlite3changeset_op=he.sqlite3changeset_op)(g,y,S,N,C),r._sqlite3changeset_pk=(g,y,S)=>(r._sqlite3changeset_pk=he.sqlite3changeset_pk)(g,y,S),r._sqlite3changeset_old=(g,y,S)=>(r._sqlite3changeset_old=he.sqlite3changeset_old)(g,y,S),r._sqlite3changeset_new=(g,y,S)=>(r._sqlite3changeset_new=he.sqlite3changeset_new)(g,y,S),r._sqlite3changeset_conflict=(g,y,S)=>(r._sqlite3changeset_conflict=he.sqlite3changeset_conflict)(g,y,S),r._sqlite3changeset_fk_conflicts=(g,y)=>(r._sqlite3changeset_fk_conflicts=he.sqlite3changeset_fk_conflicts)(g,y),r._sqlite3changeset_finalize=g=>(r._sqlite3changeset_finalize=he.sqlite3changeset_finalize)(g),r._sqlite3changeset_invert=(g,y,S,N)=>(r._sqlite3changeset_invert=he.sqlite3changeset_invert)(g,y,S,N),r._sqlite3changeset_invert_strm=(g,y,S,N)=>(r._sqlite3changeset_invert_strm=he.sqlite3changeset_invert_strm)(g,y,S,N),r._sqlite3changeset_apply_v2=(g,y,S,N,C,B,fe,me,Ke)=>(r._sqlite3changeset_apply_v2=he.sqlite3changeset_apply_v2)(g,y,S,N,C,B,fe,me,Ke),r._sqlite3changeset_apply=(g,y,S,N,C,B)=>(r._sqlite3changeset_apply=he.sqlite3changeset_apply)(g,y,S,N,C,B),r._sqlite3changeset_apply_v2_strm=(g,y,S,N,C,B,fe,me,Ke)=>(r._sqlite3changeset_apply_v2_strm=he.sqlite3changeset_apply_v2_strm)(g,y,S,N,C,B,fe,me,Ke),r._sqlite3changeset_apply_strm=(g,y,S,N,C,B)=>(r._sqlite3changeset_apply_strm=he.sqlite3changeset_apply_strm)(g,y,S,N,C,B),r._sqlite3changegroup_new=g=>(r._sqlite3changegroup_new=he.sqlite3changegroup_new)(g),r._sqlite3changegroup_add=(g,y,S)=>(r._sqlite3changegroup_add=he.sqlite3changegroup_add)(g,y,S),r._sqlite3changegroup_output=(g,y,S)=>(r._sqlite3changegroup_output=he.sqlite3changegroup_output)(g,y,S),r._sqlite3changegroup_add_strm=(g,y,S)=>(r._sqlite3changegroup_add_strm=he.sqlite3changegroup_add_strm)(g,y,S),r._sqlite3changegroup_output_strm=(g,y,S)=>(r._sqlite3changegroup_output_strm=he.sqlite3changegroup_output_strm)(g,y,S),r._sqlite3changegroup_delete=g=>(r._sqlite3changegroup_delete=he.sqlite3changegroup_delete)(g),r._sqlite3changeset_concat=(g,y,S,N,C,B)=>(r._sqlite3changeset_concat=he.sqlite3changeset_concat)(g,y,S,N,C,B),r._sqlite3changeset_concat_strm=(g,y,S,N,C,B)=>(r._sqlite3changeset_concat_strm=he.sqlite3changeset_concat_strm)(g,y,S,N,C,B),r._sqlite3session_config=(g,y)=>(r._sqlite3session_config=he.sqlite3session_config)(g,y),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=he.sqlite3_sourceid)(),r._sqlite3__wasm_pstack_ptr=()=>(r._sqlite3__wasm_pstack_ptr=he.sqlite3__wasm_pstack_ptr)(),r._sqlite3__wasm_pstack_restore=g=>(r._sqlite3__wasm_pstack_restore=he.sqlite3__wasm_pstack_restore)(g),r._sqlite3__wasm_pstack_alloc=g=>(r._sqlite3__wasm_pstack_alloc=he.sqlite3__wasm_pstack_alloc)(g),r._sqlite3__wasm_pstack_remaining=()=>(r._sqlite3__wasm_pstack_remaining=he.sqlite3__wasm_pstack_remaining)(),r._sqlite3__wasm_pstack_quota=()=>(r._sqlite3__wasm_pstack_quota=he.sqlite3__wasm_pstack_quota)(),r._sqlite3__wasm_db_error=(g,y,S)=>(r._sqlite3__wasm_db_error=he.sqlite3__wasm_db_error)(g,y,S),r._sqlite3__wasm_test_struct=g=>(r._sqlite3__wasm_test_struct=he.sqlite3__wasm_test_struct)(g),r._sqlite3__wasm_enum_json=()=>(r._sqlite3__wasm_enum_json=he.sqlite3__wasm_enum_json)(),r._sqlite3__wasm_vfs_unlink=(g,y)=>(r._sqlite3__wasm_vfs_unlink=he.sqlite3__wasm_vfs_unlink)(g,y),r._sqlite3__wasm_db_vfs=(g,y)=>(r._sqlite3__wasm_db_vfs=he.sqlite3__wasm_db_vfs)(g,y),r._sqlite3__wasm_db_reset=g=>(r._sqlite3__wasm_db_reset=he.sqlite3__wasm_db_reset)(g),r._sqlite3__wasm_db_export_chunked=(g,y)=>(r._sqlite3__wasm_db_export_chunked=he.sqlite3__wasm_db_export_chunked)(g,y),r._sqlite3__wasm_db_serialize=(g,y,S,N,C)=>(r._sqlite3__wasm_db_serialize=he.sqlite3__wasm_db_serialize)(g,y,S,N,C),r._sqlite3__wasm_vfs_create_file=(g,y,S,N)=>(r._sqlite3__wasm_vfs_create_file=he.sqlite3__wasm_vfs_create_file)(g,y,S,N),r._sqlite3__wasm_posix_create_file=(g,y,S)=>(r._sqlite3__wasm_posix_create_file=he.sqlite3__wasm_posix_create_file)(g,y,S),r._sqlite3__wasm_kvvfsMakeKeyOnPstack=(g,y)=>(r._sqlite3__wasm_kvvfsMakeKeyOnPstack=he.sqlite3__wasm_kvvfsMakeKeyOnPstack)(g,y),r._sqlite3__wasm_kvvfs_methods=()=>(r._sqlite3__wasm_kvvfs_methods=he.sqlite3__wasm_kvvfs_methods)(),r._sqlite3__wasm_vtab_config=(g,y,S)=>(r._sqlite3__wasm_vtab_config=he.sqlite3__wasm_vtab_config)(g,y,S),r._sqlite3__wasm_db_config_ip=(g,y,S,N)=>(r._sqlite3__wasm_db_config_ip=he.sqlite3__wasm_db_config_ip)(g,y,S,N),r._sqlite3__wasm_db_config_pii=(g,y,S,N,C)=>(r._sqlite3__wasm_db_config_pii=he.sqlite3__wasm_db_config_pii)(g,y,S,N,C),r._sqlite3__wasm_db_config_s=(g,y,S)=>(r._sqlite3__wasm_db_config_s=he.sqlite3__wasm_db_config_s)(g,y,S),r._sqlite3__wasm_config_i=(g,y)=>(r._sqlite3__wasm_config_i=he.sqlite3__wasm_config_i)(g,y),r._sqlite3__wasm_config_ii=(g,y,S)=>(r._sqlite3__wasm_config_ii=he.sqlite3__wasm_config_ii)(g,y,S),r._sqlite3__wasm_config_j=(g,y)=>(r._sqlite3__wasm_config_j=he.sqlite3__wasm_config_j)(g,y),r._sqlite3__wasm_qfmt_token=(g,y)=>(r._sqlite3__wasm_qfmt_token=he.sqlite3__wasm_qfmt_token)(g,y),r._sqlite3__wasm_init_wasmfs=g=>(r._sqlite3__wasm_init_wasmfs=he.sqlite3__wasm_init_wasmfs)(g),r._sqlite3__wasm_test_intptr=g=>(r._sqlite3__wasm_test_intptr=he.sqlite3__wasm_test_intptr)(g),r._sqlite3__wasm_test_voidptr=g=>(r._sqlite3__wasm_test_voidptr=he.sqlite3__wasm_test_voidptr)(g),r._sqlite3__wasm_test_int64_max=()=>(r._sqlite3__wasm_test_int64_max=he.sqlite3__wasm_test_int64_max)(),r._sqlite3__wasm_test_int64_min=()=>(r._sqlite3__wasm_test_int64_min=he.sqlite3__wasm_test_int64_min)(),r._sqlite3__wasm_test_int64_times2=g=>(r._sqlite3__wasm_test_int64_times2=he.sqlite3__wasm_test_int64_times2)(g),r._sqlite3__wasm_test_int64_minmax=(g,y)=>(r._sqlite3__wasm_test_int64_minmax=he.sqlite3__wasm_test_int64_minmax)(g,y),r._sqlite3__wasm_test_int64ptr=g=>(r._sqlite3__wasm_test_int64ptr=he.sqlite3__wasm_test_int64ptr)(g),r._sqlite3__wasm_test_stack_overflow=g=>(r._sqlite3__wasm_test_stack_overflow=he.sqlite3__wasm_test_stack_overflow)(g),r._sqlite3__wasm_test_str_hello=g=>(r._sqlite3__wasm_test_str_hello=he.sqlite3__wasm_test_str_hello)(g),r._sqlite3__wasm_SQLTester_strglob=(g,y)=>(r._sqlite3__wasm_SQLTester_strglob=he.sqlite3__wasm_SQLTester_strglob)(g,y),r._malloc=g=>(r._malloc=he.malloc)(g),r._free=g=>(r._free=he.free)(g),r._realloc=(g,y)=>(r._realloc=he.realloc)(g,y);var Lf=(g,y)=>(Lf=he.emscripten_builtin_memalign)(g,y);r.wasmMemory=O;var mc;de=function g(){mc||Mf(),mc||(de=g)};function Mf(){if(ue>0||(Y(),ue>0))return;function g(){mc||(mc=!0,r.calledRun=!0,!A&&(le(),i(r),r.onRuntimeInitialized?.(),se()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),g()},1)):g()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Mf(),r.postRun||(r.postRun=[]),r.postRun.push(function(g){if(globalThis.sqlite3ApiBootstrap=function y(S=globalThis.sqlite3ApiConfig||y.defaultConfig){if(y.sqlite3)return(y.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),y.sqlite3;const N=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof g<"u"&&g.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},S||{});Object.assign(N,{allocExportName:N.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:N.useStdAlloc?"free":"sqlite3_free",reallocExportName:N.useStdAlloc?"realloc":"sqlite3_realloc"},N),["exports","memory","wasmfsOpfsDir"].forEach(K=>{typeof N[K]=="function"&&(N[K]=N[K]())}),delete globalThis.sqlite3ApiConfig,delete y.defaultConfig;const C=Object.create(null),B=Object.create(null),fe=K=>C.sqlite3_js_rc_str&&C.sqlite3_js_rc_str(K)||"Unknown result code #"+K,me=K=>typeof K=="number"&&K===(K|0);class Ke extends Error{constructor(...re){let ie;if(re.length)if(me(re[0]))if(ie=re[0],re.length===1)super(fe(re[0]));else{const Le=fe(ie);typeof re[1]=="object"?super(Le,re[1]):(re[0]=Le+":",super(re.join(" ")))}else re.length===2&&typeof re[1]=="object"?super(...re):super(re.join(" "));this.resultCode=ie||C.SQLITE_ERROR,this.name="SQLite3Error"}}Ke.toss=(...K)=>{throw new Ke(...K)};const tt=Ke.toss;N.wasmfsOpfsDir&&!/^\/[^/]+$/.test(N.wasmfsOpfsDir)&&tt("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const at=K=>typeof K!="bigint"&&K===(K|0)&&K<=0x7fffffff&&K>=-0x80000000,mt=function K(re){return K._max||(K._max=BigInt("0x7fffffffffffffff"),K._min=~K._max),re>=K._min&&re<=K._max},Be=K=>K>=-2147483647n-1n&&K<=2147483647n,Re=function K(re){return K._min||(K._min=Number.MIN_SAFE_INTEGER,K._max=Number.MAX_SAFE_INTEGER),re>=K._min&&re<=K._max},et=K=>K&&K.constructor&&at(K.constructor.BYTES_PER_ELEMENT)?K:!1,be=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ie=K=>K.buffer instanceof be,Te=(K,re,ie)=>Ie(K)?K.slice(re,ie):K.subarray(re,ie),Ze=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),Ge=K=>K&&(K instanceof Uint8Array||K instanceof Int8Array||K instanceof ArrayBuffer),je=K=>Ze(K)||tt("Value is not of a supported TypedArray type."),Qe=new TextDecoder("utf-8"),St=function(K,re,ie){return Qe.decode(Te(K,re,ie))},X=function(K){return Ge(K)?St(K instanceof ArrayBuffer?new Uint8Array(K):K):Array.isArray(K)?K.join(""):(B.isPtr(K)&&(K=B.cstrToJs(K)),K)};class ce extends Error{constructor(...re){re.length===2&&typeof re[1]=="object"?super(...re):re.length?super(re.join(" ")):super("Allocation failed."),this.resultCode=C.SQLITE_NOMEM,this.name="WasmAllocError"}}ce.toss=(...K)=>{throw new ce(...K)},Object.assign(C,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(K,re,ie,Le,it,Ot,Wt,Yt,lt)=>{},sqlite3_create_function:(K,re,ie,Le,it,Ot,Wt,Yt)=>{},sqlite3_create_window_function:(K,re,ie,Le,it,Ot,Wt,Yt,lt,_e)=>{},sqlite3_prepare_v3:(K,re,ie,Le,it,Ot)=>{},sqlite3_prepare_v2:(K,re,ie,Le,it)=>{},sqlite3_exec:(K,re,ie,Le,it)=>{},sqlite3_randomness:(K,re)=>{}});const Ee={affirmBindableTypedArray:je,flexibleString:X,bigIntFits32:Be,bigIntFits64:mt,bigIntFitsDouble:Re,isBindableTypedArray:Ze,isInt32:at,isSQLableTypedArray:Ge,isTypedArray:et,typedArrayToString:St,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:Ie,toss:function(...K){throw new Error(K.join(" "))},toss3:tt,typedArrayPart:Te,affirmDbHeader:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re="SQLite format 3";re.length>K.byteLength&&tt("Input does not contain an SQLite3 database header.");for(let ie=0;ie<re.length;++ie)re.charCodeAt(ie)!==K[ie]&&tt("Input does not contain an SQLite3 database header.")},affirmIsDb:function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const re=K.byteLength;(re<512||re%512!==0)&&tt("Byte array size",re,"is invalid for an SQLite3 db."),Ee.affirmDbHeader(K)}};Object.assign(B,{ptrSizeof:N.wasmPtrSizeof||4,ptrIR:N.wasmPtrIR||"i32",bigIntEnabled:!!N.bigIntEnabled,exports:N.exports||tt("Missing API config.exports (WASM module exports)."),memory:N.memory||N.exports.memory||tt("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),B.allocFromTypedArray=function(K){K instanceof ArrayBuffer&&(K=new Uint8Array(K)),je(K);const re=B.alloc(K.byteLength||1);return B.heapForSize(K.constructor).set(K.byteLength?K:[0],re),re};{const K=N.allocExportName,re=N.deallocExportName,ie=N.reallocExportName;for(const Le of[K,re,ie])B.exports[Le]instanceof Function||tt("Missing required exports[",Le,"] function.");B.alloc=function Le(it){return Le.impl(it)||ce.toss("Failed to allocate",it," bytes.")},B.alloc.impl=B.exports[K],B.realloc=function Le(it,Ot){const Wt=Le.impl(it,Ot);return Ot?Wt||ce.toss("Failed to reallocate",Ot," bytes."):0},B.realloc.impl=B.exports[ie],B.dealloc=B.exports[re]}B.compileOptionUsed=function K(re){if(arguments.length){if(Array.isArray(re)){const ie={};return re.forEach(Le=>{ie[Le]=C.sqlite3_compileoption_used(Le)}),ie}else if(typeof re=="object")return Object.keys(re).forEach(ie=>{re[ie]=C.sqlite3_compileoption_used(ie)}),re}else{if(K._result)return K._result;K._opt||(K._rx=/^([^=]+)=(.+)/,K._rxInt=/^-?\d+$/,K._opt=function(Wt,Yt){const lt=K._rx.exec(Wt);Yt[0]=lt?lt[1]:Wt,Yt[1]=lt?K._rxInt.test(lt[2])?+lt[2]:lt[2]:!0});const ie={},Le=[0,0];let it=0,Ot;for(;Ot=C.sqlite3_compileoption_get(it++);)K._opt(Ot,Le),ie[Le[0]]=Le[1];return K._result=ie}return typeof re=="string"?!!C.sqlite3_compileoption_used(re):!1},B.pstack=Object.assign(Object.create(null),{restore:B.exports.sqlite3__wasm_pstack_restore,alloc:function(K){return typeof K=="string"&&!(K=B.sizeofIR(K))&&ce.toss("Invalid value for pstack.alloc(",arguments[0],")"),B.exports.sqlite3__wasm_pstack_alloc(K)||ce.toss("Could not allocate",K,"bytes from the pstack.")},allocChunks:function(K,re){typeof re=="string"&&!(re=B.sizeofIR(re))&&ce.toss("Invalid size value for allocChunks(",arguments[1],")");const ie=B.pstack.alloc(K*re),Le=[];let it=0,Ot=0;for(;it<K;++it,Ot+=re)Le.push(ie+Ot);return Le},allocPtr:(K=1,re=!0)=>K===1?B.pstack.alloc(re?8:B.ptrSizeof):B.pstack.allocChunks(K,re?8:B.ptrSizeof),call:function(K){const re=B.pstack.pointer;try{return K(pe)}finally{B.pstack.restore(re)}}}),Object.defineProperties(B.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:B.exports.sqlite3__wasm_pstack_remaining}}),C.sqlite3_randomness=(...K)=>{if(K.length===1&&Ee.isTypedArray(K[0])&&K[0].BYTES_PER_ELEMENT===1){const re=K[0];if(re.byteLength===0)return B.exports.sqlite3_randomness(0,0),re;const ie=B.pstack.pointer;try{let Le=re.byteLength,it=0;const Ot=B.exports.sqlite3_randomness,Wt=B.heap8u(),Yt=Le<512?Le:512,lt=B.pstack.alloc(Yt);do{const _e=Le>Yt?Yt:Le;Ot(_e,lt),re.set(Te(Wt,lt,lt+_e),it),Le-=_e,it+=_e}while(Le>0)}catch(Le){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",Le)}finally{B.pstack.restore(ie)}return re}B.exports.sqlite3_randomness(...K)};let st;if(C.sqlite3_wasmfs_opfs_dir=function(){if(st!==void 0)return st;const K=N.wasmfsOpfsDir;if(!K||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return st="";try{return K&&B.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],K)===0?st=K:st=""}catch{return st=""}},C.sqlite3_wasmfs_filename_is_persistent=function(K){const re=C.sqlite3_wasmfs_opfs_dir();return re&&K?K.startsWith(re+"/"):!1},C.sqlite3_js_db_uses_vfs=function(K,re,ie=0){try{const Le=C.sqlite3_vfs_find(re);return Le?K?Le===C.sqlite3_js_db_vfs(K,ie)?Le:!1:Le===C.sqlite3_vfs_find(0)?Le:!1:!1}catch{return!1}},C.sqlite3_js_vfs_list=function(){const K=[];let re=C.sqlite3_vfs_find(0);for(;re;){const ie=new C.sqlite3_vfs(re);K.push(B.cstrToJs(ie.$zName)),re=ie.$pNext,ie.dispose()}return K},C.sqlite3_js_db_export=function(K,re=0){K=B.xWrap.testConvertArg("sqlite3*",K),K||tt("Invalid sqlite3* argument."),B.bigIntEnabled||tt("BigInt64 support is not enabled.");const ie=B.scopedAllocPush();let Le;try{const it=B.scopedAlloc(8+B.ptrSizeof),Ot=it+8,Wt=re?B.isPtr(re)?re:B.scopedAllocCString(""+re):0;let Yt=B.exports.sqlite3__wasm_db_serialize(K,Wt,Ot,it,0);Yt&&tt("Database serialization failed with code",pe.capi.sqlite3_js_rc_str(Yt)),Le=B.peekPtr(Ot);const lt=B.peek(it,"i64");return Yt=lt?B.heap8u().slice(Le,Le+Number(lt)):new Uint8Array,Yt}finally{Le&&B.exports.sqlite3_free(Le),B.scopedAllocPop(ie)}},C.sqlite3_js_db_vfs=(K,re=0)=>Ee.sqlite3__wasm_db_vfs(K,re),C.sqlite3_js_aggregate_context=(K,re)=>C.sqlite3_aggregate_context(K,re)||(re?ce.toss("Cannot allocate",re,"bytes for sqlite3_aggregate_context()"):0),C.sqlite3_js_posix_create_file=function(K,re,ie){let Le;re&&B.isPtr(re)?Le=re:re instanceof ArrayBuffer||re instanceof Uint8Array?(Le=B.allocFromTypedArray(re),(arguments.length<3||!Ee.isInt32(ie)||ie<0)&&(ie=re.byteLength)):Ke.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!Ee.isInt32(ie)||ie<0)&&Ke.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const it=Ee.sqlite3__wasm_posix_create_file(K,Le,ie);it&&Ke.toss("Creation of file failed with sqlite3 result code",C.sqlite3_js_rc_str(it))}finally{B.dealloc(Le)}},C.sqlite3_js_vfs_create_file=function(K,re,ie,Le){N.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let it;ie?(B.isPtr(ie)?it=ie:ie instanceof ArrayBuffer&&(ie=new Uint8Array(ie)),ie instanceof Uint8Array?(it=B.allocFromTypedArray(ie),(arguments.length<4||!Ee.isInt32(Le)||Le<0)&&(Le=ie.byteLength)):Ke.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):it=0,(!Ee.isInt32(Le)||Le<0)&&(B.dealloc(it),Ke.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Ot=Ee.sqlite3__wasm_vfs_create_file(K,re,it,Le);Ot&&Ke.toss("Creation of file failed with sqlite3 result code",C.sqlite3_js_rc_str(Ot))}finally{B.dealloc(it)}},C.sqlite3_js_sql_to_string=K=>{if(typeof K=="string")return K;const re=X(v);return re===v?void 0:re},Ee.isUIThread()){const K=function(re){const ie=Object.create(null);return ie.prefix="kvvfs-"+re,ie.stores=[],(re==="session"||re==="")&&ie.stores.push(globalThis.sessionStorage),(re==="local"||re==="")&&ie.stores.push(globalThis.localStorage),ie};C.sqlite3_js_kvvfs_clear=function(re=""){let ie=0;const Le=K(re);return Le.stores.forEach(it=>{const Ot=[];let Wt;for(Wt=0;Wt<it.length;++Wt){const Yt=it.key(Wt);Yt.startsWith(Le.prefix)&&Ot.push(Yt)}Ot.forEach(Yt=>it.removeItem(Yt)),ie+=Ot.length}),ie},C.sqlite3_js_kvvfs_size=function(re=""){let ie=0;const Le=K(re);return Le.stores.forEach(it=>{let Ot;for(Ot=0;Ot<it.length;++Ot){const Wt=it.key(Ot);Wt.startsWith(Le.prefix)&&(ie+=Wt.length,ie+=it.getItem(Wt).length)}}),ie*2}}C.sqlite3_db_config=function(K,re,...ie){switch(this.s||(this.s=B.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=B.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=B.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),re){case C.SQLITE_DBCONFIG_ENABLE_FKEY:case C.SQLITE_DBCONFIG_ENABLE_TRIGGER:case C.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case C.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case C.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case C.SQLITE_DBCONFIG_ENABLE_QPSG:case C.SQLITE_DBCONFIG_TRIGGER_EQP:case C.SQLITE_DBCONFIG_RESET_DATABASE:case C.SQLITE_DBCONFIG_DEFENSIVE:case C.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case C.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case C.SQLITE_DBCONFIG_DQS_DML:case C.SQLITE_DBCONFIG_DQS_DDL:case C.SQLITE_DBCONFIG_ENABLE_VIEW:case C.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case C.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case C.SQLITE_DBCONFIG_STMT_SCANSTATUS:case C.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(K,re,ie[0],ie[1]||0);case C.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(K,re,ie[0],ie[1],ie[2]);case C.SQLITE_DBCONFIG_MAINDBNAME:return this.s(K,re,ie[0]);default:return C.SQLITE_MISUSE}}.bind(Object.create(null)),C.sqlite3_value_to_js=function(K,re=!0){let ie;const Le=C.sqlite3_value_type(K);switch(Le){case C.SQLITE_INTEGER:B.bigIntEnabled?(ie=C.sqlite3_value_int64(K),Ee.bigIntFitsDouble(ie)&&(ie=Number(ie))):ie=C.sqlite3_value_double(K);break;case C.SQLITE_FLOAT:ie=C.sqlite3_value_double(K);break;case C.SQLITE_TEXT:ie=C.sqlite3_value_text(K);break;case C.SQLITE_BLOB:{const it=C.sqlite3_value_bytes(K),Ot=C.sqlite3_value_blob(K);it&&!Ot&&pe.WasmAllocError.toss("Cannot allocate memory for blob argument of",it,"byte(s)"),ie=it?B.heap8u().slice(Ot,Ot+Number(it)):null;break}case C.SQLITE_NULL:ie=null;break;default:re&&tt(C.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",Le),ie=void 0}return ie},C.sqlite3_values_to_js=function(K,re,ie=!0){let Le;const it=[];for(Le=0;Le<K;++Le)it.push(C.sqlite3_value_to_js(B.peekPtr(re+B.ptrSizeof*Le),ie));return it},C.sqlite3_result_error_js=function(K,re){re instanceof ce?C.sqlite3_result_error_nomem(K):C.sqlite3_result_error(K,""+re,-1)},C.sqlite3_result_js=function(K,re){if(re instanceof Error){C.sqlite3_result_error_js(K,re);return}try{switch(typeof re){case"undefined":break;case"boolean":C.sqlite3_result_int(K,re?1:0);break;case"bigint":Ee.bigIntFits32(re)?C.sqlite3_result_int(K,Number(re)):Ee.bigIntFitsDouble(re)?C.sqlite3_result_double(K,Number(re)):B.bigIntEnabled?Ee.bigIntFits64(re)?C.sqlite3_result_int64(K,re):tt("BigInt value",re.toString(),"is too BigInt for int64."):tt("BigInt value",re.toString(),"is too BigInt.");break;case"number":{let ie;Ee.isInt32(re)?ie=C.sqlite3_result_int:B.bigIntEnabled&&Number.isInteger(re)&&Ee.bigIntFits64(BigInt(re))?ie=C.sqlite3_result_int64:ie=C.sqlite3_result_double,ie(K,re);break}case"string":{const[ie,Le]=B.allocCString(re,!0);C.sqlite3_result_text(K,ie,Le,C.SQLITE_WASM_DEALLOC);break}case"object":if(re===null){C.sqlite3_result_null(K);break}else if(Ee.isBindableTypedArray(re)){const ie=B.allocFromTypedArray(re);C.sqlite3_result_blob(K,ie,re.byteLength,C.SQLITE_WASM_DEALLOC);break}default:tt("Don't not how to handle this UDF result value:",typeof re,re)}}catch(ie){C.sqlite3_result_error_js(K,ie)}},C.sqlite3_column_js=function(K,re,ie=!0){const Le=C.sqlite3_column_value(K,re);return Le===0?void 0:C.sqlite3_value_to_js(Le,ie)};const ae=function(K,re,ie){ie=C[ie],this.ptr?B.pokePtr(this.ptr,0):this.ptr=B.allocPtr();const Le=ie(K,re,this.ptr);if(Le)return Ke.toss(Le,arguments[2]+"() failed with code "+Le);const it=B.peekPtr(this.ptr);return it?C.sqlite3_value_to_js(it,!0):void 0}.bind(Object.create(null));C.sqlite3_preupdate_new_js=(K,re)=>ae(K,re,"sqlite3_preupdate_new"),C.sqlite3_preupdate_old_js=(K,re)=>ae(K,re,"sqlite3_preupdate_old"),C.sqlite3changeset_new_js=(K,re)=>ae(K,re,"sqlite3changeset_new"),C.sqlite3changeset_old_js=(K,re)=>ae(K,re,"sqlite3changeset_old");const pe={WasmAllocError:ce,SQLite3Error:Ke,capi:C,util:Ee,wasm:B,config:N,version:Object.create(null),client:void 0,asyncPostInit:async function K(){if(K.isReady instanceof Promise)return K.isReady;let re=y.initializersAsync;delete y.initializersAsync;const ie=async()=>(pe.__isUnderTest||(delete pe.util,delete pe.StructBinder),pe),Le=Ot=>{throw N.error("an async sqlite3 initializer failed:",Ot),Ot};if(!re||!re.length)return K.isReady=ie().catch(Le);re=re.map(Ot=>Ot instanceof Function?async Wt=>Ot(pe):Ot),re.push(ie);let it=Promise.resolve(pe);for(;re.length;)it=it.then(re.shift());return K.isReady=it.catch(Le)},scriptInfo:void 0};try{y.initializers.forEach(K=>{K(pe)})}catch(K){throw console.error("sqlite3 bootstrap initializer threw:",K),K}return delete y.initializers,y.sqlite3=pe,pe},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(y){y.bigIntEnabled===void 0&&(y.bigIntEnabled=!!globalThis.BigInt64Array);const S=(...X)=>{throw new Error(X.join(" "))};y.exports||Object.defineProperty(y,"exports",{enumerable:!0,configurable:!0,get:()=>y.instance&&y.instance.exports});const N=y.pointerIR||"i32",C=y.ptrSizeof=N==="i32"?4:N==="i64"?8:S("Unhandled ptrSizeof:",N),B=Object.create(null);B.heapSize=0,B.memory=null,B.freeFuncIndexes=[],B.scopedAlloc=[],B.utf8Decoder=new TextDecoder,B.utf8Encoder=new TextEncoder("utf-8"),y.sizeofIR=X=>{switch(X){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return C;default:return(""+X).endsWith("*")?C:void 0}};const fe=function(){if(!B.memory)B.memory=y.memory instanceof WebAssembly.Memory?y.memory:y.exports.memory;else if(B.heapSize===B.memory.buffer.byteLength)return B;const X=B.memory.buffer;return B.HEAP8=new Int8Array(X),B.HEAP8U=new Uint8Array(X),B.HEAP16=new Int16Array(X),B.HEAP16U=new Uint16Array(X),B.HEAP32=new Int32Array(X),B.HEAP32U=new Uint32Array(X),y.bigIntEnabled&&(B.HEAP64=new BigInt64Array(X),B.HEAP64U=new BigUint64Array(X)),B.HEAP32F=new Float32Array(X),B.HEAP64F=new Float64Array(X),B.heapSize=X.byteLength,B};y.heap8=()=>fe().HEAP8,y.heap8u=()=>fe().HEAP8U,y.heap16=()=>fe().HEAP16,y.heap16u=()=>fe().HEAP16U,y.heap32=()=>fe().HEAP32,y.heap32u=()=>fe().HEAP32U,y.heapForSize=function(X,ce=!0){const Ee=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe();switch(X){case Int8Array:return Ee.HEAP8;case Uint8Array:return Ee.HEAP8U;case Int16Array:return Ee.HEAP16;case Uint16Array:return Ee.HEAP16U;case Int32Array:return Ee.HEAP32;case Uint32Array:return Ee.HEAP32U;case 8:return ce?Ee.HEAP8U:Ee.HEAP8;case 16:return ce?Ee.HEAP16U:Ee.HEAP16;case 32:return ce?Ee.HEAP32U:Ee.HEAP32;case 64:if(Ee.HEAP64)return ce?Ee.HEAP64U:Ee.HEAP64;break;default:if(y.bigIntEnabled){if(X===globalThis.BigUint64Array)return Ee.HEAP64U;if(X===globalThis.BigInt64Array)return Ee.HEAP64;break}}S("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},y.functionTable=function(){return y.exports.__indirect_function_table},y.functionEntry=function(X){const ce=y.functionTable();return X<ce.length?ce.get(X):void 0},y.jsFuncToWasm=function X(ce,Ee){if(X._||(X._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(pe,K,re){re<128?pe[K](re):pe[K](re%128|128,re>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(pe){const K=X._.rxJSig.exec(pe);return K?K[2]:pe.substr(1)},letterType:pe=>X._.sigTypes[pe]||S("Invalid signature letter:",pe),pushSigType:(pe,K)=>pe.push(X._.typeCodes[X._.letterType(K)])}),typeof ce=="string"){const pe=Ee;Ee=ce,ce=pe}const st=X._.sigParams(Ee),ae=[1,96];X._.uleb128Encode(ae,"push",st.length);for(const pe of st)X._.pushSigType(ae,pe);return Ee[0]==="v"?ae.push(0):(ae.push(1),X._.pushSigType(ae,Ee[0])),X._.uleb128Encode(ae,"unshift",ae.length),ae.unshift(0,97,115,109,1,0,0,0,1),ae.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(ae)),{e:{f:ce}}).exports.f};const me=function(ce,Ee,st){if(st&&!B.scopedAlloc.length&&S("No scopedAllocPush() scope is active."),typeof ce=="string"){const re=Ee;Ee=ce,ce=re}(typeof Ee!="string"||!(ce instanceof Function))&&S("Invalid arguments: expecting (function,signature) or (signature,function).");const ae=y.functionTable(),pe=ae.length;let K;for(;B.freeFuncIndexes.length&&(K=B.freeFuncIndexes.pop(),ae.get(K));){K=null;continue}K||(K=pe,ae.grow(1));try{return ae.set(K,ce),st&&B.scopedAlloc[B.scopedAlloc.length-1].push(K),K}catch(re){if(!(re instanceof TypeError))throw K===pe&&B.freeFuncIndexes.push(pe),re}try{const re=y.jsFuncToWasm(ce,Ee);ae.set(K,re),st&&B.scopedAlloc[B.scopedAlloc.length-1].push(K)}catch(re){throw K===pe&&B.freeFuncIndexes.push(pe),re}return K};y.installFunction=(X,ce)=>me(X,ce,!1),y.scopedInstallFunction=(X,ce)=>me(X,ce,!0),y.uninstallFunction=function(X){if(!X&&X!==0)return;const ce=B.freeFuncIndexes,Ee=y.functionTable();ce.push(X);const st=Ee.get(X);return Ee.set(X,null),st},y.peek=function(ce,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe(),ae=Array.isArray(ce)?[]:void 0;let pe;do{switch(ae&&(ce=arguments[0].shift()),Ee){case"i1":case"i8":pe=st.HEAP8[ce>>0];break;case"i16":pe=st.HEAP16[ce>>1];break;case"i32":pe=st.HEAP32[ce>>2];break;case"float":case"f32":pe=st.HEAP32F[ce>>2];break;case"double":case"f64":pe=Number(st.HEAP64F[ce>>3]);break;case"i64":if(y.bigIntEnabled){pe=BigInt(st.HEAP64[ce>>3]);break}default:S("Invalid type for peek():",Ee)}ae&&ae.push(pe)}while(ae&&arguments[0].length);return ae||pe},y.poke=function(X,ce,Ee="i8"){Ee.endsWith("*")&&(Ee=N);const st=B.memory&&B.heapSize===B.memory.buffer.byteLength?B:fe();for(const ae of Array.isArray(X)?X:[X])switch(Ee){case"i1":case"i8":st.HEAP8[ae>>0]=ce;continue;case"i16":st.HEAP16[ae>>1]=ce;continue;case"i32":st.HEAP32[ae>>2]=ce;continue;case"float":case"f32":st.HEAP32F[ae>>2]=ce;continue;case"double":case"f64":st.HEAP64F[ae>>3]=ce;continue;case"i64":if(st.HEAP64){st.HEAP64[ae>>3]=BigInt(ce);continue}default:S("Invalid type for poke(): "+Ee)}return this},y.peekPtr=(...X)=>y.peek(X.length===1?X[0]:X,N),y.pokePtr=(X,ce=0)=>y.poke(X,ce,N),y.peek8=(...X)=>y.peek(X.length===1?X[0]:X,"i8"),y.poke8=(X,ce)=>y.poke(X,ce,"i8"),y.peek16=(...X)=>y.peek(X.length===1?X[0]:X,"i16"),y.poke16=(X,ce)=>y.poke(X,ce,"i16"),y.peek32=(...X)=>y.peek(X.length===1?X[0]:X,"i32"),y.poke32=(X,ce)=>y.poke(X,ce,"i32"),y.peek64=(...X)=>y.peek(X.length===1?X[0]:X,"i64"),y.poke64=(X,ce)=>y.poke(X,ce,"i64"),y.peek32f=(...X)=>y.peek(X.length===1?X[0]:X,"f32"),y.poke32f=(X,ce)=>y.poke(X,ce,"f32"),y.peek64f=(...X)=>y.peek(X.length===1?X[0]:X,"f64"),y.poke64f=(X,ce)=>y.poke(X,ce,"f64"),y.getMemValue=y.peek,y.getPtrValue=y.peekPtr,y.setMemValue=y.poke,y.setPtrValue=y.pokePtr,y.isPtr32=X=>typeof X=="number"&&X===(X|0)&&X>=0,y.isPtr=y.isPtr32,y.cstrlen=function(X){if(!X||!y.isPtr(X))return null;const ce=fe().HEAP8U;let Ee=X;for(;ce[Ee]!==0;++Ee);return Ee-X};const Ke=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,tt=function(X,ce,Ee){return B.utf8Decoder.decode(X.buffer instanceof Ke?X.slice(ce,Ee):X.subarray(ce,Ee))};y.cstrToJs=function(X){const ce=y.cstrlen(X);return ce?tt(fe().HEAP8U,X,X+ce):ce===null?ce:""},y.jstrlen=function(X){if(typeof X!="string")return null;const ce=X.length;let Ee=0;for(let st=0;st<ce;++st){let ae=X.charCodeAt(st);ae>=55296&&ae<=57343&&(ae=65536+((ae&1023)<<10)|X.charCodeAt(++st)&1023),ae<=127?++Ee:ae<=2047?Ee+=2:ae<=65535?Ee+=3:Ee+=4}return Ee},y.jstrcpy=function(X,ce,Ee=0,st=-1,ae=!0){if((!ce||!(ce instanceof Int8Array)&&!(ce instanceof Uint8Array))&&S("jstrcpy() target must be an Int8Array or Uint8Array."),st<0&&(st=ce.length-Ee),!(st>0)||!(Ee>=0))return 0;let pe=0,K=X.length;const re=Ee,ie=Ee+st-(ae?1:0);for(;pe<K&&Ee<ie;++pe){let Le=X.charCodeAt(pe);if(Le>=55296&&Le<=57343&&(Le=65536+((Le&1023)<<10)|X.charCodeAt(++pe)&1023),Le<=127){if(Ee>=ie)break;ce[Ee++]=Le}else if(Le<=2047){if(Ee+1>=ie)break;ce[Ee++]=192|Le>>6,ce[Ee++]=128|Le&63}else if(Le<=65535){if(Ee+2>=ie)break;ce[Ee++]=224|Le>>12,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}else{if(Ee+3>=ie)break;ce[Ee++]=240|Le>>18,ce[Ee++]=128|Le>>12&63,ce[Ee++]=128|Le>>6&63,ce[Ee++]=128|Le&63}}return ae&&(ce[Ee++]=0),Ee-re},y.cstrncpy=function(X,ce,Ee){if((!X||!ce)&&S("cstrncpy() does not accept NULL strings."),Ee<0)Ee=y.cstrlen(strPtr)+1;else if(!(Ee>0))return 0;const st=y.heap8u();let ae=0,pe;for(;ae<Ee&&(pe=st[ce+ae]);++ae)st[X+ae]=pe;return ae<Ee&&(st[X+ae++]=0),ae},y.jstrToUintArray=(X,ce=!1)=>B.utf8Encoder.encode(ce?X+"\0":X);const at=(X,ce)=>{(!(X.alloc instanceof Function)||!(X.dealloc instanceof Function))&&S("Object is missing alloc() and/or dealloc() function(s)","required by",ce+"().")},mt=function(X,ce,Ee,st){if(at(y,st),typeof X!="string")return null;{const ae=B.utf8Encoder.encode(X),pe=Ee(ae.length+1),K=fe().HEAP8U;return K.set(ae,pe),K[pe+ae.length]=0,ce?[pe,ae.length]:pe}};y.allocCString=(X,ce=!1)=>mt(X,ce,y.alloc,"allocCString()"),y.scopedAllocPush=function(){at(y,"scopedAllocPush");const X=[];return B.scopedAlloc.push(X),X},y.scopedAllocPop=function(X){at(y,"scopedAllocPop");const ce=arguments.length?B.scopedAlloc.indexOf(X):B.scopedAlloc.length-1;ce<0&&S("Invalid state object for scopedAllocPop()."),arguments.length===0&&(X=B.scopedAlloc[ce]),B.scopedAlloc.splice(ce,1);for(let Ee;Ee=X.pop();)y.functionEntry(Ee)?y.uninstallFunction(Ee):y.dealloc(Ee)},y.scopedAlloc=function(X){B.scopedAlloc.length||S("No scopedAllocPush() scope is active.");const ce=y.alloc(X);return B.scopedAlloc[B.scopedAlloc.length-1].push(ce),ce},Object.defineProperty(y.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>B.scopedAlloc.length,set:()=>S("The 'active' property is read-only.")}),y.scopedAllocCString=(X,ce=!1)=>mt(X,ce,y.scopedAlloc,"scopedAllocCString()");const Be=function(X,ce){const Ee=y[X?"scopedAlloc":"alloc"]((ce.length+1)*y.ptrSizeof);let st=0;return ce.forEach(ae=>{y.pokePtr(Ee+y.ptrSizeof*st++,y[X?"scopedAllocCString":"allocCString"](""+ae))}),y.pokePtr(Ee+y.ptrSizeof*st,0),Ee};y.scopedAllocMainArgv=X=>Be(!0,X),y.allocMainArgv=X=>Be(!1,X),y.cArgvToJs=(X,ce)=>{const Ee=[];for(let st=0;st<X;++st){const ae=y.peekPtr(ce+y.ptrSizeof*st);Ee.push(ae?y.cstrToJs(ae):null)}return Ee},y.scopedAllocCall=function(X){y.scopedAllocPush();try{return X()}finally{y.scopedAllocPop()}};const Re=function(X,ce,Ee){at(y,Ee);const st=ce?"i64":N;let ae=y[Ee](X*(ce?8:C));if(y.poke(ae,0,st),X===1)return ae;const pe=[ae];for(let K=1;K<X;++K)ae+=ce?8:C,pe[K]=ae,y.poke(ae,0,st);return pe};y.allocPtr=(X=1,ce=!0)=>Re(X,ce,"alloc"),y.scopedAllocPtr=(X=1,ce=!0)=>Re(X,ce,"scopedAlloc"),y.xGet=function(X){return y.exports[X]||S("Cannot find exported symbol:",X)};const et=(X,ce)=>S(X+"() requires",ce,"argument(s).");y.xCall=function(X,...ce){const Ee=X instanceof Function?X:y.xGet(X);return Ee instanceof Function||S("Exported symbol",X,"is not a function."),Ee.length!==ce.length&&et(Ee===X?Ee.name:X,Ee.length),arguments.length===2&&Array.isArray(arguments[1])?Ee.apply(null,arguments[1]):Ee.apply(null,ce)},B.xWrap=Object.create(null),B.xWrap.convert=Object.create(null),B.xWrap.convert.arg=new Map,B.xWrap.convert.result=new Map;const be=B.xWrap.convert.arg,Ie=B.xWrap.convert.result;y.bigIntEnabled&&be.set("i64",X=>BigInt(X));const Te=N==="i32"?X=>X|0:X=>BigInt(X)|BigInt(0);be.set("i32",Te).set("i16",X=>(X|0)&65535).set("i8",X=>(X|0)&255).set("f32",X=>Number(X).valueOf()).set("float",be.get("f32")).set("f64",be.get("f32")).set("double",be.get("f64")).set("int",be.get("i32")).set("null",X=>X).set(null,be.get("null")).set("**",Te).set("*",Te),Ie.set("*",Te).set("pointer",Te).set("number",X=>Number(X)).set("void",X=>{}).set("null",X=>X).set(null,Ie.get("null"));{const X=["i8","i16","i32","int","f32","float","f64","double"];y.bigIntEnabled&&X.push("i64");const ce=be.get(N);for(const Ee of X)be.set(Ee+"*",ce),Ie.set(Ee+"*",ce),Ie.set(Ee,be.get(Ee)||S("Missing arg converter:",Ee))}const Ze=function(X){return typeof X=="string"?y.scopedAllocCString(X):X?Te(X):null};be.set("string",Ze).set("utf8",Ze).set("pointer",Ze),Ie.set("string",X=>y.cstrToJs(X)).set("utf8",Ie.get("string")).set("string:dealloc",X=>{try{return X?y.cstrToJs(X):null}finally{y.dealloc(X)}}).set("utf8:dealloc",Ie.get("string:dealloc")).set("json",X=>JSON.parse(y.cstrToJs(X))).set("json:dealloc",X=>{try{return X?JSON.parse(y.cstrToJs(X)):null}finally{y.dealloc(X)}});const Ge=class{constructor(X){this.name=X.name||"unnamed adapter"}convertArg(X,ce,Ee){S("AbstractArgAdapter must be subclassed.")}};be.FuncPtrAdapter=class Ra extends Ge{constructor(ce){super(ce),be.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",ce),this.name=ce.name||"unnamed",this.signature=ce.signature,ce.contextKey instanceof Function&&(this.contextKey=ce.contextKey,ce.bindScope||(ce.bindScope="context")),this.bindScope=ce.bindScope||S("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Ra.bindScopes.indexOf(ce.bindScope)<0&&S("Invalid options.bindScope ("+ce.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Ra.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=ce.callProxy instanceof Function?ce.callProxy:void 0}contextKey(ce,Ee){return this}contextMap(ce){const Ee=this.__cmap||(this.__cmap=new Map);let st=Ee.get(ce);return st===void 0&&Ee.set(ce,st=[]),st}convertArg(ce,Ee,st){let ae=this.singleton;if(!ae&&this.isContext&&(ae=this.contextMap(this.contextKey(Ee,st))),ae&&ae[0]===ce)return ae[1];if(ce instanceof Function){this.callProxy&&(ce=this.callProxy(ce));const pe=me(ce,this.signature,this.isTransient);if(Ra.debugFuncInstall&&Ra.debugOut("FuncPtrAdapter installed",this,this.contextKey(Ee,st),"@"+pe,ce),ae){if(ae[1]){Ra.debugFuncInstall&&Ra.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{B.scopedAlloc[B.scopedAlloc.length-1].push(ae[1])}catch{}}ae[0]=ce,ae[1]=pe}return pe}else if(y.isPtr(ce)||ce===null||ce===void 0){if(ae&&ae[1]&&ae[1]!==ce){Ra.debugFuncInstall&&Ra.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(Ee,st),"@"+ae[1],ce);try{B.scopedAlloc[B.scopedAlloc.length-1].push(ae[1])}catch{}ae[0]=ae[1]=ce|0}return ce||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},be.FuncPtrAdapter.warnOnUse=!1,be.FuncPtrAdapter.debugFuncInstall=!1,be.FuncPtrAdapter.debugOut=console.debug.bind(console),be.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const je=X=>be.get(X)||S("Argument adapter not found:",X),Qe=X=>Ie.get(X)||S("Result adapter not found:",X);B.xWrap.convertArg=(X,...ce)=>je(X)(...ce),B.xWrap.convertArgNoCheck=(X,...ce)=>be.get(X)(...ce),B.xWrap.convertResult=(X,ce)=>X===null?ce:X?Qe(X)(ce):void 0,B.xWrap.convertResultNoCheck=(X,ce)=>X===null?ce:X?Ie.get(X)(ce):void 0,y.xWrap=function(X,ce,...Ee){arguments.length===3&&Array.isArray(arguments[2])&&(Ee=arguments[2]),y.isPtr(X)&&(X=y.functionEntry(X)||S("Function pointer not found in WASM function table."));const st=X instanceof Function,ae=st?X:y.xGet(X);if(st&&(X=ae.name||"unnamed function"),Ee.length!==ae.length&&et(X,ae.length),ce===null&&ae.length===0)return ae;ce!=null&&Qe(ce);for(const K of Ee)K instanceof Ge?be.set(K,(...re)=>K.convertArg(...re)):je(K);const pe=B.xWrap;return ae.length===0?(...K)=>K.length?et(X,ae.length):pe.convertResult(ce,ae.call(null)):function(...K){K.length!==ae.length&&et(X,ae.length);const re=y.scopedAllocPush();try{let ie=0;for(;ie<K.length;++ie)K[ie]=pe.convertArgNoCheck(Ee[ie],K[ie],K,ie);return pe.convertResultNoCheck(ce,ae.apply(null,K))}finally{y.scopedAllocPop(re)}}};const St=function(X,ce,Ee,st,ae,pe){if(typeof Ee=="string"){if(ce===1)return pe.get(Ee);if(ce===2){if(st)st instanceof Function||S(ae,"requires a function argument.");else return delete pe.get(Ee),X;return pe.set(Ee,st),X}}S("Invalid arguments to",ae)};return y.xWrap.resultAdapter=function X(ce,Ee){return St(X,arguments.length,ce,Ee,"resultAdapter()",Ie)},y.xWrap.argAdapter=function X(ce,Ee){return St(X,arguments.length,ce,Ee,"argAdapter()",be)},y.xWrap.FuncPtrAdapter=be.FuncPtrAdapter,y.xCallWrapped=function(X,ce,Ee,...st){return Array.isArray(arguments[3])&&(st=arguments[3]),y.xWrap(X,ce,Ee||[]).apply(null,st||[])},y.xWrap.testConvertArg=B.xWrap.convertArg,y.xWrap.testConvertResult=B.xWrap.convertResult,y},globalThis.WhWasmUtilInstaller.yawl=function(y){const S=()=>fetch(y.uri,{credentials:"same-origin"}),N=this,C=function(fe){if(y.wasmUtilTarget){const me=(...tt)=>{throw new Error(tt.join(" "))},Ke=y.wasmUtilTarget;if(Ke.module=fe.module,Ke.instance=fe.instance,Ke.instance.exports.memory||(Ke.memory=y.imports&&y.imports.env&&y.imports.env.memory||me("Missing 'memory' object!")),!Ke.alloc&&fe.instance.exports.malloc){const tt=fe.instance.exports;Ke.alloc=function(at){return tt.malloc(at)||me("Allocation of",at,"bytes failed.")},Ke.dealloc=function(at){tt.free(at)}}N(Ke)}return y.onload&&y.onload(fe,y),fe};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(S(),y.imports||{}).then(C)}:function(){return S().then(me=>me.arrayBuffer()).then(me=>WebAssembly.instantiate(me,y.imports||{})).then(C)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function y(S){const N=(...We)=>{throw new Error(We.join(" "))};!(S.heap instanceof WebAssembly.Memory)&&!(S.heap instanceof Function)&&N("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(We){S[We]instanceof Function||N("Config option '"+We+"' must be a function.")});const C=y,B=S.heap instanceof Function?S.heap:()=>new Uint8Array(S.heap.buffer),fe=S.alloc,me=S.dealloc,Ke=S.log||console.log.bind(console),tt=S.memberPrefix||"",at=S.memberSuffix||"",mt=S.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!S.bigIntEnabled,Be=globalThis.BigInt,Re=globalThis.BigInt64Array,et=S.ptrSizeof||4,be=S.ptrIR||"i32";C.debugFlags||(C.__makeDebugFlags=function(We=null){We&&We.__flags&&(We=We.__flags);const vt=function wt(kt){return arguments.length===0?wt.__flags:(kt<0?(delete wt.__flags.getter,delete wt.__flags.setter,delete wt.__flags.alloc,delete wt.__flags.dealloc):(wt.__flags.getter=(1&kt)!==0,wt.__flags.setter=(2&kt)!==0,wt.__flags.alloc=(4&kt)!==0,wt.__flags.dealloc=(8&kt)!==0),wt._flags)};return Object.defineProperty(vt,"__flags",{iterable:!1,writable:!1,value:Object.create(We)}),We||vt(0),vt},C.debugFlags=C.__makeDebugFlags());const Ie=function(){const We=new ArrayBuffer(2);return new DataView(We).setInt16(0,256,!0),new Int16Array(We)[0]===256}(),Te=We=>We[1]==="(",Ze=We=>We==="P",Ge=We=>Te(We)?"p":We[0],je=function(We){switch(Ge(We)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return be;case"j":return"i64";case"f":return"float";case"d":return"double"}N("Unhandled signature IR:",We)},Qe=Re?()=>!0:()=>N("BigInt64Array is not available."),St=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"getInt32";case 8:return Qe()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Qe()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}N("Unhandled DataView getter for signature:",We)},X=function(We){switch(Ge(We)){case"p":case"P":case"s":{switch(et){case 4:return"setInt32";case 8:return Qe()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Qe()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}N("Unhandled DataView setter for signature:",We)},ce=function(We){switch(Ge(We)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Qe()&&Be;case"p":case"P":case"s":switch(et){case 4:return Number;case 8:return Qe()&&Be}break}N("Unhandled DataView set wrapper for signature:",We)},Ee=(We,vt)=>We+"::"+vt,st=function(We,vt){return()=>N(Ee(We,vt),"is read-only.")},ae=new WeakMap,pe="(pointer-is-external)",K=function(We,vt,wt){if(wt||(wt=ae.get(vt)),wt){if(ae.delete(vt),Array.isArray(vt.ondispose)){let kt;for(;kt=vt.ondispose.shift();)try{kt instanceof Function?kt.call(vt):kt instanceof zt?kt.dispose():typeof kt=="number"&&me(kt)}catch(bn){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",bn)}}else if(vt.ondispose instanceof Function)try{vt.ondispose()}catch(kt){console.warn("ondispose() for",We.structName,"@",wt,"threw. NOT propagating it.",kt)}delete vt.ondispose,We.debugFlags.__flags.dealloc&&Ke("debug.dealloc:",vt[pe]?"EXTERNAL":"",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),vt[pe]||me(wt)}},re=We=>({configurable:!1,writable:!1,iterable:!1,value:We}),ie=function(We,vt,wt){let kt=!wt;wt?Object.defineProperty(vt,pe,re(wt)):(wt=fe(We.structInfo.sizeof),wt||N("Allocation of",We.structName,"structure failed."));try{We.debugFlags.__flags.alloc&&Ke("debug.alloc:",kt?"":"EXTERNAL",We.structName,"instance:",We.structInfo.sizeof,"bytes @"+wt),kt&&B().fill(0,wt,wt+We.structInfo.sizeof),ae.set(vt,wt)}catch(bn){throw K(We,vt,wt),bn}},Le=function(){const We=this.pointer;return We?new Uint8Array(B().slice(We,We+this.structInfo.sizeof)):null},Ot=re(We=>tt+We+at),Wt=function(We,vt,wt=!0){let kt=We.members[vt];if(!kt&&(tt||at)){for(const bn of Object.values(We.members))if(bn.key===vt){kt=bn;break}!kt&&wt&&N(Ee(We.name,vt),"is not a mapped struct member.")}return kt},Yt=function We(vt,wt,kt=!1){We._||(We._=Gn=>Gn.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const bn=Wt(vt.structInfo,wt,!0);return kt?We._(bn.signature):bn.signature},lt={configurable:!1,enumerable:!1,get:function(){return ae.get(this)},set:()=>N("Cannot assign the 'pointer' property of a struct.")},_e=re(function(){const We=[];for(const vt of Object.keys(this.structInfo.members))We.push(this.memberKey(vt));return We}),Pe=new TextDecoder("utf-8"),ot=new TextEncoder,pt=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Ft=function(We,vt,wt){return Pe.decode(We.buffer instanceof pt?We.slice(vt,wt):We.subarray(vt,wt))},Xt=function(We,vt,wt=!1){const kt=Wt(We.structInfo,vt,wt);return kt&&kt.signature.length===1&&kt.signature[0]==="s"?kt:!1},qe=function(We){We.signature!=="s"&&N("Invalid member type signature for C-string value:",JSON.stringify(We))},nt=function(vt,wt){const kt=Wt(vt.structInfo,wt,!0);qe(kt);const bn=vt[kt.key];if(!bn)return null;let Gn=bn;const Wn=B();for(;Wn[Gn]!==0;++Gn);return bn===Gn?"":Ft(Wn,bn,Gn)},dt=function(We,...vt){We.ondispose?Array.isArray(We.ondispose)||(We.ondispose=[We.ondispose]):We.ondispose=[],We.ondispose.push(...vt)},Nt=function(We){const vt=ot.encode(We),wt=fe(vt.length+1);wt||N("Allocation error while duplicating string:",We);const kt=B();return kt.set(vt,wt),kt[wt+vt.length]=0,wt},xt=function(We,vt,wt){const kt=Wt(We.structInfo,vt,!0);qe(kt);const bn=Nt(wt);return We[kt.key]=bn,dt(We,bn),We},zt=function(vt,wt){arguments[2]!==re&&N("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:re(vt),structInfo:re(wt)})};zt.prototype=Object.create(null,{dispose:re(function(){K(this.constructor,this)}),lookupMember:re(function(We,vt=!0){return Wt(this.structInfo,We,vt)}),memberToJsString:re(function(We){return nt(this,We)}),memberIsString:re(function(We,vt=!0){return Xt(this,We,vt)}),memberKey:Ot,memberKeys:_e,memberSignature:re(function(We,vt=!1){return Yt(this,We,vt)}),memoryDump:re(Le),pointer:lt,setMemberCString:re(function(We,vt){return xt(this,We,vt)})}),Object.assign(zt.prototype,{addOnDispose:function(...We){return dt(this,...We),this}}),Object.defineProperties(zt,{allocCString:re(Nt),isA:re(We=>We instanceof zt),hasExternalPointer:re(We=>We instanceof zt&&!!We[pe]),memberKey:Ot});const gn=We=>Number.isFinite(We)||We instanceof(Be||Number),Rt=function We(vt,wt,kt){if(!We._){We._={getters:{},setters:{},sw:{}};const li=["i","c","C","p","P","s","f","d","v()"];mt&&li.push("j"),li.forEach(function(Ws){We._.getters[Ws]=St(Ws),We._.setters[Ws]=X(Ws),We._.sw[Ws]=ce(Ws)});const yx=/^[ipPsjfdcC]$/,vx=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;We.sigCheck=function(Ws,bx,Am,$f){Object.prototype.hasOwnProperty.call(Ws,Am)&&N(Ws.structName,"already has a property named",Am+"."),yx.test($f)||vx.test($f)||N("Malformed signature for",Ee(Ws.structName,bx)+":",$f)}}const bn=vt.memberKey(wt);We.sigCheck(vt.prototype,wt,bn,kt.signature),kt.key=bn,kt.name=wt;const Gn=Ge(kt.signature),Wn=Ee(vt.prototype.structName,bn),Kn=vt.prototype.debugFlags.__flags,ma=Object.create(null);ma.configurable=!1,ma.enumerable=!1,ma.get=function(){Kn.getter&&Ke("debug.getter:",We._.getters[Gn],"for",je(Gn),Wn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof);let li=new DataView(B().buffer,this.pointer+kt.offset,kt.sizeof)[We._.getters[Gn]](0,Ie);return Kn.getter&&Ke("debug.getter:",Wn,"result =",li),li},kt.readOnly?ma.set=st(vt.prototype.structName,bn):ma.set=function(li){if(Kn.setter&&Ke("debug.setter:",We._.setters[Gn],"for",je(Gn),Wn,"@",this.pointer,"+",kt.offset,"sz",kt.sizeof,li),this.pointer||N("Cannot set struct property on disposed instance."),li===null)li=0;else for(;!gn(li);){if(Ze(kt.signature)&&li instanceof zt){li=li.pointer||0,Kn.setter&&Ke("debug.setter:",Wn,"resolved to",li);break}N("Invalid value for pointer-type",Wn+".")}new DataView(B().buffer,this.pointer+kt.offset,kt.sizeof)[We._.setters[Gn]](0,We._.sw[Gn](li),Ie)},Object.defineProperty(vt.prototype,bn,ma)},jr=function We(vt,wt){arguments.length===1?(wt=vt,vt=wt.name):wt.name||(wt.name=vt),vt||N("Struct name is required.");let kt=!1;Object.keys(wt.members).forEach(Wn=>{const Kn=wt.members[Wn];Kn.sizeof?Kn.sizeof===1?Kn.signature==="c"||Kn.signature==="C"||N("Unexpected sizeof==1 member",Ee(wt.name,Wn),"with signature",Kn.signature):(Kn.sizeof%4!==0&&(console.warn("Invalid struct member description =",Kn,"from",wt),N(vt,"member",Wn,"sizeof is not aligned. sizeof="+Kn.sizeof)),Kn.offset%4!==0&&(console.warn("Invalid struct member description =",Kn,"from",wt),N(vt,"member",Wn,"offset is not aligned. offset="+Kn.offset))):N(vt,"member",Wn,"is missing sizeof."),(!kt||kt.offset<Kn.offset)&&(kt=Kn)}),kt?wt.sizeof<kt.offset+kt.sizeof&&N("Invalid struct config:",vt,"max member offset ("+kt.offset+") ","extends past end of struct (sizeof="+wt.sizeof+")."):N("No member property descriptions found.");const bn=re(C.__makeDebugFlags(We.debugFlags)),Gn=function Wn(Kn){this instanceof Wn?arguments.length?((Kn!==(Kn|0)||Kn<=0)&&N("Invalid pointer value for",vt,"constructor."),ie(Wn,this,Kn)):ie(Wn,this):N("The",vt,"constructor may only be called via 'new'.")};return Object.defineProperties(Gn,{debugFlags:bn,isA:re(Wn=>Wn instanceof Gn),memberKey:Ot,memberKeys:_e,methodInfoForKey:re(function(Wn){}),structInfo:re(wt),structName:re(vt)}),Gn.prototype=new zt(vt,wt,re),Object.defineProperties(Gn.prototype,{debugFlags:bn,constructor:re(Gn)}),Object.keys(wt.members).forEach(Wn=>Rt(Gn,Wn,wt.members[Wn])),Gn};return jr.StructType=zt,jr.config=S,jr.allocCString=Nt,jr.debugFlags||(jr.debugFlags=C.__makeDebugFlags(C.debugFlags)),jr},globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...be)=>{throw new Error(be.join(" "))};y.SQLite3Error.toss;const N=y.capi,C=y.wasm,B=y.util;if(globalThis.WhWasmUtilInstaller(C),delete globalThis.WhWasmUtilInstaller,C.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(be,Ie)=>be[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:be=>be[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new C.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:be=>{let Ie;return(Te,Ze,Ge,je)=>{try{const Qe=C.cArgvToJs(Ze,Ge);return Ie||(Ie=C.cArgvToJs(Ze,je)),be(Qe,Ie)|0}catch(Qe){return Qe.resultCode||N.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:be=>be[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new C.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(be,Ie)=>be[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new C.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(be,Ie)=>be[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],C.exports.sqlite3_progress_handler&&C.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new C.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(be,Ie)=>be[0]}),"*"]]),C.exports.sqlite3_stmt_explain&&C.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),C.exports.sqlite3_set_authorizer&&C.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(be,Ie)=>be[0],callProxy:be=>(Ie,Te,Ze,Ge,je,Qe)=>{try{return Ze=Ze&&C.cstrToJs(Ze),Ge=Ge&&C.cstrToJs(Ge),je=je&&C.cstrToJs(je),Qe=Qe&&C.cstrToJs(Qe),be(Ie,Te,Ze,Ge,je,Qe)||0}catch(St){return St.resultCode||N.SQLITE_ERROR}}}),"*"]]),C.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:be=>be[0],callProxy:be=>(Ie,Te,Ze,Ge,je)=>{be(Ie,Te,C.cstrToJs(Ze),C.cstrToJs(Ge),je)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],C.bigIntEnabled&&C.exports.sqlite3_declare_vtab&&C.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),C.bigIntEnabled&&C.exports.sqlite3_preupdate_hook&&C.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:be=>be[0],callProxy:be=>(Ie,Te,Ze,Ge,je,Qe,St)=>{be(Ie,Te,Ze,C.cstrToJs(Ge),C.cstrToJs(je),Qe,St)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),C.bigIntEnabled&&C.exports.sqlite3changegroup_add&&C.exports.sqlite3session_create&&C.exports.sqlite3_preupdate_hook){const be={signature:"i(ps)",callProxy:Ie=>(Te,Ze)=>{try{return Ie(Te,C.cstrToJs(Ze))|0}catch(Ge){return Ge.resultCode||N.SQLITE_ERROR}}};C.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...be}),new C.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new C.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new C.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new C.xWrap.FuncPtrAdapter({name:"xFilter",...be,contextKey:(Ie,Te)=>Ie[0]}),"*"]])}C.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],y.StructBinder=globalThis.Jaccwabyt({heap:C.heap8u,alloc:C.alloc,dealloc:C.dealloc,bigIntEnabled:C.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const be=C.xWrap.argAdapter("string");C.xWrap.argAdapter("string:flexible",je=>be(B.flexibleString(je))),C.xWrap.argAdapter("string:static",function(je){return C.isPtr(je)?je:(je=""+je,this[je]||(this[je]=C.allocCString(je)))}.bind(Object.create(null)));const Ie=C.xWrap.argAdapter("*"),Te=function(){};C.xWrap.argAdapter("sqlite3_filename",Ie)("sqlite3_context*",Ie)("sqlite3_value*",Ie)("void*",Ie)("sqlite3_changegroup*",Ie)("sqlite3_changeset_iter*",Ie)("sqlite3_session*",Ie)("sqlite3_stmt*",je=>Ie(je instanceof(y?.oo1?.Stmt||Te)?je.pointer:je))("sqlite3*",je=>Ie(je instanceof(y?.oo1?.DB||Te)?je.pointer:je))("sqlite3_vfs*",je=>typeof je=="string"?N.sqlite3_vfs_find(je)||y.SQLite3Error.toss(N.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",je):Ie(je instanceof(N.sqlite3_vfs||Te)?je.pointer:je)),C.exports.sqlite3_declare_vtab&&C.xWrap.argAdapter("sqlite3_index_info*",je=>Ie(je instanceof(N.sqlite3_index_info||Te)?je.pointer:je))("sqlite3_module*",je=>Ie(je instanceof(N.sqlite3_module||Te)?je.pointer:je));const Ze=C.xWrap.resultAdapter("*");C.xWrap.resultAdapter("sqlite3*",Ze)("sqlite3_context*",Ze)("sqlite3_stmt*",Ze)("sqlite3_value*",Ze)("sqlite3_vfs*",Ze)("void*",Ze),C.exports.sqlite3_step.length===0&&(C.xWrap.doArgcCheck=!1,y.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const je of C.bindingSignatures)N[je[0]]=C.xWrap.apply(null,je);for(const je of C.bindingSignatures.wasmInternal)B[je[0]]=C.xWrap.apply(null,je);const Ge=function(je){return()=>S(je+"() is unavailable due to lack","of BigInt support in this build.")};for(const je of C.bindingSignatures.int64)N[je[0]]=C.bigIntEnabled?C.xWrap.apply(null,je):Ge(je[0]);if(delete C.bindingSignatures,C.exports.sqlite3__wasm_db_error){const je=C.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");B.sqlite3__wasm_db_error=function(Qe,St,X){return St instanceof y.WasmAllocError?(St=N.SQLITE_NOMEM,X=0):St instanceof Error&&(X=X||""+St,St=St.resultCode||N.SQLITE_ERROR),Qe?je(Qe,St,X):St}}else B.sqlite3__wasm_db_error=function(je,Qe,St){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),Qe}}{const be=C.xCall("sqlite3__wasm_enum_json");be||S("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),C.ctype=JSON.parse(C.cstrToJs(be));const Ie=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];C.bigIntEnabled&&Ie.push("serialize","session","vtab");for(const Ge of Ie)for(const je of Object.entries(C.ctype[Ge]))N[je[0]]=je[1];C.functionEntry(N.SQLITE_WASM_DEALLOC)||S("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+N.SQLITE_WASM_DEALLOC+").");const Te=Object.create(null);for(const Ge of["resultCodes"])for(const je of Object.entries(C.ctype[Ge]))Te[je[1]]=je[0];N.sqlite3_js_rc_str=Ge=>Te[Ge];const Ze=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!B.isUIThread(),sqlite3_index_info:!C.bigIntEnabled,sqlite3_index_constraint:!C.bigIntEnabled,sqlite3_index_orderby:!C.bigIntEnabled,sqlite3_index_constraint_usage:!C.bigIntEnabled});for(const Ge of C.ctype.structs)Ze[Ge.name]||(N[Ge.name]=y.StructBinder(Ge));if(N.sqlite3_index_info){for(const Ge of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])N.sqlite3_index_info[Ge]=N[Ge],delete N[Ge];N.sqlite3_vtab_config=C.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const fe=(be,Ie,Te)=>B.sqlite3__wasm_db_error(be,N.SQLITE_MISUSE,Ie+"() requires "+Te+" argument"+(Te===1?"":"s")+"."),me=be=>B.sqlite3__wasm_db_error(be,N.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),Ke=be=>C.xWrap.argAdapter("sqlite3*")(be),tt=be=>C.isPtr(be)?C.cstrToJs(be):be,at=function(be,Ie){be=Ke(be);let Te=this.dbMap.get(be);if(Ie)!Te&&Ie>0&&this.dbMap.set(be,Te=Object.create(null));else return this.dbMap.delete(be),Te;return Te}.bind(Object.assign(Object.create(null),{dbMap:new Map}));at.addCollation=function(be,Ie){const Te=at(be,1);Te.collation||(Te.collation=new Set),Te.collation.add(tt(Ie).toLowerCase())},at._addUDF=function(be,Ie,Te,Ze){Ie=tt(Ie).toLowerCase();let Ge=Ze.get(Ie);Ge||Ze.set(Ie,Ge=new Set),Ge.add(Te<0?-1:Te)},at.addFunction=function(be,Ie,Te){const Ze=at(be,1);Ze.udf||(Ze.udf=new Map),this._addUDF(be,Ie,Te,Ze.udf)},C.exports.sqlite3_create_window_function&&(at.addWindowFunc=function(be,Ie,Te){const Ze=at(be,1);Ze.wudf||(Ze.wudf=new Map),this._addUDF(be,Ie,Te,Ze.wudf)}),at.cleanup=function(be){be=Ke(be);const Ie=[be];for(const Ge of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const je=C.exports[Ge];if(je){Ie.length=je.length;try{N[Ge](...Ie)}catch(Qe){y.config.warn("close-time call of",Ge+"(",Ie,") threw:",Qe)}}}const Te=at(be,0);if(!Te)return;if(Te.collation){for(const Ge of Te.collation)try{N.sqlite3_create_collation_v2(be,Ge,N.SQLITE_UTF8,0,0,0)}catch{}delete Te.collation}let Ze;for(Ze=0;Ze<2;++Ze){const Ge=Ze?Te.wudf:Te.udf;if(!Ge)continue;const je=Ze?N.sqlite3_create_window_function:N.sqlite3_create_function_v2;for(const Qe of Ge){const St=Qe[0],X=Qe[1],ce=[be,St,0,N.SQLITE_UTF8,0,0,0,0,0];Ze&&ce.push(0);for(const Ee of X)try{ce[2]=Ee,je.apply(null,ce)}catch{}X.clear()}Ge.clear()}delete Te.udf,delete Te.wudf};{const be=C.xWrap("sqlite3_close_v2","int","sqlite3*");N.sqlite3_close_v2=function(Ie){if(arguments.length!==1)return fe(Ie,"sqlite3_close_v2",1);if(Ie)try{at.cleanup(Ie)}catch{}return be(Ie)}}if(N.sqlite3session_create){const be=C.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);N.sqlite3session_delete=function(Ie){if(arguments.length!==1)return fe(pDb,"sqlite3session_delete",1);Ie&&N.sqlite3session_table_filter(Ie,0,0),be(Ie)}}{const be=(Te,Ze)=>"argv["+Ze+"]:"+Te[0]+":"+C.cstrToJs(Te[1]).toLowerCase(),Ie=C.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new C.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:be}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:be})]);N.sqlite3_create_collation_v2=function(Te,Ze,Ge,je,Qe,St){if(arguments.length!==6)return fe(Te,"sqlite3_create_collation_v2",6);if(!(Ge&15))Ge|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(Ge&15))return me(Te);try{const X=Ie(Te,Ze,Ge,je,Qe,St);return X===0&&Qe instanceof Function&&at.addCollation(Te,Ze),X}catch(X){return B.sqlite3__wasm_db_error(Te,X)}},N.sqlite3_create_collation=(Te,Ze,Ge,je,Qe)=>arguments.length===5?N.sqlite3_create_collation_v2(Te,Ze,Ge,je,Qe,0):fe(Te,"sqlite3_create_collation",5)}{const be=function(Ge,je){return Ge[0]+":"+(Ge[2]<0?-1:Ge[2])+":"+je+":"+C.cstrToJs(Ge[1]).toLowerCase()},Ie=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:be,callProxy:Ge=>(je,Qe,St)=>{try{Ge(je,...N.sqlite3_values_to_js(Qe,St))}catch(X){N.sqlite3_result_error_js(je,X)}}},xFinalAndValue:{signature:"v(p)",contextKey:be,callProxy:Ge=>je=>{try{N.sqlite3_result_js(je,Ge(je))}catch(Qe){N.sqlite3_result_error_js(je,Qe)}}},xFunc:{signature:"v(pip)",contextKey:be,callProxy:Ge=>(je,Qe,St)=>{try{N.sqlite3_result_js(je,Ge(je,...N.sqlite3_values_to_js(Qe,St)))}catch(X){N.sqlite3_result_error_js(je,X)}}},xDestroy:{signature:"v(p)",contextKey:be,callProxy:Ge=>je=>{try{Ge(je)}catch(Qe){console.error("UDF xDestroy method threw:",Qe)}}}}),Te=C.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new C.xWrap.FuncPtrAdapter({name:"xFunc",...Ie.xFunc}),new C.xWrap.FuncPtrAdapter({name:"xStep",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xFinal",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",...Ie.xDestroy})]),Ze=C.exports.sqlite3_create_window_function?C.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new C.xWrap.FuncPtrAdapter({name:"xStep",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xFinal",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xValue",...Ie.xFinalAndValue}),new C.xWrap.FuncPtrAdapter({name:"xInverse",...Ie.xInverseAndStep}),new C.xWrap.FuncPtrAdapter({name:"xDestroy",...Ie.xDestroy})]):void 0;N.sqlite3_create_function_v2=function Ge(je,Qe,St,X,ce,Ee,st,ae,pe){if(Ge.length!==arguments.length)return fe(je,"sqlite3_create_function_v2",Ge.length);if(!(X&15))X|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(X&15))return me(je);try{const K=Te(je,Qe,St,X,ce,Ee,st,ae,pe);return K===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function)&&at.addFunction(je,Qe,St),K}catch(K){return console.error("sqlite3_create_function_v2() setup threw:",K),B.sqlite3__wasm_db_error(je,K,"Creation of UDF threw: "+K)}},N.sqlite3_create_function=function Ge(je,Qe,St,X,ce,Ee,st,ae){return Ge.length===arguments.length?N.sqlite3_create_function_v2(je,Qe,St,X,ce,Ee,st,ae,0):fe(je,"sqlite3_create_function",Ge.length)},Ze?N.sqlite3_create_window_function=function Ge(je,Qe,St,X,ce,Ee,st,ae,pe,K){if(Ge.length!==arguments.length)return fe(je,"sqlite3_create_window_function",Ge.length);if(!(X&15))X|=N.SQLITE_UTF8;else if(N.SQLITE_UTF8!==(X&15))return me(je);try{const re=Ze(je,Qe,St,X,ce,Ee,st,ae,pe,K);return re===0&&(Ee instanceof Function||st instanceof Function||ae instanceof Function||pe instanceof Function||K instanceof Function)&&at.addWindowFunc(je,Qe,St),re}catch(re){return console.error("sqlite3_create_window_function() setup threw:",re),B.sqlite3__wasm_db_error(je,re,"Creation of UDF threw: "+re)}}:delete N.sqlite3_create_window_function,N.sqlite3_create_function_v2.udfSetResult=N.sqlite3_create_function.udfSetResult=N.sqlite3_result_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetResult=N.sqlite3_result_js),N.sqlite3_create_function_v2.udfConvertArgs=N.sqlite3_create_function.udfConvertArgs=N.sqlite3_values_to_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfConvertArgs=N.sqlite3_values_to_js),N.sqlite3_create_function_v2.udfSetError=N.sqlite3_create_function.udfSetError=N.sqlite3_result_error_js,N.sqlite3_create_window_function&&(N.sqlite3_create_window_function.udfSetError=N.sqlite3_result_error_js)}{const be=(Te,Ze)=>(typeof Te=="string"?Ze=-1:B.isSQLableTypedArray(Te)?(Ze=Te.byteLength,Te=B.typedArrayToString(Te instanceof ArrayBuffer?new Uint8Array(Te):Te)):Array.isArray(Te)&&(Te=Te.join(""),Ze=-1),[Te,Ze]),Ie={basic:C.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:C.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};N.sqlite3_prepare_v3=function Te(Ze,Ge,je,Qe,St,X){if(Te.length!==arguments.length)return fe(Ze,"sqlite3_prepare_v3",Te.length);const[ce,Ee]=be(Ge,je);switch(typeof ce){case"string":return Ie.basic(Ze,ce,Ee,Qe,St,null);case"number":return Ie.full(Ze,ce,Ee,Qe,St,X);default:return B.sqlite3__wasm_db_error(Ze,N.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},N.sqlite3_prepare_v2=function Te(Ze,Ge,je,Qe,St){return Te.length===arguments.length?N.sqlite3_prepare_v3(Ze,Ge,je,0,Qe,St):fe(Ze,"sqlite3_prepare_v2",Te.length)}}{const be=C.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),Ie=C.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);N.sqlite3_bind_text=function Te(Ze,Ge,je,Qe,St){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Ze),"sqlite3_bind_text",Te.length);if(C.isPtr(je)||je===null)return be(Ze,Ge,je,Qe,St);je instanceof ArrayBuffer?je=new Uint8Array(je):Array.isArray(pMem)&&(je=pMem.join(""));let X,ce;try{if(B.isSQLableTypedArray(je))X=C.allocFromTypedArray(je),ce=je.byteLength;else if(typeof je=="string")[X,ce]=C.allocCString(je);else return B.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return be(Ze,Ge,X,ce,N.SQLITE_WASM_DEALLOC)}catch(Ee){return C.dealloc(X),B.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),Ee)}},N.sqlite3_bind_blob=function Te(Ze,Ge,je,Qe,St){if(Te.length!==arguments.length)return fe(N.sqlite3_db_handle(Ze),"sqlite3_bind_blob",Te.length);if(C.isPtr(je)||je===null)return Ie(Ze,Ge,je,Qe,St);je instanceof ArrayBuffer?je=new Uint8Array(je):Array.isArray(je)&&(je=je.join(""));let X,ce;try{if(B.isBindableTypedArray(je))X=C.allocFromTypedArray(je),ce=Qe>=0?Qe:je.byteLength;else if(typeof je=="string")[X,ce]=C.allocCString(je);else return B.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),N.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return Ie(Ze,Ge,X,ce,N.SQLITE_WASM_DEALLOC)}catch(Ee){return C.dealloc(X),B.sqlite3__wasm_db_error(N.sqlite3_db_handle(Ze),Ee)}}}N.sqlite3_config=function(be,...Ie){if(arguments.length<2)return N.SQLITE_MISUSE;switch(be){case N.SQLITE_CONFIG_COVERING_INDEX_SCAN:case N.SQLITE_CONFIG_MEMSTATUS:case N.SQLITE_CONFIG_SMALL_MALLOC:case N.SQLITE_CONFIG_SORTERREF_SIZE:case N.SQLITE_CONFIG_STMTJRNL_SPILL:case N.SQLITE_CONFIG_URI:return C.exports.sqlite3__wasm_config_i(be,Ie[0]);case N.SQLITE_CONFIG_LOOKASIDE:return C.exports.sqlite3__wasm_config_ii(be,Ie[0],Ie[1]);case N.SQLITE_CONFIG_MEMDB_MAXSIZE:return C.exports.sqlite3__wasm_config_j(be,Ie[0]);case N.SQLITE_CONFIG_GETMALLOC:case N.SQLITE_CONFIG_GETMUTEX:case N.SQLITE_CONFIG_GETPCACHE2:case N.SQLITE_CONFIG_GETPCACHE:case N.SQLITE_CONFIG_HEAP:case N.SQLITE_CONFIG_LOG:case N.SQLITE_CONFIG_MALLOC:case N.SQLITE_CONFIG_MMAP_SIZE:case N.SQLITE_CONFIG_MULTITHREAD:case N.SQLITE_CONFIG_MUTEX:case N.SQLITE_CONFIG_PAGECACHE:case N.SQLITE_CONFIG_PCACHE2:case N.SQLITE_CONFIG_PCACHE:case N.SQLITE_CONFIG_PCACHE_HDRSZ:case N.SQLITE_CONFIG_PMASZ:case N.SQLITE_CONFIG_SERIALIZED:case N.SQLITE_CONFIG_SINGLETHREAD:case N.SQLITE_CONFIG_SQLLOG:case N.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return N.SQLITE_NOTFOUND}};{const be=new Set;N.sqlite3_auto_extension=function(Ie){if(Ie instanceof Function)Ie=C.installFunction("i(ppp)",Ie);else if(arguments.length!==1||!C.isPtr(Ie))return N.SQLITE_MISUSE;const Te=C.exports.sqlite3_auto_extension(Ie);return Ie!==arguments[0]&&(Te===0?be.add(Ie):C.uninstallFunction(Ie)),Te},N.sqlite3_cancel_auto_extension=function(Ie){return!Ie||arguments.length!==1||!C.isPtr(Ie)?0:C.exports.sqlite3_cancel_auto_extension(Ie)},N.sqlite3_reset_auto_extension=function(){C.exports.sqlite3_reset_auto_extension();for(const Ie of be)C.uninstallFunction(Ie);be.clear()}}const mt=N.sqlite3_vfs_find("kvvfs");if(mt)if(B.isUIThread()){const be=new N.sqlite3_kvvfs_methods(C.exports.sqlite3__wasm_kvvfs_methods());delete N.sqlite3_kvvfs_methods;const Ie=C.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,Te=C.pstack,Ze=je=>C.peek(je)===115?sessionStorage:localStorage,Ge={xRead:(je,Qe,St,X)=>{const ce=Te.pointer,Ee=C.scopedAllocPush();try{const st=Ie(je,Qe);if(!st)return-3;const ae=C.cstrToJs(st),pe=Ze(je).getItem(ae);if(!pe)return-1;const K=pe.length;if(X<=0)return K;if(X===1)return C.poke(St,0),K;const re=C.scopedAllocCString(pe);return X>K+1&&(X=K+1),C.heap8u().copyWithin(St,re,re+X-1),C.poke(St+X-1,0),X-1}catch(st){return console.error("kvstorageRead()",st),-2}finally{Te.restore(ce),C.scopedAllocPop(Ee)}},xWrite:(je,Qe,St)=>{const X=Te.pointer;try{const ce=Ie(je,Qe);if(!ce)return 1;const Ee=C.cstrToJs(ce);return Ze(je).setItem(Ee,C.cstrToJs(St)),0}catch(ce){return console.error("kvstorageWrite()",ce),N.SQLITE_IOERR}finally{Te.restore(X)}},xDelete:(je,Qe)=>{const St=Te.pointer;try{const X=Ie(je,Qe);return X?(Ze(je).removeItem(C.cstrToJs(X)),0):1}catch(X){return console.error("kvstorageDelete()",X),N.SQLITE_IOERR}finally{Te.restore(St)}}};for(const je of Object.keys(Ge))be[be.memberKey(je)]=C.installFunction(be.memberSignature(je),Ge[je])}else N.sqlite3_vfs_unregister(mt);C.xWrap.FuncPtrAdapter.warnOnUse=!0;const Be=y.StructBinder,Re=function be(Ie,Te,Ze,Ge=be.installMethodArgcCheck){if(Ie instanceof Be.StructType?!(Ze instanceof Function)&&!C.isPtr(Ze)&&S("Usage errror: expecting a Function or WASM pointer to one."):S("Usage error: target object is-not-a StructType."),arguments.length===1)return(X,ce)=>be(Ie,X,ce,Ge);be.argcProxy||(be.argcProxy=function(X,ce,Ee,st){return function(...ae){return Ee.length!==arguments.length&&S("Argument mismatch for",X.structInfo.name+"::"+ce+": Native signature is:",st),Ee.apply(this,ae)}},be.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((X,ce)=>{if(typeof X=="number")try{C.uninstallFunction(X)}catch{}}),delete this.ondispose.__removeFuncList)});const je=Ie.memberSignature(Te);je.length<2&&S("Member",Te,"does not have a function pointer signature:",je);const Qe=Ie.memberKey(Te),St=Ge&&!C.isPtr(Ze)?be.argcProxy(Ie,Qe,Ze,je):Ze;if(C.isPtr(St))St&&!C.functionEntry(St)&&S("Pointer",St,"is not a WASM function table entry."),Ie[Qe]=St;else{const X=C.installFunction(St,Ie.memberSignature(Te,!0));Ie[Qe]=X,(!Ie.ondispose||!Ie.ondispose.__removeFuncList)&&(Ie.addOnDispose("ondispose.__removeFuncList handler",be.removeFuncList),Ie.ondispose.__removeFuncList=[]),Ie.ondispose.__removeFuncList.push(Qe,X)}return(X,ce)=>be(Ie,X,ce,Ge)};Re.installMethodArgcCheck=!1;const et=function(be,Ie,Te=Re.installMethodArgcCheck){const Ze=new Map;for(const Ge of Object.keys(Ie)){const je=Ie[Ge],Qe=Ze.get(je);if(Qe){const St=be.memberKey(Ge);be[St]=be[be.memberKey(Qe)]}else Re(be,Ge,je,Te),Ze.set(je,Ge)}return be};Be.StructType.prototype.installMethod=function(Ie,Te,Ze=Re.installMethodArgcCheck){return arguments.length<3&&Ie&&typeof Ie=="object"?et(this,...arguments):Re(this,...arguments)},Be.StructType.prototype.installMethods=function(be,Ie=Re.installMethodArgcCheck){return et(this,be,Ie)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){y.version={libVersion:"3.47.1",libVersionNumber:3047001,sourceId:"2024-11-25 12:07:48 b95d11e958643b969c47a8e5857f3793b9e69700b8f1469371386369a26e577e",downloadVersion:3470100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=(...ae)=>{throw new y.SQLite3Error(...ae)},N=y.capi,C=y.wasm,B=y.util,fe=new WeakMap,me=new WeakMap,Ke=(ae,pe,K)=>{const re=Object.getOwnPropertyDescriptor(ae,pe);return re?re.value:K},tt=function(ae,pe){return pe&&(ae instanceof Re&&(ae=ae.pointer),S(pe,"sqlite3 result code",pe+":",ae?N.sqlite3_errmsg(ae):N.sqlite3_errstr(pe))),arguments[0]},at=C.installFunction("i(ippp)",function(ae,pe,K,re){N.SQLITE_TRACE_STMT===ae&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+pe+":",C.cstrToJs(re))}.bind({counter:0})),mt=Object.create(null),Be=function ae(...pe){if(!ae._name2vfs){ae._name2vfs=Object.create(null);const _e=typeof importScripts=="function"?Pe=>S("The VFS for",Pe,"is only available in the main window thread."):!1;ae._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:_e||(()=>"local")},ae._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:_e||(()=>"session")}}const K=ae.normalizeArgs(...pe);let re=K.filename,ie=K.vfs,Le=K.flags;(typeof re!="string"&&typeof re!="number"||typeof Le!="string"||ie&&typeof ie!="string"&&typeof ie!="number")&&(y.config.error("Invalid DB ctor args",K,arguments),S("Invalid arguments for DB constructor."));let it=typeof re=="number"?C.cstrToJs(re):re;const Ot=ae._name2vfs[it];Ot&&(ie=Ot.vfs,re=it=Ot.filename(it));let Wt,Yt=0;Le.indexOf("c")>=0&&(Yt|=N.SQLITE_OPEN_CREATE|N.SQLITE_OPEN_READWRITE),Le.indexOf("w")>=0&&(Yt|=N.SQLITE_OPEN_READWRITE),Yt===0&&(Yt|=N.SQLITE_OPEN_READONLY),Yt|=N.SQLITE_OPEN_EXRESCODE;const lt=C.pstack.pointer;try{const _e=C.pstack.allocPtr();let Pe=N.sqlite3_open_v2(re,_e,Yt,ie||0);Wt=C.peekPtr(_e),tt(Wt,Pe),N.sqlite3_extended_result_codes(Wt,1),Le.indexOf("t")>=0&&N.sqlite3_trace_v2(Wt,N.SQLITE_TRACE_STMT,at,Wt)}catch(_e){throw Wt&&N.sqlite3_close_v2(Wt),_e}finally{C.pstack.restore(lt)}this.filename=it,fe.set(this,Wt),me.set(this,Object.create(null));try{const _e=N.sqlite3_js_db_vfs(Wt)||S("Internal error: cannot get VFS for new db handle."),Pe=mt[_e];Pe&&(Pe instanceof Function?Pe(this,y):tt(Wt,N.sqlite3_exec(Wt,Pe,0,0,0)))}catch(_e){throw this.close(),_e}};Be.setVfsPostOpenCallback=function(ae,pe){pe instanceof Function||S("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),mt[ae]=pe},Be.normalizeArgs=function(ae=":memory:",pe="c",K=null){const re={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(re,arguments[0]),re.flags===void 0&&(re.flags="c"),re.vfs===void 0&&(re.vfs=null),re.filename===void 0&&(re.filename=":memory:")):(re.filename=ae,re.flags=pe,re.vfs=K),re};const Re=function(...ae){Be.apply(this,ae)};Re.dbCtorHelper=Be;const et={null:1,number:2,string:3,boolean:4,blob:5};et.undefined==et.null,C.bigIntEnabled&&(et.bigint=et.number);const be=function(){et!==arguments[2]&&S(N.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],fe.set(this,arguments[1]),this.parameterCount=N.sqlite3_bind_parameter_count(this.pointer)},Ie=function(ae){return ae.pointer||S("DB has been closed."),ae},Te=function(ae,pe){return(pe!==(pe|0)||pe<0||pe>=ae.columnCount)&&S("Column index",pe,"is out of range."),ae},Ze=function(ae,pe){const K=Object.create(null);switch(K.opt=Object.create(null),pe.length){case 1:typeof pe[0]=="string"||B.isSQLableTypedArray(pe[0])||Array.isArray(pe[0])?K.sql=pe[0]:pe[0]&&typeof pe[0]=="object"&&(K.opt=pe[0],K.sql=K.opt.sql);break;case 2:K.sql=pe[0],K.opt=pe[1];break;default:S("Invalid argument count for exec().")}K.sql=B.flexibleString(K.sql),typeof K.sql!="string"&&S("Missing SQL argument or unsupported SQL value type.");const re=K.opt;switch(re.returnValue){case"resultRows":re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows;break;case"saveSql":re.saveSql||(re.saveSql=[]),K.returnVal=()=>re.saveSql;break;case void 0:case"this":K.returnVal=()=>ae;break;default:S("Invalid returnValue value:",re.returnValue)}if(!re.callback&&!re.returnValue&&re.rowMode!==void 0&&(re.resultRows||(re.resultRows=[]),K.returnVal=()=>re.resultRows),re.callback||re.resultRows)switch(re.rowMode===void 0?"array":re.rowMode){case"object":K.cbArg=(ie,Le)=>{Le.columnNames||(Le.columnNames=ie.getColumnNames([]));const it=ie.get([]),Ot=Object.create(null);for(const Wt in Le.columnNames)Ot[Le.columnNames[Wt]]=it[Wt];return Ot};break;case"array":K.cbArg=ie=>ie.get([]);break;case"stmt":Array.isArray(re.resultRows)&&S("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),K.cbArg=ie=>ie;break;default:if(B.isInt32(re.rowMode)){K.cbArg=ie=>ie.get(re.rowMode);break}else if(typeof re.rowMode=="string"&&re.rowMode.length>1&&re.rowMode[0]==="$"){const ie=re.rowMode.substr(1);K.cbArg=Le=>{const it=Le.get(Object.create(null))[ie];return it===void 0?S(N.SQLITE_NOTFOUND,"exec(): unknown result column:",ie):it};break}S("Invalid rowMode:",re.rowMode)}return K},Ge=(ae,pe,K,...re)=>{const ie=ae.prepare(pe);try{const Le=ie.bind(K).step()?ie.get(...re):void 0;return ie.reset(),Le}finally{ie.finalize()}},je=(ae,pe,K,re)=>ae.exec({sql:pe,bind:K,rowMode:re,returnValue:"resultRows"});Re.checkRc=(ae,pe)=>tt(ae,pe),Re.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return Ie(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const ae=this.pointer;if(Object.keys(me.get(this)).forEach((pe,K)=>{if(K&&K.pointer)try{K.finalize()}catch{}}),fe.delete(this),me.delete(this),N.sqlite3_close_v2(ae),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(ae=!1,pe=!1){const K=Ie(this).pointer;return ae?pe?N.sqlite3_total_changes64(K):N.sqlite3_total_changes(K):pe?N.sqlite3_changes64(K):N.sqlite3_changes(K)},dbFilename:function(ae="main"){return N.sqlite3_db_filename(Ie(this).pointer,ae)},dbName:function(ae=0){return N.sqlite3_db_name(Ie(this).pointer,ae)},dbVfsName:function(ae=0){let pe;const K=N.sqlite3_js_db_vfs(Ie(this).pointer,ae);if(K){const re=new N.sqlite3_vfs(K);try{pe=C.cstrToJs(re.$zName)}finally{re.dispose()}}return pe},prepare:function(ae){Ie(this);const pe=C.pstack.pointer;let K,re;try{K=C.pstack.alloc(8),Re.checkRc(this,N.sqlite3_prepare_v2(this.pointer,ae,-1,K,null)),re=C.peekPtr(K)}finally{C.pstack.restore(pe)}re||S("Cannot prepare empty SQL.");const ie=new be(this,re,et);return me.get(this)[re]=ie,ie},exec:function(){Ie(this);const ae=Ze(this,arguments);if(!ae.sql)return S("exec() requires an SQL string.");const pe=ae.opt,K=pe.callback,re=Array.isArray(pe.resultRows)?pe.resultRows:void 0;let ie,Le=pe.bind,it=!!(ae.cbArg||pe.columnNames||re);const Ot=C.scopedAllocPush(),Wt=Array.isArray(pe.saveSql)?pe.saveSql:void 0;try{const Yt=B.isSQLableTypedArray(ae.sql);let lt=Yt?ae.sql.byteLength:C.jstrlen(ae.sql);const _e=C.scopedAlloc(2*C.ptrSizeof+(lt+1)),Pe=_e+C.ptrSizeof;let ot=Pe+C.ptrSizeof;const pt=ot+lt;for(Yt?C.heap8().set(ae.sql,ot):C.jstrcpy(ae.sql,C.heap8(),ot,lt,!1),C.poke(ot+lt,0);ot&&C.peek(ot,"i8");){C.pokePtr([_e,Pe],0),Re.checkRc(this,N.sqlite3_prepare_v3(this.pointer,ot,lt,0,_e,Pe));const Ft=C.peekPtr(_e);if(ot=C.peekPtr(Pe),lt=pt-ot,!!Ft){if(Wt&&Wt.push(N.sqlite3_sql(Ft).trim()),ie=new be(this,Ft,et),Le&&ie.parameterCount&&(ie.bind(Le),Le=null),it&&ie.columnCount){let Xt=Array.isArray(pe.columnNames)?0:1;if(it=!1,ae.cbArg||re){const qe=Object.create(null);for(;ie.step();ie._lockedByExec=!1){Xt++===0&&ie.getColumnNames(qe.columnNames=pe.columnNames||[]),ie._lockedByExec=!0;const nt=ae.cbArg(ie,qe);if(re&&re.push(nt),K&&K.call(pe,nt,ie)===!1)break}ie._lockedByExec=!1}Xt===0&&ie.getColumnNames(pe.columnNames)}else ie.step();ie.reset().finalize(),ie=null}}}finally{C.scopedAllocPop(Ot),ie&&(delete ie._lockedByExec,ie.finalize())}return ae.returnVal()},createFunction:function(pe,K,re){const ie=qe=>qe instanceof Function;switch(arguments.length){case 1:re=pe,pe=re.name,K=re.xFunc||0;break;case 2:ie(K)||(re=K,K=re.xFunc||0);break}re||(re={}),typeof pe!="string"&&S("Invalid arguments: missing function name.");let Le=re.xStep||0,it=re.xFinal||0;const Ot=re.xValue||0,Wt=re.xInverse||0;let Yt;ie(K)?(Yt=!1,(ie(Le)||ie(it))&&S("Ambiguous arguments: scalar or aggregate?"),Le=it=null):ie(Le)?(ie(it)||S("Missing xFinal() callback for aggregate or window UDF."),K=null):ie(it)?S("Missing xStep() callback for aggregate or window UDF."):S("Missing function-type properties."),Yt===!1?(ie(Ot)||ie(Wt))&&S("xValue and xInverse are not permitted for non-window UDFs."):ie(Ot)?(ie(Wt)||S("xInverse must be provided if xValue is."),Yt=!0):ie(Wt)&&S("xValue must be provided if xInverse is.");const lt=re.pApp;lt!=null&&(typeof lt!="number"||!B.isInt32(lt))&&S("Invalid value for pApp property. Must be a legal WASM pointer value.");const _e=re.xDestroy||0;_e&&!ie(_e)&&S("xDestroy property must be a function.");let Pe=0;Ke(re,"deterministic")&&(Pe|=N.SQLITE_DETERMINISTIC),Ke(re,"directOnly")&&(Pe|=N.SQLITE_DIRECTONLY),Ke(re,"innocuous")&&(Pe|=N.SQLITE_INNOCUOUS),pe=pe.toLowerCase();const ot=K||Le,pt=Ke(re,"arity"),Ft=typeof pt=="number"?pt:ot.length?ot.length-1:0;let Xt;return Yt?Xt=N.sqlite3_create_window_function(this.pointer,pe,Ft,N.SQLITE_UTF8|Pe,lt||0,Le,it,Ot,Wt,_e):Xt=N.sqlite3_create_function_v2(this.pointer,pe,Ft,N.SQLITE_UTF8|Pe,lt||0,K,Le,it,_e),Re.checkRc(this,Xt),this},selectValue:function(ae,pe,K){return Ge(this,ae,pe,0,K)},selectValues:function(ae,pe,K){const re=this.prepare(ae),ie=[];try{for(re.bind(pe);re.step();)ie.push(re.get(0,K));re.reset()}finally{re.finalize()}return ie},selectArray:function(ae,pe){return Ge(this,ae,pe,[])},selectObject:function(ae,pe){return Ge(this,ae,pe,{})},selectArrays:function(ae,pe){return je(this,ae,pe,"array")},selectObjects:function(ae,pe){return je(this,ae,pe,"object")},openStatementCount:function(){return this.pointer?Object.keys(me.get(this)).length:0},transaction:function(ae){let pe="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&S(N.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),pe+=" "+arguments[0],ae=arguments[1]),Ie(this).exec(pe);try{const K=ae(this);return this.exec("COMMIT"),K}catch(K){throw this.exec("ROLLBACK"),K}},savepoint:function(ae){Ie(this).exec("SAVEPOINT oo1");try{const pe=ae(this);return this.exec("RELEASE oo1"),pe}catch(pe){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),pe}},checkRc:function(ae){return tt(this,ae)}};const Qe=function(ae){return ae.pointer||S("Stmt has been closed."),ae},St=function(ae){let pe=et[ae==null?"null":typeof ae];switch(pe){case et.boolean:case et.null:case et.number:case et.string:return pe;case et.bigint:if(C.bigIntEnabled)return pe;default:return B.isBindableTypedArray(ae)?et.blob:void 0}},X=function(ae){return St(ae)||S("Unsupported bind() argument type:",typeof ae)},ce=function(ae,pe){const K=typeof pe=="number"?pe:N.sqlite3_bind_parameter_index(ae.pointer,pe);return K===0||!B.isInt32(K)?S("Invalid bind() parameter name: "+pe):(K<1||K>ae.parameterCount)&&S("Bind index",pe,"is out of range."),K},Ee=function(ae,pe){return ae._lockedByExec&&S("Operation is illegal when statement is locked:",pe),ae},st=function ae(pe,K,re,ie){Ee(Qe(pe),"bind()"),ae._||(ae._tooBigInt=it=>S("BigInt value is too big to store without precision loss:",it),ae._={string:function(it,Ot,Wt,Yt){const[lt,_e]=C.allocCString(Wt,!0);return(Yt?N.sqlite3_bind_blob:N.sqlite3_bind_text)(it.pointer,Ot,lt,_e,N.SQLITE_WASM_DEALLOC)}}),X(ie),K=ce(pe,K);let Le=0;switch(ie==null?et.null:re){case et.null:Le=N.sqlite3_bind_null(pe.pointer,K);break;case et.string:Le=ae._.string(pe,K,ie,!1);break;case et.number:{let it;B.isInt32(ie)?it=N.sqlite3_bind_int:typeof ie=="bigint"?B.bigIntFits64(ie)?C.bigIntEnabled?it=N.sqlite3_bind_int64:B.bigIntFitsDouble(ie)?(ie=Number(ie),it=N.sqlite3_bind_double):ae._tooBigInt(ie):ae._tooBigInt(ie):(ie=Number(ie),C.bigIntEnabled&&Number.isInteger(ie)?it=N.sqlite3_bind_int64:it=N.sqlite3_bind_double),Le=it(pe.pointer,K,ie);break}case et.boolean:Le=N.sqlite3_bind_int(pe.pointer,K,ie?1:0);break;case et.blob:{if(typeof ie=="string"){Le=ae._.string(pe,K,ie,!0);break}else ie instanceof ArrayBuffer?ie=new Uint8Array(ie):B.isBindableTypedArray(ie)||S("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const it=C.alloc(ie.byteLength||1);C.heap8().set(ie.byteLength?ie:[0],it),Le=N.sqlite3_bind_blob(pe.pointer,K,it,ie.byteLength,N.SQLITE_WASM_DEALLOC);break}default:y.config.warn("Unsupported bind() argument type:",ie),S("Unsupported bind() argument type: "+typeof ie)}return Le&&Re.checkRc(pe.db.pointer,Le),pe._mayGet=!1,pe};be.prototype={finalize:function(){if(this.pointer){Ee(this,"finalize()");const ae=N.sqlite3_finalize(this.pointer);return delete me.get(this.db)[this.pointer],fe.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,ae}},clearBindings:function(){return Ee(Qe(this),"clearBindings()"),N.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(ae){Ee(this,"reset()"),ae&&this.clearBindings();const pe=N.sqlite3_reset(Qe(this).pointer);return this._mayGet=!1,tt(this.db,pe),this},bind:function(){Qe(this);let ae,pe;switch(arguments.length){case 1:ae=1,pe=arguments[0];break;case 2:ae=arguments[0],pe=arguments[1];break;default:S("Invalid bind() arguments.")}return pe===void 0?this:(this.parameterCount||S("This statement has no bindable parameters."),this._mayGet=!1,pe===null?st(this,ae,et.null,pe):Array.isArray(pe)?(arguments.length!==1&&S("When binding an array, an index argument is not permitted."),pe.forEach((K,re)=>st(this,re+1,X(K),K)),this):(pe instanceof ArrayBuffer&&(pe=new Uint8Array(pe)),typeof pe=="object"&&!B.isBindableTypedArray(pe)?(arguments.length!==1&&S("When binding an object, an index argument is not permitted."),Object.keys(pe).forEach(K=>st(this,K,X(pe[K]),pe[K])),this):st(this,ae,X(pe),pe)))},bindAsBlob:function(ae,pe){Qe(this),arguments.length===1&&(pe=ae,ae=1);const K=X(pe);return et.string!==K&&et.blob!==K&&et.null!==K&&S("Invalid value type for bindAsBlob()"),st(this,ae,et.blob,pe)},step:function(){Ee(this,"step()");const ae=N.sqlite3_step(Qe(this).pointer);switch(ae){case N.SQLITE_DONE:return this._mayGet=!1;case N.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,y.config.warn("sqlite3_step() rc=",ae,N.sqlite3_js_rc_str(ae),"SQL =",N.sqlite3_sql(this.pointer)),Re.checkRc(this.db.pointer,ae)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const ae=this.step();return this.reset(),ae}finally{try{this.finalize()}catch{}}},get:function(ae,pe){if(Qe(this)._mayGet||S("Stmt.step() has not (recently) returned true."),Array.isArray(ae)){let K=0;const re=this.columnCount;for(;K<re;)ae[K]=this.get(K++);return ae}else if(ae&&typeof ae=="object"){let K=0;const re=this.columnCount;for(;K<re;)ae[N.sqlite3_column_name(this.pointer,K)]=this.get(K++);return ae}switch(Te(this,ae),pe===void 0?N.sqlite3_column_type(this.pointer,ae):pe){case N.SQLITE_NULL:return null;case N.SQLITE_INTEGER:if(C.bigIntEnabled){const K=N.sqlite3_column_int64(this.pointer,ae);return K>=Number.MIN_SAFE_INTEGER&&K<=Number.MAX_SAFE_INTEGER?Number(K).valueOf():K}else{const K=N.sqlite3_column_double(this.pointer,ae);return(K>Number.MAX_SAFE_INTEGER||K<Number.MIN_SAFE_INTEGER)&&S("Integer is out of range for JS integer range: "+K),B.isInt32(K)?K|0:K}case N.SQLITE_FLOAT:return N.sqlite3_column_double(this.pointer,ae);case N.SQLITE_TEXT:return N.sqlite3_column_text(this.pointer,ae);case N.SQLITE_BLOB:{const K=N.sqlite3_column_bytes(this.pointer,ae),re=N.sqlite3_column_blob(this.pointer,ae),ie=new Uint8Array(K);return K&&ie.set(C.heap8u().slice(re,re+K),0),K&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(ie.buffer),ie}default:S("Don't know how to translate","type of result column #"+ae+".")}S("Not reached.")},getInt:function(ae){return this.get(ae,N.SQLITE_INTEGER)},getFloat:function(ae){return this.get(ae,N.SQLITE_FLOAT)},getString:function(ae){return this.get(ae,N.SQLITE_TEXT)},getBlob:function(ae){return this.get(ae,N.SQLITE_BLOB)},getJSON:function(ae){const pe=this.get(ae,N.SQLITE_STRING);return pe===null?pe:JSON.parse(pe)},getColumnName:function(ae){return N.sqlite3_column_name(Te(Qe(this),ae).pointer,ae)},getColumnNames:function(ae=[]){Te(Qe(this),0);const pe=this.columnCount;for(let K=0;K<pe;++K)ae.push(N.sqlite3_column_name(this.pointer,K));return ae},getParamIndex:function(ae){return Qe(this).parameterCount?N.sqlite3_bind_parameter_index(this.pointer,ae):void 0},getParamName:function(ae){return Qe(this).parameterCount?N.sqlite3_bind_parameter_name(this.pointer,ae):void 0},isBusy:function(){return N.sqlite3_stmt_busy(Qe(this))!==0},isReadOnly:function(){return N.sqlite3_stmt_readonly(Qe(this))!==0}};{const ae={enumerable:!0,get:function(){return fe.get(this)},set:()=>S("The pointer property is read-only.")};Object.defineProperty(be.prototype,"pointer",ae),Object.defineProperty(Re.prototype,"pointer",ae)}if(Object.defineProperty(be.prototype,"columnCount",{enumerable:!1,get:function(){return N.sqlite3_column_count(this.pointer)},set:()=>S("The columnCount property is read-only.")}),y.oo1={DB:Re,Stmt:be},B.isUIThread()){y.oo1.JsStorageDb=function(pe="session"){const K=Be.normalizeArgs(...arguments);pe=K.filename,pe!=="session"&&pe!=="local"&&S("JsStorageDb db name must be one of 'session' or 'local'."),K.vfs="kvvfs",Be.call(this,K)};const ae=y.oo1.JsStorageDb;ae.prototype=Object.create(Re.prototype),ae.clearStorage=N.sqlite3_js_kvvfs_clear,ae.prototype.clearStorage=function(){return ae.clearStorage(Ie(this).filename)},ae.storageSize=N.sqlite3_js_kvvfs_size,ae.prototype.storageSize=function(){return ae.storageSize(Ie(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util;y.initWorker1API=function(){const N=(...Be)=>{throw new Error(Be.join(" "))};globalThis.WorkerGlobalScope instanceof Function||N("initWorker1API() must be run from a Worker thread.");const C=this.sqlite3||N("Missing this.sqlite3 object."),B=C.oo1.DB,fe=function(Be){let Re=me.idMap.get(Be);return Re||(Re="db#"+ ++me.idSeq+"@"+Be.pointer,me.idMap.set(Be,Re),Re)},me={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Be){const Re=new B(Be);return this.dbs[fe(Re)]=Re,this.dbList.indexOf(Re)<0&&this.dbList.push(Re),Re},close:function(Be,Re){if(Be){delete this.dbs[fe(Be)];const et=Be.filename,be=S.sqlite3__wasm_db_vfs(Be.pointer,0);Be.close();const Ie=this.dbList.indexOf(Be);Ie>=0&&this.dbList.splice(Ie,1),Re&&et&&be&&S.sqlite3__wasm_vfs_unlink(be,et)}},post:function(Be,Re){Re&&Re.length?(globalThis.postMessage(Be,Array.from(Re)),Re.length=0):globalThis.postMessage(Be)},dbs:Object.create(null),getDb:function(Be,Re=!0){return this.dbs[Be]||(Re?N("Unknown (or closed) DB ID:",Be):void 0)}},Ke=function(Be=me.dbList[0]){return Be&&Be.pointer?Be:N("DB is not opened.")},tt=function(Be,Re=!0){const et=me.getDb(Be.dbId,!1)||me.dbList[0];return Re?Ke(et):et},at=function(){return me.dbList[0]&&fe(me.dbList[0])},mt={open:function(Be){const Re=Object.create(null),et=Be.args||Object.create(null);et.simulateError&&N("Throwing because of simulateError flag.");const be=Object.create(null);Re.vfs=et.vfs,Re.filename=et.filename||"";const Ie=me.open(Re);return be.filename=Ie.filename,be.persistent=!!C.capi.sqlite3_js_db_uses_vfs(Ie.pointer,"opfs"),be.dbId=fe(Ie),be.vfs=Ie.dbVfsName(),be},close:function(Be){const Re=tt(Be,!1),et={filename:Re&&Re.filename};if(Re){const be=Be.args&&typeof Be.args=="object"?!!Be.args.unlink:!1;me.close(Re,be)}return et},exec:function(Be){const Re=typeof Be.args=="string"?{sql:Be.args}:Be.args||Object.create(null);Re.rowMode==="stmt"?N("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):Re.sql||N("'exec' requires input SQL.");const et=tt(Be);(Re.callback||Array.isArray(Re.resultRows))&&(et._blobXfer=me.xfer);const be=Re.callback;let Ie=0;const Te=!!Re.columnNames;typeof be=="string"&&(Te||(Re.columnNames=[]),Re.callback=function(Ze,Ge){me.post({type:be,columnNames:Re.columnNames,rowNumber:++Ie,row:Ze},me.xfer)});try{const Ze=Re.countChanges?et.changes(!0,Re.countChanges===64):void 0;et.exec(Re),Ze!==void 0&&(Re.changeCount=et.changes(!0,Re.countChanges===64)-Ze),Re.callback instanceof Function&&(Re.callback=be,me.post({type:be,columnNames:Re.columnNames,rowNumber:null,row:void 0}))}finally{delete et._blobXfer,Re.callback&&(Re.callback=be)}return Re},"config-get":function(){const Be=Object.create(null),Re=C.config;return["bigIntEnabled"].forEach(function(et){Object.getOwnPropertyDescriptor(Re,et)&&(Be[et]=Re[et])}),Be.version=C.version,Be.vfsList=C.capi.sqlite3_js_vfs_list(),Be},export:function(Be){const Re=tt(Be),et={byteArray:C.capi.sqlite3_js_db_export(Re.pointer),filename:Re.filename,mimetype:"application/x-sqlite3"};return me.xfer.push(et.byteArray.buffer),et},toss:function(Be){N("Testing worker exception")}};globalThis.onmessage=async function(Be){Be=Be.data;let Re,et=Be.dbId,be=Be.type;const Ie=performance.now();try{mt.hasOwnProperty(be)&&mt[be]instanceof Function?Re=await mt[be](Be):N("Unknown db worker message type:",Be.type)}catch(Te){be="error",Re={operation:Be.type,message:Te.message,errorClass:Te.name,input:Be},Te.stack&&(Re.stack=typeof Te.stack=="string"?Te.stack.split(/\n\s*/):Te.stack)}et||(et=Re.dbId||at()),me.post({type:be,dbId:et,messageId:Be.messageId,workerReceivedTime:Ie,workerRespondTime:performance.now(),departureTime:Be.departureTime,result:Re},me.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:y})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.wasm,N=y.capi,C=y.util.toss3,B=Object.create(null);y.vfs=B,N.sqlite3_vfs.prototype.registerVfs=function(fe=!1){this instanceof y.capi.sqlite3_vfs||C("Expecting a sqlite3_vfs-type argument.");const me=N.sqlite3_vfs_register(this,fe?1:0);return me&&C("sqlite3_vfs_register(",this,") failed with rc",me),this.pointer!==N.sqlite3_vfs_find(this.$zName)&&C("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},B.installVfs=function(fe){let me=0;const Ke=["io","vfs"];for(const tt of Ke){const at=fe[tt];at&&(++me,at.struct.installMethods(at.methods,!!at.applyArgcCheck),tt==="vfs"&&(!at.struct.$zName&&typeof at.name=="string"&&at.struct.addOnDispose(at.struct.$zName=S.allocCString(at.name)),at.struct.registerVfs(!!at.asDefault)))}return me||C("Misuse: installVfs() options object requires at least","one of:",Ke),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){if(!y.wasm.exports.sqlite3_declare_vtab)return;const S=y.wasm,N=y.capi,C=y.util.toss3,B=Object.create(null);y.vtab=B;const fe=N.sqlite3_index_info;fe.prototype.nthConstraint=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraint+fe.sqlite3_index_constraint.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint(mt)},fe.prototype.nthConstraintUsage=function(tt,at=!1){if(tt<0||tt>=this.$nConstraint)return!1;const mt=this.$aConstraintUsage+fe.sqlite3_index_constraint_usage.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_constraint_usage(mt)},fe.prototype.nthOrderBy=function(tt,at=!1){if(tt<0||tt>=this.$nOrderBy)return!1;const mt=this.$aOrderBy+fe.sqlite3_index_orderby.structInfo.sizeof*tt;return at?mt:new fe.sqlite3_index_orderby(mt)};const me=function(tt,at){return function(mt,Be=!1){if(arguments.length===0&&(mt=new at),mt instanceof at)return this.set(mt.pointer,mt),mt;S.isPtr(mt)||y.SQLite3Error.toss("Invalid argument to",tt+"()");let Re=this.get(mt);return Be&&this.delete(mt),Re}.bind(new Map)},Ke=function(tt,at){const mt=me(tt,at);return Object.assign(Object.create(null),{StructType:at,create:Be=>{const Re=mt();return S.pokePtr(Be,Re.pointer),Re},get:Be=>mt(Be),unget:Be=>mt(Be,!0),dispose:Be=>{const Re=mt(Be,!0);Re&&Re.dispose()}})};B.xVtab=Ke("xVtab",N.sqlite3_vtab),B.xCursor=Ke("xCursor",N.sqlite3_vtab_cursor),B.xIndexInfo=tt=>new N.sqlite3_index_info(tt),B.xError=function tt(at,mt,Be){if(tt.errorReporter instanceof Function)try{tt.errorReporter("sqlite3_module::"+at+"(): "+mt.message)}catch{}let Re;return mt instanceof y.WasmAllocError?Re=N.SQLITE_NOMEM:arguments.length>2?Re=Be:mt instanceof y.SQLite3Error&&(Re=mt.resultCode),Re||N.SQLITE_ERROR},B.xError.errorReporter=console.error.bind(console),B.xRowid=(tt,at)=>S.poke(tt,at,"i64"),B.setupModule=function(tt){let at=!1;const mt=this instanceof N.sqlite3_module?this:tt.struct||(at=new N.sqlite3_module);try{const Be=tt.methods||C("Missing 'methods' object.");for(const Re of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const et=Re[0],be=Re[1];Be[et]===!0?Be[et]=Be[be]:Be[be]===!0&&(Be[be]=Be[et])}if(tt.catchExceptions){const Re=function(Ie,Te){return["xConnect","xCreate"].indexOf(Ie)>=0?function(Ze,Ge,je,Qe,St,X){try{return Te(...arguments)||0}catch(ce){return ce instanceof y.WasmAllocError||(S.dealloc(S.peekPtr(X)),S.pokePtr(X,S.allocCString(ce.message))),B.xError(Ie,ce)}}:function(...Ze){try{return Te(...Ze)||0}catch(Ge){return B.xError(Ie,Ge)}}},et=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],be=Object.create(null);for(const Ie of et){const Te=Be[Ie];if(Te instanceof Function)Ie==="xConnect"&&Be.xCreate===Te?be[Ie]=Be.xCreate:Ie==="xCreate"&&Be.xConnect===Te?be[Ie]=Be.xConnect:be[Ie]=Re(Ie,Te);else continue}mt.installMethods(be,!1)}else mt.installMethods(Be,!!tt.applyArgcCheck);if(mt.$iVersion===0){let Re;typeof tt.iVersion=="number"?Re=tt.iVersion:mt.$xShadowName?Re=3:mt.$xSavePoint||mt.$xRelease||mt.$xRollbackTo?Re=2:Re=1,mt.$iVersion=Re}}catch(Be){throw at&&at.dispose(),Be}return mt},N.sqlite3_module.prototype.setupModule=function(tt){return B.setupModule.call(this,tt)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=function N(C){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!C||typeof C!="object")&&(C=Object.create(null));const B=new URL(globalThis.location.href).searchParams;return B.has("opfs-disable")?Promise.resolve(y):(C.verbose===void 0&&(C.verbose=B.has("opfs-verbose")?+B.get("opfs-verbose")||2:1),C.sanityChecks===void 0&&(C.sanityChecks=B.has("opfs-sanity-check")),C.proxyUri===void 0&&(C.proxyUri=N.defaultProxyUri),typeof C.proxyUri=="function"&&(C.proxyUri=C.proxyUri()),new Promise(function(me,Ke){const tt=[y.config.error,y.config.warn,y.config.log],at=(qe,...nt)=>{C.verbose>qe&&tt[qe]("OPFS syncer:",...nt)},mt=(...qe)=>at(2,...qe),Be=(...qe)=>at(1,...qe),Re=(...qe)=>at(0,...qe),et=y.util.toss,be=y.capi,Ie=y.util,Te=y.wasm,Ze=be.sqlite3_vfs,Ge=be.sqlite3_file,je=be.sqlite3_io_methods,Qe=Object.create(null),St=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Qe.metrics={dump:function(){let qe,nt=0,dt=0,Nt=0;for(qe in ie.opIds){const xt=Le[qe];nt+=xt.count,dt+=xt.time,Nt+=xt.wait,xt.avgTime=xt.count&&xt.time?xt.time/xt.count:0,xt.avgWait=xt.count&&xt.wait?xt.wait/xt.count:0}y.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",Le,`
Total of`,nt,"op(s) for",dt,"ms (incl. "+Nt+" ms of waiting on the async side)"),y.config.log("Serialization metrics:",Le.s11n),pe.postMessage({type:"opfs-async-metrics"})},reset:function(){let qe;const nt=Nt=>Nt.count=Nt.time=Nt.wait=0;for(qe in ie.opIds)nt(Le[qe]=Object.create(null));let dt=Le.s11n=Object.create(null);dt=dt.serialize=Object.create(null),dt.count=dt.time=0,dt=Le.s11n.deserialize=Object.create(null),dt.count=dt.time=0}};const X=new je,ce=new Ze().addOnDispose(()=>X.dispose());let Ee;const st=qe=>(Ee=!0,ce.dispose(),Ke(qe)),ae=()=>(Ee=!1,me(y)),pe=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-C_otN2ZJ.js",import.meta.url));setTimeout(()=>{Ee===void 0&&st(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),pe._originalOnError=pe.onerror,pe.onerror=function(qe){Re("Error initializing OPFS asyncer:",qe),st(new Error("Loading OPFS async Worker failed for unknown reasons."))};const K=be.sqlite3_vfs_find(null),re=K?new Ze(K):null;X.$iVersion=1,ce.$iVersion=2,ce.$szOsFile=be.sqlite3_file.structInfo.sizeof,ce.$mxPathname=1024,ce.$zName=Te.allocCString("opfs"),ce.$xDlOpen=ce.$xDlError=ce.$xDlSym=ce.$xDlClose=null,ce.addOnDispose("$zName",ce.$zName,"cleanup default VFS wrapper",()=>re?re.dispose():null);const ie=Object.create(null);ie.verbose=C.verbose,ie.littleEndian=(()=>{const qe=new ArrayBuffer(2);return new DataView(qe).setInt16(0,256,!0),new Int16Array(qe)[0]===256})(),ie.asyncIdleWaitTime=150,ie.asyncS11nExceptions=1,ie.fileBufferSize=1024*64,ie.sabS11nOffset=ie.fileBufferSize,ie.sabS11nSize=ce.$mxPathname*2,ie.sabIO=new SharedArrayBuffer(ie.fileBufferSize+ie.sabS11nSize),ie.opIds=Object.create(null);const Le=Object.create(null);{let qe=0;ie.opIds.whichOp=qe++,ie.opIds.rc=qe++,ie.opIds.xAccess=qe++,ie.opIds.xClose=qe++,ie.opIds.xDelete=qe++,ie.opIds.xDeleteNoWait=qe++,ie.opIds.xFileSize=qe++,ie.opIds.xLock=qe++,ie.opIds.xOpen=qe++,ie.opIds.xRead=qe++,ie.opIds.xSleep=qe++,ie.opIds.xSync=qe++,ie.opIds.xTruncate=qe++,ie.opIds.xUnlock=qe++,ie.opIds.xWrite=qe++,ie.opIds.mkdir=qe++,ie.opIds["opfs-async-metrics"]=qe++,ie.opIds["opfs-async-shutdown"]=qe++,ie.opIds.retry=qe++,ie.sabOP=new SharedArrayBuffer(qe*4),Qe.metrics.reset()}ie.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(qe=>{(ie.sq3Codes[qe]=be[qe])===void 0&&et("Maintenance required: not found:",qe)}),ie.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const it=(qe,...nt)=>{const dt=ie.opIds[qe]||et("Invalid op ID:",qe);ie.s11n.serialize(...nt),Atomics.store(ie.sabOPView,ie.opIds.rc,-1),Atomics.store(ie.sabOPView,ie.opIds.whichOp,dt),Atomics.notify(ie.sabOPView,ie.opIds.whichOp);const Nt=performance.now();for(;Atomics.wait(ie.sabOPView,ie.opIds.rc,-1)!=="not-equal";);const xt=Atomics.load(ie.sabOPView,ie.opIds.rc);if(Le[qe].wait+=performance.now()-Nt,xt&&ie.asyncS11nExceptions){const zt=ie.s11n.deserialize();zt&&Re(qe+"() async error:",...zt)}return xt};Qe.debug={asyncShutdown:()=>{Be("Shutting down OPFS async listener. The OPFS VFS will no longer work."),it("opfs-async-shutdown")},asyncRestart:()=>{Be("Attempting to restart OPFS VFS async listener. Might work, might not."),pe.postMessage({type:"opfs-async-restart"})}};const Ot=()=>{if(ie.s11n)return ie.s11n;const qe=new TextDecoder,nt=new TextEncoder("utf-8"),dt=new Uint8Array(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize),Nt=new DataView(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize);ie.s11n=Object.create(null);const xt=Object.create(null);xt.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},xt.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},xt.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},xt.string={id:4};const zt=Rt=>xt[typeof Rt]||et("Maintenance required: this value type cannot be serialized.",Rt),gn=Rt=>{switch(Rt){case xt.number.id:return xt.number;case xt.bigint.id:return xt.bigint;case xt.boolean.id:return xt.boolean;case xt.string.id:return xt.string;default:et("Invalid type ID:",Rt)}};return ie.s11n.deserialize=function(Rt=!1){++Le.s11n.deserialize.count;const jr=performance.now(),We=dt[0],vt=We?[]:null;if(We){const wt=[];let kt=1,bn,Gn,Wn;for(bn=0;bn<We;++bn,++kt)wt.push(gn(dt[kt]));for(bn=0;bn<We;++bn){const Kn=wt[bn];Kn.getter?(Wn=Nt[Kn.getter](kt,ie.littleEndian),kt+=Kn.size):(Gn=Nt.getInt32(kt,ie.littleEndian),kt+=4,Wn=qe.decode(dt.slice(kt,kt+Gn)),kt+=Gn),vt.push(Wn)}}return Rt&&(dt[0]=0),Le.s11n.deserialize.time+=performance.now()-jr,vt},ie.s11n.serialize=function(...Rt){const jr=performance.now();if(++Le.s11n.serialize.count,Rt.length){const We=[];let vt=0,wt=1;for(dt[0]=Rt.length&255;vt<Rt.length;++vt,++wt)We.push(zt(Rt[vt])),dt[wt]=We[vt].id;for(vt=0;vt<Rt.length;++vt){const kt=We[vt];if(kt.setter)Nt[kt.setter](wt,Rt[vt],ie.littleEndian),wt+=kt.size;else{const bn=nt.encode(Rt[vt]);Nt.setInt32(wt,bn.byteLength,ie.littleEndian),wt+=4,dt.set(bn,wt),wt+=bn.byteLength}}}else dt[0]=0;Le.s11n.serialize.time+=performance.now()-jr},ie.s11n},Wt=function qe(nt=16){qe._chars||(qe._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",qe._n=qe._chars.length);const dt=[];let Nt=0;for(;Nt<nt;++Nt){const xt=Math.random()*(qe._n*64)%qe._n|0;dt[Nt]=qe._chars[xt]}return dt.join("")},Yt=Object.create(null),lt=Object.create(null);lt.op=void 0,lt.start=void 0;const _e=qe=>{lt.start=performance.now(),lt.op=qe,++Le[qe].count},Pe=()=>Le[lt.op].time+=performance.now()-lt.start,ot={xCheckReservedLock:function(qe,nt){return Te.poke(nt,0,"i32"),0},xClose:function(qe){_e("xClose");let nt=0;const dt=Yt[qe];return dt&&(delete Yt[qe],nt=it("xClose",qe),dt.sq3File&&dt.sq3File.dispose()),Pe(),nt},xDeviceCharacteristics:function(qe){return be.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(qe,nt,dt){return be.SQLITE_NOTFOUND},xFileSize:function(qe,nt){_e("xFileSize");let dt=it("xFileSize",qe);if(dt==0)try{const Nt=ie.s11n.deserialize()[0];Te.poke(nt,Nt,"i64")}catch(Nt){Re("Unexpected error reading xFileSize() result:",Nt),dt=ie.sq3Codes.SQLITE_IOERR}return Pe(),dt},xLock:function(qe,nt){_e("xLock");const dt=Yt[qe];let Nt=0;return dt.lockType?dt.lockType=nt:(Nt=it("xLock",qe,nt),Nt===0&&(dt.lockType=nt)),Pe(),Nt},xRead:function(qe,nt,dt,Nt){_e("xRead");const xt=Yt[qe];let zt;try{zt=it("xRead",qe,dt,Number(Nt)),(zt===0||be.SQLITE_IOERR_SHORT_READ===zt)&&Te.heap8u().set(xt.sabView.subarray(0,dt),nt)}catch(gn){Re("xRead(",arguments,") failed:",gn,xt),zt=be.SQLITE_IOERR_READ}return Pe(),zt},xSync:function(qe,nt){_e("xSync"),++Le.xSync.count;const dt=it("xSync",qe,nt);return Pe(),dt},xTruncate:function(qe,nt){_e("xTruncate");const dt=it("xTruncate",qe,Number(nt));return Pe(),dt},xUnlock:function(qe,nt){_e("xUnlock");const dt=Yt[qe];let Nt=0;return be.SQLITE_LOCK_NONE===nt&&dt.lockType&&(Nt=it("xUnlock",qe,nt)),Nt===0&&(dt.lockType=nt),Pe(),Nt},xWrite:function(qe,nt,dt,Nt){_e("xWrite");const xt=Yt[qe];let zt;try{xt.sabView.set(Te.heap8u().subarray(nt,nt+dt)),zt=it("xWrite",qe,dt,Number(Nt))}catch(gn){Re("xWrite(",arguments,") failed:",gn,xt),zt=be.SQLITE_IOERR_WRITE}return Pe(),zt}},pt={xAccess:function(qe,nt,dt,Nt){_e("xAccess");const xt=it("xAccess",Te.cstrToJs(nt));return Te.poke(Nt,xt?0:1,"i32"),Pe(),0},xCurrentTime:function(qe,nt){return Te.poke(nt,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(qe,nt){return Te.poke(nt,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(qe,nt,dt){_e("xDelete");const Nt=it("xDelete",Te.cstrToJs(nt),dt,!1);return Pe(),Nt},xFullPathname:function(qe,nt,dt,Nt){return Te.cstrncpy(Nt,nt,dt)<dt?0:be.SQLITE_CANTOPEN},xGetLastError:function(qe,nt,dt){return Be("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(nt,dt,Nt,xt,zt){_e("xOpen");let gn=0;dt===0?dt=Wt():Te.isPtr(dt)&&(be.sqlite3_uri_boolean(dt,"opfs-unlock-asap",0)&&(gn|=ie.opfsFlags.OPFS_UNLOCK_ASAP),be.sqlite3_uri_boolean(dt,"delete-before-open",0)&&(gn|=ie.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),dt=Te.cstrToJs(dt));const Rt=Object.create(null);Rt.fid=Nt,Rt.filename=dt,Rt.sab=new SharedArrayBuffer(ie.fileBufferSize),Rt.flags=xt,Rt.readOnly=!(y.SQLITE_OPEN_CREATE&xt)&&!!(xt&be.SQLITE_OPEN_READONLY);const jr=it("xOpen",Nt,dt,xt,gn);return jr||(Rt.readOnly&&Te.poke(zt,be.SQLITE_OPEN_READONLY,"i32"),Yt[Nt]=Rt,Rt.sabView=ie.sabFileBufView,Rt.sq3File=new Ge(Nt),Rt.sq3File.$pMethods=X.pointer,Rt.lockType=be.SQLITE_LOCK_NONE),Pe(),jr}};re&&(ce.$xRandomness=re.$xRandomness,ce.$xSleep=re.$xSleep),ce.$xRandomness||(pt.xRandomness=function(qe,nt,dt){const Nt=Te.heap8u();let xt=0;for(;xt<nt;++xt)Nt[dt+xt]=Math.random()*255e3&255;return xt}),ce.$xSleep||(pt.xSleep=function(qe,nt){return Atomics.wait(ie.sabOPView,ie.opIds.xSleep,0,nt),0}),Qe.getResolvedPath=function(qe,nt){const dt=new URL(qe,"file://irrelevant").pathname;return nt?dt.split("/").filter(Nt=>!!Nt):dt},Qe.getDirForFilename=async function(nt,dt=!1){const Nt=Qe.getResolvedPath(nt,!0),xt=Nt.pop();let zt=Qe.rootDirectory;for(const gn of Nt)gn&&(zt=await zt.getDirectoryHandle(gn,{create:!!dt}));return[zt,xt]},Qe.mkdir=async function(qe){try{return await Qe.getDirForFilename(qe+"/filepart",!0),!0}catch{return!1}},Qe.entryExists=async function(qe){try{const[nt,dt]=await Qe.getDirForFilename(qe);return await nt.getFileHandle(dt),!0}catch{return!1}},Qe.randomFilename=Wt,Qe.treeList=async function(){const qe=async function dt(Nt,xt){xt.name=Nt.name,xt.dirs=[],xt.files=[];for await(const zt of Nt.values())if(zt.kind==="directory"){const gn=Object.create(null);xt.dirs.push(gn),await dt(zt,gn)}else xt.files.push(zt.name)},nt=Object.create(null);return await qe(Qe.rootDirectory,nt),nt},Qe.rmfr=async function(){const qe=Qe.rootDirectory,nt={recurse:!0};for await(const dt of qe.values())qe.removeEntry(dt.name,nt)},Qe.unlink=async function(qe,nt=!1,dt=!1){try{const[Nt,xt]=await Qe.getDirForFilename(qe,!1);return await Nt.removeEntry(xt,{recursive:nt}),!0}catch(Nt){if(dt)throw new Error("unlink(",arguments[0],") failed: "+Nt.message,{cause:Nt});return!1}},Qe.traverse=async function(qe){const nt={recursive:!0,directory:Qe.rootDirectory};typeof qe=="function"&&(qe={callback:qe}),qe=Object.assign(nt,qe||{}),async function Nt(xt,zt){for await(const gn of xt.values()){if(qe.callback(gn,xt,zt)===!1)return!1;if(qe.recursive&&gn.kind==="directory"&&await Nt(gn,zt+1)===!1)break}}(qe.directory,0)};const Ft=async function(qe,nt){const[dt,Nt]=await Qe.getDirForFilename(qe,!0);let zt=await (await dt.getFileHandle(Nt,{create:!0})).createSyncAccessHandle(),gn=0,Rt,jr=!1;try{for(zt.truncate(0);(Rt=await nt())!==void 0;)Rt instanceof ArrayBuffer&&(Rt=new Uint8Array(Rt)),gn===0&&Rt.byteLength>=15&&(Ie.affirmDbHeader(Rt),jr=!0),zt.write(Rt,{at:gn}),gn+=Rt.byteLength;if((gn<512||gn%512!==0)&&et("Input size",gn,"is not correct for an SQLite database."),!jr){const We=new Uint8Array(20);zt.read(We,{at:0}),Ie.affirmDbHeader(We)}return zt.write(new Uint8Array([1,1]),{at:18}),gn}catch(We){throw await zt.close(),zt=void 0,await dt.removeEntry(Nt).catch(()=>{}),We}finally{zt&&await zt.close()}};if(Qe.importDb=async function(qe,nt){if(nt instanceof Function)return Ft(qe,nt);nt instanceof ArrayBuffer&&(nt=new Uint8Array(nt)),Ie.affirmIsDb(nt);const dt=nt.byteLength,[Nt,xt]=await Qe.getDirForFilename(qe,!0);let zt,gn=0;try{return zt=await (await Nt.getFileHandle(xt,{create:!0})).createSyncAccessHandle(),zt.truncate(0),gn=zt.write(nt,{at:0}),gn!=dt&&et("Expected to write "+dt+" bytes but wrote "+gn+"."),zt.write(new Uint8Array([1,1]),{at:18}),gn}catch(Rt){throw zt&&(await zt.close(),zt=void 0),await Nt.removeEntry(xt).catch(()=>{}),Rt}finally{zt&&await zt.close()}},y.oo1){const qe=function(...nt){const dt=y.oo1.DB.dbCtorHelper.normalizeArgs(...nt);dt.vfs=ce.$zName,y.oo1.DB.dbCtorHelper.call(this,dt)};qe.prototype=Object.create(y.oo1.DB.prototype),y.oo1.OpfsDb=qe,qe.importDb=Qe.importDb,y.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(ce.pointer,function(nt,dt){dt.capi.sqlite3_busy_timeout(nt,1e4)})}const Xt=function(){const qe=Te.scopedAllocPush(),nt=new Ge;try{const dt=nt.pointer,Nt=be.SQLITE_OPEN_CREATE|be.SQLITE_OPEN_READWRITE|be.SQLITE_OPEN_MAIN_DB,xt=Te.scopedAlloc(8),zt="/sanity/check/file"+Wt(8),gn=Te.scopedAllocCString(zt);let Rt;if(ie.s11n.serialize("This is \xe4 string."),Rt=ie.s11n.deserialize(),mt("deserialize() says:",Rt),Rt[0]!=="This is \xe4 string."&&et("String d13n error."),pt.xAccess(ce.pointer,gn,0,xt),Rt=Te.peek(xt,"i32"),mt("xAccess(",zt,") exists ?=",Rt),Rt=pt.xOpen(ce.pointer,gn,dt,Nt,xt),mt("open rc =",Rt,"state.sabOPView[xOpen] =",ie.sabOPView[ie.opIds.xOpen]),Rt!==0){Re("open failed with code",Rt);return}pt.xAccess(ce.pointer,gn,0,xt),Rt=Te.peek(xt,"i32"),Rt||et("xAccess() failed to detect file."),Rt=ot.xSync(nt.pointer,0),Rt&&et("sync failed w/ rc",Rt),Rt=ot.xTruncate(nt.pointer,1024),Rt&&et("truncate failed w/ rc",Rt),Te.poke(xt,0,"i64"),Rt=ot.xFileSize(nt.pointer,xt),Rt&&et("xFileSize failed w/ rc",Rt),mt("xFileSize says:",Te.peek(xt,"i64")),Rt=ot.xWrite(nt.pointer,gn,10,1),Rt&&et("xWrite() failed!");const jr=Te.scopedAlloc(16);Rt=ot.xRead(nt.pointer,jr,6,2),Te.poke(jr+6,0);let We=Te.cstrToJs(jr);mt("xRead() got:",We),We!=="sanity"&&et("Unexpected xRead() value."),pt.xSleep&&(mt("xSleep()ing before close()ing..."),pt.xSleep(ce.pointer,2e3),mt("waking up from xSleep()")),Rt=ot.xClose(dt),mt("xClose rc =",Rt,"sabOPView =",ie.sabOPView),mt("Deleting file:",zt),pt.xDelete(ce.pointer,gn,4660),pt.xAccess(ce.pointer,gn,0,xt),Rt=Te.peek(xt,"i32"),Rt&&et("Expecting 0 from xAccess(",zt,") after xDelete()."),Be("End of OPFS sanity checks.")}finally{nt.dispose(),Te.scopedAllocPop(qe)}};pe.onmessage=function({data:qe}){switch(qe.type){case"opfs-unavailable":st(new Error(qe.payload.join(" ")));break;case"opfs-async-loaded":pe.postMessage({type:"opfs-async-init",args:ie});break;case"opfs-async-inited":{if(Ee===!0)break;try{y.vfs.installVfs({io:{struct:X,methods:ot},vfs:{struct:ce,methods:pt}}),ie.sabOPView=new Int32Array(ie.sabOP),ie.sabFileBufView=new Uint8Array(ie.sabIO,0,ie.fileBufferSize),ie.sabS11nView=new Uint8Array(ie.sabIO,ie.sabS11nOffset,ie.sabS11nSize),Ot(),C.sanityChecks&&(Be("Running sanity checks because of opfs-sanity-check URL arg..."),Xt()),St()?navigator.storage.getDirectory().then(nt=>{pe.onerror=pe._originalOnError,delete pe._originalOnError,y.opfs=Qe,Qe.rootDirectory=nt,mt("End of OPFS sqlite3_vfs setup.",ce),ae()}).catch(st):ae()}catch(nt){Re(nt),st(nt)}break}default:{const nt="Unexpected message from the OPFS async worker: "+JSON.stringify(qe);Re(nt),st(new Error(nt));break}}}}))};S.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async N=>{try{let C=S.defaultProxyUri;return N.scriptInfo.sqlite3Dir&&(S.defaultProxyUri=N.scriptInfo.sqlite3Dir+C),S().catch(B=>{N.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",B.message)})}catch(C){return N.config.error("installOpfsVfs() exception:",C),Promise.reject(C)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(y){const S=y.util.toss,N=y.util.toss3,C=Object.create(null),B=y.capi,fe=y.util,me=y.wasm,Ke=4096,tt=512,at=4,mt=8,Be=tt+at,Re=tt,et=Be,be=Ke,Ie=B.SQLITE_OPEN_MAIN_DB|B.SQLITE_OPEN_MAIN_JOURNAL|B.SQLITE_OPEN_SUPER_JOURNAL|B.SQLITE_OPEN_WAL,Te=".opaque",Ze=()=>Math.random().toString(36).slice(2),Ge=new TextDecoder,je=new TextEncoder,Qe=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),St=[y.config.error,y.config.warn,y.config.log];y.config.log;const X=y.config.warn;y.config.error;const ce=new Map,Ee=lt=>ce.get(lt),st=(lt,_e)=>{_e?ce.set(lt,_e):ce.delete(lt)},ae=new Map,pe=lt=>ae.get(lt),K=(lt,_e)=>{_e?ae.set(lt,_e):ae.delete(lt)},re={xCheckReservedLock:function(lt,_e){const Pe=pe(lt);return Pe.log("xCheckReservedLock"),Pe.storeErr(),me.poke32(_e,1),0},xClose:function(lt){const _e=pe(lt);_e.storeErr();const Pe=_e.getOFileForS3File(lt);if(Pe)try{_e.log(`xClose ${Pe.path}`),_e.mapS3FileToOFile(lt,!1),Pe.sah.flush(),Pe.flags&B.SQLITE_OPEN_DELETEONCLOSE&&_e.deletePath(Pe.path)}catch(ot){return _e.storeErr(ot,B.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(lt){return B.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(lt,_e,Pe){return B.SQLITE_NOTFOUND},xFileSize:function(lt,_e){const Pe=pe(lt);Pe.log("xFileSize");const pt=Pe.getOFileForS3File(lt).sah.getSize()-be;return me.poke64(_e,BigInt(pt)),0},xLock:function(lt,_e){const Pe=pe(lt);Pe.log(`xLock ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xRead:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Ft=pt.getOFileForS3File(lt);pt.log(`xRead ${Ft.path} ${Pe} @ ${ot}`);try{const Xt=Ft.sah.read(me.heap8u().subarray(_e,_e+Pe),{at:be+Number(ot)});return Xt<Pe?(me.heap8u().fill(0,_e+Xt,_e+Pe),B.SQLITE_IOERR_SHORT_READ):0}catch(Xt){return pt.storeErr(Xt,B.SQLITE_IOERR)}},xSectorSize:function(lt){return Ke},xSync:function(lt,_e){const Pe=pe(lt);Pe.log(`xSync ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.flush(),0}catch(pt){return Pe.storeErr(pt,B.SQLITE_IOERR)}},xTruncate:function(lt,_e){const Pe=pe(lt);Pe.log(`xTruncate ${_e}`),Pe.storeErr();const ot=Pe.getOFileForS3File(lt);try{return ot.sah.truncate(be+Number(_e)),0}catch(pt){return Pe.storeErr(pt,B.SQLITE_IOERR)}},xUnlock:function(lt,_e){const Pe=pe(lt);Pe.log("xUnlock");const ot=Pe.getOFileForS3File(lt);return ot.lockType=_e,0},xWrite:function(lt,_e,Pe,ot){const pt=pe(lt);pt.storeErr();const Ft=pt.getOFileForS3File(lt);pt.log(`xWrite ${Ft.path} ${Pe} ${ot}`);try{const Xt=Ft.sah.write(me.heap8u().subarray(_e,_e+Pe),{at:be+Number(ot)});return Pe===Xt?0:S("Unknown write() failure.")}catch(Xt){return pt.storeErr(Xt,B.SQLITE_IOERR)}}},ie=new B.sqlite3_io_methods;ie.$iVersion=1,y.vfs.installVfs({io:{struct:ie,methods:re}});const Le={xAccess:function(lt,_e,Pe,ot){const pt=Ee(lt);pt.storeErr();try{const Ft=pt.getPath(_e);me.poke32(ot,pt.hasFilename(Ft)?1:0)}catch{me.poke32(ot,0)}return 0},xCurrentTime:function(lt,_e){return me.poke(_e,2440587.5+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(lt,_e){return me.poke(_e,2440587.5*864e5+new Date().getTime(),"i64"),0},xDelete:function(lt,_e,Pe){const ot=Ee(lt);ot.log(`xDelete ${me.cstrToJs(_e)}`),ot.storeErr();try{return ot.deletePath(ot.getPath(_e)),0}catch(pt){return ot.storeErr(pt),B.SQLITE_IOERR_DELETE}},xFullPathname:function(lt,_e,Pe,ot){return me.cstrncpy(ot,_e,Pe)<Pe?0:B.SQLITE_CANTOPEN},xGetLastError:function(lt,_e,Pe){const ot=Ee(lt),pt=ot.popErr();if(ot.log(`xGetLastError ${_e} e =`,pt),pt){const Ft=me.scopedAllocPush();try{const[Xt,qe]=me.scopedAllocCString(pt.message,!0);me.cstrncpy(Pe,Xt,_e),qe>_e&&me.poke8(Pe+_e-1,0)}catch{return B.SQLITE_NOMEM}finally{me.scopedAllocPop(Ft)}}return pt?pt.sqlite3Rc||B.SQLITE_IOERR:0},xOpen:function(_e,Pe,ot,pt,Ft){const Xt=Ee(_e);try{Xt.log(`xOpen ${me.cstrToJs(Pe)} ${pt}`);const qe=Pe&&me.peek8(Pe)?Xt.getPath(Pe):Ze();let nt=Xt.getSAHForPath(qe);!nt&&pt&B.SQLITE_OPEN_CREATE&&(Xt.getFileCount()<Xt.getCapacity()?(nt=Xt.nextAvailableSAH(),Xt.setAssociatedPath(nt,qe,pt)):S("SAH pool is full. Cannot create file",qe)),nt||S("file not found:",qe);const dt={path:qe,flags:pt,sah:nt};Xt.mapS3FileToOFile(ot,dt),dt.lockType=B.SQLITE_LOCK_NONE;const Nt=new B.sqlite3_file(ot);return Nt.$pMethods=ie.pointer,Nt.dispose(),me.poke32(Ft,pt),0}catch(qe){return Xt.storeErr(qe),B.SQLITE_CANTOPEN}}},it=function(lt){y.capi.sqlite3_vfs_find(lt)&&N("VFS name is already registered:",lt);const _e=new B.sqlite3_vfs,Pe=B.sqlite3_vfs_find(null),ot=Pe?new B.sqlite3_vfs(Pe):null;return _e.$iVersion=2,_e.$szOsFile=B.sqlite3_file.structInfo.sizeof,_e.$mxPathname=tt,_e.addOnDispose(_e.$zName=me.allocCString(lt),()=>st(_e.pointer,0)),ot&&(_e.$xRandomness=ot.$xRandomness,_e.$xSleep=ot.$xSleep,ot.dispose()),!_e.$xRandomness&&!Le.xRandomness&&(Le.xRandomness=function(pt,Ft,Xt){const qe=me.heap8u();let nt=0;for(;nt<Ft;++nt)qe[Xt+nt]=Math.random()*255e3&255;return nt}),!_e.$xSleep&&!Le.xSleep&&(Le.xSleep=(pt,Ft)=>0),y.vfs.installVfs({vfs:{struct:_e,methods:Le}}),_e};class Ot{vfsDir;#e;#t;#n;#r=new Map;#i=new Map;#s=new Set;#o=new Map;#a=new Uint8Array(Be);#c;#l;#u;constructor(_e=Object.create(null)){this.#u=_e.verbosity??Qe.verbosity,this.vfsName=_e.name||Qe.name,this.#l=it(this.vfsName),st(this.#l.pointer,this),this.vfsDir=_e.directory||"."+this.vfsName,this.#c=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(_e.clearOnInit??Qe.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(_e.initialCapacity||Qe.initialCapacity)})}#d(_e,...Pe){this.#u>_e&&St[_e](this.vfsName+":",...Pe)}log(..._e){this.#d(2,..._e)}warn(..._e){this.#d(1,..._e)}error(..._e){this.#d(0,..._e)}getVfs(){return this.#l}getCapacity(){return this.#r.size}getFileCount(){return this.#i.size}getFileNames(){const _e=[],Pe=this.#i.keys();for(const ot of Pe)_e.push(ot);return _e}async addCapacity(_e){for(let Pe=0;Pe<_e;++Pe){const ot=Ze(),Ft=await (await this.#t.getFileHandle(ot,{create:!0})).createSyncAccessHandle();this.#r.set(Ft,ot),this.setAssociatedPath(Ft,"",0)}return this.getCapacity()}async reduceCapacity(_e){let Pe=0;for(const ot of Array.from(this.#s)){if(Pe===_e||this.getFileCount()===this.getCapacity())break;const pt=this.#r.get(ot);ot.close(),await this.#t.removeEntry(pt),this.#r.delete(ot),this.#s.delete(ot),++Pe}return Pe}releaseAccessHandles(){for(const _e of this.#r.keys())_e.close();this.#r.clear(),this.#i.clear(),this.#s.clear()}async acquireAccessHandles(_e){const Pe=[];for await(const[ot,pt]of this.#t)pt.kind==="file"&&Pe.push([ot,pt]);return Promise.all(Pe.map(async([ot,pt])=>{try{const Ft=await pt.createSyncAccessHandle();if(this.#r.set(Ft,ot),_e)Ft.truncate(be),this.setAssociatedPath(Ft,"",0);else{const Xt=this.getAssociatedPath(Ft);Xt?this.#i.set(Xt,Ft):this.#s.add(Ft)}}catch(Ft){throw this.storeErr(Ft),this.releaseAccessHandles(),Ft}}))}getAssociatedPath(_e){_e.read(this.#a,{at:0});const Pe=this.#c.getUint32(Re);if(this.#a[0]&&(Pe&B.SQLITE_OPEN_DELETEONCLOSE||!(Pe&Ie)))return X(`Removing file with unexpected flags ${Pe.toString(16)}`,this.#a),this.setAssociatedPath(_e,"",0),"";const ot=new Uint32Array(mt/4);_e.read(ot,{at:et});const pt=this.computeDigest(this.#a);if(ot.every((Ft,Xt)=>Ft===pt[Xt])){const Ft=this.#a.findIndex(Xt=>Xt===0);return Ft===0&&_e.truncate(be),Ft?Ge.decode(this.#a.subarray(0,Ft)):""}else return X("Disassociating file with bad digest."),this.setAssociatedPath(_e,"",0),""}setAssociatedPath(_e,Pe,ot){const pt=je.encodeInto(Pe,this.#a);tt<=pt.written+1&&S("Path too long:",Pe),this.#a.fill(0,pt.written,tt),this.#c.setUint32(Re,ot);const Ft=this.computeDigest(this.#a);_e.write(this.#a,{at:0}),_e.write(Ft,{at:et}),_e.flush(),Pe?(this.#i.set(Pe,_e),this.#s.delete(_e)):(_e.truncate(be),this.#s.add(_e))}computeDigest(_e){let Pe=0xdeadbeef,ot=0x41c6ce57;for(const pt of _e)Pe=31*Pe+pt*307,ot=31*ot+pt*307;return new Uint32Array([Pe>>>0,ot>>>0])}async reset(_e){await this.isReady;let Pe=await navigator.storage.getDirectory(),ot;for(const pt of this.vfsDir.split("/"))pt&&(ot=Pe,Pe=await Pe.getDirectoryHandle(pt,{create:!0}));return this.#e=Pe,this.#n=ot,this.#t=await this.#e.getDirectoryHandle(Te,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(_e)}getPath(_e){return me.isPtr(_e)&&(_e=me.cstrToJs(_e)),(_e instanceof URL?_e:new URL(_e,"file://localhost/")).pathname}deletePath(_e){const Pe=this.#i.get(_e);return Pe&&(this.#i.delete(_e),this.setAssociatedPath(Pe,"",0)),!!Pe}storeErr(_e,Pe){return _e&&(_e.sqlite3Rc=Pe||B.SQLITE_IOERR,this.error(_e)),this.$error=_e,Pe}popErr(){const _e=this.$error;return this.$error=void 0,_e}nextAvailableSAH(){const[_e]=this.#s.keys();return _e}getOFileForS3File(_e){return this.#o.get(_e)}mapS3FileToOFile(_e,Pe){Pe?(this.#o.set(_e,Pe),K(_e,this)):(this.#o.delete(_e),K(_e,!1))}hasFilename(_e){return this.#i.has(_e)}getSAHForPath(_e){return this.#i.get(_e)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;B.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose(),delete C[this.vfsName];try{this.releaseAccessHandles(),await this.#e.removeEntry(Te,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(_e){y.config.error(this.vfsName,"removeVfs() failed:",_e)}return!0}exportFile(_e){const Pe=this.#i.get(_e)||S("File not found:",_e),ot=Pe.getSize()-be,pt=new Uint8Array(ot>0?ot:0);if(ot>0){const Ft=Pe.read(pt,{at:be});Ft!=ot&&S("Expected to read "+ot+" bytes but read "+Ft+".")}return pt}async importDbChunked(_e,Pe){const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to.");ot.truncate(0);let pt=0,Ft,Xt=!1;try{for(;(Ft=await Pe())!==void 0;)Ft instanceof ArrayBuffer&&(Ft=new Uint8Array(Ft)),pt===0&&Ft.byteLength>=15&&(fe.affirmDbHeader(Ft),Xt=!0),ot.write(Ft,{at:be+pt}),pt+=Ft.byteLength;if((pt<512||pt%512!==0)&&S("Input size",pt,"is not correct for an SQLite database."),!Xt){const qe=new Uint8Array(20);ot.read(qe,{at:0}),fe.affirmDbHeader(qe)}ot.write(new Uint8Array([1,1]),{at:be+18})}catch(qe){throw this.setAssociatedPath(ot,"",0),qe}return this.setAssociatedPath(ot,_e,B.SQLITE_OPEN_MAIN_DB),pt}importDb(_e,Pe){if(Pe instanceof ArrayBuffer)Pe=new Uint8Array(Pe);else if(Pe instanceof Function)return this.importDbChunked(_e,Pe);const ot=this.#i.get(_e)||this.nextAvailableSAH()||S("No available handles to import to."),pt=Pe.byteLength;(pt<512||pt%512!=0)&&S("Byte array size is invalid for an SQLite db.");const Ft="SQLite format 3";for(let qe=0;qe<Ft.length;++qe)Ft.charCodeAt(qe)!==Pe[qe]&&S("Input does not contain an SQLite database header.");const Xt=ot.write(Pe,{at:be});return Xt!=pt?(this.setAssociatedPath(ot,"",0),S("Expected to write "+pt+" bytes but wrote "+Xt+".")):(ot.write(new Uint8Array([1,1]),{at:be+18}),this.setAssociatedPath(ot,_e,B.SQLITE_OPEN_MAIN_DB)),Xt}}class Wt{#e;constructor(_e){this.#e=_e,this.vfsName=_e.vfsName}async addCapacity(_e){return this.#e.addCapacity(_e)}async reduceCapacity(_e){return this.#e.reduceCapacity(_e)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(_e){const Pe=this.#e.getCapacity();return Pe<_e?this.#e.addCapacity(_e-Pe):Pe}exportFile(_e){return this.#e.exportFile(_e)}importDb(_e,Pe){return this.#e.importDb(_e,Pe)}async wipeFiles(){return this.#e.reset(!0)}unlink(_e){return this.#e.deletePath(_e)}async removeVfs(){return this.#e.removeVfs()}}const Yt=async()=>{const lt=await navigator.storage.getDirectory(),_e=".opfs-sahpool-sync-check-"+Ze(),pt=(await (await lt.getFileHandle(_e,{create:!0})).createSyncAccessHandle()).close();return await pt,await lt.removeEntry(_e),pt?.then&&S("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};y.installOpfsSAHPoolVfs=async function(lt=Object.create(null)){lt=Object.assign(Object.create(null),Qe,lt||{});const _e=lt.name;if(lt.$testThrowPhase1)throw lt.$testThrowPhase1;if(C[_e])try{return await C[_e]}catch(Pe){if(lt.forceReinitIfPreviouslyFailed)delete C[_e];else throw Pe}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?C[_e]=Promise.reject(new Error("Missing required OPFS APIs.")):C[_e]=Yt().then(async function(){if(lt.$testThrowPhase2)throw lt.$testThrowPhase2;const Pe=new Ot(lt);return Pe.isReady.then(async()=>{const ot=new Wt(Pe);if(y.oo1){const pt=y.oo1,Ft=Pe.getVfs(),Xt=function(...qe){const nt=pt.DB.dbCtorHelper.normalizeArgs(...qe);nt.vfs=Ft.$zName,pt.DB.dbCtorHelper.call(this,nt)};Xt.prototype=Object.create(pt.DB.prototype),ot.OpfsSAHPoolDb=Xt}return Pe.log("VFS initialized."),ot}).catch(async ot=>{throw await Pe.removeVfs().catch(()=>{}),ot})}).catch(Pe=>C[_e]=Promise.reject(Pe))}}),typeof g<"u"){const y=Object.assign(Object.create(null),{exports:typeof he>"u"?g.asm:he,memory:g.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=y;let S;try{S=globalThis.sqlite3ApiBootstrap()}catch(N){throw console.error("sqlite3ApiBootstrap() error:",N),N}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}g.sqlite3=S}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n=o,n}})();const d7=function(){const t=gN;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();gN=d7;const f7=gN;globalThis.sqlite3Worker1Promiser=function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const h=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=h}else e=Object.assign(Object.create(null),t.defaultConfig,e);const n=Object.create(null),r=function(){},i=e.onerror||r,s=e.debug||r,o=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(h){return h.type+"#"+(o[h.type]=(o[h.type]||0)+1)},u=(...h)=>{throw new Error(h.join(" "))};e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let f,p;return e.worker.onmessage=function(h){h=h.data,s("worker1.onmessage",h);let b=n[h.messageId];if(!b){if(h&&h.type==="sqlite3-api"&&h.result==="worker1-ready"){e.onready&&e.onready(p);return}if(b=n[h.type],b&&b.onrow){b.onrow(h);return}e.onunhandled?e.onunhandled(arguments[0]):i("sqlite3Worker1Promiser() unhandled worker message:",h);return}switch(delete n[h.messageId],h.type){case"error":b.reject(h);return;case"open":f||(f=h.dbId);break;case"close":h.dbId===f&&(f=void 0);break}try{b.resolve(h)}catch(x){b.reject(x)}},p=function(){let h;arguments.length===1?h=arguments[0]:arguments.length===2?(h=Object.create(null),h.type=arguments[0],h.args=arguments[1],h.dbId=h.args.dbId):u("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!h.dbId&&h.type!=="open"&&(h.dbId=f),h.messageId=l(h),h.departureTime=performance.now();const b=Object.create(null);b.message=h;let x;h.type==="exec"&&h.args&&(typeof h.args.callback=="function"?(x=h.messageId+":row",b.onrow=h.args.callback,h.args.callback=x,n[x]=b):typeof h.args.callback=="string"&&u("exec callback may not be a string when using the Promise interface."));let _=new Promise(function(E,I){b.resolve=E,b.reject=I,n[h.messageId]=b,s("Posting",h.type,"message to Worker dbId="+(f||"default")+":",h),e.worker.postMessage(h)});return x&&(_=_.finally(()=>delete n[x])),_}};globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-BF9rosUC.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(i){try{e&&await e(i),n.resolve(i)}catch(s){n.reject(s)}}});const r=new Promise(function(i,s){n.resolve=i,n.reject=s});try{this.original(t)}catch(i){n.reject(i)}return r}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function OO(){let t,e;return{lock:async()=>{for(;t;)await t;t=new Promise(i=>{e=i})},unlock:async()=>{const i=e;t=void 0,e=void 0,i?.()}}}function b0(t,e){const n={rows:[],columns:[]},r=t.exec({sql:e.sql,bind:e.params,returnValue:"resultRows",rowMode:"array",columnNames:n.columns});switch(e.method){case"run":break;case"get":n.rows=r[0]??[];break;case"all":default:n.rows=r;break}return n}function CD(t){const e=t.split(/[\\/]/).filter(s=>s!==""),n=e.pop();if(!n)throw new Error("Database path is invalid.");const r=["journal","wal","shm"].map(s=>`${n}-${s}`);return{directories:e,fileName:n,tempFileNames:r,getDirectoryHandle:async()=>{let s=await navigator.storage.getDirectory();for(let o of e)s=await s.getDirectoryHandle(o);return s}}}async function LE(t,e){let n;if(t instanceof Blob?n=t.stream():n=t,n instanceof ReadableStream&&e){const i=n.getReader();switch(e){case"callback":return async()=>(await i.read()).value;case"buffer":const s=[];let o=!1;for(;!o;){const p=await i.read();p.value&&s.push(p.value),o=p.done}const l=s.reduce((p,h)=>p+h.length,0),u=new Uint8Array(l);let f=0;return s.forEach(p=>{u.set(p,f),f+=p.length}),u}}else return n}class p7{constructor(e){Object.defineProperty(this,"sqlite3",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"db",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dbStorageType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"pointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userFunctions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"initMutex",{enumerable:!0,configurable:!0,writable:!0,value:OO()}),Object.defineProperty(this,"transactionMutex",{enumerable:!0,configurable:!0,writable:!0,value:OO()}),Object.defineProperty(this,"transactionKey",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onmessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"init",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;await this.initMutex.lock();const{databasePath:i,readOnly:s,verbose:o}=this.config,l=[s===!0?"r":"cw",o===!0?"t":""].join("");try{this.sqlite3||(this.sqlite3=await f7()),this.db&&this.destroy(),"opfs"in this.sqlite3&&i!==":memory:"?(this.db=new this.sqlite3.oo1.OpfsDb(i,l),this.dbStorageType="opfs"):(this.db=new this.sqlite3.oo1.DB(i,l),this.dbStorageType="memory",i!==":memory:"&&console.warn(`The origin private file system is not available, so ${i} will not be persisted. Make sure your web server is configured to use the correct HTTP response headers (See https://sqlocal.dallashoffman.com/guide/setup#cross-origin-isolation).`)),this.dbStorageType!=="memory"&&(this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${i})`),this.reinitChannel.onmessage=u=>{this.config.clientKey!==u.data.clientKey&&this.init(u.data.reason)}),this.userFunctions.forEach(this.initUserFunction),this.execInitStatements(),this.emitMessage({type:"event",event:"connect",reason:r})}catch(u){this.emitMessage({type:"error",error:u,queryKey:null}),this.destroy()}finally{await this.initMutex.unlock()}}}),Object.defineProperty(this,"postMessage",{enumerable:!0,configurable:!0,writable:!0,value:async(r,i)=>{const s=r instanceof MessageEvent?r.data:r;switch(await this.initMutex.lock(),s.type){case"config":this.editConfig(s);break;case"query":case"batch":case"transaction":this.exec(s);break;case"function":this.createUserFunction(s);break;case"getinfo":this.getDatabaseInfo(s);break;case"import":this.importDb(s);break;case"export":this.exportDb(s);break;case"delete":this.deleteDb(s);break;case"destroy":this.destroy(s);break}await this.initMutex.unlock()}}),Object.defineProperty(this,"emitMessage",{enumerable:!0,configurable:!0,writable:!0,value:(r,i=[])=>{this.onmessage&&this.onmessage(r,i)}}),Object.defineProperty(this,"editConfig",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.config=r.config,this.init("initial")}}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(this.db)try{const i={type:"data",queryKey:r.queryKey,data:[]};switch(r.type){case"query":const s=this.transactionKey!==null&&this.transactionKey===r.transactionKey;try{s||await this.transactionMutex.lock();const o=b0(this.db,r);i.data.push(o)}finally{s||await this.transactionMutex.unlock()}break;case"batch":try{await this.transactionMutex.lock(),this.db.transaction(o=>{for(let l of r.statements){const u=b0(o,l);i.data.push(u)}})}finally{await this.transactionMutex.unlock()}break;case"transaction":if(r.action==="begin"&&(await this.transactionMutex.lock(),this.transactionKey=r.transactionKey,this.db.exec({sql:"BEGIN"})),(r.action==="commit"||r.action==="rollback")&&this.transactionKey!==null&&this.transactionKey===r.transactionKey){const o=r.action==="commit"?"COMMIT":"ROLLBACK";this.db.exec({sql:o}),this.transactionKey=null,await this.transactionMutex.unlock()}break}this.emitMessage(i)}catch(i){this.emitMessage({type:"error",error:i,queryKey:r.queryKey})}}}),Object.defineProperty(this,"execInitStatements",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.db&&this.config.onInitStatements)for(let r of this.config.onInitStatements)b0(this.db,r)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{try{const i=this.config.databasePath,s=this.dbStorageType,o=s!==void 0?s!=="memory"?await navigator.storage?.persisted():!1:void 0,u=this.db?.exec({sql:"SELECT page_count * page_size AS size FROM pragma_page_count(), pragma_page_size()",returnValue:"resultRows",rowMode:"array"})?.[0]?.[0],f=typeof u=="number"?u:void 0;this.emitMessage({type:"info",queryKey:r.queryKey,info:{databasePath:i,databaseSizeBytes:f,storageType:s,persisted:o}})}catch(i){this.emitMessage({type:"error",queryKey:r.queryKey,error:i})}}}),Object.defineProperty(this,"createUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{const{functionName:i,functionType:s,queryKey:o}=r;let l;if(this.userFunctions.has(i)){this.emitMessage({type:"error",error:new Error(`A user-defined function with the name "${i}" has already been created for this SQLocal instance.`),queryKey:o});return}s==="callback"?l=(...u)=>{this.emitMessage({type:"callback",name:i,args:u})}:l=this.proxy[`_sqlocal_func_${i}`];try{this.initUserFunction({type:s,name:i,func:l}),this.emitMessage({type:"success",queryKey:o})}catch(u){this.emitMessage({type:"error",error:u,queryKey:o})}}}),Object.defineProperty(this,"initUserFunction",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.createFunction({name:r.name,xFunc:(i,...s)=>r.func(...s),arity:-1}),this.userFunctions.set(r.name,r))}}),Object.defineProperty(this,"importDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.sqlite3||!this.config.databasePath||!this.db)return;const{queryKey:i,database:s}=r;let o=!1;try{if(this.dbStorageType==="opfs"){this.destroy();const l=await LE(s,"callback");await this.sqlite3.oo1.OpfsDb.importDb(this.config.databasePath,l)}else{const l=await LE(s,"buffer"),u=this.sqlite3.wasm.allocFromTypedArray(l);this.pointers.push(u);const f=this.sqlite3.capi.sqlite3_deserialize(this.db,"main",u,l.byteLength,l.byteLength,this.config.readOnly?this.sqlite3.capi.SQLITE_DESERIALIZE_READONLY:this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(f),this.execInitStatements()}}catch(l){this.emitMessage({type:"error",error:l,queryKey:i}),o=!0}finally{this.dbStorageType!=="memory"&&await this.init("overwrite")}o||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"exportDb",{enumerable:!0,configurable:!0,writable:!0,value:r=>{if(!this.sqlite3||!this.db)return;const{queryKey:i}=r;try{const s=this.sqlite3.capi.sqlite3_js_db_export(this.db);this.emitMessage({type:"buffer",queryKey:i,buffer:s},[s])}catch(s){this.emitMessage({type:"error",error:s,queryKey:i})}}}),Object.defineProperty(this,"deleteDb",{enumerable:!0,configurable:!0,writable:!0,value:async r=>{if(!this.config.databasePath)return;const{queryKey:i}=r;let s=!1;try{if(this.dbStorageType==="opfs"){const{getDirectoryHandle:o,fileName:l,tempFileNames:u}=CD(this.config.databasePath),f=await o(),p=[l,...u];this.destroy(),await Promise.all(p.map(async h=>f.removeEntry(h).catch(b=>{if(!(b instanceof DOMException&&b.name==="NotFoundError"))throw b})))}else this.destroy()}catch(o){this.emitMessage({type:"error",error:o,queryKey:i}),s=!0}finally{await this.init("delete")}s||this.emitMessage({type:"success",queryKey:i})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:r=>{this.db&&(this.db.exec({sql:"PRAGMA optimize"}),this.db.close(),this.db=void 0,this.dbStorageType=void 0),this.reinitChannel&&(this.reinitChannel.close(),this.reinitChannel=void 0),this.pointers.forEach(i=>this.sqlite3?.wasm.dealloc(i)),this.pointers=[],r&&this.emitMessage({type:"success",queryKey:r.queryKey})}});const n=e?globalThis:mN(globalThis);this.proxy=n,this.init("initial")}}function Wv(t,...e){return{sql:t.join("?"),params:e}}function h7(t){return!t.some(e=>!Array.isArray(e))}function x0(t,e){let n;return h7(t)?n=t:n=[t],n.map(r=>{const i={};return e.forEach((s,o)=>{i[s]=r[o]}),i})}function m7(t){return typeof t=="object"&&t!==null&&"getSQL"in t&&typeof t.getSQL=="function"}function g7(t){return typeof t=="object"&&t!==null&&"sql"in t&&typeof t.sql=="string"&&"params"in t}function y7(t){if(typeof t=="function"&&(t=t(Wv)),m7(t))try{if(!("toSQL"in t&&typeof t.toSQL=="function"))throw 1;const r=t.toSQL();if(!g7(r))throw 2;return r}catch{throw new Error("The passed statement could not be parsed.")}const e=t.sql;let n=[];return"params"in t?n=t.params:"parameters"in t&&(n=t.parameters),{sql:e,params:n}}function w0(){return crypto.randomUUID()}function RO(t,e){let n;return typeof t=="string"?n={sql:t,params:e}:n=Wv(t,...e),n}async function Kg(t,e,n,r){return!e&&"locks"in navigator?navigator.locks.request(`_sqlocal_mutation_(${n.databasePath})`,{mode:t},r):r()}class v7{constructor(e){Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isDestroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"bypassMutationLock",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"userCallbacks",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"queriesInProgress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"proxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reinitChannel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"processMessageEvent",{enumerable:!0,configurable:!0,writable:!0,value:o=>{const l=o instanceof MessageEvent?o.data:o,u=this.queriesInProgress;switch(l.type){case"success":case"data":case"buffer":case"info":case"error":if(l.queryKey&&u.has(l.queryKey)){const[p,h]=u.get(l.queryKey);l.type==="error"?h(l.error):p(l),u.delete(l.queryKey)}else if(l.type==="error")throw l.error;break;case"callback":const f=this.userCallbacks.get(l.name);f&&f(...l.args??[]);break;case"event":this.config.onConnect?.(l.reason);break}}}),Object.defineProperty(this,"createQuery",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Kg("shared",this.bypassMutationLock||o.type==="import"||o.type==="delete",this.config,async()=>{if(this.isDestroyed===!0)throw new Error("This SQLocal client has been destroyed. You will need to initialize a new client in order to make further queries.");const l=w0();switch(o.type){case"import":this.processor.postMessage({...o,queryKey:l},[o.database]);break;default:this.processor.postMessage({...o,queryKey:l});break}return new Promise((u,f)=>{this.queriesInProgress.set(l,[u,f])})})}),Object.defineProperty(this,"exec",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l,u="all",f)=>{const p=await this.createQuery({type:"query",transactionKey:f,sql:o,params:l,method:u}),h={rows:[],columns:[]};return p.type==="data"&&(h.rows=p.data[0]?.rows??[],h.columns=p.data[0]?.columns??[]),h}}),Object.defineProperty(this,"execBatch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=await this.createQuery({type:"batch",statements:o}),u=new Array(o.length).fill({rows:[],columns:[]});return l.type==="data"&&l.data.forEach((f,p)=>{u[p]=f}),u}}),Object.defineProperty(this,"sql",{enumerable:!0,configurable:!0,writable:!0,value:async(o,...l)=>{const u=RO(o,l),{rows:f,columns:p}=await this.exec(u.sql,u.params,"all");return x0(f,p)}}),Object.defineProperty(this,"batch",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{const l=o(Wv);return(await this.execBatch(l)).map(({rows:f,columns:p})=>x0(f,p))}}),Object.defineProperty(this,"beginTransaction",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=w0();await this.createQuery({type:"transaction",transactionKey:o,action:"begin"});const l=async h=>{const b=y7(h),{rows:x,columns:_}=await this.exec(b.sql,b.params,"all",o);return x0(x,_)};return{query:l,sql:async(h,...b)=>{const x=RO(h,b);return await l(x)},commit:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"commit"})},rollback:async()=>{await this.createQuery({type:"transaction",transactionKey:o,action:"rollback"})}}}}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:async o=>Kg("exclusive",!1,this.config,async()=>{let l;this.bypassMutationLock=!0;try{l=await this.beginTransaction();const u=await o({sql:l.sql,query:l.query});return await l.commit(),u}catch(u){throw await l?.rollback(),u}finally{this.bypassMutationLock=!1}})}),Object.defineProperty(this,"createCallbackFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await this.createQuery({type:"function",functionName:o,functionType:"callback"}),this.userCallbacks.set(o,l)}}),Object.defineProperty(this,"createScalarFunction",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{const u=`_sqlocal_func_${o}`;this.proxy===globalThis&&(this.proxy[u]=l),await this.createQuery({type:"function",functionName:o,functionType:"scalar"}),this.proxy!==globalThis&&(this.proxy[u]=l)}}),Object.defineProperty(this,"getDatabaseInfo",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{const o=await this.createQuery({type:"getinfo"});if(o.type==="info")return o.info;throw new Error("The database failed to return valid information.")}}),Object.defineProperty(this,"getDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{let o,l;const{storageType:u}=await this.getDatabaseInfo();if(u==="opfs"){const f=CD(this.config.databasePath),{directories:p,getDirectoryHandle:h}=f;o=f.fileName;const b=`backup-${Date.now()}--${o}`,x=`${p.join("/")}/${b}`;await this.exec("VACUUM INTO ?",[x]);const _=await h();l=await (await (await _.getFileHandle(b)).getFile()).arrayBuffer(),await _.removeEntry(b)}else{const f=await this.createQuery({type:"export"});if(f.type==="buffer")o="database.sqlite3",l=f.buffer;else throw new Error("The database failed to export.")}return new File([l],o,{type:"application/x-sqlite3"})}}),Object.defineProperty(this,"overwriteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async(o,l)=>{await Kg("exclusive",!1,this.config,async()=>{try{const u=await LE(o);await this.createQuery({type:"import",database:u}),typeof l=="function"&&(this.bypassMutationLock=!0,await l()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"overwrite"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"deleteDatabaseFile",{enumerable:!0,configurable:!0,writable:!0,value:async o=>{await Kg("exclusive",!1,this.config,async()=>{try{await this.createQuery({type:"delete"}),typeof o=="function"&&(this.bypassMutationLock=!0,await o()),this.reinitChannel.postMessage({clientKey:this.clientKey,reason:"delete"})}finally{this.bypassMutationLock=!1}})}}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:async()=>{await this.createQuery({type:"destroy"}),this.processor instanceof Worker&&(this.processor.removeEventListener("message",this.processMessageEvent),this.processor.terminate()),this.queriesInProgress.clear(),this.userCallbacks.clear(),this.reinitChannel.close(),this.isDestroyed=!0}});const n=typeof e=="string"?{databasePath:e}:e,{onInit:r,onConnect:i,...s}=n;this.config=n,this.clientKey=w0(),this.reinitChannel=new BroadcastChannel(`_sqlocal_reinit_(${s.databasePath})`),typeof globalThis.Worker<"u"&&s.databasePath!==":memory:"?(this.processor=new Worker(new URL("/assets/worker-DxuAzsZq.js",import.meta.url),{type:"module"}),this.processor.addEventListener("message",this.processMessageEvent),this.proxy=mN(this.processor)):(this.processor=new p7(!0),this.processor.onmessage=o=>this.processMessageEvent(o),this.proxy=globalThis),this.processor.postMessage({type:"config",config:{...s,clientKey:this.clientKey,onInitStatements:r?.(Wv)??[]}})}}class b7 extends v7{constructor(){super(...arguments),Object.defineProperty(this,"dialect",{enumerable:!0,configurable:!0,writable:!0,value:{createAdapter:()=>new xH,createDriver:()=>new x7(this),createIntrospector:e=>new bH(e),createQueryCompiler:()=>new gH}})}}class x7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e})}async init(){}async acquireConnection(){return new w7(this.client)}async releaseConnection(){}async beginTransaction(e){e.transaction=await this.client.beginTransaction()}async commitTransaction(e){await e.transaction?.commit(),e.transaction=null}async rollbackTransaction(e){await e.transaction?.rollback(),e.transaction=null}async destroy(){await this.client.destroy()}}class w7{constructor(e){Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"transaction",{enumerable:!0,configurable:!0,writable:!0,value:null})}async executeQuery(e){let n;return this.transaction===null?n=await this.client.sql(e.sql,...e.parameters):n=await this.transaction.query(e),{rows:n}}async *streamQuery(){throw new Error("SQLite3 does not support streaming.")}}const _7=({database:t,bootstrap:e})=>{const{dialect:n}=new b7({databasePath:`${t}.sqlite3`,onInit(i){return[i`PRAGMA foreign_keys = ON;`]}}),r=new Q1({dialect:n});return{kysely:r,async bootstrap(){return e({kysely:r})}}},Ci=vn({slot:{base:["border","border-gray-300","rounded-md","p-4","flex","flex-col","gap-2","items-center"],input:["w-full","border","border-gray-300","rounded-md","p-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"]},variant:{isLoading:{true:[]},isSubmitting:{true:[]}},match:[{if:{isSubmitting:!0},then:{base:["opacity-50","pointer-events-none","select-none"]}}],defaults:{isLoading:!1,isSubmitting:!1}}),S7="icon-[material-symbols--error-outline]",E7=vn({slot:{base:["flex","flex-row","gap-1","items-center","text-red-600","p-2"]},variant:{highlight:{true:[]},compact:{true:[]}},match:[{if:{highlight:!0},then:{base:["bg-red-100","p-2","font-bold","border","border-red-200","rounded-md","w-full"]}},{if:{compact:!0},then:{base:["p-0"]}}],defaults:{highlight:!1,compact:!1}}),mi=({error:t,variant:e,tva:n=E7,css:r})=>{const i=n({...e,css:r}).slots;return t?.message?d.jsxs("div",{className:i.base(),children:[d.jsx(rn,{icon:S7}),d.jsx("span",{children:so.rich(t.message)})]}):null},N7=vn({slot:{base:["flex","flex-col","gap-1","w-full"],input:[]},variant:{required:{true:[]},disabled:{true:[]},isSubmitting:{true:[]},isLoading:{true:[]},isError:{true:[]}},match:[{if:{isError:!0},then:{base:["text-red-600"]}},{if:{required:!0},then:{base:["text-emerald-600","font-bold"]}}],defaults:{required:!1,disabled:!1,isSubmitting:!1,isLoading:!1,isError:!1}}),En=({label:t,hint:e,required:n=!1,formState:r,name:i,children:s,variant:o,tva:l=N7,css:u})=>{const f=l({isSubmitting:r.isSubmitting,isLoading:r.isLoading,isError:!!r.errors[i],required:n,...o,css:u}).slots;return d.jsxs("div",{className:f.base(),children:[d.jsxs("div",{className:"flex flex-row justify-between",children:[t?d.jsx("label",{htmlFor:i,children:t}):null,d.jsx(mi,{variant:{compact:!0},error:r.errors[i]})]}),e?d.jsx("div",{className:"text-sm italic",children:e}):null,d.jsx("div",{className:f.input(),children:s})]})},bs=({form:t,mutation:e})=>{const n=t.handleSubmit(async r=>e.mutateAsync(r,{onError:i=>{Z1({error:i,errors:[j1({error:i,schema:J1,onError:({data:s})=>{t.setError("root",{message:s.message})}})],onError:s=>{t.setError("root",{message:s.message})}})}}).catch(()=>{}));return r=>{r.stopPropagation(),n(r)}};function k7(t,e,n,r={leading:!1}){const[i,s]=Q.useState(t),[o,l]=Q.useState(t),u=Q.useRef(null),f=Q.useRef(!0),p=()=>window.clearTimeout(u.current||void 0);Q.useEffect(()=>p,[]),Q.useEffect(()=>{e(i)},[i]),Q.useEffect(()=>{l(t),s(t)},[t]);const h=Q.useCallback(b=>{l(b),p(),f.current&&r.leading?s(b):u.current=window.setTimeout(()=>{f.current=!0,s(b)},n),f.current=!1},[r.leading]);return[o,h]}const I7=vn({slot:{base:["relative","w-full"],search:["absolute","inset-y-0","left-2","flex","items-center","pointer-events-none","text-slate-500"],input:["pl-8","py-1","w-full","bg-slate-50","text-slate-900","text-sm","border","border-slate-300","rounded","focus:border-sky-400","focus:outline-none","block"],clear:["absolute","inset-y-0","right-2","flex","items-center","cursor-pointer","text-slate-300","hover:text-slate-500"]},variant:{},defaults:{}}),TD=({value:t="",onFulltext:e,textPlaceholder:n,variant:r,tva:i=I7,css:s})=>{const o=i({...r,css:s}).slots,[l,u]=k7(t,f=>{e(f||"")},500);return d.jsxs("div",{className:o.base(),children:[d.jsx("div",{className:o.search(),children:d.jsx(rn,{icon:"icon-[material-symbols-light--search]",variant:{size:"xl"}})}),d.jsx("input",{value:l||"",className:o.input(),type:"text",placeholder:n||so.text("Fulltext (placeholder)"),onChange:f=>{u(f.target.value)}}),t&&d.jsx("div",{className:o.clear(),onClick:()=>{e("")},children:d.jsx(rn,{icon:"icon-[gridicons--cross]",variant:{size:"md"}})})]})},ys="icon-[pajamas--go-back]",Uv="icon-[line-md--confirm-circle]",jD="icon-[mage--edit]",C7="icon-[arcticons--nothing-x]",T7="icon-[tabler--filter-plus]",qO="icon-[tabler--filter-minus]",Kb="icon-[ph--list-dashes-thin]",j7="icon-[svg-spinners--3-dots-scale]",yN="icon-[material-symbols-light--logout-sharp]",O7="icon-[fluent--shape-intersect-20-regular]",Qb="icon-[fluent--checkbox-unchecked-20-regular]",Gb="icon-[fluent--checkbox-checked-20-regular]",Ah="icon-[teenyicons--tag-outline]",ei="icon-[ph--trash]",R7="icon-[clarity--upload-cloud-line]",vN="icon-[ph--user]",q7=async({queryClient:t,keys:e})=>{for await(const n of e)await t.invalidateQueries({queryKey:n,refetchType:"all"})},Hn=t=>{const e=ub(),n=Lo();return async()=>{await q7({keys:t,queryClient:e}),await n.invalidate()}};var _0={exports:{}},S0,AO;function A7(){if(AO)return S0;AO=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return S0=t,S0}var E0,PO;function P7(){if(PO)return E0;PO=1;var t=A7();function e(){}function n(){}return n.resetWarningCache=e,E0=function(){function r(o,l,u,f,p,h){if(h!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},E0}var FO;function F7(){return FO||(FO=1,_0.exports=P7()()),_0.exports}var D7=F7();const tr=uo(D7);function fu(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(p){try{f(r.next(p))}catch(h){o(h)}}function u(p){try{f(r.throw(p))}catch(h){o(h)}}function f(p){p.done?s(p.value):i(p.value).then(l,u)}f((r=r.apply(t,e||[])).next())})}const L7=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Vd(t,e,n){const r=M7(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&DO(r,"path",s),DO(r,"relativePath",s),r}function M7(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=L7.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function DO(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const $7=[".DS_Store","Thumbs.db"];function B7(t){return fu(this,void 0,void 0,function*(){return Vv(t)&&z7(t.dataTransfer)?H7(t.dataTransfer,t.type):W7(t)?U7(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?V7(t):[]})}function z7(t){return Vv(t)}function W7(t){return Vv(t)&&Vv(t.target)}function Vv(t){return typeof t=="object"&&t!==null}function U7(t){return ME(t.target.files).map(e=>Vd(e))}function V7(t){return fu(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Vd(n))})}function H7(t,e){return fu(this,void 0,void 0,function*(){if(t.items){const n=ME(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(K7));return LO(OD(r))}return LO(ME(t.files).map(n=>Vd(n)))})}function LO(t){return t.filter(e=>$7.indexOf(e.name)===-1)}function ME(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function K7(t){if(typeof t.webkitGetAsEntry!="function")return MO(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?RD(e):MO(t,e)}function OD(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?OD(n):[n]],[])}function MO(t,e){return fu(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Vd(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Vd(r,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function Q7(t){return fu(this,void 0,void 0,function*(){return t.isDirectory?RD(t):G7(t)})}function RD(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>fu(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(Q7));i.push(l),s()}else try{const l=yield Promise.all(i);n(l)}catch(l){r(l)}}),o=>{r(o)})}s()})}function G7(t){return fu(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Vd(r,t.fullPath);e(i)},r=>{n(r)})})})}var Qg={},$O;function J7(){return $O||($O=1,Qg.__esModule=!0,Qg.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):i===l})}return!0}),Qg}var Z7=J7();const N0=uo(Z7);function BO(t){return eG(t)||X7(t)||AD(t)||Y7()}function Y7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X7(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eG(t){if(Array.isArray(t))return $E(t)}function zO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zO(Object(n),!0).forEach(function(r){qD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ph(t,e){return rG(t)||nG(t,e)||AD(t,e)||tG()}function tG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AD(t,e){if(t){if(typeof t=="string")return $E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(t,e)}}function $E(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function rG(t){if(Array.isArray(t))return t}var iG=typeof N0=="function"?N0:N0.default,PD="file-invalid-type",FD="file-too-large",DD="file-too-small",LD="too-many-files",sG={FileInvalidType:PD,FileTooLarge:FD,FileTooSmall:DD,TooManyFiles:LD},oG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:PD,message:"File type must be ".concat(r)}},UO=function(e){return{code:FD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},VO=function(e){return{code:DD,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},aG={code:LD,message:"Too many files"};function MD(t,e){var n=t.type==="application/x-moz-file"||iG(t,e);return[n,n?null:oG(e)]}function $D(t,e,n){if(Dc(t.size))if(Dc(e)&&Dc(n)){if(t.size>n)return[!1,UO(n)];if(t.size<e)return[!1,VO(e)]}else{if(Dc(e)&&t.size<e)return[!1,VO(e)];if(Dc(n)&&t.size>n)return[!1,UO(n)]}return[!0,null]}function Dc(t){return t!=null}function lG(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,l=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(u){var f=MD(u,n),p=Ph(f,1),h=p[0],b=$D(u,r,i),x=Ph(b,1),_=x[0],E=l?l(u):null;return h&&_&&!E})}function Hv(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Gg(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function HO(t){t.preventDefault()}function cG(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function uG(t){return t.indexOf("Edge/")!==-1}function dG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return cG(t)||uG(t)}function Qo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(l){return!Hv(r)&&l&&l.apply(void 0,[r].concat(s)),Hv(r)})}}function fG(){return"showOpenFilePicker"in window}function pG(t){if(Dc(t)){var e=Object.entries(t).filter(function(n){var r=Ph(n,2),i=r[0],s=r[1],o=!0;return BD(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(zD))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=Ph(r,2),s=i[0],o=i[1];return WO(WO({},n),{},qD({},s,o))},{});return[{description:"Files",accept:e}]}return t}function hG(t){if(Dc(t))return Object.entries(t).reduce(function(e,n){var r=Ph(n,2),i=r[0],s=r[1];return[].concat(BO(e),[i],BO(s))},[]).filter(function(e){return BD(e)||zD(e)}).join(",")}function mG(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function gG(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function BD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function zD(t){return/^.*\.[\w]+$/.test(t)}var yG=["children"],vG=["open"],bG=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],xG=["refKey","onChange","onClick"];function wG(t){return EG(t)||SG(t)||WD(t)||_G()}function _G(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EG(t){if(Array.isArray(t))return BE(t)}function k0(t,e){return IG(t)||kG(t,e)||WD(t,e)||NG()}function NG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WD(t,e){if(t){if(typeof t=="string")return BE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BE(t,e)}}function BE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kG(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,l;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(u){s=!0,l=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw l}}return r}}function IG(t){if(Array.isArray(t))return t}function KO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KO(Object(n),!0).forEach(function(r){zE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kv(t,e){if(t==null)return{};var n=CG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Jb=Q.forwardRef(function(t,e){var n=t.children,r=Kv(t,yG),i=VD(r),s=i.open,o=Kv(i,vG);return Q.useImperativeHandle(e,function(){return{open:s}},[s]),Bn.createElement(Q.Fragment,null,n(qr(qr({},o),{},{open:s})))});Jb.displayName="Dropzone";var UD={disabled:!1,getFilesFromEvent:B7,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Jb.defaultProps=UD;Jb.propTypes={children:tr.func,accept:tr.objectOf(tr.arrayOf(tr.string)),multiple:tr.bool,preventDropOnDocument:tr.bool,noClick:tr.bool,noKeyboard:tr.bool,noDrag:tr.bool,noDragEventsBubbling:tr.bool,minSize:tr.number,maxSize:tr.number,maxFiles:tr.number,disabled:tr.bool,getFilesFromEvent:tr.func,onFileDialogCancel:tr.func,onFileDialogOpen:tr.func,useFsAccessApi:tr.bool,autoFocus:tr.bool,onDragEnter:tr.func,onDragLeave:tr.func,onDragOver:tr.func,onDrop:tr.func,onDropAccepted:tr.func,onDropRejected:tr.func,onError:tr.func,validator:tr.func};var WE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function VD(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=qr(qr({},UD),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,l=e.multiple,u=e.maxFiles,f=e.onDragEnter,p=e.onDragLeave,h=e.onDragOver,b=e.onDrop,x=e.onDropAccepted,_=e.onDropRejected,E=e.onFileDialogCancel,I=e.onFileDialogOpen,T=e.useFsAccessApi,j=e.autoFocus,O=e.preventDropOnDocument,A=e.noClick,D=e.noKeyboard,M=e.noDrag,W=e.noDragEventsBubbling,P=e.onError,R=e.validator,$=Q.useMemo(function(){return hG(n)},[n]),F=Q.useMemo(function(){return pG(n)},[n]),U=Q.useMemo(function(){return typeof I=="function"?I:QO},[I]),V=Q.useMemo(function(){return typeof E=="function"?E:QO},[E]),z=Q.useRef(null),te=Q.useRef(null),Y=Q.useReducer(TG,WE),le=k0(Y,2),se=le[0],ne=le[1],oe=se.isFocused,ee=se.isFileDialogActive,ue=Q.useRef(typeof window<"u"&&window.isSecureContext&&T&&fG()),de=function(){!ue.current&&ee&&setTimeout(function(){if(te.current){var ut=te.current.files;ut.length||(ne({type:"closeDialog"}),V())}},300)};Q.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[te,ee,V,ue]);var ye=Q.useRef([]),we=function(ut){z.current&&z.current.contains(ut.target)||(ut.preventDefault(),ye.current=[])};Q.useEffect(function(){return O&&(document.addEventListener("dragover",HO,!1),document.addEventListener("drop",we,!1)),function(){O&&(document.removeEventListener("dragover",HO),document.removeEventListener("drop",we))}},[z,O]),Q.useEffect(function(){return!r&&j&&z.current&&z.current.focus(),function(){}},[z,j,r]);var Ne=Q.useCallback(function(Me){P?P(Me):console.error(Me)},[P]),ze=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me),ye.current=[].concat(wG(ye.current),[Me.target]),Gg(Me)&&Promise.resolve(i(Me)).then(function(ut){if(!(Hv(Me)&&!W)){var Qt=ut.length,Gt=Qt>0&&lG({files:ut,accept:$,minSize:o,maxSize:s,multiple:l,maxFiles:u,validator:R}),mn=Qt>0&&!Gt;ne({isDragAccept:Gt,isDragReject:mn,isDragActive:!0,type:"setDraggedFiles"}),f&&f(Me)}}).catch(function(ut){return Ne(ut)})},[i,f,Ne,W,$,o,s,l,u,R]),Oe=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me);var ut=Gg(Me);if(ut&&Me.dataTransfer)try{Me.dataTransfer.dropEffect="copy"}catch{}return ut&&h&&h(Me),!1},[h,W]),De=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me);var ut=ye.current.filter(function(Gt){return z.current&&z.current.contains(Gt)}),Qt=ut.indexOf(Me.target);Qt!==-1&&ut.splice(Qt,1),ye.current=ut,!(ut.length>0)&&(ne({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Gg(Me)&&p&&p(Me))},[z,p,W]),Je=Q.useCallback(function(Me,ut){var Qt=[],Gt=[];Me.forEach(function(mn){var ur=MD(mn,$),Ln=k0(ur,2),Hr=Ln[0],Oi=Ln[1],Tr=$D(mn,o,s),Jt=k0(Tr,2),Zi=Jt[0],Yi=Jt[1],Xi=R?R(mn):null;if(Hr&&Zi&&!Xi)Qt.push(mn);else{var ho=[Oi,Yi];Xi&&(ho=ho.concat(Xi)),Gt.push({file:mn,errors:ho.filter(function(da){return da})})}}),(!l&&Qt.length>1||l&&u>=1&&Qt.length>u)&&(Qt.forEach(function(mn){Gt.push({file:mn,errors:[aG]})}),Qt.splice(0)),ne({acceptedFiles:Qt,fileRejections:Gt,isDragReject:Gt.length>0,type:"setFiles"}),b&&b(Qt,Gt,ut),Gt.length>0&&_&&_(Gt,ut),Qt.length>0&&x&&x(Qt,ut)},[ne,l,$,o,s,u,b,x,_,R]),Xe=Q.useCallback(function(Me){Me.preventDefault(),Me.persist(),ke(Me),ye.current=[],Gg(Me)&&Promise.resolve(i(Me)).then(function(ut){Hv(Me)&&!W||Je(ut,Me)}).catch(function(ut){return Ne(ut)}),ne({type:"reset"})},[i,Je,Ne,W]),Ue=Q.useCallback(function(){if(ue.current){ne({type:"openDialog"}),U();var Me={multiple:l,types:F};window.showOpenFilePicker(Me).then(function(ut){return i(ut)}).then(function(ut){Je(ut,null),ne({type:"closeDialog"})}).catch(function(ut){mG(ut)?(V(ut),ne({type:"closeDialog"})):gG(ut)?(ue.current=!1,te.current?(te.current.value=null,te.current.click()):Ne(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ne(ut)});return}te.current&&(ne({type:"openDialog"}),U(),te.current.value=null,te.current.click())},[ne,U,V,T,Je,Ne,F,l]),ct=Q.useCallback(function(Me){!z.current||!z.current.isEqualNode(Me.target)||(Me.key===" "||Me.key==="Enter"||Me.keyCode===32||Me.keyCode===13)&&(Me.preventDefault(),Ue())},[z,Ue]),_t=Q.useCallback(function(){ne({type:"focus"})},[]),jt=Q.useCallback(function(){ne({type:"blur"})},[]),Vt=Q.useCallback(function(){A||(dG()?setTimeout(Ue,0):Ue())},[A,Ue]),nn=function(ut){return r?null:ut},xe=function(ut){return D?null:nn(ut)},ve=function(ut){return M?null:nn(ut)},ke=function(ut){W&&ut.stopPropagation()},Ae=Q.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.role,mn=Me.onKeyDown,ur=Me.onFocus,Ln=Me.onBlur,Hr=Me.onClick,Oi=Me.onDragEnter,Tr=Me.onDragOver,Jt=Me.onDragLeave,Zi=Me.onDrop,Yi=Kv(Me,bG);return qr(qr(zE({onKeyDown:xe(Qo(mn,ct)),onFocus:xe(Qo(ur,_t)),onBlur:xe(Qo(Ln,jt)),onClick:nn(Qo(Hr,Vt)),onDragEnter:ve(Qo(Oi,ze)),onDragOver:ve(Qo(Tr,Oe)),onDragLeave:ve(Qo(Jt,De)),onDrop:ve(Qo(Zi,Xe)),role:typeof Gt=="string"&&Gt!==""?Gt:"presentation"},Qt,z),!r&&!D?{tabIndex:0}:{}),Yi)}},[z,ct,_t,jt,Vt,ze,Oe,De,Xe,D,M,r]),Ve=Q.useCallback(function(Me){Me.stopPropagation()},[]),rt=Q.useMemo(function(){return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ut=Me.refKey,Qt=ut===void 0?"ref":ut,Gt=Me.onChange,mn=Me.onClick,ur=Kv(Me,xG),Ln=zE({accept:$,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:nn(Qo(Gt,Xe)),onClick:nn(Qo(mn,Ve)),tabIndex:-1},Qt,te);return qr(qr({},Ln),ur)}},[te,n,l,Xe,r]);return qr(qr({},se),{},{isFocused:oe&&!r,getRootProps:Ae,getInputProps:rt,rootRef:z,inputRef:te,open:nn(Ue)})}function TG(t,e){switch(e.type){case"focus":return qr(qr({},t),{},{isFocused:!0});case"blur":return qr(qr({},t),{},{isFocused:!1});case"openDialog":return qr(qr({},WE),{},{isFileDialogActive:!0});case"closeDialog":return qr(qr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return qr(qr({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return qr(qr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return qr({},WE);default:return t}}function QO(){}const jG=Object.freeze(Object.defineProperty({__proto__:null,ErrorCode:sG,default:Jb,useDropzone:VD},Symbol.toStringTag,{value:"Module"})),OG=vn({slot:{base:["flex","items-center","justify-center","w-full"],label:["flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","hover:bg-gray-100"],zone:["flex","flex-col","items-center","justify-center","pt-5","pb-6","text-slate-500"]},variant:{active:{true:[]},rejected:{true:[]}},match:[{if:{active:!0},then:{label:["text-blue-400"],zone:["text-blue-400"]}},{if:{rejected:!0},then:{label:["text-red-400"],zone:["text-red-400"]}}],defaults:{active:!1,rejected:!1}}),{useDropzone:RG}=jG,qG=({id:t,accept:e,text:n,variant:r,tva:i=OG,css:s,...o})=>{const{getRootProps:l,getInputProps:u,isDragActive:f,isDragReject:p}=RG({noClick:!0,multiple:!1,accept:e,maxFiles:1,minSize:0,maxSize:8388608,...o}),h=i({active:f,rejected:p,...r,css:s}).slots;return d.jsx("div",{...l(),className:h.base(),children:d.jsxs("label",{htmlFor:t,className:h.label(),children:[d.jsxs("div",{className:h.zone(),children:[d.jsx(rn,{icon:R7,variant:{size:"4xl"}}),d.jsx("p",{className:"mb-2 text-sm font-semibold",children:n?.title||so.rich("Drag 'n' drop a file here")}),n?.message?d.jsx("p",{className:"text-xs",children:n.message}):null]}),d.jsx("input",{id:t,type:"file",className:"hidden",...u()})]})})},AG=vn({slot:{base:["min-h-screen","flex","flex-col"],header:["flex","flex-row","items-center","bg-slate-50","shadow-sm","border-b","border-b-slate-200","w-full","gap-4","p-4"],content:["flex-grow","h-full","border-b","border-b-slate-200","p-2"]},variant:{},defaults:{}}),HD=({logo:t,menu:e,actions:n,variant:r,tva:i=AG,css:s,children:o})=>{const l=i({...r,css:s}).slots;return d.jsxs("div",{className:l.base(),children:[d.jsx(qz,{position:"top-right"}),d.jsxs("div",{className:l.header(),children:[d.jsx("div",{children:t}),d.jsx("div",{className:"flex-grow",children:e}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:n})]}),d.jsx("div",{className:l.content(),children:o??d.jsx(fo,{})})]})},PG=vn({slot:{base:["flex","flex-row","gap-2","items-center","justify-between","text-blue-500","rounded","px-1","py-0.5","hover:text-blue-700","focus:outline-none","w-fit"]},variant:{},defaults:{}}),FG=Q.forwardRef(({icon:t,iconProps:e,variant:n,tva:r=PG,css:i,children:s,...o},l)=>{const u=r({...n,css:i}).slots;return d.jsxs("a",{...o,ref:l,className:u.base(),children:[t&&d.jsx(rn,{icon:t,...e}),s]})}),DG=J3(FG),Mt=t=>d.jsx(DG,{preload:"intent",...t}),LG=vn({slot:{base:["fixed","inset-0","h-full","items-center","justify-center","bg-slate-100","flex","transition-all","duration-200","z-[10]","pointer-events-none","bg-opacity-0","backdrop-blur-none"]},variant:{show:{true:["bg-opacity-50","backdrop-blur-sm","pointer-events-auto"]}},defaults:{show:!0}}),MG=({show:t=!0,variant:e,tva:n=LG,css:r})=>{const i=n({show:t,...e,css:r}).slots;return t?d.jsx("div",{className:i.base(),children:d.jsx(rn,{icon:"icon-[svg-spinners--pulse-rings-multiple]",variant:{size:"8xl"},css:{base:["text-sky-400"]}})}):null};var Ay={exports:{}},$G=Ay.exports,GO;function BG(){return GO||(GO=1,function(t,e){(function(n,r){t.exports=r()})($G,()=>(()=>{var n={d:(_,E)=>{for(var I in E)n.o(E,I)&&!n.o(_,I)&&Object.defineProperty(_,I,{enumerable:!0,get:E[I]})},o:(_,E)=>Object.prototype.hasOwnProperty.call(_,E)},r={};n.d(r,{default:()=>x});const i=(..._)=>{},s=_=>_!==null&&_?.constructor.name==="Object";let o,l;const u=()=>{if(!o){o=!0;try{l=h.storage||localStorage,l.getItem("")}catch{l=(()=>{const _={getItem:I=>E[I]||null,setItem:(I,T)=>{E[I]=T},removeItem:I=>{E[I]=void 0},clear:()=>{E={__proto__:_}}};let E={__proto__:_};return E})()}b()}},f="\0",p=(_,E,I=!0)=>I?[...JSON.stringify(_)].map(T=>String.fromCharCode(T.charCodeAt(0)+E)).join(""):JSON.parse([..._].map(T=>String.fromCharCode(T.charCodeAt(0)-E)).join("")),h={ttl:null,encrypt:!1,encrypter:p,decrypter:(_,E)=>p(_,E,!1),secret:75,storage:void 0};Object.seal(h);const b=(_=!1)=>{u();for(const E of Object.keys(l)){const I=l.getItem(E);let T;try{T=JSON.parse(I||"")}catch{continue}s(T)&&f in T&&(Date.now()>T.ttl||_)&&l.removeItem(E)}},x={config:h,set:(_,E,I={})=>{u();const T={...h,...I,encrypt:I.encrypt!==!1&&(I.encrypt||h.encrypt),ttl:I.ttl===null?null:I.ttl||h.ttl};try{const j=T.ttl&&!isNaN(T.ttl)&&T.ttl>0;let O=j?{[f]:E,ttl:Date.now()+1e3*T.ttl}:E;T.encrypt&&(j?O[f]=(T.encrypter||i)(O[f],T.secret):O=(T.encrypter||i)(O,T.secret)),l.setItem(_,JSON.stringify(O))}catch{return!1}},get:(_,E={})=>{u();const I=l.getItem(_),T={...h,...E,encrypt:E.encrypt!==!1&&(E.encrypt||h.encrypt),ttl:E.ttl===null?null:E.ttl||h.ttl};let j,O;try{j=JSON.parse(I||""),O=s(j)&&f in j,(T.decrypt||T.encrypt)&&(O?j[f]=(T.decrypter||i)(j[f],T.secret):j=(T.decrypter||i)(j,T.secret))}catch{}return O?Date.now()>j.ttl?(l.removeItem(_),null):j[f]:j!==void 0?j:I},flush:b,clear:()=>{u(),l.clear()},remove:_=>{u(),l.removeItem(_)}};return r.default})())}(Ay)),Ay.exports}var zG=BG();const WG=uo(zG),mf=WG,UG=vn({slot:{base:["flex","flex-row","gap-2","items-center"]},variant:{},defaults:{}}),nc=({variant:t,tva:e=UG,css:n,children:r})=>{const i=e({...t,css:n}).slots;return d.jsx("div",{className:i.base(),children:r})},KD=vn({slot:{base:["flex","flex-row","gap-2","items-center","rounded","px-2","py-1","border","border-b-2","border-transparent","hover:text-slate-500"]},variant:{active:{true:[]},inner:{true:[]},subtle:{true:[]}},match:[{if:{active:!0,inner:!1},then:{base:["border","border-b-2","border-blue-400","bg-blue-50","hover:border-blue-500","text-slate-800","hover:text-blue-800"]}},{if:{active:!0,inner:!0},then:{base:["border-none","text-blue-600","hover:text-blue-800"]}},{if:{subtle:!0},then:{base:["hover:bg-slate-50","hover:border-slate-300","hover:text-slate-600"]}},{if:{active:!0,subtle:!0},then:{base:["bg-slate-100","border-slate-400"]}}],defaults:{active:!1,inner:!1,subtle:!1}}),VG=Q.forwardRef(({icon:t=null,variant:e,tva:n=KD,css:r,children:i,...s},o)=>{const l=n({...e,css:r}).slots;return d.jsxs("a",{...s,className:l.base(),ref:o,children:[Cb(t)?d.jsx(rn,{icon:t}):t,i]})}),HG=J3(VG),zn=({match:t=[],variant:e,tva:n=KD,css:r,...i})=>{const s=P4(),o=t.some(l=>!!s(l));return d.jsx(HG,{preload:"intent",variant:{active:!!s({to:i.to,params:i.params})||o,...e},tva:n,css:r,...i})},KG=vn({slot:{base:["flex","flex-row","flex-wrap","items-center","gap-2","text-sm","font-semibold"],item:["border","border-blue-200","bg-blue-50","rounded-md","px-2","py-1"]},variant:{},defaults:{}}),Hd=({textTitle:t,textEmpty:e,items:n,render:r,limit:i,variant:s,tva:o=KG,css:l})=>{const u=i?n.slice(0,i):n,f=o({...s,css:l}).slots;return d.jsxs("div",{className:f.base(),children:[n.length?null:e,u.map(p=>d.jsx(r,{entity:p},`items-${p.id}`)),i&&n.length>i&&d.jsx(hf,{textTitle:t,target:d.jsx(ym,{iconEnabled:bD}),outside:!0,children:d.jsx("div",{className:"flex flex-col gap-2",children:n.map(p=>d.jsx(r,{entity:p},`items-${p.id}`))})})]})},QG=vn({slot:{base:[]},variant:{},defaults:{}}),J=({label:t,fallback:e,variant:n,tva:r=QG,css:i})=>{const s=r({...n,css:i}).slots;return d.jsx("div",{className:s.base(),children:so.rich(t,e)})},QD=vn({slot:{base:["flex","flex-col","gap-2"],input:["py-2","px-2","flex","flex-row","gap-2","items-center","cursor-pointer","hover:bg-slate-50","border","border-gray-300","rounded-md","text-slate-400","hover:text-slate-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],content:[],footer:["flex","items-center","justify-between","gap-2","border-t-2","border-slate-100","mt-4","pt-2"]},variant:{loading:{true:[]},selected:{true:[]}},match:[{if:{loading:!0},then:{input:["text-slate-300"]}},{if:{selected:!0},then:{input:["bg-slate-50","text-slate-700","hover:bg-slate-100","hover:text-slate-800"]}}],defaults:{loading:!1,selected:!1}}),GG=vn({use:QD,slot:{},variant:{},defaults:{}}),JG=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=GG,css:x})=>{const _=b({...h,css:x}).slots,[E,I]=Q.useState(0),[T,j]=Q.useState(15),[O,A]=Q.useState(f||[]),[D,M]=Q.useState(void 0),W=sv({queryKey:[l,"PopupMultiSelect","data",{fulltext:D,page:E,size:T}],async queryFn(){return u({filter:{fulltext:D},cursor:{page:E,size:T}})}}),P=sv({queryKey:[l,"PopupMultiSelect","selected",{value:f}],async queryFn(){return u({filter:{idIn:f}})},enabled:!!f});return d.jsx(hf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data.length}),children:[d.jsx(rn,{icon:P.data?.data?.length?Gb:Qb}),P.data&&P.data.data.length?d.jsx(s,{entities:P.data.data}):n||d.jsx(J,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:T},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(J,{label:"Total count of items (label)"}),onPage(R){I(R)},onSize(R){j(R),I(0)}},fulltext:{value:D,set(R){M(R),I(0)}},table:{data:W.data?.data??[],selection:{type:"multi",value:O,set(R){A(R)}}}})}),d.jsx(Vb.Consumer,{children:R=>d.jsxs("div",{className:_.footer(),children:[d.jsx(jn,{iconEnabled:ys,iconDisabled:ys,onClick:()=>{R?.close()},variant:{variant:"subtle"},children:d.jsx(J,{label:"Close (label)"})}),d.jsx(jn,{iconEnabled:Uv,iconDisabled:Uv,disabled:!O.length&&!o,onClick:()=>{p(O),R?.close()},children:d.jsx(J,{label:"Confirm selection (label)"})})]})})]})})},GD=({icon:t,textTitle:e,textSelect:n,modalProps:r,table:i,render:s,allowEmpty:o=!1,queryKey:l,query:u,value:f,onChange:p,variant:h,tva:b=QD,css:x})=>{const _=b({...h,css:x}).slots,[E,I]=Q.useState(0),[T,j]=Q.useState(15),[O,A]=Q.useState(f?[f]:[]),[D,M]=Q.useState(void 0),W=sv({queryKey:[l,"PopupSelect","data",{fulltext:D,page:E,size:T}],async queryFn(){return u({filter:{fulltext:D},cursor:{page:E,size:T}})}}),P=sv({queryKey:[l,"PopupSelect","selected",{value:f}],async queryFn(){return u({filter:{id:f||void 0}})},enabled:!!f});return d.jsx(hf,{icon:t,target:d.jsxs("label",{className:_.input({loading:P.isLoading,selected:!!P.data?.data?.length}),children:[d.jsx(rn,{icon:P.data?.data?.[0]?Gb:Qb}),P.data?.data?.[0]?d.jsx(s,{entity:P.data?.data?.[0]}):n||d.jsx(J,{label:"Select item (label)"})]}),textTitle:e,variant:{loading:W.isLoading},disabled:W.isLoading,...r,children:d.jsxs("div",{className:_.base(),children:[d.jsx("div",{className:_.content(),children:d.jsx(i,{cursor:{cursor:{page:E,size:T},count:W.data?.count?W.data.count:{filter:-1,total:-1,where:-1},textTotal:d.jsx(J,{label:"Total count of items (label)"}),onPage(R){I(R)},onSize(R){j(R),I(0)}},fulltext:{value:D,set(R){M(R),I(0)}},table:{data:W.data?.data??[],selection:{type:"single",value:O,set(R){A(R)}}}})}),d.jsx(Vb.Consumer,{children:R=>d.jsxs("div",{className:_.footer(),children:[d.jsx(jn,{iconEnabled:ys,iconDisabled:ys,onClick:()=>{R?.close()},variant:{variant:"subtle"},children:d.jsx(J,{label:"Close (label)"})}),d.jsx(jn,{iconEnabled:Uv,iconDisabled:Uv,disabled:!O.length&&!o,onClick:()=>{p(O?.[0]),R?.close()},children:d.jsx(J,{label:"Confirm selection (label)"})})]})})]})})},ZG=vn({slot:{base:["bg-blue-50","p-2","rounded-md","border","border-blue-200"],container:["grid","grid-cols-2","grid-rows-2","gap-1"],title:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2"],links:["col-span-1","row-span-1","border-b","border-b-slate-300","pb-2","flex","flex-row","items-center","gap-4","justify-end"],actions:["col-span-1","row-span-1","flex","flex-row","items-center","gap-4"],extra:["col-span-1","row-span-1","flex","flex-row","gap-4","justify-end"]},variant:{},defaults:{}}),gf=({entity:t,title:e=()=>null,links:n=()=>null,actions:r=()=>null,extra:i=()=>null,variant:s,tva:o=ZG,css:l})=>{const u=o({...s,css:l}).slots;return d.jsx(hN.Provider,{value:{inline:!0},children:d.jsx("div",{className:u.base(),children:d.jsxs("div",{className:u.container(),children:[d.jsx("div",{className:u.title(),children:d.jsx(e,{entity:t})}),d.jsx("div",{className:u.links(),children:d.jsx(n,{entity:t})}),d.jsx("div",{className:u.actions(),children:d.jsx(r,{entity:t})}),d.jsx("div",{className:u.extra(),children:d.jsx(i,{entity:t})})]})})})},YG=vn({slot:{base:["w-full","bg-slate-200","rounded","transition-all"],progress:["h-full","bg-blue-400","rounded","leading-none","transition-all"]},variant:{size:{xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-4"}},defaults:{size:"md"}}),Ha=({value:t,variant:e,tva:n=YG,css:r})=>{const i=n({...e,css:r}).slots;return d.jsx("div",{className:i.base(),children:d.jsx("div",{style:{width:`${t}%`},className:i.progress()})})},XG=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,page:e}})})},eJ=t=>e=>{t({search:({cursor:n,...r})=>({...r,cursor:{...n,size:e,page:0}})})},wr=t=>({onPage:XG(t),onSize:eJ(t)}),_r=t=>e=>t({search:({cursor:n,...r})=>({...r,filter:e,cursor:{...n,page:0}})}),Sr=t=>e=>{t({search:({cursor:n,filter:r,...i})=>({...i,filter:{...r,fulltext:e},cursor:{...n,page:e?0:n.page}}),replace:!!e})},Gi=t=>e=>{t({search(n){return{...n,selection:e}}})},xr=t=>({loading:d.jsx(J,{label:`${t} - Loading (label)`}),success:d.jsx(J,{label:`${t} - Success (label)`}),error:d.jsx(J,{label:`${t} - Error (label)`})}),tJ=vn({slot:{base:["flex","flex-col","gap-4"],content:["text-bold","text-red-500","font-bold"],footer:["flex","flex-row","items-center","justify-between","gap-4"]},variant:{},defaults:{}}),Ji=({textContent:t,textToast:e,callback:n,onCancel:r,invalidator:i,variant:s,tva:o=tJ,css:l})=>{const u=o({...s,css:l}).slots,f=Q.useContext(Vb),p=Zt({async mutationFn(){return Az.promise(n(),xr(e))},async onSuccess(){await i?.(),f?.close()}});return d.jsxs("div",{className:u.base(),children:[d.jsx("div",{className:u.content(),children:t}),d.jsxs("div",{className:u.footer(),children:[d.jsx(jn,{variant:{variant:"subtle",size:"sm"},iconEnabled:ys,onClick:()=>{f?.close(),r?.()},children:d.jsx(J,{label:"Cancel (button)"})}),d.jsx(jn,{variant:{variant:"danger",size:"md"},iconEnabled:ei,onClick:()=>{p.mutate()},children:d.jsx(J,{label:"Delete (button)"})})]})]})},nJ=async({select:t,query:e=()=>t,filter:n,where:r})=>({total:(await t.clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,filter:(await e({select:e({select:t,where:r}),where:n}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count,where:(await e({select:t,where:r}).clearSelect().select(i=>i.fn.countAll().as("count")).executeTakeFirstOrThrow()).count}),Ka=async({select:t,query:e=()=>t,output:n,filter:r,where:i})=>n.parse(await e({select:e({select:t,where:i}),where:r}).executeTakeFirstOrThrow()),Yr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>{const o=l=>{let u=l;return s&&(u=l.limit(s.size).offset(s.page*s.size)),u};return L.array(n).parse(await o(e({select:e({select:t,where:i}),where:r})).execute())},sr=async({select:t,query:e=()=>t,output:n,filter:r,where:i,cursor:s})=>({data:await Yr({select:t,output:n,where:i,filter:r,query:e,cursor:s}),count:await nJ({select:t,where:i,filter:r,query:e})}),er=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,i="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?i:r,output:n==="input"?r:i},parse:s=>"schema"in t?t.schema.parse(s):t.parse(s)}},Jg=(t,e)=>L.custom().pipe(t.catch(e)),Er=({filter:t},{size:e=30}={size:30})=>L.object({filter:Jg(t.optional(),void 0),cursor:Jg(T9,{page:0,size:e}).default({page:0,size:e}),sort:Jg(L.any().optional(),[]).default([]),selection:Jg(L.array(L.string()),[]).default([])}),rJ=vn({slot:{base:["w-full","flex","flex-col","items-center","justify-center"],title:["text-xl","text-bold"],message:["text-base","text-slate-500"],body:["pt-2"]},variant:{},defaults:{}}),JD=({textTitle:t,textMessage:e,icon:n,iconProps:r,variant:i,tva:s=rJ,css:o,children:l})=>{const u=s({...i,css:o}).slots;return d.jsxs("div",{className:u.base(),children:[n?d.jsx(rn,{icon:n,variant:{size:"6xl"},css:{base:["text-slate-500","opacity-50"]},...r}):null,d.jsx("div",{className:u.title(),children:t}),d.jsx("div",{className:u.message(),children:e}),d.jsx("div",{className:u.body(),children:l})]})},bN=vn({slot:{base:["min-w-full","flex","flex-col","gap-2","text-sm"],table:["min-w-full","w-max","table-fixed"],thead:["border","border-slate-200","bg-slate-100"],th:["text-left","px-2","py-1","border-t","border-b","border-slate-300"],tbody:[],tr:["border-b","border-b-slate-200","odd:bg-slate-50","hover:bg-purple-100","hover:border-purple-300"],td:["px-2","py-1"],tfoot:[],select:["cursor-pointer","text-slate-400","hover:text-slate-600"]},variant:{selected:{true:[]}},match:[{if:{selected:!0},then:{tr:["bg-blue-100","odd:bg-blue-50","border-blue-300"],select:["text-slate-600"]}}],defaults:{selected:!1}}),iJ=({table:t,cell:{column:e,data:n,value:r},variant:i,tva:s=bN,css:o})=>{const l=e.def.render,u=s({...i,css:o}).slots;return d.jsx("td",{className:u.td(),children:d.jsxs("div",{className:"group flex flex-row items-center gap-2 justify-between",children:[d.jsx(l,{table:t,data:n,value:r,context:t.context}),e.filter&&!e.filter.is()?d.jsx(rn,{icon:T7,css:{base:["group-hover:visible","invisible","opacity-50 hover:opacity-100","cursor-pointer"]},variant:{size:"xl"},onClick:()=>{e.filter&&(e.def.filter?.onFilter({data:n,filter:e.filter}),window.scrollTo({top:0,behavior:"smooth"}))}}):null]})})},sJ=({table:t,row:e,action:n,variant:r,tva:i=bN,css:s})=>{const o=i({...r,css:s}).slots,l=n?.table,u=n?.row;return d.jsxs("tr",{className:o.tr({selected:t.selection.isSelected(e)}),children:[l||u||t.selection.enabled?d.jsx("td",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(rn,{icon:t.selection.isSelected(e)?Gb:Qb,css:{base:o.select({selected:t.selection.isSelected(e)})},onClick:t.selection.withRowHandler(e)}):null,u?d.jsx(u,{table:t,data:e.data}):null]})}):null,e.cells.map(f=>d.jsx(iJ,{table:t,cell:f,variant:r,tva:i,css:s},`${e.id}-${f.column.id}`)),d.jsx("td",{})]})},Nr=({table:t,fulltext:e,cursor:n,empty:r=()=>d.jsx(JD,{icon:C7,textTitle:d.jsx(J,{label:"Nothing here"}),textMessage:d.jsx(J,{label:"There is nothing to see right now."})}),action:i,variant:s,tva:o=bN,css:l})=>{const u=o({...s,css:l}).slots,f=i?.table,p=i?.row;return d.jsxs("div",{className:u.base(),children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-6 w-1/3",children:e?d.jsx(TD,{value:e.value,onFulltext:e.set}):null}),d.jsxs("div",{className:"flex flex-row items-center justify-center gap-2",children:[d.jsx(IO,{...n}),t.filter.is()&&d.jsx(ym,{iconEnabled:qO,css:{base:["text-amber-500"]},onClick:()=>t.filter.reset()})]})]}),d.jsx("div",{className:"relative overflow-x-auto",children:d.jsxs("table",{className:u.table(),children:[d.jsx("thead",{className:u.thead(),children:d.jsxs("tr",{children:[f||p||t.selection.enabled?d.jsx("th",{className:"w-0",children:d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t.selection.enabled?d.jsx(rn,{icon:t.selection.isAll()?Gb:t.selection.isAny()?O7:Qb,variant:{disabled:t.selection.isSingle},css:{base:u.select({selected:t.selection.isAny()})},onClick:t.selection.withAllHandler()}):null,f?d.jsx(f,{table:t}):null]})}):null,t.visible.map(h=>{const b=h.def.header||(()=>null);return d.jsx("th",{className:u.th(),style:h.def.size?{width:`${h.def.size}rem`}:void 0,children:d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx(b,{table:t}),d.jsx("div",{className:"flex flex-row items-center gap-2",children:h.filter?.is()&&d.jsx(rn,{icon:qO,variant:{size:"md"},css:{base:["opacity-50","hover:opacity-100","cursor-pointer"]},onClick:()=>{h.filter?.reset()}})})]})},h.id)}),d.jsx("th",{})]})}),t.isEmpty?null:d.jsx("tbody",{className:u.tbody(),children:t.rows?.map(h=>d.jsx(sJ,{row:h,table:t,action:i,variant:s,tva:o,css:l},h.id))})]})}),t.isEmpty?d.jsx(r,{}):null,d.jsxs("div",{className:"flex flex-row items-center justify-end gap-2",children:[d.jsx("div",{}),d.jsx(IO,{...n})]})]})},di=[];for(let t=0;t<256;++t)di.push((t+256).toString(16).slice(1));function oJ(t,e=0){return(di[t[e+0]]+di[t[e+1]]+di[t[e+2]]+di[t[e+3]]+"-"+di[t[e+4]]+di[t[e+5]]+"-"+di[t[e+6]]+di[t[e+7]]+"-"+di[t[e+8]]+di[t[e+9]]+"-"+di[t[e+10]]+di[t[e+11]]+di[t[e+12]]+di[t[e+13]]+di[t[e+14]]+di[t[e+15]]).toLowerCase()}let I0;const aJ=new Uint8Array(16);function lJ(){if(!I0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");I0=crypto.getRandomValues.bind(crypto)}return I0(aJ)}const cJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JO={randomUUID:cJ};function ZO(t,e,n){if(JO.randomUUID&&!t)return JO.randomUUID();t=t||{};const r=t.random??t.rng?.()??lJ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,oJ(r)}const kr=({columns:t,order:e=t.map(u=>u.name),hidden:n=[],visible:r=t.map(u=>u.name),data:i,filter:s,selection:o,context:l})=>{const u={...s?.value||{}},f=Yj(u),p=new Set(o?.value),h=t.map(x=>({id:ZO(),def:x,filter:x.filter?{is(){return x.filter?f.get(x.filter.path)!==void 0:!1},reset(){x.filter&&f.set(x.filter.path,void 0),s?.set({...u})},shallow(_,E){x.filter&&f.set(_,E),s?.set({...u})},set(_){s?.set({..._})}}:void 0})),b=h.filter(x=>r.includes(x.def.name)&&!n.includes(x.def.name)).sort((x,_)=>{const E=e.indexOf(x.def.name),I=e.indexOf(_.def.name);return(E===-1?1/0:E)-(I===-1?1/0:I)});return{columns:h,visible:b,rows:i?.map(x=>({id:ZO(),data:x,cells:b.map(_=>({column:_,data:x,value:Yj(x).get(_.def.name)}))})),isEmpty:i.length===0,filter:{is(){return h.some(x=>x.filter?.is())},reset(){s?.set({})},set(x){s?.set({...x})},shallow(x,_){f.set(x,_)}},selection:{enabled:!!o&&i.length>0,selection:Array.from(p),isSingle:o?.type==="single",isMulti:o?.type==="multi",isSelected({data:x}){return p.has(x.id)||!1},isAll(){return i.every(x=>p.has(x.id))},isAny(){return i.some(x=>p.has(x.id))},withRowHandler({data:x}){return()=>{if(o?.type==="single"){const _=p.has(x.id);p.clear(),_?p.delete(x.id):p.add(x.id)}else p.has(x.id)?p.delete(x.id):p.add(x.id);o?.set(Array.from(p))}},withAllHandler(){return()=>{i.every(x=>p.has(x.id))?p.clear():i.forEach(({id:x})=>p.add(x)),o?.set(Array.from(p))}}},context:l}},Ir=()=>t=>t,ZD=({tags:t=[],render:e=({tag:i})=>i.label,onClick:n,textEmpty:r})=>{const i=t.filter(Boolean).sort((s,o)=>s.sort-o.sort);return d.jsx("div",{className:"flex flex-wrap flex-row gap-2 items-center",children:i.length?i.map(s=>d.jsx(Ps,{onClick:()=>n?.(s),children:e({tag:s})},s.id)):r||d.jsx(J,{label:"No tags (label)"})})},uJ=vn({slot:{base:["flex","flex-row","gap-2","items-center"],title:["flex","flex-row","gap-2","items-center","text-lg","text-slate-500","font-bold"],subtitle:["flex","flex-row","gap-4","items-center","text-lg"]},variant:{withSubtitle:{true:[]}},match:[{if:{withSubtitle:!0},then:{title:["border-r","border-r-slate-300","pr-2"]}}],defaults:{withSubtitle:!1}}),yf=({icon:t,title:e,subtitle:n,variant:r,tva:i=uJ,css:s})=>{const o=i({withSubtitle:!!n,...r,css:s}).slots;return d.jsxs("div",{className:o.base(),children:[d.jsxs("div",{className:o.title(),children:[t?d.jsx(rn,{icon:t}):null,e]}),n?d.jsx("div",{className:o.subtitle(),children:n}):null]})};var Zg={},YO;function dJ(){if(YO)return Zg;YO=1;var t=G3();return Zg.createRoot=t.createRoot,Zg.hydrateRoot=t.hydrateRoot,Zg}var fJ=dJ();const pJ=uo(fJ),xN=x4()({component:()=>d.jsxs(d.Fragment,{children:[d.jsx(z4,{}),d.jsx(fo,{})]})}),hJ="modulepreload",mJ=function(t){return"/"+t},XO={},eR=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(n.map(u=>{if(u=mJ(u),u in XO)return;XO[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":hJ,f||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),f)return new Promise((b,x)=>{h.addEventListener("load",b),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},gJ=$t("/$locale")({component:fo,loader:async({params:{locale:t}})=>{try{so.push((await yJ(`../translation/${t}.yaml`)).default)}catch(e){console.error(e)}}});function yJ(t){switch(t){case"../translation/cs":case"../translation/cs.yaml":return eR(()=>import("./cs-JtTKSfp1.js"),[]);case"../translation/en":case"../translation/en.yaml":return eR(()=>import("./en-BlnTJ7pl.js"),[]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const YD="cs",vJ=[YD,"en"],bJ=$t("/")({loader:async()=>{throw Jh({to:"/$locale",params:{locale:T5({available:vJ,fallback:YD})}})}}),xJ=$t("/$locale/")({component:()=>{const{locale:t}=sn({from:"/$locale"});return d.jsx("div",{className:"flex flex-col items-center justify-center h-screen w-screen",children:d.jsxs("div",{className:"rounded bg-slate-50 p-4 shadow-md border border-slate-300",children:[d.jsx("h1",{className:"text-3xl text-center",children:"Apps"}),d.jsx("ul",{children:d.jsx("li",{children:d.jsx(Mt,{icon:"icon-[bx--game]",to:"/$locale/apps/derivean/public/login",params:{locale:t},children:"DeRivean"})})})]})})}}),{kysely:It,bootstrap:wJ}=_7({database:"derivean",async bootstrap({kysely:t}){const e="varchar(36)";try{await t.selectFrom("User").select(n=>n.fn.countAll().as("count")).executeTakeFirstOrThrow()}catch{await t.schema.createTable("User").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("login","varchar(128)",r=>r.notNull()).addColumn("password","varchar(256)",r=>r.notNull()).addUniqueConstraint("[User] login",["login"]).execute(),await t.schema.createTable("Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("code","varchar(64)",r=>r.notNull()).addColumn("label","varchar(128)",r=>r.notNull()).addColumn("group","varchar(64)").addColumn("sort","integer",r=>r.notNull().defaultTo(0)).addUniqueConstraint("Tag_code_group",["code","group"]).execute(),await t.schema.createTable("Cycle").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Cycle] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("stamp","datetime",r=>r.defaultTo(Pr`CURRENT_TIMESTAMP`).notNull()).execute(),await t.schema.createTable("Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("transport","float4",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Resource] name",["name"]).execute(),await t.schema.createTable("Resource_Tag").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("tagId",e,r=>r.notNull()).addForeignKeyConstraint("[Resource_Tag] tagId",["tagId"],"Tag",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Resource_Tag] resourceId-tagId",["resourceId","tagId"]).execute(),await t.schema.createTable("Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addColumn("type","varchar(16)",r=>r.notNull().defaultTo("storage")).execute(),await t.schema.createTable("Default_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Default_Inventory] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("limit","float4",r=>r.notNull()).addUniqueConstraint("[Default_Inventory] resourceId",["resourceId"]).execute(),await t.schema.createTable("User_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[User_Inventory] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[User_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[User_Inventory] userId-inventoryId",["userId","inventoryId"]).execute(),await t.schema.createTable("Blueprint").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("name","varchar(64)",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).addColumn("sort","integer",r=>r.notNull()).addColumn("limit","integer",r=>r.notNull().defaultTo(1)).addUniqueConstraint("[Blueprint] name",["name"]).execute(),await t.schema.createTable("Blueprint_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Inventory] blueprintId-inventoryId",["blueprintId","inventoryId"]).execute(),await t.schema.createTable("Blueprint_Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("cycles","integer",r=>r.notNull()).execute(),await t.schema.createTable("Blueprint_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Requirement] blueprintId-requirementId",["blueprintId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("dependencyId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Dependency] dependencyId",["dependencyId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Dependency] blueprintId-dependencyId",["blueprintId","dependencyId"]).execute(),await t.schema.createTable("Blueprint_Conflict").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("conflictId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Conflict] conflictId",["conflictId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Conflict] blueprintId-conflictId",["blueprintId","conflictId"]).execute(),await t.schema.createTable("Blueprint_Production_Requirement").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Requirement] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addColumn("passive","boolean",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Requirement] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Blueprint_Production_Dependency").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-blueprintId",["blueprintProductionId","blueprintId"]).execute(),await t.schema.createTable("Blueprint_Production_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Blueprint_Production_Dependency] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4",r=>r.notNull()).addUniqueConstraint("[Blueprint_Production_Dependency] blueprintProductionId-resourceId",["blueprintProductionId","resourceId"]).execute(),await t.schema.createTable("Production").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintProductionId",e,r=>r.notNull()).addForeignKeyConstraint("[Production] blueprintProductionId",["blueprintProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("from","integer",r=>r.notNull()).addColumn("to","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Construction").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Construction] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("plan","boolean",r=>r.notNull().defaultTo(!0)).addColumn("valid","boolean",r=>r.notNull().defaultTo(!0)).addColumn("from","integer",r=>r.notNull()).addColumn("to","integer",r=>r.notNull()).addColumn("cycle","integer",r=>r.notNull()).execute(),await t.schema.createTable("Building").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("blueprintId",e,r=>r.notNull()).addForeignKeyConstraint("[Building] blueprintId",["blueprintId"],"Blueprint",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("constructionId",e).addForeignKeyConstraint("[Building] constructionId",["constructionId"],"Construction",["id"],r=>r.onDelete("set null").onUpdate("set null")).addColumn("productionId",e).addForeignKeyConstraint("[Building] productionId",["productionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("recurringProductionId",e).addForeignKeyConstraint("[Building] recurringProductionId",["recurringProductionId"],"Blueprint_Production",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("x","float4",r=>r.notNull().defaultTo(0)).addColumn("y","float4",r=>r.notNull().defaultTo(0)).execute(),await t.schema.createTable("Building_Inventory").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("buildingId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] buildingId",["buildingId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("inventoryId",e,r=>r.notNull()).addForeignKeyConstraint("[Building_Inventory] inventoryId",["inventoryId"],"Inventory",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Building_Inventory] buildingId-inventoryId",["buildingId","inventoryId"]).execute(),await t.schema.createTable("Route").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("userId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] userId",["userId"],"User",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("fromId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] fromId",["fromId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("toId",e,r=>r.notNull()).addForeignKeyConstraint("[Route] toId",["toId"],"Building",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addUniqueConstraint("[Route] userId-fromId-toId",["userId","fromId","toId"]).execute(),await t.schema.createTable("Route_Resource").ifNotExists().addColumn("id",e,r=>r.primaryKey()).addColumn("routeId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] routeId",["routeId"],"Route",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("resourceId",e,r=>r.notNull()).addForeignKeyConstraint("[Route_Resource] resourceId",["resourceId"],"Resource",["id"],r=>r.onDelete("cascade").onUpdate("cascade")).addColumn("amount","float4").execute()}}}),_J=$t("/$locale/apps/derivean")({loader:wJ}),wN="icon-[proicons--game]",SJ=vn({slot:{base:["text-orange-500","font-bold","text-2xl","shadow-md","hover:shadow-lg","hover:text-orange-600","rounded","px-2","py-1","bg-slate-100"]},variant:{},defaults:{}}),XD=({variant:t,tva:e=SJ,css:n})=>{const r=e({...t,css:n}).slots;return d.jsx("div",{className:r.base(),children:"DeRivean"})},rc="icon-[fluent--building-shop-20-regular]",Ii="icon-[mingcute--inventory-line]",Fn="icon-[hugeicons--resources-add]",EJ=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsxs(nc,{...t,children:[d.jsx(zn,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},children:d.jsx(J,{label:"Editor (menu)"})}),d.jsx(zn,{icon:rc,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/blueprint/$id/view"},{to:"/$locale/apps/derivean/root/blueprint/$id/dependencies"},{to:"/$locale/apps/derivean/root/blueprint/$id/production"},{to:"/$locale/apps/derivean/root/blueprint/$id/requirements"},{to:"/$locale/apps/derivean/root/blueprint/$id/edit"},{to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements"}],children:d.jsx(J,{label:"Blueprint list (menu)"})}),d.jsx(zn,{icon:Fn,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(J,{label:"Resource list (menu)"})}),d.jsx(zn,{icon:Ii,to:"/$locale/apps/derivean/root/default/inventory",params:{locale:e},children:d.jsx(J,{label:"Default inventory (menu)"})}),d.jsx(zn,{icon:vN,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},match:[{to:"/$locale/apps/derivean/root/user/$id/view"},{to:"/$locale/apps/derivean/root/user/$id/building/list"},{to:"/$locale/apps/derivean/root/user/$id/inventory"}],children:d.jsx(J,{label:"User list (menu)"})}),d.jsx(zn,{icon:Ah,to:"/$locale/apps/derivean/root/tag/list",params:{locale:e},children:d.jsx(J,{label:"Tag list (menu)"})})]})},vm=L.object({id:L.string(),name:L.string(),login:L.string()}),NJ=$t("/$locale/apps/derivean/root")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return vm.parse(mf.get("session"))}catch{throw Jh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{session:t}}){return{session:await t()}},component:()=>{const{locale:t}=sn({from:"/$locale"}),{session:e}=Vi({from:"/$locale/apps/derivean/root"});return d.jsx(HD,{logo:d.jsx(Mt,{to:"/$locale/apps/derivean/root",params:{locale:t},children:d.jsx(XD,{})}),menu:d.jsx(EJ,{}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(Mt,{icon:wN,to:"/$locale/apps/derivean/game",params:{locale:t}}),d.jsx(Mt,{icon:yN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]})})}});function ti(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=ti(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var kJ={value:()=>{}};function Zb(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Py(n)}function Py(t){this._=t}function IJ(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Py.prototype=Zb.prototype={constructor:Py,on:function(t,e){var n=this._,r=IJ(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=CJ(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=tR(n[i],t.name,e);else if(e==null)for(i in n)n[i]=tR(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Py(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function CJ(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function tR(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=kJ,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var UE="http://www.w3.org/1999/xhtml";const nR={svg:"http://www.w3.org/2000/svg",xhtml:UE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yb(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),nR.hasOwnProperty(e)?{space:nR[e],local:t}:t}function TJ(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===UE&&e.documentElement.namespaceURI===UE?e.createElement(t):e.createElementNS(n,t)}}function jJ(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function e2(t){var e=Yb(t);return(e.local?jJ:TJ)(e)}function OJ(){}function _N(t){return t==null?OJ:function(){return this.querySelector(t)}}function RJ(t){typeof t!="function"&&(t=_N(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,f,p=0;p<o;++p)(u=s[p])&&(f=t.call(u,u.__data__,p,s))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f);return new Ds(r,this._parents)}function qJ(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function AJ(){return[]}function t2(t){return t==null?AJ:function(){return this.querySelectorAll(t)}}function PJ(t){return function(){return qJ(t.apply(this,arguments))}}function FJ(t){typeof t=="function"?t=PJ(t):t=t2(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&(r.push(t.call(u,u.__data__,f,o)),i.push(u));return new Ds(r,i)}function n2(t){return function(){return this.matches(t)}}function r2(t){return function(e){return e.matches(t)}}var DJ=Array.prototype.find;function LJ(t){return function(){return DJ.call(this.children,t)}}function MJ(){return this.firstElementChild}function $J(t){return this.select(t==null?MJ:LJ(typeof t=="function"?t:r2(t)))}var BJ=Array.prototype.filter;function zJ(){return Array.from(this.children)}function WJ(t){return function(){return BJ.call(this.children,t)}}function UJ(t){return this.selectAll(t==null?zJ:WJ(typeof t=="function"?t:r2(t)))}function VJ(t){typeof t!="function"&&(t=n2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Ds(r,this._parents)}function i2(t){return new Array(t.length)}function HJ(){return new Ds(this._enter||this._groups.map(i2),this._parents)}function Qv(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Qv.prototype={constructor:Qv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function KJ(t){return function(){return t}}function QJ(t,e,n,r,i,s){for(var o=0,l,u=e.length,f=s.length;o<f;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Qv(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function GJ(t,e,n,r,i,s,o){var l,u,f=new Map,p=e.length,h=s.length,b=new Array(p),x;for(l=0;l<p;++l)(u=e[l])&&(b[l]=x=o.call(u,u.__data__,l,e)+"",f.has(x)?i[l]=u:f.set(x,u));for(l=0;l<h;++l)x=o.call(t,s[l],l,s)+"",(u=f.get(x))?(r[l]=u,u.__data__=s[l],f.delete(x)):n[l]=new Qv(t,s[l]);for(l=0;l<p;++l)(u=e[l])&&f.get(b[l])===u&&(i[l]=u)}function JJ(t){return t.__data__}function ZJ(t,e){if(!arguments.length)return Array.from(this,JJ);var n=e?GJ:QJ,r=this._parents,i=this._groups;typeof t!="function"&&(t=KJ(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),f=0;f<s;++f){var p=r[f],h=i[f],b=h.length,x=YJ(t.call(p,p&&p.__data__,f,r)),_=x.length,E=l[f]=new Array(_),I=o[f]=new Array(_),T=u[f]=new Array(b);n(p,h,E,I,T,x,e);for(var j=0,O=0,A,D;j<_;++j)if(A=E[j]){for(j>=O&&(O=j+1);!(D=I[O])&&++O<_;);A._next=D||null}}return o=new Ds(o,r),o._enter=l,o._exit=u,o}function YJ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function XJ(){return new Ds(this._exit||this._groups.map(i2),this._parents)}function eZ(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function tZ(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var f=n[u],p=r[u],h=f.length,b=l[u]=new Array(h),x,_=0;_<h;++_)(x=f[_]||p[_])&&(b[_]=x);for(;u<i;++u)l[u]=n[u];return new Ds(l,this._parents)}function nZ(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function rZ(t){t||(t=iZ);function e(h,b){return h&&b?t(h.__data__,b.__data__):!h-!b}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),f,p=0;p<l;++p)(f=o[p])&&(u[p]=f);u.sort(e)}return new Ds(i,this._parents).order()}function iZ(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sZ(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oZ(){return Array.from(this)}function aZ(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function lZ(){let t=0;for(const e of this)++t;return t}function cZ(){return!this.node()}function uZ(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function dZ(t){return function(){this.removeAttribute(t)}}function fZ(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pZ(t,e){return function(){this.setAttribute(t,e)}}function hZ(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mZ(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gZ(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yZ(t,e){var n=Yb(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?fZ:dZ:typeof e=="function"?n.local?gZ:mZ:n.local?hZ:pZ)(n,e))}function s2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vZ(t){return function(){this.style.removeProperty(t)}}function bZ(t,e,n){return function(){this.style.setProperty(t,e,n)}}function xZ(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wZ(t,e,n){return arguments.length>1?this.each((e==null?vZ:typeof e=="function"?xZ:bZ)(t,e,n??"")):Kd(this.node(),t)}function Kd(t,e){return t.style.getPropertyValue(e)||s2(t).getComputedStyle(t,null).getPropertyValue(e)}function _Z(t){return function(){delete this[t]}}function SZ(t,e){return function(){this[t]=e}}function EZ(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function NZ(t,e){return arguments.length>1?this.each((e==null?_Z:typeof e=="function"?EZ:SZ)(t,e)):this.node()[t]}function o2(t){return t.trim().split(/^|\s+/)}function SN(t){return t.classList||new a2(t)}function a2(t){this._node=t,this._names=o2(t.getAttribute("class")||"")}a2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function l2(t,e){for(var n=SN(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function c2(t,e){for(var n=SN(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function kZ(t){return function(){l2(this,t)}}function IZ(t){return function(){c2(this,t)}}function CZ(t,e){return function(){(e.apply(this,arguments)?l2:c2)(this,t)}}function TZ(t,e){var n=o2(t+"");if(arguments.length<2){for(var r=SN(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?CZ:e?kZ:IZ)(n,e))}function jZ(){this.textContent=""}function OZ(t){return function(){this.textContent=t}}function RZ(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function qZ(t){return arguments.length?this.each(t==null?jZ:(typeof t=="function"?RZ:OZ)(t)):this.node().textContent}function AZ(){this.innerHTML=""}function PZ(t){return function(){this.innerHTML=t}}function FZ(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function DZ(t){return arguments.length?this.each(t==null?AZ:(typeof t=="function"?FZ:PZ)(t)):this.node().innerHTML}function LZ(){this.nextSibling&&this.parentNode.appendChild(this)}function MZ(){return this.each(LZ)}function $Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function BZ(){return this.each($Z)}function zZ(t){var e=typeof t=="function"?t:e2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function WZ(){return null}function UZ(t,e){var n=typeof t=="function"?t:e2(t),r=e==null?WZ:typeof e=="function"?e:_N(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function VZ(){var t=this.parentNode;t&&t.removeChild(this)}function HZ(){return this.each(VZ)}function KZ(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function QZ(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function GZ(t){return this.select(t?QZ:KZ)}function JZ(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ZZ(t){return function(e){t.call(this,e,this.__data__)}}function YZ(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function XZ(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function eY(t,e,n){return function(){var r=this.__on,i,s=ZZ(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function tY(t,e,n){var r=YZ(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,p;u<f;++u)for(i=0,p=l[u];i<s;++i)if((o=r[i]).type===p.type&&o.name===p.name)return p.value}return}for(l=e?eY:XZ,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function u2(t,e,n){var r=s2(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function nY(t,e){return function(){return u2(this,t,e)}}function rY(t,e){return function(){return u2(this,t,e.apply(this,arguments))}}function iY(t,e){return this.each((typeof e=="function"?rY:nY)(t,e))}function*sY(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var d2=[null];function Ds(t,e){this._groups=t,this._parents=e}function bm(){return new Ds([[document.documentElement]],d2)}function oY(){return this}Ds.prototype=bm.prototype={constructor:Ds,select:RJ,selectAll:FJ,selectChild:$J,selectChildren:UJ,filter:VJ,data:ZJ,enter:HJ,exit:XJ,join:eZ,merge:tZ,selection:oY,order:nZ,sort:rZ,call:sZ,nodes:oZ,node:aZ,size:lZ,empty:cZ,each:uZ,attr:yZ,style:wZ,property:NZ,classed:TZ,text:qZ,html:DZ,raise:MZ,lower:BZ,append:zZ,insert:UZ,remove:HZ,clone:GZ,datum:JZ,on:tY,dispatch:iY,[Symbol.iterator]:sY};function Os(t){return typeof t=="string"?new Ds([[document.querySelector(t)]],[document.documentElement]):new Ds([[t]],d2)}function aY(t){let e;for(;e=t.sourceEvent;)t=e;return t}function No(t,e){if(t=aY(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const lY={passive:!1},Fh={capture:!0,passive:!1};function C0(t){t.stopImmediatePropagation()}function qd(t){t.preventDefault(),t.stopImmediatePropagation()}function f2(t){var e=t.document.documentElement,n=Os(t).on("dragstart.drag",qd,Fh);"onselectstart"in e?n.on("selectstart.drag",qd,Fh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function p2(t,e){var n=t.document.documentElement,r=Os(t).on("dragstart.drag",null);e&&(r.on("click.drag",qd,Fh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yg=t=>()=>t;function VE(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}VE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cY(t){return!t.ctrlKey&&!t.button}function uY(){return this.parentNode}function dY(t,e){return e??{x:t.x,y:t.y}}function fY(){return navigator.maxTouchPoints||"ontouchstart"in this}function h2(){var t=cY,e=uY,n=dY,r=fY,i={},s=Zb("start","drag","end"),o=0,l,u,f,p,h=0;function b(A){A.on("mousedown.drag",x).filter(r).on("touchstart.drag",I).on("touchmove.drag",T,lY).on("touchend.drag touchcancel.drag",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(A,D){if(!(p||!t.call(this,A,D))){var M=O(this,e.call(this,A,D),A,D,"mouse");M&&(Os(A.view).on("mousemove.drag",_,Fh).on("mouseup.drag",E,Fh),f2(A.view),C0(A),f=!1,l=A.clientX,u=A.clientY,M("start",A))}}function _(A){if(qd(A),!f){var D=A.clientX-l,M=A.clientY-u;f=D*D+M*M>h}i.mouse("drag",A)}function E(A){Os(A.view).on("mousemove.drag mouseup.drag",null),p2(A.view,f),qd(A),i.mouse("end",A)}function I(A,D){if(t.call(this,A,D)){var M=A.changedTouches,W=e.call(this,A,D),P=M.length,R,$;for(R=0;R<P;++R)($=O(this,W,A,D,M[R].identifier,M[R]))&&(C0(A),$("start",A,M[R]))}}function T(A){var D=A.changedTouches,M=D.length,W,P;for(W=0;W<M;++W)(P=i[D[W].identifier])&&(qd(A),P("drag",A,D[W]))}function j(A){var D=A.changedTouches,M=D.length,W,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),W=0;W<M;++W)(P=i[D[W].identifier])&&(C0(A),P("end",A,D[W]))}function O(A,D,M,W,P,R){var $=s.copy(),F=No(R||M,D),U,V,z;if((z=n.call(A,new VE("beforestart",{sourceEvent:M,target:b,identifier:P,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:$}),W))!=null)return U=z.x-F[0]||0,V=z.y-F[1]||0,function te(Y,le,se){var ne=F,oe;switch(Y){case"start":i[P]=te,oe=o++;break;case"end":delete i[P],--o;case"drag":F=No(se||le,D),oe=o;break}$.call(Y,A,new VE(Y,{sourceEvent:le,subject:z,target:b,identifier:P,active:oe,x:F[0]+U,y:F[1]+V,dx:F[0]-ne[0],dy:F[1]-ne[1],dispatch:$}),W)}}return b.filter=function(A){return arguments.length?(t=typeof A=="function"?A:Yg(!!A),b):t},b.container=function(A){return arguments.length?(e=typeof A=="function"?A:Yg(A),b):e},b.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Yg(A),b):n},b.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Yg(!!A),b):r},b.on=function(){var A=s.on.apply(s,arguments);return A===s?b:A},b.clickDistance=function(A){return arguments.length?(h=(A=+A)*A,b):Math.sqrt(h)},b}function EN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function m2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xm(){}var Dh=.7,Gv=1/Dh,Ad="\\s*([+-]?\\d+)\\s*",Lh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pY=/^#([0-9a-f]{3,8})$/,hY=new RegExp(`^rgb\\(${Ad},${Ad},${Ad}\\)$`),mY=new RegExp(`^rgb\\(${na},${na},${na}\\)$`),gY=new RegExp(`^rgba\\(${Ad},${Ad},${Ad},${Lh}\\)$`),yY=new RegExp(`^rgba\\(${na},${na},${na},${Lh}\\)$`),vY=new RegExp(`^hsl\\(${Lh},${na},${na}\\)$`),bY=new RegExp(`^hsla\\(${Lh},${na},${na},${Lh}\\)$`),rR={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};EN(xm,Mh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:iR,formatHex:iR,formatHex8:xY,formatHsl:wY,formatRgb:sR,toString:sR});function iR(){return this.rgb().formatHex()}function xY(){return this.rgb().formatHex8()}function wY(){return g2(this).formatHsl()}function sR(){return this.rgb().formatRgb()}function Mh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pY.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?oR(e):n===3?new ps(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Xg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Xg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hY.exec(t))?new ps(e[1],e[2],e[3],1):(e=mY.exec(t))?new ps(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gY.exec(t))?Xg(e[1],e[2],e[3],e[4]):(e=yY.exec(t))?Xg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vY.exec(t))?cR(e[1],e[2]/100,e[3]/100,1):(e=bY.exec(t))?cR(e[1],e[2]/100,e[3]/100,e[4]):rR.hasOwnProperty(t)?oR(rR[t]):t==="transparent"?new ps(NaN,NaN,NaN,0):null}function oR(t){return new ps(t>>16&255,t>>8&255,t&255,1)}function Xg(t,e,n,r){return r<=0&&(t=e=n=NaN),new ps(t,e,n,r)}function _Y(t){return t instanceof xm||(t=Mh(t)),t?(t=t.rgb(),new ps(t.r,t.g,t.b,t.opacity)):new ps}function HE(t,e,n,r){return arguments.length===1?_Y(t):new ps(t,e,n,r??1)}function ps(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}EN(ps,HE,m2(xm,{brighter(t){return t=t==null?Gv:Math.pow(Gv,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dh:Math.pow(Dh,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ps(Gc(this.r),Gc(this.g),Gc(this.b),Jv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aR,formatHex:aR,formatHex8:SY,formatRgb:lR,toString:lR}));function aR(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}`}function SY(){return`#${Uc(this.r)}${Uc(this.g)}${Uc(this.b)}${Uc((isNaN(this.opacity)?1:this.opacity)*255)}`}function lR(){const t=Jv(this.opacity);return`${t===1?"rgb(":"rgba("}${Gc(this.r)}, ${Gc(this.g)}, ${Gc(this.b)}${t===1?")":`, ${t})`}`}function Jv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Gc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Uc(t){return t=Gc(t),(t<16?"0":"")+t.toString(16)}function cR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Co(t,e,n,r)}function g2(t){if(t instanceof Co)return new Co(t.h,t.s,t.l,t.opacity);if(t instanceof xm||(t=Mh(t)),!t)return new Co;if(t instanceof Co)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Co(o,l,u,t.opacity)}function EY(t,e,n,r){return arguments.length===1?g2(t):new Co(t,e,n,r??1)}function Co(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}EN(Co,EY,m2(xm,{brighter(t){return t=t==null?Gv:Math.pow(Gv,t),new Co(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dh:Math.pow(Dh,t),new Co(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ps(T0(t>=240?t-240:t+120,i,r),T0(t,i,r),T0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Co(uR(this.h),ey(this.s),ey(this.l),Jv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jv(this.opacity);return`${t===1?"hsl(":"hsla("}${uR(this.h)}, ${ey(this.s)*100}%, ${ey(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uR(t){return t=(t||0)%360,t<0?t+360:t}function ey(t){return Math.max(0,Math.min(1,t||0))}function T0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const y2=t=>()=>t;function NY(t,e){return function(n){return t+n*e}}function kY(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function IY(t){return(t=+t)==1?v2:function(e,n){return n-e?kY(e,n,t):y2(isNaN(e)?n:e)}}function v2(t,e){var n=e-t;return n?NY(t,n):y2(isNaN(t)?e:t)}const dR=function t(e){var n=IY(e);function r(i,s){var o=n((i=HE(i)).r,(s=HE(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),f=v2(i.opacity,s.opacity);return function(p){return i.r=o(p),i.g=l(p),i.b=u(p),i.opacity=f(p),i+""}}return r.gamma=t,r}(1);function kl(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var KE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,j0=new RegExp(KE.source,"g");function CY(t){return function(){return t}}function TY(t){return function(e){return t(e)+""}}function jY(t,e){var n=KE.lastIndex=j0.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=KE.exec(t))&&(i=j0.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:kl(r,i)})),n=j0.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?TY(u[0].x):CY(e):(e=u.length,function(f){for(var p=0,h;p<e;++p)l[(h=u[p]).i]=h.x(f);return l.join("")})}var fR=180/Math.PI,QE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function b2(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*fR,skewX:Math.atan(u)*fR,scaleX:o,scaleY:l}}var ty;function OY(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?QE:b2(e.a,e.b,e.c,e.d,e.e,e.f)}function RY(t){return t==null||(ty||(ty=document.createElementNS("http://www.w3.org/2000/svg","g")),ty.setAttribute("transform",t),!(t=ty.transform.baseVal.consolidate()))?QE:(t=t.matrix,b2(t.a,t.b,t.c,t.d,t.e,t.f))}function x2(t,e,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push("translate(",null,e,null,n);_.push({i:E-4,x:kl(f,h)},{i:E-2,x:kl(p,b)})}else(h||b)&&x.push("translate("+h+e+b+n)}function o(f,p,h,b){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),b.push({i:h.push(i(h)+"rotate(",null,r)-2,x:kl(f,p)})):p&&h.push(i(h)+"rotate("+p+r)}function l(f,p,h,b){f!==p?b.push({i:h.push(i(h)+"skewX(",null,r)-2,x:kl(f,p)}):p&&h.push(i(h)+"skewX("+p+r)}function u(f,p,h,b,x,_){if(f!==h||p!==b){var E=x.push(i(x)+"scale(",null,",",null,")");_.push({i:E-4,x:kl(f,h)},{i:E-2,x:kl(p,b)})}else(h!==1||b!==1)&&x.push(i(x)+"scale("+h+","+b+")")}return function(f,p){var h=[],b=[];return f=t(f),p=t(p),s(f.translateX,f.translateY,p.translateX,p.translateY,h,b),o(f.rotate,p.rotate,h,b),l(f.skewX,p.skewX,h,b),u(f.scaleX,f.scaleY,p.scaleX,p.scaleY,h,b),f=p=null,function(x){for(var _=-1,E=b.length,I;++_<E;)h[(I=b[_]).i]=I.x(x);return h.join("")}}}var qY=x2(OY,"px, ","px)","deg)"),AY=x2(RY,", ",")",")"),PY=1e-12;function pR(t){return((t=Math.exp(t))+1/t)/2}function FY(t){return((t=Math.exp(t))-1/t)/2}function DY(t){return((t=Math.exp(2*t))-1)/(t+1)}const LY=function t(e,n,r){function i(s,o){var l=s[0],u=s[1],f=s[2],p=o[0],h=o[1],b=o[2],x=p-l,_=h-u,E=x*x+_*_,I,T;if(E<PY)T=Math.log(b/f)/e,I=function(W){return[l+W*x,u+W*_,f*Math.exp(e*W*T)]};else{var j=Math.sqrt(E),O=(b*b-f*f+r*E)/(2*f*n*j),A=(b*b-f*f-r*E)/(2*b*n*j),D=Math.log(Math.sqrt(O*O+1)-O),M=Math.log(Math.sqrt(A*A+1)-A);T=(M-D)/e,I=function(W){var P=W*T,R=pR(D),$=f/(n*j)*(R*DY(e*P+D)-FY(D));return[l+$*x,u+$*_,f*R/pR(e*P+D)]}}return I.duration=T*1e3*e/Math.SQRT2,I}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4);var Qd=0,Op=0,vp=0,w2=1e3,Zv,Rp,Yv=0,au=0,Xb=0,$h=typeof performance=="object"&&performance.now?performance:Date,_2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function NN(){return au||(_2(MY),au=$h.now()+Xb)}function MY(){au=0}function Xv(){this._call=this._time=this._next=null}Xv.prototype=S2.prototype={constructor:Xv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?NN():+n)+(e==null?0:+e),!this._next&&Rp!==this&&(Rp?Rp._next=this:Zv=this,Rp=this),this._call=t,this._time=n,GE()},stop:function(){this._call&&(this._call=null,this._time=1/0,GE())}};function S2(t,e,n){var r=new Xv;return r.restart(t,e,n),r}function $Y(){NN(),++Qd;for(var t=Zv,e;t;)(e=au-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Qd}function hR(){au=(Yv=$h.now())+Xb,Qd=Op=0;try{$Y()}finally{Qd=0,zY(),au=0}}function BY(){var t=$h.now(),e=t-Yv;e>w2&&(Xb-=e,Yv=t)}function zY(){for(var t,e=Zv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Zv=n);Rp=t,GE(r)}function GE(t){if(!Qd){Op&&(Op=clearTimeout(Op));var e=t-au;e>24?(t<1/0&&(Op=setTimeout(hR,t-$h.now()-Xb)),vp&&(vp=clearInterval(vp))):(vp||(Yv=$h.now(),vp=setInterval(BY,w2)),Qd=1,_2(hR))}}function mR(t,e,n){var r=new Xv;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var WY=Zb("start","end","cancel","interrupt"),UY=[],E2=0,gR=1,JE=2,Fy=3,yR=4,ZE=5,Dy=6;function ex(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;VY(t,n,{name:e,index:r,group:i,on:WY,tween:UY,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:E2})}function kN(t,e){var n=$o(t,e);if(n.state>E2)throw new Error("too late; already scheduled");return n}function ua(t,e){var n=$o(t,e);if(n.state>Fy)throw new Error("too late; already running");return n}function $o(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function VY(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=S2(s,0,n.time);function s(f){n.state=gR,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var p,h,b,x;if(n.state!==gR)return u();for(p in r)if(x=r[p],x.name===n.name){if(x.state===Fy)return mR(o);x.state===yR?(x.state=Dy,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[p]):+p<e&&(x.state=Dy,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[p])}if(mR(function(){n.state===Fy&&(n.state=yR,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=JE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===JE){for(n.state=Fy,i=new Array(b=n.tween.length),p=0,h=-1;p<b;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=x);i.length=h+1}}function l(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=ZE,1),h=-1,b=i.length;++h<b;)i[h].call(t,p);n.state===ZE&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Dy,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Ly(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>JE&&r.state<ZE,r.state=Dy,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function HY(t){return this.each(function(){Ly(this,t)})}function KY(t,e){var n,r;return function(){var i=ua(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function QY(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ua(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,f=i.length;u<f;++u)if(i[u].name===e){i[u]=l;break}u===f&&i.push(l)}s.tween=i}}function GY(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=$o(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?KY:QY)(n,t,e))}function IN(t,e,n){var r=t._id;return t.each(function(){var i=ua(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return $o(i,r).value[e]}}function N2(t,e){var n;return(typeof e=="number"?kl:e instanceof Mh?dR:(n=Mh(e))?(e=n,dR):jY)(t,e)}function JY(t){return function(){this.removeAttribute(t)}}function ZY(t){return function(){this.removeAttributeNS(t.space,t.local)}}function YY(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function XY(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function eX(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function tX(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function nX(t,e){var n=Yb(t),r=n==="transform"?AY:N2;return this.attrTween(t,typeof e=="function"?(n.local?tX:eX)(n,r,IN(this,"attr."+t,e)):e==null?(n.local?ZY:JY)(n):(n.local?XY:YY)(n,r,e))}function rX(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function iX(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function sX(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&iX(t,s)),n}return i._value=e,i}function oX(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&rX(t,s)),n}return i._value=e,i}function aX(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Yb(t);return this.tween(n,(r.local?sX:oX)(r,e))}function lX(t,e){return function(){kN(this,t).delay=+e.apply(this,arguments)}}function cX(t,e){return e=+e,function(){kN(this,t).delay=e}}function uX(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lX:cX)(e,t)):$o(this.node(),e).delay}function dX(t,e){return function(){ua(this,t).duration=+e.apply(this,arguments)}}function fX(t,e){return e=+e,function(){ua(this,t).duration=e}}function pX(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dX:fX)(e,t)):$o(this.node(),e).duration}function hX(t,e){if(typeof e!="function")throw new Error;return function(){ua(this,t).ease=e}}function mX(t){var e=this._id;return arguments.length?this.each(hX(e,t)):$o(this.node(),e).ease}function gX(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ua(this,t).ease=n}}function yX(t){if(typeof t!="function")throw new Error;return this.each(gX(this._id,t))}function vX(t){typeof t!="function"&&(t=n2(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,f=0;f<o;++f)(u=s[f])&&t.call(u,u.__data__,f,s)&&l.push(u);return new Va(r,this._parents,this._name,this._id)}function bX(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],f=n[l],p=u.length,h=o[l]=new Array(p),b,x=0;x<p;++x)(b=u[x]||f[x])&&(h[x]=b);for(;l<r;++l)o[l]=e[l];return new Va(o,this._parents,this._name,this._id)}function xX(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function wX(t,e,n){var r,i,s=xX(e)?kN:ua;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function _X(t,e){var n=this._id;return arguments.length<2?$o(this.node(),n).on.on(t):this.each(wX(n,t,e))}function SX(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function EX(){return this.on("end.remove",SX(this._id))}function NX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_N(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,f=s[o]=new Array(u),p,h,b=0;b<u;++b)(p=l[b])&&(h=t.call(p,p.__data__,b,l))&&("__data__"in p&&(h.__data__=p.__data__),f[b]=h,ex(f[b],e,n,b,f,$o(p,n)));return new Va(s,this._parents,e,n)}function kX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=t2(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],f=u.length,p,h=0;h<f;++h)if(p=u[h]){for(var b=t.call(p,p.__data__,h,u),x,_=$o(p,n),E=0,I=b.length;E<I;++E)(x=b[E])&&ex(x,e,n,E,b,_);s.push(b),o.push(p)}return new Va(s,o,e,n)}var IX=bm.prototype.constructor;function CX(){return new IX(this._groups,this._parents)}function TX(t,e){var n,r,i;return function(){var s=Kd(this,t),o=(this.style.removeProperty(t),Kd(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function k2(t){return function(){this.style.removeProperty(t)}}function jX(t,e,n){var r,i=n+"",s;return function(){var o=Kd(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function OX(t,e,n){var r,i,s;return function(){var o=Kd(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Kd(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function RX(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=ua(this,t),f=u.on,p=u.value[s]==null?l||(l=k2(e)):void 0;(f!==n||i!==p)&&(r=(n=f).copy()).on(o,i=p),u.on=r}}function qX(t,e,n){var r=(t+="")=="transform"?qY:N2;return e==null?this.styleTween(t,TX(t,r)).on("end.style."+t,k2(t)):typeof e=="function"?this.styleTween(t,OX(t,r,IN(this,"style."+t,e))).each(RX(this._id,t)):this.styleTween(t,jX(t,r,e),n).on("end.style."+t,null)}function AX(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function PX(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&AX(t,o,n)),r}return s._value=e,s}function FX(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,PX(t,e,n??""))}function DX(t){return function(){this.textContent=t}}function LX(t){return function(){var e=t(this);this.textContent=e??""}}function MX(t){return this.tween("text",typeof t=="function"?LX(IN(this,"text",t)):DX(t==null?"":t+""))}function $X(t){return function(e){this.textContent=t.call(this,e)}}function BX(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&$X(i)),e}return r._value=t,r}function zX(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,BX(t))}function WX(){for(var t=this._name,e=this._id,n=I2(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)if(u=o[f]){var p=$o(u,e);ex(u,t,n,f,o,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Va(r,this._parents,t,n)}function UX(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var f=ua(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),f.on=e}),i===0&&s()})}var VX=0;function Va(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function I2(){return++VX}var Ca=bm.prototype;Va.prototype={constructor:Va,select:NX,selectAll:kX,selectChild:Ca.selectChild,selectChildren:Ca.selectChildren,filter:vX,merge:bX,selection:CX,transition:WX,call:Ca.call,nodes:Ca.nodes,node:Ca.node,size:Ca.size,empty:Ca.empty,each:Ca.each,on:_X,attr:nX,attrTween:aX,style:qX,styleTween:FX,text:MX,textTween:zX,remove:EX,tween:GY,delay:uX,duration:pX,ease:mX,easeVarying:yX,end:UX,[Symbol.iterator]:Ca[Symbol.iterator]};function HX(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var KX={time:null,delay:0,duration:250,ease:HX};function QX(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function GX(t){var e,n;t instanceof Va?(e=t._id,t=t._name):(e=I2(),(n=KX).time=NN(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,f=0;f<l;++f)(u=o[f])&&ex(u,t,e,f,o,n||QX(u,e));return new Va(r,this._parents,t,e)}bm.prototype.interrupt=HY;bm.prototype.transition=GX;const ny=t=>()=>t;function JX(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Pa(t,e,n){this.k=t,this.x=e,this.y=n}Pa.prototype={constructor:Pa,scale:function(t){return t===1?this:new Pa(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Pa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tx=new Pa(1,0,0);C2.prototype=Pa.prototype;function C2(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tx;return t.__zoom}function O0(t){t.stopImmediatePropagation()}function bp(t){t.preventDefault(),t.stopImmediatePropagation()}function ZX(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function YX(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function vR(){return this.__zoom||tx}function XX(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function eee(){return navigator.maxTouchPoints||"ontouchstart"in this}function tee(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function T2(){var t=ZX,e=YX,n=tee,r=XX,i=eee,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=LY,f=Zb("start","zoom","end"),p,h,b,x=500,_=150,E=0,I=10;function T(z){z.property("__zoom",vR).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(z,te,Y,le){var se=z.selection?z.selection():z;se.property("__zoom",vR),z!==se?D(z,te,Y,le):se.interrupt().each(function(){M(this,arguments).event(le).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},T.scaleBy=function(z,te,Y,le){T.scaleTo(z,function(){var se=this.__zoom.k,ne=typeof te=="function"?te.apply(this,arguments):te;return se*ne},Y,le)},T.scaleTo=function(z,te,Y,le){T.transform(z,function(){var se=e.apply(this,arguments),ne=this.__zoom,oe=Y==null?A(se):typeof Y=="function"?Y.apply(this,arguments):Y,ee=ne.invert(oe),ue=typeof te=="function"?te.apply(this,arguments):te;return n(O(j(ne,ue),oe,ee),se,o)},Y,le)},T.translateBy=function(z,te,Y,le){T.transform(z,function(){return n(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof Y=="function"?Y.apply(this,arguments):Y),e.apply(this,arguments),o)},null,le)},T.translateTo=function(z,te,Y,le,se){T.transform(z,function(){var ne=e.apply(this,arguments),oe=this.__zoom,ee=le==null?A(ne):typeof le=="function"?le.apply(this,arguments):le;return n(tx.translate(ee[0],ee[1]).scale(oe.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof Y=="function"?-Y.apply(this,arguments):-Y),ne,o)},le,se)};function j(z,te){return te=Math.max(s[0],Math.min(s[1],te)),te===z.k?z:new Pa(te,z.x,z.y)}function O(z,te,Y){var le=te[0]-Y[0]*z.k,se=te[1]-Y[1]*z.k;return le===z.x&&se===z.y?z:new Pa(z.k,le,se)}function A(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function D(z,te,Y,le){z.on("start.zoom",function(){M(this,arguments).event(le).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(le).end()}).tween("zoom",function(){var se=this,ne=arguments,oe=M(se,ne).event(le),ee=e.apply(se,ne),ue=Y==null?A(ee):typeof Y=="function"?Y.apply(se,ne):Y,de=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),ye=se.__zoom,we=typeof te=="function"?te.apply(se,ne):te,Ne=u(ye.invert(ue).concat(de/ye.k),we.invert(ue).concat(de/we.k));return function(ze){if(ze===1)ze=we;else{var Oe=Ne(ze),De=de/Oe[2];ze=new Pa(De,ue[0]-Oe[0]*De,ue[1]-Oe[1]*De)}oe.zoom(null,ze)}})}function M(z,te,Y){return!Y&&z.__zooming||new W(z,te)}function W(z,te){this.that=z,this.args=te,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,te),this.taps=0}W.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,te){return this.mouse&&z!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var te=Os(this.that).datum();f.call(z,this.that,new JX(z,{sourceEvent:this.sourceEvent,target:T,type:z,transform:this.that.__zoom,dispatch:f}),te)}};function P(z,...te){if(!t.apply(this,arguments))return;var Y=M(this,te).event(z),le=this.__zoom,se=Math.max(s[0],Math.min(s[1],le.k*Math.pow(2,r.apply(this,arguments)))),ne=No(z);if(Y.wheel)(Y.mouse[0][0]!==ne[0]||Y.mouse[0][1]!==ne[1])&&(Y.mouse[1]=le.invert(Y.mouse[0]=ne)),clearTimeout(Y.wheel);else{if(le.k===se)return;Y.mouse=[ne,le.invert(ne)],Ly(this),Y.start()}bp(z),Y.wheel=setTimeout(oe,_),Y.zoom("mouse",n(O(j(le,se),Y.mouse[0],Y.mouse[1]),Y.extent,o));function oe(){Y.wheel=null,Y.end()}}function R(z,...te){if(b||!t.apply(this,arguments))return;var Y=z.currentTarget,le=M(this,te,!0).event(z),se=Os(z.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),ne=No(z,Y),oe=z.clientX,ee=z.clientY;f2(z.view),O0(z),le.mouse=[ne,this.__zoom.invert(ne)],Ly(this),le.start();function ue(ye){if(bp(ye),!le.moved){var we=ye.clientX-oe,Ne=ye.clientY-ee;le.moved=we*we+Ne*Ne>E}le.event(ye).zoom("mouse",n(O(le.that.__zoom,le.mouse[0]=No(ye,Y),le.mouse[1]),le.extent,o))}function de(ye){se.on("mousemove.zoom mouseup.zoom",null),p2(ye.view,le.moved),bp(ye),le.event(ye).end()}}function $(z,...te){if(t.apply(this,arguments)){var Y=this.__zoom,le=No(z.changedTouches?z.changedTouches[0]:z,this),se=Y.invert(le),ne=Y.k*(z.shiftKey?.5:2),oe=n(O(j(Y,ne),le,se),e.apply(this,te),o);bp(z),l>0?Os(this).transition().duration(l).call(D,oe,le,z):Os(this).call(T.transform,oe,le,z)}}function F(z,...te){if(t.apply(this,arguments)){var Y=z.touches,le=Y.length,se=M(this,te,z.changedTouches.length===le).event(z),ne,oe,ee,ue;for(O0(z),oe=0;oe<le;++oe)ee=Y[oe],ue=No(ee,this),ue=[ue,this.__zoom.invert(ue),ee.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ue[2]&&(se.touch1=ue,se.taps=0):(se.touch0=ue,ne=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),ne&&(se.taps<2&&(h=ue[0],p=setTimeout(function(){p=null},x)),Ly(this),se.start())}}function U(z,...te){if(this.__zooming){var Y=M(this,te).event(z),le=z.changedTouches,se=le.length,ne,oe,ee,ue;for(bp(z),ne=0;ne<se;++ne)oe=le[ne],ee=No(oe,this),Y.touch0&&Y.touch0[2]===oe.identifier?Y.touch0[0]=ee:Y.touch1&&Y.touch1[2]===oe.identifier&&(Y.touch1[0]=ee);if(oe=Y.that.__zoom,Y.touch1){var de=Y.touch0[0],ye=Y.touch0[1],we=Y.touch1[0],Ne=Y.touch1[1],ze=(ze=we[0]-de[0])*ze+(ze=we[1]-de[1])*ze,Oe=(Oe=Ne[0]-ye[0])*Oe+(Oe=Ne[1]-ye[1])*Oe;oe=j(oe,Math.sqrt(ze/Oe)),ee=[(de[0]+we[0])/2,(de[1]+we[1])/2],ue=[(ye[0]+Ne[0])/2,(ye[1]+Ne[1])/2]}else if(Y.touch0)ee=Y.touch0[0],ue=Y.touch0[1];else return;Y.zoom("touch",n(O(oe,ee,ue),Y.extent,o))}}function V(z,...te){if(this.__zooming){var Y=M(this,te).event(z),le=z.changedTouches,se=le.length,ne,oe;for(O0(z),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),ne=0;ne<se;++ne)oe=le[ne],Y.touch0&&Y.touch0[2]===oe.identifier?delete Y.touch0:Y.touch1&&Y.touch1[2]===oe.identifier&&delete Y.touch1;if(Y.touch1&&!Y.touch0&&(Y.touch0=Y.touch1,delete Y.touch1),Y.touch0)Y.touch0[1]=this.__zoom.invert(Y.touch0[0]);else if(Y.end(),Y.taps===2&&(oe=No(oe,this),Math.hypot(h[0]-oe[0],h[1]-oe[1])<I)){var ee=Os(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return T.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:ny(+z),T):r},T.filter=function(z){return arguments.length?(t=typeof z=="function"?z:ny(!!z),T):t},T.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:ny(!!z),T):i},T.extent=function(z){return arguments.length?(e=typeof z=="function"?z:ny([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),T):e},T.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],T):[s[0],s[1]]},T.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],T):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},T.constrain=function(z){return arguments.length?(n=z,T):n},T.duration=function(z){return arguments.length?(l=+z,T):l},T.interpolate=function(z){return arguments.length?(u=z,T):u},T.on=function(){var z=f.on.apply(f,arguments);return z===f?T:z},T.clickDistance=function(z){return arguments.length?(E=(z=+z)*z,T):Math.sqrt(E)},T.tapDistance=function(z){return arguments.length?(I=+z,T):I},T}const Qa={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},Bh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],j2=["Enter"," ","Escape"];var Gd;(function(t){t.Strict="strict",t.Loose="loose"})(Gd||(Gd={}));var Jc;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Jc||(Jc={}));var zh;(function(t){t.Partial="partial",t.Full="full"})(zh||(zh={}));const O2={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ql;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ql||(ql={}));var Wh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Wh||(Wh={}));var Dt;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Dt||(Dt={}));const bR={[Dt.Left]:Dt.Right,[Dt.Right]:Dt.Left,[Dt.Top]:Dt.Bottom,[Dt.Bottom]:Dt.Top};function R2(t){return t===null?null:t?"valid":"invalid"}const q2=t=>"id"in t&&"source"in t&&"target"in t,nee=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),CN=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),wm=(t,e=[0,0])=>{const{width:n,height:r}=Ga(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},ree=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):CN(i)?i:e.nodeLookup.get(i.id));const l=o?eb(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return nx(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return rx(n)},_m=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=eb(r);n=nx(n,i)}}),rx(n)},A2=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Sm(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const f of t.values()){const{measured:p,selectable:h=!0,hidden:b=!1}=f;if(o&&!h||b)continue;const x=p.width??f.width??f.initialWidth??null,_=p.height??f.height??f.initialHeight??null,E=Uh(l,Zd(f)),I=(x??0)*(_??0),T=s&&E>0;(!f.internals.handleBounds||T||E>=I||f.dragging)&&u.push(f)}return u},iee=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function YE(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function XE({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!1);const l=_m(t),u=TN(l,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration}),Promise.resolve(!0)}function P2({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:f}=l?l.internals.positionAbsolute:{x:0,y:0},p=o.origin??r;let h=i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Qa.error005());else{const x=l.measured.width,_=l.measured.height;x&&_&&(h=[[u,f],[u+x,f+_]])}else l&&Yd(o.extent)&&(h=[[o.extent[0][0]+u,o.extent[0][1]+f],[o.extent[1][0]+u,o.extent[1][1]+f]]);const b=Yd(h)?lu(e,h,o.measured):e;return{position:{x:b.x-u+o.measured.width*p[0],y:b.y-f+o.measured.height*p[1]},positionAbsolute:b}}async function see({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(b=>b.id)),o=[];for(const b of n){if(b.deletable===!1)continue;const x=s.has(b.id),_=!x&&b.parentId&&o.find(E=>E.id===b.parentId);(x||_)&&o.push(b)}const l=new Set(e.map(b=>b.id)),u=r.filter(b=>b.deletable!==!1),p=iee(o,u);for(const b of u)l.has(b.id)&&!p.find(_=>_.id===b.id)&&p.push(b);if(!i)return{edges:p,nodes:o};const h=await i({nodes:o,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:o}:{edges:[],nodes:[]}:h}const Jd=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),lu=(t={x:0,y:0},e,n)=>({x:Jd(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Jd(t.y,e[0][1],e[1][1]-(n?.height??0))});function F2(t,e,n){const{width:r,height:i}=Ga(n),{x:s,y:o}=n.internals.positionAbsolute;return lu(t,[[s,o],[s+r,o+i]],e)}const xR=(t,e,n)=>t<e?Jd(Math.abs(t-e),1,e)/e:t>n?-Jd(Math.abs(t-n),1,e)/e:0,D2=(t,e,n=15,r=40)=>{const i=xR(t.x,r,e.width-r)*n,s=xR(t.y,r,e.height-r)*n;return[i,s]},nx=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),e1=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),rx=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Zd=(t,e=[0,0])=>{const{x:n,y:r}=CN(t)?t.internals.positionAbsolute:wm(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},eb=(t,e=[0,0])=>{const{x:n,y:r}=CN(t)?t.internals.positionAbsolute:wm(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},L2=(t,e)=>rx(nx(e1(t),e1(e))),Uh=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},wR=t=>Ro(t.width)&&Ro(t.height)&&Ro(t.x)&&Ro(t.y),Ro=t=>!isNaN(t)&&isFinite(t),oee=(t,e)=>{},ix=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Sm=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?ix(l,o):l},M2=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r}),TN=(t,e,n,r,i,s)=>{const o=e/(t.width*(1+s)),l=n/(t.height*(1+s)),u=Math.min(o,l),f=Jd(u,r,i),p=t.x+t.width/2,h=t.y+t.height/2,b=e/2-p*f,x=n/2-h*f;return{x:b,y:x,zoom:f}},tb=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Yd(t){return t!==void 0&&t!=="parent"}function Ga(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function $2(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function B2(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function _R(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function rh(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=La(t),l=Sm({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:f}=n?ix(l,e):l;return{xSnapped:u,ySnapped:f,...l}}const sx=t=>({width:t.offsetWidth,height:t.offsetHeight}),z2=t=>t?.getRootNode?.()||window?.document,aee=["INPUT","SELECT","TEXTAREA"];function t1(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:aee.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const W2=t=>"clientX"in t,La=(t,e)=>{const n=W2(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},SR=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...sx(o)}})};function U2({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,f=e*.125+s*.375+l*.375+r*.125,p=Math.abs(u-t),h=Math.abs(f-e);return[u,f,p,h]}function ry(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ER({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Dt.Left:return[e-ry(e-r,s),n];case Dt.Right:return[e+ry(r-e,s),n];case Dt.Top:return[e,n-ry(n-i,s)];case Dt.Bottom:return[e,n+ry(i-n,s)]}}function jN({sourceX:t,sourceY:e,sourcePosition:n=Dt.Bottom,targetX:r,targetY:i,targetPosition:s=Dt.Top,curvature:o=.25}){const[l,u]=ER({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[f,p]=ER({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[h,b,x,_]=U2({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:f,targetControlY:p});return[`M${t},${e} C${l},${u} ${f},${p} ${r},${i}`,h,b,x,_]}function V2({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function lee({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const s=n||e.selected||t.selected,o=Math.max(t.internals.z||0,e.internals.z||0,1e3);return r+(s?o:0)}function cee({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=nx(eb(t),eb(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Uh(o,rx(s))>0}const uee=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,dee=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),H2=(t,e)=>{if(!t.source||!t.target)return e;let n;return q2(t)?n={...t}:n={...t,id:uee(t)},dee(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function ON({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=V2({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const NR={[Dt.Left]:{x:-1,y:0},[Dt.Right]:{x:1,y:0},[Dt.Top]:{x:0,y:-1},[Dt.Bottom]:{x:0,y:1}},fee=({source:t,sourcePosition:e=Dt.Bottom,target:n})=>e===Dt.Left||e===Dt.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},kR=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function pee({source:t,sourcePosition:e=Dt.Bottom,target:n,targetPosition:r=Dt.Top,center:i,offset:s}){const o=NR[e],l=NR[r],u={x:t.x+o.x*s,y:t.y+o.y*s},f={x:n.x+l.x*s,y:n.y+l.y*s},p=fee({source:u,sourcePosition:e,target:f}),h=p.x!==0?"x":"y",b=p[h];let x=[],_,E;const I={x:0,y:0},T={x:0,y:0},[j,O,A,D]=V2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(o[h]*l[h]===-1){_=i.x??j,E=i.y??O;const W=[{x:_,y:u.y},{x:_,y:f.y}],P=[{x:u.x,y:E},{x:f.x,y:E}];o[h]===b?x=h==="x"?W:P:x=h==="x"?P:W}else{const W=[{x:u.x,y:f.y}],P=[{x:f.x,y:u.y}];if(h==="x"?x=o.x===b?P:W:x=o.y===b?W:P,e===r){const V=Math.abs(t[h]-n[h]);if(V<=s){const z=Math.min(s-1,s-V);o[h]===b?I[h]=(u[h]>t[h]?-1:1)*z:T[h]=(f[h]>n[h]?-1:1)*z}}if(e!==r){const V=h==="x"?"y":"x",z=o[h]===l[V],te=u[V]>f[V],Y=u[V]<f[V];(o[h]===1&&(!z&&te||z&&Y)||o[h]!==1&&(!z&&Y||z&&te))&&(x=h==="x"?W:P)}const R={x:u.x+I.x,y:u.y+I.y},$={x:f.x+T.x,y:f.y+T.y},F=Math.max(Math.abs(R.x-x[0].x),Math.abs($.x-x[0].x)),U=Math.max(Math.abs(R.y-x[0].y),Math.abs($.y-x[0].y));F>=U?(_=(R.x+$.x)/2,E=x[0].y):(_=x[0].x,E=(R.y+$.y)/2)}return[[t,{x:u.x+I.x,y:u.y+I.y},...x,{x:f.x+T.x,y:f.y+T.y},n],_,E,A,D]}function hee(t,e,n,r){const i=Math.min(kR(t,e)/2,kR(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*p}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function n1({sourceX:t,sourceY:e,sourcePosition:n=Dt.Bottom,targetX:r,targetY:i,targetPosition:s=Dt.Top,borderRadius:o=5,centerX:l,centerY:u,offset:f=20}){const[p,h,b,x,_]=pee({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:f});return[p.reduce((I,T,j)=>{let O="";return j>0&&j<p.length-1?O=hee(p[j-1],T,p[j+1],o):O=`${j===0?"M":"L"}${T.x} ${T.y}`,I+=O,I},""),h,b,x,_]}function IR(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function mee(t){const{sourceNode:e,targetNode:n}=t;if(!IR(e)||!IR(n))return null;const r=e.internals.handleBounds||CR(e.handles),i=n.internals.handleBounds||CR(n.handles),s=TR(r?.source??[],t.sourceHandle),o=TR(t.connectionMode===Gd.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Qa.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Dt.Bottom,u=o?.position||Dt.Top,f=Vh(e,s,l),p=Vh(n,o,u);return{sourceX:f.x,sourceY:f.y,targetX:p.x,targetY:p.y,sourcePosition:l,targetPosition:u}}function CR(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Vh(t,e,n=Dt.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Ga(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Dt.Top:return{x:i+o/2,y:s};case Dt.Right:return{x:i+o,y:s+l/2};case Dt.Bottom:return{x:i+o/2,y:s+l};case Dt.Left:return{x:i,y:s+l/2}}}function TR(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function r1(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function gee(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const f=r1(u,e);s.has(f)||(o.push({id:f,color:u.color||n,...u}),s.add(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const RN={nodeOrigin:[0,0],nodeExtent:Bh,elevateNodesOnSelect:!0,defaults:{}},yee={...RN,checkEquality:!0};function qN(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function vee(t,e,n){const r=qN(RN,n);for(const i of t.values())if(i.parentId)AN(i,t,e,r);else{const s=wm(i,r.nodeOrigin),o=Yd(i.extent)?i.extent:r.nodeExtent,l=lu(s,o,Ga(i));i.internals.positionAbsolute=l}}function i1(t,e,n,r){const i=qN(yee,r),s=new Map(e),o=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const l of t){let u=s.get(l.id);if(i.checkEquality&&l===u?.internals.userNode)e.set(l.id,u);else{const f=wm(l,i.nodeOrigin),p=Yd(l.extent)?l.extent:i.nodeExtent,h=lu(f,p,Ga(l));u={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:l.measured?u?.internals.handleBounds:void 0,z:K2(l,o),userNode:l}},e.set(l.id,u)}l.parentId&&AN(u,e,n,r)}}function bee(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function AN(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=qN(RN,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}bee(t,n);const f=i?1e3:0,{x:p,y:h,z:b}=xee(t,u,s,o,f),{positionAbsolute:x}=t.internals,_=p!==x.x||h!==x.y;(_||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:p,y:h}:x,z:b}})}function K2(t,e){return(Ro(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function xee(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=Ga(t),u=wm(t,n),f=Yd(t.extent)?lu(u,t.extent,l):u;let p=lu({x:s+f.x,y:o+f.y},r,l);t.extent==="parent"&&(p=F2(p,l,e));const h=K2(t,i),b=e.internals.z??0;return{x:p.x,y:p.y,z:b>h?b:h}}function PN(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Zd(l),f=L2(u,o.rect);s.set(o.parentId,{expandedRect:f,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const f=l.internals.positionAbsolute,p=Ga(l),h=l.origin??r,b=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,x=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,_=Math.max(p.width,Math.round(o.width)),E=Math.max(p.height,Math.round(o.height)),I=(_-p.width)*h[0],T=(E-p.height)*h[1];(b>0||x>0||I||T)&&(i.push({id:u,type:"position",position:{x:l.position.x-b+I,y:l.position.y-x+T}}),n.get(u)?.forEach(j=>{t.some(O=>O.id===j.id)||i.push({id:j.id,type:"position",position:{x:j.position.x+b,y:j.position.y+x}})})),(p.width<o.width||p.height<o.height||b||x)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:_+(b?h[0]*b-I:0),height:E+(x?h[1]*x-T:0)}})}),i}function wee(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],f=window.getComputedStyle(o),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=[];for(const b of t.values()){const x=e.get(b.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),l=!0;continue}const _=sx(b.nodeElement),E=x.measured.width!==_.width||x.measured.height!==_.height;if(!!(_.width&&_.height&&(E||!x.internals.handleBounds||b.force))){const T=b.nodeElement.getBoundingClientRect(),j=Yd(x.extent)?x.extent:s;let{positionAbsolute:O}=x.internals;x.parentId&&x.extent==="parent"?O=F2(O,_,e.get(x.parentId)):j&&(O=lu(O,j,_));const A={...x,measured:_,internals:{...x.internals,positionAbsolute:O,handleBounds:{source:SR("source",b.nodeElement,T,p,x.id),target:SR("target",b.nodeElement,T,p,x.id)}}};e.set(x.id,A),x.parentId&&AN(A,e,n,{nodeOrigin:i}),l=!0,E&&(u.push({id:x.id,type:"dimensions",dimensions:_}),x.expandParent&&x.parentId&&h.push({id:x.id,parentId:x.parentId,rect:Zd(A,i)}))}}if(h.length>0){const b=PN(h,e,n,i);u.push(...b)}return{changes:u,updatedInternals:l}}async function _ee({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function jR(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,e))}}function Q2(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},f=`${i}-${o}--${s}-${l}`,p=`${s}-${l}--${i}-${o}`;jR("source",u,p,t,i,o),jR("target",u,f,t,s,l),e.set(r.id,r)}}function G2(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:G2(n,e):!1}function OR(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function See(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!G2(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function R0({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function Eee({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,f={x:0,y:0},p=null,h=!1,b=null,x=!1;function _({noDragClassName:I,handleSelector:T,domNode:j,isSelectable:O,nodeId:A,nodeClickDistance:D=0}){b=Os(j);function M({x:$,y:F},U){const{nodeLookup:V,nodeExtent:z,snapGrid:te,snapToGrid:Y,nodeOrigin:le,onNodeDrag:se,onSelectionDrag:ne,onError:oe,updateNodePositions:ee}=e();s={x:$,y:F};let ue=!1,de={x:0,y:0,x2:0,y2:0};if(l.size>1&&z){const ye=_m(l);de=e1(ye)}for(const[ye,we]of l){if(!V.has(ye))continue;let Ne={x:$-we.distance.x,y:F-we.distance.y};Y&&(Ne=ix(Ne,te));let ze=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(l.size>1&&z&&!we.extent){const{positionAbsolute:Je}=we.internals,Xe=Je.x-de.x+z[0][0],Ue=Je.x+we.measured.width-de.x2+z[1][0],ct=Je.y-de.y+z[0][1],_t=Je.y+we.measured.height-de.y2+z[1][1];ze=[[Xe,ct],[Ue,_t]]}const{position:Oe,positionAbsolute:De}=P2({nodeId:ye,nextPosition:Ne,nodeLookup:V,nodeExtent:ze,nodeOrigin:le,onError:oe});ue=ue||we.position.x!==Oe.x||we.position.y!==Oe.y,we.position=Oe,we.internals.positionAbsolute=De}if(ue&&(ee(l,!0),U&&(r||se||!A&&ne))){const[ye,we]=R0({nodeId:A,dragItems:l,nodeLookup:V});r?.(U,l,ye,we),se?.(U,ye,we),A||ne?.(U,we)}}async function W(){if(!p)return;const{transform:$,panBy:F,autoPanSpeed:U}=e(),[V,z]=D2(f,p,U);(V!==0||z!==0)&&(s.x=(s.x??0)-V/$[2],s.y=(s.y??0)-z/$[2],await F({x:V,y:z})&&M(s,null)),o=requestAnimationFrame(W)}function P($){const{nodeLookup:F,multiSelectionActive:U,nodesDraggable:V,transform:z,snapGrid:te,snapToGrid:Y,selectNodesOnDrag:le,onNodeDragStart:se,onSelectionDragStart:ne,unselectNodesAndEdges:oe}=e();h=!0,(!le||!O)&&!U&&A&&(F.get(A)?.selected||oe()),O&&le&&A&&t?.(A);const ee=rh($.sourceEvent,{transform:z,snapGrid:te,snapToGrid:Y,containerBounds:p});if(s=ee,l=See(F,V,ee,A),l.size>0&&(n||se||!A&&ne)){const[ue,de]=R0({nodeId:A,dragItems:l,nodeLookup:F});n?.($.sourceEvent,l,ue,de),se?.($.sourceEvent,ue,de),A||ne?.($.sourceEvent,de)}}const R=h2().clickDistance(D).on("start",$=>{const{domNode:F,nodeDragThreshold:U,transform:V,snapGrid:z,snapToGrid:te}=e();p=F?.getBoundingClientRect()||null,x=!1,U===0&&P($),s=rh($.sourceEvent,{transform:V,snapGrid:z,snapToGrid:te,containerBounds:p}),f=La($.sourceEvent,p)}).on("drag",$=>{const{autoPanOnNodeDrag:F,transform:U,snapGrid:V,snapToGrid:z,nodeDragThreshold:te,nodeLookup:Y}=e(),le=rh($.sourceEvent,{transform:U,snapGrid:V,snapToGrid:z,containerBounds:p});if(($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1||A&&!Y.has(A))&&(x=!0),!x){if(!u&&F&&h&&(u=!0,W()),!h){const se=le.xSnapped-(s.x??0),ne=le.ySnapped-(s.y??0);Math.sqrt(se*se+ne*ne)>te&&P($)}(s.x!==le.xSnapped||s.y!==le.ySnapped)&&l&&h&&(f=La($.sourceEvent,p),M(le,$.sourceEvent))}}).on("end",$=>{if(!(!h||x)&&(u=!1,h=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:U,onNodeDragStop:V,onSelectionDragStop:z}=e();if(U(l,!1),i||V||!A&&z){const[te,Y]=R0({nodeId:A,dragItems:l,nodeLookup:F,dragging:!1});i?.($.sourceEvent,l,te,Y),V?.($.sourceEvent,te,Y),A||z?.($.sourceEvent,Y)}}}).filter($=>{const F=$.target;return!$.button&&(!I||!OR(F,`.${I}`,j))&&(!T||OR(F,T,j))});b.call(R)}function E(){b?.on(".drag",null)}return{update:_,destroy:E}}function Nee(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Uh(i,Zd(s))>0&&r.push(s);return r}const kee=250;function Iee(t,e,n,r){let i=[],s=1/0;const o=Nee(t,n,e+kee);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:p,y:h}=Vh(l,f,f.position,!0),b=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(h-t.y,2));b>e||(b<s?(i=[{...f,x:p,y:h}],s=b):b===s&&i.push({...f,x:p,y:h}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function J2(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(f=>f.id===n):l?.[0])??null;return u&&s?{...u,...Vh(o,u,u.position,!0)}:u}function Z2(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Cee(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const Y2=()=>!0;function Tee(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:f,autoPanOnConnect:p,flowId:h,panBy:b,cancelConnection:x,onConnectStart:_,onConnect:E,onConnectEnd:I,isValidConnection:T=Y2,onReconnectEnd:j,updateConnection:O,getTransform:A,getFromHandle:D,autoPanSpeed:M}){const W=z2(t.target);let P=0,R;const{x:$,y:F}=La(t),U=W?.elementFromPoint($,F),V=Z2(s,U),z=l?.getBoundingClientRect();if(!z||!V)return;const te=J2(i,V,r,u,e);if(!te)return;let Y=La(t,z),le=!1,se=null,ne=!1,oe=null;function ee(){if(!p||!z)return;const[De,Je]=D2(Y,z,M);b({x:De,y:Je}),P=requestAnimationFrame(ee)}const ue={...te,nodeId:i,type:V,position:te.position},de=u.get(i),we={inProgress:!0,isValid:null,from:Vh(de,ue,Dt.Left,!0),fromHandle:ue,fromPosition:ue.position,fromNode:de,to:Y,toHandle:null,toPosition:bR[ue.position],toNode:null};O(we);let Ne=we;_?.(t,{nodeId:i,handleId:r,handleType:V});function ze(De){if(!D()||!ue){Oe(De);return}const Je=A();Y=La(De,z),R=Iee(Sm(Y,Je,!1,[1,1]),n,u,ue),le||(ee(),le=!0);const Xe=X2(De,{handle:R,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:T,doc:W,lib:f,flowId:h,nodeLookup:u});oe=Xe.handleDomNode,se=Xe.connection,ne=Cee(!!R,Xe.isValid);const Ue={...Ne,isValid:ne,to:R&&ne?M2({x:R.x,y:R.y},Je):Y,toHandle:Xe.toHandle,toPosition:ne&&Xe.toHandle?Xe.toHandle.position:bR[ue.position],toNode:Xe.toHandle?u.get(Xe.toHandle.nodeId):null};ne&&R&&Ne.toHandle&&Ue.toHandle&&Ne.toHandle.type===Ue.toHandle.type&&Ne.toHandle.nodeId===Ue.toHandle.nodeId&&Ne.toHandle.id===Ue.toHandle.id&&Ne.to.x===Ue.to.x&&Ne.to.y===Ue.to.y||(O(Ue),Ne=Ue)}function Oe(De){(R||oe)&&se&&ne&&E?.(se);const{inProgress:Je,...Xe}=Ne,Ue={...Xe,toPosition:Ne.toHandle?Ne.toPosition:null};I?.(De,Ue),s&&j?.(De,Ue),x(),cancelAnimationFrame(P),le=!1,ne=!1,se=null,oe=null,W.removeEventListener("mousemove",ze),W.removeEventListener("mouseup",Oe),W.removeEventListener("touchmove",ze),W.removeEventListener("touchend",Oe)}W.addEventListener("mousemove",ze),W.addEventListener("mouseup",Oe),W.addEventListener("touchmove",ze),W.addEventListener("touchend",Oe)}function X2(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:f=Y2,nodeLookup:p}){const h=s==="target",b=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:_}=La(t),E=o.elementFromPoint(x,_),I=E?.classList.contains(`${l}-flow__handle`)?E:b,T={handleDomNode:I,isValid:!1,connection:null,toHandle:null};if(I){const j=Z2(void 0,I),O=I.getAttribute("data-nodeid"),A=I.getAttribute("data-handleid"),D=I.classList.contains("connectable"),M=I.classList.contains("connectableend");if(!O||!j)return T;const W={source:h?O:r,sourceHandle:h?A:i,target:h?r:O,targetHandle:h?i:A};T.connection=W;const R=D&&M&&(n===Gd.Strict?h&&j==="source"||!h&&j==="target":O!==r||A!==i);T.isValid=R&&f(W),T.toHandle=J2(O,j,A,p,n,!1)}return T}const s1={onPointerDown:Tee,isValid:X2};function jee({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Os(t);function s({translateExtent:l,width:u,height:f,zoomStep:p=10,pannable:h=!0,zoomable:b=!0,inversePan:x=!1}){const _=O=>{const A=n();if(O.sourceEvent.type!=="wheel"||!e)return;const D=-O.sourceEvent.deltaY*(O.sourceEvent.deltaMode===1?.05:O.sourceEvent.deltaMode?1:.002)*p,M=A[2]*Math.pow(2,D);e.scaleTo(M)};let E=[0,0];const I=O=>{(O.sourceEvent.type==="mousedown"||O.sourceEvent.type==="touchstart")&&(E=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY])},T=O=>{const A=n();if(O.sourceEvent.type!=="mousemove"&&O.sourceEvent.type!=="touchmove"||!e)return;const D=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY],M=[D[0]-E[0],D[1]-E[1]];E=D;const W=r()*Math.max(A[2],Math.log(A[2]))*(x?-1:1),P={x:A[0]-M[0]*W,y:A[1]-M[1]*W},R=[[0,0],[u,f]];e.setViewportConstrained({x:P.x,y:P.y,zoom:A[2]},R,l)},j=T2().on("start",I).on("zoom",h?T:null).on("zoom.wheel",b?_:null);i.call(j,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:No}}const Oee=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ox=t=>({x:t.x,y:t.y,zoom:t.k}),q0=({x:t,y:e,zoom:n})=>tx.translate(t,e).scale(n),hd=(t,e)=>t.target.closest(`.${e}`),eL=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),A0=(t,e=0,n=()=>{})=>{const r=typeof e=="number"&&e>0;return r||n(),r?t.transition().duration(e).on("end",n):t},tL=t=>{const e=t.ctrlKey&&tb()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Ree({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:f}){return p=>{if(hd(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&o){const I=No(p),T=tL(p),j=h*Math.pow(2,T);r.scaleTo(n,j,I,p);return}const b=p.deltaMode===1?20:1;let x=i===Jc.Vertical?0:p.deltaX*b,_=i===Jc.Horizontal?0:p.deltaY*b;!tb()&&p.shiftKey&&i!==Jc.Vertical&&(x=p.deltaY*b,_=0),r.translateBy(n,-(x/h)*s,-(_/h)*s,{internal:!0});const E=ox(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(p,E)),t.isPanScrolling&&(u?.(p,E),t.panScrollTimeout=setTimeout(()=>{f?.(p,E),t.isPanScrolling=!1},150))}}function qee({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){if(!e&&r.type==="wheel"&&!r.ctrlKey||hd(r,t))return null;r.preventDefault(),n.call(this,r,i)}}function Aee({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=ox(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Pee({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&eL(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,ox(s.transform))}}function Fee({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&eL(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&Oee(t.prevViewport,o.transform))){const l=ox(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Dee({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:f}){return p=>{const h=t||e,b=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(hd(p,`${f}-flow__node`)||hd(p,`${f}-flow__edge`)))return!0;if(!r&&!h&&!i&&!s&&!n||o||hd(p,l)&&p.type==="wheel"||hd(p,u)&&(p.type!=="wheel"||i&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!h&&!i&&!b&&p.type==="wheel"||!r&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(r)&&!r.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Lee({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:f}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),b=T2().clickDistance(!Ro(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),x=Os(t).call(b);O({x:s.x,y:s.y,zoom:Jd(s.zoom,e,n)},[[0,0],[h.width,h.height]],i);const _=x.on("wheel.zoom"),E=x.on("dblclick.zoom");b.wheelDelta(tL);function I(U,V){return x?new Promise(z=>{b?.transform(A0(x,V?.duration,()=>z(!0)),U)}):Promise.resolve(!1)}function T({noWheelClassName:U,noPanClassName:V,onPaneContextMenu:z,userSelectionActive:te,panOnScroll:Y,panOnDrag:le,panOnScrollMode:se,panOnScrollSpeed:ne,preventScrolling:oe,zoomOnPinch:ee,zoomOnScroll:ue,zoomOnDoubleClick:de,zoomActivationKeyPressed:ye,lib:we,onTransformChange:Ne}){te&&!p.isZoomingOrPanning&&j();const Oe=Y&&!ye&&!te?Ree({zoomPanValues:p,noWheelClassName:U,d3Selection:x,d3Zoom:b,panOnScrollMode:se,panOnScrollSpeed:ne,zoomOnPinch:ee,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):qee({noWheelClassName:U,preventScrolling:oe,d3ZoomHandler:_});if(x.on("wheel.zoom",Oe,{passive:!1}),!te){const Je=Aee({zoomPanValues:p,onDraggingChange:f,onPanZoomStart:l});b.on("start",Je);const Xe=Pee({zoomPanValues:p,panOnDrag:le,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:Ne});b.on("zoom",Xe);const Ue=Fee({zoomPanValues:p,panOnDrag:le,panOnScroll:Y,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:f});b.on("end",Ue)}const De=Dee({zoomActivationKeyPressed:ye,panOnDrag:le,zoomOnScroll:ue,panOnScroll:Y,zoomOnDoubleClick:de,zoomOnPinch:ee,userSelectionActive:te,noPanClassName:V,noWheelClassName:U,lib:we});b.filter(De),de?x.on("dblclick.zoom",E):x.on("dblclick.zoom",null)}function j(){b.on("zoom",null)}async function O(U,V,z){const te=q0(U),Y=b?.constrain()(te,V,z);return Y&&await I(Y),new Promise(le=>le(Y))}async function A(U,V){const z=q0(U);return await I(z,V),new Promise(te=>te(z))}function D(U){if(x){const V=q0(U),z=x.property("__zoom");(z.k!==U.zoom||z.x!==U.x||z.y!==U.y)&&b?.transform(x,V,null,{sync:!0})}}function M(){const U=x?C2(x.node()):{x:0,y:0,k:1};return{x:U.x,y:U.y,zoom:U.k}}function W(U,V){return x?new Promise(z=>{b?.scaleTo(A0(x,V?.duration,()=>z(!0)),U)}):Promise.resolve(!1)}function P(U,V){return x?new Promise(z=>{b?.scaleBy(A0(x,V?.duration,()=>z(!0)),U)}):Promise.resolve(!1)}function R(U){b?.scaleExtent(U)}function $(U){b?.translateExtent(U)}function F(U){const V=!Ro(U)||U<0?0:U;b?.clickDistance(V)}return{update:T,destroy:j,setViewport:A,setViewportConstrained:O,getViewport:M,scaleTo:W,scaleBy:P,setScaleExtent:R,setTranslateExtent:$,syncViewport:D,setClickDistance:F}}var ih;(function(t){t.Line="line",t.Handle="handle"})(ih||(ih={}));function Mee({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function $ee(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function _l(t,e){return Math.max(0,e-t)}function Sl(t,e){return Math.max(0,t-e)}function iy(t,e,n){return Math.max(0,e-t,t-n)}function RR(t,e){return t?!e:e}function Bee(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:f}=e;const{isHorizontal:p,isVertical:h}=e,b=p&&h,{xSnapped:x,ySnapped:_}=n,{minWidth:E,maxWidth:I,minHeight:T,maxHeight:j}=r,{x:O,y:A,width:D,height:M,aspectRatio:W}=t;let P=Math.floor(p?x-t.pointerX:0),R=Math.floor(h?_-t.pointerY:0);const $=D+(u?-P:P),F=M+(f?-R:R),U=-s[0]*D,V=-s[1]*M;let z=iy($,E,I),te=iy(F,T,j);if(o){let se=0,ne=0;u&&P<0?se=_l(O+P+U,o[0][0]):!u&&P>0&&(se=Sl(O+$+U,o[1][0])),f&&R<0?ne=_l(A+R+V,o[0][1]):!f&&R>0&&(ne=Sl(A+F+V,o[1][1])),z=Math.max(z,se),te=Math.max(te,ne)}if(l){let se=0,ne=0;u&&P>0?se=Sl(O+P,l[0][0]):!u&&P<0&&(se=_l(O+$,l[1][0])),f&&R>0?ne=Sl(A+R,l[0][1]):!f&&R<0&&(ne=_l(A+F,l[1][1])),z=Math.max(z,se),te=Math.max(te,ne)}if(i){if(p){const se=iy($/W,T,j)*W;if(z=Math.max(z,se),o){let ne=0;!u&&!f||u&&!f&&b?ne=Sl(A+V+$/W,o[1][1])*W:ne=_l(A+V+(u?P:-P)/W,o[0][1])*W,z=Math.max(z,ne)}if(l){let ne=0;!u&&!f||u&&!f&&b?ne=_l(A+$/W,l[1][1])*W:ne=Sl(A+(u?P:-P)/W,l[0][1])*W,z=Math.max(z,ne)}}if(h){const se=iy(F*W,E,I)/W;if(te=Math.max(te,se),o){let ne=0;!u&&!f||f&&!u&&b?ne=Sl(O+F*W+U,o[1][0])/W:ne=_l(O+(f?R:-R)*W+U,o[0][0])/W,te=Math.max(te,ne)}if(l){let ne=0;!u&&!f||f&&!u&&b?ne=_l(O+F*W,l[1][0])/W:ne=Sl(O+(f?R:-R)*W,l[0][0])/W,te=Math.max(te,ne)}}}R=R+(R<0?te:-te),P=P+(P<0?z:-z),i&&(b?$>F*W?R=(RR(u,f)?-P:P)/W:P=(RR(u,f)?-R:R)*W:p?(R=P/W,f=u):(P=R*W,u=f));const Y=u?O+P:O,le=f?A+R:A;return{width:D+(u?-P:P),height:M+(f?-R:R),x:s[0]*P*(u?-1:1)+Y,y:s[1]*R*(f?-1:1)+le}}const nL={width:0,height:0,x:0,y:0},zee={...nL,pointerX:0,pointerY:0,aspectRatio:1};function Wee(t){return[[0,0],[t.measured.width,t.measured.height]]}function Uee(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Vee({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Os(t);function o({controlPosition:u,boundaries:f,keepAspectRatio:p,onResizeStart:h,onResize:b,onResizeEnd:x,shouldResize:_}){let E={...nL},I={...zee};const T=$ee(u);let j,O=null,A=[],D,M,W;const P=h2().on("start",R=>{const{nodeLookup:$,transform:F,snapGrid:U,snapToGrid:V,nodeOrigin:z,paneDomNode:te}=n();if(j=$.get(e),!j)return;O=te?.getBoundingClientRect()??null;const{xSnapped:Y,ySnapped:le}=rh(R.sourceEvent,{transform:F,snapGrid:U,snapToGrid:V,containerBounds:O});E={width:j.measured.width??0,height:j.measured.height??0,x:j.position.x??0,y:j.position.y??0},I={...E,pointerX:Y,pointerY:le,aspectRatio:E.width/E.height},D=void 0,j.parentId&&(j.extent==="parent"||j.expandParent)&&(D=$.get(j.parentId),M=D&&j.extent==="parent"?Wee(D):void 0),A=[],W=void 0;for(const[se,ne]of $)if(ne.parentId===e&&(A.push({id:se,position:{...ne.position},extent:ne.extent}),ne.extent==="parent"||ne.expandParent)){const oe=Uee(ne,j,ne.origin??z);W?W=[[Math.min(oe[0][0],W[0][0]),Math.min(oe[0][1],W[0][1])],[Math.max(oe[1][0],W[1][0]),Math.max(oe[1][1],W[1][1])]]:W=oe}h?.(R,{...E})}).on("drag",R=>{const{transform:$,snapGrid:F,snapToGrid:U,nodeOrigin:V}=n(),z=rh(R.sourceEvent,{transform:$,snapGrid:F,snapToGrid:U,containerBounds:O}),te=[];if(!j)return;const{x:Y,y:le,width:se,height:ne}=E,oe={},ee=j.origin??V,{width:ue,height:de,x:ye,y:we}=Bee(I,T,z,f,p,ee,M,W),Ne=ue!==se,ze=de!==ne,Oe=ye!==Y&&Ne,De=we!==le&&ze;if(!Oe&&!De&&!Ne&&!ze)return;if((Oe||De||ee[0]===1||ee[1]===1)&&(oe.x=Oe?ye:E.x,oe.y=De?we:E.y,E.x=oe.x,E.y=oe.y,A.length>0)){const ct=ye-Y,_t=we-le;for(const jt of A)jt.position={x:jt.position.x-ct+ee[0]*(ue-se),y:jt.position.y-_t+ee[1]*(de-ne)},te.push(jt)}if((Ne||ze)&&(oe.width=Ne?ue:E.width,oe.height=ze?de:E.height,E.width=oe.width,E.height=oe.height),D&&j.expandParent){const ct=ee[0]*(oe.width??0);oe.x&&oe.x<ct&&(E.x=ct,I.x=I.x-(oe.x-ct));const _t=ee[1]*(oe.height??0);oe.y&&oe.y<_t&&(E.y=_t,I.y=I.y-(oe.y-_t))}const Je=Mee({width:E.width,prevWidth:se,height:E.height,prevHeight:ne,affectsX:T.affectsX,affectsY:T.affectsY}),Xe={...E,direction:Je};_?.(R,Xe)!==!1&&(b?.(R,Xe),r(oe,te))}).on("end",R=>{x?.(R,{...E}),i?.()});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const qR=t=>{let e;const n=new Set,r=(p,h)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const x=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(_=>_(e,x))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{n.clear()}},f=e=t(r,i,u);return u},Hee=t=>t?qR(t):qR,{useDebugValue:Kee}=Bn,{useSyncExternalStoreWithSelector:Qee}=BB,Gee=t=>t;function rL(t,e=Gee,n){const r=Qee(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Kee(r),r}const AR=(t,e)=>{const n=Hee(t),r=(i,s=e)=>rL(n,i,s);return Object.assign(r,n),r},Jee=(t,e)=>t?AR(t,e):AR;function Fr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const ax=Q.createContext(null),Zee=ax.Provider,iL=Qa.error001();function On(t,e){const n=Q.useContext(ax);if(n===null)throw new Error(iL);return rL(n,t,e)}function Cr(){const t=Q.useContext(ax);if(t===null)throw new Error(iL);return Q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const PR={display:"none"},Yee={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},sL="react-flow__node-desc",oL="react-flow__edge-desc",Xee="react-flow__aria-live",ete=t=>t.ariaLiveMessage;function tte({rfId:t}){const e=On(ete);return d.jsx("div",{id:`${Xee}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Yee,children:e})}function nte({rfId:t,disableKeyboardA11y:e}){return d.jsxs(d.Fragment,{children:[d.jsxs("div",{id:`${sL}-${t}`,style:PR,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),d.jsx("div",{id:`${oL}-${t}`,style:PR,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&d.jsx(tte,{rfId:t})]})}const rte=t=>t.userSelectionActive?"none":"all",FN=Q.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=On(rte),l=`${t}`.split("-");return d.jsx("div",{className:ti(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},ref:s,...i,children:e})});function ite({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:d.jsx(FN,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:d.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const ste=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},sy=t=>t.id;function ote(t,e){return Fr(t.selectedNodes.map(sy),e.selectedNodes.map(sy))&&Fr(t.selectedEdges.map(sy),e.selectedEdges.map(sy))}function ate({onSelectionChange:t}){const e=Cr(),{selectedNodes:n,selectedEdges:r}=On(ste,ote);return Q.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const lte=t=>!!t.onSelectionChangeHandlers;function cte({onSelectionChange:t}){const e=On(lte);return t||e?d.jsx(ate,{onSelectionChange:t}):null}const aL=[0,0],ute={x:0,y:0,zoom:1},dte=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],FR=[...dte,"rfId"],fte=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),DR={translateExtent:Bh,nodeOrigin:aL,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function pte(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:f}=On(fte,Fr),p=Cr();Q.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{h.current=DR,l()}),[]);const h=Q.useRef(DR);return Q.useEffect(()=>{for(const b of FR){const x=t[b],_=h.current[b];x!==_&&(typeof t[b]>"u"||(b==="nodes"?e(x):b==="edges"?n(x):b==="minZoom"?r(x):b==="maxZoom"?i(x):b==="translateExtent"?s(x):b==="nodeExtent"?o(x):b==="paneClickDistance"?f(x):b==="fitView"?p.setState({fitViewOnInit:x}):b==="fitViewOptions"?p.setState({fitViewOnInitOptions:x}):p.setState({[b]:x})))}h.current=t},FR.map(b=>t[b])),null}function LR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function hte(t){const[e,n]=Q.useState(t==="system"?null:t);return Q.useEffect(()=>{if(t!=="system"){n(t);return}const r=LR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:LR()?.matches?"dark":"light"}const MR=typeof document<"u"?document:null;function Hh(t=null,e={target:MR,actInsideInputWithModifier:!0}){const[n,r]=Q.useState(!1),i=Q.useRef(!1),s=Q.useRef(new Set([])),[o,l]=Q.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=f.reduce((h,b)=>h.concat(...b),[]);return[f,p]}return[[],[]]},[t]);return Q.useEffect(()=>{const u=e?.target||MR;if(t!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&t1(b))return!1;const _=BR(b.code,l);s.current.add(b[_]),$R(o,s.current,!1)&&(b.preventDefault(),r(!0))},p=b=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&t1(b))return!1;const _=BR(b.code,l);$R(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[_]),b.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[t,r]),n}function $R(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function BR(t,e){return e.includes(t)?"code":"key"}const mte=()=>{const t=Cr();return Q.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},fitView:e=>{const{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:s,domNode:o}=t.getState();if(!s||!o)return Promise.resolve(!1);const l=YE(n,e),{width:u,height:f}=sx(o);return XE({nodes:l,width:u,height:f,minZoom:r,maxZoom:i,panZoom:s},e)},setCenter:async(e,n,r)=>{const{width:i,height:s,maxZoom:o,panZoom:l}=t.getState(),u=typeof r?.zoom<"u"?r.zoom:o,f=i/2-e*u,p=s/2-n*u;return l?(await l.setViewport({x:f,y:p,zoom:u},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=TN(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={snapToGrid:!0})=>{const{transform:r,snapGrid:i,domNode:s}=t.getState();if(!s)return e;const{x:o,y:l}=s.getBoundingClientRect(),u={x:e.x-o,y:e.y-l};return Sm(u,r,n.snapToGrid,i)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=M2(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function lL(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)gte(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function gte(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&(e.width=t.dimensions.width,e.height=t.dimensions.height)),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function DN(t,e){return lL(t,e)}function cL(t,e){return lL(t,e)}function Ac(t,e){return{id:t,type:"select",selected:e}}function md(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ac(s.id,o)))}return r}function zR({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function WR(t){return{id:t.id,type:"remove"}}const UR=t=>nee(t),yte=t=>q2(t);function uL(t){return Q.forwardRef(t)}const vte=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function VR(t){const[e,n]=Q.useState(BigInt(0)),[r]=Q.useState(()=>bte(()=>n(i=>i+BigInt(1))));return vte(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function bte(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const dL=Q.createContext(null);function xte({children:t}){const e=Cr(),n=Q.useCallback(l=>{const{nodes:u=[],setNodes:f,hasDefaultNodes:p,onNodesChange:h,nodeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(zR({items:x,lookup:b}))},[]),r=VR(n),i=Q.useCallback(l=>{const{edges:u=[],setEdges:f,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:b}=e.getState();let x=u;for(const _ of l)x=typeof _=="function"?_(x):_;p?f(x):h&&h(zR({items:x,lookup:b}))},[]),s=VR(i),o=Q.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return d.jsx(dL.Provider,{value:o,children:t})}function wte(){const t=Q.useContext(dL);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const _te=t=>!!t.panZoom;function vf(){const t=mte(),e=Cr(),n=wte(),r=On(_te),i=Q.useMemo(()=>{const s=h=>e.getState().nodeLookup.get(h),o=h=>{n.nodeQueue.push(h)},l=h=>{n.edgeQueue.push(h)},u=h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState(),_=UR(h)?h:b.get(h.id),E=_.parentId?B2(_.position,_.measured,_.parentId,b,x):_.position,I={..._,position:E,width:_.measured?.width??_.width,height:_.measured?.height??_.height};return Zd(I)},f=(h,b,x={replace:!1})=>{o(_=>_.map(E=>{if(E.id===h){const I=typeof b=="function"?b(E):b;return x.replace&&UR(I)?I:{...E,...I}}return E}))},p=(h,b,x={replace:!1})=>{l(_=>_.map(E=>{if(E.id===h){const I=typeof b=="function"?b(E):b;return x.replace&&yte(I)?I:{...E,...I}}return E}))};return{getNodes:()=>e.getState().nodes.map(h=>({...h})),getNode:h=>s(h)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:h=[]}=e.getState();return h.map(b=>({...b}))},getEdge:h=>e.getState().edgeLookup.get(h),setNodes:o,setEdges:l,addNodes:h=>{const b=Array.isArray(h)?h:[h];n.nodeQueue.push(x=>[...x,...b])},addEdges:h=>{const b=Array.isArray(h)?h:[h];n.edgeQueue.push(x=>[...x,...b])},toObject:()=>{const{nodes:h=[],edges:b=[],transform:x}=e.getState(),[_,E,I]=x;return{nodes:h.map(T=>({...T})),edges:b.map(T=>({...T})),viewport:{x:_,y:E,zoom:I}}},deleteElements:async({nodes:h=[],edges:b=[]})=>{const{nodes:x,edges:_,onNodesDelete:E,onEdgesDelete:I,triggerNodeChanges:T,triggerEdgeChanges:j,onDelete:O,onBeforeDelete:A}=e.getState(),{nodes:D,edges:M}=await see({nodesToRemove:h,edgesToRemove:b,nodes:x,edges:_,onBeforeDelete:A}),W=M.length>0,P=D.length>0;if(W){const R=M.map(WR);I?.(M),j(R)}if(P){const R=D.map(WR);E?.(D),T(R)}return(P||W)&&O?.({nodes:D,edges:M}),{deletedNodes:D,deletedEdges:M}},getIntersectingNodes:(h,b=!0,x)=>{const _=wR(h),E=_?h:u(h),I=x!==void 0;return E?(x||e.getState().nodes).filter(T=>{const j=e.getState().nodeLookup.get(T.id);if(j&&!_&&(T.id===h.id||!j.internals.positionAbsolute))return!1;const O=Zd(I?T:j),A=Uh(O,E);return b&&A>0||A>=E.width*E.height}):[]},isNodeIntersecting:(h,b,x=!0)=>{const E=wR(h)?h:u(h);if(!E)return!1;const I=Uh(E,b);return x&&I>0||I>=E.width*E.height},updateNode:f,updateNodeData:(h,b,x={replace:!1})=>{f(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},updateEdge:p,updateEdgeData:(h,b,x={replace:!1})=>{p(h,_=>{const E=typeof b=="function"?b(_):b;return x.replace?{..._,data:E}:{..._,data:{..._.data,...E}}},x)},getNodesBounds:h=>{const{nodeLookup:b,nodeOrigin:x}=e.getState();return ree(h,{nodeLookup:b,nodeOrigin:x})},getHandleConnections:({type:h,id:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${h}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:b,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${h?b?`-${h}-${b}`:`-${h}`:""}`)?.values()??[])}},[]);return Q.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const HR=t=>t.selected,Ste={actInsideInputWithModifier:!1},Ete=typeof window<"u"?window:void 0;function Nte({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Cr(),{deleteElements:r}=vf(),i=Hh(t,Ste),s=Hh(e,{target:Ete});Q.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(HR),edges:o.filter(HR)}),n.setState({nodesSelectionActive:!1})}},[i]),Q.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function kte(t){const e=Cr();Q.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=sx(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Qa.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const lx={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ite=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function Cte({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Jc.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:f,minZoom:p,maxZoom:h,zoomActivationKeyCode:b,preventScrolling:x=!0,children:_,noWheelClassName:E,noPanClassName:I,onViewportChange:T,isControlledViewport:j,paneClickDistance:O}){const A=Cr(),D=Q.useRef(null),{userSelectionActive:M,lib:W}=On(Ite,Fr),P=Hh(b),R=Q.useRef();kte(D);const $=Q.useCallback(F=>{T?.({x:F[0],y:F[1],zoom:F[2]}),j||A.setState({transform:F})},[T,j]);return Q.useEffect(()=>{if(D.current){R.current=Lee({domNode:D.current,minZoom:p,maxZoom:h,translateExtent:f,viewport:u,paneClickDistance:O,onDraggingChange:z=>A.setState({paneDragging:z}),onPanZoomStart:(z,te)=>{const{onViewportChangeStart:Y,onMoveStart:le}=A.getState();le?.(z,te),Y?.(te)},onPanZoom:(z,te)=>{const{onViewportChange:Y,onMove:le}=A.getState();le?.(z,te),Y?.(te)},onPanZoomEnd:(z,te)=>{const{onViewportChangeEnd:Y,onMoveEnd:le}=A.getState();le?.(z,te),Y?.(te)}});const{x:F,y:U,zoom:V}=R.current.getViewport();return A.setState({panZoom:R.current,transform:[F,U,V],domNode:D.current.closest(".react-flow")}),()=>{R.current?.destroy()}}},[]),Q.useEffect(()=>{R.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:x,noPanClassName:I,userSelectionActive:M,noWheelClassName:E,lib:W,onTransformChange:$})},[t,e,n,r,i,s,o,l,P,x,I,M,E,W,$]),d.jsx("div",{className:"react-flow__renderer",ref:D,style:lx,children:_})}const Tte=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function jte(){const{userSelectionActive:t,userSelectionRect:e}=On(Tte,Fr);return t&&e?d.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const P0=(t,e)=>n=>{n.target===e.current&&t?.(n)},Ote=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging});function Rte({isSelecting:t,selectionKeyPressed:e,selectionMode:n=zh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:h,onPaneMouseLeave:b,children:x}){const _=Cr(),{userSelectionActive:E,elementsSelectable:I,dragging:T}=On(Ote,Fr),j=I&&(t||E),O=Q.useRef(null),A=Q.useRef(),D=Q.useRef(new Set),M=Q.useRef(new Set),W=Q.useRef(!1),P=Q.useRef(!1),R=Y=>{if(W.current){W.current=!1;return}l?.(Y),_.getState().resetSelectedElements(),_.setState({nodesSelectionActive:!1})},$=Y=>{if(Array.isArray(r)&&r?.includes(2)){Y.preventDefault();return}u?.(Y)},F=f?Y=>f(Y):void 0,U=Y=>{const{resetSelectedElements:le,domNode:se}=_.getState();if(A.current=se?.getBoundingClientRect(),!I||!t||Y.button!==0||Y.target!==O.current||!A.current)return;Y.target?.setPointerCapture?.(Y.pointerId),P.current=!0,W.current=!1;const{x:ne,y:oe}=La(Y.nativeEvent,A.current);le(),_.setState({userSelectionRect:{width:0,height:0,startX:ne,startY:oe,x:ne,y:oe}}),s?.(Y)},V=Y=>{const{userSelectionRect:le,transform:se,nodeLookup:ne,edgeLookup:oe,connectionLookup:ee,triggerNodeChanges:ue,triggerEdgeChanges:de,defaultEdgeOptions:ye}=_.getState();if(!A.current||!le)return;W.current=!0;const{x:we,y:Ne}=La(Y.nativeEvent,A.current),{startX:ze,startY:Oe}=le,De={startX:ze,startY:Oe,x:we<ze?we:ze,y:Ne<Oe?Ne:Oe,width:Math.abs(we-ze),height:Math.abs(Ne-Oe)},Je=D.current,Xe=M.current;D.current=new Set(A2(ne,De,se,n===zh.Partial,!0).map(ct=>ct.id)),M.current=new Set;const Ue=ye?.selectable??!0;for(const ct of D.current){const _t=ee.get(ct);if(_t)for(const{edgeId:jt}of _t.values()){const Vt=oe.get(jt);Vt&&(Vt.selectable??Ue)&&M.current.add(jt)}}if(!_R(Je,D.current)){const ct=md(ne,D.current,!0);ue(ct)}if(!_R(Xe,M.current)){const ct=md(oe,M.current);de(ct)}_.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},z=Y=>{if(Y.button!==0||!P.current)return;Y.target?.releasePointerCapture?.(Y.pointerId);const{userSelectionRect:le}=_.getState();!E&&le&&Y.target===O.current&&R?.(Y),_.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:D.current.size>0}),o?.(Y),(e||i)&&(W.current=!1),P.current=!1},te=r===!0||Array.isArray(r)&&r.includes(0);return d.jsxs("div",{className:ti(["react-flow__pane",{draggable:te,dragging:T,selection:t}]),onClick:j?void 0:P0(R,O),onContextMenu:P0($,O),onWheel:P0(F,O),onPointerEnter:j?void 0:p,onPointerDown:j?U:h,onPointerMove:j?V:h,onPointerUp:j?z:void 0,onPointerLeave:b,ref:O,style:lx,children:[x,d.jsx(jte,{})]})}function o1({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),f=l.get(t);if(!f){u?.("012",Qa.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function fL({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Cr(),[u,f]=Q.useState(!1),p=Q.useRef();return Q.useEffect(()=>{p.current=Eee({getStoreItems:()=>l.getState(),onNodeMouseDown:h=>{o1({id:h,store:l,nodeRef:t})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),Q.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{p.current?.destroy()}},[n,r,e,s,t,i]),u}const qte=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function pL(){const t=Cr();return Q.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:f,nodeOrigin:p}=t.getState(),h=new Map,b=qte(o),x=i?s[0]:5,_=i?s[1]:5,E=n.direction.x*x*n.factor,I=n.direction.y*_*n.factor;for(const[,T]of f){if(!b(T))continue;let j={x:T.internals.positionAbsolute.x+E,y:T.internals.positionAbsolute.y+I};i&&(j=ix(j,s));const{position:O,positionAbsolute:A}=P2({nodeId:T.id,nextPosition:j,nodeLookup:f,nodeExtent:r,nodeOrigin:p,onError:l});T.position=O,T.internals.positionAbsolute=A,h.set(T.id,T)}u(h)},[])}const LN=Q.createContext(null),Ate=LN.Provider;LN.Consumer;const hL=()=>Q.useContext(LN),Pte=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Fte=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:f}=o,p=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:p,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Gd.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,valid:p&&f}};function Dte({type:t="source",position:e=Dt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:f,onMouseDown:p,onTouchStart:h,...b},x){const _=o||null,E=t==="target",I=Cr(),T=hL(),{connectOnClick:j,noPanClassName:O,rfId:A}=On(Pte,Fr),{connectingFrom:D,connectingTo:M,clickConnecting:W,isPossibleEndHandle:P,connectionInProcess:R,valid:$}=On(Fte(T,_,t),Fr);T||I.getState().onError?.("010",Qa.error010());const F=z=>{const{defaultEdgeOptions:te,onConnect:Y,hasDefaultEdges:le}=I.getState(),se={...te,...z};if(le){const{edges:ne,setEdges:oe}=I.getState();oe(H2(se,ne))}Y?.(se),l?.(se)},U=z=>{if(!T)return;const te=W2(z.nativeEvent);if(i&&(te&&z.button===0||!te)){const Y=I.getState();s1.onPointerDown(z.nativeEvent,{autoPanOnConnect:Y.autoPanOnConnect,connectionMode:Y.connectionMode,connectionRadius:Y.connectionRadius,domNode:Y.domNode,nodeLookup:Y.nodeLookup,lib:Y.lib,isTarget:E,handleId:_,nodeId:T,flowId:Y.rfId,panBy:Y.panBy,cancelConnection:Y.cancelConnection,onConnectStart:Y.onConnectStart,onConnectEnd:Y.onConnectEnd,updateConnection:Y.updateConnection,onConnect:F,isValidConnection:n||Y.isValidConnection,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,autoPanSpeed:Y.autoPanSpeed})}te?p?.(z):h?.(z)},V=z=>{const{onClickConnectStart:te,onClickConnectEnd:Y,connectionClickStartHandle:le,connectionMode:se,isValidConnection:ne,lib:oe,rfId:ee,nodeLookup:ue,connection:de}=I.getState();if(!T||!le&&!i)return;if(!le){te?.(z.nativeEvent,{nodeId:T,handleId:_,handleType:t}),I.setState({connectionClickStartHandle:{nodeId:T,type:t,id:_}});return}const ye=z2(z.target),we=n||ne,{connection:Ne,isValid:ze}=s1.isValid(z.nativeEvent,{handle:{nodeId:T,id:_,type:t},connectionMode:se,fromNodeId:le.nodeId,fromHandleId:le.id||null,fromType:le.type,isValidConnection:we,flowId:ee,doc:ye,lib:oe,nodeLookup:ue});ze&&Ne&&F(Ne);const Oe=structuredClone(de);delete Oe.inProgress,Oe.toPosition=Oe.toHandle?Oe.toHandle.position:null,Y?.(z,Oe),I.setState({connectionClickStartHandle:null})};return d.jsx("div",{"data-handleid":_,"data-nodeid":T,"data-handlepos":e,"data-id":`${A}-${T}-${_}-${t}`,className:ti(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",O,f,{source:!E,target:E,connectable:r,connectablestart:i,connectableend:s,clickconnecting:W,connectingfrom:D,connectingto:M,valid:$,connectionindicator:r&&(!R||P)&&(R?s:i)}]),onMouseDown:U,onTouchStart:U,onClick:j?V:void 0,ref:x,...b,children:u})}const lo=Q.memo(uL(Dte));function Lte({data:t,isConnectable:e,sourcePosition:n=Dt.Bottom}){return d.jsxs(d.Fragment,{children:[t?.label,d.jsx(lo,{type:"source",position:n,isConnectable:e})]})}function Mte({data:t,isConnectable:e,targetPosition:n=Dt.Top,sourcePosition:r=Dt.Bottom}){return d.jsxs(d.Fragment,{children:[d.jsx(lo,{type:"target",position:n,isConnectable:e}),t?.label,d.jsx(lo,{type:"source",position:r,isConnectable:e})]})}function $te(){return null}function Bte({data:t,isConnectable:e,targetPosition:n=Dt.Top}){return d.jsxs(d.Fragment,{children:[d.jsx(lo,{type:"target",position:n,isConnectable:e}),t?.label]})}const nb={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},KR={input:Lte,default:Mte,output:Bte,group:$te};function zte(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const Wte=t=>{const{width:e,height:n,x:r,y:i}=_m(t.nodeLookup,{filter:s=>!!s.selected});return{width:Ro(e)?e:null,height:Ro(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Ute({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Cr(),{width:i,height:s,transformString:o,userSelectionActive:l}=On(Wte,Fr),u=pL(),f=Q.useRef(null);if(Q.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),fL({nodeRef:f}),l||!i||!s)return null;const p=t?b=>{const x=r.getState().nodes.filter(_=>_.selected);t(b,x)}:void 0,h=b=>{Object.prototype.hasOwnProperty.call(nb,b.key)&&(b.preventDefault(),u({direction:nb[b.key],factor:b.shiftKey?4:1}))};return d.jsx("div",{className:ti(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:d.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s}})})}const QR=typeof window<"u"?window:void 0,Vte=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function mL({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:_,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:T,zoomOnScroll:j,zoomOnPinch:O,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:P,defaultViewport:R,translateExtent:$,minZoom:F,maxZoom:U,preventScrolling:V,onSelectionContextMenu:z,noWheelClassName:te,noPanClassName:Y,disableKeyboardA11y:le,onViewportChange:se,isControlledViewport:ne}){const{nodesSelectionActive:oe,userSelectionActive:ee}=On(Vte),ue=Hh(f,{target:QR}),de=Hh(E,{target:QR}),ye=de||P,we=de||A,Ne=p&&ye!==!0,ze=ue||ee||Ne;return Nte({deleteKeyCode:u,multiSelectionKeyCode:_}),d.jsx(Cte,{onPaneContextMenu:s,elementsSelectable:T,zoomOnScroll:j,zoomOnPinch:O,panOnScroll:we,panOnScrollSpeed:D,panOnScrollMode:M,zoomOnDoubleClick:W,panOnDrag:!ue&&ye,defaultViewport:R,translateExtent:$,minZoom:F,maxZoom:U,zoomActivationKeyCode:I,preventScrolling:V,noWheelClassName:te,noPanClassName:Y,onViewportChange:se,isControlledViewport:ne,paneClickDistance:l,children:d.jsxs(Rte,{onSelectionStart:b,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ye,isSelecting:!!ze,selectionMode:h,selectionKeyPressed:ue,selectionOnDrag:Ne,children:[t,oe&&d.jsx(Ute,{onSelectionContextMenu:z,noPanClassName:Y,disableKeyboardA11y:le})]})})}mL.displayName="FlowRenderer";const Hte=Q.memo(mL),Kte=t=>e=>t?A2(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Qte(t){return On(Q.useCallback(Kte(t),[t]),Fr)}const Gte=t=>t.updateNodeInternals;function Jte(){const t=On(Gte),[e]=Q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return Q.useEffect(()=>()=>{e?.disconnect()},[e]),e}function Zte({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Cr(),s=Q.useRef(null),o=Q.useRef(null),l=Q.useRef(t.sourcePosition),u=Q.useRef(t.targetPosition),f=Q.useRef(e),p=n&&!!t.internals.handleBounds;return Q.useEffect(()=>{s.current&&!t.hidden&&(!p||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[p,t.hidden]),Q.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),Q.useEffect(()=>{if(s.current){const h=f.current!==e,b=l.current!==t.sourcePosition,x=u.current!==t.targetPosition;(h||b||x)&&(f.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function Yte({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:f,nodesFocusable:p,resizeObserver:h,noDragClassName:b,noPanClassName:x,disableKeyboardA11y:_,rfId:E,nodeTypes:I,nodeExtent:T,nodeClickDistance:j,onError:O}){const{node:A,internals:D,isParent:M}=On(Oe=>{const De=Oe.nodeLookup.get(t),Je=Oe.parentLookup.has(t);return{node:De,internals:De.internals,isParent:Je}},Fr);let W=A.type||"default",P=I?.[W]||KR[W];P===void 0&&(O?.("003",Qa.error003(W)),W="default",P=KR.default);const R=!!(A.draggable||l&&typeof A.draggable>"u"),$=!!(A.selectable||u&&typeof A.selectable>"u"),F=!!(A.connectable||f&&typeof A.connectable>"u"),U=!!(A.focusable||p&&typeof A.focusable>"u"),V=Cr(),z=$2(A),te=Zte({node:A,nodeType:W,hasDimensions:z,resizeObserver:h}),Y=fL({nodeRef:te,disabled:A.hidden||!R,noDragClassName:b,handleSelector:A.dragHandle,nodeId:t,isSelectable:$,nodeClickDistance:j}),le=pL();if(A.hidden)return null;const se=Ga(A),ne=zte(A),oe=$||R||e||n||r||i,ee=n?Oe=>n(Oe,{...D.userNode}):void 0,ue=r?Oe=>r(Oe,{...D.userNode}):void 0,de=i?Oe=>i(Oe,{...D.userNode}):void 0,ye=s?Oe=>s(Oe,{...D.userNode}):void 0,we=o?Oe=>o(Oe,{...D.userNode}):void 0,Ne=Oe=>{const{selectNodesOnDrag:De,nodeDragThreshold:Je}=V.getState();$&&(!De||!R||Je>0)&&o1({id:t,store:V,nodeRef:te}),e&&e(Oe,{...D.userNode})},ze=Oe=>{if(!(t1(Oe.nativeEvent)||_))if(j2.includes(Oe.key)&&$){const De=Oe.key==="Escape";o1({id:t,store:V,unselect:De,nodeRef:te})}else R&&A.selected&&Object.prototype.hasOwnProperty.call(nb,Oe.key)&&(Oe.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${Oe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~D.positionAbsolute.x}, y: ${~~D.positionAbsolute.y}`}),le({direction:nb[Oe.key],factor:Oe.shiftKey?4:1}))};return d.jsx("div",{className:ti(["react-flow__node",`react-flow__node-${W}`,{[x]:R},A.className,{selected:A.selected,selectable:$,parent:M,draggable:R,dragging:Y}]),ref:te,style:{zIndex:D.z,transform:`translate(${D.positionAbsolute.x}px,${D.positionAbsolute.y}px)`,pointerEvents:oe?"all":"none",visibility:z?"visible":"hidden",...A.style,...ne},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:ee,onMouseMove:ue,onMouseLeave:de,onContextMenu:ye,onClick:Ne,onDoubleClick:we,onKeyDown:U?ze:void 0,tabIndex:U?0:void 0,role:U?"button":void 0,"aria-describedby":_?void 0:`${sL}-${E}`,"aria-label":A.ariaLabel,children:d.jsx(Ate,{value:t,children:d.jsx(P,{id:t,data:A.data,type:W,positionAbsoluteX:D.positionAbsolute.x,positionAbsoluteY:D.positionAbsolute.y,selected:A.selected??!1,selectable:$,draggable:R,deletable:A.deletable??!0,isConnectable:F,sourcePosition:A.sourcePosition,targetPosition:A.targetPosition,dragging:Y,dragHandle:A.dragHandle,zIndex:D.z,parentId:A.parentId,...se})})})}const Xte=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function gL(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=On(Xte,Fr),o=Qte(t.onlyRenderVisibleElements),l=Jte();return d.jsx("div",{className:"react-flow__nodes",style:lx,children:o.map(u=>d.jsx(Yte,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}gL.displayName="NodeRenderer";const ene=Q.memo(gL);function tne(t){return On(Q.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&cee({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Fr)}const nne=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),rne=({color:t="none",strokeWidth:e=1})=>d.jsx("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),GR={[Wh.Arrow]:nne,[Wh.ArrowClosed]:rne};function ine(t){const e=Cr();return Q.useMemo(()=>Object.prototype.hasOwnProperty.call(GR,t)?GR[t]:(e.getState().onError?.("009",Qa.error009(t)),null),[t])}const sne=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=ine(e);return u?d.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:d.jsx(u,{color:n,strokeWidth:o})}):null},yL=({defaultColor:t,rfId:e})=>{const n=On(s=>s.edges),r=On(s=>s.defaultEdgeOptions),i=Q.useMemo(()=>gee(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?d.jsx("svg",{className:"react-flow__marker",children:d.jsx("defs",{children:i.map(s=>d.jsx(sne,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};yL.displayName="MarkerDefinitions";var one=Q.memo(yL);function vL({x:t,y:e,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:f,...p}){const[h,b]=Q.useState({x:1,y:0,width:0,height:0}),x=ti(["react-flow__edge-textwrapper",f]),_=Q.useRef(null);return Q.useEffect(()=>{if(_.current){const E=_.current.getBBox();b({x:E.x,y:E.y,width:E.width,height:E.height})}},[n]),typeof n>"u"||!n?null:d.jsxs("g",{transform:`translate(${t-h.width/2} ${e-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...p,children:[i&&d.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),d.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:_,style:r,children:n}),u]})}vL.displayName="EdgeText";const ane=Q.memo(vL);function Em({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:f=20,...p}){return d.jsxs(d.Fragment,{children:[d.jsx("path",{...p,d:t,fill:"none",className:ti(["react-flow__edge-path",p.className])}),f&&d.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&Ro(e)&&Ro(n)?d.jsx(ane,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function JR({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Dt.Left||t===Dt.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function MN({sourceX:t,sourceY:e,sourcePosition:n=Dt.Bottom,targetX:r,targetY:i,targetPosition:s=Dt.Top}){const[o,l]=JR({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,f]=JR({pos:s,x1:r,y1:i,x2:t,y2:e}),[p,h,b,x]=U2({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:f});return[`M${t},${e} C${o},${l} ${u},${f} ${r},${i}`,p,h,b,x]}function bL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Dt.Bottom,targetPosition:l=Dt.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,interactionWidth:T})=>{const[j,O,A]=MN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),D=t.isInternal?void 0:e;return d.jsx(Em,{id:D,path:j,labelX:O,labelY:A,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,interactionWidth:T})})}const lne=bL({isInternal:!1}),xL=bL({isInternal:!0});lne.displayName="SimpleBezierEdge";xL.displayName="SimpleBezierEdgeInternal";function wL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,sourcePosition:x=Dt.Bottom,targetPosition:_=Dt.Top,markerEnd:E,markerStart:I,pathOptions:T,interactionWidth:j})=>{const[O,A,D]=n1({sourceX:n,sourceY:r,sourcePosition:x,targetX:i,targetY:s,targetPosition:_,borderRadius:T?.borderRadius,offset:T?.offset}),M=t.isInternal?void 0:e;return d.jsx(Em,{id:M,path:O,labelX:A,labelY:D,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:E,markerStart:I,interactionWidth:j})})}const _L=wL({isInternal:!1}),SL=wL({isInternal:!0});_L.displayName="SmoothStepEdge";SL.displayName="SmoothStepEdgeInternal";function EL(t){return Q.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return d.jsx(_L,{...n,id:r,pathOptions:Q.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const cne=EL({isInternal:!1}),NL=EL({isInternal:!0});cne.displayName="StepEdge";NL.displayName="StepEdgeInternal";function kL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})=>{const[I,T,j]=ON({sourceX:n,sourceY:r,targetX:i,targetY:s}),O=t.isInternal?void 0:e;return d.jsx(Em,{id:O,path:I,labelX:T,labelY:j,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:h,style:b,markerEnd:x,markerStart:_,interactionWidth:E})})}const une=kL({isInternal:!1}),IL=kL({isInternal:!0});une.displayName="StraightEdge";IL.displayName="StraightEdgeInternal";function CL(t){return Q.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Dt.Bottom,targetPosition:l=Dt.Top,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,pathOptions:T,interactionWidth:j})=>{const[O,A,D]=jN({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:T?.curvature}),M=t.isInternal?void 0:e;return d.jsx(Em,{id:M,path:O,labelX:A,labelY:D,label:u,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:b,labelBgBorderRadius:x,style:_,markerEnd:E,markerStart:I,interactionWidth:j})})}const dne=CL({isInternal:!1}),TL=CL({isInternal:!0});dne.displayName="BezierEdge";TL.displayName="BezierEdgeInternal";const ZR={default:TL,straight:IL,step:NL,smoothstep:SL,simplebezier:xL},YR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},fne=(t,e,n)=>n===Dt.Left?t-e:n===Dt.Right?t+e:t,pne=(t,e,n)=>n===Dt.Top?t-e:n===Dt.Bottom?t+e:t,XR="react-flow__edgeupdater";function eq({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return d.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:ti([XR,`${XR}-${l}`]),cx:fne(e,r,t),cy:pne(n,r,t),r,stroke:"transparent",fill:"transparent"})}function hne({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:f,onReconnectStart:p,onReconnectEnd:h,setReconnecting:b,setUpdateHover:x}){const _=Cr(),E=(A,D)=>{if(A.button!==0)return;const{autoPanOnConnect:M,domNode:W,isValidConnection:P,connectionMode:R,connectionRadius:$,lib:F,onConnectStart:U,onConnectEnd:V,cancelConnection:z,nodeLookup:te,rfId:Y,panBy:le,updateConnection:se}=_.getState(),ne=D.type==="target";b(!0),p?.(A,n,D.type);const oe=(ue,de)=>{b(!1),h?.(ue,n,D.type,de)},ee=ue=>f?.(n,ue);s1.onPointerDown(A.nativeEvent,{autoPanOnConnect:M,connectionMode:R,connectionRadius:$,domNode:W,handleId:D.id,nodeId:D.nodeId,nodeLookup:te,isTarget:ne,edgeUpdaterType:D.type,lib:F,flowId:Y,cancelConnection:z,panBy:le,isValidConnection:P,onConnect:ee,onConnectStart:U,onConnectEnd:V,onReconnectEnd:oe,updateConnection:se,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle})},I=A=>E(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),T=A=>E(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),j=()=>x(!0),O=()=>x(!1);return d.jsxs(d.Fragment,{children:[(t===!0||t==="source")&&d.jsx(eq,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:I,onMouseEnter:j,onMouseOut:O,type:"source"}),(t===!0||t==="target")&&d.jsx(eq,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:T,onMouseEnter:j,onMouseOut:O,type:"target"})]})}function mne({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,rfId:_,edgeTypes:E,noPanClassName:I,onError:T,disableKeyboardA11y:j}){let O=On(Ue=>Ue.edgeLookup.get(t));const A=On(Ue=>Ue.defaultEdgeOptions);O=A?{...A,...O}:O;let D=O.type||"default",M=E?.[D]||ZR[D];M===void 0&&(T?.("011",Qa.error011(D)),D="default",M=ZR.default);const W=!!(O.focusable||e&&typeof O.focusable>"u"),P=typeof h<"u"&&(O.reconnectable||n&&typeof O.reconnectable>"u"),R=!!(O.selectable||r&&typeof O.selectable>"u"),$=Q.useRef(null),[F,U]=Q.useState(!1),[V,z]=Q.useState(!1),te=Cr(),{zIndex:Y,sourceX:le,sourceY:se,targetX:ne,targetY:oe,sourcePosition:ee,targetPosition:ue}=On(Q.useCallback(Ue=>{const ct=Ue.nodeLookup.get(O.source),_t=Ue.nodeLookup.get(O.target);if(!ct||!_t)return{zIndex:O.zIndex,...YR};const jt=mee({id:t,sourceNode:ct,targetNode:_t,sourceHandle:O.sourceHandle||null,targetHandle:O.targetHandle||null,connectionMode:Ue.connectionMode,onError:T});return{zIndex:lee({selected:O.selected,zIndex:O.zIndex,sourceNode:ct,targetNode:_t,elevateOnSelect:Ue.elevateEdgesOnSelect}),...jt||YR}},[O.source,O.target,O.sourceHandle,O.targetHandle,O.selected,O.zIndex]),Fr),de=Q.useMemo(()=>O.markerStart?`url('#${r1(O.markerStart,_)}')`:void 0,[O.markerStart,_]),ye=Q.useMemo(()=>O.markerEnd?`url('#${r1(O.markerEnd,_)}')`:void 0,[O.markerEnd,_]);if(O.hidden||le===null||se===null||ne===null||oe===null)return null;const we=Ue=>{const{addSelectedEdges:ct,unselectNodesAndEdges:_t,multiSelectionActive:jt}=te.getState();R&&(te.setState({nodesSelectionActive:!1}),O.selected&&jt?(_t({nodes:[],edges:[O]}),$.current?.blur()):ct([t])),i&&i(Ue,O)},Ne=s?Ue=>{s(Ue,{...O})}:void 0,ze=o?Ue=>{o(Ue,{...O})}:void 0,Oe=l?Ue=>{l(Ue,{...O})}:void 0,De=u?Ue=>{u(Ue,{...O})}:void 0,Je=f?Ue=>{f(Ue,{...O})}:void 0,Xe=Ue=>{if(!j&&j2.includes(Ue.key)&&R){const{unselectNodesAndEdges:ct,addSelectedEdges:_t}=te.getState();Ue.key==="Escape"?($.current?.blur(),ct({edges:[O]})):_t([t])}};return d.jsx("svg",{style:{zIndex:Y},children:d.jsxs("g",{className:ti(["react-flow__edge",`react-flow__edge-${D}`,O.className,I,{selected:O.selected,animated:O.animated,inactive:!R&&!i,updating:F,selectable:R}]),onClick:we,onDoubleClick:Ne,onContextMenu:ze,onMouseEnter:Oe,onMouseMove:De,onMouseLeave:Je,onKeyDown:W?Xe:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":O.ariaLabel===null?void 0:O.ariaLabel||`Edge from ${O.source} to ${O.target}`,"aria-describedby":W?`${oL}-${_}`:void 0,ref:$,children:[!V&&d.jsx(M,{id:t,source:O.source,target:O.target,type:O.type,selected:O.selected,animated:O.animated,selectable:R,deletable:O.deletable??!0,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,sourceX:le,sourceY:se,targetX:ne,targetY:oe,sourcePosition:ee,targetPosition:ue,data:O.data,style:O.style,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerStart:de,markerEnd:ye,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth}),P&&d.jsx(hne,{edge:O,isReconnectable:P,reconnectRadius:p,onReconnect:h,onReconnectStart:b,onReconnectEnd:x,sourceX:le,sourceY:se,targetX:ne,targetY:oe,sourcePosition:ee,targetPosition:ue,setUpdateHover:U,setReconnecting:z})]})})}const gne=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function jL({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:f,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,disableKeyboardA11y:E}){const{edgesFocusable:I,edgesReconnectable:T,elementsSelectable:j,onError:O}=On(gne,Fr),A=tne(e);return d.jsxs("div",{className:"react-flow__edges",children:[d.jsx(one,{defaultColor:t,rfId:n}),A.map(D=>d.jsx(mne,{id:D,edgesFocusable:I,edgesReconnectable:T,elementsSelectable:j,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:f,onClick:p,reconnectRadius:h,onDoubleClick:b,onReconnectStart:x,onReconnectEnd:_,rfId:n,onError:O,edgeTypes:r,disableKeyboardA11y:E},D))]})}jL.displayName="EdgeRenderer";const yne=Q.memo(jL),vne=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function bne({children:t}){const e=On(vne);return d.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function xne(t){const e=vf(),n=Q.useRef(!1);Q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const wne=t=>t.panZoom?.syncViewport;function _ne(t){const e=On(wne),n=Cr();return Q.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function Sne(t){return t.connection.inProgress?{...t.connection,to:Sm(t.connection.to,t.transform)}:{...t.connection}}function Ene(t){return Sne}function OL(t){const e=Ene();return On(e,Fr)}const Nne=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function kne({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=On(Nne,Fr);return!(s&&i&&u)?null:d.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:d.jsx("g",{className:ti(["react-flow__connection",R2(l)]),children:d.jsx(RL,{style:e,type:n,CustomComponent:r,isValid:l})})})}const RL=({style:t,type:e=ql.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:f,toNode:p,toHandle:h,toPosition:b}=OL();if(!i)return;if(n)return d.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:u,toPosition:b,connectionStatus:R2(r),toNode:p,toHandle:h});let x="";const _={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:f.x,targetY:f.y,targetPosition:b};switch(e){case ql.Bezier:[x]=jN(_);break;case ql.SimpleBezier:[x]=MN(_);break;case ql.Step:[x]=n1({..._,borderRadius:0});break;case ql.SmoothStep:[x]=n1(_);break;default:[x]=ON(_)}return d.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};RL.displayName="ConnectionLine";const Ine={};function tq(t=Ine){Q.useRef(t),Cr(),Q.useEffect(()=>{},[t])}function Cne(){Cr(),Q.useRef(!1),Q.useEffect(()=>{},[])}function qL({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:b,onSelectionEnd:x,connectionLineType:_,connectionLineStyle:E,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:j,selectionOnDrag:O,selectionMode:A,multiSelectionKeyCode:D,panActivationKeyCode:M,zoomActivationKeyCode:W,deleteKeyCode:P,onlyRenderVisibleElements:R,elementsSelectable:$,defaultViewport:F,translateExtent:U,minZoom:V,maxZoom:z,preventScrolling:te,defaultMarkerColor:Y,zoomOnScroll:le,zoomOnPinch:se,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:ee,zoomOnDoubleClick:ue,panOnDrag:de,onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneScroll:Oe,onPaneContextMenu:De,paneClickDistance:Je,nodeClickDistance:Xe,onEdgeContextMenu:Ue,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:jt,reconnectRadius:Vt,onReconnect:nn,onReconnectStart:xe,onReconnectEnd:ve,noDragClassName:ke,noWheelClassName:Ae,noPanClassName:Ve,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut,viewport:Qt,onViewportChange:Gt}){return tq(t),tq(e),Cne(),xne(n),_ne(Qt),d.jsx(Hte,{onPaneClick:ye,onPaneMouseEnter:we,onPaneMouseMove:Ne,onPaneMouseLeave:ze,onPaneContextMenu:De,onPaneScroll:Oe,paneClickDistance:Je,deleteKeyCode:P,selectionKeyCode:j,selectionOnDrag:O,selectionMode:A,onSelectionStart:b,onSelectionEnd:x,multiSelectionKeyCode:D,panActivationKeyCode:M,zoomActivationKeyCode:W,elementsSelectable:$,zoomOnScroll:le,zoomOnPinch:se,zoomOnDoubleClick:ue,panOnScroll:ne,panOnScrollSpeed:oe,panOnScrollMode:ee,panOnDrag:de,defaultViewport:F,translateExtent:U,minZoom:V,maxZoom:z,onSelectionContextMenu:h,preventScrolling:te,noDragClassName:ke,noWheelClassName:Ae,noPanClassName:Ve,disableKeyboardA11y:rt,onViewportChange:Gt,isControlledViewport:!!Qt,children:d.jsxs(bne,{children:[d.jsx(yne,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:nn,onReconnectStart:xe,onReconnectEnd:ve,onlyRenderVisibleElements:R,onEdgeContextMenu:Ue,onEdgeMouseEnter:ct,onEdgeMouseMove:_t,onEdgeMouseLeave:jt,reconnectRadius:Vt,defaultMarkerColor:Y,noPanClassName:Ve,disableKeyboardA11y:rt,rfId:ut}),d.jsx(kne,{style:E,type:_,component:I,containerStyle:T}),d.jsx("div",{className:"react-flow__edgelabel-renderer"}),d.jsx(ene,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:Xe,onlyRenderVisibleElements:R,noPanClassName:Ve,noDragClassName:ke,disableKeyboardA11y:rt,nodeExtent:Me,rfId:ut}),d.jsx("div",{className:"react-flow__viewport-portal"})]})})}qL.displayName="GraphView";const Tne=Q.memo(qL),nq=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=>{const f=new Map,p=new Map,h=new Map,b=new Map,x=r??e??[],_=n??t??[],E=l??[0,0],I=u??Bh;Q2(h,b,x),i1(_,f,p,{nodeOrigin:E,nodeExtent:I,elevateNodesOnSelect:!1});let T=[0,0,1];if(o&&i&&s){const j=_m(f,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:O,y:A,zoom:D}=TN(j,i,s,.5,2,.1);T=[O,A,D]}return{rfId:"1",width:0,height:0,transform:T,nodes:_,nodeLookup:f,parentLookup:p,edges:x,edgeLookup:b,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Bh,nodeExtent:I,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Gd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:E,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...O2},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:oee,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},jne=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=>Jee((f,p)=>({...nq({nodes:t,edges:e,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:h=>{const{nodeLookup:b,parentLookup:x,nodeOrigin:_,elevateNodesOnSelect:E}=p();i1(h,b,x,{nodeOrigin:_,nodeExtent:u,elevateNodesOnSelect:E,checkEquality:!0}),f({nodes:h})},setEdges:h=>{const{connectionLookup:b,edgeLookup:x}=p();Q2(b,x,h),f({edges:h})},setDefaultNodesAndEdges:(h,b)=>{if(h){const{setNodes:x}=p();x(h),f({hasDefaultNodes:!0})}if(b){const{setEdges:x}=p();x(b),f({hasDefaultEdges:!0})}},updateNodeInternals:(h,b={triggerFitView:!0})=>{const{triggerNodeChanges:x,nodeLookup:_,parentLookup:E,fitViewOnInit:I,fitViewDone:T,fitViewOnInitOptions:j,domNode:O,nodeOrigin:A,nodeExtent:D,debug:M,fitViewSync:W}=p(),{changes:P,updatedInternals:R}=wee(h,_,E,O,A,D);if(R){if(vee(_,E,{nodeOrigin:A,nodeExtent:D}),b.triggerFitView){let $=T;!T&&I&&($=W({...j,nodes:j?.nodes})),f({fitViewDone:$})}else f({});P?.length>0&&(M&&console.log("React Flow: trigger node changes",P),x?.(P))}},updateNodePositions:(h,b=!1)=>{const x=[],_=[];for(const[E,I]of h){const T=!!(I?.expandParent&&I?.parentId&&I?.position),j={id:E,type:"position",position:T?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:b};T&&x.push({id:E,parentId:I.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width,height:I.measured.height}}),_.push(j)}if(x.length>0){const{nodeLookup:E,parentLookup:I,nodeOrigin:T}=p(),j=PN(x,E,I,T);_.push(...j)}p().triggerNodeChanges(_)},triggerNodeChanges:h=>{const{onNodesChange:b,setNodes:x,nodes:_,hasDefaultNodes:E,debug:I}=p();if(h?.length){if(E){const T=DN(h,_);x(T)}I&&console.log("React Flow: trigger node changes",h),b?.(h)}},triggerEdgeChanges:h=>{const{onEdgesChange:b,setEdges:x,edges:_,hasDefaultEdges:E,debug:I}=p();if(h?.length){if(E){const T=cL(h,_);x(T)}I&&console.log("React Flow: trigger edge changes",h),b?.(h)}},addSelectedNodes:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:I}=p();if(b){const T=h.map(j=>Ac(j,!0));E(T);return}E(md(_,new Set([...h]),!0)),I(md(x))},addSelectedEdges:h=>{const{multiSelectionActive:b,edgeLookup:x,nodeLookup:_,triggerNodeChanges:E,triggerEdgeChanges:I}=p();if(b){const T=h.map(j=>Ac(j,!0));I(T);return}I(md(x,new Set([...h]))),E(md(_,new Set,!0))},unselectNodesAndEdges:({nodes:h,edges:b}={})=>{const{edges:x,nodes:_,nodeLookup:E,triggerNodeChanges:I,triggerEdgeChanges:T}=p(),j=h||_,O=b||x,A=j.map(M=>{const W=E.get(M.id);return W&&(W.selected=!1),Ac(M.id,!1)}),D=O.map(M=>Ac(M.id,!1));I(A),T(D)},setMinZoom:h=>{const{panZoom:b,maxZoom:x}=p();b?.setScaleExtent([h,x]),f({minZoom:h})},setMaxZoom:h=>{const{panZoom:b,minZoom:x}=p();b?.setScaleExtent([x,h]),f({maxZoom:h})},setTranslateExtent:h=>{p().panZoom?.setTranslateExtent(h),f({translateExtent:h})},setPaneClickDistance:h=>{p().panZoom?.setClickDistance(h)},resetSelectedElements:()=>{const{edges:h,nodes:b,triggerNodeChanges:x,triggerEdgeChanges:_}=p(),E=b.reduce((T,j)=>j.selected?[...T,Ac(j.id,!1)]:T,[]),I=h.reduce((T,j)=>j.selected?[...T,Ac(j.id,!1)]:T,[]);x(E),_(I)},setNodeExtent:h=>{const{nodes:b,nodeLookup:x,parentLookup:_,nodeOrigin:E,elevateNodesOnSelect:I,nodeExtent:T}=p();h[0][0]===T[0][0]&&h[0][1]===T[0][1]&&h[1][0]===T[1][0]&&h[1][1]===T[1][1]||(i1(b,x,_,{nodeOrigin:E,nodeExtent:h,elevateNodesOnSelect:I,checkEquality:!1}),f({nodeExtent:h}))},panBy:h=>{const{transform:b,width:x,height:_,panZoom:E,translateExtent:I}=p();return _ee({delta:h,panZoom:E,transform:b,translateExtent:I,width:x,height:_})},fitView:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:I,nodeLookup:T}=p();if(!b)return Promise.resolve(!1);const j=YE(T,h);return XE({nodes:j,width:x,height:_,panZoom:b,minZoom:E,maxZoom:I},h)},fitViewSync:h=>{const{panZoom:b,width:x,height:_,minZoom:E,maxZoom:I,nodeLookup:T}=p();if(!b)return!1;const j=YE(T,h);return XE({nodes:j,width:x,height:_,panZoom:b,minZoom:E,maxZoom:I},h),j.size>0},cancelConnection:()=>{f({connection:{...O2}})},updateConnection:h=>{f({connection:h})},reset:()=>f({...nq()})}),Object.is);function AL({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:f}){const[p]=Q.useState(()=>jne({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return d.jsx(Zee,{value:p,children:d.jsx(xte,{children:f})})}function One({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:f}){return Q.useContext(ax)?d.jsx(d.Fragment,{children:t}):d.jsx(AL,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:f,children:t})}const Rne={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qne({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:f,onMove:p,onMoveStart:h,onMoveEnd:b,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:T,onNodeMouseEnter:j,onNodeMouseMove:O,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:M,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:R,onNodesDelete:$,onEdgesDelete:F,onDelete:U,onSelectionChange:V,onSelectionDragStart:z,onSelectionDrag:te,onSelectionDragStop:Y,onSelectionContextMenu:le,onSelectionStart:se,onSelectionEnd:ne,onBeforeDelete:oe,connectionMode:ee,connectionLineType:ue=ql.Bezier,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,deleteKeyCode:Ne="Backspace",selectionKeyCode:ze="Shift",selectionOnDrag:Oe=!1,selectionMode:De=zh.Full,panActivationKeyCode:Je="Space",multiSelectionKeyCode:Xe=tb()?"Meta":"Control",zoomActivationKeyCode:Ue=tb()?"Meta":"Control",snapToGrid:ct,snapGrid:_t,onlyRenderVisibleElements:jt=!1,selectNodesOnDrag:Vt,nodesDraggable:nn,nodesConnectable:xe,nodesFocusable:ve,nodeOrigin:ke=aL,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:rt=!0,defaultViewport:Me=ute,minZoom:ut=.5,maxZoom:Qt=2,translateExtent:Gt=Bh,preventScrolling:mn=!0,nodeExtent:ur,defaultMarkerColor:Ln="#b1b1b7",zoomOnScroll:Hr=!0,zoomOnPinch:Oi=!0,panOnScroll:Tr=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Zi=Jc.Free,zoomOnDoubleClick:Yi=!0,panOnDrag:Xi=!0,onPaneClick:ho,onPaneMouseEnter:da,onPaneMouseMove:lc,onPaneMouseLeave:Ms,onPaneScroll:H,onPaneContextMenu:hu,paneClickDistance:un=0,nodeClickDistance:mu=0,children:gu,onReconnect:yu,onReconnectStart:cc,onReconnectEnd:fa,onEdgeContextMenu:es,onEdgeDoubleClick:uc,onEdgeMouseEnter:pa,onEdgeMouseMove:Sf,onEdgeMouseLeave:ha,reconnectRadius:$s=10,onNodesChange:Ja,onEdgesChange:Bs,noDragClassName:Ef="nodrag",noWheelClassName:Nf="nowheel",noPanClassName:vu="nopan",fitView:zs,fitViewOptions:bu,connectOnClick:xu,attributionPosition:kf,proOptions:wu,defaultEdgeOptions:_u,elevateNodesOnSelect:Su,elevateEdgesOnSelect:dc,disableKeyboardA11y:Eu=!1,autoPanOnConnect:If,autoPanOnNodeDrag:dr,autoPanSpeed:Cf,connectionRadius:fc,isValidConnection:Nu,onError:Za,style:Tf,id:pc,nodeDragThreshold:Ya,viewport:ts,onViewportChange:jf,width:gi,height:Of,colorMode:Rf="light",debug:qf,...zo},Xa){const Ri=pc||"1",el=hte(Rf);return d.jsx("div",{"data-testid":"rf__wrapper",...zo,style:{...Tf,...Rne},ref:Xa,className:ti(["react-flow",i,el]),id:pc,children:d.jsxs(One,{nodes:t,edges:e,width:gi,height:Of,fitView:zs,nodeOrigin:ke,nodeExtent:ur,children:[d.jsx(Tne,{onInit:f,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:j,onNodeMouseMove:O,onNodeMouseLeave:A,onNodeContextMenu:D,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:ue,connectionLineStyle:de,connectionLineComponent:ye,connectionLineContainerStyle:we,selectionKeyCode:ze,selectionOnDrag:Oe,selectionMode:De,deleteKeyCode:Ne,multiSelectionKeyCode:Xe,panActivationKeyCode:Je,zoomActivationKeyCode:Ue,onlyRenderVisibleElements:jt,defaultViewport:Me,translateExtent:Gt,minZoom:ut,maxZoom:Qt,preventScrolling:mn,zoomOnScroll:Hr,zoomOnPinch:Oi,zoomOnDoubleClick:Yi,panOnScroll:Tr,panOnScrollSpeed:Jt,panOnScrollMode:Zi,panOnDrag:Xi,onPaneClick:ho,onPaneMouseEnter:da,onPaneMouseMove:lc,onPaneMouseLeave:Ms,onPaneScroll:H,onPaneContextMenu:hu,paneClickDistance:un,nodeClickDistance:mu,onSelectionContextMenu:le,onSelectionStart:se,onSelectionEnd:ne,onReconnect:yu,onReconnectStart:cc,onReconnectEnd:fa,onEdgeContextMenu:es,onEdgeDoubleClick:uc,onEdgeMouseEnter:pa,onEdgeMouseMove:Sf,onEdgeMouseLeave:ha,reconnectRadius:$s,defaultMarkerColor:Ln,noDragClassName:Ef,noWheelClassName:Nf,noPanClassName:vu,rfId:Ri,disableKeyboardA11y:Eu,nodeExtent:ur,viewport:ts,onViewportChange:jf}),d.jsx(pte,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:_,onConnectEnd:E,onClickConnectStart:I,onClickConnectEnd:T,nodesDraggable:nn,nodesConnectable:xe,nodesFocusable:ve,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:rt,elevateNodesOnSelect:Su,elevateEdgesOnSelect:dc,minZoom:ut,maxZoom:Qt,nodeExtent:ur,onNodesChange:Ja,onEdgesChange:Bs,snapToGrid:ct,snapGrid:_t,connectionMode:ee,translateExtent:Gt,connectOnClick:xu,defaultEdgeOptions:_u,fitView:zs,fitViewOptions:bu,onNodesDelete:$,onEdgesDelete:F,onDelete:U,onNodeDragStart:W,onNodeDrag:P,onNodeDragStop:R,onSelectionDrag:te,onSelectionDragStart:z,onSelectionDragStop:Y,onMove:p,onMoveStart:h,onMoveEnd:b,noPanClassName:vu,nodeOrigin:ke,rfId:Ri,autoPanOnConnect:If,autoPanOnNodeDrag:dr,autoPanSpeed:Cf,onError:Za,connectionRadius:fc,isValidConnection:Nu,selectNodesOnDrag:Vt,nodeDragThreshold:Ya,onBeforeDelete:oe,paneClickDistance:un,debug:qf}),d.jsx(cte,{onSelectionChange:V}),gu,d.jsx(ite,{proOptions:wu,position:kf}),d.jsx(nte,{rfId:Ri,disableKeyboardA11y:Eu})]})})}var PL=uL(qne);const Ane=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function Pne({children:t}){const e=On(Ane);return e?hb.createPortal(t,e):null}function Fne(t){const[e,n]=Q.useState(t),r=Q.useCallback(i=>n(s=>DN(i,s)),[]);return[e,n,r]}function Dne(t){const[e,n]=Q.useState(t),r=Q.useCallback(i=>n(s=>cL(i,s)),[]);return[e,n,r]}function rq(t){return On(Q.useCallback(n=>n.nodeLookup.get(t),[t]),Fr)}function Lne({dimensions:t,lineWidth:e,variant:n,className:r}){return d.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:ti(["react-flow__background-pattern",n,r])})}function Mne({radius:t,className:e}){return d.jsx("circle",{cx:t,cy:t,r:t,className:ti(["react-flow__background-pattern","dots",e])})}var ra;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ra||(ra={}));const $ne={[ra.Dots]:1,[ra.Lines]:1,[ra.Cross]:6},Bne=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function FL({id:t,variant:e=ra.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:f,patternClassName:p}){const h=Q.useRef(null),{transform:b,patternId:x}=On(Bne,Fr),_=r||$ne[e],E=e===ra.Dots,I=e===ra.Cross,T=Array.isArray(n)?n:[n,n],j=[T[0]*b[2]||1,T[1]*b[2]||1],O=_*b[2],A=Array.isArray(s)?s:[s,s],D=I?[O,O]:j,M=[A[0]*b[2]||1+D[0]/2,A[1]*b[2]||1+D[1]/2],W=`${x}${t||""}`;return d.jsxs("svg",{className:ti(["react-flow__background",f]),style:{...u,...lx,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[d.jsx("pattern",{id:W,x:b[0]%j[0],y:b[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:E?d.jsx(Mne,{radius:O/2,className:p}):d.jsx(Lne,{dimensions:D,lineWidth:i,variant:e,className:p})}),d.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${W})`})]})}FL.displayName="Background";const DL=Q.memo(FL);function zne(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:d.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Wne(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:d.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Une(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:d.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Vne(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Hne(){return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:d.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function oy({children:t,className:e,...n}){return d.jsx("button",{type:"button",className:ti(["react-flow__controls-button",e]),...n,children:t})}const Kne=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom});function LL({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:f,children:p,position:h="bottom-left",orientation:b="vertical","aria-label":x="React Flow controls"}){const _=Cr(),{isInteractive:E,minZoomReached:I,maxZoomReached:T}=On(Kne,Fr),{zoomIn:j,zoomOut:O,fitView:A}=vf(),D=()=>{j(),s?.()},M=()=>{O(),o?.()},W=()=>{A(i),l?.()},P=()=>{_.setState({nodesDraggable:!E,nodesConnectable:!E,elementsSelectable:!E}),u?.(!E)},R=b==="horizontal"?"horizontal":"vertical";return d.jsxs(FN,{className:ti(["react-flow__controls",R,f]),position:h,style:t,"data-testid":"rf__controls","aria-label":x,children:[e&&d.jsxs(d.Fragment,{children:[d.jsx(oy,{onClick:D,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T,children:d.jsx(zne,{})}),d.jsx(oy,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I,children:d.jsx(Wne,{})})]}),n&&d.jsx(oy,{className:"react-flow__controls-fitview",onClick:W,title:"fit view","aria-label":"fit view",children:d.jsx(Une,{})}),r&&d.jsx(oy,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity",children:E?d.jsx(Hne,{}):d.jsx(Vne,{})}),p]})}LL.displayName="Controls";const ML=Q.memo(LL);function Qne({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:f,borderRadius:p,shapeRendering:h,selected:b,onClick:x}){const{background:_,backgroundColor:E}=s||{},I=o||_||E;return d.jsx("rect",{className:ti(["react-flow__minimap-node",{selected:b},f]),x:e,y:n,rx:p,ry:p,width:r,height:i,style:{fill:I,stroke:l,strokeWidth:u},shapeRendering:h,onClick:x?T=>x(T,t):void 0})}const Gne=Q.memo(Qne),Jne=t=>t.nodes.map(e=>e.id),F0=t=>t instanceof Function?t:()=>t;function Zne({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Gne,onClick:o}){const l=On(Jne,Fr),u=F0(e),f=F0(t),p=F0(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return d.jsx(d.Fragment,{children:l.map(b=>d.jsx(Xne,{id:b,nodeColorFunc:u,nodeStrokeColorFunc:f,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:h},b))})}function Yne({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:f,x:p,y:h,width:b,height:x}=On(_=>{const E=_.nodeLookup.get(t),{x:I,y:T}=E.internals.positionAbsolute,{width:j,height:O}=Ga(E);return{node:E,x:I,y:T,width:j,height:O}},Fr);return!f||f.hidden||!$2(f)?null:d.jsx(l,{x:p,y:h,width:b,height:x,style:f.style,selected:!!f.selected,className:r(f),color:e(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:u,id:f.id})}const Xne=Q.memo(Yne);var ere=Q.memo(Zne);const tre=200,nre=150,rre=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?L2(_m(t.nodeLookup),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height}},ire="react-flow__minimap-desc";function $L({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:f,maskStrokeColor:p,maskStrokeWidth:h,position:b="bottom-right",onClick:x,onNodeClick:_,pannable:E=!1,zoomable:I=!1,ariaLabel:T="React Flow mini map",inversePan:j,zoomStep:O=10,offsetScale:A=5}){const D=Cr(),M=Q.useRef(null),{boundingRect:W,viewBB:P,rfId:R,panZoom:$,translateExtent:F,flowWidth:U,flowHeight:V}=On(rre,Fr),z=t?.width??tre,te=t?.height??nre,Y=W.width/z,le=W.height/te,se=Math.max(Y,le),ne=se*z,oe=se*te,ee=A*se,ue=W.x-(ne-W.width)/2-ee,de=W.y-(oe-W.height)/2-ee,ye=ne+ee*2,we=oe+ee*2,Ne=`${ire}-${R}`,ze=Q.useRef(0),Oe=Q.useRef();ze.current=se,Q.useEffect(()=>{if(M.current&&$)return Oe.current=jee({domNode:M.current,panZoom:$,getTransform:()=>D.getState().transform,getViewScale:()=>ze.current}),()=>{Oe.current?.destroy()}},[$]),Q.useEffect(()=>{Oe.current?.update({translateExtent:F,width:U,height:V,inversePan:j,pannable:E,zoomStep:O,zoomable:I})},[E,I,j,O,F,U,V]);const De=x?Xe=>{const[Ue,ct]=Oe.current?.pointer(Xe)||[0,0];x(Xe,{x:Ue,y:ct})}:void 0,Je=_?Q.useCallback((Xe,Ue)=>{const ct=D.getState().nodeLookup.get(Ue);_(Xe,ct)},[]):void 0;return d.jsx(FN,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*se:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="string"?o:void 0},className:ti(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:d.jsxs("svg",{width:z,height:te,viewBox:`${ue} ${de} ${ye} ${we}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Ne,ref:M,onClick:De,children:[T&&d.jsx("title",{id:Ne,children:T}),d.jsx(ere,{onClick:Je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),d.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-ee},${de-ee}h${ye+ee*2}v${we+ee*2}h${-ye-ee*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}$L.displayName="MiniMap";const BL=Q.memo($L);function sre({nodeId:t,position:e,variant:n=ih.Handle,className:r,style:i={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,shouldResize:b,onResizeStart:x,onResize:_,onResizeEnd:E}){const I=hL(),T=typeof t=="string"?t:I,j=Cr(),O=Q.useRef(null),A=n===ih.Line?"right":"bottom-right",D=e??A,M=Q.useRef(null);Q.useEffect(()=>{if(!(!O.current||!T))return M.current||(M.current=Vee({domNode:O.current,nodeId:T,getStoreItems:()=>{const{nodeLookup:$,transform:F,snapGrid:U,snapToGrid:V,nodeOrigin:z,domNode:te}=j.getState();return{nodeLookup:$,transform:F,snapGrid:U,snapToGrid:V,nodeOrigin:z,paneDomNode:te}},onChange:($,F)=>{const{triggerNodeChanges:U,nodeLookup:V,parentLookup:z,nodeOrigin:te}=j.getState(),Y=[],le={x:$.x,y:$.y},se=V.get(T);if(se&&se.expandParent&&se.parentId){const ne=se.origin??te,oe=$.width??se.measured.width,ee=$.height??se.measured.height,ue={id:se.id,parentId:se.parentId,rect:{width:oe,height:ee,...B2({x:$.x??se.position.x,y:$.y??se.position.y},{width:oe,height:ee},se.parentId,V,ne)}},de=PN([ue],V,z,te);Y.push(...de),le.x=$.x?Math.max(ne[0]*oe,$.x):void 0,le.y=$.y?Math.max(ne[1]*ee,$.y):void 0}if(le.x!==void 0&&le.y!==void 0){const ne={id:T,type:"position",position:{...le}};Y.push(ne)}if($.width!==void 0&&$.height!==void 0){const ne={id:T,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:$.width,height:$.height}};Y.push(ne)}for(const ne of F){const oe={...ne,type:"position"};Y.push(oe)}U(Y)},onEnd:()=>{const $={id:T,type:"dimensions",resizing:!1};j.getState().triggerNodeChanges([$])}})),M.current.update({controlPosition:D,boundaries:{minWidth:l,minHeight:u,maxWidth:f,maxHeight:p},keepAspectRatio:h,onResizeStart:x,onResize:_,onResizeEnd:E,shouldResize:b}),()=>{M.current?.destroy()}},[D,l,u,f,p,h,x,_,E,b]);const W=D.split("-"),P=n===ih.Line?"borderColor":"backgroundColor",R=o?{...i,[P]:o}:i;return d.jsx("div",{className:ti(["react-flow__resize-control","nodrag",...W,n,r]),ref:O,style:R,children:s})}Q.memo(sre);const Kh="icon-[gala--clock]",ore=async({tx:t,userId:e})=>{const n=await t.selectFrom(t.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id as buildingId","c.id","c.cycle","bl.cycles",r=>r.case().when(r.not(r.exists(r.selectFrom("Blueprint_Requirement as br").select(r.lit(1).as("one")).whereRef("br.blueprintId","=","b.blueprintId").where(i=>i.not(i.exists(i.selectFrom("Inventory as i").select(i.lit(1).as("one")).where("i.id","in",i.selectFrom("Building_Inventory").select("inventoryId").whereRef("buildingId","=","b.id")).where("i.type","=","construction").whereRef("i.resourceId","=","br.resourceId").whereRef("i.amount",">=","br.amount"))))))).then(r.lit(!0)).else(r.lit(!1)).end().as("withAvailableResources")]).where("b.userId","=",e).where("c.plan","=",!1).as("building")).where("building.withAvailableResources","=",!0).selectAll().execute();for await(const{id:r,cycle:i,cycles:s,buildingId:o}of n){if(await t.deleteFrom("Route").where("toId","=",o).execute(),i>s){await t.deleteFrom("Construction").where("id","=",r).execute();continue}await t.updateTable("Construction").set("cycle",i+1).where("id","=",r).execute()}},iq=async({tx:t,userId:e,buildingId:n,blueprintProductionId:r})=>{const i=await t.selectFrom("Blueprint_Production as bp").select(["bp.cycles"]).where("bp.id","=",r).executeTakeFirstOrThrow(),{count:s}=await t.selectFrom("Cycle as c").select(l=>l.fn.count("c.id").as("count")).where("c.userId","=",e).executeTakeFirstOrThrow(),o=await t.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",r).execute();for await(const{resourceId:l,amount:u,passive:f}of o){const p=await t.selectFrom("Inventory as i").innerJoin("User_Inventory as ui","ui.inventoryId","i.id").select(["i.id","i.amount"]).where("ui.userId","=",e).where("i.resourceId","=",l).where("i.amount",">=",u).executeTakeFirstOrThrow();f||await t.updateTable("Inventory").set({amount:p.amount-u}).where("id","=",p.id).execute()}await t.insertInto("Production").values({id:Tn(),buildingId:n,blueprintProductionId:r,userId:e,cycle:0,from:s,to:s+i.cycles}).execute()},are=async({tx:t,userId:e,currentCycle:n})=>{const r=await t.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","p.buildingId","p.cycle","p.to","bp.resourceId","r.name","bp.amount"]).where("userId","=",e).execute();for await(const{id:o,buildingId:l,resourceId:u,cycle:f,to:p,amount:h}of r){if(n>p){const b=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",l)).where("i.resourceId","=",u).executeTakeFirst();if(!b||b.limit>0&&b.amount+h>b.limit)continue;await t.updateTable("Inventory").set({amount:b.amount+h}).where("id","=",b.id).execute(),await t.deleteFrom("Production as p").where("p.id","=",o).execute();continue}await t.updateTable("Production").set("cycle",f+1).where("id","=",o).execute()}const i=await t.selectFrom("Building as b").select(["b.id as buildingId","b.productionId"]).where("b.userId","=",e).where("b.productionId","is not",null).execute();for await(const{buildingId:o,productionId:l}of i)try{const{count:u}=await t.selectFrom("Production as p").where("p.buildingId","=",o).select(f=>f.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(u>0)continue;await iq({tx:t,blueprintProductionId:l,buildingId:o,userId:e}),await t.updateTable("Building").set({productionId:null}).where("id","=",o).execute()}catch{}const s=await t.selectFrom("Building as b").select(["b.id as buildingId","b.recurringProductionId"]).where("b.userId","=",e).where("b.recurringProductionId","is not",null).execute();for await(const{buildingId:o,recurringProductionId:l}of s)try{const{count:u}=await t.selectFrom("Production as p").where("p.buildingId","=",o).select(f=>f.fn.count("p.id").as("count")).executeTakeFirstOrThrow();if(u>0)continue;await iq({tx:t,blueprintProductionId:l,buildingId:o,userId:e})}catch{}},lre=async({tx:t,userId:e})=>{const n=await t.selectFrom("Route as r").select(["r.id","r.toId","r.fromId"]).where("r.userId","=",e).execute();for await(const{id:r,fromId:i,toId:s}of n){const o=await t.selectFrom("Route_Resource as rr").select(["rr.amount","rr.resourceId"]).where("rr.routeId","=",r).execute();for await(const{amount:l,resourceId:u}of o){const f=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",i)).where("i.resourceId","=",u).executeTakeFirst(),p=await t.selectFrom("Inventory as i").select(["i.id","i.amount","i.limit"]).where("i.id","in",t.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",s)).where("i.resourceId","=",u).executeTakeFirst();if(!f||!p){console.log("Source or target is not compatible");continue}const h=Math.min(f.amount,l??f.amount);if(p.amount+h>p.limit){console.log("Target is full");continue}await t.updateTable("Inventory").set({amount:f.amount-h}).where("id","=",f.id).execute(),await t.updateTable("Inventory").set({amount:p.amount+h}).where("id","=",p.id).execute()}}},cre=async({tx:t,userId:e})=>{try{await t.insertInto("Cycle").values({id:Tn(),stamp:dn.now().toUTC().toSQLTime(),userId:e}).execute();const n=(await t.selectFrom("Cycle as c").select(r=>r.fn.count("c.id").as("count")).where("c.userId","=",e).executeTakeFirstOrThrow()).count;await ore({tx:t,userId:e}),await are({tx:t,userId:e,currentCycle:n}),await lre({tx:t,userId:e})}catch(n){throw console.error(n),n}},zL=({userId:t,cycle:e,...n})=>{const r=Hn([["Cycle"],["GameMap"],["Resource_Queue"],["Building_Queue"],["Building"],["User_Inventory"],["Inventory"],["Building_Base_Production"]]),i=Zt({mutationKey:["useCycleMutation"],async mutationFn({userId:s}){return It.transaction().execute(async o=>cre({userId:s,tx:o}))},async onSuccess(){await r()}});return d.jsxs(jn,{iconEnabled:Kh,iconDisabled:Kh,onClick:()=>{i.mutate({userId:t})},loading:i.isPending,...n,children:[d.jsx(J,{css:{base:["font-bold"]},label:"New cycle (label)"}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{className:"font-light text-sm",children:hn({number:e})}),d.jsx(rn,{icon:"icon-[solar--arrow-right-linear]"}),d.jsx("div",{className:"font-bold",children:hn({number:e+1})})]})]})},ure=({fromX:t,fromY:e,toX:n,toY:r,connectionLineStyle:i})=>{const[s]=ON({sourceX:t,sourceY:e,targetX:n,targetY:r});return d.jsx("g",{children:d.jsx("path",{style:i,fill:"none",d:s})})};function sq(t,e){const n={...t.internals.positionAbsolute,...t},r=Math.round(n.x),i=Math.round(n.y),s=Math.round(e.x),o=Math.round(e.y);return s<=r+1?Dt.Left:s>=r+n.measured.width-1?Dt.Right:o<=i+1?Dt.Top:o>=n.y+n.measured.height-1?Dt.Bottom:Dt.Top}function oq(t,e){const{width:n,height:r}=t.measured,i=t.internals.positionAbsolute,s=e.internals.positionAbsolute,o=n/2,l=r/2,u=i.x+o,f=i.y+l,p=s.x+e.measured.width/2,h=s.y+e.measured.height/2,b=(p-u)/(2*o)-(h-f)/(2*l),x=(p-u)/(2*o)+(h-f)/(2*l),_=1/(Math.abs(b)+Math.abs(x)||1),E=_*b,I=_*x,T=o*(E+I)+u,j=l*(-E+I)+f;return{x:T,y:j}}function dre(t,e){const n=oq(t,e),r=oq(e,t);return{sx:n.x,sy:n.y,tx:r.x,ty:r.y,sourcePos:sq(t,n),targetPos:sq(e,r)}}const fre=({id:t,source:e,target:n,markerEnd:r,style:i})=>{const s=rq(e),o=rq(n);if(!s||!o)return null;const{sx:l,sy:u,tx:f,ty:p}=dre(s,o),[h]=MN({sourceX:l,sourceY:u,targetX:f,targetY:p});return d.jsx("path",{id:t,className:"react-flow__edge-path",d:h,markerEnd:r,style:i})},pre=({id:t,data:e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-col gap-2 w-full items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsx(Mt,{icon:rc,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:n,id:t},css:{base:["font-bold"]},children:e.name}),e.productionName?d.jsxs("div",{className:"flex flex-row gap-2 items-center text-xs text-slate-400",children:[d.jsx(rn,{icon:Fn,variant:{size:"xs"}})," ",d.jsx("div",{children:e.productionName})]}):e.recurringProductionName?d.jsxs("div",{className:"flex flex-row gap-2 items-center text-xs text-slate-400",children:[d.jsx(rn,{icon:"icon-[oui--refresh]",variant:{size:"xs"}}),d.jsx("div",{children:e.recurringProductionName})]}):null]}),e.production?d.jsx(Ha,{value:100*e.production.cycle/(e.production.to-e.production.from)}):null,d.jsx(lo,{className:"hidden",position:Dt.Right,type:"source",isConnectable:!1}),d.jsx(lo,{className:"hidden",position:Dt.Left,type:"target",isConnectable:!1})]})},hre=({id:t,data:e})=>{const n=OL(),r=n.inProgress&&n.fromNode.id!==t;return d.jsxs("div",{className:"flex flex-row gap-2 w-full",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:"icon-[gis--route-end]",css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsxs("div",{className:"w-full h-full absolute top-0 left-0",children:[!n.inProgress&&d.jsx(lo,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Dt.Right,type:"source"}),(!n.inProgress||r)&&d.jsx(lo,{className:"absolute top-0 left-0 transform-none border-none opacity-0 w-full h-full",position:Dt.Left,type:"target",isConnectableStart:!1})]})]})},mre=({data:t})=>{const e=Hn([["GameMap"]]),n=Zt({async mutationFn({constructionId:r}){return It.transaction().execute(i=>i.updateTable("Construction").set({plan:!1}).where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between w-full",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:"icon-[carbon--floorplan]",css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name})]}),d.jsx(jn,{iconEnabled:AE,iconDisabled:AE,loading:n.isPending,disabled:!t.valid,onClick:()=>{n.mutate({constructionId:t.constructionId})}})]})},Xd="icon-[emojione-monotone--construction]",gre=({data:t})=>{const{locale:e}=sn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsx(Mt,{icon:Xd,to:"/$locale/apps/derivean/map/building/$id/construction/requirements",params:{locale:e,id:t.id},css:{base:["font-bold"]},children:t.name})}),d.jsx(Ha,{value:100*t.cycle/(t.to-t.from)}),d.jsx(lo,{className:"hidden",position:Dt.Right,type:"source",isConnectable:!1}),d.jsx(lo,{className:"hidden",position:Dt.Left,type:"target",isConnectable:!1})]})},Rn="icon-[solar--home-outline]",My=256,D0=My/4,L0=["bg-white","border-[4px]","border-slate-300","shadow-slate-200"],yre={stroke:"#b1b1b7"},vre={construction:mre,queue:gre,building:pre,"building-route":hre},bre={route:fre},xre=({userId:t,cycle:e,construction:n,queue:r,building:i,route:s,zoomToId:o,routing:l})=>{const u=Hn([["GameMap"]]),{locale:f}=sn({from:"/$locale"}),p=Q.useMemo(()=>[...n.map(R=>({id:R.id,data:R,position:{x:R.x,y:R.y},type:"construction",width:My,height:D0,className:Cn(L0,["z-10",R.valid?["border-green-500"]:["border-red-500"]])})),...r.map(R=>({id:R.id,data:R,position:{x:R.x,y:R.y},type:l?"building-route":"queue",width:My,height:D0,className:Cn(L0,["nodrag"])})),...i.map(R=>({id:R.id,data:R,position:{x:R.x,y:R.y},type:l?"building-route":"building",width:My,height:D0,className:Cn(L0,["nodrag"])}))],[n,r,i,l]),h=Q.useMemo(()=>[...s.map(R=>({id:R.id,source:R.fromId,target:R.toId,type:"route",animated:!1,markerEnd:{type:Wh.ArrowClosed,color:"#b1b1b7"}}))],[s]),[b,x]=Fne(p),[_,E]=Dne(h),{updateNode:I,getIntersectingNodes:T,fitView:j}=vf();Q.useEffect(()=>{x(p)},[p]),Q.useEffect(()=>{E(h)},[h]),Q.useEffect(()=>{o&&setTimeout(()=>{j({nodes:[{id:o}],duration:750,minZoom:2,maxZoom:2})},250)},[j,o]);const O=Zt({mutationKey:["Construction","position"],async mutationFn({buildingId:R,x:$,y:F,valid:U}){return It.transaction().execute(async V=>{const{constructionId:z}=await V.selectFrom("Building as b").innerJoin("Construction as c","c.id","b.constructionId").select(["b.id","b.constructionId"]).where("c.plan","=",!0).where("b.id","=",R).executeTakeFirstOrThrow(()=>new Error("Construction not found or not planned."));await V.updateTable("Building").set({x:$,y:F}).where("id","=",R).execute(),await V.updateTable("Construction").set({valid:U}).where("id","=",z).execute()})},async onSuccess(){await u()}}),A=Q.useCallback(R=>{x($=>DN(R,$))},[x]),D=Q.useCallback((R,$)=>{const F=T($).length>0;I($.id,{...$,data:{...$.data,valid:!F},className:Cn([$.className,F?["border-red-500"]:["border-green-500"]])})},[T,I]),M=Q.useCallback((R,$)=>{if($.type==="construction"){const F=T($).length>0;O.mutate({buildingId:$.id,x:$.position.x,y:$.position.y,valid:!F})}},[T,O]),W=Zt({async mutationFn({fromId:R,toId:$}){return It.transaction().execute(async F=>F.insertInto("Route").values({id:Tn(),fromId:R,toId:$,userId:t}).execute())},async onSuccess(){await u()}}),P=Q.useCallback(R=>E($=>(W.mutate({fromId:R.source,toId:R.target}),H2(R,$))),[E]);return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"flex flex-row",children:[d.jsxs(PL,{nodes:b,edges:_,onNodesChange:A,onNodeDrag:D,onNodeDragStop:M,onConnect:P,className:"flex-grow h-screen",fitView:!0,snapToGrid:!0,snapGrid:[32,32],elementsSelectable:!1,nodeTypes:vre,edgeTypes:bre,connectionLineComponent:ure,connectionLineStyle:yre,children:[d.jsx(zL,{userId:t,cycle:e,css:{base:["react-flow__panel","absolute","top-1","right-1"]}}),d.jsx(ML,{orientation:"horizontal",showInteractive:!1,showZoom:!0}),d.jsx(BL,{zoomable:!0,draggable:!0,pannable:!0}),d.jsx(DL,{variant:ra.Dots,gap:32,size:1}),d.jsxs("div",{className:"react-flow__panel flex flex-row p-2 border bg-white border-slate-300 shadow-sm",children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/game",params:{locale:f}}),d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/map/construction",params:{locale:f}}),d.jsx(Mt,{icon:Ii,to:"/$locale/apps/derivean/map/inventory",params:{locale:f}}),d.jsx(Mt,{icon:"icon-[gis--route-end]",to:"/$locale/apps/derivean/map",params:{locale:f},search:{routing:!l},css:{base:l?["text-green-600"]:void 0}})]})]}),d.jsx(fo,{})]})})},wre=({cycle:t,userId:e,construction:n,building:r,queue:i,route:s,zoomToId:o,routing:l})=>d.jsx(AL,{children:d.jsx(xre,{userId:e,cycle:t,construction:n,queue:i,building:r,route:s,zoomToId:o,routing:l})}),a1=$t("/$locale/apps/derivean/map")({validateSearch:er(L.object({zoomToId:L.string().optional(),routing:L.boolean().optional()})),async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return vm.parse(mf.get("session"))}catch{throw Jh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,construction:await t.ensureQueryData({queryKey:["GameMap","construction",r.id],async queryFn(){return e.transaction().execute(i=>Yr({select:i.selectFrom("Building as bg").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.constructionId","bl.name","bg.x","bg.y","c.valid"]).where("c.plan","=",!0).where("c.userId","=",r.id),output:L.object({id:L.string().min(1),blueprintId:L.string().min(1),constructionId:L.string().min(1),name:L.string().min(1),x:L.number(),y:L.number(),valid:oo()})}))}}),queue:await t.ensureQueryData({queryKey:["GameMap","queue",r.id],async queryFn(){return e.transaction().execute(i=>Yr({select:i.selectFrom("Building as bg").innerJoin("Construction as c","c.id","bg.constructionId").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bl.name","bg.x","bg.y","c.valid","c.from","c.to","c.cycle"]).where("c.plan","=",!1).where("c.userId","=",r.id),output:L.object({id:L.string().min(1),blueprintId:L.string().min(1),name:L.string().min(1),x:L.number(),y:L.number(),from:L.number().int().nonnegative(),to:L.number().int().nonnegative(),cycle:L.number().int().nonnegative(),valid:oo()})}))}}),building:await t.ensureQueryData({queryKey:["GameMap","building",r.id],async queryFn(){return e.transaction().execute(i=>Yr({select:i.selectFrom("Building as bg").innerJoin("Blueprint as bl","bl.id","bg.blueprintId").select(["bg.id","bg.blueprintId","bg.productionId","bg.recurringProductionId",s=>s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.productionId").select("r.name").as("productionName"),s=>s.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").whereRef("bp.id","=","bg.recurringProductionId").select("r.name").as("recurringProductionName"),s=>s.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(o=>NF.jsonObject({id:o.ref("p.id"),name:o.ref("r.name"),cycle:o.ref("p.cycle"),from:o.ref("p.from"),to:o.ref("p.to")}).as("production")).whereRef("p.buildingId","=","bg.id").as("production"),"bl.name","bg.x","bg.y"]).where("bg.constructionId","is",null).where("bg.userId","=",r.id),output:L.object({id:L.string().min(1),blueprintId:L.string().min(1),name:L.string().min(1),productionId:L.string().nullish(),recurringProductionId:L.string().nullish(),productionName:L.string().nullish(),recurringProductionName:L.string().nullish(),production:O9(L.object({id:L.string().min(1),name:L.string().min(1),cycle:L.number().int().nonnegative(),from:L.number().int().nonnegative(),to:L.number().int().nonnegative()})).nullish(),x:L.number(),y:L.number()})}))}}),route:await t.ensureQueryData({queryKey:["GameMap","route",r.id],async queryFn(){return e.transaction().execute(i=>Yr({select:i.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.userId","=",r.id),output:L.object({id:L.string().min(1),fromId:L.string().min(1),toId:L.string().min(1),fromName:L.string().min(1),toName:L.string().min(1)})}))}}),cycle:await t.ensureQueryData({queryKey:["GameMap","Cycle",r.id],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{user:t,construction:e,queue:n,building:r,route:i,cycle:s}=a1.useLoaderData(),{zoomToId:o,routing:l}=a1.useSearch();return d.jsx(wre,{userId:t.id,cycle:s,construction:e,queue:n,building:r,route:i,zoomToId:o,routing:l})}}),_re=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsxs(nc,{...t,children:[d.jsx(zn,{icon:"icon-[et--map]",to:"/$locale/apps/derivean/map",params:{locale:e},children:d.jsx(J,{label:"Map (menu)"})}),d.jsx(zn,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:d.jsx(J,{label:"Blueprint list (menu)"})}),d.jsx(zn,{icon:Ii,to:"/$locale/apps/derivean/game/inventory",params:{locale:e},children:d.jsx(J,{label:"Inventory (menu)"})})]})},Sre=$t("/$locale/apps/derivean/game")({async beforeLoad({context:t,params:{locale:e}}){return{...t,async session(){try{return vm.parse(mf.get("session"))}catch{throw Jh({to:"/$locale/apps/derivean/public/login",params:{locale:e}})}}}},async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{session:r,inventory:await t.ensureQueryData({queryKey:["User_Inventory"],async queryFn(){return e.transaction().execute(async i=>i.selectFrom("Inventory as i").innerJoin("User_Inventory as ui","ui.inventoryId","i.id").select(["i.id","i.amount","i.limit","i.resourceId"]).where("ui.userId","=",r.id).execute())}}),cycle:await t.ensureQueryData({queryKey:["Cycle"],async queryFn(){return e.transaction().execute(async i=>(await i.selectFrom("Cycle as c").select(s=>s.fn.count("c.id").as("count")).where("c.userId","=",r.id).executeTakeFirstOrThrow()).count)}})}},component(){const{locale:t}=sn({from:"/$locale"}),{session:e,cycle:n}=Vi({from:"/$locale/apps/derivean/game"}),r=RB({filters:{status:"pending",mutationKey:["useCycleMutation"]},select(i){return i.state.status}});return d.jsx(HD,{logo:d.jsx(Mt,{to:"/$locale/apps/derivean/game",params:{locale:t},children:d.jsx(XD,{})}),menu:d.jsxs("div",{className:"flex flex-row items-center gap-4",children:[d.jsx(_re,{}),d.jsx(zL,{cycle:n,userId:e.id})]}),actions:d.jsxs(d.Fragment,{children:[e.name,d.jsx(Mt,{icon:"icon-[clarity--crown-line]",to:"/$locale/apps/derivean/root",params:{locale:t}}),d.jsx(Mt,{icon:yN,to:"/$locale/apps/derivean/public/logout",params:{locale:t},preload:!1})]}),css:{base:r.length?["select-none","pointer-events-none","opacity-50"]:void 0},children:d.jsx(fo,{})})}});var $y={exports:{}},Ere=$y.exports,aq;function Nre(){return aq||(aq=1,function(t,e){(function(n,r){r()})(Ere,function(){function n(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,p,h){var b=new XMLHttpRequest;b.open("GET",f),b.responseType="blob",b.onload=function(){u(b.response,p,h)},b.onerror=function(){console.error("could not download file")},b.send()}function i(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function s(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Lc=="object"&&Lc.global===Lc?Lc:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(f,p,h){var b=o.URL||o.webkitURL,x=document.createElement("a");p=p||f.name||"download",x.download=p,x.rel="noopener",typeof f=="string"?(x.href=f,x.origin===location.origin?s(x):i(x.href)?r(f,p,h):s(x,x.target="_blank")):(x.href=b.createObjectURL(f),setTimeout(function(){b.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,h){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,h),p);else if(i(f))r(f,p,h);else{var b=document.createElement("a");b.href=f,b.target="_blank",setTimeout(function(){s(b)})}}:function(f,p,h,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof f=="string")return r(f,p,h);var x=f.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,E=/CriOS\/[\d]+/.test(navigator.userAgent);if((E||x&&_||l)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var O=I.result;O=E?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=O:location=O,b=null},I.readAsDataURL(f)}else{var T=o.URL||o.webkitURL,j=T.createObjectURL(f);b?b.location=j:location.href=j,b=null,setTimeout(function(){T.revokeObjectURL(j)},4e4)}});o.saveAs=u.saveAs=u,t.exports=u})}($y)),$y.exports}var kre=Nre();const Ire=uo(kre),M0=["Tag","Resource","Resource_Tag","Blueprint","Inventory","Blueprint_Inventory","Blueprint_Dependency","Blueprint_Conflict","Blueprint_Requirement","Blueprint_Production","Blueprint_Production_Requirement","Blueprint_Production_Dependency","Blueprint_Production_Resource","Default_Inventory"],Cre=$t("/$locale/apps/derivean/root/")({component(){const t=Zt({mutationKey:["export"],async mutationFn(){return In.promise((async()=>{const e=[];await It.transaction().execute(async n=>{for await(const r of M0)e.push({source:r,entities:await n.selectFrom(r).selectAll().execute()})}),Ire.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"export.json")})(),xr("Export game files"))}});return d.jsxs("div",{className:"flex flex-col gap-4 w-2/3 mx-auto",children:[d.jsx(qG,{onDrop:async e=>{const[n]=e;if(!n)return;const r=JSON.parse(await n.text());await Pr`PRAGMA foreign_keys = OFF`.execute(It),await In.promise(It.transaction().execute(async i=>{for await(const{source:s}of r){const o=M0.find(l=>l===s);if(!o)throw new Error(`Unknown source [${s}]`);await i.deleteFrom(o).execute()}for await(const{source:s,entities:o}of r){const l=M0.find(u=>u===s);if(!l)throw new Error(`Unknown source [${s}]`);for await(const u of Object.values(o))await i.insertInto(l).values(u).execute()}}),xr("Import game files")),await Pr`PRAGMA foreign_keys = ON`.execute(It)}}),d.jsx("div",{className:"flex items-center justify-center mt-10 gap-4",children:d.jsx(jn,{iconEnabled:wN,loading:t.isPending,onClick:()=>t.mutate(),variant:{variant:"subtle"},children:d.jsx(J,{label:"Export game files (label)"})})}),d.jsx("h2",{children:"TODO"}),d.jsxs("ul",{className:"flex flex-col gap-2",children:[d.jsx("li",{children:"Remove User_Inventory, deduct all inventory transactions from Building_Inventory."}),d.jsxs("li",{children:[d.jsx("p",{children:'Game start: define default construction (instead of default inventory); those building should be exclusive to very first building: "Center" will be first, "Storage" next and "Storage" will define "Center" as exclusive, so user should not be able to build more centers.'}),d.jsx("p",{children:"Or something better; like default buildings and define default inventories for those buildings; this will be quite bunch of work for root UI."})]}),d.jsx("li",{children:"Add notification center like inventory is full, production is full and so on."}),d.jsx("li",{children:'Upgrades: Put everything into the building, drive upgrades by passive "Research" points'}),d.jsx("li",{children:"Bundle default gameplay as exported json (put into public); add button to root to load default/selected gameplay; idea is a few buttons: Settler like, Fantasy, AoE and so on."}),d.jsx("li",{children:"Define game ending rules: amount of resources in (individual resourece per required cycle), required building in a cycle. When a player fail, game end with the ability to reset. Each game rule may have an ending message to show."}),d.jsx("li",{children:"Define winning rules: amount of resources / building built in specific cycle. When rules are not met, it's like a fail."}),d.jsx("li",{children:"Add something like world available resources + the ability to drain and add resources to the world. Something like Wolrd_Inventory where 0 means unlimited resources."}),d.jsx("li",{children:"World renewal resources: a list of resources with cycles and amount when they got renewed (world_renewal_queue)."}),d.jsx("li",{children:"Defines seasons: list of cyclic seasons with their length; resource production may be bound to specific season(s)."}),d.jsx("li",{children:"Add maintenance cost for a building: when a cycle ends, cost is deducted from the inventory. If there is not enough resources, building will be marked as offline (closed for production)."}),d.jsx("li",{children:"Dispaly resources per season (some resources will be available only in specific season)"}),d.jsx("li",{children:"Add resource probability drop: some resources may have not be produces (like a crop). This should be thinked out."}),d.jsx("li",{children:'Production line should have requirements, but also something like "display requirements" required to even show the production line. Same for buildings.'})]})]})}}),Tre=$t("/$locale/apps/derivean/map/")({}),jre=$t("/$locale/apps/derivean/game/")({component(){const{tva:t}=ir({from:"__root__"}),e=t().slots;return d.jsx("div",{className:e.base(),children:d.jsx("div",{children:"management here"})})}});var $0,lq;function $N(){if(lq)return $0;lq=1;var t="\0",e="\0",n="\x01";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(p){p&&(this._isDirected=Object.hasOwn(p,"directed")?p.directed:!0,this._isMultigraph=Object.hasOwn(p,"multigraph")?p.multigraph:!1,this._isCompound=Object.hasOwn(p,"compound")?p.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[e]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(p){return this._label=p,this}graph(){return this._label}setDefaultNodeLabel(p){return this._defaultNodeLabelFn=p,typeof p!="function"&&(this._defaultNodeLabelFn=()=>p),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var p=this;return this.nodes().filter(h=>Object.keys(p._in[h]).length===0)}sinks(){var p=this;return this.nodes().filter(h=>Object.keys(p._out[h]).length===0)}setNodes(p,h){var b=arguments,x=this;return p.forEach(function(_){b.length>1?x.setNode(_,h):x.setNode(_)}),this}setNode(p,h){return Object.hasOwn(this._nodes,p)?(arguments.length>1&&(this._nodes[p]=h),this):(this._nodes[p]=arguments.length>1?h:this._defaultNodeLabelFn(p),this._isCompound&&(this._parent[p]=e,this._children[p]={},this._children[e][p]=!0),this._in[p]={},this._preds[p]={},this._out[p]={},this._sucs[p]={},++this._nodeCount,this)}node(p){return this._nodes[p]}hasNode(p){return Object.hasOwn(this._nodes,p)}removeNode(p){var h=this;if(Object.hasOwn(this._nodes,p)){var b=x=>h.removeEdge(h._edgeObjs[x]);delete this._nodes[p],this._isCompound&&(this._removeFromParentsChildList(p),delete this._parent[p],this.children(p).forEach(function(x){h.setParent(x)}),delete this._children[p]),Object.keys(this._in[p]).forEach(b),delete this._in[p],delete this._preds[p],Object.keys(this._out[p]).forEach(b),delete this._out[p],delete this._sucs[p],--this._nodeCount}return this}setParent(p,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=e;else{h+="";for(var b=h;b!==void 0;b=this.parent(b))if(b===p)throw new Error("Setting "+h+" as parent of "+p+" would create a cycle");this.setNode(h)}return this.setNode(p),this._removeFromParentsChildList(p),this._parent[p]=h,this._children[h][p]=!0,this}_removeFromParentsChildList(p){delete this._children[this._parent[p]][p]}parent(p){if(this._isCompound){var h=this._parent[p];if(h!==e)return h}}children(p=e){if(this._isCompound){var h=this._children[p];if(h)return Object.keys(h)}else{if(p===e)return this.nodes();if(this.hasNode(p))return[]}}predecessors(p){var h=this._preds[p];if(h)return Object.keys(h)}successors(p){var h=this._sucs[p];if(h)return Object.keys(h)}neighbors(p){var h=this.predecessors(p);if(h){const x=new Set(h);for(var b of this.successors(p))x.add(b);return Array.from(x.values())}}isLeaf(p){var h;return this.isDirected()?h=this.successors(p):h=this.neighbors(p),h.length===0}filterNodes(p){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var b=this;Object.entries(this._nodes).forEach(function([E,I]){p(E)&&h.setNode(E,I)}),Object.values(this._edgeObjs).forEach(function(E){h.hasNode(E.v)&&h.hasNode(E.w)&&h.setEdge(E,b.edge(E))});var x={};function _(E){var I=b.parent(E);return I===void 0||h.hasNode(I)?(x[E]=I,I):I in x?x[I]:_(I)}return this._isCompound&&h.nodes().forEach(E=>h.setParent(E,_(E))),h}setDefaultEdgeLabel(p){return this._defaultEdgeLabelFn=p,typeof p!="function"&&(this._defaultEdgeLabelFn=()=>p),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(p,h){var b=this,x=arguments;return p.reduce(function(_,E){return x.length>1?b.setEdge(_,E,h):b.setEdge(_,E),E}),this}setEdge(){var p,h,b,x,_=!1,E=arguments[0];typeof E=="object"&&E!==null&&"v"in E?(p=E.v,h=E.w,b=E.name,arguments.length===2&&(x=arguments[1],_=!0)):(p=E,h=arguments[1],b=arguments[3],arguments.length>2&&(x=arguments[2],_=!0)),p=""+p,h=""+h,b!==void 0&&(b=""+b);var I=o(this._isDirected,p,h,b);if(Object.hasOwn(this._edgeLabels,I))return _&&(this._edgeLabels[I]=x),this;if(b!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(p),this.setNode(h),this._edgeLabels[I]=_?x:this._defaultEdgeLabelFn(p,h,b);var T=l(this._isDirected,p,h,b);return p=T.v,h=T.w,Object.freeze(T),this._edgeObjs[I]=T,i(this._preds[h],p),i(this._sucs[p],h),this._in[h][I]=T,this._out[p][I]=T,this._edgeCount++,this}edge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return this._edgeLabels[x]}edgeAsObj(){const p=this.edge(...arguments);return typeof p!="object"?{label:p}:p}hasEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b);return Object.hasOwn(this._edgeLabels,x)}removeEdge(p,h,b){var x=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,p,h,b),_=this._edgeObjs[x];return _&&(p=_.v,h=_.w,delete this._edgeLabels[x],delete this._edgeObjs[x],s(this._preds[h],p),s(this._sucs[p],h),delete this._in[h][x],delete this._out[p][x],this._edgeCount--),this}inEdges(p,h){var b=this._in[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.v===h):x}}outEdges(p,h){var b=this._out[p];if(b){var x=Object.values(b);return h?x.filter(_=>_.w===h):x}}nodeEdges(p,h){var b=this.inEdges(p,h);if(b)return b.concat(this.outEdges(p,h))}}function i(f,p){f[p]?f[p]++:f[p]=1}function s(f,p){--f[p]||delete f[p]}function o(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}return x+n+_+n+(b===void 0?t:b)}function l(f,p,h,b){var x=""+p,_=""+h;if(!f&&x>_){var E=x;x=_,_=E}var I={v:x,w:_};return b&&(I.name=b),I}function u(f,p){return o(f,p.v,p.w,p.name)}return $0=r,$0}var B0,cq;function Ore(){return cq||(cq=1,B0="2.2.4"),B0}var z0,uq;function Rre(){return uq||(uq=1,z0={Graph:$N(),version:Ore()}),z0}var W0,dq;function qre(){if(dq)return W0;dq=1;var t=$N();W0={write:e,read:i};function e(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var l=s.node(o),u=s.parent(o),f={v:o};return l!==void 0&&(f.value=l),u!==void 0&&(f.parent=u),f})}function r(s){return s.edges().map(function(o){var l=s.edge(o),u={v:o.v,w:o.w};return o.name!==void 0&&(u.name=o.name),l!==void 0&&(u.value=l),u})}function i(s){var o=new t(s.options).setGraph(s.value);return s.nodes.forEach(function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),s.edges.forEach(function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return W0}var U0,fq;function Are(){if(fq)return U0;fq=1,U0=t;function t(e){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),e.successors(o).forEach(s),e.predecessors(o).forEach(s))}return e.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return U0}var V0,pq;function WL(){if(pq)return V0;pq=1;class t{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r}}return V0=t,V0}var H0,hq;function UL(){if(hq)return H0;hq=1;var t=WL();H0=n;var e=()=>1;function n(i,s,o,l){return r(i,String(s),o||e,l||function(u){return i.outEdges(u)})}function r(i,s,o,l){var u={},f=new t,p,h,b=function(x){var _=x.v!==p?x.v:x.w,E=u[_],I=o(x),T=h.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+I);T<E.distance&&(E.distance=T,E.predecessor=p,f.decrease(_,T))};for(i.nodes().forEach(function(x){var _=x===s?0:Number.POSITIVE_INFINITY;u[x]={distance:_},f.add(x,_)});f.size()>0&&(p=f.removeMin(),h=u[p],h.distance!==Number.POSITIVE_INFINITY);)l(p).forEach(b);return u}return H0}var K0,mq;function Pre(){if(mq)return K0;mq=1;var t=UL();K0=e;function e(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=t(n,o,r,i),s},{})}return K0}var Q0,gq;function VL(){if(gq)return Q0;gq=1,Q0=t;function t(e){var n=0,r=[],i={},s=[];function o(l){var u=i[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),e.successors(l).forEach(function(h){Object.hasOwn(i,h)?i[h].onStack&&(u.lowlink=Math.min(u.lowlink,i[h].index)):(o(h),u.lowlink=Math.min(u.lowlink,i[h].lowlink))}),u.lowlink===u.index){var f=[],p;do p=r.pop(),i[p].onStack=!1,f.push(p);while(l!==p);s.push(f)}}return e.nodes().forEach(function(l){Object.hasOwn(i,l)||o(l)}),s}return Q0}var G0,yq;function Fre(){if(yq)return G0;yq=1;var t=VL();G0=e;function e(n){return t(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return G0}var J0,vq;function Dre(){if(vq)return J0;vq=1,J0=e;var t=()=>1;function e(r,i,s){return n(r,i||t,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},l=r.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(f){u!==f&&(o[u][f]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(f){var p=f.v===u?f.w:f.v,h=i(f);o[u][p]={distance:h,predecessor:u}})}),l.forEach(function(u){var f=o[u];l.forEach(function(p){var h=o[p];l.forEach(function(b){var x=h[u],_=f[b],E=h[b],I=x.distance+_.distance;I<E.distance&&(E.distance=I,E.predecessor=_.predecessor)})})}),o}return J0}var Z0,bq;function HL(){if(bq)return Z0;bq=1;function t(n){var r={},i={},s=[];function o(l){if(Object.hasOwn(i,l))throw new e;Object.hasOwn(r,l)||(i[l]=!0,r[l]=!0,n.predecessors(l).forEach(o),delete i[l],s.push(l))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new e;return s}class e extends Error{constructor(){super(...arguments)}}return Z0=t,t.CycleException=e,Z0}var Y0,xq;function Lre(){if(xq)return Y0;xq=1;var t=HL();Y0=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return Y0}var X0,wq;function KL(){if(wq)return X0;wq=1,X0=t;function t(i,s,o){Array.isArray(s)||(s=[s]);var l=i.isDirected()?h=>i.successors(h):h=>i.neighbors(h),u=o==="post"?e:n,f=[],p={};return s.forEach(h=>{if(!i.hasNode(h))throw new Error("Graph does not have node: "+h);u(h,l,p,f)}),f}function e(i,s,o,l){for(var u=[[i,!1]];u.length>0;){var f=u.pop();f[1]?l.push(f[0]):Object.hasOwn(o,f[0])||(o[f[0]]=!0,u.push([f[0],!0]),r(s(f[0]),p=>u.push([p,!1])))}}function n(i,s,o,l){for(var u=[i];u.length>0;){var f=u.pop();Object.hasOwn(o,f)||(o[f]=!0,l.push(f),r(s(f),p=>u.push(p)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return X0}var eS,_q;function Mre(){if(_q)return eS;_q=1;var t=KL();eS=e;function e(n,r){return t(n,r,"post")}return eS}var tS,Sq;function $re(){if(Sq)return tS;Sq=1;var t=KL();tS=e;function e(n,r){return t(n,r,"pre")}return tS}var nS,Eq;function Bre(){if(Eq)return nS;Eq=1;var t=$N(),e=WL();nS=n;function n(r,i){var s=new t,o={},l=new e,u;function f(h){var b=h.v===u?h.w:h.v,x=l.priority(b);if(x!==void 0){var _=i(h);_<x&&(o[b]=u,l.decrease(b,_))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(r.nodes()[0],0);for(var p=!1;l.size()>0;){if(u=l.removeMin(),Object.hasOwn(o,u))s.setEdge(u,o[u]);else{if(p)throw new Error("Input graph is not connected: "+r);p=!0}r.nodeEdges(u).forEach(f)}return s}return nS}var rS,Nq;function zre(){return Nq||(Nq=1,rS={components:Are(),dijkstra:UL(),dijkstraAll:Pre(),findCycles:Fre(),floydWarshall:Dre(),isAcyclic:Lre(),postorder:Mre(),preorder:$re(),prim:Bre(),tarjan:VL(),topsort:HL()}),rS}var iS,kq;function Do(){if(kq)return iS;kq=1;var t=Rre();return iS={Graph:t.Graph,json:qre(),alg:zre(),version:t.version},iS}var sS,Iq;function Wre(){if(Iq)return sS;Iq=1;class t{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return e(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&e(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return sS=t,sS}var oS,Cq;function Ure(){if(Cq)return oS;Cq=1;let t=Do().Graph,e=Wre();oS=r;let n=()=>1;function r(f,p){if(f.nodeCount()<=1)return[];let h=o(f,p||n);return i(h.graph,h.buckets,h.zeroIdx).flatMap(x=>f.outEdges(x.v,x.w))}function i(f,p,h){let b=[],x=p[p.length-1],_=p[0],E;for(;f.nodeCount();){for(;E=_.dequeue();)s(f,p,h,E);for(;E=x.dequeue();)s(f,p,h,E);if(f.nodeCount()){for(let I=p.length-2;I>0;--I)if(E=p[I].dequeue(),E){b=b.concat(s(f,p,h,E,!0));break}}}return b}function s(f,p,h,b,x){let _=x?[]:void 0;return f.inEdges(b.v).forEach(E=>{let I=f.edge(E),T=f.node(E.v);x&&_.push({v:E.v,w:E.w}),T.out-=I,l(p,h,T)}),f.outEdges(b.v).forEach(E=>{let I=f.edge(E),T=E.w,j=f.node(T);j.in-=I,l(p,h,j)}),f.removeNode(b.v),_}function o(f,p){let h=new t,b=0,x=0;f.nodes().forEach(I=>{h.setNode(I,{v:I,in:0,out:0})}),f.edges().forEach(I=>{let T=h.edge(I.v,I.w)||0,j=p(I),O=T+j;h.setEdge(I.v,I.w,O),x=Math.max(x,h.node(I.v).out+=j),b=Math.max(b,h.node(I.w).in+=j)});let _=u(x+b+3).map(()=>new e),E=b+1;return h.nodes().forEach(I=>{l(_,E,h.node(I))}),{graph:h,buckets:_,zeroIdx:E}}function l(f,p,h){h.out?h.in?f[h.out-h.in+p].enqueue(h):f[f.length-1].enqueue(h):f[0].enqueue(h)}function u(f){const p=[];for(let h=0;h<f;h++)p.push(h);return p}return oS}var aS,Tq;function Xr(){if(Tq)return aS;Tq=1;let t=Do().Graph;aS={addBorderNode:p,addDummyNode:e,applyWithChunking:x,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:o,mapValues:M,maxRank:_,normalizeRanks:u,notime:T,partition:E,pick:D,predecessorWeights:s,range:A,removeEmptyRanks:f,simplify:n,successorWeights:i,time:I,uniqueId:O,zipObject:W};function e(P,R,$,F){let U;do U=O(F);while(P.hasNode(U));return $.dummy=R,P.setNode(U,$),U}function n(P){let R=new t().setGraph(P.graph());return P.nodes().forEach($=>R.setNode($,P.node($))),P.edges().forEach($=>{let F=R.edge($.v,$.w)||{weight:0,minlen:1},U=P.edge($);R.setEdge($.v,$.w,{weight:F.weight+U.weight,minlen:Math.max(F.minlen,U.minlen)})}),R}function r(P){let R=new t({multigraph:P.isMultigraph()}).setGraph(P.graph());return P.nodes().forEach($=>{P.children($).length||R.setNode($,P.node($))}),P.edges().forEach($=>{R.setEdge($,P.edge($))}),R}function i(P){let R=P.nodes().map($=>{let F={};return P.outEdges($).forEach(U=>{F[U.w]=(F[U.w]||0)+P.edge(U).weight}),F});return W(P.nodes(),R)}function s(P){let R=P.nodes().map($=>{let F={};return P.inEdges($).forEach(U=>{F[U.v]=(F[U.v]||0)+P.edge(U).weight}),F});return W(P.nodes(),R)}function o(P,R){let $=P.x,F=P.y,U=R.x-$,V=R.y-F,z=P.width/2,te=P.height/2;if(!U&&!V)throw new Error("Not possible to find intersection inside of the rectangle");let Y,le;return Math.abs(V)*z>Math.abs(U)*te?(V<0&&(te=-te),Y=te*U/V,le=te):(U<0&&(z=-z),Y=z,le=z*V/U),{x:$+Y,y:F+le}}function l(P){let R=A(_(P)+1).map(()=>[]);return P.nodes().forEach($=>{let F=P.node($),U=F.rank;U!==void 0&&(R[U][F.order]=$)}),R}function u(P){let R=P.nodes().map(F=>{let U=P.node(F).rank;return U===void 0?Number.MAX_VALUE:U}),$=x(Math.min,R);P.nodes().forEach(F=>{let U=P.node(F);Object.hasOwn(U,"rank")&&(U.rank-=$)})}function f(P){let R=P.nodes().map(z=>P.node(z).rank),$=x(Math.min,R),F=[];P.nodes().forEach(z=>{let te=P.node(z).rank-$;F[te]||(F[te]=[]),F[te].push(z)});let U=0,V=P.graph().nodeRankFactor;Array.from(F).forEach((z,te)=>{z===void 0&&te%V!==0?--U:z!==void 0&&U&&z.forEach(Y=>P.node(Y).rank+=U)})}function p(P,R,$,F){let U={width:0,height:0};return arguments.length>=4&&(U.rank=$,U.order=F),e(P,"border",U,R)}function h(P,R=b){const $=[];for(let F=0;F<P.length;F+=R){const U=P.slice(F,F+R);$.push(U)}return $}const b=65535;function x(P,R){if(R.length>b){const $=h(R);return P.apply(null,$.map(F=>P.apply(null,F)))}else return P.apply(null,R)}function _(P){const $=P.nodes().map(F=>{let U=P.node(F).rank;return U===void 0?Number.MIN_VALUE:U});return x(Math.max,$)}function E(P,R){let $={lhs:[],rhs:[]};return P.forEach(F=>{R(F)?$.lhs.push(F):$.rhs.push(F)}),$}function I(P,R){let $=Date.now();try{return R()}finally{console.log(P+" time: "+(Date.now()-$)+"ms")}}function T(P,R){return R()}let j=0;function O(P){var R=++j;return toString(P)+R}function A(P,R,$=1){R==null&&(R=P,P=0);let F=V=>V<R;$<0&&(F=V=>R<V);const U=[];for(let V=P;F(V);V+=$)U.push(V);return U}function D(P,R){const $={};for(const F of R)P[F]!==void 0&&($[F]=P[F]);return $}function M(P,R){let $=R;return typeof R=="string"&&($=F=>F[R]),Object.entries(P).reduce((F,[U,V])=>(F[U]=$(V,U),F),{})}function W(P,R){return P.reduce(($,F,U)=>($[F]=R[U],$),{})}return aS}var lS,jq;function Vre(){if(jq)return lS;jq=1;let t=Ure(),e=Xr().uniqueId;lS={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?t(s,l(s)):r(s)).forEach(u=>{let f=s.edge(u);s.removeEdge(u),f.forwardName=u.name,f.reversed=!0,s.setEdge(u.w,u.v,f,e("rev"))});function l(u){return f=>u.edge(f).weight}}function r(s){let o=[],l={},u={};function f(p){Object.hasOwn(u,p)||(u[p]=!0,l[p]=!0,s.outEdges(p).forEach(h=>{Object.hasOwn(l,h.w)?o.push(h):f(h.w)}),delete l[p])}return s.nodes().forEach(f),o}function i(s){s.edges().forEach(o=>{let l=s.edge(o);if(l.reversed){s.removeEdge(o);let u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return lS}var cS,Oq;function Hre(){if(Oq)return cS;Oq=1;let t=Xr();cS={run:e,undo:r};function e(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,l=i.node(o).rank,u=s.w,f=i.node(u).rank,p=s.name,h=i.edge(s),b=h.labelRank;if(f===l+1)return;i.removeEdge(s);let x,_,E;for(E=0,++l;l<f;++E,++l)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},x=t.addDummyNode(i,"edge",_,"_d"),l===b&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(o,x,{weight:h.weight},p),E===0&&i.graph().dummyChains.push(x),o=x;i.setEdge(o,u,{weight:h.weight},p)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),l=o.edgeLabel,u;for(i.setEdge(o.edgeObj,l);o.dummy;)u=i.successors(s)[0],i.removeNode(s),l.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(l.x=o.x,l.y=o.y,l.width=o.width,l.height=o.height),s=u,o=i.node(s)})}return cS}var uS,Rq;function rb(){if(Rq)return uS;Rq=1;const{applyWithChunking:t}=Xr();uS={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(Object.hasOwn(i,o))return l.rank;i[o]=!0;let u=r.outEdges(o).map(p=>p==null?Number.POSITIVE_INFINITY:s(p.w)-r.edge(p).minlen);var f=t(Math.min,u);return f===Number.POSITIVE_INFINITY&&(f=0),l.rank=f}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return uS}var dS,qq;function QL(){if(qq)return dS;qq=1;var t=Do().Graph,e=rb().slack;dS=n;function n(o){var l=new t({directed:!1}),u=o.nodes()[0],f=o.nodeCount();l.setNode(u,{});for(var p,h;r(l,o)<f;)p=i(l,o),h=l.hasNode(p.v)?e(o,p):-e(o,p),s(l,o,h);return l}function r(o,l){function u(f){l.nodeEdges(f).forEach(p=>{var h=p.v,b=f===h?p.w:h;!o.hasNode(b)&&!e(l,p)&&(o.setNode(b,{}),o.setEdge(f,b,{}),u(b))})}return o.nodes().forEach(u),o.nodeCount()}function i(o,l){return l.edges().reduce((f,p)=>{let h=Number.POSITIVE_INFINITY;return o.hasNode(p.v)!==o.hasNode(p.w)&&(h=e(l,p)),h<f[0]?[h,p]:f},[Number.POSITIVE_INFINITY,null])[1]}function s(o,l,u){o.nodes().forEach(f=>l.node(f).rank+=u)}return dS}var fS,Aq;function Kre(){if(Aq)return fS;Aq=1;var t=QL(),e=rb().slack,n=rb().longestPath,r=Do().alg.preorder,i=Do().alg.postorder,s=Xr().simplify;fS=o,o.initLowLimValues=p,o.initCutValues=l,o.calcCutValue=f,o.leaveEdge=b,o.enterEdge=x,o.exchangeEdges=_;function o(j){j=s(j),n(j);var O=t(j);p(O),l(O,j);for(var A,D;A=b(O);)D=x(O,j,A),_(O,j,A,D)}function l(j,O){var A=i(j,j.nodes());A=A.slice(0,A.length-1),A.forEach(D=>u(j,O,D))}function u(j,O,A){var D=j.node(A),M=D.parent;j.edge(A,M).cutvalue=f(j,O,A)}function f(j,O,A){var D=j.node(A),M=D.parent,W=!0,P=O.edge(A,M),R=0;return P||(W=!1,P=O.edge(M,A)),R=P.weight,O.nodeEdges(A).forEach($=>{var F=$.v===A,U=F?$.w:$.v;if(U!==M){var V=F===W,z=O.edge($).weight;if(R+=V?z:-z,I(j,A,U)){var te=j.edge(A,U).cutvalue;R+=V?-te:te}}}),R}function p(j,O){arguments.length<2&&(O=j.nodes()[0]),h(j,{},1,O)}function h(j,O,A,D,M){var W=A,P=j.node(D);return O[D]=!0,j.neighbors(D).forEach(R=>{Object.hasOwn(O,R)||(A=h(j,O,A,R,D))}),P.low=W,P.lim=A++,M?P.parent=M:delete P.parent,A}function b(j){return j.edges().find(O=>j.edge(O).cutvalue<0)}function x(j,O,A){var D=A.v,M=A.w;O.hasEdge(D,M)||(D=A.w,M=A.v);var W=j.node(D),P=j.node(M),R=W,$=!1;W.lim>P.lim&&(R=P,$=!0);var F=O.edges().filter(U=>$===T(j,j.node(U.v),R)&&$!==T(j,j.node(U.w),R));return F.reduce((U,V)=>e(O,V)<e(O,U)?V:U)}function _(j,O,A,D){var M=A.v,W=A.w;j.removeEdge(M,W),j.setEdge(D.v,D.w,{}),p(j),l(j,O),E(j,O)}function E(j,O){var A=j.nodes().find(M=>!O.node(M).parent),D=r(j,A);D=D.slice(1),D.forEach(M=>{var W=j.node(M).parent,P=O.edge(M,W),R=!1;P||(P=O.edge(W,M),R=!0),O.node(M).rank=O.node(W).rank+(R?P.minlen:-P.minlen)})}function I(j,O,A){return j.hasEdge(O,A)}function T(j,O,A){return A.low<=O.lim&&O.lim<=A.lim}return fS}var pS,Pq;function Qre(){if(Pq)return pS;Pq=1;var t=rb(),e=t.longestPath,n=QL(),r=Kre();pS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return pS}var hS,Fq;function Gre(){if(Fq)return hS;Fq=1,hS=t;function t(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),l=o.edgeObj,u=e(r,i,l.v,l.w),f=u.path,p=u.lca,h=0,b=f[h],x=!0;for(;s!==l.w;){if(o=r.node(s),x){for(;(b=f[h])!==p&&r.node(b).maxRank<o.rank;)h++;b===p&&(x=!1)}if(!x){for(;h<f.length-1&&r.node(b=f[h+1]).minRank<=o.rank;)h++;b=f[h]}r.setParent(s,b),s=r.successors(s)[0]}})}function e(r,i,s,o){let l=[],u=[],f=Math.min(i[s].low,i[o].low),p=Math.max(i[s].lim,i[o].lim),h,b;h=s;do h=r.parent(h),l.push(h);while(h&&(i[h].low>f||p>i[h].lim));for(b=h,h=o;(h=r.parent(h))!==b;)u.push(h);return{path:l.concat(u.reverse()),lca:b}}function n(r){let i={},s=0;function o(l){let u=s;r.children(l).forEach(o),i[l]={low:u,lim:s++}}return r.children().forEach(o),i}return hS}var mS,Dq;function Jre(){if(Dq)return mS;Dq=1;let t=Xr();mS={run:e,cleanup:s};function e(o){let l=t.addDummyNode(o,"root",{},"_root"),u=r(o),f=Object.values(u),p=t.applyWithChunking(Math.max,f)-1,h=2*p+1;o.graph().nestingRoot=l,o.edges().forEach(x=>o.edge(x).minlen*=h);let b=i(o)+1;o.children().forEach(x=>n(o,l,h,b,p,u,x)),o.graph().nodeRankFactor=h}function n(o,l,u,f,p,h,b){let x=o.children(b);if(!x.length){b!==l&&o.setEdge(l,b,{weight:0,minlen:u});return}let _=t.addBorderNode(o,"_bt"),E=t.addBorderNode(o,"_bb"),I=o.node(b);o.setParent(_,b),I.borderTop=_,o.setParent(E,b),I.borderBottom=E,x.forEach(T=>{n(o,l,u,f,p,h,T);let j=o.node(T),O=j.borderTop?j.borderTop:T,A=j.borderBottom?j.borderBottom:T,D=j.borderTop?f:2*f,M=O!==A?1:p-h[b]+1;o.setEdge(_,O,{weight:D,minlen:M,nestingEdge:!0}),o.setEdge(A,E,{weight:D,minlen:M,nestingEdge:!0})}),o.parent(b)||o.setEdge(l,_,{weight:0,minlen:p+h[b]})}function r(o){var l={};function u(f,p){var h=o.children(f);h&&h.length&&h.forEach(b=>u(b,p+1)),l[f]=p}return o.children().forEach(f=>u(f,1)),l}function i(o){return o.edges().reduce((l,u)=>l+o.edge(u).weight,0)}function s(o){var l=o.graph();o.removeNode(l.nestingRoot),delete l.nestingRoot,o.edges().forEach(u=>{var f=o.edge(u);f.nestingEdge&&o.removeEdge(u)})}return mS}var gS,Lq;function Zre(){if(Lq)return gS;Lq=1;let t=Xr();gS=e;function e(r){function i(s){let o=r.children(s),l=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let u=l.minRank,f=l.maxRank+1;u<f;++u)n(r,"borderLeft","_bl",s,l,u),n(r,"borderRight","_br",s,l,u)}}r.children().forEach(i)}function n(r,i,s,o,l,u){let f={width:0,height:0,rank:u,borderType:i},p=l[i][u-1],h=t.addDummyNode(r,"border",f,s);l[i][u]=h,r.setParent(h,o),p&&r.setEdge(p,h,{weight:1})}return gS}var yS,Mq;function Yre(){if(Mq)return yS;Mq=1,yS={adjust:t,undo:e};function t(u){let f=u.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(u)}function e(u){let f=u.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&i(u),(f==="lr"||f==="rl")&&(o(u),n(u))}function n(u){u.nodes().forEach(f=>r(u.node(f))),u.edges().forEach(f=>r(u.edge(f)))}function r(u){let f=u.width;u.width=u.height,u.height=f}function i(u){u.nodes().forEach(f=>s(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(s),Object.hasOwn(p,"y")&&s(p)})}function s(u){u.y=-u.y}function o(u){u.nodes().forEach(f=>l(u.node(f))),u.edges().forEach(f=>{let p=u.edge(f);p.points.forEach(l),Object.hasOwn(p,"x")&&l(p)})}function l(u){let f=u.x;u.x=u.y,u.y=f}return yS}var vS,$q;function Xre(){if($q)return vS;$q=1;let t=Xr();vS=e;function e(n){let r={},i=n.nodes().filter(p=>!n.children(p).length),s=i.map(p=>n.node(p).rank),o=t.applyWithChunking(Math.max,s),l=t.range(o+1).map(()=>[]);function u(p){if(r[p])return;r[p]=!0;let h=n.node(p);l[h.rank].push(p),n.successors(p).forEach(u)}return i.sort((p,h)=>n.node(p).rank-n.node(h).rank).forEach(u),l}return vS}var bS,Bq;function eie(){if(Bq)return bS;Bq=1;let t=Xr().zipObject;bS=e;function e(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=t(s,s.map((b,x)=>x)),l=i.flatMap(b=>r.outEdges(b).map(x=>({pos:o[x.w],weight:r.edge(x).weight})).sort((x,_)=>x.pos-_.pos)),u=1;for(;u<s.length;)u<<=1;let f=2*u-1;u-=1;let p=new Array(f).fill(0),h=0;return l.forEach(b=>{let x=b.pos+u;p[x]+=b.weight;let _=0;for(;x>0;)x%2&&(_+=p[x+1]),x=x-1>>1,p[x]+=b.weight;h+=b.weight*_}),h}return bS}var xS,zq;function tie(){if(zq)return xS;zq=1,xS=t;function t(e,n=[]){return n.map(r=>{let i=e.inEdges(r);if(i.length){let s=i.reduce((o,l)=>{let u=e.edge(l),f=e.node(l.v);return{sum:o.sum+u.weight*f.order,weight:o.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return xS}var wS,Wq;function nie(){if(Wq)return wS;Wq=1;let t=Xr();wS=e;function e(i,s){let o={};i.forEach((u,f)=>{let p=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:f};u.barycenter!==void 0&&(p.barycenter=u.barycenter,p.weight=u.weight)}),s.edges().forEach(u=>{let f=o[u.v],p=o[u.w];f!==void 0&&p!==void 0&&(p.indegree++,f.out.push(o[u.w]))});let l=Object.values(o).filter(u=>!u.indegree);return n(l)}function n(i){let s=[];function o(u){return f=>{f.merged||(f.barycenter===void 0||u.barycenter===void 0||f.barycenter>=u.barycenter)&&r(u,f)}}function l(u){return f=>{f.in.push(u),--f.indegree===0&&i.push(f)}}for(;i.length;){let u=i.pop();s.push(u),u.in.reverse().forEach(o(u)),u.out.forEach(l(u))}return s.filter(u=>!u.merged).map(u=>t.pick(u,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return wS}var _S,Uq;function rie(){if(Uq)return _S;Uq=1;let t=Xr();_S=e;function e(i,s){let o=t.partition(i,_=>Object.hasOwn(_,"barycenter")),l=o.lhs,u=o.rhs.sort((_,E)=>E.i-_.i),f=[],p=0,h=0,b=0;l.sort(r(!!s)),b=n(f,u,b),l.forEach(_=>{b+=_.vs.length,f.push(_.vs),p+=_.barycenter*_.weight,h+=_.weight,b=n(f,u,b)});let x={vs:f.flat(!0)};return h&&(x.barycenter=p/h,x.weight=h),x}function n(i,s,o){let l;for(;s.length&&(l=s[s.length-1]).i<=o;)s.pop(),i.push(l.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return _S}var SS,Vq;function iie(){if(Vq)return SS;Vq=1;let t=tie(),e=nie(),n=rie();SS=r;function r(o,l,u,f){let p=o.children(l),h=o.node(l),b=h?h.borderLeft:void 0,x=h?h.borderRight:void 0,_={};b&&(p=p.filter(j=>j!==b&&j!==x));let E=t(o,p);E.forEach(j=>{if(o.children(j.v).length){let O=r(o,j.v,u,f);_[j.v]=O,Object.hasOwn(O,"barycenter")&&s(j,O)}});let I=e(E,u);i(I,_);let T=n(I,f);if(b&&(T.vs=[b,T.vs,x].flat(!0),o.predecessors(b).length)){let j=o.node(o.predecessors(b)[0]),O=o.node(o.predecessors(x)[0]);Object.hasOwn(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+j.order+O.order)/(T.weight+2),T.weight+=2}return T}function i(o,l){o.forEach(u=>{u.vs=u.vs.flatMap(f=>l[f]?l[f].vs:f)})}function s(o,l){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+l.barycenter*l.weight)/(o.weight+l.weight),o.weight+=l.weight):(o.barycenter=l.barycenter,o.weight=l.weight)}return SS}var ES,Hq;function sie(){if(Hq)return ES;Hq=1;let t=Do().Graph,e=Xr();ES=n;function n(i,s,o){let l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(f=>i.node(f));return i.nodes().forEach(f=>{let p=i.node(f),h=i.parent(f);(p.rank===s||p.minRank<=s&&s<=p.maxRank)&&(u.setNode(f),u.setParent(f,h||l),i[o](f).forEach(b=>{let x=b.v===f?b.w:b.v,_=u.edge(x,f),E=_!==void 0?_.weight:0;u.setEdge(x,f,{weight:i.edge(b).weight+E})}),Object.hasOwn(p,"minRank")&&u.setNode(f,{borderLeft:p.borderLeft[s],borderRight:p.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return ES}var NS,Kq;function oie(){if(Kq)return NS;Kq=1,NS=t;function t(e,n,r){let i={},s;r.forEach(o=>{let l=e.parent(o),u,f;for(;l;){if(u=e.parent(l),u?(f=i[u],i[u]=l):(f=s,s=l),f&&f!==l){n.setEdge(f,l);return}l=u}})}return NS}var kS,Qq;function aie(){if(Qq)return kS;Qq=1;let t=Xre(),e=eie(),n=iie(),r=sie(),i=oie(),s=Do().Graph,o=Xr();kS=l;function l(h,b){if(b&&typeof b.customOrder=="function"){b.customOrder(h,l);return}let x=o.maxRank(h),_=u(h,o.range(1,x+1),"inEdges"),E=u(h,o.range(x-1,-1,-1),"outEdges"),I=t(h);if(p(h,I),b&&b.disableOptimalOrderHeuristic)return;let T=Number.POSITIVE_INFINITY,j;for(let O=0,A=0;A<4;++O,++A){f(O%2?_:E,O%4>=2),I=o.buildLayerMatrix(h);let D=e(h,I);D<T&&(A=0,j=Object.assign({},I),T=D)}p(h,j)}function u(h,b,x){return b.map(function(_){return r(h,_,x)})}function f(h,b){let x=new s;h.forEach(function(_){let E=_.graph().root,I=n(_,E,x,b);I.vs.forEach((T,j)=>_.node(T).order=j),i(_,x,I.vs)})}function p(h,b){Object.values(b).forEach(x=>x.forEach((_,E)=>h.node(_).order=E))}return kS}var IS,Gq;function lie(){if(Gq)return IS;Gq=1;let t=Do().Graph,e=Xr();IS={positionX:x,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:p,balance:b};function n(I,T){let j={};function O(A,D){let M=0,W=0,P=A.length,R=D[D.length-1];return D.forEach(($,F)=>{let U=i(I,$),V=U?I.node(U).order:P;(U||$===R)&&(D.slice(W,F+1).forEach(z=>{I.predecessors(z).forEach(te=>{let Y=I.node(te),le=Y.order;(le<M||V<le)&&!(Y.dummy&&I.node(z).dummy)&&s(j,te,z)})}),W=F+1,M=V)}),D}return T.length&&T.reduce(O),j}function r(I,T){let j={};function O(D,M,W,P,R){let $;e.range(M,W).forEach(F=>{$=D[F],I.node($).dummy&&I.predecessors($).forEach(U=>{let V=I.node(U);V.dummy&&(V.order<P||V.order>R)&&s(j,U,$)})})}function A(D,M){let W=-1,P,R=0;return M.forEach(($,F)=>{if(I.node($).dummy==="border"){let U=I.predecessors($);U.length&&(P=I.node(U[0]).order,O(M,R,F,W,P),R=F,W=P)}O(M,R,M.length,P,D.length)}),M}return T.length&&T.reduce(A),j}function i(I,T){if(I.node(T).dummy)return I.predecessors(T).find(j=>I.node(j).dummy)}function s(I,T,j){if(T>j){let A=T;T=j,j=A}let O=I[T];O||(I[T]=O={}),O[j]=!0}function o(I,T,j){if(T>j){let O=T;T=j,j=O}return!!I[T]&&Object.hasOwn(I[T],j)}function l(I,T,j,O){let A={},D={},M={};return T.forEach(W=>{W.forEach((P,R)=>{A[P]=P,D[P]=P,M[P]=R})}),T.forEach(W=>{let P=-1;W.forEach(R=>{let $=O(R);if($.length){$=$.sort((U,V)=>M[U]-M[V]);let F=($.length-1)/2;for(let U=Math.floor(F),V=Math.ceil(F);U<=V;++U){let z=$[U];D[R]===R&&P<M[z]&&!o(j,R,z)&&(D[z]=R,D[R]=A[R]=A[z],P=M[z])}}})}),{root:A,align:D}}function u(I,T,j,O,A){let D={},M=f(I,T,j,A),W=A?"borderLeft":"borderRight";function P(F,U){let V=M.nodes(),z=V.pop(),te={};for(;z;)te[z]?F(z):(te[z]=!0,V.push(z),V=V.concat(U(z))),z=V.pop()}function R(F){D[F]=M.inEdges(F).reduce((U,V)=>Math.max(U,D[V.v]+M.edge(V)),0)}function $(F){let U=M.outEdges(F).reduce((z,te)=>Math.min(z,D[te.w]-M.edge(te)),Number.POSITIVE_INFINITY),V=I.node(F);U!==Number.POSITIVE_INFINITY&&V.borderType!==W&&(D[F]=Math.max(D[F],U))}return P(R,M.predecessors.bind(M)),P($,M.successors.bind(M)),Object.keys(O).forEach(F=>D[F]=D[j[F]]),D}function f(I,T,j,O){let A=new t,D=I.graph(),M=_(D.nodesep,D.edgesep,O);return T.forEach(W=>{let P;W.forEach(R=>{let $=j[R];if(A.setNode($),P){var F=j[P],U=A.edge(F,$);A.setEdge(F,$,Math.max(M(I,R,P),U||0))}P=R})}),A}function p(I,T){return Object.values(T).reduce((j,O)=>{let A=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;Object.entries(O).forEach(([W,P])=>{let R=E(I,W)/2;A=Math.max(P+R,A),D=Math.min(P-R,D)});const M=A-D;return M<j[0]&&(j=[M,O]),j},[Number.POSITIVE_INFINITY,null])[1]}function h(I,T){let j=Object.values(T),O=e.applyWithChunking(Math.min,j),A=e.applyWithChunking(Math.max,j);["u","d"].forEach(D=>{["l","r"].forEach(M=>{let W=D+M,P=I[W];if(P===T)return;let R=Object.values(P),$=O-e.applyWithChunking(Math.min,R);M!=="l"&&($=A-e.applyWithChunking(Math.max,R)),$&&(I[W]=e.mapValues(P,F=>F+$))})})}function b(I,T){return e.mapValues(I.ul,(j,O)=>{if(T)return I[T.toLowerCase()][O];{let A=Object.values(I).map(D=>D[O]).sort((D,M)=>D-M);return(A[1]+A[2])/2}})}function x(I){let T=e.buildLayerMatrix(I),j=Object.assign(n(I,T),r(I,T)),O={},A;["u","d"].forEach(M=>{A=M==="u"?T:Object.values(T).reverse(),["l","r"].forEach(W=>{W==="r"&&(A=A.map(F=>Object.values(F).reverse()));let P=(M==="u"?I.predecessors:I.successors).bind(I),R=l(I,A,j,P),$=u(I,A,R.root,R.align,W==="r");W==="r"&&($=e.mapValues($,F=>-F)),O[M+W]=$})});let D=p(I,O);return h(O,D),b(O,I.graph().align)}function _(I,T,j){return(O,A,D)=>{let M=O.node(A),W=O.node(D),P=0,R;if(P+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":R=-M.width/2;break;case"r":R=M.width/2;break}if(R&&(P+=j?R:-R),R=0,P+=(M.dummy?T:I)/2,P+=(W.dummy?T:I)/2,P+=W.width/2,Object.hasOwn(W,"labelpos"))switch(W.labelpos.toLowerCase()){case"l":R=W.width/2;break;case"r":R=-W.width/2;break}return R&&(P+=j?R:-R),R=0,P}}function E(I,T){return I.node(T).width}return IS}var CS,Jq;function cie(){if(Jq)return CS;Jq=1;let t=Xr(),e=lie().positionX;CS=n;function n(i){i=t.asNonCompoundGraph(i),r(i),Object.entries(e(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=t.buildLayerMatrix(i),o=i.graph().ranksep,l=0;s.forEach(u=>{const f=u.reduce((p,h)=>{const b=i.node(h).height;return p>b?p:b},0);u.forEach(p=>i.node(p).y=l+f/2),l+=f+o})}return CS}var TS,Zq;function uie(){if(Zq)return TS;Zq=1;let t=Vre(),e=Hre(),n=Qre(),r=Xr().normalizeRanks,i=Gre(),s=Xr().removeEmptyRanks,o=Jre(),l=Zre(),u=Yre(),f=aie(),p=cie(),h=Xr(),b=Do().Graph;TS=x;function x(de,ye){let we=ye&&ye.debugTiming?h.time:h.notime;we("layout",()=>{let Ne=we("  buildLayoutGraph",()=>P(de));we("  runLayout",()=>_(Ne,we,ye)),we("  updateInputGraph",()=>E(de,Ne))})}function _(de,ye,we){ye("    makeSpaceForEdgeLabels",()=>R(de)),ye("    removeSelfEdges",()=>se(de)),ye("    acyclic",()=>t.run(de)),ye("    nestingGraph.run",()=>o.run(de)),ye("    rank",()=>n(h.asNonCompoundGraph(de))),ye("    injectEdgeLabelProxies",()=>$(de)),ye("    removeEmptyRanks",()=>s(de)),ye("    nestingGraph.cleanup",()=>o.cleanup(de)),ye("    normalizeRanks",()=>r(de)),ye("    assignRankMinMax",()=>F(de)),ye("    removeEdgeLabelProxies",()=>U(de)),ye("    normalize.run",()=>e.run(de)),ye("    parentDummyChains",()=>i(de)),ye("    addBorderSegments",()=>l(de)),ye("    order",()=>f(de,we)),ye("    insertSelfEdges",()=>ne(de)),ye("    adjustCoordinateSystem",()=>u.adjust(de)),ye("    position",()=>p(de)),ye("    positionSelfEdges",()=>oe(de)),ye("    removeBorderNodes",()=>le(de)),ye("    normalize.undo",()=>e.undo(de)),ye("    fixupEdgeLabelCoords",()=>te(de)),ye("    undoCoordinateSystem",()=>u.undo(de)),ye("    translateGraph",()=>V(de)),ye("    assignNodeIntersects",()=>z(de)),ye("    reversePoints",()=>Y(de)),ye("    acyclic.undo",()=>t.undo(de))}function E(de,ye){de.nodes().forEach(we=>{let Ne=de.node(we),ze=ye.node(we);Ne&&(Ne.x=ze.x,Ne.y=ze.y,Ne.rank=ze.rank,ye.children(we).length&&(Ne.width=ze.width,Ne.height=ze.height))}),de.edges().forEach(we=>{let Ne=de.edge(we),ze=ye.edge(we);Ne.points=ze.points,Object.hasOwn(ze,"x")&&(Ne.x=ze.x,Ne.y=ze.y)}),de.graph().width=ye.graph().width,de.graph().height=ye.graph().height}let I=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},j=["acyclicer","ranker","rankdir","align"],O=["width","height"],A={width:0,height:0},D=["minlen","weight","width","height","labeloffset"],M={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},W=["labelpos"];function P(de){let ye=new b({multigraph:!0,compound:!0}),we=ue(de.graph());return ye.setGraph(Object.assign({},T,ee(we,I),h.pick(we,j))),de.nodes().forEach(Ne=>{let ze=ue(de.node(Ne));const Oe=ee(ze,O);Object.keys(A).forEach(De=>{Oe[De]===void 0&&(Oe[De]=A[De])}),ye.setNode(Ne,Oe),ye.setParent(Ne,de.parent(Ne))}),de.edges().forEach(Ne=>{let ze=ue(de.edge(Ne));ye.setEdge(Ne,Object.assign({},M,ee(ze,D),h.pick(ze,W)))}),ye}function R(de){let ye=de.graph();ye.ranksep/=2,de.edges().forEach(we=>{let Ne=de.edge(we);Ne.minlen*=2,Ne.labelpos.toLowerCase()!=="c"&&(ye.rankdir==="TB"||ye.rankdir==="BT"?Ne.width+=Ne.labeloffset:Ne.height+=Ne.labeloffset)})}function $(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(we.width&&we.height){let Ne=de.node(ye.v),Oe={rank:(de.node(ye.w).rank-Ne.rank)/2+Ne.rank,e:ye};h.addDummyNode(de,"edge-proxy",Oe,"_ep")}})}function F(de){let ye=0;de.nodes().forEach(we=>{let Ne=de.node(we);Ne.borderTop&&(Ne.minRank=de.node(Ne.borderTop).rank,Ne.maxRank=de.node(Ne.borderBottom).rank,ye=Math.max(ye,Ne.maxRank))}),de.graph().maxRank=ye}function U(de){de.nodes().forEach(ye=>{let we=de.node(ye);we.dummy==="edge-proxy"&&(de.edge(we.e).labelRank=we.rank,de.removeNode(ye))})}function V(de){let ye=Number.POSITIVE_INFINITY,we=0,Ne=Number.POSITIVE_INFINITY,ze=0,Oe=de.graph(),De=Oe.marginx||0,Je=Oe.marginy||0;function Xe(Ue){let ct=Ue.x,_t=Ue.y,jt=Ue.width,Vt=Ue.height;ye=Math.min(ye,ct-jt/2),we=Math.max(we,ct+jt/2),Ne=Math.min(Ne,_t-Vt/2),ze=Math.max(ze,_t+Vt/2)}de.nodes().forEach(Ue=>Xe(de.node(Ue))),de.edges().forEach(Ue=>{let ct=de.edge(Ue);Object.hasOwn(ct,"x")&&Xe(ct)}),ye-=De,Ne-=Je,de.nodes().forEach(Ue=>{let ct=de.node(Ue);ct.x-=ye,ct.y-=Ne}),de.edges().forEach(Ue=>{let ct=de.edge(Ue);ct.points.forEach(_t=>{_t.x-=ye,_t.y-=Ne}),Object.hasOwn(ct,"x")&&(ct.x-=ye),Object.hasOwn(ct,"y")&&(ct.y-=Ne)}),Oe.width=we-ye+De,Oe.height=ze-Ne+Je}function z(de){de.edges().forEach(ye=>{let we=de.edge(ye),Ne=de.node(ye.v),ze=de.node(ye.w),Oe,De;we.points?(Oe=we.points[0],De=we.points[we.points.length-1]):(we.points=[],Oe=ze,De=Ne),we.points.unshift(h.intersectRect(Ne,Oe)),we.points.push(h.intersectRect(ze,De))})}function te(de){de.edges().forEach(ye=>{let we=de.edge(ye);if(Object.hasOwn(we,"x"))switch((we.labelpos==="l"||we.labelpos==="r")&&(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset;break}})}function Y(de){de.edges().forEach(ye=>{let we=de.edge(ye);we.reversed&&we.points.reverse()})}function le(de){de.nodes().forEach(ye=>{if(de.children(ye).length){let we=de.node(ye),Ne=de.node(we.borderTop),ze=de.node(we.borderBottom),Oe=de.node(we.borderLeft[we.borderLeft.length-1]),De=de.node(we.borderRight[we.borderRight.length-1]);we.width=Math.abs(De.x-Oe.x),we.height=Math.abs(ze.y-Ne.y),we.x=Oe.x+we.width/2,we.y=Ne.y+we.height/2}}),de.nodes().forEach(ye=>{de.node(ye).dummy==="border"&&de.removeNode(ye)})}function se(de){de.edges().forEach(ye=>{if(ye.v===ye.w){var we=de.node(ye.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ye,label:de.edge(ye)}),de.removeEdge(ye)}})}function ne(de){var ye=h.buildLayerMatrix(de);ye.forEach(we=>{var Ne=0;we.forEach((ze,Oe)=>{var De=de.node(ze);De.order=Oe+Ne,(De.selfEdges||[]).forEach(Je=>{h.addDummyNode(de,"selfedge",{width:Je.label.width,height:Je.label.height,rank:De.rank,order:Oe+ ++Ne,e:Je.e,label:Je.label},"_se")}),delete De.selfEdges})})}function oe(de){de.nodes().forEach(ye=>{var we=de.node(ye);if(we.dummy==="selfedge"){var Ne=de.node(we.e.v),ze=Ne.x+Ne.width/2,Oe=Ne.y,De=we.x-ze,Je=Ne.height/2;de.setEdge(we.e,we.label),de.removeNode(ye),we.label.points=[{x:ze+2*De/3,y:Oe-Je},{x:ze+5*De/6,y:Oe-Je},{x:ze+De,y:Oe},{x:ze+5*De/6,y:Oe+Je},{x:ze+2*De/3,y:Oe+Je}],we.label.x=we.x,we.label.y=we.y}})}function ee(de,ye){return h.mapValues(h.pick(de,ye),Number)}function ue(de){var ye={};return de&&Object.entries(de).forEach(([we,Ne])=>{typeof we=="string"&&(we=we.toLowerCase()),ye[we]=Ne}),ye}return TS}var jS,Yq;function die(){if(Yq)return jS;Yq=1;let t=Xr(),e=Do().Graph;jS={debugOrdering:n};function n(r){let i=t.buildLayerMatrix(r),s=new e({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,l)=>{let u="layer"+l;s.setNode(u,{rank:"same"}),o.reduce((f,p)=>(s.setEdge(f,p,{style:"invis"}),p))}),s}return jS}var OS,Xq;function fie(){return Xq||(Xq=1,OS="1.1.4"),OS}var RS,e3;function pie(){return e3||(e3=1,RS={graphlib:Do(),layout:uie(),debug:die(),util:{time:Xr().time,notime:Xr().notime},version:fie()}),RS}var hie=pie();const GL=uo(hie);var Nm=t=>t.type==="checkbox",Vc=t=>t instanceof Date,Fi=t=>t==null;const JL=t=>typeof t=="object";var Wr=t=>!Fi(t)&&!Array.isArray(t)&&JL(t)&&!Vc(t),ZL=t=>Wr(t)&&t.target?Nm(t.target)?t.target.checked:t.target.value:t,mie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,YL=(t,e)=>t.has(mie(e)),gie=t=>{const e=t.constructor&&t.constructor.prototype;return Wr(e)&&e.hasOwnProperty("isPrototypeOf")},BN=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cs(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(BN&&(t instanceof Blob||r))&&(n||Wr(t)))if(e=n?[]:{},!n&&!gie(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=cs(t[i]));else return t;return e}var cx=t=>Array.isArray(t)?t.filter(Boolean):[],Br=t=>t===void 0,Et=(t,e,n)=>{if(!e||!Wr(t))return n;const r=cx(e.split(/[,[\].]+?/)).reduce((i,s)=>Fi(i)?i:i[s],t);return Br(r)||r===t?Br(t[e])?n:t[e]:r},to=t=>typeof t=="boolean",zN=t=>/^\w*$/.test(t),XL=t=>cx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Un=(t,e,n)=>{let r=-1;const i=zN(e)?[e]:XL(e),s=i.length,o=s-1;for(;++r<s;){const l=i[r];let u=n;if(r!==o){const f=t[l];u=Wr(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=u,t=t[l]}return t};const ib={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},To={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ta={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yie=Bn.createContext(null),WN=()=>Bn.useContext(yie);var eM=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==To.all&&(e._proxyFormState[o]=!r||To.all),n&&(n[o]=!0),t[o]}});return i},us=t=>Wr(t)&&!Object.keys(t).length,tM=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return us(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||To.all))},sh=t=>Array.isArray(t)?t:[t],nM=(t,e,n)=>!t||!e||t===e||sh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r)));function UN(t){const e=Bn.useRef(t);e.current=t,Bn.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}function vie(t){const e=WN(),{control:n=e.control,disabled:r,name:i,exact:s}=t,[o,l]=Bn.useState(n._formState),u=Bn.useRef(!0),f=Bn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),p=Bn.useRef(i);return p.current=i,UN({disabled:r,next:h=>u.current&&nM(p.current,h.name,s)&&tM(h,f.current,n._updateFormState)&&l({...n._formState,...h}),subject:n._subjects.state}),Bn.useEffect(()=>(u.current=!0,f.current.isValid&&n._updateValid(!0),()=>{u.current=!1}),[n]),Bn.useMemo(()=>eM(o,n,f.current,!1),[o,n])}var Xo=t=>typeof t=="string",rM=(t,e,n,r,i)=>Xo(t)?(r&&e.watch.add(t),Et(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Et(n,s))):(r&&(e.watchAll=!0),n);function bie(t){const e=WN(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t,l=Bn.useRef(r);l.current=r,UN({disabled:s,subject:n._subjects.values,next:p=>{nM(l.current,p.name,o)&&f(cs(rM(l.current,n._names,p.values||n._formValues,!1,i)))}});const[u,f]=Bn.useState(n._getWatch(r,i));return Bn.useEffect(()=>n._removeUnmounted()),u}function xie(t){const e=WN(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=YL(i._names.array,n),l=bie({control:i,name:n,defaultValue:Et(i._formValues,n,Et(i._defaultValues,n,t.defaultValue)),exact:!0}),u=vie({control:i,name:n,exact:!0}),f=Bn.useRef(i.register(n,{...t.rules,value:l,...to(t.disabled)?{disabled:t.disabled}:{}})),p=Bn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Et(u.errors,n)},isDirty:{enumerable:!0,get:()=>!!Et(u.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Et(u.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Et(u.validatingFields,n)},error:{enumerable:!0,get:()=>Et(u.errors,n)}}),[u,n]),h=Bn.useMemo(()=>({name:n,value:l,...to(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:b=>f.current.onChange({target:{value:ZL(b),name:n},type:ib.CHANGE}),onBlur:()=>f.current.onBlur({target:{value:Et(i._formValues,n),name:n},type:ib.BLUR}),ref:b=>{const x=Et(i._fields,n);x&&b&&(x._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:_=>b.setCustomValidity(_),reportValidity:()=>b.reportValidity()})}}),[n,i._formValues,r,u.disabled,l,i._fields]);return Bn.useEffect(()=>{const b=i._options.shouldUnregister||s,x=(_,E)=>{const I=Et(i._fields,_);I&&I._f&&(I._f.mount=E)};if(x(n,!0),b){const _=cs(Et(i._options.defaultValues,n));Un(i._defaultValues,n,_),Br(Et(i._formValues,n))&&Un(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?b&&!i._state.action:b)?i.unregister(n):x(n,!1)}},[n,i,o,s]),Bn.useEffect(()=>{i._updateDisabledField({disabled:r,fields:i._fields,name:n})},[r,n,i]),Bn.useMemo(()=>({field:h,formState:u,fieldState:p}),[h,u,p])}const Ui=t=>t.render(xie(t));var iM=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},t3=t=>({isOnSubmit:!t||t===To.onSubmit,isOnBlur:t===To.onBlur,isOnChange:t===To.onChange,isOnAll:t===To.all,isOnTouch:t===To.onTouched}),n3=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const oh=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Et(t,i);if(s){const{_f:o,...l}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(oh(l,e))break}else if(Wr(l)&&oh(l,e))break}}};var wie=(t,e,n)=>{const r=sh(Et(t,n));return Un(r,"root",e[n]),Un(t,n,r),t},VN=t=>t.type==="file",Zo=t=>typeof t=="function",sb=t=>{if(!BN)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},By=t=>Xo(t),HN=t=>t.type==="radio",ob=t=>t instanceof RegExp;const r3={value:!1,isValid:!1},i3={value:!0,isValid:!0};var sM=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Br(t[0].attributes.value)?Br(t[0].value)||t[0].value===""?i3:{value:t[0].value,isValid:!0}:i3:r3}return r3};const s3={isValid:!1,value:null};var oM=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,s3):s3;function o3(t,e,n="validate"){if(By(t)||Array.isArray(t)&&t.every(By)||to(t)&&!t)return{type:n,message:By(t)?t:"",ref:e}}var Xu=t=>Wr(t)&&!ob(t)?t:{value:t,message:""},a3=async(t,e,n,r,i,s)=>{const{ref:o,refs:l,required:u,maxLength:f,minLength:p,min:h,max:b,pattern:x,validate:_,name:E,valueAsNumber:I,mount:T}=t._f,j=Et(n,E);if(!T||e.has(E))return{};const O=l?l[0]:o,A=U=>{i&&O.reportValidity&&(O.setCustomValidity(to(U)?"":U||""),O.reportValidity())},D={},M=HN(o),W=Nm(o),P=M||W,R=(I||VN(o))&&Br(o.value)&&Br(j)||sb(o)&&o.value===""||j===""||Array.isArray(j)&&!j.length,$=iM.bind(null,E,r,D),F=(U,V,z,te=Ta.maxLength,Y=Ta.minLength)=>{const le=U?V:z;D[E]={type:U?te:Y,message:le,ref:o,...$(U?te:Y,le)}};if(s?!Array.isArray(j)||!j.length:u&&(!P&&(R||Fi(j))||to(j)&&!j||W&&!sM(l).isValid||M&&!oM(l).isValid)){const{value:U,message:V}=By(u)?{value:!!u,message:u}:Xu(u);if(U&&(D[E]={type:Ta.required,message:V,ref:O,...$(Ta.required,V)},!r))return A(V),D}if(!R&&(!Fi(h)||!Fi(b))){let U,V;const z=Xu(b),te=Xu(h);if(!Fi(j)&&!isNaN(j)){const Y=o.valueAsNumber||j&&+j;Fi(z.value)||(U=Y>z.value),Fi(te.value)||(V=Y<te.value)}else{const Y=o.valueAsDate||new Date(j),le=oe=>new Date(new Date().toDateString()+" "+oe),se=o.type=="time",ne=o.type=="week";Xo(z.value)&&j&&(U=se?le(j)>le(z.value):ne?j>z.value:Y>new Date(z.value)),Xo(te.value)&&j&&(V=se?le(j)<le(te.value):ne?j<te.value:Y<new Date(te.value))}if((U||V)&&(F(!!U,z.message,te.message,Ta.max,Ta.min),!r))return A(D[E].message),D}if((f||p)&&!R&&(Xo(j)||s&&Array.isArray(j))){const U=Xu(f),V=Xu(p),z=!Fi(U.value)&&j.length>+U.value,te=!Fi(V.value)&&j.length<+V.value;if((z||te)&&(F(z,U.message,V.message),!r))return A(D[E].message),D}if(x&&!R&&Xo(j)){const{value:U,message:V}=Xu(x);if(ob(U)&&!j.match(U)&&(D[E]={type:Ta.pattern,message:V,ref:o,...$(Ta.pattern,V)},!r))return A(V),D}if(_){if(Zo(_)){const U=await _(j,n),V=o3(U,O);if(V&&(D[E]={...V,...$(Ta.validate,V.message)},!r))return A(V.message),D}else if(Wr(_)){let U={};for(const V in _){if(!us(U)&&!r)break;const z=o3(await _[V](j,n),O,V);z&&(U={...z,...$(V,z.message)},A(z.message),r&&(D[E]=U))}if(!us(U)&&(D[E]={ref:O,...U},!r))return D}}return A(!0),D};function _ie(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Br(t)?r++:t[e[r++]];return t}function Sie(t){for(const e in t)if(t.hasOwnProperty(e)&&!Br(t[e]))return!1;return!0}function ii(t,e){const n=Array.isArray(e)?e:zN(e)?[e]:XL(e),r=n.length===1?t:_ie(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Wr(r)&&us(r)||Array.isArray(r)&&Sie(r))&&ii(t,n.slice(0,-1)),t}var qS=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},l1=t=>Fi(t)||!JL(t);function Al(t,e){if(l1(t)||l1(e))return t===e;if(Vc(t)&&Vc(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Vc(s)&&Vc(o)||Wr(s)&&Wr(o)||Array.isArray(s)&&Array.isArray(o)?!Al(s,o):s!==o)return!1}}return!0}var aM=t=>t.type==="select-multiple",Eie=t=>HN(t)||Nm(t),AS=t=>sb(t)&&t.isConnected,lM=t=>{for(const e in t)if(Zo(t[e]))return!0;return!1};function ab(t,e={}){const n=Array.isArray(t);if(Wr(t)||n)for(const r in t)Array.isArray(t[r])||Wr(t[r])&&!lM(t[r])?(e[r]=Array.isArray(t[r])?[]:{},ab(t[r],e[r])):Fi(t[r])||(e[r]=!0);return e}function cM(t,e,n){const r=Array.isArray(t);if(Wr(t)||r)for(const i in t)Array.isArray(t[i])||Wr(t[i])&&!lM(t[i])?Br(e)||l1(n[i])?n[i]=Array.isArray(t[i])?ab(t[i],[]):{...ab(t[i])}:cM(t[i],Fi(e)?{}:e[i],n[i]):n[i]=!Al(t[i],e[i]);return n}var xp=(t,e)=>cM(t,e,ab(e)),uM=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Br(t)?t:e?t===""?NaN:t&&+t:n&&Xo(t)?new Date(t):r?r(t):t;function PS(t){const e=t.ref;return VN(e)?e.files:HN(e)?oM(t.refs).value:aM(e)?[...e.selectedOptions].map(({value:n})=>n):Nm(e)?sM(t.refs).value:uM(Br(e.value)?t.ref.value:e.value,t)}var Nie=(t,e,n,r)=>{const i={};for(const s of t){const o=Et(e,s);o&&Un(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},wp=t=>Br(t)?t:ob(t)?t.source:Wr(t)?ob(t.value)?t.value.source:t.value:t;const l3="AsyncFunction";var kie=t=>!!t&&!!t.validate&&!!(Zo(t.validate)&&t.validate.constructor.name===l3||Wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===l3)),Iie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function c3(t,e,n){const r=Et(t,n);if(r||zN(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Et(e,s),l=Et(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(l&&l.type)return{name:s,error:l};i.pop()}return{name:n}}var Cie=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,Tie=(t,e)=>!cx(Et(t,e)).length&&ii(t,e);const jie={mode:To.onSubmit,reValidateMode:To.onChange,shouldFocusError:!0};function Oie(t={}){let e={...jie,...t},n={submitCount:0,isDirty:!1,isLoading:Zo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Wr(e.defaultValues)||Wr(e.values)?cs(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:cs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:qS(),array:qS(),state:qS()},b=t3(e.mode),x=t3(e.reValidateMode),_=e.criteriaMode===To.all,E=xe=>ve=>{clearTimeout(f),f=setTimeout(xe,ve)},I=async xe=>{if(!e.disabled&&(p.isValid||xe)){const ve=e.resolver?us((await P()).errors):await $(r,!0);ve!==n.isValid&&h.state.next({isValid:ve})}},T=(xe,ve)=>{!e.disabled&&(p.isValidating||p.validatingFields)&&((xe||Array.from(l.mount)).forEach(ke=>{ke&&(ve?Un(n.validatingFields,ke,ve):ii(n.validatingFields,ke))}),h.state.next({validatingFields:n.validatingFields,isValidating:!us(n.validatingFields)}))},j=(xe,ve=[],ke,Ae,Ve=!0,rt=!0)=>{if(Ae&&ke&&!e.disabled){if(o.action=!0,rt&&Array.isArray(Et(r,xe))){const Me=ke(Et(r,xe),Ae.argA,Ae.argB);Ve&&Un(r,xe,Me)}if(rt&&Array.isArray(Et(n.errors,xe))){const Me=ke(Et(n.errors,xe),Ae.argA,Ae.argB);Ve&&Un(n.errors,xe,Me),Tie(n.errors,xe)}if(p.touchedFields&&rt&&Array.isArray(Et(n.touchedFields,xe))){const Me=ke(Et(n.touchedFields,xe),Ae.argA,Ae.argB);Ve&&Un(n.touchedFields,xe,Me)}p.dirtyFields&&(n.dirtyFields=xp(i,s)),h.state.next({name:xe,isDirty:U(xe,ve),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Un(s,xe,ve)},O=(xe,ve)=>{Un(n.errors,xe,ve),h.state.next({errors:n.errors})},A=xe=>{n.errors=xe,h.state.next({errors:n.errors,isValid:!1})},D=(xe,ve,ke,Ae)=>{const Ve=Et(r,xe);if(Ve){const rt=Et(s,xe,Br(ke)?Et(i,xe):ke);Br(rt)||Ae&&Ae.defaultChecked||ve?Un(s,xe,ve?rt:PS(Ve._f)):te(xe,rt),o.mount&&I()}},M=(xe,ve,ke,Ae,Ve)=>{let rt=!1,Me=!1;const ut={name:xe};if(!e.disabled){const Qt=!!(Et(r,xe)&&Et(r,xe)._f&&Et(r,xe)._f.disabled);if(!ke||Ae){p.isDirty&&(Me=n.isDirty,n.isDirty=ut.isDirty=U(),rt=Me!==ut.isDirty);const Gt=Qt||Al(Et(i,xe),ve);Me=!!(!Qt&&Et(n.dirtyFields,xe)),Gt||Qt?ii(n.dirtyFields,xe):Un(n.dirtyFields,xe,!0),ut.dirtyFields=n.dirtyFields,rt=rt||p.dirtyFields&&Me!==!Gt}if(ke){const Gt=Et(n.touchedFields,xe);Gt||(Un(n.touchedFields,xe,ke),ut.touchedFields=n.touchedFields,rt=rt||p.touchedFields&&Gt!==ke)}rt&&Ve&&h.state.next(ut)}return rt?ut:{}},W=(xe,ve,ke,Ae)=>{const Ve=Et(n.errors,xe),rt=p.isValid&&to(ve)&&n.isValid!==ve;if(e.delayError&&ke?(u=E(()=>O(xe,ke)),u(e.delayError)):(clearTimeout(f),u=null,ke?Un(n.errors,xe,ke):ii(n.errors,xe)),(ke?!Al(Ve,ke):Ve)||!us(Ae)||rt){const Me={...Ae,...rt&&to(ve)?{isValid:ve}:{},errors:n.errors,name:xe};n={...n,...Me},h.state.next(Me)}},P=async xe=>{T(xe,!0);const ve=await e.resolver(s,e.context,Nie(xe||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return T(xe),ve},R=async xe=>{const{errors:ve}=await P(xe);if(xe)for(const ke of xe){const Ae=Et(ve,ke);Ae?Un(n.errors,ke,Ae):ii(n.errors,ke)}else n.errors=ve;return ve},$=async(xe,ve,ke={valid:!0})=>{for(const Ae in xe){const Ve=xe[Ae];if(Ve){const{_f:rt,...Me}=Ve;if(rt){const ut=l.array.has(rt.name),Qt=Ve._f&&kie(Ve._f);Qt&&p.validatingFields&&T([Ae],!0);const Gt=await a3(Ve,l.disabled,s,_,e.shouldUseNativeValidation&&!ve,ut);if(Qt&&p.validatingFields&&T([Ae]),Gt[rt.name]&&(ke.valid=!1,ve))break;!ve&&(Et(Gt,rt.name)?ut?wie(n.errors,Gt,rt.name):Un(n.errors,rt.name,Gt[rt.name]):ii(n.errors,rt.name))}!us(Me)&&await $(Me,ve,ke)}}return ke.valid},F=()=>{for(const xe of l.unMount){const ve=Et(r,xe);ve&&(ve._f.refs?ve._f.refs.every(ke=>!AS(ke)):!AS(ve._f.ref))&&Ne(xe)}l.unMount=new Set},U=(xe,ve)=>!e.disabled&&(xe&&ve&&Un(s,xe,ve),!Al(ee(),i)),V=(xe,ve,ke)=>rM(xe,l,{...o.mount?s:Br(ve)?i:Xo(xe)?{[xe]:ve}:ve},ke,ve),z=xe=>cx(Et(o.mount?s:i,xe,e.shouldUnregister?Et(i,xe,[]):[])),te=(xe,ve,ke={})=>{const Ae=Et(r,xe);let Ve=ve;if(Ae){const rt=Ae._f;rt&&(!rt.disabled&&Un(s,xe,uM(ve,rt)),Ve=sb(rt.ref)&&Fi(ve)?"":ve,aM(rt.ref)?[...rt.ref.options].forEach(Me=>Me.selected=Ve.includes(Me.value)):rt.refs?Nm(rt.ref)?rt.refs.length>1?rt.refs.forEach(Me=>(!Me.defaultChecked||!Me.disabled)&&(Me.checked=Array.isArray(Ve)?!!Ve.find(ut=>ut===Me.value):Ve===Me.value)):rt.refs[0]&&(rt.refs[0].checked=!!Ve):rt.refs.forEach(Me=>Me.checked=Me.value===Ve):VN(rt.ref)?rt.ref.value="":(rt.ref.value=Ve,rt.ref.type||h.values.next({name:xe,values:{...s}})))}(ke.shouldDirty||ke.shouldTouch)&&M(xe,Ve,ke.shouldTouch,ke.shouldDirty,!0),ke.shouldValidate&&oe(xe)},Y=(xe,ve,ke)=>{for(const Ae in ve){const Ve=ve[Ae],rt=`${xe}.${Ae}`,Me=Et(r,rt);(l.array.has(xe)||Wr(Ve)||Me&&!Me._f)&&!Vc(Ve)?Y(rt,Ve,ke):te(rt,Ve,ke)}},le=(xe,ve,ke={})=>{const Ae=Et(r,xe),Ve=l.array.has(xe),rt=cs(ve);Un(s,xe,rt),Ve?(h.array.next({name:xe,values:{...s}}),(p.isDirty||p.dirtyFields)&&ke.shouldDirty&&h.state.next({name:xe,dirtyFields:xp(i,s),isDirty:U(xe,rt)})):Ae&&!Ae._f&&!Fi(rt)?Y(xe,rt,ke):te(xe,rt,ke),n3(xe,l)&&h.state.next({...n}),h.values.next({name:o.mount?xe:void 0,values:{...s}})},se=async xe=>{o.mount=!0;const ve=xe.target;let ke=ve.name,Ae=!0;const Ve=Et(r,ke),rt=()=>ve.type?PS(Ve._f):ZL(xe),Me=ut=>{Ae=Number.isNaN(ut)||Vc(ut)&&isNaN(ut.getTime())||Al(ut,Et(s,ke,ut))};if(Ve){let ut,Qt;const Gt=rt(),mn=xe.type===ib.BLUR||xe.type===ib.FOCUS_OUT,ur=!Iie(Ve._f)&&!e.resolver&&!Et(n.errors,ke)&&!Ve._f.deps||Cie(mn,Et(n.touchedFields,ke),n.isSubmitted,x,b),Ln=n3(ke,l,mn);Un(s,ke,Gt),mn?(Ve._f.onBlur&&Ve._f.onBlur(xe),u&&u(0)):Ve._f.onChange&&Ve._f.onChange(xe);const Hr=M(ke,Gt,mn,!1),Oi=!us(Hr)||Ln;if(!mn&&h.values.next({name:ke,type:xe.type,values:{...s}}),ur)return p.isValid&&(e.mode==="onBlur"&&mn?I():mn||I()),Oi&&h.state.next({name:ke,...Ln?{}:Hr});if(!mn&&Ln&&h.state.next({...n}),e.resolver){const{errors:Tr}=await P([ke]);if(Me(Gt),Ae){const Jt=c3(n.errors,r,ke),Zi=c3(Tr,r,Jt.name||ke);ut=Zi.error,ke=Zi.name,Qt=us(Tr)}}else T([ke],!0),ut=(await a3(Ve,l.disabled,s,_,e.shouldUseNativeValidation))[ke],T([ke]),Me(Gt),Ae&&(ut?Qt=!1:p.isValid&&(Qt=await $(r,!0)));Ae&&(Ve._f.deps&&oe(Ve._f.deps),W(ke,Qt,ut,Hr))}},ne=(xe,ve)=>{if(Et(n.errors,ve)&&xe.focus)return xe.focus(),1},oe=async(xe,ve={})=>{let ke,Ae;const Ve=sh(xe);if(e.resolver){const rt=await R(Br(xe)?xe:Ve);ke=us(rt),Ae=xe?!Ve.some(Me=>Et(rt,Me)):ke}else xe?(Ae=(await Promise.all(Ve.map(async rt=>{const Me=Et(r,rt);return await $(Me&&Me._f?{[rt]:Me}:Me)}))).every(Boolean),!(!Ae&&!n.isValid)&&I()):Ae=ke=await $(r);return h.state.next({...!Xo(xe)||p.isValid&&ke!==n.isValid?{}:{name:xe},...e.resolver||!xe?{isValid:ke}:{},errors:n.errors}),ve.shouldFocus&&!Ae&&oh(r,ne,xe?Ve:l.mount),Ae},ee=xe=>{const ve={...o.mount?s:i};return Br(xe)?ve:Xo(xe)?Et(ve,xe):xe.map(ke=>Et(ve,ke))},ue=(xe,ve)=>({invalid:!!Et((ve||n).errors,xe),isDirty:!!Et((ve||n).dirtyFields,xe),error:Et((ve||n).errors,xe),isValidating:!!Et(n.validatingFields,xe),isTouched:!!Et((ve||n).touchedFields,xe)}),de=xe=>{xe&&sh(xe).forEach(ve=>ii(n.errors,ve)),h.state.next({errors:xe?n.errors:{}})},ye=(xe,ve,ke)=>{const Ae=(Et(r,xe,{_f:{}})._f||{}).ref,Ve=Et(n.errors,xe)||{},{ref:rt,message:Me,type:ut,...Qt}=Ve;Un(n.errors,xe,{...Qt,...ve,ref:Ae}),h.state.next({name:xe,errors:n.errors,isValid:!1}),ke&&ke.shouldFocus&&Ae&&Ae.focus&&Ae.focus()},we=(xe,ve)=>Zo(xe)?h.values.subscribe({next:ke=>xe(V(void 0,ve),ke)}):V(xe,ve,!0),Ne=(xe,ve={})=>{for(const ke of xe?sh(xe):l.mount)l.mount.delete(ke),l.array.delete(ke),ve.keepValue||(ii(r,ke),ii(s,ke)),!ve.keepError&&ii(n.errors,ke),!ve.keepDirty&&ii(n.dirtyFields,ke),!ve.keepTouched&&ii(n.touchedFields,ke),!ve.keepIsValidating&&ii(n.validatingFields,ke),!e.shouldUnregister&&!ve.keepDefaultValue&&ii(i,ke);h.values.next({values:{...s}}),h.state.next({...n,...ve.keepDirty?{isDirty:U()}:{}}),!ve.keepIsValid&&I()},ze=({disabled:xe,name:ve,field:ke,fields:Ae})=>{(to(xe)&&o.mount||xe||l.disabled.has(ve))&&(xe?l.disabled.add(ve):l.disabled.delete(ve),M(ve,PS(ke?ke._f:Et(Ae,ve)._f),!1,!1,!0))},Oe=(xe,ve={})=>{let ke=Et(r,xe);const Ae=to(ve.disabled)||to(e.disabled);return Un(r,xe,{...ke||{},_f:{...ke&&ke._f?ke._f:{ref:{name:xe}},name:xe,mount:!0,...ve}}),l.mount.add(xe),ke?ze({field:ke,disabled:to(ve.disabled)?ve.disabled:e.disabled,name:xe}):D(xe,!0,ve.value),{...Ae?{disabled:ve.disabled||e.disabled}:{},...e.progressive?{required:!!ve.required,min:wp(ve.min),max:wp(ve.max),minLength:wp(ve.minLength),maxLength:wp(ve.maxLength),pattern:wp(ve.pattern)}:{},name:xe,onChange:se,onBlur:se,ref:Ve=>{if(Ve){Oe(xe,ve),ke=Et(r,xe);const rt=Br(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,Me=Eie(rt),ut=ke._f.refs||[];if(Me?ut.find(Qt=>Qt===rt):rt===ke._f.ref)return;Un(r,xe,{_f:{...ke._f,...Me?{refs:[...ut.filter(AS),rt,...Array.isArray(Et(i,xe))?[{}]:[]],ref:{type:rt.type,name:xe}}:{ref:rt}}}),D(xe,!1,void 0,rt)}else ke=Et(r,xe,{}),ke._f&&(ke._f.mount=!1),(e.shouldUnregister||ve.shouldUnregister)&&!(YL(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},De=()=>e.shouldFocusError&&oh(r,ne,l.mount),Je=xe=>{to(xe)&&(h.state.next({disabled:xe}),oh(r,(ve,ke)=>{const Ae=Et(r,ke);Ae&&(ve.disabled=Ae._f.disabled||xe,Array.isArray(Ae._f.refs)&&Ae._f.refs.forEach(Ve=>{Ve.disabled=Ae._f.disabled||xe}))},0,!1))},Xe=(xe,ve)=>async ke=>{let Ae;ke&&(ke.preventDefault&&ke.preventDefault(),ke.persist&&ke.persist());let Ve=cs(s);if(l.disabled.size)for(const rt of l.disabled)Un(Ve,rt,void 0);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:rt,values:Me}=await P();n.errors=rt,Ve=Me}else await $(r);if(ii(n.errors,"root"),us(n.errors)){h.state.next({errors:{}});try{await xe(Ve,ke)}catch(rt){Ae=rt}}else ve&&await ve({...n.errors},ke),De(),setTimeout(De);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:us(n.errors)&&!Ae,submitCount:n.submitCount+1,errors:n.errors}),Ae)throw Ae},Ue=(xe,ve={})=>{Et(r,xe)&&(Br(ve.defaultValue)?le(xe,cs(Et(i,xe))):(le(xe,ve.defaultValue),Un(i,xe,cs(ve.defaultValue))),ve.keepTouched||ii(n.touchedFields,xe),ve.keepDirty||(ii(n.dirtyFields,xe),n.isDirty=ve.defaultValue?U(xe,cs(Et(i,xe))):U()),ve.keepError||(ii(n.errors,xe),p.isValid&&I()),h.state.next({...n}))},ct=(xe,ve={})=>{const ke=xe?cs(xe):i,Ae=cs(ke),Ve=us(xe),rt=Ve?i:Ae;if(ve.keepDefaultValues||(i=ke),!ve.keepValues){if(ve.keepDirtyValues){const Me=new Set([...l.mount,...Object.keys(xp(i,s))]);for(const ut of Array.from(Me))Et(n.dirtyFields,ut)?Un(rt,ut,Et(s,ut)):le(ut,Et(rt,ut))}else{if(BN&&Br(xe))for(const Me of l.mount){const ut=Et(r,Me);if(ut&&ut._f){const Qt=Array.isArray(ut._f.refs)?ut._f.refs[0]:ut._f.ref;if(sb(Qt)){const Gt=Qt.closest("form");if(Gt){Gt.reset();break}}}}r={}}s=e.shouldUnregister?ve.keepDefaultValues?cs(i):{}:cs(rt),h.array.next({values:{...rt}}),h.values.next({values:{...rt}})}l={mount:ve.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!ve.keepIsValid||!!ve.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:ve.keepSubmitCount?n.submitCount:0,isDirty:Ve?!1:ve.keepDirty?n.isDirty:!!(ve.keepDefaultValues&&!Al(xe,i)),isSubmitted:ve.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ve?{}:ve.keepDirtyValues?ve.keepDefaultValues&&s?xp(i,s):n.dirtyFields:ve.keepDefaultValues&&xe?xp(i,xe):ve.keepDirty?n.dirtyFields:{},touchedFields:ve.keepTouched?n.touchedFields:{},errors:ve.keepErrors?n.errors:{},isSubmitSuccessful:ve.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},_t=(xe,ve)=>ct(Zo(xe)?xe(s):xe,ve);return{control:{register:Oe,unregister:Ne,getFieldState:ue,handleSubmit:Xe,setError:ye,_executeSchema:P,_getWatch:V,_getDirty:U,_updateValid:I,_removeUnmounted:F,_updateFieldArray:j,_updateDisabledField:ze,_getFieldArray:z,_reset:ct,_resetDefaultValues:()=>Zo(e.defaultValues)&&e.defaultValues().then(xe=>{_t(xe,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:xe=>{n={...n,...xe}},_disableForm:Je,_subjects:h,_proxyFormState:p,_setErrors:A,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},set _formState(xe){n=xe},get _options(){return e},set _options(xe){e={...e,...xe}}},trigger:oe,register:Oe,handleSubmit:Xe,watch:we,setValue:le,getValues:ee,reset:_t,resetField:Ue,clearErrors:de,unregister:Ne,setError:ye,setFocus:(xe,ve={})=>{const ke=Et(r,xe),Ae=ke&&ke._f;if(Ae){const Ve=Ae.refs?Ae.refs[0]:Ae.ref;Ve.focus&&(Ve.focus(),ve.shouldSelect&&Zo(Ve.select)&&Ve.select())}},getFieldState:ue}}function Ti(t={}){const e=Bn.useRef(void 0),n=Bn.useRef(void 0),[r,i]=Bn.useState({isDirty:!1,isValidating:!1,isLoading:Zo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Zo(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Oie(t),formState:r});const s=e.current.control;return s._options=t,UN({subject:s._subjects.state,next:o=>{tM(o,s._proxyFormState,s._updateFormState,!0)&&i({...s._formState})}}),Bn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Bn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Bn.useEffect(()=>{t.values&&!Al(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Bn.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Bn.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Bn.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=eM(r,s),e.current}const u3=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Et(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},dM=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?u3(r.ref,n,t):r.refs&&r.refs.forEach(i=>u3(i,n,t))}},Rie=(t,e)=>{e.shouldUseNativeValidation&&dM(t,e);const n={};for(const r in t){const i=Et(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(qie(e.names||Object.keys(t),r)){const o=Object.assign({},Et(n,r));Un(o,"root",s),Un(n,r,o)}else Un(n,r,s)}return n},qie=(t,e)=>t.some(n=>n.startsWith(e+"."));var Aie=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(h){return t.push(h)})}),e){var u=n[o].types,f=u&&u[r.code];n[o]=iM(o,e,n,i,f?[].concat(f,r.message):r.message)}t.shift()}return n},ji=function(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,l){try{var u=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(f){return s.shouldUseNativeValidation&&dM({},s),{errors:{},values:n.raw?r:f}})}catch(f){return l(f)}return u&&u.then?u.then(void 0,l):u}(0,function(o){if(function(l){return Array.isArray(l?.errors)}(o))return{values:{},errors:Rie(Aie(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}};const Pie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({name:L.string().min(1),cycles:L.number().int(),sort:L.number().int(),limit:L.number().int()})),shape:t,filter:e,sort:["id","name","cycles","sort","limit"]}),Fie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintId:L.string().min(1),conflictId:L.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","conflictId"]}),Die=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintId:L.string().min(1),dependencyId:L.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","dependencyId"]}),Lie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintId:L.string().min(1),inventoryId:L.string().min(1)})),shape:t,filter:e,sort:["id","blueprintId","inventoryId"]}),Mie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintId:L.string().min(1),resourceId:L.string().min(1),amount:L.number(),cycles:L.number().int()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","cycles"]}),$ie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintProductionId:L.string().min(1),blueprintId:L.string().min(1)})),shape:t,filter:e,sort:["id","blueprintProductionId","blueprintId"]}),Bie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintProductionId:L.string().min(1),resourceId:L.string().min(1),amount:L.number(),passive:oo()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount","passive"]}),zie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintProductionId:L.string().min(1),resourceId:L.string().min(1),amount:L.number()})),shape:t,filter:e,sort:["id","blueprintProductionId","resourceId","amount"]}),Wie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({blueprintId:L.string().min(1),resourceId:L.string().min(1),amount:L.number(),passive:oo()})),shape:t,filter:e,sort:["id","blueprintId","resourceId","amount","passive"]}),Uie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({userId:L.string().min(1),blueprintId:L.string().min(1),constructionId:L.string().nullish(),productionId:L.string().nullish(),recurringProductionId:L.string().nullish(),x:L.number(),y:L.number()})),shape:t,filter:e,sort:["id","userId","blueprintId","constructionId","productionId","recurringProductionId","x","y"]}),Vie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({resourceId:L.string().min(1),amount:L.number(),limit:L.number()})),shape:t,filter:e,sort:["id","resourceId","amount","limit"]}),Hie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({resourceId:L.string().min(1),amount:L.number(),limit:L.number(),type:L.string().min(1)})),shape:t,filter:e,sort:["id","resourceId","amount","limit","type"]}),Kie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({name:L.string().min(1),transport:L.number()})),shape:t,filter:e,sort:["id","name","transport"]}),Qie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({code:L.string().min(1),label:L.string().min(1),group:L.string().nullish(),sort:L.number().int()})),shape:t,filter:e,sort:["id","code","label","group","sort"]}),Gie=({shape:t,filter:e})=>Qi({entity:Hi.merge(L.object({name:L.string().min(1),login:L.string().min(1),password:L.string().min(1)})),shape:t,filter:e,sort:["id","name","login","password"]}),KN=Pie({shape:L.object({name:L.string().min(1),cycles:eh(),sort:eh(),limit:eh()}),filter:Ki.merge(L.object({name:L.string().optional()}))}),lb=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(KN.shape),defaultValues:{cycles:1,sort:0,limit:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"name",label:d.jsx(J,{label:"Building name (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("name")})}),d.jsx(En,{formState:s.formState,name:"cycles",label:d.jsx(J,{label:"Construction cycles (label)"}),hint:d.jsx(J,{label:"Amount of cycles to build this building (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("cycles")})}),d.jsx(En,{formState:s.formState,name:"limit",label:d.jsx(J,{label:"Building limit (label)"}),hint:d.jsx(J,{label:"Maximum number of building a player can build (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:1,...s.register("limit")})}),d.jsx(En,{formState:s.formState,name:"sort",label:d.jsx(J,{label:"Blueprint sort (label)"}),hint:d.jsx(J,{label:"Sort blueprints by this number (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:o.input(),min:0,...s.register("sort")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Rn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},co="icon-[fluent-mdl2--production-floor-management]",Jie=({id:t,data:e,isConnectable:n})=>{const{locale:r}=sn({from:"/$locale"}),i=tf();return d.jsxs("div",{className:"min-w-[14rem]",onClick:()=>{i({to:"/$locale/apps/derivean/root/editor",params:{locale:r},search:{zoomTo:t}})},onDoubleClick:()=>{i({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t}})},children:[d.jsx(lo,{type:"target",position:Dt.Left,className:"w-4 h-4"}),d.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[d.jsx("div",{className:"flex flex-row items-center gap-2",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:r,id:t},children:e.name})}),d.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 border bg-slate-50 border-slate-200 rounded w-full p-1",onClick:s=>s.stopPropagation(),onDoubleClick:s=>s.stopPropagation(),onMouseDown:s=>s.stopPropagation(),children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(Mt,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:r,id:t}}),d.jsx(Mt,{icon:co,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:r,id:t}}),d.jsx(Mt,{icon:jD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:r,id:t}})]}),d.jsx("div",{children:d.jsx(hf,{target:d.jsx(ym,{iconEnabled:ei,css:{base:["text-red-500"]}}),outside:!0,textTitle:d.jsx(J,{label:"Delete blueprint (modal)"}),css:{modal:["w-1/3"]},children:()=>{const s=Hn([["Editor"]]);return d.jsx(Ji,{callback:async()=>It.transaction().execute(async o=>o.deleteFrom("Blueprint").where("id","=",e.id).execute()),textContent:d.jsx(J,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:s})}})})]})]}),d.jsx(lo,{type:"source",position:Dt.Right,isConnectable:n,className:"w-4 h-4"})]})},Zie=({nodeId:t})=>{const{fitView:e}=vf();return Q.useEffect(()=>{t&&setTimeout(()=>{e({nodes:[{id:t}],duration:750,minZoom:1,maxZoom:1})},50)},[t]),null},Yie=({data:t,zoomTo:e})=>{const n=Hn([]),r=Zt({async mutationFn({blueprintId:i,dependencyId:s}){return It.transaction().execute(async o=>o.insertInto("Blueprint_Dependency").values({id:Tn(),blueprintId:i,dependencyId:s}).execute())},async onSuccess(){await n()}});return d.jsx("div",{className:"w-fit h-fit mx-auto border border-slate-300 rounded-md shadow-md m-8",children:d.jsx("div",{style:{width:"95vw",height:"85vh"},children:d.jsxs(PL,{nodes:t.nodes,edges:t.edges,onConnect:i=>{r.mutate({blueprintId:i.target,dependencyId:i.source})},fitView:!0,snapGrid:[16,16],elementsSelectable:!1,nodeTypes:Q.useMemo(()=>({blueprint(i){return d.jsx(Jie,{...i})}}),[]),edgeTypes:Q.useMemo(()=>({dependency({id:i,sourceX:s,sourceY:o,targetX:l,targetY:u,sourcePosition:f,targetPosition:p,style:h={},markerEnd:b}){const{setEdges:x}=vf(),[_,E,I]=jN({sourceX:s,sourceY:o,sourcePosition:f,targetX:l,targetY:u,targetPosition:p}),T=Hn([]),j=Zt({async mutationFn({id:O}){return It.transaction().execute(async A=>{await A.deleteFrom("Blueprint_Dependency").where("id","=",O).execute()})},async onSuccess(){x(O=>O.filter(A=>A.id!==i)),await T()}});return d.jsxs(d.Fragment,{children:[d.jsx(Em,{path:_,markerEnd:b,style:h}),d.jsx(Pne,{children:d.jsx("div",{className:Cn("nodrag nopan",["flex","items-center","justify-center","cursor-pointer","bg-red-200","text-red-500","border","border-red-300","hover:border-red-600","hover:bg-red-300","hover:text-red-700","rounded-full","w-4","h-4","z-20"]),style:{position:"absolute",pointerEvents:"all",transformOrigin:"center",transform:`translate(-50%, -50%) translate(${E}px,${I}px)`},children:d.jsx(rn,{icon:j.isPending?j7:pN,onClick:()=>{j.mutate({id:i})}})})})]})}}),[]),children:[d.jsx(Zie,{nodeId:e}),d.jsx(ML,{orientation:"horizontal",showInteractive:!1,showZoom:!1,children:d.jsx(hf,{target:d.jsx(ym,{className:"react-flow__controls-button",iconEnabled:Rn}),outside:!1,textTitle:d.jsx(J,{label:"Create blueprint (modal)"}),css:{modal:["w-1/3"]},children:({close:i})=>{const s=Hn([["Editor"]]),{locale:o}=sn({from:"/$locale"}),l=tf();return d.jsx(lb,{mutation:Zt({async mutationFn(u){return In.promise(It.transaction().execute(f=>f.insertInto("Blueprint").values({id:Tn(),...u}).returningAll().executeTakeFirstOrThrow()),xr("Create blueprint"))},async onSuccess(u){await s(),l({to:"/$locale/apps/derivean/root/editor",params:{locale:o},search:{zoomTo:u.id}}),i()}})})}})}),d.jsx(BL,{}),d.jsx(DL,{variant:ra.Dots,gap:12,size:1})]})})})},Xie=({graph:t,nodes:e,edges:n,size:r={width:344,height:36}})=>(t.setGraph({rankdir:"LR",nodesep:125,edgesep:65,ranksep:50}),e.forEach(i=>{t.setNode(i.id,{width:r.width,height:r.height})}),n.forEach(i=>{t.setEdge(i.source,i.target)}),GL.layout(t,{}),{nodes:e.map(i=>{const s=t.node(i.id);return{...i,targetPosition:"left",sourcePosition:"right",position:{x:s.x-r.width/2,y:s.y-r.height/2}}}),edges:n}),c1=$t("/$locale/apps/derivean/root/editor")({validateSearch:er(L.object({zoomTo:L.string().optional()})),async loader({context:{kysely:t}}){const e=(await t.selectFrom("Blueprint").select(["id","name","cycles","sort"]).execute()).map(r=>({id:r.id,position:{x:0,y:0},data:r,type:"blueprint"})),n=(await t.selectFrom("Blueprint_Dependency").select(["id","blueprintId","dependencyId"]).execute()).map(({id:r,blueprintId:i,dependencyId:s})=>({id:r,source:s,target:i,type:"dependency"}));return Xie({graph:new GL.graphlib.Graph().setDefaultEdgeLabel(()=>({})),nodes:[...e],edges:[...n]})},component(){const t=c1.useLoaderData(),{zoomTo:e}=c1.useSearch();return d.jsx(Yie,{data:t,zoomTo:e})}}),u1=async({tx:t,userId:e})=>{const n=await t.selectFrom("Default_Inventory as di").select(["di.amount","di.resourceId","di.limit"]).limit(5e3).execute();await t.deleteFrom("User_Inventory").where("userId","=",e).execute();for await(const{amount:r,resourceId:i,limit:s}of n)t.insertInto("User_Inventory").values({id:Tn(),userId:e,inventoryId:(await t.insertInto("Inventory").values({id:Tn(),amount:r,resourceId:i,limit:s,type:"construction"}).returning("id").executeTakeFirstOrThrow()).id}).execute()},ese=async({tx:t,userId:e})=>{await u1({tx:t,userId:e})},tse=()=>Zt({mutationKey:["useRegisterMutation"],async mutationFn({login:t,name:e,password1:n}){return It.transaction().execute(async r=>{const i=vm.parse(await r.insertInto("User").values({id:Tn(),name:e,login:t,password:kF.hash(n)}).returning(["User.id","User.name","User.login"]).executeTakeFirstOrThrow());try{await ese({tx:r,userId:i.id})}catch(s){console.error(s)}return i})}}),nse=L.object({name:L.string().min(1),login:L.string().min(1),password1:L.string().min(1),password2:L.string().min(1)}).refine(t=>t.password1===t.password2,{message:"Passwords must match",path:["password1"]}),rse=({onSuccess:t})=>{const e=tse(),n=Ti({resolver:ji(nse)}),r=Ci({isLoading:n.formState.isLoading,isSubmitting:n.formState.isSubmitting}).slots;return d.jsxs("form",{className:r.base(),onSubmit:n.handleSubmit(async i=>e.mutateAsync(i,{onSuccess:t,onError:s=>{Z1({error:s,errors:[j1({error:s,schema:J1,onError:({data:o})=>{n.setError("root",{message:o.message})}})],onError:o=>{n.setError("root",{message:o.message})}})}}).catch(()=>{})),children:[d.jsx(mi,{variant:{highlight:!0},error:n.formState.errors.root}),d.jsx(En,{formState:n.formState,name:"name",label:d.jsx(J,{label:"Name (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("name")})}),d.jsx(En,{formState:n.formState,name:"login",label:d.jsx(J,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:r.input(),...n.register("login")})}),d.jsx(En,{formState:n.formState,name:"password1",label:d.jsx(J,{label:"Password 1 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password1")})}),d.jsx(En,{formState:n.formState,name:"password2",label:d.jsx(J,{label:"Password 2 (label)"}),children:d.jsx("input",{type:"password",className:r.input(),...n.register("password2")})}),d.jsx(jn,{iconEnabled:"icon-[mdi--register-outline]",iconDisabled:"icon-[mdi--register-outline]",type:"submit",children:d.jsx(J,{label:"Register (submit)"})})]})},ise=$t("/$locale/apps/derivean/public/register")({component:()=>{const t=tf();return d.jsx("div",{className:Cn(["flex","justify-center","h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(rse,{onSuccess:async e=>{mf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),sse=$t("/$locale/apps/derivean/public/logout")({pendingComponent(){return d.jsx("div",{className:Cn(["flex items-center justify-center h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:d.jsx(JD,{icon:yN,textTitle:d.jsx(J,{label:"Logout (label)"}),textMessage:d.jsx(J,{label:"Logout in progress..."}),css:{base:["p-4","bg-slate-200","rounded"]}})})},async loader({params:{locale:t}}){throw mf.remove("session"),Jh({to:"/$locale/apps/derivean/public/login",params:{locale:t}})}}),ose=()=>Zt({mutationKey:["useLoginMutation"],async mutationFn({login:t,password:e}){return It.transaction().execute(async n=>{const r=await n.selectFrom("User as u").select(["u.id","u.login","u.name"]).where("u.login","=",t).where("u.password","=",kF.hash(e)).executeTakeFirstOrThrow();return{id:r.id,login:r.login,name:r.name}})}}),ase=L.object({login:L.string().min(1),password:L.string().min(1)}),lse=({onSuccess:t})=>{const{locale:e}=sn({from:"/$locale"}),n=ose(),r=Ti({resolver:ji(ase)}),i=Ci({isLoading:r.formState.isLoading,isSubmitting:r.formState.isSubmitting}).slots;return d.jsxs("form",{className:i.base(),onSubmit:r.handleSubmit(async s=>n.mutateAsync(s,{onSuccess:t,onError:o=>{Z1({error:o,errors:[j1({error:o,schema:J1,onError:({data:l})=>{r.setError("root",{message:l.message})}})],onError:l=>{r.setError("root",{message:l.message})}})}}).catch(()=>{})),children:[d.jsx(mi,{variant:{highlight:!0},error:r.formState.errors.root}),d.jsx(En,{formState:r.formState,name:"login",label:d.jsx(J,{label:"Login (label)"}),children:d.jsx("input",{type:"text",className:i.input(),...r.register("login")})}),d.jsx(En,{formState:r.formState,name:"password",label:d.jsx(J,{label:"Password (label)"}),children:d.jsx("input",{type:"password",className:i.input(),...r.register("password")})}),d.jsxs("div",{className:"flex flex-row justify-between gap-8",children:[d.jsx(Mt,{icon:"icon-[mdi--register-outline]",to:"/$locale/apps/derivean/public/register",params:{locale:e},children:d.jsx(J,{label:"Register (link)"})}),d.jsx(jn,{iconEnabled:"icon-[uiw--login]",iconDisabled:"icon-[uiw--login]",type:"submit",children:d.jsx(J,{label:"Login (submit)"})})]})]})},cse=$t("/$locale/apps/derivean/public/login")({component:()=>{const t=tf();return d.jsx("div",{className:Cn(["flex","justify-center","h-screen","bg-gradient-to-tr","from-blue-700","to-blue-400"]),children:d.jsxs("div",{className:"flex flex-col bg-slate-100 p-20 w-1/2 m-10 drop-shadow-xl",children:[d.jsx("hr",{className:"my-12 h-0.5 border-t-0 bg-slate-300"}),d.jsx(lse,{onSuccess:async e=>{mf.set("session",e),await t({to:"/$locale/apps/derivean/game"})}})]})})}}),d3=({inventory:t})=>d.jsxs("div",{className:Cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.amount>=t.limit?["border-red-400","hover:border-red-600","hover:bg-red-50"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx("div",{className:"font-bold",children:t.name}),hn({number:t.amount})," /"," ",hn({number:t.limit})]}),t.limit>0?d.jsx(Ha,{variant:{size:"md"},value:100*t.amount/t.limit,css:{progress:t.amount>=t.limit?["bg-red-500"]:void 0}}):null]}),use=vn({slot:{base:["flex","flex-col","gap-4","w-4/12","border-l-2","border-slate-200","shadow-sm","relative","max-h-screen"],title:["flex","flex-row","justify-between","items-center","px-4","py-4","shadow-md"],content:["flex","flex-col","gap-2","max-h-full","overflow-y-auto","px-4","mb-4"]},variant:{},defaults:{}}),Bo=({icon:t,textTitle:e,textSubTitle:n,variant:r,tva:i=use,css:s,children:o})=>{const{locale:l}=sn({from:"/$locale"}),u=i({...r,css:s}).slots;return d.jsxs("div",{className:u.base(),children:[d.jsxs("div",{className:u.title(),children:[d.jsxs("div",{className:"flex flex-col gap-2 font-bold",children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:t,css:{base:["text-slate-500"]}}),e]}),n?d.jsx("div",{className:"flex flex-row gap-2 items-center text-sm text-slate-500",children:n}):null]}),d.jsx(Mt,{icon:pN,to:"/$locale/apps/derivean/map",params:{locale:l}})]}),d.jsx("div",{className:u.content(),children:o})]})},fM=({inventory:t,fulltextProps:e,...n})=>d.jsxs(Bo,{icon:Ii,textTitle:d.jsx(J,{label:"Inventory (label)"}),...n,children:[d.jsx(TD,{...e}),d.jsx("div",{children:d.jsx(J,{label:"Inventory - inputs (label)",css:{base:["font-bold","text-slate-500"]}})}),t.input.length>0?t.input.map(r=>d.jsx(d3,{inventory:r},r.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"No inventory inputs. (label)"})}),d.jsx("div",{className:"border-b border-slate-300"}),d.jsx("div",{children:d.jsx(J,{label:"Inventory - outputs (label)",css:{base:["font-bold","text-slate-500"]}})}),t.output.length>0?t.output.map(r=>d.jsx(d3,{inventory:r},r.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"No inventory outputs. (label)"})})]}),zy=$t("/$locale/apps/derivean/map/inventory")({validateSearch:er(L.object({fulltext:L.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{fulltext:r}}){const i=await n();return{inventory:await t.ensureQueryData({queryKey:["User_Inventory",i.id,{fulltext:r}],async queryFn(){return e.transaction().execute(async s=>Yr({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",s.selectFrom("User_Inventory as ui").select("ui.inventoryId").where("ui.userId","=",i.id)).orderBy("r.name"),query({select:o,where:l}){let u=o;if(l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("r.name","like",f)]))}return u},output:L.object({id:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().nonnegative(),name:L.string().min(1)}),filter:{fulltext:r}}))}})}},component(){const{fulltext:t}=zy.useSearch(),e=zy.useNavigate(),{inventory:n}=zy.useLoaderData();return d.jsx(fM,{inventory:n,fulltextProps:{value:t,onFulltext(r){e({search:{fulltext:r}})}}})}}),dse=vn({slot:{base:["flex","flex-col","gap-2","rounded-md","bg-white","border","border-slate-300","p-2","hover:bg-slate-100","cursor-draggable"]},variant:{isDragging:{true:[]}},match:[{if:{isDragging:!0},then:{base:["cursor-grabbing","bg-slate-100"]}}],defaults:{isDragging:!1}}),fse=async({blueprintId:t,userId:e,x:n,y:r,plan:i,valid:s})=>It.transaction().execute(async o=>{const{count:l}=await o.selectFrom("Cycle as c").select(h=>h.fn.count("c.id").as("count")).executeTakeFirstOrThrow(),u=await o.selectFrom("Blueprint as b").select(["b.cycles"]).where("b.id","=",t).executeTakeFirstOrThrow(),f=await o.insertInto("Building").values({id:Tn(),userId:e,blueprintId:t,constructionId:(await o.insertInto("Construction").values({id:Tn(),userId:e,cycle:0,from:l,to:l+u.cycles,plan:i,valid:s}).returning("id").executeTakeFirstOrThrow()).id,x:n,y:r}).returningAll().executeTakeFirstOrThrow(),p=await o.selectFrom("Inventory as i").select(["i.amount","i.limit","i.resourceId","i.type"]).where("i.id","in",o.selectFrom("Blueprint_Inventory as bi").select("bi.inventoryId").where("bi.blueprintId","=",t)).execute();for await(const{amount:h,limit:b,resourceId:x,type:_}of p)await o.insertInto("Building_Inventory").values({id:Tn(),buildingId:f.id,inventoryId:(await o.insertInto("Inventory").values({id:Tn(),amount:h,limit:b,resourceId:x,type:_}).returning("id").executeTakeFirstOrThrow()).id}).execute();return f}),pM=({cycles:t})=>d.jsxs("div",{className:Cn(["flex","flex-row","items-center","gap-2"]),children:[d.jsx(rn,{css:{base:["text-slate-400"]},icon:Kh}),d.jsx("div",{className:"font-bold text-md",children:hn({number:t})})]}),pse=({userId:t,entity:e,variant:n,tva:r=dse,css:i})=>{const{locale:s}=sn({from:"/$locale"}),o=tf(),l=Hn([["GameMap"]]),u=Zt({async mutationFn({blueprintId:p}){const h=await fse({userId:t,blueprintId:p,x:0,y:0,plan:!0,valid:!1});o({to:"/$locale/apps/derivean/map/construction",params:{locale:s},search:{zoomToId:h.id}})},async onSuccess(){await l()},onError(p){console.error(p)}}),f=r({...n,css:i}).slots;return d.jsx("div",{className:f.base(),children:d.jsxs("div",{className:"flex flex-row gap-2 items-center justify-between",children:[d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsxs(Ps,{children:["x",e.count]}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/blueprint/$id/requirements",params:{locale:s,id:e.id},css:{base:["font-bold"]},children:e.name})]}),d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(pM,{cycles:e.cycles}),d.jsx(jn,{iconEnabled:Xd,iconDisabled:Xd,loading:u.isPending,onClick:()=>{u.mutate({blueprintId:e.id})}})]})]})})},hse=({userId:t,blueprints:e,...n})=>d.jsx(Bo,{icon:Xd,textTitle:d.jsx(J,{label:"Construction (label)"}),...n,children:e.length>0?e.map(r=>d.jsx(pse,{userId:t,entity:r},r.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"There are no available blueprints (label)"})})}),hM=$t("/$locale/apps/derivean/map/construction")({async loader({context:{queryClient:t,kysely:e,session:n}}){const r=await n();return{user:r,blueprints:await t.ensureQueryData({queryKey:["GameMap",r.id],async queryFn(){return e.transaction().execute(async i=>Yr({select:i.selectFrom(i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Building as bg").select(o=>o.fn.count("bg.id").as("count")).whereRef("bg.blueprintId","=","bl.id").where("bg.userId","=",r.id).as("count"),s=>s.case().when(s.not(s.exists(s.selectFrom("Blueprint_Dependency as bd").select(s.lit(1).as("one")).whereRef("bd.blueprintId","=","bl.id").where(o=>o.not(o.exists(o.selectFrom("Building as b").select(o.lit(1).as("one")).where("b.constructionId","is",null).where("b.userId","=",r.id).whereRef("b.blueprintId","=","bd.dependencyId"))))))).then(s.lit(!0)).else(s.lit(!1)).end().as("withAvailableBuildings")]).where("bl.id","not in",i.selectFrom("Blueprint_Conflict as bc").select("bc.conflictId").where("bc.blueprintId","in",i.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",r.id))).as("blueprint")).selectAll().where("withAvailableBuildings","=",!0).orderBy("blueprint.sort","asc"),output:L.object({id:L.string().min(1),name:L.string().min(1),count:L.number().int().nonnegative(),cycles:L.number().int().nonnegative(),sort:L.number().int().nonnegative(),withAvailableBuildings:oo()})}))}})}},component(){const{user:t,blueprints:e}=hM.useLoaderData();return d.jsx(hse,{userId:t.id,blueprints:e})}}),ay=Ir(),mse=[ay({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),ay({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:18}),ay({name:"limit",header(){return d.jsx(J,{label:"Inventory limit (label)"})},render({value:t}){return hn({number:t})},size:14}),ay({name:"storage",header(){return d.jsx(J,{label:"Storage (label)"})},render({data:t}){return d.jsx(Ha,{value:100*t.amount/t.limit})},size:24})],gse=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:mse}),...e}),QN=Hie({shape:L.object({resourceId:L.string().min(1),amount:Wi(),limit:Wi(),type:L.enum(["storage","construction","input","output"])}),filter:Ki.merge(L.object({resourceId:L.string().optional(),type:L.enum(["storage","construction","input","output"]).optional()}))}),Wy=$t("/$locale/apps/derivean/game/inventory")({validateSearch:er(Er(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{kysely:t,session:e},deps:{filter:n,cursor:r}}){const i=await e();return t.transaction().execute(s=>sr({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").selectAll("i").select("r.name").where("i.id","in",s.selectFrom("User_Inventory as ui").select("ui.inventoryId").where("ui.userId","=",i.id)).orderBy("r.name"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("i.id","=",l.id)),l?.idIn&&(u=u.where("i.id","in",l.idIn)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("i.id","like",`%${f}%`),p("r.id","like",`%${f}%`),p("r.name","like",`%${f}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",f),h("t.label","like",f),h("t.group","like",f)])))]))}return u},output:L.object({id:L.string().min(1),name:L.string().min(1),type:L.enum(["construction","input","output"]),resourceId:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().nonnegative()}),filter:n,cursor:r}))},component(){const{data:t,count:e}=Wy.useLoaderData(),{filter:n,cursor:r}=Wy.useSearch(),i=Wy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(gse,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of items"}),...wr(i)}})})}}),mM=$t("/$locale/apps/derivean/db/schema")({async loader({context:{kysely:t}}){return{tables:await t.introspection.getTables()}},component(){const{tables:t}=mM.useLoaderData(),e=({dataType:i,isNullable:s})=>{const o=i.toLowerCase();let l=`z.never({message: '${i}'})`;switch(o){case"integer":{l="z.number().int()";break}case"float4":{l="z.number()";break}case"datetime":{l="z.string()";break}case"boolean":{l="withBoolSchema()";break}}return o.startsWith("varchar")&&(l=`z.string()${s?"":".min(1)"}`),`
// ${i} / ${s?"nullable":"not nullable"}
${l}${s?".nullish()":""}
`},n=t.map(i=>{const s=i.name.replaceAll("_","");return`
export const with${s}Schema = <
    TShapeSchema extends ShapeSchema,
    TFilterSchema extends FilterSchema,
>({
    shape,
    filter,
}: {
    shape: TShapeSchema;
    filter: TFilterSchema;
}) => {
    return withSourceSchema({
        entity: IdentitySchema.merge(z.object({
                ${i.columns.filter(({name:o})=>o!=="id").map(o=>`
    "${o.name}": ${e(o)}
        `.trim()).join(`,
			`)},
        })),
        shape,
        filter,
        sort: [${i.columns.map(o=>`"${o.name}"`).join(", ")}],
    });
}

export type ${s}Entity = ReturnType<typeof with${s}Schema>['~entity'];
            `.trim()}),r=t.map(i=>{const s=i.name.replaceAll("_","");return`${i.name}: ${s}Entity;`});return d.jsxs("pre",{children:[`
import {
    IdentitySchema,
    withSourceSchema,
    type FilterSchema,
    type ShapeSchema,
    withBoolSchema,
} from "@use-pico/common";
import { z } from "zod";
            `.trim(),`

${n.join(`

`)}`,`

export interface Database {
    ${r.join(`
	`)}
}
                `]})}}),f3=Ir(),yse=[f3({name:"name",header(){return d.jsx(J,{label:"User name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:e})},size:14}),f3({name:"login",header(){return d.jsx(J,{label:"User login (label)"})},render({value:t}){return t},size:14})],vse=({table:t,...e})=>{const n=Hn([["GameMap"],["Management"],["User_Inventory"]]),r=Zt({async mutationFn({userId:o}){return It.transaction().execute(l=>u1({tx:l,userId:o}))},async onSuccess(){await n()}}),i=Zt({async mutationFn({userId:o}){return It.transaction().execute(async l=>{await u1({tx:l,userId:o}),await l.deleteFrom("Building").where("userId","=",o).execute(),await l.deleteFrom("Production").where("userId","=",o).execute(),await l.deleteFrom("Construction").where("userId","=",o).execute(),await l.deleteFrom("Cycle").where("userId","=",o).execute()})},async onSuccess(){await n()}}),s=Zt({async mutationFn({userId:o}){return It.transaction().execute(async l=>{await l.updateTable("Inventory").set({amount:1e3}).where("id","in",l.selectFrom("User_Inventory").select("inventoryId").where("userId","=",o)).execute()})},async onSuccess(){await n()}});return d.jsx(Nr,{table:kr({...t,columns:yse}),action:{row({data:o}){return d.jsxs(Qn,{children:[d.jsx(jy,{icon:Ii,onClick:()=>{r.mutateAsync({userId:o.id})},children:d.jsx(J,{label:"Apply default inventory (menu)"})}),d.jsx(jy,{icon:wN,onClick:()=>{s.mutateAsync({userId:o.id})},children:d.jsx(J,{label:"Cheat inventory (menu)"})}),d.jsx(jy,{icon:ei,onClick:()=>{i.mutateAsync({userId:o.id})},children:d.jsx(J,{label:"Reset game (menu)"})})]})}},...e})},bse=Gie({shape:L.object({name:L.string().min(1),login:L.string().min(1),password:L.string().min(1)}),filter:Ki.merge(L.object({login:L.string().optional(),password:L.string().optional()}))}),Uy=$t("/$locale/apps/derivean/root/user/list")({validateSearch:er(Er(bse)),loaderDeps({search:{filter:t,cursor:e}}){return{filter:t,cursor:e}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["User","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>sr({select:i.selectFrom("User as u").select(["u.id","u.name","u.login"]),output:L.object({id:L.string().min(1),name:L.string().min(1),login:L.string().min(1)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Uy.useLoaderData(),{filter:n,cursor:r,selection:i}=Uy.useSearch(),s=Uy.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(vse,{table:{data:t,filter:{value:n,set:_r(s)},selection:{type:"multi",value:i,set:Gi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of users (label)"}),...wr(s)}})})}}),xse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsxs(nc,{...e,children:[d.jsx(zn,{icon:vN,to:"/$locale/apps/derivean/root/user/$id/view",params:{locale:n,id:t.id},children:d.jsx(J,{label:"View detail (menu)"})}),d.jsx(zn,{icon:rc,to:"/$locale/apps/derivean/root/user/$id/building/list",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Building list (menu)"})}),d.jsx(zn,{icon:Ii,to:"/$locale/apps/derivean/root/user/$id/inventory",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Inventory (menu)"})})]})},wse=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(yf,{icon:vN,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Mt,{icon:Kb,to:"/$locale/apps/derivean/root/user/list",params:{locale:e},children:d.jsx(J,{label:"User list (label)"})})}),...t})},gM=$t("/$locale/apps/derivean/root/user/$id")({async loader({context:{kysely:t},params:{id:e}}){return t.transaction().execute(async n=>({entity:await Ka({select:n.selectFrom("User as u").select(["u.id","u.name"]).where("u.id","=",e),output:L.object({id:L.string().min(1),name:L.string().min(1)})})}))},component(){const{tva:t}=ir({from:"__root__"}),{entity:e}=gM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(wse,{entity:e}),d.jsx(xse,{entity:e}),d.jsx(fo,{})]})}}),km=Qie({shape:L.object({code:L.string().min(1),label:L.string().min(1),group:L.string().nullish(),sort:eh()}),filter:Ki.merge(L.object({code:L.string().optional(),group:L.string().optional()}))}),p3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(km.shape),defaultValues:{sort:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"code",label:d.jsx(J,{label:"Tag code (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("code")})}),d.jsx(En,{formState:s.formState,name:"label",label:d.jsx(J,{label:"Tag label (label)"}),required:!0,children:d.jsx("input",{type:"text",className:o.input(),...s.register("label")})}),d.jsx(En,{formState:s.formState,name:"group",label:d.jsx(J,{label:"Tag group (label)"}),children:d.jsx("input",{type:"text",className:o.input(),...s.register("group")})}),d.jsx(En,{formState:s.formState,name:"sort",label:d.jsx(J,{label:"Tag sort (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("sort")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Ah,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},FS=Ir(),_se=[FS({name:"label",header(){return d.jsx(J,{label:"Tag label (label)"})},render({value:t}){return t},size:14}),FS({name:"code",header(){return d.jsx(J,{label:"Tag code (label)"})},render({value:t}){return t},size:14}),FS({name:"group",header(){return d.jsx(J,{label:"Tag group (label)"})},render({value:t}){return t},filter:{path:"group",onFilter({data:t,filter:e}){e.shallow("group",t.group)}},size:24})],yM=({group:t,table:e,...n})=>{const r=Hn([["Tag"],["Resource"]]);return d.jsx(Nr,{table:kr({...e,columns:_se}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create tag (menu)"}),textTitle:d.jsx(J,{label:"Create tag (modal)"}),icon:Ah,children:d.jsx(p3,{defaultValues:{group:t},mutation:Zt({async mutationFn(i){return In.promise(It.transaction().execute(s=>s.insertInto("Tag").values({id:Tn(),...i}).returningAll().executeTakeFirstOrThrow()),xr("Create tag"))},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit tag (modal)"}),icon:Ah,children:d.jsx(p3,{defaultValues:{group:t,...i},mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(o=>o.updateTable("Tag").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Edit tag"))},async onSuccess(){await r()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete tag (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>{await It.transaction().execute(s=>s.deleteFrom("Tag").where("id","=",i.id).execute())},textContent:d.jsx(J,{label:"Tag delete (content)"}),textToast:"Tag delete",invalidator:r})})]})}},...n})},Vy=$t("/$locale/apps/derivean/root/tag/list")({validateSearch:er(Er(km)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Tag","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async i=>sr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]).orderBy("t.sort","desc"),output:L.object({id:L.string().min(1),code:L.string().min(1),label:L.string().min(1),group:L.string().nullish(),sort:L.number().int().nonnegative()}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Vy.useLoaderData(),{filter:n,cursor:r,selection:i}=Vy.useSearch(),s=Vy.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(yM,{table:{data:t,filter:{value:n,set:_r(s)},selection:{type:"multi",value:i,set:Gi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of items"}),...wr(s)}})})}}),Sse=({group:t,...e})=>d.jsx(JG,{icon:Ah,table:n=>d.jsx(yM,{group:t,...n}),render:({entities:n})=>d.jsx(ZD,{tags:n}),queryKey:"Tag",query:async({filter:n,cursor:r})=>It.transaction().execute(async i=>sr({select:i.selectFrom("Tag as t").select(["t.id","t.code","t.label","t.group","t.sort"]),output:km.entity,query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("t.id","=",o.id)),o?.idIn&&(l=l.where("t.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("t.code","like",u),f("t.group","like",u),f("t.label","like",u),f("t.id","like",u)]))}return l},filter:n,cursor:r})),...e}),vM=Kie({shape:L.object({name:L.string().min(1),transport:Wi(),tagIds:L.array(L.string()).optional()}),filter:Ki.merge(L.object({name:L.string().optional()}))}),h3=({group:t="resource",mutation:e,defaultValues:n,variant:r,tva:i=Ci,css:s})=>{const o=Ti({resolver:ji(vM.shape),defaultValues:{transport:1,...n}}),l=i({...r,isLoading:o.formState.isLoading,isSubmitting:o.formState.isSubmitting,css:s}).slots;return d.jsxs("form",{className:l.base(),onSubmit:bs({form:o,mutation:e}),children:[d.jsx(mi,{variant:{highlight:!0},error:o.formState.errors.root}),d.jsx(En,{formState:o.formState,name:"name",label:d.jsx(J,{label:"Resource name (label)"}),children:d.jsx("input",{type:"text",className:l.input(),...o.register("name")})}),d.jsx(En,{formState:o.formState,name:"transport",label:d.jsx(J,{label:"Resource transport (label)"}),hint:d.jsx(J,{label:"Amount of resources transported per cycle (hint)"}),required:!0,children:d.jsx("input",{type:"number",className:l.input(),min:.5,step:.5,...o.register("transport")})}),d.jsx(En,{formState:o.formState,name:"tagIds",label:d.jsx(J,{label:"Resource tags (label)"}),children:d.jsx(Ui,{control:o.control,name:"tagIds",render:({field:{ref:u,...f}})=>d.jsx(Sse,{group:t,textTitle:d.jsx(J,{label:"Select resource tags (title)"}),textSelect:d.jsx(J,{label:"Select resource tags (label)"}),allowEmpty:!0,...f})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Fn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},ed=Ir(),Ese=[ed({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:e})},size:18}),ed({name:"transport",header(){return d.jsx(J,{label:"Resource transport (label)"})},render({value:t}){return hn({number:t})},size:12}),ed({name:"countProduction",header(){return d.jsx(J,{label:"Resource production count (label)"})},render({value:t}){return d.jsx(Ps,{css:{base:t!==void 0&&t===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:hn({number:t})})},size:12}),ed({name:"countRequirement",header(){return d.jsx(J,{label:"Resource requirement count (label)"})},render({data:t,value:e}){return d.jsx(Ps,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:hn({number:e})})},size:12}),ed({name:"countProductionRequirement",header(){return d.jsx(J,{label:"Resource production requirement count (label)"})},render({data:t,value:e}){return d.jsx(Ps,{css:{base:t.countRequirement===0&&t.countProductionRequirement===0?["bg-red-100","text-red-500","border-red-600"]:[]},children:hn({number:e})})},size:18}),ed({name:"tags",header(){return d.jsx(J,{label:"Resource tags (label)"})},render({value:t}){return d.jsx(ZD,{tags:t})},size:32})],bM=({group:t,table:e,...n})=>{const r=Hn([["Resource"],["Resource_Tag"]]);return d.jsx(Nr,{table:kr({...e,columns:Ese}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create resource (menu)"}),textTitle:d.jsx(J,{label:"Create resource (modal)"}),icon:Fn,children:({close:i})=>d.jsx(h3,{group:t,mutation:Zt({async mutationFn({name:s,transport:o,tagIds:l=[]}){return It.transaction().execute(async u=>{const f=await u.insertInto("Resource").values({id:Tn(),name:s,transport:o}).returningAll().executeTakeFirstOrThrow();return l.length&&await u.insertInto("Resource_Tag").values(l.map(p=>({id:Tn(),resourceId:f.id,tagId:p}))).execute(),f})},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit resource (modal)"}),icon:Fn,children:({close:s})=>d.jsx(h3,{defaultValues:{...i,tagIds:i.tags.map(({id:o})=>o)},mutation:Zt({async mutationFn({tagIds:o,...l}){return In.promise(It.transaction().execute(async u=>{const f=await u.updateTable("Resource").set(l).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await u.deleteFrom("Resource_Tag").where("resourceId","=",f.id).execute(),o?.length&&await u.insertInto("Resource_Tag").values(o.map(p=>({id:Tn(),resourceId:f.id,tagId:p}))).execute(),f}),xr("Update resource"))},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete resource (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Resource").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Resource delete (content)"}),textToast:"Resource delete",invalidator:r})})]})}},...n})},Hy=$t("/$locale/apps/derivean/root/resource/list")({validateSearch:er(Er(vM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Resource","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>sr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>Pr`json_group_array(json_object(
                                            'id', ${o.ref("t.id")},
                                            'code', ${o.ref("t.code")},
                                            'group', ${o.ref("t.group")},
                                            'sort', ${o.ref("t.sort")},
                                            'label', ${o.ref("t.label")}
                                        ))`.as("tags")).where("t.id","in",s.selectFrom("Resource_Tag as rt").select("rt.tagId").whereRef("rt.resourceId","=","r.id")).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:L.object({id:L.string().min(1),name:L.string().min(1),transport:Wi(),countRequirement:L.number().nonnegative(),countProduction:L.number().nonnegative(),countProductionRequirement:L.number().nonnegative(),tags:ms(km.entity)}),filter:n,cursor:r}))}})},component:()=>{const{data:t,count:e}=Hy.useLoaderData(),{filter:n,cursor:r,selection:i}=Hy.useSearch(),s=Hy.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(bM,{table:{data:t,filter:{value:n,set:_r(s)},selection:{type:"multi",value:i,set:Gi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of items"}),...wr(s)}})})}}),Nse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsx(nc,{...e,children:d.jsx(zn,{icon:Fn,to:"/$locale/apps/derivean/root/resource/$id/view",params:{locale:n,id:t.id},children:d.jsx(J,{label:"View detail (menu)"})})})},kse=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(yf,{icon:Fn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Mt,{icon:Kb,to:"/$locale/apps/derivean/root/resource/list",params:{locale:e},children:d.jsx(J,{label:"Resource list (label)"})})}),...t})},xM=$t("/$locale/apps/derivean/root/resource/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Resource",n],async queryFn(){return e.transaction().execute(async r=>({entity:await Ka({select:r.selectFrom("Resource as r").select(["r.id","r.name"]).where("r.id","=",n),output:L.object({id:L.string().min(1),name:L.string().min(1)})})}))}})},component:()=>{const{tva:t}=ir({from:"__root__"}),{entity:e}=xM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(kse,{entity:e}),d.jsx(Nse,{entity:e}),d.jsx(fo,{})]})}}),bf=({group:t,...e})=>d.jsx(GD,{icon:Fn,textTitle:d.jsx(J,{label:"Select resource (title)"}),textSelect:d.jsx(J,{label:"Select resource (label)"}),table:n=>d.jsx(bM,{group:t,...n}),render:({entity:n})=>n.name,queryKey:"Resource",query:async({filter:n,cursor:r})=>It.transaction().execute(async i=>sr({select:i.selectFrom("Resource as r").select(["r.id","r.name","r.transport",s=>s.selectFrom("Tag as t").select(o=>Pr`json_group_array(json_object(
                                                'id', ${o.ref("t.id")},
                                                'code', ${o.ref("t.code")},
                                                'group', ${o.ref("t.group")},
                                                'sort', ${o.ref("t.sort")},
                                                'label', ${o.ref("t.label")}
                                            ))`.as("tags")).where("t.id","in",i.selectFrom("Resource_Tag as rt").select("rt.tagId").where("rt.resourceId","=",s.ref("r.id"))).as("tags"),s=>s.selectFrom("Blueprint_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countRequirement"),s=>s.selectFrom("Blueprint_Production").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProduction"),s=>s.selectFrom("Blueprint_Production_Requirement").select(o=>o.fn.count("id").as("count")).whereRef("resourceId","=","r.id").as("countProductionRequirement")]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("r.id","=",o.id)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.id","like",u),f("r.name","like",u),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:L.object({id:L.string().min(1),name:L.string().min(1),transport:Wi(),tags:ms(km.entity),countRequirement:L.number().nonnegative(),countProduction:L.number().nonnegative(),countProductionRequirement:L.number().nonnegative()}),filter:n,cursor:r})),...e}),wM=Vie({shape:L.object({resourceId:L.string().min(1),amount:Wi(),limit:Wi()}),filter:Ki}),m3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(wM.shape),defaultValues:{amount:0,limit:0,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"resourceId",label:d.jsx(J,{label:"Resource name (label)"}),children:d.jsx(Ui,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(bf,{textTitle:d.jsx(J,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(En,{formState:s.formState,name:"amount",label:d.jsx(J,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(En,{formState:s.formState,name:"limit",label:d.jsx(J,{label:"Limit (label)"}),hint:d.jsx(J,{label:"Inventory limit (hint)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Ii,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},DS=Ir(),Ise=[DS({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),DS({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:12}),DS({name:"limit",header(){return d.jsx(J,{label:"Inventory limit (label)"})},render({value:t,data:e}){return d.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[d.jsx("div",{children:hn({number:t})}),d.jsx(Ha,{value:100*e.amount/e.limit})]})},size:14})],Cse=({table:t,...e})=>{const n=Hn([["Default_Inventory"]]),r=Zt({async mutationFn(){return It.transaction().execute(async i=>{const s=await i.selectFrom("Resource as r").select(["r.id"]).where("r.id","not in",i.selectFrom("Default_Inventory").select("resourceId")).execute();return i.insertInto("Default_Inventory").values(s.map(({id:o})=>({id:Tn(),amount:0,limit:0,resourceId:o}))).execute()})},async onSuccess(){await n()}});return d.jsx(Nr,{table:kr({...t,columns:Ise}),action:{table(){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Create inventory item (menu)"}),textTitle:d.jsx(J,{label:"Create inventory item (modal)"}),icon:Ii,children:d.jsx(m3,{mutation:Zt({async mutationFn(i){return In.promise(It.transaction().execute(async s=>s.insertInto("Default_Inventory").values({id:Tn(),...i}).returningAll().executeTakeFirstOrThrow()),xr("Create inventory item"))},async onSuccess(){await n()}})})}),d.jsx(jy,{icon:Fn,onClick:()=>{r.mutate()},children:d.jsx(J,{label:"Fill missing resources (label)"})})]})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit inventory item (modal)"}),icon:Ii,children:d.jsx(m3,{defaultValues:i,mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>o.updateTable("Default_Inventory").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Update inventory item"))},async onSuccess(){await n()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Default_Inventory").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:n})})]})}},...e})},Ky=$t("/$locale/apps/derivean/root/default/inventory")({validateSearch:er(Er(wM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return t.ensureQueryData({queryKey:["Default_Inventory","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(i=>sr({select:i.selectFrom("Default_Inventory as di").innerJoin("Resource as r","r.id","di.resourceId").select(["di.id","r.name","di.amount","di.limit","di.resourceId"]).orderBy("r.name","asc"),query({select:s,where:o}){let l=s;if(o?.id&&(l=l.where("di.id","=",o.id)),o?.idIn&&(l=l.where("di.id","in",o.idIn)),o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("di.id","like",`%${u}%`),f("r.id","like",`%${u}%`),f("r.name","like",`%${u}%`),f("r.id","in",f.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(p=>p.or([p("t.code","like",u),p("t.label","like",u),p("t.group","like",u)])))]))}return l},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ky.useLoaderData(),{filter:n,cursor:r,selection:i}=Ky.useSearch(),s=Ky.useNavigate(),{tva:o}=ir({from:"__root__"}),l=o().slots;return d.jsx("div",{className:l.base(),children:d.jsx(Cse,{table:{data:t,filter:{value:n,set:_r(s)},selection:{type:"multi",value:i,set:Gi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of items"}),...wr(s)}})})}}),Tse=vn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2","bg-sky-100","border-sky-300","text-sky-500"]},variant:{missing:{true:[]}},match:[{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{missing:!1}}),_M=({dependencies:t,variant:e,tva:n=Tse,css:r,...i})=>{const s=n({...e,css:r}).slots;return d.jsx(Hd,{items:t,render:({entity:o})=>d.jsx("div",{className:s.item(),children:d.jsx("div",{children:o.name})}),...i})};var ly={},g3;function jse(){if(g3)return ly;g3=1;function t(r,i,s,o){var l=new Set;return function(u){if(!l.has(u)){var f=new Set,p=[],h=[];for(h.push({node:u,processed:!1});h.length>0;){var b=h[h.length-1],x=b.processed,_=b.node;if(x)h.pop(),p.pop(),f.delete(_),l.add(_),(!i||r.get(_).length===0)&&s.push(_);else{if(l.has(_)){h.pop();continue}else if(f.has(_)){if(o){h.pop();continue}throw p.push(_),new n(p)}f.add(_),p.push(_);for(var E=r.get(_),I=E.length-1;I>=0;I--)h.push({node:E[I],processed:!1});b.processed=!0}}}}}var e=ly.DepGraph=function(i){this.nodes=new Map,this.outgoingEdges=new Map,this.incomingEdges=new Map,this.circular=i&&!!i.circular};e.prototype={size:function(){return this.nodes.size},addNode:function(r,i){this.hasNode(r)||(arguments.length===2?this.nodes.set(r,i):this.nodes.set(r,r),this.outgoingEdges.set(r,[]),this.incomingEdges.set(r,[]))},removeNode:function(r){this.hasNode(r)&&(this.nodes.delete(r),this.outgoingEdges.delete(r),this.incomingEdges.delete(r),[this.incomingEdges,this.outgoingEdges].forEach(function(i){i.forEach(function(s){var o=s.indexOf(r);o>=0&&s.splice(o,1)})}))},hasNode:function(r){return this.nodes.has(r)},getNodeData:function(r){if(this.hasNode(r))return this.nodes.get(r);throw new Error("Node does not exist: "+r)},setNodeData:function(r,i){if(this.hasNode(r))this.nodes.set(r,i);else throw new Error("Node does not exist: "+r)},addDependency:function(r,i){if(!this.hasNode(r))throw new Error("Node does not exist: "+r);if(!this.hasNode(i))throw new Error("Node does not exist: "+i);return this.outgoingEdges.get(r).indexOf(i)===-1&&this.outgoingEdges.get(r).push(i),this.incomingEdges.get(i).indexOf(r)===-1&&this.incomingEdges.get(i).push(r),!0},removeDependency:function(r,i){var s;this.hasNode(r)&&(s=this.outgoingEdges.get(r).indexOf(i),s>=0&&this.outgoingEdges.get(r).splice(s,1)),this.hasNode(i)&&(s=this.incomingEdges.get(i).indexOf(r),s>=0&&this.incomingEdges.get(i).splice(s,1))},clone:function(){var r=this,i=new e;return r.nodes.forEach(function(s,o){i.nodes.set(o,s),i.outgoingEdges.set(o,r.outgoingEdges.get(o).slice(0)),i.incomingEdges.set(o,r.incomingEdges.get(o).slice(0))}),i.circular=r.circular,i},directDependenciesOf:function(r){if(this.hasNode(r))return this.outgoingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},directDependantsOf:function(r){if(this.hasNode(r))return this.incomingEdges.get(r).slice(0);throw new Error("Node does not exist: "+r)},dependenciesOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.outgoingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},dependantsOf:function(r,i){if(this.hasNode(r)){var s=[],o=t(this.incomingEdges,i,s,this.circular);o(r);var l=s.indexOf(r);return l>=0&&s.splice(l,1),s}else throw new Error("Node does not exist: "+r)},overallOrder:function(r){var i=this,s=[],o=Array.from(this.nodes.keys());if(o.length===0)return s;if(!this.circular){var l=t(this.outgoingEdges,!1,[],this.circular);o.forEach(function(f){l(f)})}var u=t(this.outgoingEdges,r,s,this.circular);return o.filter(function(f){return i.incomingEdges.get(f).length===0}).forEach(function(f){u(f)}),this.circular&&o.filter(function(f){return s.indexOf(f)===-1}).forEach(function(f){u(f)}),s},entryNodes:function(){var r=this;return Array.from(this.nodes.keys()).filter(function(i){return r.incomingEdges.get(i).length===0})}},e.prototype.directDependentsOf=e.prototype.directDependantsOf,e.prototype.dependentsOf=e.prototype.dependantsOf;var n=ly.DepGraphCycleError=function(r){var i="Dependency Cycle Found: "+r.join(" -> "),s=new Error(i);return s.cyclePath=r,Object.setPrototypeOf(s,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(s,n),s};return n.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(n,Error),ly}var SM=jse();const Im=async({tx:t})=>{const e=new SM.DepGraph({circular:!1});for await(const{id:n,name:r}of await t.selectFrom("Blueprint").select(["id","name"]).execute())e.addNode(n,r);for await(const{blueprintId:n,dependencyId:r}of await t.selectFrom("Blueprint_Dependency").select(["blueprintId","dependencyId"]).execute())e.addDependency(n,r);return e},Qh=async({tx:t})=>{const e=Im({tx:t}),n=await t.selectFrom("Blueprint as bl").select(["bl.id"]).execute();for await(const r of n){const i=(await e).dependenciesOf(r.id);await t.updateTable("Blueprint").set({sort:i.length}).where("id","=",r.id).execute()}},Ose=vn({slot:{item:["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]},variant:{passive:{true:[]},missing:{true:[]}},match:[{if:{passive:!0},then:{item:["bg-purple-100","border-purple-300","text-purple-500"]}},{if:{passive:!1},then:{item:["bg-sky-100","border-sky-300","text-sky-500"]}},{if:{missing:!0},then:{item:["bg-amber-100","border-amber-300"]}}],defaults:{passive:!1,missing:!1}}),ux=({requirements:t,diff:e,variant:n,tva:r=Ose,css:i,...s})=>{const o=r({...n,css:i}).slots;return d.jsx(Hd,{items:t,render:({entity:l})=>{const u=e?.find(p=>p.resourceId===l.resourceId),f=u?.amount?u.amount-l.amount:-l.amount;return d.jsxs("div",{className:o.item({css:!e||f>=0?[]:["text-red-700","bg-red-100","border-red-300"],passive:l.passive}),children:[d.jsx("div",{children:l.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",hn({number:l.amount})]}),e?f>=0?d.jsx(rn,{icon:"icon-[pajamas--check-sm]",css:{base:["text-emerald-600"]}}):d.jsxs("div",{className:"flex flex-row gao-2 items-center text-sm text-red-500",children:[d.jsx(rn,{icon:"icon-[charm--cross]",css:{base:["text-red-500"]}}),"(",hn({number:f}),")"]}):null]})},...s})},_p=Ir(),Rse=[_p({name:"name",header(){return d.jsx(J,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Mt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:n},search:{zoomTo:t.id}}),d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),_p({name:"dependencies",header(){return d.jsx(J,{label:"Blueprint dependencies (label)"})},render({value:t}){return t.length>0?d.jsxs("div",{className:"flex flex-col flex-wrap gap-2 w-full",children:[d.jsx(_M,{textTitle:d.jsx(J,{label:"Blueprint dependencies (title)"}),dependencies:t}),d.jsx("div",{className:"border-b border-slate-200"})]}):d.jsx(J,{label:"No dependencies (label)"})},size:32}),_p({name:"requirements",header(){return d.jsx(J,{label:"Required resources (label)"})},render({value:t}){return d.jsx(ux,{textTitle:d.jsx(J,{label:"Blueprint requirements (title)"}),textEmpty:d.jsx(J,{label:"No requirements (label)"}),requirements:t})},size:32}),_p({name:"cycles",header(){return d.jsx(J,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(rn,{icon:Kh}),hn({number:t})]})},size:8}),_p({name:"limit",header(){return d.jsx(J,{label:"Building limit (label)"})},render({value:t}){return hn({number:t})},size:8})],EM=({dependencies:t,table:e,...n})=>{const r=Hn([["Blueprint"],["Inventory"]]);return d.jsx(Nr,{table:kr({...e,columns:Rse,context:{dependencies:t}}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create blueprint (menu)"}),textTitle:d.jsx(J,{label:"Create blueprint (modal)"}),icon:Rn,children:({close:i})=>d.jsx(lb,{mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>{const l=o.insertInto("Blueprint").values({id:Tn(),...s}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),xr("Create blueprint"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit blueprint (modal)"}),icon:Rn,children:({close:s})=>d.jsx(lb,{defaultValues:i,mutation:Zt({async mutationFn(o){return In.promise(It.transaction().execute(async l=>{const u=l.updateTable("Blueprint").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow();return await Qh({tx:l}),u}),xr("Update blueprint"))},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete blueprint (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete blueprint (content)"}),textToast:"Delete blueprint",invalidator:r})})]})}},...n})},ic=Die({shape:L.object({dependencyId:L.string().min(1)}),filter:Ki.merge(L.object({blueprintId:L.string().optional(),dependencyId:L.string().optional()}))}),xf=Wie({shape:L.object({resourceId:L.string().min(1),amount:Wi(),passive:L.boolean()}),filter:Ki.merge(L.object({blueprintId:L.string().optional(),resourceId:L.string().optional()}))}),Qy=$t("/$locale/apps/derivean/root/blueprint/list")({validateSearch:er(Er(KN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r}}){return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles","bl.limit",o=>o.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("br.id")},
                                                'amount', ${l.ref("br.amount")},
                                                'passive', ${l.ref("br.passive")},
                                                'resourceId', ${l.ref("br.resourceId")},
                                                'blueprintId', ${l.ref("br.blueprintId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),o=>o.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(l=>Pr`json_group_array(json_object(
                                                        'id', ${l.ref("bd.id")},
                                                        'dependencyId', ${l.ref("bd.dependencyId")},
                                                        'blueprintId', ${l.ref("bd.blueprintId")},
                                                        'name', ${l.ref("bl2.name")}
                                                    ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bl.id","=",l.id)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bl.id","like",f),p("bl.name","like",f)]))}return u},output:L.object({id:L.string().min(1),name:L.string().min(1),cycles:L.number().nonnegative(),sort:L.number().nonnegative(),limit:L.number().nonnegative(),requirements:ms(xf.entity.merge(L.object({name:L.string().min(1)}))),dependencies:ms(ic.entity.merge(L.object({name:L.string().min(1)})))}),filter:n,cursor:r}))}}),dependencies:await e.transaction().execute(async s=>Im({tx:s}))}},component(){const{data:{data:t,count:e},dependencies:n}=Qy.useLoaderData(),{filter:r,cursor:i,selection:s}=Qy.useSearch(),o=Qy.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(EM,{dependencies:n,table:{data:t,filter:{value:r,set:_r(o)},selection:{type:"multi",value:s,set:Gi(o)}},fulltext:{value:r?.fulltext,set:Sr(o)},cursor:{count:e,cursor:i,textTotal:d.jsx(J,{label:"Number of blueprints"}),...wr(o)}})})}}),qse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsxs(nc,{...e,children:[d.jsx(zn,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(J,{label:"View detail (menu)"})}),d.jsx(zn,{icon:rc,to:"/$locale/apps/derivean/root/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Blueprint dependencies (menu)"})}),d.jsx(zn,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Required resources (menu)"})}),d.jsx(zn,{icon:co,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Resource production (menu)"})}),d.jsx(zn,{icon:Ii,to:"/$locale/apps/derivean/root/blueprint/$id/inventory",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Blueprint inventory (menu)"})}),d.jsx(zn,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Blueprint conflicts (menu)"})}),d.jsx(zn,{icon:jD,to:"/$locale/apps/derivean/root/blueprint/$id/edit",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Edit (menu)"})})]})},Ase=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(yf,{icon:Rn,title:n.name}),actions:({entity:n})=>d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:Kb,to:"/$locale/apps/derivean/root/blueprint/list",params:{locale:e},children:d.jsx(J,{label:"Blueprint list (label)"})}),d.jsx(Mt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/root/editor",params:{locale:e},search:{zoomTo:n.id},children:d.jsx(J,{label:"Editor (label)"})})]}),...t})},NM=$t("/$locale/apps/derivean/root/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>Ka({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.sort","bl.cycles",s=>s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(o=>Pr`json_group_array(json_object(
                                                  'id', ${o.ref("br.id")},
                                                  'amount', ${o.ref("br.amount")},
                                                  'passive', ${o.ref("br.passive")},
                                                  'resourceId', ${o.ref("br.resourceId")},
                                                  'blueprintId', ${o.ref("br.blueprintId")},
                                                  'name', ${o.ref("r.name")}
                                              ))`.as("requirements")).whereRef("br.blueprintId","=","bl.id").as("requirements"),s=>s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl2","bl2.id","bd.dependencyId").select(o=>Pr`json_group_array(json_object(
                                                          'id', ${o.ref("bd.id")},
                                                          'dependencyId', ${o.ref("bd.dependencyId")},
                                                          'blueprintId', ${o.ref("bd.blueprintId")},
                                                          'name', ${o.ref("bl2.name")}
                                                      ))`.as("requirements")).whereRef("bd.blueprintId","=","bl.id").orderBy("bl2.name","asc").as("dependencies")]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:L.object({id:L.string().min(1),name:L.string().min(1),cycles:L.number().nonnegative(),sort:L.number().nonnegative(),requirements:ms(xf.entity.merge(L.object({name:L.string().min(1)}))),dependencies:ms(ic.entity.merge(L.object({name:L.string().min(1)})))})}))}}),graph:await e.transaction().execute(async i=>Im({tx:i}))}},component(){const{tva:t}=ir({from:"__root__"}),{entity:e}=NM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Ase,{entity:e}),d.jsx(qse,{entity:e}),d.jsx(fo,{})]})}}),Pse=$t("/$locale/apps/derivean/map/route/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{route:await t.ensureQueryData({queryKey:["GameMap","route",n],async queryFn(){return e.transaction().execute(async r=>Ka({select:r.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Blueprint as blf","blf.id","bf.blueprintId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blf.name as fromName","blt.name as toName"]).where("r.id","=",n),output:L.object({id:L.string().min(1),fromId:L.string().min(1),toId:L.string().min(1),fromName:L.string().min(1),toName:L.string().min(1)})}))}})}}}),Fse=$t("/$locale/apps/derivean/map/building/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{building:await t.ensureQueryData({queryKey:["GameMap","building",n],async queryFn(){return e.transaction().execute(async r=>Ka({select:r.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.productionId","b.recurringProductionId"]).where("b.id","=",n),output:L.object({id:L.string().min(1),name:L.string().min(1),productionId:L.string().nullish(),recurringProductionId:L.string().nullish()})}))}})}}}),Dse=$t("/$locale/apps/derivean/map/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{blueprint:await t.ensureQueryData({queryKey:["GameMap","blueprint",n],async queryFn(){return e.transaction().execute(async r=>Ka({select:r.selectFrom("Blueprint as b").select(["b.id","b.name"]).where("b.id","=",n),output:L.object({id:L.string().min(1),name:L.string().min(1)})}))}})}}}),y3=Ir(),Lse=[y3({name:"name",header(){return d.jsx(J,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Mt,{icon:"icon-[ph--graph-light]",to:"/$locale/apps/derivean/game",params:{locale:n},search:{blueprintId:t.id}}),d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:e})]})},size:18}),y3({name:"cycles",header(){return d.jsx(J,{label:"Construction cycles (label)"})},render({value:t}){return d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx(rn,{icon:Kh}),hn({number:t})]})},size:8})],Mse=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:Lse}),...e}),Gy=$t("/$locale/apps/derivean/game/blueprint/list")({validateSearch:er(Er(KN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e,session:n},deps:{filter:r,cursor:i}}){const s=await n();return{data:await t.ensureQueryData({queryKey:["Blueprint","list-count",{filter:r,cursor:i}],async queryFn(){return e.transaction().execute(async l=>sr({select:l.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","in",l.selectFrom("Building as bg").select("bg.blueprintId").where("bg.userId","=",s.id)).orderBy("bl.sort","asc").orderBy("bl.name","asc"),query({select:u,where:f}){let p=u;if(f?.id&&(p=p.where("bl.id","=",f.id)),f?.fulltext){const h=`%${f.fulltext}%`.toLowerCase();p=p.where(b=>b.or([b("bl.id","like",h),b("bl.name","like",h)]))}return p},output:L.object({id:L.string().min(1),name:L.string().min(1),cycles:L.number().nonnegative()}),filter:r,cursor:i}))}})}},component(){const{data:{data:t,count:e}}=Gy.useLoaderData(),{filter:n,cursor:r}=Gy.useSearch(),i=Gy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Mse,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of blueprints"}),...wr(i)}})})}}),$se=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsxs(nc,{...e,children:[d.jsx(zn,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.id},children:d.jsx(J,{label:"View detail (menu)"})}),d.jsx(zn,{icon:rc,to:"/$locale/apps/derivean/game/blueprint/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Blueprint dependencies (menu)"})}),d.jsx(zn,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Required resources (menu)"})}),d.jsx(zn,{icon:co,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Resource production (menu)"})}),d.jsx(zn,{icon:"icon-[solar--bomb-minimalistic-outline]",to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Blueprint conflicts (menu)"})})]})},Bse=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(yf,{icon:Rn,title:n.name}),actions:()=>d.jsx(d.Fragment,{children:d.jsx(Mt,{icon:Kb,to:"/$locale/apps/derivean/game/blueprint/list",params:{locale:e},children:d.jsx(J,{label:"Blueprint list (label)"})})}),...t})},kM=$t("/$locale/apps/derivean/game/blueprint/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{entity:await t.ensureQueryData({queryKey:["Blueprint","fetch",n],async queryFn(){return e.transaction().execute(async i=>Ka({select:i.selectFrom("Blueprint as bl").select(["bl.id","bl.name","bl.cycles"]).where("bl.id","=",n).orderBy("bl.name","asc"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("bl.id","like",u),f("bl.name","like",u),f("bl.id","in",f.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select("br.blueprintId").where(p=>p.or([p("r.name","like",u)]))),f("bl.id","in",f.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.dependencyId").select("bd.blueprintId").where(p=>p.or([p("b.name","like",u)])))]))}return l},output:L.object({id:L.string().min(1),name:L.string().min(1),cycles:L.number().nonnegative()})}))}}),graph:await e.transaction().execute(async i=>Im({tx:i}))}},component(){const{tva:t}=ir({from:"__root__"}),{entity:e}=kM.useLoaderData(),n=t().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Bse,{entity:e}),d.jsx($se,{entity:e}),d.jsx(fo,{})]})}}),zse=$t("/$locale/apps/derivean/root/user/$id/view")({component:()=>"yep"}),IM=({label:t,...e})=>d.jsx(J,{label:`Inventory type - ${t}`,...e}),cb=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(QN.shape),defaultValues:{amount:0,limit:0,type:"storage",...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"resourceId",label:d.jsx(J,{label:"Resource name (label)"}),children:d.jsx(Ui,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(bf,{textTitle:d.jsx(J,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(En,{formState:s.formState,name:"type",label:d.jsx(J,{label:"Inventory type (label)"}),children:d.jsx(Ui,{control:s.control,name:"type",render:({field:{ref:l,...u}})=>d.jsx(ED,{items:[{id:"storage",value:so.text("Inventory type - storage")},{id:"construction",value:so.text("Inventory type - construction")},{id:"input",value:so.text("Inventory type - input")},{id:"output",value:so.text("Inventory type - output")}],render:({entity:f})=>f.value,...u})})}),d.jsx(En,{formState:s.formState,name:"amount",label:d.jsx(J,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(En,{formState:s.formState,name:"limit",label:d.jsx(J,{label:"Inventory limit (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("limit")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Ii,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},cy=Ir(),Wse=[cy({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),cy({name:"type",header(){return d.jsx(J,{label:"Inventory type (label)"})},render({value:t}){return d.jsx(IM,{label:t})},size:12}),cy({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:12}),cy({name:"limit",header(){return d.jsx(J,{label:"Inventory limit (label)"})},render({value:t,data:e}){return d.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[d.jsx("div",{children:hn({number:t})}),d.jsx(Ha,{value:100*e.amount/e.limit})]})},size:14})],Use=({onCreate:t,table:e,...n})=>{const r=Hn([["Inventory"],["User_Inventory"],["Building_Base_Production"]]);return d.jsx(Nr,{table:kr({...e,columns:Wse}),action:{table:t?()=>d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create inventory item (menu)"}),textTitle:d.jsx(J,{label:"Create inventory item (modal)"}),icon:Ii,children:d.jsx(cb,{mutation:Zt({async mutationFn(i){return In.promise(It.transaction().execute(async s=>{const o=await s.insertInto("Inventory").values({id:Tn(),...i}).returningAll().executeTakeFirstOrThrow();return await t?.({tx:s,entity:o}),o}),xr("Create inventory item"))},async onSuccess(){await r()}})})})}):void 0,row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit inventory item (modal)"}),icon:Ii,children:d.jsx(cb,{defaultValues:i,mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>o.updateTable("Inventory").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Update inventory item"))},async onSuccess(){await r()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Inventory").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},qp=$t("/$locale/apps/derivean/root/user/$id/inventory")({validateSearch:er(Er(QN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>sr({select:s.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","i.amount","i.limit","i.type"]).where("i.id","in",s.selectFrom("User_Inventory as ui").where("ui.userId","=",i).select("ui.inventoryId")).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("i.id","=",l.id)),l?.idIn&&(u=u.where("i.id","in",l.idIn)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("i.id","like",`%${f}%`),p("r.id","like",`%${f}%`),p("r.name","like",`%${f}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",f),h("t.label","like",f),h("t.group","like",f)])))]))}return u},output:L.object({id:L.string().min(1),resourceId:L.string().min(1),type:L.enum(["storage","construction","input","output"]),name:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=qp.useLoaderData(),{filter:n,cursor:r,selection:i}=qp.useSearch(),s=qp.useNavigate(),{id:o}=qp.useParams(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Use,{onCreate:async({tx:f,entity:p})=>f.insertInto("User_Inventory").values({id:Tn(),userId:o,inventoryId:p.id}).execute(),table:{data:t,filter:{value:n,set:_r(s)},selection:{type:"multi",value:i,set:Gi(s)}},fulltext:{value:n?.fulltext,set:Sr(s)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of items"}),...wr(s)}})})}}),Vse=$t("/$locale/apps/derivean/root/resource/$id/view")({component:()=>d.jsx("div",{children:'Hello "/$locale/apps/derivean/root/resource/$id/view/"!'})}),GN="icon-[carbon--document-requirements]",Hse=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsxs(nc,{...e,children:[d.jsx(zn,{icon:GN,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Production requirements (menu)"})}),d.jsx(zn,{icon:Fn,to:"/$locale/apps/derivean/root/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Production resource requirements (menu)"})}),d.jsx(zn,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Production resource dependencies (menu)"})})]})},Kse=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(yf,{icon:co,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(J,{label:"Building base detail (label)"})})}),...t})},CM=$t("/$locale/apps/derivean/root/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await Ka({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:L.object({id:L.string().min(1),resource:L.string().min(1),blueprint:L.string().min(1),blueprintId:L.string().min(1),amount:L.number().nonnegative(),cycles:L.number().int().nonnegative()})})}))}})},component(){const{entity:t}=CM.useLoaderData(),{tva:e}=ir({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Kse,{entity:t}),d.jsx(Hse,{entity:t}),d.jsx(fo,{})]})}}),Qse=({graph:t,blueprintId:e,mode:n="dependencies",reverse:r=!1})=>{try{const i=(s=>r?s.reverse():s)(n==="dependants"?t.dependantsOf(e):t.dependenciesOf(e));return d.jsxs("div",{className:Cn(["flex","flex-row","flex-wrap","gap-2","items-center"]),children:[i.length>0?d.jsx(rn,{css:{base:["text-emerald-500"]},icon:"icon-[charm--circle-tick]"}):d.jsx(rn,{css:{base:["text-amber-500"]},icon:"icon-[fe--question]"}),i.length>0?i.map(s=>d.jsx(Ps,{css:{base:["bg-emerald-200","text-emerald-700","border-emerald-500"]},children:t.getNodeData(s)},Tn())):d.jsx(J,{css:{base:["text-amber-500","font-bold"]},label:"No dependents (label)"})]})}catch(i){return i instanceof SM.DepGraphCycleError?d.jsxs("div",{className:Cn(["flex","flex-row","gap-2","items-center"]),children:[d.jsx(rn,{css:{base:["text-red-500"]},icon:"icon-[charm--circle-cross]"}),i.cyclePath.map(s=>d.jsx(Ps,{css:{base:["bg-red-200","text-red-700","border-red-500"]},children:t.getNodeData(s)},Tn()))]}):"kaboom"}},Gse=({dependencies:t,...e})=>d.jsx(SD,{items:[{id:"name",label:d.jsx(J,{label:"Building name (label)"}),render({entity:n}){return n.name}},{id:"cycles",label:d.jsx(J,{label:"Construction cycles (label)"}),render({entity:n}){return hn({number:n.cycles})}},{id:"requirements",label:d.jsx(J,{label:"Required resources (label)"}),render({entity:n}){return d.jsx(ux,{requirements:n.requirements,textEmpty:d.jsx(J,{label:"No requirements (label)"})})}},{id:"dependencies",label:d.jsx(J,{label:"Blueprint dependencies (label)"}),render({entity:n}){return d.jsx(_M,{dependencies:n.dependencies,textEmpty:d.jsx(J,{label:"No dependencies (label)"})})}},{id:"deps",label:d.jsx(J,{label:"Blueprint dependency graph (label)"}),render({entity:n}){return d.jsx(Qse,{graph:t,blueprintId:n.id})}}],...e}),TM=$t("/$locale/apps/derivean/root/blueprint/$id/view")({async loader({context:{kysely:t}}){return{dependencies:await t.transaction().execute(async e=>Im({tx:e}))}},component(){const{dependencies:t}=TM.useLoaderData(),{entity:e}=Vi({from:"/$locale/apps/derivean/root/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(Gse,{dependencies:t,entity:e})})}}),v3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(xf.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"resourceId",label:d.jsx(J,{label:"Requirement (label)"}),children:d.jsx(Ui,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(bf,{allowEmpty:!0,...u})})}),d.jsx(En,{formState:s.formState,name:"amount",label:d.jsx(J,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(En,{formState:s.formState,name:"passive",label:d.jsx(J,{label:"Passive requirement (label)"}),hint:d.jsx(J,{label:"Passive requirement (hint)"}),children:d.jsx(Ui,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(_D,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Fn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},LS=Ir(),Jse=[LS({name:"name",header(){return d.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),LS({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:10}),LS({name:"passive",header(){return d.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Hb,{value:t})},size:10})],Zse=({blueprintId:t,table:e,...n})=>{const r=Hn([["Blueprint"],["Blueprint_Requirement"],["Blueprint_Resource_Requirement"],["Resource"]]);return d.jsx(Nr,{table:kr({...e,columns:Jse}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create requirement item (menu)"}),textTitle:d.jsx(J,{label:"Create requirement item (modal)"}),icon:Fn,children:d.jsx(v3,{mutation:Zt({async mutationFn(i){return It.transaction().execute(async s=>s.insertInto("Blueprint_Requirement").values({id:Tn(),...i,blueprintId:t}).execute())},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit requirement item (modal)"}),icon:Fn,children:d.jsx(v3,{defaultValues:i,mutation:Zt({async mutationFn(s){return It.transaction().execute(async o=>o.updateTable("Blueprint_Requirement").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete requirement item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete requirement item (content)"}),textToast:"Delete requirement item",invalidator:r})})]})}},...n})},Ap=$t("/$locale/apps/derivean/root/blueprint/$id/requirements")({validateSearch:er(Er(xf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),passive:oo()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Ap.useLoaderData(),{filter:n,cursor:r,selection:i}=Ap.useSearch(),{id:s}=Ap.useParams(),o=Ap.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Zse,{blueprintId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of requirements (label)"}),...wr(o)}})})}}),JN=Mie({shape:L.object({resourceId:L.string().min(1),amount:Wi(),cycles:eh()}),filter:Ki.merge(L.object({blueprintId:L.string().optional(),resourceId:L.string().optional()}))}),b3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(JN.shape),defaultValues:{amount:1,cycles:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"resourceId",label:d.jsx(J,{label:"Resource name (label)"}),children:d.jsx(Ui,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(bf,{textTitle:d.jsx(J,{label:"Select resource (title)"}),allowEmpty:!0,...u})})}),d.jsx(En,{formState:s.formState,name:"amount",label:d.jsx(J,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(En,{formState:s.formState,name:"cycles",label:d.jsx(J,{label:"Production cycles (label)"}),hint:d.jsx(J,{label:"Production cycles (hint)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("cycles")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:co,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},Cm=t=>d.jsx(GD,{icon:Rn,textTitle:d.jsx(J,{label:"Select blueprint (title)"}),table:({table:e,...n})=>d.jsx(EM,{table:{...e,hidden:["requirements","dependencies"]},...n}),render:({entity:e})=>e.name,queryKey:"Blueprint",query:async({filter:e,cursor:n})=>It.transaction().execute(async r=>sr({select:r.selectFrom("Blueprint as b").select(["b.id","b.name","b.sort","b.cycles","b.limit",i=>i.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(s=>Pr`json_group_array(json_object(
                                                    'id', ${s.ref("br.id")},
                                                    'amount', ${s.ref("br.amount")},
                                                    'passive', ${s.ref("br.passive")},
                                                    'resourceId', ${s.ref("br.resourceId")},
                                                    'blueprintId', ${s.ref("br.blueprintId")},
                                                    'name', ${s.ref("r.name")}
                                                ))`.as("requirements")).whereRef("br.blueprintId","=","b.id").as("requirements"),i=>i.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as b","b.id","bd.blueprintId").select(s=>Pr`json_group_array(json_object(
                                                    'id', ${s.ref("bd.id")},
                                                    'dependencyId', ${s.ref("bd.dependencyId")},
                                                    'blueprintId', ${s.ref("bd.blueprintId")},
                                                    'name', ${s.ref("b.name")}
                                                ))`.as("requirements")).whereRef("bd.blueprintId","=","b.id").as("dependencies")]).orderBy("b.name","asc"),query({select:i,where:s}){let o=i;if(s?.id&&(o=o.where("b.id","=",s.id)),s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("b.id","like",l),u("b.name","like",l)]))}return o},output:L.object({id:L.string().min(1),name:L.string().min(1),cycles:L.number().nonnegative(),sort:L.number().nonnegative(),limit:L.number().nonnegative(),requirements:ms(xf.entity.merge(L.object({name:L.string().min(1)}))),dependencies:ms(ic.entity.merge(L.object({name:L.string().min(1)})))}),filter:e,cursor:n})),...t}),Yse=L.object({blueprintId:L.string().min(1)}),Xse=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(Yse),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"blueprintId",label:d.jsx(J,{label:"Target blueprint (label)"}),children:d.jsx(Ui,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Rn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},td=Ir(),eoe=[td({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:co,to:"/$locale/apps/derivean/root/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),td({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:8}),td({name:"cycles",header(){return d.jsx(J,{label:"Production cycles (label)"})},render({value:t}){return hn({number:t})},size:8}),td({name:"requirements",header(){return d.jsx(J,{label:"Required resources (label)"})},render({value:t}){return d.jsx(ux,{textTitle:d.jsx(J,{label:"Resource requirements (title)"}),textEmpty:d.jsx(J,{label:"No requirements (label)"}),requirements:t})},size:32}),td({name:"resources",header(){return d.jsx(J,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(Hd,{items:t,render:({entity:e})=>d.jsxs("div",{className:Cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",hn({number:e.amount})]})]})})},size:32}),td({name:"dependencies",header(){return d.jsx(J,{label:"Required production dependencies (label)"})},render({value:t}){return d.jsx(Hd,{items:t,render:({entity:e})=>d.jsx("div",{className:Cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:d.jsx("div",{children:e.name})})})},size:32})],toe=({blueprintId:t,table:e,...n})=>{const r=Hn([["Blueprint"],["Blueprint_Production"],["Blueprint_Production_Requirement"],["Resource"]]);return d.jsx(Nr,{table:kr({...e,columns:eoe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create blueprint production (menu)"}),textTitle:d.jsx(J,{label:"Create blueprint production (modal)"}),icon:co,children:({close:i})=>d.jsx(b3,{mutation:Zt({async mutationFn(s){return It.transaction().execute(async o=>await o.insertInto("Blueprint_Production").values({id:Tn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit blueprint production (modal)"}),icon:co,children:d.jsx(b3,{defaultValues:i,mutation:Zt({async mutationFn(s){return It.transaction().execute(async o=>o.updateTable("Blueprint_Production").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r()}})})}),d.jsx(yn,{label:d.jsx(J,{label:"Move production to (menu)"}),textTitle:d.jsx(J,{label:"Move production to (modal)"}),icon:Fn,children:({close:s})=>d.jsx(Xse,{mutation:Zt({async mutationFn(o){return It.transaction().execute(async l=>{await l.updateTable("Blueprint_Production").set({blueprintId:o.blueprintId}).where("id","=",i.id).execute()})},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete blueprint production (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Production").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete blueprint production (content)"}),textToast:"Delete blueprint production",invalidator:r})})]})}},...n})},Tm=$ie({shape:L.object({blueprintId:L.string().min(1)}),filter:Ki}),jm=Bie({shape:L.object({resourceId:L.string().min(1),amount:Wi(),passive:L.boolean()}),filter:Ki.merge(L.object({blueprintProductionId:L.string().optional(),resourceId:L.string().optional()}))}),Om=zie({shape:L.object({resourceId:L.string().min(1),amount:Wi()}),filter:Ki.merge(L.object({resourceId:L.string().optional()}))}),Pp=$t("/$locale/apps/derivean/root/blueprint/$id/production")({validateSearch:er(Er(JN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),cycles:L.number().nonnegative(),requirements:ms(jm.entity.merge(L.object({name:L.string().min(1)}))),resources:ms(Om.entity.merge(L.object({name:L.string().min(1)}))),dependencies:ms(Tm.entity.merge(L.object({name:L.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Pp.useLoaderData(),{filter:n,cursor:r,selection:i}=Pp.useSearch(),{id:s}=Pp.useParams(),o=Pp.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(toe,{blueprintId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of productions (label)"}),...wr(o)}})})}}),uy=Ir(),noe=[uy({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceId",t.resourceId)}},size:18}),uy({name:"type",header(){return d.jsx(J,{label:"Inventory type (label)"})},render({value:t}){return d.jsx(IM,{label:t})},filter:{path:"type",onFilter({data:t,filter:e}){e.shallow("type",t.type)}},size:12}),uy({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:12}),uy({name:"limit",header(){return d.jsx(J,{label:"Inventory limit (label)"})},render({value:t,data:e}){return d.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[d.jsx("div",{children:hn({number:t})}),d.jsx(Ha,{value:100*e.amount/e.limit})]})},size:14})],roe=({blueprintId:t,table:e,...n})=>{const r=Hn([["Blueprint_Inventory"]]);return d.jsx(Nr,{table:kr({...e,columns:noe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create inventory item (menu)"}),textTitle:d.jsx(J,{label:"Create inventory item (modal)"}),icon:Ii,children:d.jsx(cb,{mutation:Zt({async mutationFn(i){return In.promise(It.transaction().execute(async s=>s.insertInto("Blueprint_Inventory").values({id:Tn(),blueprintId:t,inventoryId:(await s.insertInto("Inventory").values({id:Tn(),...i}).returningAll().executeTakeFirstOrThrow()).id}).returningAll().executeTakeFirstOrThrow()),xr("Create inventory item"))},async onSuccess(){await r()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit inventory item (modal)"}),icon:Ii,children:d.jsx(cb,{defaultValues:i,mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>o.updateTable("Inventory").set(s).where("id","=",i.inventoryId).returningAll().executeTakeFirstOrThrow()),xr("Update inventory item"))},async onSuccess(){await r()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete inventory item (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Inventory").where("id","=",i.inventoryId).execute()),textContent:d.jsx(J,{label:"Inventory item delete (content)"}),textToast:"Inventory item delete",invalidator:r})})]})}},...n})},ioe=Lie({shape:L.object({blueprintId:L.string().min(1),inventoryId:L.string().min(1)}),filter:Ki.merge(L.object({blueprintId:L.string().optional(),inventoryId:L.string().optional()}))}),Fp=$t("/$locale/apps/derivean/root/blueprint/$id/inventory")({validateSearch:er(Er(ioe)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Inventory","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>sr({select:s.selectFrom("Blueprint_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").innerJoin("Resource as r","r.id","i.resourceId").select(["bi.id","r.name","i.amount","i.limit","i.type","i.resourceId","bi.blueprintId","bi.inventoryId"]).where("bi.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;if(l?.id&&(u=u.where("bi.id","=",l.id)),l?.idIn&&(u=u.where("bi.id","in",l.idIn)),l?.fulltext){const f=`%${l.fulltext}%`.toLowerCase();u=u.where(p=>p.or([p("bi.id","like",`%${f}%`),p("r.id","like",`%${f}%`),p("r.name","like",`%${f}%`),p("r.id","in",p.selectFrom("Resource_Tag as rt").innerJoin("Tag as t","t.id","rt.tagId").select("rt.resourceId").where(h=>h.or([h("t.code","like",f),h("t.label","like",f),h("t.group","like",f)])))]))}return u},output:L.object({id:L.string().min(1),name:L.string().min(1),type:L.enum(["storage","construction","input","output"]),resourceId:L.string().min(1),blueprintId:L.string().min(1),inventoryId:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().int().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Fp.useLoaderData(),{filter:n,cursor:r,selection:i}=Fp.useSearch(),{id:s}=Fp.useParams(),o=Fp.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(roe,{blueprintId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of items"}),...wr(o)}})})}}),jM=$t("/$locale/apps/derivean/root/blueprint/$id/edit")({component:()=>{const{entity:t}=Vi({from:"/$locale/apps/derivean/root/blueprint/$id"}),e=jM.useNavigate(),n=Hn([["Blueprint"]]);return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(lb,{defaultValues:t,mutation:Zt({async mutationFn(r){return In.promise(It.transaction().execute(async i=>i.updateTable("Blueprint").set(r).where("id","=",t.id).returningAll().executeTakeFirstOrThrow()),xr("Update blueprint"))},async onSuccess(){await n(),e({to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{id:t.id}})}})})})}}),x3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(ic.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"dependencyId",label:d.jsx(J,{label:"Blueprint dependency (label)"}),children:d.jsx(Ui,{control:s.control,name:"dependencyId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{textTitle:d.jsx(J,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Rn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},soe=Ir(),ooe=[soe({name:"name",header(){return d.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],aoe=({blueprintId:t,table:e,...n})=>{const r=Hn([["Blueprint_Dependency"],["Blueprint"]]);return d.jsx(Nr,{table:kr({...e,columns:ooe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create blueprint dependency (menu)"}),textTitle:d.jsx(J,{label:"Create blueprint dependency (modal)"}),icon:Rn,children:({close:i})=>d.jsx(x3,{mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Dependency").values({id:Tn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),xr("Create blueprint dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit blueprint dependency (modal)"}),icon:Rn,children:({close:s})=>d.jsx(x3,{defaultValues:i,mutation:Zt({async mutationFn(o){return In.promise(It.transaction().execute(async l=>l.updateTable("Blueprint_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Update blueprint dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete blueprint dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete blueprint dependency (content)"}),textToast:"Delete blueprint dependency",invalidator:r})})]})}},...n})},Dp=$t("/$locale/apps/derivean/root/blueprint/$id/dependencies")({validateSearch:er(Er(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1),dependencyId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Dp.useLoaderData(),{filter:n,cursor:r,selection:i}=Dp.useSearch(),{id:s}=Dp.useParams(),o=Dp.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(aoe,{blueprintId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of requirements (label)"}),...wr(o)}})})}}),loe=Fie({shape:L.object({conflictId:L.string().min(1)}),filter:Ki}),w3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(loe.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"conflictId",label:d.jsx(J,{label:"Blueprint conflict (label)"}),hint:d.jsx(J,{label:"Blueprint conflict (hint)"}),children:d.jsx(Ui,{control:s.control,name:"conflictId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{textTitle:d.jsx(J,{label:"Select blueprint conflict (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Rn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},coe=Ir(),uoe=[coe({name:"name",header(){return d.jsx(J,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],doe=({blueprintId:t,table:e,...n})=>{const r=Hn([["Blueprint_Conflict"],["Blueprint"]]);return d.jsx(Nr,{table:kr({...e,columns:uoe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create blueprint conflict (menu)"}),textTitle:d.jsx(J,{label:"Create blueprint conflict (modal)"}),icon:Rn,children:({close:i})=>d.jsx(w3,{mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Conflict").values({id:Tn(),...s,blueprintId:t}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),xr("Create blueprint conflict"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit blueprint conflict (modal)"}),icon:Rn,children:({close:s})=>d.jsx(w3,{defaultValues:i,mutation:Zt({async mutationFn(o){return In.promise(It.transaction().execute(async l=>l.updateTable("Blueprint_Conflict").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Update blueprint conflict"))},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete blueprint conflict (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Conflict").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete blueprint conflict (content)"}),textToast:"Delete blueprint conflict",invalidator:r})})]})}},...n})},Lp=$t("/$locale/apps/derivean/root/blueprint/$id/conflicts")({validateSearch:er(Er(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1),conflictId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Lp.useLoaderData(),{filter:n,cursor:r,selection:i}=Lp.useSearch(),{id:s}=Lp.useParams(),o=Lp.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(doe,{blueprintId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of conflicts (label)"}),...wr(o)}})})}}),foe=({routeId:t,inventory:e})=>{const n=Hn([["GameMap"]]),r=Zt({async mutationFn({routeId:i,resourceId:s,transport:o}){return It.transaction().execute(async l=>l.insertInto("Route_Resource").values({id:Tn(),resourceId:s,routeId:i,amount:o}).execute())},async onSuccess(){await n()}});return d.jsxs("div",{className:Cn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:Fn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsx("div",{children:d.jsx(jn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,routeId:t})}})})]})},poe=({resource:t})=>{const e=Hn([["GameMap"]]),n=Zt({async mutationFn({routeResourceId:r}){return It.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:Cn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:Fn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs(Ps,{children:["x",hn({number:t.amount})]})]}),d.jsx("div",{children:d.jsx(jn,{variant:{variant:"secondary"},iconEnabled:ei,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},hoe=({route:t,resource:e,inventory:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return d.jsxs(Bo,{icon:Fn,textTitle:d.jsx(J,{label:"Route resources (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:i,id:t.fromId}}),d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:"font-light",children:t.fromName}),d.jsx(rn,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{children:t.toName})]})]}),...r,children:[d.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(J,{label:"Transported resources (label)"})}),e.map(s=>d.jsx(poe,{resource:s},s.id))]}):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"No route resources yet (label)"})})}),d.jsx("div",{className:"border-b border-slate-300 shadow-md"}),d.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(J,{label:"Available resources (label)"})}),n.map(s=>d.jsx(foe,{inventory:s,routeId:t.id},s.id))]}):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"There are no available items for transport (label)"})})})]})},OM=$t("/$locale/apps/derivean/map/route/$id/resources")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{resource:await t.ensureQueryData({queryKey:["GameMap","building","routes",n,"resources"],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId"]).where("rr.routeId","=",n),output:L.object({id:L.string().min(1),routeId:L.string().min(1),resourceId:L.string().min(1),name:L.string().min(1),amount:L.number().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","route","inventory",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n))).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",n)).where("i.type","in",["storage","output"])).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n)).where("i.type","in",["storage","input"])).where("r.id","not in",r.selectFrom("Route_Resource as rr").where("rr.routeId","=",n).select("rr.resourceId")),output:L.object({id:L.string().min(1),resourceId:L.string().min(1),name:L.string().min(1),transport:Wi()})}))}})}},component(){const{route:t}=Vi({from:"/$locale/apps/derivean/map/route/$id"}),{resource:e,inventory:n}=OM.useLoaderData();return d.jsx(hoe,{route:t,resource:e,inventory:n})}}),moe=({routeId:t,inventory:e})=>{const n=Hn([["GameMap"]]),r=Zt({async mutationFn({routeId:i,resourceId:s,transport:o}){return It.transaction().execute(async l=>l.insertInto("Route_Resource").values({id:Tn(),resourceId:s,routeId:i,amount:o}).execute())},async onSuccess(){await n()}});return d.jsxs("div",{className:Cn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:Fn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:e.name})]}),d.jsx("div",{children:d.jsx(jn,{variant:{variant:"secondary"},iconEnabled:"icon-[icons8--plus]",loading:r.isPending,onClick:()=>{r.mutate({resourceId:e.resourceId,transport:e.transport,routeId:t})}})})]})},goe=({resource:t})=>{const e=Hn([["GameMap"]]),n=Zt({async mutationFn({routeResourceId:r}){return It.transaction().execute(async i=>i.deleteFrom("Route_Resource").where("id","=",r).execute())},async onSuccess(){await e()}});return d.jsxs("div",{className:Cn(["flex","flex-row","justify-between","p-4","border","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(rn,{icon:Fn,css:{base:["text-slate-500"]}}),d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs(Ps,{children:["x",hn({number:t.amount})]})]}),d.jsx("div",{children:d.jsx(jn,{variant:{variant:"secondary"},iconEnabled:ei,loading:n.isPending,onClick:()=>{n.mutate({routeResourceId:t.id})}})})]})},yoe=({route:t,resource:e,inventory:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return d.jsxs(Bo,{icon:Xd,textTitle:d.jsx(J,{label:"Construction resources (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:i,id:t.fromId}}),d.jsxs("div",{className:"flex flex-row items-center gap-2",children:[d.jsx("div",{className:"font-light",children:t.fromName}),d.jsx(rn,{icon:"icon-[cil--arrow-right]"}),d.jsx("div",{children:t.toName})]})]}),...r,children:[d.jsx("div",{className:"flex flex-col gap-2",children:e.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(J,{label:"Transported resources (label)"})}),e.map(s=>d.jsx(goe,{resource:s},s.id))]}):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"No route resources yet (label)"})})}),d.jsx("div",{className:"border-b border-slate-300 shadow-md"}),d.jsx("div",{className:"flex flex-col gap-2",children:n.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"font-bold",children:d.jsx(J,{label:"Available resources (label)"})}),n.map(s=>d.jsx(moe,{inventory:s,routeId:t.id},s.id))]}):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"There are no available items for transport (label)"})})})]})},RM=$t("/$locale/apps/derivean/map/route/$id/construction")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{resource:await t.ensureQueryData({queryKey:["GameMap","building","routes",n,"construction"],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Route_Resource as rr").innerJoin("Resource as r","r.id","rr.resourceId").select(["rr.id","r.name","rr.amount","rr.routeId","rr.resourceId"]).where("rr.routeId","=",n),output:L.object({id:L.string().min(1),routeId:L.string().min(1),resourceId:L.string().min(1),name:L.string().min(1),amount:L.number().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","route","inventory",n,"construction"],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","r.name","r.transport"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n))).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.fromId").where("ro.id","=",n)).where("i.type","in",["storage","output"])).where("r.id","in",r.selectFrom("Building_Inventory as bi").innerJoin("Inventory as i","i.id","bi.inventoryId").select("i.resourceId").where("bi.buildingId","=",r.selectFrom("Route as ro").select("ro.toId").where("ro.id","=",n)).where("i.type","=","construction")).where("r.id","not in",r.selectFrom("Route_Resource as rr").where("rr.routeId","=",n).select("rr.resourceId")),output:L.object({id:L.string().min(1),resourceId:L.string().min(1),name:L.string().min(1),transport:Wi()})}))}})}},component(){const{route:t}=Vi({from:"/$locale/apps/derivean/map/route/$id"}),{resource:e,inventory:n}=RM.useLoaderData();return d.jsx(yoe,{route:t,resource:e,inventory:n})}}),d1="icon-[heroicons--queue-list]",dy=["p-4","border","border-slate-300","w-full","justify-start"],voe=({building:t})=>{const{locale:e}=sn({from:"/$locale"});return d.jsxs(Bo,{icon:rc,textTitle:t.name,children:[d.jsx(Mt,{icon:co,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:e,id:t.id},css:{base:dy},children:d.jsx(J,{label:"Building production (label)"})}),d.jsx(Mt,{icon:d1,to:"/$locale/apps/derivean/map/building/$id/production/queue",params:{locale:e,id:t.id},css:{base:dy},children:d.jsx(J,{label:"Production queue (label)"})}),d.jsx(Mt,{icon:Ii,to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:e,id:t.id},css:{base:dy},children:d.jsx(J,{label:"Building inventory (label)"})}),d.jsx(Mt,{icon:"icon-[gis--route-end]",to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:e,id:t.id},css:{base:dy},children:d.jsx(J,{label:"Building routes (label)"})})]})},boe=$t("/$locale/apps/derivean/map/building/$id/view")({component(){const{building:t}=Vi({from:"/$locale/apps/derivean/map/building/$id"});return d.jsx(voe,{building:t})}}),xoe=({route:t})=>{const{locale:e}=sn({from:"/$locale"}),n=Hn([["GameMap"]]),r=Zt({async mutationFn({routeId:i}){return It.transaction().execute(async s=>s.deleteFrom("Route").where("id","=",i).execute())},async onSuccess(){await n()}});return d.jsxs("div",{className:Cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.count>0?void 0:["border-amber-400","hover:border-amber-600","hover:bg-amber-100"]]),children:[t.toConstructionId?d.jsx(Mt,{icon:Xd,to:"/$locale/apps/derivean/map/route/$id/construction",params:{locale:e,id:t.id},children:t.toName}):d.jsx(Mt,{icon:Fn,to:"/$locale/apps/derivean/map/route/$id/resources",params:{locale:e,id:t.id},children:t.toName}),d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx(Mt,{icon:"icon-[cil--arrow-right]",to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:e,id:t.fromId},search:{zoomToId:t.toId},children:d.jsx(Ps,{children:hn({number:t.count})})}),d.jsx(jn,{iconEnabled:ei,variant:{variant:"secondary"},loading:r.isPending,onClick:()=>{r.mutate({routeId:t.id})}})]})]})},woe=({building:t,route:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return d.jsx(Bo,{icon:"icon-[gis--route-end]",textTitle:d.jsx(J,{label:"Routes (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/building/$id/routes",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>d.jsx(xoe,{route:i},i.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"No outcomming routes yet (label)"})})})},qM=$t("/$locale/apps/derivean/map/building/$id/routes")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{route:await t.ensureQueryData({queryKey:["GameMap","building","routes",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Route as r").innerJoin("Building as bf","bf.id","r.fromId").innerJoin("Building as bt","bt.id","r.toId").innerJoin("Blueprint as blt","blt.id","bt.blueprintId").select(["r.id","r.fromId","r.toId","blt.name as toName","bt.constructionId as toConstructionId",i=>i.selectFrom("Route_Resource as rr").select(s=>s.fn.count("rr.id").as("count")).whereRef("rr.routeId","=","r.id").as("count")]).where("r.fromId","=",n),output:L.object({id:L.string().min(1),fromId:L.string().min(1),toId:L.string().min(1),toName:L.string().min(1),toConstructionId:L.string().nullish(),count:L.number().nonnegative()})}))}})}},component(){const{building:t}=Vi({from:"/$locale/apps/derivean/map/building/$id"}),{route:e}=qM.useLoaderData();return d.jsx(woe,{building:t,route:e})}}),Mp=$t("/$locale/apps/derivean/map/building/$id/inventory")({validateSearch:er(L.object({fulltext:L.string().optional()})),loaderDeps({search:{fulltext:t}}){return{fulltext:t}},async loader({context:{queryClient:t,kysely:e},deps:{fulltext:n},params:{id:r}}){return{inventory:{input:await t.ensureQueryData({queryKey:["GameMap","building","inventory",r,{fulltext:n}],async queryFn(){return e.transaction().execute(async i=>Yr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).where(s=>s.or([s("i.type","=","input"),s("i.type","=","storage")])).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.name","like",u)]))}return l},output:L.object({id:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().nonnegative(),name:L.string().min(1)}),filter:{fulltext:n}}))}}),output:await t.ensureQueryData({queryKey:["GameMap","building","inventory",r,{fulltext:n}],async queryFn(){return e.transaction().execute(async i=>Yr({select:i.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.amount","i.limit","r.name"]).where("i.id","in",i.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",r)).where(s=>s.or([s("i.type","=","output"),s("i.type","=","storage")])).orderBy("r.name"),query({select:s,where:o}){let l=s;if(o?.fulltext){const u=`%${o.fulltext}%`.toLowerCase();l=l.where(f=>f.or([f("r.name","like",u)]))}return l},output:L.object({id:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().nonnegative(),name:L.string().min(1)}),filter:{fulltext:n}}))}})}}},component(){const{building:t}=Vi({from:"/$locale/apps/derivean/map/building/$id"}),{fulltext:e}=Mp.useSearch(),{locale:n}=Mp.useParams(),r=Mp.useNavigate(),{inventory:i}=Mp.useLoaderData();return d.jsx(fM,{inventory:i,textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:n,id:t.id}}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/building/$id/inventory",params:{locale:n,id:t.id},search:{zoomToId:t.id},children:t.name})]}),fulltextProps:{value:e,onFulltext(s){r({search:{fulltext:s}})}}})}}),AM=({requirement:t})=>d.jsxs("div",{className:Cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100",t.passive?["border-purple-300","hover:border-purple-500","hover:bg-purple-100"]:void 0]),children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs(Ps,{children:["x",hn({number:t.amount})]})]}),_oe=({blueprint:t,requirement:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return d.jsx(Bo,{icon:Fn,textTitle:d.jsx(J,{label:"Building requirements (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/construction",params:{locale:r},css:{base:["font-bold"]}}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/blueprint/$id/requirements",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>d.jsx(AM,{requirement:i},i.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(J,{label:"There are no requirements. (label)"})})})},PM=$t("/$locale/apps/derivean/map/blueprint/$id/requirements")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","requirements",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive"]).where("br.blueprintId","=",n),output:L.object({id:L.string().min(1),name:L.string().min(1),amount:L.number().nonnegative(),passive:oo()})}))}})}},component(){const{blueprint:t}=Vi({from:"/$locale/apps/derivean/map/blueprint/$id"}),{requirement:e}=PM.useLoaderData();return d.jsx(_oe,{blueprint:t,requirement:e})}}),Soe=({entity:t,...e})=>{const{locale:n}=sn({from:"/$locale"});return d.jsxs(nc,{...e,children:[d.jsx(zn,{icon:GN,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Production requirements (menu)"})}),d.jsx(zn,{icon:Fn,to:"/$locale/apps/derivean/game/blueprint/production/$id/resources",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Production resource requirements (menu)"})}),d.jsx(zn,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/production/$id/dependencies",params:{locale:n,id:t.id},children:d.jsx(J,{label:"Production resource dependencies (menu)"})})]})},Eoe=t=>{const{locale:e}=sn({from:"/$locale"});return d.jsx(gf,{title:({entity:n})=>d.jsx(yf,{icon:co,title:n.resource,subtitle:n.blueprint}),actions:({entity:n})=>d.jsx(d.Fragment,{children:d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/$id/production",params:{locale:e,id:n.blueprintId},children:d.jsx(J,{label:"Building base detail (label)"})})}),...t})},FM=$t("/$locale/apps/derivean/game/blueprint/production/$id")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return t.ensureQueryData({queryKey:["Blueprint_Production",n],async queryFn(){return e.transaction().execute(async r=>({entity:await Ka({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").select(["bp.id","bp.amount","bp.cycles","r.name as resource","bp.blueprintId","bl.name as blueprint"]).where("bp.id","=",n),output:L.object({id:L.string().min(1),resource:L.string().min(1),blueprint:L.string().min(1),blueprintId:L.string().min(1),amount:L.number().nonnegative(),cycles:L.number().int().nonnegative()})})}))}})},component(){const{entity:t}=FM.useLoaderData(),{tva:e}=ir({from:"__root__"}),n=e().slots;return d.jsxs("div",{className:n.base(),children:[d.jsx(Eoe,{entity:t}),d.jsx(Soe,{entity:t}),d.jsx(fo,{})]})}}),Noe=t=>d.jsx(SD,{items:[{id:"name",label:d.jsx(J,{label:"Building name (label)"}),render({entity:e}){return e.name}},{id:"cycles",label:d.jsx(J,{label:"Construction cycles (label)"}),render({entity:e}){return hn({number:e.cycles})}}],...t}),koe=$t("/$locale/apps/derivean/game/blueprint/$id/view")({component(){const{entity:t}=Vi({from:"/$locale/apps/derivean/game/blueprint/$id"});return d.jsx("div",{className:"w-1/2 mx-auto",children:d.jsx(Noe,{entity:t})})}}),MS=Ir(),Ioe=[MS({name:"name",header(){return d.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),MS({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:10}),MS({name:"passive",header(){return d.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Hb,{value:t})},size:10})],Coe=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:Ioe}),...e}),Jy=$t("/$locale/apps/derivean/game/blueprint/$id/requirements")({validateSearch:er(Er(xf)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Requirement as br").innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.resourceId","br.amount","br.passive"]).where("br.blueprintId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("br.id","=",l.id)),l?.idIn&&(u=u.where("br.id","in",l.idIn)),l?.resourceId&&(u=u.where("br.resourceId","=",l.resourceId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),passive:oo()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Jy.useLoaderData(),{filter:n,cursor:r}=Jy.useSearch(),i=Jy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Coe,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of requirements (label)"}),...wr(i)}})})}}),nd=Ir(),Toe=[nd({name:"name",header(){return d.jsx(J,{label:"Resource name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:co,to:"/$locale/apps/derivean/game/blueprint/production/$id/requirements",params:{locale:n,id:t.id},children:e})},size:18}),nd({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:8}),nd({name:"cycles",header(){return d.jsx(J,{label:"Production cycles (label)"})},render({value:t}){return hn({number:t})},size:8}),nd({name:"requirements",header(){return d.jsx(J,{label:"Required resources (label)"})},render({value:t}){return d.jsx(ux,{textTitle:d.jsx(J,{label:"Resource requirements (title)"}),textEmpty:d.jsx(J,{label:"No requirements (label)"}),requirements:t})},size:32}),nd({name:"resources",header(){return d.jsx(J,{label:"Required production resources (label)"})},render({value:t}){return d.jsx(Hd,{items:t,render:({entity:e})=>d.jsxs("div",{className:Cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:[d.jsx("div",{children:e.name}),d.jsxs("div",{className:"text-md font-bold text-slate-500",children:["x",hn({number:e.amount})]})]})})},size:32}),nd({name:"dependencies",header(){return d.jsx(J,{label:"Required production dependencies (label)"})},render({value:t}){const{locale:e}=sn({from:"/$locale"});return d.jsx(Hd,{items:t,render:({entity:n})=>d.jsx("div",{className:Cn(["flex","flex-row","gap-2","items-center","bg-sky-100","border","rounded","border-sky-300","py-1","px-2"]),children:d.jsx(Mt,{to:"/$locale/apps/derivean/game/blueprint/$id/requirements",params:{locale:e,id:n.blueprintId},children:n.name})})})},size:32})],joe=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:Toe}),...e}),Zy=$t("/$locale/apps/derivean/game/blueprint/$id/production")({validateSearch:er(Er(JN)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production as bp").innerJoin("Blueprint as bl","bl.id","bp.blueprintId").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.blueprintId","bp.cycles","bp.resourceId",o=>o.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'passive', ${l.ref("bpr.passive")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("requirements"),o=>o.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpr.id")},
                                                'amount', ${l.ref("bpr.amount")},
                                                'blueprintProductionId', ${l.ref("bpr.blueprintProductionId")},
                                                'resourceId', ${l.ref("bpr.resourceId")},
                                                'name', ${l.ref("r.name")}
                                            ))`.as("requirements")).whereRef("bpr.blueprintProductionId","=","bp.id").as("resources"),o=>o.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl2","bl2.id","bpd.blueprintId").select(l=>Pr`json_group_array(json_object(
                                                'id', ${l.ref("bpd.id")},
                                                'blueprintProductionId', ${l.ref("bpd.blueprintProductionId")},
                                                'blueprintId', ${l.ref("bpd.blueprintId")},
                                                'name', ${l.ref("bl2.name")}
                                            ))`.as("requirements")).whereRef("bpd.blueprintProductionId","=","bp.id").as("dependencies")]).where("bp.blueprintId","=",i).orderBy("r.name","asc"),output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),cycles:L.number().nonnegative(),requirements:ms(jm.entity.merge(L.object({name:L.string().min(1)}))),resources:ms(Om.entity.merge(L.object({name:L.string().min(1)}))),dependencies:ms(Tm.entity.merge(L.object({name:L.string().min(1)})))}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Zy.useLoaderData(),{filter:n,cursor:r}=Zy.useSearch(),i=Zy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(joe,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of productions (label)"}),...wr(i)}})})}}),Ooe=Ir(),Roe=[Ooe({name:"name",header(){return d.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/$id/view",params:{locale:n,id:t.dependencyId},children:e})},size:22})],qoe=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:Roe}),...e}),Yy=$t("/$locale/apps/derivean/game/blueprint/$id/dependencies")({validateSearch:er(Er(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Dependency as bd").innerJoin("Blueprint as bl","bl.id","bd.dependencyId").select(["bd.id","bl.name","bd.blueprintId","bd.dependencyId"]).where("bd.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bd.id","=",l.id)),l?.idIn&&(u=u.where("bd.id","in",l.idIn)),l?.blueprintId&&(u=u.where("bd.blueprintId","=",l.blueprintId)),l?.dependencyId&&(u=u.where("bd.dependencyId","=",l.dependencyId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1),dependencyId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Yy.useLoaderData(),{filter:n,cursor:r}=Yy.useSearch(),i=Yy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(qoe,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of dependencies (label)"}),...wr(i)}})})}}),Aoe=Ir(),Poe=[Aoe({name:"name",header(){return d.jsx(J,{label:"Conflict building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/game/blueprint/$id/conflicts",params:{locale:n,id:t.conflictId},children:e})},size:22})],Foe=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:Poe}),...e}),Xy=$t("/$locale/apps/derivean/game/blueprint/$id/conflicts")({validateSearch:er(Er(ic)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Conflict","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Conflict as bc").innerJoin("Blueprint as bl","bl.id","bc.conflictId").select(["bc.id","bl.name","bc.blueprintId","bc.conflictId"]).where("bc.blueprintId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bc.id","=",l.id)),l?.idIn&&(u=u.where("bc.id","in",l.idIn)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1),conflictId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Xy.useLoaderData(),{filter:n,cursor:r}=Xy.useSearch(),i=Xy.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(Foe,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of conflicts (label)"}),...wr(i)}})})}}),DM=Uie({shape:L.object({blueprintId:L.string().min(1),constructionId:L.string().optional(),productionId:L.string().optional(),recurringProductionId:L.string().optional(),x:Wi(),y:Wi()}),filter:Ki.merge(L.object({userId:L.string().optional(),blueprintId:L.string().optional(),name:L.string().optional()}))}),_3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(DM.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"blueprintId",label:d.jsx(J,{label:"Select blueprint (label)"}),children:d.jsx(Ui,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:rc,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},Doe=Ir(),Loe=[Doe({name:"name",header(){return d.jsx(J,{label:"Building name (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsxs("div",{className:"flex flex-row gap-2",children:[d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId}}),e]})},size:14})],Moe=({userId:t,table:e,...n})=>{const r=Hn([["Building"]]);return d.jsx(Nr,{table:kr({...e,columns:Loe}),action:{table:t?()=>d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create building (menu)"}),textTitle:d.jsx(J,{label:"Create building (modal)"}),icon:Fn,children:d.jsx(_3,{mutation:Zt({async mutationFn(i){return In.promise(It.transaction().execute(s=>s.insertInto("Building").values({id:Tn(),...i,userId:t}).returningAll().executeTakeFirstOrThrow()),xr("Create building"))},async onSuccess(){await r()}})})})}):void 0,row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit building (modal)"}),icon:rc,children:d.jsx(_3,{defaultValues:i,mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(o=>o.updateTable("Building").set(s).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Edit building"))},async onSuccess(){await r()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete building (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Building").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Building delete (content)"}),textToast:"Building delete",invalidator:r})})]})}},...n})},$p=$t("/$locale/apps/derivean/root/user/$id/building/list")({validateSearch:er(Er(DM)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Building","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(s=>sr({select:s.selectFrom("Building as b").innerJoin("Blueprint as bl","bl.id","b.blueprintId").select(["b.id","bl.name","b.blueprintId"]).where("b.userId","=",i),output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=$p.useLoaderData(),{filter:n,cursor:r,selection:i}=$p.useSearch(),{id:s}=$p.useParams(),o=$p.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Moe,{userId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of buildings (label)"}),...wr(o)}})})}}),S3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(Om.shape),defaultValues:{amount:1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"resourceId",label:d.jsx(J,{label:"Requirement (label)"}),children:d.jsx(Ui,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(bf,{allowEmpty:!0,...u})})}),d.jsx(En,{formState:s.formState,name:"amount",label:d.jsx(J,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Fn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},E3=Ir(),$oe=[E3({name:"name",header(){return d.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),E3({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:10})],Boe=({blueprintProductionId:t,table:e,...n})=>{const r=Hn([["Blueprint_Production_Resource"],["Blueprint_Production"],["Resource"]]);return d.jsx(Nr,{table:kr({...e,columns:$oe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create production resource requirement (menu)"}),textTitle:d.jsx(J,{label:"Create production resource requirement (modal)"}),icon:Fn,children:({close:i})=>d.jsx(S3,{mutation:Zt({async mutationFn(s){return It.transaction().execute(async o=>o.insertInto("Blueprint_Production_Resource").values({id:Tn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit production resource requirement (modal)"}),icon:Fn,children:({close:s})=>d.jsx(S3,{defaultValues:i,mutation:Zt({async mutationFn(o){return It.transaction().execute(async l=>l.updateTable("Blueprint_Production_Resource").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete production resource requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Resource").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete production resource requirement (content)"}),textToast:"Delete production resource requirement item",invalidator:r})})]})}},...n})},Bp=$t("/$locale/apps/derivean/root/blueprint/production/$id/resources")({validateSearch:er(Er(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Bp.useLoaderData(),{filter:n,cursor:r,selection:i}=Bp.useSearch(),{id:s}=Bp.useParams(),o=Bp.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(Boe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of production resource requirements (label)"}),...wr(o)}})})}}),N3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(jm.shape),defaultValues:{amount:1,passive:!1,...e}}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"resourceId",label:d.jsx(J,{label:"Requirement (label)"}),children:d.jsx(Ui,{control:s.control,name:"resourceId",render:({field:{ref:l,...u}})=>d.jsx(bf,{allowEmpty:!0,...u})})}),d.jsx(En,{formState:s.formState,name:"amount",label:d.jsx(J,{label:"Amount (label)"}),children:d.jsx("input",{type:"number",className:o.input(),...s.register("amount")})}),d.jsx(En,{formState:s.formState,name:"passive",label:d.jsx(J,{label:"Passive requirement (label)"}),hint:d.jsx(J,{label:"Passive requirement (hint)"}),children:d.jsx(Ui,{control:s.control,name:"passive",render:({field:{ref:l,...u}})=>d.jsx(_D,{...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Fn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},$S=Ir(),zoe=[$S({name:"name",header(){return d.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),$S({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:10}),$S({name:"passive",header(){return d.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Hb,{value:t})},size:10})],Woe=({blueprintProductionId:t,table:e,...n})=>{const r=Hn([["Blueprint_Production_Requirement"],["Blueprint_Production"],["Resource"]]);return d.jsx(Nr,{table:kr({...e,columns:zoe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create production requirement (menu)"}),textTitle:d.jsx(J,{label:"Create production requirement (modal)"}),icon:Fn,children:({close:i})=>d.jsx(N3,{mutation:Zt({async mutationFn(s){return It.transaction().execute(async o=>o.insertInto("Blueprint_Production_Requirement").values({id:Tn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit production requirement (modal)"}),icon:Fn,children:({close:s})=>d.jsx(N3,{defaultValues:i,mutation:Zt({async mutationFn(o){return It.transaction().execute(async l=>l.updateTable("Blueprint_Production_Requirement").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow())},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete production requirement (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Requirement").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete production requirement (content)"}),textToast:"Delete production requirement item",invalidator:r})})]})}},...n})},zp=$t("/$locale/apps/derivean/root/blueprint/production/$id/requirements")({validateSearch:er(Er(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),passive:oo()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=zp.useLoaderData(),{filter:n,cursor:r,selection:i}=zp.useSearch(),{id:s}=zp.useParams(),o=zp.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(Woe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of production requirements (label)"}),...wr(o)}})})}}),k3=({mutation:t,defaultValues:e,variant:n,tva:r=Ci,css:i})=>{const s=Ti({resolver:ji(Tm.shape),defaultValues:e}),o=r({...n,isLoading:s.formState.isLoading,isSubmitting:s.formState.isSubmitting,css:i}).slots;return d.jsxs("form",{className:o.base(),onSubmit:bs({form:s,mutation:t}),children:[d.jsx(mi,{variant:{highlight:!0},error:s.formState.errors.root}),d.jsx(En,{formState:s.formState,name:"blueprintId",label:d.jsx(J,{label:"Blueprint dependency (label)"}),children:d.jsx(Ui,{control:s.control,name:"blueprintId",render:({field:{ref:l,...u}})=>d.jsx(Cm,{textTitle:d.jsx(J,{label:"Select blueprint (title)"}),allowEmpty:!0,...u})})}),d.jsx("div",{className:"flex flex-row justify-between gap-8",children:d.jsx(jn,{iconEnabled:Rn,type:"submit",children:d.jsx(J,{label:"Save (submit)"})})})]})},Uoe=Ir(),Voe=[Uoe({name:"name",header(){return d.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],Hoe=({blueprintProductionId:t,table:e,...n})=>{const r=Hn([["Blueprint_Production_Dependency"],["Blueprint"]]);return d.jsx(Nr,{table:kr({...e,columns:Voe}),action:{table(){return d.jsx(Qn,{children:d.jsx(yn,{label:d.jsx(J,{label:"Create blueprint production dependency (menu)"}),textTitle:d.jsx(J,{label:"Create blueprint production dependency (modal)"}),icon:Rn,children:({close:i})=>d.jsx(k3,{mutation:Zt({async mutationFn(s){return In.promise(It.transaction().execute(async o=>{const l=o.insertInto("Blueprint_Production_Dependency").values({id:Tn(),...s,blueprintProductionId:t}).returningAll().executeTakeFirstOrThrow();return await Qh({tx:o}),l}),xr("Create blueprint production dependency"))},async onSuccess(){await r(),i()}})})})})},row({data:i}){return d.jsxs(Qn,{children:[d.jsx(yn,{label:d.jsx(J,{label:"Edit (menu)"}),textTitle:d.jsx(J,{label:"Edit blueprint production dependency (modal)"}),icon:Rn,children:({close:s})=>d.jsx(k3,{defaultValues:i,mutation:Zt({async mutationFn(o){return In.promise(It.transaction().execute(async l=>l.updateTable("Blueprint_Production_Dependency").set(o).where("id","=",i.id).returningAll().executeTakeFirstOrThrow()),xr("Update blueprint production dependency"))},async onSuccess(){await r(),s()}})})}),d.jsx(yn,{icon:ei,label:d.jsx(J,{label:"Delete (menu)"}),textTitle:d.jsx(J,{label:"Delete blueprint production dependency (modal)"}),css:{base:["text-red-500","hover:text-red-600","hover:bg-red-50"]},children:d.jsx(Ji,{callback:async()=>It.transaction().execute(async s=>s.deleteFrom("Blueprint_Production_Dependency").where("id","=",i.id).execute()),textContent:d.jsx(J,{label:"Delete blueprint production dependency (content)"}),textToast:"Delete blueprint production dependency",invalidator:r})})]})}},...n})},Wp=$t("/$locale/apps/derivean/root/blueprint/production/$id/dependencies")({validateSearch:er(Er(Tm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=Wp.useLoaderData(),{filter:n,cursor:r,selection:i}=Wp.useSearch(),{id:s}=Wp.useParams(),o=Wp.useNavigate(),{tva:l}=ir({from:"__root__"}),u=l().slots;return d.jsx("div",{className:u.base(),children:d.jsx(Hoe,{blueprintProductionId:s,table:{data:t,filter:{value:n,set:_r(o)},selection:{type:"multi",value:i,set:Gi(o)}},fulltext:{value:n?.fulltext,set:Sr(o)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of dependencies (label)"}),...wr(o)}})})}}),Koe=({queue:t,inventory:e})=>{const n=e.find(i=>i.resourceId===t.resourceId),r=n&&n.amount+t.amount>n.limit;return d.jsxs("div",{className:Cn(["flex","flex-col","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300",r?["border-red-400","hover:border-red-600"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsx("div",{className:"flex flex-row gap-2 items-center",children:d.jsxs(Ps,{children:["x",hn({number:t.amount})]})})]}),d.jsx(Ha,{css:{progress:r?["bg-red-500"]:void 0},value:100*t.cycle/t.cycles})]})},Qoe=({building:t,queue:e,inventory:n,...r})=>{const{locale:i}=sn({from:"/$locale"});return d.jsx(Bo,{icon:d1,textTitle:d.jsx(J,{label:"Production queue (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:i,id:t.id}}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:i,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...r,children:e.length>0?e.map(s=>d.jsx(Koe,{queue:s,inventory:n},s.id)):d.jsxs("div",{className:Cn(["flex","flex-col","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:[d.jsx(J,{label:"Production queue is empty. (label)"}),d.jsx(Mt,{icon:d1,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:i,id:t.id},children:d.jsx(J,{label:"Plan queue (label)"})})]})})},LM=$t("/$locale/apps/derivean/map/building/$id/production/queue")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{queue:await t.ensureQueryData({queryKey:["GameMap","building","production","queue",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Production as p").innerJoin("Blueprint_Production as bp","bp.id","p.blueprintProductionId").innerJoin("Resource as r","r.id","bp.resourceId").select(["p.id","r.name","bp.resourceId","p.cycle","bp.amount","bp.cycles"]).where("p.buildingId","=",n),output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),cycle:L.number().int().nonnegative(),cycles:L.number().int().nonnegative()})}))}}),inventory:await t.ensureQueryData({queryKey:["GameMap","building","inventory",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Inventory as i").innerJoin("Resource as r","r.id","i.resourceId").select(["i.id","i.resourceId","i.amount","i.limit","r.name"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",n)).orderBy("r.name"),query({select:i,where:s}){let o=i;if(s?.fulltext){const l=`%${s.fulltext}%`.toLowerCase();o=o.where(u=>u.or([u("r.name","like",l)]))}return o},output:L.object({id:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),limit:L.number().nonnegative(),name:L.string().min(1)})}))}})}},component(){const{building:t}=Vi({from:"/$locale/apps/derivean/map/building/$id"}),{queue:e,inventory:n}=LM.useLoaderData();return d.jsx(Qoe,{building:t,queue:e,inventory:n})}}),Goe=({building:t,production:e})=>{const{locale:n}=sn({from:"/$locale"}),r=Hn([["GameMap"]]),i=Zt({async mutationFn({blueprintProductionId:u,buildingId:f}){return It.transaction().execute(async p=>p.updateTable("Building").set({productionId:u}).where("id","=",f).execute())},async onSuccess(){await r()}}),s=Zt({async mutationFn({buildingId:u}){return It.transaction().execute(async f=>f.updateTable("Building").set({productionId:null}).where("id","=",u).execute())},async onSuccess(){await r()}}),o=Zt({async mutationFn({blueprintProductionId:u,buildingId:f}){return It.transaction().execute(async p=>p.updateTable("Building").set({recurringProductionId:u}).where("id","=",f).execute())},async onSuccess(){await r()}}),l=Zt({async mutationFn({buildingId:u}){return It.transaction().execute(async f=>f.updateTable("Building").set({recurringProductionId:null}).where("id","=",u).execute())},async onSuccess(){await r()}});return d.jsxs("div",{className:Cn(["flex","flex-row","gap-2","items-center","justify-between","border","p-4","rounded","border-slate-200","hover:border-slate-300","hover:bg-slate-100"]),children:[d.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[t.productionId===e.id?d.jsx(jn,{iconEnabled:"icon-[tabler--basket]",loading:s.isPending,onClick:()=>{s.mutate({buildingId:t.id})}}):d.jsx(jn,{iconEnabled:"icon-[solar--play-outline]",iconDisabled:"icon-[tabler--basket]",loading:i.isPending,onClick:()=>{i.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),t.recurringProductionId===e.id?d.jsx(jn,{iconEnabled:"icon-[tabler--basket]",loading:l.isPending,onClick:()=>{l.mutate({buildingId:t.id})}}):d.jsx(jn,{iconEnabled:"icon-[oui--refresh]",loading:o.isPending,onClick:()=>{o.mutate({blueprintProductionId:e.id,buildingId:t.id})}}),d.jsxs(Mt,{to:"/$locale/apps/derivean/map/building/$id/production/$productionId/requirements",params:{locale:n,id:t.id,productionId:e.id},children:[e.name,d.jsxs(Ps,{children:["x",hn({number:e.amount})]})]})]}),d.jsx(pM,{cycles:e.cycles})]})},Joe=({building:t,production:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return d.jsx(Bo,{icon:co,textTitle:d.jsx(J,{label:"Building production (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/view",params:{locale:r,id:t.id}}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>d.jsx(Goe,{building:t,production:i},i.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-amber-400","p-4","bg-amber-200","font-bold"]),children:d.jsx(J,{label:"This building does not produce anything. (label)"})})})},MM=$t("/$locale/apps/derivean/map/building/$id/production/list")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{production:await t.ensureQueryData({queryKey:["GameMap","building","production",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Blueprint_Production as bp").innerJoin("Resource as r","r.id","bp.resourceId").select(["bp.id","r.name","bp.amount","bp.cycles"]).where("bp.blueprintId","=",r.selectFrom("Building as b").select("b.blueprintId").where("b.id","=",n)),output:L.object({id:L.string().min(1),name:L.string().min(1),amount:L.number().nonnegative(),cycles:L.number().int().nonnegative()})}))}})}},component(){const{building:t}=Vi({from:"/$locale/apps/derivean/map/building/$id"}),{production:e}=MM.useLoaderData();return d.jsx(Joe,{building:t,production:e})}}),Zoe=({requirement:t})=>{const e=t.available||0;return d.jsxs("div",{className:Cn(["flex","flex-col","gap-2","rounded-md","border","border-slate-300","p-2","cursor-default","hover:bg-slate-100",t.amount>e?["border-red-400","hover:border-red-600","hover:bg-red-50"]:void 0]),children:[d.jsxs("div",{className:"flex flex-row items-center justify-between",children:[d.jsx("div",{className:"font-bold",children:t.name}),d.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d.jsx("div",{children:hn({number:e})}),d.jsx("div",{children:"/"}),d.jsx("div",{className:"font-bold",children:hn({number:t.amount})})]})]}),d.jsx(Ha,{value:100*e/t.amount})]})},Yoe=({requirement:t,...e})=>d.jsx(Bo,{icon:GN,textTitle:d.jsx(J,{label:"Construction requirements (label)"}),...e,children:t.length>0?t.map(n=>d.jsx(Zoe,{requirement:n},n.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(J,{label:"There are no construction requirements (label)"})})}),$M=$t("/$locale/apps/derivean/map/building/$id/construction/requirements")({async loader({context:{queryClient:t,kysely:e},params:{id:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","construction","requirement",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Blueprint_Requirement as br").innerJoin("Building as bg",i=>i.onRef("bg.blueprintId","=","br.blueprintId").on("bg.id","=",n)).innerJoin("Resource as r","r.id","br.resourceId").select(["br.id","r.name","br.amount","br.passive",i=>i.selectFrom("Inventory as i").select(["i.amount"]).where("i.id","in",r.selectFrom("Building_Inventory as bi").select("bi.inventoryId").where("bi.buildingId","=",n)).whereRef("i.resourceId","=","br.resourceId").limit(1).as("available")]).orderBy("r.name","asc"),output:L.object({id:L.string().min(1),name:L.string().min(1),amount:L.number().nonnegative(),available:L.number().nonnegative().nullish(),passive:oo()})}))}})}},component(){const{requirement:t}=$M.useLoaderData();return d.jsx(Yoe,{requirement:t})}}),I3=Ir(),Xoe=[I3({name:"name",header(){return d.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:22}),I3({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:10})],eae=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:Xoe}),...e}),ev=$t("/$locale/apps/derivean/game/blueprint/production/$id/resources")({validateSearch:er(Er(Om)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Resource","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Resource as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=ev.useLoaderData(),{filter:n,cursor:r}=ev.useSearch(),i=ev.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(eae,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of production resource requirements (label)"}),...wr(i)}})})}}),BS=Ir(),tae=[BS({name:"name",header(){return d.jsx(J,{label:"Requirement name (label)"})},render({value:t}){return t},filter:{path:"resourceId",onFilter({data:t,filter:e}){e.shallow("resourceID",t.resourceId)}},size:12}),BS({name:"amount",header(){return d.jsx(J,{label:"Amount (label)"})},render({value:t}){return hn({number:t})},size:10}),BS({name:"passive",header(){return d.jsx(J,{label:"Passive requirement (label)"})},render({value:t}){return d.jsx(Hb,{value:t})},size:10})],nae=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:tae}),...e}),tv=$t("/$locale/apps/derivean/game/blueprint/production/$id/requirements")({validateSearch:er(Er(jm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Requirement","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.resourceId","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",i).orderBy("r.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpr.id","=",l.id)),l?.idIn&&(u=u.where("bpr.id","in",l.idIn)),l?.resourceId&&(u=u.where("bpr.resourceId","=",l.resourceId)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),resourceId:L.string().min(1),amount:L.number().nonnegative(),passive:oo()}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=tv.useLoaderData(),{filter:n,cursor:r}=tv.useSearch(),i=tv.useNavigate();return d.jsx(d.Fragment,{children:d.jsx(nae,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of production requirements (label)"}),...wr(i)}})})}}),rae=Ir(),iae=[rae({name:"name",header(){return d.jsx(J,{label:"Required building (label)"})},render({data:t,value:e}){const{locale:n}=sn({from:"/$locale"});return d.jsx(Mt,{icon:Rn,to:"/$locale/apps/derivean/root/blueprint/$id/view",params:{locale:n,id:t.blueprintId},children:e})},size:22})],sae=({table:t,...e})=>d.jsx(Nr,{table:kr({...t,columns:iae}),...e}),nv=$t("/$locale/apps/derivean/game/blueprint/production/$id/dependencies")({validateSearch:er(Er(Tm)),loaderDeps({search:{filter:t,cursor:e,sort:n}}){return{filter:t,cursor:e,sort:n}},async loader({context:{queryClient:t,kysely:e},deps:{filter:n,cursor:r},params:{id:i}}){return t.ensureQueryData({queryKey:["Blueprint_Production_Dependency","list-count",i,{filter:n,cursor:r}],async queryFn(){return e.transaction().execute(async s=>sr({select:s.selectFrom("Blueprint_Production_Dependency as bpd").innerJoin("Blueprint as bl","bl.id","bpd.blueprintId").select(["bpd.id","bl.name","bpd.blueprintId"]).where("bpd.blueprintProductionId","=",i).orderBy("bl.name","asc"),query({select:o,where:l}){let u=o;return l?.id&&(u=u.where("bpd.id","=",l.id)),l?.idIn&&(u=u.where("bpd.id","in",l.idIn)),u},output:L.object({id:L.string().min(1),name:L.string().min(1),blueprintId:L.string().min(1)}),filter:n,cursor:r}))}})},component(){const{data:t,count:e}=nv.useLoaderData(),{filter:n,cursor:r}=nv.useSearch(),i=nv.useNavigate(),{tva:s}=ir({from:"__root__"}),o=s().slots;return d.jsx("div",{className:o.base(),children:d.jsx(sae,{table:{data:t,filter:{value:n,set:_r(i)}},fulltext:{value:n?.fulltext,set:Sr(i)},cursor:{count:e,cursor:r,textTotal:d.jsx(J,{label:"Number of dependencies (label)"}),...wr(i)}})})}}),oae=({building:t,requirement:e,...n})=>{const{locale:r}=sn({from:"/$locale"});return d.jsx(Bo,{icon:Fn,textTitle:d.jsx(J,{label:"Production requirements (label)"}),textSubTitle:d.jsxs(d.Fragment,{children:[d.jsx(Mt,{icon:ys,to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id}}),d.jsx(Mt,{to:"/$locale/apps/derivean/map/building/$id/production/list",params:{locale:r,id:t.id},search:{zoomToId:t.id},children:t.name})]}),...n,children:e.length>0?e.map(i=>d.jsx(AM,{requirement:i},i.id)):d.jsx("div",{className:Cn(["flex","items-center","justify-center","rounded","border","border-green-400","p-4","bg-green-200","font-bold"]),children:d.jsx(J,{label:"There are no requirements. (label)"})})})},BM=$t("/$locale/apps/derivean/map/building/$id/production/$productionId/requirements")({async loader({context:{queryClient:t,kysely:e},params:{productionId:n}}){return{requirement:await t.ensureQueryData({queryKey:["GameMap","building","production",n],async queryFn(){return e.transaction().execute(async r=>Yr({select:r.selectFrom("Blueprint_Production_Requirement as bpr").innerJoin("Resource as r","r.id","bpr.resourceId").select(["bpr.id","r.name","bpr.amount","bpr.passive"]).where("bpr.blueprintProductionId","=",n),output:L.object({id:L.string().min(1),name:L.string().min(1),amount:L.number().nonnegative(),passive:oo()})}))}})}},component(){const{building:t}=Vi({from:"/$locale/apps/derivean/map/building/$id"}),{requirement:e}=BM.useLoaderData();return d.jsx(oae,{building:t,requirement:e})}}),ZN=gJ.update({id:"/$locale",path:"/$locale",getParentRoute:()=>xN}),aae=bJ.update({id:"/",path:"/",getParentRoute:()=>xN}),lae=xJ.update({id:"/",path:"/",getParentRoute:()=>ZN}),sc=_J.update({id:"/apps/derivean",path:"/apps/derivean",getParentRoute:()=>ZN}),po=NJ.update({id:"/root",path:"/root",getParentRoute:()=>sc}),pu=a1.update({id:"/map",path:"/map",getParentRoute:()=>sc}),wf=Sre.update({id:"/game",path:"/game",getParentRoute:()=>sc}),cae=Cre.update({id:"/",path:"/",getParentRoute:()=>po}),uae=Tre.update({id:"/",path:"/",getParentRoute:()=>pu}),dae=jre.update({id:"/",path:"/",getParentRoute:()=>wf}),fae=c1.update({id:"/editor",path:"/editor",getParentRoute:()=>po}),pae=ise.update({id:"/public/register",path:"/public/register",getParentRoute:()=>sc}),hae=sse.update({id:"/public/logout",path:"/public/logout",getParentRoute:()=>sc}),mae=cse.update({id:"/public/login",path:"/public/login",getParentRoute:()=>sc}),gae=zy.update({id:"/inventory",path:"/inventory",getParentRoute:()=>pu}),yae=hM.update({id:"/construction",path:"/construction",getParentRoute:()=>pu}),vae=Wy.update({id:"/inventory",path:"/inventory",getParentRoute:()=>wf}),bae=mM.update({id:"/db/schema",path:"/db/schema",getParentRoute:()=>sc}),xae=Uy.update({id:"/user/list",path:"/user/list",getParentRoute:()=>po}),dx=gM.update({id:"/user/$id",path:"/user/$id",getParentRoute:()=>po}),wae=Vy.update({id:"/tag/list",path:"/tag/list",getParentRoute:()=>po}),_ae=Hy.update({id:"/resource/list",path:"/resource/list",getParentRoute:()=>po}),zM=xM.update({id:"/resource/$id",path:"/resource/$id",getParentRoute:()=>po}),Sae=Ky.update({id:"/default/inventory",path:"/default/inventory",getParentRoute:()=>po}),Eae=Qy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>po}),oc=NM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>po}),YN=Pse.update({id:"/route/$id",path:"/route/$id",getParentRoute:()=>pu}),ac=Fse.update({id:"/building/$id",path:"/building/$id",getParentRoute:()=>pu}),WM=Dse.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>pu}),Nae=Gy.update({id:"/blueprint/list",path:"/blueprint/list",getParentRoute:()=>wf}),_f=kM.update({id:"/blueprint/$id",path:"/blueprint/$id",getParentRoute:()=>wf}),kae=zse.update({id:"/view",path:"/view",getParentRoute:()=>dx}),Iae=qp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>dx}),Cae=Vse.update({id:"/view",path:"/view",getParentRoute:()=>zM}),fx=CM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>po}),Tae=TM.update({id:"/view",path:"/view",getParentRoute:()=>oc}),jae=Ap.update({id:"/requirements",path:"/requirements",getParentRoute:()=>oc}),Oae=Pp.update({id:"/production",path:"/production",getParentRoute:()=>oc}),Rae=Fp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>oc}),qae=jM.update({id:"/edit",path:"/edit",getParentRoute:()=>oc}),Aae=Dp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>oc}),Pae=Lp.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>oc}),Fae=OM.update({id:"/resources",path:"/resources",getParentRoute:()=>YN}),Dae=RM.update({id:"/construction",path:"/construction",getParentRoute:()=>YN}),Lae=boe.update({id:"/view",path:"/view",getParentRoute:()=>ac}),Mae=qM.update({id:"/routes",path:"/routes",getParentRoute:()=>ac}),$ae=Mp.update({id:"/inventory",path:"/inventory",getParentRoute:()=>ac}),Bae=PM.update({id:"/requirements",path:"/requirements",getParentRoute:()=>WM}),px=FM.update({id:"/blueprint/production/$id",path:"/blueprint/production/$id",getParentRoute:()=>wf}),zae=koe.update({id:"/view",path:"/view",getParentRoute:()=>_f}),Wae=Jy.update({id:"/requirements",path:"/requirements",getParentRoute:()=>_f}),Uae=Zy.update({id:"/production",path:"/production",getParentRoute:()=>_f}),Vae=Yy.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>_f}),Hae=Xy.update({id:"/conflicts",path:"/conflicts",getParentRoute:()=>_f}),Kae=$p.update({id:"/building/list",path:"/building/list",getParentRoute:()=>dx}),Qae=Bp.update({id:"/resources",path:"/resources",getParentRoute:()=>fx}),Gae=zp.update({id:"/requirements",path:"/requirements",getParentRoute:()=>fx}),Jae=Wp.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>fx}),Zae=LM.update({id:"/production/queue",path:"/production/queue",getParentRoute:()=>ac}),Yae=MM.update({id:"/production/list",path:"/production/list",getParentRoute:()=>ac}),Xae=$M.update({id:"/construction/requirements",path:"/construction/requirements",getParentRoute:()=>ac}),ele=ev.update({id:"/resources",path:"/resources",getParentRoute:()=>px}),tle=tv.update({id:"/requirements",path:"/requirements",getParentRoute:()=>px}),nle=nv.update({id:"/dependencies",path:"/dependencies",getParentRoute:()=>px}),rle=BM.update({id:"/production/$productionId/requirements",path:"/production/$productionId/requirements",getParentRoute:()=>ac}),ile={LocaleAppsDeriveanGameBlueprintIdConflictsRoute:Hae,LocaleAppsDeriveanGameBlueprintIdDependenciesRoute:Vae,LocaleAppsDeriveanGameBlueprintIdProductionRoute:Uae,LocaleAppsDeriveanGameBlueprintIdRequirementsRoute:Wae,LocaleAppsDeriveanGameBlueprintIdViewRoute:zae},sle=_f._addFileChildren(ile),ole={LocaleAppsDeriveanGameBlueprintProductionIdDependenciesRoute:nle,LocaleAppsDeriveanGameBlueprintProductionIdRequirementsRoute:tle,LocaleAppsDeriveanGameBlueprintProductionIdResourcesRoute:ele},ale=px._addFileChildren(ole),lle={LocaleAppsDeriveanGameInventoryRoute:vae,LocaleAppsDeriveanGameIndexRoute:dae,LocaleAppsDeriveanGameBlueprintIdRoute:sle,LocaleAppsDeriveanGameBlueprintListRoute:Nae,LocaleAppsDeriveanGameBlueprintProductionIdRoute:ale},cle=wf._addFileChildren(lle),ule={LocaleAppsDeriveanMapBlueprintIdRequirementsRoute:Bae},dle=WM._addFileChildren(ule),fle={LocaleAppsDeriveanMapBuildingIdInventoryRoute:$ae,LocaleAppsDeriveanMapBuildingIdRoutesRoute:Mae,LocaleAppsDeriveanMapBuildingIdViewRoute:Lae,LocaleAppsDeriveanMapBuildingIdConstructionRequirementsRoute:Xae,LocaleAppsDeriveanMapBuildingIdProductionListRoute:Yae,LocaleAppsDeriveanMapBuildingIdProductionQueueRoute:Zae,LocaleAppsDeriveanMapBuildingIdProductionProductionIdRequirementsRoute:rle},ple=ac._addFileChildren(fle),hle={LocaleAppsDeriveanMapRouteIdConstructionRoute:Dae,LocaleAppsDeriveanMapRouteIdResourcesRoute:Fae},mle=YN._addFileChildren(hle),gle={LocaleAppsDeriveanMapConstructionRoute:yae,LocaleAppsDeriveanMapInventoryRoute:gae,LocaleAppsDeriveanMapIndexRoute:uae,LocaleAppsDeriveanMapBlueprintIdRoute:dle,LocaleAppsDeriveanMapBuildingIdRoute:ple,LocaleAppsDeriveanMapRouteIdRoute:mle},yle=pu._addFileChildren(gle),vle={LocaleAppsDeriveanRootBlueprintIdConflictsRoute:Pae,LocaleAppsDeriveanRootBlueprintIdDependenciesRoute:Aae,LocaleAppsDeriveanRootBlueprintIdEditRoute:qae,LocaleAppsDeriveanRootBlueprintIdInventoryRoute:Rae,LocaleAppsDeriveanRootBlueprintIdProductionRoute:Oae,LocaleAppsDeriveanRootBlueprintIdRequirementsRoute:jae,LocaleAppsDeriveanRootBlueprintIdViewRoute:Tae},ble=oc._addFileChildren(vle),xle={LocaleAppsDeriveanRootResourceIdViewRoute:Cae},wle=zM._addFileChildren(xle),_le={LocaleAppsDeriveanRootUserIdInventoryRoute:Iae,LocaleAppsDeriveanRootUserIdViewRoute:kae,LocaleAppsDeriveanRootUserIdBuildingListRoute:Kae},Sle=dx._addFileChildren(_le),Ele={LocaleAppsDeriveanRootBlueprintProductionIdDependenciesRoute:Jae,LocaleAppsDeriveanRootBlueprintProductionIdRequirementsRoute:Gae,LocaleAppsDeriveanRootBlueprintProductionIdResourcesRoute:Qae},Nle=fx._addFileChildren(Ele),kle={LocaleAppsDeriveanRootEditorRoute:fae,LocaleAppsDeriveanRootIndexRoute:cae,LocaleAppsDeriveanRootBlueprintIdRoute:ble,LocaleAppsDeriveanRootBlueprintListRoute:Eae,LocaleAppsDeriveanRootDefaultInventoryRoute:Sae,LocaleAppsDeriveanRootResourceIdRoute:wle,LocaleAppsDeriveanRootResourceListRoute:_ae,LocaleAppsDeriveanRootTagListRoute:wae,LocaleAppsDeriveanRootUserIdRoute:Sle,LocaleAppsDeriveanRootUserListRoute:xae,LocaleAppsDeriveanRootBlueprintProductionIdRoute:Nle},Ile=po._addFileChildren(kle),Cle={LocaleAppsDeriveanGameRoute:cle,LocaleAppsDeriveanMapRoute:yle,LocaleAppsDeriveanRootRoute:Ile,LocaleAppsDeriveanDbSchemaRoute:bae,LocaleAppsDeriveanPublicLoginRoute:mae,LocaleAppsDeriveanPublicLogoutRoute:hae,LocaleAppsDeriveanPublicRegisterRoute:pae},Tle=sc._addFileChildren(Cle),jle={LocaleIndexRoute:lae,LocaleAppsDeriveanRoute:Tle},Ole=ZN._addFileChildren(jle),Rle={IndexRoute:aae,LocaleRoute:Ole},qle=xN._addFileChildren(Rle)._addFileTypes(),UM=new hB({defaultOptions:{queries:{placeholderData:tB}}}),Ale=d4({routeTree:qle,context:{queryClient:UM,tva:YQ,async session(){return vm.parse(null)},kysely:It},defaultPendingComponent:MG,defaultPreload:"intent",defaultPreloadStaleTime:0,defaultPendingMinMs:200}),C3=document.getElementById("app");yV({limit:{maxRequests:10,perMilliseconds:100}});C3.innerHTML||pJ.createRoot(C3).render(d.jsx(xB,{client:UM,children:d.jsx(D4,{router:Ale})}))})();